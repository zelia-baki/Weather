const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-B9Swlk47.js","assets/stackblur-es-DkvDaMAv.js","assets/index.es-CfjcQ3bK.js"])))=>i.map(i=>d[i]);
var TJ=Object.defineProperty;var LJ=(t,e,r)=>e in t?TJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ni=(t,e,r)=>LJ(t,typeof e!="symbol"?e+"":e,r);function IJ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var l9={exports:{}},q4={},c9={exports:{}},mo={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_=Symbol.for("react.element"),NJ=Symbol.for("react.portal"),FJ=Symbol.for("react.fragment"),PJ=Symbol.for("react.strict_mode"),jJ=Symbol.for("react.profiler"),MJ=Symbol.for("react.provider"),kJ=Symbol.for("react.context"),DJ=Symbol.for("react.forward_ref"),OJ=Symbol.for("react.suspense"),RJ=Symbol.for("react.memo"),UJ=Symbol.for("react.lazy"),gk=Symbol.iterator;function zJ(t){return t===null||typeof t!="object"?null:(t=gk&&t[gk]||t["@@iterator"],typeof t=="function"?t:null)}var u9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d9=Object.assign,h9={};function B1(t,e,r){this.props=t,this.context=e,this.refs=h9,this.updater=r||u9}B1.prototype.isReactComponent={};B1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};B1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f9(){}f9.prototype=B1.prototype;function oI(t,e,r){this.props=t,this.context=e,this.refs=h9,this.updater=r||u9}var aI=oI.prototype=new f9;aI.constructor=oI;d9(aI,B1.prototype);aI.isPureReactComponent=!0;var yk=Array.isArray,p9=Object.prototype.hasOwnProperty,lI={current:null},A9={key:!0,ref:!0,__self:!0,__source:!0};function m9(t,e,r){var n,s={},o=null,c=null;if(e!=null)for(n in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)p9.call(e,n)&&!A9.hasOwnProperty(n)&&(s[n]=e[n]);var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){for(var i=Array(u),m=0;m<u;m++)i[m]=arguments[m+2];s.children=i}if(t&&t.defaultProps)for(n in u=t.defaultProps,u)s[n]===void 0&&(s[n]=u[n]);return{$$typeof:W_,type:t,key:o,ref:c,props:s,_owner:lI.current}}function QJ(t,e){return{$$typeof:W_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cI(t){return typeof t=="object"&&t!==null&&t.$$typeof===W_}function HJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var vk=/\/+/g;function zB(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HJ(""+t.key):e.toString(36)}function q2(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case W_:case NJ:c=!0}}if(c)return c=t,s=s(c),t=n===""?"."+zB(c,0):n,yk(s)?(r="",t!=null&&(r=t.replace(vk,"$&/")+"/"),q2(s,e,r,"",function(m){return m})):s!=null&&(cI(s)&&(s=QJ(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(vk,"$&/")+"/")+t)),e.push(s)),1;if(c=0,n=n===""?".":n+":",yk(t))for(var u=0;u<t.length;u++){o=t[u];var i=n+zB(o,u);c+=q2(o,e,r,i,s)}else if(i=zJ(t),typeof i=="function")for(t=i.call(t),u=0;!(o=t.next()).done;)o=o.value,i=n+zB(o,u++),c+=q2(o,e,r,i,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Sw(t,e,r){if(t==null)return t;var n=[],s=0;return q2(t,n,"","",function(o){return e.call(r,o,s++)}),n}function VJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bd={current:null},W2={transition:null},GJ={ReactCurrentDispatcher:bd,ReactCurrentBatchConfig:W2,ReactCurrentOwner:lI};function g9(){throw Error("act(...) is not supported in production builds of React.")}mo.Children={map:Sw,forEach:function(t,e,r){Sw(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Sw(t,function(){e++}),e},toArray:function(t){return Sw(t,function(e){return e})||[]},only:function(t){if(!cI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mo.Component=B1;mo.Fragment=FJ;mo.Profiler=jJ;mo.PureComponent=oI;mo.StrictMode=PJ;mo.Suspense=OJ;mo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GJ;mo.act=g9;mo.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=d9({},t.props),s=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=lI.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(i in e)p9.call(e,i)&&!A9.hasOwnProperty(i)&&(n[i]=e[i]===void 0&&u!==void 0?u[i]:e[i])}var i=arguments.length-2;if(i===1)n.children=r;else if(1<i){u=Array(i);for(var m=0;m<i;m++)u[m]=arguments[m+2];n.children=u}return{$$typeof:W_,type:t.type,key:s,ref:o,props:n,_owner:c}};mo.createContext=function(t){return t={$$typeof:kJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MJ,_context:t},t.Consumer=t};mo.createElement=m9;mo.createFactory=function(t){var e=m9.bind(null,t);return e.type=t,e};mo.createRef=function(){return{current:null}};mo.forwardRef=function(t){return{$$typeof:DJ,render:t}};mo.isValidElement=cI;mo.lazy=function(t){return{$$typeof:UJ,_payload:{_status:-1,_result:t},_init:VJ}};mo.memo=function(t,e){return{$$typeof:RJ,type:t,compare:e===void 0?null:e}};mo.startTransition=function(t){var e=W2.transition;W2.transition={};try{t()}finally{W2.transition=e}};mo.unstable_act=g9;mo.useCallback=function(t,e){return bd.current.useCallback(t,e)};mo.useContext=function(t){return bd.current.useContext(t)};mo.useDebugValue=function(){};mo.useDeferredValue=function(t){return bd.current.useDeferredValue(t)};mo.useEffect=function(t,e){return bd.current.useEffect(t,e)};mo.useId=function(){return bd.current.useId()};mo.useImperativeHandle=function(t,e,r){return bd.current.useImperativeHandle(t,e,r)};mo.useInsertionEffect=function(t,e){return bd.current.useInsertionEffect(t,e)};mo.useLayoutEffect=function(t,e){return bd.current.useLayoutEffect(t,e)};mo.useMemo=function(t,e){return bd.current.useMemo(t,e)};mo.useReducer=function(t,e,r){return bd.current.useReducer(t,e,r)};mo.useRef=function(t){return bd.current.useRef(t)};mo.useState=function(t){return bd.current.useState(t)};mo.useSyncExternalStore=function(t,e,r){return bd.current.useSyncExternalStore(t,e,r)};mo.useTransition=function(){return bd.current.useTransition()};mo.version="18.3.1";c9.exports=mo;var Ae=c9.exports;const Ui=Bp(Ae),uT=IJ({__proto__:null,default:Ui},[Ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $J=Ae,qJ=Symbol.for("react.element"),WJ=Symbol.for("react.fragment"),KJ=Object.prototype.hasOwnProperty,XJ=$J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YJ={key:!0,ref:!0,__self:!0,__source:!0};function y9(t,e,r){var n,s={},o=null,c=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)KJ.call(e,n)&&!YJ.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:qJ,type:t,key:o,ref:c,props:s,_owner:XJ.current}}q4.Fragment=WJ;q4.jsx=y9;q4.jsxs=y9;l9.exports=q4;var p=l9.exports,dT={},v9={exports:{}},mh={},x9={exports:{}},_9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(_e,ze){var Ne=_e.length;_e.push(ze);e:for(;0<Ne;){var st=Ne-1>>>1,ie=_e[st];if(0<s(ie,ze))_e[st]=ze,_e[Ne]=ie,Ne=st;else break e}}function r(_e){return _e.length===0?null:_e[0]}function n(_e){if(_e.length===0)return null;var ze=_e[0],Ne=_e.pop();if(Ne!==ze){_e[0]=Ne;e:for(var st=0,ie=_e.length,le=ie>>>1;st<le;){var pe=2*(st+1)-1,fe=_e[pe],Qe=pe+1,Ke=_e[Qe];if(0>s(fe,Ne))Qe<ie&&0>s(Ke,fe)?(_e[st]=Ke,_e[Qe]=Ne,st=Qe):(_e[st]=fe,_e[pe]=Ne,st=pe);else if(Qe<ie&&0>s(Ke,Ne))_e[st]=Ke,_e[Qe]=Ne,st=Qe;else break e}}return ze}function s(_e,ze){var Ne=_e.sortIndex-ze.sortIndex;return Ne!==0?Ne:_e.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var i=[],m=[],g=1,C=null,B=3,S=!1,P=!1,j=!1,D=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(_e){for(var ze=r(m);ze!==null;){if(ze.callback===null)n(m);else if(ze.startTime<=_e)n(m),ze.sortIndex=ze.expirationTime,e(i,ze);else break;ze=r(m)}}function Y(_e){if(j=!1,V(_e),!P)if(r(i)!==null)P=!0,Fe(te);else{var ze=r(m);ze!==null&&ve(Y,ze.startTime-_e)}}function te(_e,ze){P=!1,j&&(j=!1,F(K),K=-1),S=!0;var Ne=B;try{for(V(ze),C=r(i);C!==null&&(!(C.expirationTime>ze)||_e&&!J());){var st=C.callback;if(typeof st=="function"){C.callback=null,B=C.priorityLevel;var ie=st(C.expirationTime<=ze);ze=t.unstable_now(),typeof ie=="function"?C.callback=ie:C===r(i)&&n(i),V(ze)}else n(i);C=r(i)}if(C!==null)var le=!0;else{var pe=r(m);pe!==null&&ve(Y,pe.startTime-ze),le=!1}return le}finally{C=null,B=Ne,S=!1}}var se=!1,oe=null,K=-1,de=5,we=-1;function J(){return!(t.unstable_now()-we<de)}function Z(){if(oe!==null){var _e=t.unstable_now();we=_e;var ze=!0;try{ze=oe(!0,_e)}finally{ze?Ie():(se=!1,oe=null)}}else se=!1}var Ie;if(typeof R=="function")Ie=function(){R(Z)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,He=be.port2;be.port1.onmessage=Z,Ie=function(){He.postMessage(null)}}else Ie=function(){D(Z,0)};function Fe(_e){oe=_e,se||(se=!0,Ie())}function ve(_e,ze){K=D(function(){_e(t.unstable_now())},ze)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_e){_e.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,Fe(te))},t.unstable_forceFrameRate=function(_e){0>_e||125<_e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<_e?Math.floor(1e3/_e):5},t.unstable_getCurrentPriorityLevel=function(){return B},t.unstable_getFirstCallbackNode=function(){return r(i)},t.unstable_next=function(_e){switch(B){case 1:case 2:case 3:var ze=3;break;default:ze=B}var Ne=B;B=ze;try{return _e()}finally{B=Ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(_e,ze){switch(_e){case 1:case 2:case 3:case 4:case 5:break;default:_e=3}var Ne=B;B=_e;try{return ze()}finally{B=Ne}},t.unstable_scheduleCallback=function(_e,ze,Ne){var st=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?st+Ne:st):Ne=st,_e){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Ne+ie,_e={id:g++,callback:ze,priorityLevel:_e,startTime:Ne,expirationTime:ie,sortIndex:-1},Ne>st?(_e.sortIndex=Ne,e(m,_e),r(i)===null&&_e===r(m)&&(j?(F(K),K=-1):j=!0,ve(Y,Ne-st))):(_e.sortIndex=ie,e(i,_e),P||S||(P=!0,Fe(te))),_e},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(_e){var ze=B;return function(){var Ne=B;B=ze;try{return _e.apply(this,arguments)}finally{B=Ne}}}})(_9);x9.exports=_9;var ZJ=x9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JJ=Ae,Ah=ZJ;function Qn(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b9=new Set,i_={};function C0(t,e){o1(t,e),o1(t+"Capture",e)}function o1(t,e){for(i_[t]=e,t=0;t<e.length;t++)b9.add(e[t])}var cA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hT=Object.prototype.hasOwnProperty,eee=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xk={},_k={};function tee(t){return hT.call(_k,t)?!0:hT.call(xk,t)?!1:eee.test(t)?_k[t]=!0:(xk[t]=!0,!1)}function ree(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nee(t,e,r,n){if(e===null||typeof e>"u"||ree(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wd(t,e,r,n,s,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var yu={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yu[t]=new wd(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yu[e]=new wd(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yu[t]=new wd(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yu[t]=new wd(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yu[t]=new wd(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yu[t]=new wd(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yu[t]=new wd(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yu[t]=new wd(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yu[t]=new wd(t,5,!1,t.toLowerCase(),null,!1,!1)});var uI=/[\-:]([a-z])/g;function dI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uI,dI);yu[e]=new wd(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uI,dI);yu[e]=new wd(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uI,dI);yu[e]=new wd(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yu[t]=new wd(t,1,!1,t.toLowerCase(),null,!1,!1)});yu.xlinkHref=new wd("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yu[t]=new wd(t,1,!1,t.toLowerCase(),null,!0,!0)});function hI(t,e,r,n){var s=yu.hasOwnProperty(e)?yu[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nee(e,r,s,n)&&(r=null),n||s===null?tee(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var xA=JJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bw=Symbol.for("react.element"),by=Symbol.for("react.portal"),wy=Symbol.for("react.fragment"),fI=Symbol.for("react.strict_mode"),fT=Symbol.for("react.profiler"),w9=Symbol.for("react.provider"),C9=Symbol.for("react.context"),pI=Symbol.for("react.forward_ref"),pT=Symbol.for("react.suspense"),AT=Symbol.for("react.suspense_list"),AI=Symbol.for("react.memo"),tm=Symbol.for("react.lazy"),S9=Symbol.for("react.offscreen"),bk=Symbol.iterator;function Lv(t){return t===null||typeof t!="object"?null:(t=bk&&t[bk]||t["@@iterator"],typeof t=="function"?t:null)}var Rl=Object.assign,QB;function ex(t){if(QB===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);QB=e&&e[1]||""}return`
`+QB+t}var HB=!1;function VB(t,e){if(!t||HB)return"";HB=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var n=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){n=m}t.call(e.prototype)}else{try{throw Error()}catch(m){n=m}t()}}catch(m){if(m&&n&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=n.stack.split(`
`),c=s.length-1,u=o.length-1;1<=c&&0<=u&&s[c]!==o[u];)u--;for(;1<=c&&0<=u;c--,u--)if(s[c]!==o[u]){if(c!==1||u!==1)do if(c--,u--,0>u||s[c]!==o[u]){var i=`
`+s[c].replace(" at new "," at ");return t.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",t.displayName)),i}while(1<=c&&0<=u);break}}}finally{HB=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ex(t):""}function iee(t){switch(t.tag){case 5:return ex(t.type);case 16:return ex("Lazy");case 13:return ex("Suspense");case 19:return ex("SuspenseList");case 0:case 2:case 15:return t=VB(t.type,!1),t;case 11:return t=VB(t.type.render,!1),t;case 1:return t=VB(t.type,!0),t;default:return""}}function mT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wy:return"Fragment";case by:return"Portal";case fT:return"Profiler";case fI:return"StrictMode";case pT:return"Suspense";case AT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C9:return(t.displayName||"Context")+".Consumer";case w9:return(t._context.displayName||"Context")+".Provider";case pI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case AI:return e=t.displayName||null,e!==null?e:mT(t.type)||"Memo";case tm:e=t._payload,t=t._init;try{return mT(t(e))}catch{}}return null}function see(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mT(e);case 8:return e===fI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oee(t){var e=B9(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(c){n=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ew(t){t._valueTracker||(t._valueTracker=oee(t))}function E9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=B9(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function E5(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gT(t,e){var r=e.checked;return Rl({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function wk(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=zm(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T9(t,e){e=e.checked,e!=null&&hI(t,"checked",e,!1)}function yT(t,e){T9(t,e);var r=zm(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vT(t,e.type,r):e.hasOwnProperty("defaultValue")&&vT(t,e.type,zm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ck(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function vT(t,e,r){(e!=="number"||E5(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var tx=Array.isArray;function Vy(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+zm(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Qn(91));return Rl({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sk(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Qn(92));if(tx(r)){if(1<r.length)throw Error(Qn(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:zm(r)}}function L9(t,e){var r=zm(e.value),n=zm(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Bk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _T(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tw,N9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tw=Tw||document.createElement("div"),Tw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function s_(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var _x={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aee=["Webkit","ms","Moz","O"];Object.keys(_x).forEach(function(t){aee.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_x[e]=_x[t]})});function F9(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||_x.hasOwnProperty(t)&&_x[t]?(""+e).trim():e+"px"}function P9(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=F9(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var lee=Rl({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bT(t,e){if(e){if(lee[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Qn(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Qn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Qn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Qn(62))}}function wT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CT=null;function mI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ST=null,Gy=null,$y=null;function Ek(t){if(t=Y_(t)){if(typeof ST!="function")throw Error(Qn(280));var e=t.stateNode;e&&(e=Z4(e),ST(t.stateNode,t.type,e))}}function j9(t){Gy?$y?$y.push(t):$y=[t]:Gy=t}function M9(){if(Gy){var t=Gy,e=$y;if($y=Gy=null,Ek(t),e)for(t=0;t<e.length;t++)Ek(e[t])}}function k9(t,e){return t(e)}function D9(){}var GB=!1;function O9(t,e,r){if(GB)return t(e,r);GB=!0;try{return k9(t,e,r)}finally{GB=!1,(Gy!==null||$y!==null)&&(D9(),M9())}}function o_(t,e){var r=t.stateNode;if(r===null)return null;var n=Z4(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Qn(231,e,typeof r));return r}var BT=!1;if(cA)try{var Iv={};Object.defineProperty(Iv,"passive",{get:function(){BT=!0}}),window.addEventListener("test",Iv,Iv),window.removeEventListener("test",Iv,Iv)}catch{BT=!1}function cee(t,e,r,n,s,o,c,u,i){var m=Array.prototype.slice.call(arguments,3);try{e.apply(r,m)}catch(g){this.onError(g)}}var bx=!1,T5=null,L5=!1,ET=null,uee={onError:function(t){bx=!0,T5=t}};function dee(t,e,r,n,s,o,c,u,i){bx=!1,T5=null,cee.apply(uee,arguments)}function hee(t,e,r,n,s,o,c,u,i){if(dee.apply(this,arguments),bx){if(bx){var m=T5;bx=!1,T5=null}else throw Error(Qn(198));L5||(L5=!0,ET=m)}}function S0(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function R9(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tk(t){if(S0(t)!==t)throw Error(Qn(188))}function fee(t){var e=t.alternate;if(!e){if(e=S0(t),e===null)throw Error(Qn(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Tk(s),t;if(o===n)return Tk(s),e;o=o.sibling}throw Error(Qn(188))}if(r.return!==n.return)r=s,n=o;else{for(var c=!1,u=s.child;u;){if(u===r){c=!0,r=s,n=o;break}if(u===n){c=!0,n=s,r=o;break}u=u.sibling}if(!c){for(u=o.child;u;){if(u===r){c=!0,r=o,n=s;break}if(u===n){c=!0,n=o,r=s;break}u=u.sibling}if(!c)throw Error(Qn(189))}}if(r.alternate!==n)throw Error(Qn(190))}if(r.tag!==3)throw Error(Qn(188));return r.stateNode.current===r?t:e}function U9(t){return t=fee(t),t!==null?z9(t):null}function z9(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z9(t);if(e!==null)return e;t=t.sibling}return null}var Q9=Ah.unstable_scheduleCallback,Lk=Ah.unstable_cancelCallback,pee=Ah.unstable_shouldYield,Aee=Ah.unstable_requestPaint,mc=Ah.unstable_now,mee=Ah.unstable_getCurrentPriorityLevel,gI=Ah.unstable_ImmediatePriority,H9=Ah.unstable_UserBlockingPriority,I5=Ah.unstable_NormalPriority,gee=Ah.unstable_LowPriority,V9=Ah.unstable_IdlePriority,W4=null,gp=null;function yee(t){if(gp&&typeof gp.onCommitFiberRoot=="function")try{gp.onCommitFiberRoot(W4,t,void 0,(t.current.flags&128)===128)}catch{}}var jf=Math.clz32?Math.clz32:_ee,vee=Math.log,xee=Math.LN2;function _ee(t){return t>>>=0,t===0?32:31-(vee(t)/xee|0)|0}var Lw=64,Iw=4194304;function rx(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function N5(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,c=r&268435455;if(c!==0){var u=c&~s;u!==0?n=rx(u):(o&=c,o!==0&&(n=rx(o)))}else c=r&~s,c!==0?n=rx(c):o!==0&&(n=rx(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-jf(e),s=1<<r,n|=t[r],e&=~s;return n}function bee(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wee(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-jf(o),u=1<<c,i=s[c];i===-1?(!(u&r)||u&n)&&(s[c]=bee(u,e)):i<=e&&(t.expiredLanes|=u),o&=~u}}function TT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function G9(){var t=Lw;return Lw<<=1,!(Lw&4194240)&&(Lw=64),t}function $B(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function K_(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jf(e),t[e]=r}function Cee(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-jf(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function yI(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-jf(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ca=0;function $9(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var q9,vI,W9,K9,X9,LT=!1,Nw=[],Cm=null,Sm=null,Bm=null,a_=new Map,l_=new Map,im=[],See="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ik(t,e){switch(t){case"focusin":case"focusout":Cm=null;break;case"dragenter":case"dragleave":Sm=null;break;case"mouseover":case"mouseout":Bm=null;break;case"pointerover":case"pointerout":a_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":l_.delete(e.pointerId)}}function Nv(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Y_(e),e!==null&&vI(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Bee(t,e,r,n,s){switch(e){case"focusin":return Cm=Nv(Cm,t,e,r,n,s),!0;case"dragenter":return Sm=Nv(Sm,t,e,r,n,s),!0;case"mouseover":return Bm=Nv(Bm,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return a_.set(o,Nv(a_.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,l_.set(o,Nv(l_.get(o)||null,t,e,r,n,s)),!0}return!1}function Y9(t){var e=Vg(t.target);if(e!==null){var r=S0(e);if(r!==null){if(e=r.tag,e===13){if(e=R9(r),e!==null){t.blockedOn=e,X9(t.priority,function(){W9(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function K2(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=IT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);CT=n,r.target.dispatchEvent(n),CT=null}else return e=Y_(r),e!==null&&vI(e),t.blockedOn=r,!1;e.shift()}return!0}function Nk(t,e,r){K2(t)&&r.delete(e)}function Eee(){LT=!1,Cm!==null&&K2(Cm)&&(Cm=null),Sm!==null&&K2(Sm)&&(Sm=null),Bm!==null&&K2(Bm)&&(Bm=null),a_.forEach(Nk),l_.forEach(Nk)}function Fv(t,e){t.blockedOn===e&&(t.blockedOn=null,LT||(LT=!0,Ah.unstable_scheduleCallback(Ah.unstable_NormalPriority,Eee)))}function c_(t){function e(s){return Fv(s,t)}if(0<Nw.length){Fv(Nw[0],t);for(var r=1;r<Nw.length;r++){var n=Nw[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Cm!==null&&Fv(Cm,t),Sm!==null&&Fv(Sm,t),Bm!==null&&Fv(Bm,t),a_.forEach(e),l_.forEach(e),r=0;r<im.length;r++)n=im[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<im.length&&(r=im[0],r.blockedOn===null);)Y9(r),r.blockedOn===null&&im.shift()}var qy=xA.ReactCurrentBatchConfig,F5=!0;function Tee(t,e,r,n){var s=Ca,o=qy.transition;qy.transition=null;try{Ca=1,xI(t,e,r,n)}finally{Ca=s,qy.transition=o}}function Lee(t,e,r,n){var s=Ca,o=qy.transition;qy.transition=null;try{Ca=4,xI(t,e,r,n)}finally{Ca=s,qy.transition=o}}function xI(t,e,r,n){if(F5){var s=IT(t,e,r,n);if(s===null)rE(t,e,n,P5,r),Ik(t,n);else if(Bee(s,t,e,r,n))n.stopPropagation();else if(Ik(t,n),e&4&&-1<See.indexOf(t)){for(;s!==null;){var o=Y_(s);if(o!==null&&q9(o),o=IT(t,e,r,n),o===null&&rE(t,e,n,P5,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else rE(t,e,n,null,r)}}var P5=null;function IT(t,e,r,n){if(P5=null,t=mI(n),t=Vg(t),t!==null)if(e=S0(t),e===null)t=null;else if(r=e.tag,r===13){if(t=R9(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return P5=t,null}function Z9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mee()){case gI:return 1;case H9:return 4;case I5:case gee:return 16;case V9:return 536870912;default:return 16}default:return 16}}var cm=null,_I=null,X2=null;function J9(){if(X2)return X2;var t,e=_I,r=e.length,n,s="value"in cm?cm.value:cm.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var c=r-t;for(n=1;n<=c&&e[r-n]===s[o-n];n++);return X2=s.slice(t,1<n?1-n:void 0)}function Y2(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fw(){return!0}function Fk(){return!1}function gh(t){function e(r,n,s,o,c){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fw:Fk,this.isPropagationStopped=Fk,this}return Rl(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fw)},persist:function(){},isPersistent:Fw}),e}var E1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bI=gh(E1),X_=Rl({},E1,{view:0,detail:0}),Iee=gh(X_),qB,WB,Pv,K4=Rl({},X_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wI,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pv&&(Pv&&t.type==="mousemove"?(qB=t.screenX-Pv.screenX,WB=t.screenY-Pv.screenY):WB=qB=0,Pv=t),qB)},movementY:function(t){return"movementY"in t?t.movementY:WB}}),Pk=gh(K4),Nee=Rl({},K4,{dataTransfer:0}),Fee=gh(Nee),Pee=Rl({},X_,{relatedTarget:0}),KB=gh(Pee),jee=Rl({},E1,{animationName:0,elapsedTime:0,pseudoElement:0}),Mee=gh(jee),kee=Rl({},E1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dee=gh(kee),Oee=Rl({},E1,{data:0}),jk=gh(Oee),Ree={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qee(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zee[t])?!!e[t]:!1}function wI(){return Qee}var Hee=Rl({},X_,{key:function(t){if(t.key){var e=Ree[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Y2(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uee[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wI,charCode:function(t){return t.type==="keypress"?Y2(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Y2(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vee=gh(Hee),Gee=Rl({},K4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mk=gh(Gee),$ee=Rl({},X_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wI}),qee=gh($ee),Wee=Rl({},E1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kee=gh(Wee),Xee=Rl({},K4,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yee=gh(Xee),Zee=[9,13,27,32],CI=cA&&"CompositionEvent"in window,wx=null;cA&&"documentMode"in document&&(wx=document.documentMode);var Jee=cA&&"TextEvent"in window&&!wx,eQ=cA&&(!CI||wx&&8<wx&&11>=wx),kk=" ",Dk=!1;function tQ(t,e){switch(t){case"keyup":return Zee.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rQ(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cy=!1;function ete(t,e){switch(t){case"compositionend":return rQ(e);case"keypress":return e.which!==32?null:(Dk=!0,kk);case"textInput":return t=e.data,t===kk&&Dk?null:t;default:return null}}function tte(t,e){if(Cy)return t==="compositionend"||!CI&&tQ(t,e)?(t=J9(),X2=_I=cm=null,Cy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eQ&&e.locale!=="ko"?null:e.data;default:return null}}var rte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ok(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rte[t.type]:e==="textarea"}function nQ(t,e,r,n){j9(n),e=j5(e,"onChange"),0<e.length&&(r=new bI("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Cx=null,u_=null;function nte(t){pQ(t,0)}function X4(t){var e=Ey(t);if(E9(e))return t}function ite(t,e){if(t==="change")return e}var iQ=!1;if(cA){var XB;if(cA){var YB="oninput"in document;if(!YB){var Rk=document.createElement("div");Rk.setAttribute("oninput","return;"),YB=typeof Rk.oninput=="function"}XB=YB}else XB=!1;iQ=XB&&(!document.documentMode||9<document.documentMode)}function Uk(){Cx&&(Cx.detachEvent("onpropertychange",sQ),u_=Cx=null)}function sQ(t){if(t.propertyName==="value"&&X4(u_)){var e=[];nQ(e,u_,t,mI(t)),O9(nte,e)}}function ste(t,e,r){t==="focusin"?(Uk(),Cx=e,u_=r,Cx.attachEvent("onpropertychange",sQ)):t==="focusout"&&Uk()}function ote(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return X4(u_)}function ate(t,e){if(t==="click")return X4(e)}function lte(t,e){if(t==="input"||t==="change")return X4(e)}function cte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Of=typeof Object.is=="function"?Object.is:cte;function d_(t,e){if(Of(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!hT.call(e,s)||!Of(t[s],e[s]))return!1}return!0}function zk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qk(t,e){var r=zk(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zk(r)}}function oQ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oQ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aQ(){for(var t=window,e=E5();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=E5(t.document)}return e}function SI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ute(t){var e=aQ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&oQ(r.ownerDocument.documentElement,r)){if(n!==null&&SI(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Qk(r,o);var c=Qk(r,n);s&&c&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dte=cA&&"documentMode"in document&&11>=document.documentMode,Sy=null,NT=null,Sx=null,FT=!1;function Hk(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;FT||Sy==null||Sy!==E5(n)||(n=Sy,"selectionStart"in n&&SI(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sx&&d_(Sx,n)||(Sx=n,n=j5(NT,"onSelect"),0<n.length&&(e=new bI("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Sy)))}function Pw(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var By={animationend:Pw("Animation","AnimationEnd"),animationiteration:Pw("Animation","AnimationIteration"),animationstart:Pw("Animation","AnimationStart"),transitionend:Pw("Transition","TransitionEnd")},ZB={},lQ={};cA&&(lQ=document.createElement("div").style,"AnimationEvent"in window||(delete By.animationend.animation,delete By.animationiteration.animation,delete By.animationstart.animation),"TransitionEvent"in window||delete By.transitionend.transition);function Y4(t){if(ZB[t])return ZB[t];if(!By[t])return t;var e=By[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in lQ)return ZB[t]=e[r];return t}var cQ=Y4("animationend"),uQ=Y4("animationiteration"),dQ=Y4("animationstart"),hQ=Y4("transitionend"),fQ=new Map,Vk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tg(t,e){fQ.set(t,e),C0(e,[t])}for(var JB=0;JB<Vk.length;JB++){var eE=Vk[JB],hte=eE.toLowerCase(),fte=eE[0].toUpperCase()+eE.slice(1);tg(hte,"on"+fte)}tg(cQ,"onAnimationEnd");tg(uQ,"onAnimationIteration");tg(dQ,"onAnimationStart");tg("dblclick","onDoubleClick");tg("focusin","onFocus");tg("focusout","onBlur");tg(hQ,"onTransitionEnd");o1("onMouseEnter",["mouseout","mouseover"]);o1("onMouseLeave",["mouseout","mouseover"]);o1("onPointerEnter",["pointerout","pointerover"]);o1("onPointerLeave",["pointerout","pointerover"]);C0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));C0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));C0("onBeforeInput",["compositionend","keypress","textInput","paste"]);C0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));C0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));C0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pte=new Set("cancel close invalid load scroll toggle".split(" ").concat(nx));function Gk(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,hee(n,e,void 0,t),t.currentTarget=null}function pQ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var c=n.length-1;0<=c;c--){var u=n[c],i=u.instance,m=u.currentTarget;if(u=u.listener,i!==o&&s.isPropagationStopped())break e;Gk(s,u,m),o=i}else for(c=0;c<n.length;c++){if(u=n[c],i=u.instance,m=u.currentTarget,u=u.listener,i!==o&&s.isPropagationStopped())break e;Gk(s,u,m),o=i}}}if(L5)throw t=ET,L5=!1,ET=null,t}function hl(t,e){var r=e[DT];r===void 0&&(r=e[DT]=new Set);var n=t+"__bubble";r.has(n)||(AQ(e,t,2,!1),r.add(n))}function tE(t,e,r){var n=0;e&&(n|=4),AQ(r,t,n,e)}var jw="_reactListening"+Math.random().toString(36).slice(2);function h_(t){if(!t[jw]){t[jw]=!0,b9.forEach(function(r){r!=="selectionchange"&&(pte.has(r)||tE(r,!1,t),tE(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jw]||(e[jw]=!0,tE("selectionchange",!1,e))}}function AQ(t,e,r,n){switch(Z9(e)){case 1:var s=Tee;break;case 4:s=Lee;break;default:s=xI}r=s.bind(null,e,r,t),s=void 0,!BT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function rE(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var u=n.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(c===4)for(c=n.return;c!==null;){var i=c.tag;if((i===3||i===4)&&(i=c.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;c=c.return}for(;u!==null;){if(c=Vg(u),c===null)return;if(i=c.tag,i===5||i===6){n=o=c;continue e}u=u.parentNode}}n=n.return}O9(function(){var m=o,g=mI(r),C=[];e:{var B=fQ.get(t);if(B!==void 0){var S=bI,P=t;switch(t){case"keypress":if(Y2(r)===0)break e;case"keydown":case"keyup":S=Vee;break;case"focusin":P="focus",S=KB;break;case"focusout":P="blur",S=KB;break;case"beforeblur":case"afterblur":S=KB;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Pk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Fee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=qee;break;case cQ:case uQ:case dQ:S=Mee;break;case hQ:S=Kee;break;case"scroll":S=Iee;break;case"wheel":S=Yee;break;case"copy":case"cut":case"paste":S=Dee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Mk}var j=(e&4)!==0,D=!j&&t==="scroll",F=j?B!==null?B+"Capture":null:B;j=[];for(var R=m,V;R!==null;){V=R;var Y=V.stateNode;if(V.tag===5&&Y!==null&&(V=Y,F!==null&&(Y=o_(R,F),Y!=null&&j.push(f_(R,Y,V)))),D)break;R=R.return}0<j.length&&(B=new S(B,P,null,r,g),C.push({event:B,listeners:j}))}}if(!(e&7)){e:{if(B=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",B&&r!==CT&&(P=r.relatedTarget||r.fromElement)&&(Vg(P)||P[uA]))break e;if((S||B)&&(B=g.window===g?g:(B=g.ownerDocument)?B.defaultView||B.parentWindow:window,S?(P=r.relatedTarget||r.toElement,S=m,P=P?Vg(P):null,P!==null&&(D=S0(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(S=null,P=m),S!==P)){if(j=Pk,Y="onMouseLeave",F="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(j=Mk,Y="onPointerLeave",F="onPointerEnter",R="pointer"),D=S==null?B:Ey(S),V=P==null?B:Ey(P),B=new j(Y,R+"leave",S,r,g),B.target=D,B.relatedTarget=V,Y=null,Vg(g)===m&&(j=new j(F,R+"enter",P,r,g),j.target=V,j.relatedTarget=D,Y=j),D=Y,S&&P)t:{for(j=S,F=P,R=0,V=j;V;V=ty(V))R++;for(V=0,Y=F;Y;Y=ty(Y))V++;for(;0<R-V;)j=ty(j),R--;for(;0<V-R;)F=ty(F),V--;for(;R--;){if(j===F||F!==null&&j===F.alternate)break t;j=ty(j),F=ty(F)}j=null}else j=null;S!==null&&$k(C,B,S,j,!1),P!==null&&D!==null&&$k(C,D,P,j,!0)}}e:{if(B=m?Ey(m):window,S=B.nodeName&&B.nodeName.toLowerCase(),S==="select"||S==="input"&&B.type==="file")var te=ite;else if(Ok(B))if(iQ)te=lte;else{te=ote;var se=ste}else(S=B.nodeName)&&S.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(te=ate);if(te&&(te=te(t,m))){nQ(C,te,r,g);break e}se&&se(t,B,m),t==="focusout"&&(se=B._wrapperState)&&se.controlled&&B.type==="number"&&vT(B,"number",B.value)}switch(se=m?Ey(m):window,t){case"focusin":(Ok(se)||se.contentEditable==="true")&&(Sy=se,NT=m,Sx=null);break;case"focusout":Sx=NT=Sy=null;break;case"mousedown":FT=!0;break;case"contextmenu":case"mouseup":case"dragend":FT=!1,Hk(C,r,g);break;case"selectionchange":if(dte)break;case"keydown":case"keyup":Hk(C,r,g)}var oe;if(CI)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else Cy?tQ(t,r)&&(K="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(eQ&&r.locale!=="ko"&&(Cy||K!=="onCompositionStart"?K==="onCompositionEnd"&&Cy&&(oe=J9()):(cm=g,_I="value"in cm?cm.value:cm.textContent,Cy=!0)),se=j5(m,K),0<se.length&&(K=new jk(K,t,null,r,g),C.push({event:K,listeners:se}),oe?K.data=oe:(oe=rQ(r),oe!==null&&(K.data=oe)))),(oe=Jee?ete(t,r):tte(t,r))&&(m=j5(m,"onBeforeInput"),0<m.length&&(g=new jk("onBeforeInput","beforeinput",null,r,g),C.push({event:g,listeners:m}),g.data=oe))}pQ(C,e)})}function f_(t,e,r){return{instance:t,listener:e,currentTarget:r}}function j5(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=o_(t,r),o!=null&&n.unshift(f_(t,o,s)),o=o_(t,e),o!=null&&n.push(f_(t,o,s))),t=t.return}return n}function ty(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $k(t,e,r,n,s){for(var o=e._reactName,c=[];r!==null&&r!==n;){var u=r,i=u.alternate,m=u.stateNode;if(i!==null&&i===n)break;u.tag===5&&m!==null&&(u=m,s?(i=o_(r,o),i!=null&&c.unshift(f_(r,i,u))):s||(i=o_(r,o),i!=null&&c.push(f_(r,i,u)))),r=r.return}c.length!==0&&t.push({event:e,listeners:c})}var Ate=/\r\n?/g,mte=/\u0000|\uFFFD/g;function qk(t){return(typeof t=="string"?t:""+t).replace(Ate,`
`).replace(mte,"")}function Mw(t,e,r){if(e=qk(e),qk(t)!==e&&r)throw Error(Qn(425))}function M5(){}var PT=null,jT=null;function MT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kT=typeof setTimeout=="function"?setTimeout:void 0,gte=typeof clearTimeout=="function"?clearTimeout:void 0,Wk=typeof Promise=="function"?Promise:void 0,yte=typeof queueMicrotask=="function"?queueMicrotask:typeof Wk<"u"?function(t){return Wk.resolve(null).then(t).catch(vte)}:kT;function vte(t){setTimeout(function(){throw t})}function nE(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),c_(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);c_(e)}function Em(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var T1=Math.random().toString(36).slice(2),pp="__reactFiber$"+T1,p_="__reactProps$"+T1,uA="__reactContainer$"+T1,DT="__reactEvents$"+T1,xte="__reactListeners$"+T1,_te="__reactHandles$"+T1;function Vg(t){var e=t[pp];if(e)return e;for(var r=t.parentNode;r;){if(e=r[uA]||r[pp]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Kk(t);t!==null;){if(r=t[pp])return r;t=Kk(t)}return e}t=r,r=t.parentNode}return null}function Y_(t){return t=t[pp]||t[uA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ey(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Qn(33))}function Z4(t){return t[p_]||null}var OT=[],Ty=-1;function rg(t){return{current:t}}function Al(t){0>Ty||(t.current=OT[Ty],OT[Ty]=null,Ty--)}function Ja(t,e){Ty++,OT[Ty]=t.current,t.current=e}var Qm={},td=rg(Qm),Gd=rg(!1),p0=Qm;function a1(t,e){var r=t.type.contextTypes;if(!r)return Qm;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $d(t){return t=t.childContextTypes,t!=null}function k5(){Al(Gd),Al(td)}function Xk(t,e,r){if(td.current!==Qm)throw Error(Qn(168));Ja(td,e),Ja(Gd,r)}function mQ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Qn(108,see(t)||"Unknown",s));return Rl({},r,n)}function D5(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qm,p0=td.current,Ja(td,t),Ja(Gd,Gd.current),!0}function Yk(t,e,r){var n=t.stateNode;if(!n)throw Error(Qn(169));r?(t=mQ(t,e,p0),n.__reactInternalMemoizedMergedChildContext=t,Al(Gd),Al(td),Ja(td,t)):Al(Gd),Ja(Gd,r)}var Xp=null,J4=!1,iE=!1;function gQ(t){Xp===null?Xp=[t]:Xp.push(t)}function bte(t){J4=!0,gQ(t)}function ng(){if(!iE&&Xp!==null){iE=!0;var t=0,e=Ca;try{var r=Xp;for(Ca=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Xp=null,J4=!1}catch(s){throw Xp!==null&&(Xp=Xp.slice(t+1)),Q9(gI,ng),s}finally{Ca=e,iE=!1}}return null}var Ly=[],Iy=0,O5=null,R5=0,$h=[],qh=0,A0=null,Jp=1,eA="";function Ng(t,e){Ly[Iy++]=R5,Ly[Iy++]=O5,O5=t,R5=e}function yQ(t,e,r){$h[qh++]=Jp,$h[qh++]=eA,$h[qh++]=A0,A0=t;var n=Jp;t=eA;var s=32-jf(n)-1;n&=~(1<<s),r+=1;var o=32-jf(e)+s;if(30<o){var c=s-s%5;o=(n&(1<<c)-1).toString(32),n>>=c,s-=c,Jp=1<<32-jf(e)+s|r<<s|n,eA=o+t}else Jp=1<<o|r<<s|n,eA=t}function BI(t){t.return!==null&&(Ng(t,1),yQ(t,1,0))}function EI(t){for(;t===O5;)O5=Ly[--Iy],Ly[Iy]=null,R5=Ly[--Iy],Ly[Iy]=null;for(;t===A0;)A0=$h[--qh],$h[qh]=null,eA=$h[--qh],$h[qh]=null,Jp=$h[--qh],$h[qh]=null}var fh=null,dh=null,wl=!1,Ff=null;function vQ(t,e){var r=Kh(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Zk(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fh=t,dh=Em(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fh=t,dh=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=A0!==null?{id:Jp,overflow:eA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Kh(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,fh=t,dh=null,!0):!1;default:return!1}}function RT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function UT(t){if(wl){var e=dh;if(e){var r=e;if(!Zk(t,e)){if(RT(t))throw Error(Qn(418));e=Em(r.nextSibling);var n=fh;e&&Zk(t,e)?vQ(n,r):(t.flags=t.flags&-4097|2,wl=!1,fh=t)}}else{if(RT(t))throw Error(Qn(418));t.flags=t.flags&-4097|2,wl=!1,fh=t}}}function Jk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fh=t}function kw(t){if(t!==fh)return!1;if(!wl)return Jk(t),wl=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!MT(t.type,t.memoizedProps)),e&&(e=dh)){if(RT(t))throw xQ(),Error(Qn(418));for(;e;)vQ(t,e),e=Em(e.nextSibling)}if(Jk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Qn(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){dh=Em(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}dh=null}}else dh=fh?Em(t.stateNode.nextSibling):null;return!0}function xQ(){for(var t=dh;t;)t=Em(t.nextSibling)}function l1(){dh=fh=null,wl=!1}function TI(t){Ff===null?Ff=[t]:Ff.push(t)}var wte=xA.ReactCurrentBatchConfig;function jv(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Qn(309));var n=r.stateNode}if(!n)throw Error(Qn(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var u=s.refs;c===null?delete u[o]:u[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(Qn(284));if(!r._owner)throw Error(Qn(290,t))}return t}function Dw(t,e){throw t=Object.prototype.toString.call(e),Error(Qn(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function eD(t){var e=t._init;return e(t._payload)}function _Q(t){function e(F,R){if(t){var V=F.deletions;V===null?(F.deletions=[R],F.flags|=16):V.push(R)}}function r(F,R){if(!t)return null;for(;R!==null;)e(F,R),R=R.sibling;return null}function n(F,R){for(F=new Map;R!==null;)R.key!==null?F.set(R.key,R):F.set(R.index,R),R=R.sibling;return F}function s(F,R){return F=Nm(F,R),F.index=0,F.sibling=null,F}function o(F,R,V){return F.index=V,t?(V=F.alternate,V!==null?(V=V.index,V<R?(F.flags|=2,R):V):(F.flags|=2,R)):(F.flags|=1048576,R)}function c(F){return t&&F.alternate===null&&(F.flags|=2),F}function u(F,R,V,Y){return R===null||R.tag!==6?(R=dE(V,F.mode,Y),R.return=F,R):(R=s(R,V),R.return=F,R)}function i(F,R,V,Y){var te=V.type;return te===wy?g(F,R,V.props.children,Y,V.key):R!==null&&(R.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===tm&&eD(te)===R.type)?(Y=s(R,V.props),Y.ref=jv(F,R,V),Y.return=F,Y):(Y=i5(V.type,V.key,V.props,null,F.mode,Y),Y.ref=jv(F,R,V),Y.return=F,Y)}function m(F,R,V,Y){return R===null||R.tag!==4||R.stateNode.containerInfo!==V.containerInfo||R.stateNode.implementation!==V.implementation?(R=hE(V,F.mode,Y),R.return=F,R):(R=s(R,V.children||[]),R.return=F,R)}function g(F,R,V,Y,te){return R===null||R.tag!==7?(R=t0(V,F.mode,Y,te),R.return=F,R):(R=s(R,V),R.return=F,R)}function C(F,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return R=dE(""+R,F.mode,V),R.return=F,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Bw:return V=i5(R.type,R.key,R.props,null,F.mode,V),V.ref=jv(F,null,R),V.return=F,V;case by:return R=hE(R,F.mode,V),R.return=F,R;case tm:var Y=R._init;return C(F,Y(R._payload),V)}if(tx(R)||Lv(R))return R=t0(R,F.mode,V,null),R.return=F,R;Dw(F,R)}return null}function B(F,R,V,Y){var te=R!==null?R.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return te!==null?null:u(F,R,""+V,Y);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Bw:return V.key===te?i(F,R,V,Y):null;case by:return V.key===te?m(F,R,V,Y):null;case tm:return te=V._init,B(F,R,te(V._payload),Y)}if(tx(V)||Lv(V))return te!==null?null:g(F,R,V,Y,null);Dw(F,V)}return null}function S(F,R,V,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return F=F.get(V)||null,u(R,F,""+Y,te);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Bw:return F=F.get(Y.key===null?V:Y.key)||null,i(R,F,Y,te);case by:return F=F.get(Y.key===null?V:Y.key)||null,m(R,F,Y,te);case tm:var se=Y._init;return S(F,R,V,se(Y._payload),te)}if(tx(Y)||Lv(Y))return F=F.get(V)||null,g(R,F,Y,te,null);Dw(R,Y)}return null}function P(F,R,V,Y){for(var te=null,se=null,oe=R,K=R=0,de=null;oe!==null&&K<V.length;K++){oe.index>K?(de=oe,oe=null):de=oe.sibling;var we=B(F,oe,V[K],Y);if(we===null){oe===null&&(oe=de);break}t&&oe&&we.alternate===null&&e(F,oe),R=o(we,R,K),se===null?te=we:se.sibling=we,se=we,oe=de}if(K===V.length)return r(F,oe),wl&&Ng(F,K),te;if(oe===null){for(;K<V.length;K++)oe=C(F,V[K],Y),oe!==null&&(R=o(oe,R,K),se===null?te=oe:se.sibling=oe,se=oe);return wl&&Ng(F,K),te}for(oe=n(F,oe);K<V.length;K++)de=S(oe,F,K,V[K],Y),de!==null&&(t&&de.alternate!==null&&oe.delete(de.key===null?K:de.key),R=o(de,R,K),se===null?te=de:se.sibling=de,se=de);return t&&oe.forEach(function(J){return e(F,J)}),wl&&Ng(F,K),te}function j(F,R,V,Y){var te=Lv(V);if(typeof te!="function")throw Error(Qn(150));if(V=te.call(V),V==null)throw Error(Qn(151));for(var se=te=null,oe=R,K=R=0,de=null,we=V.next();oe!==null&&!we.done;K++,we=V.next()){oe.index>K?(de=oe,oe=null):de=oe.sibling;var J=B(F,oe,we.value,Y);if(J===null){oe===null&&(oe=de);break}t&&oe&&J.alternate===null&&e(F,oe),R=o(J,R,K),se===null?te=J:se.sibling=J,se=J,oe=de}if(we.done)return r(F,oe),wl&&Ng(F,K),te;if(oe===null){for(;!we.done;K++,we=V.next())we=C(F,we.value,Y),we!==null&&(R=o(we,R,K),se===null?te=we:se.sibling=we,se=we);return wl&&Ng(F,K),te}for(oe=n(F,oe);!we.done;K++,we=V.next())we=S(oe,F,K,we.value,Y),we!==null&&(t&&we.alternate!==null&&oe.delete(we.key===null?K:we.key),R=o(we,R,K),se===null?te=we:se.sibling=we,se=we);return t&&oe.forEach(function(Z){return e(F,Z)}),wl&&Ng(F,K),te}function D(F,R,V,Y){if(typeof V=="object"&&V!==null&&V.type===wy&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case Bw:e:{for(var te=V.key,se=R;se!==null;){if(se.key===te){if(te=V.type,te===wy){if(se.tag===7){r(F,se.sibling),R=s(se,V.props.children),R.return=F,F=R;break e}}else if(se.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===tm&&eD(te)===se.type){r(F,se.sibling),R=s(se,V.props),R.ref=jv(F,se,V),R.return=F,F=R;break e}r(F,se);break}else e(F,se);se=se.sibling}V.type===wy?(R=t0(V.props.children,F.mode,Y,V.key),R.return=F,F=R):(Y=i5(V.type,V.key,V.props,null,F.mode,Y),Y.ref=jv(F,R,V),Y.return=F,F=Y)}return c(F);case by:e:{for(se=V.key;R!==null;){if(R.key===se)if(R.tag===4&&R.stateNode.containerInfo===V.containerInfo&&R.stateNode.implementation===V.implementation){r(F,R.sibling),R=s(R,V.children||[]),R.return=F,F=R;break e}else{r(F,R);break}else e(F,R);R=R.sibling}R=hE(V,F.mode,Y),R.return=F,F=R}return c(F);case tm:return se=V._init,D(F,R,se(V._payload),Y)}if(tx(V))return P(F,R,V,Y);if(Lv(V))return j(F,R,V,Y);Dw(F,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,R!==null&&R.tag===6?(r(F,R.sibling),R=s(R,V),R.return=F,F=R):(r(F,R),R=dE(V,F.mode,Y),R.return=F,F=R),c(F)):r(F,R)}return D}var c1=_Q(!0),bQ=_Q(!1),U5=rg(null),z5=null,Ny=null,LI=null;function II(){LI=Ny=z5=null}function NI(t){var e=U5.current;Al(U5),t._currentValue=e}function zT(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Wy(t,e){z5=t,LI=Ny=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zd=!0),t.firstContext=null)}function ef(t){var e=t._currentValue;if(LI!==t)if(t={context:t,memoizedValue:e,next:null},Ny===null){if(z5===null)throw Error(Qn(308));Ny=t,z5.dependencies={lanes:0,firstContext:t}}else Ny=Ny.next=t;return e}var Gg=null;function FI(t){Gg===null?Gg=[t]:Gg.push(t)}function wQ(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,FI(e)):(r.next=s.next,s.next=r),e.interleaved=r,dA(t,n)}function dA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var rm=!1;function PI(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CQ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tm(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Vo&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,dA(t,r)}return s=n.interleaved,s===null?(e.next=e,FI(n)):(e.next=s.next,s.next=e),n.interleaved=e,dA(t,r)}function Z2(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,yI(t,r)}}function tD(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=c:o=o.next=c,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Q5(t,e,r,n){var s=t.updateQueue;rm=!1;var o=s.firstBaseUpdate,c=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var i=u,m=i.next;i.next=null,c===null?o=m:c.next=m,c=i;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==c&&(u===null?g.firstBaseUpdate=m:u.next=m,g.lastBaseUpdate=i))}if(o!==null){var C=s.baseState;c=0,g=m=i=null,u=o;do{var B=u.lane,S=u.eventTime;if((n&B)===B){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,j=u;switch(B=e,S=r,j.tag){case 1:if(P=j.payload,typeof P=="function"){C=P.call(S,C,B);break e}C=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=j.payload,B=typeof P=="function"?P.call(S,C,B):P,B==null)break e;C=Rl({},C,B);break e;case 2:rm=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,B=s.effects,B===null?s.effects=[u]:B.push(u))}else S={eventTime:S,lane:B,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(m=g=S,i=C):g=g.next=S,c|=B;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;B=u,u=B.next,B.next=null,s.lastBaseUpdate=B,s.shared.pending=null}}while(!0);if(g===null&&(i=C),s.baseState=i,s.firstBaseUpdate=m,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do c|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);g0|=c,t.lanes=c,t.memoizedState=C}}function rD(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Qn(191,s));s.call(n)}}}var Z_={},yp=rg(Z_),A_=rg(Z_),m_=rg(Z_);function $g(t){if(t===Z_)throw Error(Qn(174));return t}function jI(t,e){switch(Ja(m_,e),Ja(A_,t),Ja(yp,Z_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_T(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_T(e,t)}Al(yp),Ja(yp,e)}function u1(){Al(yp),Al(A_),Al(m_)}function SQ(t){$g(m_.current);var e=$g(yp.current),r=_T(e,t.type);e!==r&&(Ja(A_,t),Ja(yp,r))}function MI(t){A_.current===t&&(Al(yp),Al(A_))}var Ml=rg(0);function H5(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sE=[];function kI(){for(var t=0;t<sE.length;t++)sE[t]._workInProgressVersionPrimary=null;sE.length=0}var J2=xA.ReactCurrentDispatcher,oE=xA.ReactCurrentBatchConfig,m0=0,Dl=null,Hc=null,eu=null,V5=!1,Bx=!1,g_=0,Cte=0;function Pu(){throw Error(Qn(321))}function DI(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Of(t[r],e[r]))return!1;return!0}function OI(t,e,r,n,s,o){if(m0=o,Dl=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,J2.current=t===null||t.memoizedState===null?Tte:Lte,t=r(n,s),Bx){o=0;do{if(Bx=!1,g_=0,25<=o)throw Error(Qn(301));o+=1,eu=Hc=null,e.updateQueue=null,J2.current=Ite,t=r(n,s)}while(Bx)}if(J2.current=G5,e=Hc!==null&&Hc.next!==null,m0=0,eu=Hc=Dl=null,V5=!1,e)throw Error(Qn(300));return t}function RI(){var t=g_!==0;return g_=0,t}function dp(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return eu===null?Dl.memoizedState=eu=t:eu=eu.next=t,eu}function tf(){if(Hc===null){var t=Dl.alternate;t=t!==null?t.memoizedState:null}else t=Hc.next;var e=eu===null?Dl.memoizedState:eu.next;if(e!==null)eu=e,Hc=t;else{if(t===null)throw Error(Qn(310));Hc=t,t={memoizedState:Hc.memoizedState,baseState:Hc.baseState,baseQueue:Hc.baseQueue,queue:Hc.queue,next:null},eu===null?Dl.memoizedState=eu=t:eu=eu.next=t}return eu}function y_(t,e){return typeof e=="function"?e(t):e}function aE(t){var e=tf(),r=e.queue;if(r===null)throw Error(Qn(311));r.lastRenderedReducer=t;var n=Hc,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var c=s.next;s.next=o.next,o.next=c}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var u=c=null,i=null,m=o;do{var g=m.lane;if((m0&g)===g)i!==null&&(i=i.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),n=m.hasEagerState?m.eagerState:t(n,m.action);else{var C={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};i===null?(u=i=C,c=n):i=i.next=C,Dl.lanes|=g,g0|=g}m=m.next}while(m!==null&&m!==o);i===null?c=n:i.next=u,Of(n,e.memoizedState)||(zd=!0),e.memoizedState=n,e.baseState=c,e.baseQueue=i,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,Dl.lanes|=o,g0|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function lE(t){var e=tf(),r=e.queue;if(r===null)throw Error(Qn(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var c=s=s.next;do o=t(o,c.action),c=c.next;while(c!==s);Of(o,e.memoizedState)||(zd=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function BQ(){}function EQ(t,e){var r=Dl,n=tf(),s=e(),o=!Of(n.memoizedState,s);if(o&&(n.memoizedState=s,zd=!0),n=n.queue,UI(IQ.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||eu!==null&&eu.memoizedState.tag&1){if(r.flags|=2048,v_(9,LQ.bind(null,r,n,s,e),void 0,null),nu===null)throw Error(Qn(349));m0&30||TQ(r,e,s)}return s}function TQ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Dl.updateQueue,e===null?(e={lastEffect:null,stores:null},Dl.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function LQ(t,e,r,n){e.value=r,e.getSnapshot=n,NQ(e)&&FQ(t)}function IQ(t,e,r){return r(function(){NQ(e)&&FQ(t)})}function NQ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Of(t,r)}catch{return!0}}function FQ(t){var e=dA(t,1);e!==null&&Mf(e,t,1,-1)}function nD(t){var e=dp();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y_,lastRenderedState:t},e.queue=t,t=t.dispatch=Ete.bind(null,Dl,t),[e.memoizedState,t]}function v_(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Dl.updateQueue,e===null?(e={lastEffect:null,stores:null},Dl.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function PQ(){return tf().memoizedState}function e5(t,e,r,n){var s=dp();Dl.flags|=t,s.memoizedState=v_(1|e,r,void 0,n===void 0?null:n)}function eC(t,e,r,n){var s=tf();n=n===void 0?null:n;var o=void 0;if(Hc!==null){var c=Hc.memoizedState;if(o=c.destroy,n!==null&&DI(n,c.deps)){s.memoizedState=v_(e,r,o,n);return}}Dl.flags|=t,s.memoizedState=v_(1|e,r,o,n)}function iD(t,e){return e5(8390656,8,t,e)}function UI(t,e){return eC(2048,8,t,e)}function jQ(t,e){return eC(4,2,t,e)}function MQ(t,e){return eC(4,4,t,e)}function kQ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DQ(t,e,r){return r=r!=null?r.concat([t]):null,eC(4,4,kQ.bind(null,e,t),r)}function zI(){}function OQ(t,e){var r=tf();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&DI(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function RQ(t,e){var r=tf();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&DI(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function UQ(t,e,r){return m0&21?(Of(r,e)||(r=G9(),Dl.lanes|=r,g0|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zd=!0),t.memoizedState=r)}function Ste(t,e){var r=Ca;Ca=r!==0&&4>r?r:4,t(!0);var n=oE.transition;oE.transition={};try{t(!1),e()}finally{Ca=r,oE.transition=n}}function zQ(){return tf().memoizedState}function Bte(t,e,r){var n=Im(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},QQ(t))HQ(e,r);else if(r=wQ(t,e,r,n),r!==null){var s=_d();Mf(r,t,n,s),VQ(r,e,n)}}function Ete(t,e,r){var n=Im(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(QQ(t))HQ(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,u=o(c,r);if(s.hasEagerState=!0,s.eagerState=u,Of(u,c)){var i=e.interleaved;i===null?(s.next=s,FI(e)):(s.next=i.next,i.next=s),e.interleaved=s;return}}catch{}finally{}r=wQ(t,e,s,n),r!==null&&(s=_d(),Mf(r,t,n,s),VQ(r,e,n))}}function QQ(t){var e=t.alternate;return t===Dl||e!==null&&e===Dl}function HQ(t,e){Bx=V5=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function VQ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,yI(t,r)}}var G5={readContext:ef,useCallback:Pu,useContext:Pu,useEffect:Pu,useImperativeHandle:Pu,useInsertionEffect:Pu,useLayoutEffect:Pu,useMemo:Pu,useReducer:Pu,useRef:Pu,useState:Pu,useDebugValue:Pu,useDeferredValue:Pu,useTransition:Pu,useMutableSource:Pu,useSyncExternalStore:Pu,useId:Pu,unstable_isNewReconciler:!1},Tte={readContext:ef,useCallback:function(t,e){return dp().memoizedState=[t,e===void 0?null:e],t},useContext:ef,useEffect:iD,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,e5(4194308,4,kQ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return e5(4194308,4,t,e)},useInsertionEffect:function(t,e){return e5(4,2,t,e)},useMemo:function(t,e){var r=dp();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=dp();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Bte.bind(null,Dl,t),[n.memoizedState,t]},useRef:function(t){var e=dp();return t={current:t},e.memoizedState=t},useState:nD,useDebugValue:zI,useDeferredValue:function(t){return dp().memoizedState=t},useTransition:function(){var t=nD(!1),e=t[0];return t=Ste.bind(null,t[1]),dp().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Dl,s=dp();if(wl){if(r===void 0)throw Error(Qn(407));r=r()}else{if(r=e(),nu===null)throw Error(Qn(349));m0&30||TQ(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,iD(IQ.bind(null,n,o,t),[t]),n.flags|=2048,v_(9,LQ.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=dp(),e=nu.identifierPrefix;if(wl){var r=eA,n=Jp;r=(n&~(1<<32-jf(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=g_++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Cte++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lte={readContext:ef,useCallback:OQ,useContext:ef,useEffect:UI,useImperativeHandle:DQ,useInsertionEffect:jQ,useLayoutEffect:MQ,useMemo:RQ,useReducer:aE,useRef:PQ,useState:function(){return aE(y_)},useDebugValue:zI,useDeferredValue:function(t){var e=tf();return UQ(e,Hc.memoizedState,t)},useTransition:function(){var t=aE(y_)[0],e=tf().memoizedState;return[t,e]},useMutableSource:BQ,useSyncExternalStore:EQ,useId:zQ,unstable_isNewReconciler:!1},Ite={readContext:ef,useCallback:OQ,useContext:ef,useEffect:UI,useImperativeHandle:DQ,useInsertionEffect:jQ,useLayoutEffect:MQ,useMemo:RQ,useReducer:lE,useRef:PQ,useState:function(){return lE(y_)},useDebugValue:zI,useDeferredValue:function(t){var e=tf();return Hc===null?e.memoizedState=t:UQ(e,Hc.memoizedState,t)},useTransition:function(){var t=lE(y_)[0],e=tf().memoizedState;return[t,e]},useMutableSource:BQ,useSyncExternalStore:EQ,useId:zQ,unstable_isNewReconciler:!1};function Tf(t,e){if(t&&t.defaultProps){e=Rl({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function QT(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Rl({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var tC={isMounted:function(t){return(t=t._reactInternals)?S0(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_d(),s=Im(t),o=sA(n,s);o.payload=e,r!=null&&(o.callback=r),e=Tm(t,o,s),e!==null&&(Mf(e,t,s,n),Z2(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_d(),s=Im(t),o=sA(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Tm(t,o,s),e!==null&&(Mf(e,t,s,n),Z2(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_d(),n=Im(t),s=sA(r,n);s.tag=2,e!=null&&(s.callback=e),e=Tm(t,s,n),e!==null&&(Mf(e,t,n,r),Z2(e,t,n))}};function sD(t,e,r,n,s,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,c):e.prototype&&e.prototype.isPureReactComponent?!d_(r,n)||!d_(s,o):!0}function GQ(t,e,r){var n=!1,s=Qm,o=e.contextType;return typeof o=="object"&&o!==null?o=ef(o):(s=$d(e)?p0:td.current,n=e.contextTypes,o=(n=n!=null)?a1(t,s):Qm),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tC,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function oD(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&tC.enqueueReplaceState(e,e.state,null)}function HT(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},PI(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=ef(o):(o=$d(e)?p0:td.current,s.context=a1(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(QT(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tC.enqueueReplaceState(s,s.state,null),Q5(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function d1(t,e){try{var r="",n=e;do r+=iee(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function cE(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function VT(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Nte=typeof WeakMap=="function"?WeakMap:Map;function $Q(t,e,r){r=sA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){q5||(q5=!0,e6=n),VT(t,e)},r}function qQ(t,e,r){r=sA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){VT(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){VT(t,e),typeof n!="function"&&(Lm===null?Lm=new Set([this]):Lm.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),r}function aD(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Nte;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Gte.bind(null,t,e,r),e.then(t,t))}function lD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cD(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=sA(-1,1),e.tag=2,Tm(r,e,1))),r.lanes|=1),t)}var Fte=xA.ReactCurrentOwner,zd=!1;function yd(t,e,r,n){e.child=t===null?bQ(e,null,r,n):c1(e,t.child,r,n)}function uD(t,e,r,n,s){r=r.render;var o=e.ref;return Wy(e,s),n=OI(t,e,r,n,o,s),r=RI(),t!==null&&!zd?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,hA(t,e,s)):(wl&&r&&BI(e),e.flags|=1,yd(t,e,n,s),e.child)}function dD(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!KI(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,WQ(t,e,o,n,s)):(t=i5(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var c=o.memoizedProps;if(r=r.compare,r=r!==null?r:d_,r(c,n)&&t.ref===e.ref)return hA(t,e,s)}return e.flags|=1,t=Nm(o,n),t.ref=e.ref,t.return=e,e.child=t}function WQ(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(d_(o,n)&&t.ref===e.ref)if(zd=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(zd=!0);else return e.lanes=t.lanes,hA(t,e,s)}return GT(t,e,r,n,s)}function KQ(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ja(Py,ch),ch|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ja(Py,ch),ch|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ja(Py,ch),ch|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ja(Py,ch),ch|=n;return yd(t,e,s,r),e.child}function XQ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function GT(t,e,r,n,s){var o=$d(r)?p0:td.current;return o=a1(e,o),Wy(e,s),r=OI(t,e,r,n,o,s),n=RI(),t!==null&&!zd?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,hA(t,e,s)):(wl&&n&&BI(e),e.flags|=1,yd(t,e,r,s),e.child)}function hD(t,e,r,n,s){if($d(r)){var o=!0;D5(e)}else o=!1;if(Wy(e,s),e.stateNode===null)t5(t,e),GQ(e,r,n),HT(e,r,n,s),n=!0;else if(t===null){var c=e.stateNode,u=e.memoizedProps;c.props=u;var i=c.context,m=r.contextType;typeof m=="object"&&m!==null?m=ef(m):(m=$d(r)?p0:td.current,m=a1(e,m));var g=r.getDerivedStateFromProps,C=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function";C||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==n||i!==m)&&oD(e,c,n,m),rm=!1;var B=e.memoizedState;c.state=B,Q5(e,n,c,s),i=e.memoizedState,u!==n||B!==i||Gd.current||rm?(typeof g=="function"&&(QT(e,r,g,n),i=e.memoizedState),(u=rm||sD(e,r,u,n,B,i,m))?(C||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=i),c.props=n,c.state=i,c.context=m,n=u):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{c=e.stateNode,CQ(t,e),u=e.memoizedProps,m=e.type===e.elementType?u:Tf(e.type,u),c.props=m,C=e.pendingProps,B=c.context,i=r.contextType,typeof i=="object"&&i!==null?i=ef(i):(i=$d(r)?p0:td.current,i=a1(e,i));var S=r.getDerivedStateFromProps;(g=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==C||B!==i)&&oD(e,c,n,i),rm=!1,B=e.memoizedState,c.state=B,Q5(e,n,c,s);var P=e.memoizedState;u!==C||B!==P||Gd.current||rm?(typeof S=="function"&&(QT(e,r,S,n),P=e.memoizedState),(m=rm||sD(e,r,m,n,B,P,i)||!1)?(g||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,P,i),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,P,i)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=P),c.props=n,c.state=P,c.context=i,n=m):(typeof c.componentDidUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=1024),n=!1)}return $T(t,e,r,n,o,s)}function $T(t,e,r,n,s,o){XQ(t,e);var c=(e.flags&128)!==0;if(!n&&!c)return s&&Yk(e,r,!1),hA(t,e,o);n=e.stateNode,Fte.current=e;var u=c&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&c?(e.child=c1(e,t.child,null,o),e.child=c1(e,null,u,o)):yd(t,e,u,o),e.memoizedState=n.state,s&&Yk(e,r,!0),e.child}function YQ(t){var e=t.stateNode;e.pendingContext?Xk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xk(t,e.context,!1),jI(t,e.containerInfo)}function fD(t,e,r,n,s){return l1(),TI(s),e.flags|=256,yd(t,e,r,n),e.child}var qT={dehydrated:null,treeContext:null,retryLane:0};function WT(t){return{baseLanes:t,cachePool:null,transitions:null}}function ZQ(t,e,r){var n=e.pendingProps,s=Ml.current,o=!1,c=(e.flags&128)!==0,u;if((u=c)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ja(Ml,s&1),t===null)return UT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=n.children,t=n.fallback,o?(n=e.mode,o=e.child,c={mode:"hidden",children:c},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=iC(c,n,0,null),t=t0(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=WT(r),e.memoizedState=qT,t):QI(e,c));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return Pte(t,e,c,n,u,s,r);if(o){o=n.fallback,c=e.mode,s=t.child,u=s.sibling;var i={mode:"hidden",children:n.children};return!(c&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=i,e.deletions=null):(n=Nm(s,i),n.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=Nm(u,o):(o=t0(o,c,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,c=t.child.memoizedState,c=c===null?WT(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~r,e.memoizedState=qT,n}return o=t.child,t=o.sibling,n=Nm(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function QI(t,e){return e=iC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ow(t,e,r,n){return n!==null&&TI(n),c1(e,t.child,null,r),t=QI(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Pte(t,e,r,n,s,o,c){if(r)return e.flags&256?(e.flags&=-257,n=cE(Error(Qn(422))),Ow(t,e,c,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=iC({mode:"visible",children:n.children},s,0,null),o=t0(o,s,c,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&c1(e,t.child,null,c),e.child.memoizedState=WT(c),e.memoizedState=qT,o);if(!(e.mode&1))return Ow(t,e,c,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var u=n.dgst;return n=u,o=Error(Qn(419)),n=cE(o,n,void 0),Ow(t,e,c,n)}if(u=(c&t.childLanes)!==0,zd||u){if(n=nu,n!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|c)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,dA(t,s),Mf(n,t,s,-1))}return WI(),n=cE(Error(Qn(421))),Ow(t,e,c,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=$te.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,dh=Em(s.nextSibling),fh=e,wl=!0,Ff=null,t!==null&&($h[qh++]=Jp,$h[qh++]=eA,$h[qh++]=A0,Jp=t.id,eA=t.overflow,A0=e),e=QI(e,n.children),e.flags|=4096,e)}function pD(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zT(t.return,e,r)}function uE(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function JQ(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(yd(t,e,n.children,r),n=Ml.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pD(t,r,e);else if(t.tag===19)pD(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ja(Ml,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&H5(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),uE(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&H5(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}uE(e,!0,r,null,o);break;case"together":uE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function t5(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),g0|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Qn(153));if(e.child!==null){for(t=e.child,r=Nm(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Nm(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function jte(t,e,r){switch(e.tag){case 3:YQ(e),l1();break;case 5:SQ(e);break;case 1:$d(e.type)&&D5(e);break;case 4:jI(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ja(U5,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ja(Ml,Ml.current&1),e.flags|=128,null):r&e.child.childLanes?ZQ(t,e,r):(Ja(Ml,Ml.current&1),t=hA(t,e,r),t!==null?t.sibling:null);Ja(Ml,Ml.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return JQ(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ja(Ml,Ml.current),n)break;return null;case 22:case 23:return e.lanes=0,KQ(t,e,r)}return hA(t,e,r)}var eH,KT,tH,rH;eH=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};KT=function(){};tH=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,$g(yp.current);var o=null;switch(r){case"input":s=gT(t,s),n=gT(t,n),o=[];break;case"select":s=Rl({},s,{value:void 0}),n=Rl({},n,{value:void 0}),o=[];break;case"textarea":s=xT(t,s),n=xT(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=M5)}bT(r,n);var c;r=null;for(m in s)if(!n.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var u=s[m];for(c in u)u.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(i_.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in n){var i=n[m];if(u=s!=null?s[m]:void 0,n.hasOwnProperty(m)&&i!==u&&(i!=null||u!=null))if(m==="style")if(u){for(c in u)!u.hasOwnProperty(c)||i&&i.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in i)i.hasOwnProperty(c)&&u[c]!==i[c]&&(r||(r={}),r[c]=i[c])}else r||(o||(o=[]),o.push(m,r)),r=i;else m==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,u=u?u.__html:void 0,i!=null&&u!==i&&(o=o||[]).push(m,i)):m==="children"?typeof i!="string"&&typeof i!="number"||(o=o||[]).push(m,""+i):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(i_.hasOwnProperty(m)?(i!=null&&m==="onScroll"&&hl("scroll",t),o||u===i||(o=[])):(o=o||[]).push(m,i))}r&&(o=o||[]).push("style",r);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};rH=function(t,e,r,n){r!==n&&(e.flags|=4)};function Mv(t,e){if(!wl)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ju(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Mte(t,e,r){var n=e.pendingProps;switch(EI(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ju(e),null;case 1:return $d(e.type)&&k5(),ju(e),null;case 3:return n=e.stateNode,u1(),Al(Gd),Al(td),kI(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(kw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ff!==null&&(n6(Ff),Ff=null))),KT(t,e),ju(e),null;case 5:MI(e);var s=$g(m_.current);if(r=e.type,t!==null&&e.stateNode!=null)tH(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Qn(166));return ju(e),null}if(t=$g(yp.current),kw(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[pp]=e,n[p_]=o,t=(e.mode&1)!==0,r){case"dialog":hl("cancel",n),hl("close",n);break;case"iframe":case"object":case"embed":hl("load",n);break;case"video":case"audio":for(s=0;s<nx.length;s++)hl(nx[s],n);break;case"source":hl("error",n);break;case"img":case"image":case"link":hl("error",n),hl("load",n);break;case"details":hl("toggle",n);break;case"input":wk(n,o),hl("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},hl("invalid",n);break;case"textarea":Sk(n,o),hl("invalid",n)}bT(r,o),s=null;for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];c==="children"?typeof u=="string"?n.textContent!==u&&(o.suppressHydrationWarning!==!0&&Mw(n.textContent,u,t),s=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Mw(n.textContent,u,t),s=["children",""+u]):i_.hasOwnProperty(c)&&u!=null&&c==="onScroll"&&hl("scroll",n)}switch(r){case"input":Ew(n),Ck(n,o,!0);break;case"textarea":Ew(n),Bk(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=M5)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I9(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=c.createElement(r,{is:n.is}):(t=c.createElement(r),r==="select"&&(c=t,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):t=c.createElementNS(t,r),t[pp]=e,t[p_]=n,eH(t,e,!1,!1),e.stateNode=t;e:{switch(c=wT(r,n),r){case"dialog":hl("cancel",t),hl("close",t),s=n;break;case"iframe":case"object":case"embed":hl("load",t),s=n;break;case"video":case"audio":for(s=0;s<nx.length;s++)hl(nx[s],t);s=n;break;case"source":hl("error",t),s=n;break;case"img":case"image":case"link":hl("error",t),hl("load",t),s=n;break;case"details":hl("toggle",t),s=n;break;case"input":wk(t,n),s=gT(t,n),hl("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Rl({},n,{value:void 0}),hl("invalid",t);break;case"textarea":Sk(t,n),s=xT(t,n),hl("invalid",t);break;default:s=n}bT(r,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var i=u[o];o==="style"?P9(t,i):o==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&N9(t,i)):o==="children"?typeof i=="string"?(r!=="textarea"||i!=="")&&s_(t,i):typeof i=="number"&&s_(t,""+i):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(i_.hasOwnProperty(o)?i!=null&&o==="onScroll"&&hl("scroll",t):i!=null&&hI(t,o,i,c))}switch(r){case"input":Ew(t),Ck(t,n,!1);break;case"textarea":Ew(t),Bk(t);break;case"option":n.value!=null&&t.setAttribute("value",""+zm(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Vy(t,!!n.multiple,o,!1):n.defaultValue!=null&&Vy(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=M5)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ju(e),null;case 6:if(t&&e.stateNode!=null)rH(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Qn(166));if(r=$g(m_.current),$g(yp.current),kw(e)){if(n=e.stateNode,r=e.memoizedProps,n[pp]=e,(o=n.nodeValue!==r)&&(t=fh,t!==null))switch(t.tag){case 3:Mw(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Mw(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pp]=e,e.stateNode=n}return ju(e),null;case 13:if(Al(Ml),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wl&&dh!==null&&e.mode&1&&!(e.flags&128))xQ(),l1(),e.flags|=98560,o=!1;else if(o=kw(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Qn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Qn(317));o[pp]=e}else l1(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ju(e),o=!1}else Ff!==null&&(n6(Ff),Ff=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ml.current&1?$c===0&&($c=3):WI())),e.updateQueue!==null&&(e.flags|=4),ju(e),null);case 4:return u1(),KT(t,e),t===null&&h_(e.stateNode.containerInfo),ju(e),null;case 10:return NI(e.type._context),ju(e),null;case 17:return $d(e.type)&&k5(),ju(e),null;case 19:if(Al(Ml),o=e.memoizedState,o===null)return ju(e),null;if(n=(e.flags&128)!==0,c=o.rendering,c===null)if(n)Mv(o,!1);else{if($c!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=H5(t),c!==null){for(e.flags|=128,Mv(o,!1),n=c.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ja(Ml,Ml.current&1|2),e.child}t=t.sibling}o.tail!==null&&mc()>h1&&(e.flags|=128,n=!0,Mv(o,!1),e.lanes=4194304)}else{if(!n)if(t=H5(c),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Mv(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!wl)return ju(e),null}else 2*mc()-o.renderingStartTime>h1&&r!==1073741824&&(e.flags|=128,n=!0,Mv(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(r=o.last,r!==null?r.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=mc(),e.sibling=null,r=Ml.current,Ja(Ml,n?r&1|2:r&1),e):(ju(e),null);case 22:case 23:return qI(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ch&1073741824&&(ju(e),e.subtreeFlags&6&&(e.flags|=8192)):ju(e),null;case 24:return null;case 25:return null}throw Error(Qn(156,e.tag))}function kte(t,e){switch(EI(e),e.tag){case 1:return $d(e.type)&&k5(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return u1(),Al(Gd),Al(td),kI(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MI(e),null;case 13:if(Al(Ml),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Qn(340));l1()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Al(Ml),null;case 4:return u1(),null;case 10:return NI(e.type._context),null;case 22:case 23:return qI(),null;case 24:return null;default:return null}}var Rw=!1,Xu=!1,Dte=typeof WeakSet=="function"?WeakSet:Set,yi=null;function Fy(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tc(t,e,n)}else r.current=null}function XT(t,e,r){try{r()}catch(n){tc(t,e,n)}}var AD=!1;function Ote(t,e){if(PT=F5,t=aQ(),SI(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var c=0,u=-1,i=-1,m=0,g=0,C=t,B=null;t:for(;;){for(var S;C!==r||s!==0&&C.nodeType!==3||(u=c+s),C!==o||n!==0&&C.nodeType!==3||(i=c+n),C.nodeType===3&&(c+=C.nodeValue.length),(S=C.firstChild)!==null;)B=C,C=S;for(;;){if(C===t)break t;if(B===r&&++m===s&&(u=c),B===o&&++g===n&&(i=c),(S=C.nextSibling)!==null)break;C=B,B=C.parentNode}C=S}r=u===-1||i===-1?null:{start:u,end:i}}else r=null}r=r||{start:0,end:0}}else r=null;for(jT={focusedElem:t,selectionRange:r},F5=!1,yi=e;yi!==null;)if(e=yi,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yi=t;else for(;yi!==null;){e=yi;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var j=P.memoizedProps,D=P.memoizedState,F=e.stateNode,R=F.getSnapshotBeforeUpdate(e.elementType===e.type?j:Tf(e.type,j),D);F.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var V=e.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qn(163))}}catch(Y){tc(e,e.return,Y)}if(t=e.sibling,t!==null){t.return=e.return,yi=t;break}yi=e.return}return P=AD,AD=!1,P}function Ex(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&XT(e,r,o)}s=s.next}while(s!==n)}}function rC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function YT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function nH(t){var e=t.alternate;e!==null&&(t.alternate=null,nH(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pp],delete e[p_],delete e[DT],delete e[xte],delete e[_te])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iH(t){return t.tag===5||t.tag===3||t.tag===4}function mD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iH(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ZT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=M5));else if(n!==4&&(t=t.child,t!==null))for(ZT(t,e,r),t=t.sibling;t!==null;)ZT(t,e,r),t=t.sibling}function JT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(JT(t,e,r),t=t.sibling;t!==null;)JT(t,e,r),t=t.sibling}var hu=null,Nf=!1;function QA(t,e,r){for(r=r.child;r!==null;)sH(t,e,r),r=r.sibling}function sH(t,e,r){if(gp&&typeof gp.onCommitFiberUnmount=="function")try{gp.onCommitFiberUnmount(W4,r)}catch{}switch(r.tag){case 5:Xu||Fy(r,e);case 6:var n=hu,s=Nf;hu=null,QA(t,e,r),hu=n,Nf=s,hu!==null&&(Nf?(t=hu,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):hu.removeChild(r.stateNode));break;case 18:hu!==null&&(Nf?(t=hu,r=r.stateNode,t.nodeType===8?nE(t.parentNode,r):t.nodeType===1&&nE(t,r),c_(t)):nE(hu,r.stateNode));break;case 4:n=hu,s=Nf,hu=r.stateNode.containerInfo,Nf=!0,QA(t,e,r),hu=n,Nf=s;break;case 0:case 11:case 14:case 15:if(!Xu&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&XT(r,e,c),s=s.next}while(s!==n)}QA(t,e,r);break;case 1:if(!Xu&&(Fy(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){tc(r,e,u)}QA(t,e,r);break;case 21:QA(t,e,r);break;case 22:r.mode&1?(Xu=(n=Xu)||r.memoizedState!==null,QA(t,e,r),Xu=n):QA(t,e,r);break;default:QA(t,e,r)}}function gD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Dte),e.forEach(function(n){var s=qte.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function _f(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,c=e,u=c;e:for(;u!==null;){switch(u.tag){case 5:hu=u.stateNode,Nf=!1;break e;case 3:hu=u.stateNode.containerInfo,Nf=!0;break e;case 4:hu=u.stateNode.containerInfo,Nf=!0;break e}u=u.return}if(hu===null)throw Error(Qn(160));sH(o,c,s),hu=null,Nf=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(m){tc(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oH(e,t),e=e.sibling}function oH(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_f(e,t),ip(t),n&4){try{Ex(3,t,t.return),rC(3,t)}catch(j){tc(t,t.return,j)}try{Ex(5,t,t.return)}catch(j){tc(t,t.return,j)}}break;case 1:_f(e,t),ip(t),n&512&&r!==null&&Fy(r,r.return);break;case 5:if(_f(e,t),ip(t),n&512&&r!==null&&Fy(r,r.return),t.flags&32){var s=t.stateNode;try{s_(s,"")}catch(j){tc(t,t.return,j)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,c=r!==null?r.memoizedProps:o,u=t.type,i=t.updateQueue;if(t.updateQueue=null,i!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&T9(s,o),wT(u,c);var m=wT(u,o);for(c=0;c<i.length;c+=2){var g=i[c],C=i[c+1];g==="style"?P9(s,C):g==="dangerouslySetInnerHTML"?N9(s,C):g==="children"?s_(s,C):hI(s,g,C,m)}switch(u){case"input":yT(s,o);break;case"textarea":L9(s,o);break;case"select":var B=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Vy(s,!!o.multiple,S,!1):B!==!!o.multiple&&(o.defaultValue!=null?Vy(s,!!o.multiple,o.defaultValue,!0):Vy(s,!!o.multiple,o.multiple?[]:"",!1))}s[p_]=o}catch(j){tc(t,t.return,j)}}break;case 6:if(_f(e,t),ip(t),n&4){if(t.stateNode===null)throw Error(Qn(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(j){tc(t,t.return,j)}}break;case 3:if(_f(e,t),ip(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{c_(e.containerInfo)}catch(j){tc(t,t.return,j)}break;case 4:_f(e,t),ip(t);break;case 13:_f(e,t),ip(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(GI=mc())),n&4&&gD(t);break;case 22:if(g=r!==null&&r.memoizedState!==null,t.mode&1?(Xu=(m=Xu)||g,_f(e,t),Xu=m):_f(e,t),ip(t),n&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!g&&t.mode&1)for(yi=t,g=t.child;g!==null;){for(C=yi=g;yi!==null;){switch(B=yi,S=B.child,B.tag){case 0:case 11:case 14:case 15:Ex(4,B,B.return);break;case 1:Fy(B,B.return);var P=B.stateNode;if(typeof P.componentWillUnmount=="function"){n=B,r=B.return;try{e=n,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(j){tc(n,r,j)}}break;case 5:Fy(B,B.return);break;case 22:if(B.memoizedState!==null){vD(C);continue}}S!==null?(S.return=B,yi=S):vD(C)}g=g.sibling}e:for(g=null,C=t;;){if(C.tag===5){if(g===null){g=C;try{s=C.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=C.stateNode,i=C.memoizedProps.style,c=i!=null&&i.hasOwnProperty("display")?i.display:null,u.style.display=F9("display",c))}catch(j){tc(t,t.return,j)}}}else if(C.tag===6){if(g===null)try{C.stateNode.nodeValue=m?"":C.memoizedProps}catch(j){tc(t,t.return,j)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===t)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;g===C&&(g=null),C=C.return}g===C&&(g=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:_f(e,t),ip(t),n&4&&gD(t);break;case 21:break;default:_f(e,t),ip(t)}}function ip(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(iH(r)){var n=r;break e}r=r.return}throw Error(Qn(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(s_(s,""),n.flags&=-33);var o=mD(t);JT(t,o,s);break;case 3:case 4:var c=n.stateNode.containerInfo,u=mD(t);ZT(t,u,c);break;default:throw Error(Qn(161))}}catch(i){tc(t,t.return,i)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rte(t,e,r){yi=t,aH(t)}function aH(t,e,r){for(var n=(t.mode&1)!==0;yi!==null;){var s=yi,o=s.child;if(s.tag===22&&n){var c=s.memoizedState!==null||Rw;if(!c){var u=s.alternate,i=u!==null&&u.memoizedState!==null||Xu;u=Rw;var m=Xu;if(Rw=c,(Xu=i)&&!m)for(yi=s;yi!==null;)c=yi,i=c.child,c.tag===22&&c.memoizedState!==null?xD(s):i!==null?(i.return=c,yi=i):xD(s);for(;o!==null;)yi=o,aH(o),o=o.sibling;yi=s,Rw=u,Xu=m}yD(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,yi=o):yD(t)}}function yD(t){for(;yi!==null;){var e=yi;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xu||rC(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xu)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Tf(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&rD(e,o,n);break;case 3:var c=e.updateQueue;if(c!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}rD(e,c,r)}break;case 5:var u=e.stateNode;if(r===null&&e.flags&4){r=u;var i=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break;case"img":i.src&&(r.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var C=g.dehydrated;C!==null&&c_(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qn(163))}Xu||e.flags&512&&YT(e)}catch(B){tc(e,e.return,B)}}if(e===t){yi=null;break}if(r=e.sibling,r!==null){r.return=e.return,yi=r;break}yi=e.return}}function vD(t){for(;yi!==null;){var e=yi;if(e===t){yi=null;break}var r=e.sibling;if(r!==null){r.return=e.return,yi=r;break}yi=e.return}}function xD(t){for(;yi!==null;){var e=yi;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{rC(4,e)}catch(i){tc(e,r,i)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(i){tc(e,s,i)}}var o=e.return;try{YT(e)}catch(i){tc(e,o,i)}break;case 5:var c=e.return;try{YT(e)}catch(i){tc(e,c,i)}}}catch(i){tc(e,e.return,i)}if(e===t){yi=null;break}var u=e.sibling;if(u!==null){u.return=e.return,yi=u;break}yi=e.return}}var Ute=Math.ceil,$5=xA.ReactCurrentDispatcher,HI=xA.ReactCurrentOwner,Zh=xA.ReactCurrentBatchConfig,Vo=0,nu=null,Tc=null,gu=0,ch=0,Py=rg(0),$c=0,x_=null,g0=0,nC=0,VI=0,Tx=null,Rd=null,GI=0,h1=1/0,Kp=null,q5=!1,e6=null,Lm=null,Uw=!1,um=null,W5=0,Lx=0,t6=null,r5=-1,n5=0;function _d(){return Vo&6?mc():r5!==-1?r5:r5=mc()}function Im(t){return t.mode&1?Vo&2&&gu!==0?gu&-gu:wte.transition!==null?(n5===0&&(n5=G9()),n5):(t=Ca,t!==0||(t=window.event,t=t===void 0?16:Z9(t.type)),t):1}function Mf(t,e,r,n){if(50<Lx)throw Lx=0,t6=null,Error(Qn(185));K_(t,r,n),(!(Vo&2)||t!==nu)&&(t===nu&&(!(Vo&2)&&(nC|=r),$c===4&&sm(t,gu)),qd(t,n),r===1&&Vo===0&&!(e.mode&1)&&(h1=mc()+500,J4&&ng()))}function qd(t,e){var r=t.callbackNode;wee(t,e);var n=N5(t,t===nu?gu:0);if(n===0)r!==null&&Lk(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Lk(r),e===1)t.tag===0?bte(_D.bind(null,t)):gQ(_D.bind(null,t)),yte(function(){!(Vo&6)&&ng()}),r=null;else{switch($9(n)){case 1:r=gI;break;case 4:r=H9;break;case 16:r=I5;break;case 536870912:r=V9;break;default:r=I5}r=AH(r,lH.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function lH(t,e){if(r5=-1,n5=0,Vo&6)throw Error(Qn(327));var r=t.callbackNode;if(Ky()&&t.callbackNode!==r)return null;var n=N5(t,t===nu?gu:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=K5(t,n);else{e=n;var s=Vo;Vo|=2;var o=uH();(nu!==t||gu!==e)&&(Kp=null,h1=mc()+500,e0(t,e));do try{Hte();break}catch(u){cH(t,u)}while(!0);II(),$5.current=o,Vo=s,Tc!==null?e=0:(nu=null,gu=0,e=$c)}if(e!==0){if(e===2&&(s=TT(t),s!==0&&(n=s,e=r6(t,s))),e===1)throw r=x_,e0(t,0),sm(t,n),qd(t,mc()),r;if(e===6)sm(t,n);else{if(s=t.current.alternate,!(n&30)&&!zte(s)&&(e=K5(t,n),e===2&&(o=TT(t),o!==0&&(n=o,e=r6(t,o))),e===1))throw r=x_,e0(t,0),sm(t,n),qd(t,mc()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Qn(345));case 2:Fg(t,Rd,Kp);break;case 3:if(sm(t,n),(n&130023424)===n&&(e=GI+500-mc(),10<e)){if(N5(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){_d(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kT(Fg.bind(null,t,Rd,Kp),e);break}Fg(t,Rd,Kp);break;case 4:if(sm(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var c=31-jf(n);o=1<<c,c=e[c],c>s&&(s=c),n&=~o}if(n=s,n=mc()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ute(n/1960))-n,10<n){t.timeoutHandle=kT(Fg.bind(null,t,Rd,Kp),n);break}Fg(t,Rd,Kp);break;case 5:Fg(t,Rd,Kp);break;default:throw Error(Qn(329))}}}return qd(t,mc()),t.callbackNode===r?lH.bind(null,t):null}function r6(t,e){var r=Tx;return t.current.memoizedState.isDehydrated&&(e0(t,e).flags|=256),t=K5(t,e),t!==2&&(e=Rd,Rd=r,e!==null&&n6(e)),t}function n6(t){Rd===null?Rd=t:Rd.push.apply(Rd,t)}function zte(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Of(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sm(t,e){for(e&=~VI,e&=~nC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-jf(e),n=1<<r;t[r]=-1,e&=~n}}function _D(t){if(Vo&6)throw Error(Qn(327));Ky();var e=N5(t,0);if(!(e&1))return qd(t,mc()),null;var r=K5(t,e);if(t.tag!==0&&r===2){var n=TT(t);n!==0&&(e=n,r=r6(t,n))}if(r===1)throw r=x_,e0(t,0),sm(t,e),qd(t,mc()),r;if(r===6)throw Error(Qn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fg(t,Rd,Kp),qd(t,mc()),null}function $I(t,e){var r=Vo;Vo|=1;try{return t(e)}finally{Vo=r,Vo===0&&(h1=mc()+500,J4&&ng())}}function y0(t){um!==null&&um.tag===0&&!(Vo&6)&&Ky();var e=Vo;Vo|=1;var r=Zh.transition,n=Ca;try{if(Zh.transition=null,Ca=1,t)return t()}finally{Ca=n,Zh.transition=r,Vo=e,!(Vo&6)&&ng()}}function qI(){ch=Py.current,Al(Py)}function e0(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gte(r)),Tc!==null)for(r=Tc.return;r!==null;){var n=r;switch(EI(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&k5();break;case 3:u1(),Al(Gd),Al(td),kI();break;case 5:MI(n);break;case 4:u1();break;case 13:Al(Ml);break;case 19:Al(Ml);break;case 10:NI(n.type._context);break;case 22:case 23:qI()}r=r.return}if(nu=t,Tc=t=Nm(t.current,null),gu=ch=e,$c=0,x_=null,VI=nC=g0=0,Rd=Tx=null,Gg!==null){for(e=0;e<Gg.length;e++)if(r=Gg[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var c=o.next;o.next=s,n.next=c}r.pending=n}Gg=null}return t}function cH(t,e){do{var r=Tc;try{if(II(),J2.current=G5,V5){for(var n=Dl.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}V5=!1}if(m0=0,eu=Hc=Dl=null,Bx=!1,g_=0,HI.current=null,r===null||r.return===null){$c=1,x_=e,Tc=null;break}e:{var o=t,c=r.return,u=r,i=e;if(e=gu,u.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var m=i,g=u,C=g.tag;if(!(g.mode&1)&&(C===0||C===11||C===15)){var B=g.alternate;B?(g.updateQueue=B.updateQueue,g.memoizedState=B.memoizedState,g.lanes=B.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=lD(c);if(S!==null){S.flags&=-257,cD(S,c,u,o,e),S.mode&1&&aD(o,m,e),e=S,i=m;var P=e.updateQueue;if(P===null){var j=new Set;j.add(i),e.updateQueue=j}else P.add(i);break e}else{if(!(e&1)){aD(o,m,e),WI();break e}i=Error(Qn(426))}}else if(wl&&u.mode&1){var D=lD(c);if(D!==null){!(D.flags&65536)&&(D.flags|=256),cD(D,c,u,o,e),TI(d1(i,u));break e}}o=i=d1(i,u),$c!==4&&($c=2),Tx===null?Tx=[o]:Tx.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var F=$Q(o,i,e);tD(o,F);break e;case 1:u=i;var R=o.type,V=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Lm===null||!Lm.has(V)))){o.flags|=65536,e&=-e,o.lanes|=e;var Y=qQ(o,u,e);tD(o,Y);break e}}o=o.return}while(o!==null)}hH(r)}catch(te){e=te,Tc===r&&r!==null&&(Tc=r=r.return);continue}break}while(!0)}function uH(){var t=$5.current;return $5.current=G5,t===null?G5:t}function WI(){($c===0||$c===3||$c===2)&&($c=4),nu===null||!(g0&268435455)&&!(nC&268435455)||sm(nu,gu)}function K5(t,e){var r=Vo;Vo|=2;var n=uH();(nu!==t||gu!==e)&&(Kp=null,e0(t,e));do try{Qte();break}catch(s){cH(t,s)}while(!0);if(II(),Vo=r,$5.current=n,Tc!==null)throw Error(Qn(261));return nu=null,gu=0,$c}function Qte(){for(;Tc!==null;)dH(Tc)}function Hte(){for(;Tc!==null&&!pee();)dH(Tc)}function dH(t){var e=pH(t.alternate,t,ch);t.memoizedProps=t.pendingProps,e===null?hH(t):Tc=e,HI.current=null}function hH(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=kte(r,e),r!==null){r.flags&=32767,Tc=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$c=6,Tc=null;return}}else if(r=Mte(r,e,ch),r!==null){Tc=r;return}if(e=e.sibling,e!==null){Tc=e;return}Tc=e=t}while(e!==null);$c===0&&($c=5)}function Fg(t,e,r){var n=Ca,s=Zh.transition;try{Zh.transition=null,Ca=1,Vte(t,e,r,n)}finally{Zh.transition=s,Ca=n}return null}function Vte(t,e,r,n){do Ky();while(um!==null);if(Vo&6)throw Error(Qn(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Qn(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(Cee(t,o),t===nu&&(Tc=nu=null,gu=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Uw||(Uw=!0,AH(I5,function(){return Ky(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Zh.transition,Zh.transition=null;var c=Ca;Ca=1;var u=Vo;Vo|=4,HI.current=null,Ote(t,r),oH(r,t),ute(jT),F5=!!PT,jT=PT=null,t.current=r,Rte(r),Aee(),Vo=u,Ca=c,Zh.transition=o}else t.current=r;if(Uw&&(Uw=!1,um=t,W5=s),o=t.pendingLanes,o===0&&(Lm=null),yee(r.stateNode),qd(t,mc()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(q5)throw q5=!1,t=e6,e6=null,t;return W5&1&&t.tag!==0&&Ky(),o=t.pendingLanes,o&1?t===t6?Lx++:(Lx=0,t6=t):Lx=0,ng(),null}function Ky(){if(um!==null){var t=$9(W5),e=Zh.transition,r=Ca;try{if(Zh.transition=null,Ca=16>t?16:t,um===null)var n=!1;else{if(t=um,um=null,W5=0,Vo&6)throw Error(Qn(331));var s=Vo;for(Vo|=4,yi=t.current;yi!==null;){var o=yi,c=o.child;if(yi.flags&16){var u=o.deletions;if(u!==null){for(var i=0;i<u.length;i++){var m=u[i];for(yi=m;yi!==null;){var g=yi;switch(g.tag){case 0:case 11:case 15:Ex(8,g,o)}var C=g.child;if(C!==null)C.return=g,yi=C;else for(;yi!==null;){g=yi;var B=g.sibling,S=g.return;if(nH(g),g===m){yi=null;break}if(B!==null){B.return=S,yi=B;break}yi=S}}}var P=o.alternate;if(P!==null){var j=P.child;if(j!==null){P.child=null;do{var D=j.sibling;j.sibling=null,j=D}while(j!==null)}}yi=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,yi=c;else e:for(;yi!==null;){if(o=yi,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ex(9,o,o.return)}var F=o.sibling;if(F!==null){F.return=o.return,yi=F;break e}yi=o.return}}var R=t.current;for(yi=R;yi!==null;){c=yi;var V=c.child;if(c.subtreeFlags&2064&&V!==null)V.return=c,yi=V;else e:for(c=R;yi!==null;){if(u=yi,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:rC(9,u)}}catch(te){tc(u,u.return,te)}if(u===c){yi=null;break e}var Y=u.sibling;if(Y!==null){Y.return=u.return,yi=Y;break e}yi=u.return}}if(Vo=s,ng(),gp&&typeof gp.onPostCommitFiberRoot=="function")try{gp.onPostCommitFiberRoot(W4,t)}catch{}n=!0}return n}finally{Ca=r,Zh.transition=e}}return!1}function bD(t,e,r){e=d1(r,e),e=$Q(t,e,1),t=Tm(t,e,1),e=_d(),t!==null&&(K_(t,1,e),qd(t,e))}function tc(t,e,r){if(t.tag===3)bD(t,t,r);else for(;e!==null;){if(e.tag===3){bD(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Lm===null||!Lm.has(n))){t=d1(r,t),t=qQ(e,t,1),e=Tm(e,t,1),t=_d(),e!==null&&(K_(e,1,t),qd(e,t));break}}e=e.return}}function Gte(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_d(),t.pingedLanes|=t.suspendedLanes&r,nu===t&&(gu&r)===r&&($c===4||$c===3&&(gu&130023424)===gu&&500>mc()-GI?e0(t,0):VI|=r),qd(t,e)}function fH(t,e){e===0&&(t.mode&1?(e=Iw,Iw<<=1,!(Iw&130023424)&&(Iw=4194304)):e=1);var r=_d();t=dA(t,e),t!==null&&(K_(t,e,r),qd(t,r))}function $te(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),fH(t,r)}function qte(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Qn(314))}n!==null&&n.delete(e),fH(t,r)}var pH;pH=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gd.current)zd=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return zd=!1,jte(t,e,r);zd=!!(t.flags&131072)}else zd=!1,wl&&e.flags&1048576&&yQ(e,R5,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;t5(t,e),t=e.pendingProps;var s=a1(e,td.current);Wy(e,r),s=OI(null,e,n,t,s,r);var o=RI();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$d(n)?(o=!0,D5(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,PI(e),s.updater=tC,e.stateNode=s,s._reactInternals=e,HT(e,n,t,r),e=$T(null,e,n,!0,o,r)):(e.tag=0,wl&&o&&BI(e),yd(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(t5(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Kte(n),t=Tf(n,t),s){case 0:e=GT(null,e,n,t,r);break e;case 1:e=hD(null,e,n,t,r);break e;case 11:e=uD(null,e,n,t,r);break e;case 14:e=dD(null,e,n,Tf(n.type,t),r);break e}throw Error(Qn(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Tf(n,s),GT(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Tf(n,s),hD(t,e,n,s,r);case 3:e:{if(YQ(e),t===null)throw Error(Qn(387));n=e.pendingProps,o=e.memoizedState,s=o.element,CQ(t,e),Q5(e,n,null,r);var c=e.memoizedState;if(n=c.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=d1(Error(Qn(423)),e),e=fD(t,e,n,r,s);break e}else if(n!==s){s=d1(Error(Qn(424)),e),e=fD(t,e,n,r,s);break e}else for(dh=Em(e.stateNode.containerInfo.firstChild),fh=e,wl=!0,Ff=null,r=bQ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(l1(),n===s){e=hA(t,e,r);break e}yd(t,e,n,r)}e=e.child}return e;case 5:return SQ(e),t===null&&UT(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,c=s.children,MT(n,s)?c=null:o!==null&&MT(n,o)&&(e.flags|=32),XQ(t,e),yd(t,e,c,r),e.child;case 6:return t===null&&UT(e),null;case 13:return ZQ(t,e,r);case 4:return jI(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=c1(e,null,n,r):yd(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Tf(n,s),uD(t,e,n,s,r);case 7:return yd(t,e,e.pendingProps,r),e.child;case 8:return yd(t,e,e.pendingProps.children,r),e.child;case 12:return yd(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,c=s.value,Ja(U5,n._currentValue),n._currentValue=c,o!==null)if(Of(o.value,c)){if(o.children===s.children&&!Gd.current){e=hA(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){c=o.child;for(var i=u.firstContext;i!==null;){if(i.context===n){if(o.tag===1){i=sA(-1,r&-r),i.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?i.next=i:(i.next=g.next,g.next=i),m.pending=i}}o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),zT(o.return,r,e),u.lanes|=r;break}i=i.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(Qn(341));c.lanes|=r,u=c.alternate,u!==null&&(u.lanes|=r),zT(c,r,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}yd(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Wy(e,r),s=ef(s),n=n(s),e.flags|=1,yd(t,e,n,r),e.child;case 14:return n=e.type,s=Tf(n,e.pendingProps),s=Tf(n.type,s),dD(t,e,n,s,r);case 15:return WQ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Tf(n,s),t5(t,e),e.tag=1,$d(n)?(t=!0,D5(e)):t=!1,Wy(e,r),GQ(e,n,s),HT(e,n,s,r),$T(null,e,n,!0,t,r);case 19:return JQ(t,e,r);case 22:return KQ(t,e,r)}throw Error(Qn(156,e.tag))};function AH(t,e){return Q9(t,e)}function Wte(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kh(t,e,r,n){return new Wte(t,e,r,n)}function KI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kte(t){if(typeof t=="function")return KI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pI)return 11;if(t===AI)return 14}return 2}function Nm(t,e){var r=t.alternate;return r===null?(r=Kh(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function i5(t,e,r,n,s,o){var c=2;if(n=t,typeof t=="function")KI(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case wy:return t0(r.children,s,o,e);case fI:c=8,s|=8;break;case fT:return t=Kh(12,r,e,s|2),t.elementType=fT,t.lanes=o,t;case pT:return t=Kh(13,r,e,s),t.elementType=pT,t.lanes=o,t;case AT:return t=Kh(19,r,e,s),t.elementType=AT,t.lanes=o,t;case S9:return iC(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w9:c=10;break e;case C9:c=9;break e;case pI:c=11;break e;case AI:c=14;break e;case tm:c=16,n=null;break e}throw Error(Qn(130,t==null?t:typeof t,""))}return e=Kh(c,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function t0(t,e,r,n){return t=Kh(7,t,n,e),t.lanes=r,t}function iC(t,e,r,n){return t=Kh(22,t,n,e),t.elementType=S9,t.lanes=r,t.stateNode={isHidden:!1},t}function dE(t,e,r){return t=Kh(6,t,null,e),t.lanes=r,t}function hE(t,e,r){return e=Kh(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xte(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$B(0),this.expirationTimes=$B(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$B(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function XI(t,e,r,n,s,o,c,u,i){return t=new Xte(t,e,r,u,i),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Kh(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},PI(o),t}function Yte(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:by,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function mH(t){if(!t)return Qm;t=t._reactInternals;e:{if(S0(t)!==t||t.tag!==1)throw Error(Qn(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($d(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Qn(171))}if(t.tag===1){var r=t.type;if($d(r))return mQ(t,r,e)}return e}function gH(t,e,r,n,s,o,c,u,i){return t=XI(r,n,!0,t,s,o,c,u,i),t.context=mH(null),r=t.current,n=_d(),s=Im(r),o=sA(n,s),o.callback=e??null,Tm(r,o,s),t.current.lanes=s,K_(t,s,n),qd(t,n),t}function sC(t,e,r,n){var s=e.current,o=_d(),c=Im(s);return r=mH(r),e.context===null?e.context=r:e.pendingContext=r,e=sA(o,c),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Tm(s,e,c),t!==null&&(Mf(t,s,c,o),Z2(t,s,c)),c}function X5(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function YI(t,e){wD(t,e),(t=t.alternate)&&wD(t,e)}function Zte(){return null}var yH=typeof reportError=="function"?reportError:function(t){console.error(t)};function ZI(t){this._internalRoot=t}oC.prototype.render=ZI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Qn(409));sC(t,e,null,null)};oC.prototype.unmount=ZI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;y0(function(){sC(null,t,null,null)}),e[uA]=null}};function oC(t){this._internalRoot=t}oC.prototype.unstable_scheduleHydration=function(t){if(t){var e=K9();t={blockedOn:null,target:t,priority:e};for(var r=0;r<im.length&&e!==0&&e<im[r].priority;r++);im.splice(r,0,t),r===0&&Y9(t)}};function JI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function aC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function CD(){}function Jte(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var m=X5(c);o.call(m)}}var c=gH(e,n,t,0,null,!1,!1,"",CD);return t._reactRootContainer=c,t[uA]=c.current,h_(t.nodeType===8?t.parentNode:t),y0(),c}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var u=n;n=function(){var m=X5(i);u.call(m)}}var i=XI(t,0,!1,null,null,!1,!1,"",CD);return t._reactRootContainer=i,t[uA]=i.current,h_(t.nodeType===8?t.parentNode:t),y0(function(){sC(e,i,r,n)}),i}function lC(t,e,r,n,s){var o=r._reactRootContainer;if(o){var c=o;if(typeof s=="function"){var u=s;s=function(){var i=X5(c);u.call(i)}}sC(e,c,t,s)}else c=Jte(r,e,t,s,n);return X5(c)}q9=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=rx(e.pendingLanes);r!==0&&(yI(e,r|1),qd(e,mc()),!(Vo&6)&&(h1=mc()+500,ng()))}break;case 13:y0(function(){var n=dA(t,1);if(n!==null){var s=_d();Mf(n,t,1,s)}}),YI(t,1)}};vI=function(t){if(t.tag===13){var e=dA(t,134217728);if(e!==null){var r=_d();Mf(e,t,134217728,r)}YI(t,134217728)}};W9=function(t){if(t.tag===13){var e=Im(t),r=dA(t,e);if(r!==null){var n=_d();Mf(r,t,e,n)}YI(t,e)}};K9=function(){return Ca};X9=function(t,e){var r=Ca;try{return Ca=t,e()}finally{Ca=r}};ST=function(t,e,r){switch(e){case"input":if(yT(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Z4(n);if(!s)throw Error(Qn(90));E9(n),yT(n,s)}}}break;case"textarea":L9(t,r);break;case"select":e=r.value,e!=null&&Vy(t,!!r.multiple,e,!1)}};k9=$I;D9=y0;var ere={usingClientEntryPoint:!1,Events:[Y_,Ey,Z4,j9,M9,$I]},kv={findFiberByHostInstance:Vg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tre={bundleType:kv.bundleType,version:kv.version,rendererPackageName:kv.rendererPackageName,rendererConfig:kv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U9(t),t===null?null:t.stateNode},findFiberByHostInstance:kv.findFiberByHostInstance||Zte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zw.isDisabled&&zw.supportsFiber)try{W4=zw.inject(tre),gp=zw}catch{}}mh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ere;mh.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JI(e))throw Error(Qn(200));return Yte(t,e,null,r)};mh.createRoot=function(t,e){if(!JI(t))throw Error(Qn(299));var r=!1,n="",s=yH;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=XI(t,1,!1,null,null,r,!1,n,s),t[uA]=e.current,h_(t.nodeType===8?t.parentNode:t),new ZI(e)};mh.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Qn(188)):(t=Object.keys(t).join(","),Error(Qn(268,t)));return t=U9(e),t=t===null?null:t.stateNode,t};mh.flushSync=function(t){return y0(t)};mh.hydrate=function(t,e,r){if(!aC(e))throw Error(Qn(200));return lC(null,t,e,!0,r)};mh.hydrateRoot=function(t,e,r){if(!JI(t))throw Error(Qn(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",c=yH;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),e=gH(e,null,t,1,r??null,s,!1,o,c),t[uA]=e.current,h_(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new oC(e)};mh.render=function(t,e,r){if(!aC(e))throw Error(Qn(200));return lC(null,t,e,!1,r)};mh.unmountComponentAtNode=function(t){if(!aC(t))throw Error(Qn(40));return t._reactRootContainer?(y0(function(){lC(null,null,t,!1,function(){t._reactRootContainer=null,t[uA]=null})}),!0):!1};mh.unstable_batchedUpdates=$I;mh.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!aC(r))throw Error(Qn(200));if(t==null||t._reactInternals===void 0)throw Error(Qn(38));return lC(t,e,r,!1,n)};mh.version="18.3.1-next-f1338f8080-20240426";function vH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vH)}catch(t){console.error(t)}}vH(),v9.exports=mh;var cC=v9.exports,xH,SD=cC;xH=dT.createRoot=SD.createRoot,dT.hydrateRoot=SD.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function __(){return __=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},__.apply(this,arguments)}var dm;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dm||(dm={}));const BD="popstate";function rre(t){t===void 0&&(t={});function e(n,s){let{pathname:o,search:c,hash:u}=n.location;return i6("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Y5(s)}return ire(e,r,null,t)}function wc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _H(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nre(){return Math.random().toString(36).substr(2,8)}function ED(t,e){return{usr:t.state,key:t.key,idx:e}}function i6(t,e,r,n){return r===void 0&&(r=null),__({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?L1(e):e,{state:r,key:e&&e.key||n||nre()})}function Y5(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function L1(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function ire(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u=dm.Pop,i=null,m=g();m==null&&(m=0,c.replaceState(__({},c.state,{idx:m}),""));function g(){return(c.state||{idx:null}).idx}function C(){u=dm.Pop;let D=g(),F=D==null?null:D-m;m=D,i&&i({action:u,location:j.location,delta:F})}function B(D,F){u=dm.Push;let R=i6(j.location,D,F);m=g()+1;let V=ED(R,m),Y=j.createHref(R);try{c.pushState(V,"",Y)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(Y)}o&&i&&i({action:u,location:j.location,delta:1})}function S(D,F){u=dm.Replace;let R=i6(j.location,D,F);m=g();let V=ED(R,m),Y=j.createHref(R);c.replaceState(V,"",Y),o&&i&&i({action:u,location:j.location,delta:0})}function P(D){let F=s.location.origin!=="null"?s.location.origin:s.location.href,R=typeof D=="string"?D:Y5(D);return R=R.replace(/ $/,"%20"),wc(F,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,F)}let j={get action(){return u},get location(){return t(s,c)},listen(D){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(BD,C),i=D,()=>{s.removeEventListener(BD,C),i=null}},createHref(D){return e(s,D)},createURL:P,encodeLocation(D){let F=P(D);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:B,replace:S,go(D){return c.go(D)}};return j}var TD;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(TD||(TD={}));function sre(t,e,r){return r===void 0&&(r="/"),ore(t,e,r,!1)}function ore(t,e,r,n){let s=typeof e=="string"?L1(e):e,o=eN(s.pathname||"/",r);if(o==null)return null;let c=bH(t);are(c);let u=null;for(let i=0;u==null&&i<c.length;++i){let m=yre(o);u=mre(c[i],m,n)}return u}function bH(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,c,u)=>{let i={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};i.relativePath.startsWith("/")&&(wc(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(n.length));let m=Fm([n,i.relativePath]),g=r.concat(i);o.children&&o.children.length>0&&(wc(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),bH(o.children,e,g,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:pre(m,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,c);else for(let i of wH(o.path))s(o,c,i)}),e}function wH(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=wH(n.join("/")),u=[];return u.push(...c.map(i=>i===""?o:[o,i].join("/"))),s&&u.push(...c),u.map(i=>t.startsWith("/")&&i===""?"/":i)}function are(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Are(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const lre=/^:[\w-]+$/,cre=3,ure=2,dre=1,hre=10,fre=-2,LD=t=>t==="*";function pre(t,e){let r=t.split("/"),n=r.length;return r.some(LD)&&(n+=fre),e&&(n+=ure),r.filter(s=>!LD(s)).reduce((s,o)=>s+(lre.test(o)?cre:o===""?dre:hre),n)}function Are(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function mre(t,e,r){let{routesMeta:n}=t,s={},o="/",c=[];for(let u=0;u<n.length;++u){let i=n[u],m=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",C=ID({path:i.relativePath,caseSensitive:i.caseSensitive,end:m},g),B=i.route;if(!C&&m&&r&&!n[n.length-1].route.index&&(C=ID({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},g)),!C)return null;Object.assign(s,C.params),c.push({params:s,pathname:Fm([o,C.pathname]),pathnameBase:bre(Fm([o,C.pathnameBase])),route:B}),C.pathnameBase!=="/"&&(o=Fm([o,C.pathnameBase]))}return c}function ID(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=gre(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,g,C)=>{let{paramName:B,isOptional:S}=g;if(B==="*"){let j=u[C]||"";c=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const P=u[C];return S&&!P?m[B]=void 0:m[B]=(P||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:t}}function gre(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),_H(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,i)=>(n.push({paramName:u,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function yre(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _H(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function eN(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function vre(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?L1(t):t;return{pathname:r?r.startsWith("/")?r:xre(r,e):e,search:wre(n),hash:Cre(s)}}function xre(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function fE(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _re(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function tN(t,e){let r=_re(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function rN(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=L1(t):(s=__({},t),wc(!s.pathname||!s.pathname.includes("?"),fE("?","pathname","search",s)),wc(!s.pathname||!s.pathname.includes("#"),fE("#","pathname","hash",s)),wc(!s.search||!s.search.includes("#"),fE("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=r;else{let C=e.length-1;if(!n&&c.startsWith("..")){let B=c.split("/");for(;B[0]==="..";)B.shift(),C-=1;s.pathname=B.join("/")}u=C>=0?e[C]:"/"}let i=vre(s,u),m=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&r.endsWith("/");return!i.pathname.endsWith("/")&&(m||g)&&(i.pathname+="/"),i}const Fm=t=>t.join("/").replace(/\/\/+/g,"/"),bre=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wre=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cre=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sre(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CH=["post","put","patch","delete"];new Set(CH);const Bre=["get",...CH];new Set(Bre);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function b_(){return b_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b_.apply(this,arguments)}const nN=Ae.createContext(null),Ere=Ae.createContext(null),ig=Ae.createContext(null),uC=Ae.createContext(null),sg=Ae.createContext({outlet:null,matches:[],isDataRoute:!1}),SH=Ae.createContext(null);function Tre(t,e){let{relative:r}=e===void 0?{}:e;I1()||wc(!1);let{basename:n,navigator:s}=Ae.useContext(ig),{hash:o,pathname:c,search:u}=EH(t,{relative:r}),i=c;return n!=="/"&&(i=c==="/"?n:Fm([n,c])),s.createHref({pathname:i,search:u,hash:o})}function I1(){return Ae.useContext(uC)!=null}function vu(){return I1()||wc(!1),Ae.useContext(uC).location}function BH(t){Ae.useContext(ig).static||Ae.useLayoutEffect(t)}function og(){let{isDataRoute:t}=Ae.useContext(sg);return t?zre():Lre()}function Lre(){I1()||wc(!1);let t=Ae.useContext(nN),{basename:e,future:r,navigator:n}=Ae.useContext(ig),{matches:s}=Ae.useContext(sg),{pathname:o}=vu(),c=JSON.stringify(tN(s,r.v7_relativeSplatPath)),u=Ae.useRef(!1);return BH(()=>{u.current=!0}),Ae.useCallback(function(m,g){if(g===void 0&&(g={}),!u.current)return;if(typeof m=="number"){n.go(m);return}let C=rN(m,JSON.parse(c),o,g.relative==="path");t==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Fm([e,C.pathname])),(g.replace?n.replace:n.push)(C,g.state,g)},[e,n,c,o,t])}function EH(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=Ae.useContext(ig),{matches:s}=Ae.useContext(sg),{pathname:o}=vu(),c=JSON.stringify(tN(s,n.v7_relativeSplatPath));return Ae.useMemo(()=>rN(t,JSON.parse(c),o,r==="path"),[t,c,o,r])}function Ire(t,e){return Nre(t,e)}function Nre(t,e,r,n){I1()||wc(!1);let{navigator:s}=Ae.useContext(ig),{matches:o}=Ae.useContext(sg),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let i=c?c.pathnameBase:"/";c&&c.route;let m=vu(),g;if(e){var C;let D=typeof e=="string"?L1(e):e;i==="/"||(C=D.pathname)!=null&&C.startsWith(i)||wc(!1),g=D}else g=m;let B=g.pathname||"/",S=B;if(i!=="/"){let D=i.replace(/^\//,"").split("/");S="/"+B.replace(/^\//,"").split("/").slice(D.length).join("/")}let P=sre(t,{pathname:S}),j=kre(P&&P.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:Fm([i,s.encodeLocation?s.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?i:Fm([i,s.encodeLocation?s.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,r,n);return e&&j?Ae.createElement(uC.Provider,{value:{location:b_({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:dm.Pop}},j):j}function Fre(){let t=Ure(),e=Sre(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ae.createElement(Ae.Fragment,null,Ae.createElement("h2",null,"Unexpected Application Error!"),Ae.createElement("h3",{style:{fontStyle:"italic"}},e),r?Ae.createElement("pre",{style:s},r):null,null)}const Pre=Ae.createElement(Fre,null);class jre extends Ae.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?Ae.createElement(sg.Provider,{value:this.props.routeContext},Ae.createElement(SH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mre(t){let{routeContext:e,match:r,children:n}=t,s=Ae.useContext(nN);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),Ae.createElement(sg.Provider,{value:e},n)}function kre(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,u=(s=r)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(C=>C.route.id&&(u==null?void 0:u[C.route.id])!==void 0);g>=0||wc(!1),c=c.slice(0,Math.min(c.length,g+1))}let i=!1,m=-1;if(r&&n&&n.v7_partialHydration)for(let g=0;g<c.length;g++){let C=c[g];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(m=g),C.route.id){let{loaderData:B,errors:S}=r,P=C.route.loader&&B[C.route.id]===void 0&&(!S||S[C.route.id]===void 0);if(C.route.lazy||P){i=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((g,C,B)=>{let S,P=!1,j=null,D=null;r&&(S=u&&C.route.id?u[C.route.id]:void 0,j=C.route.errorElement||Pre,i&&(m<0&&B===0?(P=!0,D=null):m===B&&(P=!0,D=C.route.hydrateFallbackElement||null)));let F=e.concat(c.slice(0,B+1)),R=()=>{let V;return S?V=j:P?V=D:C.route.Component?V=Ae.createElement(C.route.Component,null):C.route.element?V=C.route.element:V=g,Ae.createElement(Mre,{match:C,routeContext:{outlet:g,matches:F,isDataRoute:r!=null},children:V})};return r&&(C.route.ErrorBoundary||C.route.errorElement||B===0)?Ae.createElement(jre,{location:r.location,revalidation:r.revalidation,component:j,error:S,children:R(),routeContext:{outlet:null,matches:F,isDataRoute:!0}}):R()},null)}var TH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(TH||{}),Z5=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Z5||{});function Dre(t){let e=Ae.useContext(nN);return e||wc(!1),e}function Ore(t){let e=Ae.useContext(Ere);return e||wc(!1),e}function Rre(t){let e=Ae.useContext(sg);return e||wc(!1),e}function LH(t){let e=Rre(),r=e.matches[e.matches.length-1];return r.route.id||wc(!1),r.route.id}function Ure(){var t;let e=Ae.useContext(SH),r=Ore(Z5.UseRouteError),n=LH(Z5.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function zre(){let{router:t}=Dre(TH.UseNavigateStable),e=LH(Z5.UseNavigateStable),r=Ae.useRef(!1);return BH(()=>{r.current=!0}),Ae.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,b_({fromRouteId:e},o)))},[t,e])}function qg(t){let{to:e,replace:r,state:n,relative:s}=t;I1()||wc(!1);let{future:o,static:c}=Ae.useContext(ig),{matches:u}=Ae.useContext(sg),{pathname:i}=vu(),m=og(),g=rN(e,tN(u,o.v7_relativeSplatPath),i,s==="path"),C=JSON.stringify(g);return Ae.useEffect(()=>m(JSON.parse(C),{replace:r,state:n,relative:s}),[m,C,s,r,n]),null}function Vu(t){wc(!1)}function Qre(t){let{basename:e="/",children:r=null,location:n,navigationType:s=dm.Pop,navigator:o,static:c=!1,future:u}=t;I1()&&wc(!1);let i=e.replace(/^\/*/,"/"),m=Ae.useMemo(()=>({basename:i,navigator:o,static:c,future:b_({v7_relativeSplatPath:!1},u)}),[i,u,o,c]);typeof n=="string"&&(n=L1(n));let{pathname:g="/",search:C="",hash:B="",state:S=null,key:P="default"}=n,j=Ae.useMemo(()=>{let D=eN(g,i);return D==null?null:{location:{pathname:D,search:C,hash:B,state:S,key:P},navigationType:s}},[i,g,C,B,S,P,s]);return j==null?null:Ae.createElement(ig.Provider,{value:m},Ae.createElement(uC.Provider,{children:r,value:j}))}function Hre(t){let{children:e,location:r}=t;return Ire(s6(e),r)}new Promise(()=>{});function s6(t,e){e===void 0&&(e=[]);let r=[];return Ae.Children.forEach(t,(n,s)=>{if(!Ae.isValidElement(n))return;let o=[...e,s];if(n.type===Ae.Fragment){r.push.apply(r,s6(n.props.children,o));return}n.type!==Vu&&wc(!1),!n.props.index||!n.props.children||wc(!1);let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=s6(n.props.children,o)),r.push(c)}),r}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o6(){return o6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o6.apply(this,arguments)}function Vre(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Gre(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $re(t,e){return t.button===0&&(!e||e==="_self")&&!Gre(t)}function a6(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function qre(t,e){let r=a6(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(o=>{r.append(s,o)})}),r}const Wre=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Kre="6";try{window.__reactRouterVersion=Kre}catch{}const Xre="startTransition",ND=uT[Xre];function Yre(t){let{basename:e,children:r,future:n,window:s}=t,o=Ae.useRef();o.current==null&&(o.current=rre({window:s,v5Compat:!0}));let c=o.current,[u,i]=Ae.useState({action:c.action,location:c.location}),{v7_startTransition:m}=n||{},g=Ae.useCallback(C=>{m&&ND?ND(()=>i(C)):i(C)},[i,m]);return Ae.useLayoutEffect(()=>c.listen(g),[c,g]),Ae.createElement(Qre,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:c,future:n})}const Zre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Po=Ae.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:o,replace:c,state:u,target:i,to:m,preventScrollReset:g,unstable_viewTransition:C}=e,B=Vre(e,Wre),{basename:S}=Ae.useContext(ig),P,j=!1;if(typeof m=="string"&&Jre.test(m)&&(P=m,Zre))try{let V=new URL(window.location.href),Y=m.startsWith("//")?new URL(V.protocol+m):new URL(m),te=eN(Y.pathname,S);Y.origin===V.origin&&te!=null?m=te+Y.search+Y.hash:j=!0}catch{}let D=Tre(m,{relative:s}),F=ene(m,{replace:c,state:u,target:i,preventScrollReset:g,relative:s,unstable_viewTransition:C});function R(V){n&&n(V),V.defaultPrevented||F(V)}return Ae.createElement("a",o6({},B,{href:P||D,onClick:j||o?n:R,ref:r,target:i}))});var FD;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(FD||(FD={}));var PD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PD||(PD={}));function ene(t,e){let{target:r,replace:n,state:s,preventScrollReset:o,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,i=og(),m=vu(),g=EH(t,{relative:c});return Ae.useCallback(C=>{if($re(C,r)){C.preventDefault();let B=n!==void 0?n:Y5(m)===Y5(g);i(t,{replace:B,state:s,preventScrollReset:o,relative:c,unstable_viewTransition:u})}},[m,i,g,n,s,r,t,o,c,u])}function tne(t){let e=Ae.useRef(a6(t)),r=Ae.useRef(!1),n=vu(),s=Ae.useMemo(()=>qre(n.search,r.current?null:e.current),[n.search]),o=og(),c=Ae.useCallback((u,i)=>{const m=a6(typeof u=="function"?u(s):u);r.current=!0,o("?"+m,i)},[o,s]);return[s,c]}var IH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jD=Ui.createContext&&Ui.createContext(IH),rne=["attr","size","title"];function nne(t,e){if(t==null)return{};var r=ine(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ine(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function J5(){return J5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J5.apply(this,arguments)}function MD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function e4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(r),!0).forEach(function(n){sne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sne(t,e,r){return e=one(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function one(t){var e=ane(t,"string");return typeof e=="symbol"?e:e+""}function ane(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NH(t){return t&&t.map((e,r)=>Ui.createElement(e.tag,e4({key:r},e.attr),NH(e.child)))}function vs(t){return e=>Ui.createElement(lne,J5({attr:e4({},t.attr)},e),NH(t.child))}function lne(t){var e=r=>{var{attr:n,size:s,title:o}=t,c=nne(t,rne),u=s||r.size||"1em",i;return r.className&&(i=r.className),t.className&&(i=(i?i+" ":"")+t.className),Ui.createElement("svg",J5({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,c,{className:i,style:e4(e4({color:t.color||r.color},r.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Ui.createElement("title",null,o),t.children)};return jD!==void 0?Ui.createElement(jD.Consumer,null,r=>e(r)):e(IH)}function cne(t){return vs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function kD(t){return vs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(t)}function iN(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function une(t){return vs({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"},child:[]}]})(t)}function FH(t){return vs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M510.5 225.5c-6.9-37.2-39.3-65.5-78.5-65.5-12.3 0-23.9 3-34.3 8-17.4-24.1-45.6-40-77.7-40-53 0-96 43-96 96 0 .5.2 1.1.2 1.6C187.6 233 160 265.2 160 304c0 44.2 35.8 80 80 80h256c44.2 0 80-35.8 80-80 0-39.2-28.2-71.7-65.5-78.5zm-386.4 34.4c-37.4-37.4-37.4-98.3 0-135.8 34.6-34.6 89.1-36.8 126.7-7.4 20-12.9 43.6-20.7 69.2-20.7.7 0 1.3.2 2 .2l8.9-26.7c3.4-10.2-6.3-19.8-16.5-16.4l-75.3 25.1-35.5-71c-4.8-9.6-18.5-9.6-23.3 0l-35.5 71-75.3-25.1c-10.2-3.4-19.8 6.3-16.4 16.5l25.1 75.3-71 35.5c-9.6 4.8-9.6 18.5 0 23.3l71 35.5-25.1 75.3c-3.4 10.2 6.3 19.8 16.5 16.5l59.2-19.7c-.2-2.4-.7-4.7-.7-7.2 0-12.5 2.3-24.5 6.2-35.9-3.6-2.7-7.1-5.2-10.2-8.3zm69.8-58c4.3-24.5 15.8-46.4 31.9-64-9.8-6.2-21.4-9.9-33.8-9.9-35.3 0-64 28.7-64 64 0 18.7 8.2 35.4 21.1 47.1 11.3-15.9 26.6-28.9 44.8-37.2zm330.6 216.2c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8z"},child:[]}]})(t)}function PH(t){return vs({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M575.2 325.7c.2-1.9.8-3.7.8-5.6 0-35.3-28.7-64-64-64-12.6 0-24.2 3.8-34.1 10-17.6-38.8-56.5-66-101.9-66-61.8 0-112 50.1-112 112 0 3 .7 5.8.9 8.7-49.6 3.7-88.9 44.7-88.9 95.3 0 53 43 96 96 96h272c53 0 96-43 96-96 0-42.1-27.2-77.4-64.8-90.4zm-430.4-22.6c-43.7-43.7-43.7-114.7 0-158.3 43.7-43.7 114.7-43.7 158.4 0 9.7 9.7 16.9 20.9 22.3 32.7 9.8-3.7 20.1-6 30.7-7.5L386 81.1c4-11.9-7.3-23.1-19.2-19.2L279 91.2 237.5 8.4C232-2.8 216-2.8 210.4 8.4L169 91.2 81.1 61.9C69.3 58 58 69.3 61.9 81.1l29.3 87.8-82.8 41.5c-11.2 5.6-11.2 21.5 0 27.1l82.8 41.4-29.3 87.8c-4 11.9 7.3 23.1 19.2 19.2l76.1-25.3c6.1-12.4 14-23.7 23.6-33.5-13.1-5.4-25.4-13.4-36-24zm-4.8-79.2c0 40.8 29.3 74.8 67.9 82.3 8-4.7 16.3-8.8 25.2-11.7 5.4-44.3 31-82.5 67.4-105C287.3 160.4 258 140 224 140c-46.3 0-84 37.6-84 83.9z"},child:[]}]})(t)}function dne(t){return vs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function hne(t){return vs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function f1(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function Dd(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.14 44.84c-62.55-62.48-161.67-64.78-252.28 25.73-78.61 78.52-60.98 60.92-85.75 85.66-60.46 60.39-70.39 150.83-63.64 211.17l178.44-178.25c6.26-6.25 16.4-6.25 22.65 0s6.25 16.38 0 22.63L7.04 471.03c-9.38 9.37-9.38 24.57 0 33.94 9.38 9.37 24.6 9.37 33.98 0l66.1-66.03C159.42 454.65 279 457.11 353.95 384h-98.19l147.57-49.14c49.99-49.93 36.38-36.18 46.31-46.86h-97.78l131.54-43.8c45.44-74.46 34.31-148.84-16.26-199.36z"},child:[]}]})(t)}function fne(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function sN(t){return vs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z"},child:[]}]})(t)}function pne(t){return vs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function Ane(t){return vs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function t4(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function DD(t){return vs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function oN(t){return vs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(t)}function J_(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 96H0c0 123.7 100.3 224 224 224v144c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V320C288 196.3 187.7 96 64 96zm384-64c-84.2 0-157.4 46.5-195.7 115.2 27.7 30.2 48.2 66.9 59 107.6C424 243.1 512 147.9 512 32h-64z"},child:[]}]})(t)}function mne(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(t)}function gne(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(t)}function OD(t){return vs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}function yne(t){return vs({tag:"svg",attr:{viewBox:"0 0 256 512"},child:[{tag:"path",attr:{d:"M192 384c0 35.346-28.654 64-64 64s-64-28.654-64-64c0-23.685 12.876-44.349 32-55.417V224c0-17.673 14.327-32 32-32s32 14.327 32 32v104.583c19.124 11.068 32 31.732 32 55.417zm32-84.653c19.912 22.563 32 52.194 32 84.653 0 70.696-57.303 128-128 128-.299 0-.609-.001-.909-.003C56.789 511.509-.357 453.636.002 383.333.166 351.135 12.225 321.755 32 299.347V96c0-53.019 42.981-96 96-96s96 42.981 96 96v203.347zM208 384c0-34.339-19.37-52.19-32-66.502V96c0-26.467-21.533-48-48-48S80 69.533 80 96v221.498c-12.732 14.428-31.825 32.1-31.999 66.08-.224 43.876 35.563 80.116 79.423 80.42L128 464c44.112 0 80-35.888 80-80z"},child:[]}]})(t)}function RD(t){return vs({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M205.22 22.09c-7.94-28.78-49.44-30.12-58.44 0C100.01 179.85 0 222.72 0 333.91 0 432.35 78.72 512 176 512s176-79.65 176-178.09c0-111.75-99.79-153.34-146.78-311.82zM176 448c-61.75 0-112-50.25-112-112 0-8.84 7.16-16 16-16s16 7.16 16 16c0 44.11 35.89 80 80 80 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function vne(t){return vs({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 336c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 112c-13.23 0-24-10.77-24-24s10.77-24 24-24 24 10.77 24 24-10.77 24-24 24zm80-288h-64v-40.2c0-14.12 4.7-27.76 13.15-38.84 4.42-5.8 3.55-14.06-1.32-19.49L534.2 37.3c-6.66-7.45-18.32-6.92-24.7.78C490.58 60.9 480 89.81 480 119.8V160H377.67L321.58 29.14A47.914 47.914 0 0 0 277.45 0H144c-26.47 0-48 21.53-48 48v146.52c-8.63-6.73-20.96-6.46-28.89 1.47L36 227.1c-8.59 8.59-8.59 22.52 0 31.11l5.06 5.06c-4.99 9.26-8.96 18.82-11.91 28.72H22c-12.15 0-22 9.85-22 22v44c0 12.15 9.85 22 22 22h7.14c2.96 9.91 6.92 19.46 11.91 28.73l-5.06 5.06c-8.59 8.59-8.59 22.52 0 31.11L67.1 476c8.59 8.59 22.52 8.59 31.11 0l5.06-5.06c9.26 4.99 18.82 8.96 28.72 11.91V490c0 12.15 9.85 22 22 22h44c12.15 0 22-9.85 22-22v-7.14c9.9-2.95 19.46-6.92 28.72-11.91l5.06 5.06c8.59 8.59 22.52 8.59 31.11 0l31.11-31.11c8.59-8.59 8.59-22.52 0-31.11l-5.06-5.06c4.99-9.26 8.96-18.82 11.91-28.72H330c12.15 0 22-9.85 22-22v-6h80.54c21.91-28.99 56.32-48 95.46-48 18.64 0 36.07 4.61 51.8 12.2l50.82-50.82c6-6 9.37-14.14 9.37-22.63V192c.01-17.67-14.32-32-31.99-32zM176 416c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm22-256h-38V64h106.89l41.15 96H198z"},child:[]}]})(t)}function xne(t){return vs({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function w_(t){return vs({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M378.31 378.49L298.42 288h30.63c9.01 0 16.98-5 20.78-13.06 3.8-8.04 2.55-17.26-3.28-24.05L268.42 160h28.89c9.1 0 17.3-5.35 20.86-13.61 3.52-8.13 1.86-17.59-4.24-24.08L203.66 4.83c-6.03-6.45-17.28-6.45-23.32 0L70.06 122.31c-6.1 6.49-7.75 15.95-4.24 24.08C69.38 154.65 77.59 160 86.69 160h28.89l-78.14 90.91c-5.81 6.78-7.06 15.99-3.27 24.04C37.97 283 45.93 288 54.95 288h30.63L5.69 378.49c-6 6.79-7.36 16.09-3.56 24.26 3.75 8.05 12 13.25 21.01 13.25H160v24.45l-30.29 48.4c-5.32 10.64 2.42 23.16 14.31 23.16h95.96c11.89 0 19.63-12.52 14.31-23.16L224 440.45V416h136.86c9.01 0 17.26-5.2 21.01-13.25 3.8-8.17 2.44-17.47-3.56-24.26z"},child:[]}]})(t)}function _ne(t){return vs({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function bne(t){return vs({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(t)}function wne(t){return vs({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M562.1 383.9c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144C540.6 93.4 520 85.4 504.2 73 490.1 61.9 470 61.7 456 73c-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3z"},child:[]}]})(t)}function Cne(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M156.7 256H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h142.2c15.9 0 30.8 10.9 33.4 26.6 3.3 20-12.1 37.4-31.6 37.4-14.1 0-26.1-9.2-30.4-21.9-2.1-6.3-8.6-10.1-15.2-10.1H81.6c-9.8 0-17.7 8.8-15.9 18.4 8.6 44.1 47.6 77.6 94.2 77.6 57.1 0 102.7-50.1 95.2-108.6C249 291 205.4 256 156.7 256zM16 224h336c59.7 0 106.8-54.8 93.8-116.7-7.6-36.2-36.9-65.5-73.1-73.1-55.4-11.6-105.1 24.9-114.9 75.5-1.9 9.6 6.1 18.3 15.8 18.3h32.8c6.7 0 13.1-3.8 15.2-10.1C325.9 105.2 337.9 96 352 96c19.4 0 34.9 17.4 31.6 37.4-2.6 15.7-17.4 26.6-33.4 26.6H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16zm384 32H243.7c19.3 16.6 33.2 38.8 39.8 64H400c26.5 0 48 21.5 48 48s-21.5 48-48 48c-17.9 0-33.3-9.9-41.6-24.4-2.9-5-8.7-7.6-14.5-7.6h-33.8c-10.9 0-19 10.8-15.3 21.1 17.8 50.6 70.5 84.8 129.4 72.3 41.2-8.7 75.1-41.6 84.7-82.7C526 321.5 470.5 256 400 256z"},child:[]}]})(t)}var aN={exports:{}},jH=function(e,r){return function(){for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];return e.apply(r,s)}},Sne=jH,B0=Object.prototype.toString;function lN(t){return B0.call(t)==="[object Array]"}function l6(t){return typeof t>"u"}function Bne(t){return t!==null&&!l6(t)&&t.constructor!==null&&!l6(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Ene(t){return B0.call(t)==="[object ArrayBuffer]"}function Tne(t){return typeof FormData<"u"&&t instanceof FormData}function Lne(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function Ine(t){return typeof t=="string"}function Nne(t){return typeof t=="number"}function MH(t){return t!==null&&typeof t=="object"}function s5(t){if(B0.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Fne(t){return B0.call(t)==="[object Date]"}function Pne(t){return B0.call(t)==="[object File]"}function jne(t){return B0.call(t)==="[object Blob]"}function kH(t){return B0.call(t)==="[object Function]"}function Mne(t){return MH(t)&&kH(t.pipe)}function kne(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function Dne(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function One(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function cN(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),lN(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function c6(){var t={};function e(s,o){s5(t[o])&&s5(s)?t[o]=c6(t[o],s):s5(s)?t[o]=c6({},s):lN(s)?t[o]=s.slice():t[o]=s}for(var r=0,n=arguments.length;r<n;r++)cN(arguments[r],e);return t}function Rne(t,e,r){return cN(e,function(s,o){r&&typeof s=="function"?t[o]=Sne(s,r):t[o]=s}),t}function Une(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var yh={isArray:lN,isArrayBuffer:Ene,isBuffer:Bne,isFormData:Tne,isArrayBufferView:Lne,isString:Ine,isNumber:Nne,isObject:MH,isPlainObject:s5,isUndefined:l6,isDate:Fne,isFile:Pne,isBlob:jne,isFunction:kH,isStream:Mne,isURLSearchParams:kne,isStandardBrowserEnv:One,forEach:cN,merge:c6,extend:Rne,trim:Dne,stripBOM:Une},ry=yh;function UD(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var DH=function(e,r,n){if(!r)return e;var s;if(n)s=n(r);else if(ry.isURLSearchParams(r))s=r.toString();else{var o=[];ry.forEach(r,function(i,m){i===null||typeof i>"u"||(ry.isArray(i)?m=m+"[]":i=[i],ry.forEach(i,function(C){ry.isDate(C)?C=C.toISOString():ry.isObject(C)&&(C=JSON.stringify(C)),o.push(UD(m)+"="+UD(C))}))}),s=o.join("&")}if(s){var c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},zne=yh;function dC(){this.handlers=[]}dC.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};dC.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};dC.prototype.forEach=function(e){zne.forEach(this.handlers,function(n){n!==null&&e(n)})};var Qne=dC,Hne=yh,Vne=function(e,r){Hne.forEach(e,function(s,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=s,delete e[o])})},OH=function(e,r,n,s,o){return e.config=r,n&&(e.code=n),e.request=s,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},pE,zD;function RH(){if(zD)return pE;zD=1;var t=OH;return pE=function(r,n,s,o,c){var u=new Error(r);return t(u,n,s,o,c)},pE}var AE,QD;function Gne(){if(QD)return AE;QD=1;var t=RH();return AE=function(r,n,s){var o=s.config.validateStatus;!s.status||!o||o(s.status)?r(s):n(t("Request failed with status code "+s.status,s.config,null,s.request,s))},AE}var mE,HD;function $ne(){if(HD)return mE;HD=1;var t=yh;return mE=t.isStandardBrowserEnv()?function(){return{write:function(n,s,o,c,u,i){var m=[];m.push(n+"="+encodeURIComponent(s)),t.isNumber(o)&&m.push("expires="+new Date(o).toGMTString()),t.isString(c)&&m.push("path="+c),t.isString(u)&&m.push("domain="+u),i===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(n){var s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),mE}var gE,VD;function qne(){return VD||(VD=1,gE=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),gE}var yE,GD;function Wne(){return GD||(GD=1,yE=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),yE}var vE,$D;function Kne(){if($D)return vE;$D=1;var t=qne(),e=Wne();return vE=function(n,s){return n&&!t(s)?e(n,s):s},vE}var xE,qD;function Xne(){if(qD)return xE;qD=1;var t=yh,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return xE=function(n){var s={},o,c,u;return n&&t.forEach(n.split(`
`),function(m){if(u=m.indexOf(":"),o=t.trim(m.substr(0,u)).toLowerCase(),c=t.trim(m.substr(u+1)),o){if(s[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?s[o]=(s[o]?s[o]:[]).concat([c]):s[o]=s[o]?s[o]+", "+c:c}}),s},xE}var _E,WD;function Yne(){if(WD)return _E;WD=1;var t=yh;return _E=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),s;function o(c){var u=c;return r&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=o(window.location.href),function(u){var i=t.isString(u)?o(u):u;return i.protocol===s.protocol&&i.host===s.host}}():function(){return function(){return!0}}(),_E}var bE,KD;function XD(){if(KD)return bE;KD=1;var t=yh,e=Gne(),r=$ne(),n=DH,s=Kne(),o=Xne(),c=Yne(),u=RH();return bE=function(m){return new Promise(function(C,B){var S=m.data,P=m.headers,j=m.responseType;t.isFormData(S)&&delete P["Content-Type"];var D=new XMLHttpRequest;if(m.auth){var F=m.auth.username||"",R=m.auth.password?unescape(encodeURIComponent(m.auth.password)):"";P.Authorization="Basic "+btoa(F+":"+R)}var V=s(m.baseURL,m.url);D.open(m.method.toUpperCase(),n(V,m.params,m.paramsSerializer),!0),D.timeout=m.timeout;function Y(){if(D){var se="getAllResponseHeaders"in D?o(D.getAllResponseHeaders()):null,oe=!j||j==="text"||j==="json"?D.responseText:D.response,K={data:oe,status:D.status,statusText:D.statusText,headers:se,config:m,request:D};e(C,B,K),D=null}}if("onloadend"in D?D.onloadend=Y:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(Y)},D.onabort=function(){D&&(B(u("Request aborted",m,"ECONNABORTED",D)),D=null)},D.onerror=function(){B(u("Network Error",m,null,D)),D=null},D.ontimeout=function(){var oe="timeout of "+m.timeout+"ms exceeded";m.timeoutErrorMessage&&(oe=m.timeoutErrorMessage),B(u(oe,m,m.transitional&&m.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",D)),D=null},t.isStandardBrowserEnv()){var te=(m.withCredentials||c(V))&&m.xsrfCookieName?r.read(m.xsrfCookieName):void 0;te&&(P[m.xsrfHeaderName]=te)}"setRequestHeader"in D&&t.forEach(P,function(oe,K){typeof S>"u"&&K.toLowerCase()==="content-type"?delete P[K]:D.setRequestHeader(K,oe)}),t.isUndefined(m.withCredentials)||(D.withCredentials=!!m.withCredentials),j&&j!=="json"&&(D.responseType=m.responseType),typeof m.onDownloadProgress=="function"&&D.addEventListener("progress",m.onDownloadProgress),typeof m.onUploadProgress=="function"&&D.upload&&D.upload.addEventListener("progress",m.onUploadProgress),m.cancelToken&&m.cancelToken.promise.then(function(oe){D&&(D.abort(),B(oe),D=null)}),S||(S=null),D.send(S)})},bE}var pu=yh,YD=Vne,Zne=OH,Jne={"Content-Type":"application/x-www-form-urlencoded"};function ZD(t,e){!pu.isUndefined(t)&&pu.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function eie(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=XD()),t}function tie(t,e,r){if(pu.isString(t))try{return(e||JSON.parse)(t),pu.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}var hC={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:eie(),transformRequest:[function(e,r){return YD(r,"Accept"),YD(r,"Content-Type"),pu.isFormData(e)||pu.isArrayBuffer(e)||pu.isBuffer(e)||pu.isStream(e)||pu.isFile(e)||pu.isBlob(e)?e:pu.isArrayBufferView(e)?e.buffer:pu.isURLSearchParams(e)?(ZD(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):pu.isObject(e)||r&&r["Content-Type"]==="application/json"?(ZD(r,"application/json"),tie(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||s&&pu.isString(e)&&e.length)try{return JSON.parse(e)}catch(c){if(o)throw c.name==="SyntaxError"?Zne(c,this,"E_JSON_PARSE"):c}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};hC.headers={common:{Accept:"application/json, text/plain, */*"}};pu.forEach(["delete","get","head"],function(e){hC.headers[e]={}});pu.forEach(["post","put","patch"],function(e){hC.headers[e]=pu.merge(Jne)});var uN=hC,rie=yh,nie=uN,iie=function(e,r,n){var s=this||nie;return rie.forEach(n,function(c){e=c.call(s,e,r)}),e},wE,JD;function UH(){return JD||(JD=1,wE=function(e){return!!(e&&e.__CANCEL__)}),wE}var eO=yh,CE=iie,sie=UH(),oie=uN;function SE(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var aie=function(e){SE(e),e.headers=e.headers||{},e.data=CE.call(e,e.data,e.headers,e.transformRequest),e.headers=eO.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),eO.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var r=e.adapter||oie.adapter;return r(e).then(function(s){return SE(e),s.data=CE.call(e,s.data,s.headers,e.transformResponse),s},function(s){return sie(s)||(SE(e),s&&s.response&&(s.response.data=CE.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},Mu=yh,zH=function(e,r){r=r||{};var n={},s=["url","method","data"],o=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function i(B,S){return Mu.isPlainObject(B)&&Mu.isPlainObject(S)?Mu.merge(B,S):Mu.isPlainObject(S)?Mu.merge({},S):Mu.isArray(S)?S.slice():S}function m(B){Mu.isUndefined(r[B])?Mu.isUndefined(e[B])||(n[B]=i(void 0,e[B])):n[B]=i(e[B],r[B])}Mu.forEach(s,function(S){Mu.isUndefined(r[S])||(n[S]=i(void 0,r[S]))}),Mu.forEach(o,m),Mu.forEach(c,function(S){Mu.isUndefined(r[S])?Mu.isUndefined(e[S])||(n[S]=i(void 0,e[S])):n[S]=i(void 0,r[S])}),Mu.forEach(u,function(S){S in r?n[S]=i(e[S],r[S]):S in e&&(n[S]=i(void 0,e[S]))});var g=s.concat(o).concat(c).concat(u),C=Object.keys(e).concat(Object.keys(r)).filter(function(S){return g.indexOf(S)===-1});return Mu.forEach(C,m),n};const lie="axios",cie="0.21.4",uie="Promise based HTTP client for the browser and node.js",die="index.js",hie={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},fie={type:"git",url:"https://github.com/axios/axios.git"},pie=["xhr","http","ajax","promise","node"],Aie="Matt Zabriskie",mie="MIT",gie={url:"https://github.com/axios/axios/issues"},yie="https://axios-http.com",vie={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},xie={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},_ie="dist/axios.min.js",bie="dist/axios.min.js",wie="./index.d.ts",Cie={"follow-redirects":"^1.14.0"},Sie=[{path:"./dist/axios.min.js",threshold:"5kB"}],Bie={name:lie,version:cie,description:uie,main:die,scripts:hie,repository:fie,keywords:pie,author:Aie,license:mie,bugs:gie,homepage:yie,devDependencies:vie,browser:xie,jsdelivr:_ie,unpkg:bie,typings:wie,dependencies:Cie,bundlesize:Sie};var QH=Bie,dN={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){dN[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var tO={},Eie=QH.version.split(".");function HH(t,e){for(var r=e?e.split("."):Eie,n=t.split("."),s=0;s<3;s++){if(r[s]>n[s])return!0;if(r[s]<n[s])return!1}return!1}dN.transitional=function(e,r,n){var s=r&&HH(r);function o(c,u){return"[Axios v"+QH.version+"] Transitional option '"+c+"'"+u+(n?". "+n:"")}return function(c,u,i){if(e===!1)throw new Error(o(u," has been removed in "+r));return s&&!tO[u]&&(tO[u]=!0,console.warn(o(u," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(c,u,i):!0}};function Tie(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),s=n.length;s-- >0;){var o=n[s],c=e[o];if(c){var u=t[o],i=u===void 0||c(u,o,t);if(i!==!0)throw new TypeError("option "+o+" must be "+i);continue}if(r!==!0)throw Error("Unknown option "+o)}}var Lie={isOlderVersion:HH,assertOptions:Tie,validators:dN},VH=yh,Iie=DH,rO=Qne,nO=aie,fC=zH,GH=Lie,ny=GH.validators;function eb(t){this.defaults=t,this.interceptors={request:new rO,response:new rO}}eb.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=fC(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&GH.assertOptions(r,{silentJSONParsing:ny.transitional(ny.boolean,"1.0.0"),forcedJSONParsing:ny.transitional(ny.boolean,"1.0.0"),clarifyTimeoutError:ny.transitional(ny.boolean,"1.0.0")},!1);var n=[],s=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(e)===!1||(s=s&&B.synchronous,n.unshift(B.fulfilled,B.rejected))});var o=[];this.interceptors.response.forEach(function(B){o.push(B.fulfilled,B.rejected)});var c;if(!s){var u=[nO,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(o),c=Promise.resolve(e);u.length;)c=c.then(u.shift(),u.shift());return c}for(var i=e;n.length;){var m=n.shift(),g=n.shift();try{i=m(i)}catch(C){g(C);break}}try{c=nO(i)}catch(C){return Promise.reject(C)}for(;o.length;)c=c.then(o.shift(),o.shift());return c};eb.prototype.getUri=function(e){return e=fC(this.defaults,e),Iie(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};VH.forEach(["delete","get","head","options"],function(e){eb.prototype[e]=function(r,n){return this.request(fC(n||{},{method:e,url:r,data:(n||{}).data}))}});VH.forEach(["post","put","patch"],function(e){eb.prototype[e]=function(r,n,s){return this.request(fC(s||{},{method:e,url:r,data:n}))}});var Nie=eb,BE,iO;function $H(){if(iO)return BE;iO=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,BE=t,BE}var EE,sO;function Fie(){if(sO)return EE;sO=1;var t=$H();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(c){n=c});var s=this;r(function(c){s.reason||(s.reason=new t(c),n(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var n,s=new e(function(c){n=c});return{token:s,cancel:n}},EE=e,EE}var TE,oO;function Pie(){return oO||(oO=1,TE=function(e){return function(n){return e.apply(null,n)}}),TE}var LE,aO;function jie(){return aO||(aO=1,LE=function(e){return typeof e=="object"&&e.isAxiosError===!0}),LE}var lO=yh,Mie=jH,o5=Nie,kie=zH,Die=uN;function qH(t){var e=new o5(t),r=Mie(o5.prototype.request,e);return lO.extend(r,o5.prototype,e),lO.extend(r,e),r}var Rf=qH(Die);Rf.Axios=o5;Rf.create=function(e){return qH(kie(Rf.defaults,e))};Rf.Cancel=$H();Rf.CancelToken=Fie();Rf.isCancel=UH();Rf.all=function(e){return Promise.all(e)};Rf.spread=Pie();Rf.isAxiosError=jie();aN.exports=Rf;aN.exports.default=Rf;var Oie=aN.exports,Rie=Oie;const Pm=Bp(Rie),Tr=Pm.create({baseURL:"/",headers:{"Content-Type":"application/json"}});Tr.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e?t.headers.Authorization=`Bearer ${e}`:delete t.headers.Authorization,t},t=>Promise.reject(t));const Uie=({initialRegion:t,initialCrop:e})=>{const[r,n]=Ae.useState(t),[s,o]=Ae.useState(e),[c,u]=Ae.useState({}),[i,m]=Ae.useState(new Date),[g,C]=Ae.useState(""),[B,S]=Ae.useState(""),[P,j]=Ae.useState(!1),[D,F]=Ae.useState(null);Ae.useEffect(()=>{},[]);const R=async()=>{j(!0),F(null);try{const Y=await Tr.get("/weather",{params:{region_id:r,crop_id:s,latitude:g,longitude:B,time:i.toISOString()}});console.log(Y),u(Y.data.data||{})}catch{F("Failed to fetch weather data")}finally{j(!1)}},V=()=>{R()};return p.jsx("div",{className:"w-full max-w-7xl mx-auto rounded-xl overflow-hidden shadow-2xl bg-gradient-to-r from-blue-50 via-blue-100 to-blue-50 border border-blue-300 mt-4 mb-8 p-8",children:p.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[p.jsxs("div",{className:"md:w-2/5 p-6 bg-white rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300",children:[p.jsx("h1",{className:"text-4xl font-extrabold text-blue-700 mb-4",children:r}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("label",{htmlFor:"latitude",className:"text-gray-700 font-semibold w-1/3",children:"Latitude:"}),p.jsx("input",{id:"latitude",type:"text",value:g,onChange:Y=>C(parseFloat(Y.target.value)),placeholder:"Enter latitude",className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md text-lg bg-gradient-to-r from-white to-blue-50"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("label",{htmlFor:"longitude",className:"text-gray-700 font-semibold w-1/3",children:"Longitude:"}),p.jsx("input",{id:"longitude",type:"text",value:B,onChange:Y=>S(parseFloat(Y.target.value)),placeholder:"Enter longitude",className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md text-lg bg-gradient-to-r from-white to-blue-50"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("label",{htmlFor:"time",className:"text-gray-700 font-semibold w-1/3",children:"Time:"}),p.jsx("input",{type:"datetime-local",id:"time",name:"time",value:i.toISOString().slice(0,16),onChange:Y=>m(new Date(Y.target.value)),className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md text-lg bg-gradient-to-r from-white to-blue-50",required:!0})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("label",{htmlFor:"crop",className:"text-gray-700 font-semibold w-1/3",children:"Crop:"}),p.jsxs("select",{id:"crop",value:s,onChange:Y=>o(Y.target.value),className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md focus:border-blue-600 focus:ring focus:ring-blue-600 focus:ring-opacity-50 text-lg bg-gradient-to-r from-white to-blue-50",children:[p.jsx("option",{value:" ",children:"Select a Crop"}),p.jsx("option",{value:"Rice",children:"Rice"}),p.jsx("option",{value:"Coffee",children:"Coffee"}),p.jsx("option",{value:"Cocoa",children:"Cocoa"}),p.jsx("option",{value:"Maize",children:"Maize"}),p.jsx("option",{value:"Soybean",children:"Soybean"}),p.jsx("option",{value:"Sorghum",children:"Sorghum"}),p.jsx("option",{value:"Sunflower",children:"Sunflower"})]})]}),p.jsx("button",{onClick:V,className:"w-full py-2 bg-blue-700 text-white rounded-lg shadow-md hover:bg-blue-800 transition duration-300 mt-4 transform hover:translate-y-1 hover:shadow-xl",children:"Fetch Data"})]}),p.jsxs("div",{className:"text-gray-800 text-lg mt-4",children:[p.jsxs("p",{className:"mb-2",children:[p.jsx("strong",{className:"text-gray-600",children:"Crop:"})," ",s]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-gray-600",children:"Farm Name:"})," ",c.farmName||"Adhil Morgan"]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-gray-600",children:"Latitude:"})," ",c.latitude||"N/A"]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-gray-600",children:"Longitude:"})," ",c.longitude||"N/A"]}),p.jsxs("p",{children:[p.jsx("strong",{className:"text-gray-600",children:"Time:"})," ",c.timestamp||"N/A"]})]})]}),p.jsx("div",{className:"md:w-3/5 p-6 bg-white rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300",children:P?p.jsx("div",{className:"text-center text-gray-500",children:"Loading..."}):D?p.jsx("div",{className:"text-center text-red-500",children:D}):p.jsxs(p.Fragment,{children:[p.jsx("br",{}),p.jsx("img",{className:"w-full h-40 object-cover rounded-lg shadow-md mb-4",src:c.imageUrl||"/default-image.jpg",alt:`Photo of ${r}`}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(yne,{className:"text-red-500 mr-2 text-xl"}),p.jsx("div",{className:"font-semibold w-1/2",children:"Temperature:"}),p.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[" ",c.average_temperature?c.average_temperature.toFixed(2):"N/A"," C"]})]}),p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(RD,{className:"text-blue-500 mr-2 text-xl"}),p.jsx("div",{className:"font-semibold w-1/2",children:"Humidity:"}),p.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[c.humidity?c.humidity.toFixed(2):"N/A"," %"]})]}),p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(gne,{className:"text-yellow-500 mr-2 text-xl"}),p.jsx("div",{className:"font-semibold w-1/2",children:"Solar Radiation:"}),p.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[c.solarRadiation?c.solarRadiation.toFixed(2):"N/A"," W/m"]})]}),p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(Cne,{className:"text-gray-600 mr-2 text-xl"}),p.jsx("div",{className:"font-semibold w-1/2",children:"Wind Speed:"}),p.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[c.windSpeed?c.windSpeed.toFixed(2):"N/A"," m/s"]})]}),p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(RD,{className:"text-green-500 mr-3 text-2xl"}),p.jsx("div",{className:"font-semibold w-1/2",children:"Precipitation:"}),p.jsxs("div",{className:"text-gray-800 text-xl w-1/2 text-right",children:[c.precipitation?c.precipitation.toFixed(2):"N/A"," Pa"]})]}),p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(OD,{className:"text-purple-500 mr-2 text-xl"}),p.jsx("div",{className:"font-semibold w-1/2",children:"ET0 :"}),p.jsxs("div",{className:"text-gray-800 text-xl w-1/2 text-right",children:[c.ET0?c.ET0.toFixed(2):"N/A"," mm/day"]})]}),p.jsxs("div",{className:"flex items-center text-gray-600",children:[p.jsx(OD,{className:"text-purple-500 mr-2 text-xl"}),p.jsx("div",{className:"font-semibold w-1/2",children:"ETc :"}),p.jsxs("div",{className:"text-gray-800 text-xl w-1/2 text-right",children:[c.ETc?c.ETc.toFixed(2):"N/A"," mm/day"]})]})]})]})})]})})};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function tb(t){return t+.5|0}const hm=(t,e,r)=>Math.max(Math.min(t,r),e);function ix(t){return hm(tb(t*2.55),0,255)}function jm(t){return hm(tb(t*255),0,255)}function Yp(t){return hm(tb(t/2.55)/100,0,1)}function cO(t){return hm(tb(t*100),0,100)}const Rh={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},u6=[..."0123456789ABCDEF"],zie=t=>u6[t&15],Qie=t=>u6[(t&240)>>4]+u6[t&15],Qw=t=>(t&240)>>4===(t&15),Hie=t=>Qw(t.r)&&Qw(t.g)&&Qw(t.b)&&Qw(t.a);function Vie(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Rh[t[1]]*17,g:255&Rh[t[2]]*17,b:255&Rh[t[3]]*17,a:e===5?Rh[t[4]]*17:255}:(e===7||e===9)&&(r={r:Rh[t[1]]<<4|Rh[t[2]],g:Rh[t[3]]<<4|Rh[t[4]],b:Rh[t[5]]<<4|Rh[t[6]],a:e===9?Rh[t[7]]<<4|Rh[t[8]]:255})),r}const Gie=(t,e)=>t<255?e(t):"";function $ie(t){var e=Hie(t)?zie:Qie;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Gie(t.a,e):void 0}const qie=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function WH(t,e,r){const n=e*Math.min(r,1-r),s=(o,c=(o+t/30)%12)=>r-n*Math.max(Math.min(c-3,9-c,1),-1);return[s(0),s(8),s(4)]}function Wie(t,e,r){const n=(s,o=(s+t/60)%6)=>r-r*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Kie(t,e,r){const n=WH(t,1,.5);let s;for(e+r>1&&(s=1/(e+r),e*=s,r*=s),s=0;s<3;s++)n[s]*=1-e-r,n[s]+=e;return n}function Xie(t,e,r,n,s){return t===s?(e-r)/n+(e<r?6:0):e===s?(r-t)/n+2:(t-e)/n+4}function hN(t){const r=t.r/255,n=t.g/255,s=t.b/255,o=Math.max(r,n,s),c=Math.min(r,n,s),u=(o+c)/2;let i,m,g;return o!==c&&(g=o-c,m=u>.5?g/(2-o-c):g/(o+c),i=Xie(r,n,s,g,o),i=i*60+.5),[i|0,m||0,u]}function fN(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(jm)}function pN(t,e,r){return fN(WH,t,e,r)}function Yie(t,e,r){return fN(Kie,t,e,r)}function Zie(t,e,r){return fN(Wie,t,e,r)}function KH(t){return(t%360+360)%360}function Jie(t){const e=qie.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?ix(+e[5]):jm(+e[5]));const s=KH(+e[2]),o=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?n=Yie(s,o,c):e[1]==="hsv"?n=Zie(s,o,c):n=pN(s,o,c),{r:n[0],g:n[1],b:n[2],a:r}}function ese(t,e){var r=hN(t);r[0]=KH(r[0]+e),r=pN(r),t.r=r[0],t.g=r[1],t.b=r[2]}function tse(t){if(!t)return;const e=hN(t),r=e[0],n=cO(e[1]),s=cO(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${s}%, ${Yp(t.a)})`:`hsl(${r}, ${n}%, ${s}%)`}const uO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rse(){const t={},e=Object.keys(dO),r=Object.keys(uO);let n,s,o,c,u;for(n=0;n<e.length;n++){for(c=u=e[n],s=0;s<r.length;s++)o=r[s],u=u.replace(o,uO[o]);o=parseInt(dO[c],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}let Hw;function nse(t){Hw||(Hw=rse(),Hw.transparent=[0,0,0,0]);const e=Hw[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const ise=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sse(t){const e=ise.exec(t);let r=255,n,s,o;if(e){if(e[7]!==n){const c=+e[7];r=e[8]?ix(c):hm(c*255,0,255)}return n=+e[1],s=+e[3],o=+e[5],n=255&(e[2]?ix(n):hm(n,0,255)),s=255&(e[4]?ix(s):hm(s,0,255)),o=255&(e[6]?ix(o):hm(o,0,255)),{r:n,g:s,b:o,a:r}}}function ose(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Yp(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const IE=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,iy=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function ase(t,e,r){const n=iy(Yp(t.r)),s=iy(Yp(t.g)),o=iy(Yp(t.b));return{r:jm(IE(n+r*(iy(Yp(e.r))-n))),g:jm(IE(s+r*(iy(Yp(e.g))-s))),b:jm(IE(o+r*(iy(Yp(e.b))-o))),a:t.a+r*(e.a-t.a)}}function Vw(t,e,r){if(t){let n=hN(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=pN(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function XH(t,e){return t&&Object.assign(e||{},t)}function hO(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=jm(t[3]))):(e=XH(t,{r:0,g:0,b:0,a:1}),e.a=jm(e.a)),e}function lse(t){return t.charAt(0)==="r"?sse(t):Jie(t)}class C_{constructor(e){if(e instanceof C_)return e;const r=typeof e;let n;r==="object"?n=hO(e):r==="string"&&(n=Vie(e)||nse(e)||lse(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=XH(this._rgb);return e&&(e.a=Yp(e.a)),e}set rgb(e){this._rgb=hO(e)}rgbString(){return this._valid?ose(this._rgb):void 0}hexString(){return this._valid?$ie(this._rgb):void 0}hslString(){return this._valid?tse(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,s=e.rgb;let o;const c=r===o?.5:r,u=2*c-1,i=n.a-s.a,m=((u*i===-1?u:(u+i)/(1+u*i))+1)/2;o=1-m,n.r=255&m*n.r+o*s.r+.5,n.g=255&m*n.g+o*s.g+.5,n.b=255&m*n.b+o*s.b+.5,n.a=c*n.a+(1-c)*s.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=ase(this._rgb,e._rgb,r)),this}clone(){return new C_(this.rgb)}alpha(e){return this._rgb.a=jm(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=tb(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vw(this._rgb,2,e),this}darken(e){return Vw(this._rgb,2,-e),this}saturate(e){return Vw(this._rgb,1,e),this}desaturate(e){return Vw(this._rgb,1,-e),this}rotate(e){return ese(this._rgb,e),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Qp(){}const cse=(()=>{let t=0;return()=>t++})();function Go(t){return t===null||typeof t>"u"}function da(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Us(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Cl(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function lh(t,e){return Cl(t)?t:e}function ys(t,e){return typeof t>"u"?e:t}const use=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,YH=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function xa(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function _a(t,e,r,n){let s,o,c;if(da(t))for(o=t.length,s=0;s<o;s++)e.call(r,t[s],s);else if(Us(t))for(c=Object.keys(t),o=c.length,s=0;s<o;s++)e.call(r,t[c[s]],c[s])}function r4(t,e){let r,n,s,o;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(s=t[r],o=e[r],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function n4(t){if(da(t))return t.map(n4);if(Us(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let s=0;for(;s<n;++s)e[r[s]]=n4(t[r[s]]);return e}return t}function ZH(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function dse(t,e,r,n){if(!ZH(t))return;const s=e[t],o=r[t];Us(s)&&Us(o)?S_(s,o,n):e[t]=n4(o)}function S_(t,e,r){const n=da(e)?e:[e],s=n.length;if(!Us(t))return t;r=r||{};const o=r.merger||dse;let c;for(let u=0;u<s;++u){if(c=n[u],!Us(c))continue;const i=Object.keys(c);for(let m=0,g=i.length;m<g;++m)o(i[m],t,c,r)}return t}function Ix(t,e){return S_(t,e,{merger:hse})}function hse(t,e,r){if(!ZH(t))return;const n=e[t],s=r[t];Us(n)&&Us(s)?Ix(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=n4(s))}const fO={"":t=>t,x:t=>t.x,y:t=>t.y};function fse(t){const e=t.split("."),r=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function pse(t){const e=fse(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function Hm(t,e){return(fO[e]||(fO[e]=pse(e)))(t)}function AN(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Kd=t=>typeof t<"u",Wd=t=>typeof t=="function",pO=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function Ase(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Co=Math.PI,za=2*Co,mse=za+Co,i4=Number.POSITIVE_INFINITY,mN=Co/180,ml=Co/2,Vh=Co/4,s4=Co*2/3,fm=Math.log10,vp=Math.sign;function Nx(t,e,r){return Math.abs(t-e)<r}function AO(t){const e=Math.round(t);t=Nx(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(fm(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function gse(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((s,o)=>s-o).pop(),e}function Vm(t){return!isNaN(parseFloat(t))&&isFinite(t)}function yse(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function JH(t,e,r){let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n][r],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Lc(t){return t*(Co/180)}function pC(t){return t*(180/Co)}function mO(t){if(!Cl(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function o4(t,e){const r=e.x-t.x,n=e.y-t.y,s=Math.sqrt(r*r+n*n);let o=Math.atan2(n,r);return o<-.5*Co&&(o+=za),{angle:o,distance:s}}function p1(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vse(t,e){return(t-e+mse)%za-Co}function uh(t){return(t%za+za)%za}function B_(t,e,r,n){const s=uh(t),o=uh(e),c=uh(r),u=uh(o-s),i=uh(c-s),m=uh(s-o),g=uh(s-c);return s===o||s===c||n&&o===c||u>i&&m<g}function ru(t,e,r){return Math.max(e,Math.min(r,t))}function xse(t){return ru(t,-32768,32767)}function tA(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function gN(t,e,r){r=r||(c=>t[c]<e);let n=t.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,r(o)?s=o:n=o;return{lo:s,hi:n}}const rA=(t,e,r,n)=>gN(t,r,n?s=>{const o=t[s][e];return o<r||o===r&&t[s+1][e]===r}:s=>t[s][e]<r),_se=(t,e,r)=>gN(t,r,n=>t[n][e]>=r);function bse(t,e,r){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>r;)s--;return n>0||s<t.length?t.slice(n,s):t}const eV=["push","pop","shift","splice","unshift"];function wse(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),eV.forEach(r=>{const n="_onData"+AN(r),s=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...o){const c=s.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[n]=="function"&&u[n](...o)}),c}})})}function gO(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(eV.forEach(o=>{delete t[o]}),delete t._chartjs)}function tV(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const rV=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function nV(t,e){let r=[],n=!1;return function(...s){r=s,n||(n=!0,rV.call(window,()=>{n=!1,t.apply(e,r)}))}}function Cse(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const yN=t=>t==="start"?"left":t==="end"?"right":"center",qu=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,Sse=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function iV(t,e,r){const n=e.length;let s=0,o=n;if(t._sorted){const{iScale:c,_parsed:u}=t,i=c.axis,{min:m,max:g,minDefined:C,maxDefined:B}=c.getUserBounds();C&&(s=ru(Math.min(rA(u,i,m).lo,r?n:rA(e,i,c.getPixelForValue(m)).lo),0,n-1)),B?o=ru(Math.max(rA(u,c.axis,g,!0).hi+1,r?0:rA(e,i,c.getPixelForValue(g),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function sV(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=s,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,s),o}const Gw=t=>t===0||t===1,yO=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*za/r)),vO=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*za/r)+1,Fx={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ml)+1,easeOutSine:t=>Math.sin(t*ml),easeInOutSine:t=>-.5*(Math.cos(Co*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Gw(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Gw(t)?t:yO(t,.075,.3),easeOutElastic:t=>Gw(t)?t:vO(t,.075,.3),easeInOutElastic(t){return Gw(t)?t:t<.5?.5*yO(t*2,.1125,.45):.5+.5*vO(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Fx.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Fx.easeInBounce(t*2)*.5:Fx.easeOutBounce(t*2-1)*.5+.5};function vN(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function xO(t){return vN(t)?t:new C_(t)}function NE(t){return vN(t)?t:new C_(t).saturate(.5).darken(.1).hexString()}const Bse=["x","y","borderWidth","radius","tension"],Ese=["color","borderColor","backgroundColor"];function Tse(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Ese},numbers:{type:"number",properties:Bse}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Lse(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _O=new Map;function Ise(t,e){e=e||{};const r=t+JSON.stringify(e);let n=_O.get(r);return n||(n=new Intl.NumberFormat(t,e),_O.set(r,n)),n}function rb(t,e,r){return Ise(e,r).format(t)}const oV={values(t){return da(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let s,o=t;if(r.length>1){const m=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(m<1e-4||m>1e15)&&(s="scientific"),o=Nse(t,r)}const c=fm(Math.abs(o)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),i={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(i,this.options.ticks.format),rb(t,n,i)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(fm(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?oV.numeric.call(this,t,e,r):""}};function Nse(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var AC={formatters:oV};function Fse(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:AC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const v0=Object.create(null),d6=Object.create(null);function Px(t,e){if(!e)return t;const r=e.split(".");for(let n=0,s=r.length;n<s;++n){const o=r[n];t=t[o]||(t[o]=Object.create(null))}return t}function FE(t,e,r){return typeof e=="string"?S_(Px(t,e),r):S_(Px(t,""),e)}class Pse{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>NE(s.backgroundColor),this.hoverBorderColor=(n,s)=>NE(s.borderColor),this.hoverColor=(n,s)=>NE(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return FE(this,e,r)}get(e){return Px(this,e)}describe(e,r){return FE(d6,e,r)}override(e,r){return FE(v0,e,r)}route(e,r,n,s){const o=Px(this,e),c=Px(this,n),u="_"+r;Object.defineProperties(o,{[u]:{value:o[r],writable:!0},[r]:{enumerable:!0,get(){const i=this[u],m=c[s];return Us(i)?Object.assign({},m,i):ys(i,m)},set(i){this[u]=i}}})}apply(e){e.forEach(r=>r(this))}}var gl=new Pse({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Tse,Lse,Fse]);function jse(t){return!t||Go(t.size)||Go(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function a4(t,e,r,n,s){let o=e[s];return o||(o=e[s]=t.measureText(s).width,r.push(s)),o>n&&(n=o),n}function Mse(t,e,r,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let c=0;const u=r.length;let i,m,g,C,B;for(i=0;i<u;i++)if(C=r[i],C!=null&&!da(C))c=a4(t,s,o,c,C);else if(da(C))for(m=0,g=C.length;m<g;m++)B=C[m],B!=null&&!da(B)&&(c=a4(t,s,o,c,B));t.restore();const S=o.length/2;if(S>r.length){for(i=0;i<S;i++)delete s[o[i]];o.splice(0,S)}return c}function wg(t,e,r){const n=t.currentDevicePixelRatio,s=r!==0?Math.max(r/2,.5):0;return Math.round((e-s)*n)/n+s}function bO(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function h6(t,e,r,n){aV(t,e,r,n,null)}function aV(t,e,r,n,s){let o,c,u,i,m,g,C,B;const S=e.pointStyle,P=e.rotation,j=e.radius;let D=(P||0)*mN;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(D),t.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),t.restore();return}if(!(isNaN(j)||j<=0)){switch(t.beginPath(),S){default:s?t.ellipse(r,n,s/2,j,0,0,za):t.arc(r,n,j,0,za),t.closePath();break;case"triangle":g=s?s/2:j,t.moveTo(r+Math.sin(D)*g,n-Math.cos(D)*j),D+=s4,t.lineTo(r+Math.sin(D)*g,n-Math.cos(D)*j),D+=s4,t.lineTo(r+Math.sin(D)*g,n-Math.cos(D)*j),t.closePath();break;case"rectRounded":m=j*.516,i=j-m,c=Math.cos(D+Vh)*i,C=Math.cos(D+Vh)*(s?s/2-m:i),u=Math.sin(D+Vh)*i,B=Math.sin(D+Vh)*(s?s/2-m:i),t.arc(r-C,n-u,m,D-Co,D-ml),t.arc(r+B,n-c,m,D-ml,D),t.arc(r+C,n+u,m,D,D+ml),t.arc(r-B,n+c,m,D+ml,D+Co),t.closePath();break;case"rect":if(!P){i=Math.SQRT1_2*j,g=s?s/2:i,t.rect(r-g,n-i,2*g,2*i);break}D+=Vh;case"rectRot":C=Math.cos(D)*(s?s/2:j),c=Math.cos(D)*j,u=Math.sin(D)*j,B=Math.sin(D)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+B,n-c),t.lineTo(r+C,n+u),t.lineTo(r-B,n+c),t.closePath();break;case"crossRot":D+=Vh;case"cross":C=Math.cos(D)*(s?s/2:j),c=Math.cos(D)*j,u=Math.sin(D)*j,B=Math.sin(D)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+C,n+u),t.moveTo(r+B,n-c),t.lineTo(r-B,n+c);break;case"star":C=Math.cos(D)*(s?s/2:j),c=Math.cos(D)*j,u=Math.sin(D)*j,B=Math.sin(D)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+C,n+u),t.moveTo(r+B,n-c),t.lineTo(r-B,n+c),D+=Vh,C=Math.cos(D)*(s?s/2:j),c=Math.cos(D)*j,u=Math.sin(D)*j,B=Math.sin(D)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+C,n+u),t.moveTo(r+B,n-c),t.lineTo(r-B,n+c);break;case"line":c=s?s/2:Math.cos(D)*j,u=Math.sin(D)*j,t.moveTo(r-c,n-u),t.lineTo(r+c,n+u);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(D)*(s?s/2:j),n+Math.sin(D)*j);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function nA(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function nb(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ib(t){t.restore()}function kse(t,e,r,n,s){if(!e)return t.lineTo(r.x,r.y);if(s==="middle"){const o=(e.x+r.x)/2;t.lineTo(o,e.y),t.lineTo(o,r.y)}else s==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function Dse(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function Ose(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Go(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Rse(t,e,r,n,s){if(s.strikethrough||s.underline){const o=t.measureText(n),c=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,i=r-o.actualBoundingBoxAscent,m=r+o.actualBoundingBoxDescent,g=s.strikethrough?(i+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(c,g),t.lineTo(u,g),t.stroke()}}function Use(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function x0(t,e,r,n,s,o={}){const c=da(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let i,m;for(t.save(),t.font=s.string,Ose(t,o),i=0;i<c.length;++i)m=c[i],o.backdrop&&Use(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Go(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(m,r,n,o.maxWidth)),t.fillText(m,r,n,o.maxWidth),Rse(t,r,n,m,o),n+=Number(s.lineHeight);t.restore()}function A1(t,e){const{x:r,y:n,w:s,h:o,radius:c}=e;t.arc(r+c.topLeft,n+c.topLeft,c.topLeft,1.5*Co,Co,!0),t.lineTo(r,n+o-c.bottomLeft),t.arc(r+c.bottomLeft,n+o-c.bottomLeft,c.bottomLeft,Co,ml,!0),t.lineTo(r+s-c.bottomRight,n+o),t.arc(r+s-c.bottomRight,n+o-c.bottomRight,c.bottomRight,ml,0,!0),t.lineTo(r+s,n+c.topRight),t.arc(r+s-c.topRight,n+c.topRight,c.topRight,0,-ml,!0),t.lineTo(r+c.topLeft,n)}const zse=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Qse=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hse(t,e){const r=(""+t).match(zse);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const Vse=t=>+t||0;function xN(t,e){const r={},n=Us(e),s=n?Object.keys(e):e,o=Us(t)?n?c=>ys(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of s)r[c]=Vse(o(c));return r}function lV(t){return xN(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Mm(t){return xN(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ic(t){const e=lV(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function rc(t,e){t=t||{},e=e||gl.font;let r=ys(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=ys(t.style,e.style);n&&!(""+n).match(Qse)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:ys(t.family,e.family),lineHeight:Hse(ys(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:ys(t.weight,e.weight),string:""};return s.string=jse(s),s}function sx(t,e,r,n){let s,o,c;for(s=0,o=t.length;s<o;++s)if(c=t[s],c!==void 0&&c!==void 0)return c}function Gse(t,e,r){const{min:n,max:s}=t,o=YH(e,(s-n)/2),c=(u,i)=>r&&u===0?0:u+i;return{min:c(n,-Math.abs(o)),max:c(s,o)}}function ag(t,e){return Object.assign(Object.create(t),e)}function _N(t,e=[""],r,n,s=()=>t[0]){const o=r||t;typeof n>"u"&&(n=hV("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:s,override:u=>_N([u,...t],e,o,n)};return new Proxy(c,{deleteProperty(u,i){return delete u[i],delete u._keys,delete t[0][i],!0},get(u,i){return uV(u,i,()=>Jse(i,e,t,u))},getOwnPropertyDescriptor(u,i){return Reflect.getOwnPropertyDescriptor(u._scopes[0],i)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,i){return CO(u).includes(i)},ownKeys(u){return CO(u)},set(u,i,m){const g=u._storage||(u._storage=s());return u[i]=g[i]=m,delete u._keys,!0}})}function m1(t,e,r,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:cV(t,n),setContext:o=>m1(t,o,r,n),override:o=>m1(t.override(o),e,r,n)};return new Proxy(s,{deleteProperty(o,c){return delete o[c],delete t[c],!0},get(o,c,u){return uV(o,c,()=>qse(o,c,u))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(o,c,u){return t[c]=u,delete o[c],!0}})}function cV(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:r,indexable:n,isScriptable:Wd(r)?r:()=>r,isIndexable:Wd(n)?n:()=>n}}const $se=(t,e)=>t?t+AN(e):e,bN=(t,e)=>Us(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function uV(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function qse(t,e,r){const{_proxy:n,_context:s,_subProxy:o,_descriptors:c}=t;let u=n[e];return Wd(u)&&c.isScriptable(e)&&(u=Wse(e,u,t,r)),da(u)&&u.length&&(u=Kse(e,u,t,c.isIndexable)),bN(e,u)&&(u=m1(u,s,o&&o[e],c)),u}function Wse(t,e,r,n){const{_proxy:s,_context:o,_subProxy:c,_stack:u}=r;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let i=e(o,c||n);return u.delete(t),bN(t,i)&&(i=wN(s._scopes,s,t,i)),i}function Kse(t,e,r,n){const{_proxy:s,_context:o,_subProxy:c,_descriptors:u}=r;if(typeof o.index<"u"&&n(t))return e[o.index%e.length];if(Us(e[0])){const i=e,m=s._scopes.filter(g=>g!==i);e=[];for(const g of i){const C=wN(m,s,t,g);e.push(m1(C,o,c&&c[t],u))}}return e}function dV(t,e,r){return Wd(t)?t(e,r):t}const Xse=(t,e)=>t===!0?e:typeof t=="string"?Hm(e,t):void 0;function Yse(t,e,r,n,s){for(const o of e){const c=Xse(r,o);if(c){t.add(c);const u=dV(c._fallback,r,s);if(typeof u<"u"&&u!==r&&u!==n)return u}else if(c===!1&&typeof n<"u"&&r!==n)return null}return!1}function wN(t,e,r,n){const s=e._rootScopes,o=dV(e._fallback,r,n),c=[...t,...s],u=new Set;u.add(n);let i=wO(u,c,r,o||r,n);return i===null||typeof o<"u"&&o!==r&&(i=wO(u,c,o,i,n),i===null)?!1:_N(Array.from(u),[""],s,o,()=>Zse(e,r,n))}function wO(t,e,r,n,s){for(;r;)r=Yse(t,e,r,n,s);return r}function Zse(t,e,r){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return da(s)&&Us(r)?r:s||{}}function Jse(t,e,r,n){let s;for(const o of e)if(s=hV($se(o,t),r),typeof s<"u")return bN(t,s)?wN(r,n,t,s):s}function hV(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function CO(t){let e=t._keys;return e||(e=t._keys=eoe(t._scopes)),e}function eoe(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function fV(t,e,r,n){const{iScale:s}=t,{key:o="r"}=this._parsing,c=new Array(n);let u,i,m,g;for(u=0,i=n;u<i;++u)m=u+r,g=e[m],c[u]={r:s.parse(Hm(g,o),m)};return c}const toe=Number.EPSILON||1e-14,g1=(t,e)=>e<t.length&&!t[e].skip&&t[e],pV=t=>t==="x"?"y":"x";function roe(t,e,r,n){const s=t.skip?e:t,o=e,c=r.skip?e:r,u=p1(o,s),i=p1(c,o);let m=u/(u+i),g=i/(u+i);m=isNaN(m)?0:m,g=isNaN(g)?0:g;const C=n*m,B=n*g;return{previous:{x:o.x-C*(c.x-s.x),y:o.y-C*(c.y-s.y)},next:{x:o.x+B*(c.x-s.x),y:o.y+B*(c.y-s.y)}}}function noe(t,e,r){const n=t.length;let s,o,c,u,i,m=g1(t,0);for(let g=0;g<n-1;++g)if(i=m,m=g1(t,g+1),!(!i||!m)){if(Nx(e[g],0,toe)){r[g]=r[g+1]=0;continue}s=r[g]/e[g],o=r[g+1]/e[g],u=Math.pow(s,2)+Math.pow(o,2),!(u<=9)&&(c=3/Math.sqrt(u),r[g]=s*c*e[g],r[g+1]=o*c*e[g])}}function ioe(t,e,r="x"){const n=pV(r),s=t.length;let o,c,u,i=g1(t,0);for(let m=0;m<s;++m){if(c=u,u=i,i=g1(t,m+1),!u)continue;const g=u[r],C=u[n];c&&(o=(g-c[r])/3,u[`cp1${r}`]=g-o,u[`cp1${n}`]=C-o*e[m]),i&&(o=(i[r]-g)/3,u[`cp2${r}`]=g+o,u[`cp2${n}`]=C+o*e[m])}}function soe(t,e="x"){const r=pV(e),n=t.length,s=Array(n).fill(0),o=Array(n);let c,u,i,m=g1(t,0);for(c=0;c<n;++c)if(u=i,i=m,m=g1(t,c+1),!!i){if(m){const g=m[e]-i[e];s[c]=g!==0?(m[r]-i[r])/g:0}o[c]=u?m?vp(s[c-1])!==vp(s[c])?0:(s[c-1]+s[c])/2:s[c-1]:s[c]}noe(t,s,o),ioe(t,o,e)}function $w(t,e,r){return Math.max(Math.min(t,r),e)}function ooe(t,e){let r,n,s,o,c,u=nA(t[0],e);for(r=0,n=t.length;r<n;++r)c=o,o=u,u=r<n-1&&nA(t[r+1],e),o&&(s=t[r],c&&(s.cp1x=$w(s.cp1x,e.left,e.right),s.cp1y=$w(s.cp1y,e.top,e.bottom)),u&&(s.cp2x=$w(s.cp2x,e.left,e.right),s.cp2y=$w(s.cp2y,e.top,e.bottom)))}function aoe(t,e,r,n,s){let o,c,u,i;if(e.spanGaps&&(t=t.filter(m=>!m.skip)),e.cubicInterpolationMode==="monotone")soe(t,s);else{let m=n?t[t.length-1]:t[0];for(o=0,c=t.length;o<c;++o)u=t[o],i=roe(m,u,t[Math.min(o+1,c-(n?0:1))%c],e.tension),u.cp1x=i.previous.x,u.cp1y=i.previous.y,u.cp2x=i.next.x,u.cp2y=i.next.y,m=u}e.capBezierPoints&&ooe(t,r)}function CN(){return typeof window<"u"&&typeof document<"u"}function SN(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function l4(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const mC=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function loe(t,e){return mC(t).getPropertyValue(e)}const coe=["top","right","bottom","left"];function r0(t,e,r){const n={};r=r?"-"+r:"";for(let s=0;s<4;s++){const o=coe[s];n[o]=parseFloat(t[e+"-"+o+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const uoe=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function doe(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:s,offsetY:o}=n;let c=!1,u,i;if(uoe(s,o,t.target))u=s,i=o;else{const m=e.getBoundingClientRect();u=n.clientX-m.left,i=n.clientY-m.top,c=!0}return{x:u,y:i,box:c}}function Pg(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,s=mC(r),o=s.boxSizing==="border-box",c=r0(s,"padding"),u=r0(s,"border","width"),{x:i,y:m,box:g}=doe(t,r),C=c.left+(g&&u.left),B=c.top+(g&&u.top);let{width:S,height:P}=e;return o&&(S-=c.width+u.width,P-=c.height+u.height),{x:Math.round((i-C)/S*r.width/n),y:Math.round((m-B)/P*r.height/n)}}function hoe(t,e,r){let n,s;if(e===void 0||r===void 0){const o=t&&SN(t);if(!o)e=t.clientWidth,r=t.clientHeight;else{const c=o.getBoundingClientRect(),u=mC(o),i=r0(u,"border","width"),m=r0(u,"padding");e=c.width-m.width-i.width,r=c.height-m.height-i.height,n=l4(u.maxWidth,o,"clientWidth"),s=l4(u.maxHeight,o,"clientHeight")}}return{width:e,height:r,maxWidth:n||i4,maxHeight:s||i4}}const qw=t=>Math.round(t*10)/10;function foe(t,e,r,n){const s=mC(t),o=r0(s,"margin"),c=l4(s.maxWidth,t,"clientWidth")||i4,u=l4(s.maxHeight,t,"clientHeight")||i4,i=hoe(t,e,r);let{width:m,height:g}=i;if(s.boxSizing==="content-box"){const B=r0(s,"border","width"),S=r0(s,"padding");m-=S.width+B.width,g-=S.height+B.height}return m=Math.max(0,m-o.width),g=Math.max(0,n?m/n:g-o.height),m=qw(Math.min(m,c,i.maxWidth)),g=qw(Math.min(g,u,i.maxHeight)),m&&!g&&(g=qw(m/2)),(e!==void 0||r!==void 0)&&n&&i.height&&g>i.height&&(g=i.height,m=qw(Math.floor(g*n))),{width:m,height:g}}function SO(t,e,r){const n=e||1,s=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const c=t.canvas;return c.style&&(r||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||c.height!==s||c.width!==o?(t.currentDevicePixelRatio=n,c.height=s,c.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const poe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};CN()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function BO(t,e){const r=loe(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function jg(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function Aoe(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function moe(t,e,r,n){const s={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},c=jg(t,s,r),u=jg(s,o,r),i=jg(o,e,r),m=jg(c,u,r),g=jg(u,i,r);return jg(m,g,r)}const goe=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},yoe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Xy(t,e,r){return t?goe(e,r):yoe()}function AV(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function mV(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function gV(t){return t==="angle"?{between:B_,compare:vse,normalize:uh}:{between:tA,compare:(e,r)=>e-r,normalize:e=>e}}function EO({start:t,end:e,count:r,loop:n,style:s}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:s}}function voe(t,e,r){const{property:n,start:s,end:o}=r,{between:c,normalize:u}=gV(n),i=e.length;let{start:m,end:g,loop:C}=t,B,S;if(C){for(m+=i,g+=i,B=0,S=i;B<S&&c(u(e[m%i][n]),s,o);++B)m--,g--;m%=i,g%=i}return g<m&&(g+=i),{start:m,end:g,loop:C,style:t.style}}function yV(t,e,r){if(!r)return[t];const{property:n,start:s,end:o}=r,c=e.length,{compare:u,between:i,normalize:m}=gV(n),{start:g,end:C,loop:B,style:S}=voe(t,e,r),P=[];let j=!1,D=null,F,R,V;const Y=()=>i(s,V,F)&&u(s,V)!==0,te=()=>u(o,F)===0||i(o,V,F),se=()=>j||Y(),oe=()=>!j||te();for(let K=g,de=g;K<=C;++K)R=e[K%c],!R.skip&&(F=m(R[n]),F!==V&&(j=i(F,s,o),D===null&&se()&&(D=u(F,s)===0?K:de),D!==null&&oe()&&(P.push(EO({start:D,end:K,loop:B,count:c,style:S})),D=null),de=K,V=F));return D!==null&&P.push(EO({start:D,end:C,loop:B,count:c,style:S})),P}function vV(t,e){const r=[],n=t.segments;for(let s=0;s<n.length;s++){const o=yV(n[s],t.points,e);o.length&&r.push(...o)}return r}function xoe(t,e,r,n){let s=0,o=e-1;if(r&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,r&&(o+=s);o>s&&t[o%e].skip;)o--;return o%=e,{start:s,end:o}}function _oe(t,e,r,n){const s=t.length,o=[];let c=e,u=t[e],i;for(i=e+1;i<=r;++i){const m=t[i%s];m.skip||m.stop?u.skip||(n=!1,o.push({start:e%s,end:(i-1)%s,loop:n}),e=c=m.stop?i:null):(c=i,u.skip&&(e=i)),u=m}return c!==null&&o.push({start:e%s,end:c%s,loop:n}),o}function boe(t,e){const r=t.points,n=t.options.spanGaps,s=r.length;if(!s)return[];const o=!!t._loop,{start:c,end:u}=xoe(r,s,o,n);if(n===!0)return TO(t,[{start:c,end:u,loop:o}],r,e);const i=u<c?u+s:u,m=!!t._fullLoop&&c===0&&u===s-1;return TO(t,_oe(r,c,i,m),r,e)}function TO(t,e,r,n){return!n||!n.setContext||!r?e:woe(t,e,r,n)}function woe(t,e,r,n){const s=t._chart.getContext(),o=LO(t.options),{_datasetIndex:c,options:{spanGaps:u}}=t,i=r.length,m=[];let g=o,C=e[0].start,B=C;function S(P,j,D,F){const R=u?-1:1;if(P!==j){for(P+=i;r[P%i].skip;)P-=R;for(;r[j%i].skip;)j+=R;P%i!==j%i&&(m.push({start:P%i,end:j%i,loop:D,style:F}),g=F,C=j%i)}}for(const P of e){C=u?C:P.start;let j=r[C%i],D;for(B=C+1;B<=P.end;B++){const F=r[B%i];D=LO(n.setContext(ag(s,{type:"segment",p0:j,p1:F,p0DataIndex:(B-1)%i,p1DataIndex:B%i,datasetIndex:c}))),Coe(D,g)&&S(C,B-1,P.loop,g),j=F,g=D}C<B-1&&S(C,B-1,P.loop,g)}return m}function LO(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Coe(t,e){if(!e)return!1;const r=[],n=function(s,o){return vN(o)?(r.includes(o)||r.push(o),r.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(e,n)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Soe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,s){const o=r.listeners[s],c=r.duration;o.forEach(u=>u({chart:e,initial:r.initial,numSteps:c,currentStep:Math.min(n-r.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=rV.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let c=o.length-1,u=!1,i;for(;c>=0;--c)i=o[c],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),u=!0):(o[c]=o[o.length-1],o.pop());u&&(s.draw(),this._notify(s,n,e,"progress")),o.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),r+=o.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qp=new Soe;const IO="transparent",Boe={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=xO(t||IO),s=n.valid&&xO(e||IO);return s&&s.valid?s.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class Eoe{constructor(e,r,n,s){const o=r[n];s=sx([e.to,s,o,e.from]);const c=sx([e.from,o,s]);this._active=!0,this._fn=e.fn||Boe[e.type||typeof c],this._easing=Fx[e.easing]||Fx.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=c,this._to=s,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,c=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=sx([e.to,r,s,e.from]),this._from=sx([e.from,s,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,s=this._prop,o=this._from,c=this._loop,u=this._to;let i;if(this._active=o!==u&&(c||r<n),!this._active){this._target[s]=u,this._notify(!0);return}if(r<0){this._target[s]=o;return}i=r/n%2,i=c&&i>1?2-i:i,i=this._easing(Math.min(1,Math.max(0,i))),this._target[s]=this._fn(o,u,i)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][r]()}}class BN{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Us(e))return;const r=Object.keys(gl.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!Us(o))return;const c={};for(const u of r)c[u]=o[u];(da(o.properties)&&o.properties||[s]).forEach(u=>{(u===s||!n.has(u))&&n.set(u,c)})})}_animateOptions(e,r){const n=r.options,s=Loe(e,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&Toe(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,r){const n=this._properties,s=[],o=e.$animations||(e.$animations={}),c=Object.keys(r),u=Date.now();let i;for(i=c.length-1;i>=0;--i){const m=c[i];if(m.charAt(0)==="$")continue;if(m==="options"){s.push(...this._animateOptions(e,r));continue}const g=r[m];let C=o[m];const B=n.get(m);if(C)if(B&&C.active()){C.update(B,g,u);continue}else C.cancel();if(!B||!B.duration){e[m]=g;continue}o[m]=C=new Eoe(B,e,m,g),s.push(C)}return s}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return qp.add(this._chart,n),!0}}function Toe(t,e){const r=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const o=t[n[s]];o&&o.active()&&r.push(o.wait())}return Promise.all(r)}function Loe(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function NO(t,e){const r=t&&t.options||{},n=r.reverse,s=r.min===void 0?e:0,o=r.max===void 0?e:0;return{start:n?o:s,end:n?s:o}}function Ioe(t,e,r){if(r===!1)return!1;const n=NO(t,r),s=NO(e,r);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Noe(t){let e,r,n,s;return Us(t)?(e=t.top,r=t.right,n=t.bottom,s=t.left):e=r=n=s=t,{top:e,right:r,bottom:n,left:s,disabled:t===!1}}function xV(t,e){const r=[],n=t._getSortedDatasetMetas(e);let s,o;for(s=0,o=n.length;s<o;++s)r.push(n[s].index);return r}function FO(t,e,r,n={}){const s=t.keys,o=n.mode==="single";let c,u,i,m;if(e===null)return;let g=!1;for(c=0,u=s.length;c<u;++c){if(i=+s[c],i===r){if(g=!0,n.all)continue;break}m=t.values[i],Cl(m)&&(o||e===0||vp(e)===vp(m))&&(e+=m)}return!g&&!n.all?0:e}function Foe(t,e){const{iScale:r,vScale:n}=e,s=r.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",c=Object.keys(t),u=new Array(c.length);let i,m,g;for(i=0,m=c.length;i<m;++i)g=c[i],u[i]={[s]:g,[o]:t[g]};return u}function PE(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function Poe(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function joe(t){const{min:e,max:r,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}function Moe(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function PO(t,e,r,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const o=t[s.index];if(r&&o>0||!r&&o<0)return s.index}return null}function jO(t,e){const{chart:r,_cachedMeta:n}=t,s=r._stacks||(r._stacks={}),{iScale:o,vScale:c,index:u}=n,i=o.axis,m=c.axis,g=Poe(o,c,n),C=e.length;let B;for(let S=0;S<C;++S){const P=e[S],{[i]:j,[m]:D}=P,F=P._stacks||(P._stacks={});B=F[m]=Moe(s,g,j),B[u]=D,B._top=PO(B,c,!0,n.type),B._bottom=PO(B,c,!1,n.type);const R=B._visualValues||(B._visualValues={});R[u]=D}}function jE(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function koe(t,e){return ag(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Doe(t,e,r){return ag(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Dv(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const o=s._stacks;if(!o||o[n]===void 0||o[n][r]===void 0)return;delete o[n][r],o[n]._visualValues!==void 0&&o[n]._visualValues[r]!==void 0&&delete o[n]._visualValues[r]}}}const ME=t=>t==="reset"||t==="none",MO=(t,e)=>e?t:Object.assign({},t),Ooe=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:xV(r,!0),values:null};class kf{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=PE(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Dv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),s=(C,B,S,P)=>C==="x"?B:C==="r"?P:S,o=r.xAxisID=ys(n.xAxisID,jE(e,"x")),c=r.yAxisID=ys(n.yAxisID,jE(e,"y")),u=r.rAxisID=ys(n.rAxisID,jE(e,"r")),i=r.indexAxis,m=r.iAxisID=s(i,o,c,u),g=r.vAxisID=s(i,c,o,u);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(c),r.rScale=this.getScaleForId(u),r.iScale=this.getScaleForId(m),r.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&gO(this._data,this),e._stacked&&Dv(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(Us(r)){const s=this._cachedMeta;this._data=Foe(r,s)}else if(n!==r){if(n){gO(n,this);const s=this._cachedMeta;Dv(s),s._parsed=[]}r&&Object.isExtensible(r)&&wse(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=r._stacked;r._stacked=PE(r.vScale,r),r.stack!==n.stack&&(s=!0,Dv(r),r.stack=n.stack),this._resyncElements(e),(s||o!==r._stacked)&&(jO(this,r._parsed),r._stacked=PE(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:c}=n,u=o.axis;let i=e===0&&r===s.length?!0:n._sorted,m=e>0&&n._parsed[e-1],g,C,B;if(this._parsing===!1)n._parsed=s,n._sorted=!0,B=s;else{da(s[e])?B=this.parseArrayData(n,s,e,r):Us(s[e])?B=this.parseObjectData(n,s,e,r):B=this.parsePrimitiveData(n,s,e,r);const S=()=>C[u]===null||m&&C[u]<m[u];for(g=0;g<r;++g)n._parsed[g+e]=C=B[g],i&&(S()&&(i=!1),m=C);n._sorted=i}c&&jO(this,B)}parsePrimitiveData(e,r,n,s){const{iScale:o,vScale:c}=e,u=o.axis,i=c.axis,m=o.getLabels(),g=o===c,C=new Array(s);let B,S,P;for(B=0,S=s;B<S;++B)P=B+n,C[B]={[u]:g||o.parse(m[P],P),[i]:c.parse(r[P],P)};return C}parseArrayData(e,r,n,s){const{xScale:o,yScale:c}=e,u=new Array(s);let i,m,g,C;for(i=0,m=s;i<m;++i)g=i+n,C=r[g],u[i]={x:o.parse(C[0],g),y:c.parse(C[1],g)};return u}parseObjectData(e,r,n,s){const{xScale:o,yScale:c}=e,{xAxisKey:u="x",yAxisKey:i="y"}=this._parsing,m=new Array(s);let g,C,B,S;for(g=0,C=s;g<C;++g)B=g+n,S=r[B],m[g]={x:o.parse(Hm(S,u),B),y:c.parse(Hm(S,i),B)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const s=this.chart,o=this._cachedMeta,c=r[e.axis],u={keys:xV(s,!0),values:r._stacks[e.axis]._visualValues};return FO(u,c,o.index,{mode:n})}updateRangeFromParsed(e,r,n,s){const o=n[r.axis];let c=o===null?NaN:o;const u=s&&n._stacks[r.axis];s&&u&&(s.values=u,c=FO(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,r){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&e===n.iScale,c=s.length,u=this._getOtherScale(e),i=Ooe(r,n,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:C}=joe(u);let B,S;function P(){S=s[B];const j=S[u.axis];return!Cl(S[e.axis])||g>j||C<j}for(B=0;B<c&&!(!P()&&(this.updateRangeFromParsed(m,e,S,i),o));++B);if(o){for(B=c-1;B>=0;--B)if(!P()){this.updateRangeFromParsed(m,e,S,i);break}}return m}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let s,o,c;for(s=0,o=r.length;s<o;++s)c=r[s][e.axis],Cl(c)&&n.push(c);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,s=r.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=Noe(ys(this.options.clip,Ioe(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,s=n.data||[],o=r.chartArea,c=[],u=this._drawStart||0,i=this._drawCount||s.length-u,m=this.options.drawActiveElementsOnTop;let g;for(n.dataset&&n.dataset.draw(e,o,u,i),g=u;g<u+i;++g){const C=s[g];C.hidden||(C.active&&m?c.push(C):C.draw(e,o))}for(g=0;g<c.length;++g)c[g].draw(e,o)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];o=c.$context||(c.$context=Doe(this.getContext(),e,c)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=koe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const s=r==="active",o=this._cachedDataOpts,c=e+"-"+r,u=o[c],i=this.enableOptionSharing&&Kd(n);if(u)return MO(u,i);const m=this.chart.config,g=m.datasetElementScopeKeys(this._type,e),C=s?[`${e}Hover`,"hover",e,""]:[e,""],B=m.getOptionScopes(this.getDataset(),g),S=Object.keys(gl.elements[e]),P=()=>this.getContext(n,s,r),j=m.resolveNamedOptions(B,S,P,C);return j.$shared&&(j.$shared=i,o[c]=Object.freeze(MO(j,i))),j}_resolveAnimations(e,r,n){const s=this.chart,o=this._cachedDataOpts,c=`animation-${r}`,u=o[c];if(u)return u;let i;if(s.options.animation!==!1){const g=this.chart.config,C=g.datasetAnimationScopeKeys(this._type,r),B=g.getOptionScopes(this.getDataset(),C);i=g.createResolver(B,this.getContext(e,n,r))}const m=new BN(s,i&&i.animations);return i&&i._cacheable&&(o[c]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||ME(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),s=this._sharedOptions,o=this.getSharedOptions(n),c=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,n),{sharedOptions:o,includeOptions:c}}updateElement(e,r,n,s){ME(s)?Object.assign(e,n):this._resolveAnimations(r,s).update(e,n)}updateSharedOptions(e,r,n){e&&!ME(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,s){e.active=s;const o=this.getStyle(r,s);this._resolveAnimations(r,n,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[u,i,m]of this._syncList)this[u](i,m);this._syncList=[];const s=n.length,o=r.length,c=Math.min(o,s);c&&this.parse(0,c),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,r,n=!0){const s=this._cachedMeta,o=s.data,c=e+r;let u;const i=m=>{for(m.length+=r,u=m.length-1;u>=c;u--)m[u]=m[u-r]};for(i(o),u=e;u<c;++u)o[u]=new this.dataElementType;this._parsing&&i(s._parsed),this.parse(e,r),n&&this.updateElements(o,e,r,"reset")}updateElements(e,r,n,s){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,r);n._stacked&&Dv(n,s)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,s]=e;this[r](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ni(kf,"defaults",{}),ni(kf,"datasetElementType",null),ni(kf,"dataElementType",null);function Roe(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let s=0,o=r.length;s<o;s++)n=n.concat(r[s].controller.getAllParsedValues(t));t._cache.$bar=tV(n.sort((s,o)=>s-o))}return t._cache.$bar}function Uoe(t){const e=t.iScale,r=Roe(e,t.type);let n=e._length,s,o,c,u;const i=()=>{c===32767||c===-32768||(Kd(u)&&(n=Math.min(n,Math.abs(c-u)||n)),u=c)};for(s=0,o=r.length;s<o;++s)c=e.getPixelForValue(r[s]),i();for(u=void 0,s=0,o=e.ticks.length;s<o;++s)c=e.getPixelForTick(s),i();return n}function zoe(t,e,r,n){const s=r.barThickness;let o,c;return Go(s)?(o=e.min*r.categoryPercentage,c=r.barPercentage):(o=s*n,c=1),{chunk:o/n,ratio:c,start:e.pixels[t]-o/2}}function Qoe(t,e,r,n){const s=e.pixels,o=s[t];let c=t>0?s[t-1]:null,u=t<s.length-1?s[t+1]:null;const i=r.categoryPercentage;c===null&&(c=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-c);const m=o-(o-Math.min(c,u))/2*i;return{chunk:Math.abs(u-c)/2*i/n,ratio:r.barPercentage,start:m}}function Hoe(t,e,r,n){const s=r.parse(t[0],n),o=r.parse(t[1],n),c=Math.min(s,o),u=Math.max(s,o);let i=c,m=u;Math.abs(c)>Math.abs(u)&&(i=u,m=c),e[r.axis]=m,e._custom={barStart:i,barEnd:m,start:s,end:o,min:c,max:u}}function _V(t,e,r,n){return da(t)?Hoe(t,e,r,n):e[r.axis]=r.parse(t,n),e}function kO(t,e,r,n){const s=t.iScale,o=t.vScale,c=s.getLabels(),u=s===o,i=[];let m,g,C,B;for(m=r,g=r+n;m<g;++m)B=e[m],C={},C[s.axis]=u||s.parse(c[m],m),i.push(_V(B,C,o,m));return i}function kE(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Voe(t,e,r){return t!==0?vp(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function Goe(t){let e,r,n,s,o;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(s="end",o="start"):(s="start",o="end"),{start:r,end:n,reverse:e,top:s,bottom:o}}function $oe(t,e,r,n){let s=e.borderSkipped;const o={};if(!s){t.borderSkipped=o;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:i,top:m,bottom:g}=Goe(t);s==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?s=m:(r._bottom||0)===n?s=g:(o[DO(g,c,u,i)]=!0,s=m)),o[DO(s,c,u,i)]=!0,t.borderSkipped=o}function DO(t,e,r,n){return n?(t=qoe(t,e,r),t=OO(t,r,e)):t=OO(t,e,r),t}function qoe(t,e,r){return t===e?r:t===r?e:t}function OO(t,e,r){return t==="start"?e:t==="end"?r:t}function Woe(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class jx extends kf{parsePrimitiveData(e,r,n,s){return kO(e,r,n,s)}parseArrayData(e,r,n,s){return kO(e,r,n,s)}parseObjectData(e,r,n,s){const{iScale:o,vScale:c}=e,{xAxisKey:u="x",yAxisKey:i="y"}=this._parsing,m=o.axis==="x"?u:i,g=c.axis==="x"?u:i,C=[];let B,S,P,j;for(B=n,S=n+s;B<S;++B)j=r[B],P={},P[o.axis]=o.parse(Hm(j,m),B),C.push(_V(Hm(j,g),P,c,B));return C}updateRangeFromParsed(e,r,n,s){super.updateRangeFromParsed(e,r,n,s);const o=n._custom;o&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:s}=r,o=this.getParsed(e),c=o._custom,u=kE(c)?"["+c.start+", "+c.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,s){const o=s==="reset",{index:c,_cachedMeta:{vScale:u}}=this,i=u.getBasePixel(),m=u.isHorizontal(),g=this._getRuler(),{sharedOptions:C,includeOptions:B}=this._getSharedOptions(r,s);for(let S=r;S<r+n;S++){const P=this.getParsed(S),j=o||Go(P[u.axis])?{base:i,head:i}:this._calculateBarValuePixels(S),D=this._calculateBarIndexPixels(S,g),F=(P._stacks||{})[u.axis],R={horizontal:m,base:j.base,enableBorderRadius:!F||kE(P._custom)||c===F._top||c===F._bottom,x:m?j.head:D.center,y:m?D.center:j.head,height:m?D.size:Math.abs(j.size),width:m?Math.abs(j.size):D.size};B&&(R.options=C||this.resolveDataElementOptions(S,e[S].active?"active":s));const V=R.options||e[S].options;$oe(R,V,F,c),Woe(R,V,g.ratio),this.updateElement(e[S],S,R,s)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(g=>g.controller.options.grouped),o=n.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(r),i=u&&u[n.axis],m=g=>{const C=g._parsed.find(S=>S[n.axis]===i),B=C&&C[g.vScale.axis];if(Go(B)||isNaN(B))return!0};for(const g of s)if(!(r!==void 0&&m(g))&&((o===!1||c.indexOf(g.stack)===-1||o===void 0&&g.stack===void 0)&&c.push(g.stack),g.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,r,n){const s=this._getStacks(e,n),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,s=[];let o,c;for(o=0,c=r.data.length;o<c;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const u=e.barThickness;return{min:u||Uoe(r),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:s},options:{base:o,minBarLength:c}}=this,u=o||0,i=this.getParsed(e),m=i._custom,g=kE(m);let C=i[r.axis],B=0,S=n?this.applyStack(r,i,n):C,P,j;S!==C&&(B=S-C,S=C),g&&(C=m.barStart,S=m.barEnd-m.barStart,C!==0&&vp(C)!==vp(m.barEnd)&&(B=0),B+=C);const D=!Go(o)&&!g?o:B;let F=r.getPixelForValue(D);if(this.chart.getDataVisibility(e)?P=r.getPixelForValue(B+S):P=F,j=P-F,Math.abs(j)<c){j=Voe(j,r,u)*c,C===u&&(F-=j/2);const R=r.getPixelForDecimal(0),V=r.getPixelForDecimal(1),Y=Math.min(R,V),te=Math.max(R,V);F=Math.max(Math.min(F,te),Y),P=F+j,n&&!g&&(i._stacks[r.axis]._visualValues[s]=r.getValueForPixel(P)-r.getValueForPixel(F))}if(F===r.getPixelForValue(u)){const R=vp(j)*r.getLineWidthForValue(u)/2;F+=R,j-=R}return{size:j,base:F,head:P,center:P+j/2}}_calculateBarIndexPixels(e,r){const n=r.scale,s=this.options,o=s.skipNull,c=ys(s.maxBarThickness,1/0);let u,i;if(r.grouped){const m=o?this._getStackCount(e):r.stackCount,g=s.barThickness==="flex"?Qoe(e,r,s,m):zoe(e,r,s,m),C=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=g.start+g.chunk*C+g.chunk/2,i=Math.min(c,g.chunk*g.ratio)}else u=n.getPixelForValue(this.getParsed(e)[n.axis],e),i=Math.min(c,r.min*r.ratio);return{base:u-i/2,head:u+i/2,center:u,size:i}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}ni(jx,"id","bar"),ni(jx,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ni(jx,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class a5 extends kf{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,s){const o=super.parsePrimitiveData(e,r,n,s);for(let c=0;c<o.length;c++)o[c]._custom=this.resolveDataElementOptions(c+n).radius;return o}parseArrayData(e,r,n,s){const o=super.parseArrayData(e,r,n,s);for(let c=0;c<o.length;c++){const u=r[n+c];o[c]._custom=ys(u[2],this.resolveDataElementOptions(c+n).radius)}return o}parseObjectData(e,r,n,s){const o=super.parseObjectData(e,r,n,s);for(let c=0;c<o.length;c++){const u=r[n+c];o[c]._custom=ys(u&&u.r&&+u.r,this.resolveDataElementOptions(c+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=r,c=this.getParsed(e),u=s.getLabelForValue(c.x),i=o.getLabelForValue(c.y),m=c._custom;return{label:n[e]||"",value:"("+u+", "+i+(m?", "+m:"")+")"}}update(e){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,s){const o=s==="reset",{iScale:c,vScale:u}=this._cachedMeta,{sharedOptions:i,includeOptions:m}=this._getSharedOptions(r,s),g=c.axis,C=u.axis;for(let B=r;B<r+n;B++){const S=e[B],P=!o&&this.getParsed(B),j={},D=j[g]=o?c.getPixelForDecimal(.5):c.getPixelForValue(P[g]),F=j[C]=o?u.getBasePixel():u.getPixelForValue(P[C]);j.skip=isNaN(D)||isNaN(F),m&&(j.options=i||this.resolveDataElementOptions(B,S.active?"active":s),o&&(j.options.radius=0)),this.updateElement(S,B,j,s)}}resolveDataElementOptions(e,r){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return r!=="active"&&(s.radius=0),s.radius+=ys(n&&n._custom,o),s}}ni(a5,"id","bubble"),ni(a5,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ni(a5,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Koe(t,e,r){let n=1,s=1,o=0,c=0;if(e<za){const u=t,i=u+e,m=Math.cos(u),g=Math.sin(u),C=Math.cos(i),B=Math.sin(i),S=(V,Y,te)=>B_(V,u,i,!0)?1:Math.max(Y,Y*r,te,te*r),P=(V,Y,te)=>B_(V,u,i,!0)?-1:Math.min(Y,Y*r,te,te*r),j=S(0,m,C),D=S(ml,g,B),F=P(Co,m,C),R=P(Co+ml,g,B);n=(j-F)/2,s=(D-R)/2,o=-(j+F)/2,c=-(D+R)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:c}}class iA extends kf{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=i=>+n[i];if(Us(n[e])){const{key:i="value"}=this._parsing;o=m=>+Hm(n[m],i)}let c,u;for(c=e,u=e+r;c<u;++c)s._parsed[c]=o(c)}}_getRotation(){return Lc(this.options.rotation-90)}_getCircumference(){return Lc(this.options.circumference)}_getRotationExtents(){let e=za,r=-za;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),c=s._getCircumference();e=Math.min(e,o),r=Math.max(r,o+c)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,s=this._cachedMeta,o=s.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(n.width,n.height)-c)/2,0),i=Math.min(use(this.options.cutout,u),1),m=this._getRingWeight(this.index),{circumference:g,rotation:C}=this._getRotationExtents(),{ratioX:B,ratioY:S,offsetX:P,offsetY:j}=Koe(C,g,i),D=(n.width-c)/B,F=(n.height-c)/S,R=Math.max(Math.min(D,F)/2,0),V=YH(this.options.radius,R),Y=Math.max(V*i,0),te=(V-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=P*V,this.offsetY=j*V,s.total=this.calculateTotal(),this.outerRadius=V-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*m,0),this.updateElements(o,0,o.length,e)}_circumference(e,r){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/za)}updateElements(e,r,n,s){const o=s==="reset",c=this.chart,u=c.chartArea,m=c.options.animation,g=(u.left+u.right)/2,C=(u.top+u.bottom)/2,B=o&&m.animateScale,S=B?0:this.innerRadius,P=B?0:this.outerRadius,{sharedOptions:j,includeOptions:D}=this._getSharedOptions(r,s);let F=this._getRotation(),R;for(R=0;R<r;++R)F+=this._circumference(R,o);for(R=r;R<r+n;++R){const V=this._circumference(R,o),Y=e[R],te={x:g+this.offsetX,y:C+this.offsetY,startAngle:F,endAngle:F+V,circumference:V,outerRadius:P,innerRadius:S};D&&(te.options=j||this.resolveDataElementOptions(R,Y.active?"active":s)),F+=V,this.updateElement(Y,R,te,s)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,s;for(s=0;s<r.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?za*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=rb(r._parsed[e],n.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let r=0;const n=this.chart;let s,o,c,u,i;if(!e){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){c=n.getDatasetMeta(s),e=c.data,u=c.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)i=u.resolveDataElementOptions(s),i.borderAlign!=="inner"&&(r=Math.max(r,i.borderWidth||0,i.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,s=e.length;n<s;++n){const o=this.resolveDataElementOptions(n);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(ys(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ni(iA,"id","doughnut"),ni(iA,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ni(iA,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ni(iA,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return r.labels.map((o,c)=>{const i=e.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:s,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class Mx extends kf{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=r,c=this.chart._animationsDisabled;let{start:u,count:i}=iV(r,s,c);this._drawStart=u,this._drawCount=i,sV(r)&&(u=0,i=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const m=this.resolveDatasetElementOptions(e);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(n,void 0,{animated:!c,options:m},e),this.updateElements(s,u,i,e)}updateElements(e,r,n,s){const o=s==="reset",{iScale:c,vScale:u,_stacked:i,_dataset:m}=this._cachedMeta,{sharedOptions:g,includeOptions:C}=this._getSharedOptions(r,s),B=c.axis,S=u.axis,{spanGaps:P,segment:j}=this.options,D=Vm(P)?P:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||o||s==="none",R=r+n,V=e.length;let Y=r>0&&this.getParsed(r-1);for(let te=0;te<V;++te){const se=e[te],oe=F?se:{};if(te<r||te>=R){oe.skip=!0;continue}const K=this.getParsed(te),de=Go(K[S]),we=oe[B]=c.getPixelForValue(K[B],te),J=oe[S]=o||de?u.getBasePixel():u.getPixelForValue(i?this.applyStack(u,K,i):K[S],te);oe.skip=isNaN(we)||isNaN(J)||de,oe.stop=te>0&&Math.abs(K[B]-Y[B])>D,j&&(oe.parsed=K,oe.raw=m.data[te]),C&&(oe.options=g||this.resolveDataElementOptions(te,se.active?"active":s)),F||this.updateElement(se,te,oe,s),Y=K}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),c=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ni(Mx,"id","line"),ni(Mx,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ni(Mx,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class kx extends kf{constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=rb(r._parsed[e].r,n.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,r,n,s){return fV.bind(this)(e,r,n,s)}update(e){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){const e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){const e=this.chart,r=e.chartArea,n=e.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),c=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),u=(o-c)/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,r,n,s){const o=s==="reset",c=this.chart,i=c.options.animation,m=this._cachedMeta.rScale,g=m.xCenter,C=m.yCenter,B=m.getIndexAngle(0)-.5*Co;let S=B,P;const j=360/this.countVisibleElements();for(P=0;P<r;++P)S+=this._computeAngle(P,s,j);for(P=r;P<r+n;P++){const D=e[P];let F=S,R=S+this._computeAngle(P,s,j),V=c.getDataVisibility(P)?m.getDistanceFromCenterForValue(this.getParsed(P).r):0;S=R,o&&(i.animateScale&&(V=0),i.animateRotate&&(F=R=B));const Y={x:g,y:C,innerRadius:0,outerRadius:V,startAngle:F,endAngle:R,options:this.resolveDataElementOptions(P,D.active?"active":s)};this.updateElement(D,P,Y,s)}}countVisibleElements(){const e=this._cachedMeta;let r=0;return e.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?Lc(this.resolveDataElementOptions(e,r).angle||n):0}}ni(kx,"id","polarArea"),ni(kx,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ni(kx,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return r.labels.map((o,c)=>{const i=e.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:s,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class c4 extends iA{}ni(c4,"id","pie"),ni(c4,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class l5 extends kf{getLabelAndValue(e){const r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,s){return fV.bind(this)(e,r,n,s)}update(e){const r=this._cachedMeta,n=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(n.points=s,e!=="resize"){const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===s.length,options:c};this.updateElement(n,void 0,u,e)}this.updateElements(s,0,s.length,e)}updateElements(e,r,n,s){const o=this._cachedMeta.rScale,c=s==="reset";for(let u=r;u<r+n;u++){const i=e[u],m=this.resolveDataElementOptions(u,i.active?"active":s),g=o.getPointPositionForValue(u,this.getParsed(u).r),C=c?o.xCenter:g.x,B=c?o.yCenter:g.y,S={x:C,y:B,angle:g.angle,skip:isNaN(C)||isNaN(B),options:m};this.updateElement(i,u,S,s)}}}ni(l5,"id","radar"),ni(l5,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ni(l5,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class c5 extends kf{getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=r,c=this.getParsed(e),u=s.getLabelForValue(c.x),i=o.getLabelForValue(c.y);return{label:n[e]||"",value:"("+u+", "+i+")"}}update(e){const r=this._cachedMeta,{data:n=[]}=r,s=this.chart._animationsDisabled;let{start:o,count:c}=iV(r,n,s);if(this._drawStart=o,this._drawCount=c,sV(r)&&(o=0,c=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:i}=r;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!i._decimated,u.points=n;const m=this.resolveDatasetElementOptions(e);m.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:m},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,o,c,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,s){const o=s==="reset",{iScale:c,vScale:u,_stacked:i,_dataset:m}=this._cachedMeta,g=this.resolveDataElementOptions(r,s),C=this.getSharedOptions(g),B=this.includeOptions(s,C),S=c.axis,P=u.axis,{spanGaps:j,segment:D}=this.options,F=Vm(j)?j:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||s==="none";let V=r>0&&this.getParsed(r-1);for(let Y=r;Y<r+n;++Y){const te=e[Y],se=this.getParsed(Y),oe=R?te:{},K=Go(se[P]),de=oe[S]=c.getPixelForValue(se[S],Y),we=oe[P]=o||K?u.getBasePixel():u.getPixelForValue(i?this.applyStack(u,se,i):se[P],Y);oe.skip=isNaN(de)||isNaN(we)||K,oe.stop=Y>0&&Math.abs(se[S]-V[S])>F,D&&(oe.parsed=se,oe.raw=m.data[Y]),B&&(oe.options=C||this.resolveDataElementOptions(Y,te.active?"active":s)),R||this.updateElement(te,Y,oe,s),V=se}this.updateSharedOptions(C,s,g)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let u=0;for(let i=r.length-1;i>=0;--i)u=Math.max(u,r[i].size(this.resolveDataElementOptions(i))/2);return u>0&&u}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,c)/2}}ni(c5,"id","scatter"),ni(c5,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ni(c5,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Xoe=Object.freeze({__proto__:null,BarController:jx,BubbleController:a5,DoughnutController:iA,LineController:Mx,PieController:c4,PolarAreaController:kx,RadarController:l5,ScatterController:c5});function Cg(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class EN{constructor(e){ni(this,"options");this.options=e||{}}static override(e){Object.assign(EN.prototype,e)}init(){}formats(){return Cg()}parse(){return Cg()}format(){return Cg()}add(){return Cg()}diff(){return Cg()}startOf(){return Cg()}endOf(){return Cg()}}var Yoe={_date:EN};function Zoe(t,e,r,n){const{controller:s,data:o,_sorted:c}=t,u=s._cachedMeta.iScale;if(u&&e===u.axis&&e!=="r"&&c&&o.length){const i=u._reversePixels?_se:rA;if(n){if(s._sharedOptions){const m=o[0],g=typeof m.getRange=="function"&&m.getRange(e);if(g){const C=i(o,e,r-g),B=i(o,e,r+g);return{lo:C.lo,hi:B.hi}}}}else return i(o,e,r)}return{lo:0,hi:o.length-1}}function sb(t,e,r,n,s){const o=t.getSortedVisibleDatasetMetas(),c=r[e];for(let u=0,i=o.length;u<i;++u){const{index:m,data:g}=o[u],{lo:C,hi:B}=Zoe(o[u],e,c,s);for(let S=C;S<=B;++S){const P=g[S];P.skip||n(P,m,S)}}}function Joe(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,s){const o=e?Math.abs(n.x-s.x):0,c=r?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function DE(t,e,r,n,s){const o=[];return!s&&!t.isPointInArea(e)||sb(t,r,e,function(u,i,m){!s&&!nA(u,t.chartArea,0)||u.inRange(e.x,e.y,n)&&o.push({element:u,datasetIndex:i,index:m})},!0),o}function eae(t,e,r,n){let s=[];function o(c,u,i){const{startAngle:m,endAngle:g}=c.getProps(["startAngle","endAngle"],n),{angle:C}=o4(c,{x:e.x,y:e.y});B_(C,m,g)&&s.push({element:c,datasetIndex:u,index:i})}return sb(t,r,e,o),s}function tae(t,e,r,n,s,o){let c=[];const u=Joe(r);let i=Number.POSITIVE_INFINITY;function m(g,C,B){const S=g.inRange(e.x,e.y,s);if(n&&!S)return;const P=g.getCenterPoint(s);if(!(!!o||t.isPointInArea(P))&&!S)return;const D=u(e,P);D<i?(c=[{element:g,datasetIndex:C,index:B}],i=D):D===i&&c.push({element:g,datasetIndex:C,index:B})}return sb(t,r,e,m),c}function OE(t,e,r,n,s,o){return!o&&!t.isPointInArea(e)?[]:r==="r"&&!n?eae(t,e,r,s):tae(t,e,r,n,s,o)}function RO(t,e,r,n,s){const o=[],c=r==="x"?"inXRange":"inYRange";let u=!1;return sb(t,r,e,(i,m,g)=>{i[c]&&i[c](e[r],s)&&(o.push({element:i,datasetIndex:m,index:g}),u=u||i.inRange(e.x,e.y,s))}),n&&!u?[]:o}var rae={evaluateInteractionItems:sb,modes:{index(t,e,r,n){const s=Pg(e,t),o=r.axis||"x",c=r.includeInvisible||!1,u=r.intersect?DE(t,s,o,n,c):OE(t,s,o,!1,n,c),i=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const g=u[0].index,C=m.data[g];C&&!C.skip&&i.push({element:C,datasetIndex:m.index,index:g})}),i):[]},dataset(t,e,r,n){const s=Pg(e,t),o=r.axis||"xy",c=r.includeInvisible||!1;let u=r.intersect?DE(t,s,o,n,c):OE(t,s,o,!1,n,c);if(u.length>0){const i=u[0].datasetIndex,m=t.getDatasetMeta(i).data;u=[];for(let g=0;g<m.length;++g)u.push({element:m[g],datasetIndex:i,index:g})}return u},point(t,e,r,n){const s=Pg(e,t),o=r.axis||"xy",c=r.includeInvisible||!1;return DE(t,s,o,n,c)},nearest(t,e,r,n){const s=Pg(e,t),o=r.axis||"xy",c=r.includeInvisible||!1;return OE(t,s,o,r.intersect,n,c)},x(t,e,r,n){const s=Pg(e,t);return RO(t,s,"x",r.intersect,n)},y(t,e,r,n){const s=Pg(e,t);return RO(t,s,"y",r.intersect,n)}}};const bV=["left","top","right","bottom"];function Ov(t,e){return t.filter(r=>r.pos===e)}function UO(t,e){return t.filter(r=>bV.indexOf(r.pos)===-1&&r.box.axis===e)}function Rv(t,e){return t.sort((r,n)=>{const s=e?n:r,o=e?r:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function nae(t){const e=[];let r,n,s,o,c,u;for(r=0,n=(t||[]).length;r<n;++r)s=t[r],{position:o,options:{stack:c,stackWeight:u=1}}=s,e.push({index:r,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:c&&o+c,stackWeight:u});return e}function iae(t){const e={};for(const r of t){const{stack:n,pos:s,stackWeight:o}=r;if(!n||!bV.includes(s))continue;const c=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return e}function sae(t,e){const r=iae(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let o,c,u;for(o=0,c=t.length;o<c;++o){u=t[o];const{fullSize:i}=u.box,m=r[u.stack],g=m&&u.stackWeight/m.weight;u.horizontal?(u.width=g?g*n:i&&e.availableWidth,u.height=s):(u.width=n,u.height=g?g*s:i&&e.availableHeight)}return r}function oae(t){const e=nae(t),r=Rv(e.filter(m=>m.box.fullSize),!0),n=Rv(Ov(e,"left"),!0),s=Rv(Ov(e,"right")),o=Rv(Ov(e,"top"),!0),c=Rv(Ov(e,"bottom")),u=UO(e,"x"),i=UO(e,"y");return{fullSize:r,leftAndTop:n.concat(o),rightAndBottom:s.concat(i).concat(c).concat(u),chartArea:Ov(e,"chartArea"),vertical:n.concat(s).concat(i),horizontal:o.concat(c).concat(u)}}function zO(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function wV(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function aae(t,e,r,n){const{pos:s,box:o}=r,c=t.maxPadding;if(!Us(s)){r.size&&(t[s]-=r.size);const C=n[r.stack]||{size:0,count:1};C.size=Math.max(C.size,r.horizontal?o.height:o.width),r.size=C.size/C.count,t[s]+=r.size}o.getPadding&&wV(c,o.getPadding());const u=Math.max(0,e.outerWidth-zO(c,t,"left","right")),i=Math.max(0,e.outerHeight-zO(c,t,"top","bottom")),m=u!==t.w,g=i!==t.h;return t.w=u,t.h=i,r.horizontal?{same:m,other:g}:{same:g,other:m}}function lae(t){const e=t.maxPadding;function r(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function cae(t,e){const r=e.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(c=>{o[c]=Math.max(e[c],r[c])}),o}return n(t?["left","right"]:["top","bottom"])}function ox(t,e,r,n){const s=[];let o,c,u,i,m,g;for(o=0,c=t.length,m=0;o<c;++o){u=t[o],i=u.box,i.update(u.width||e.w,u.height||e.h,cae(u.horizontal,e));const{same:C,other:B}=aae(e,r,u,n);m|=C&&s.length,g=g||B,i.fullSize||s.push(u)}return m&&ox(s,e,r,n)||g}function Ww(t,e,r,n,s){t.top=r,t.left=e,t.right=e+n,t.bottom=r+s,t.width=n,t.height=s}function QO(t,e,r,n){const s=r.padding;let{x:o,y:c}=e;for(const u of t){const i=u.box,m=n[u.stack]||{count:1,placed:0,weight:1},g=u.stackWeight/m.weight||1;if(u.horizontal){const C=e.w*g,B=m.size||i.height;Kd(m.start)&&(c=m.start),i.fullSize?Ww(i,s.left,c,r.outerWidth-s.right-s.left,B):Ww(i,e.left+m.placed,c,C,B),m.start=c,m.placed+=C,c=i.bottom}else{const C=e.h*g,B=m.size||i.width;Kd(m.start)&&(o=m.start),i.fullSize?Ww(i,o,s.top,B,r.outerHeight-s.bottom-s.top):Ww(i,o,e.top+m.placed,B,C),m.start=o,m.placed+=C,o=i.right}}e.x=o,e.y=c}var Zu={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const s=Ic(t.options.layout.padding),o=Math.max(e-s.width,0),c=Math.max(r-s.height,0),u=oae(t.boxes),i=u.vertical,m=u.horizontal;_a(t.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const g=i.reduce((j,D)=>D.box.options&&D.box.options.display===!1?j:j+1,0)||1,C=Object.freeze({outerWidth:e,outerHeight:r,padding:s,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/g,hBoxMaxHeight:c/2}),B=Object.assign({},s);wV(B,Ic(n));const S=Object.assign({maxPadding:B,w:o,h:c,x:s.left,y:s.top},s),P=sae(i.concat(m),C);ox(u.fullSize,S,C,P),ox(i,S,C,P),ox(m,S,C,P)&&ox(i,S,C,P),lae(S),QO(u.leftAndTop,S,C,P),S.x+=S.w,S.y+=S.h,QO(u.rightAndBottom,S,C,P),t.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},_a(u.chartArea,j=>{const D=j.box;Object.assign(D,t.chartArea),D.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class CV{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,s){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,s?Math.floor(r/s):n)}}isAttached(e){return!0}updateConfig(e){}}class uae extends CV{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const u5="$chartjs",dae={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},HO=t=>t===null||t==="";function hae(t,e){const r=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[u5]={initial:{height:n,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",HO(s)){const o=BO(t,"width");o!==void 0&&(t.width=o)}if(HO(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=BO(t,"height");o!==void 0&&(t.height=o)}return t}const SV=poe?{passive:!0}:!1;function fae(t,e,r){t&&t.addEventListener(e,r,SV)}function pae(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,SV)}function Aae(t,e){const r=dae[t.type]||t.type,{x:n,y:s}=Pg(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function u4(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function mae(t,e,r){const n=t.canvas,s=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||u4(u.addedNodes,n),c=c&&!u4(u.removedNodes,n);c&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}function gae(t,e,r){const n=t.canvas,s=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||u4(u.removedNodes,n),c=c&&!u4(u.addedNodes,n);c&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}const E_=new Map;let VO=0;function BV(){const t=window.devicePixelRatio;t!==VO&&(VO=t,E_.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function yae(t,e){E_.size||window.addEventListener("resize",BV),E_.set(t,e)}function vae(t){E_.delete(t),E_.size||window.removeEventListener("resize",BV)}function xae(t,e,r){const n=t.canvas,s=n&&SN(n);if(!s)return;const o=nV((u,i)=>{const m=s.clientWidth;r(u,i),m<s.clientWidth&&r()},window),c=new ResizeObserver(u=>{const i=u[0],m=i.contentRect.width,g=i.contentRect.height;m===0&&g===0||o(m,g)});return c.observe(s),yae(t,o),c}function RE(t,e,r){r&&r.disconnect(),e==="resize"&&vae(t)}function _ae(t,e,r){const n=t.canvas,s=nV(o=>{t.ctx!==null&&r(Aae(o,t))},t);return fae(n,e,s),s}class bae extends CV{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(hae(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[u5])return!1;const n=r[u5].initial;["height","width"].forEach(o=>{const c=n[o];Go(c)?r.removeAttribute(o):r.setAttribute(o,c)});const s=n.style||{};return Object.keys(s).forEach(o=>{r.style[o]=s[o]}),r.width=r.width,delete r[u5],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const s=e.$proxies||(e.$proxies={}),c={attach:mae,detach:gae,resize:xae}[r]||_ae;s[r]=c(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),s=n[r];if(!s)return;({attach:RE,detach:RE,resize:RE}[r]||pae)(e,r,s),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,s){return foe(e,r,n,s)}isAttached(e){const r=e&&SN(e);return!!(r&&r.isConnected)}}function wae(t){return!CN()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uae:bae}var $2;let rd=($2=class{constructor(){ni(this,"x");ni(this,"y");ni(this,"active",!1);ni(this,"options");ni(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Vm(this.x)&&Vm(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const s={};return e.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},ni($2,"defaults",{}),ni($2,"defaultRoutes"),$2);function Cae(t,e){const r=t.options.ticks,n=Sae(t),s=Math.min(r.maxTicksLimit||n,n),o=r.major.enabled?Eae(e):[],c=o.length,u=o[0],i=o[c-1],m=[];if(c>s)return Tae(e,m,o,c/s),m;const g=Bae(o,e,s);if(c>0){let C,B;const S=c>1?Math.round((i-u)/(c-1)):null;for(Kw(e,m,g,Go(S)?0:u-S,u),C=0,B=c-1;C<B;C++)Kw(e,m,g,o[C],o[C+1]);return Kw(e,m,g,i,Go(S)?e.length:i+S),m}return Kw(e,m,g),m}function Sae(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),s=t._maxLength/r;return Math.floor(Math.min(n,s))}function Bae(t,e,r){const n=Lae(t),s=e.length/r;if(!n)return Math.max(s,1);const o=gse(n);for(let c=0,u=o.length-1;c<u;c++){const i=o[c];if(i>s)return i}return Math.max(s,1)}function Eae(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function Tae(t,e,r,n){let s=0,o=r[0],c;for(n=Math.ceil(n),c=0;c<t.length;c++)c===o&&(e.push(t[c]),s++,o=r[s*n])}function Kw(t,e,r,n,s){const o=ys(n,0),c=Math.min(ys(s,t.length),t.length);let u=0,i,m,g;for(r=Math.ceil(r),s&&(i=s-n,r=i/Math.floor(i/r)),g=o;g<0;)u++,g=Math.round(o+u*r);for(m=Math.max(o,0);m<c;m++)m===g&&(e.push(t[m]),u++,g=Math.round(o+u*r))}function Lae(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const Iae=t=>t==="left"?"right":t==="right"?"left":t,GO=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,$O=(t,e)=>Math.min(e||t,t);function qO(t,e){const r=[],n=t.length/e,s=t.length;let o=0;for(;o<s;o+=n)r.push(t[Math.floor(o)]);return r}function Nae(t,e,r){const n=t.ticks.length,s=Math.min(e,n-1),o=t._startPixel,c=t._endPixel,u=1e-6;let i=t.getPixelForTick(s),m;if(!(r&&(n===1?m=Math.max(i-o,c-i):e===0?m=(t.getPixelForTick(1)-i)/2:m=(i-t.getPixelForTick(s-1))/2,i+=s<e?m:-m,i<o-u||i>c+u)))return i}function Fae(t,e){_a(t,r=>{const n=r.gc,s=n.length/2;let o;if(s>e){for(o=0;o<s;++o)delete r.data[n[o]];n.splice(0,s)}})}function Uv(t){return t.drawTicks?t.tickLength:0}function WO(t,e){if(!t.display)return 0;const r=rc(t.font,e),n=Ic(t.padding);return(da(t.text)?t.text.length:1)*r.lineHeight+n.height}function Pae(t,e){return ag(t,{scale:e,type:"scale"})}function jae(t,e,r){return ag(t,{tick:r,index:e,type:"tick"})}function Mae(t,e,r){let n=yN(t);return(r&&e!=="right"||!r&&e==="right")&&(n=Iae(n)),n}function kae(t,e,r,n){const{top:s,left:o,bottom:c,right:u,chart:i}=t,{chartArea:m,scales:g}=i;let C=0,B,S,P;const j=c-s,D=u-o;if(t.isHorizontal()){if(S=qu(n,o,u),Us(r)){const F=Object.keys(r)[0],R=r[F];P=g[F].getPixelForValue(R)+j-e}else r==="center"?P=(m.bottom+m.top)/2+j-e:P=GO(t,r,e);B=u-o}else{if(Us(r)){const F=Object.keys(r)[0],R=r[F];S=g[F].getPixelForValue(R)-D+e}else r==="center"?S=(m.left+m.right)/2-D+e:S=GO(t,r,e);P=qu(n,c,s),C=r==="left"?-ml:ml}return{titleX:S,titleY:P,maxWidth:B,rotation:C}}class E0 extends rd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:s}=this;return e=lh(e,Number.POSITIVE_INFINITY),r=lh(r,Number.NEGATIVE_INFINITY),n=lh(n,Number.POSITIVE_INFINITY),s=lh(s,Number.NEGATIVE_INFINITY),{min:lh(e,n),max:lh(r,s),minDefined:Cl(e),maxDefined:Cl(r)}}getMinMax(e){let{min:r,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),c;if(s&&o)return{min:r,max:n};const u=this.getMatchingVisibleMetas();for(let i=0,m=u.length;i<m;++i)c=u[i].controller.getMinMax(this,e),s||(r=Math.min(r,c.min)),o||(n=Math.max(n,c.max));return r=o&&r>n?n:r,n=s&&r>n?r:n,{min:lh(r,lh(n,r)),max:lh(n,lh(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xa(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:s,grace:o,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Gse(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const i=u<this.ticks.length;this._convertTicksToLabels(i?qO(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=Cae(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),i&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xa(this.options.afterUpdate,[this])}beforeSetDimensions(){xa(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xa(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),xa(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xa(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n],o.label=xa(r.callback,[o.value,n,e],this)}afterTickToLabelConversion(){xa(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xa(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=$O(this.ticks.length,e.ticks.maxTicksLimit),s=r.minRotation||0,o=r.maxRotation;let c=s,u,i,m;if(!this._isVisible()||!r.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const g=this._getLabelSizes(),C=g.widest.width,B=g.highest.height,S=ru(this.chart.width-C,0,this.maxWidth);u=e.offset?this.maxWidth/n:S/(n-1),C+6>u&&(u=S/(n-(e.offset?.5:1)),i=this.maxHeight-Uv(e.grid)-r.padding-WO(e.title,this.chart.options.font),m=Math.sqrt(C*C+B*B),c=pC(Math.min(Math.asin(ru((g.highest.height+6)/u,-1,1)),Math.asin(ru(i/m,-1,1))-Math.asin(ru(B/m,-1,1)))),c=Math.max(s,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){xa(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xa(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:s,grid:o}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const i=WO(s,r.options.font);if(u?(e.width=this.maxWidth,e.height=Uv(o)+i):(e.height=this.maxHeight,e.width=Uv(o)+i),n.display&&this.ticks.length){const{first:m,last:g,widest:C,highest:B}=this._getLabelSizes(),S=n.padding*2,P=Lc(this.labelRotation),j=Math.cos(P),D=Math.sin(P);if(u){const F=n.mirror?0:D*C.width+j*B.height;e.height=Math.min(this.maxHeight,e.height+F+S)}else{const F=n.mirror?0:j*C.width+D*B.height;e.width=Math.min(this.maxWidth,e.width+F+S)}this._calculatePadding(m,g,D,j)}}this._handleMargins(),u?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,s){const{ticks:{align:o,padding:c},position:u}=this.options,i=this.labelRotation!==0,m=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,C=this.right-this.getPixelForTick(this.ticks.length-1);let B=0,S=0;i?m?(B=s*e.width,S=n*r.height):(B=n*e.height,S=s*r.width):o==="start"?S=r.width:o==="end"?B=e.width:o!=="inner"&&(B=e.width/2,S=r.width/2),this.paddingLeft=Math.max((B-g+c)*this.width/(this.width-g),0),this.paddingRight=Math.max((S-C+c)*this.width/(this.width-C),0)}else{let g=r.height/2,C=e.height/2;o==="start"?(g=0,C=e.height):o==="end"&&(g=r.height,C=0),this.paddingTop=g+c,this.paddingBottom=C+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xa(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Go(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=qO(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:s,_longestTextCache:o}=this,c=[],u=[],i=Math.floor(r/$O(r,n));let m=0,g=0,C,B,S,P,j,D,F,R,V,Y,te;for(C=0;C<r;C+=i){if(P=e[C].label,j=this._resolveTickFontOptions(C),s.font=D=j.string,F=o[D]=o[D]||{data:{},gc:[]},R=j.lineHeight,V=Y=0,!Go(P)&&!da(P))V=a4(s,F.data,F.gc,V,P),Y=R;else if(da(P))for(B=0,S=P.length;B<S;++B)te=P[B],!Go(te)&&!da(te)&&(V=a4(s,F.data,F.gc,V,te),Y+=R);c.push(V),u.push(Y),m=Math.max(V,m),g=Math.max(Y,g)}Fae(o,r);const se=c.indexOf(m),oe=u.indexOf(g),K=de=>({width:c[de]||0,height:u[de]||0});return{first:K(0),last:K(r-1),widest:K(se),highest:K(oe),widths:c,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return xse(this._alignToPixels?wg(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=jae(this.getContext(),e,n))}return this.$context||(this.$context=Pae(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Lc(this.labelRotation),n=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),o=this._getLabelSizes(),c=e.autoSkipPadding||0,u=o?o.widest.width+c:0,i=o?o.highest.height+c:0;return this.isHorizontal()?i*n>u*s?u/n:i/s:i*s<u*n?i/n:u/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,s=this.options,{grid:o,position:c,border:u}=s,i=o.offset,m=this.isHorizontal(),C=this.ticks.length+(i?1:0),B=Uv(o),S=[],P=u.setContext(this.getContext()),j=P.display?P.width:0,D=j/2,F=function(Fe){return wg(n,Fe,j)};let R,V,Y,te,se,oe,K,de,we,J,Z,Ie;if(c==="top")R=F(this.bottom),oe=this.bottom-B,de=R-D,J=F(e.top)+D,Ie=e.bottom;else if(c==="bottom")R=F(this.top),J=e.top,Ie=F(e.bottom)-D,oe=R+D,de=this.top+B;else if(c==="left")R=F(this.right),se=this.right-B,K=R-D,we=F(e.left)+D,Z=e.right;else if(c==="right")R=F(this.left),we=e.left,Z=F(e.right)-D,se=R+D,K=this.left+B;else if(r==="x"){if(c==="center")R=F((e.top+e.bottom)/2+.5);else if(Us(c)){const Fe=Object.keys(c)[0],ve=c[Fe];R=F(this.chart.scales[Fe].getPixelForValue(ve))}J=e.top,Ie=e.bottom,oe=R+D,de=oe+B}else if(r==="y"){if(c==="center")R=F((e.left+e.right)/2);else if(Us(c)){const Fe=Object.keys(c)[0],ve=c[Fe];R=F(this.chart.scales[Fe].getPixelForValue(ve))}se=R-D,K=se-B,we=e.left,Z=e.right}const be=ys(s.ticks.maxTicksLimit,C),He=Math.max(1,Math.ceil(C/be));for(V=0;V<C;V+=He){const Fe=this.getContext(V),ve=o.setContext(Fe),_e=u.setContext(Fe),ze=ve.lineWidth,Ne=ve.color,st=_e.dash||[],ie=_e.dashOffset,le=ve.tickWidth,pe=ve.tickColor,fe=ve.tickBorderDash||[],Qe=ve.tickBorderDashOffset;Y=Nae(this,V,i),Y!==void 0&&(te=wg(n,Y,ze),m?se=K=we=Z=te:oe=de=J=Ie=te,S.push({tx1:se,ty1:oe,tx2:K,ty2:de,x1:we,y1:J,x2:Z,y2:Ie,width:ze,color:Ne,borderDash:st,borderDashOffset:ie,tickWidth:le,tickColor:pe,tickBorderDash:fe,tickBorderDashOffset:Qe}))}return this._ticksLength=C,this._borderValue=R,S}_computeLabelItems(e){const r=this.axis,n=this.options,{position:s,ticks:o}=n,c=this.isHorizontal(),u=this.ticks,{align:i,crossAlign:m,padding:g,mirror:C}=o,B=Uv(n.grid),S=B+g,P=C?-g:S,j=-Lc(this.labelRotation),D=[];let F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie="middle";if(s==="top")se=this.bottom-P,oe=this._getXAxisLabelAlignment();else if(s==="bottom")se=this.top+P,oe=this._getXAxisLabelAlignment();else if(s==="left"){const He=this._getYAxisLabelAlignment(B);oe=He.textAlign,te=He.x}else if(s==="right"){const He=this._getYAxisLabelAlignment(B);oe=He.textAlign,te=He.x}else if(r==="x"){if(s==="center")se=(e.top+e.bottom)/2+S;else if(Us(s)){const He=Object.keys(s)[0],Fe=s[He];se=this.chart.scales[He].getPixelForValue(Fe)+S}oe=this._getXAxisLabelAlignment()}else if(r==="y"){if(s==="center")te=(e.left+e.right)/2-S;else if(Us(s)){const He=Object.keys(s)[0],Fe=s[He];te=this.chart.scales[He].getPixelForValue(Fe)}oe=this._getYAxisLabelAlignment(B).textAlign}r==="y"&&(i==="start"?Ie="top":i==="end"&&(Ie="bottom"));const be=this._getLabelSizes();for(F=0,R=u.length;F<R;++F){V=u[F],Y=V.label;const He=o.setContext(this.getContext(F));K=this.getPixelForTick(F)+o.labelOffset,de=this._resolveTickFontOptions(F),we=de.lineHeight,J=da(Y)?Y.length:1;const Fe=J/2,ve=He.color,_e=He.textStrokeColor,ze=He.textStrokeWidth;let Ne=oe;c?(te=K,oe==="inner"&&(F===R-1?Ne=this.options.reverse?"left":"right":F===0?Ne=this.options.reverse?"right":"left":Ne="center"),s==="top"?m==="near"||j!==0?Z=-J*we+we/2:m==="center"?Z=-be.highest.height/2-Fe*we+we:Z=-be.highest.height+we/2:m==="near"||j!==0?Z=we/2:m==="center"?Z=be.highest.height/2-Fe*we:Z=be.highest.height-J*we,C&&(Z*=-1),j!==0&&!He.showLabelBackdrop&&(te+=we/2*Math.sin(j))):(se=K,Z=(1-J)*we/2);let st;if(He.showLabelBackdrop){const ie=Ic(He.backdropPadding),le=be.heights[F],pe=be.widths[F];let fe=Z-ie.top,Qe=0-ie.left;switch(Ie){case"middle":fe-=le/2;break;case"bottom":fe-=le;break}switch(oe){case"center":Qe-=pe/2;break;case"right":Qe-=pe;break;case"inner":F===R-1?Qe-=pe:F>0&&(Qe-=pe/2);break}st={left:Qe,top:fe,width:pe+ie.width,height:le+ie.height,color:He.backdropColor}}D.push({label:Y,font:de,textOffset:Z,options:{rotation:j,color:ve,strokeColor:_e,strokeWidth:ze,textAlign:Ne,textBaseline:Ie,translation:[te,se],backdrop:st}})}return D}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Lc(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,c=this._getLabelSizes(),u=e+o,i=c.widest.width;let m,g;return r==="left"?s?(g=this.right+o,n==="near"?m="left":n==="center"?(m="center",g+=i/2):(m="right",g+=i)):(g=this.right-u,n==="near"?m="right":n==="center"?(m="center",g-=i/2):(m="left",g=this.left)):r==="right"?s?(g=this.left+o,n==="near"?m="right":n==="center"?(m="center",g-=i/2):(m="left",g-=i)):(g=this.left+u,n==="near"?m="left":n==="center"?(m="center",g+=i/2):(m="right",g=this.right)):m="right",{textAlign:m,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:s,width:o,height:c}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,s,o,c),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,c;const u=(i,m,g)=>{!g.width||!g.color||(n.save(),n.lineWidth=g.width,n.strokeStyle=g.color,n.setLineDash(g.borderDash||[]),n.lineDashOffset=g.borderDashOffset,n.beginPath(),n.moveTo(i.x,i.y),n.lineTo(m.x,m.y),n.stroke(),n.restore())};if(r.display)for(o=0,c=s.length;o<c;++o){const i=s[o];r.drawOnChartArea&&u({x:i.x1,y:i.y1},{x:i.x2,y:i.y2},i),r.drawTicks&&u({x:i.tx1,y:i.ty1},{x:i.tx2,y:i.ty2},{color:i.tickColor,width:i.tickWidth,borderDash:i.tickBorderDash,borderDashOffset:i.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),c=n.display?o.width:0;if(!c)return;const u=s.setContext(this.getContext(0)).lineWidth,i=this._borderValue;let m,g,C,B;this.isHorizontal()?(m=wg(e,this.left,c)-c/2,g=wg(e,this.right,u)+u/2,C=B=i):(C=wg(e,this.top,c)-c/2,B=wg(e,this.bottom,u)+u/2,m=g=i),r.save(),r.lineWidth=o.width,r.strokeStyle=o.color,r.beginPath(),r.moveTo(m,C),r.lineTo(g,B),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&nb(n,s);const o=this.getLabelItems(e);for(const c of o){const u=c.options,i=c.font,m=c.label,g=c.textOffset;x0(n,m,0,g,i,u)}s&&ib(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:s}}=this;if(!n.display)return;const o=rc(n.font),c=Ic(n.padding),u=n.align;let i=o.lineHeight/2;r==="bottom"||r==="center"||Us(r)?(i+=c.bottom,da(n.text)&&(i+=o.lineHeight*(n.text.length-1))):i+=c.top;const{titleX:m,titleY:g,maxWidth:C,rotation:B}=kae(this,i,r,u);x0(e,n.text,0,0,o,{color:n.color,maxWidth:C,rotation:B,textAlign:Mae(u,r,s),textBaseline:"middle",translation:[m,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=ys(e.grid&&e.grid.z,-1),s=ys(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==E0.prototype.draw?[{z:r,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:r,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,c;for(o=0,c=r.length;o<c;++o){const u=r[o];u[n]===this.id&&(!e||u.type===e)&&s.push(u)}return s}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return rc(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Xw{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;Rae(r)&&(n=this.register(r));const s=this.items,o=e.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,Dae(e,c,n),this.override&&gl.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,s=this.scope;n in r&&delete r[n],s&&n in gl[s]&&(delete gl[s][n],this.override&&delete v0[n])}}function Dae(t,e,r){const n=S_(Object.create(null),[r?gl.get(r):{},gl.get(e),t.defaults]);gl.set(e,n),t.defaultRoutes&&Oae(e,t.defaultRoutes),t.descriptors&&gl.describe(e,t.descriptors)}function Oae(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),s=n.pop(),o=[t].concat(n).join("."),c=e[r].split("."),u=c.pop(),i=c.join(".");gl.route(o,s,i,u)})}function Rae(t){return"id"in t&&"defaults"in t}class Uae{constructor(){this.controllers=new Xw(kf,"datasets",!0),this.elements=new Xw(rd,"elements"),this.plugins=new Xw(Object,"plugins"),this.scales=new Xw(E0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):_a(s,c=>{const u=n||this._getRegistryForType(c);this._exec(e,u,c)})})}_exec(e,r,n){const s=AN(e);xa(n["before"+s],[],n),r[e](n),xa(n["after"+s],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const s=r.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var hp=new Uae;class zae{constructor(){this._init=[]}notify(e,r,n,s){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=s?this._descriptors(e).filter(s):this._descriptors(e),c=this._notify(o,e,r,n);return r==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,r,n,s){s=s||{};for(const o of e){const c=o.plugin,u=c[n],i=[r,s,o.options];if(xa(u,i,c)===!1&&s.cancelable)return!1}return!0}invalidate(){Go(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,s=ys(n.options&&n.options.plugins,{}),o=Qae(n);return s===!1&&!r?[]:Vae(e,o,s,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,s=(o,c)=>o.filter(u=>!c.some(i=>u.plugin.id===i.plugin.id));this._notify(s(r,n),e,"stop"),this._notify(s(n,r),e,"start")}}function Qae(t){const e={},r=[],n=Object.keys(hp.plugins.items);for(let o=0;o<n.length;o++)r.push(hp.getPlugin(n[o]));const s=t.plugins||[];for(let o=0;o<s.length;o++){const c=s[o];r.indexOf(c)===-1&&(r.push(c),e[c.id]=!0)}return{plugins:r,localIds:e}}function Hae(t,e){return!e&&t===!1?null:t===!0?{}:t}function Vae(t,{plugins:e,localIds:r},n,s){const o=[],c=t.getContext();for(const u of e){const i=u.id,m=Hae(n[i],s);m!==null&&o.push({plugin:u,options:Gae(t.config,{plugin:u,local:r[i]},m,c)})}return o}function Gae(t,{plugin:e,local:r},n,s){const o=t.pluginScopeKeys(e),c=t.getOptionScopes(n,o);return r&&e.defaults&&c.push(e.defaults),t.createResolver(c,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function f6(t,e){const r=gl.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function $ae(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function qae(t,e){return t===e?"_index_":"_value_"}function KO(t){if(t==="x"||t==="y"||t==="r")return t}function Wae(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function p6(t,...e){if(KO(t))return t;for(const r of e){const n=r.axis||Wae(r.position)||t.length>1&&KO(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function XO(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function Kae(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return XO(t,"x",r[0])||XO(t,"y",r[0])}return{}}function Xae(t,e){const r=v0[t.type]||{scales:{}},n=e.scales||{},s=f6(t.type,e),o=Object.create(null);return Object.keys(n).forEach(c=>{const u=n[c];if(!Us(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const i=p6(c,u,Kae(c,t),gl.scales[u.type]),m=qae(i,s),g=r.scales||{};o[c]=Ix(Object.create(null),[{axis:i},u,g[i],g[m]])}),t.data.datasets.forEach(c=>{const u=c.type||t.type,i=c.indexAxis||f6(u,e),g=(v0[u]||{}).scales||{};Object.keys(g).forEach(C=>{const B=$ae(C,i),S=c[B+"AxisID"]||B;o[S]=o[S]||Object.create(null),Ix(o[S],[{axis:B},n[S],g[C]])})}),Object.keys(o).forEach(c=>{const u=o[c];Ix(u,[gl.scales[u.type],gl.scale])}),o}function EV(t){const e=t.options||(t.options={});e.plugins=ys(e.plugins,{}),e.scales=Xae(t,e)}function TV(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Yae(t){return t=t||{},t.data=TV(t.data),EV(t),t}const YO=new Map,LV=new Set;function Yw(t,e){let r=YO.get(t);return r||(r=e(),YO.set(t,r),LV.add(r)),r}const zv=(t,e,r)=>{const n=Hm(e,r);n!==void 0&&t.add(n)};class Zae{constructor(e){this._config=Yae(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=TV(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),EV(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Yw(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Yw(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Yw(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Yw(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let s=n.get(e);return(!s||r)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,r,n){const{options:s,type:o}=this,c=this._cachedScopes(e,n),u=c.get(r);if(u)return u;const i=new Set;r.forEach(g=>{e&&(i.add(e),g.forEach(C=>zv(i,e,C))),g.forEach(C=>zv(i,s,C)),g.forEach(C=>zv(i,v0[o]||{},C)),g.forEach(C=>zv(i,gl,C)),g.forEach(C=>zv(i,d6,C))});const m=Array.from(i);return m.length===0&&m.push(Object.create(null)),LV.has(r)&&c.set(r,m),m}chartOptionScopes(){const{options:e,type:r}=this;return[e,v0[r]||{},gl.datasets[r]||{},{type:r},gl,d6]}resolveNamedOptions(e,r,n,s=[""]){const o={$shared:!0},{resolver:c,subPrefixes:u}=ZO(this._resolverCache,e,s);let i=c;if(ele(c,r)){o.$shared=!1,n=Wd(n)?n():n;const m=this.createResolver(e,n,u);i=m1(c,n,m)}for(const m of r)o[m]=i[m];return o}createResolver(e,r,n=[""],s){const{resolver:o}=ZO(this._resolverCache,e,n);return Us(r)?m1(o,r,void 0,s):o}}function ZO(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=r.join();let o=n.get(s);return o||(o={resolver:_N(e,r),subPrefixes:r.filter(u=>!u.toLowerCase().includes("hover"))},n.set(s,o)),o}const Jae=t=>Us(t)&&Object.getOwnPropertyNames(t).some(e=>Wd(t[e]));function ele(t,e){const{isScriptable:r,isIndexable:n}=cV(t);for(const s of e){const o=r(s),c=n(s),u=(c||o)&&t[s];if(o&&(Wd(u)||Jae(u))||c&&da(u))return!0}return!1}var tle="4.4.6";const rle=["top","bottom","left","right","chartArea"];function JO(t,e){return t==="top"||t==="bottom"||rle.indexOf(t)===-1&&e==="x"}function e8(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function t8(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),xa(r&&r.onComplete,[t],e)}function nle(t){const e=t.chart,r=e.options.animation;xa(r&&r.onProgress,[t],e)}function IV(t){return CN()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const d5={},r8=t=>{const e=IV(t);return Object.values(d5).filter(r=>r.canvas===e).pop()};function ile(t,e,r){const n=Object.keys(t);for(const s of n){const o=+s;if(o>=e){const c=t[s];delete t[s],(r>0||o>e)&&(t[o+r]=c)}}}function sle(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}function Zw(t,e,r){return t.options.clip?t[r]:e[r]}function ole(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Zw(r,e,"left"),right:Zw(r,e,"right"),top:Zw(n,e,"top"),bottom:Zw(n,e,"bottom")}:e}var XA;let ph=(XA=class{static register(...e){hp.add(...e),n8()}static unregister(...e){hp.remove(...e),n8()}constructor(e,r){const n=this.config=new Zae(r),s=IV(e),o=r8(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||wae(s)),this.platform.updateConfig(n);const u=this.platform.acquireContext(s,c.aspectRatio),i=u&&u.canvas,m=i&&i.height,g=i&&i.width;if(this.id=cse(),this.ctx=u,this.canvas=i,this.width=g,this.height=m,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zae,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Cse(C=>this.update(C),c.resizeDelay||0),this._dataChanges=[],d5[this.id]=this,!u||!i){console.error("Failed to create chart: can't acquire context from the given item");return}qp.listen(this,"complete",t8),qp.listen(this,"progress",nle),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:s,_aspectRatio:o}=this;return Go(e)?r&&o?o:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return hp}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():SO(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bO(this.canvas,this.ctx),this}stop(){return qp.stop(this),this}resize(e,r){qp.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(s,e,r,o),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),i=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,SO(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),xa(n.onResize,[this,c],this),this.attached&&this._doResize(i)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};_a(r,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,s=Object.keys(n).reduce((c,u)=>(c[u]=!1,c),{});let o=[];r&&(o=o.concat(Object.keys(r).map(c=>{const u=r[c],i=p6(c,u),m=i==="r",g=i==="x";return{options:u,dposition:m?"chartArea":g?"bottom":"left",dtype:m?"radialLinear":g?"category":"linear"}}))),_a(o,c=>{const u=c.options,i=u.id,m=p6(i,u),g=ys(u.type,c.dtype);(u.position===void 0||JO(u.position,m)!==JO(c.dposition))&&(u.position=c.dposition),s[i]=!0;let C=null;if(i in n&&n[i].type===g)C=n[i];else{const B=hp.getScale(g);C=new B({id:i,type:g,ctx:this.ctx,chart:this}),n[C.id]=C}C.init(u,e)}),_a(s,(c,u)=>{c||delete n[u]}),_a(n,c=>{Zu.configure(this,c,c.options),Zu.addBox(this,c)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((s,o)=>s.index-o.index),n>r){for(let s=r;s<n;++s)this._destroyDatasetMeta(s);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(e8("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,s)=>{r.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=r.length;n<s;n++){const o=r[n];let c=this.getDatasetMeta(n);const u=o.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(n),c=this.getDatasetMeta(n)),c.type=u,c.indexAxis=o.indexAxis||f6(u,this.options),c.order=o.order||0,c.index=n,c.label=""+o.label,c.visible=this.isDatasetVisible(n),c.controller)c.controller.updateIndex(n),c.controller.linkScales();else{const i=hp.getController(u),{datasetElementType:m,dataElementType:g}=gl.datasets[u];Object.assign(i,{dataElementType:hp.getElement(g),datasetElementType:m&&hp.getElement(m)}),c.controller=new i(this,n),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){_a(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let m=0,g=this.data.datasets.length;m<g;m++){const{controller:C}=this.getDatasetMeta(m),B=!s&&o.indexOf(C)===-1;C.buildOrUpdateElements(B),c=Math.max(+C.getMaxOverflow(),c)}c=this._minPadding=n.layout.autoPadding?c:0,this._updateLayout(c),s||_a(o,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(e8("z","_idx"));const{_active:u,_lastEvent:i}=this;i?this._eventHandler(i,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){_a(this.scales,e=>{Zu.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!pO(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of r){const c=n==="_removeElements"?-o:o;ile(e,s,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=o=>new Set(e.filter(c=>c[0]===o).map((c,u)=>u+","+c.splice(1).join(","))),s=n(0);for(let o=1;o<r;o++)if(!pO(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zu.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],_a(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Wd(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qp.has(this)?this.attached&&!qp.running(this)&&qp.start(this):(this.draw(),t8({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let s,o;for(s=0,o=r.length;s<o;++s){const c=r[s];(!e||c.visible)&&n.push(c)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n=e._clip,s=!n.disabled,o=ole(e,this.chartArea),c={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",c)!==!1&&(s&&nb(r,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),s&&ib(r),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(e){return nA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,s){const o=rae.modes[r];return typeof o=="function"?o(this,e,n,s):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let s=n.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=ag(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const s=n?"show":"hide",o=this.getDatasetMeta(e),c=o.controller._resolveAnimations(void 0,s);Kd(r)?(o.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),c.update(o,{visible:n}),this.update(u=>u.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),qp.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),bO(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete d5[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(o,c)=>{r.addEventListener(this,o,c),e[o]=c},s=(o,c,u)=>{o.offsetX=c,o.offsetY=u,this._eventHandler(o)};_a(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(i,m)=>{r.addEventListener(this,i,m),e[i]=m},s=(i,m)=>{e[i]&&(r.removeEventListener(this,i,m),delete e[i])},o=(i,m)=>{this.canvas&&this.resize(i,m)};let c;const u=()=>{s("attach",u),this.attached=!0,this.resize(),n("resize",o),n("detach",c)};c=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",u)},r.isAttached(this.canvas)?u():c()}unbindEvents(){_a(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},_a(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const s=n?"set":"remove";let o,c,u,i;for(r==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),u=0,i=e.length;u<i;++u){c=e[u];const m=c&&this.getDatasetMeta(c.datasetIndex).controller;m&&m[s+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:o,index:c})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[c],index:c}});!r4(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const s=this.options.hover,o=(i,m)=>i.filter(g=>!m.some(C=>g.datasetIndex===C.datasetIndex&&g.index===C.index)),c=o(r,e),u=n?e:o(e,r);c.length&&this.updateHoverStyle(c,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:s=[],options:o}=this,c=r,u=this._getActiveElements(e,s,n,c),i=Ase(e),m=sle(e,this._lastEvent,n,i);n&&(this._lastEvent=null,xa(o.onHover,[e,u,this],this),i&&xa(o.onClick,[e,u,this],this));const g=!r4(u,s);return(g||r)&&(this._active=u,this._updateHoverStyles(u,s,r)),this._lastEvent=m,g}_getActiveElements(e,r,n,s){if(e.type==="mouseout")return[];if(!n)return r;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}},ni(XA,"defaults",gl),ni(XA,"instances",d5),ni(XA,"overrides",v0),ni(XA,"registry",hp),ni(XA,"version",tle),ni(XA,"getChart",r8),XA);function n8(){return _a(ph.instances,t=>t._plugins.invalidate())}function ale(t,e,r){const{startAngle:n,pixelMargin:s,x:o,y:c,outerRadius:u,innerRadius:i}=e;let m=s/u;t.beginPath(),t.arc(o,c,u,n-m,r+m),i>s?(m=s/i,t.arc(o,c,i,r+m,n-m,!0)):t.arc(o,c,s,r+ml,n-ml),t.closePath(),t.clip()}function lle(t){return xN(t,["outerStart","outerEnd","innerStart","innerEnd"])}function cle(t,e,r,n){const s=lle(t.options.borderRadius),o=(r-e)/2,c=Math.min(o,n*e/2),u=i=>{const m=(r-Math.min(o,i))*n/2;return ru(i,0,Math.min(o,m))};return{outerStart:u(s.outerStart),outerEnd:u(s.outerEnd),innerStart:ru(s.innerStart,0,c),innerEnd:ru(s.innerEnd,0,c)}}function sy(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function d4(t,e,r,n,s,o){const{x:c,y:u,startAngle:i,pixelMargin:m,innerRadius:g}=e,C=Math.max(e.outerRadius+n+r-m,0),B=g>0?g+n+r+m:0;let S=0;const P=s-i;if(n){const He=g>0?g-n:0,Fe=C>0?C-n:0,ve=(He+Fe)/2,_e=ve!==0?P*ve/(ve+n):P;S=(P-_e)/2}const j=Math.max(.001,P*C-r/Co)/C,D=(P-j)/2,F=i+D+S,R=s-D-S,{outerStart:V,outerEnd:Y,innerStart:te,innerEnd:se}=cle(e,B,C,R-F),oe=C-V,K=C-Y,de=F+V/oe,we=R-Y/K,J=B+te,Z=B+se,Ie=F+te/J,be=R-se/Z;if(t.beginPath(),o){const He=(de+we)/2;if(t.arc(c,u,C,de,He),t.arc(c,u,C,He,we),Y>0){const ze=sy(K,we,c,u);t.arc(ze.x,ze.y,Y,we,R+ml)}const Fe=sy(Z,R,c,u);if(t.lineTo(Fe.x,Fe.y),se>0){const ze=sy(Z,be,c,u);t.arc(ze.x,ze.y,se,R+ml,be+Math.PI)}const ve=(R-se/B+(F+te/B))/2;if(t.arc(c,u,B,R-se/B,ve,!0),t.arc(c,u,B,ve,F+te/B,!0),te>0){const ze=sy(J,Ie,c,u);t.arc(ze.x,ze.y,te,Ie+Math.PI,F-ml)}const _e=sy(oe,F,c,u);if(t.lineTo(_e.x,_e.y),V>0){const ze=sy(oe,de,c,u);t.arc(ze.x,ze.y,V,F-ml,de)}}else{t.moveTo(c,u);const He=Math.cos(de)*C+c,Fe=Math.sin(de)*C+u;t.lineTo(He,Fe);const ve=Math.cos(we)*C+c,_e=Math.sin(we)*C+u;t.lineTo(ve,_e)}t.closePath()}function ule(t,e,r,n,s){const{fullCircles:o,startAngle:c,circumference:u}=e;let i=e.endAngle;if(o){d4(t,e,r,n,i,s);for(let m=0;m<o;++m)t.fill();isNaN(u)||(i=c+(u%za||za))}return d4(t,e,r,n,i,s),t.fill(),i}function dle(t,e,r,n,s){const{fullCircles:o,startAngle:c,circumference:u,options:i}=e,{borderWidth:m,borderJoinStyle:g,borderDash:C,borderDashOffset:B}=i,S=i.borderAlign==="inner";if(!m)return;t.setLineDash(C||[]),t.lineDashOffset=B,S?(t.lineWidth=m*2,t.lineJoin=g||"round"):(t.lineWidth=m,t.lineJoin=g||"bevel");let P=e.endAngle;if(o){d4(t,e,r,n,P,s);for(let j=0;j<o;++j)t.stroke();isNaN(u)||(P=c+(u%za||za))}S&&ale(t,e,P),o||(d4(t,e,r,n,P,s),t.stroke())}class jy extends rd{constructor(r){super();ni(this,"circumference");ni(this,"endAngle");ni(this,"fullCircles");ni(this,"innerRadius");ni(this,"outerRadius");ni(this,"pixelMargin");ni(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,s){const o=this.getProps(["x","y"],s),{angle:c,distance:u}=o4(o,{x:r,y:n}),{startAngle:i,endAngle:m,innerRadius:g,outerRadius:C,circumference:B}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),S=(this.options.spacing+this.options.borderWidth)/2,P=ys(B,m-i),j=B_(c,i,m)&&i!==m,D=P>=za||j,F=tA(u,g+S,C+S);return D&&F}getCenterPoint(r){const{x:n,y:s,startAngle:o,endAngle:c,innerRadius:u,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:m,spacing:g}=this.options,C=(o+c)/2,B=(u+i+g+m)/2;return{x:n+Math.cos(C)*B,y:s+Math.sin(C)*B}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:s}=this,o=(n.offset||0)/4,c=(n.spacing||0)/2,u=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>za?Math.floor(s/za):0,s===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const i=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(i)*o,Math.sin(i)*o);const m=1-Math.sin(Math.min(Co,s||0)),g=o*m;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,ule(r,this,g,c,u),dle(r,this,g,c,u),r.restore()}}ni(jy,"id","arc"),ni(jy,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ni(jy,"defaultRoutes",{backgroundColor:"backgroundColor"}),ni(jy,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function NV(t,e,r=e){t.lineCap=ys(r.borderCapStyle,e.borderCapStyle),t.setLineDash(ys(r.borderDash,e.borderDash)),t.lineDashOffset=ys(r.borderDashOffset,e.borderDashOffset),t.lineJoin=ys(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ys(r.borderWidth,e.borderWidth),t.strokeStyle=ys(r.borderColor,e.borderColor)}function hle(t,e,r){t.lineTo(r.x,r.y)}function fle(t){return t.stepped?kse:t.tension||t.cubicInterpolationMode==="monotone"?Dse:hle}function FV(t,e,r={}){const n=t.length,{start:s=0,end:o=n-1}=r,{start:c,end:u}=e,i=Math.max(s,c),m=Math.min(o,u),g=s<c&&o<c||s>u&&o>u;return{count:n,start:i,loop:e.loop,ilen:m<i&&!g?n+m-i:m-i}}function ple(t,e,r,n){const{points:s,options:o}=e,{count:c,start:u,loop:i,ilen:m}=FV(s,r,n),g=fle(o);let{move:C=!0,reverse:B}=n||{},S,P,j;for(S=0;S<=m;++S)P=s[(u+(B?m-S:S))%c],!P.skip&&(C?(t.moveTo(P.x,P.y),C=!1):g(t,j,P,B,o.stepped),j=P);return i&&(P=s[(u+(B?m:0))%c],g(t,j,P,B,o.stepped)),!!i}function Ale(t,e,r,n){const s=e.points,{count:o,start:c,ilen:u}=FV(s,r,n),{move:i=!0,reverse:m}=n||{};let g=0,C=0,B,S,P,j,D,F;const R=Y=>(c+(m?u-Y:Y))%o,V=()=>{j!==D&&(t.lineTo(g,D),t.lineTo(g,j),t.lineTo(g,F))};for(i&&(S=s[R(0)],t.moveTo(S.x,S.y)),B=0;B<=u;++B){if(S=s[R(B)],S.skip)continue;const Y=S.x,te=S.y,se=Y|0;se===P?(te<j?j=te:te>D&&(D=te),g=(C*g+Y)/++C):(V(),t.lineTo(Y,te),P=se,C=0,j=D=te),F=te}V()}function A6(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?Ale:ple}function mle(t){return t.stepped?Aoe:t.tension||t.cubicInterpolationMode==="monotone"?moe:jg}function gle(t,e,r,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,r,n)&&s.closePath()),NV(t,e.options),t.stroke(s)}function yle(t,e,r,n){const{segments:s,options:o}=e,c=A6(e);for(const u of s)NV(t,o,u.style),t.beginPath(),c(t,e,u,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const vle=typeof Path2D=="function";function xle(t,e,r,n){vle&&!e.options.segment?gle(t,e,r,n):yle(t,e,r,n)}class Qd extends rd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;aoe(this._points,n,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=boe(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,s=e[r],o=this.points,c=vV(this,{property:r,start:s,end:s});if(!c.length)return;const u=[],i=mle(n);let m,g;for(m=0,g=c.length;m<g;++m){const{start:C,end:B}=c[m],S=o[C],P=o[B];if(S===P){u.push(S);continue}const j=Math.abs((s-S[r])/(P[r]-S[r])),D=i(S,P,j,n.stepped);D[r]=e[r],u.push(D)}return u.length===1?u[0]:u}pathSegment(e,r,n){return A6(this)(e,this,r,n)}path(e,r,n){const s=this.segments,o=A6(this);let c=this._loop;r=r||0,n=n||this.points.length-r;for(const u of s)c&=o(e,this,u,{start:r,end:r+n-1});return!!c}draw(e,r,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),xle(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ni(Qd,"id","line"),ni(Qd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ni(Qd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ni(Qd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function i8(t,e,r,n){const s=t.options,{[r]:o}=t.getProps([r],n);return Math.abs(e-o)<s.radius+s.hitRadius}class xp extends rd{constructor(r){super();ni(this,"parsed");ni(this,"skip");ni(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,s){const o=this.options,{x:c,y:u}=this.getProps(["x","y"],s);return Math.pow(r-c,2)+Math.pow(n-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(r,n){return i8(this,r,"x",n)}inYRange(r,n){return i8(this,r,"y",n)}getCenterPoint(r){const{x:n,y:s}=this.getProps(["x","y"],r);return{x:n,y:s}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const s=n&&r.borderWidth||0;return(n+s)*2}draw(r,n){const s=this.options;this.skip||s.radius<.1||!nA(this,n,this.size(s)/2)||(r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.fillStyle=s.backgroundColor,h6(r,s,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}ni(xp,"id","point"),ni(xp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ni(xp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function PV(t,e){const{x:r,y:n,base:s,width:o,height:c}=t.getProps(["x","y","base","width","height"],e);let u,i,m,g,C;return t.horizontal?(C=c/2,u=Math.min(r,s),i=Math.max(r,s),m=n-C,g=n+C):(C=o/2,u=r-C,i=r+C,m=Math.min(n,s),g=Math.max(n,s)),{left:u,top:m,right:i,bottom:g}}function pm(t,e,r,n){return t?0:ru(e,r,n)}function _le(t,e,r){const n=t.options.borderWidth,s=t.borderSkipped,o=lV(n);return{t:pm(s.top,o.top,0,r),r:pm(s.right,o.right,0,e),b:pm(s.bottom,o.bottom,0,r),l:pm(s.left,o.left,0,e)}}function ble(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=Mm(s),c=Math.min(e,r),u=t.borderSkipped,i=n||Us(s);return{topLeft:pm(!i||u.top||u.left,o.topLeft,0,c),topRight:pm(!i||u.top||u.right,o.topRight,0,c),bottomLeft:pm(!i||u.bottom||u.left,o.bottomLeft,0,c),bottomRight:pm(!i||u.bottom||u.right,o.bottomRight,0,c)}}function wle(t){const e=PV(t),r=e.right-e.left,n=e.bottom-e.top,s=_le(t,r/2,n/2),o=ble(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:r-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function UE(t,e,r,n){const s=e===null,o=r===null,u=t&&!(s&&o)&&PV(t,n);return u&&(s||tA(e,u.left,u.right))&&(o||tA(r,u.top,u.bottom))}function Cle(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Sle(t,e){t.rect(e.x,e.y,e.w,e.h)}function zE(t,e,r={}){const n=t.x!==r.x?-e:0,s=t.y!==r.y?-e:0,o=(t.x+t.w!==r.x+r.w?e:0)-n,c=(t.y+t.h!==r.y+r.h?e:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+o,h:t.h+c,radius:t.radius}}class Dx extends rd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:c}=wle(this),u=Cle(c.radius)?A1:Sle;e.save(),(c.w!==o.w||c.h!==o.h)&&(e.beginPath(),u(e,zE(c,r,o)),e.clip(),u(e,zE(o,-r,c)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),u(e,zE(o,r)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,r,n){return UE(this,e,r,n)}inXRange(e,r){return UE(this,e,null,r)}inYRange(e,r){return UE(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(r+s)/2:r,y:o?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ni(Dx,"id","bar"),ni(Dx,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ni(Dx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Ble=Object.freeze({__proto__:null,ArcElement:jy,BarElement:Dx,LineElement:Qd,PointElement:xp});const m6=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],s8=m6.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function jV(t){return m6[t%m6.length]}function MV(t){return s8[t%s8.length]}function Ele(t,e){return t.borderColor=jV(e),t.backgroundColor=MV(e),++e}function Tle(t,e){return t.backgroundColor=t.data.map(()=>jV(e++)),e}function Lle(t,e){return t.backgroundColor=t.data.map(()=>MV(e++)),e}function Ile(t){let e=0;return(r,n)=>{const s=t.getDatasetMeta(n).controller;s instanceof iA?e=Tle(r,e):s instanceof kx?e=Lle(r,e):s&&(e=Ele(r,e))}}function o8(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Nle(t){return t&&(t.borderColor||t.backgroundColor)}function Fle(){return gl.borderColor!=="rgba(0,0,0,0.1)"||gl.backgroundColor!=="rgba(0,0,0,0.1)"}var Ple={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:s}=t.config,{elements:o}=s,c=o8(n)||Nle(s)||o&&o8(o)||Fle();if(!r.forceOverride&&c)return;const u=Ile(t);n.forEach(u)}};function jle(t,e,r,n,s){const o=s.samples||n;if(o>=r)return t.slice(e,e+r);const c=[],u=(r-2)/(o-2);let i=0;const m=e+r-1;let g=e,C,B,S,P,j;for(c[i++]=t[g],C=0;C<o-2;C++){let D=0,F=0,R;const V=Math.floor((C+1)*u)+1+e,Y=Math.min(Math.floor((C+2)*u)+1,r)+e,te=Y-V;for(R=V;R<Y;R++)D+=t[R].x,F+=t[R].y;D/=te,F/=te;const se=Math.floor(C*u)+1+e,oe=Math.min(Math.floor((C+1)*u)+1,r)+e,{x:K,y:de}=t[g];for(S=P=-1,R=se;R<oe;R++)P=.5*Math.abs((K-D)*(t[R].y-de)-(K-t[R].x)*(F-de)),P>S&&(S=P,B=t[R],j=R);c[i++]=B,g=j}return c[i++]=t[m],c}function Mle(t,e,r,n){let s=0,o=0,c,u,i,m,g,C,B,S,P,j;const D=[],F=e+r-1,R=t[e].x,Y=t[F].x-R;for(c=e;c<e+r;++c){u=t[c],i=(u.x-R)/Y*n,m=u.y;const te=i|0;if(te===g)m<P?(P=m,C=c):m>j&&(j=m,B=c),s=(o*s+u.x)/++o;else{const se=c-1;if(!Go(C)&&!Go(B)){const oe=Math.min(C,B),K=Math.max(C,B);oe!==S&&oe!==se&&D.push({...t[oe],x:s}),K!==S&&K!==se&&D.push({...t[K],x:s})}c>0&&se!==S&&D.push(t[se]),D.push(u),g=te,o=0,P=j=m,C=B=S=c}}return D}function kV(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function a8(t){t.data.datasets.forEach(e=>{kV(e)})}function kle(t,e){const r=e.length;let n=0,s;const{iScale:o}=t,{min:c,max:u,minDefined:i,maxDefined:m}=o.getUserBounds();return i&&(n=ru(rA(e,o.axis,c).lo,0,r-1)),m?s=ru(rA(e,o.axis,u).hi+1,n,r)-n:s=r-n,{start:n,count:s}}var Dle={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){a8(t);return}const n=t.width;t.data.datasets.forEach((s,o)=>{const{_data:c,indexAxis:u}=s,i=t.getDatasetMeta(o),m=c||s.data;if(sx([u,t.options.indexAxis])==="y"||!i.controller.supportsDecimation)return;const g=t.scales[i.xAxisID];if(g.type!=="linear"&&g.type!=="time"||t.options.parsing)return;let{start:C,count:B}=kle(i,m);const S=r.threshold||4*n;if(B<=S){kV(s);return}Go(c)&&(s._data=m,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(j){this._data=j}}));let P;switch(r.algorithm){case"lttb":P=jle(m,C,B,n,r);break;case"min-max":P=Mle(m,C,B,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}s._decimated=P})},destroy(t){a8(t)}};function Ole(t,e,r){const n=t.segments,s=t.points,o=e.points,c=[];for(const u of n){let{start:i,end:m}=u;m=TN(i,m,s);const g=g6(r,s[i],s[m],u.loop);if(!e.segments){c.push({source:u,target:g,start:s[i],end:s[m]});continue}const C=vV(e,g);for(const B of C){const S=g6(r,o[B.start],o[B.end],B.loop),P=yV(u,s,S);for(const j of P)c.push({source:j,target:B,start:{[r]:l8(g,S,"start",Math.max)},end:{[r]:l8(g,S,"end",Math.min)}})}}return c}function g6(t,e,r,n){if(n)return;let s=e[t],o=r[t];return t==="angle"&&(s=uh(s),o=uh(o)),{property:t,start:s,end:o}}function Rle(t,e){const{x:r=null,y:n=null}=t||{},s=e.points,o=[];return e.segments.forEach(({start:c,end:u})=>{u=TN(c,u,s);const i=s[c],m=s[u];n!==null?(o.push({x:i.x,y:n}),o.push({x:m.x,y:n})):r!==null&&(o.push({x:r,y:i.y}),o.push({x:r,y:m.y}))}),o}function TN(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function l8(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function DV(t,e){let r=[],n=!1;return da(t)?(n=!0,r=t):r=Rle(t,e),r.length?new Qd({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function c8(t){return t&&t.fill!==!1}function Ule(t,e,r){let s=t[e].fill;const o=[e];let c;if(!r)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!Cl(s))return s;if(c=t[s],!c)return!1;if(c.visible)return s;o.push(s),s=c.fill}return!1}function zle(t,e,r){const n=Gle(t);if(Us(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return Cl(s)&&Math.floor(s)===s?Qle(n[0],e,s,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Qle(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function Hle(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Us(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function Vle(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:Us(t)?n=t.value:n=e.getBaseValue(),n}function Gle(t){const e=t.options,r=e.fill;let n=ys(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function $le(t){const{scale:e,index:r,line:n}=t,s=[],o=n.segments,c=n.points,u=qle(e,r);u.push(DV({x:null,y:e.bottom},n));for(let i=0;i<o.length;i++){const m=o[i];for(let g=m.start;g<=m.end;g++)Wle(s,c[g],u)}return new Qd({points:s,options:{}})}function qle(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const o=n[s];if(o.index===e)break;o.hidden||r.unshift(o.dataset)}return r}function Wle(t,e,r){const n=[];for(let s=0;s<r.length;s++){const o=r[s],{first:c,last:u,point:i}=Kle(o,e,"x");if(!(!i||c&&u)){if(c)n.unshift(i);else if(t.push(i),!u)break}}t.push(...n)}function Kle(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const s=n[r],o=t.segments,c=t.points;let u=!1,i=!1;for(let m=0;m<o.length;m++){const g=o[m],C=c[g.start][r],B=c[g.end][r];if(tA(s,C,B)){u=s===C,i=s===B;break}}return{first:u,last:i,point:n}}class OV{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:s,y:o,radius:c}=this;return r=r||{start:0,end:za},e.arc(s,o,c,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:s}=this,o=e.angle;return{x:r+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}}function Xle(t){const{chart:e,fill:r,line:n}=t;if(Cl(r))return Yle(e,r);if(r==="stack")return $le(t);if(r==="shape")return!0;const s=Zle(t);return s instanceof OV?s:DV(s,n)}function Yle(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function Zle(t){return(t.scale||{}).getPointPositionForValue?ece(t):Jle(t)}function Jle(t){const{scale:e={},fill:r}=t,n=Hle(r,e);if(Cl(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function ece(t){const{scale:e,fill:r}=t,n=e.options,s=e.getLabels().length,o=n.reverse?e.max:e.min,c=Vle(r,e,o),u=[];if(n.grid.circular){const i=e.getPointPositionForValue(0,o);return new OV({x:i.x,y:i.y,radius:e.getDistanceFromCenterForValue(c)})}for(let i=0;i<s;++i)u.push(e.getPointPositionForValue(i,c));return u}function QE(t,e,r){const n=Xle(e),{line:s,scale:o,axis:c}=e,u=s.options,i=u.fill,m=u.backgroundColor,{above:g=m,below:C=m}=i||{};n&&s.points.length&&(nb(t,r),tce(t,{line:s,target:n,above:g,below:C,area:r,scale:o,axis:c}),ib(t))}function tce(t,e){const{line:r,target:n,above:s,below:o,area:c,scale:u}=e,i=r._loop?"angle":e.axis;t.save(),i==="x"&&o!==s&&(u8(t,n,c.top),d8(t,{line:r,target:n,color:s,scale:u,property:i}),t.restore(),t.save(),u8(t,n,c.bottom)),d8(t,{line:r,target:n,color:o,scale:u,property:i}),t.restore()}function u8(t,e,r){const{segments:n,points:s}=e;let o=!0,c=!1;t.beginPath();for(const u of n){const{start:i,end:m}=u,g=s[i],C=s[TN(i,m,s)];o?(t.moveTo(g.x,g.y),o=!1):(t.lineTo(g.x,r),t.lineTo(g.x,g.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(C.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function d8(t,e){const{line:r,target:n,property:s,color:o,scale:c}=e,u=Ole(r,n,s);for(const{source:i,target:m,start:g,end:C}of u){const{style:{backgroundColor:B=o}={}}=i,S=n!==!0;t.save(),t.fillStyle=B,rce(t,c,S&&g6(s,g,C)),t.beginPath();const P=!!r.pathSegment(t,i);let j;if(S){P?t.closePath():h8(t,n,C,s);const D=!!n.pathSegment(t,m,{move:P,reverse:!0});j=P&&D,j||h8(t,n,g,s)}t.closePath(),t.fill(j?"evenodd":"nonzero"),t.restore()}}function rce(t,e,r){const{top:n,bottom:s}=e.chart.chartArea,{property:o,start:c,end:u}=r||{};o==="x"&&(t.beginPath(),t.rect(c,n,u-c,s-n),t.clip())}function h8(t,e,r,n){const s=e.interpolate(r,n);s&&t.lineTo(s.x,s.y)}var nce={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,s=[];let o,c,u,i;for(c=0;c<n;++c)o=t.getDatasetMeta(c),u=o.dataset,i=null,u&&u.options&&u instanceof Qd&&(i={visible:t.isDatasetVisible(c),index:c,fill:zle(u,c,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=i,s.push(i);for(c=0;c<n;++c)i=s[c],!(!i||i.fill===!1)&&(i.fill=Ule(s,c,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let c=s.length-1;c>=0;--c){const u=s[c].$filler;u&&(u.line.updateControlPoints(o,u.axis),n&&u.fill&&QE(t.ctx,u,o))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const o=n[s].$filler;c8(o)&&QE(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!c8(n)||r.drawTime!=="beforeDatasetDraw"||QE(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const f8=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},ice=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class p8 extends rd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=xa(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=rc(n.font),o=s.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:i}=f8(n,o);let m,g;r.font=s.string,this.isHorizontal()?(m=this.maxWidth,g=this._fitRows(c,o,u,i)+10):(g=this.maxHeight,m=this._fitCols(c,s,u,i)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,s){const{ctx:o,maxWidth:c,options:{labels:{padding:u}}}=this,i=this.legendHitBoxes=[],m=this.lineWidths=[0],g=s+u;let C=e;o.textAlign="left",o.textBaseline="middle";let B=-1,S=-g;return this.legendItems.forEach((P,j)=>{const D=n+r/2+o.measureText(P.text).width;(j===0||m[m.length-1]+D+2*u>c)&&(C+=g,m[m.length-(j>0?0:1)]=0,S+=g,B++),i[j]={left:0,top:S,row:B,width:D,height:s},m[m.length-1]+=D+u}),C}_fitCols(e,r,n,s){const{ctx:o,maxHeight:c,options:{labels:{padding:u}}}=this,i=this.legendHitBoxes=[],m=this.columnSizes=[],g=c-e;let C=u,B=0,S=0,P=0,j=0;return this.legendItems.forEach((D,F)=>{const{itemWidth:R,itemHeight:V}=sce(n,r,o,D,s);F>0&&S+V+2*u>g&&(C+=B+u,m.push({width:B,height:S}),P+=B+u,j++,B=S=0),i[F]={left:P,top:S,col:j,width:R,height:V},B=Math.max(B,R),S+=V+u}),C+=B,m.push({width:B,height:S}),C}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:s},rtl:o}}=this,c=Xy(o,this.left,this.width);if(this.isHorizontal()){let u=0,i=qu(n,this.left+s,this.right-this.lineWidths[u]);for(const m of r)u!==m.row&&(u=m.row,i=qu(n,this.left+s,this.right-this.lineWidths[u])),m.top+=this.top+e+s,m.left=c.leftForLtr(c.x(i),m.width),i+=m.width+s}else{let u=0,i=qu(n,this.top+e+s,this.bottom-this.columnSizes[u].height);for(const m of r)m.col!==u&&(u=m.col,i=qu(n,this.top+e+s,this.bottom-this.columnSizes[u].height)),m.top=i,m.left+=this.left+s,m.left=c.leftForLtr(c.x(m.left),m.width),i+=m.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;nb(e,this),this._draw(),ib(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:s}=this,{align:o,labels:c}=e,u=gl.color,i=Xy(e.rtl,this.left,this.width),m=rc(c.font),{padding:g}=c,C=m.size,B=C/2;let S;this.drawTitle(),s.textAlign=i.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=m.string;const{boxWidth:P,boxHeight:j,itemHeight:D}=f8(c,C),F=function(se,oe,K){if(isNaN(P)||P<=0||isNaN(j)||j<0)return;s.save();const de=ys(K.lineWidth,1);if(s.fillStyle=ys(K.fillStyle,u),s.lineCap=ys(K.lineCap,"butt"),s.lineDashOffset=ys(K.lineDashOffset,0),s.lineJoin=ys(K.lineJoin,"miter"),s.lineWidth=de,s.strokeStyle=ys(K.strokeStyle,u),s.setLineDash(ys(K.lineDash,[])),c.usePointStyle){const we={radius:j*Math.SQRT2/2,pointStyle:K.pointStyle,rotation:K.rotation,borderWidth:de},J=i.xPlus(se,P/2),Z=oe+B;aV(s,we,J,Z,c.pointStyleWidth&&P)}else{const we=oe+Math.max((C-j)/2,0),J=i.leftForLtr(se,P),Z=Mm(K.borderRadius);s.beginPath(),Object.values(Z).some(Ie=>Ie!==0)?A1(s,{x:J,y:we,w:P,h:j,radius:Z}):s.rect(J,we,P,j),s.fill(),de!==0&&s.stroke()}s.restore()},R=function(se,oe,K){x0(s,K.text,se,oe+D/2,m,{strikethrough:K.hidden,textAlign:i.textAlign(K.textAlign)})},V=this.isHorizontal(),Y=this._computeTitleHeight();V?S={x:qu(o,this.left+g,this.right-n[0]),y:this.top+g+Y,line:0}:S={x:this.left+g,y:qu(o,this.top+Y+g,this.bottom-r[0].height),line:0},AV(this.ctx,e.textDirection);const te=D+g;this.legendItems.forEach((se,oe)=>{s.strokeStyle=se.fontColor,s.fillStyle=se.fontColor;const K=s.measureText(se.text).width,de=i.textAlign(se.textAlign||(se.textAlign=c.textAlign)),we=P+B+K;let J=S.x,Z=S.y;i.setWidth(this.width),V?oe>0&&J+we+g>this.right&&(Z=S.y+=te,S.line++,J=S.x=qu(o,this.left+g,this.right-n[S.line])):oe>0&&Z+te>this.bottom&&(J=S.x=J+r[S.line].width+g,S.line++,Z=S.y=qu(o,this.top+Y+g,this.bottom-r[S.line].height));const Ie=i.x(J);if(F(Ie,Z,se),J=Sse(de,J+P+B,V?J+we:this.right,e.rtl),R(i.x(J),Z,se),V)S.x+=we+g;else if(typeof se.text!="string"){const be=m.lineHeight;S.y+=RV(se,be)+g}else S.y+=te}),mV(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=rc(r.font),s=Ic(r.padding);if(!r.display)return;const o=Xy(e.rtl,this.left,this.width),c=this.ctx,u=r.position,i=n.size/2,m=s.top+i;let g,C=this.left,B=this.width;if(this.isHorizontal())B=Math.max(...this.lineWidths),g=this.top+m,C=qu(e.align,C,this.right-B);else{const P=this.columnSizes.reduce((j,D)=>Math.max(j,D.height),0);g=m+qu(e.align,this.top,this.bottom-P-e.labels.padding-this._computeTitleHeight())}const S=qu(u,C,C+B);c.textAlign=o.textAlign(yN(u)),c.textBaseline="middle",c.strokeStyle=r.color,c.fillStyle=r.color,c.font=n.string,x0(c,r.text,S,g,n)}_computeTitleHeight(){const e=this.options.title,r=rc(e.font),n=Ic(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,s,o;if(tA(e,this.left,this.right)&&tA(r,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],tA(e,s.left,s.left+s.width)&&tA(r,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!lce(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=ice(s,n);s&&!o&&xa(r.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!o&&xa(r.onHover,[e,n,this],this)}else n&&xa(r.onClick,[e,n,this],this)}}function sce(t,e,r,n,s){const o=oce(n,t,e,r),c=ace(s,n,e.lineHeight);return{itemWidth:o,itemHeight:c}}function oce(t,e,r,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((o,c)=>o.length>c.length?o:c)),e+r.size/2+n.measureText(s).width}function ace(t,e,r){let n=t;return typeof e.text!="string"&&(n=RV(e,r)),n}function RV(t,e){const r=t.text?t.text.length:0;return e*r}function lce(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var T0={id:"legend",_element:p8,start(t,e,r){const n=t.legend=new p8({ctx:t.ctx,options:r,chart:t});Zu.configure(t,n,r),Zu.addBox(t,n)},stop(t){Zu.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Zu.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,s=r.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:s,color:o,useBorderRadius:c,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(i=>{const m=i.controller.getStyle(r?0:void 0),g=Ic(m.borderWidth);return{text:e[i.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!i.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:m.borderColor,pointStyle:n||m.pointStyle,rotation:m.rotation,textAlign:s||m.textAlign,borderRadius:c&&(u||m.borderRadius),datasetIndex:i.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class LN extends rd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const s=da(n.text)?n.text.length:1;this._padding=Ic(n.padding);const o=s*rc(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:s,right:o,options:c}=this,u=c.align;let i=0,m,g,C;return this.isHorizontal()?(g=qu(u,n,o),C=r+e,m=o-n):(c.position==="left"?(g=n+e,C=qu(u,s,r),i=Co*-.5):(g=o-e,C=qu(u,r,s),i=Co*.5),m=s-r),{titleX:g,titleY:C,maxWidth:m,rotation:i}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=rc(r.font),o=n.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:i,rotation:m}=this._drawArgs(o);x0(e,r.text,0,0,n,{color:r.color,maxWidth:i,rotation:m,textAlign:yN(r.align),textBaseline:"middle",translation:[c,u]})}}function cce(t,e){const r=new LN({ctx:t.ctx,options:e,chart:t});Zu.configure(t,r,e),Zu.addBox(t,r),t.titleBlock=r}var N1={id:"title",_element:LN,start(t,e,r){cce(t,r)},stop(t){const e=t.titleBlock;Zu.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Zu.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Jw=new WeakMap;var uce={id:"subtitle",start(t,e,r){const n=new LN({ctx:t.ctx,options:r,chart:t});Zu.configure(t,n,r),Zu.addBox(t,n),Jw.set(t,n)},stop(t){Zu.removeBox(t,Jw.get(t)),Jw.delete(t)},beforeUpdate(t,e,r){const n=Jw.get(t);Zu.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ax={average(t){if(!t.length)return!1;let e,r,n=new Set,s=0,o=0;for(e=0,r=t.length;e<r;++e){const u=t[e].element;if(u&&u.hasValue()){const i=u.tooltipPosition();n.add(i.x),s+=i.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((u,i)=>u+i)/n.size,y:s/o}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,s=Number.POSITIVE_INFINITY,o,c,u;for(o=0,c=t.length;o<c;++o){const i=t[o].element;if(i&&i.hasValue()){const m=i.getCenterPoint(),g=p1(e,m);g<s&&(s=g,u=i)}}if(u){const i=u.tooltipPosition();r=i.x,n=i.y}return{x:r,y:n}}};function ap(t,e){return e&&(da(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wp(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function dce(t,e){const{element:r,datasetIndex:n,index:s}=e,o=t.getDatasetMeta(n).controller,{label:c,value:u}=o.getLabelAndValue(s);return{chart:t,label:c,parsed:o.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:u,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:r}}function A8(t,e){const r=t.chart.ctx,{body:n,footer:s,title:o}=t,{boxWidth:c,boxHeight:u}=e,i=rc(e.bodyFont),m=rc(e.titleFont),g=rc(e.footerFont),C=o.length,B=s.length,S=n.length,P=Ic(e.padding);let j=P.height,D=0,F=n.reduce((Y,te)=>Y+te.before.length+te.lines.length+te.after.length,0);if(F+=t.beforeBody.length+t.afterBody.length,C&&(j+=C*m.lineHeight+(C-1)*e.titleSpacing+e.titleMarginBottom),F){const Y=e.displayColors?Math.max(u,i.lineHeight):i.lineHeight;j+=S*Y+(F-S)*i.lineHeight+(F-1)*e.bodySpacing}B&&(j+=e.footerMarginTop+B*g.lineHeight+(B-1)*e.footerSpacing);let R=0;const V=function(Y){D=Math.max(D,r.measureText(Y).width+R)};return r.save(),r.font=m.string,_a(t.title,V),r.font=i.string,_a(t.beforeBody.concat(t.afterBody),V),R=e.displayColors?c+2+e.boxPadding:0,_a(n,Y=>{_a(Y.before,V),_a(Y.lines,V),_a(Y.after,V)}),R=0,r.font=g.string,_a(t.footer,V),r.restore(),D+=P.width,{width:D,height:j}}function hce(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function fce(t,e,r,n){const{x:s,width:o}=n,c=r.caretSize+r.caretPadding;if(t==="left"&&s+o+c>e.width||t==="right"&&s-o-c<0)return!0}function pce(t,e,r,n){const{x:s,width:o}=r,{width:c,chartArea:{left:u,right:i}}=t;let m="center";return n==="center"?m=s<=(u+i)/2?"left":"right":s<=o/2?m="left":s>=c-o/2&&(m="right"),fce(m,t,e,r)&&(m="center"),m}function m8(t,e,r){const n=r.yAlign||e.yAlign||hce(t,r);return{xAlign:r.xAlign||e.xAlign||pce(t,e,r,n),yAlign:n}}function Ace(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function mce(t,e,r){let{y:n,height:s}=t;return e==="top"?n+=r:e==="bottom"?n-=s+r:n-=s/2,n}function g8(t,e,r,n){const{caretSize:s,caretPadding:o,cornerRadius:c}=t,{xAlign:u,yAlign:i}=r,m=s+o,{topLeft:g,topRight:C,bottomLeft:B,bottomRight:S}=Mm(c);let P=Ace(e,u);const j=mce(e,i,m);return i==="center"?u==="left"?P+=m:u==="right"&&(P-=m):u==="left"?P-=Math.max(g,B)+s:u==="right"&&(P+=Math.max(C,S)+s),{x:ru(P,0,n.width-e.width),y:ru(j,0,n.height-e.height)}}function e2(t,e,r){const n=Ic(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function y8(t){return ap([],Wp(t))}function gce(t,e,r){return ag(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function v8(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const UV={beforeTitle:Qp,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Qp,beforeBody:Qp,beforeLabel:Qp,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Go(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Qp,afterBody:Qp,beforeFooter:Qp,footer:Qp,afterFooter:Qp};function kd(t,e,r,n){const s=t[e].call(r,n);return typeof s>"u"?UV[e].call(r,n):s}class y6 extends rd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&r.options.animation&&n.animations,o=new BN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=gce(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,s=kd(n,"beforeTitle",this,e),o=kd(n,"title",this,e),c=kd(n,"afterTitle",this,e);let u=[];return u=ap(u,Wp(s)),u=ap(u,Wp(o)),u=ap(u,Wp(c)),u}getBeforeBody(e,r){return y8(kd(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,s=[];return _a(e,o=>{const c={before:[],lines:[],after:[]},u=v8(n,o);ap(c.before,Wp(kd(u,"beforeLabel",this,o))),ap(c.lines,kd(u,"label",this,o)),ap(c.after,Wp(kd(u,"afterLabel",this,o))),s.push(c)}),s}getAfterBody(e,r){return y8(kd(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,s=kd(n,"beforeFooter",this,e),o=kd(n,"footer",this,e),c=kd(n,"afterFooter",this,e);let u=[];return u=ap(u,Wp(s)),u=ap(u,Wp(o)),u=ap(u,Wp(c)),u}_createItems(e){const r=this._active,n=this.chart.data,s=[],o=[],c=[];let u=[],i,m;for(i=0,m=r.length;i<m;++i)u.push(dce(this.chart,r[i]));return e.filter&&(u=u.filter((g,C,B)=>e.filter(g,C,B,n))),e.itemSort&&(u=u.sort((g,C)=>e.itemSort(g,C,n))),_a(u,g=>{const C=v8(e.callbacks,g);s.push(kd(C,"labelColor",this,g)),o.push(kd(C,"labelPointStyle",this,g)),c.push(kd(C,"labelTextColor",this,g))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=u,u}update(e,r){const n=this.options.setContext(this.getContext()),s=this._active;let o,c=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const u=ax[n.position].call(this,s,this._eventPosition);c=this._createItems(n),this.title=this.getTitle(c,n),this.beforeBody=this.getBeforeBody(c,n),this.body=this.getBody(c,n),this.afterBody=this.getAfterBody(c,n),this.footer=this.getFooter(c,n);const i=this._size=A8(this,n),m=Object.assign({},u,i),g=m8(this.chart,n,m),C=g8(n,m,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:C.x,y:C.y,width:i.width,height:i.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,s){const o=this.getCaretPosition(e,n,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(e,r,n){const{xAlign:s,yAlign:o}=this,{caretSize:c,cornerRadius:u}=n,{topLeft:i,topRight:m,bottomLeft:g,bottomRight:C}=Mm(u),{x:B,y:S}=e,{width:P,height:j}=r;let D,F,R,V,Y,te;return o==="center"?(Y=S+j/2,s==="left"?(D=B,F=D-c,V=Y+c,te=Y-c):(D=B+P,F=D+c,V=Y-c,te=Y+c),R=D):(s==="left"?F=B+Math.max(i,g)+c:s==="right"?F=B+P-Math.max(m,C)-c:F=this.caretX,o==="top"?(V=S,Y=V-c,D=F-c,R=F+c):(V=S+j,Y=V+c,D=F+c,R=F-c),te=V),{x1:D,x2:F,x3:R,y1:V,y2:Y,y3:te}}drawTitle(e,r,n){const s=this.title,o=s.length;let c,u,i;if(o){const m=Xy(n.rtl,this.x,this.width);for(e.x=e2(this,n.titleAlign,n),r.textAlign=m.textAlign(n.titleAlign),r.textBaseline="middle",c=rc(n.titleFont),u=n.titleSpacing,r.fillStyle=n.titleColor,r.font=c.string,i=0;i<o;++i)r.fillText(s[i],m.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+u,i+1===o&&(e.y+=n.titleMarginBottom-u)}}_drawColorBox(e,r,n,s,o){const c=this.labelColors[n],u=this.labelPointStyles[n],{boxHeight:i,boxWidth:m}=o,g=rc(o.bodyFont),C=e2(this,"left",o),B=s.x(C),S=i<g.lineHeight?(g.lineHeight-i)/2:0,P=r.y+S;if(o.usePointStyle){const j={radius:Math.min(m,i)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},D=s.leftForLtr(B,m)+m/2,F=P+i/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,h6(e,j,D,F),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,h6(e,j,D,F)}else{e.lineWidth=Us(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const j=s.leftForLtr(B,m),D=s.leftForLtr(s.xPlus(B,1),m-2),F=Mm(c.borderRadius);Object.values(F).some(R=>R!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,A1(e,{x:j,y:P,w:m,h:i,radius:F}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),A1(e,{x:D,y:P+1,w:m-2,h:i-2,radius:F}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(j,P,m,i),e.strokeRect(j,P,m,i),e.fillStyle=c.backgroundColor,e.fillRect(D,P+1,m-2,i-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:s}=this,{bodySpacing:o,bodyAlign:c,displayColors:u,boxHeight:i,boxWidth:m,boxPadding:g}=n,C=rc(n.bodyFont);let B=C.lineHeight,S=0;const P=Xy(n.rtl,this.x,this.width),j=function(K){r.fillText(K,P.x(e.x+S),e.y+B/2),e.y+=B+o},D=P.textAlign(c);let F,R,V,Y,te,se,oe;for(r.textAlign=c,r.textBaseline="middle",r.font=C.string,e.x=e2(this,D,n),r.fillStyle=n.bodyColor,_a(this.beforeBody,j),S=u&&D!=="right"?c==="center"?m/2+g:m+2+g:0,Y=0,se=s.length;Y<se;++Y){for(F=s[Y],R=this.labelTextColors[Y],r.fillStyle=R,_a(F.before,j),V=F.lines,u&&V.length&&(this._drawColorBox(r,e,Y,P,n),B=Math.max(C.lineHeight,i)),te=0,oe=V.length;te<oe;++te)j(V[te]),B=C.lineHeight;_a(F.after,j)}S=0,B=C.lineHeight,_a(this.afterBody,j),e.y-=o}drawFooter(e,r,n){const s=this.footer,o=s.length;let c,u;if(o){const i=Xy(n.rtl,this.x,this.width);for(e.x=e2(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=i.textAlign(n.footerAlign),r.textBaseline="middle",c=rc(n.footerFont),r.fillStyle=n.footerColor,r.font=c.string,u=0;u<o;++u)r.fillText(s[u],i.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+n.footerSpacing}}drawBackground(e,r,n,s){const{xAlign:o,yAlign:c}=this,{x:u,y:i}=e,{width:m,height:g}=n,{topLeft:C,topRight:B,bottomLeft:S,bottomRight:P}=Mm(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(u+C,i),c==="top"&&this.drawCaret(e,r,n,s),r.lineTo(u+m-B,i),r.quadraticCurveTo(u+m,i,u+m,i+B),c==="center"&&o==="right"&&this.drawCaret(e,r,n,s),r.lineTo(u+m,i+g-P),r.quadraticCurveTo(u+m,i+g,u+m-P,i+g),c==="bottom"&&this.drawCaret(e,r,n,s),r.lineTo(u+S,i+g),r.quadraticCurveTo(u,i+g,u,i+g-S),c==="center"&&o==="left"&&this.drawCaret(e,r,n,s),r.lineTo(u,i+C),r.quadraticCurveTo(u,i,u+C,i),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const c=ax[e.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=A8(this,e),i=Object.assign({},c,this._size),m=m8(r,e,i),g=g8(e,i,m,r);(s._to!==g.x||o._to!==g.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const c=Ic(r.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&u&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,s,r),AV(e,r.textDirection),o.y+=c.top,this.drawTitle(o,e,r),this.drawBody(o,e,r),this.drawFooter(o,e,r),mV(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,s=e.map(({datasetIndex:u,index:i})=>{const m=this.chart.getDatasetMeta(u);if(!m)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:m.data[i],index:i}}),o=!r4(n,s),c=this._positionChanged(s,r);(o||c)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],c=this._getActiveElements(e,o,r,n),u=this._positionChanged(c,e),i=r||!r4(c,o)||u;return i&&(this._active=c,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),i}_getActiveElements(e,r,n,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&c.reverse(),c}_positionChanged(e,r){const{caretX:n,caretY:s,options:o}=this,c=ax[o.position].call(this,e,r);return c!==!1&&(n!==c.x||s!==c.y)}}ni(y6,"positioners",ax);var L0={id:"tooltip",_element:y6,positioners:ax,afterInit(t,e,r){r&&(t.tooltip=new y6({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:UV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},yce=Object.freeze({__proto__:null,Colors:Ple,Decimation:Dle,Filler:nce,Legend:T0,SubTitle:uce,Title:N1,Tooltip:L0});const vce=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function xce(t,e,r,n){const s=t.indexOf(e);if(s===-1)return vce(t,e,r,n);const o=t.lastIndexOf(e);return s!==o?r:s}const _ce=(t,e)=>t===null?null:ru(Math.round(t),0,e);function x8(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class fA extends E0{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:s,label:o}of r)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Go(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:xce(n,e,ys(r,e),this._addedLabels),_ce(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=e===0&&r===o.length-1?o:o.slice(e,r+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let c=e;c<=r;c++)s.push({value:c});return s}getLabelForValue(e){return x8.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ni(fA,"id","category"),ni(fA,"defaults",{ticks:{callback:x8}});function bce(t,e){const r=[],{bounds:s,step:o,min:c,max:u,precision:i,count:m,maxTicks:g,maxDigits:C,includeBounds:B}=t,S=o||1,P=g-1,{min:j,max:D}=e,F=!Go(c),R=!Go(u),V=!Go(m),Y=(D-j)/(C+1);let te=AO((D-j)/P/S)*S,se,oe,K,de;if(te<1e-14&&!F&&!R)return[{value:j},{value:D}];de=Math.ceil(D/te)-Math.floor(j/te),de>P&&(te=AO(de*te/P/S)*S),Go(i)||(se=Math.pow(10,i),te=Math.ceil(te*se)/se),s==="ticks"?(oe=Math.floor(j/te)*te,K=Math.ceil(D/te)*te):(oe=j,K=D),F&&R&&o&&yse((u-c)/o,te/1e3)?(de=Math.round(Math.min((u-c)/te,g)),te=(u-c)/de,oe=c,K=u):V?(oe=F?c:oe,K=R?u:K,de=m-1,te=(K-oe)/de):(de=(K-oe)/te,Nx(de,Math.round(de),te/1e3)?de=Math.round(de):de=Math.ceil(de));const we=Math.max(mO(te),mO(oe));se=Math.pow(10,Go(i)?we:i),oe=Math.round(oe*se)/se,K=Math.round(K*se)/se;let J=0;for(F&&(B&&oe!==c?(r.push({value:c}),oe<c&&J++,Nx(Math.round((oe+J*te)*se)/se,c,_8(c,Y,t))&&J++):oe<c&&J++);J<de;++J){const Z=Math.round((oe+J*te)*se)/se;if(R&&Z>u)break;r.push({value:Z})}return R&&B&&K!==u?r.length&&Nx(r[r.length-1].value,u,_8(u,Y,t))?r[r.length-1].value=u:r.push({value:u}):(!R||K===u)&&r.push({value:K}),r}function _8(t,e,{horizontal:r,minRotation:n}){const s=Lc(n),o=(r?Math.sin(s):Math.cos(s))||.001,c=.75*e*(""+t).length;return Math.min(e/o,c)}class h4 extends E0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Go(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const c=i=>s=r?s:i,u=i=>o=n?o:i;if(e){const i=vp(s),m=vp(o);i<0&&m<0?u(0):i>0&&m>0&&c(0)}if(s===o){let i=o===0?1:Math.abs(o*.05);u(o+i),e||c(s-i)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),r=r||11),r&&(s=Math.min(r,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},o=this._range||this,c=bce(s,o);return e.bounds==="ticks"&&JH(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-r)/Math.max(e.length-1,1)/2;r-=s,n+=s}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return rb(e,this.chart.options.locale,this.options.ticks.format)}}class pA extends h4{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Cl(e)?e:0,this.max=Cl(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Lc(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ni(pA,"id","linear"),ni(pA,"defaults",{ticks:{callback:AC.formatters.numeric}});const T_=t=>Math.floor(fm(t)),Sg=(t,e)=>Math.pow(10,T_(t)+e);function b8(t){return t/Math.pow(10,T_(t))===1}function w8(t,e,r){const n=Math.pow(10,r),s=Math.floor(t/n);return Math.ceil(e/n)-s}function wce(t,e){const r=e-t;let n=T_(r);for(;w8(t,e,n)>10;)n++;for(;w8(t,e,n)<10;)n--;return Math.min(n,T_(t))}function Cce(t,{min:e,max:r}){e=lh(t.min,e);const n=[],s=T_(e);let o=wce(e,r),c=o<0?Math.pow(10,Math.abs(o)):1;const u=Math.pow(10,o),i=s>o?Math.pow(10,s):0,m=Math.round((e-i)*c)/c,g=Math.floor((e-i)/u/10)*u*10;let C=Math.floor((m-g)/Math.pow(10,o)),B=lh(t.min,Math.round((i+g+C*Math.pow(10,o))*c)/c);for(;B<r;)n.push({value:B,major:b8(B),significand:C}),C>=10?C=C<15?15:20:C++,C>=20&&(o++,C=2,c=o>=0?1:c),B=Math.round((i+g+C*Math.pow(10,o))*c)/c;const S=lh(t.max,B);return n.push({value:S,major:b8(S),significand:C}),n}class v6 extends E0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=h4.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return Cl(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Cl(e)?Math.max(0,e):null,this.max=Cl(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Cl(this._userMin)&&(this.min=e===Sg(this.min,0)?Sg(this.min,-1):Sg(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,s=this.max;const o=u=>n=e?n:u,c=u=>s=r?s:u;n===s&&(n<=0?(o(1),c(10)):(o(Sg(n,-1)),c(Sg(s,1)))),n<=0&&o(Sg(s,-1)),s<=0&&c(Sg(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=Cce(r,this);return e.bounds==="ticks"&&JH(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":rb(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=fm(e),this._valueRange=fm(this.max)-fm(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(fm(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}ni(v6,"id","logarithmic"),ni(v6,"defaults",{ticks:{callback:AC.formatters.logarithmic,major:{enabled:!0}}});function x6(t){const e=t.ticks;if(e.display&&t.display){const r=Ic(e.backdropPadding);return ys(e.font&&e.font.size,gl.font.size)+r.height}return 0}function Sce(t,e,r){return r=da(r)?r:[r],{w:Mse(t,e.string,r),h:r.length*e.lineHeight}}function C8(t,e,r,n,s){return t===n||t===s?{start:e-r/2,end:e+r/2}:t<n||t>s?{start:e-r,end:e}:{start:e,end:e+r}}function Bce(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],s=[],o=t._pointLabels.length,c=t.options.pointLabels,u=c.centerPointLabels?Co/o:0;for(let i=0;i<o;i++){const m=c.setContext(t.getPointLabelContext(i));s[i]=m.padding;const g=t.getPointPosition(i,t.drawingArea+s[i],u),C=rc(m.font),B=Sce(t.ctx,C,t._pointLabels[i]);n[i]=B;const S=uh(t.getIndexAngle(i)+u),P=Math.round(pC(S)),j=C8(P,g.x,B.w,0,180),D=C8(P,g.y,B.h,90,270);Ece(r,e,S,j,D)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=Ice(t,n,s)}function Ece(t,e,r,n,s){const o=Math.abs(Math.sin(r)),c=Math.abs(Math.cos(r));let u=0,i=0;n.start<e.l?(u=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-u)):n.end>e.r&&(u=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+u)),s.start<e.t?(i=(e.t-s.start)/c,t.t=Math.min(t.t,e.t-i)):s.end>e.b&&(i=(s.end-e.b)/c,t.b=Math.max(t.b,e.b+i))}function Tce(t,e,r){const n=t.drawingArea,{extra:s,additionalAngle:o,padding:c,size:u}=r,i=t.getPointPosition(e,n+s+c,o),m=Math.round(pC(uh(i.angle+ml))),g=Pce(i.y,u.h,m),C=Nce(m),B=Fce(i.x,u.w,C);return{visible:!0,x:i.x,y:g,textAlign:C,left:B,top:g,right:B+u.w,bottom:g+u.h}}function Lce(t,e){if(!e)return!0;const{left:r,top:n,right:s,bottom:o}=t;return!(nA({x:r,y:n},e)||nA({x:r,y:o},e)||nA({x:s,y:n},e)||nA({x:s,y:o},e))}function Ice(t,e,r){const n=[],s=t._pointLabels.length,o=t.options,{centerPointLabels:c,display:u}=o.pointLabels,i={extra:x6(o)/2,additionalAngle:c?Co/s:0};let m;for(let g=0;g<s;g++){i.padding=r[g],i.size=e[g];const C=Tce(t,g,i);n.push(C),u==="auto"&&(C.visible=Lce(C,m),C.visible&&(m=C))}return n}function Nce(t){return t===0||t===180?"center":t<180?"left":"right"}function Fce(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function Pce(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function jce(t,e,r){const{left:n,top:s,right:o,bottom:c}=r,{backdropColor:u}=e;if(!Go(u)){const i=Mm(e.borderRadius),m=Ic(e.backdropPadding);t.fillStyle=u;const g=n-m.left,C=s-m.top,B=o-n+m.width,S=c-s+m.height;Object.values(i).some(P=>P!==0)?(t.beginPath(),A1(t,{x:g,y:C,w:B,h:S,radius:i}),t.fill()):t.fillRect(g,C,B,S)}}function Mce(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const o=t._pointLabelItems[s];if(!o.visible)continue;const c=n.setContext(t.getPointLabelContext(s));jce(r,c,o);const u=rc(c.font),{x:i,y:m,textAlign:g}=o;x0(r,t._pointLabels[s],i,m+u.lineHeight/2,u,{color:c.color,textAlign:g,textBaseline:"middle"})}}function zV(t,e,r,n){const{ctx:s}=t;if(r)s.arc(t.xCenter,t.yCenter,e,0,za);else{let o=t.getPointPosition(0,e);s.moveTo(o.x,o.y);for(let c=1;c<n;c++)o=t.getPointPosition(c,e),s.lineTo(o.x,o.y)}}function kce(t,e,r,n,s){const o=t.ctx,c=e.circular,{color:u,lineWidth:i}=e;!c&&!n||!u||!i||r<0||(o.save(),o.strokeStyle=u,o.lineWidth=i,o.setLineDash(s.dash||[]),o.lineDashOffset=s.dashOffset,o.beginPath(),zV(t,r,c,n),o.closePath(),o.stroke(),o.restore())}function Dce(t,e,r){return ag(t,{label:r,index:e,type:"pointLabel"})}class My extends h4{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ic(x6(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=Cl(e)&&!isNaN(e)?e:0,this.max=Cl(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/x6(this.options))}generateTickLabels(e){h4.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const s=xa(this.options.pointLabels.callback,[r,n],this);return s||s===0?s:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?Bce(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,s){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,s))}getIndexAngle(e){const r=za/(this._pointLabels.length||1),n=this.options.startAngle||0;return uh(e*r+Lc(n))}getDistanceFromCenterForValue(e){if(Go(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Go(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return Dce(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const s=this.getIndexAngle(e)-ml+n;return{x:Math.cos(s)*r+this.xCenter,y:Math.sin(s)*r+this.yCenter,angle:s}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:s,bottom:o}=this._pointLabelItems[e];return{left:r,top:n,right:s,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),zV(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:s,border:o}=r,c=this._pointLabels.length;let u,i,m;if(r.pointLabels.display&&Mce(this,c),s.display&&this.ticks.forEach((g,C)=>{if(C!==0||C===0&&this.min<0){i=this.getDistanceFromCenterForValue(g.value);const B=this.getContext(C),S=s.setContext(B),P=o.setContext(B);kce(this,S,i,c,P)}}),n.display){for(e.save(),u=c-1;u>=0;u--){const g=n.setContext(this.getPointLabelContext(u)),{color:C,lineWidth:B}=g;!B||!C||(e.lineWidth=B,e.strokeStyle=C,e.setLineDash(g.borderDash),e.lineDashOffset=g.borderDashOffset,i=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),m=this.getPointPosition(u,i),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(m.x,m.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let o,c;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((u,i)=>{if(i===0&&this.min>=0&&!r.reverse)return;const m=n.setContext(this.getContext(i)),g=rc(m.font);if(o=this.getDistanceFromCenterForValue(this.ticks[i].value),m.showLabelBackdrop){e.font=g.string,c=e.measureText(u.label).width,e.fillStyle=m.backdropColor;const C=Ic(m.backdropPadding);e.fillRect(-c/2-C.left,-o-g.size/2-C.top,c+C.width,g.size+C.height)}x0(e,u.label,0,-o,g,{color:m.color,strokeColor:m.textStrokeColor,strokeWidth:m.textStrokeWidth})}),e.restore()}drawTitle(){}}ni(My,"id","radialLinear"),ni(My,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:AC.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ni(My,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ni(My,"descriptors",{angleLines:{_fallback:"grid"}});const gC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ud=Object.keys(gC);function S8(t,e){return t-e}function B8(t,e){if(Go(e))return null;const r=t._adapter,{parser:n,round:s,isoWeekday:o}=t._parseOpts;let c=e;return typeof n=="function"&&(c=n(c)),Cl(c)||(c=typeof n=="string"?r.parse(c,n):r.parse(c)),c===null?null:(s&&(c=s==="week"&&(Vm(o)||o===!0)?r.startOf(c,"isoWeek",o):r.startOf(c,s)),+c)}function E8(t,e,r,n){const s=Ud.length;for(let o=Ud.indexOf(t);o<s-1;++o){const c=gC[Ud[o]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((r-e)/(u*c.size))<=n)return Ud[o]}return Ud[s-1]}function Oce(t,e,r,n,s){for(let o=Ud.length-1;o>=Ud.indexOf(r);o--){const c=Ud[o];if(gC[c].common&&t._adapter.diff(s,n,c)>=e-1)return c}return Ud[r?Ud.indexOf(r):0]}function Rce(t){for(let e=Ud.indexOf(t)+1,r=Ud.length;e<r;++e)if(gC[Ud[e]].common)return Ud[e]}function T8(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:s}=gN(r,e),o=r[n]>=e?r[n]:r[s];t[o]=!0}}function Uce(t,e,r,n){const s=t._adapter,o=+s.startOf(e[0].value,n),c=e[e.length-1].value;let u,i;for(u=o;u<=c;u=+s.add(u,1,n))i=r[u],i>=0&&(e[i].major=!0);return e}function L8(t,e,r){const n=[],s={},o=e.length;let c,u;for(c=0;c<o;++c)u=e[c],s[u]=c,n.push({value:u,major:!1});return o===0||!r?n:Uce(t,n,s,r)}class L_ extends E0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),s=this._adapter=new Yoe._date(e.adapters.date);s.init(r),Ix(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:B8(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:s,max:o,minDefined:c,maxDefined:u}=this.getUserBounds();function i(m){!c&&!isNaN(m.min)&&(s=Math.min(s,m.min)),!u&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!c||!u)&&(i(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&i(this.getMinMax(!1))),s=Cl(s)&&!isNaN(s)?s:+r.startOf(Date.now(),n),o=Cl(o)&&!isNaN(o)?o:+r.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,c=this.max,u=bse(s,o,c);return this._unit=r.unit||(n.autoSkip?E8(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):Oce(this,u.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Rce(this._unit),this.initOffsets(s),e.reverse&&u.reverse(),L8(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;r=ru(r,0,c),n=ru(n,0,c),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,s=this.options,o=s.time,c=o.unit||E8(o.minUnit,r,n,this._getLabelCapacity(r)),u=ys(s.ticks.stepSize,1),i=c==="week"?o.isoWeekday:!1,m=Vm(i)||i===!0,g={};let C=r,B,S;if(m&&(C=+e.startOf(C,"isoWeek",i)),C=+e.startOf(C,m?"day":c),e.diff(n,r,c)>1e5*u)throw new Error(r+" and "+n+" are too far apart with stepSize of "+u+" "+c);const P=s.ticks.source==="data"&&this.getDataTimestamps();for(B=C,S=0;B<n;B=+e.add(B,u,c),S++)T8(g,B,P);return(B===n||s.bounds==="ticks"||S===1)&&T8(g,B,P),Object.keys(g).sort(S8).map(j=>+j)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,o=this._unit,c=r||s[o];return this._adapter.format(e,c)}_tickFormatFunction(e,r,n,s){const o=this.options,c=o.ticks.callback;if(c)return xa(c,[e,r,n],this);const u=o.time.displayFormats,i=this._unit,m=this._majorUnit,g=i&&u[i],C=m&&u[m],B=n[r],S=m&&C&&B&&B.major;return this._adapter.format(e,s||(S?C:g))}generateTickLabels(e){let r,n,s;for(r=0,n=e.length;r<n;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,s=Lc(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),c=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:n*o+u*c,h:n*c+u*o}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,s=n[r.unit]||n.millisecond,o=this._tickFormatFunction(e,0,L8(this,[e],this._majorUnit),s),c=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,n=s.length;r<n;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const s=this.getLabels();for(r=0,n=s.length;r<n;++r)e.push(B8(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return tV(e.sort(S8))}}ni(L_,"id","time"),ni(L_,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function t2(t,e,r){let n=0,s=t.length-1,o,c,u,i;r?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=rA(t,"pos",e)),{pos:o,time:u}=t[n],{pos:c,time:i}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=rA(t,"time",e)),{time:o,pos:u}=t[n],{time:c,pos:i}=t[s]);const m=c-o;return m?u+(i-u)*(e-o)/m:u}class _6 extends L_{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=t2(r,this.min),this._tableRange=t2(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,s=[],o=[];let c,u,i,m,g;for(c=0,u=e.length;c<u;++c)m=e[c],m>=r&&m<=n&&s.push(m);if(s.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(c=0,u=s.length;c<u;++c)g=s[c+1],i=s[c-1],m=s[c],Math.round((g+i)/2)!==m&&o.push({time:m,pos:c/(u-1)});return o}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(t2(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return t2(this._table,n*this._tableRange+this._minPos,!0)}}ni(_6,"id","timeseries"),ni(_6,"defaults",L_.defaults);var zce=Object.freeze({__proto__:null,CategoryScale:fA,LinearScale:pA,LogarithmicScale:v6,RadialLinearScale:My,TimeScale:L_,TimeSeriesScale:_6});const Qce=[Xoe,Ble,yce,zce],QV="label";function I8(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Hce(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function HV(t,e){t.labels=e}function VV(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:QV;const n=[];t.datasets=e.map(s=>{const o=t.datasets.find(c=>c[r]===s[r]);return!o||!s.data||n.includes(o)?{...s}:(n.push(o),Object.assign(o,s),o)})}function Vce(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:QV;const r={labels:[],datasets:[]};return HV(r,t.labels),VV(r,t.datasets,e),r}function Gce(t,e){const{height:r=150,width:n=300,redraw:s=!1,datasetIdKey:o,type:c,data:u,options:i,plugins:m=[],fallbackContent:g,updateMode:C,...B}=t,S=Ae.useRef(null),P=Ae.useRef(),j=()=>{S.current&&(P.current=new ph(S.current,{type:c,data:Vce(u,o),options:i&&{...i},plugins:m}),I8(e,P.current))},D=()=>{I8(e,null),P.current&&(P.current.destroy(),P.current=null)};return Ae.useEffect(()=>{!s&&P.current&&i&&Hce(P.current,i)},[s,i]),Ae.useEffect(()=>{!s&&P.current&&HV(P.current.config.data,u.labels)},[s,u.labels]),Ae.useEffect(()=>{!s&&P.current&&u.datasets&&VV(P.current.config.data,u.datasets,o)},[s,u.datasets]),Ae.useEffect(()=>{P.current&&(s?(D(),setTimeout(j)):P.current.update(C))},[s,i,u.labels,u.datasets,C]),Ae.useEffect(()=>{P.current&&(D(),setTimeout(j))},[c]),Ae.useEffect(()=>(j(),()=>D()),[]),Ui.createElement("canvas",Object.assign({ref:S,role:"img",height:r,width:n},B),g)}const $ce=Ae.forwardRef(Gce);function yC(t,e){return ph.register(e),Ae.forwardRef((r,n)=>Ui.createElement($ce,Object.assign({},r,{ref:n,type:t})))}const I0=yC("line",Mx),I_=yC("bar",jx),qce=yC("doughnut",iA),IN=yC("pie",c4);ph.register(...Qce);function Wce(t){return vs({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function Kce(t){return vs({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function GV(t){return vs({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Yy(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.61,16.88c0-1.15,0.36-2.17,1.08-3.07c0.72-0.9,1.63-1.48,2.74-1.73c0.31-1.37,1.02-2.49,2.11-3.37s2.35-1.32,3.76-1.32
	c1.38,0,2.61,0.43,3.69,1.28s1.78,1.95,2.1,3.29h0.33c0.9,0,1.73,0.22,2.49,0.65s1.37,1.03,1.81,1.79c0.44,0.76,0.67,1.58,0.67,2.48
	c0,0.88-0.21,1.7-0.63,2.45s-1,1.35-1.73,1.8c-0.73,0.45-1.54,0.69-2.41,0.72H9.41c-1.34-0.06-2.47-0.57-3.4-1.53
	C5.08,19.37,4.61,18.22,4.61,16.88z M6.32,16.88c0,0.87,0.3,1.62,0.9,2.26s1.33,0.98,2.19,1.03h11.19c0.86-0.04,1.59-0.39,2.19-1.03
	c0.61-0.64,0.91-1.4,0.91-2.26c0-0.88-0.33-1.63-0.98-2.27c-0.65-0.64-1.42-0.96-2.32-0.96H18.8c-0.11,0-0.17-0.06-0.17-0.18
	l-0.07-0.57c-0.11-1.08-0.58-1.99-1.4-2.72c-0.82-0.73-1.77-1.1-2.86-1.1c-1.09,0-2.05,0.37-2.85,1.1
	c-0.81,0.73-1.27,1.64-1.37,2.72l-0.08,0.57c0,0.12-0.07,0.18-0.2,0.18H9.27c-0.84,0.1-1.54,0.46-2.1,1.07S6.32,16.05,6.32,16.88z`},child:[]}]})(t)}function f4(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.37,14.62c0-0.24,0.08-0.45,0.25-0.62c0.17-0.16,0.38-0.24,0.6-0.24h2.04c0.23,0,0.42,0.08,0.58,0.25
	c0.15,0.17,0.23,0.37,0.23,0.61S8,15.06,7.85,15.23c-0.15,0.17-0.35,0.25-0.58,0.25H5.23c-0.23,0-0.43-0.08-0.6-0.25
	C4.46,15.06,4.37,14.86,4.37,14.62z M7.23,21.55c0-0.23,0.08-0.43,0.23-0.61l1.47-1.43c0.15-0.16,0.35-0.23,0.59-0.23
	c0.24,0,0.44,0.08,0.6,0.23s0.24,0.34,0.24,0.57c0,0.24-0.08,0.46-0.24,0.64L8.7,22.14c-0.41,0.32-0.82,0.32-1.23,0
	C7.31,21.98,7.23,21.78,7.23,21.55z M7.23,7.71c0-0.23,0.08-0.43,0.23-0.61C7.66,6.93,7.87,6.85,8.1,6.85
	c0.22,0,0.42,0.08,0.59,0.24l1.43,1.47c0.16,0.15,0.24,0.35,0.24,0.59c0,0.24-0.08,0.44-0.24,0.6s-0.36,0.24-0.6,0.24
	c-0.24,0-0.44-0.08-0.59-0.24L7.47,8.32C7.31,8.16,7.23,7.95,7.23,7.71z M9.78,14.62c0-0.93,0.23-1.8,0.7-2.6s1.1-1.44,1.91-1.91
	s1.67-0.7,2.6-0.7c0.7,0,1.37,0.14,2.02,0.42c0.64,0.28,1.2,0.65,1.66,1.12c0.47,0.47,0.84,1.02,1.11,1.66
	c0.27,0.64,0.41,1.32,0.41,2.02c0,0.94-0.23,1.81-0.7,2.61c-0.47,0.8-1.1,1.43-1.9,1.9c-0.8,0.47-1.67,0.7-2.61,0.7
	s-1.81-0.23-2.61-0.7c-0.8-0.47-1.43-1.1-1.9-1.9C10.02,16.43,9.78,15.56,9.78,14.62z M11.48,14.62c0,0.98,0.34,1.81,1.03,2.5
	c0.68,0.69,1.51,1.04,2.49,1.04s1.81-0.35,2.5-1.04s1.04-1.52,1.04-2.5c0-0.96-0.35-1.78-1.04-2.47c-0.69-0.68-1.52-1.02-2.5-1.02
	c-0.97,0-1.8,0.34-2.48,1.02C11.82,12.84,11.48,13.66,11.48,14.62z M14.14,22.4c0-0.24,0.08-0.44,0.25-0.6s0.37-0.24,0.6-0.24
	c0.24,0,0.45,0.08,0.61,0.24s0.24,0.36,0.24,0.6v1.99c0,0.24-0.08,0.45-0.25,0.62c-0.17,0.17-0.37,0.25-0.6,0.25
	s-0.44-0.08-0.6-0.25c-0.17-0.17-0.25-0.38-0.25-0.62V22.4z M14.14,6.9V4.86c0-0.23,0.08-0.43,0.25-0.6C14.56,4.09,14.76,4,15,4
	s0.43,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6V6.9c0,0.23-0.08,0.42-0.25,0.58S15.23,7.71,15,7.71s-0.44-0.08-0.6-0.23
	S14.14,7.13,14.14,6.9z M19.66,20.08c0-0.23,0.08-0.42,0.23-0.56c0.15-0.16,0.34-0.23,0.56-0.23c0.24,0,0.44,0.08,0.6,0.23
	l1.46,1.43c0.16,0.17,0.24,0.38,0.24,0.61c0,0.23-0.08,0.43-0.24,0.59c-0.4,0.31-0.8,0.31-1.2,0l-1.42-1.42
	C19.74,20.55,19.66,20.34,19.66,20.08z M19.66,9.16c0-0.25,0.08-0.45,0.23-0.59l1.42-1.47c0.17-0.16,0.37-0.24,0.59-0.24
	c0.24,0,0.44,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6c0,0.25-0.08,0.46-0.24,0.62l-1.46,1.43c-0.18,0.16-0.38,0.24-0.6,0.24
	c-0.23,0-0.41-0.08-0.56-0.24S19.66,9.4,19.66,9.16z M21.92,14.62c0-0.24,0.08-0.44,0.24-0.62c0.16-0.16,0.35-0.24,0.57-0.24h2.02
	c0.23,0,0.43,0.09,0.6,0.26c0.17,0.17,0.26,0.37,0.26,0.6s-0.09,0.43-0.26,0.6c-0.17,0.17-0.37,0.25-0.6,0.25h-2.02
	c-0.23,0-0.43-0.08-0.58-0.25S21.92,14.86,21.92,14.62z`},child:[]}]})(t)}function vC(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M7.56,17.19c0-0.88,0.24-1.89,0.72-3.03s1.1-2.25,1.86-3.31c1.56-2.06,2.92-3.62,4.06-4.67l0.75-0.72
	c0.25,0.26,0.53,0.5,0.83,0.72c0.41,0.42,1.04,1.11,1.88,2.09s1.57,1.85,2.17,2.65c0.71,1.01,1.32,2.1,1.81,3.25
	s0.74,2.16,0.74,3.03c0,1-0.19,1.95-0.58,2.86c-0.39,0.91-0.91,1.7-1.57,2.36c-0.66,0.66-1.45,1.19-2.37,1.58
	c-0.92,0.39-1.89,0.59-2.91,0.59c-1,0-1.95-0.19-2.86-0.57c-0.91-0.38-1.7-0.89-2.36-1.55c-0.66-0.65-1.19-1.44-1.58-2.35
	S7.56,18.23,7.56,17.19z M9.82,14.26c0,0.83,0.17,1.49,0.52,1.99c0.35,0.49,0.88,0.74,1.59,0.74c0.72,0,1.25-0.25,1.61-0.74
	c0.35-0.49,0.53-1.15,0.54-1.99c-0.01-0.84-0.19-1.5-0.54-2c-0.35-0.49-0.89-0.74-1.61-0.74c-0.71,0-1.24,0.25-1.59,0.74
	C9.99,12.76,9.82,13.42,9.82,14.26z M11.39,14.26c0-0.15,0-0.27,0-0.35s0.01-0.19,0.02-0.33c0.01-0.14,0.02-0.25,0.05-0.32
	s0.05-0.16,0.09-0.24c0.04-0.08,0.09-0.15,0.15-0.18c0.07-0.04,0.14-0.06,0.23-0.06c0.14,0,0.25,0.04,0.33,0.12s0.14,0.21,0.17,0.38
	c0.03,0.18,0.05,0.32,0.06,0.45s0.01,0.3,0.01,0.52c0,0.23,0,0.4-0.01,0.52c-0.01,0.12-0.03,0.27-0.06,0.45
	c-0.03,0.17-0.09,0.3-0.17,0.38s-0.19,0.12-0.33,0.12c-0.09,0-0.16-0.02-0.23-0.06c-0.07-0.04-0.12-0.1-0.15-0.18
	c-0.04-0.08-0.07-0.17-0.09-0.24c-0.02-0.08-0.04-0.19-0.05-0.32c-0.01-0.14-0.02-0.25-0.02-0.32S11.39,14.41,11.39,14.26z
	 M11.98,22.01h1.32l4.99-10.74h-1.35L11.98,22.01z M16.28,19.02c0.01,0.84,0.2,1.5,0.55,2c0.35,0.49,0.89,0.74,1.6,0.74
	c0.72,0,1.25-0.25,1.6-0.74c0.35-0.49,0.52-1.16,0.53-2c-0.01-0.84-0.18-1.5-0.53-1.99c-0.35-0.49-0.88-0.74-1.6-0.74
	c-0.71,0-1.25,0.25-1.6,0.74C16.47,17.52,16.29,18.18,16.28,19.02z M17.85,19.02c0-0.23,0-0.4,0.01-0.52
	c0.01-0.12,0.03-0.27,0.06-0.45s0.09-0.3,0.17-0.38s0.19-0.12,0.33-0.12c0.09,0,0.17,0.02,0.24,0.06c0.07,0.04,0.12,0.1,0.16,0.19
	c0.04,0.09,0.07,0.17,0.1,0.24s0.04,0.18,0.05,0.32l0.01,0.32l0,0.34c0,0.16,0,0.28,0,0.35l-0.01,0.32l-0.05,0.32l-0.1,0.24
	l-0.16,0.19l-0.24,0.06c-0.14,0-0.25-0.04-0.33-0.12s-0.14-0.21-0.17-0.38c-0.03-0.18-0.05-0.33-0.06-0.45S17.85,19.25,17.85,19.02z
	`},child:[]}]})(t)}function xC(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.64,16.91c0-1.15,0.36-2.17,1.08-3.07c0.72-0.9,1.63-1.47,2.73-1.73c0.31-1.36,1.02-2.48,2.11-3.36s2.34-1.31,3.75-1.31
	c1.38,0,2.6,0.43,3.68,1.28c1.08,0.85,1.78,1.95,2.1,3.29h0.32c0.89,0,1.72,0.22,2.48,0.65s1.37,1.03,1.81,1.78
	c0.44,0.75,0.67,1.58,0.67,2.47c0,0.88-0.21,1.69-0.63,2.44c-0.42,0.75-1,1.35-1.73,1.8c-0.73,0.45-1.53,0.69-2.4,0.71
	c-0.13,0-0.2-0.06-0.2-0.17v-1.33c0-0.12,0.07-0.18,0.2-0.18c0.85-0.04,1.58-0.38,2.18-1.02s0.9-1.39,0.9-2.26s-0.33-1.62-0.98-2.26
	s-1.42-0.96-2.31-0.96h-1.61c-0.12,0-0.18-0.06-0.18-0.17l-0.08-0.58c-0.11-1.08-0.58-1.99-1.39-2.71
	c-0.82-0.73-1.76-1.09-2.85-1.09c-1.09,0-2.05,0.36-2.85,1.09c-0.81,0.73-1.26,1.63-1.36,2.71l-0.07,0.53c0,0.12-0.07,0.19-0.2,0.19
	l-0.53,0.03c-0.83,0.1-1.53,0.46-2.1,1.07s-0.85,1.33-0.85,2.16c0,0.87,0.3,1.62,0.9,2.26s1.33,0.98,2.18,1.02
	c0.11,0,0.17,0.06,0.17,0.18v1.33c0,0.11-0.06,0.17-0.17,0.17c-1.34-0.06-2.47-0.57-3.4-1.53S4.64,18.24,4.64,16.91z M9.99,23.6
	c0-0.04,0.01-0.11,0.04-0.2l1.63-5.77c0.06-0.19,0.17-0.34,0.32-0.44c0.15-0.1,0.31-0.15,0.46-0.15c0.07,0,0.15,0.01,0.24,0.03
	c0.24,0.04,0.42,0.17,0.54,0.37c0.12,0.2,0.15,0.42,0.08,0.67l-1.63,5.73c-0.12,0.43-0.4,0.64-0.82,0.64
	c-0.04,0-0.07-0.01-0.11-0.02c-0.06-0.02-0.09-0.03-0.1-0.03c-0.22-0.06-0.38-0.17-0.49-0.33C10.04,23.93,9.99,23.77,9.99,23.6z
	 M12.61,26.41l2.44-8.77c0.04-0.19,0.14-0.34,0.3-0.44c0.16-0.1,0.32-0.15,0.49-0.15c0.09,0,0.18,0.01,0.27,0.03
	c0.22,0.06,0.38,0.19,0.49,0.39c0.11,0.2,0.13,0.41,0.07,0.64l-2.43,8.78c-0.04,0.17-0.13,0.31-0.29,0.43
	c-0.16,0.12-0.32,0.18-0.51,0.18c-0.09,0-0.18-0.02-0.25-0.05c-0.2-0.05-0.37-0.18-0.52-0.39C12.56,26.88,12.54,26.67,12.61,26.41z
	 M16.74,23.62c0-0.04,0.01-0.11,0.04-0.23l1.63-5.77c0.06-0.19,0.16-0.34,0.3-0.44c0.15-0.1,0.3-0.15,0.46-0.15
	c0.08,0,0.17,0.01,0.26,0.03c0.21,0.06,0.36,0.16,0.46,0.31c0.1,0.15,0.15,0.31,0.15,0.47c0,0.03-0.01,0.08-0.02,0.14
	s-0.02,0.1-0.02,0.12l-1.63,5.73c-0.04,0.19-0.13,0.35-0.28,0.46s-0.32,0.17-0.51,0.17l-0.24-0.05c-0.2-0.06-0.35-0.16-0.46-0.32
	C16.79,23.94,16.74,23.78,16.74,23.62z`},child:[]}]})(t)}function $V(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.37,14.62c0-0.24,0.08-0.45,0.25-0.62c0.17-0.16,0.38-0.24,0.6-0.24h2.04c0.23,0,0.42,0.08,0.58,0.25
	c0.15,0.17,0.23,0.37,0.23,0.61S8,15.06,7.85,15.23c-0.15,0.17-0.35,0.25-0.58,0.25H5.23c-0.23,0-0.43-0.08-0.6-0.25
	C4.46,15.06,4.37,14.86,4.37,14.62z M7.23,21.55c0-0.23,0.08-0.43,0.23-0.61l1.47-1.43c0.15-0.16,0.35-0.23,0.59-0.23
	c0.24,0,0.44,0.08,0.6,0.23s0.24,0.34,0.24,0.57c0,0.24-0.08,0.46-0.24,0.64L8.7,22.14c-0.41,0.32-0.82,0.32-1.23,0
	C7.31,21.98,7.23,21.78,7.23,21.55z M7.23,7.71c0-0.23,0.08-0.43,0.23-0.61C7.66,6.93,7.87,6.85,8.1,6.85
	c0.22,0,0.42,0.08,0.59,0.24l1.43,1.47c0.16,0.15,0.24,0.35,0.24,0.59c0,0.24-0.08,0.44-0.24,0.6s-0.36,0.24-0.6,0.24
	c-0.24,0-0.44-0.08-0.59-0.24L7.47,8.32C7.31,8.16,7.23,7.95,7.23,7.71z M9.78,14.62c0-0.93,0.23-1.8,0.7-2.6s1.1-1.44,1.91-1.91
	s1.67-0.7,2.6-0.7c0.7,0,1.37,0.14,2.02,0.42c0.64,0.28,1.2,0.65,1.66,1.12c0.47,0.47,0.84,1.02,1.11,1.66
	c0.27,0.64,0.41,1.32,0.41,2.02c0,0.94-0.23,1.81-0.7,2.61c-0.47,0.8-1.1,1.43-1.9,1.9c-0.8,0.47-1.67,0.7-2.61,0.7
	s-1.81-0.23-2.61-0.7c-0.8-0.47-1.43-1.1-1.9-1.9C10.02,16.43,9.78,15.56,9.78,14.62z M14.14,22.4c0-0.24,0.08-0.44,0.25-0.6
	s0.37-0.24,0.6-0.24c0.24,0,0.45,0.08,0.61,0.24s0.24,0.36,0.24,0.6v1.99c0,0.24-0.08,0.45-0.25,0.62c-0.17,0.17-0.37,0.25-0.6,0.25
	s-0.44-0.08-0.6-0.25c-0.17-0.17-0.25-0.38-0.25-0.62V22.4z M14.14,6.9V4.86c0-0.23,0.08-0.43,0.25-0.6C14.56,4.09,14.76,4,15,4
	s0.43,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6V6.9c0,0.23-0.08,0.42-0.25,0.58S15.23,7.71,15,7.71s-0.44-0.08-0.6-0.23
	S14.14,7.13,14.14,6.9z M14.25,11.22c0.87,0.11,1.6,0.49,2.19,1.15c0.59,0.66,0.89,1.44,0.89,2.33c0,0.83-0.26,1.56-0.78,2.2
	c-0.52,0.63-1.18,1.04-1.98,1.21c0.2,0.02,0.35,0.04,0.44,0.04c0.97,0,1.81-0.35,2.5-1.04s1.04-1.52,1.04-2.5
	c0-0.96-0.35-1.78-1.04-2.47c-0.69-0.68-1.52-1.02-2.5-1.02C14.74,11.14,14.49,11.17,14.25,11.22z M19.66,20.08
	c0-0.23,0.08-0.42,0.23-0.56c0.15-0.16,0.34-0.23,0.56-0.23c0.24,0,0.44,0.08,0.6,0.23l1.46,1.43c0.16,0.17,0.24,0.38,0.24,0.61
	c0,0.23-0.08,0.43-0.24,0.59c-0.4,0.31-0.8,0.31-1.2,0l-1.42-1.42C19.74,20.55,19.66,20.34,19.66,20.08z M19.66,9.16
	c0-0.25,0.08-0.45,0.23-0.59l1.42-1.47c0.17-0.16,0.37-0.24,0.59-0.24c0.24,0,0.44,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6
	c0,0.25-0.08,0.46-0.24,0.62l-1.46,1.43c-0.18,0.16-0.38,0.24-0.6,0.24c-0.23,0-0.41-0.08-0.56-0.24S19.66,9.4,19.66,9.16z
	 M21.92,14.62c0-0.24,0.08-0.44,0.24-0.62c0.16-0.16,0.35-0.24,0.57-0.24h2.02c0.23,0,0.43,0.09,0.6,0.26
	c0.17,0.17,0.26,0.37,0.26,0.6s-0.09,0.43-0.26,0.6c-0.17,0.17-0.37,0.25-0.6,0.25h-2.02c-0.23,0-0.43-0.08-0.58-0.25
	S21.92,14.86,21.92,14.62z`},child:[]}]})(t)}function qV(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M3.1,16.97c0,0.24,0.09,0.45,0.28,0.62c0.16,0.19,0.37,0.28,0.63,0.28H18.7c0.29,0,0.53,0.1,0.73,0.3
	c0.2,0.2,0.3,0.45,0.3,0.74c0,0.29-0.1,0.53-0.3,0.72c-0.2,0.19-0.44,0.29-0.74,0.29c-0.29,0-0.54-0.1-0.73-0.29
	c-0.16-0.18-0.36-0.26-0.6-0.26c-0.25,0-0.46,0.09-0.64,0.26s-0.27,0.38-0.27,0.61c0,0.25,0.09,0.46,0.28,0.63
	c0.56,0.55,1.22,0.83,1.96,0.83c0.78,0,1.45-0.27,2.01-0.81c0.56-0.54,0.83-1.19,0.83-1.97s-0.28-1.44-0.84-2
	c-0.56-0.56-1.23-0.84-2-0.84H4.01c-0.25,0-0.46,0.09-0.64,0.26C3.19,16.51,3.1,16.72,3.1,16.97z M3.1,13.69
	c0,0.23,0.09,0.43,0.28,0.61c0.17,0.18,0.38,0.26,0.63,0.26h20.04c0.78,0,1.45-0.27,2.01-0.82c0.56-0.54,0.84-1.2,0.84-1.97
	c0-0.77-0.28-1.44-0.84-1.99s-1.23-0.83-2.01-0.83c-0.77,0-1.42,0.27-1.95,0.8c-0.18,0.16-0.27,0.38-0.27,0.67
	c0,0.26,0.09,0.47,0.26,0.63c0.17,0.16,0.38,0.24,0.63,0.24c0.24,0,0.45-0.08,0.63-0.24c0.19-0.21,0.42-0.31,0.7-0.31
	c0.29,0,0.53,0.1,0.73,0.3c0.2,0.2,0.3,0.44,0.3,0.73c0,0.29-0.1,0.53-0.3,0.72c-0.2,0.19-0.44,0.29-0.73,0.29H4.01
	c-0.25,0-0.46,0.09-0.64,0.26C3.19,13.23,3.1,13.44,3.1,13.69z`},child:[]}]})(t)}function WV(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M9.91,19.56c0-0.85,0.2-1.64,0.59-2.38s0.94-1.35,1.65-1.84V5.42c0-0.8,0.27-1.48,0.82-2.03S14.2,2.55,15,2.55
	c0.81,0,1.49,0.28,2.04,0.83c0.55,0.56,0.83,1.23,0.83,2.03v9.92c0.71,0.49,1.25,1.11,1.64,1.84s0.58,1.53,0.58,2.38
	c0,0.92-0.23,1.78-0.68,2.56s-1.07,1.4-1.85,1.85s-1.63,0.68-2.56,0.68c-0.92,0-1.77-0.23-2.55-0.68s-1.4-1.07-1.86-1.85
	S9.91,20.48,9.91,19.56z M11.67,19.56c0,0.93,0.33,1.73,0.98,2.39c0.65,0.66,1.44,0.99,2.36,0.99c0.93,0,1.73-0.33,2.4-1
	s1.01-1.46,1.01-2.37c0-0.62-0.16-1.2-0.48-1.73c-0.32-0.53-0.76-0.94-1.32-1.23l-0.28-0.14c-0.1-0.04-0.15-0.14-0.15-0.29V5.42
	c0-0.32-0.11-0.59-0.34-0.81C15.62,4.4,15.34,4.29,15,4.29c-0.32,0-0.6,0.11-0.83,0.32c-0.23,0.21-0.34,0.48-0.34,0.81v10.74
	c0,0.15-0.05,0.25-0.14,0.29l-0.27,0.14c-0.55,0.29-0.98,0.7-1.29,1.23C11.82,18.35,11.67,18.92,11.67,19.56z`},child:[]}]})(t)}function KV(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M9.91,19.56c0-0.85,0.2-1.64,0.59-2.38s0.94-1.35,1.65-1.84V5.42c0-0.8,0.27-1.48,0.82-2.03S14.2,2.55,15,2.55
	c0.81,0,1.49,0.28,2.04,0.83c0.55,0.56,0.83,1.23,0.83,2.03v9.92c0.71,0.49,1.25,1.11,1.64,1.84s0.58,1.53,0.58,2.38
	c0,0.92-0.23,1.78-0.68,2.56s-1.07,1.4-1.85,1.85s-1.63,0.68-2.56,0.68c-0.92,0-1.77-0.23-2.55-0.68s-1.4-1.07-1.86-1.85
	S9.91,20.48,9.91,19.56z M11.67,19.56c0,0.93,0.33,1.73,0.98,2.39c0.65,0.66,1.44,0.99,2.36,0.99c0.93,0,1.73-0.33,2.4-1
	s1.01-1.46,1.01-2.37c0-0.62-0.16-1.2-0.48-1.73c-0.32-0.53-0.76-0.94-1.32-1.23l-0.28-0.14c-0.1-0.04-0.15-0.14-0.15-0.29V5.42
	c0-0.32-0.11-0.59-0.34-0.81C15.62,4.4,15.34,4.29,15,4.29c-0.32,0-0.6,0.11-0.83,0.32c-0.23,0.21-0.34,0.48-0.34,0.81v10.74
	c0,0.15-0.05,0.25-0.14,0.29l-0.27,0.14c-0.55,0.29-0.98,0.7-1.29,1.23C11.82,18.35,11.67,18.92,11.67,19.56z M12.45,19.56
	c0,0.71,0.24,1.32,0.73,1.82s1.07,0.75,1.76,0.75s1.28-0.25,1.79-0.75c0.51-0.5,0.76-1.11,0.76-1.81c0-0.63-0.22-1.19-0.65-1.67
	c-0.43-0.48-0.96-0.77-1.58-0.85V9.69c0-0.06-0.03-0.13-0.1-0.19c-0.07-0.07-0.14-0.1-0.22-0.1c-0.09,0-0.16,0.03-0.21,0.08
	c-0.05,0.06-0.08,0.12-0.08,0.21v7.34c-0.61,0.09-1.13,0.37-1.56,0.85C12.66,18.37,12.45,18.92,12.45,19.56z`},child:[]}]})(t)}function XV(t){return vs({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.65,15.5c0-0.22,0.08-0.41,0.23-0.56c0.16-0.15,0.35-0.22,0.57-0.22h12.08c0.22,0,0.4,0.07,0.54,0.22
	c0.14,0.15,0.22,0.34,0.22,0.57c0,0.22-0.07,0.4-0.22,0.54c-0.14,0.14-0.32,0.22-0.54,0.22H5.45c-0.22,0-0.42-0.07-0.57-0.22
	C4.72,15.9,4.65,15.72,4.65,15.5z M7.06,12.6c0-0.22,0.08-0.4,0.23-0.55c0.15-0.15,0.34-0.23,0.56-0.23h12.09
	c0.21,0,0.39,0.08,0.54,0.23c0.15,0.15,0.22,0.33,0.22,0.55c0,0.22-0.07,0.4-0.22,0.56c-0.15,0.15-0.33,0.23-0.54,0.23H7.86
	c-0.22,0-0.41-0.08-0.56-0.23S7.06,12.82,7.06,12.6z M8.68,18.34c0-0.21,0.08-0.39,0.24-0.54c0.14-0.14,0.32-0.22,0.54-0.22h12.1
	c0.22,0,0.41,0.07,0.56,0.22c0.15,0.14,0.22,0.32,0.22,0.54s-0.08,0.41-0.23,0.56s-0.34,0.23-0.56,0.23H9.46
	c-0.22,0-0.4-0.08-0.56-0.23S8.68,18.56,8.68,18.34z M19.26,15.5c0-0.23,0.07-0.42,0.22-0.57c0.15-0.15,0.34-0.22,0.57-0.22h4.52
	c0.23,0,0.42,0.07,0.57,0.22c0.15,0.15,0.22,0.34,0.22,0.56c0,0.22-0.07,0.4-0.22,0.54c-0.15,0.14-0.34,0.22-0.56,0.22h-4.52
	c-0.23,0-0.42-0.07-0.57-0.22C19.33,15.9,19.26,15.72,19.26,15.5z`},child:[]}]})(t)}function Xce(){const[t,e]=Ae.useState(""),[r,n]=Ae.useState(""),[s,o]=Ae.useState([]),[c,u]=Ae.useState(""),[i,m]=Ae.useState(""),[g,C]=Ae.useState(""),B=async()=>{try{const oe=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&hourly=temperature_2m,relative_humidity_2m,precipitation,et0_fao_evapotranspiration,shortwave_radiation,wind_speed_1000hPa&forecast_days=10`,K=await Pm.get(oe);console.log(oe);const de=K.data.hourly,we=Array.from({length:10}).map((J,Z)=>({date:new Date(Date.now()+Z*24*60*60*1e3),temperature:de.temperature_2m.slice(Z*24,(Z+1)*24).reduce((Ie,be)=>Ie+be,0)/24,humidity:de.relative_humidity_2m.slice(Z*24,(Z+1)*24).reduce((Ie,be)=>Ie+be,0)/24,windSpeed:de.wind_speed_1000hPa.slice(Z*24,(Z+1)*24).reduce((Ie,be)=>Ie+be,0)/24,precipitation:de.precipitation.slice(Z*24,(Z+1)*24).reduce((Ie,be)=>Ie+be,0)}));o(we)}catch(oe){console.error("Error fetching weather data:",oe)}},S=async()=>{try{const K=`https://api.mapbox.com/geocoding/v5/mapbox.places/${r},${t}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,we=(await Pm.get(K)).data.features[0];we&&(u(we.text),m(we.context.find(J=>J.id.includes("country")).text),C(we.context.find(J=>J.id.includes("region")).text))}catch(oe){console.error("Error fetching location data:",oe)}},P=()=>{B(),S()},j=s.map((oe,K)=>({day:oe.date.toLocaleDateString("en-US",{weekday:"long"}),date:oe.date,avgTemp:oe.temperature.toFixed(1),minTemp:(oe.temperature-5).toFixed(1),maxTemp:(oe.temperature+5).toFixed(1),avgHumidity:oe.humidity.toFixed(1),avgWind:oe.windSpeed.toFixed(1),totalPrecipitation:oe.precipitation.toFixed(1),forecastComment:`Expect ${oe.precipitation>5?"rain":"clear skies"}.`})),D=s.map(oe=>oe.date.toLocaleDateString("en-US")),F=s.map(oe=>oe.temperature),R=s.map(oe=>oe.humidity),V=s.map(oe=>oe.windSpeed),Y=s.map(oe=>oe.precipitation),te={labels:D,datasets:[{label:"Temperature (C)",data:F,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,tension:.4},{label:"Humidity (%)",data:R,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:2,tension:.4},{label:"Wind Speed (km/h)",data:V,backgroundColor:"rgba(255, 206, 86, 0.2)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:2,tension:.4},{label:"Precipitation (mm)",data:Y,backgroundColor:"rgba(255, 159, 64, 0.2)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:2,tension:.4}]},se={responsive:!0,plugins:{legend:{position:"bottom",labels:{color:"#333",font:{size:14}}},tooltip:{callbacks:{label:oe=>`Value: ${oe.raw}`}}},scales:{x:{ticks:{color:"#333",font:{size:12}}},y:{ticks:{color:"#333",font:{size:12}}}}};return p.jsx("div",{className:"bg-white-100 min-h-screen p-6",children:p.jsx("div",{className:"container mx-auto",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-500",children:"10-Day Weather Forecast"}),p.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Enter the latitude and longitude coordinates to view a 10-day forecast, including temperature, humidity, wind speed, and precipitation."}),p.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Latitude"}),p.jsx("input",{type:"text",placeholder:"Enter Latitude",value:t,onChange:oe=>e(oe.target.value),className:"p-2 border rounded"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Longitude"}),p.jsx("input",{type:"text",placeholder:"Enter Longitude",value:r,onChange:oe=>n(oe.target.value),className:"p-2 border rounded"})]}),p.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 self-center mt-4 md:mt-0",children:"Search"})]}),p.jsx("div",{className:"mb-6",children:p.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",c,", ",g,", ",i," "]})}),p.jsxs("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-lg mb-6 flex items-start gap-2",children:[p.jsx(Wce,{className:"text-blue-500 text-xl mt-1"}),p.jsxs("p",{className:"text-sm",children:[p.jsx("strong",{children:"Note:"})," The horizontal axis (",p.jsx("span",{className:"font-semibold",children:"x-axis"}),") represents the date, while the vertical axis (",p.jsx("span",{className:"font-semibold",children:"y-axis"}),") shows the values for temperature, humidity, wind speed, and precipitation. This will help in analyzing weather trends over the 10-day period."]})]}),p.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[p.jsxs("div",{className:"bg-white rounded-lg shadow p-4 w-full md:w-1/3 overflow-y-auto max-h-[400px]",children:[p.jsx("h2",{className:"text-xl font-semibold mb-3",children:"10-Day Forecast"}),j.length>0?p.jsx("div",{className:"space-y-3",children:j.map((oe,K)=>p.jsxs("div",{className:"p-3 border rounded hover:shadow-md transition-shadow duration-200",children:[p.jsxs("h3",{className:"text-lg font-normal mb-1",children:[oe.day," - ",oe.date instanceof Date?oe.date.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"Invalid Date"]}),p.jsxs("div",{className:"text-gray-600 space-y-1",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(KV,{className:"text-blue-500 w-4 h-4 mr-2"}),p.jsxs("p",{className:"text-sm",children:["Avg Temp: ",oe.avgTemp,"C"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(WV,{className:"text-orange-500 w-4 h-4 mr-2"}),p.jsxs("p",{className:"text-sm",children:["Min: ",oe.minTemp,"C, Max: ",oe.maxTemp,"C"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(vC,{className:"text-teal-500 w-4 h-4 mr-2"}),p.jsxs("p",{className:"text-sm",children:["Humidity: ",oe.avgHumidity,"%"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(qV,{className:"text-gray-500 w-4 h-4 mr-2"}),p.jsxs("p",{className:"text-sm",children:["Wind: ",oe.avgWind," km/h"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(xC,{className:"text-blue-700 w-4 h-4 mr-2"}),p.jsxs("p",{className:"text-sm",children:["Precipitation: ",oe.totalPrecipitation," mm"]})]})]}),p.jsx("p",{className:"mt-1 text-blue-500 text-sm",children:oe.forecastComment})]},K))}):p.jsx("p",{className:"text-gray-500 text-sm",children:"No forecast available."})]}),p.jsx("div",{className:"bg-white rounded-lg shadow p-6 w-full md:w-2/3",children:p.jsx(I0,{data:te,options:se})})]})]})})})}var YV={exports:{}};(function(t,e){var r={};(function(n,s){t.exports=s()})(Ho,function(){var n,s,o;function c(i,m){if(!n)n=m;else if(!s)s=m;else{var g="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk); self.onerror = null;",C={};n(C),o=m(C),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(o.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}c(["exports"],function(i){function m(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g,C={},B={};function S(){if(g)return B;g=1,Object.defineProperty(B,"__esModule",{value:!0}),B.setMatrixArrayType=function(_){B.ARRAY_TYPE=a=_},B.toRadian=function(_){return _*A},B.equals=function(_,y){return Math.abs(_-y)<=f*Math.max(1,Math.abs(_),Math.abs(y))},B.RANDOM=B.ARRAY_TYPE=B.EPSILON=void 0;var f=1e-6;B.EPSILON=f;var a=typeof Float32Array<"u"?Float32Array:Array;B.ARRAY_TYPE=a;var d=Math.random;B.RANDOM=d;var A=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var _=0,y=arguments.length;y--;)_+=arguments[y]*arguments[y];return Math.sqrt(_)}),B}var P,j={};function D(){if(P)return j;function f(y){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(y)}P=1,Object.defineProperty(j,"__esModule",{value:!0}),j.create=function(){var y=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y},j.clone=function(y){var b=new a.ARRAY_TYPE(4);return b[0]=y[0],b[1]=y[1],b[2]=y[2],b[3]=y[3],b},j.copy=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y},j.identity=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=1,y},j.fromValues=function(y,b,N,z){var G=new a.ARRAY_TYPE(4);return G[0]=y,G[1]=b,G[2]=N,G[3]=z,G},j.set=function(y,b,N,z,G){return y[0]=b,y[1]=N,y[2]=z,y[3]=G,y},j.transpose=function(y,b){if(y===b){var N=b[1];y[1]=b[2],y[2]=N}else y[0]=b[0],y[1]=b[2],y[2]=b[1],y[3]=b[3];return y},j.invert=function(y,b){var N=b[0],z=b[1],G=b[2],T=b[3],O=N*T-G*z;return O?(y[0]=T*(O=1/O),y[1]=-z*O,y[2]=-G*O,y[3]=N*O,y):null},j.adjoint=function(y,b){var N=b[0];return y[0]=b[3],y[1]=-b[1],y[2]=-b[2],y[3]=N,y},j.determinant=function(y){return y[0]*y[3]-y[2]*y[1]},j.multiply=A,j.rotate=function(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=Math.sin(N),U=Math.cos(N);return y[0]=z*U+T*H,y[1]=G*U+O*H,y[2]=z*-H+T*U,y[3]=G*-H+O*U,y},j.scale=function(y,b,N){var z=b[1],G=b[2],T=b[3],O=N[0],H=N[1];return y[0]=b[0]*O,y[1]=z*O,y[2]=G*H,y[3]=T*H,y},j.fromRotation=function(y,b){var N=Math.sin(b),z=Math.cos(b);return y[0]=z,y[1]=N,y[2]=-N,y[3]=z,y},j.fromScaling=function(y,b){return y[0]=b[0],y[1]=0,y[2]=0,y[3]=b[1],y},j.str=function(y){return"mat2("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+")"},j.frob=function(y){return Math.hypot(y[0],y[1],y[2],y[3])},j.LDU=function(y,b,N,z){return y[2]=z[2]/z[0],N[0]=z[0],N[1]=z[1],N[3]=z[3]-y[2]*N[1],[y,b,N]},j.add=function(y,b,N){return y[0]=b[0]+N[0],y[1]=b[1]+N[1],y[2]=b[2]+N[2],y[3]=b[3]+N[3],y},j.subtract=_,j.exactEquals=function(y,b){return y[0]===b[0]&&y[1]===b[1]&&y[2]===b[2]&&y[3]===b[3]},j.equals=function(y,b){var N=y[0],z=y[1],G=y[2],T=y[3],O=b[0],H=b[1],U=b[2],Q=b[3];return Math.abs(N-O)<=a.EPSILON*Math.max(1,Math.abs(N),Math.abs(O))&&Math.abs(z-H)<=a.EPSILON*Math.max(1,Math.abs(z),Math.abs(H))&&Math.abs(G-U)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(U))&&Math.abs(T-Q)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(Q))},j.multiplyScalar=function(y,b,N){return y[0]=b[0]*N,y[1]=b[1]*N,y[2]=b[2]*N,y[3]=b[3]*N,y},j.multiplyScalarAndAdd=function(y,b,N,z){return y[0]=b[0]+N[0]*z,y[1]=b[1]+N[1]*z,y[2]=b[2]+N[2]*z,y[3]=b[3]+N[3]*z,y},j.sub=j.mul=void 0;var a=function(y,b){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var N=d(void 0);if(N&&N.has(y))return N.get(y);var z={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in y)if(T!=="default"&&Object.prototype.hasOwnProperty.call(y,T)){var O=G?Object.getOwnPropertyDescriptor(y,T):null;O&&(O.get||O.set)?Object.defineProperty(z,T,O):z[T]=y[T]}return z.default=y,N&&N.set(y,z),z}(S());function d(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,N=new WeakMap;return(d=function(z){return z?N:b})(y)}function A(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=N[0],U=N[1],Q=N[2],W=N[3];return y[0]=z*H+T*U,y[1]=G*H+O*U,y[2]=z*Q+T*W,y[3]=G*Q+O*W,y}function _(y,b,N){return y[0]=b[0]-N[0],y[1]=b[1]-N[1],y[2]=b[2]-N[2],y[3]=b[3]-N[3],y}return j.mul=A,j.sub=_,j}var F,R={};function V(){if(F)return R;function f(y){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(y)}F=1,Object.defineProperty(R,"__esModule",{value:!0}),R.create=function(){var y=new a.ARRAY_TYPE(6);return a.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0,y[4]=0,y[5]=0),y[0]=1,y[3]=1,y},R.clone=function(y){var b=new a.ARRAY_TYPE(6);return b[0]=y[0],b[1]=y[1],b[2]=y[2],b[3]=y[3],b[4]=y[4],b[5]=y[5],b},R.copy=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y[4]=b[4],y[5]=b[5],y},R.identity=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=1,y[4]=0,y[5]=0,y},R.fromValues=function(y,b,N,z,G,T){var O=new a.ARRAY_TYPE(6);return O[0]=y,O[1]=b,O[2]=N,O[3]=z,O[4]=G,O[5]=T,O},R.set=function(y,b,N,z,G,T,O){return y[0]=b,y[1]=N,y[2]=z,y[3]=G,y[4]=T,y[5]=O,y},R.invert=function(y,b){var N=b[0],z=b[1],G=b[2],T=b[3],O=b[4],H=b[5],U=N*T-z*G;return U?(y[0]=T*(U=1/U),y[1]=-z*U,y[2]=-G*U,y[3]=N*U,y[4]=(G*H-T*O)*U,y[5]=(z*O-N*H)*U,y):null},R.determinant=function(y){return y[0]*y[3]-y[1]*y[2]},R.multiply=A,R.rotate=function(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=b[4],U=b[5],Q=Math.sin(N),W=Math.cos(N);return y[0]=z*W+T*Q,y[1]=G*W+O*Q,y[2]=z*-Q+T*W,y[3]=G*-Q+O*W,y[4]=H,y[5]=U,y},R.scale=function(y,b,N){var z=b[1],G=b[2],T=b[3],O=b[4],H=b[5],U=N[0],Q=N[1];return y[0]=b[0]*U,y[1]=z*U,y[2]=G*Q,y[3]=T*Q,y[4]=O,y[5]=H,y},R.translate=function(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=b[4],U=b[5],Q=N[0],W=N[1];return y[0]=z,y[1]=G,y[2]=T,y[3]=O,y[4]=z*Q+T*W+H,y[5]=G*Q+O*W+U,y},R.fromRotation=function(y,b){var N=Math.sin(b),z=Math.cos(b);return y[0]=z,y[1]=N,y[2]=-N,y[3]=z,y[4]=0,y[5]=0,y},R.fromScaling=function(y,b){return y[0]=b[0],y[1]=0,y[2]=0,y[3]=b[1],y[4]=0,y[5]=0,y},R.fromTranslation=function(y,b){return y[0]=1,y[1]=0,y[2]=0,y[3]=1,y[4]=b[0],y[5]=b[1],y},R.str=function(y){return"mat2d("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+")"},R.frob=function(y){return Math.hypot(y[0],y[1],y[2],y[3],y[4],y[5],1)},R.add=function(y,b,N){return y[0]=b[0]+N[0],y[1]=b[1]+N[1],y[2]=b[2]+N[2],y[3]=b[3]+N[3],y[4]=b[4]+N[4],y[5]=b[5]+N[5],y},R.subtract=_,R.multiplyScalar=function(y,b,N){return y[0]=b[0]*N,y[1]=b[1]*N,y[2]=b[2]*N,y[3]=b[3]*N,y[4]=b[4]*N,y[5]=b[5]*N,y},R.multiplyScalarAndAdd=function(y,b,N,z){return y[0]=b[0]+N[0]*z,y[1]=b[1]+N[1]*z,y[2]=b[2]+N[2]*z,y[3]=b[3]+N[3]*z,y[4]=b[4]+N[4]*z,y[5]=b[5]+N[5]*z,y},R.exactEquals=function(y,b){return y[0]===b[0]&&y[1]===b[1]&&y[2]===b[2]&&y[3]===b[3]&&y[4]===b[4]&&y[5]===b[5]},R.equals=function(y,b){var N=y[0],z=y[1],G=y[2],T=y[3],O=y[4],H=y[5],U=b[0],Q=b[1],W=b[2],re=b[3],ue=b[4],Be=b[5];return Math.abs(N-U)<=a.EPSILON*Math.max(1,Math.abs(N),Math.abs(U))&&Math.abs(z-Q)<=a.EPSILON*Math.max(1,Math.abs(z),Math.abs(Q))&&Math.abs(G-W)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(W))&&Math.abs(T-re)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(re))&&Math.abs(O-ue)<=a.EPSILON*Math.max(1,Math.abs(O),Math.abs(ue))&&Math.abs(H-Be)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(Be))},R.sub=R.mul=void 0;var a=function(y,b){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var N=d(void 0);if(N&&N.has(y))return N.get(y);var z={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in y)if(T!=="default"&&Object.prototype.hasOwnProperty.call(y,T)){var O=G?Object.getOwnPropertyDescriptor(y,T):null;O&&(O.get||O.set)?Object.defineProperty(z,T,O):z[T]=y[T]}return z.default=y,N&&N.set(y,z),z}(S());function d(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,N=new WeakMap;return(d=function(z){return z?N:b})(y)}function A(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=b[4],U=b[5],Q=N[0],W=N[1],re=N[2],ue=N[3],Be=N[4],Te=N[5];return y[0]=z*Q+T*W,y[1]=G*Q+O*W,y[2]=z*re+T*ue,y[3]=G*re+O*ue,y[4]=z*Be+T*Te+H,y[5]=G*Be+O*Te+U,y}function _(y,b,N){return y[0]=b[0]-N[0],y[1]=b[1]-N[1],y[2]=b[2]-N[2],y[3]=b[3]-N[3],y[4]=b[4]-N[4],y[5]=b[5]-N[5],y}return R.mul=A,R.sub=_,R}var Y,te={};function se(){if(Y)return te;function f(y){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(y)}Y=1,Object.defineProperty(te,"__esModule",{value:!0}),te.create=function(){var y=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y},te.fromMat4=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[4],y[4]=b[5],y[5]=b[6],y[6]=b[8],y[7]=b[9],y[8]=b[10],y},te.clone=function(y){var b=new a.ARRAY_TYPE(9);return b[0]=y[0],b[1]=y[1],b[2]=y[2],b[3]=y[3],b[4]=y[4],b[5]=y[5],b[6]=y[6],b[7]=y[7],b[8]=y[8],b},te.copy=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y[4]=b[4],y[5]=b[5],y[6]=b[6],y[7]=b[7],y[8]=b[8],y},te.fromValues=function(y,b,N,z,G,T,O,H,U){var Q=new a.ARRAY_TYPE(9);return Q[0]=y,Q[1]=b,Q[2]=N,Q[3]=z,Q[4]=G,Q[5]=T,Q[6]=O,Q[7]=H,Q[8]=U,Q},te.set=function(y,b,N,z,G,T,O,H,U,Q){return y[0]=b,y[1]=N,y[2]=z,y[3]=G,y[4]=T,y[5]=O,y[6]=H,y[7]=U,y[8]=Q,y},te.identity=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=1,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},te.transpose=function(y,b){if(y===b){var N=b[1],z=b[2],G=b[5];y[1]=b[3],y[2]=b[6],y[3]=N,y[5]=b[7],y[6]=z,y[7]=G}else y[0]=b[0],y[1]=b[3],y[2]=b[6],y[3]=b[1],y[4]=b[4],y[5]=b[7],y[6]=b[2],y[7]=b[5],y[8]=b[8];return y},te.invert=function(y,b){var N=b[0],z=b[1],G=b[2],T=b[3],O=b[4],H=b[5],U=b[6],Q=b[7],W=b[8],re=W*O-H*Q,ue=-W*T+H*U,Be=Q*T-O*U,Te=N*re+z*ue+G*Be;return Te?(y[0]=re*(Te=1/Te),y[1]=(-W*z+G*Q)*Te,y[2]=(H*z-G*O)*Te,y[3]=ue*Te,y[4]=(W*N-G*U)*Te,y[5]=(-H*N+G*T)*Te,y[6]=Be*Te,y[7]=(-Q*N+z*U)*Te,y[8]=(O*N-z*T)*Te,y):null},te.adjoint=function(y,b){var N=b[0],z=b[1],G=b[2],T=b[3],O=b[4],H=b[5],U=b[6],Q=b[7],W=b[8];return y[0]=O*W-H*Q,y[1]=G*Q-z*W,y[2]=z*H-G*O,y[3]=H*U-T*W,y[4]=N*W-G*U,y[5]=G*T-N*H,y[6]=T*Q-O*U,y[7]=z*U-N*Q,y[8]=N*O-z*T,y},te.determinant=function(y){var b=y[3],N=y[4],z=y[5],G=y[6],T=y[7],O=y[8];return y[0]*(O*N-z*T)+y[1]*(-O*b+z*G)+y[2]*(T*b-N*G)},te.multiply=A,te.translate=function(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=b[4],U=b[5],Q=b[6],W=b[7],re=b[8],ue=N[0],Be=N[1];return y[0]=z,y[1]=G,y[2]=T,y[3]=O,y[4]=H,y[5]=U,y[6]=ue*z+Be*O+Q,y[7]=ue*G+Be*H+W,y[8]=ue*T+Be*U+re,y},te.rotate=function(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=b[4],U=b[5],Q=b[6],W=b[7],re=b[8],ue=Math.sin(N),Be=Math.cos(N);return y[0]=Be*z+ue*O,y[1]=Be*G+ue*H,y[2]=Be*T+ue*U,y[3]=Be*O-ue*z,y[4]=Be*H-ue*G,y[5]=Be*U-ue*T,y[6]=Q,y[7]=W,y[8]=re,y},te.scale=function(y,b,N){var z=N[0],G=N[1];return y[0]=z*b[0],y[1]=z*b[1],y[2]=z*b[2],y[3]=G*b[3],y[4]=G*b[4],y[5]=G*b[5],y[6]=b[6],y[7]=b[7],y[8]=b[8],y},te.fromTranslation=function(y,b){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=1,y[5]=0,y[6]=b[0],y[7]=b[1],y[8]=1,y},te.fromRotation=function(y,b){var N=Math.sin(b),z=Math.cos(b);return y[0]=z,y[1]=N,y[2]=0,y[3]=-N,y[4]=z,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},te.fromScaling=function(y,b){return y[0]=b[0],y[1]=0,y[2]=0,y[3]=0,y[4]=b[1],y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},te.fromMat2d=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=0,y[3]=b[2],y[4]=b[3],y[5]=0,y[6]=b[4],y[7]=b[5],y[8]=1,y},te.fromQuat=function(y,b){var N=b[0],z=b[1],G=b[2],T=b[3],O=N+N,H=z+z,U=G+G,Q=N*O,W=z*O,re=z*H,ue=G*O,Be=G*H,Te=G*U,he=T*O,ke=T*H,Ve=T*U;return y[0]=1-re-Te,y[3]=W-Ve,y[6]=ue+ke,y[1]=W+Ve,y[4]=1-Q-Te,y[7]=Be-he,y[2]=ue-ke,y[5]=Be+he,y[8]=1-Q-re,y},te.normalFromMat4=function(y,b){var N=b[0],z=b[1],G=b[2],T=b[3],O=b[4],H=b[5],U=b[6],Q=b[7],W=b[8],re=b[9],ue=b[10],Be=b[11],Te=b[12],he=b[13],ke=b[14],Ve=b[15],rt=N*H-z*O,dt=N*U-G*O,ft=N*Q-T*O,at=z*U-G*H,Et=z*Q-T*H,yt=G*Q-T*U,Nt=W*he-re*Te,zt=W*ke-ue*Te,Gt=W*Ve-Be*Te,$t=re*ke-ue*he,Zt=re*Ve-Be*he,vr=ue*Ve-Be*ke,tr=rt*vr-dt*Zt+ft*$t+at*Gt-Et*zt+yt*Nt;return tr?(y[0]=(H*vr-U*Zt+Q*$t)*(tr=1/tr),y[1]=(U*Gt-O*vr-Q*zt)*tr,y[2]=(O*Zt-H*Gt+Q*Nt)*tr,y[3]=(G*Zt-z*vr-T*$t)*tr,y[4]=(N*vr-G*Gt+T*zt)*tr,y[5]=(z*Gt-N*Zt-T*Nt)*tr,y[6]=(he*yt-ke*Et+Ve*at)*tr,y[7]=(ke*ft-Te*yt-Ve*dt)*tr,y[8]=(Te*Et-he*ft+Ve*rt)*tr,y):null},te.projection=function(y,b,N){return y[0]=2/b,y[1]=0,y[2]=0,y[3]=0,y[4]=-2/N,y[5]=0,y[6]=-1,y[7]=1,y[8]=1,y},te.str=function(y){return"mat3("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+")"},te.frob=function(y){return Math.hypot(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8])},te.add=function(y,b,N){return y[0]=b[0]+N[0],y[1]=b[1]+N[1],y[2]=b[2]+N[2],y[3]=b[3]+N[3],y[4]=b[4]+N[4],y[5]=b[5]+N[5],y[6]=b[6]+N[6],y[7]=b[7]+N[7],y[8]=b[8]+N[8],y},te.subtract=_,te.multiplyScalar=function(y,b,N){return y[0]=b[0]*N,y[1]=b[1]*N,y[2]=b[2]*N,y[3]=b[3]*N,y[4]=b[4]*N,y[5]=b[5]*N,y[6]=b[6]*N,y[7]=b[7]*N,y[8]=b[8]*N,y},te.multiplyScalarAndAdd=function(y,b,N,z){return y[0]=b[0]+N[0]*z,y[1]=b[1]+N[1]*z,y[2]=b[2]+N[2]*z,y[3]=b[3]+N[3]*z,y[4]=b[4]+N[4]*z,y[5]=b[5]+N[5]*z,y[6]=b[6]+N[6]*z,y[7]=b[7]+N[7]*z,y[8]=b[8]+N[8]*z,y},te.exactEquals=function(y,b){return y[0]===b[0]&&y[1]===b[1]&&y[2]===b[2]&&y[3]===b[3]&&y[4]===b[4]&&y[5]===b[5]&&y[6]===b[6]&&y[7]===b[7]&&y[8]===b[8]},te.equals=function(y,b){var N=y[0],z=y[1],G=y[2],T=y[3],O=y[4],H=y[5],U=y[6],Q=y[7],W=y[8],re=b[0],ue=b[1],Be=b[2],Te=b[3],he=b[4],ke=b[5],Ve=b[6],rt=b[7],dt=b[8];return Math.abs(N-re)<=a.EPSILON*Math.max(1,Math.abs(N),Math.abs(re))&&Math.abs(z-ue)<=a.EPSILON*Math.max(1,Math.abs(z),Math.abs(ue))&&Math.abs(G-Be)<=a.EPSILON*Math.max(1,Math.abs(G),Math.abs(Be))&&Math.abs(T-Te)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(Te))&&Math.abs(O-he)<=a.EPSILON*Math.max(1,Math.abs(O),Math.abs(he))&&Math.abs(H-ke)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(ke))&&Math.abs(U-Ve)<=a.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ve))&&Math.abs(Q-rt)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(rt))&&Math.abs(W-dt)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(dt))},te.sub=te.mul=void 0;var a=function(y,b){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var N=d(void 0);if(N&&N.has(y))return N.get(y);var z={},G=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in y)if(T!=="default"&&Object.prototype.hasOwnProperty.call(y,T)){var O=G?Object.getOwnPropertyDescriptor(y,T):null;O&&(O.get||O.set)?Object.defineProperty(z,T,O):z[T]=y[T]}return z.default=y,N&&N.set(y,z),z}(S());function d(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,N=new WeakMap;return(d=function(z){return z?N:b})(y)}function A(y,b,N){var z=b[0],G=b[1],T=b[2],O=b[3],H=b[4],U=b[5],Q=b[6],W=b[7],re=b[8],ue=N[0],Be=N[1],Te=N[2],he=N[3],ke=N[4],Ve=N[5],rt=N[6],dt=N[7],ft=N[8];return y[0]=ue*z+Be*O+Te*Q,y[1]=ue*G+Be*H+Te*W,y[2]=ue*T+Be*U+Te*re,y[3]=he*z+ke*O+Ve*Q,y[4]=he*G+ke*H+Ve*W,y[5]=he*T+ke*U+Ve*re,y[6]=rt*z+dt*O+ft*Q,y[7]=rt*G+dt*H+ft*W,y[8]=rt*T+dt*U+ft*re,y}function _(y,b,N){return y[0]=b[0]-N[0],y[1]=b[1]-N[1],y[2]=b[2]-N[2],y[3]=b[3]-N[3],y[4]=b[4]-N[4],y[5]=b[5]-N[5],y[6]=b[6]-N[6],y[7]=b[7]-N[7],y[8]=b[8]-N[8],y}return te.mul=A,te.sub=_,te}var oe,K={};function de(){if(oe)return K;function f(T){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},f(T)}oe=1,Object.defineProperty(K,"__esModule",{value:!0}),K.create=function(){var T=new a.ARRAY_TYPE(16);return a.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=0,T[12]=0,T[13]=0,T[14]=0),T[0]=1,T[5]=1,T[10]=1,T[15]=1,T},K.clone=function(T){var O=new a.ARRAY_TYPE(16);return O[0]=T[0],O[1]=T[1],O[2]=T[2],O[3]=T[3],O[4]=T[4],O[5]=T[5],O[6]=T[6],O[7]=T[7],O[8]=T[8],O[9]=T[9],O[10]=T[10],O[11]=T[11],O[12]=T[12],O[13]=T[13],O[14]=T[14],O[15]=T[15],O},K.copy=function(T,O){return T[0]=O[0],T[1]=O[1],T[2]=O[2],T[3]=O[3],T[4]=O[4],T[5]=O[5],T[6]=O[6],T[7]=O[7],T[8]=O[8],T[9]=O[9],T[10]=O[10],T[11]=O[11],T[12]=O[12],T[13]=O[13],T[14]=O[14],T[15]=O[15],T},K.fromValues=function(T,O,H,U,Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt,ft){var at=new a.ARRAY_TYPE(16);return at[0]=T,at[1]=O,at[2]=H,at[3]=U,at[4]=Q,at[5]=W,at[6]=re,at[7]=ue,at[8]=Be,at[9]=Te,at[10]=he,at[11]=ke,at[12]=Ve,at[13]=rt,at[14]=dt,at[15]=ft,at},K.set=function(T,O,H,U,Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt,ft,at){return T[0]=O,T[1]=H,T[2]=U,T[3]=Q,T[4]=W,T[5]=re,T[6]=ue,T[7]=Be,T[8]=Te,T[9]=he,T[10]=ke,T[11]=Ve,T[12]=rt,T[13]=dt,T[14]=ft,T[15]=at,T},K.identity=A,K.transpose=function(T,O){if(T===O){var H=O[1],U=O[2],Q=O[3],W=O[6],re=O[7],ue=O[11];T[1]=O[4],T[2]=O[8],T[3]=O[12],T[4]=H,T[6]=O[9],T[7]=O[13],T[8]=U,T[9]=W,T[11]=O[14],T[12]=Q,T[13]=re,T[14]=ue}else T[0]=O[0],T[1]=O[4],T[2]=O[8],T[3]=O[12],T[4]=O[1],T[5]=O[5],T[6]=O[9],T[7]=O[13],T[8]=O[2],T[9]=O[6],T[10]=O[10],T[11]=O[14],T[12]=O[3],T[13]=O[7],T[14]=O[11],T[15]=O[15];return T},K.invert=function(T,O){var H=O[0],U=O[1],Q=O[2],W=O[3],re=O[4],ue=O[5],Be=O[6],Te=O[7],he=O[8],ke=O[9],Ve=O[10],rt=O[11],dt=O[12],ft=O[13],at=O[14],Et=O[15],yt=H*ue-U*re,Nt=H*Be-Q*re,zt=H*Te-W*re,Gt=U*Be-Q*ue,$t=U*Te-W*ue,Zt=Q*Te-W*Be,vr=he*ft-ke*dt,tr=he*at-Ve*dt,Br=he*Et-rt*dt,Ur=ke*at-Ve*ft,br=ke*Et-rt*ft,Cn=Ve*Et-rt*at,hn=yt*Cn-Nt*br+zt*Ur+Gt*Br-$t*tr+Zt*vr;return hn?(T[0]=(ue*Cn-Be*br+Te*Ur)*(hn=1/hn),T[1]=(Q*br-U*Cn-W*Ur)*hn,T[2]=(ft*Zt-at*$t+Et*Gt)*hn,T[3]=(Ve*$t-ke*Zt-rt*Gt)*hn,T[4]=(Be*Br-re*Cn-Te*tr)*hn,T[5]=(H*Cn-Q*Br+W*tr)*hn,T[6]=(at*zt-dt*Zt-Et*Nt)*hn,T[7]=(he*Zt-Ve*zt+rt*Nt)*hn,T[8]=(re*br-ue*Br+Te*vr)*hn,T[9]=(U*Br-H*br-W*vr)*hn,T[10]=(dt*$t-ft*zt+Et*yt)*hn,T[11]=(ke*zt-he*$t-rt*yt)*hn,T[12]=(ue*tr-re*Ur-Be*vr)*hn,T[13]=(H*Ur-U*tr+Q*vr)*hn,T[14]=(ft*Nt-dt*Gt-at*yt)*hn,T[15]=(he*Gt-ke*Nt+Ve*yt)*hn,T):null},K.adjoint=function(T,O){var H=O[0],U=O[1],Q=O[2],W=O[3],re=O[4],ue=O[5],Be=O[6],Te=O[7],he=O[8],ke=O[9],Ve=O[10],rt=O[11],dt=O[12],ft=O[13],at=O[14],Et=O[15];return T[0]=ue*(Ve*Et-rt*at)-ke*(Be*Et-Te*at)+ft*(Be*rt-Te*Ve),T[1]=-(U*(Ve*Et-rt*at)-ke*(Q*Et-W*at)+ft*(Q*rt-W*Ve)),T[2]=U*(Be*Et-Te*at)-ue*(Q*Et-W*at)+ft*(Q*Te-W*Be),T[3]=-(U*(Be*rt-Te*Ve)-ue*(Q*rt-W*Ve)+ke*(Q*Te-W*Be)),T[4]=-(re*(Ve*Et-rt*at)-he*(Be*Et-Te*at)+dt*(Be*rt-Te*Ve)),T[5]=H*(Ve*Et-rt*at)-he*(Q*Et-W*at)+dt*(Q*rt-W*Ve),T[6]=-(H*(Be*Et-Te*at)-re*(Q*Et-W*at)+dt*(Q*Te-W*Be)),T[7]=H*(Be*rt-Te*Ve)-re*(Q*rt-W*Ve)+he*(Q*Te-W*Be),T[8]=re*(ke*Et-rt*ft)-he*(ue*Et-Te*ft)+dt*(ue*rt-Te*ke),T[9]=-(H*(ke*Et-rt*ft)-he*(U*Et-W*ft)+dt*(U*rt-W*ke)),T[10]=H*(ue*Et-Te*ft)-re*(U*Et-W*ft)+dt*(U*Te-W*ue),T[11]=-(H*(ue*rt-Te*ke)-re*(U*rt-W*ke)+he*(U*Te-W*ue)),T[12]=-(re*(ke*at-Ve*ft)-he*(ue*at-Be*ft)+dt*(ue*Ve-Be*ke)),T[13]=H*(ke*at-Ve*ft)-he*(U*at-Q*ft)+dt*(U*Ve-Q*ke),T[14]=-(H*(ue*at-Be*ft)-re*(U*at-Q*ft)+dt*(U*Be-Q*ue)),T[15]=H*(ue*Ve-Be*ke)-re*(U*Ve-Q*ke)+he*(U*Be-Q*ue),T},K.determinant=function(T){var O=T[0],H=T[1],U=T[2],Q=T[3],W=T[4],re=T[5],ue=T[6],Be=T[7],Te=T[8],he=T[9],ke=T[10],Ve=T[11],rt=T[12],dt=T[13],ft=T[14],at=T[15];return(O*re-H*W)*(ke*at-Ve*ft)-(O*ue-U*W)*(he*at-Ve*dt)+(O*Be-Q*W)*(he*ft-ke*dt)+(H*ue-U*re)*(Te*at-Ve*rt)-(H*Be-Q*re)*(Te*ft-ke*rt)+(U*Be-Q*ue)*(Te*dt-he*rt)},K.multiply=_,K.translate=function(T,O,H){var U,Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt,ft=H[0],at=H[1],Et=H[2];return O===T?(T[12]=O[0]*ft+O[4]*at+O[8]*Et+O[12],T[13]=O[1]*ft+O[5]*at+O[9]*Et+O[13],T[14]=O[2]*ft+O[6]*at+O[10]*Et+O[14],T[15]=O[3]*ft+O[7]*at+O[11]*Et+O[15]):(Q=O[1],W=O[2],re=O[3],ue=O[4],Be=O[5],Te=O[6],he=O[7],ke=O[8],Ve=O[9],rt=O[10],dt=O[11],T[0]=U=O[0],T[1]=Q,T[2]=W,T[3]=re,T[4]=ue,T[5]=Be,T[6]=Te,T[7]=he,T[8]=ke,T[9]=Ve,T[10]=rt,T[11]=dt,T[12]=U*ft+ue*at+ke*Et+O[12],T[13]=Q*ft+Be*at+Ve*Et+O[13],T[14]=W*ft+Te*at+rt*Et+O[14],T[15]=re*ft+he*at+dt*Et+O[15]),T},K.scale=function(T,O,H){var U=H[0],Q=H[1],W=H[2];return T[0]=O[0]*U,T[1]=O[1]*U,T[2]=O[2]*U,T[3]=O[3]*U,T[4]=O[4]*Q,T[5]=O[5]*Q,T[6]=O[6]*Q,T[7]=O[7]*Q,T[8]=O[8]*W,T[9]=O[9]*W,T[10]=O[10]*W,T[11]=O[11]*W,T[12]=O[12],T[13]=O[13],T[14]=O[14],T[15]=O[15],T},K.rotate=function(T,O,H,U){var Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt,ft,at,Et,yt,Nt,zt,Gt,$t,Zt,vr,tr,Br,Ur,br=U[0],Cn=U[1],hn=U[2],tn=Math.hypot(br,Cn,hn);return tn<a.EPSILON?null:(br*=tn=1/tn,Cn*=tn,hn*=tn,Q=Math.sin(H),W=Math.cos(H),Be=O[1],Te=O[2],he=O[3],Ve=O[5],rt=O[6],dt=O[7],at=O[9],Et=O[10],yt=O[11],Nt=br*br*(re=1-W)+W,$t=br*Cn*re-hn*Q,Zt=Cn*Cn*re+W,vr=hn*Cn*re+br*Q,tr=br*hn*re+Cn*Q,Br=Cn*hn*re-br*Q,Ur=hn*hn*re+W,T[0]=(ue=O[0])*Nt+(ke=O[4])*(zt=Cn*br*re+hn*Q)+(ft=O[8])*(Gt=hn*br*re-Cn*Q),T[1]=Be*Nt+Ve*zt+at*Gt,T[2]=Te*Nt+rt*zt+Et*Gt,T[3]=he*Nt+dt*zt+yt*Gt,T[4]=ue*$t+ke*Zt+ft*vr,T[5]=Be*$t+Ve*Zt+at*vr,T[6]=Te*$t+rt*Zt+Et*vr,T[7]=he*$t+dt*Zt+yt*vr,T[8]=ue*tr+ke*Br+ft*Ur,T[9]=Be*tr+Ve*Br+at*Ur,T[10]=Te*tr+rt*Br+Et*Ur,T[11]=he*tr+dt*Br+yt*Ur,O!==T&&(T[12]=O[12],T[13]=O[13],T[14]=O[14],T[15]=O[15]),T)},K.rotateX=function(T,O,H){var U=Math.sin(H),Q=Math.cos(H),W=O[4],re=O[5],ue=O[6],Be=O[7],Te=O[8],he=O[9],ke=O[10],Ve=O[11];return O!==T&&(T[0]=O[0],T[1]=O[1],T[2]=O[2],T[3]=O[3],T[12]=O[12],T[13]=O[13],T[14]=O[14],T[15]=O[15]),T[4]=W*Q+Te*U,T[5]=re*Q+he*U,T[6]=ue*Q+ke*U,T[7]=Be*Q+Ve*U,T[8]=Te*Q-W*U,T[9]=he*Q-re*U,T[10]=ke*Q-ue*U,T[11]=Ve*Q-Be*U,T},K.rotateY=function(T,O,H){var U=Math.sin(H),Q=Math.cos(H),W=O[0],re=O[1],ue=O[2],Be=O[3],Te=O[8],he=O[9],ke=O[10],Ve=O[11];return O!==T&&(T[4]=O[4],T[5]=O[5],T[6]=O[6],T[7]=O[7],T[12]=O[12],T[13]=O[13],T[14]=O[14],T[15]=O[15]),T[0]=W*Q-Te*U,T[1]=re*Q-he*U,T[2]=ue*Q-ke*U,T[3]=Be*Q-Ve*U,T[8]=W*U+Te*Q,T[9]=re*U+he*Q,T[10]=ue*U+ke*Q,T[11]=Be*U+Ve*Q,T},K.rotateZ=function(T,O,H){var U=Math.sin(H),Q=Math.cos(H),W=O[0],re=O[1],ue=O[2],Be=O[3],Te=O[4],he=O[5],ke=O[6],Ve=O[7];return O!==T&&(T[8]=O[8],T[9]=O[9],T[10]=O[10],T[11]=O[11],T[12]=O[12],T[13]=O[13],T[14]=O[14],T[15]=O[15]),T[0]=W*Q+Te*U,T[1]=re*Q+he*U,T[2]=ue*Q+ke*U,T[3]=Be*Q+Ve*U,T[4]=Te*Q-W*U,T[5]=he*Q-re*U,T[6]=ke*Q-ue*U,T[7]=Ve*Q-Be*U,T},K.fromTranslation=function(T,O){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=O[0],T[13]=O[1],T[14]=O[2],T[15]=1,T},K.fromScaling=function(T,O){return T[0]=O[0],T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=O[1],T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=O[2],T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromRotation=function(T,O,H){var U,Q,W,re=H[0],ue=H[1],Be=H[2],Te=Math.hypot(re,ue,Be);return Te<a.EPSILON?null:(re*=Te=1/Te,ue*=Te,Be*=Te,U=Math.sin(O),Q=Math.cos(O),T[0]=re*re*(W=1-Q)+Q,T[1]=ue*re*W+Be*U,T[2]=Be*re*W-ue*U,T[3]=0,T[4]=re*ue*W-Be*U,T[5]=ue*ue*W+Q,T[6]=Be*ue*W+re*U,T[7]=0,T[8]=re*Be*W+ue*U,T[9]=ue*Be*W-re*U,T[10]=Be*Be*W+Q,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T)},K.fromXRotation=function(T,O){var H=Math.sin(O),U=Math.cos(O);return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=U,T[6]=H,T[7]=0,T[8]=0,T[9]=-H,T[10]=U,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromYRotation=function(T,O){var H=Math.sin(O),U=Math.cos(O);return T[0]=U,T[1]=0,T[2]=-H,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=H,T[9]=0,T[10]=U,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromZRotation=function(T,O){var H=Math.sin(O),U=Math.cos(O);return T[0]=U,T[1]=H,T[2]=0,T[3]=0,T[4]=-H,T[5]=U,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromRotationTranslation=y,K.fromQuat2=function(T,O){var H=new a.ARRAY_TYPE(3),U=-O[0],Q=-O[1],W=-O[2],re=O[3],ue=O[4],Be=O[5],Te=O[6],he=O[7],ke=U*U+Q*Q+W*W+re*re;return ke>0?(H[0]=2*(ue*re+he*U+Be*W-Te*Q)/ke,H[1]=2*(Be*re+he*Q+Te*U-ue*W)/ke,H[2]=2*(Te*re+he*W+ue*Q-Be*U)/ke):(H[0]=2*(ue*re+he*U+Be*W-Te*Q),H[1]=2*(Be*re+he*Q+Te*U-ue*W),H[2]=2*(Te*re+he*W+ue*Q-Be*U)),y(T,O,H),T},K.getTranslation=function(T,O){return T[0]=O[12],T[1]=O[13],T[2]=O[14],T},K.getScaling=b,K.getRotation=function(T,O){var H=new a.ARRAY_TYPE(3);b(H,O);var U=1/H[0],Q=1/H[1],W=1/H[2],re=O[0]*U,ue=O[1]*Q,Be=O[2]*W,Te=O[4]*U,he=O[5]*Q,ke=O[6]*W,Ve=O[8]*U,rt=O[9]*Q,dt=O[10]*W,ft=re+he+dt,at=0;return ft>0?(at=2*Math.sqrt(ft+1),T[3]=.25*at,T[0]=(ke-rt)/at,T[1]=(Ve-Be)/at,T[2]=(ue-Te)/at):re>he&&re>dt?(at=2*Math.sqrt(1+re-he-dt),T[3]=(ke-rt)/at,T[0]=.25*at,T[1]=(ue+Te)/at,T[2]=(Ve+Be)/at):he>dt?(at=2*Math.sqrt(1+he-re-dt),T[3]=(Ve-Be)/at,T[0]=(ue+Te)/at,T[1]=.25*at,T[2]=(ke+rt)/at):(at=2*Math.sqrt(1+dt-re-he),T[3]=(ue-Te)/at,T[0]=(Ve+Be)/at,T[1]=(ke+rt)/at,T[2]=.25*at),T},K.fromRotationTranslationScale=function(T,O,H,U){var Q=O[0],W=O[1],re=O[2],ue=O[3],Be=Q+Q,Te=W+W,he=re+re,ke=Q*Be,Ve=Q*Te,rt=Q*he,dt=W*Te,ft=W*he,at=re*he,Et=ue*Be,yt=ue*Te,Nt=ue*he,zt=U[0],Gt=U[1],$t=U[2];return T[0]=(1-(dt+at))*zt,T[1]=(Ve+Nt)*zt,T[2]=(rt-yt)*zt,T[3]=0,T[4]=(Ve-Nt)*Gt,T[5]=(1-(ke+at))*Gt,T[6]=(ft+Et)*Gt,T[7]=0,T[8]=(rt+yt)*$t,T[9]=(ft-Et)*$t,T[10]=(1-(ke+dt))*$t,T[11]=0,T[12]=H[0],T[13]=H[1],T[14]=H[2],T[15]=1,T},K.fromRotationTranslationScaleOrigin=function(T,O,H,U,Q){var W=O[0],re=O[1],ue=O[2],Be=O[3],Te=W+W,he=re+re,ke=ue+ue,Ve=W*Te,rt=W*he,dt=W*ke,ft=re*he,at=re*ke,Et=ue*ke,yt=Be*Te,Nt=Be*he,zt=Be*ke,Gt=U[0],$t=U[1],Zt=U[2],vr=Q[0],tr=Q[1],Br=Q[2],Ur=(1-(ft+Et))*Gt,br=(rt+zt)*Gt,Cn=(dt-Nt)*Gt,hn=(rt-zt)*$t,tn=(1-(Ve+Et))*$t,Vr=(at+yt)*$t,Jn=(dt+Nt)*Zt,wn=(at-yt)*Zt,Pn=(1-(Ve+ft))*Zt;return T[0]=Ur,T[1]=br,T[2]=Cn,T[3]=0,T[4]=hn,T[5]=tn,T[6]=Vr,T[7]=0,T[8]=Jn,T[9]=wn,T[10]=Pn,T[11]=0,T[12]=H[0]+vr-(Ur*vr+hn*tr+Jn*Br),T[13]=H[1]+tr-(br*vr+tn*tr+wn*Br),T[14]=H[2]+Br-(Cn*vr+Vr*tr+Pn*Br),T[15]=1,T},K.fromQuat=function(T,O){var H=O[0],U=O[1],Q=O[2],W=O[3],re=H+H,ue=U+U,Be=Q+Q,Te=H*re,he=U*re,ke=U*ue,Ve=Q*re,rt=Q*ue,dt=Q*Be,ft=W*re,at=W*ue,Et=W*Be;return T[0]=1-ke-dt,T[1]=he+Et,T[2]=Ve-at,T[3]=0,T[4]=he-Et,T[5]=1-Te-dt,T[6]=rt+ft,T[7]=0,T[8]=Ve+at,T[9]=rt-ft,T[10]=1-Te-ke,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.frustum=function(T,O,H,U,Q,W,re){var ue=1/(H-O),Be=1/(Q-U),Te=1/(W-re);return T[0]=2*W*ue,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=2*W*Be,T[6]=0,T[7]=0,T[8]=(H+O)*ue,T[9]=(Q+U)*Be,T[10]=(re+W)*Te,T[11]=-1,T[12]=0,T[13]=0,T[14]=re*W*2*Te,T[15]=0,T},K.perspectiveNO=N,K.perspectiveZO=function(T,O,H,U,Q){var W,re=1/Math.tan(O/2);return T[0]=re/H,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=re,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,Q!=null&&Q!==1/0?(T[10]=Q*(W=1/(U-Q)),T[14]=Q*U*W):(T[10]=-1,T[14]=-U),T},K.perspectiveFromFieldOfView=function(T,O,H,U){var Q=Math.tan(O.upDegrees*Math.PI/180),W=Math.tan(O.downDegrees*Math.PI/180),re=Math.tan(O.leftDegrees*Math.PI/180),ue=Math.tan(O.rightDegrees*Math.PI/180),Be=2/(re+ue),Te=2/(Q+W);return T[0]=Be,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=Te,T[6]=0,T[7]=0,T[8]=-(re-ue)*Be*.5,T[9]=(Q-W)*Te*.5,T[10]=U/(H-U),T[11]=-1,T[12]=0,T[13]=0,T[14]=U*H/(H-U),T[15]=0,T},K.orthoNO=z,K.orthoZO=function(T,O,H,U,Q,W,re){var ue=1/(O-H),Be=1/(U-Q),Te=1/(W-re);return T[0]=-2*ue,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*Be,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=Te,T[11]=0,T[12]=(O+H)*ue,T[13]=(Q+U)*Be,T[14]=W*Te,T[15]=1,T},K.lookAt=function(T,O,H,U){var Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt=O[0],ft=O[1],at=O[2],Et=U[0],yt=U[1],Nt=U[2],zt=H[0],Gt=H[1],$t=H[2];return Math.abs(dt-zt)<a.EPSILON&&Math.abs(ft-Gt)<a.EPSILON&&Math.abs(at-$t)<a.EPSILON?A(T):(he=dt-zt,ke=ft-Gt,Ve=at-$t,Q=yt*(Ve*=rt=1/Math.hypot(he,ke,Ve))-Nt*(ke*=rt),W=Nt*(he*=rt)-Et*Ve,re=Et*ke-yt*he,(rt=Math.hypot(Q,W,re))?(Q*=rt=1/rt,W*=rt,re*=rt):(Q=0,W=0,re=0),ue=ke*re-Ve*W,Be=Ve*Q-he*re,Te=he*W-ke*Q,(rt=Math.hypot(ue,Be,Te))?(ue*=rt=1/rt,Be*=rt,Te*=rt):(ue=0,Be=0,Te=0),T[0]=Q,T[1]=ue,T[2]=he,T[3]=0,T[4]=W,T[5]=Be,T[6]=ke,T[7]=0,T[8]=re,T[9]=Te,T[10]=Ve,T[11]=0,T[12]=-(Q*dt+W*ft+re*at),T[13]=-(ue*dt+Be*ft+Te*at),T[14]=-(he*dt+ke*ft+Ve*at),T[15]=1,T)},K.targetTo=function(T,O,H,U){var Q=O[0],W=O[1],re=O[2],ue=U[0],Be=U[1],Te=U[2],he=Q-H[0],ke=W-H[1],Ve=re-H[2],rt=he*he+ke*ke+Ve*Ve;rt>0&&(he*=rt=1/Math.sqrt(rt),ke*=rt,Ve*=rt);var dt=Be*Ve-Te*ke,ft=Te*he-ue*Ve,at=ue*ke-Be*he;return(rt=dt*dt+ft*ft+at*at)>0&&(dt*=rt=1/Math.sqrt(rt),ft*=rt,at*=rt),T[0]=dt,T[1]=ft,T[2]=at,T[3]=0,T[4]=ke*at-Ve*ft,T[5]=Ve*dt-he*at,T[6]=he*ft-ke*dt,T[7]=0,T[8]=he,T[9]=ke,T[10]=Ve,T[11]=0,T[12]=Q,T[13]=W,T[14]=re,T[15]=1,T},K.str=function(T){return"mat4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+", "+T[4]+", "+T[5]+", "+T[6]+", "+T[7]+", "+T[8]+", "+T[9]+", "+T[10]+", "+T[11]+", "+T[12]+", "+T[13]+", "+T[14]+", "+T[15]+")"},K.frob=function(T){return Math.hypot(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15])},K.add=function(T,O,H){return T[0]=O[0]+H[0],T[1]=O[1]+H[1],T[2]=O[2]+H[2],T[3]=O[3]+H[3],T[4]=O[4]+H[4],T[5]=O[5]+H[5],T[6]=O[6]+H[6],T[7]=O[7]+H[7],T[8]=O[8]+H[8],T[9]=O[9]+H[9],T[10]=O[10]+H[10],T[11]=O[11]+H[11],T[12]=O[12]+H[12],T[13]=O[13]+H[13],T[14]=O[14]+H[14],T[15]=O[15]+H[15],T},K.subtract=G,K.multiplyScalar=function(T,O,H){return T[0]=O[0]*H,T[1]=O[1]*H,T[2]=O[2]*H,T[3]=O[3]*H,T[4]=O[4]*H,T[5]=O[5]*H,T[6]=O[6]*H,T[7]=O[7]*H,T[8]=O[8]*H,T[9]=O[9]*H,T[10]=O[10]*H,T[11]=O[11]*H,T[12]=O[12]*H,T[13]=O[13]*H,T[14]=O[14]*H,T[15]=O[15]*H,T},K.multiplyScalarAndAdd=function(T,O,H,U){return T[0]=O[0]+H[0]*U,T[1]=O[1]+H[1]*U,T[2]=O[2]+H[2]*U,T[3]=O[3]+H[3]*U,T[4]=O[4]+H[4]*U,T[5]=O[5]+H[5]*U,T[6]=O[6]+H[6]*U,T[7]=O[7]+H[7]*U,T[8]=O[8]+H[8]*U,T[9]=O[9]+H[9]*U,T[10]=O[10]+H[10]*U,T[11]=O[11]+H[11]*U,T[12]=O[12]+H[12]*U,T[13]=O[13]+H[13]*U,T[14]=O[14]+H[14]*U,T[15]=O[15]+H[15]*U,T},K.exactEquals=function(T,O){return T[0]===O[0]&&T[1]===O[1]&&T[2]===O[2]&&T[3]===O[3]&&T[4]===O[4]&&T[5]===O[5]&&T[6]===O[6]&&T[7]===O[7]&&T[8]===O[8]&&T[9]===O[9]&&T[10]===O[10]&&T[11]===O[11]&&T[12]===O[12]&&T[13]===O[13]&&T[14]===O[14]&&T[15]===O[15]},K.equals=function(T,O){var H=T[0],U=T[1],Q=T[2],W=T[3],re=T[4],ue=T[5],Be=T[6],Te=T[7],he=T[8],ke=T[9],Ve=T[10],rt=T[11],dt=T[12],ft=T[13],at=T[14],Et=T[15],yt=O[0],Nt=O[1],zt=O[2],Gt=O[3],$t=O[4],Zt=O[5],vr=O[6],tr=O[7],Br=O[8],Ur=O[9],br=O[10],Cn=O[11],hn=O[12],tn=O[13],Vr=O[14],Jn=O[15];return Math.abs(H-yt)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(yt))&&Math.abs(U-Nt)<=a.EPSILON*Math.max(1,Math.abs(U),Math.abs(Nt))&&Math.abs(Q-zt)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(zt))&&Math.abs(W-Gt)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(Gt))&&Math.abs(re-$t)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs($t))&&Math.abs(ue-Zt)<=a.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Zt))&&Math.abs(Be-vr)<=a.EPSILON*Math.max(1,Math.abs(Be),Math.abs(vr))&&Math.abs(Te-tr)<=a.EPSILON*Math.max(1,Math.abs(Te),Math.abs(tr))&&Math.abs(he-Br)<=a.EPSILON*Math.max(1,Math.abs(he),Math.abs(Br))&&Math.abs(ke-Ur)<=a.EPSILON*Math.max(1,Math.abs(ke),Math.abs(Ur))&&Math.abs(Ve-br)<=a.EPSILON*Math.max(1,Math.abs(Ve),Math.abs(br))&&Math.abs(rt-Cn)<=a.EPSILON*Math.max(1,Math.abs(rt),Math.abs(Cn))&&Math.abs(dt-hn)<=a.EPSILON*Math.max(1,Math.abs(dt),Math.abs(hn))&&Math.abs(ft-tn)<=a.EPSILON*Math.max(1,Math.abs(ft),Math.abs(tn))&&Math.abs(at-Vr)<=a.EPSILON*Math.max(1,Math.abs(at),Math.abs(Vr))&&Math.abs(Et-Jn)<=a.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Jn))},K.sub=K.mul=K.ortho=K.perspective=void 0;var a=function(T,O){if(T&&T.__esModule)return T;if(T===null||f(T)!=="object"&&typeof T!="function")return{default:T};var H=d(void 0);if(H&&H.has(T))return H.get(T);var U={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in T)if(W!=="default"&&Object.prototype.hasOwnProperty.call(T,W)){var re=Q?Object.getOwnPropertyDescriptor(T,W):null;re&&(re.get||re.set)?Object.defineProperty(U,W,re):U[W]=T[W]}return U.default=T,H&&H.set(T,U),U}(S());function d(T){if(typeof WeakMap!="function")return null;var O=new WeakMap,H=new WeakMap;return(d=function(U){return U?H:O})(T)}function A(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function _(T,O,H){var U=O[0],Q=O[1],W=O[2],re=O[3],ue=O[4],Be=O[5],Te=O[6],he=O[7],ke=O[8],Ve=O[9],rt=O[10],dt=O[11],ft=O[12],at=O[13],Et=O[14],yt=O[15],Nt=H[0],zt=H[1],Gt=H[2],$t=H[3];return T[0]=Nt*U+zt*ue+Gt*ke+$t*ft,T[1]=Nt*Q+zt*Be+Gt*Ve+$t*at,T[2]=Nt*W+zt*Te+Gt*rt+$t*Et,T[3]=Nt*re+zt*he+Gt*dt+$t*yt,T[4]=(Nt=H[4])*U+(zt=H[5])*ue+(Gt=H[6])*ke+($t=H[7])*ft,T[5]=Nt*Q+zt*Be+Gt*Ve+$t*at,T[6]=Nt*W+zt*Te+Gt*rt+$t*Et,T[7]=Nt*re+zt*he+Gt*dt+$t*yt,T[8]=(Nt=H[8])*U+(zt=H[9])*ue+(Gt=H[10])*ke+($t=H[11])*ft,T[9]=Nt*Q+zt*Be+Gt*Ve+$t*at,T[10]=Nt*W+zt*Te+Gt*rt+$t*Et,T[11]=Nt*re+zt*he+Gt*dt+$t*yt,T[12]=(Nt=H[12])*U+(zt=H[13])*ue+(Gt=H[14])*ke+($t=H[15])*ft,T[13]=Nt*Q+zt*Be+Gt*Ve+$t*at,T[14]=Nt*W+zt*Te+Gt*rt+$t*Et,T[15]=Nt*re+zt*he+Gt*dt+$t*yt,T}function y(T,O,H){var U=O[0],Q=O[1],W=O[2],re=O[3],ue=U+U,Be=Q+Q,Te=W+W,he=U*ue,ke=U*Be,Ve=U*Te,rt=Q*Be,dt=Q*Te,ft=W*Te,at=re*ue,Et=re*Be,yt=re*Te;return T[0]=1-(rt+ft),T[1]=ke+yt,T[2]=Ve-Et,T[3]=0,T[4]=ke-yt,T[5]=1-(he+ft),T[6]=dt+at,T[7]=0,T[8]=Ve+Et,T[9]=dt-at,T[10]=1-(he+rt),T[11]=0,T[12]=H[0],T[13]=H[1],T[14]=H[2],T[15]=1,T}function b(T,O){var H=O[4],U=O[5],Q=O[6],W=O[8],re=O[9],ue=O[10];return T[0]=Math.hypot(O[0],O[1],O[2]),T[1]=Math.hypot(H,U,Q),T[2]=Math.hypot(W,re,ue),T}function N(T,O,H,U,Q){var W,re=1/Math.tan(O/2);return T[0]=re/H,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=re,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,Q!=null&&Q!==1/0?(T[10]=(Q+U)*(W=1/(U-Q)),T[14]=2*Q*U*W):(T[10]=-1,T[14]=-2*U),T}function z(T,O,H,U,Q,W,re){var ue=1/(O-H),Be=1/(U-Q),Te=1/(W-re);return T[0]=-2*ue,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*Be,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=2*Te,T[11]=0,T[12]=(O+H)*ue,T[13]=(Q+U)*Be,T[14]=(re+W)*Te,T[15]=1,T}function G(T,O,H){return T[0]=O[0]-H[0],T[1]=O[1]-H[1],T[2]=O[2]-H[2],T[3]=O[3]-H[3],T[4]=O[4]-H[4],T[5]=O[5]-H[5],T[6]=O[6]-H[6],T[7]=O[7]-H[7],T[8]=O[8]-H[8],T[9]=O[9]-H[9],T[10]=O[10]-H[10],T[11]=O[11]-H[11],T[12]=O[12]-H[12],T[13]=O[13]-H[13],T[14]=O[14]-H[14],T[15]=O[15]-H[15],T}return K.perspective=N,K.ortho=z,K.mul=_,K.sub=G,K}var we,J={},Z={};function Ie(){if(we)return Z;function f(Q){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},f(Q)}we=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.create=A,Z.clone=function(Q){var W=new a.ARRAY_TYPE(3);return W[0]=Q[0],W[1]=Q[1],W[2]=Q[2],W},Z.length=_,Z.fromValues=function(Q,W,re){var ue=new a.ARRAY_TYPE(3);return ue[0]=Q,ue[1]=W,ue[2]=re,ue},Z.copy=function(Q,W){return Q[0]=W[0],Q[1]=W[1],Q[2]=W[2],Q},Z.set=function(Q,W,re,ue){return Q[0]=W,Q[1]=re,Q[2]=ue,Q},Z.add=function(Q,W,re){return Q[0]=W[0]+re[0],Q[1]=W[1]+re[1],Q[2]=W[2]+re[2],Q},Z.subtract=y,Z.multiply=b,Z.divide=N,Z.ceil=function(Q,W){return Q[0]=Math.ceil(W[0]),Q[1]=Math.ceil(W[1]),Q[2]=Math.ceil(W[2]),Q},Z.floor=function(Q,W){return Q[0]=Math.floor(W[0]),Q[1]=Math.floor(W[1]),Q[2]=Math.floor(W[2]),Q},Z.min=function(Q,W,re){return Q[0]=Math.min(W[0],re[0]),Q[1]=Math.min(W[1],re[1]),Q[2]=Math.min(W[2],re[2]),Q},Z.max=function(Q,W,re){return Q[0]=Math.max(W[0],re[0]),Q[1]=Math.max(W[1],re[1]),Q[2]=Math.max(W[2],re[2]),Q},Z.round=function(Q,W){return Q[0]=Math.round(W[0]),Q[1]=Math.round(W[1]),Q[2]=Math.round(W[2]),Q},Z.scale=function(Q,W,re){return Q[0]=W[0]*re,Q[1]=W[1]*re,Q[2]=W[2]*re,Q},Z.scaleAndAdd=function(Q,W,re,ue){return Q[0]=W[0]+re[0]*ue,Q[1]=W[1]+re[1]*ue,Q[2]=W[2]+re[2]*ue,Q},Z.distance=z,Z.squaredDistance=G,Z.squaredLength=T,Z.negate=function(Q,W){return Q[0]=-W[0],Q[1]=-W[1],Q[2]=-W[2],Q},Z.inverse=function(Q,W){return Q[0]=1/W[0],Q[1]=1/W[1],Q[2]=1/W[2],Q},Z.normalize=function(Q,W){var re=W[0],ue=W[1],Be=W[2],Te=re*re+ue*ue+Be*Be;return Te>0&&(Te=1/Math.sqrt(Te)),Q[0]=W[0]*Te,Q[1]=W[1]*Te,Q[2]=W[2]*Te,Q},Z.dot=O,Z.cross=function(Q,W,re){var ue=W[0],Be=W[1],Te=W[2],he=re[0],ke=re[1],Ve=re[2];return Q[0]=Be*Ve-Te*ke,Q[1]=Te*he-ue*Ve,Q[2]=ue*ke-Be*he,Q},Z.lerp=function(Q,W,re,ue){var Be=W[0],Te=W[1],he=W[2];return Q[0]=Be+ue*(re[0]-Be),Q[1]=Te+ue*(re[1]-Te),Q[2]=he+ue*(re[2]-he),Q},Z.hermite=function(Q,W,re,ue,Be,Te){var he=Te*Te,ke=he*(2*Te-3)+1,Ve=he*(Te-2)+Te,rt=he*(Te-1),dt=he*(3-2*Te);return Q[0]=W[0]*ke+re[0]*Ve+ue[0]*rt+Be[0]*dt,Q[1]=W[1]*ke+re[1]*Ve+ue[1]*rt+Be[1]*dt,Q[2]=W[2]*ke+re[2]*Ve+ue[2]*rt+Be[2]*dt,Q},Z.bezier=function(Q,W,re,ue,Be,Te){var he=1-Te,ke=he*he,Ve=Te*Te,rt=ke*he,dt=3*Te*ke,ft=3*Ve*he,at=Ve*Te;return Q[0]=W[0]*rt+re[0]*dt+ue[0]*ft+Be[0]*at,Q[1]=W[1]*rt+re[1]*dt+ue[1]*ft+Be[1]*at,Q[2]=W[2]*rt+re[2]*dt+ue[2]*ft+Be[2]*at,Q},Z.random=function(Q,W){W=W||1;var re=2*a.RANDOM()*Math.PI,ue=2*a.RANDOM()-1,Be=Math.sqrt(1-ue*ue)*W;return Q[0]=Math.cos(re)*Be,Q[1]=Math.sin(re)*Be,Q[2]=ue*W,Q},Z.transformMat4=function(Q,W,re){var ue=W[0],Be=W[1],Te=W[2],he=re[3]*ue+re[7]*Be+re[11]*Te+re[15];return Q[0]=(re[0]*ue+re[4]*Be+re[8]*Te+re[12])/(he=he||1),Q[1]=(re[1]*ue+re[5]*Be+re[9]*Te+re[13])/he,Q[2]=(re[2]*ue+re[6]*Be+re[10]*Te+re[14])/he,Q},Z.transformMat3=function(Q,W,re){var ue=W[0],Be=W[1],Te=W[2];return Q[0]=ue*re[0]+Be*re[3]+Te*re[6],Q[1]=ue*re[1]+Be*re[4]+Te*re[7],Q[2]=ue*re[2]+Be*re[5]+Te*re[8],Q},Z.transformQuat=function(Q,W,re){var ue=re[0],Be=re[1],Te=re[2],he=W[0],ke=W[1],Ve=W[2],rt=Be*Ve-Te*ke,dt=Te*he-ue*Ve,ft=ue*ke-Be*he,at=Be*ft-Te*dt,Et=Te*rt-ue*ft,yt=ue*dt-Be*rt,Nt=2*re[3];return dt*=Nt,ft*=Nt,Et*=2,yt*=2,Q[0]=he+(rt*=Nt)+(at*=2),Q[1]=ke+dt+Et,Q[2]=Ve+ft+yt,Q},Z.rotateX=function(Q,W,re,ue){var Be=[],Te=[];return Be[0]=W[0]-re[0],Be[1]=W[1]-re[1],Be[2]=W[2]-re[2],Te[0]=Be[0],Te[1]=Be[1]*Math.cos(ue)-Be[2]*Math.sin(ue),Te[2]=Be[1]*Math.sin(ue)+Be[2]*Math.cos(ue),Q[0]=Te[0]+re[0],Q[1]=Te[1]+re[1],Q[2]=Te[2]+re[2],Q},Z.rotateY=function(Q,W,re,ue){var Be=[],Te=[];return Be[0]=W[0]-re[0],Be[1]=W[1]-re[1],Be[2]=W[2]-re[2],Te[0]=Be[2]*Math.sin(ue)+Be[0]*Math.cos(ue),Te[1]=Be[1],Te[2]=Be[2]*Math.cos(ue)-Be[0]*Math.sin(ue),Q[0]=Te[0]+re[0],Q[1]=Te[1]+re[1],Q[2]=Te[2]+re[2],Q},Z.rotateZ=function(Q,W,re,ue){var Be=[],Te=[];return Be[0]=W[0]-re[0],Be[1]=W[1]-re[1],Be[2]=W[2]-re[2],Te[0]=Be[0]*Math.cos(ue)-Be[1]*Math.sin(ue),Te[1]=Be[0]*Math.sin(ue)+Be[1]*Math.cos(ue),Te[2]=Be[2],Q[0]=Te[0]+re[0],Q[1]=Te[1]+re[1],Q[2]=Te[2]+re[2],Q},Z.angle=function(Q,W){var re=Q[0],ue=Q[1],Be=Q[2],Te=W[0],he=W[1],ke=W[2],Ve=Math.sqrt(re*re+ue*ue+Be*Be)*Math.sqrt(Te*Te+he*he+ke*ke),rt=Ve&&O(Q,W)/Ve;return Math.acos(Math.min(Math.max(rt,-1),1))},Z.zero=function(Q){return Q[0]=0,Q[1]=0,Q[2]=0,Q},Z.str=function(Q){return"vec3("+Q[0]+", "+Q[1]+", "+Q[2]+")"},Z.exactEquals=function(Q,W){return Q[0]===W[0]&&Q[1]===W[1]&&Q[2]===W[2]},Z.equals=function(Q,W){var re=Q[0],ue=Q[1],Be=Q[2],Te=W[0],he=W[1],ke=W[2];return Math.abs(re-Te)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(Te))&&Math.abs(ue-he)<=a.EPSILON*Math.max(1,Math.abs(ue),Math.abs(he))&&Math.abs(Be-ke)<=a.EPSILON*Math.max(1,Math.abs(Be),Math.abs(ke))},Z.forEach=Z.sqrLen=Z.len=Z.sqrDist=Z.dist=Z.div=Z.mul=Z.sub=void 0;var a=function(Q,W){if(Q&&Q.__esModule)return Q;if(Q===null||f(Q)!=="object"&&typeof Q!="function")return{default:Q};var re=d(void 0);if(re&&re.has(Q))return re.get(Q);var ue={},Be=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Te in Q)if(Te!=="default"&&Object.prototype.hasOwnProperty.call(Q,Te)){var he=Be?Object.getOwnPropertyDescriptor(Q,Te):null;he&&(he.get||he.set)?Object.defineProperty(ue,Te,he):ue[Te]=Q[Te]}return ue.default=Q,re&&re.set(Q,ue),ue}(S());function d(Q){if(typeof WeakMap!="function")return null;var W=new WeakMap,re=new WeakMap;return(d=function(ue){return ue?re:W})(Q)}function A(){var Q=new a.ARRAY_TYPE(3);return a.ARRAY_TYPE!=Float32Array&&(Q[0]=0,Q[1]=0,Q[2]=0),Q}function _(Q){return Math.hypot(Q[0],Q[1],Q[2])}function y(Q,W,re){return Q[0]=W[0]-re[0],Q[1]=W[1]-re[1],Q[2]=W[2]-re[2],Q}function b(Q,W,re){return Q[0]=W[0]*re[0],Q[1]=W[1]*re[1],Q[2]=W[2]*re[2],Q}function N(Q,W,re){return Q[0]=W[0]/re[0],Q[1]=W[1]/re[1],Q[2]=W[2]/re[2],Q}function z(Q,W){return Math.hypot(W[0]-Q[0],W[1]-Q[1],W[2]-Q[2])}function G(Q,W){var re=W[0]-Q[0],ue=W[1]-Q[1],Be=W[2]-Q[2];return re*re+ue*ue+Be*Be}function T(Q){var W=Q[0],re=Q[1],ue=Q[2];return W*W+re*re+ue*ue}function O(Q,W){return Q[0]*W[0]+Q[1]*W[1]+Q[2]*W[2]}Z.sub=y,Z.mul=b,Z.div=N,Z.dist=z,Z.sqrDist=G,Z.len=_,Z.sqrLen=T;var H,U=(H=A(),function(Q,W,re,ue,Be,Te){var he,ke;for(W||(W=3),re||(re=0),ke=ue?Math.min(ue*W+re,Q.length):Q.length,he=re;he<ke;he+=W)H[0]=Q[he],H[1]=Q[he+1],H[2]=Q[he+2],Be(H,H,Te),Q[he]=H[0],Q[he+1]=H[1],Q[he+2]=H[2];return Q});return Z.forEach=U,Z}var be,He,Fe={};function ve(){if(be)return Fe;function f(U){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},f(U)}be=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.create=A,Fe.clone=function(U){var Q=new a.ARRAY_TYPE(4);return Q[0]=U[0],Q[1]=U[1],Q[2]=U[2],Q[3]=U[3],Q},Fe.fromValues=function(U,Q,W,re){var ue=new a.ARRAY_TYPE(4);return ue[0]=U,ue[1]=Q,ue[2]=W,ue[3]=re,ue},Fe.copy=function(U,Q){return U[0]=Q[0],U[1]=Q[1],U[2]=Q[2],U[3]=Q[3],U},Fe.set=function(U,Q,W,re,ue){return U[0]=Q,U[1]=W,U[2]=re,U[3]=ue,U},Fe.add=function(U,Q,W){return U[0]=Q[0]+W[0],U[1]=Q[1]+W[1],U[2]=Q[2]+W[2],U[3]=Q[3]+W[3],U},Fe.subtract=_,Fe.multiply=y,Fe.divide=b,Fe.ceil=function(U,Q){return U[0]=Math.ceil(Q[0]),U[1]=Math.ceil(Q[1]),U[2]=Math.ceil(Q[2]),U[3]=Math.ceil(Q[3]),U},Fe.floor=function(U,Q){return U[0]=Math.floor(Q[0]),U[1]=Math.floor(Q[1]),U[2]=Math.floor(Q[2]),U[3]=Math.floor(Q[3]),U},Fe.min=function(U,Q,W){return U[0]=Math.min(Q[0],W[0]),U[1]=Math.min(Q[1],W[1]),U[2]=Math.min(Q[2],W[2]),U[3]=Math.min(Q[3],W[3]),U},Fe.max=function(U,Q,W){return U[0]=Math.max(Q[0],W[0]),U[1]=Math.max(Q[1],W[1]),U[2]=Math.max(Q[2],W[2]),U[3]=Math.max(Q[3],W[3]),U},Fe.round=function(U,Q){return U[0]=Math.round(Q[0]),U[1]=Math.round(Q[1]),U[2]=Math.round(Q[2]),U[3]=Math.round(Q[3]),U},Fe.scale=function(U,Q,W){return U[0]=Q[0]*W,U[1]=Q[1]*W,U[2]=Q[2]*W,U[3]=Q[3]*W,U},Fe.scaleAndAdd=function(U,Q,W,re){return U[0]=Q[0]+W[0]*re,U[1]=Q[1]+W[1]*re,U[2]=Q[2]+W[2]*re,U[3]=Q[3]+W[3]*re,U},Fe.distance=N,Fe.squaredDistance=z,Fe.length=G,Fe.squaredLength=T,Fe.negate=function(U,Q){return U[0]=-Q[0],U[1]=-Q[1],U[2]=-Q[2],U[3]=-Q[3],U},Fe.inverse=function(U,Q){return U[0]=1/Q[0],U[1]=1/Q[1],U[2]=1/Q[2],U[3]=1/Q[3],U},Fe.normalize=function(U,Q){var W=Q[0],re=Q[1],ue=Q[2],Be=Q[3],Te=W*W+re*re+ue*ue+Be*Be;return Te>0&&(Te=1/Math.sqrt(Te)),U[0]=W*Te,U[1]=re*Te,U[2]=ue*Te,U[3]=Be*Te,U},Fe.dot=function(U,Q){return U[0]*Q[0]+U[1]*Q[1]+U[2]*Q[2]+U[3]*Q[3]},Fe.cross=function(U,Q,W,re){var ue=W[0]*re[1]-W[1]*re[0],Be=W[0]*re[2]-W[2]*re[0],Te=W[0]*re[3]-W[3]*re[0],he=W[1]*re[2]-W[2]*re[1],ke=W[1]*re[3]-W[3]*re[1],Ve=W[2]*re[3]-W[3]*re[2],rt=Q[0],dt=Q[1],ft=Q[2],at=Q[3];return U[0]=dt*Ve-ft*ke+at*he,U[1]=-rt*Ve+ft*Te-at*Be,U[2]=rt*ke-dt*Te+at*ue,U[3]=-rt*he+dt*Be-ft*ue,U},Fe.lerp=function(U,Q,W,re){var ue=Q[0],Be=Q[1],Te=Q[2],he=Q[3];return U[0]=ue+re*(W[0]-ue),U[1]=Be+re*(W[1]-Be),U[2]=Te+re*(W[2]-Te),U[3]=he+re*(W[3]-he),U},Fe.random=function(U,Q){var W,re,ue,Be,Te,he;Q=Q||1;do Te=(W=2*a.RANDOM()-1)*W+(re=2*a.RANDOM()-1)*re;while(Te>=1);do he=(ue=2*a.RANDOM()-1)*ue+(Be=2*a.RANDOM()-1)*Be;while(he>=1);var ke=Math.sqrt((1-Te)/he);return U[0]=Q*W,U[1]=Q*re,U[2]=Q*ue*ke,U[3]=Q*Be*ke,U},Fe.transformMat4=function(U,Q,W){var re=Q[0],ue=Q[1],Be=Q[2],Te=Q[3];return U[0]=W[0]*re+W[4]*ue+W[8]*Be+W[12]*Te,U[1]=W[1]*re+W[5]*ue+W[9]*Be+W[13]*Te,U[2]=W[2]*re+W[6]*ue+W[10]*Be+W[14]*Te,U[3]=W[3]*re+W[7]*ue+W[11]*Be+W[15]*Te,U},Fe.transformQuat=function(U,Q,W){var re=Q[0],ue=Q[1],Be=Q[2],Te=W[0],he=W[1],ke=W[2],Ve=W[3],rt=Ve*re+he*Be-ke*ue,dt=Ve*ue+ke*re-Te*Be,ft=Ve*Be+Te*ue-he*re,at=-Te*re-he*ue-ke*Be;return U[0]=rt*Ve+at*-Te+dt*-ke-ft*-he,U[1]=dt*Ve+at*-he+ft*-Te-rt*-ke,U[2]=ft*Ve+at*-ke+rt*-he-dt*-Te,U[3]=Q[3],U},Fe.zero=function(U){return U[0]=0,U[1]=0,U[2]=0,U[3]=0,U},Fe.str=function(U){return"vec4("+U[0]+", "+U[1]+", "+U[2]+", "+U[3]+")"},Fe.exactEquals=function(U,Q){return U[0]===Q[0]&&U[1]===Q[1]&&U[2]===Q[2]&&U[3]===Q[3]},Fe.equals=function(U,Q){var W=U[0],re=U[1],ue=U[2],Be=U[3],Te=Q[0],he=Q[1],ke=Q[2],Ve=Q[3];return Math.abs(W-Te)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(Te))&&Math.abs(re-he)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(he))&&Math.abs(ue-ke)<=a.EPSILON*Math.max(1,Math.abs(ue),Math.abs(ke))&&Math.abs(Be-Ve)<=a.EPSILON*Math.max(1,Math.abs(Be),Math.abs(Ve))},Fe.forEach=Fe.sqrLen=Fe.len=Fe.sqrDist=Fe.dist=Fe.div=Fe.mul=Fe.sub=void 0;var a=function(U,Q){if(U&&U.__esModule)return U;if(U===null||f(U)!=="object"&&typeof U!="function")return{default:U};var W=d(void 0);if(W&&W.has(U))return W.get(U);var re={},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Be in U)if(Be!=="default"&&Object.prototype.hasOwnProperty.call(U,Be)){var Te=ue?Object.getOwnPropertyDescriptor(U,Be):null;Te&&(Te.get||Te.set)?Object.defineProperty(re,Be,Te):re[Be]=U[Be]}return re.default=U,W&&W.set(U,re),re}(S());function d(U){if(typeof WeakMap!="function")return null;var Q=new WeakMap,W=new WeakMap;return(d=function(re){return re?W:Q})(U)}function A(){var U=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(U[0]=0,U[1]=0,U[2]=0,U[3]=0),U}function _(U,Q,W){return U[0]=Q[0]-W[0],U[1]=Q[1]-W[1],U[2]=Q[2]-W[2],U[3]=Q[3]-W[3],U}function y(U,Q,W){return U[0]=Q[0]*W[0],U[1]=Q[1]*W[1],U[2]=Q[2]*W[2],U[3]=Q[3]*W[3],U}function b(U,Q,W){return U[0]=Q[0]/W[0],U[1]=Q[1]/W[1],U[2]=Q[2]/W[2],U[3]=Q[3]/W[3],U}function N(U,Q){return Math.hypot(Q[0]-U[0],Q[1]-U[1],Q[2]-U[2],Q[3]-U[3])}function z(U,Q){var W=Q[0]-U[0],re=Q[1]-U[1],ue=Q[2]-U[2],Be=Q[3]-U[3];return W*W+re*re+ue*ue+Be*Be}function G(U){return Math.hypot(U[0],U[1],U[2],U[3])}function T(U){var Q=U[0],W=U[1],re=U[2],ue=U[3];return Q*Q+W*W+re*re+ue*ue}Fe.sub=_,Fe.mul=y,Fe.div=b,Fe.dist=N,Fe.sqrDist=z,Fe.len=G,Fe.sqrLen=T;var O,H=(O=A(),function(U,Q,W,re,ue,Be){var Te,he;for(Q||(Q=4),W||(W=0),he=re?Math.min(re*Q+W,U.length):U.length,Te=W;Te<he;Te+=Q)O[0]=U[Te],O[1]=U[Te+1],O[2]=U[Te+2],O[3]=U[Te+3],ue(O,O,Be),U[Te]=O[0],U[Te+1]=O[1],U[Te+2]=O[2],U[Te+3]=O[3];return U});return Fe.forEach=H,Fe}function _e(){if(He)return J;function f(yt){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt},f(yt)}He=1,Object.defineProperty(J,"__esModule",{value:!0}),J.create=N,J.identity=function(yt){return yt[0]=0,yt[1]=0,yt[2]=0,yt[3]=1,yt},J.setAxisAngle=z,J.getAxisAngle=function(yt,Nt){var zt=2*Math.acos(Nt[3]),Gt=Math.sin(zt/2);return Gt>a.EPSILON?(yt[0]=Nt[0]/Gt,yt[1]=Nt[1]/Gt,yt[2]=Nt[2]/Gt):(yt[0]=1,yt[1]=0,yt[2]=0),zt},J.getAngle=function(yt,Nt){var zt=W(yt,Nt);return Math.acos(2*zt*zt-1)},J.multiply=G,J.rotateX=function(yt,Nt,zt){zt*=.5;var Gt=Nt[0],$t=Nt[1],Zt=Nt[2],vr=Nt[3],tr=Math.sin(zt),Br=Math.cos(zt);return yt[0]=Gt*Br+vr*tr,yt[1]=$t*Br+Zt*tr,yt[2]=Zt*Br-$t*tr,yt[3]=vr*Br-Gt*tr,yt},J.rotateY=function(yt,Nt,zt){zt*=.5;var Gt=Nt[0],$t=Nt[1],Zt=Nt[2],vr=Nt[3],tr=Math.sin(zt),Br=Math.cos(zt);return yt[0]=Gt*Br-Zt*tr,yt[1]=$t*Br+vr*tr,yt[2]=Zt*Br+Gt*tr,yt[3]=vr*Br-$t*tr,yt},J.rotateZ=function(yt,Nt,zt){zt*=.5;var Gt=Nt[0],$t=Nt[1],Zt=Nt[2],vr=Nt[3],tr=Math.sin(zt),Br=Math.cos(zt);return yt[0]=Gt*Br+$t*tr,yt[1]=$t*Br-Gt*tr,yt[2]=Zt*Br+vr*tr,yt[3]=vr*Br-Zt*tr,yt},J.calculateW=function(yt,Nt){var zt=Nt[0],Gt=Nt[1],$t=Nt[2];return yt[0]=zt,yt[1]=Gt,yt[2]=$t,yt[3]=Math.sqrt(Math.abs(1-zt*zt-Gt*Gt-$t*$t)),yt},J.exp=T,J.ln=O,J.pow=function(yt,Nt,zt){return O(yt,Nt),Q(yt,yt,zt),T(yt,yt),yt},J.slerp=H,J.random=function(yt){var Nt=a.RANDOM(),zt=a.RANDOM(),Gt=a.RANDOM(),$t=Math.sqrt(1-Nt),Zt=Math.sqrt(Nt);return yt[0]=$t*Math.sin(2*Math.PI*zt),yt[1]=$t*Math.cos(2*Math.PI*zt),yt[2]=Zt*Math.sin(2*Math.PI*Gt),yt[3]=Zt*Math.cos(2*Math.PI*Gt),yt},J.invert=function(yt,Nt){var zt=Nt[0],Gt=Nt[1],$t=Nt[2],Zt=Nt[3],vr=zt*zt+Gt*Gt+$t*$t+Zt*Zt,tr=vr?1/vr:0;return yt[0]=-zt*tr,yt[1]=-Gt*tr,yt[2]=-$t*tr,yt[3]=Zt*tr,yt},J.conjugate=function(yt,Nt){return yt[0]=-Nt[0],yt[1]=-Nt[1],yt[2]=-Nt[2],yt[3]=Nt[3],yt},J.fromMat3=U,J.fromEuler=function(yt,Nt,zt,Gt){var $t=.5*Math.PI/180;Nt*=$t,zt*=$t,Gt*=$t;var Zt=Math.sin(Nt),vr=Math.cos(Nt),tr=Math.sin(zt),Br=Math.cos(zt),Ur=Math.sin(Gt),br=Math.cos(Gt);return yt[0]=Zt*Br*br-vr*tr*Ur,yt[1]=vr*tr*br+Zt*Br*Ur,yt[2]=vr*Br*Ur-Zt*tr*br,yt[3]=vr*Br*br+Zt*tr*Ur,yt},J.str=function(yt){return"quat("+yt[0]+", "+yt[1]+", "+yt[2]+", "+yt[3]+")"},J.setAxes=J.sqlerp=J.rotationTo=J.equals=J.exactEquals=J.normalize=J.sqrLen=J.squaredLength=J.len=J.length=J.lerp=J.dot=J.scale=J.mul=J.add=J.set=J.copy=J.fromValues=J.clone=void 0;var a=b(S()),d=b(se()),A=b(Ie()),_=b(ve());function y(yt){if(typeof WeakMap!="function")return null;var Nt=new WeakMap,zt=new WeakMap;return(y=function(Gt){return Gt?zt:Nt})(yt)}function b(yt,Nt){if(yt&&yt.__esModule)return yt;if(yt===null||f(yt)!=="object"&&typeof yt!="function")return{default:yt};var zt=y(Nt);if(zt&&zt.has(yt))return zt.get(yt);var Gt={},$t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Zt in yt)if(Zt!=="default"&&Object.prototype.hasOwnProperty.call(yt,Zt)){var vr=$t?Object.getOwnPropertyDescriptor(yt,Zt):null;vr&&(vr.get||vr.set)?Object.defineProperty(Gt,Zt,vr):Gt[Zt]=yt[Zt]}return Gt.default=yt,zt&&zt.set(yt,Gt),Gt}function N(){var yt=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(yt[0]=0,yt[1]=0,yt[2]=0),yt[3]=1,yt}function z(yt,Nt,zt){zt*=.5;var Gt=Math.sin(zt);return yt[0]=Gt*Nt[0],yt[1]=Gt*Nt[1],yt[2]=Gt*Nt[2],yt[3]=Math.cos(zt),yt}function G(yt,Nt,zt){var Gt=Nt[0],$t=Nt[1],Zt=Nt[2],vr=Nt[3],tr=zt[0],Br=zt[1],Ur=zt[2],br=zt[3];return yt[0]=Gt*br+vr*tr+$t*Ur-Zt*Br,yt[1]=$t*br+vr*Br+Zt*tr-Gt*Ur,yt[2]=Zt*br+vr*Ur+Gt*Br-$t*tr,yt[3]=vr*br-Gt*tr-$t*Br-Zt*Ur,yt}function T(yt,Nt){var zt=Nt[0],Gt=Nt[1],$t=Nt[2],Zt=Nt[3],vr=Math.sqrt(zt*zt+Gt*Gt+$t*$t),tr=Math.exp(Zt),Br=vr>0?tr*Math.sin(vr)/vr:0;return yt[0]=zt*Br,yt[1]=Gt*Br,yt[2]=$t*Br,yt[3]=tr*Math.cos(vr),yt}function O(yt,Nt){var zt=Nt[0],Gt=Nt[1],$t=Nt[2],Zt=Nt[3],vr=Math.sqrt(zt*zt+Gt*Gt+$t*$t),tr=vr>0?Math.atan2(vr,Zt)/vr:0;return yt[0]=zt*tr,yt[1]=Gt*tr,yt[2]=$t*tr,yt[3]=.5*Math.log(zt*zt+Gt*Gt+$t*$t+Zt*Zt),yt}function H(yt,Nt,zt,Gt){var $t,Zt,vr,tr,Br,Ur=Nt[0],br=Nt[1],Cn=Nt[2],hn=Nt[3],tn=zt[0],Vr=zt[1],Jn=zt[2],wn=zt[3];return(Zt=Ur*tn+br*Vr+Cn*Jn+hn*wn)<0&&(Zt=-Zt,tn=-tn,Vr=-Vr,Jn=-Jn,wn=-wn),1-Zt>a.EPSILON?($t=Math.acos(Zt),vr=Math.sin($t),tr=Math.sin((1-Gt)*$t)/vr,Br=Math.sin(Gt*$t)/vr):(tr=1-Gt,Br=Gt),yt[0]=tr*Ur+Br*tn,yt[1]=tr*br+Br*Vr,yt[2]=tr*Cn+Br*Jn,yt[3]=tr*hn+Br*wn,yt}function U(yt,Nt){var zt,Gt=Nt[0]+Nt[4]+Nt[8];if(Gt>0)zt=Math.sqrt(Gt+1),yt[3]=.5*zt,yt[0]=(Nt[5]-Nt[7])*(zt=.5/zt),yt[1]=(Nt[6]-Nt[2])*zt,yt[2]=(Nt[1]-Nt[3])*zt;else{var $t=0;Nt[4]>Nt[0]&&($t=1),Nt[8]>Nt[3*$t+$t]&&($t=2);var Zt=($t+1)%3,vr=($t+2)%3;zt=Math.sqrt(Nt[3*$t+$t]-Nt[3*Zt+Zt]-Nt[3*vr+vr]+1),yt[$t]=.5*zt,yt[3]=(Nt[3*Zt+vr]-Nt[3*vr+Zt])*(zt=.5/zt),yt[Zt]=(Nt[3*Zt+$t]+Nt[3*$t+Zt])*zt,yt[vr]=(Nt[3*vr+$t]+Nt[3*$t+vr])*zt}return yt}J.clone=_.clone,J.fromValues=_.fromValues,J.copy=_.copy,J.set=_.set,J.add=_.add,J.mul=G;var Q=_.scale;J.scale=Q;var W=_.dot;J.dot=W,J.lerp=_.lerp;var re=_.length;J.length=re,J.len=re;var ue=_.squaredLength;J.squaredLength=ue,J.sqrLen=ue;var Be=_.normalize;J.normalize=Be,J.exactEquals=_.exactEquals,J.equals=_.equals;var Te,he,ke,Ve=(Te=A.create(),he=A.fromValues(1,0,0),ke=A.fromValues(0,1,0),function(yt,Nt,zt){var Gt=A.dot(Nt,zt);return Gt<-.999999?(A.cross(Te,he,Nt),A.len(Te)<1e-6&&A.cross(Te,ke,Nt),A.normalize(Te,Te),z(yt,Te,Math.PI),yt):Gt>.999999?(yt[0]=0,yt[1]=0,yt[2]=0,yt[3]=1,yt):(A.cross(Te,Nt,zt),yt[0]=Te[0],yt[1]=Te[1],yt[2]=Te[2],yt[3]=1+Gt,Be(yt,yt))});J.rotationTo=Ve;var rt,dt,ft=(rt=N(),dt=N(),function(yt,Nt,zt,Gt,$t,Zt){return H(rt,Nt,$t,Zt),H(dt,zt,Gt,Zt),H(yt,rt,dt,2*Zt*(1-Zt)),yt});J.sqlerp=ft;var at,Et=(at=d.create(),function(yt,Nt,zt,Gt){return at[0]=zt[0],at[3]=zt[1],at[6]=zt[2],at[1]=Gt[0],at[4]=Gt[1],at[7]=Gt[2],at[2]=-Nt[0],at[5]=-Nt[1],at[8]=-Nt[2],Be(yt,U(yt,at))});return J.setAxes=Et,J}var ze,Ne={};function st(){if(ze)return Ne;function f(H){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},f(H)}ze=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.create=function(){var H=new a.ARRAY_TYPE(8);return a.ARRAY_TYPE!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0,H[4]=0,H[5]=0,H[6]=0,H[7]=0),H[3]=1,H},Ne.clone=function(H){var U=new a.ARRAY_TYPE(8);return U[0]=H[0],U[1]=H[1],U[2]=H[2],U[3]=H[3],U[4]=H[4],U[5]=H[5],U[6]=H[6],U[7]=H[7],U},Ne.fromValues=function(H,U,Q,W,re,ue,Be,Te){var he=new a.ARRAY_TYPE(8);return he[0]=H,he[1]=U,he[2]=Q,he[3]=W,he[4]=re,he[5]=ue,he[6]=Be,he[7]=Te,he},Ne.fromRotationTranslationValues=function(H,U,Q,W,re,ue,Be){var Te=new a.ARRAY_TYPE(8);Te[0]=H,Te[1]=U,Te[2]=Q,Te[3]=W;var he=.5*re,ke=.5*ue,Ve=.5*Be;return Te[4]=he*W+ke*Q-Ve*U,Te[5]=ke*W+Ve*H-he*Q,Te[6]=Ve*W+he*U-ke*H,Te[7]=-he*H-ke*U-Ve*Q,Te},Ne.fromRotationTranslation=b,Ne.fromTranslation=function(H,U){return H[0]=0,H[1]=0,H[2]=0,H[3]=1,H[4]=.5*U[0],H[5]=.5*U[1],H[6]=.5*U[2],H[7]=0,H},Ne.fromRotation=function(H,U){return H[0]=U[0],H[1]=U[1],H[2]=U[2],H[3]=U[3],H[4]=0,H[5]=0,H[6]=0,H[7]=0,H},Ne.fromMat4=function(H,U){var Q=d.create();A.getRotation(Q,U);var W=new a.ARRAY_TYPE(3);return A.getTranslation(W,U),b(H,Q,W),H},Ne.copy=N,Ne.identity=function(H){return H[0]=0,H[1]=0,H[2]=0,H[3]=1,H[4]=0,H[5]=0,H[6]=0,H[7]=0,H},Ne.set=function(H,U,Q,W,re,ue,Be,Te,he){return H[0]=U,H[1]=Q,H[2]=W,H[3]=re,H[4]=ue,H[5]=Be,H[6]=Te,H[7]=he,H},Ne.getDual=function(H,U){return H[0]=U[4],H[1]=U[5],H[2]=U[6],H[3]=U[7],H},Ne.setDual=function(H,U){return H[4]=U[0],H[5]=U[1],H[6]=U[2],H[7]=U[3],H},Ne.getTranslation=function(H,U){var Q=U[4],W=U[5],re=U[6],ue=U[7],Be=-U[0],Te=-U[1],he=-U[2],ke=U[3];return H[0]=2*(Q*ke+ue*Be+W*he-re*Te),H[1]=2*(W*ke+ue*Te+re*Be-Q*he),H[2]=2*(re*ke+ue*he+Q*Te-W*Be),H},Ne.translate=function(H,U,Q){var W=U[0],re=U[1],ue=U[2],Be=U[3],Te=.5*Q[0],he=.5*Q[1],ke=.5*Q[2],Ve=U[4],rt=U[5],dt=U[6],ft=U[7];return H[0]=W,H[1]=re,H[2]=ue,H[3]=Be,H[4]=Be*Te+re*ke-ue*he+Ve,H[5]=Be*he+ue*Te-W*ke+rt,H[6]=Be*ke+W*he-re*Te+dt,H[7]=-W*Te-re*he-ue*ke+ft,H},Ne.rotateX=function(H,U,Q){var W=-U[0],re=-U[1],ue=-U[2],Be=U[3],Te=U[4],he=U[5],ke=U[6],Ve=U[7],rt=Te*Be+Ve*W+he*ue-ke*re,dt=he*Be+Ve*re+ke*W-Te*ue,ft=ke*Be+Ve*ue+Te*re-he*W,at=Ve*Be-Te*W-he*re-ke*ue;return d.rotateX(H,U,Q),H[4]=rt*(Be=H[3])+at*(W=H[0])+dt*(ue=H[2])-ft*(re=H[1]),H[5]=dt*Be+at*re+ft*W-rt*ue,H[6]=ft*Be+at*ue+rt*re-dt*W,H[7]=at*Be-rt*W-dt*re-ft*ue,H},Ne.rotateY=function(H,U,Q){var W=-U[0],re=-U[1],ue=-U[2],Be=U[3],Te=U[4],he=U[5],ke=U[6],Ve=U[7],rt=Te*Be+Ve*W+he*ue-ke*re,dt=he*Be+Ve*re+ke*W-Te*ue,ft=ke*Be+Ve*ue+Te*re-he*W,at=Ve*Be-Te*W-he*re-ke*ue;return d.rotateY(H,U,Q),H[4]=rt*(Be=H[3])+at*(W=H[0])+dt*(ue=H[2])-ft*(re=H[1]),H[5]=dt*Be+at*re+ft*W-rt*ue,H[6]=ft*Be+at*ue+rt*re-dt*W,H[7]=at*Be-rt*W-dt*re-ft*ue,H},Ne.rotateZ=function(H,U,Q){var W=-U[0],re=-U[1],ue=-U[2],Be=U[3],Te=U[4],he=U[5],ke=U[6],Ve=U[7],rt=Te*Be+Ve*W+he*ue-ke*re,dt=he*Be+Ve*re+ke*W-Te*ue,ft=ke*Be+Ve*ue+Te*re-he*W,at=Ve*Be-Te*W-he*re-ke*ue;return d.rotateZ(H,U,Q),H[4]=rt*(Be=H[3])+at*(W=H[0])+dt*(ue=H[2])-ft*(re=H[1]),H[5]=dt*Be+at*re+ft*W-rt*ue,H[6]=ft*Be+at*ue+rt*re-dt*W,H[7]=at*Be-rt*W-dt*re-ft*ue,H},Ne.rotateByQuatAppend=function(H,U,Q){var W=Q[0],re=Q[1],ue=Q[2],Be=Q[3],Te=U[0],he=U[1],ke=U[2],Ve=U[3];return H[0]=Te*Be+Ve*W+he*ue-ke*re,H[1]=he*Be+Ve*re+ke*W-Te*ue,H[2]=ke*Be+Ve*ue+Te*re-he*W,H[3]=Ve*Be-Te*W-he*re-ke*ue,H[4]=(Te=U[4])*Be+(Ve=U[7])*W+(he=U[5])*ue-(ke=U[6])*re,H[5]=he*Be+Ve*re+ke*W-Te*ue,H[6]=ke*Be+Ve*ue+Te*re-he*W,H[7]=Ve*Be-Te*W-he*re-ke*ue,H},Ne.rotateByQuatPrepend=function(H,U,Q){var W=U[0],re=U[1],ue=U[2],Be=U[3],Te=Q[0],he=Q[1],ke=Q[2],Ve=Q[3];return H[0]=W*Ve+Be*Te+re*ke-ue*he,H[1]=re*Ve+Be*he+ue*Te-W*ke,H[2]=ue*Ve+Be*ke+W*he-re*Te,H[3]=Be*Ve-W*Te-re*he-ue*ke,H[4]=W*(Ve=Q[7])+Be*(Te=Q[4])+re*(ke=Q[6])-ue*(he=Q[5]),H[5]=re*Ve+Be*he+ue*Te-W*ke,H[6]=ue*Ve+Be*ke+W*he-re*Te,H[7]=Be*Ve-W*Te-re*he-ue*ke,H},Ne.rotateAroundAxis=function(H,U,Q,W){if(Math.abs(W)<a.EPSILON)return N(H,U);var re=Math.hypot(Q[0],Q[1],Q[2]);W*=.5;var ue=Math.sin(W),Be=ue*Q[0]/re,Te=ue*Q[1]/re,he=ue*Q[2]/re,ke=Math.cos(W),Ve=U[0],rt=U[1],dt=U[2],ft=U[3];H[0]=Ve*ke+ft*Be+rt*he-dt*Te,H[1]=rt*ke+ft*Te+dt*Be-Ve*he,H[2]=dt*ke+ft*he+Ve*Te-rt*Be,H[3]=ft*ke-Ve*Be-rt*Te-dt*he;var at=U[4],Et=U[5],yt=U[6],Nt=U[7];return H[4]=at*ke+Nt*Be+Et*he-yt*Te,H[5]=Et*ke+Nt*Te+yt*Be-at*he,H[6]=yt*ke+Nt*he+at*Te-Et*Be,H[7]=Nt*ke-at*Be-Et*Te-yt*he,H},Ne.add=function(H,U,Q){return H[0]=U[0]+Q[0],H[1]=U[1]+Q[1],H[2]=U[2]+Q[2],H[3]=U[3]+Q[3],H[4]=U[4]+Q[4],H[5]=U[5]+Q[5],H[6]=U[6]+Q[6],H[7]=U[7]+Q[7],H},Ne.multiply=z,Ne.scale=function(H,U,Q){return H[0]=U[0]*Q,H[1]=U[1]*Q,H[2]=U[2]*Q,H[3]=U[3]*Q,H[4]=U[4]*Q,H[5]=U[5]*Q,H[6]=U[6]*Q,H[7]=U[7]*Q,H},Ne.lerp=function(H,U,Q,W){var re=1-W;return G(U,Q)<0&&(W=-W),H[0]=U[0]*re+Q[0]*W,H[1]=U[1]*re+Q[1]*W,H[2]=U[2]*re+Q[2]*W,H[3]=U[3]*re+Q[3]*W,H[4]=U[4]*re+Q[4]*W,H[5]=U[5]*re+Q[5]*W,H[6]=U[6]*re+Q[6]*W,H[7]=U[7]*re+Q[7]*W,H},Ne.invert=function(H,U){var Q=O(U);return H[0]=-U[0]/Q,H[1]=-U[1]/Q,H[2]=-U[2]/Q,H[3]=U[3]/Q,H[4]=-U[4]/Q,H[5]=-U[5]/Q,H[6]=-U[6]/Q,H[7]=U[7]/Q,H},Ne.conjugate=function(H,U){return H[0]=-U[0],H[1]=-U[1],H[2]=-U[2],H[3]=U[3],H[4]=-U[4],H[5]=-U[5],H[6]=-U[6],H[7]=U[7],H},Ne.normalize=function(H,U){var Q=O(U);if(Q>0){Q=Math.sqrt(Q);var W=U[0]/Q,re=U[1]/Q,ue=U[2]/Q,Be=U[3]/Q,Te=U[4],he=U[5],ke=U[6],Ve=U[7],rt=W*Te+re*he+ue*ke+Be*Ve;H[0]=W,H[1]=re,H[2]=ue,H[3]=Be,H[4]=(Te-W*rt)/Q,H[5]=(he-re*rt)/Q,H[6]=(ke-ue*rt)/Q,H[7]=(Ve-Be*rt)/Q}return H},Ne.str=function(H){return"quat2("+H[0]+", "+H[1]+", "+H[2]+", "+H[3]+", "+H[4]+", "+H[5]+", "+H[6]+", "+H[7]+")"},Ne.exactEquals=function(H,U){return H[0]===U[0]&&H[1]===U[1]&&H[2]===U[2]&&H[3]===U[3]&&H[4]===U[4]&&H[5]===U[5]&&H[6]===U[6]&&H[7]===U[7]},Ne.equals=function(H,U){var Q=H[0],W=H[1],re=H[2],ue=H[3],Be=H[4],Te=H[5],he=H[6],ke=H[7],Ve=U[0],rt=U[1],dt=U[2],ft=U[3],at=U[4],Et=U[5],yt=U[6],Nt=U[7];return Math.abs(Q-Ve)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Ve))&&Math.abs(W-rt)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(rt))&&Math.abs(re-dt)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(dt))&&Math.abs(ue-ft)<=a.EPSILON*Math.max(1,Math.abs(ue),Math.abs(ft))&&Math.abs(Be-at)<=a.EPSILON*Math.max(1,Math.abs(Be),Math.abs(at))&&Math.abs(Te-Et)<=a.EPSILON*Math.max(1,Math.abs(Te),Math.abs(Et))&&Math.abs(he-yt)<=a.EPSILON*Math.max(1,Math.abs(he),Math.abs(yt))&&Math.abs(ke-Nt)<=a.EPSILON*Math.max(1,Math.abs(ke),Math.abs(Nt))},Ne.sqrLen=Ne.squaredLength=Ne.len=Ne.length=Ne.dot=Ne.mul=Ne.setReal=Ne.getReal=void 0;var a=y(S()),d=y(_e()),A=y(de());function _(H){if(typeof WeakMap!="function")return null;var U=new WeakMap,Q=new WeakMap;return(_=function(W){return W?Q:U})(H)}function y(H,U){if(H&&H.__esModule)return H;if(H===null||f(H)!=="object"&&typeof H!="function")return{default:H};var Q=_(U);if(Q&&Q.has(H))return Q.get(H);var W={},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in H)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(H,ue)){var Be=re?Object.getOwnPropertyDescriptor(H,ue):null;Be&&(Be.get||Be.set)?Object.defineProperty(W,ue,Be):W[ue]=H[ue]}return W.default=H,Q&&Q.set(H,W),W}function b(H,U,Q){var W=.5*Q[0],re=.5*Q[1],ue=.5*Q[2],Be=U[0],Te=U[1],he=U[2],ke=U[3];return H[0]=Be,H[1]=Te,H[2]=he,H[3]=ke,H[4]=W*ke+re*he-ue*Te,H[5]=re*ke+ue*Be-W*he,H[6]=ue*ke+W*Te-re*Be,H[7]=-W*Be-re*Te-ue*he,H}function N(H,U){return H[0]=U[0],H[1]=U[1],H[2]=U[2],H[3]=U[3],H[4]=U[4],H[5]=U[5],H[6]=U[6],H[7]=U[7],H}function z(H,U,Q){var W=U[0],re=U[1],ue=U[2],Be=U[3],Te=Q[4],he=Q[5],ke=Q[6],Ve=Q[7],rt=U[4],dt=U[5],ft=U[6],at=U[7],Et=Q[0],yt=Q[1],Nt=Q[2],zt=Q[3];return H[0]=W*zt+Be*Et+re*Nt-ue*yt,H[1]=re*zt+Be*yt+ue*Et-W*Nt,H[2]=ue*zt+Be*Nt+W*yt-re*Et,H[3]=Be*zt-W*Et-re*yt-ue*Nt,H[4]=W*Ve+Be*Te+re*ke-ue*he+rt*zt+at*Et+dt*Nt-ft*yt,H[5]=re*Ve+Be*he+ue*Te-W*ke+dt*zt+at*yt+ft*Et-rt*Nt,H[6]=ue*Ve+Be*ke+W*he-re*Te+ft*zt+at*Nt+rt*yt-dt*Et,H[7]=Be*Ve-W*Te-re*he-ue*ke+at*zt-rt*Et-dt*yt-ft*Nt,H}Ne.getReal=d.copy,Ne.setReal=d.copy,Ne.mul=z;var G=d.dot;Ne.dot=G;var T=d.length;Ne.length=T,Ne.len=T;var O=d.squaredLength;return Ne.squaredLength=O,Ne.sqrLen=O,Ne}var ie,le,pe={};function fe(){if(ie)return pe;function f(U){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},f(U)}ie=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.create=A,pe.clone=function(U){var Q=new a.ARRAY_TYPE(2);return Q[0]=U[0],Q[1]=U[1],Q},pe.fromValues=function(U,Q){var W=new a.ARRAY_TYPE(2);return W[0]=U,W[1]=Q,W},pe.copy=function(U,Q){return U[0]=Q[0],U[1]=Q[1],U},pe.set=function(U,Q,W){return U[0]=Q,U[1]=W,U},pe.add=function(U,Q,W){return U[0]=Q[0]+W[0],U[1]=Q[1]+W[1],U},pe.subtract=_,pe.multiply=y,pe.divide=b,pe.ceil=function(U,Q){return U[0]=Math.ceil(Q[0]),U[1]=Math.ceil(Q[1]),U},pe.floor=function(U,Q){return U[0]=Math.floor(Q[0]),U[1]=Math.floor(Q[1]),U},pe.min=function(U,Q,W){return U[0]=Math.min(Q[0],W[0]),U[1]=Math.min(Q[1],W[1]),U},pe.max=function(U,Q,W){return U[0]=Math.max(Q[0],W[0]),U[1]=Math.max(Q[1],W[1]),U},pe.round=function(U,Q){return U[0]=Math.round(Q[0]),U[1]=Math.round(Q[1]),U},pe.scale=function(U,Q,W){return U[0]=Q[0]*W,U[1]=Q[1]*W,U},pe.scaleAndAdd=function(U,Q,W,re){return U[0]=Q[0]+W[0]*re,U[1]=Q[1]+W[1]*re,U},pe.distance=N,pe.squaredDistance=z,pe.length=G,pe.squaredLength=T,pe.negate=function(U,Q){return U[0]=-Q[0],U[1]=-Q[1],U},pe.inverse=function(U,Q){return U[0]=1/Q[0],U[1]=1/Q[1],U},pe.normalize=function(U,Q){var W=Q[0],re=Q[1],ue=W*W+re*re;return ue>0&&(ue=1/Math.sqrt(ue)),U[0]=Q[0]*ue,U[1]=Q[1]*ue,U},pe.dot=function(U,Q){return U[0]*Q[0]+U[1]*Q[1]},pe.cross=function(U,Q,W){var re=Q[0]*W[1]-Q[1]*W[0];return U[0]=U[1]=0,U[2]=re,U},pe.lerp=function(U,Q,W,re){var ue=Q[0],Be=Q[1];return U[0]=ue+re*(W[0]-ue),U[1]=Be+re*(W[1]-Be),U},pe.random=function(U,Q){Q=Q||1;var W=2*a.RANDOM()*Math.PI;return U[0]=Math.cos(W)*Q,U[1]=Math.sin(W)*Q,U},pe.transformMat2=function(U,Q,W){var re=Q[0],ue=Q[1];return U[0]=W[0]*re+W[2]*ue,U[1]=W[1]*re+W[3]*ue,U},pe.transformMat2d=function(U,Q,W){var re=Q[0],ue=Q[1];return U[0]=W[0]*re+W[2]*ue+W[4],U[1]=W[1]*re+W[3]*ue+W[5],U},pe.transformMat3=function(U,Q,W){var re=Q[0],ue=Q[1];return U[0]=W[0]*re+W[3]*ue+W[6],U[1]=W[1]*re+W[4]*ue+W[7],U},pe.transformMat4=function(U,Q,W){var re=Q[0],ue=Q[1];return U[0]=W[0]*re+W[4]*ue+W[12],U[1]=W[1]*re+W[5]*ue+W[13],U},pe.rotate=function(U,Q,W,re){var ue=Q[0]-W[0],Be=Q[1]-W[1],Te=Math.sin(re),he=Math.cos(re);return U[0]=ue*he-Be*Te+W[0],U[1]=ue*Te+Be*he+W[1],U},pe.angle=function(U,Q){var W=U[0],re=U[1],ue=Q[0],Be=Q[1],Te=Math.sqrt(W*W+re*re)*Math.sqrt(ue*ue+Be*Be);return Math.acos(Math.min(Math.max(Te&&(W*ue+re*Be)/Te,-1),1))},pe.zero=function(U){return U[0]=0,U[1]=0,U},pe.str=function(U){return"vec2("+U[0]+", "+U[1]+")"},pe.exactEquals=function(U,Q){return U[0]===Q[0]&&U[1]===Q[1]},pe.equals=function(U,Q){var W=U[0],re=U[1],ue=Q[0],Be=Q[1];return Math.abs(W-ue)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(ue))&&Math.abs(re-Be)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(Be))},pe.forEach=pe.sqrLen=pe.sqrDist=pe.dist=pe.div=pe.mul=pe.sub=pe.len=void 0;var a=function(U,Q){if(U&&U.__esModule)return U;if(U===null||f(U)!=="object"&&typeof U!="function")return{default:U};var W=d(void 0);if(W&&W.has(U))return W.get(U);var re={},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Be in U)if(Be!=="default"&&Object.prototype.hasOwnProperty.call(U,Be)){var Te=ue?Object.getOwnPropertyDescriptor(U,Be):null;Te&&(Te.get||Te.set)?Object.defineProperty(re,Be,Te):re[Be]=U[Be]}return re.default=U,W&&W.set(U,re),re}(S());function d(U){if(typeof WeakMap!="function")return null;var Q=new WeakMap,W=new WeakMap;return(d=function(re){return re?W:Q})(U)}function A(){var U=new a.ARRAY_TYPE(2);return a.ARRAY_TYPE!=Float32Array&&(U[0]=0,U[1]=0),U}function _(U,Q,W){return U[0]=Q[0]-W[0],U[1]=Q[1]-W[1],U}function y(U,Q,W){return U[0]=Q[0]*W[0],U[1]=Q[1]*W[1],U}function b(U,Q,W){return U[0]=Q[0]/W[0],U[1]=Q[1]/W[1],U}function N(U,Q){return Math.hypot(Q[0]-U[0],Q[1]-U[1])}function z(U,Q){var W=Q[0]-U[0],re=Q[1]-U[1];return W*W+re*re}function G(U){return Math.hypot(U[0],U[1])}function T(U){var Q=U[0],W=U[1];return Q*Q+W*W}pe.len=G,pe.sub=_,pe.mul=y,pe.div=b,pe.dist=N,pe.sqrDist=z,pe.sqrLen=T;var O,H=(O=A(),function(U,Q,W,re,ue,Be){var Te,he;for(Q||(Q=2),W||(W=0),he=re?Math.min(re*Q+W,U.length):U.length,Te=W;Te<he;Te+=Q)O[0]=U[Te],O[1]=U[Te+1],ue(O,O,Be),U[Te]=O[0],U[Te+1]=O[1];return U});return pe.forEach=H,pe}function Qe(){if(le)return C;function f(U){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},f(U)}le=1,Object.defineProperty(C,"__esModule",{value:!0}),C.vec4=C.vec3=C.vec2=C.quat2=C.quat=C.mat4=C.mat3=C.mat2d=C.mat2=C.glMatrix=void 0;var a=H(S());C.glMatrix=a;var d=H(D());C.mat2=d;var A=H(V());C.mat2d=A;var _=H(se());C.mat3=_;var y=H(de());C.mat4=y;var b=H(_e());C.quat=b;var N=H(st());C.quat2=N;var z=H(fe());C.vec2=z;var G=H(Ie());C.vec3=G;var T=H(ve());function O(U){if(typeof WeakMap!="function")return null;var Q=new WeakMap,W=new WeakMap;return(O=function(re){return re?W:Q})(U)}function H(U,Q){if(U&&U.__esModule)return U;if(U===null||f(U)!=="object"&&typeof U!="function")return{default:U};var W=O(Q);if(W&&W.has(U))return W.get(U);var re={},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Be in U)if(Be!=="default"&&Object.prototype.hasOwnProperty.call(U,Be)){var Te=ue?Object.getOwnPropertyDescriptor(U,Be):null;Te&&(Te.get||Te.set)?Object.defineProperty(re,Be,Te):re[Be]=U[Be]}return re.default=U,W&&W.set(U,re),re}return C.vec4=T,C}var Ke,et,tt,bt,De=Qe(),Mt=function(){if(et)return Ke;function f(a,d,A,_){this.cx=3*a,this.bx=3*(A-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(_-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=d,this.p2x=A,this.p2y=_}return et=1,Ke=f,f.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,d){if(d===void 0&&(d=1e-6),a<0)return 0;if(a>1)return 1;for(var A=a,_=0;_<8;_++){var y=this.sampleCurveX(A)-a;if(Math.abs(y)<d)return A;var b=this.sampleCurveDerivativeX(A);if(Math.abs(b)<1e-6)break;A-=y/b}var N=0,z=1;for(A=a,_=0;_<20&&(y=this.sampleCurveX(A),!(Math.abs(y-a)<d));_++)a>y?N=A:z=A,A=.5*(z-N)+N;return A},solve:function(a,d){return this.sampleCurveY(this.solveCurveX(a,d))}},Ke}(),ir=m(Mt);function Ar(){if(bt)return tt;function f(a,d){this.x=a,this.y=d}return bt=1,tt=f,f.prototype={clone:function(){return new f(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,d){return this.clone()._rotateAround(a,d)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var d=a.x-this.x,A=a.y-this.y;return d*d+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,d){return Math.atan2(this.x*d-this.y*a,this.x*a+this.y*d)},_matMult:function(a){var d=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=d,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var d=Math.cos(a),A=Math.sin(a),_=A*this.x+d*this.y;return this.x=d*this.x-A*this.y,this.y=_,this},_rotateAround:function(a,d){var A=Math.cos(a),_=Math.sin(a),y=d.y+_*(this.x-d.x)+A*(this.y-d.y);return this.x=d.x+A*(this.x-d.x)-_*(this.y-d.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(a){return a instanceof f?a:Array.isArray(a)?new f(a[0],a[1]):a},tt}var Ze=m(Ar());function Ue(f,a){if(Array.isArray(f)){if(!Array.isArray(a)||f.length!==a.length)return!1;for(let d=0;d<f.length;d++)if(!Ue(f[d],a[d]))return!1;return!0}if(typeof f=="object"&&f!==null&&a!==null){if(typeof a!="object"||Object.keys(f).length!==Object.keys(a).length)return!1;for(const d in f)if(!Ue(f[d],a[d]))return!1;return!0}return f===a}const hr=Math.PI/180,Dt=180/Math.PI;function vt(f){return f*hr}function Kt(f){return f*Dt}const rr=[[0,0],[1,0],[1,1],[0,1]];function nr(f){if(f<=0)return 0;if(f>=1)return 1;const a=f*f,d=a*f;return 4*(f<.5?d:3*(f-a)+d-.75)}function Nr(f,a,d,A){const _=new ir(f,a,d,A);return function(y){return _.solve(y)}}const on=Nr(.25,.1,.25,1);function Ir(f,a,d){return Math.min(d,Math.max(a,f))}function cn(f,a,d){return(d=Ir((d-f)/(a-f),0,1))*d*(3-2*d)}function Sn(f,a,d){const A=d-a,_=((f-a)%A+A)%A+a;return _===a?d:_}function Ln(f,a,d){if(!f.length)return d(null,[]);let A=f.length;const _=new Array(f.length);let y=null;f.forEach((b,N)=>{a(b,(z,G)=>{z&&(y=z),_[N]=G,--A==0&&d(y,_)})})}function ln(f,...a){for(const d of a)for(const A in d)f[A]=d[A];return f}let ar=1;function Yt(){return ar++}function Gr(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))}function Wr(f,a){f.forEach(d=>{a[d]&&(a[d]=a[d].bind(a))})}function On(f,a){return f.indexOf(a,f.length-a.length)!==-1}function mn(f,a,d){const A={};for(const _ in f)A[_]=a.call(this,f[_],_,f);return A}function Hn(f,a,d){const A={};for(const _ in f)a.call(this,f[_],_,f)&&(A[_]=f[_]);return A}function Vi(f){return Array.isArray(f)?f.map(Vi):typeof f=="object"&&f?mn(f,Vi):f}const Bn={};function jn(f){Bn[f]||(typeof console<"u"&&console.warn(f),Bn[f]=!0)}function Dn(f,a,d){return(d.y-f.y)*(a.x-f.x)>(a.y-f.y)*(d.x-f.x)}function Gi(f){let a=0;for(let d,A,_=0,y=f.length,b=y-1;_<y;b=_++)d=f[_],A=f[b],a+=(A.x-d.x)*(d.y+A.y);return a}function Rn([f,a,d]){const A=vt(a+90),_=vt(d);return{x:f*Math.cos(A)*Math.sin(_),y:f*Math.sin(A)*Math.sin(_),z:f*Math.cos(_),azimuthal:a,polar:d}}function Zr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Pr(f){const a={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,A,_,y)=>{const b=_||y;return a[A]=!b||b.toLowerCase(),""}),a["max-age"]){const d=parseInt(a["max-age"],10);isNaN(d)?delete a["max-age"]:a["max-age"]=d}return a}let un,Ii=null;function ri(f,a){return[f[4*a],f[4*a+1],f[4*a+2],f[4*a+3]]}function ur(f,a,d,A){for(;a<d;){const _=a+d>>1;f[_]<A?a=_+1:d=_}return a}function We(f,a,d,A){for(;a<d;){const _=a+d>>1;f[_]<=A?a=_+1:d=_}return a}function qe(f){return f>0?1/(1.001-f):1+f}function pt(f){return f>0?1-1/(1.001-f):-f}const Lt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(un==null){const f=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{un=r.API_URL_REGEX!=null?new RegExp(r.API_URL_REGEX):f}catch{un=f}}return un},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Lt.API_URL)return null;try{const f=new URL(Lt.API_URL);return f.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":f.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Ct(f){return Lt.API_URL_REGEX.test(f)}function kt(f){return Lt.API_SPRITE_REGEX.test(f)}let Wt,Rt,fr,xr,pr,Lr;function rn(){return Wt==null&&(Wt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Wt}const sn={now:()=>xr!==void 0?xr:performance.now(),setNow(f){xr=f},restoreNow(){xr=void 0},frame(f){const a=requestAnimationFrame(f);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(f,a=0){const{width:d,height:A}=f;pr||(pr=document.createElement("canvas"));const _=pr.getContext("2d",{willReadFrequently:!0});if(!_)throw new Error("failed to create canvas 2d context");return(d>pr.width||A>pr.height)&&(pr.width=d,pr.height=A),_.clearRect(-a,-a,d+2*a,A+2*a),_.drawImage(f,0,0,d,A),_.getImageData(-a,-a,d+2*a,A+2*a)},resolveURL:f=>(Rt||(Rt=document.createElement("a")),Rt.href=f,Rt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(fr==null&&(fr=window.matchMedia("(prefers-reduced-motion: reduce)")),fr.matches)},hasCanvasFingerprintNoise(){if(Lr!==void 0)return Lr;if(!rn())return Lr=!1,!1;const f=new OffscreenCanvas(85,1),a=f.getContext("2d",{willReadFrequently:!0});let d=0;for(let _=0;_<f.width;++_)a.fillStyle=`rgba(${d++},${d++},${d++}, 255)`,a.fillRect(_,0,1,1);const A=a.getImageData(0,0,f.width,f.height);d=0;for(let _=0;_<A.data.length;++_)if(_%4!=3&&d++!==A.data[_])return Lr=!0,!0;return Lr=!1,!1}};function _n(f,a){const d=f.indexOf("?");if(d<0)return`${f}?${new URLSearchParams(a).toString()}`;const A=new URLSearchParams(f.slice(d));for(const _ in a)A.set(_,a[_]);return`${f.slice(0,d)}?${A.toString()}`}function Un(f,a={persistentParams:[]}){const d=f.indexOf("?");if(d<0)return f;const A=new URLSearchParams,_=new URLSearchParams(f.slice(d));for(const b of a.persistentParams){const N=_.get(b);N&&A.set(b,N)}const y=A.toString();return`${f.slice(0,d)}${y.length>0?`?${y}`:""}`}const qn="mapbox-tiles";let Wn=500,Pi=50;const $i=["language","worldview","jobid"];let Kn,Yi;function Ss(){try{return caches}catch{}}function no(){const f=Ss();f&&Kn==null&&(Kn=f.open(qn))}let Fs=1/0;const rs={supported:!1,testSupport:function(f){!tl&&Ba&&(go?sa(f):Sa=f)}};let Sa,Ba,tl=!1,go=!1;const Sl=typeof self<"u"?self:{};function sa(f){const a=f.createTexture();f.bindTexture(f.TEXTURE_2D,a);try{if(f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,Ba),f.isContextLost())return;rs.supported=!0}catch{}f.deleteTexture(a),tl=!0}Sl.document&&(Ba=Sl.document.createElement("img"),Ba.onload=function(){Sa&&sa(Sa),Sa=null,go=!0},Ba.onerror=function(){tl=!0,Sa=null},Ba.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ha={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ha);class qi extends Error{constructor(a,d,A){d===401&&Ct(A)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=d,this.url=A}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Nc=Zr()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,nc=function(f,a){if(!(/^file:/.test(d=f.url)||/^file:/.test(Nc())&&!/^\w+:/.test(d))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(A,_){const y=new AbortController,b=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Nc(),referrerPolicy:A.referrerPolicy,signal:y.signal});let N=!1,z=!1;const G=(T=b.url).indexOf("sku=")>0&&Ct(T);var T;A.type==="json"&&b.headers.set("Accept","application/json");const O=(U,Q,W)=>{if(z)return;if(U&&U.message!=="SecurityError"&&jn(U.toString()),Q&&W)return H(Q);const re=Date.now();fetch(b).then(ue=>{if(ue.ok){const Be=G?ue.clone():null;return H(ue,Be,re)}return _(new qi(ue.statusText,ue.status,A.url))}).catch(ue=>{ue.name!=="AbortError"&&_(new Error(`${ue.message} ${A.url}`))})},H=(U,Q,W)=>{(A.type==="arrayBuffer"?U.arrayBuffer():A.type==="json"?U.json():U.text()).then(re=>{z||(Q&&W&&function(ue,Be,Te){if(no(),Kn==null)return;const he=Pr(Be.headers.get("Cache-Control")||"");if(he["no-store"])return;const ke={status:Be.status,statusText:Be.statusText,headers:new Headers};Be.headers.forEach((dt,ft)=>ke.headers.set(ft,dt)),he["max-age"]&&ke.headers.set("Expires",new Date(Te+1e3*he["max-age"]).toUTCString());const Ve=ke.headers.get("Expires");if(!Ve||new Date(Ve).getTime()-Te<42e4)return;let rt=Un(ue.url,{persistentParams:$i});if(Be.status===206){const dt=ue.headers.get("Range");if(!dt)return;ke.status=200,rt=_n(rt,{range:dt})}(function(dt,ft){if(Yi===void 0)try{new Response(new ReadableStream),Yi=!0}catch{Yi=!1}Yi?ft(dt.body):dt.blob().then(ft)})(Be,dt=>{const ft=new Response((at=Be.status)!==200&&at!==404&&[101,103,204,205,304].includes(at)?null:dt,ke);var at;no(),Kn!=null&&Kn.then(Et=>Et.put(rt,ft)).catch(Et=>jn(Et.message))})}(b,Q,W),N=!0,_(null,re,U.headers.get("Cache-Control"),U.headers.get("Expires")))}).catch(re=>{z||_(new Error(re.message))})};return G?function(U,Q){if(no(),Kn==null)return Q(null);Kn.then(W=>{let re=Un(U.url,{persistentParams:$i});const ue=U.headers.get("Range");ue&&(re=_n(re,{range:ue})),W.match(re).then(Be=>{const Te=function(he){if(!he)return!1;const ke=new Date(he.headers.get("Expires")||0),Ve=Pr(he.headers.get("Cache-Control")||"");return ke>Date.now()&&!Ve["no-cache"]}(Be);W.delete(re),Te&&W.put(re,Be.clone()),Q(null,Be,Te)}).catch(Q)}).catch(Q)}(b,O):O(null,null),{cancel:()=>{z=!0,N||y.abort()}}}(f,a);if(Zr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,a,void 0,!0)}var d;return function(A,_){const y=new XMLHttpRequest;y.open(A.method||"GET",A.url,!0),A.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const b in A.headers)y.setRequestHeader(b,A.headers[b]);return A.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=A.credentials==="include",y.onerror=()=>{_(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let b=y.response;if(A.type==="json")try{b=JSON.parse(y.response)}catch(N){return _(N)}_(null,b,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else _(new qi(y.statusText,y.status,A.url))},y.send(A.body),{cancel:()=>y.abort()}}(f,a)},Ul=function(f,a){return nc(ln(f,{type:"arrayBuffer"}),a)};function Xo(f){const a=document.createElement("a");return a.href=f,a.protocol===location.protocol&&a.host===location.host}const Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ai,So;Ai=[],So=0;const xs=function(f,a){if(rs.supported&&(f.headers||(f.headers={}),f.headers.accept="image/webp,*/*"),So>=Lt.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:f,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return Ai.push(y),y}So++;let d=!1;const A=()=>{if(!d)for(d=!0,So--;Ai.length&&So<Lt.MAX_PARALLEL_IMAGE_REQUESTS;){const y=Ai.shift(),{requestParameters:b,callback:N,cancelled:z}=y;z||(y.cancel=xs(b,N).cancel)}},_=Ul(f,(y,b,N,z)=>{A(),y?a(y):b&&(self.createImageBitmap?function(G,T){const O=new Blob([new Uint8Array(G)],{type:"image/png"});createImageBitmap(O).then(H=>{T(null,H)}).catch(H=>{T(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(b,(G,T)=>a(G,T,N,z)):function(G,T){const O=new Image;O.onload=()=>{T(null,O),URL.revokeObjectURL(O.src),O.onload=null,requestAnimationFrame(()=>{O.src=Pa})},O.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new Blob([new Uint8Array(G)],{type:"image/png"});O.src=G.byteLength?URL.createObjectURL(H):Pa}(b,(G,T)=>a(G,T,N,z)))});return{cancel:()=>{_.cancel(),A()}}};var Bl,Fc,Cc,ce={exports:{}},Re={exports:{}},At={exports:{}},Ht=function(){if(Cc)return ce.exports;Cc=1;var f=(Bl||(Bl=1,Re.exports=function(d,A){var _,y,b,N,z,G,T,O;for(y=d.length-(_=3&d.length),b=A,z=3432918353,G=461845907,O=0;O<y;)T=255&d.charCodeAt(O)|(255&d.charCodeAt(++O))<<8|(255&d.charCodeAt(++O))<<16|(255&d.charCodeAt(++O))<<24,++O,b=27492+(65535&(N=5*(65535&(b=(b^=T=(65535&(T=(T=(65535&T)*z+(((T>>>16)*z&65535)<<16)&4294967295)<<15|T>>>17))*G+(((T>>>16)*G&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(N>>>16)&65535)<<16);switch(T=0,_){case 3:T^=(255&d.charCodeAt(O+2))<<16;case 2:T^=(255&d.charCodeAt(O+1))<<8;case 1:b^=T=(65535&(T=(T=(65535&(T^=255&d.charCodeAt(O)))*z+(((T>>>16)*z&65535)<<16)&4294967295)<<15|T>>>17))*G+(((T>>>16)*G&65535)<<16)&4294967295}return b^=d.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),Re.exports),a=(Fc||(Fc=1,At.exports=function(d,A){for(var _,y=d.length,b=A^y,N=0;y>=4;)_=1540483477*(65535&(_=255&d.charCodeAt(N)|(255&d.charCodeAt(++N))<<8|(255&d.charCodeAt(++N))<<16|(255&d.charCodeAt(++N))<<24))+((1540483477*(_>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),y-=4,++N;switch(y){case 3:b^=(255&d.charCodeAt(N+2))<<16;case 2:b^=(255&d.charCodeAt(N+1))<<8;case 1:b=1540483477*(65535&(b^=255&d.charCodeAt(N)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),At.exports);return ce.exports=f,ce.exports.murmur3=f,ce.exports.murmur2=a,ce.exports}(),Jt=m(Ht);class er{constructor(a,...d){ln(this,d[0]||{}),this.type=a}}class _r extends er{constructor(a,d={}){super("error",ln({error:a},d))}}function fn(f,a,d){d[f]&&d[f].indexOf(a)!==-1||(d[f]=d[f]||[],d[f].push(a))}function pn(f,a,d){if(d&&d[f]){const A=d[f].indexOf(a);A!==-1&&d[f].splice(A,1)}}class Fn{on(a,d){return this._listeners=this._listeners||{},fn(a,d,this._listeners),this}off(a,d){return pn(a,d,this._listeners),pn(a,d,this._oneTimeListeners),this}once(a,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},fn(a,d,this._oneTimeListeners),this):new Promise(A=>this.once(a,A))}fire(a,d){const A=typeof a=="string"?new er(a,d):a,_=A.type;if(this.listens(_)){A.target=this;const y=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const z of y)z.call(this,A);const b=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const z of b)pn(_,z,this._oneTimeListeners),z.call(this,A);const N=this._eventedParent;N&&(ln(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),N.fire(A))}else A instanceof _r&&console.error(A.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,d){return this._eventedParent=a,this._eventedParentData=d,this}}var Mn,Kr={},Gn=function(){if(Mn)return Kr;Mn=1;var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(y){return(y=Math.round(y))<0?0:y>255?255:y}function d(y){return a(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function A(y){return(b=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:b>1?1:b;var b}function _(y,b,N){return N<0?N+=1:N>1&&(N-=1),6*N<1?y+(b-y)*N*6:2*N<1?b:3*N<2?y+(b-y)*(2/3-N)*6:y}try{Kr.parseCSSColor=function(y){var b,N=y.replace(/ /g,"").toLowerCase();if(N in f)return f[N].slice();if(N[0]==="#")return N.length===4?(b=parseInt(N.substr(1),16))>=0&&b<=4095?[(3840&b)>>4|(3840&b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1]:null:N.length===7&&(b=parseInt(N.substr(1),16))>=0&&b<=16777215?[(16711680&b)>>16,(65280&b)>>8,255&b,1]:null;var z=N.indexOf("("),G=N.indexOf(")");if(z!==-1&&G+1===N.length){var T=N.substr(0,z),O=N.substr(z+1,G-(z+1)).split(","),H=1;switch(T){case"rgba":if(O.length!==4)return null;H=A(O.pop());case"rgb":return O.length!==3?null:[d(O[0]),d(O[1]),d(O[2]),H];case"hsla":if(O.length!==4)return null;H=A(O.pop());case"hsl":if(O.length!==3)return null;var U=(parseFloat(O[0])%360+360)%360/360,Q=A(O[1]),W=A(O[2]),re=W<=.5?W*(Q+1):W+Q-W*Q,ue=2*W-re;return[a(255*_(ue,re,U+1/3)),a(255*_(ue,re,U)),a(255*_(ue,re,U-1/3)),H];default:return null}}return null}}catch{}return Kr}();class si{constructor(a,d,A,_=1){this.r=a,this.g=d,this.b=A,this.a=_}static parse(a){if(!a)return;if(a instanceof si)return a;if(typeof a!="string")return;const d=Gn.parseCSSColor(a);return d?new si(d[0]/255*d[3],d[1]/255*d[3],d[2]/255*d[3],d[3]):void 0}toString(){const[a,d,A,_]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(a)},${Math.round(d)},${Math.round(A)},${_})`}toRenderColor(a){const{r:d,g:A,b:_,a:y}=this;return new ji(a,d,A,_,y)}}class ji{constructor(a,d,A,_,y){if(a){const b=a.image.height,N=b*b;d=y===0?0:d/y*(b-1),A=y===0?0:A/y*(b-1),_=y===0?0:_/y*(b-1);const z=Math.floor(d),G=Math.floor(A),T=Math.floor(_),O=Math.ceil(d),H=Math.ceil(A),U=Math.ceil(_),Q=d-z,W=A-G,re=_-T,ue=a.image.data,Be=4*(z+G*N+T*b),Te=4*(z+G*N+U*b),he=4*(z+H*N+T*b),ke=4*(z+H*N+U*b),Ve=4*(O+G*N+T*b),rt=4*(O+G*N+U*b),dt=4*(O+H*N+T*b),ft=4*(O+H*N+U*b);if(Be<0||ft>=ue.length)throw new Error("out of range");this.r=Sr(Sr(Sr(ue[Be],ue[Te],re),Sr(ue[he],ue[ke],re),W),Sr(Sr(ue[Ve],ue[rt],re),Sr(ue[dt],ue[ft],re),W),Q)/255*y,this.g=Sr(Sr(Sr(ue[Be+1],ue[Te+1],re),Sr(ue[he+1],ue[ke+1],re),W),Sr(Sr(ue[Ve+1],ue[rt+1],re),Sr(ue[dt+1],ue[ft+1],re),W),Q)/255*y,this.b=Sr(Sr(Sr(ue[Be+2],ue[Te+2],re),Sr(ue[he+2],ue[ke+2],re),W),Sr(Sr(ue[Ve+2],ue[rt+2],re),Sr(ue[dt+2],ue[ft+2],re),W),Q)/255*y,this.a=y}else this.r=d,this.g=A,this.b=_,this.a=y}toArray(){const{r:a,g:d,b:A,a:_}=this;return _===0?[0,0,0,0]:[255*a/_,255*d/_,255*A/_,_]}toArray01(){const{r:a,g:d,b:A,a:_}=this;return _===0?[0,0,0,0]:[a/_,d/_,A/_,_]}toArray01Scaled(a){const{r:d,g:A,b:_,a:y}=this;return y===0?[0,0,0]:[d/y*a,A/y*a,_/y*a]}toArray01PremultipliedAlpha(){const{r:a,g:d,b:A,a:_}=this;return[a,d,A,_]}toArray01Linear(){const{r:a,g:d,b:A,a:_}=this;return _===0?[0,0,0,0]:[Math.pow(a/_,2.2),Math.pow(d/_,2.2),Math.pow(A/_,2.2),_]}}function Sr(f,a,d){return f*(1-d)+a*d}function an(f,a,d){return f.map((A,_)=>Sr(A,a[_],d))}si.black=new si(0,0,0,1),si.white=new si(1,1,1,1),si.transparent=new si(0,0,0,0),si.red=new si(1,0,0,1),si.blue=new si(0,0,1,1);var ei=Object.freeze({__proto__:null,array:an,color:function(f,a,d){return new si(Sr(f.r,a.r,d),Sr(f.g,a.g,d),Sr(f.b,a.b,d),Sr(f.a,a.a,d))},number:Sr});function Ci(f,...a){for(const d of a)for(const A in d)f[A]=d[A];return f}class Ps extends Error{constructor(a,d){super(d),this.message=d,this.key=a}}class Xs{constructor(a,d=[]){this.parent=a,this.bindings={};for(const[A,_]of d)this.bindings[A]=_}concat(a){return new Xs(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Ro={kind:"null"},yn={kind:"number"},Zn={kind:"string"},Ni={kind:"boolean"},ha={kind:"color"},Ms={kind:"object"},hi={kind:"value"},jo={kind:"collator"},zl={kind:"formatted"},oa={kind:"resolvedImage"};function yo(f,a){return{kind:"array",itemType:f,N:a}}function As(f){if(f.kind==="array"){const a=As(f.itemType);return typeof f.N=="number"?`array<${a}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${a}>`}return f.kind}const Wc=[Ro,yn,Zn,Ni,ha,zl,Ms,yo(hi),oa];function Ql(f,a){if(a.kind==="error")return null;if(f.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Ql(f.itemType,a.itemType))&&(typeof f.N!="number"||f.N===a.N))return null}else{if(f.kind===a.kind)return null;if(f.kind==="value"){for(const d of Wc)if(!Ql(d,a))return null}}return`Expected ${As(f)} but found ${As(a)} instead.`}function Hl(f,a){return a.some(d=>d.kind===f.kind)}function ja(f,a){return a.some(d=>d==="null"?f===null:d==="array"?Array.isArray(f):d==="object"?f&&!Array.isArray(f)&&typeof f=="object":d===typeof f)}class $o{constructor(a,d,A){this.sensitivity=a?d?"variant":"case":d?"accent":"base",this.locale=A,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,d){return this.collator.compare(a,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ys{constructor(a,d,A,_,y){this.text=a.normalize?a.normalize():a,this.image=d,this.scale=A,this.fontStack=_,this.textColor=y}}class Bo{constructor(a){this.sections=a}static fromString(a){return new Bo([new Ys(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.namePrimary.length!==0)}static factory(a){return a instanceof Bo?a:Bo.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const d of this.sections){if(d.image){a.push(["image",d.image.namePrimary]);continue}a.push(d.text);const A={};d.fontStack&&(A["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(A["font-scale"]=d.scale),d.textColor&&(A["text-color"]=["rgba"].concat(d.textColor.toRenderColor(null).toArray())),a.push(A)}return a}}class Zs{constructor(a){this.namePrimary=a.namePrimary,a.nameSecondary&&(this.nameSecondary=a.nameSecondary),this.available=a.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(a,d){return a?new Zs({namePrimary:a,nameSecondary:d,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function vo(f,a,d,A){return typeof f=="number"&&f>=0&&f<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof d=="number"&&d>=0&&d<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:`Invalid rgba value [${[f,a,d,A].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof A=="number"?[f,a,d,A]:[f,a,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fa(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof si||f instanceof $o||f instanceof Bo||f instanceof Zs)return!0;if(Array.isArray(f)){for(const a of f)if(!fa(a))return!1;return!0}if(typeof f=="object"){for(const a in f)if(!fa(f[a]))return!1;return!0}return!1}function _s(f){if(f===null)return Ro;if(typeof f=="string")return Zn;if(typeof f=="boolean")return Ni;if(typeof f=="number")return yn;if(f instanceof si)return ha;if(f instanceof $o)return jo;if(f instanceof Bo)return zl;if(f instanceof Zs)return oa;if(Array.isArray(f)){const a=f.length;let d;for(const A of f){const _=_s(A);if(d){if(d===_)continue;d=hi;break}d=_}return yo(d||hi,a)}return Ms}function io(f){const a=typeof f;return f===null?"":a==="string"||a==="number"||a==="boolean"?String(f):f instanceof si||f instanceof Bo||f instanceof Zs?f.toString():JSON.stringify(f)}class qo{constructor(a,d){this.type=a,this.value=d}static parse(a,d){if(a.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!fa(a[1]))return d.error("invalid value");const A=a[1];let _=_s(A);const y=d.expectedType;return _.kind!=="array"||_.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(_=y),new qo(_,A)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof si?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Bo?this.value.serialize():this.value}}class Eo{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const ic={string:Zn,number:yn,boolean:Ni,object:Ms};class aa{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");let A,_=1;const y=a[0];if(y==="array"){let N,z;if(a.length>2){const G=a[1];if(typeof G!="string"||!(G in ic)||G==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);N=ic[G],_++}else N=hi;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return d.error('The length argument to "array" must be a positive integer literal',2);z=a[2],_++}A=yo(N,z)}else A=ic[y];const b=[];for(;_<a.length;_++){const N=d.parse(a[_],_,hi);if(!N)return null;b.push(N)}return new aa(A,b)}evaluate(a){for(let d=0;d<this.args.length;d++){const A=this.args[d].evaluate(a);if(!Ql(this.type,_s(A)))return A;if(d===this.args.length-1)throw new Eo(`The expression ${JSON.stringify(this.args[d].serialize())} evaluated to ${As(_s(A))} but was expected to be of type ${As(this.type)}.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,d=[a.kind];if(a.kind==="array"){const A=a.itemType;if(A.kind==="string"||A.kind==="number"||A.kind==="boolean"){d.push(A.kind);const _=a.N;(typeof _=="number"||this.args.length>1)&&d.push(_)}}return d.concat(this.args.map(A=>A.serialize()))}}class rl{constructor(a){this.type=zl,this.sections=a}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const A=a[1];if(!Array.isArray(A)&&typeof A=="object")return d.error("First argument must be an image or text section.");const _=[];let y=!1;for(let b=1;b<=a.length-1;++b){const N=a[b];if(y&&typeof N=="object"&&!Array.isArray(N)){y=!1;let z=null;if(N["font-scale"]&&(z=d.parseObjectValue(N["font-scale"],b,"font-scale",yn),!z))return null;let G=null;if(N["text-font"]&&(G=d.parseObjectValue(N["text-font"],b,"text-font",yo(Zn)),!G))return null;let T=null;if(N["text-color"]&&(T=d.parseObjectValue(N["text-color"],b,"text-color",ha),!T))return null;const O=_[_.length-1];O.scale=z,O.font=G,O.textColor=T}else{const z=d.parse(a[b],b,hi);if(!z)return null;const G=z.type.kind;if(G!=="string"&&G!=="value"&&G!=="null"&&G!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,_.push({content:z,scale:null,font:null,textColor:null})}}return new rl(_)}evaluate(a){return new Bo(this.sections.map(d=>{const A=d.content.evaluate(a);return _s(A)===oa?new Ys("",A,null,null,null):new Ys(io(A),null,d.scale?d.scale.evaluate(a):null,d.font?d.font.evaluate(a).join(","):null,d.textColor?d.textColor.evaluate(a):null)}))}eachChild(a){for(const d of this.sections)a(d.content),d.scale&&a(d.scale),d.font&&a(d.font),d.textColor&&a(d.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const d of this.sections){a.push(d.content.serialize());const A={};d.scale&&(A["font-scale"]=d.scale.serialize()),d.font&&(A["text-font"]=d.font.serialize()),d.textColor&&(A["text-color"]=d.textColor.serialize()),a.push(A)}return a}}class Uo{constructor(a,d){this.type=oa,this.inputPrimary=a,this.inputSecondary=d}static parse(a,d){if(a.length<2)return d.error("Expected two or more arguments.");const A=d.parse(a[1],1,Zn);if(!A)return d.error("No image name provided.");if(a.length===2)return new Uo(A);const _=d.parse(a[2],1,Zn);return _?new Uo(A,_):d.error("Secondary image variant is not a string.")}evaluate(a){const d=Zs.fromString(this.inputPrimary.evaluate(a),this.inputSecondary?this.inputSecondary.evaluate(a):void 0);return d&&a.availableImages&&(d.available=a.availableImages.indexOf(d.namePrimary)>-1,d.nameSecondary&&d.available&&a.availableImages&&(d.available=a.availableImages.indexOf(d.nameSecondary)>-1)),d}eachChild(a){a(this.inputPrimary),this.inputSecondary&&a(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Va(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}const Vl={"to-boolean":Ni,"to-color":ha,"to-number":yn,"to-string":Zn};class Wo{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const A=a[0],_=[];let y=Ro;if(A==="to-array"){if(!Array.isArray(a[1]))return null;const b=a[1].length;if(d.expectedType){if(d.expectedType.kind!=="array")return d.error(`Expected ${d.expectedType.kind} but found array.`);y=yo(d.expectedType.itemType,b)}else{if(!(b>0&&fa(a[1][0])))return null;y=yo(_s(a[1][0]),b)}for(let N=0;N<b;N++){const z=a[1][N];let G;if(Va(z)==="array")G=d.parse(z,void 0,y.itemType);else{const T=Va(z);if(T!==y.itemType.kind)return d.error(`Expected ${y.itemType.kind} but found ${T}.`);G=d.registry.literal.parse(["literal",z===void 0?null:z],d)}if(!G)return null;_.push(G)}}else{if((A==="to-boolean"||A==="to-string")&&a.length!==2)return d.error("Expected one argument.");y=Vl[A];for(let b=1;b<a.length;b++){const N=d.parse(a[b],b,hi);if(!N)return null;_.push(N)}}return new Wo(y,_)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let d,A;for(const _ of this.args){if(d=_.evaluate(a),A=null,d instanceof si)return d;if(typeof d=="string"){const y=a.parseColor(d);if(y)return y}else if(Array.isArray(d)&&(A=d.length<3||d.length>4?`Invalid rbga value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:vo(d[0],d[1],d[2],d[3]),!A))return new si(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new Eo(A||`Could not parse color from value '${typeof d=="string"?d:String(JSON.stringify(d))}'`)}if(this.type.kind==="number"){let d=null;for(const A of this.args){if(d=A.evaluate(a),d===null)return 0;const _=Number(d);if(!isNaN(_))return _}throw new Eo(`Could not convert ${JSON.stringify(d)} to number.`)}return this.type.kind==="formatted"?Bo.fromString(io(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Zs.fromString(io(this.args[0].evaluate(a))):this.type.kind==="array"?this.args.map(d=>d.evaluate(a)):io(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if(this.type.kind==="formatted")return new rl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Uo(this.args[0]).serialize();const a=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(d=>{a.push(d.serialize())}),a}}const xu=["Unknown","Point","LineString","Polygon"];class pa{constructor(a,d){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=a,this.options=d}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?xu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(a){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,d=this.featureDistanceData.scale,{x:A,y:_}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(A*d-a[0])+this.featureDistanceData.bearing[1]*(_*d-a[1])}return 0}parseColor(a){let d=this._parseColorCache[a];return d||(d=this._parseColorCache[a]=si.parse(a)),d}getConfig(a){return this.options?this.options.get(a):null}}class xo{constructor(a,d,A,_,y){this.name=a,this.type=d,this._evaluate=A,this.args=_,this._overloadIndex=y}evaluate(a){if(!this._evaluate){const d=xo.definitions[this.name];this._evaluate=Array.isArray(d)?d[2]:d.overloads[this._overloadIndex][1]}return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,d){const A=a[0],_=xo.definitions[A];if(!_)return d.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(_)?_[0]:_.type,b=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,N=[];let z=null,G=-1;for(const[T,O]of b){if(Array.isArray(T)&&T.length!==a.length-1)continue;N.push(T),G++,z=new sl(d.registry,d.path,null,d.scope,void 0,d._scope,d.options);const H=[];let U=!1;for(let Q=1;Q<a.length;Q++){const W=a[Q],re=Array.isArray(T)?T[Q-1]:T.type,ue=z.parse(W,1+H.length,re);if(!ue){U=!0;break}H.push(ue)}if(!U)if(Array.isArray(T)&&T.length!==H.length)z.error(`Expected ${T.length} arguments, but found ${H.length} instead.`);else{for(let Q=0;Q<H.length;Q++){const W=Array.isArray(T)?T[Q]:T.type,re=H[Q];z.concat(Q+1).checkSubtype(W,re.type)}if(z.errors.length===0)return new xo(A,y,O,H,G)}}if(N.length===1)d.errors.push(...z.errors);else{const T=(N.length?N:b.map(([H])=>H)).map(Gl).join(" | "),O=[];for(let H=1;H<a.length;H++){const U=d.parse(a[H],1+O.length);if(!U)return null;O.push(As(U.type))}d.error(`Expected arguments of type ${T}, but found (${O.join(", ")}) instead.`)}return null}static register(a,d){xo.definitions=d;for(const A in d)a[A]=xo}}function Gl(f){return Array.isArray(f)?`(${f.map(As).join(", ")})`:`(${As(f.type)}...)`}class _o{constructor(a,d,A){this.type=jo,this.locale=A,this.caseSensitive=a,this.diacriticSensitive=d}static parse(a,d){if(a.length!==2)return d.error("Expected one argument.");const A=a[1];if(typeof A!="object"||Array.isArray(A))return d.error("Collator options argument must be an object.");const _=A["case-sensitive"]===void 0?d.parse(!1,1,Ni):d.parseObjectValue(A["case-sensitive"],1,"case-sensitive",Ni);if(!_)return null;const y=A["diacritic-sensitive"]===void 0?d.parse(!1,1,Ni):d.parseObjectValue(A["diacritic-sensitive"],1,"diacritic-sensitive",Ni);if(!y)return null;let b=null;return A.locale&&(b=d.parseObjectValue(A.locale,1,"locale",Zn),!b)?null:new _o(_,y,b)}evaluate(a){return new $o(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}function $l(f,a,d=0,A=f.length-1,_=me){for(;A>d;){if(A-d>600){const z=A-d+1,G=a-d+1,T=Math.log(z),O=.5*Math.exp(2*T/3),H=.5*Math.sqrt(T*O*(z-O)/z)*(G-z/2<0?-1:1);$l(f,a,Math.max(d,Math.floor(a-G*O/z+H)),Math.min(A,Math.floor(a+(z-G)*O/z+H)),_)}const y=f[a];let b=d,N=A;for(k(f,d,a),_(f[A],y)>0&&k(f,d,A);b<N;){for(k(f,b,N),b++,N--;_(f[b],y)<0;)b++;for(;_(f[N],y)>0;)N--}_(f[d],y)===0?k(f,d,N):(N++,k(f,N,A)),N<=a&&(d=N+1),a<=N&&(A=N-1)}}function k(f,a,d){const A=f[a];f[a]=f[d],f[d]=A}function me(f,a){return f<a?-1:f>a?1:0}function Xe(f){let a=0;for(let d,A,_=0,y=f.length,b=y-1;_<y;b=_++)d=f[_],A=f[b],a+=(A.x-d.x)*(d.y+A.y);return a}function ot(f,a){f[0]=Math.min(f[0],a[0]),f[1]=Math.min(f[1],a[1]),f[2]=Math.max(f[2],a[0]),f[3]=Math.max(f[3],a[1])}function St(f,a){return!(f[0]<=a[0]||f[2]>=a[2]||f[1]<=a[1]||f[3]>=a[3])}function qt(f,a,d){const A=f[0]-a[0],_=f[1]-a[1],y=f[0]-d[0],b=f[1]-d[1];return A*b-y*_==0&&A*y<=0&&_*b<=0}function gr(f,a,d=!1){let A=!1;for(let N=0,z=a.length;N<z;N++){const G=a[N];for(let T=0,O=G.length,H=O-1;T<O;H=T++){const U=G[H],Q=G[T];if(qt(f,U,Q))return d;(y=U)[1]>(_=f)[1]!=(b=Q)[1]>_[1]&&_[0]<(b[0]-y[0])*(_[1]-y[1])/(b[1]-y[1])+y[0]&&(A=!A)}}var _,y,b;return A}function $r(f,a,d,A){const _=A[0]-d[0],y=A[1]-d[1],b=(f[0]-d[0])*y-_*(f[1]-d[1]),N=(a[0]-d[0])*y-_*(a[1]-d[1]);return b>0&&N<0||b<0&&N>0}function An(f,a,d,A){return(_=[A[0]-d[0],A[1]-d[1]])[0]*(y=[a[0]-f[0],a[1]-f[1]])[1]-_[1]*y[0]!=0&&!(!$r(f,a,d,A)||!$r(d,A,f,a));var _,y}const En=8192;function qr(f,a){const d=(180+f[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,_=Math.pow(2,a.z);return[Math.round(d*_*En),Math.round(A*_*En)]}function Dr(f,a){for(let d=0;d<a.length;d++)if(gr(f,a[d]))return!0;return!1}function bi(f,a,d){for(const A of d)for(let _=0,y=A.length,b=y-1;_<y;b=_++)if(An(f,a,A[b],A[_]))return!0;return!1}function gn(f,a){for(let d=0;d<f.length;++d)if(!gr(f[d],a))return!1;for(let d=0;d<f.length-1;++d)if(bi(f[d],f[d+1],a))return!1;return!0}function Fi(f,a){for(let d=0;d<a.length;d++)if(gn(f,a[d]))return!0;return!1}function bs(f,a,d){const A=[];for(let _=0;_<f.length;_++){const y=[];for(let b=0;b<f[_].length;b++){const N=qr(f[_][b],d);ot(a,N),y.push(N)}A.push(y)}return A}function vn(f,a,d){const A=[];for(let _=0;_<f.length;_++){const y=bs(f[_],a,d);A.push(y)}return A}function lo(f,a,d,A){if(f[0]<d[0]||f[0]>d[2]){const _=.5*A;let y=f[0]-d[0]>_?-A:d[0]-f[0]>_?A:0;y===0&&(y=f[0]-d[2]>_?-A:d[2]-f[0]>_?A:0),f[0]+=y}ot(a,f)}function Js(f,a,d,A){const _=Math.pow(2,A.z)*En,y=[A.x*En,A.y*En],b=[];if(!f)return b;for(const N of f)for(const z of N){const G=[z.x+y[0],z.y+y[1]];lo(G,a,d,_),b.push(G)}return b}function Yo(f,a,d,A){const _=Math.pow(2,A.z)*En,y=[A.x*En,A.y*En],b=[];if(!f)return b;for(const z of f){const G=[];for(const T of z){const O=[T.x+y[0],T.y+y[1]];ot(a,O),G.push(O)}b.push(G)}if(a[2]-a[0]<=_/2){(N=a)[0]=N[1]=1/0,N[2]=N[3]=-1/0;for(const z of b)for(const G of z)lo(G,a,d,_)}var N;return b}class nl{constructor(a,d){this.type=Ni,this.geojson=a,this.geometries=d}static parse(a,d){if(a.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(fa(a[1])){const A=a[1];if(A.type==="FeatureCollection")for(let _=0;_<A.features.length;++_){const y=A.features[_].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new nl(A,A.features[_].geometry)}else if(A.type==="Feature"){const _=A.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new nl(A,A.geometry)}else if(A.type==="Polygon"||A.type==="MultiPolygon")return new nl(A,A)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(d,A){const _=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=d.canonicalID();if(!b)return!1;if(A.type==="Polygon"){const N=bs(A.coordinates,y,b),z=Js(d.geometry(),_,y,b);if(!St(_,y))return!1;for(const G of z)if(!gr(G,N))return!1}if(A.type==="MultiPolygon"){const N=vn(A.coordinates,y,b),z=Js(d.geometry(),_,y,b);if(!St(_,y))return!1;for(const G of z)if(!Dr(G,N))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(d,A){const _=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=d.canonicalID();if(!b)return!1;if(A.type==="Polygon"){const N=bs(A.coordinates,y,b),z=Yo(d.geometry(),_,y,b);if(!St(_,y))return!1;for(const G of z)if(!gn(G,N))return!1}if(A.type==="MultiPolygon"){const N=vn(A.coordinates,y,b),z=Yo(d.geometry(),_,y,b);if(!St(_,y))return!1;for(const G of z)if(!Fi(G,N))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const il={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},so=1/298.257223563,Ga=so*(2-so),Ea=Math.PI/180;class Zo{static fromTile(a,d,A){const _=Math.PI*(1-2*(a+.5)/Math.pow(2,d)),y=Math.atan(.5*(Math.exp(_)-Math.exp(-_)))/Ea;return new Zo(y,A)}static get units(){return il}constructor(a,d){if(a===void 0)throw new Error("No latitude given.");if(d&&!il[d])throw new Error(`Unknown unit ${d}. Use one of: ${Object.keys(il).join(", ")}`);const A=6378.137*Ea*(d?il[d]:1),_=Math.cos(a*Ea),y=1/(1-Ga*(1-_*_)),b=Math.sqrt(y);this.kx=A*b*_,this.ky=A*b*y*(1-Ga)}distance(a,d){const A=us(a[0]-d[0])*this.kx,_=(a[1]-d[1])*this.ky;return Math.sqrt(A*A+_*_)}bearing(a,d){const A=us(d[0]-a[0])*this.kx;return Math.atan2(A,(d[1]-a[1])*this.ky)/Ea}destination(a,d,A){const _=A*Ea;return this.offset(a,Math.sin(_)*d,Math.cos(_)*d)}offset(a,d,A){return[a[0]+d/this.kx,a[1]+A/this.ky]}lineDistance(a){let d=0;for(let A=0;A<a.length-1;A++)d+=this.distance(a[A],a[A+1]);return d}area(a){let d=0;for(let A=0;A<a.length;A++){const _=a[A];for(let y=0,b=_.length,N=b-1;y<b;N=y++)d+=us(_[y][0]-_[N][0])*(_[y][1]+_[N][1])*(A?-1:1)}return Math.abs(d)/2*this.kx*this.ky}along(a,d){let A=0;if(d<=0)return a[0];for(let _=0;_<a.length-1;_++){const y=a[_],b=a[_+1],N=this.distance(y,b);if(A+=N,A>d)return Ki(y,b,(d-(A-N))/N)}return a[a.length-1]}pointToSegmentDistance(a,d,A){let[_,y]=d,b=us(A[0]-_)*this.kx,N=(A[1]-y)*this.ky;if(b!==0||N!==0){const z=(us(a[0]-_)*this.kx*b+(a[1]-y)*this.ky*N)/(b*b+N*N);z>1?(_=A[0],y=A[1]):z>0&&(_+=b/this.kx*z,y+=N/this.ky*z)}return b=us(a[0]-_)*this.kx,N=(a[1]-y)*this.ky,Math.sqrt(b*b+N*N)}pointOnLine(a,d){let A=1/0,_=a[0][0],y=a[0][1],b=0,N=0;for(let z=0;z<a.length-1;z++){let G=a[z][0],T=a[z][1],O=us(a[z+1][0]-G)*this.kx,H=(a[z+1][1]-T)*this.ky,U=0;O===0&&H===0||(U=(us(d[0]-G)*this.kx*O+(d[1]-T)*this.ky*H)/(O*O+H*H),U>1?(G=a[z+1][0],T=a[z+1][1]):U>0&&(G+=O/this.kx*U,T+=H/this.ky*U)),O=us(d[0]-G)*this.kx,H=(d[1]-T)*this.ky;const Q=O*O+H*H;Q<A&&(A=Q,_=G,y=T,b=z,N=U)}return{point:[_,y],index:b,t:Math.max(0,Math.min(1,N))}}lineSlice(a,d,A){let _=this.pointOnLine(A,a),y=this.pointOnLine(A,d);if(_.index>y.index||_.index===y.index&&_.t>y.t){const G=_;_=y,y=G}const b=[_.point],N=_.index+1,z=y.index;!Ma(A[N],b[0])&&N<=z&&b.push(A[N]);for(let G=N+1;G<=z;G++)b.push(A[G]);return Ma(A[z],y.point)||b.push(y.point),b}lineSliceAlong(a,d,A){let _=0;const y=[];for(let b=0;b<A.length-1;b++){const N=A[b],z=A[b+1],G=this.distance(N,z);if(_+=G,_>a&&y.length===0&&y.push(Ki(N,z,(a-(_-G))/G)),_>=d)return y.push(Ki(N,z,(d-(_-G))/G)),y;_>a&&y.push(z)}return y}bufferPoint(a,d){const A=d/this.ky,_=d/this.kx;return[a[0]-_,a[1]-A,a[0]+_,a[1]+A]}bufferBBox(a,d){const A=d/this.ky,_=d/this.kx;return[a[0]-_,a[1]-A,a[2]+_,a[3]+A]}insideBBox(a,d){return us(a[0]-d[0])>=0&&us(a[0]-d[2])<=0&&a[1]>=d[1]&&a[1]<=d[3]}}function Ma(f,a){return f[0]===a[0]&&f[1]===a[1]}function Ki(f,a,d){const A=us(a[0]-f[0]);return[f[0]+A*d,f[1]+(a[1]-f[1])*d]}function us(f){for(;f<-180;)f+=360;for(;f>180;)f-=360;return f}class la{constructor(a=[],d=(A,_)=>A<_?-1:A>_?1:0){if(this.data=a,this.length=this.data.length,this.compare=d,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:d,compare:A}=this,_=d[a];for(;a>0;){const y=a-1>>1,b=d[y];if(A(_,b)>=0)break;d[a]=b,a=y}d[a]=_}_down(a){const{data:d,compare:A}=this,_=this.length>>1,y=d[a];for(;a<_;){let b=1+(a<<1);const N=b+1;if(N<this.length&&A(d[N],d[b])<0&&(b=N),A(d[b],y)>=0)break;d[a]=d[b],a=b}d[a]=y}}var Yr=8192;function sc(f,a){return a.dist-f.dist}const ws=100,oc=50;function yl(f){const a=[1/0,1/0,-1/0,-1/0];if(a.length!==f.length)return!1;for(let d=0;d<a.length;d++)if(a[d]!==f[d])return!1;return!0}function ql(f){return f[1]-f[0]+1}function ks(f,a){const d=f[1]>=f[0]&&f[1]<a;return d||console.warn("Distance Expression: Index is out of range"),d}function Jo(f,a){if(f[0]>f[1])return[null,null];const d=ql(f);if(a){if(d===2)return[f,null];const A=Math.floor(d/2);return[[f[0],f[0]+A],[f[0]+A,f[1]]]}{if(d===1)return[f,null];const A=Math.floor(d/2)-1;return[[f[0],f[0]+A],[f[0]+A+1,f[1]]]}}function Aa(f,a){const d=[1/0,1/0,-1/0,-1/0];if(!ks(a,f.length))return d;for(let A=a[0];A<=a[1];++A)ot(d,f[A]);return d}function Pc(f){const a=[1/0,1/0,-1/0,-1/0];for(let d=0;d<f.length;++d)for(let A=0;A<f[d].length;++A)ot(a,f[d][A]);return a}function yr(f,a,d){if(yl(f)||yl(a))return NaN;let A=0,_=0;return f[2]<a[0]&&(A=a[0]-f[2]),f[0]>a[2]&&(A=f[0]-a[2]),f[1]>a[3]&&(_=f[1]-a[3]),f[3]<a[1]&&(_=a[1]-f[3]),d.distance([0,0],[A,_])}function Mr(f){return 360*f-180}function xn(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function kn(f,a){const d=Math.pow(2,a.z),A=(f.y/Yr+a.y)/d;return[Mr((f.x/Yr+a.x)/d),xn(A)]}function ns(f,a){const d=[];for(let A=0;A<f.length;++A)d.push(kn(f[A],a));return d}function xi(f,a,d){const A=d.pointOnLine(a,f).point;return d.distance(f,A)}function ms(f,a,d,A,_){const y=d.slice(A[0],A[1]+1);let b=1/0;for(let N=a[0];N<=a[1];++N)if((b=Math.min(b,xi(f[N],y,_)))===0)return 0;return b}function ds(f,a,d,A,_){const y=Math.min(_.pointToSegmentDistance(f,d,A),_.pointToSegmentDistance(a,d,A)),b=Math.min(_.pointToSegmentDistance(d,f,a),_.pointToSegmentDistance(A,f,a));return Math.min(y,b)}function bo(f,a,d,A,_){if(!ks(a,f.length)||!ks(A,d.length))return NaN;let y=1/0;for(let b=a[0];b<a[1];++b)for(let N=A[0];N<A[1];++N){if(An(f[b],f[b+1],d[N],d[N+1]))return 0;y=Math.min(y,ds(f[b],f[b+1],d[N],d[N+1],_))}return y}function Zi(f,a,d,A,_){if(!ks(a,f.length)||!ks(A,d.length))return NaN;let y=1/0;for(let b=a[0];b<=a[1];++b)for(let N=A[0];N<=A[1];++N)if((y=Math.min(y,_.distance(f[b],d[N])))===0)return y;return y}function Ds(f,a,d){if(gr(f,a,!0))return 0;let A=1/0;for(const _ of a){const y=_.length;if(y<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(_[0]!==_[y-1]&&(A=Math.min(A,d.pointToSegmentDistance(f,_[y-1],_[0])))===0||(A=Math.min(A,xi(f,_,d)))===0)return A}return A}function Bs(f,a,d,A){if(!ks(a,f.length))return NaN;for(let y=a[0];y<=a[1];++y)if(gr(f[y],d,!0))return 0;let _=1/0;for(let y=a[0];y<a[1];++y)for(const b of d)for(let N=0,z=b.length,G=z-1;N<z;G=N++){if(An(f[y],f[y+1],b[G],b[N]))return 0;_=Math.min(_,ds(f[y],f[y+1],b[G],b[N],A))}return _}function zs(f,a){for(const d of f)for(let A=0;A<=d.length-1;++A)if(gr(d[A],a,!0))return!0;return!1}function eo(f,a,d,A=1/0){const _=Pc(f),y=Pc(a);if(A!==1/0&&yr(_,y,d)>=A)return A;if(St(_,y)){if(zs(f,a))return 0}else if(zs(a,f))return 0;let b=A;for(const N of f)for(let z=0,G=N.length,T=G-1;z<G;T=z++)for(const O of a)for(let H=0,U=O.length,Q=U-1;H<U;Q=H++){if(An(N[T],N[z],O[Q],O[H]))return 0;b=Math.min(b,ds(N[T],N[z],O[Q],O[H],d))}return b}function ea(f,a,d,A,_,y,b){if(y===null||b===null)return;const N=yr(Aa(A,y),Aa(_,b),d);N<a&&f.push({dist:N,range1:y,range2:b})}function ma(f,a,d,A,_=1/0){let y=Math.min(A.distance(f[0],d[0][0]),_);if(y===0)return y;const b=new la([{dist:0,range1:[0,f.length-1],range2:[0,0]}],sc),N=a?oc:ws,z=Pc(d);for(;b.length;){const G=b.pop();if(G.dist>=y)continue;const T=G.range1;if(ql(T)<=N){if(!ks(T,f.length))return NaN;if(a){const O=Bs(f,T,d,A);if((y=Math.min(y,O))===0)return y}else for(let O=T[0];O<=T[1];++O){const H=Ds(f[O],d,A);if((y=Math.min(y,H))===0)return y}}else{const O=Jo(T,a);if(O[0]!==null){const H=yr(Aa(f,O[0]),z,A);H<y&&b.push({dist:H,range1:O[0],range2:[0,0]})}if(O[1]!==null){const H=yr(Aa(f,O[1]),z,A);H<y&&b.push({dist:H,range1:O[1],range2:[0,0]})}}}return y}function ta(f,a,d,A,_,y=1/0){let b=Math.min(y,_.distance(f[0],d[0]));if(b===0)return b;const N=new la([{dist:0,range1:[0,f.length-1],range2:[0,d.length-1]}],sc),z=a?oc:ws,G=A?oc:ws;for(;N.length;){const T=N.pop();if(T.dist>=b)continue;const O=T.range1,H=T.range2;if(ql(O)<=z&&ql(H)<=G){if(!ks(O,f.length)||!ks(H,d.length))return NaN;if(a&&A?b=Math.min(b,bo(f,O,d,H,_)):a||A?a&&!A?b=Math.min(b,ms(d,H,f,O,_)):!a&&A&&(b=Math.min(b,ms(f,O,d,H,_))):b=Math.min(b,Zi(f,O,d,H,_)),b===0)return b}else{const U=Jo(O,a),Q=Jo(H,A);ea(N,b,_,f,d,U[0],Q[0]),ea(N,b,_,f,d,U[0],Q[1]),ea(N,b,_,f,d,U[1],Q[0]),ea(N,b,_,f,d,U[1],Q[1])}}return b}function ra(f,a,d,A,_=1/0){let y=_;const b=Aa(f,[0,f.length-1]);for(const N of d)if(!(y!==1/0&&yr(b,Aa(N,[0,N.length-1]),A)>=y)&&(y=Math.min(y,ta(f,a,N,!0,A,y)),y===0))return y;return y}function $s(f,a,d,A,_=1/0){let y=_;const b=Aa(f,[0,f.length-1]);for(const N of d){if(y!==1/0&&yr(b,Pc(N),A)>=y)continue;const z=ma(f,a,N,A,y);if(isNaN(z))return z;if((y=Math.min(y,z))===0)return y}return y}function ga(f){return f==="Point"||f==="MultiPoint"||f==="LineString"||f==="MultiLineString"||f==="Polygon"||f==="MultiPolygon"}class hs{constructor(a,d){this.type=yn,this.geojson=a,this.geometries=d}static parse(a,d){if(a.length!==2)return d.error(`'distance' expression requires either one argument, but found ' ${a.length-1} instead.`);if(fa(a[1])){const A=a[1];if(A.type==="FeatureCollection"){for(let _=0;_<A.features.length;++_)if(ga(A.features[_].geometry.type))return new hs(A,A.features[_].geometry)}else if(A.type==="Feature"){if(ga(A.geometry.type))return new hs(A,A.geometry)}else if(ga(A.type))return new hs(A,A)}return d.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(a){const d=a.geometry(),A=a.canonicalID();if(d!=null&&A!=null){if(a.geometryType()==="Point")return function(_,y,b){const N=[];for(const G of _)for(const T of G)N.push(kn(T,y));const z=new Zo(N[0][1],"meters");return b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString"?ta(N,!1,b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",z):b.type==="MultiLineString"?ra(N,!1,b.coordinates,z):b.type==="Polygon"||b.type==="MultiPolygon"?$s(N,!1,b.type==="Polygon"?[b.coordinates]:b.coordinates,z):null}(d,A,this.geometries);if(a.geometryType()==="LineString")return function(_,y,b){const N=[];for(const G of _){const T=[];for(const O of G)T.push(kn(O,y));N.push(T)}const z=new Zo(N[0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return ra(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",N,z);if(b.type==="MultiLineString"){let G=1/0;for(let T=0;T<b.coordinates.length;T++){const O=ra(b.coordinates[T],!0,N,z,G);if(isNaN(O))return O;if((G=Math.min(G,O))===0)return G}return G}if(b.type==="Polygon"||b.type==="MultiPolygon"){let G=1/0;for(let T=0;T<N.length;T++){const O=$s(N[T],!0,b.type==="Polygon"?[b.coordinates]:b.coordinates,z,G);if(isNaN(O))return O;if((G=Math.min(G,O))===0)return G}return G}return null}(d,A,this.geometries);if(a.geometryType()==="Polygon")return function(_,y,b){const N=[];for(const G of function(T,O){const H=T.length;if(H<=1)return[T];const U=[];let Q,W;for(let re=0;re<H;re++){const ue=Xe(T[re]);ue!==0&&(T[re].area=Math.abs(ue),W===void 0&&(W=ue<0),W===ue<0?(Q&&U.push(Q),Q=[T[re]]):Q.push(T[re]))}return Q&&U.push(Q),U}(_)){const T=[];for(let O=0;O<G.length;++O)T.push(ns(G[O],y));N.push(T)}const z=new Zo(N[0][0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return $s(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",N,z);if(b.type==="MultiLineString"){let G=1/0;for(let T=0;T<b.coordinates.length;T++){const O=$s(b.coordinates[T],!0,N,z,G);if(isNaN(O))return O;if((G=Math.min(G,O))===0)return G}return G}return b.type==="Polygon"||b.type==="MultiPolygon"?function(G,T,O){let H=1/0;for(const U of G)for(const Q of T){const W=eo(U,Q,O,H);if(isNaN(W))return W;if((H=Math.min(H,W))===0)return H}return H}(b.type==="Polygon"?[b.coordinates]:b.coordinates,N,z):null}(d,A,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function os(f,a){switch(f){case"string":return io(a);case"number":return+a;case"boolean":return!!a;case"color":return si.parse(a);case"formatted":return Bo.fromString(io(a));case"resolvedImage":return Zs.fromString(io(a))}return a}function Tn(f,a,d,A){return A!==void 0&&(f=A*Math.round(f/A)),a!==void 0&&f<a&&(f=a),d!==void 0&&f>d&&(f=d),f}class mi{constructor(a,d,A){this.type=a,this.key=d,this.scope=A}static parse(a,d){let A=d.expectedType;if(A==null&&(A=hi),a.length<2||a.length>3)return d.error("Invalid number of arguments for 'config' expression.");const _=d.parse(a[1],1);if(!(_ instanceof qo))return d.error("Key name of 'config' expression must be a string literal.");if(a.length>=3){const y=d.parse(a[2],2);return y instanceof qo?new mi(A,io(_.value),io(y.value)):d.error("Scope of 'config' expression must be a string literal.")}return new mi(A,io(_.value))}evaluate(a){const d=[this.key,this.scope,a.scope].filter(Boolean).join(""),A=a.getConfig(d);if(!A)return null;const{type:_,value:y,values:b,minValue:N,maxValue:z,stepValue:G}=A,T=A.default.evaluate(a);let O=T;if(y){const H=a.scope;a.scope=(H||"").split("").slice(1).join(""),O=y.evaluate(a),a.scope=H}return _&&(O=os(_,O)),O===void 0||N===void 0&&z===void 0&&G===void 0||(typeof O=="number"?O=Tn(O,N,z,G):Array.isArray(O)&&(O=O.map(H=>typeof H=="number"?Tn(H,N,z,G):H))),y!==void 0&&O!==void 0&&b&&!b.includes(O)&&(O=T,_&&(O=os(_,O))),(_&&_!==this.type||O!==void 0&&_s(O)!==this.type)&&(O=os(this.type.kind,O)),O}eachChild(){}outputDefined(){return!1}serialize(){const a=["config",this.key];return this.scope&&a.concat(this.key),a}}function co(f){if(f instanceof xo&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof nl||f instanceof hs)return!1;let a=!0;return f.eachChild(d=>{a&&!co(d)&&(a=!1)}),a}function to(f){if(f instanceof xo&&f.name==="feature-state")return!1;let a=!0;return f.eachChild(d=>{a&&!to(d)&&(a=!1)}),a}function Cs(f){if(f instanceof mi)return new Set([f.key]);let a=new Set;return f.eachChild(d=>{a=new Set([...a,...Cs(d)])}),a}function Ji(f,a){if(f instanceof xo&&a.indexOf(f.name)>=0)return!1;let d=!0;return f.eachChild(A=>{d&&!Ji(A,a)&&(d=!1)}),d}class oi{constructor(a,d){this.type=d.type,this.name=a,this.boundExpression=d}static parse(a,d){if(a.length!==2||typeof a[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const A=a[1];return d.scope.has(A)?new oi(A,d.scope.get(A)):d.error(`Unknown variable "${A}". Make sure "${A}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class qs{constructor(a,d=[],A,_=new Xs,y=[],b,N){this.registry=a,this.path=d,this.key=d.map(z=>typeof z=="string"?`['${z}']`:`[${z}]`).join(""),this.scope=_,this.errors=y,this.expectedType=A,this._scope=b,this.options=N}parse(a,d,A,_,y={}){return d||A?this.concat(d,null,A,_)._parse(a,y):this._parse(a,y)}parseObjectValue(a,d,A,_,y,b={}){return this.concat(d,A,_,y)._parse(a,b)}_parse(a,d){function A(_,y,b){return b==="assert"?new aa(y,[_]):b==="coerce"?new Wo(y,[_]):_}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=typeof a[0]=="string"?this.registry[a[0]]:void 0;if(_){let y=_.parse(a,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,N=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||N.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||N.kind!=="value"&&N.kind!=="string"){if(this.checkSubtype(b,N))return null}else y=A(y,b,d.typeAnnotation||"coerce");else y=A(y,b,d.typeAnnotation||"assert")}if(!(y instanceof qo)&&y.type.kind!=="resolvedImage"&&ac(y)){const b=new pa(this._scope,this.options);try{y=new qo(y.type,y.evaluate(b))}catch(N){return this.error(N.message),null}}return y}return Wo.parse(["to-array",a],this)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,d,A,_){let y=typeof a=="number"?this.path.concat(a):this.path;y=typeof d=="string"?y.concat(d):y;const b=_?this.scope.concat(_):this.scope;return new qs(this.registry,y,A||null,b,this.errors,this._scope,this.options)}error(a,...d){const A=`${this.key}${d.map(_=>`[${_}]`).join("")}`;this.errors.push(new Ps(A,a))}checkSubtype(a,d){const A=Ql(a,d);return A&&this.error(A),A}}var sl=qs;function ac(f){if(f instanceof oi)return ac(f.boundExpression);if(f instanceof xo&&f.name==="error"||f instanceof _o||f instanceof nl||f instanceof hs||f instanceof mi)return!1;const a=f instanceof Wo||f instanceof aa;let d=!0;return f.eachChild(A=>{d=a?d&&ac(A):d&&A instanceof qo}),!!d&&co(f)&&Ji(f,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function ol(f,a){const d=f.length-1;let A,_,y=0,b=d,N=0;for(;y<=b;)if(N=Math.floor((y+b)/2),A=f[N],_=f[N+1],A<=a){if(N===d||a<_)return N;y=N+1}else{if(!(A>a))throw new Eo("Input is not a number.");b=N-1}return 0}class $a{constructor(a,d,A){this.type=a,this.input=d,this.labels=[],this.outputs=[];for(const[_,y]of A)this.labels.push(_),this.outputs.push(y)}static parse(a,d){if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");const A=d.parse(a[1],1,yn);if(!A)return null;const _=[];let y=null;d.expectedType&&d.expectedType.kind!=="value"&&(y=d.expectedType);for(let b=1;b<a.length;b+=2){const N=b===1?-1/0:a[b],z=a[b+1],G=b,T=b+1;if(typeof N!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(_.length&&_[_.length-1][0]>=N)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',G);const O=d.parse(z,T,y);if(!O)return null;y=y||O.type,_.push([N,O])}return new $a(y,A,_)}evaluate(a){const d=this.labels,A=this.outputs;if(d.length===1)return A[0].evaluate(a);const _=this.input.evaluate(a);if(_<=d[0])return A[0].evaluate(a);const y=d.length;return _>=d[y-1]?A[y-1].evaluate(a):A[ol(d,_)].evaluate(a)}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let d=0;d<this.labels.length;d++)d>0&&a.push(this.labels[d]),a.push(this.outputs[d].serialize());return a}}const jc=.95047,lc=1.08883,oo=4/29,Qs=6/29,cc=3*Qs*Qs,Mc=Qs*Qs*Qs,_u=Math.PI/180,Sc=180/Math.PI;function iu(f){return f>Mc?Math.pow(f,1/3):f/cc+oo}function id(f){return f>Qs?f*f*f:cc*(f-oo)}function eh(f){return 255*(f<=.0031308?12.92*f:1.055*Math.pow(f,1/2.4)-.055)}function sd(f){return(f/=255)<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Cd(f){const a=sd(f.r),d=sd(f.g),A=sd(f.b),_=iu((.4124564*a+.3575761*d+.1804375*A)/jc),y=iu((.2126729*a+.7151522*d+.072175*A)/1);return{l:116*y-16,a:500*(_-y),b:200*(y-iu((.0193339*a+.119192*d+.9503041*A)/lc)),alpha:f.a}}function bu(f){let a=(f.l+16)/116,d=isNaN(f.a)?a:a+f.a/500,A=isNaN(f.b)?a:a-f.b/200;return a=1*id(a),d=jc*id(d),A=lc*id(A),new si(eh(3.2404542*d-1.5371385*a-.4985314*A),eh(-.969266*d+1.8760108*a+.041556*A),eh(.0556434*d-.2040259*a+1.0572252*A),f.alpha)}function th(f,a,d){const A=a-f;return f+d*(A>180||A<-180?A-360*Math.round(A/360):A)}const kc={forward:Cd,reverse:bu,interpolate:function(f,a,d){return{l:Sr(f.l,a.l,d),a:Sr(f.a,a.a,d),b:Sr(f.b,a.b,d),alpha:Sr(f.alpha,a.alpha,d)}}},Sd={forward:function(f){const{l:a,a:d,b:A}=Cd(f),_=Math.atan2(A,d)*Sc;return{h:_<0?_+360:_,c:Math.sqrt(d*d+A*A),l:a,alpha:f.a}},reverse:function(f){const a=f.h*_u,d=f.c;return bu({l:f.l,a:Math.cos(a)*d,b:Math.sin(a)*d,alpha:f.alpha})},interpolate:function(f,a,d){return{h:th(f.h,a.h,d),c:Sr(f.c,a.c,d),l:Sr(f.l,a.l,d),alpha:Sr(f.alpha,a.alpha,d)}}};var vh=Object.freeze({__proto__:null,hcl:Sd,lab:kc});class Wl{constructor(a,d,A,_,y){this.type=a,this.operator=d,this.interpolation=A,this.input=_,this.labels=[],this.outputs=[];for(const[b,N]of y)this.labels.push(b),this.outputs.push(N)}static interpolationFactor(a,d,A,_){let y=0;if(a.name==="exponential")y=sf(d,a.base,A,_);else if(a.name==="linear")y=sf(d,1,A,_);else if(a.name==="cubic-bezier"){const b=a.controlPoints;y=new ir(b[0],b[1],b[2],b[3]).solve(sf(d,1,A,_))}return y}static parse(a,d){let[A,_,y,...b]=a;if(!Array.isArray(_)||_.length===0)return d.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const G=_[1];if(typeof G!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:G}}else{if(_[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const G=_.slice(1);if(G.length!==4||G.some(T=>typeof T!="number"||T<0||T>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:G}}}if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(y=d.parse(y,2,yn),!y)return null;const N=[];let z=null;A==="interpolate-hcl"||A==="interpolate-lab"?z=ha:d.expectedType&&d.expectedType.kind!=="value"&&(z=d.expectedType);for(let G=0;G<b.length;G+=2){const T=b[G],O=b[G+1],H=G+3,U=G+4;if(typeof T!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(N.length&&N[N.length-1][0]>=T)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const Q=d.parse(O,U,z);if(!Q)return null;z=z||Q.type,N.push([T,Q])}return z.kind==="number"||z.kind==="color"||z.kind==="array"&&z.itemType.kind==="number"&&typeof z.N=="number"?new Wl(z,A,_,y,N):d.error(`Type ${As(z)} is not interpolatable.`)}evaluate(a){const d=this.labels,A=this.outputs;if(d.length===1)return A[0].evaluate(a);const _=this.input.evaluate(a);if(_<=d[0])return A[0].evaluate(a);const y=d.length;if(_>=d[y-1])return A[y-1].evaluate(a);const b=ol(d,_),N=Wl.interpolationFactor(this.interpolation,_,d[b],d[b+1]),z=A[b].evaluate(a),G=A[b+1].evaluate(a);return this.operator==="interpolate"?ei[this.type.kind.toLowerCase()](z,G,N):this.operator==="interpolate-hcl"?Sd.reverse(Sd.interpolate(Sd.forward(z),Sd.forward(G),N)):kc.reverse(kc.interpolate(kc.forward(z),kc.forward(G),N))}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const d=[this.operator,a,this.input.serialize()];for(let A=0;A<this.labels.length;A++)d.push(this.labels[A],this.outputs[A].serialize());return d}}function sf(f,a,d,A){const _=A-d,y=f-d;return _===0?0:a===1?y/_:(Math.pow(a,y)-1)/(Math.pow(a,_)-1)}class xh{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expectected at least one argument.");let A=null;const _=d.expectedType;_&&_.kind!=="value"&&(A=_);const y=[];for(const N of a.slice(1)){const z=d.parse(N,1+y.length,A,void 0,{typeAnnotation:"omit"});if(!z)return null;A=A||z.type,y.push(z)}const b=_&&y.some(N=>Ql(_,N.type));return new xh(b?hi:A,y)}evaluate(a){let d,A=null,_=0;for(const y of this.args){if(_++,A=y.evaluate(a),A&&A instanceof Zs&&!A.available&&(d||(d=A),A=null,_===this.args.length))return d;if(A!==null)break}return A}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(d=>{a.push(d.serialize())}),a}}class _h{constructor(a,d){this.type=d.type,this.bindings=[].concat(a),this.result=d}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const d of this.bindings)a(d[1]);a(this.result)}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const A=[];for(let y=1;y<a.length-1;y+=2){const b=a[y];if(typeof b!="string")return d.error(`Expected string, but found ${typeof b} instead.`,y);if(/[^a-zA-Z0-9_]/.test(b))return d.error("Variable names must contain only alphanumeric characters or '_'.",y);const N=d.parse(a[y+1],y+1);if(!N)return null;A.push([b,N])}const _=d.parse(a[a.length-1],a.length-1,d.expectedType,A);return _?new _h(A,_):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[d,A]of this.bindings)a.push(d,A.serialize());return a.push(this.result.serialize()),a}}class bh{constructor(a,d,A){this.type=a,this.index=d,this.input=A}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const A=d.parse(a[1],1,yn),_=d.parse(a[2],2,yo(d.expectedType||hi));return A&&_?new bh(_.type.itemType,A,_):null}evaluate(a){const d=this.index.evaluate(a),A=this.input.evaluate(a);if(d<0)throw new Eo(`Array index out of bounds: ${d} < 0.`);if(d>=A.length)throw new Eo(`Array index out of bounds: ${d} > ${A.length-1}.`);if(d!==Math.floor(d))throw new Eo(`Array index must be an integer, but found ${d} instead.`);return A[d]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class od{constructor(a,d){this.type=Ni,this.needle=a,this.haystack=d}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const A=d.parse(a[1],1,hi),_=d.parse(a[2],2,hi);return A&&_?Hl(A.type,[Ni,Zn,yn,Ro,hi])?new od(A,_):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${As(A.type)} instead`):null}evaluate(a){const d=this.needle.evaluate(a),A=this.haystack.evaluate(a);if(A==null)return!1;if(!ja(d,["boolean","string","number","null"]))throw new Eo(`Expected first argument to be of type boolean, string, number or null, but found ${As(_s(d))} instead.`);if(!ja(A,["string","array"]))throw new Eo(`Expected second argument to be of type array or string, but found ${As(_s(A))} instead.`);return A.indexOf(d)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class wu{constructor(a,d,A){this.type=yn,this.needle=a,this.haystack=d,this.fromIndex=A}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const A=d.parse(a[1],1,hi),_=d.parse(a[2],2,hi);if(!A||!_)return null;if(!Hl(A.type,[Ni,Zn,yn,Ro,hi]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${As(A.type)} instead`);if(a.length===4){const y=d.parse(a[3],3,yn);return y?new wu(A,_,y):null}return new wu(A,_)}evaluate(a){const d=this.needle.evaluate(a),A=this.haystack.evaluate(a);if(!ja(d,["boolean","string","number","null"]))throw new Eo(`Expected first argument to be of type boolean, string, number or null, but found ${As(_s(d))} instead.`);if(!ja(A,["string","array"]))throw new Eo(`Expected second argument to be of type array or string, but found ${As(_s(A))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(a);return A.indexOf(d,_)}return A.indexOf(d)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Dc{constructor(a,d,A,_,y,b){this.inputType=a,this.type=d,this.input=A,this.cases=_,this.outputs=y,this.otherwise=b}static parse(a,d){if(a.length<5)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return d.error("Expected an even number of arguments.");let A,_;d.expectedType&&d.expectedType.kind!=="value"&&(_=d.expectedType);const y={},b=[];for(let G=2;G<a.length-1;G+=2){let T=a[G];const O=a[G+1];Array.isArray(T)||(T=[T]);const H=d.concat(G);if(T.length===0)return H.error("Expected at least one branch label.");for(const Q of T){if(typeof Q!="number"&&typeof Q!="string")return H.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return H.error("Numeric branch labels must be integer values.");if(A){if(H.checkSubtype(A,_s(Q)))return null}else A=_s(Q);if(y[String(Q)]!==void 0)return H.error("Branch labels must be unique.");y[String(Q)]=b.length}const U=d.parse(O,G,_);if(!U)return null;_=_||U.type,b.push(U)}const N=d.parse(a[1],1,hi);if(!N)return null;const z=d.parse(a[a.length-1],a.length-1,_);return z?N.type.kind!=="value"&&d.concat(1).checkSubtype(A,N.type)?null:new Dc(A,_,N,y,b,z):null}evaluate(a){const d=this.input.evaluate(a);return(_s(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],d=Object.keys(this.cases).sort(),A=[],_={};for(const b of d){const N=_[this.cases[b]];N===void 0?(_[this.cases[b]]=A.length,A.push([this.cases[b],[b]])):A[N][1].push(b)}const y=b=>this.inputType.kind==="number"?Number(b):b;for(const[b,N]of A)a.push(N.length===1?y(N[0]):N.map(y)),a.push(this.outputs[b].serialize());return a.push(this.otherwise.serialize()),a}}class Kl{constructor(a,d,A){this.type=a,this.branches=d,this.otherwise=A}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return d.error("Expected an odd number of arguments.");let A;d.expectedType&&d.expectedType.kind!=="value"&&(A=d.expectedType);const _=[];for(let b=1;b<a.length-1;b+=2){const N=d.parse(a[b],b,Ni);if(!N)return null;const z=d.parse(a[b+1],b+1,A);if(!z)return null;_.push([N,z]),A=A||z.type}const y=d.parse(a[a.length-1],a.length-1,A);return y?new Kl(A,_,y):null}evaluate(a){for(const[d,A]of this.branches)if(d.evaluate(a))return A.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[d,A]of this.branches)a(d),a(A);a(this.otherwise)}outputDefined(){return this.branches.every(([a,d])=>d.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(d=>{a.push(d.serialize())}),a}}class ad{constructor(a,d,A,_){this.type=a,this.input=d,this.beginIndex=A,this.endIndex=_}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const A=d.parse(a[1],1,hi),_=d.parse(a[2],2,yn);if(!A||!_)return null;if(!Hl(A.type,[yo(hi),Zn,hi]))return d.error(`Expected first argument to be of type array or string, but found ${As(A.type)} instead`);if(a.length===4){const y=d.parse(a[3],3,yn);return y?new ad(A.type,A,_,y):null}return new ad(A.type,A,_)}evaluate(a){const d=this.input.evaluate(a),A=this.beginIndex.evaluate(a);if(!ja(d,["string","array"]))throw new Eo(`Expected first argument to be of type array or string, but found ${As(_s(d))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(a);return d.slice(A,_)}return d.slice(A)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function zo(f,a){return f==="=="||f==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function qf(f,a,d,A){return A.compare(a,d)===0}function Bd(f,a,d){const A=f!=="=="&&f!=="!=";return class ZV{constructor(y,b,N){this.type=Ni,this.lhs=y,this.rhs=b,this.collator=N,this.hasUntypedArgument=y.type.kind==="value"||b.type.kind==="value"}static parse(y,b){if(y.length!==3&&y.length!==4)return b.error("Expected two or three arguments.");const N=y[0];let z=b.parse(y[1],1,hi);if(!z)return null;if(!zo(N,z.type))return b.concat(1).error(`"${N}" comparisons are not supported for type '${As(z.type)}'.`);let G=b.parse(y[2],2,hi);if(!G)return null;if(!zo(N,G.type))return b.concat(2).error(`"${N}" comparisons are not supported for type '${As(G.type)}'.`);if(z.type.kind!==G.type.kind&&z.type.kind!=="value"&&G.type.kind!=="value")return b.error(`Cannot compare types '${As(z.type)}' and '${As(G.type)}'.`);A&&(z.type.kind==="value"&&G.type.kind!=="value"?z=new aa(G.type,[z]):z.type.kind!=="value"&&G.type.kind==="value"&&(G=new aa(z.type,[G])));let T=null;if(y.length===4){if(z.type.kind!=="string"&&G.type.kind!=="string"&&z.type.kind!=="value"&&G.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(T=b.parse(y[3],3,jo),!T)return null}return new ZV(z,G,T)}evaluate(y){const b=this.lhs.evaluate(y),N=this.rhs.evaluate(y);if(A&&this.hasUntypedArgument){const z=_s(b),G=_s(N);if(z.kind!==G.kind||z.kind!=="string"&&z.kind!=="number")throw new Eo(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${z.kind}, ${G.kind}) instead.`)}if(this.collator&&!A&&this.hasUntypedArgument){const z=_s(b),G=_s(N);if(z.kind!=="string"||G.kind!=="string")return a(y,b,N)}return this.collator?d(y,b,N,this.collator.evaluate(y)):a(y,b,N)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[f];return this.eachChild(b=>{y.push(b.serialize())}),y}}}const Pp=Bd("==",function(f,a,d){return a===d},qf),Wf=Bd("!=",function(f,a,d){return a!==d},function(f,a,d,A){return!qf(0,a,d,A)}),vl=Bd("<",function(f,a,d){return a<d},function(f,a,d,A){return A.compare(a,d)<0}),Mo=Bd(">",function(f,a,d){return a>d},function(f,a,d,A){return A.compare(a,d)>0}),qa=Bd("<=",function(f,a,d){return a<=d},function(f,a,d,A){return A.compare(a,d)<=0}),Kf=Bd(">=",function(f,a,d){return a>=d},function(f,a,d,A){return A.compare(a,d)>=0});class Ed{constructor(a,d,A,_,y,b){this.type=Zn,this.number=a,this.locale=d,this.currency=A,this.unit=_,this.minFractionDigits=y,this.maxFractionDigits=b}static parse(a,d){if(a.length!==3)return d.error("Expected two arguments.");const A=d.parse(a[1],1,yn);if(!A)return null;const _=a[2];if(typeof _!="object"||Array.isArray(_))return d.error("NumberFormat options argument must be an object.");let y=null;if(_.locale&&(y=d.parseObjectValue(_.locale,2,"locale",Zn),!y))return null;let b=null;if(_.currency&&(b=d.parseObjectValue(_.currency,2,"currency",Zn),!b))return null;let N=null;if(_.unit&&(N=d.parseObjectValue(_.unit,2,"unit",Zn),!N))return null;let z=null;if(_["min-fraction-digits"]&&(z=d.parseObjectValue(_["min-fraction-digits"],2,"min-fraction-digits",yn),!z))return null;let G=null;return _["max-fraction-digits"]&&(G=d.parseObjectValue(_["max-fraction-digits"],2,"max-fraction-digits",yn),!G)?null:new Ed(A,y,b,N,z,G)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class Ta{constructor(a){this.type=yn,this.input=a}static parse(a,d){if(a.length!==2)return d.error(`Expected 1 argument, but found ${a.length-1} instead.`);const A=d.parse(a[1],1);return A?A.type.kind!=="array"&&A.type.kind!=="string"&&A.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${As(A.type)} instead.`):new Ta(A):null}evaluate(a){const d=this.input.evaluate(a);if(typeof d=="string"||Array.isArray(d))return d.length;throw new Eo(`Expected value to be of type string or array, but found ${As(_s(d))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(d=>{a.push(d.serialize())}),a}}function uo(f){return function(){f=1831565813+(f|=0)|0;let a=Math.imul(f^f>>>15,1|f);return a=a+Math.imul(a^a>>>7,61|a)^a,((a^a>>>14)>>>0)/4294967296}}const it={"==":Pp,"!=":Wf,">":Mo,"<":vl,">=":Kf,"<=":qa,array:aa,at:bh,boolean:aa,case:Kl,coalesce:xh,collator:_o,format:rl,image:Uo,in:od,"index-of":wu,interpolate:Wl,"interpolate-hcl":Wl,"interpolate-lab":Wl,length:Ta,let:_h,literal:qo,match:Dc,number:aa,"number-format":Ed,object:aa,slice:ad,step:$a,string:aa,"to-boolean":Wo,"to-color":Wo,"to-number":Wo,"to-string":Wo,var:oi,within:nl,distance:hs,config:mi};function ye(f,[a,d,A,_]){a=a.evaluate(f),d=d.evaluate(f),A=A.evaluate(f);const y=_?_.evaluate(f):1,b=vo(a,d,A,y);if(b)throw new Eo(b);return new si(a/255*y,d/255*y,A/255*y,y)}function Oe(f,[a,d,A,_]){a=a.evaluate(f),d=d.evaluate(f),A=A.evaluate(f);const y=_?_.evaluate(f):1,b=function(G,T,O,H){return typeof G=="number"&&G>=0&&G<=360?typeof T=="number"&&T>=0&&T<=100&&typeof O=="number"&&O>=0&&O<=100?H===void 0||typeof H=="number"&&H>=0&&H<=1?null:`Invalid hsla value [${[G,T,O,H].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof H=="number"?[G,T,O,H]:[G,T,O]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof H=="number"?[G,T,O,H]:[G,T,O]).join(", ")}]: 'h' must be between 0 and 360.`}(a,d,A,y);if(b)throw new Eo(b);const N=`hsla(${a}, ${d}%, ${A}%, ${y})`,z=si.parse(N);if(!z)throw new Eo(`Failed to parse HSLA color: ${N}`);return z}function nt(f,a){return f in a}function Xt(f,a){const d=a[f];return d===void 0?null:d}function Qr(f){return{type:f}}function Xn(f){return{result:"success",value:f}}function Si(f){return{result:"error",value:f}}function Di(f,a){return!!f&&!!f.parameters&&f.parameters.indexOf(a)>-1}function Hs(f){return f["property-type"]==="data-driven"}function Oc(f){return Di(f.expression,"measure-light")}function Xf(f){return Di(f.expression,"zoom")}function jp(f){return!!f.expression&&f.expression.interpolated}function wh(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function bA(f){return f}function wA(f,a){const d=a.type==="color",A=f.stops&&typeof f.stops[0][0]=="object",_=A||!(A||f.property!==void 0),y=f.type||(jp(a)?"exponential":"interval");if(d&&((f=Ci({},f)).stops&&(f.stops=f.stops.map(G=>[G[0],si.parse(G[1])])),f.default=si.parse(f.default?f.default:a.default)),f.colorSpace&&f.colorSpace!=="rgb"&&!vh[f.colorSpace])throw new Error(`Unknown color space: ${f.colorSpace}`);let b,N,z;if(y==="exponential")b=SA;else if(y==="interval")b=CA;else if(y==="categorical"){b=cg,N=Object.create(null);for(const G of f.stops)N[G[0]]=G[1];z=typeof f.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);b=Mp}if(A){const G={},T=[];for(let U=0;U<f.stops.length;U++){const Q=f.stops[U],W=Q[0].zoom;G[W]===void 0&&(G[W]={zoom:W,type:f.type,property:f.property,default:f.default,stops:[]},T.push(W)),G[W].stops.push([Q[0].value,Q[1]])}const O=[];for(const U of T)O.push([G[U].zoom,wA(G[U],a)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:Wl.interpolationFactor.bind(void 0,H),zoomStops:O.map(U=>U[0]),evaluate:({zoom:U},Q)=>SA({stops:O,base:f.base},a,U).evaluate(U,Q)}}if(_){const G=y==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:G,interpolationFactor:Wl.interpolationFactor.bind(void 0,G),zoomStops:f.stops.map(T=>T[0]),evaluate:({zoom:T})=>b(f,a,T,N,z)}}return{kind:"source",evaluate(G,T){const O=T&&T.properties?T.properties[f.property]:void 0;return O===void 0?of(f.default,a.default):b(f,a,O,N,z)}}}function of(f,a,d){return f!==void 0?f:a!==void 0?a:d!==void 0?d:void 0}function cg(f,a,d,A,_){return of(typeof d===_?A[d]:void 0,f.default,a.default)}function CA(f,a,d){if(Va(d)!=="number")return of(f.default,a.default);const A=f.stops.length;if(A===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[A-1][0])return f.stops[A-1][1];const _=ol(f.stops.map(y=>y[0]),d);return f.stops[_][1]}function SA(f,a,d){const A=f.base!==void 0?f.base:1;if(Va(d)!=="number")return of(f.default,a.default);const _=f.stops.length;if(_===1||d<=f.stops[0][0])return f.stops[0][1];if(d>=f.stops[_-1][0])return f.stops[_-1][1];const y=ol(f.stops.map(T=>T[0]),d),b=function(T,O,H,U){const Q=U-H,W=T-H;return Q===0?0:O===1?W/Q:(Math.pow(O,W)-1)/(Math.pow(O,Q)-1)}(d,A,f.stops[y][0],f.stops[y+1][0]),N=f.stops[y][1],z=f.stops[y+1][1];let G=ei[a.type]||bA;if(f.colorSpace&&f.colorSpace!=="rgb"){const T=vh[f.colorSpace];G=(O,H)=>T.reverse(T.interpolate(T.forward(O),T.forward(H),b))}return typeof N.evaluate=="function"?{evaluate(...T){const O=N.evaluate.apply(void 0,T),H=z.evaluate.apply(void 0,T);if(O!==void 0&&H!==void 0)return G(O,H,b)}}:G(N,z,b)}function Mp(f,a,d){return a.type==="color"?d=si.parse(d):a.type==="formatted"?d=Bo.fromString(d.toString()):a.type==="resolvedImage"?d=Zs.fromString(d.toString()):Va(d)===a.type||a.type==="enum"&&a.values[d]||(d=void 0),of(d,f.default,a.default)}xo.register(it,{error:[{kind:"error"},[Zn],(f,[a])=>{throw new Eo(a.evaluate(f))}],typeof:[Zn,[hi],(f,[a])=>As(_s(a.evaluate(f)))],"to-rgba":[yo(yn,4),[ha],(f,[a])=>a.evaluate(f).toRenderColor(null).toArray()],rgb:[ha,[yn,yn,yn],ye],rgba:[ha,[yn,yn,yn,yn],ye],hsl:[ha,[yn,yn,yn],Oe],hsla:[ha,[yn,yn,yn,yn],Oe],has:{type:Ni,overloads:[[[Zn],(f,[a])=>nt(a.evaluate(f),f.properties())],[[Zn,Ms],(f,[a,d])=>nt(a.evaluate(f),d.evaluate(f))]]},get:{type:hi,overloads:[[[Zn],(f,[a])=>Xt(a.evaluate(f),f.properties())],[[Zn,Ms],(f,[a,d])=>Xt(a.evaluate(f),d.evaluate(f))]]},"feature-state":[hi,[Zn],(f,[a])=>Xt(a.evaluate(f),f.featureState||{})],properties:[Ms,[],f=>f.properties()],"geometry-type":[Zn,[],f=>f.geometryType()],id:[hi,[],f=>f.id()],zoom:[yn,[],f=>f.globals.zoom],pitch:[yn,[],f=>f.globals.pitch||0],"distance-from-center":[yn,[],f=>f.distanceFromCenter()],"measure-light":[yn,[Zn],(f,[a])=>f.measureLight(a.evaluate(f))],"heatmap-density":[yn,[],f=>f.globals.heatmapDensity||0],"line-progress":[yn,[],f=>f.globals.lineProgress||0],"raster-value":[yn,[],f=>f.globals.rasterValue||0],"raster-particle-speed":[yn,[],f=>f.globals.rasterParticleSpeed||0],"sky-radial-progress":[yn,[],f=>f.globals.skyRadialProgress||0],accumulated:[hi,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[yn,Qr(yn),(f,a)=>{let d=0;for(const A of a)d+=A.evaluate(f);return d}],"*":[yn,Qr(yn),(f,a)=>{let d=1;for(const A of a)d*=A.evaluate(f);return d}],"-":{type:yn,overloads:[[[yn,yn],(f,[a,d])=>a.evaluate(f)-d.evaluate(f)],[[yn],(f,[a])=>-a.evaluate(f)]]},"/":[yn,[yn,yn],(f,[a,d])=>a.evaluate(f)/d.evaluate(f)],"%":[yn,[yn,yn],(f,[a,d])=>a.evaluate(f)%d.evaluate(f)],ln2:[yn,[],()=>Math.LN2],pi:[yn,[],()=>Math.PI],e:[yn,[],()=>Math.E],"^":[yn,[yn,yn],(f,[a,d])=>Math.pow(a.evaluate(f),d.evaluate(f))],sqrt:[yn,[yn],(f,[a])=>Math.sqrt(a.evaluate(f))],log10:[yn,[yn],(f,[a])=>Math.log(a.evaluate(f))/Math.LN10],ln:[yn,[yn],(f,[a])=>Math.log(a.evaluate(f))],log2:[yn,[yn],(f,[a])=>Math.log(a.evaluate(f))/Math.LN2],sin:[yn,[yn],(f,[a])=>Math.sin(a.evaluate(f))],cos:[yn,[yn],(f,[a])=>Math.cos(a.evaluate(f))],tan:[yn,[yn],(f,[a])=>Math.tan(a.evaluate(f))],asin:[yn,[yn],(f,[a])=>Math.asin(a.evaluate(f))],acos:[yn,[yn],(f,[a])=>Math.acos(a.evaluate(f))],atan:[yn,[yn],(f,[a])=>Math.atan(a.evaluate(f))],min:[yn,Qr(yn),(f,a)=>Math.min(...a.map(d=>d.evaluate(f)))],max:[yn,Qr(yn),(f,a)=>Math.max(...a.map(d=>d.evaluate(f)))],abs:[yn,[yn],(f,[a])=>Math.abs(a.evaluate(f))],round:[yn,[yn],(f,[a])=>{const d=a.evaluate(f);return d<0?-Math.round(-d):Math.round(d)}],floor:[yn,[yn],(f,[a])=>Math.floor(a.evaluate(f))],ceil:[yn,[yn],(f,[a])=>Math.ceil(a.evaluate(f))],"filter-==":[Ni,[Zn,hi],(f,[a,d])=>f.properties()[a.value]===d.value],"filter-id-==":[Ni,[hi],(f,[a])=>f.id()===a.value],"filter-type-==":[Ni,[Zn],(f,[a])=>f.geometryType()===a.value],"filter-<":[Ni,[Zn,hi],(f,[a,d])=>{const A=f.properties()[a.value],_=d.value;return typeof A==typeof _&&A<_}],"filter-id-<":[Ni,[hi],(f,[a])=>{const d=f.id(),A=a.value;return typeof d==typeof A&&d<A}],"filter->":[Ni,[Zn,hi],(f,[a,d])=>{const A=f.properties()[a.value],_=d.value;return typeof A==typeof _&&A>_}],"filter-id->":[Ni,[hi],(f,[a])=>{const d=f.id(),A=a.value;return typeof d==typeof A&&d>A}],"filter-<=":[Ni,[Zn,hi],(f,[a,d])=>{const A=f.properties()[a.value],_=d.value;return typeof A==typeof _&&A<=_}],"filter-id-<=":[Ni,[hi],(f,[a])=>{const d=f.id(),A=a.value;return typeof d==typeof A&&d<=A}],"filter->=":[Ni,[Zn,hi],(f,[a,d])=>{const A=f.properties()[a.value],_=d.value;return typeof A==typeof _&&A>=_}],"filter-id->=":[Ni,[hi],(f,[a])=>{const d=f.id(),A=a.value;return typeof d==typeof A&&d>=A}],"filter-has":[Ni,[hi],(f,[a])=>a.value in f.properties()],"filter-has-id":[Ni,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Ni,[yo(Zn)],(f,[a])=>a.value.indexOf(f.geometryType())>=0],"filter-id-in":[Ni,[yo(hi)],(f,[a])=>a.value.indexOf(f.id())>=0],"filter-in-small":[Ni,[Zn,yo(hi)],(f,[a,d])=>d.value.indexOf(f.properties()[a.value])>=0],"filter-in-large":[Ni,[Zn,yo(hi)],(f,[a,d])=>function(A,_,y,b){for(;y<=b;){const N=y+b>>1;if(_[N]===A)return!0;_[N]>A?b=N-1:y=N+1}return!1}(f.properties()[a.value],d.value,0,d.value.length-1)],all:{type:Ni,overloads:[[[Ni,Ni],(f,[a,d])=>a.evaluate(f)&&d.evaluate(f)],[Qr(Ni),(f,a)=>{for(const d of a)if(!d.evaluate(f))return!1;return!0}]]},any:{type:Ni,overloads:[[[Ni,Ni],(f,[a,d])=>a.evaluate(f)||d.evaluate(f)],[Qr(Ni),(f,a)=>{for(const d of a)if(d.evaluate(f))return!0;return!1}]]},"!":[Ni,[Ni],(f,[a])=>!a.evaluate(f)],"is-supported-script":[Ni,[Zn],(f,[a])=>{const d=f.globals&&f.globals.isSupportedScript;return!d||d(a.evaluate(f))}],upcase:[Zn,[Zn],(f,[a])=>a.evaluate(f).toUpperCase()],downcase:[Zn,[Zn],(f,[a])=>a.evaluate(f).toLowerCase()],concat:[Zn,Qr(hi),(f,a)=>a.map(d=>io(d.evaluate(f))).join("")],"resolved-locale":[Zn,[jo],(f,[a])=>a.evaluate(f).resolvedLocale()],random:[yn,[yn,yn,hi],(f,a)=>{const[d,A,_]=a.map(b=>b.evaluate(f));if(d>A||d===A)return d;let y;if(typeof _=="string")y=function(b){let N=0;if(b.length===0)return N;for(let z=0;z<b.length;z++)N=(N<<5)-N+b.charCodeAt(z),N|=0;return N}(_);else{if(typeof _!="number")throw new Eo(`Invalid seed input: ${_}`);y=_}return d+uo(y)()*(A-d)}]});class Cu{constructor(a,d,A,_){this.expression=a,this._warningHistory={},this._evaluator=new pa(A,_),this._defaultValue=d?function(y){return y.type==="color"&&(wh(y.default)||Array.isArray(y.default))?new si(0,0,0,0):y.type==="color"?si.parse(y.default)||null:y.default===void 0?null:y.default}(d):null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(a,d,A,_,y,b,N,z){return this._evaluator.globals=a,this._evaluator.feature=d,this._evaluator.featureState=A,this._evaluator.canonical=_||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=N||null,this._evaluator.featureDistanceData=z||null,this.expression.evaluate(this._evaluator)}evaluate(a,d,A,_,y,b,N,z){this._evaluator.globals=a,this._evaluator.feature=d||null,this._evaluator.featureState=A||null,this._evaluator.canonical=_||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=N||null,this._evaluator.featureDistanceData=z||null;try{const G=this.expression.evaluate(this._evaluator);if(G==null||typeof G=="number"&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new Eo(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${G.message}`)),this._defaultValue}}}function Yf(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in it}function af(f,a,d,A){const _=new sl(it,[],a?function(b){const N={color:ha,string:Zn,number:yn,enum:Zn,boolean:Ni,formatted:zl,resolvedImage:oa};return b.type==="array"?yo(N[b.value]||hi,b.length):N[b.type]}(a):void 0,void 0,void 0,d,A),y=_.parse(f,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Xn(new Cu(y,a,d,A)):Si(_.errors)}class lf{constructor(a,d,A){this.kind=a,this._styleExpression=d,this.isLightConstant=A,this.isStateDependent=a!=="constant"&&!to(d.expression),this.configDependencies=Cs(d.expression)}evaluateWithoutErrorHandling(a,d,A,_,y,b){return this._styleExpression.evaluateWithoutErrorHandling(a,d,A,_,y,b)}evaluate(a,d,A,_,y,b){return this._styleExpression.evaluate(a,d,A,_,y,b)}}class w{constructor(a,d,A,_,y){this.kind=a,this.zoomStops=A,this._styleExpression=d,this.isStateDependent=a!=="camera"&&!to(d.expression),this.isLightConstant=y,this.configDependencies=Cs(d.expression),this.interpolationType=_}evaluateWithoutErrorHandling(a,d,A,_,y,b){return this._styleExpression.evaluateWithoutErrorHandling(a,d,A,_,y,b)}evaluate(a,d,A,_,y,b){return this._styleExpression.evaluate(a,d,A,_,y,b)}interpolationFactor(a,d,A){return this.interpolationType?Wl.interpolationFactor(this.interpolationType,a,d,A):0}}function I(f,a,d,A){if((f=af(f,a,d,A)).result==="error")return f;const _=f.value.expression,y=co(_);if(!y&&!Hs(a))return Si([new Ps("","data expressions not supported")]);const b=Ji(_,["zoom","pitch","distance-from-center"]);if(!b&&!Xf(a))return Si([new Ps("","zoom expressions not supported")]);const N=Ji(_,["measure-light"]);if(!N&&!Oc(a))return Si([new Ps("","measure-light expression not supported")]);const z=a.expression&&a.expression.relaxZoomRestriction,G=ee(_);return G||b||z?G instanceof Ps?Si([G]):G instanceof Wl&&!jp(a)?Si([new Ps("",'"interpolate" expressions cannot be used with this property')]):Xn(G?new w(y?"camera":"composite",f.value,G.labels,G instanceof Wl?G.interpolation:void 0,N):new lf(y?"constant":"source",f.value,N)):Si([new Ps("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class ${constructor(a,d){this._parameters=a,this._specification=d,Ci(this,wA(this._parameters,this._specification))}static deserialize(a){return new $(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function ee(f){let a=null;if(f instanceof _h)a=ee(f.result);else if(f instanceof xh){for(const d of f.args)if(a=ee(d),a)break}else(f instanceof $a||f instanceof Wl)&&f.input instanceof xo&&f.input.name==="zoom"&&(a=f);return a instanceof Ps||f.eachChild(d=>{const A=ee(d);A instanceof Ps?a=A:a&&A&&a!==A&&(a=new Ps("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}var ge,Se,Le=function(){if(Se)return ge;Se=1,ge=a;var f=3;function a(d,A,_){var y=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;var b=new Int32Array(this.arrayBuffer);d=b[0],this.d=(A=b[1])+2*(_=b[2]);for(var N=0;N<this.d*this.d;N++){var z=b[f+N],G=b[f+N+1];y.push(z===G?null:b.subarray(z,G))}var T=b[f+y.length+1];this.keys=b.subarray(b[f+y.length],T),this.bboxes=b.subarray(T),this.insert=this._insertReadonly}else{this.d=A+2*_;for(var O=0;O<this.d*this.d;O++)y.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=d,this.padding=_,this.scale=A/d,this.uid=0;var H=_/A*d;this.min=-H,this.max=d+H}return a.prototype.insert=function(d,A,_,y,b){this._forEachCell(A,_,y,b,this._insertCell,this.uid++),this.keys.push(d),this.bboxes.push(A),this.bboxes.push(_),this.bboxes.push(y),this.bboxes.push(b)},a.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},a.prototype._insertCell=function(d,A,_,y,b,N){this.cells[b].push(N)},a.prototype.query=function(d,A,_,y,b){var N=this.min,z=this.max;if(d<=N&&A<=N&&z<=_&&z<=y&&!b)return Array.prototype.slice.call(this.keys);var G=[];return this._forEachCell(d,A,_,y,this._queryCell,G,{},b),G},a.prototype._queryCell=function(d,A,_,y,b,N,z,G){var T=this.cells[b];if(T!==null)for(var O=this.keys,H=this.bboxes,U=0;U<T.length;U++){var Q=T[U];if(z[Q]===void 0){var W=4*Q;(G?G(H[W+0],H[W+1],H[W+2],H[W+3]):d<=H[W+2]&&A<=H[W+3]&&_>=H[W+0]&&y>=H[W+1])?(z[Q]=!0,N.push(O[Q])):z[Q]=!1}}},a.prototype._forEachCell=function(d,A,_,y,b,N,z,G){for(var T=this._convertToCellCoord(d),O=this._convertToCellCoord(A),H=this._convertToCellCoord(_),U=this._convertToCellCoord(y),Q=T;Q<=H;Q++)for(var W=O;W<=U;W++){var re=this.d*W+Q;if((!G||G(this._convertFromCellCoord(Q),this._convertFromCellCoord(W),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(W+1)))&&b.call(this,d,A,_,y,re,N,z,G))return}},a.prototype._convertFromCellCoord=function(d){return(d-this.padding)/this.scale},a.prototype._convertToCellCoord=function(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))},a.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var d=this.cells,A=f+this.cells.length+1+1,_=0,y=0;y<this.cells.length;y++)_+=this.cells[y].length;var b=new Int32Array(A+_+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;for(var N=A,z=0;z<d.length;z++){var G=d[z];b[f+z]=N,b.set(G,N),N+=G.length}return b[f+d.length]=N,b.set(this.keys,N),b[f+d.length+1]=N+=this.keys.length,b.set(this.bboxes,N),N+=this.bboxes.length,b.buffer},ge}(),Pe=m(Le);const Me={};function je(f,a,d={}){Object.defineProperty(f,"_classRegistryKey",{value:a,writable:!1}),Me[a]={klass:f,omit:d.omit||[]}}je(Object,"Object"),Pe.serialize=function(f,a){const d=f.toArrayBuffer();return a&&a.add(d),{buffer:d}},Pe.deserialize=function(f){return new Pe(f.buffer)},Object.defineProperty(Pe,"name",{value:"Grid"}),je(Pe,"Grid"),je(si,"Color"),je(Error,"Error"),je(Bo,"Formatted"),je(Ys,"FormattedSection"),je(qi,"AJAXError"),je(Zs,"ResolvedImage"),je($,"StylePropertyFunction"),je(Cu,"StyleExpression",{omit:["_evaluator"]}),je(w,"ZoomDependentExpression"),je(lf,"ZoomConstantExpression"),je(xo,"CompoundExpression",{omit:["_evaluate"]});for(const f in it)Me[it[f]._classRegistryKey]||je(it[f],`Expression${f}`);function lt(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function It(f){return self.ImageBitmap&&f instanceof ImageBitmap}function Bt(f,a){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp)return f;if(lt(f)||It(f))return a&&a.add(f),f;if(ArrayBuffer.isView(f)){const d=f;return a&&a.add(d.buffer),d}if(f instanceof ImageData)return a&&a.add(f.data.buffer),f;if(Array.isArray(f)){const d=[];for(const A of f)d.push(Bt(A,a));return d}if(f instanceof Map){const d={$name:"Map"};for(const[A,_]of f.entries())d[A]=Bt(_);return d}if(f instanceof Set){const d={$name:"Set"};let A=0;for(const _ of f.values())d[++A]=Bt(_);return d}if(typeof f=="object"){const d=f.constructor,A=d._classRegistryKey;if(!A)throw new Error(`can't serialize object of unregistered class ${A}`);const _=d.serialize?d.serialize(f,a):{};if(!d.serialize){for(const y in f)f.hasOwnProperty(y)&&(Me[A].omit.indexOf(y)>=0||(_[y]=Bt(f[y],a)));f instanceof Error&&(_.message=f.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(_.$name=A),_}throw new Error("can't serialize object of type "+typeof f)}function xt(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||lt(f)||It(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map(xt);if(typeof f=="object"){const a=f.$name||"Object";if(a==="Map"){const _=new Map;for(const y of Object.keys(f))y!=="$name"&&_.set(y,xt(f[y]));return _}if(a==="Set"){const _=new Set;for(const y of Object.keys(f))y!=="$name"&&_.add(xt(f[y]));return _}const{klass:d}=Me[a];if(!d)throw new Error(`can't deserialize unregistered class ${a}`);if(d.deserialize)return d.deserialize(f);const A=Object.create(d.prototype);for(const _ of Object.keys(f))_!=="$name"&&(A[_]=xt(f[_]));return A}throw new Error("can't deserialize object of type "+typeof f)}const Ft={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519,"CJK Unified Ideographs Extension B":f=>f>=131072&&f<=173791};function Qt(f){for(const a of f)if(lr(a.charCodeAt(0)))return!0;return!1}function ct(f){for(const a of f)if(!mt(a.charCodeAt(0)))return!1;return!0}function mt(f){return!(Ft.Arabic(f)||Ft["Arabic Supplement"](f)||Ft["Arabic Extended-A"](f)||Ft["Arabic Presentation Forms-A"](f)||Ft["Arabic Presentation Forms-B"](f))}function lr(f){return!(f!==746&&f!==747&&(f<4352||!(Ft["Bopomofo Extended"](f)||Ft.Bopomofo(f)||Ft["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Ft["CJK Compatibility Ideographs"](f)||Ft["CJK Compatibility"](f)||Ft["CJK Radicals Supplement"](f)||Ft["CJK Strokes"](f)||!(!Ft["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Ft["CJK Unified Ideographs Extension A"](f)||Ft["CJK Unified Ideographs"](f)||Ft["Enclosed CJK Letters and Months"](f)||Ft["Hangul Compatibility Jamo"](f)||Ft["Hangul Jamo Extended-A"](f)||Ft["Hangul Jamo Extended-B"](f)||Ft["Hangul Jamo"](f)||Ft["Hangul Syllables"](f)||Ft.Hiragana(f)||Ft["Ideographic Description Characters"](f)||Ft.Kanbun(f)||Ft["Kangxi Radicals"](f)||Ft["Katakana Phonetic Extensions"](f)||Ft.Katakana(f)&&f!==12540||!(!Ft["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Ft["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Ft["Unified Canadian Aboriginal Syllabics"](f)||Ft["Unified Canadian Aboriginal Syllabics Extended"](f)||Ft["Vertical Forms"](f)||Ft["Yijing Hexagram Symbols"](f)||Ft["Yi Syllables"](f)||Ft["Yi Radicals"](f))))}function mr(f){return!(lr(f)||function(a){return!!(Ft["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||Ft["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||Ft["Letterlike Symbols"](a)||Ft["Number Forms"](a)||Ft["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||Ft["Control Pictures"](a)&&a!==9251||Ft["Optical Character Recognition"](a)||Ft["Enclosed Alphanumerics"](a)||Ft["Geometric Shapes"](a)||Ft["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Ft["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Ft["CJK Symbols and Punctuation"](a)||Ft.Katakana(a)||Ft["Private Use Area"](a)||Ft["CJK Compatibility Forms"](a)||Ft["Small Form Variants"](a)||Ft["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(f))}function dr(f){return f>=1424&&f<=2303||Ft["Arabic Presentation Forms-A"](f)||Ft["Arabic Presentation Forms-B"](f)}function Xr(f,a){return!(!a&&dr(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Ft.Khmer(f))}function Or(f){for(const a of f)if(dr(a.charCodeAt(0)))return!0;return!1}const bn="deferred",zr="loading",ci="loaded";let fi=null,$n="unavailable",ti=null;const Mi=function(f){f&&typeof f=="string"&&f.indexOf("NetworkError")>-1&&($n="error"),fi&&fi(f)};function wi(){Vn.fire(new er("pluginStateChange",{pluginStatus:$n,pluginURL:ti}))}const Vn=new Fn,gs=function(){return $n},To=function(){if($n!==bn||!ti)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$n=zr,wi(),ti&&Ul({url:ti},f=>{f?Mi(f):($n=ci,wi())})},zi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>$n===ci||zi.applyArabicShaping!=null,isLoading:()=>$n===zr,setState(f){$n=f.pluginStatus,ti=f.pluginURL},isParsed:()=>zi.applyArabicShaping!=null&&zi.processBidirectionalText!=null&&zi.processStyledBidirectionalText!=null,getPluginURL:()=>ti};class Qi{constructor(a,d){this.zoom=a,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.transition=d.transition,this.pitch=d.pitch,this.brightness=d.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(a){return function(d,A){for(const _ of d)if(!Xr(_.charCodeAt(0),A))return!1;return!0}(a,zi.isLoaded())}}class gi{constructor(a,d,A,_){this.property=a,this.value=d,this.expression=function(y,b,N,z){if(wh(y))return new $(y,b);if(Yf(y)||Array.isArray(y)&&y.length>0){const G=I(y,b,N,z);if(G.result==="error")throw new Error(G.value.map(T=>`${T.key}: ${T.message}`).join(", "));return G.value}{let G=y;return typeof y=="string"&&b.type==="color"&&(G=si.parse(y)),{kind:"constant",configDependencies:new Set,evaluate:()=>G}}}(d===void 0?a.specification.default:d,a.specification,A,_)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,d,A){return this.property.possiblyEvaluate(this,a,d,A)}}class Qo{constructor(a,d,A){this.property=a,this.value=new gi(a,void 0,d,A)}transitioned(a,d){return new Os(this.property,this.value,d,ln({},a.transition,this.transition),a.now)}untransitioned(){return new Os(this.property,this.value,null,{},0)}}class Ko{constructor(a,d,A){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues),this._scope=d,this._options=A,this.configDependencies=new Set}getValue(a){return Vi(this._values[a].value.value)}setValue(a,d){this._values.hasOwnProperty(a)||(this._values[a]=new Qo(this._values[a].property,this._scope,this._options)),this._values[a].value=new gi(this._values[a].property,d===null?void 0:Vi(d),this._scope,this._options),this._values[a].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].value.expression.configDependencies]))}setTransitionOrValue(a,d){d&&(this._options=d);const A=this._properties.properties;if(a)for(const _ in a){const y=a[_];if(On(_,"-transition")){const b=_.slice(0,-11);A[b]&&this.setTransition(b,y)}else A.hasOwnProperty(_)&&this.setValue(_,y)}}getTransition(a){return Vi(this._values[a].transition)}setTransition(a,d){this._values.hasOwnProperty(a)||(this._values[a]=new Qo(this._values[a].property)),this._values[a].transition=Vi(d)||void 0}serialize(){const a={};for(const d of Object.keys(this._values)){const A=this.getValue(d);A!==void 0&&(a[d]=A);const _=this.getTransition(d);_!==void 0&&(a[`${d}-transition`]=_)}return a}transitioned(a,d){const A=new Ws(this._properties);for(const _ of Object.keys(this._values))A._values[_]=this._values[_].transitioned(a,d._values[_]);return A}untransitioned(){const a=new Ws(this._properties);for(const d of Object.keys(this._values))a._values[d]=this._values[d].untransitioned();return a}}class Os{constructor(a,d,A,_,y){const b=_.delay||0,N=_.duration||0;y=y||0,this.property=a,this.value=d,this.begin=y+b,this.end=this.begin+N,a.specification.transition&&(_.delay||_.duration)&&(this.prior=A)}possiblyEvaluate(a,d,A){const _=a.now||0,y=this.value.possiblyEvaluate(a,d,A),b=this.prior;if(b){if(_>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(_<this.begin)return b.possiblyEvaluate(a,d,A);{const N=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(a,d,A),y,nr(N))}}return y}}class Ws{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,d,A){const _=new ca(this._properties);for(const y of Object.keys(this._values))_._values[y]=this._values[y].possiblyEvaluate(a,d,A);return _}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Lo{constructor(a,d,A){this._properties=a,this._values=Object.create(a.defaultPropertyValues),this._scope=d,this._options=A,this.configDependencies=new Set}getValue(a){return Vi(this._values[a].value)}setValue(a,d){this._values[a]=new gi(this._values[a].property,d===null?void 0:Vi(d),this._scope,this._options),this._values[a].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].expression.configDependencies]))}serialize(){const a={};for(const d of Object.keys(this._values)){const A=this.getValue(d);A!==void 0&&(a[d]=A)}return a}possiblyEvaluate(a,d,A){const _=new ca(this._properties);for(const y of Object.keys(this._values))_._values[y]=this._values[y].possiblyEvaluate(a,d,A);return _}}class ko{constructor(a,d,A){this.property=a,this.value=d,this.parameters=A}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,d,A,_){return this.property.evaluate(this.value,this.parameters,a,d,A,_)}}class ca{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class jr{constructor(a){this.specification=a}possiblyEvaluate(a,d){return a.expression.evaluate(d)}interpolate(a,d,A){const _=ei[this.specification.type];return _?_(a,d,A):a}}class In{constructor(a,d){this.specification=a,this.overrides=d}possiblyEvaluate(a,d,A,_){return new ko(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(d,null,{},A,_)}:a.expression,d)}interpolate(a,d,A){if(a.value.kind!=="constant"||d.value.kind!=="constant")return a;if(a.value.value===void 0||d.value.value===void 0)return new ko(this,{kind:"constant",value:void 0},a.parameters);const _=ei[this.specification.type];return _?new ko(this,{kind:"constant",value:_(a.value.value,d.value.value,A)},a.parameters):a}evaluate(a,d,A,_,y,b){return a.kind==="constant"?a.value:a.evaluate(d,A,_,y,b)}}class ya{constructor(a){this.specification=a}possiblyEvaluate(a,d,A,_){return!!a.expression.evaluate(d,null,{},A,_)}interpolate(){return!1}}class Es{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const d=new Qi(0,{});for(const A in a){const _=a[A];_.specification.overridable&&this.overridableProperties.push(A);const y=this.defaultPropertyValues[A]=new gi(_,void 0),b=this.defaultTransitionablePropertyValues[A]=new Qo(_);this.defaultTransitioningPropertyValues[A]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=y.possiblyEvaluate(d)}}}je(In,"DataDrivenProperty"),je(jr,"DataConstantProperty"),je(ya,"ColorRampProperty");var cr=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function es(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Td(f){if(Array.isArray(f))return f.map(Td);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const a={};for(const d in f)a[d]=Td(f[d]);return a}return es(f)}function cf(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const a of f.slice(1))if(!cf(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}function Rc(f,a="",d=null,A="fill"){if(f==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};cf(f)||(f=Ch(f));const _=f;let y=!0;try{y=function(O){if(!Kc(O))return O;let H=Td(O);return uc(H),H=ld(H),H}(_)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(_,null,2)}
        `)}const b=cr[`filter_${A}`],N=af(y,b,a,d);let z=null;if(N.result==="error")throw new Error(N.value.map(O=>`${O.key}: ${O.message}`).join(", "));z=(O,H,U)=>N.value.evaluate(O,H,{},U);let G=null,T=null;if(y!==_){const O=af(_,b,a,d);if(O.result==="error")throw new Error(O.value.map(H=>`${H.key}: ${H.message}`).join(", "));G=(H,U,Q,W,re)=>O.value.evaluate(H,U,{},Q,void 0,void 0,W,re),T=!co(O.value.expression)}return{filter:z,dynamicFilter:G||void 0,needGeometry:Xc(y),needFeature:!!T}}function ld(f){if(!Array.isArray(f))return f;const a=function(d){if(ka.has(d[0])){for(let A=1;A<d.length;A++)if(Kc(d[A]))return!0}return d}(f);return a===!0?a:a.map(d=>ld(d))}function uc(f){let a=!1;const d=[];if(f[0]==="case"){for(let A=1;A<f.length-1;A+=2)a=a||Kc(f[A]),d.push(f[A+1]);d.push(f[f.length-1])}else if(f[0]==="match"){a=a||Kc(f[1]);for(let A=2;A<f.length-1;A+=2)d.push(f[A+1]);d.push(f[f.length-1])}else if(f[0]==="step"){a=a||Kc(f[1]);for(let A=1;A<f.length-1;A+=2)d.push(f[A+1])}a&&(f.length=0,f.push("any",...d));for(let A=1;A<f.length;A++)uc(f[A])}function Kc(f){if(!Array.isArray(f))return!1;if((a=f[0])==="pitch"||a==="distance-from-center")return!0;var a;for(let d=1;d<f.length;d++)if(Kc(f[d]))return!0;return!1}const ka=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function su(f,a){return f<a?-1:f>a?1:0}function Xc(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let a=1;a<f.length;a++)if(Xc(f[a]))return!0;return!1}function Ch(f){if(!f)return!0;const a=f[0];return f.length<=1?a!=="any":a==="=="?Su(f[1],f[2],"=="):a==="!="?cd(Su(f[1],f[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Su(f[1],f[2],a):a==="any"?(d=f.slice(1),["any"].concat(d.map(Ch))):a==="all"?["all"].concat(f.slice(1).map(Ch)):a==="none"?["all"].concat(f.slice(1).map(Ch).map(cd)):a==="in"?Sh(f[1],f.slice(2)):a==="!in"?cd(Sh(f[1],f.slice(2))):a==="has"?ou(f[1]):a!=="!has"||cd(ou(f[1]));var d}function Su(f,a,d){switch(f){case"$type":return[`filter-type-${d}`,a];case"$id":return[`filter-id-${d}`,a];default:return[`filter-${d}`,f,a]}}function Sh(f,a){if(a.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(d=>typeof d!=typeof a[0])?["filter-in-large",f,["literal",a.sort(su)]]:["filter-in-small",f,["literal",a]]}}function ou(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function cd(f){return["!",f]}const Yc="";function Bu(f,a){return a?`${f}${Yc}${a}`:f}const au="-transition",ug=new Set(["fill","line","background","hillshade","raster"]);class Wa extends Fn{constructor(a,d,A,_,y){if(super(),this.id=a.id,this.fqid=Bu(this.id,A),this.type=a.type,this.scope=A,this.lut=_,this.options=y,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&a.type!=="sky"&&a.type!=="slot"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),a.slot&&(this.slot=a.slot),d.layout&&(this._unevaluatedLayout=new Lo(d.layout,this.scope,y),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),d.paint)){this._transitionablePaint=new Ko(d.paint,this.scope,y);for(const b in a.paint)this.setPaintProperty(b,a.paint[b]);for(const b in a.layout)this.setLayoutProperty(b,a.layout[b]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ca(d.paint)}}onAdd(a){}onRemove(a){}isDraped(a){return!this.is3D()&&ug.has(this.type)}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,d){if(this.type==="custom"&&a==="visibility")return void(this.visibility=d);const A=this._unevaluatedLayout;A._properties.properties[a]&&(A.setValue(a,d),this.configDependencies=new Set([...this.configDependencies,...A.configDependencies]),a==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(a){return On(a,au)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,d){const A=this._transitionablePaint,_=A._properties.properties;if(On(a,au)){const O=a.slice(0,-11);return _[O]&&A.setTransition(O,d||void 0),!1}if(!_[a])return!1;const y=A._values[a],b=y.value.isDataDriven(),N=y.value;A.setValue(a,d),this.configDependencies=new Set([...this.configDependencies,...A.configDependencies]),this._handleSpecialPaintPropertyUpdate(a);const z=A._values[a].value,G=z.isDataDriven(),T=On(a,"pattern")||a==="line-dasharray";return G||b||T||this._handleOverridablePaintPropertyUpdate(a,N,z)}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getDefaultProgramParams(a,d,A){return null}_handleOverridablePaintPropertyUpdate(a,d,A){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,d){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,d)}serialize(){return Hn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(a,d)=>!(a===void 0||d==="layout"&&!Object.keys(a).length||d==="paint"&&!Object.keys(a).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const a in this.paint._values){const d=this.paint.get(a);if(d instanceof ko&&Hs(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}compileFilter(a){this._filterCompiled||(this._featureFilter=Rc(this.filter,this.scope,a),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(a){this._stats&&(a.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(a){}queryIntersectsFeature(a,d,A,_,y,b,N,z,G){}queryIntersectsMatchingFeature(a,d,A,_){}}const dc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class uf{constructor(a,d){this._structArray=a,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ho{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,d){return a._trim(),d&&(a.isTransferred=!0,d.add(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const d=Object.create(this.prototype);return d.arrayBuffer=a.arrayBuffer,d.length=a.length,d.capacity=a.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...a){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...a){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function as(f,a=1){let d=0,A=0;return{members:f.map(_=>{const y=dc[_.type].BYTES_PER_ELEMENT,b=d=Zf(d,Math.max(a,y)),N=_.components||1;return A=Math.max(A,y),d+=y*N,{name:_.name,type:_.type,components:N,offset:b}}),size:Zf(d,Math.max(A,a)),alignment:a}}function Zf(f,a){return Math.ceil(f/a)*a}class Bc extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d){const A=this.length;return this.resize(A+1),this.emplace(A,a,d)}emplace(a,d,A){const _=2*a;return this.int16[_+0]=d,this.int16[_+1]=A,a}}Bc.prototype.bytesPerElement=4,je(Bc,"StructArrayLayout2i4");class Bh extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,A){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,A)}emplace(a,d,A,_){const y=3*a;return this.int16[y+0]=d,this.int16[y+1]=A,this.int16[y+2]=_,a}}Bh.prototype.bytesPerElement=6,je(Bh,"StructArrayLayout3i6");class Eu extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,A,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,d,A,_)}emplace(a,d,A,_,y){const b=4*a;return this.int16[b+0]=d,this.int16[b+1]=A,this.int16[b+2]=_,this.int16[b+3]=y,a}}Eu.prototype.bytesPerElement=8,je(Eu,"StructArrayLayout4i8");class Tu extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,d,A,_,y)}emplace(a,d,A,_,y,b){const N=5*a;return this.int16[N+0]=d,this.int16[N+1]=A,this.int16[N+2]=_,this.int16[N+3]=y,this.int16[N+4]=b,a}}Tu.prototype.bytesPerElement=10,je(Tu,"StructArrayLayout5i10");class rh extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,A,_,y,b,N)}emplace(a,d,A,_,y,b,N,z){const G=6*a,T=12*a,O=3*a;return this.int16[G+0]=d,this.int16[G+1]=A,this.uint8[T+4]=_,this.uint8[T+5]=y,this.uint8[T+6]=b,this.uint8[T+7]=N,this.float32[O+2]=z,a}}rh.prototype.bytesPerElement=12,je(rh,"StructArrayLayout2i4ub1f12");class El extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,d,A,_)}emplace(a,d,A,_,y){const b=4*a;return this.float32[b+0]=d,this.float32[b+1]=A,this.float32[b+2]=_,this.float32[b+3]=y,a}}El.prototype.bytesPerElement=16,je(El,"StructArrayLayout4f16");class Lu extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,A)}emplace(a,d,A,_){const y=3*a;return this.float32[y+0]=d,this.float32[y+1]=A,this.float32[y+2]=_,a}}Lu.prototype.bytesPerElement=12,je(Lu,"StructArrayLayout3f12");class ud extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,d,A,_,y)}emplace(a,d,A,_,y,b){const N=6*a,z=3*a;return this.uint16[N+0]=d,this.uint16[N+1]=A,this.uint16[N+2]=_,this.uint16[N+3]=y,this.float32[z+2]=b,a}}ud.prototype.bytesPerElement=12,je(ud,"StructArrayLayout4ui1f12");class Uc extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,A,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,d,A,_)}emplace(a,d,A,_,y){const b=4*a;return this.uint16[b+0]=d,this.uint16[b+1]=A,this.uint16[b+2]=_,this.uint16[b+3]=y,a}}Uc.prototype.bytesPerElement=8,je(Uc,"StructArrayLayout4ui8");class Eh extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b){const N=this.length;return this.resize(N+1),this.emplace(N,a,d,A,_,y,b)}emplace(a,d,A,_,y,b,N){const z=6*a;return this.int16[z+0]=d,this.int16[z+1]=A,this.int16[z+2]=_,this.int16[z+3]=y,this.int16[z+4]=b,this.int16[z+5]=N,a}}Eh.prototype.bytesPerElement=12,je(Eh,"StructArrayLayout6i12");class nh extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N,z,G,T,O,H){const U=this.length;return this.resize(U+1),this.emplace(U,a,d,A,_,y,b,N,z,G,T,O,H)}emplace(a,d,A,_,y,b,N,z,G,T,O,H,U){const Q=12*a;return this.int16[Q+0]=d,this.int16[Q+1]=A,this.int16[Q+2]=_,this.int16[Q+3]=y,this.uint16[Q+4]=b,this.uint16[Q+5]=N,this.uint16[Q+6]=z,this.uint16[Q+7]=G,this.int16[Q+8]=T,this.int16[Q+9]=O,this.int16[Q+10]=H,this.int16[Q+11]=U,a}}nh.prototype.bytesPerElement=24,je(nh,"StructArrayLayout4i4ui4i24");class Tl extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b){const N=this.length;return this.resize(N+1),this.emplace(N,a,d,A,_,y,b)}emplace(a,d,A,_,y,b,N){const z=10*a,G=5*a;return this.int16[z+0]=d,this.int16[z+1]=A,this.int16[z+2]=_,this.float32[G+2]=y,this.float32[G+3]=b,this.float32[G+4]=N,a}}Tl.prototype.bytesPerElement=20,je(Tl,"StructArrayLayout3i3f20");class df extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint32[1*a+0]=d,a}}df.prototype.bytesPerElement=4,je(df,"StructArrayLayout1ul4");class Iu extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d){const A=this.length;return this.resize(A+1),this.emplace(A,a,d)}emplace(a,d,A){const _=2*a;return this.uint16[_+0]=d,this.uint16[_+1]=A,a}}Iu.prototype.bytesPerElement=4,je(Iu,"StructArrayLayout2ui4");class Th extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N,z,G,T,O,H,U){const Q=this.length;return this.resize(Q+1),this.emplace(Q,a,d,A,_,y,b,N,z,G,T,O,H,U)}emplace(a,d,A,_,y,b,N,z,G,T,O,H,U,Q){const W=20*a,re=10*a;return this.int16[W+0]=d,this.int16[W+1]=A,this.int16[W+2]=_,this.int16[W+3]=y,this.int16[W+4]=b,this.float32[re+3]=N,this.float32[re+4]=z,this.float32[re+5]=G,this.float32[re+6]=T,this.int16[W+14]=O,this.uint32[re+8]=H,this.uint16[W+18]=U,this.uint16[W+19]=Q,a}}Th.prototype.bytesPerElement=40,je(Th,"StructArrayLayout5i4f1i1ul2ui40");class dd extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,A,_,y,b,N)}emplace(a,d,A,_,y,b,N,z){const G=8*a;return this.int16[G+0]=d,this.int16[G+1]=A,this.int16[G+2]=_,this.int16[G+4]=y,this.int16[G+5]=b,this.int16[G+6]=N,this.int16[G+7]=z,a}}dd.prototype.bytesPerElement=16,je(dd,"StructArrayLayout3i2i2i16");class na extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,d,A,_,y)}emplace(a,d,A,_,y,b){const N=4*a,z=8*a;return this.float32[N+0]=d,this.float32[N+1]=A,this.float32[N+2]=_,this.int16[z+6]=y,this.int16[z+7]=b,a}}na.prototype.bytesPerElement=16,je(na,"StructArrayLayout2f1f2i16");class Lh extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b){const N=this.length;return this.resize(N+1),this.emplace(N,a,d,A,_,y,b)}emplace(a,d,A,_,y,b,N){const z=20*a,G=5*a;return this.uint8[z+0]=d,this.uint8[z+1]=A,this.float32[G+1]=_,this.float32[G+2]=y,this.float32[G+3]=b,this.float32[G+4]=N,a}}Lh.prototype.bytesPerElement=20,je(Lh,"StructArrayLayout2ub4f20");class Ka extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,A){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,A)}emplace(a,d,A,_){const y=3*a;return this.uint16[y+0]=d,this.uint16[y+1]=A,this.uint16[y+2]=_,a}}Ka.prototype.bytesPerElement=6,je(Ka,"StructArrayLayout3ui6");class kp extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue,Be,Te,he,ke){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue,Be,Te,he,ke)}emplace(a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue,Be,Te,he,ke,Ve){const rt=30*a,dt=15*a,ft=60*a;return this.int16[rt+0]=d,this.int16[rt+1]=A,this.int16[rt+2]=_,this.float32[dt+2]=y,this.float32[dt+3]=b,this.uint16[rt+8]=N,this.uint16[rt+9]=z,this.uint32[dt+5]=G,this.uint32[dt+6]=T,this.uint32[dt+7]=O,this.uint16[rt+16]=H,this.uint16[rt+17]=U,this.uint16[rt+18]=Q,this.float32[dt+10]=W,this.float32[dt+11]=re,this.uint8[ft+48]=ue,this.uint8[ft+49]=Be,this.uint8[ft+50]=Te,this.uint32[dt+13]=he,this.int16[rt+28]=ke,this.uint8[ft+58]=Ve,a}}kp.prototype.bytesPerElement=60,je(kp,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class hf extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt,ft,at,Et,yt,Nt,zt,Gt,$t){const Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt,ft,at,Et,yt,Nt,zt,Gt,$t)}emplace(a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue,Be,Te,he,ke,Ve,rt,dt,ft,at,Et,yt,Nt,zt,Gt,$t,Zt){const vr=20*a,tr=40*a,Br=80*a;return this.float32[vr+0]=d,this.float32[vr+1]=A,this.int16[tr+4]=_,this.int16[tr+5]=y,this.int16[tr+6]=b,this.int16[tr+7]=N,this.int16[tr+8]=z,this.int16[tr+9]=G,this.int16[tr+10]=T,this.int16[tr+11]=O,this.int16[tr+12]=H,this.uint16[tr+13]=U,this.uint16[tr+14]=Q,this.uint16[tr+15]=W,this.uint16[tr+16]=re,this.uint16[tr+17]=ue,this.uint16[tr+18]=Be,this.uint16[tr+19]=Te,this.uint16[tr+20]=he,this.uint16[tr+21]=ke,this.uint16[tr+22]=Ve,this.uint16[tr+23]=rt,this.uint16[tr+24]=dt,this.uint16[tr+25]=ft,this.uint16[tr+26]=at,this.uint16[tr+27]=Et,this.uint32[vr+14]=yt,this.float32[vr+15]=Nt,this.float32[vr+16]=zt,this.float32[vr+17]=Gt,this.float32[vr+18]=$t,this.uint8[Br+76]=Zt,a}}hf.prototype.bytesPerElement=80,je(hf,"StructArrayLayout2f9i15ui1ul4f1ub80");class Ih extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.float32[1*a+0]=d,a}}Ih.prototype.bytesPerElement=4,je(Ih,"StructArrayLayout1f4");class Ll extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,d,A,_,y)}emplace(a,d,A,_,y,b){const N=5*a;return this.float32[N+0]=d,this.float32[N+1]=A,this.float32[N+2]=_,this.float32[N+3]=y,this.float32[N+4]=b,a}}Ll.prototype.bytesPerElement=20,je(Ll,"StructArrayLayout5f20");class ih extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,A,_,y,b,N)}emplace(a,d,A,_,y,b,N,z){const G=7*a;return this.float32[G+0]=d,this.float32[G+1]=A,this.float32[G+2]=_,this.float32[G+3]=y,this.float32[G+4]=b,this.float32[G+5]=N,this.float32[G+6]=z,a}}ih.prototype.bytesPerElement=28,je(ih,"StructArrayLayout7f28");class lu extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,A,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,d,A,_)}emplace(a,d,A,_,y){const b=6*a;return this.uint32[3*a+0]=d,this.uint16[b+2]=A,this.uint16[b+3]=_,this.uint16[b+4]=y,a}}lu.prototype.bytesPerElement=12,je(lu,"StructArrayLayout1ul3ui12");class al extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint16[1*a+0]=d,a}}al.prototype.bytesPerElement=2,je(al,"StructArrayLayout1ui2");class ll extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d){const A=this.length;return this.resize(A+1),this.emplace(A,a,d)}emplace(a,d,A){const _=2*a;return this.float32[_+0]=d,this.float32[_+1]=A,a}}ll.prototype.bytesPerElement=8,je(ll,"StructArrayLayout2f8");class cl extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re){const ue=this.length;return this.resize(ue+1),this.emplace(ue,a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re)}emplace(a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue){const Be=16*a;return this.float32[Be+0]=d,this.float32[Be+1]=A,this.float32[Be+2]=_,this.float32[Be+3]=y,this.float32[Be+4]=b,this.float32[Be+5]=N,this.float32[Be+6]=z,this.float32[Be+7]=G,this.float32[Be+8]=T,this.float32[Be+9]=O,this.float32[Be+10]=H,this.float32[Be+11]=U,this.float32[Be+12]=Q,this.float32[Be+13]=W,this.float32[Be+14]=re,this.float32[Be+15]=ue,a}}cl.prototype.bytesPerElement=64,je(cl,"StructArrayLayout16f64");class Nu extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,A,_,y,b,N){const z=this.length;return this.resize(z+1),this.emplace(z,a,d,A,_,y,b,N)}emplace(a,d,A,_,y,b,N,z){const G=10*a,T=5*a;return this.uint16[G+0]=d,this.uint16[G+1]=A,this.uint16[G+2]=_,this.uint16[G+3]=y,this.float32[T+2]=b,this.float32[T+3]=N,this.float32[T+4]=z,a}}Nu.prototype.bytesPerElement=20,je(Nu,"StructArrayLayout4ui3f20");class Ld extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.int16[1*a+0]=d,a}}Ld.prototype.bytesPerElement=2,je(Ld,"StructArrayLayout1i2");class Nh extends ho{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint8[1*a+0]=d,a}}Nh.prototype.bytesPerElement=1,je(Nh,"StructArrayLayout1ub1");class BA extends uf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}BA.prototype.size=40;class Id extends Th{get(a){return new BA(this,a)}}je(Id,"CollisionBoxArray");class hd extends uf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}hd.prototype.size=60;class H1 extends kp{get(a){return new hd(this,a)}}je(H1,"PlacedSymbolArray");class Tb extends uf{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(a){this._structArray.uint32[this._pos4+14]=a}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(a){this._structArray.float32[this._pos4+18]=a}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}Tb.prototype.size=80;class V1 extends hf{get(a){return new Tb(this,a)}}je(V1,"SymbolInstanceArray");class Lb extends Ih{getoffsetX(a){return this.float32[1*a+0]}}je(Lb,"GlyphOffsetArray");class D0 extends Bc{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}je(D0,"SymbolLineVertexArray");class Ib extends uf{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ib.prototype.size=12;class Nb extends lu{get(a){return new Ib(this,a)}}je(Nb,"FeatureIndexArray");class Fb extends Iu{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}je(Fb,"FillExtrusionCentroidArray");class Pb extends uf{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Pb.prototype.size=6;class G1 extends Bh{get(a){return new Pb(this,a)}}je(G1,"FillExtrusionWallArray");const vS=as([{name:"a_pos",components:2,type:"Int16"}],4),xS=as([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class La{constructor(a=[]){this.segments=a}_prepareSegment(a,d,A,_){let y=this.segments[this.segments.length-1];return a>La.MAX_VERTEX_ARRAY_LENGTH&&jn(`Max vertices per segment is ${La.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!y||y.vertexLength+a>La.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==_)&&(y={vertexOffset:d,primitiveOffset:A,vertexLength:0,primitiveLength:0},_!==void 0&&(y.sortKey=_),this.segments.push(y)),y}prepareSegment(a,d,A,_){return this._prepareSegment(a,d.length,A.length,_)}get(){return this.segments}destroy(){for(const a of this.segments)for(const d in a.vaos)a.vaos[d].destroy()}static simpleSegment(a,d,A,_){return new La([{vertexOffset:a,primitiveOffset:d,vertexLength:A,primitiveLength:_,vaos:{},sortKey:0}])}}function jb(f,a){return 256*(f=Ir(Math.floor(f),0,255))+Ir(Math.floor(a),0,255)}La.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,je(La,"SegmentVector");const _S=as([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),bS=as([{name:"a_dash",components:4,type:"Uint16"}]);class dg{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(a,d,A,_){this.ids.push(Mb(a)),this.positions.push(d,A,_)}eachPosition(a,d){const A=Mb(a);let _=0,y=this.ids.length-1;for(;_<y;){const b=_+y>>1;this.ids[b]>=A?y=b:_=b+1}for(;this.ids[_]===A;)d(this.positions[3*_],this.positions[3*_+1],this.positions[3*_+2]),_++}static serialize(a,d){const A=new Float64Array(a.ids),_=new Uint32Array(a.positions);return EA(A,_,0,A.length-1),d&&(d.add(A.buffer),d.add(_.buffer)),{ids:A,positions:_}}static deserialize(a){const d=new dg;let A;d.ids=a.ids,d.positions=a.positions;for(const _ of d.ids)_!==A&&d.uniqueIds.push(_),A=_;return d.indexed=!0,d}}function Mb(f){const a=+f;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:Jt(String(f))}function EA(f,a,d,A){for(;d<A;){const _=f[d+A>>1];let y=d-1,b=A+1;for(;;){do y++;while(f[y]<_);do b--;while(f[b]>_);if(y>=b)break;O0(f,y,b),O0(a,3*y,3*b),O0(a,3*y+1,3*b+1),O0(a,3*y+2,3*b+2)}b-d<A-b?(EA(f,a,d,b),d=b+1):(EA(f,a,b+1,A),A=b)}}function O0(f,a,d){const A=f[a];f[a]=f[d],f[d]=A}je(dg,"FeaturePositionMap");class ff{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,d){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,d),this.initialized=!0),!!this.location}set(a,d,A){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class Dp extends ff{constructor(a){super(a),this.current=0}set(a,d,A){this.fetchUniformLocation(a,d)&&this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}}class Zc extends ff{constructor(a){super(a),this.current=0}set(a,d,A){this.fetchUniformLocation(a,d)&&this.current!==A&&(this.current=A,this.gl.uniform1f(this.location,A))}}class Fh extends ff{constructor(a){super(a),this.current=[0,0]}set(a,d,A){this.fetchUniformLocation(a,d)&&(A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1])))}}class $1 extends ff{constructor(a){super(a),this.current=[0,0,0]}set(a,d,A){this.fetchUniformLocation(a,d)&&(A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2])))}}class R0 extends ff{constructor(a){super(a),this.current=[0,0,0,0]}set(a,d,A){this.fetchUniformLocation(a,d)&&(A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]&&A[3]===this.current[3]||(this.current=A,this.gl.uniform4f(this.location,A[0],A[1],A[2],A[3])))}}class q1 extends ff{constructor(a){super(a),this.current=si.transparent.toRenderColor(null)}set(a,d,A){this.fetchUniformLocation(a,d)&&(A.r===this.current.r&&A.g===this.current.g&&A.b===this.current.b&&A.a===this.current.a||(this.current=A,this.gl.uniform4f(this.location,A.r,A.g,A.b,A.a)))}}const kb=new Float32Array(16);class hg extends ff{constructor(a){super(a),this.current=kb}set(a,d,A){if(this.fetchUniformLocation(a,d)){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let _=1;_<16;_++)if(A[_]!==this.current[_]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}}}const wS=new Float32Array(9),CS=new Float32Array(4);class W1 extends ff{constructor(a){super(a),this.current=CS}set(a,d,A){if(this.fetchUniformLocation(a,d)){for(let _=0;_<4;_++)if(A[_]!==this.current[_]){this.current=A,this.gl.uniformMatrix2fv(this.location,!1,A);break}}}}function K1(f){return[jb(255*f.r,255*f.g),jb(255*f.b,255*f.a)]}class fg{constructor(a,d,A,_){this.value=a,this.uniformNames=d.map(y=>`u_${y}`),this.type=A,this.context=_}setUniform(a,d,A,_,y){const b=_.constantOr(this.value);d.set(a,y,b instanceof si?b.toRenderColor(this.context.lut):b)}getBinding(a,d){return this.type==="color"?new q1(a):new Zc(a)}}class TA{constructor(a,d){this.uniformNames=d.map(A=>`u_${A}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,d,A,_,y){const b=y==="u_pattern"||y==="u_dash"?this.pattern:y==="u_pixel_ratio"?this.pixelRatio:null;b&&d.set(a,y,b)}getBinding(a,d){return d==="u_pattern"||d==="u_dash"?new R0(a):new Zc(a)}}class Ph{constructor(a,d,A,_){this.expression=a,this.type=A,this.maxValue=0,this.paintVertexAttributes=d.map(y=>({name:`a_${y}`,type:"Float32",components:A==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(a,d,A,_,y,b,N){const z=this.paintVertexArray.length,G=this.expression.evaluate(new Qi(0,{brightness:b}),d,{},y,_,N);this.paintVertexArray.resize(a),this._setPaintValue(z,a,G,this.context)}updatePaintArray(a,d,A,_,y,b,N){const z=this.expression.evaluate({zoom:0,brightness:N},A,_,void 0,y);this._setPaintValue(a,d,z,this.context)}_setPaintValue(a,d,A,_){if(this.type==="color"){const y=K1(A.toRenderColor(_.lut));for(let b=a;b<d;b++)this.paintVertexArray.emplace(b,y[0],y[1])}else{for(let y=a;y<d;y++)this.paintVertexArray.emplace(y,A);this.maxValue=Math.max(this.maxValue,Math.abs(A))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fd{constructor(a,d,A,_,y,b){this.expression=a,this.uniformNames=d.map(N=>`u_${N}_t`),this.type=A,this.useIntegerZoom=_,this.context=y,this.maxValue=0,this.paintVertexAttributes=d.map(N=>({name:`a_${N}`,type:"Float32",components:A==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(a,d,A,_,y,b,N){const z=this.expression.evaluate(new Qi(this.context.zoom,{brightness:b}),d,{},y,_,N),G=this.expression.evaluate(new Qi(this.context.zoom+1,{brightness:b}),d,{},y,_,N),T=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(T,a,z,G,this.context)}updatePaintArray(a,d,A,_,y,b,N){const z=this.expression.evaluate({zoom:this.context.zoom,brightness:N},A,_,void 0,y),G=this.expression.evaluate({zoom:this.context.zoom+1,brightness:N},A,_,void 0,y);this._setPaintValue(a,d,z,G,this.context)}_setPaintValue(a,d,A,_,y){if(this.type==="color"){const b=K1(A.toRenderColor(y.lut)),N=K1(A.toRenderColor(y.lut));for(let z=a;z<d;z++)this.paintVertexArray.emplace(z,b[0],b[1],N[0],N[1])}else{for(let b=a;b<d;b++)this.paintVertexArray.emplace(b,A,_);this.maxValue=Math.max(this.maxValue,Math.abs(A),Math.abs(_))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,d,A,_,y){const b=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,N=Ir(this.expression.interpolationFactor(b,this.context.zoom,this.context.zoom+1),0,1);d.set(a,y,N)}getBinding(a,d){return new Zc(a)}}class jh{constructor(a,d,A,_,y){this.expression=a,this.layerId=y,this.paintVertexAttributes=(A==="array"?bS:_S).members;for(let b=0;b<d.length;++b);this.paintVertexArray=new _}populatePaintArray(a,d,A,_){const y=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(y,a,d.patterns&&d.patterns[this.layerId],A)}updatePaintArray(a,d,A,_,y,b,N){this._setPaintValues(a,d,A.patterns&&A.patterns[this.layerId],b)}_setPaintValues(a,d,A,_){if(!_||!A)return;const y=_[A];if(!y)return;const{tl:b,br:N,pixelRatio:z}=y;for(let G=a;G<d;G++)this.paintVertexArray.emplace(G,b[0],b[1],N[0],N[1],z)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Op{constructor(a,d,A=()=>!0){this.binders={},this._buffers=[],this.context=d;const _=[];for(const y in a.paint._values){const b=a.paint.get(y);if(!A(y)||!(b instanceof ko&&Hs(b.property.specification)))continue;const N=BS(y,a.type),z=b.value,G=b.property.specification.type,T=!!b.property.useIntegerZoom,O=y==="line-dasharray"||y.endsWith("pattern"),H=y==="line-dasharray"&&a.layout.get("line-cap").value.kind!=="constant";if(z.kind!=="constant"||H)if(z.kind==="source"||H||O){const U=v(y,G,"source");this.binders[y]=O?new jh(z,N,G,U,a.id):new Ph(z,N,G,U),_.push(`/a_${y}`)}else{const U=v(y,G,"composite");this.binders[y]=new fd(z,N,G,T,d,U),_.push(`/z_${y}`)}else this.binders[y]=O?new TA(z.value,N):new fg(z.value,N,G,d),_.push(`/u_${y}`)}this.cacheKey=_.sort().join("")}getMaxValue(a){const d=this.binders[a];return d instanceof Ph||d instanceof fd?d.maxValue:0}populatePaintArrays(a,d,A,_,y,b,N){for(const z in this.binders){const G=this.binders[z];G.context=this.context,(G instanceof Ph||G instanceof fd||G instanceof jh)&&G.populatePaintArray(a,d,A,_,y,b,N)}}setConstantPatternPositions(a){for(const d in this.binders){const A=this.binders[d];A instanceof TA&&A.setConstantPatternPositions(a)}}updatePaintArrays(a,d,A,_,y,b,N,z){let G=!1;const T=Object.keys(a),O=T.length!==0,H=O?T:d.uniqueIds;this.context.lut=y.lut;for(const U in this.binders){const Q=this.binders[U];if(Q.context=this.context,(Q instanceof Ph||Q instanceof fd||Q instanceof jh)&&(Q.expression.isStateDependent===!0||Q.expression.isLightConstant===!1)){const W=y.paint.get(U);Q.expression=W.value;for(const re of H){const ue=a[re.toString()];d.eachPosition(re,(Be,Te,he)=>{const ke=_.feature(Be);Q.updatePaintArray(Te,he,ke,ue,b,N,z)})}if(!O)for(const re of A.uniqueIds){const ue=a[re.toString()];A.eachPosition(re,(Be,Te,he)=>{const ke=_.feature(Be);Q.updatePaintArray(Te,he,ke,ue,b,N,z)})}G=!0}}return G}defines(){const a=[];for(const d in this.binders){const A=this.binders[d];(A instanceof fg||A instanceof TA)&&a.push(...A.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return a}getBinderAttributes(){const a=[];for(const d in this.binders){const A=this.binders[d];if(A instanceof Ph||A instanceof fd||A instanceof jh)for(let _=0;_<A.paintVertexAttributes.length;_++)a.push(A.paintVertexAttributes[_].name)}return a}getBinderUniforms(){const a=[];for(const d in this.binders){const A=this.binders[d];if(A instanceof fg||A instanceof TA||A instanceof fd)for(const _ of A.uniformNames)a.push(_)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const d=[];for(const A in this.binders){const _=this.binders[A];if(_ instanceof fg||_ instanceof TA||_ instanceof fd)for(const y of _.uniformNames)d.push({name:y,property:A,binding:_.getBinding(a,y)})}return d}setUniforms(a,d,A,_,y){for(const{name:b,property:N,binding:z}of A)this.binders[N].setUniform(a,z,y,_.get(N),b)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const d=this.binders[a];(d instanceof Ph||d instanceof fd||d instanceof jh)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(a){for(const d in this.binders){const A=this.binders[d];(A instanceof Ph||A instanceof fd||A instanceof jh)&&A.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const d=this.binders[a];(d instanceof Ph||d instanceof fd||d instanceof jh)&&d.destroy()}}}class Jf{constructor(a,d,A=()=>!0){this.programConfigurations={};for(const _ of a)this.programConfigurations[_.id]=new Op(_,d,A);this.needsUpload=!1,this._featureMap=new dg,this._featureMapWithoutIds=new dg,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(a,d,A,_,y,b,N,z){for(const G in this.programConfigurations)this.programConfigurations[G].populatePaintArrays(a,d,_,y,b,N,z);d.id!==void 0?this._featureMap.add(d.id,A,this._bufferOffset,a):(this._featureMapWithoutIds.add(this._idlessCounter,A,this._bufferOffset,a),this._idlessCounter+=1),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,d,A,_,y,b){for(const N of A)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(a,this._featureMap,this._featureMapWithoutIds,d,N,_,y,b||0)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const SS={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function BS(f,a){return SS[f]||[f.replace(`${a}-`,"").replace(/-/g,"_")]}const ES={"line-pattern":{source:ud,composite:ud},"fill-pattern":{source:ud,composite:ud},"fill-extrusion-pattern":{source:ud,composite:ud},"line-dasharray":{source:Uc,composite:Uc}},Db={color:{source:ll,composite:El},number:{source:Ih,composite:ll}};function v(f,a,d){const A=ES[f];return A&&A[d]||Db[a][d]}je(fg,"ConstantBinder"),je(TA,"PatternConstantBinder"),je(Ph,"SourceExpressionBinder"),je(jh,"PatternCompositeBinder"),je(fd,"CompositeExpressionBinder"),je(Op,"ProgramConfiguration",{omit:["_buffers"]}),je(Jf,"ProgramConfigurationSet");const l=Yr/Math.PI/2,h=5,x=6,E=16383,L=64,M=[L,32,16],q=-l,X=l;function ne(f,a,d,A=l){return d=vt(d),[f*Math.sin(d)*A,-a*A,f*Math.cos(d)*A]}function ae(f,a,d){return ne(Math.cos(vt(f)),Math.sin(vt(f)),a,d)}const xe=63710088e-1,Ce=2*Math.PI*xe;class Ee{constructor(a,d){if(isNaN(a)||isNaN(d))throw new Error(`Invalid LngLat object: (${a}, ${d})`);if(this.lng=+a,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ee(Sn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const d=Math.PI/180,A=this.lat*d,_=a.lat*d,y=Math.sin(A)*Math.sin(_)+Math.cos(A)*Math.cos(_)*Math.cos((a.lng-this.lng)*d);return xe*Math.acos(Math.min(y,1))}toBounds(a=0){const d=360*a/40075017,A=d/Math.cos(Math.PI/180*this.lat);return new Ge({lng:this.lng-A,lat:this.lat-d},{lng:this.lng+A,lat:this.lat+d})}toEcef(a){return ae(this.lat,this.lng,l+a*l/xe)}static convert(a){if(a instanceof Ee)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ee(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Ee(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ge{constructor(a,d){if(a)if(d)this.setSouthWest(a).setNorthEast(d);else if(a.length===4){const A=a;this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]])}else{const A=a;this.setSouthWest(A[0]).setNorthEast(A[1])}}setNorthEast(a){return this._ne=a instanceof Ee?new Ee(a.lng,a.lat):Ee.convert(a),this}setSouthWest(a){return this._sw=a instanceof Ee?new Ee(a.lng,a.lat):Ee.convert(a),this}extend(a){const d=this._sw,A=this._ne;let _,y;if(a instanceof Ee)_=a,y=a;else{if(!(a instanceof Ge))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Ge.convert(a)):this.extend(Ee.convert(a)):typeof a=="object"&&a!==null&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(Ee.convert(a)):this;if(_=a._sw,y=a._ne,!_||!y)return this}return d||A?(d.lng=Math.min(_.lng,d.lng),d.lat=Math.min(_.lat,d.lat),A.lng=Math.max(y.lng,A.lng),A.lat=Math.max(y.lat,A.lat)):(this._sw=new Ee(_.lng,_.lat),this._ne=new Ee(y.lng,y.lat)),this}getCenter(){return new Ee((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ee(this.getWest(),this.getNorth())}getSouthEast(){return new Ee(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:A}=Ee.convert(a);let _=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&_}static convert(a){if(a)return a instanceof Ge?a:new Ge(a)}}const $e=0,Ye=25.5;function Je(f){return Ce*Math.cos(f*Math.PI/180)}function ht(f){return(180+f)/360}function gt(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function ut(f,a){return f/Je(a)}function wt(f){return 360*f-180}function _t(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function Pt(f,a){return f*Je(_t(a))}const Tt=85.051129;function jt(f){return Math.cos(vt(Ir(f,-Tt,Tt)))}function Vt(f,a){const d=Ir(a,$e,Ye),A=Math.pow(2,d);return jt(f)*Ce/(512*A)}function Ut(f){return 1/Math.cos(f*Math.PI/180)}function Ot(f,a=0){const d=Math.exp(Math.PI*(1-(f.y+a/Yr)/(1<<f.z)*2));return 80150034*d/(d*d+1)/Yr/(1<<f.z)}class sr{constructor(a,d,A=0){this.x=+a,this.y=+d,this.z=+A}static fromLngLat(a,d=0){const A=Ee.convert(a);return new sr(ht(A.lng),gt(A.lat),ut(d,A.lat))}toLngLat(){return new Ee(wt(this.x),_t(this.y))}toAltitude(){return Pt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ce*Ut(_t(this.y))}}function Cr(f,a,d,A,_,y,b,N,z){const G=(a+A)/2,T=(d+_)/2,O=new Ze(G,T);N(O),function(H,U,Q,W,re,ue){const Be=Q-re,Te=W-ue;return Math.abs((W-U)*Be-(Q-H)*Te)/Math.hypot(Be,Te)}(O.x,O.y,y.x,y.y,b.x,b.y)>=z?(Cr(f,a,d,G,T,y,O,N,z),Cr(f,G,T,A,_,O,b,N,z)):f.push(b)}function Rr(f,a,d){let A=f[0],_=A.x,y=A.y;a(A);const b=[A];for(let N=1;N<f.length;N++){const z=f[N],{x:G,y:T}=z;a(z),Cr(b,_,y,G,T,A,z,a,d),_=G,y=T,A=z}return b}function wr(f,a,d,A){if(A(a,d)){const _=a.add(d)._mult(.5);wr(f,a,_,A),wr(f,_,d,A)}else f.push(d)}function Jr(f,a){let d=f[0];const A=[d];for(let _=1;_<f.length;_++){const y=f[_];wr(A,d,y,a),d=y}return A}const or=Math.pow(2,14)-1,Fr=-or-1;function Er(f,a){const d=Math.round(f.x*a),A=Math.round(f.y*a);return f.x=Ir(d,Fr,or),f.y=Ir(A,Fr,or),(d<f.x||d>f.x+1||A<f.y||A>f.y+1)&&jn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),f}function en(f,a,d){const A=f.loadGeometry(),_=f.extent,y=Yr/_;if(a&&d&&d.projection.isReprojectedInTileSpace){const b=1<<a.z,{scale:N,x:z,y:G,projection:T}=d,O=H=>{const U=wt((a.x+H.x/_)/b),Q=_t((a.y+H.y/_)/b),W=T.project(U,Q);H.x=(W.x*N-z)*_,H.y=(W.y*N-G)*_};for(let H=0;H<A.length;H++)if(f.type!==1)A[H]=Rr(A[H],O,1);else{const U=[];for(const Q of A[H])Q.x<0||Q.x>=_||Q.y<0||Q.y>=_||(O(Q),U.push(Q));A[H]=U}}for(const b of A)for(const N of b)Er(N,y);return A}function nn(f,a){return{type:f.type,id:f.id,properties:f.properties,geometry:a?en(f):[]}}function kr(f,a,d,A,_){f.emplaceBack(2*a+(A+1)/2,2*d+(_+1)/2)}function Hr(f,a,d){f.emplaceBack(a.x,a.y,a.z,d[0]*16384,d[1]*16384,d[2]*16384)}class Yn{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.fqid),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new Bc,this.indexArray=new Ka,this.segments=new La,this.programConfigurations=new Jf(a.layers,{zoom:a.zoom,lut:a.lut}),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}updateFootprints(a,d){}populate(a,d,A,_){const y=this.layers[0],b=[];let N=null;y.type==="circle"&&(N=y.layout.get("circle-sort-key"));for(const{feature:G,id:T,index:O,sourceLayerIndex:H}of a){const U=this.layers[0]._featureFilter.needGeometry,Q=nn(G,U);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom),Q,A))continue;const W=N?N.evaluate(Q,{},A):void 0,re={id:T,properties:G.properties,type:G.type,sourceLayerIndex:H,index:O,geometry:U?Q.geometry:en(G,A,_),patterns:{},sortKey:W};b.push(re)}N&&b.sort((G,T)=>G.sortKey-T.sortKey);let z=null;_.projection.name==="globe"&&(this.globeExtVertexArray=new Eh,z=_.projection);for(const G of b){const{geometry:T,index:O,sourceLayerIndex:H}=G,U=a[O].feature;this.addFeature(G,T,O,d.availableImages,A,z,d.brightness),d.featureIndex.insert(U,T,O,H,this.index)}}update(a,d,A,_,y){const b=Object.keys(a).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,d,b?this.stateDependentLayers:this.layers,A,_,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,vS.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,xS.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,d,A,_,y,b,N){for(const z of d)for(const G of z){const T=G.x,O=G.y;if(T<0||T>=Yr||O<0||O>=Yr)continue;if(b){const Q=b.projectTilePoint(T,O,y),W=b.upVector(y,T,O),re=this.globeExtVertexArray;Hr(re,Q,W),Hr(re,Q,W),Hr(re,Q,W),Hr(re,Q,W)}const H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),U=H.vertexLength;kr(this.layoutVertexArray,T,O,-1,-1),kr(this.layoutVertexArray,T,O,1,-1),kr(this.layoutVertexArray,T,O,1,1),kr(this.layoutVertexArray,T,O,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+2,U+3),H.vertexLength+=4,H.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,A,{},_,y,N)}}function dn(f,a){for(let d=0;d<f.length;d++)if(Do(a,f[d]))return!0;for(let d=0;d<a.length;d++)if(Do(f,a[d]))return!0;return!!ii(f,a)}function Nn(f,a,d){return!!Do(f,a)||!!ki(a,f,d)}function ai(f,a){if(f.length===1)return fo(a,f[0]);for(let d=0;d<a.length;d++){const A=a[d];for(let _=0;_<A.length;_++)if(Do(f,A[_]))return!0}for(let d=0;d<f.length;d++)if(fo(a,f[d]))return!0;for(let d=0;d<a.length;d++)if(ii(f,a[d]))return!0;return!1}function zn(f,a,d){if(f.length>1){if(ii(f,a))return!0;for(let A=0;A<a.length;A++)if(ki(a[A],f,d))return!0}for(let A=0;A<f.length;A++)if(ki(f[A],a,d))return!0;return!1}function ii(f,a){if(f.length===0||a.length===0)return!1;for(let d=0;d<f.length-1;d++){const A=f[d],_=f[d+1];for(let y=0;y<a.length-1;y++)if(Hi(A,_,a[y],a[y+1]))return!0}return!1}function Hi(f,a,d,A){return Dn(f,d,A)!==Dn(a,d,A)&&Dn(f,a,d)!==Dn(f,a,A)}function ki(f,a,d){const A=d*d;if(a.length===1)return f.distSqr(a[0])<A;for(let _=1;_<a.length;_++)if(Ks(f,a[_-1],a[_])<A)return!0;return!1}function Ks(f,a,d){const A=a.distSqr(d);if(A===0)return f.distSqr(a);const _=((f.x-a.x)*(d.x-a.x)+(f.y-a.y)*(d.y-a.y))/A;return f.distSqr(_<0?a:_>1?d:d.sub(a)._mult(_)._add(a))}function fo(f,a){let d,A,_,y=!1;for(let b=0;b<f.length;b++){d=f[b];for(let N=0,z=d.length-1;N<d.length;z=N++)A=d[N],_=d[z],A.y>a.y!=_.y>a.y&&a.x<(_.x-A.x)*(a.y-A.y)/(_.y-A.y)+A.x&&(y=!y)}return y}function Do(f,a){let d=!1;for(let A=0,_=f.length-1;A<f.length;_=A++){const y=f[A],b=f[_];y.y>a.y!=b.y>a.y&&a.x<(b.x-y.x)*(a.y-y.y)/(b.y-y.y)+y.x&&(d=!d)}return d}function Nd(f,a,d,A,_){for(const b of f)if(a<=b.x&&d<=b.y&&A>=b.x&&_>=b.y)return!0;const y=[new Ze(a,d),new Ze(a,_),new Ze(A,_),new Ze(A,d)];if(f.length>2){for(const b of y)if(Do(f,b))return!0}for(let b=0;b<f.length-1;b++)if(Xa(f[b],f[b+1],y))return!0;return!1}function Xa(f,a,d){const A=d[0],_=d[2];if(f.x<A.x&&a.x<A.x||f.x>_.x&&a.x>_.x||f.y<A.y&&a.y<A.y||f.y>_.y&&a.y>_.y)return!1;const y=Dn(f,a,d[0]);return y!==Dn(f,a,d[1])||y!==Dn(f,a,d[2])||y!==Dn(f,a,d[3])}function ts(f,a,d,A,_,y){let b=a.y-f.y,N=f.x-a.x;if(y=y||0){const z=b*b+N*N;if(z===0)return!0;const G=Math.sqrt(z);b/=G,N/=G}return!((d.x-f.x)*b+(d.y-f.y)*N-y<0||(A.x-f.x)*b+(A.y-f.y)*N-y<0||(_.x-f.x)*b+(_.y-f.y)*N-y<0)}function ao(f,a,d,A,_,y,b){return!(ts(f,a,A,_,y,b)||ts(a,d,A,_,y,b)||ts(d,f,A,_,y,b)||ts(A,_,f,a,d,b)||ts(_,y,f,a,d,b)||ts(y,A,f,a,d,b))}function ia(f,a,d){const A=a.paint.get(f).value;return A.kind==="constant"?A.value:d.programConfigurations.get(a.id).getMaxValue(f)}function ro(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Oi(f,a,d,A,_){if(!a[0]&&!a[1])return f;const y=Ze.convert(a)._mult(_);d==="viewport"&&y._rotate(-A);const b=[];for(let N=0;N<f.length;N++)b.push(f[N].sub(y));return b}function Ts(f,a,d,A){const _=Ze.convert(f)._mult(A);return a==="viewport"&&_._rotate(-d),_}let Vs,Ia;je(Yn,"CircleBucket",{omit:["layers"]});var Ya,fs={exports:{}},Il=(Ya||(Ya=1,function(f,a){(function(d){function A(y,b,N){var z=_(256*y,256*(b=Math.pow(2,N)-b-1),N),G=_(256*(y+1),256*(b+1),N);return z[0]+","+z[1]+","+G[0]+","+G[1]}function _(y,b,N){var z=2*Math.PI*6378137/256/Math.pow(2,N);return[y*z-2*Math.PI*6378137/2,b*z-2*Math.PI*6378137/2]}d.getURL=function(y,b,N,z,G,T){return T=T||{},y+"?"+["bbox="+A(N,z,G),"format="+(T.format||"image/png"),"service="+(T.service||"WMS"),"version="+(T.version||"1.1.1"),"request="+(T.request||"GetMap"),"srs="+(T.srs||"EPSG:3857"),"width="+(T.width||256),"height="+(T.height||256),"layers="+b].join("&")},d.getTileBBox=A,d.getMercCoords=_,Object.defineProperty(d,"__esModule",{value:!0})})(a)}(0,fs.exports)),fs.exports);class Xl{constructor(a,d,A){this.z=a,this.x=d,this.y=A,this.key=cu(0,a,a,d,A)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,d){const A=Il.getTileBBox(this.x,this.y,this.z),_=function(y,b,N){let z,G="";for(let T=y;T>0;T--)z=1<<T-1,G+=(b&z?1:0)+(N&z?2:0);return G}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",A)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Nl{constructor(a,d){this.wrap=a,this.canonical=d,this.key=cu(a,d.z,d.z,d.x,d.y)}}class Io{constructor(a,d,A,_,y){this.overscaledZ=a,this.wrap=d,this.canonical=new Xl(A,+_,+y),this.key=d===0&&a===A?this.canonical.key:cu(d,a,A,_,y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const d=this.canonical.z-a;return a>this.canonical.z?new Io(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(a,this.wrap,a,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(a,d=!0){if(this.overscaledZ===a&&d)return this.key;if(a>this.canonical.z)return cu(this.wrap*+d,a,this.canonical.z,this.canonical.x,this.canonical.y);{const A=this.canonical.z-a;return cu(this.wrap*+d,a,a,this.canonical.x>>A,this.canonical.y>>A)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const d=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.z<this.canonical.z&&a.canonical.x===this.canonical.x>>d&&a.canonical.y===this.canonical.y>>d}children(a){if(this.overscaledZ>=a)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,A=2*this.canonical.x,_=2*this.canonical.y;return[new Io(d,this.wrap,d,A,_),new Io(d,this.wrap,d,A+1,_),new Io(d,this.wrap,d,A,_+1),new Io(d,this.wrap,d,A+1,_+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Io(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Nl(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function cu(f,a,d,A,_){const y=1<<Math.min(d,22);let b=y*(_%y)+A%y;return f&&d<22&&(b+=y*y*((f<0?-2*f-1:2*f)%(1<<2*(22-d)))),16*(32*b+d)+(a-d)}const uu=[f=>{let a=f.canonical.x-1,d=f.wrap;return a<0&&(a=(1<<f.canonical.z)-1,d--),new Io(f.overscaledZ,d,f.canonical.z,a,f.canonical.y)},f=>{let a=f.canonical.x+1,d=f.wrap;return a===1<<f.canonical.z&&(a=0,d++),new Io(f.overscaledZ,d,f.canonical.z,a,f.canonical.y)},f=>new Io(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,(f.canonical.y===0?1<<f.canonical.z:f.canonical.y)-1),f=>new Io(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y===(1<<f.canonical.z)-1?0:f.canonical.y+1)];je(Xl,"CanonicalTileID"),je(Io,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Fd=as([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:pd}=Fd,Fu=as([{name:"a_pos_3",components:3,type:"Int16"}]);var Pd=as([{name:"a_pos",type:"Int16",components:2}]);class pf{constructor(a,d){this.pos=a,this.dir=d}intersectsPlane(a,d,A){const _=De.vec3.dot(d,this.dir);if(Math.abs(_)<1e-6)return!1;const y=((a[0]-this.pos[0])*d[0]+(a[1]-this.pos[1])*d[1]+(a[2]-this.pos[2])*d[2])/_;return A[0]=this.pos[0]+this.dir[0]*y,A[1]=this.pos[1]+this.dir[1]*y,A[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(a,d,A){if(De.vec3.equals(this.pos,a)||d===0)return A[0]=A[1]=A[2]=0,!1;const[_,y,b]=this.dir,N=this.pos[0]-a[0],z=this.pos[1]-a[1],G=this.pos[2]-a[2],T=_*_+y*y+b*b,O=2*(N*_+z*y+G*b),H=O*O-4*T*(N*N+z*z+G*G-d*d);if(H<0){const U=Math.max(-O/2,0),Q=N+_*U,W=z+y*U,re=G+b*U,ue=Math.hypot(Q,W,re);return A[0]=Q*d/ue,A[1]=W*d/ue,A[2]=re*d/ue,!1}{const U=(-O-Math.sqrt(H))/(2*T);if(U<0){const Q=Math.hypot(N,z,G);return A[0]=N*d/Q,A[1]=z*d/Q,A[2]=G*d/Q,!1}return A[0]=N+_*U,A[1]=z+y*U,A[2]=G+b*U,!0}}}class ep{constructor(a,d,A,_,y){this.TL=a,this.TR=d,this.BR=A,this.BL=_,this.horizon=y}static fromInvProjectionMatrix(a,d,A){const _=[-1,1,1],y=[1,1,1],b=[1,-1,1],N=[-1,-1,1],z=De.vec3.transformMat4(_,_,a),G=De.vec3.transformMat4(y,y,a),T=De.vec3.transformMat4(b,b,a),O=De.vec3.transformMat4(N,N,a);return new ep(z,G,T,O,d/A)}}function Mh(f,a,d){let A=1/0,_=-1/0;const y=[];for(const b of f){De.vec3.sub(y,b,a);const N=De.vec3.dot(y,d);A=Math.min(A,N),_=Math.max(_,N)}return[A,_]}function LA(f,a){let d=!0;for(let A=0;A<f.planes.length;A++){const _=f.planes[A];let y=0;for(let b=0;b<a.length;b++)y+=De.vec3.dot(_,a[b])+_[3]>=0;if(y===0)return 0;y!==a.length&&(d=!1)}return d?2:1}function IA(f,a){for(const d of f.projections){const A=Mh(a,f.points[0],d.axis);if(d.projection[1]<A[0]||d.projection[0]>A[1])return 0}return 1}function U0(f,a){let d=0;const A=[0,0,0,0];for(let _=0;_<f.length;_++)A[0]=f[_][0],A[1]=f[_][1],A[2]=f[_][2],A[3]=1,De.vec4.dot(A,a)>=0&&d++;return d}class NA{constructor(a,d){this.points=a||new Array(8).fill([0,0,0]),this.planes=d||new Array(6).fill([0,0,0,0]),this.bounds=No.fromPoints(this.points),this.projections=[],this.frustumEdges=[De.vec3.sub([],this.points[2],this.points[3]),De.vec3.sub([],this.points[0],this.points[3]),De.vec3.sub([],this.points[4],this.points[0]),De.vec3.sub([],this.points[5],this.points[1]),De.vec3.sub([],this.points[6],this.points[2]),De.vec3.sub([],this.points[7],this.points[3])];for(const A of this.frustumEdges){const _=[0,-A[2],A[1]],y=[A[2],0,-A[0]];this.projections.push({axis:_,projection:Mh(this.points,this.points[0],_)}),this.projections.push({axis:y,projection:Mh(this.points,this.points[0],y)})}}static fromInvProjectionMatrix(a,d,A,_){const y=Math.pow(2,A),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(G=>{const T=De.vec4.transformMat4([],G,a),O=1/T[3]/d*y;return De.vec4.mul(T,T,[O,O,_?1/T[3]:O,O])}),N=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(G=>{const T=De.vec3.sub([],b[G[0]],b[G[1]]),O=De.vec3.sub([],b[G[2]],b[G[1]]),H=De.vec3.normalize([],De.vec3.cross([],T,O)),U=-De.vec3.dot(H,b[G[1]]);return H.concat(U)}),z=[];for(let G=0;G<b.length;G++)z.push([b[G][0],b[G][1],b[G][2]]);return new NA(z,N)}intersectsPrecise(a,d,A){for(let _=0;_<d.length;_++)if(!U0(a,d[_]))return 0;for(let _=0;_<this.planes.length;_++)if(!U0(a,this.planes[_]))return 0;for(const _ of A)for(const y of this.frustumEdges){const b=De.vec3.cross([],_,y),N=De.vec3.length(b);if(N===0)continue;De.vec3.scale(b,b,1/N);const z=Mh(this.points,this.points[0],b),G=Mh(a,this.points[0],b);if(z[0]>G[1]||G[0]>z[1])return 0}return 1}containsPoint(a){for(const d of this.planes){const A=d[3];if(De.vec3.dot([d[0],d[1],d[2]],a)+A<0)return!1}return!0}}class No{static fromPoints(a){const d=[1/0,1/0,1/0],A=[-1/0,-1/0,-1/0];for(const _ of a)De.vec3.min(d,d,_),De.vec3.max(A,A,_);return new No(d,A)}static fromTileIdAndHeight(a,d,A){const _=1<<a.canonical.z,y=a.canonical.x,b=a.canonical.y;return new No([y/_,b/_,d],[(y+1)/_,(b+1)/_,A])}static applyTransform(a,d){const A=a.getCorners();for(let _=0;_<A.length;++_)De.vec3.transformMat4(A[_],A[_],d);return No.fromPoints(A)}static applyTransformFast(a,d){const A=[d[12],d[13],d[14]],_=[...A];for(let y=0;y<3;y++)for(let b=0;b<3;b++){const N=d[4*b+y],z=N*a.min[b],G=N*a.max[b];A[y]+=Math.min(z,G),_[y]+=Math.max(z,G)}return new No(A,_)}static projectAabbCorners(a,d){const A=a.getCorners();for(let _=0;_<A.length;++_)De.vec3.transformMat4(A[_],A[_],d);return A}constructor(a,d){this.min=a,this.max=d,this.center=De.vec3.scale([],De.vec3.add([],this.min,this.max),.5)}quadrant(a){const d=[a%2==0,a<2],A=De.vec3.clone(this.min),_=De.vec3.clone(this.max);for(let y=0;y<d.length;y++)A[y]=d[y]?this.min[y]:this.center[y],_[y]=d[y]?this.center[y]:this.max[y];return _[2]=this.max[2],new No(A,_)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,d=this.max;return[[a[0],a[1],a[2]],[d[0],a[1],a[2]],[d[0],d[1],a[2]],[a[0],d[1],a[2]],[a[0],a[1],d[2]],[d[0],a[1],d[2]],[d[0],d[1],d[2]],[a[0],d[1],d[2]]]}intersects(a){return this.intersectsAabb(a.bounds)?LA(a,this.getCorners()):0}intersectsFlat(a){return this.intersectsAabb(a.bounds)?LA(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(a,d){return d||this.intersects(a)?IA(a,this.getCorners()):0}intersectsPreciseFlat(a,d){return d||this.intersectsFlat(a)?IA(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(a){for(let d=0;d<3;++d)if(this.min[d]>a.max[d]||a.min[d]>this.max[d])return!1;return!0}intersectsAabbXY(a){return!(this.min[0]>a.max[0]||a.min[0]>this.max[0]||this.min[1]>a.max[1]||a.min[1]>this.max[1])}encapsulate(a){for(let d=0;d<3;d++)this.min[d]=Math.min(this.min[d],a.min[d]),this.max[d]=Math.max(this.max[d],a.max[d])}encapsulatePoint(a){for(let d=0;d<3;d++)this.min[d]=Math.min(this.min[d],a[d]),this.max[d]=Math.max(this.max[d],a[d])}closestPoint(a){return[Math.max(Math.min(this.max[0],a[0]),this.min[0]),Math.max(Math.min(this.max[1],a[1]),this.min[1]),Math.max(Math.min(this.max[2],a[2]),this.min[2])]}}function Rp(f){return f*l/xe}je(No,"Aabb");const TS=[new No([q,q,q],[X,X,X]),new No([q,q,q],[0,0,X]),new No([0,q,q],[X,0,X]),new No([q,0,q],[0,X,X]),new No([0,0,q],[X,X,X])];function Ob(f,a,d,A=!0){const _=De.vec3.scale([],f._camera.position,f.worldSize),y=[a,d,1,1];De.vec4.transformMat4(y,y,f.pixelMatrixInverse),De.vec4.scale(y,y,1/y[3]);const b=De.vec3.sub([],y,_),N=De.vec3.normalize([],b),z=f.globeMatrix,G=[z[12],z[13],z[14]],T=De.vec3.sub([],G,_),O=De.vec3.length(T),H=De.vec3.normalize([],T),U=f.worldSize/(2*Math.PI),Q=De.vec3.dot(H,N),W=Math.asin(U/O);if(W<Math.acos(Q)){if(!A)return null;const Et=[],yt=[];De.vec3.scale(Et,N,O/Q),De.vec3.normalize(yt,De.vec3.sub(yt,Et,T)),De.vec3.normalize(N,De.vec3.add(N,T,De.vec3.scale(N,yt,Math.tan(W)*O)))}const re=[];new pf(_,N).closestPointOnSphere(G,U,re);const ue=De.vec3.normalize([],ri(z,0)),Be=De.vec3.normalize([],ri(z,1)),Te=De.vec3.normalize([],ri(z,2)),he=De.vec3.dot(ue,re),ke=De.vec3.dot(Be,re),Ve=De.vec3.dot(Te,re),rt=Kt(Math.asin(-ke/U));let dt=Kt(Math.atan2(he,Ve));dt=f.center.lng+function(Et,yt){const Nt=(yt-Et+180)%360-180;return Nt<-180?Nt+360:Nt}(f.center.lng,dt);const ft=ht(dt),at=Ir(gt(rt),0,1);return new sr(ft,at)}class KX{constructor(a,d,A){this.a=De.vec3.sub([],a,A),this.b=De.vec3.sub([],d,A),this.center=A;const _=De.vec3.normalize([],this.a),y=De.vec3.normalize([],this.b);this.angle=Math.acos(De.vec3.dot(_,y))}}function LS(f,a){if(f.angle===0)return null;let d;return d=f.a[a]===0?1/f.angle*.5*Math.PI:1/f.angle*Math.atan(f.b[a]/f.a[a]/Math.sin(f.angle)-1/Math.tan(f.angle)),d<0||d>1?null:function(A,_,y,b){const N=Math.sin(y);return A*(Math.sin((1-b)*y)/N)+_*(Math.sin(b*y)/N)}(f.a[a],f.b[a],f.angle,Ir(d,0,1))+f.center[a]}function tp(f){if(f.z<=1)return TS[f.z+2*f.y+f.x];const a=IS(Rb(f));return No.fromPoints(a)}function Up(f,a,d){return De.vec3.scale(f,f,1-d),De.vec3.scaleAndAdd(f,f,a,d)}function ZF(f,a,d){for(const A of f)De.vec3.transformMat4(A,A,a),De.vec3.scale(A,A,d)}function JF(f,a,d,A){const _=a/f.worldSize,y=f.globeMatrix;if(d.z<=1){const ft=tp(d).getCorners();return ZF(ft,y,_),No.fromPoints(ft)}const b=Rb(d,A),N=IS(b,l+Rp(f._tileCoverLift));ZF(N,y,_);const z=Number.MAX_VALUE,G=[-z,-z,-z],T=[z,z,z];if(b.contains(f.center)){for(const Et of N)De.vec3.min(T,T,Et),De.vec3.max(G,G,Et);G[2]=0;const ft=f.point,at=[ft.x*_,ft.y*_,0];return De.vec3.min(T,T,at),De.vec3.max(G,G,at),new No(T,G)}if(f._tileCoverLift>0){for(const ft of N)De.vec3.min(T,T,ft),De.vec3.max(G,G,ft);return new No(T,G)}const O=[y[12]*_,y[13]*_,y[14]*_],H=b.getCenter(),U=Ir(f.center.lat,-Tt,Tt),Q=Ir(H.lat,-Tt,Tt),W=ht(f.center.lng),re=gt(U);let ue=W-ht(H.lng);const Be=re-gt(Q);ue>.5?ue-=1:ue<-.5&&(ue+=1);let Te=0;if(Math.abs(ue)>Math.abs(Be))Te=ue>=0?1:3;else{Te=Be>=0?0:2;const ft=[y[4]*_,y[5]*_,y[6]*_],at=-Math.sin(vt(Be>=0?b.getSouth():b.getNorth()))*l;De.vec3.scaleAndAdd(O,O,ft,at)}const he=N[Te],ke=N[(Te+1)%4],Ve=new KX(he,ke,O),rt=[LS(Ve,0)||he[0],LS(Ve,1)||he[1],LS(Ve,2)||he[2]],dt=FA(f.zoom);if(dt>0){const ft=function({x:Et,y:yt,z:Nt},zt,Gt,$t,Zt){const vr=1/(1<<Nt);let tr=Et*vr,Br=tr+vr,Ur=yt*vr,br=Ur+vr,Cn=0;const hn=(tr+Br)/2-$t;return hn>.5?Cn=-1:hn<-.5&&(Cn=1),tr=((tr+Cn)*zt-($t*=zt))*Gt+$t,Br=((Br+Cn)*zt-$t)*Gt+$t,Ur=(Ur*zt-(Zt*=zt))*Gt+Zt,br=(br*zt-Zt)*Gt+Zt,[[tr,br,0],[Br,br,0],[Br,Ur,0],[tr,Ur,0]]}(d,a,f._pixelsPerMercatorPixel,W,re);for(let Et=0;Et<N.length;Et++)Up(N[Et],ft[Et],dt);const at=De.vec3.add([],ft[Te],ft[(Te+1)%4]);De.vec3.scale(at,at,.5),Up(rt,at,dt)}for(const ft of N)De.vec3.min(T,T,ft),De.vec3.max(G,G,ft);return T[2]=Math.min(he[2],ke[2]),De.vec3.min(T,T,rt),De.vec3.max(G,G,rt),new No(T,G)}function Rb({x:f,y:a,z:d},A=!1){const _=1/(1<<d),y=new Ee(wt(f*_),a===(1<<d)-1&&A?-90:_t((a+1)*_)),b=new Ee(wt((f+1)*_),a===0&&A?90:_t(a*_));return new Ge(y,b)}function IS(f,a=l){const d=vt(f.getNorth()),A=vt(f.getSouth()),_=Math.cos(d),y=Math.cos(A),b=Math.sin(d),N=Math.sin(A),z=f.getWest(),G=f.getEast();return[ne(y,N,z,a),ne(y,N,G,a),ne(_,b,G,a),ne(_,b,z,a)]}function X1(f,a,d,A){const _=1<<d.z,y=(f/Yr+d.x)/_;return ae(_t((a/Yr+d.y)/_),wt(y),A)}function Ub({min:f,max:a}){return E/Math.max(a[0]-f[0],a[1]-f[1],a[2]-f[2])}const eP=new Float64Array(16);function zb(f){const a=Ub(f),d=De.mat4.fromScaling(eP,[a,a,a]);return De.mat4.translate(d,d,De.vec3.negate([],f.min))}function NS(f){const a=De.mat4.fromTranslation(eP,f.min),d=1/Ub(f);return De.mat4.scale(a,a,[d,d,d])}function FS(f){const a=Yr/(2*Math.PI);return f/(2*Math.PI)/a}function tP(f,a){return Yr/(512*Math.pow(2,f))*Ub(tp(a))}function rP(f,a,d,A,_){const y=FS(d),b=[f,a,-d/(2*Math.PI)],N=De.mat4.identity(new Float64Array(16));return De.mat4.translate(N,N,b),De.mat4.scale(N,N,[y,y,y]),De.mat4.rotateX(N,N,vt(-_)),De.mat4.rotateY(N,N,vt(-A)),N}function FA(f){return cn(h,x,f)}function nP(f,a){const d=ae(a.lat,a.lng),A=function(y){const b=ae(y._center.lat,y._center.lng),N=De.vec3.fromValues(0,1,0);let z=De.vec3.cross([],N,b);const G=De.mat4.fromRotation([],-y.angle,b);z=De.vec3.transformMat4(z,z,G),De.mat4.fromRotation(G,-y._pitch,z);const T=De.vec3.normalize([],b);return De.vec3.scale(T,T,Rp(y.cameraToCenterDistance/y.pixelsPerMeter)),De.vec3.transformMat4(T,T,G),De.vec3.add([],b,T)}(f),_=De.vec3.subtract([],A,d);return De.vec3.angle(_,d)}function PS(f,a){return nP(f,a)>Math.PI/2*1.01}const iP=vt(85),XX=Math.cos(iP),YX=Math.sin(iP),ZX=De.mat4.create(),sP=f=>{const a=[];return f.paint.get("circle-pitch-alignment")==="map"&&a.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&a.push("SCALE_WITH_MAP"),a};function oP(f,a,d,A,_,y,b,N,z){if(y&&f.queryGeometry.isAboveHorizon)return!1;y&&(z*=f.pixelToTileUnitsFactor);const G=f.tileID.canonical,T=d.projection.upVectorScale(G,d.center.lat,d.worldSize).metersToTile;for(const O of a)for(const H of O){const U=H.add(N),Q=_&&d.elevation?d.elevation.exaggeration()*_.getElevationAt(U.x,U.y,!0):0,W=d.projection.projectTilePoint(U.x,U.y,G);if(Q>0){const Te=d.projection.upVector(G,U.x,U.y);W.x+=Te[0]*T*Q,W.y+=Te[1]*T*Q,W.z+=Te[2]*T*Q}const re=y?U:JX(W.x,W.y,W.z,A),ue=y?f.tilespaceRays.map(Te=>tY(Te,Q)):f.queryGeometry.screenGeometry,Be=De.vec4.transformMat4([],[W.x,W.y,W.z,1],A);if(!b&&y?z*=Be[3]/d.cameraToCenterDistance:b&&!y&&(z*=d.cameraToCenterDistance/Be[3]),y){const Te=_t((H.y/Yr+G.y)/(1<<G.z));z/=d.projection.pixelsPerMeter(Te,1)/ut(1,Te)}if(Nn(ue,re,z))return!0}return!1}function JX(f,a,d,A){const _=De.vec4.transformMat4([],[f,a,d,1],A);return new Ze(_[0]/_[3],_[1]/_[3])}const aP=De.vec3.fromValues(0,0,0),eY=De.vec3.fromValues(0,0,1);function tY(f,a){const d=De.vec3.create();return aP[2]=a,f.intersectsPlane(aP,eY,d),new Ze(d[0],d[1])}class lP extends Yn{}let cP,uP,dP,hP;function fP(f,{width:a,height:d},A,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==a*d*A)throw new RangeError("mismatched image size")}else _=new Uint8Array(a*d*A);return f.width=a,f.height=d,f.data=_,f}function pP(f,a,d){const{width:A,height:_}=a;A===f.width&&_===f.height||(jS(f,a,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,A),height:Math.min(f.height,_)},d,null),f.width=A,f.height=_,f.data=a.data)}function jS(f,a,d,A,_,y,b,N){if(_.width===0||_.height===0)return a;if(_.width>f.width||_.height>f.height||d.x>f.width-_.width||d.y>f.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>a.width||_.height>a.height||A.x>a.width-_.width||A.y>a.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const z=f.data,G=a.data,T=y===4&&N;for(let O=0;O<_.height;O++){const H=((d.y+O)*f.width+d.x)*y,U=((A.y+O)*a.width+A.x)*y;if(T)for(let Q=0;Q<_.width;Q++){const W=H+Q*y+3,re=U+Q*y;G[re+0]=255,G[re+1]=255,G[re+2]=255,G[re+3]=z[W]}else if(b)for(let Q=0;Q<_.width;Q++){const W=H+Q*y,re=U+Q*y,ue=z[W+3],Be=new si(z[W+0]/255*ue,z[W+1]/255*ue,z[W+2]/255*ue,ue).toRenderColor(b).toArray();G[re+0]=Be[0],G[re+1]=Be[1],G[re+2]=Be[2],G[re+3]=Be[3]}else for(let Q=0;Q<_.width*y;Q++)G[U+Q]=z[H+Q]}return a}je(lP,"HeatmapBucket",{omit:["layers"]});class PA{constructor(a,d){fP(this,a,1,d)}resize(a){pP(this,new PA(a),1)}clone(){return new PA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,A,_,y){jS(a,d,A,_,y,1,null)}}class du{constructor(a,d){fP(this,a,4,d)}resize(a){pP(this,new du(a),4)}replace(a,d){d?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new du({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,A,_,y,b,N){jS(a,d,A,_,y,4,b,N)}}class AP{constructor(a,d){this.width=a.width,this.height=a.height,this.data=d instanceof Uint8Array?new Float32Array(d.buffer):d}}function Y1(f){const a={},d=f.resolution||256,A=f.clips?f.clips.length:1,_=f.image||new du({width:d,height:A}),y=(b,N,z)=>{a[f.evaluationKey]=z;const G=f.expression.evaluate(a);G&&(_.data[b+N+0]=Math.floor(255*G.r/G.a),_.data[b+N+1]=Math.floor(255*G.g/G.a),_.data[b+N+2]=Math.floor(255*G.b/G.a),_.data[b+N+3]=Math.floor(255*G.a))};if(f.clips)for(let b=0,N=0;b<A;++b,N+=4*d)for(let z=0,G=0;z<d;z++,G+=4){const T=z/(d-1),{start:O,end:H}=f.clips[b];y(N,G,O*(1-T)+H*T)}else for(let b=0,N=0;b<d;b++,N+=4)y(0,N,b/(d-1));return _}je(PA,"AlphaImage"),je(du,"RGBAImage");const rY=as([{name:"a_pos",components:2,type:"Int16"}],4),{members:nY}=rY;function Z1(f,a,d=2){const A=a&&a.length,_=A?a[0]*d:f.length;let y=mP(f,0,_,d,!0);const b=[];if(!y||y.next===y.prev)return b;let N,z,G;if(A&&(y=function(T,O,H,U){const Q=[];for(let W=0,re=O.length;W<re;W++){const ue=mP(T,O[W]*U,W<re-1?O[W+1]*U:T.length,U,!1);ue===ue.next&&(ue.steiner=!0),Q.push(dY(ue))}Q.sort(lY);for(let W=0;W<Q.length;W++)H=cY(Q[W],H);return H}(f,a,y,d)),f.length>80*d){N=1/0,z=1/0;let T=-1/0,O=-1/0;for(let H=d;H<_;H+=d){const U=f[H],Q=f[H+1];U<N&&(N=U),Q<z&&(z=Q),U>T&&(T=U),Q>O&&(O=Q)}G=Math.max(T-N,O-z),G=G!==0?32767/G:0}return J1(y,b,d,N,z,G,0),b}function mP(f,a,d,A,_){let y;if(_===function(b,N,z,G){let T=0;for(let O=N,H=z-G;O<z;O+=G)T+=(b[H]-b[O])*(b[O+1]+b[H+1]),H=O;return T}(f,a,d,A)>0)for(let b=a;b<d;b+=A)y=vP(b/A|0,f[b],f[b+1],y);else for(let b=d-A;b>=a;b-=A)y=vP(b/A|0,f[b],f[b+1],y);return y&&Qb(y,y.next)&&(tv(y),y=y.next),y}function pg(f,a){if(!f)return f;a||(a=f);let d,A=f;do if(d=!1,A.steiner||!Qb(A,A.next)&&Fl(A.prev,A,A.next)!==0)A=A.next;else{if(tv(A),A=a=A.prev,A===A.next)break;d=!0}while(d||A!==a);return a}function J1(f,a,d,A,_,y,b){if(!f)return;!b&&y&&function(z,G,T,O){let H=z;do H.z===0&&(H.z=MS(H.x,H.y,G,T,O)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==z);H.prevZ.nextZ=null,H.prevZ=null,function(U){let Q,W=1;do{let re,ue=U;U=null;let Be=null;for(Q=0;ue;){Q++;let Te=ue,he=0;for(let Ve=0;Ve<W&&(he++,Te=Te.nextZ,Te);Ve++);let ke=W;for(;he>0||ke>0&&Te;)he!==0&&(ke===0||!Te||ue.z<=Te.z)?(re=ue,ue=ue.nextZ,he--):(re=Te,Te=Te.nextZ,ke--),Be?Be.nextZ=re:U=re,re.prevZ=Be,Be=re;ue=Te}Be.nextZ=null,W*=2}while(Q>1)}(H)}(f,A,_,y);let N=f;for(;f.prev!==f.next;){const z=f.prev,G=f.next;if(y?sY(f,A,_,y):iY(f))a.push(z.i,f.i,G.i),tv(f),f=G.next,N=G.next;else if((f=G)===N){b?b===1?J1(f=oY(pg(f),a),a,d,A,_,y,2):b===2&&aY(f,a,d,A,_,y):J1(pg(f),a,d,A,_,y,1);break}}}function iY(f){const a=f.prev,d=f,A=f.next;if(Fl(a,d,A)>=0)return!1;const _=a.x,y=d.x,b=A.x,N=a.y,z=d.y,G=A.y,T=_<y?_<b?_:b:y<b?y:b,O=N<z?N<G?N:G:z<G?z:G,H=_>y?_>b?_:b:y>b?y:b,U=N>z?N>G?N:G:z>G?z:G;let Q=A.next;for(;Q!==a;){if(Q.x>=T&&Q.x<=H&&Q.y>=O&&Q.y<=U&&z0(_,N,y,z,b,G,Q.x,Q.y)&&Fl(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function sY(f,a,d,A){const _=f.prev,y=f,b=f.next;if(Fl(_,y,b)>=0)return!1;const N=_.x,z=y.x,G=b.x,T=_.y,O=y.y,H=b.y,U=N<z?N<G?N:G:z<G?z:G,Q=T<O?T<H?T:H:O<H?O:H,W=N>z?N>G?N:G:z>G?z:G,re=T>O?T>H?T:H:O>H?O:H,ue=MS(U,Q,a,d,A),Be=MS(W,re,a,d,A);let Te=f.prevZ,he=f.nextZ;for(;Te&&Te.z>=ue&&he&&he.z<=Be;){if(Te.x>=U&&Te.x<=W&&Te.y>=Q&&Te.y<=re&&Te!==_&&Te!==b&&z0(N,T,z,O,G,H,Te.x,Te.y)&&Fl(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,he.x>=U&&he.x<=W&&he.y>=Q&&he.y<=re&&he!==_&&he!==b&&z0(N,T,z,O,G,H,he.x,he.y)&&Fl(he.prev,he,he.next)>=0))return!1;he=he.nextZ}for(;Te&&Te.z>=ue;){if(Te.x>=U&&Te.x<=W&&Te.y>=Q&&Te.y<=re&&Te!==_&&Te!==b&&z0(N,T,z,O,G,H,Te.x,Te.y)&&Fl(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;he&&he.z<=Be;){if(he.x>=U&&he.x<=W&&he.y>=Q&&he.y<=re&&he!==_&&he!==b&&z0(N,T,z,O,G,H,he.x,he.y)&&Fl(he.prev,he,he.next)>=0)return!1;he=he.nextZ}return!0}function oY(f,a){let d=f;do{const A=d.prev,_=d.next.next;!Qb(A,_)&&gP(A,d,d.next,_)&&ev(A,_)&&ev(_,A)&&(a.push(A.i,d.i,_.i),tv(d),tv(d.next),d=f=_),d=d.next}while(d!==f);return pg(d)}function aY(f,a,d,A,_,y){let b=f;do{let N=b.next.next;for(;N!==b.prev;){if(b.i!==N.i&&hY(b,N)){let z=yP(b,N);return b=pg(b,b.next),z=pg(z,z.next),J1(b,a,d,A,_,y,0),void J1(z,a,d,A,_,y,0)}N=N.next}b=b.next}while(b!==f)}function lY(f,a){return f.x-a.x}function cY(f,a){const d=function(_,y){let b=y;const N=_.x,z=_.y;let G,T=-1/0;do{if(z<=b.y&&z>=b.next.y&&b.next.y!==b.y){const W=b.x+(z-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(W<=N&&W>T&&(T=W,G=b.x<b.next.x?b:b.next,W===N))return G}b=b.next}while(b!==y);if(!G)return null;const O=G,H=G.x,U=G.y;let Q=1/0;b=G;do{if(N>=b.x&&b.x>=H&&N!==b.x&&z0(z<U?N:T,z,H,U,z<U?T:N,z,b.x,b.y)){const W=Math.abs(z-b.y)/(N-b.x);ev(b,_)&&(W<Q||W===Q&&(b.x>G.x||b.x===G.x&&uY(G,b)))&&(G=b,Q=W)}b=b.next}while(b!==O);return G}(f,a);if(!d)return a;const A=yP(d,f);return pg(A,A.next),pg(d,d.next)}function uY(f,a){return Fl(f.prev,f,a.prev)<0&&Fl(a.next,f,f.next)<0}function MS(f,a,d,A,_){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-d)*_|0)|f<<8))|f<<4))|f<<2))|f<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-A)*_|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function dY(f){let a=f,d=f;do(a.x<d.x||a.x===d.x&&a.y<d.y)&&(d=a),a=a.next;while(a!==f);return d}function z0(f,a,d,A,_,y,b,N){return(_-b)*(a-N)>=(f-b)*(y-N)&&(f-b)*(A-N)>=(d-b)*(a-N)&&(d-b)*(y-N)>=(_-b)*(A-N)}function hY(f,a){return f.next.i!==a.i&&f.prev.i!==a.i&&!function(d,A){let _=d;do{if(_.i!==d.i&&_.next.i!==d.i&&_.i!==A.i&&_.next.i!==A.i&&gP(_,_.next,d,A))return!0;_=_.next}while(_!==d);return!1}(f,a)&&(ev(f,a)&&ev(a,f)&&function(d,A){let _=d,y=!1;const b=(d.x+A.x)/2,N=(d.y+A.y)/2;do _.y>N!=_.next.y>N&&_.next.y!==_.y&&b<(_.next.x-_.x)*(N-_.y)/(_.next.y-_.y)+_.x&&(y=!y),_=_.next;while(_!==d);return y}(f,a)&&(Fl(f.prev,f,a.prev)||Fl(f,a.prev,a))||Qb(f,a)&&Fl(f.prev,f,f.next)>0&&Fl(a.prev,a,a.next)>0)}function Fl(f,a,d){return(a.y-f.y)*(d.x-a.x)-(a.x-f.x)*(d.y-a.y)}function Qb(f,a){return f.x===a.x&&f.y===a.y}function gP(f,a,d,A){const _=Vb(Fl(f,a,d)),y=Vb(Fl(f,a,A)),b=Vb(Fl(d,A,f)),N=Vb(Fl(d,A,a));return _!==y&&b!==N||!(_!==0||!Hb(f,d,a))||!(y!==0||!Hb(f,A,a))||!(b!==0||!Hb(d,f,A))||!(N!==0||!Hb(d,a,A))}function Hb(f,a,d){return a.x<=Math.max(f.x,d.x)&&a.x>=Math.min(f.x,d.x)&&a.y<=Math.max(f.y,d.y)&&a.y>=Math.min(f.y,d.y)}function Vb(f){return f>0?1:f<0?-1:0}function ev(f,a){return Fl(f.prev,f,f.next)<0?Fl(f,a,f.next)>=0&&Fl(f,f.prev,a)>=0:Fl(f,a,f.prev)<0||Fl(f,f.next,a)<0}function yP(f,a){const d=kS(f.i,f.x,f.y),A=kS(a.i,a.x,a.y),_=f.next,y=a.prev;return f.next=a,a.prev=f,d.next=_,_.prev=d,A.next=d,d.prev=A,y.next=A,A.prev=y,A}function vP(f,a,d,A){const _=kS(f,a,d);return A?(_.next=A.next,_.prev=A,A.next.prev=_,A.next=_):(_.prev=_,_.next=_),_}function tv(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function kS(f,a,d){return{i:f,x:a,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Gb(f,a){const d=f.length;if(d<=1)return[f];const A=[];let _,y;for(let b=0;b<d;b++){const N=Gi(f[b]);N!==0&&(f[b].area=Math.abs(N),y===void 0&&(y=N<0),y===N<0?(_&&A.push(_),_=[f[b]]):_.push(f[b]))}if(_&&A.push(_),a>1)for(let b=0;b<A.length;b++)A[b].length<=a||($l(A[b],a,1,A[b].length-1,fY),A[b]=A[b].slice(0,a));return A}function fY(f,a){return a.area-f.area}function DS(f,a,d){const A=d.patternDependencies;let _=!1;for(const y of a){const b=y.paint.get(`${f}-pattern`);b.isConstant()||(_=!0);const N=b.constantOr(null);N&&(_=!0,A[N]=!0)}return _}function OS(f,a,d,A,_){const y=_.patternDependencies;for(const b of a){const N=b.paint.get(`${f}-pattern`).value;if(N.kind!=="constant"){let z=N.evaluate({zoom:A},d,{},_.availableImages);z=z&&z.name?z.name:z,y[z]=!0,d.patterns[b.id]=z}}return d}class RS{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.fqid),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bc,this.indexArray=new Ka,this.indexArray2=new Iu,this.programConfigurations=new Jf(a.layers,{zoom:a.zoom,lut:a.lut}),this.segments=new La,this.segments2=new La,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id),this.projection=a.projection}updateFootprints(a,d){}populate(a,d,A,_){this.hasPattern=DS("fill",this.layers,d);const y=this.layers[0].layout.get("fill-sort-key"),b=[];for(const{feature:N,id:z,index:G,sourceLayerIndex:T}of a){const O=this.layers[0]._featureFilter.needGeometry,H=nn(N,O);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom),H,A))continue;const U=y?y.evaluate(H,{},A,d.availableImages):void 0,Q={id:z,properties:N.properties,type:N.type,sourceLayerIndex:T,index:G,geometry:O?H.geometry:en(N,A,_),patterns:{},sortKey:U};b.push(Q)}y&&b.sort((N,z)=>N.sortKey-z.sortKey);for(const N of b){const{geometry:z,index:G,sourceLayerIndex:T}=N;if(this.hasPattern){const O=OS("fill",this.layers,N,this.zoom,d);this.patternFeatures.push(O)}else this.addFeature(N,z,G,A,{},d.availableImages,d.brightness);d.featureIndex.insert(a[G].feature,z,G,T,this.index)}}update(a,d,A,_,y){const b=Object.keys(a).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,d,b?this.stateDependentLayers:this.layers,A,_,y)}addFeatures(a,d,A,_,y,b){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,d,A,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,nY),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,d,A,_,y,b=[],N){for(const z of Gb(d,500)){let G=0;for(const W of z)G+=W.length;const T=this.segments.prepareSegment(G,this.layoutVertexArray,this.indexArray),O=T.vertexLength,H=[],U=[];for(const W of z){if(W.length===0)continue;W!==z[0]&&U.push(H.length/2);const re=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),ue=re.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(ue+W.length-1,ue),H.push(W[0].x),H.push(W[0].y);for(let Be=1;Be<W.length;Be++)this.layoutVertexArray.emplaceBack(W[Be].x,W[Be].y),this.indexArray2.emplaceBack(ue+Be-1,ue+Be),H.push(W[Be].x),H.push(W[Be].y);re.vertexLength+=W.length,re.primitiveLength+=W.length}const Q=Z1(H,U);for(let W=0;W<Q.length;W+=3)this.indexArray.emplaceBack(O+Q[W],O+Q[W+1],O+Q[W+2]);T.vertexLength+=G,T.primitiveLength+=Q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,A,y,b,_,N)}}let xP,_P,bP,wP;je(RS,"FillBucket",{omit:["layers","patternFeatures"]});class US{constructor(a,d,A,_){if(this.triangleCount=d.length/3,this.min=new Ze(0,0),this.max=new Ze(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||a.length===0)return;const[y,b]=[a[0].clone(),a[0].clone()];for(let O=1;O<a.length;++O){const H=a[O];y.x=Math.min(y.x,H.x),y.y=Math.min(y.y,H.y),b.x=Math.max(b.x,H.x),b.y=Math.max(b.y,H.y)}if(_){const O=Math.ceil(Math.max(b.x-y.x,b.y-y.y)/_);A=Math.max(A,O)}if(A===0)return;this.min=y,this.max=b;const N=this.max.sub(this.min);N.x=Math.max(N.x,1),N.y=Math.max(N.y,1);const z=Math.max(N.x,N.y)/A;this.cellsX=Math.max(1,Math.ceil(N.x/z)),this.cellsY=Math.max(1,Math.ceil(N.y/z)),this.xScale=1/z,this.yScale=1/z;const G=[];for(let O=0;O<this.triangleCount;O++){const H=a[d[3*O+0]].sub(this.min),U=a[d[3*O+1]].sub(this.min),Q=a[d[3*O+2]].sub(this.min),W=rp(Math.floor(Math.min(H.x,U.x,Q.x)),this.xScale,this.cellsX),re=rp(Math.floor(Math.max(H.x,U.x,Q.x)),this.xScale,this.cellsX),ue=rp(Math.floor(Math.min(H.y,U.y,Q.y)),this.yScale,this.cellsY),Be=rp(Math.floor(Math.max(H.y,U.y,Q.y)),this.yScale,this.cellsY),Te=new Ze(0,0),he=new Ze(0,0),ke=new Ze(0,0),Ve=new Ze(0,0);for(let rt=ue;rt<=Be;++rt){Te.y=he.y=rt*z,ke.y=Ve.y=(rt+1)*z;for(let dt=W;dt<=re;++dt)Te.x=ke.x=dt*z,he.x=Ve.x=(dt+1)*z,(ao(H,U,Q,Te,he,Ve)||ao(H,U,Q,Te,Ve,ke))&&G.push({cellIdx:rt*this.cellsX+dt,triIdx:O})}}if(G.length===0)return;G.sort((O,H)=>O.cellIdx-H.cellIdx||O.triIdx-H.triIdx);let T=0;for(;T<G.length;){const O=G[T].cellIdx,H={start:this.payload.length,len:0};for(;T<G.length&&G[T].cellIdx===O;)++H.len,this.payload.push(G[T++].triIdx);this.cells[O]=H}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(a,d){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>a.x||a.y>this.max.y||this.min.y>a.y)return;const A=rp(a.x-this.min.x,this.xScale,this.cellsX),_=rp(a.y-this.min.y,this.yScale,this.cellsY),y=this.cells[_*this.cellsX+A];if(y){this._lazyInitLookup();for(let b=0;b<y.len;b++){const N=this.payload[y.start+b],z=Math.floor(N/8),G=1<<N%8;if(!(this.lookup[z]&G)&&(this.lookup[z]|=G,d.push(N),d.length===this.triangleCount))return}}}query(a,d,A){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>d.x||a.y>this.max.y||this.min.y>d.y)return;this._lazyInitLookup();const _=rp(a.x-this.min.x,this.xScale,this.cellsX),y=rp(d.x-this.min.x,this.xScale,this.cellsX),b=rp(a.y-this.min.y,this.yScale,this.cellsY),N=rp(d.y-this.min.y,this.yScale,this.cellsY);for(let z=b;z<=N;z++)for(let G=_;G<=y;G++){const T=this.cells[z*this.cellsX+G];if(T)for(let O=0;O<T.len;O++){const H=this.payload[T.start+O],U=Math.floor(H/8),Q=1<<H%8;if(!(this.lookup[U]&Q)&&(this.lookup[U]|=Q,A.push(H),A.length===this.triangleCount))return}}}}function rp(f,a,d){return Math.max(0,Math.min(d-1,Math.floor(f*a)))}je(US,"TriangleGridIndex");class CP{constructor(a){this.zoom=a.zoom,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.fqid),this.index=a.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id),this.footprints=[]}updateFootprints(a,d){for(const A of this.footprints)d.push({footprint:A,id:a})}populate(a,d,A,_){const y=[];for(const{feature:b,id:N,index:z,sourceLayerIndex:G}of a){const T=this.layers[0]._featureFilter.needGeometry,O=nn(b,T);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom),O,A))continue;const H={id:N,properties:b.properties,type:b.type,sourceLayerIndex:G,index:z,geometry:T?O.geometry:en(b,A,_),patterns:{}};y.push(H)}for(const b of y){const{geometry:N,index:z,sourceLayerIndex:G}=b;this.addFeature(b,N,z,A,{},d.availableImages,d.brightness),d.featureIndex.insert(a[z].feature,N,z,G,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(a){}update(a,d,A,_,y){}destroy(){}addFeature(a,d,A,_,y,b=[],N){for(const z of Gb(d,2)){const G=[],T=[],O=[],H=new Ze(1/0,1/0),U=new Ze(-1/0,-1/0);for(const re of z)if(re.length!==0){re!==z[0]&&O.push(T.length/2);for(let ue=0;ue<re.length;ue++)T.push(re[ue].x),T.push(re[ue].y),G.push(re[ue]),H.x=Math.min(H.x,re[ue].x),H.y=Math.min(H.y,re[ue].y),U.x=Math.max(U.x,re[ue].x),U.y=Math.max(U.y,re[ue].y)}const Q=Z1(T,O),W=new US(G,Q,8,256);this.footprints.push({vertices:G,indices:Q,grid:W,min:H,max:U})}}}je(CP,"ClipBucket",{omit:["layers"]});const pY=as([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),AY=as([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),mY=as([{name:"a_centroid_pos",components:2,type:"Uint16"}]),gY=as([{name:"a_join_normal_inside",components:3,type:"Int16"}]),yY=as([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),vY=as([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:xY}=pY;var zS,SP,QS,BP,HS,EP,TP,$b={};function LP(){if(SP)return zS;SP=1;var f=Ar();function a(_,y,b,N,z){this.properties={},this.extent=b,this.type=0,this._pbf=_,this._geometry=-1,this._keys=N,this._values=z,_.readFields(d,this,y)}function d(_,y,b){_==1?y.id=b.readVarint():_==2?function(N,z){for(var G=N.readVarint()+N.pos;N.pos<G;){var T=z._keys[N.readVarint()],O=z._values[N.readVarint()];z.properties[T]=O}}(b,y):_==3?y.type=b.readVarint():_==4&&(y._geometry=b.pos)}function A(_){for(var y,b,N=0,z=0,G=_.length,T=G-1;z<G;T=z++)N+=((b=_[T]).x-(y=_[z]).x)*(y.y+b.y);return N}return zS=a,a.types=["Unknown","Point","LineString","Polygon"],a.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var y,b=_.readVarint()+_.pos,N=1,z=0,G=0,T=0,O=[];_.pos<b;){if(z<=0){var H=_.readVarint();N=7&H,z=H>>3}if(z--,N===1||N===2)G+=_.readSVarint(),T+=_.readSVarint(),N===1&&(y&&O.push(y),y=[]),y.push(new f(G,T));else{if(N!==7)throw new Error("unknown command "+N);y&&y.push(y[0].clone())}}return y&&O.push(y),O},a.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var y=_.readVarint()+_.pos,b=1,N=0,z=0,G=0,T=1/0,O=-1/0,H=1/0,U=-1/0;_.pos<y;){if(N<=0){var Q=_.readVarint();b=7&Q,N=Q>>3}if(N--,b===1||b===2)(z+=_.readSVarint())<T&&(T=z),z>O&&(O=z),(G+=_.readSVarint())<H&&(H=G),G>U&&(U=G);else if(b!==7)throw new Error("unknown command "+b)}return[T,H,O,U]},a.prototype.toGeoJSON=function(_,y,b){var N,z,G=this.extent*Math.pow(2,b),T=this.extent*_,O=this.extent*y,H=this.loadGeometry(),U=a.types[this.type];function Q(ue){for(var Be=0;Be<ue.length;Be++){var Te=ue[Be];ue[Be]=[360*(Te.x+T)/G-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+O)/G)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(N=0;N<H.length;N++)W[N]=H[N][0];Q(H=W);break;case 2:for(N=0;N<H.length;N++)Q(H[N]);break;case 3:for(H=function(ue){var Be=ue.length;if(Be<=1)return[ue];for(var Te,he,ke=[],Ve=0;Ve<Be;Ve++){var rt=A(ue[Ve]);rt!==0&&(he===void 0&&(he=rt<0),he===rt<0?(Te&&ke.push(Te),Te=[ue[Ve]]):Te.push(ue[Ve]))}return Te&&ke.push(Te),ke}(H),N=0;N<H.length;N++)for(z=0;z<H[N].length;z++)Q(H[N][z])}H.length===1?H=H[0]:U="Multi"+U;var re={type:"Feature",geometry:{type:U,coordinates:H},properties:this.properties};return"id"in this&&(re.id=this.id),re},zS}function IP(){if(BP)return QS;BP=1;var f=LP();function a(A,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(d,this,_),this.length=this._features.length}function d(A,_,y){A===15?_.version=y.readVarint():A===1?_.name=y.readString():A===5?_.extent=y.readVarint():A===2?_._features.push(y.pos):A===3?_._keys.push(y.readString()):A===4&&_._values.push(function(b){for(var N=null,z=b.readVarint()+b.pos;b.pos<z;){var G=b.readVarint()>>3;N=G===1?b.readString():G===2?b.readFloat():G===3?b.readDouble():G===4?b.readVarint64():G===5?b.readVarint():G===6?b.readSVarint():G===7?b.readBoolean():null}return N}(y))}return QS=a,a.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var _=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,_,this.extent,this._keys,this._values)},QS}function NP(){return TP||(TP=1,$b.VectorTile=function(){if(EP)return HS;EP=1;var f=IP();function a(d,A,_){if(d===3){var y=new f(_,_.readVarint()+_.pos);y.length&&(A[y.name]=y)}}return HS=function(d,A){this.layers=d.readFields(a,{},A)},HS}(),$b.VectorTileFeature=LP(),$b.VectorTileLayer=IP()),$b}var Q0=NP();class Ag extends Ze{constructor(a,d,A){super(a,d),this.z=A}}class FP extends Ag{constructor(a,d,A,_){super(a,d,A),this.w=_}}function qb(f,a,d,A){const _=[],y=A===0?(b,N,z,G,T,O)=>{b.push(new Ze(O,z+(O-N)/(G-N)*(T-z)))}:(b,N,z,G,T,O)=>{b.push(new Ze(N+(O-z)/(T-z)*(G-N),O))};for(const b of f){const N=[];for(const z of b){if(z.length<=2)continue;const G=[];for(let H=0;H<z.length-1;H++){const U=z[H].x,Q=z[H].y,W=z[H+1].x,re=z[H+1].y,ue=A===0?U:Q,Be=A===0?W:re;ue<a?Be>a&&y(G,U,Q,W,re,a):ue>d?Be<d&&y(G,U,Q,W,re,d):G.push(z[H]),Be<a&&ue>=a&&y(G,U,Q,W,re,a),Be>d&&ue<=d&&y(G,U,Q,W,re,d)}let T=z[z.length-1];const O=A===0?T.x:T.y;O>=a&&O<=d&&G.push(T),G.length&&(T=G[G.length-1],G[0].x===T.x&&G[0].y===T.y||G.push(G[0]),N.push(G))}N.length&&_.push(N)}return _}function PP(f,a,d,A){const _=d==="x"?"y":"x",y=(A-f[d])/(a[d]-f[d]);f[_]=f[_]+(a[_]-f[_])*y,f[d]=A,f.hasOwnProperty("z")&&(f.z=Sr(f.z,a.z,y)),f.hasOwnProperty("w")&&(f.w=Sr(f.w,a.w,y))}function jP(f,a,d,A){const _=d,y=A;for(const b of["x","y"]){let N=f,z=a;N[b]>=z[b]&&(N=a,z=f),N[b]<_&&z[b]>_&&PP(N,z,b,_),N[b]<y&&z[b]>y&&PP(z,N,b,y)}}const Wb=Number.MAX_SAFE_INTEGER;function MP(f,a,d,A){return f.order<a||f.order===Wb||!(f.clipMask&d)||function(_,y){return y.length!==0&&y.find(b=>b===_)===void 0}(A,f.clipScope)}function Kb(f,a){return f.x-a.x||f.y-a.y}function kP(f,a){return Kb(f.min,a.min)===0&&Kb(f.max,a.max)===0}function VS(f,a){return!(f.min.x>a.max.x||f.max.x<a.min.x||f.min.y>a.max.y||f.max.y<a.min.y)}function GS(f,a){if(f.length!==a.length)return!1;for(let d=0;d<f.length;d++)if(f[d].sourceId!==a[d].sourceId||!kP(f[d],a[d])||f[d].order!==a[d].order||f[d].clipMask!==a[d].clipMask||!Ue(f[d].clipScope,a[d].clipScope))return!1;return!0}function DP(f,a,d){const A=1/Yr,_=1/(1<<d.canonical.z),y=(a.x*A+d.canonical.x)*_+d.wrap,b=(a.y*A+d.canonical.y)*_;return{min:new Ze((f.x*A+d.canonical.x)*_+d.wrap,(f.y*A+d.canonical.y)*_),max:new Ze(y,b)}}function _Y(f,a,d){const A=1<<d.canonical.z,_=((a.x-d.wrap)*A-d.canonical.x)*Yr,y=(a.y*A-d.canonical.y)*Yr;return{min:new Ze(((f.x-d.wrap)*A-d.canonical.x)*Yr,(f.y*A-d.canonical.y)*Yr),max:new Ze(_,y)}}function OP(f,a,d,A,_,y,b){const N=f.indices,z=f.vertices,G=[];for(let T=A;T<A+_;T+=3){const O=a[d[T+0]+y],H=a[d[T+1]+y],U=a[d[T+2]+y],Q=Math.min(O.x,H.x,U.x),W=Math.max(O.x,H.x,U.x),re=Math.min(O.y,H.y,U.y),ue=Math.max(O.y,H.y,U.y);G.length=0,f.grid.query(new Ze(Q,re),new Ze(W,ue),G);for(let Be=0;Be<G.length;Be++){const Te=G[Be];if(ao(z[N[3*Te+0]],z[N[3*Te+1]],z[N[3*Te+2]],O,H,U,b))return!0}}return!1}function RP(f,a,d,A){if(!f||!d)return!1;let _=f.vertices;if(!a.canonical.equals(A.canonical)||a.wrap!==A.wrap){if(d.vertices.length<f.vertices.length)return RP(d,A,f,a);const y=a.canonical,b=A.canonical,N=Math.pow(2,b.z-y.z);_=f.vertices.map(z=>new Ze((z.x+y.x*Yr)*N-b.x*Yr,(z.y+y.y*Yr)*N-b.y*Yr))}return OP(d,_,f.indices,0,f.indices.length,0,0)}function UP(f,a,d,A){const _=Math.pow(2,A.z-d.z);return new Ze((f+d.x*Yr)*_-A.x*Yr,(a+d.y*Yr)*_-A.y*Yr)}function zP(f,a){const d=[];a.grid.queryPoint(f,d);const A=a.indices,_=a.vertices;for(let y=0;y<d.length;y++){const b=d[y];if(Do([_[A[3*b+0]],_[A[3*b+1]],_[A[3*b+2]]],f))return!0}return!1}const $S=[new Ze(0,0),new Ze(Yr,0),new Ze(Yr,Yr),new Ze(0,Yr)];function QP(f,a){const d=[];let A=[];if(!a||f.length<2)return[f];if(f.length===2)return Xa(f[0],f[1],$S)?[f]:[];for(let _=0;_<f.length+2;_++){const y=f[_%f.length],b=f[(_+1)%f.length],N=Xa(_===0?f[f.length-1]:f[(_-1)%f.length],y,$S),z=Xa(y,b,$S),G=N||z;G&&A.push(y),G&&z||A.length>0&&(A.length>1&&d.push(A),A=[])}return A.length>1&&d.push(A),d}const qS=Q0.VectorTileFeature.types,bY=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],wY=["fill-extrusion-flood-light-ground-radius"],CY=Math.pow(2,13),SY=Math.pow(2,15)-1,HP=new Ze(0,1),jA=2147483648;function rv(f,a,d,A,_,y,b,N){f.emplaceBack((a<<1)+b,(d<<1)+y,(Math.floor(A*CY)<<1)+_,Math.round(N))}function nv(f,a,d){f.emplaceBack(a.x*Yr,a.y*Yr,d?1:0)}function Xb(f,a,d,A,_,y){f.emplaceBack(a.x,a.y,(d.x<<1)+A,(d.y<<1)+_,y)}function iv(f,a,d){f.emplaceBack(a.x,a.y,a.z,d[0]*16384,d[1]*16384,d[2]*16384)}class VP{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class GP{constructor(){this.centroidXY=new Ze(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Ze(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Ze(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Ze(this.max.x-this.min.x,this.max.y-this.min.y)}}class $P{constructor(){this.acc=new Ze(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(a,d){a.min.x===Number.MAX_VALUE&&(a.min.x=a.max.x=d.x,a.min.y=a.max.y=d.y)}appendEdge(a,d,A){this.accCount++,this.acc._add(d);let _=!!this.borders;d.x<a.min.x?(a.min.x=d.x,_=!0):d.x>a.max.x&&(a.max.x=d.x,_=!0),d.y<a.min.y?(a.min.y=d.y,_=!0):d.y>a.max.y&&(a.max.y=d.y,_=!0),((d.x===0||d.x===Yr)&&d.x===A.x)!=((d.y===0||d.y===Yr)&&d.y===A.y)&&this.processBorderOverlap(d,A),_&&this.checkBorderIntersection(d,A)}checkBorderIntersection(a,d){d.x<0!=a.x<0&&this.addBorderIntersection(0,Sr(d.y,a.y,(0-d.x)/(a.x-d.x))),d.x>Yr!=a.x>Yr&&this.addBorderIntersection(1,Sr(d.y,a.y,(Yr-d.x)/(a.x-d.x))),d.y<0!=a.y<0&&this.addBorderIntersection(2,Sr(d.x,a.x,(0-d.y)/(a.y-d.y))),d.y>Yr!=a.y>Yr&&this.addBorderIntersection(3,Sr(d.x,a.x,(Yr-d.y)/(a.y-d.y)))}addBorderIntersection(a,d){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const A=this.borders[a];d<A[0]&&(A[0]=d),d>A[1]&&(A[1]=d)}processBorderOverlap(a,d){if(a.x===d.x){if(a.y===d.y)return;const A=a.x===0?0:1;this.addBorderIntersection(A,d.y),this.addBorderIntersection(A,a.y)}else{const A=a.y===0?2:3;this.addBorderIntersection(A,d.x),this.addBorderIntersection(A,a.x)}}centroid(){return this.accCount===0?new Ze(0,0):new Ze(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((a,d)=>a+ +(d[0]!==Number.MAX_VALUE),0):0}}function qP(f,a){const d=f.add(a)._unit(),A=Ir(f.x*d.x+f.y*d.y,-1,1);var _,y,b;return b=Math.acos(A),Math.min(4,Math.max(-4,Math.tan(b)))/4*SY*((_=f).x*(y=a).y-_.y*y.x<0?-1:1)}const BY=[f=>f.x<0,f=>f.x>Yr,f=>f.y<0,f=>f.y>Yr];function EY(f,a,d,A){const _=[4];if(A===0)return _;d._mult(A);const y=f.sub(d),b=a.sub(d),N=[f,a,y,b];for(let z=0;z<4;z++)for(const G of N)if(BY[z](G)){_.push(z);break}return _}class WP{constructor(a){this.vertexArray=new Tu,this.indexArray=new Ka,this.programConfigurations=new Jf(a.layers,{zoom:a.zoom,lut:a.lut},d=>wY.includes(d)),this._segments=new La,this.hiddenByLandmarkVertexArray=new Nh,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new La}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(a,d,A,_=!1){const y=a.length;if(y>2){let b=Math.max(0,this._segments.get().length-1);const N=this._segments._prepareSegment(4*y,this.vertexArray.length,2*this._segmentToGroundQuads[b].length);let z;b!==this._segments.get().length-1&&(b++,this._segmentToGroundQuads[b]=[],this._segmentToRegionTriCounts[b]=[0,0,0,0,0]);{const G=a[0],T=a[1];z=qP(G.sub(a[y-1])._perp()._unit(),T.sub(G)._perp()._unit())}for(let G=0;G<y;G++){const T=G===y-1?0:G+1,O=a[G],H=a[T],U=a[T===y-1?0:T+1],Q=H.sub(O)._perp()._unit(),W=qP(Q,U.sub(H)._perp()._unit()),re=z,ue=W;if(WS(O,H,d)||_&&YP(O,d)&&YP(H,d)){z=W;continue}const Be=N.vertexLength;Xb(this.vertexArray,O,H,1,1,re),Xb(this.vertexArray,O,H,1,0,re),Xb(this.vertexArray,O,H,0,1,ue),Xb(this.vertexArray,O,H,0,0,ue),N.vertexLength+=4;const Te=EY(O,H,Q,A);for(const he of Te)this._segmentToGroundQuads[b].push({id:Be,region:he}),this._segmentToRegionTriCounts[b][he]+=2,N.primitiveLength+=2;z=W}}}prepareBorderSegments(){if(!this.hasData())return;const a=this._segments.get(),d=a.length;for(let A=0;A<d;A++)this._segmentToGroundQuads[A].sort((_,y)=>_.region-y.region);for(let A=0;A<d;A++){const _=this._segmentToGroundQuads[A],y=a[A],b=this._segmentToRegionTriCounts[A];b.reduce((z,G)=>z+G,0);let N=0;for(let z=0;z<=4;z++){const G=b[z];if(G!==0){let T=this.regionSegments[z];T||(T=this.regionSegments[z]=new La);const O={vertexOffset:y.vertexOffset,primitiveOffset:y.primitiveOffset+N,vertexLength:y.vertexLength,primitiveLength:G};T.get().push(O)}N+=G}for(let z=0;z<_.length;z++){const G=_[z].id;this.indexArray.emplaceBack(G,G+1,G+3),this.indexArray.emplaceBack(G,G+3,G+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(a,d,A,_,y,b){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,a,d,A,_,y,b)}upload(a){this.hasData()&&(this.vertexBuffer=a.createVertexBuffer(this.vertexArray,AY.members),this.indexBuffer=a.createIndexBuffer(this.indexArray))}uploadPaintProperties(a){this.hasData()&&this.programConfigurations.upload(a)}update(a,d,A,_,y,b){this.hasData()&&this.programConfigurations.updatePaintArrays(a,d,A,_,y,b)}updateHiddenByLandmark(a){if(!this.hasData())return;const d=a.groundVertexCount+a.groundVertexArrayOffset;if(a.groundVertexCount===0)return;const A=a.flags&jA?1:0;for(let _=a.groundVertexArrayOffset;_<d;++_)this.hiddenByLandmarkVertexArray.emplace(_,A);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(a){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=a.createVertexBuffer(this.hiddenByLandmarkVertexArray,yY.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let a=0;a<=4;a++){const d=this.regionSegments[a];d&&d.destroy()}}}}class Yb{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.fqid),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ka,this.footprintVertices=new Bc,this.footprintSegments=[],this.layoutVertexArray=new Eu,this.centroidVertexArray=new Fb,this.wallVertexArray=new G1,this.indexArray=new Ka,this.programConfigurations=new Jf(a.layers,{zoom:a.zoom,lut:a.lut},d=>bY.includes(d)),this.segments=new La,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id),this.groundEffect=new WP(a),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(a,d){}populate(a,d,A,_){this.features=[],this.hasPattern=DS("fill-extrusion",this.layers,d),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=Ot(A),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:y,id:b,index:N,sourceLayerIndex:z}of a){const G=this.layers[0]._featureFilter.needGeometry,T=nn(y,G);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom),T,A))continue;const O={id:b,sourceLayerIndex:z,index:N,geometry:G?T.geometry:en(y,A,_),properties:y.properties,type:y.type,patterns:{}},H=this.layoutVertexArray.length,U=qS[O.type]==="Polygon";if(this.hasPattern)this.features.push(OS("fill-extrusion",this.layers,O,this.zoom,d));else if(this.wallMode)for(const Q of O.geometry)for(const W of QP(Q,U))this.addFeature(O,[W],N,A,{},d.availableImages,_,d.brightness);else this.addFeature(O,O.geometry,N,A,{},d.availableImages,_,d.brightness);d.featureIndex.insert(y,O.geometry,N,z,this.index,H)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(a,d,A,_,y,b){for(const N of this.features){const z=qS[N.type]==="Polygon",{geometry:G}=N;if(this.wallMode)for(const T of G)for(const O of QP(T,z))this.addFeature(N,[O],N.index,d,A,_,y,b);else this.addFeature(N,G,N.index,d,A,_,y,b)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(a,d,A,_,y){const b=Object.keys(a).length!==0;if(b&&!this.stateDependentLayers.length)return;const N=b?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(a,d,N,A,_,y),this.groundEffect.update(a,d,N,A,_,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,xY),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.wallVertexBuffer=a.createVertexBuffer(this.wallVertexArray,gY.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,vY.members,!0)),this.groundEffect.upload(a)),this.groundEffect.uploadPaintProperties(a),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){this.groundEffect.uploadHiddenByLandmark(a),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,mY.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,d,A,_,y,b,N,z){const G=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(a,{})/this.tileToMeter,T=[new Ze(0,0),new Ze(Yr,Yr)],O=N.projection,H=O.name==="globe",U=this.wallMode||qS[a.type]==="Polygon",Q=new $P;Q.centroidDataIndex=this.centroidData.length;const W=new GP,re=this.layers[0].paint.get("fill-extrusion-base").evaluate(a,{},_)<=0,ue=this.layers[0].paint.get("fill-extrusion-height").evaluate(a,{},_);let Be;if(W.height=ue,W.vertexArrayOffset=this.layoutVertexArray.length,W.groundVertexArrayOffset=this.groundEffect.vertexArray.length,H&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Eh),this.wallMode){if(H)return void jn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(d.length!==1)return;Be=function(at){const Et=at[0].x===at[at.length-1].x&&at[0].y===at[at.length-1].y;(function(tn){let Vr=0;const Jn=tn.length;for(let wn=0;wn<Jn;wn++)Vr+=(tn[(wn+1)%Jn].x-tn[wn].x)*(tn[(wn+1)%Jn].y+tn[wn].y);return Vr>=0})(at)||(at=at.reverse());const Nt={geometry:[],joinNormals:[],indices:[]},zt=[],Gt=[],$t=[];let Zt=at.length;if(Zt<(Et?3:2))return Nt;for(;Zt>=2&&at[Zt-1].equals(at[Zt-2]);)Zt--;let vr,tr,Br,Ur,br,Cn=0;for(;Cn<Zt-1&&at[Cn].equals(at[Cn+1]);)Cn++;Et&&(vr=at[Zt-2],br=at[Cn].sub(vr)._unit()._perp());for(let tn=Cn;tn<Zt;tn++){if(Br=tn===Zt-1?Et?at[Cn+1]:void 0:at[tn+1],Br&&at[tn].equals(Br))continue;br&&(Ur=br),vr&&(tr=vr),vr=at[tn],br=Br?Br.sub(vr)._unit()._perp():Ur,Ur=Ur||br;let Vr=Ur.add(br);Vr.x===0&&Vr.y===0||Vr._unit();const Jn=Vr.x*br.x+Vr.y*br.y,wn=Jn!==0?1/Jn:1/0,Pn=Ur.x*br.y-Ur.y*br.x>0;let ui="miter";const Ri=2;ui==="miter"&&wn>Ri&&(ui="bevel"),ui==="bevel"&&(wn>100&&(ui="flipbevel"),wn<Ri&&(ui="miter"));const Bi=(Ei,Wi,Xi,po)=>{const Gs=new Ze(Ei.x,Ei.y),pi=new Ze(Ei.x,Ei.y);Gs.x+=Wi.x*po,Gs.y+=Wi.y*po,pi.x-=Wi.x*Math.max(Xi,1),pi.y-=Wi.y*Math.max(Xi,1),$t.push(Wi),zt.push(Gs),Gt.push(pi)};if(ui==="miter")Vr._mult(wn),Bi(vr,Vr,0,0);else if(ui==="flipbevel")Vr=br.mult(-1),Bi(vr,Vr,0,0),Bi(vr,Vr.mult(-1),0,0);else{const Ei=-Math.sqrt(wn*wn-1),Wi=Pn?Ei:0,Xi=Pn?0:Ei;tr&&Bi(vr,Ur,Wi,Xi),Br&&Bi(vr,br,Wi,Xi)}}Nt.geometry=[...zt,...Gt.reverse(),zt[0]],Nt.joinNormals=[...$t,...$t.reverse(),$t[$t.length-1]];const hn=Nt.geometry.length-1;for(let tn=0;tn<hn/2;tn++)if(tn+1<hn/2){let Vr=tn,Jn=tn+1,wn=hn-1-tn,Pn=hn-2-tn;Vr=Vr===0?hn-1:Vr-1,Jn=Jn===0?hn-1:Jn-1,wn=wn===0?hn-1:wn-1,Pn=Pn===0?hn-1:Pn-1,Nt.indices.push(wn),Nt.indices.push(Jn),Nt.indices.push(Vr),Nt.indices.push(wn),Nt.indices.push(Pn),Nt.indices.push(Jn)}return Nt}(d[0]),d=[Be.geometry]}const Te=(at,Et)=>at<(Et.length-1)/2||at===Et.length-1,he=this.wallMode?[d]:Gb(d,500);for(let at=he.length-1;at>=0;at--){const Et=he[at];(Et.length===0||(ke=Et[0]).every(yt=>yt.x<=0)||ke.every(yt=>yt.x>=Yr)||ke.every(yt=>yt.y<=0)||ke.every(yt=>yt.y>=Yr))&&he.splice(at,1)}var ke;let Ve;if(H)Ve=tj(he,T,_);else{Ve=[];for(const at of he)Ve.push({polygon:at,bounds:T})}const rt=U?this.edgeRadius:0,dt=rt>0&&this.zoom<17,ft=(at,Et)=>{if(at.length===0)return!1;const yt=at[at.length-1];return Et.x===yt.x&&Et.y===yt.y};for(const{polygon:at,bounds:Et}of Ve){let yt=0,Nt=0;for(const Zt of at)U&&!Zt[0].equals(Zt[Zt.length-1])&&Zt.push(Zt[0]),Nt+=U?Zt.length-1:Zt.length;const zt=this.segments.prepareSegment((U?5:4)*Nt,this.layoutVertexArray,this.indexArray);W.footprintSegIdx<0&&(W.footprintSegIdx=this.footprintSegments.length),W.polygonSegIdx<0&&(W.polygonSegIdx=this.polygonSegments.length);const Gt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},$t=new VP;if($t.vertexOffset=this.footprintVertices.length,$t.indexOffset=3*this.footprintIndices.length,$t.ringIndices=[],U){const Zt=[],vr=[];yt=zt.vertexLength;for(let Br=0;Br<at.length;Br++){const Ur=at[Br];Ur.length&&Br!==0&&vr.push(Zt.length/2);const br=[];let Cn,hn;Cn=Ur[1].sub(Ur[0])._perp()._unit(),$t.ringIndices.push(Ur.length-1);for(let tn=1;tn<Ur.length;tn++){const Vr=Ur[tn],Jn=Ur[tn===Ur.length-1?1:tn+1],wn=Vr.clone();if(rt){hn=Jn.sub(Vr)._perp()._unit();const Pn=Cn.add(hn)._unit(),ui=rt*Math.min(4,1/(Cn.x*Pn.x+Cn.y*Pn.y));wn.x+=ui*Pn.x,wn.y+=ui*Pn.y,wn.x=Math.round(wn.x),wn.y=Math.round(wn.y),Cn=hn}if(!re||rt!==0&&!dt||ft(br,wn)||br.push(wn),rv(this.layoutVertexArray,wn.x,wn.y,0,0,1,1,0),this.wallMode){const Pn=Te(tn,Ur);nv(this.wallVertexArray,Be.joinNormals[tn],!Pn)}zt.vertexLength++,this.footprintVertices.emplaceBack(Vr.x,Vr.y),Zt.push(Vr.x,Vr.y),H&&iv(this.layoutVertexExtArray,O.projectTilePoint(wn.x,wn.y,_),O.upVector(_,wn.x,wn.y))}re&&(rt===0||dt)&&(br.length!==0&&ft(br,br[0])&&br.pop(),this.groundEffect.addData(br,Et,G))}const tr=this.wallMode?Be.indices:Z1(Zt,vr);for(let Br=0;Br<tr.length;Br+=3)this.footprintIndices.emplaceBack($t.vertexOffset+tr[Br+0],$t.vertexOffset+tr[Br+1],$t.vertexOffset+tr[Br+2]),this.indexArray.emplaceBack(yt+tr[Br],yt+tr[Br+2],yt+tr[Br+1]),zt.primitiveLength++;$t.indexCount+=tr.length,$t.vertexCount+=this.footprintVertices.length-$t.vertexOffset}for(let Zt=0;Zt<at.length;Zt++){const vr=at[Zt];Q.startRing(W,vr[0]);let tr=vr.length>4&&ZP(vr[vr.length-2],vr[0],vr[1]),Br=rt?TY(vr[vr.length-2],vr[0],vr[1],rt):0;const Ur=[];let br,Cn,hn;Cn=vr[1].sub(vr[0])._perp()._unit();let tn=!0;for(let Vr=1,Jn=0;Vr<vr.length;Vr++){let wn=vr[Vr-1],Pn=vr[Vr];const ui=vr[Vr===vr.length-1?1:Vr+1];if(Q.appendEdge(W,Pn,wn),WS(Pn,wn,Et)){rt&&(Cn=ui.sub(Pn)._perp()._unit(),tn=!tn);continue}const Ri=Pn.sub(wn)._perp(),Bi=Ri.x/(Math.abs(Ri.x)+Math.abs(Ri.y)),Ei=Ri.y>0?1:0,Wi=wn.dist(Pn);if(Jn+Wi>32768&&(Jn=0),rt){hn=ui.sub(Pn)._perp()._unit();let pi=XP(wn,Pn,ui,KP(Cn,hn),rt);isNaN(pi)&&(pi=0);const js=Pn.sub(wn)._unit();wn=wn.add(js.mult(Br))._round(),Pn=Pn.add(js.mult(-pi))._round(),Br=pi,Cn=hn,re&&this.zoom>=17&&(ft(Ur,wn)||Ur.push(wn),ft(Ur,Pn)||Ur.push(Pn))}const Xi=zt.vertexLength,po=vr.length>4&&ZP(wn,Pn,ui);let Gs=JP(Jn,tr,tn);if(rv(this.layoutVertexArray,wn.x,wn.y,Bi,Ei,0,0,Gs),rv(this.layoutVertexArray,wn.x,wn.y,Bi,Ei,0,1,Gs),this.wallMode){const pi=Te(Vr-1,vr),js=Be.joinNormals[Vr-1];nv(this.wallVertexArray,js,pi),nv(this.wallVertexArray,js,pi)}if(Jn+=Wi,Gs=JP(Jn,po,!tn),tr=po,rv(this.layoutVertexArray,Pn.x,Pn.y,Bi,Ei,0,0,Gs),rv(this.layoutVertexArray,Pn.x,Pn.y,Bi,Ei,0,1,Gs),this.wallMode){const pi=Te(Vr,vr),js=Be.joinNormals[Vr];nv(this.wallVertexArray,js,pi),nv(this.wallVertexArray,js,pi)}if(zt.vertexLength+=4,this.indexArray.emplaceBack(Xi+0,Xi+1,Xi+2),this.indexArray.emplaceBack(Xi+1,Xi+3,Xi+2),zt.primitiveLength+=2,rt){const pi=yt+(Vr===1?vr.length-2:Vr-2),js=Vr===1?yt:pi+1;if(this.indexArray.emplaceBack(Xi+1,pi,Xi+3),this.indexArray.emplaceBack(pi,js,Xi+3),zt.primitiveLength+=2,br===void 0&&(br=Xi),!WS(ui,vr[Vr],Et)){const Rs=Vr===vr.length-1?br:zt.vertexLength;this.indexArray.emplaceBack(Xi+2,Xi+3,Rs),this.indexArray.emplaceBack(Xi+3,Rs+1,Rs),this.indexArray.emplaceBack(Xi+3,js,Rs+1),zt.primitiveLength+=3}tn=!tn}if(H){const pi=this.layoutVertexExtArray,js=O.projectTilePoint(wn.x,wn.y,_),Rs=O.projectTilePoint(Pn.x,Pn.y,_),Oo=O.upVector(_,wn.x,wn.y),Da=O.upVector(_,Pn.x,Pn.y);iv(pi,js,Oo),iv(pi,js,Oo),iv(pi,Rs,Da),iv(pi,Rs,Da)}}U&&(yt+=vr.length-1),re&&rt&&this.zoom>=17&&(Ur.length!==0&&ft(Ur,Ur[0])&&Ur.pop(),this.groundEffect.addData(Ur,Et,G,rt>0))}this.footprintSegments.push($t),Gt.triangleCount=this.indexArray.length-Gt.triangleArrayOffset,this.polygonSegments.push(Gt),++W.footprintSegLen,++W.polygonSegLen}if(W.vertexCount=this.layoutVertexArray.length-W.vertexArrayOffset,W.groundVertexCount=this.groundEffect.vertexArray.length-W.groundVertexArrayOffset,W.vertexCount!==0){if(W.centroidXY=Q.borders?HP:this.encodeCentroid(Q,W),this.centroidData.push(W),Q.borders){this.featuresOnBorder.push(Q);const at=this.featuresOnBorder.length-1;for(let Et=0;Et<Q.borders.length;Et++)Q.borders[Et][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Et].push(at)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,A,y,b,_,z),this.groundEffect.addPaintPropertiesData(a,A,y,b,_,z),this.maxHeight=Math.max(this.maxHeight,ue)}}sortBorders(){for(let a=0;a<this.borderFeatureIndices.length;a++)this.borderFeatureIndices[a].sort((d,A)=>this.featuresOnBorder[d].borders[a][0]-this.featuresOnBorder[A].borders[a][0])}splitToSubtiles(){const a=[];for(let N=0;N<this.centroidData.length;N++){const z=this.centroidData[N],G=+(z.min.y+z.max.y>Yr),T=2*G+(+(z.min.x+z.max.x>Yr)^G);for(let O=0;O<z.polygonSegLen;O++){const H=z.polygonSegIdx+O;a.push({centroidIdx:N,subtile:T,polygonSegmentIdx:H,triangleSegmentIdx:this.polygonSegments[H].triangleSegIdx})}}const d=new Ka;a.sort((N,z)=>N.triangleSegmentIdx===z.triangleSegmentIdx?N.subtile-z.subtile:N.triangleSegmentIdx-z.triangleSegmentIdx);let A=0,_=0,y=0;for(const N of a){if(N.triangleSegmentIdx!==A)break;y++}const b=a.length;for(;_!==a.length;){A=a[_].triangleSegmentIdx;let N=0,z=_,G=_;for(let T=z;T<y&&a[T].subtile===N;T++)G++;for(;z!==y;){const T=a[z];N=T.subtile;const O=this.centroidData[T.centroidIdx].min.clone(),H=this.centroidData[T.centroidIdx].max.clone(),U={vertexOffset:this.segments.segments[A].vertexOffset,primitiveOffset:d.length,vertexLength:this.segments.segments[A].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let Q=z;Q<G;Q++){const W=a[Q],re=this.polygonSegments[W.polygonSegmentIdx],ue=this.centroidData[W.centroidIdx].min,Be=this.centroidData[W.centroidIdx].max,Te=this.indexArray.uint16;for(let he=re.triangleArrayOffset;he<re.triangleArrayOffset+re.triangleCount;he++)d.emplaceBack(Te[3*he],Te[3*he+1],Te[3*he+2]);U.primitiveLength+=re.triangleCount,O.x=Math.min(O.x,ue.x),O.y=Math.min(O.y,ue.y),H.x=Math.max(H.x,Be.x),H.y=Math.max(H.y,Be.y)}U.primitiveLength>0&&this.triangleSubSegments.push({segment:U,min:O,max:H}),z=G;for(let Q=z;Q<y&&a[Q].subtile===a[z].subtile;Q++)G++}_=y;for(let T=_;T<b&&a[T].triangleSegmentIdx===a[_].triangleSegmentIdx;T++)y++}d._trim(),this.indexArray=d}getVisibleSegments(a,d,A){const _=new La;if(this.wallMode){for(const W of this.triangleSubSegments)_.segments.push(W.segment);return _}let y=0,b=0;const N=1<<a.canonical.z;if(d){const W=d.getMinMaxForTile(a);W&&(y=W.min,b=W.max)}b+=this.maxHeight;const z=a.toUnwrapped();let G;const T=[z.canonical.x/N+z.wrap,z.canonical.y/N],O=[(z.canonical.x+1)/N+z.wrap,(z.canonical.y+1)/N],H=(W,re,ue)=>[W[0]*(1-ue[0])+re[0]*ue[0],W[1]*(1-ue[1])+re[1]*ue[1]],U=[],Q=[];for(const W of this.triangleSubSegments){U[0]=W.min.x/Yr,U[1]=W.min.y/Yr,Q[0]=W.max.x/Yr,Q[1]=W.max.y/Yr;const re=H(T,O,U),ue=H(T,O,Q);if(new No([re[0],re[1],y],[ue[0],ue[1],b]).intersectsPrecise(A)===0){G&&(_.segments.push(G),G=void 0);continue}const Be=W.segment;G&&G.vertexOffset!==Be.vertexOffset&&(_.segments.push(G),G=void 0),G?(G.vertexLength+=Be.vertexLength,G.primitiveLength+=Be.primitiveLength):G={vertexOffset:Be.vertexOffset,primitiveLength:Be.primitiveLength,vertexLength:Be.vertexLength,primitiveOffset:Be.primitiveOffset,sortKey:void 0,vaos:{}}}return G&&_.segments.push(G),_}encodeCentroid(a,d){const A=a.centroid(),_=d.span(),y=Math.min(7,Math.round(_.x*this.tileToMeter/10)),b=Math.min(7,Math.round(_.y*this.tileToMeter/10));return new Ze(Ir(A.x,1,Yr-1)<<3|y,Ir(A.y,1,Yr-1)<<3|b)}encodeBorderCentroid(a){if(!a.borders)return new Ze(0,0);const d=a.borders,A=Number.MAX_VALUE;if(d[0][0]!==A||d[1][0]!==A){const _=d[0][0]!==A?0:1;return new Ze(6|(d[0][0]!==A?0:65528),(d[_][0]+d[_][1])/2<<3|6)}{const _=d[2][0]!==A?2:3;return new Ze((d[_][0]+d[_][1])/2<<3|6,6|(d[2][0]!==A?0:65528))}}showCentroid(a){const d=this.centroidData[a.centroidDataIndex];d.flags&=jA,d.centroidXY.x=0,d.centroidXY.y=0,this.writeCentroidToBuffer(d)}writeCentroidToBuffer(a){this.groundEffect.updateHiddenByLandmark(a);const d=a.vertexArrayOffset,A=a.vertexCount+a.vertexArrayOffset,_=a.flags&jA?HP:a.centroidXY,y=this.centroidVertexArray.geta_centroid_pos0(d);if(this.centroidVertexArray.geta_centroid_pos1(d)!==_.y||y!==_.x){for(let b=d;b<A;++b)this.centroidVertexArray.emplace(b,_.x,_.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const a of this.centroidData)this.writeCentroidToBuffer(a)}updateReplacement(a,d,A){if(d.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=d.updateTime;const _=d.getReplacementRegionsForTile(a.toUnwrapped());if(GS(this.activeReplacements,_))return;if(this.activeReplacements=_,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const b of this.centroidData)b.flags&=2147483647;const y=[];for(const b of this.activeReplacements){if(b.order<A)continue;const N=Math.pow(2,b.footprintTileId.canonical.z-a.canonical.z);for(const z of this.centroidData)if(!(z.flags&jA||b.min.x>z.max.x||z.min.x>b.max.x||b.min.y>z.max.y||z.min.y>b.max.y))for(let G=0;G<z.footprintSegLen;G++){const T=this.footprintSegments[z.footprintSegIdx+G];if(y.length=0,LY(this.footprintVertices,T.vertexOffset,T.vertexCount,b.footprintTileId.canonical,a.canonical,y),OP(b.footprint,y,this.footprintIndices.uint16,T.indexOffset,T.indexCount,-T.vertexOffset,-N)){z.flags|=jA;break}}}for(const b of this.centroidData)this.writeCentroidToBuffer(b);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(a,d,A){let _=!1;for(let y=0;y<A.footprintSegLen;y++){const b=this.footprintSegments[A.footprintSegIdx+y];let N=0;for(const z of b.ringIndices){for(let G=N,T=z+N-1;G<z+N;T=G++){const O=this.footprintVertices.int16[2*(G+b.vertexOffset)+0],H=this.footprintVertices.int16[2*(G+b.vertexOffset)+1],U=this.footprintVertices.int16[2*(T+b.vertexOffset)+1];H>d!=U>d&&a<(this.footprintVertices.int16[2*(T+b.vertexOffset)+0]-O)*(d-H)/(U-H)+O&&(_=!_)}N=z}}return _}getHeightAtTileCoord(a,d){let A=Number.NEGATIVE_INFINITY,_=!0;const y=4*(a+Yr)*Yr+(d+Yr);if(this.partLookup.hasOwnProperty(y)){const b=this.partLookup[y];return b?{height:b.height,hidden:!!(b.flags&jA)}:void 0}for(const b of this.centroidData)a>b.max.x||b.min.x>a||d>b.max.y||b.min.y>d||this.footprintContainsPoint(a,d,b)&&b&&b.height>A&&(A=b.height,this.partLookup[y]=b,_=!!(b.flags&jA));if(A!==Number.NEGATIVE_INFINITY)return{height:A,hidden:_};this.partLookup[y]=void 0}}function KP(f,a){const d=f.add(a)._unit();return f.x*d.x+f.y*d.y}function TY(f,a,d,A){const _=a.sub(f)._perp()._unit(),y=d.sub(a)._perp()._unit();return XP(f,a,d,KP(_,y),A)}function XP(f,a,d,A,_){const y=Math.sqrt(1-A*A);return Math.min(f.dist(a)/3,a.dist(d)/3,_*y/A)}function WS(f,a,d){return f.x<d[0].x&&a.x<d[0].x||f.x>d[1].x&&a.x>d[1].x||f.y<d[0].y&&a.y<d[0].y||f.y>d[1].y&&a.y>d[1].y}function YP(f,a){return f.x<a[0].x||f.x>a[1].x||f.y<a[0].y||f.y>a[1].y}function ZP(f,a,d){if(f.x<0||f.x>=Yr||a.x<0||a.x>=Yr||d.x<0||d.x>=Yr)return!1;const A=d.sub(a),_=A.perp(),y=f.sub(a);return(A.x*y.x+A.y*y.y)/Math.sqrt((A.x*A.x+A.y*A.y)*(y.x*y.x+y.y*y.y))>-.866&&_.x*y.x+_.y*y.y<0}function JP(f,a,d){const A=a?2|f:-3&f;return d?1|A:-2&A}function ej(){const f=Math.PI/32,a=Math.tan(f),d=xe;return d*Math.sqrt(1+2*a*a)-d}function tj(f,a,d){const A=1<<d.z,_=wt(d.x/A),y=wt((d.x+1)/A),b=_t(d.y/A),N=_t((d.y+1)/A);return function(z,G,T,O,H=0,U){const Q=[];if(!z.length||!T||!O)return Q;const W=(Ve,rt)=>{for(const dt of Ve)Q.push({polygon:dt,bounds:rt})},re=Math.ceil(Math.log2(T)),ue=Math.ceil(Math.log2(O)),Be=re-ue,Te=[];for(let Ve=0;Ve<Math.abs(Be);Ve++)Te.push(Be>0?0:1);for(let Ve=0;Ve<Math.min(re,ue);Ve++)Te.push(0),Te.push(1);let he=z;if(he=qb(he,G[0].y-H,G[1].y+H,1),he=qb(he,G[0].x-H,G[1].x+H,0),!he.length)return Q;const ke=[];for(Te.length?ke.push({polygons:he,bounds:G,depth:0}):W(he,G);ke.length;){const Ve=ke.pop(),rt=Ve.depth,dt=Te[rt],ft=Ve.bounds[0],at=Ve.bounds[1],Et=dt===0?ft.x:ft.y,yt=dt===0?at.x:at.y,Nt=U?U(dt,Et,yt):.5*(Et+yt),zt=qb(Ve.polygons,Et-H,Nt+H,dt),Gt=qb(Ve.polygons,Nt-H,yt+H,dt);if(zt.length){const $t=[ft,new Ze(dt===0?Nt:at.x,dt===1?Nt:at.y)];Te.length>rt+1?ke.push({polygons:zt,bounds:$t,depth:rt+1}):W(zt,$t)}if(Gt.length){const $t=[new Ze(dt===0?Nt:ft.x,dt===1?Nt:ft.y),at];Te.length>rt+1?ke.push({polygons:Gt,bounds:$t,depth:rt+1}):W(Gt,$t)}}return Q}(f,a,Math.ceil((y-_)/11.25),Math.ceil((b-N)/11.25),1,(z,G,T)=>{if(z===0)return .5*(G+T);{const O=_t((d.y+G/Yr)/A);return(gt(.5*(_t((d.y+T/Yr)/A)+O))*A-d.y)*Yr}})}function LY(f,a,d,A,_,y){const b=Math.pow(2,A.z-_.z);for(let N=0;N<d;N++){let z=f.int16[2*(N+a)+0],G=f.int16[2*(N+a)+1];z=(z+_.x*Yr)*b-A.x*Yr,G=(G+_.y*Yr)*b-A.y*Yr,y.push(new Ze(z,G))}}let rj,nj;function sv(f,a){return f.x*a.x+f.y*a.y}function ij(f,a){if(f.length===1){let d=0;const A=a[d++];let _;for(;!_||A.equals(_);)if(_=a[d++],!_)return 1/0;for(;d<a.length;d++){const y=a[d],b=f[0],N=_.sub(A),z=y.sub(A),G=b.sub(A),T=sv(N,N),O=sv(N,z),H=sv(z,z),U=sv(G,N),Q=sv(G,z),W=T*H-O*O,re=(H*U-O*Q)/W,ue=(T*Q-O*U)/W,Be=A.z*(1-re-ue)+_.z*re+y.z*ue;if(isFinite(Be))return Be}return 1/0}{let d=1/0;for(const A of a)d=Math.min(d,A.z);return d}}function sj(f,a,d,A,_,y,b,N){const z=b*_.getElevationAt(f,a,!0,!0),G=y[0]!==0,T=G?y[1]===0?b*(y[0]/7-450):b*function(O,H,U){const Q=Math.floor(H[0]/8),W=Math.floor(H[1]/8),re=10*(H[0]-8*Q),ue=10*(H[1]-8*W),Be=O.getElevationAt(Q,W,!0,!0),Te=O.getMeterToDEM(U),he=Math.floor(.5*(re*Te-1)),ke=Math.floor(.5*(ue*Te-1)),Ve=O.tileCoordToPixel(Q,W),rt=2*he+1,dt=2*ke+1,ft=function(Gt,$t,Zt,vr,tr){return[Gt.getElevationAtPixel($t,Zt,!0),Gt.getElevationAtPixel($t+tr,Zt,!0),Gt.getElevationAtPixel($t,Zt+tr,!0),Gt.getElevationAtPixel($t+vr,Zt+tr,!0)]}(O,Ve.x-he,Ve.y-ke,rt,dt),at=Math.abs(ft[0]-ft[1]),Et=Math.abs(ft[2]-ft[3]),yt=Math.abs(ft[0]-ft[2])+Math.abs(ft[1]-ft[3]),Nt=Math.min(.25,.5*Te*(at+Et)/rt),zt=Math.min(.25,.5*Te*yt/dt);return Be+Math.max(Nt*re,zt*ue)}(_,y,N):z;return{base:z+(d===0)?-1:d,top:G?Math.max(T+A,z+d+2):z+A}}je(Yb,"FillExtrusionBucket",{omit:["layers","features"]}),je(GP,"PartData"),je(VP,"FootprintSegment"),je($P,"BorderCentroidData"),je(WP,"GroundEffect");const IY=as([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),NY=as([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:FY}=IY,PY=as([{name:"a_packed",components:4,type:"Float32"}]),{members:jY}=PY,MY=as([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:kY}=MY;class oj{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.image=new PA({width:a,height:d}),this.positions={},this.uploaded=!1}getDash(a,d){const A=this.getKey(a,d);return this.positions[A]}trim(){const a=this.width,d=this.height=Gr(this.nextRow);this.image.resize({width:a,height:d})}getKey(a,d){return a.join(",")+d}getDashRanges(a,d,A){const _=[];let y=a.length%2==1?-a[a.length-1]*A:0,b=a[0]*A,N=!0;_.push({left:y,right:b,isDash:N,zeroLength:a[0]===0});let z=a[0];for(let G=1;G<a.length;G++){N=!N;const T=a[G];y=z*A,z+=T,b=z*A,_.push({left:y,right:b,isDash:N,zeroLength:T===0})}return _}addRoundDash(a,d,A){const _=d/2;for(let y=-A;y<=A;y++){const b=this.width*(this.nextRow+A+y);let N=0,z=a[N];for(let G=0;G<this.width;G++){G/z.right>1&&(z=a[++N]);const T=Math.abs(G-z.left),O=Math.abs(G-z.right),H=Math.min(T,O);let U;const Q=y/A*(_+1);if(z.isDash){const W=_-Math.abs(Q);U=Math.sqrt(H*H+W*W)}else U=_-Math.sqrt(H*H+Q*Q);this.image.data[b+G]=Math.max(0,Math.min(255,U+128))}}}addRegularDash(a,d){for(let z=a.length-1;z>=0;--z){const G=a[z],T=a[z+1];G.zeroLength?a.splice(z,1):T&&T.isDash===G.isDash&&(T.left=G.left,a.splice(z,1))}const A=a[0],_=a[a.length-1];A.isDash===_.isDash&&(A.left=_.left-this.width,_.right=A.right+this.width);const y=this.width*this.nextRow;let b=0,N=a[b];for(let z=0;z<this.width;z++){z/N.right>1&&(N=a[++b]);const G=Math.abs(z-N.left),T=Math.abs(z-N.right),O=Math.min(G,T);this.image.data[y+z]=Math.max(0,Math.min(255,(N.isDash?O:-O)+d+128))}}addDash(a,d){const A=this.getKey(a,d);if(this.positions[A])return this.positions[A];const _=d==="round",y=_?7:0,b=2*y+1;if(this.nextRow+b>this.height)return jn("LineAtlas out of space"),null;a.length===0&&a.push(1);let N=0;for(let T=0;T<a.length;T++)a[T]<0&&(jn("Negative value is found in line dasharray, replacing values with 0"),a[T]=0),N+=a[T];if(N!==0){const T=this.width/N,O=this.getDashRanges(a,this.width,T);_?this.addRoundDash(O,T,y):this.addRegularDash(O,d==="square"?.5*T:0)}const z=this.nextRow+y;this.nextRow+=b;const G={tl:[z,y],br:[N,0]};return this.positions[A]=G,G}}je(oj,"LineAtlas");const DY=Q0.VectorTileFeature.types,OY=Math.cos(Math.PI/180*37.5),RY=Math.cos(Math.PI/180*5);class KS{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.fqid),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new rh,this.layoutVertexArray2=new El,this.patternVertexArray=new Lu,this.indexArray=new Ka,this.programConfigurations=new Jf(a.layers,{zoom:a.zoom,lut:a.lut}),this.segments=new La,this.maxLineLength=0,this.zOffsetVertexArray=new Ih,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id),this.tessellationStep=a.tessellationStep?a.tessellationStep:Yr/64}updateFootprints(a,d){}populate(a,d,A,_){this.hasPattern=DS("line",this.layers,d);const y=this.layers[0].layout.get("line-sort-key"),b=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!b.isConstant()||!!b.constantOr(0);const N=[];for(const{feature:O,id:H,index:U,sourceLayerIndex:Q}of a){const W=this.layers[0]._featureFilter.needGeometry,re=nn(O,W);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom),re,A))continue;const ue=y?y.evaluate(re,{},A):void 0,Be={id:H,properties:O.properties,type:O.type,sourceLayerIndex:Q,index:U,geometry:W?re.geometry:en(O,A,_),patterns:{},sortKey:ue};N.push(Be)}y&&N.sort((O,H)=>O.sortKey-H.sortKey);const{lineAtlas:z,featureIndex:G}=d,T=this.addConstantDashes(z);for(const O of N){const{geometry:H,index:U,sourceLayerIndex:Q}=O;if(T&&this.addFeatureDashes(O,z),this.hasPattern){const W=OS("line",this.layers,O,this.zoom,d);this.patternFeatures.push(W)}else this.addFeature(O,H,U,A,z.positions,d.availableImages,d.brightness);G.insert(a[U].feature,H,U,Q,this.index)}}addConstantDashes(a){let d=!1;for(const A of this.layers){const _=A.paint.get("line-dasharray").value,y=A.layout.get("line-cap").value;if(_.kind!=="constant"||y.kind!=="constant")d=!0;else{const b=y.value,N=_.value;if(!N)continue;a.addDash(N,b)}}return d}addFeatureDashes(a,d){const A=this.zoom;for(const _ of this.layers){const y=_.paint.get("line-dasharray").value,b=_.layout.get("line-cap").value;if(y.kind==="constant"&&b.kind==="constant")continue;let N,z;if(y.kind==="constant"){if(N=y.value,!N)continue}else N=y.evaluate({zoom:A},a);z=b.kind==="constant"?b.value:b.evaluate({zoom:A},a),d.addDash(N,z),a.patterns[_.id]=d.getKey(N,z)}}update(a,d,A,_,y){const b=Object.keys(a).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,d,b?this.stateDependentLayers:this.layers,A,_,y)}addFeatures(a,d,A,_,y,b){for(const N of this.patternFeatures)this.addFeature(N,N.geometry,N.index,d,A,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,jY)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=a.createVertexBuffer(this.patternVertexArray,kY)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,NY.members,!0)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,FY),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,d,A,_,y,b,N){const z=this.layers[0].layout,G=z.get("line-join").evaluate(a,{}),T=z.get("line-cap").evaluate(a,{}),O=z.get("line-miter-limit"),H=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const U of d)this.addLine(U,a,_,G,T,O,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,A,y,b,_,N)}addLine(a,d,A,_,y,b,N){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const z={zoom:this.zoom,lineProgress:void 0},G=this.layers[0].layout,T=_==="none";if(this.patternJoinNone=this.hasPattern&&T,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ve=0;Ve<a.length-1;Ve++)this.totalDistance+=a[Ve].dist(a[Ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const O=DY[d.type]==="Polygon";let H=a.length;for(;H>=2&&a[H-1].equals(a[H-2]);)H--;let U=0;for(;U<H-1&&a[U].equals(a[U+1]);)U++;if(H<(O?3:2))return;_==="bevel"&&(b=1.05);const Q=this.overscaling<=16?15*Yr/(512*this.overscaling):0,W=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let re,ue,Be,Te,he,ke;this.e1=this.e2=-1,O&&(re=a[H-2],he=a[U].sub(re)._unit()._perp());for(let Ve=U;Ve<H;Ve++){if(Be=Ve===H-1?O?a[U+1]:void 0:a[Ve+1],Be&&a[Ve].equals(Be))continue;if(he&&(Te=he),re&&(ue=re),re=a[Ve],this.hasZOffset){const $t=G.get("line-z-offset").value;if($t.kind==="constant")ke=$t.value;else{if(this.lineClips){const Zt=this.totalDistance/(this.lineClips.end-this.lineClips.start);z.lineProgress=(Zt*this.lineClips.start+this.distance+(ue?ue.dist(re):0))/Zt}else jn(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),z.lineProgress=0;ke=$t.evaluate(z,d)}ke=ke||0}he=Be?Be.sub(re)._unit()._perp():Te,Te=Te||he;const rt=ue&&Be;let dt=rt?_:O||T?"butt":y;const ft=Te.x*he.x+Te.y*he.y;if(T){const $t=function(Zt){if(Zt.patternJoinNone){const vr=Zt.segmentPoints.length/2,tr=Zt.lineSoFar-Zt.segmentStart;for(let Br=0;Br<vr;++Br){const Ur=Zt.segmentPoints[2*Br+1],br=Math.round(Zt.segmentPoints[2*Br])+.5+.25*Ur;Zt.patternVertexArray.emplaceBack(br,tr,Zt.segmentStart),Zt.patternVertexArray.emplaceBack(br,tr,Zt.segmentStart)}Zt.segmentPoints.length=0}Zt.e1=Zt.e2=-1};if(rt&&ft<RY){this.updateDistance(ue,re),this.addCurrentVertex(re,Te,1,1,W,ke),$t(this),this.addCurrentVertex(re,he,-1,-1,W,ke);continue}if(ue){if(!Be){this.updateDistance(ue,re),this.addCurrentVertex(re,Te,1,1,W,ke),$t(this);continue}dt="miter"}}let at=Te.add(he);at.x===0&&at.y===0||at._unit();const Et=at.x*he.x+at.y*he.y,yt=Et!==0?1/Et:1/0,Nt=2*Math.sqrt(2-2*Et),zt=Et<OY&&ue&&Be,Gt=Te.x*he.y-Te.y*he.x>0;if(zt&&Ve>U){const $t=re.dist(ue);if($t>2*Q){const Zt=re.sub(re.sub(ue)._mult(Q/$t)._round());this.updateDistance(ue,Zt),this.addCurrentVertex(Zt,Te,0,0,W,ke),ue=Zt}}if(rt&&dt==="round"&&(yt<N?dt="miter":yt<=2&&(dt="fakeround")),dt==="miter"&&yt>b&&(dt="bevel"),dt==="bevel"&&(yt>2&&(dt="flipbevel"),yt<b&&(dt="miter")),ue&&this.updateDistance(ue,re),dt==="miter")at._mult(yt),this.addCurrentVertex(re,at,0,0,W,ke);else if(dt==="flipbevel"){if(yt>100)at=he.mult(-1);else{const $t=yt*Te.add(he).mag()/Te.sub(he).mag();at._perp()._mult($t*(Gt?-1:1))}this.addCurrentVertex(re,at,0,0,W,ke),this.addCurrentVertex(re,at.mult(-1),0,0,W,ke)}else if(dt==="bevel"||dt==="fakeround"){const $t=-Math.sqrt(yt*yt-1),Zt=Gt?$t:0,vr=Gt?0:$t;if(ue&&this.addCurrentVertex(re,Te,Zt,vr,W,ke),dt==="fakeround"){const tr=Math.round(180*Nt/Math.PI/20);for(let Br=1;Br<tr;Br++){let Ur=Br/tr;if(Ur!==.5){const Cn=Ur-.5;Ur+=Ur*Cn*(Ur-1)*((1.0904+ft*(ft*(3.55645-1.43519*ft)-3.2452))*Cn*Cn+(.848013+ft*(.215638*ft-1.06021)))}const br=he.sub(Te)._mult(Ur)._add(Te)._unit()._mult(Gt?-1:1);this.addHalfVertex(re,br.x,br.y,!1,Gt,0,W,ke)}}Be&&this.addCurrentVertex(re,he,-Zt,-vr,W,ke)}else dt==="butt"?this.addCurrentVertex(re,at,0,0,W,ke):dt==="square"?(ue||this.addCurrentVertex(re,at,-1,-1,W,ke),this.addCurrentVertex(re,at,0,0,W,ke),ue&&this.addCurrentVertex(re,at,1,1,W,ke)):dt==="round"&&(ue&&(this.addCurrentVertex(re,Te,0,0,W,ke),this.addCurrentVertex(re,Te,1,1,W,ke,!0)),Be&&(this.addCurrentVertex(re,he,-1,-1,W,ke,!0),this.addCurrentVertex(re,he,0,0,W,ke)));if(zt&&Ve<H-1){const $t=re.dist(Be);if($t>2*Q){const Zt=re.add(Be.sub(re)._mult(Q/$t)._round());this.updateDistance(re,Zt),this.addCurrentVertex(Zt,he,0,0,W,ke),re=Zt}}}}addVerticesTo(a,d,A,_,y,b,N,z,G,T){const O=(d.w-a.w)/this.tessellationStep|0;if(O>1){this.lineSoFar=a.w;const H=(d.x-a.x)/O,U=(d.y-a.y)/O,Q=(d.z-a.z)/O,W=(d.w-a.w)/O;for(let re=1;re<O;++re)a.x+=H,a.y+=U,a.z+=Q,this.lineSoFar+=W,this.addHalfVertex(a,A,_,T,!1,N,G,a.z),this.addHalfVertex(a,y,b,T,!0,-z,G,a.z)}this.lineSoFar=d.w,this.addHalfVertex(d,A,_,T,!1,N,G,d.z),this.addHalfVertex(d,y,b,T,!0,-z,G,d.z)}addCurrentVertex(a,d,A,_,y,b,N=!1){const z=d.x+d.y*A,G=d.y-d.x*A,T=d.y*_-d.x,O=-d.y-d.x*_;if(b!=null){const U=Yr+10,Q=b,W=new FP(a.x,a.y,Q,this.lineSoFar),re=aj(a,-10,U),ue=this.lineSoFar;if(this.currentVertex)if(re){const Be=this.currentVertexIsOutside,Te=this.currentVertex,he=new FP(a.x,a.y,Q,this.lineSoFar);jP(Te,he,-10,U),aj(he,-10,U)||(Be&&(this.e1=this.e2=-1,this.lineSoFar=Te.w,this.addHalfVertex(Te,z,G,N,!1,A,y,Te.z),this.addHalfVertex(Te,T,O,N,!0,-_,y,Te.z)),this.addVerticesTo(Te,he,z,G,T,O,A,_,y,N))}else{const Be=this.currentVertex;this.currentVertexIsOutside&&(jP(Be,W,-10,U),this.e1=this.e2=-1,this.lineSoFar=Be.w,this.addHalfVertex(Be,z,G,N,!1,A,y,Be.z),this.addHalfVertex(Be,T,O,N,!0,-_,y,Be.z)),this.addVerticesTo(Be,W,z,G,T,O,A,_,y,N)}else re||(this.addHalfVertex(a,z,G,N,!1,A,y,b),this.addHalfVertex(a,T,O,N,!0,-_,y,b));this.currentVertex=W,this.currentVertexIsOutside=re,this.lineSoFar=ue}else this.addHalfVertex(a,z,G,N,!1,A,y,b),this.addHalfVertex(a,T,O,N,!0,-_,y,b)}addHalfVertex({x:a,y:d},A,_,y,b,N,z,G){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),b||this.segmentPoints.push(this.lineSoFar-this.segmentStart,N)),this.layoutVertexArray.emplaceBack((a<<1)+(y?1:0),(d<<1)+(b?1:0),Math.round(63*A)+128,Math.round(63*_)+128,1+(N===0?0:N<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),z.primitiveLength++),b?this.e2=T:this.e1=T,G!=null&&this.zOffsetVertexArray.emplaceBack(G)}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,d){this.distance+=a.dist(d),this.updateScaledDistance()}}function aj(f,a,d){return f.x<a||f.x>d||f.y<a||f.y>d}let lj,cj;function uj(f,a,d){return a*(Yr/(f.tileSize*Math.pow(2,d-f.tileID.overscaledZ)))}function dj(f,a){return 1/uj(f,1,a.tileZoom)}function hj(f,a,d,A){return f.translatePosMatrix(A||a.tileID.projMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}je(KS,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const fj=f=>{const a=[];pj(f)&&a.push("RENDER_LINE_DASH"),f.paint.get("line-gradient")&&a.push("RENDER_LINE_GRADIENT");const d=f.paint.get("line-trim-offset");d[0]===0&&d[1]===0||a.push("RENDER_LINE_TRIM_OFFSET"),f.paint.get("line-border-width").constantOr(1)!==0&&a.push("RENDER_LINE_BORDER");const A=f.layout.get("line-join").constantOr("miter")==="none",_=!!f.paint.get("line-pattern").constantOr(1);return A&&_&&a.push("LINE_JOIN_NONE"),a};function pj(f){const a=f.paint.get("line-dasharray").value;return a.value||a.kind!=="constant"}let XS;const Aj=()=>XS||(XS={layout:lj||(lj=new Es({"line-cap":new In(cr.layout_line["line-cap"]),"line-join":new In(cr.layout_line["line-join"]),"line-miter-limit":new jr(cr.layout_line["line-miter-limit"]),"line-round-limit":new jr(cr.layout_line["line-round-limit"]),"line-sort-key":new In(cr.layout_line["line-sort-key"]),"line-z-offset":new In(cr.layout_line["line-z-offset"]),visibility:new jr(cr.layout_line.visibility)})),paint:cj||(cj=new Es({"line-opacity":new In(cr.paint_line["line-opacity"]),"line-color":new In(cr.paint_line["line-color"]),"line-translate":new jr(cr.paint_line["line-translate"]),"line-translate-anchor":new jr(cr.paint_line["line-translate-anchor"]),"line-width":new In(cr.paint_line["line-width"]),"line-gap-width":new In(cr.paint_line["line-gap-width"]),"line-offset":new In(cr.paint_line["line-offset"]),"line-blur":new In(cr.paint_line["line-blur"]),"line-dasharray":new In(cr.paint_line["line-dasharray"]),"line-pattern":new In(cr.paint_line["line-pattern"]),"line-gradient":new ya(cr.paint_line["line-gradient"]),"line-trim-offset":new jr(cr.paint_line["line-trim-offset"]),"line-trim-fade-range":new jr(cr.paint_line["line-trim-fade-range"]),"line-trim-color":new jr(cr.paint_line["line-trim-color"]),"line-emissive-strength":new jr(cr.paint_line["line-emissive-strength"]),"line-border-width":new In(cr.paint_line["line-border-width"]),"line-border-color":new In(cr.paint_line["line-border-color"]),"line-occlusion-opacity":new jr(cr.paint_line["line-occlusion-opacity"])}))},XS);class UY extends In{possiblyEvaluate(a,d){return d=new Qi(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,transition:d.transition}),super.possiblyEvaluate(a,d)}evaluate(a,d,A,_){return d=ln({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(a,d,A,_)}}let ov;function mj(f,a){return a>0?a+2*f:f}const zY=as([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),QY=as([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),HY=as([{name:"a_projected_pos",components:4,type:"Float32"}],4);as([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const VY=as([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),GY=as([{name:"a_texb",components:2,type:"Uint16"}]),$Y=as([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),qY=as([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);as([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const gj=as([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),WY=as([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);as([{name:"triangle",components:3,type:"Uint16"}]),as([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),as([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),as([{type:"Float32",name:"offsetX"}]),as([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var zc=24;const Af=128;function YS(f,a){const{expression:d}=a;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Qi(f+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:A,interpolationType:_}=d;let y=0;for(;y<A.length&&A[y]<=f;)y++;y=Math.max(0,y-1);let b=y;for(;b<A.length&&A[b]<f+1;)b++;b=Math.min(A.length-1,b);const N=A[y],z=A[b];return d.kind==="composite"?{kind:"composite",minZoom:N,maxZoom:z,interpolationType:_}:{kind:"camera",minZoom:N,maxZoom:z,minSize:d.evaluate(new Qi(N)),maxSize:d.evaluate(new Qi(z)),interpolationType:_}}}function Zb(f,{uSize:a,uSizeT:d},{lowerSize:A,upperSize:_}){return f.kind==="source"?A/Af:f.kind==="composite"?Sr(A/Af,_/Af,d):a}function H0(f,a){let d=0,A=0;if(f.kind==="constant")A=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:_,minZoom:y,maxZoom:b}=f,N=_?Ir(Wl.interpolationFactor(_,a,y,b),0,1):0;f.kind==="camera"?A=Sr(f.minSize,f.maxSize,N):d=N}return{uSizeT:d,uSize:A}}var KY=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Af,evaluateSizeForFeature:Zb,evaluateSizeForZoom:H0,getSizeData:YS});function XY(f,a,d){return f.sections.forEach(A=>{A.text=function(_,y,b){const N=y.layout.get("text-transform").evaluate(b,{});return N==="uppercase"?_=_.toLocaleUpperCase():N==="lowercase"&&(_=_.toLocaleLowerCase()),zi.applyArabicShaping&&(_=zi.applyArabicShaping(_)),_}(A.text,a,d)}),f}const av={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function YY(f){return f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""}function ZY(f){return f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""}var yj,ZS,vj,JS={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function JY(){return yj||(yj=1,JS.read=function(f,a,d,A,_){var y,b,N=8*_-A-1,z=(1<<N)-1,G=z>>1,T=-7,O=d?_-1:0,H=d?-1:1,U=f[a+O];for(O+=H,y=U&(1<<-T)-1,U>>=-T,T+=N;T>0;y=256*y+f[a+O],O+=H,T-=8);for(b=y&(1<<-T)-1,y>>=-T,T+=A;T>0;b=256*b+f[a+O],O+=H,T-=8);if(y===0)y=1-G;else{if(y===z)return b?NaN:1/0*(U?-1:1);b+=Math.pow(2,A),y-=G}return(U?-1:1)*b*Math.pow(2,y-A)},JS.write=function(f,a,d,A,_,y){var b,N,z,G=8*y-_-1,T=(1<<G)-1,O=T>>1,H=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=A?0:y-1,Q=A?1:-1,W=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(N=isNaN(a)?1:0,b=T):(b=Math.floor(Math.log(a)/Math.LN2),a*(z=Math.pow(2,-b))<1&&(b--,z*=2),(a+=b+O>=1?H/z:H*Math.pow(2,1-O))*z>=2&&(b++,z/=2),b+O>=T?(N=0,b=T):b+O>=1?(N=(a*z-1)*Math.pow(2,_),b+=O):(N=a*Math.pow(2,O-1)*Math.pow(2,_),b=0));_>=8;f[d+U]=255&N,U+=Q,N/=256,_-=8);for(b=b<<_|N,G+=_;G>0;f[d+U]=255&b,U+=Q,b/=256,G-=8);f[d+U-Q]|=128*W}),JS}function xj(){if(vj)return ZS;vj=1,ZS=a;var f=JY();function a(he){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(he)?he:new Uint8Array(he||0),this.pos=0,this.type=0,this.length=this.buf.length}a.Varint=0,a.Fixed64=1,a.Bytes=2,a.Fixed32=5;var d=4294967296,A=1/d,_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function y(he){return he.type===a.Bytes?he.readVarint()+he.pos:he.pos+1}function b(he,ke,Ve){return Ve?4294967296*ke+(he>>>0):4294967296*(ke>>>0)+(he>>>0)}function N(he,ke,Ve){var rt=ke<=16383?1:ke<=2097151?2:ke<=268435455?3:Math.floor(Math.log(ke)/(7*Math.LN2));Ve.realloc(rt);for(var dt=Ve.pos-1;dt>=he;dt--)Ve.buf[dt+rt]=Ve.buf[dt]}function z(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeVarint(he[Ve])}function G(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeSVarint(he[Ve])}function T(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeFloat(he[Ve])}function O(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeDouble(he[Ve])}function H(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeBoolean(he[Ve])}function U(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeFixed32(he[Ve])}function Q(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeSFixed32(he[Ve])}function W(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeFixed64(he[Ve])}function re(he,ke){for(var Ve=0;Ve<he.length;Ve++)ke.writeSFixed64(he[Ve])}function ue(he,ke){return(he[ke]|he[ke+1]<<8|he[ke+2]<<16)+16777216*he[ke+3]}function Be(he,ke,Ve){he[Ve]=ke,he[Ve+1]=ke>>>8,he[Ve+2]=ke>>>16,he[Ve+3]=ke>>>24}function Te(he,ke){return(he[ke]|he[ke+1]<<8|he[ke+2]<<16)+(he[ke+3]<<24)}return a.prototype={destroy:function(){this.buf=null},readFields:function(he,ke,Ve){for(Ve=Ve||this.length;this.pos<Ve;){var rt=this.readVarint(),dt=rt>>3,ft=this.pos;this.type=7&rt,he(dt,ke,this),this.pos===ft&&this.skip(rt)}return ke},readMessage:function(he,ke){return this.readFields(he,ke,this.readVarint()+this.pos)},readFixed32:function(){var he=ue(this.buf,this.pos);return this.pos+=4,he},readSFixed32:function(){var he=Te(this.buf,this.pos);return this.pos+=4,he},readFixed64:function(){var he=ue(this.buf,this.pos)+ue(this.buf,this.pos+4)*d;return this.pos+=8,he},readSFixed64:function(){var he=ue(this.buf,this.pos)+Te(this.buf,this.pos+4)*d;return this.pos+=8,he},readFloat:function(){var he=f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,he},readDouble:function(){var he=f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,he},readVarint:function(he){var ke,Ve,rt=this.buf;return ke=127&(Ve=rt[this.pos++]),Ve<128?ke:(ke|=(127&(Ve=rt[this.pos++]))<<7,Ve<128?ke:(ke|=(127&(Ve=rt[this.pos++]))<<14,Ve<128?ke:(ke|=(127&(Ve=rt[this.pos++]))<<21,Ve<128?ke:function(dt,ft,at){var Et,yt,Nt=at.buf;if(Et=(112&(yt=Nt[at.pos++]))>>4,yt<128||(Et|=(127&(yt=Nt[at.pos++]))<<3,yt<128)||(Et|=(127&(yt=Nt[at.pos++]))<<10,yt<128)||(Et|=(127&(yt=Nt[at.pos++]))<<17,yt<128)||(Et|=(127&(yt=Nt[at.pos++]))<<24,yt<128)||(Et|=(1&(yt=Nt[at.pos++]))<<31,yt<128))return b(dt,Et,ft);throw new Error("Expected varint not more than 10 bytes")}(ke|=(15&(Ve=rt[this.pos]))<<28,he,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var he=this.readVarint();return he%2==1?(he+1)/-2:he/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var he=this.readVarint()+this.pos,ke=this.pos;return this.pos=he,he-ke>=12&&_?function(Ve,rt,dt){return _.decode(Ve.subarray(rt,dt))}(this.buf,ke,he):function(Ve,rt,dt){for(var ft="",at=rt;at<dt;){var Et,yt,Nt,zt=Ve[at],Gt=null,$t=zt>239?4:zt>223?3:zt>191?2:1;if(at+$t>dt)break;$t===1?zt<128&&(Gt=zt):$t===2?(192&(Et=Ve[at+1]))==128&&(Gt=(31&zt)<<6|63&Et)<=127&&(Gt=null):$t===3?(yt=Ve[at+2],(192&(Et=Ve[at+1]))==128&&(192&yt)==128&&((Gt=(15&zt)<<12|(63&Et)<<6|63&yt)<=2047||Gt>=55296&&Gt<=57343)&&(Gt=null)):$t===4&&(yt=Ve[at+2],Nt=Ve[at+3],(192&(Et=Ve[at+1]))==128&&(192&yt)==128&&(192&Nt)==128&&((Gt=(15&zt)<<18|(63&Et)<<12|(63&yt)<<6|63&Nt)<=65535||Gt>=1114112)&&(Gt=null)),Gt===null?(Gt=65533,$t=1):Gt>65535&&(Gt-=65536,ft+=String.fromCharCode(Gt>>>10&1023|55296),Gt=56320|1023&Gt),ft+=String.fromCharCode(Gt),at+=$t}return ft}(this.buf,ke,he)},readBytes:function(){var he=this.readVarint()+this.pos,ke=this.buf.subarray(this.pos,he);return this.pos=he,ke},readPackedVarint:function(he,ke){if(this.type!==a.Bytes)return he.push(this.readVarint(ke));var Ve=y(this);for(he=he||[];this.pos<Ve;)he.push(this.readVarint(ke));return he},readPackedSVarint:function(he){if(this.type!==a.Bytes)return he.push(this.readSVarint());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readSVarint());return he},readPackedBoolean:function(he){if(this.type!==a.Bytes)return he.push(this.readBoolean());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readBoolean());return he},readPackedFloat:function(he){if(this.type!==a.Bytes)return he.push(this.readFloat());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readFloat());return he},readPackedDouble:function(he){if(this.type!==a.Bytes)return he.push(this.readDouble());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readDouble());return he},readPackedFixed32:function(he){if(this.type!==a.Bytes)return he.push(this.readFixed32());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readFixed32());return he},readPackedSFixed32:function(he){if(this.type!==a.Bytes)return he.push(this.readSFixed32());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readSFixed32());return he},readPackedFixed64:function(he){if(this.type!==a.Bytes)return he.push(this.readFixed64());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readFixed64());return he},readPackedSFixed64:function(he){if(this.type!==a.Bytes)return he.push(this.readSFixed64());var ke=y(this);for(he=he||[];this.pos<ke;)he.push(this.readSFixed64());return he},skip:function(he){var ke=7&he;if(ke===a.Varint)for(;this.buf[this.pos++]>127;);else if(ke===a.Bytes)this.pos=this.readVarint()+this.pos;else if(ke===a.Fixed32)this.pos+=4;else{if(ke!==a.Fixed64)throw new Error("Unimplemented type: "+ke);this.pos+=8}},writeTag:function(he,ke){this.writeVarint(he<<3|ke)},realloc:function(he){for(var ke=this.length||16;ke<this.pos+he;)ke*=2;if(ke!==this.length){var Ve=new Uint8Array(ke);Ve.set(this.buf),this.buf=Ve,this.length=ke}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(he){this.realloc(4),Be(this.buf,he,this.pos),this.pos+=4},writeSFixed32:function(he){this.realloc(4),Be(this.buf,he,this.pos),this.pos+=4},writeFixed64:function(he){this.realloc(8),Be(this.buf,-1&he,this.pos),Be(this.buf,Math.floor(he*A),this.pos+4),this.pos+=8},writeSFixed64:function(he){this.realloc(8),Be(this.buf,-1&he,this.pos),Be(this.buf,Math.floor(he*A),this.pos+4),this.pos+=8},writeVarint:function(he){(he=+he||0)>268435455||he<0?function(ke,Ve){var rt,dt;if(ke>=0?(rt=ke%4294967296|0,dt=ke/4294967296|0):(dt=~(-ke/4294967296),4294967295^(rt=~(-ke%4294967296))?rt=rt+1|0:(rt=0,dt=dt+1|0)),ke>=18446744073709552e3||ke<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ve.realloc(10),function(ft,at,Et){Et.buf[Et.pos++]=127&ft|128,ft>>>=7,Et.buf[Et.pos++]=127&ft|128,ft>>>=7,Et.buf[Et.pos++]=127&ft|128,ft>>>=7,Et.buf[Et.pos++]=127&ft|128,Et.buf[Et.pos]=127&(ft>>>=7)}(rt,0,Ve),function(ft,at){var Et=(7&ft)<<4;at.buf[at.pos++]|=Et|((ft>>>=3)?128:0),ft&&(at.buf[at.pos++]=127&ft|((ft>>>=7)?128:0),ft&&(at.buf[at.pos++]=127&ft|((ft>>>=7)?128:0),ft&&(at.buf[at.pos++]=127&ft|((ft>>>=7)?128:0),ft&&(at.buf[at.pos++]=127&ft|((ft>>>=7)?128:0),ft&&(at.buf[at.pos++]=127&ft)))))}(dt,Ve)}(he,this):(this.realloc(4),this.buf[this.pos++]=127&he|(he>127?128:0),he<=127||(this.buf[this.pos++]=127&(he>>>=7)|(he>127?128:0),he<=127||(this.buf[this.pos++]=127&(he>>>=7)|(he>127?128:0),he<=127||(this.buf[this.pos++]=he>>>7&127))))},writeSVarint:function(he){this.writeVarint(he<0?2*-he-1:2*he)},writeBoolean:function(he){this.writeVarint(!!he)},writeString:function(he){he=String(he),this.realloc(4*he.length),this.pos++;var ke=this.pos;this.pos=function(rt,dt,ft){for(var at,Et,yt=0;yt<dt.length;yt++){if((at=dt.charCodeAt(yt))>55295&&at<57344){if(!Et){at>56319||yt+1===dt.length?(rt[ft++]=239,rt[ft++]=191,rt[ft++]=189):Et=at;continue}if(at<56320){rt[ft++]=239,rt[ft++]=191,rt[ft++]=189,Et=at;continue}at=Et-55296<<10|at-56320|65536,Et=null}else Et&&(rt[ft++]=239,rt[ft++]=191,rt[ft++]=189,Et=null);at<128?rt[ft++]=at:(at<2048?rt[ft++]=at>>6|192:(at<65536?rt[ft++]=at>>12|224:(rt[ft++]=at>>18|240,rt[ft++]=at>>12&63|128),rt[ft++]=at>>6&63|128),rt[ft++]=63&at|128)}return ft}(this.buf,he,this.pos);var Ve=this.pos-ke;Ve>=128&&N(ke,Ve,this),this.pos=ke-1,this.writeVarint(Ve),this.pos+=Ve},writeFloat:function(he){this.realloc(4),f.write(this.buf,he,this.pos,!0,23,4),this.pos+=4},writeDouble:function(he){this.realloc(8),f.write(this.buf,he,this.pos,!0,52,8),this.pos+=8},writeBytes:function(he){var ke=he.length;this.writeVarint(ke),this.realloc(ke);for(var Ve=0;Ve<ke;Ve++)this.buf[this.pos++]=he[Ve]},writeRawMessage:function(he,ke){this.pos++;var Ve=this.pos;he(ke,this);var rt=this.pos-Ve;rt>=128&&N(Ve,rt,this),this.pos=Ve-1,this.writeVarint(rt),this.pos+=rt},writeMessage:function(he,ke,Ve){this.writeTag(he,a.Bytes),this.writeRawMessage(ke,Ve)},writePackedVarint:function(he,ke){ke.length&&this.writeMessage(he,z,ke)},writePackedSVarint:function(he,ke){ke.length&&this.writeMessage(he,G,ke)},writePackedBoolean:function(he,ke){ke.length&&this.writeMessage(he,H,ke)},writePackedFloat:function(he,ke){ke.length&&this.writeMessage(he,T,ke)},writePackedDouble:function(he,ke){ke.length&&this.writeMessage(he,O,ke)},writePackedFixed32:function(he,ke){ke.length&&this.writeMessage(he,U,ke)},writePackedSFixed32:function(he,ke){ke.length&&this.writeMessage(he,Q,ke)},writePackedFixed64:function(he,ke){ke.length&&this.writeMessage(he,W,ke)},writePackedSFixed64:function(he,ke){ke.length&&this.writeMessage(he,re,ke)},writeBytesField:function(he,ke){this.writeTag(he,a.Bytes),this.writeBytes(ke)},writeFixed32Field:function(he,ke){this.writeTag(he,a.Fixed32),this.writeFixed32(ke)},writeSFixed32Field:function(he,ke){this.writeTag(he,a.Fixed32),this.writeSFixed32(ke)},writeFixed64Field:function(he,ke){this.writeTag(he,a.Fixed64),this.writeFixed64(ke)},writeSFixed64Field:function(he,ke){this.writeTag(he,a.Fixed64),this.writeSFixed64(ke)},writeVarintField:function(he,ke){this.writeTag(he,a.Varint),this.writeVarint(ke)},writeSVarintField:function(he,ke){this.writeTag(he,a.Varint),this.writeSVarint(ke)},writeStringField:function(he,ke){this.writeTag(he,a.Bytes),this.writeString(ke)},writeFloatField:function(he,ke){this.writeTag(he,a.Fixed32),this.writeFloat(ke)},writeDoubleField:function(he,ke){this.writeTag(he,a.Fixed64),this.writeDouble(ke)},writeBooleanField:function(he,ke){this.writeVarintField(he,!!ke)}},ZS}var Jb=m(xj());const eB=3;function eZ(f,a,d){a.glyphs=[],f===1&&d.readMessage(tZ,a)}function tZ(f,a,d){if(f===3){const{id:A,bitmap:_,width:y,height:b,left:N,top:z,advance:G}=d.readMessage(rZ,{});a.glyphs.push({id:A,bitmap:new PA({width:y+2*eB,height:b+2*eB},_),metrics:{width:y,height:b,left:N,top:z,advance:G}})}else f===4?a.ascender=d.readSVarint():f===5&&(a.descender=d.readSVarint())}function rZ(f,a,d){f===1?a.id=d.readVarint():f===2?a.bitmap=d.readBytes():f===3?a.width=d.readVarint():f===4?a.height=d.readVarint():f===5?a.left=d.readSVarint():f===6?a.top=d.readSVarint():f===7&&(a.advance=d.readVarint())}const _j=eB,sh={horizontal:1,vertical:2,horizontalOnly:3};class lv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,d){const A=new lv;return A.scale=a||1,A.fontStack=d,A}static forImage(a){const d=new lv;return d.imageName=a,d}}class V0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,d){const A=new V0;for(let _=0;_<a.sections.length;_++){const y=a.sections[_];y.image?A.addImageSection(y):A.addTextSection(y,d)}return A}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCodePoint(a){return this.text.codePointAt(a)}verticalizePunctuation(a){this.text=function(d,A){let _="";for(let y=0;y<d.length;y++){const b=d.charCodeAt(y+1)||null,N=d.charCodeAt(y-1)||null;_+=!A&&(b&&mr(b)&&!av[d[y+1]]||N&&mr(N)&&!av[d[y-1]])||!av[d[y]]?d[y]:av[d[y]]}return _}(this.text,a)}trim(){let a=0;for(let A=0;A<this.text.length&&ew[this.text.charCodeAt(A)];A++)a++;let d=this.text.length;for(let A=this.text.length-1;A>=0&&A>=a&&ew[this.text.charCodeAt(A)];A--)d--;this.text=this.text.substring(a,d),this.sectionIndex=this.sectionIndex.slice(a,d)}substring(a,d){const A=new V0;return A.text=this.text.substring(a,d),A.sectionIndex=this.sectionIndex.slice(a,d),A.sections=this.sections,A}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,d)=>Math.max(a,this.sections[d].scale),0)}addTextSection(a,d){this.text+=a.text,this.sections.push(lv.forText(a.scale,a.fontStack||d));const A=this.sections.length-1;for(let _=0;_<a.text.length;++_)this.sectionIndex.push(A)}addImageSection(a){const d=a.image?a.image.namePrimary:"";if(d.length===0)return void jn("Can't add FormattedSection with an empty image.");const A=this.getNextImageSectionCharCode();A?(this.text+=String.fromCodePoint(A),this.sections.push(lv.forImage(d)),this.sectionIndex.push(this.sections.length-1)):jn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tB(f,a,d,A,_,y,b,N,z,G,T,O,H,U,Q){const W=V0.fromFeature(f,_);O===sh.vertical&&W.verticalizePunctuation(H);let re=[];const ue=function(Ve,rt,dt,ft,at,Et){if(!Ve)return[];const yt=[],Nt=function(Zt,vr,tr,Br,Ur,br){let Cn=0;for(let hn=0;hn<Zt.length();hn++){const tn=Zt.getSection(hn);Cn+=bj(Zt.getCodePoint(hn),tn,Br,Ur,vr,br)}return Cn/Math.max(1,Math.ceil(Cn/tr))}(Ve,rt,dt,ft,at,Et),zt=Ve.text.indexOf("")>=0;let Gt=0;for(let Zt=0;Zt<Ve.length();Zt++){const vr=Ve.getSection(Zt),tr=Ve.getCodePoint(Zt);if(ew[tr]||(Gt+=bj(tr,vr,ft,at,rt,Et)),Zt<Ve.length()-1){const Br=!(($t=tr)<11904||!(Ft["Bopomofo Extended"]($t)||Ft.Bopomofo($t)||Ft["CJK Compatibility Forms"]($t)||Ft["CJK Compatibility Ideographs"]($t)||Ft["CJK Compatibility"]($t)||Ft["CJK Radicals Supplement"]($t)||Ft["CJK Strokes"]($t)||Ft["CJK Symbols and Punctuation"]($t)||Ft["CJK Unified Ideographs Extension A"]($t)||Ft["CJK Unified Ideographs"]($t)||Ft["Enclosed CJK Letters and Months"]($t)||Ft["Halfwidth and Fullwidth Forms"]($t)||Ft.Hiragana($t)||Ft["Ideographic Description Characters"]($t)||Ft["Kangxi Radicals"]($t)||Ft["Katakana Phonetic Extensions"]($t)||Ft.Katakana($t)||Ft["Vertical Forms"]($t)||Ft["Yi Radicals"]($t)||Ft["Yi Syllables"]($t)));(nZ[tr]||Br||vr.imageName)&&yt.push(Cj(Zt+1,Gt,Nt,yt,iZ(tr,Ve.getCodePoint(Zt+1),Br&&zt),!1))}}var $t;return Sj(Cj(Ve.length(),Gt,Nt,yt,0,!0))}(W,G,y,a,A,U),{processBidirectionalText:Be,processStyledBidirectionalText:Te}=zi;if(Be&&W.sections.length===1){const Ve=Be(W.toString(),ue);for(const rt of Ve){const dt=new V0;dt.text=rt,dt.sections=W.sections;for(let ft=0;ft<rt.length;ft++)dt.sectionIndex.push(0);re.push(dt)}}else if(Te){const Ve=Te(W.text,W.sectionIndex,ue);for(const rt of Ve){const dt=new V0;dt.text=rt[0],dt.sectionIndex=rt[1],dt.sections=W.sections,re.push(dt)}}else re=function(Ve,rt){const dt=[],ft=Ve.text;let at=0;for(const Et of rt)dt.push(Ve.substring(at,Et)),at=Et;return at<ft.length&&dt.push(Ve.substring(at,ft.length)),dt}(W,ue);const he=[],ke={positionedLines:he,text:W.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:O,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ve,rt,dt,ft,at,Et,yt,Nt,zt,Gt,$t,Zt){let vr=0,tr=0,Br=0;const Ur=Nt==="right"?1:Nt==="left"?0:.5;let br=!1;for(const wn of at){const Pn=wn.getSections();for(const ui of Pn){if(ui.imageName)continue;const Ri=rt[ui.fontStack];if(Ri&&(br=Ri.ascender!==void 0&&Ri.descender!==void 0,!br))break}if(!br)break}let Cn=0;for(const wn of at){wn.trim();const Pn=wn.getMaxScale(),ui=(Pn-1)*zc,Ri={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[Cn]=Ri;const Bi=Ri.positionedGlyphs;let Ei=0;if(!wn.length()){tr+=Et,++Cn;continue}let Wi=0,Xi=0;for(let Gs=0;Gs<wn.length();Gs++){const pi=wn.getSection(Gs),js=wn.getSectionIndex(Gs),Rs=wn.getCodePoint(Gs);let Oo=pi.scale,Da=null,dl=null,Oa=null,va=zc,hc=0;const xl=!(zt===sh.horizontal||!$t&&!lr(Rs)||$t&&(ew[Rs]||(hn=Rs,Ft.Arabic(hn)||Ft["Arabic Supplement"](hn)||Ft["Arabic Extended-A"](hn)||Ft["Arabic Presentation Forms-A"](hn)||Ft["Arabic Presentation Forms-B"](hn))));if(pi.imageName){const Qc=ft[pi.imageName];if(!Qc)continue;Oa=pi.imageName,Ve.iconsInText=Ve.iconsInText||!0,dl=Qc.paddedRect;const Fo=Qc.displaySize;Oo=Oo*zc/Zt,Da={width:Fo[0],height:Fo[1],left:0,top:-_j,advance:xl?Fo[1]:Fo[0],localGlyph:!1},hc=br?-Da.height*Oo:Pn*zc-17-Fo[1]*Oo,va=Da.advance;const Ad=(xl?Fo[0]:Fo[1])*Oo-zc*Pn;Ad>0&&Ad>Ei&&(Ei=Ad)}else{const Qc=dt[pi.fontStack];if(!Qc)continue;Qc[Rs]&&(dl=Qc[Rs]);const Fo=rt[pi.fontStack];if(!Fo)continue;const Ad=Fo.glyphs[Rs];if(!Ad)continue;if(Da=Ad.metrics,va=Rs!==8203?zc:0,br){const xf=Fo.ascender!==void 0?Math.abs(Fo.ascender):0,Dh=Fo.descender!==void 0?Math.abs(Fo.descender):0,Oh=(xf+Dh)*Oo;Wi<Oh&&(Wi=Oh,Xi=(xf-Dh)/2*Oo),hc=-xf*Oo}else hc=(Pn-Oo)*zc-17}xl?(Ve.verticalizable=!0,Bi.push({glyph:Rs,imageName:Oa,x:vr,y:tr+hc,vertical:xl,scale:Oo,localGlyph:Da.localGlyph,fontStack:pi.fontStack,sectionIndex:js,metrics:Da,rect:dl}),vr+=va*Oo+Gt):(Bi.push({glyph:Rs,imageName:Oa,x:vr,y:tr+hc,vertical:xl,scale:Oo,localGlyph:Da.localGlyph,fontStack:pi.fontStack,sectionIndex:js,metrics:Da,rect:dl}),vr+=Da.advance*Oo+Gt)}Bi.length!==0&&(Br=Math.max(vr-Gt,Br),br?Bj(Bi,Ur,Ei,Xi,Et*Pn/2):Bj(Bi,Ur,Ei,0,Et/2)),vr=0;const po=Et*Pn+Ei;Ri.lineOffset=Math.max(Ei,ui),tr+=po,++Cn}var hn;const tn=tr,{horizontalAlign:Vr,verticalAlign:Jn}=rB(yt);(function(wn,Pn,ui,Ri,Bi,Ei){const Wi=(Pn-ui)*Bi,Xi=-Ei*Ri;for(const po of wn)for(const Gs of po.positionedGlyphs)Gs.x+=Wi,Gs.y+=Xi})(Ve.positionedLines,Ur,Vr,Jn,Br,tn),Ve.top+=-Jn*tn,Ve.bottom=Ve.top+tn,Ve.left+=-Vr*Br,Ve.right=Ve.left+Br,Ve.hasBaseline=br}(ke,a,d,A,re,b,N,z,O,G,H,Q),!function(Ve){for(const rt of Ve)if(rt.positionedGlyphs.length!==0)return!1;return!0}(he)&&ke}const ew={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nZ={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function bj(f,a,d,A,_,y){if(a.imageName){const b=A[a.imageName];return b?b.displaySize[0]*a.scale*zc/y+_:0}{const b=d[a.fontStack],N=b&&b.glyphs[f];return N?N.metrics.advance*a.scale+_:0}}function wj(f,a,d,A){const _=Math.pow(f-a,2);return A?f<a?_/2:2*_:_+Math.abs(d)*d}function iZ(f,a,d){let A=0;return f===10&&(A-=1e4),d&&(A+=150),f!==40&&f!==65288||(A+=50),a!==41&&a!==65289||(A+=50),A}function Cj(f,a,d,A,_,y){let b=null,N=wj(a,d,_,y);for(const z of A){const G=wj(a-z.x,d,_,y)+z.badness;G<=N&&(b=z,N=G)}return{index:f,x:a,priorBreak:b,badness:N}}function Sj(f){return f?Sj(f.priorBreak).concat(f.index):[]}function rB(f){let a=.5,d=.5;switch(f){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:a,verticalAlign:d}}function Bj(f,a,d,A,_){if(!(a||d||A||_))return;const y=f.length-1,b=f[y],N=(b.x+b.metrics.advance*b.scale)*a;for(let z=0;z<=y;z++)f[z].x-=N,f[z].y+=d+A+_}function sZ(f,a,d,A){const{horizontalAlign:_,verticalAlign:y}=rB(A),b=d[0]-f.displaySize[0]*_,N=d[1]-f.displaySize[1]*y;return{imagePrimary:f,imageSecondary:a,top:N,bottom:N+f.displaySize[1],left:b,right:b+f.displaySize[0]}}function Ej(f,a,d,A,_,y){const b=f.imagePrimary;let N;if(b.content){const re=b.content,ue=b.pixelRatio||1;N=[re[0]/ue,re[1]/ue,b.displaySize[0]-re[2]/ue,b.displaySize[1]-re[3]/ue]}const z=a.left*y,G=a.right*y;let T,O,H,U;d==="width"||d==="both"?(U=_[0]+z-A[3],O=_[0]+G+A[1]):(U=_[0]+(z+G-b.displaySize[0])/2,O=U+b.displaySize[0]);const Q=a.top*y,W=a.bottom*y;return d==="height"||d==="both"?(T=_[1]+Q-A[0],H=_[1]+W+A[2]):(T=_[1]+(Q+W-b.displaySize[1])/2,H=T+b.displaySize[1]),{imagePrimary:b,imageSecondary:void 0,top:T,right:O,bottom:H,left:U,collisionPadding:N}}class zp extends Ze{constructor(a,d,A,_,y){super(a,d),this.angle=_,this.z=A,y!==void 0&&(this.segment=y)}clone(){return new zp(this.x,this.y,this.z,this.angle,this.segment)}}function Tj(f,a,d,A,_){if(a.segment===void 0)return!0;let y=a,b=a.segment+1,N=0;for(;N>-d/2;){if(b--,b<0)return!1;N-=f[b].dist(y),y=f[b]}N+=f[b].dist(f[b+1]),b++;const z=[];let G=0;for(;N<d/2;){const T=f[b],O=f[b+1];if(!O)return!1;let H=f[b-1].angleTo(T)-T.angleTo(O);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:N,angleDelta:H}),G+=H;N-z[0].distance>A;)G-=z.shift().angleDelta;if(G>_)return!1;b++,N+=T.dist(O)}return!0}function Lj(f){let a=0;for(let d=0;d<f.length-1;d++)a+=f[d].dist(f[d+1]);return a}function Ij(f,a,d){return f?.6*a*d:0}function Nj(f,a){return Math.max(f?f.right-f.left:0,a?a.right-a.left:0)}function oZ(f,a,d,A,_,y){const b=Ij(d,_,y),N=Nj(d,A)*y;let z=0;const G=Lj(f)/2;for(let T=0;T<f.length-1;T++){const O=f[T],H=f[T+1],U=O.dist(H);if(z+U>G){const Q=(G-z)/U,W=Sr(O.x,H.x,Q),re=Sr(O.y,H.y,Q),ue=new zp(W,re,0,H.angleTo(O),T);return!b||Tj(f,ue,N,b,a)?ue:void 0}z+=U}}function aZ(f,a,d,A,_,y,b,N,z){const G=Ij(A,y,b),T=Nj(A,_),O=T*b,H=f[0].x===0||f[0].x===z||f[0].y===0||f[0].y===z;return a-O<a/4&&(a=O+a/4),Fj(f,H?a/2*N%a:(T/2+2*y)*b*N%a,a,G,d,O,H,!1,z)}function Fj(f,a,d,A,_,y,b,N,z){const G=y/2,T=Lj(f);let O=0,H=a-d,U=[];for(let Q=0;Q<f.length-1;Q++){const W=f[Q],re=f[Q+1],ue=W.dist(re),Be=re.angleTo(W);for(;H+d<O+ue;){H+=d;const Te=(H-O)/ue,he=Sr(W.x,re.x,Te),ke=Sr(W.y,re.y,Te);if(he>=0&&he<z&&ke>=0&&ke<z&&H-G>=0&&H+G<=T){const Ve=new zp(he,ke,0,Be,Q);A&&!Tj(f,Ve,y,A,_)||U.push(Ve)}}O+=ue}return N||U.length||b||(U=Fj(f,O/2,d,A,_,y,b,!0,z)),U}function Pj(f,a,d,A,_){const y=[];for(let b=0;b<f.length;b++){const N=f[b];let z;for(let G=0;G<N.length-1;G++){let T=N[G],O=N[G+1];T.x<a&&O.x<a||(T.x<a?T=new Ze(a,T.y+(a-T.x)/(O.x-T.x)*(O.y-T.y))._round():O.x<a&&(O=new Ze(a,T.y+(a-T.x)/(O.x-T.x)*(O.y-T.y))._round()),T.y<d&&O.y<d||(T.y<d?T=new Ze(T.x+(d-T.y)/(O.y-T.y)*(O.x-T.x),d)._round():O.y<d&&(O=new Ze(T.x+(d-T.y)/(O.y-T.y)*(O.x-T.x),d)._round()),T.x>=A&&O.x>=A||(T.x>=A?T=new Ze(A,T.y+(A-T.x)/(O.x-T.x)*(O.y-T.y))._round():O.x>=A&&(O=new Ze(A,T.y+(A-T.x)/(O.x-T.x)*(O.y-T.y))._round()),T.y>=_&&O.y>=_||(T.y>=_?T=new Ze(T.x+(_-T.y)/(O.y-T.y)*(O.x-T.x),_)._round():O.y>=_&&(O=new Ze(T.x+(_-T.y)/(O.y-T.y)*(O.x-T.x),_)._round()),z&&T.equals(z[z.length-1])||(z=[T],y.push(z)),z.push(O)))))}}return y}function jj(f){let a=0,d=0;for(const b of f)a+=b.w*b.h,d=Math.max(d,b.w);f.sort((b,N)=>N.h-b.h);const A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),d),h:1/0}];let _=0,y=0;for(const b of f)for(let N=A.length-1;N>=0;N--){const z=A[N];if(!(b.w>z.w||b.h>z.h)){if(b.x=z.x,b.y=z.y,y=Math.max(y,b.y+b.h),_=Math.max(_,b.x+b.w),b.w===z.w&&b.h===z.h){const G=A.pop();N<A.length&&(A[N]=G)}else b.h===z.h?(z.x+=b.w,z.w-=b.w):b.w===z.w?(z.y+=b.h,z.h-=b.h):(A.push({x:z.x+b.w,y:z.y,w:z.w-b.w,h:b.h}),z.y+=b.h,z.h-=b.h);break}}return{w:_,h:y,fill:a/(_*y)||0}}je(zp,"Anchor");const cv=1;class nB{constructor(a,{pixelRatio:d,version:A,stretchX:_,stretchY:y,content:b},N){this.paddedRect=a,this.pixelRatio=d,this.stretchX=_,this.stretchY=y,this.content=b,this.version=A,this.padding=N}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class Mj{constructor(a,d,A){const _={},y={};this.haveRenderCallbacks=[];const b=[];this.addImages(a,_,cv,b),this.addImages(d,y,2,b);const{w:N,h:z}=jj(b),G=new du({width:N||1,height:z||1});for(const T in a){const O=a[T],H=_[T].paddedRect;du.copy(O.data,G,{x:0,y:0},{x:H.x+cv,y:H.y+cv},O.data,A,O.sdf)}for(const T in d){const O=d[T],H=y[T].paddedRect;let U=y[T].padding;const Q=H.x+U,W=H.y+U,re=O.data.width,ue=O.data.height;U=U>1?U-1:U,du.copy(O.data,G,{x:0,y:0},{x:Q,y:W},O.data,A),du.copy(O.data,G,{x:0,y:ue-U},{x:Q,y:W-U},{width:re,height:U},A),du.copy(O.data,G,{x:0,y:0},{x:Q,y:W+ue},{width:re,height:U},A),du.copy(O.data,G,{x:re-U,y:0},{x:Q-U,y:W},{width:U,height:ue},A),du.copy(O.data,G,{x:0,y:0},{x:Q+re,y:W},{width:U,height:ue},A),du.copy(O.data,G,{x:re-U,y:ue-U},{x:Q-U,y:W-U},{width:U,height:U},A),du.copy(O.data,G,{x:0,y:ue-U},{x:Q+re,y:W-U},{width:U,height:U},A),du.copy(O.data,G,{x:0,y:0},{x:Q+re,y:W+ue},{width:U,height:U},A),du.copy(O.data,G,{x:re-U,y:0},{x:Q-U,y:W+ue},{width:U,height:U},A)}this.image=G,this.iconPositions=_,this.patternPositions=y}addImages(a,d,A,_){for(const y in a){const b=a[y],N={x:0,y:0,w:b.data.width+2*A,h:b.data.height+2*A};_.push(N),d[y]=new nB(N,b,A),b.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(a,d,A){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(_=>a.hasImage(_,A)),a.dispatchRenderCallbacks(this.haveRenderCallbacks,A);for(const _ in a.getUpdatedImages(A))this.patchUpdatedImage(this.iconPositions[_],a.getImage(_,A),d),this.patchUpdatedImage(this.patternPositions[_],a.getImage(_,A),d)}patchUpdatedImage(a,d,A){if(!a||!d||a.version===d.version)return;a.version=d.version;const[_,y]=a.tl;A.update(d.data,{position:{x:_,y}})}}je(nB,"ImagePosition"),je(Mj,"ImageAtlas");const uv=1e20;function kj(f,a,d,A,_,y,b,N,z){for(let G=a;G<a+A;G++)Dj(f,d*y+G,y,_,b,N,z);for(let G=d;G<d+_;G++)Dj(f,G*y+a,1,A,b,N,z)}function Dj(f,a,d,A,_,y,b){y[0]=0,b[0]=-uv,b[1]=uv,_[0]=f[a];for(let N=1,z=0,G=0;N<A;N++){_[N]=f[a+N*d];const T=N*N;do{const O=y[z];G=(_[N]-_[O]+T-O*O)/(N-O)/2}while(G<=b[z]&&--z>-1);z++,y[z]=N,b[z]=G,b[z+1]=uv}for(let N=0,z=0;N<A;N++){for(;b[z+1]<N;)z++;const G=y[z],T=N-G;f[a+N*d]=_[G]+T*T}}const mf=2,iB={none:0,ideographs:1,all:2};class G0{constructor(a,d,A){this.requestManager=a,this.localGlyphMode=d,this.localFontFamily=A,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a,d){this.urls[d]=a}getGlyphs(a,d,A){const _=[],y=this.urls[d]||Lt.GLYPHS_URL;for(const b in a)for(const N of a[b])_.push({stack:b,id:N});Ln(_,({stack:b,id:N},z)=>{let G=this.entries[b];G||(G=this.entries[b]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=G.glyphs[N];if(T!==void 0)return void z(null,{stack:b,id:N,glyph:T});if(T=this._tinySDF(G,b,N),T)return G.glyphs[N]=T,void z(null,{stack:b,id:N,glyph:T});const O=Math.floor(N/256);if(256*O>65535)return void z(new Error("glyphs > 65535 not supported"));if(G.ranges[O])return void z(null,{stack:b,id:N,glyph:T});let H=G.requests[O];H||(H=G.requests[O]=[],G0.loadGlyphRange(b,O,y,this.requestManager,(U,Q)=>{if(Q){G.ascender=Q.ascender,G.descender=Q.descender;for(const W in Q.glyphs)this._doesCharSupportLocalGlyph(+W)||(G.glyphs[+W]=Q.glyphs[+W]);G.ranges[O]=!0}for(const W of H)W(U,Q);delete G.requests[O]})),H.push((U,Q)=>{U?z(U):Q&&z(null,{stack:b,id:N,glyph:Q.glyphs[N]||null})})},(b,N)=>{if(b)A(b);else if(N){const z={};for(const{stack:G,id:T,glyph:O}of N)z[G]===void 0&&(z[G]={}),z[G].glyphs===void 0&&(z[G].glyphs={}),z[G].glyphs[T]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics},z[G].ascender=this.entries[G].ascender,z[G].descender=this.entries[G].descender;A(null,z)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==iB.none&&(this.localGlyphMode===iB.all?!!this.localFontFamily:!!this.localFontFamily&&(Ft["CJK Unified Ideographs"](a)||Ft["Hangul Syllables"](a)||Ft.Hiragana(a)||Ft.Katakana(a)||Ft["CJK Symbols and Punctuation"](a)||Ft["CJK Unified Ideographs Extension A"](a)||Ft["CJK Unified Ideographs Extension B"](a)))}_tinySDF(a,d,A){const _=this.localFontFamily;if(!_||!this._doesCharSupportLocalGlyph(A))return;let y=a.tinySDF;if(!y){let W="400";/bold/i.test(d)?W="900":/medium/i.test(d)?W="500":/light/i.test(d)&&(W="200"),y=a.tinySDF=new G0.TinySDF({fontFamily:_,fontWeight:W,fontSize:24*mf,buffer:3*mf,radius:8*mf}),y.fontWeight=W}if(this.localGlyphs[y.fontWeight][A])return this.localGlyphs[y.fontWeight][A];const b=String.fromCodePoint(A),{data:N,width:z,height:G,glyphWidth:T,glyphHeight:O,glyphLeft:H,glyphTop:U,glyphAdvance:Q}=y.draw(b);return this.localGlyphs[y.fontWeight][A]={id:A,bitmap:new PA({width:z,height:G},N),metrics:{width:T/mf,height:O/mf,left:H/mf,top:U/mf-27,advance:Q/mf,localGlyph:!0}}}}G0.loadGlyphRange=function(f,a,d,A,_){const y=256*a,b=y+255,N=A.transformRequest(A.normalizeGlyphsURL(d).replace("{fontstack}",f).replace("{range}",`${y}-${b}`),Ha.Glyphs);Ul(N,(z,G)=>{if(z)_(z);else if(G){const T={},O=function(H){return new Jb(H).readFields(eZ,{})}(G);for(const H of O.glyphs)T[H.id]=H;_(null,{glyphs:T,ascender:O.ascender,descender:O.descender})}})},G0.TinySDF=class{constructor({fontSize:f=24,buffer:a=3,radius:d=8,cutoff:A=.25,fontFamily:_="sans-serif",fontWeight:y="normal",fontStyle:b="normal"}={}){this.buffer=a,this.cutoff=A,this.radius=d;const N=this.size=f+4*a,z=this._createCanvas(N),G=this.ctx=z.getContext("2d",{willReadFrequently:!0});G.font=`${b} ${y} ${f}px ${_}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(f){const a=document.createElement("canvas");return a.width=a.height=f,a}draw(f){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:A,actualBoundingBoxLeft:_,actualBoundingBoxRight:y}=this.ctx.measureText(f),b=Math.ceil(d),N=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-_))),z=Math.min(this.size-this.buffer,b+Math.ceil(A)),G=N+2*this.buffer,T=z+2*this.buffer,O=Math.max(G*T,0),H=new Uint8ClampedArray(O),U={data:H,width:G,height:T,glyphWidth:N,glyphHeight:z,glyphTop:b,glyphLeft:0,glyphAdvance:a};if(N===0||z===0)return U;const{ctx:Q,buffer:W,gridInner:re,gridOuter:ue}=this;Q.clearRect(W,W,N,z),Q.fillText(f,W,W+b);const Be=Q.getImageData(W,W,N,z);ue.fill(uv,0,O),re.fill(0,0,O);for(let Te=0;Te<z;Te++)for(let he=0;he<N;he++){const ke=Be.data[4*(Te*N+he)+3]/255;if(ke===0)continue;const Ve=(Te+W)*G+he+W;if(ke===1)ue[Ve]=0,re[Ve]=uv;else{const rt=.5-ke;ue[Ve]=rt>0?rt*rt:0,re[Ve]=rt<0?rt*rt:0}}kj(ue,0,0,G,T,G,this.f,this.v,this.z),kj(re,W,W,N,z,G,this.f,this.v,this.z);for(let Te=0;Te<O;Te++){const he=Math.sqrt(ue[Te])-Math.sqrt(re[Te]);H[Te]=Math.round(255-255*(he/this.radius+this.cutoff))}return U}};const MA=cv;function Oj(f,a,d,A){const _=[],y=f.imagePrimary,b=y.pixelRatio,N=y.paddedRect.w-2*MA,z=y.paddedRect.h-2*MA,G=f.right-f.left,T=f.bottom-f.top,O=y.stretchX||[[0,N]],H=y.stretchY||[[0,z]],U=(Et,yt)=>Et+yt[1]-yt[0],Q=O.reduce(U,0),W=H.reduce(U,0),re=N-Q,ue=z-W;let Be=0,Te=Q,he=0,ke=W,Ve=0,rt=re,dt=0,ft=ue;if(y.content&&A){const Et=y.content;Be=tw(O,0,Et[0]),he=tw(H,0,Et[1]),Te=tw(O,Et[0],Et[2]),ke=tw(H,Et[1],Et[3]),Ve=Et[0]-Be,dt=Et[1]-he,rt=Et[2]-Et[0]-Te,ft=Et[3]-Et[1]-ke}const at=(Et,yt,Nt,zt)=>{const Gt=rw(Et.stretch-Be,Te,G,f.left),$t=nw(Et.fixed-Ve,rt,Et.stretch,Q),Zt=rw(yt.stretch-he,ke,T,f.top),vr=nw(yt.fixed-dt,ft,yt.stretch,W),tr=rw(Nt.stretch-Be,Te,G,f.left),Br=nw(Nt.fixed-Ve,rt,Nt.stretch,Q),Ur=rw(zt.stretch-he,ke,T,f.top),br=nw(zt.fixed-dt,ft,zt.stretch,W),Cn=new Ze(Gt,Zt),hn=new Ze(tr,Zt),tn=new Ze(tr,Ur),Vr=new Ze(Gt,Ur),Jn=new Ze($t/b,vr/b),wn=new Ze(Br/b,br/b),Pn=a*Math.PI/180;if(Pn){const Xi=Math.sin(Pn),po=Math.cos(Pn),Gs=[po,-Xi,Xi,po];Cn._matMult(Gs),hn._matMult(Gs),Vr._matMult(Gs),tn._matMult(Gs)}const ui=Et.stretch+Et.fixed,Ri=Nt.stretch+Nt.fixed,Bi=yt.stretch+yt.fixed,Ei=zt.stretch+zt.fixed,Wi=f.imageSecondary;return{tl:Cn,tr:hn,bl:Vr,br:tn,texPrimary:{x:y.paddedRect.x+MA+ui,y:y.paddedRect.y+MA+Bi,w:Ri-ui,h:Ei-Bi},texSecondary:Wi?{x:Wi.paddedRect.x+MA+ui,y:Wi.paddedRect.y+MA+Bi,w:Ri-ui,h:Ei-Bi}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jn,pixelOffsetBR:wn,minFontScaleX:rt/b/G,minFontScaleY:ft/b/T,isSDF:d}};if(A&&(y.stretchX||y.stretchY)){const Et=Rj(O,re,Q),yt=Rj(H,ue,W);for(let Nt=0;Nt<Et.length-1;Nt++){const zt=Et[Nt],Gt=Et[Nt+1];for(let $t=0;$t<yt.length-1;$t++)_.push(at(zt,yt[$t],Gt,yt[$t+1]))}}else _.push(at({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:z+1}));return _}function tw(f,a,d){let A=0;for(const _ of f)A+=Math.max(a,Math.min(d,_[1]))-Math.max(a,Math.min(d,_[0]));return A}function Rj(f,a,d){const A=[{fixed:-MA,stretch:0}];for(const[_,y]of f){const b=A[A.length-1];A.push({fixed:_-b.stretch,stretch:b.stretch}),A.push({fixed:_-b.stretch,stretch:b.stretch+(y-_)})}return A.push({fixed:a+MA,stretch:d}),A}function rw(f,a,d,A){return f/a*d+A}function nw(f,a,d,A){return f-a*d/A}function lZ(f,a,d,A){const _=a+f.positionedLines[A].lineOffset;return A===0?d+_/2:d+(_+(a+f.positionedLines[A-1].lineOffset))/2}function cZ(f,a=1,d=!1){let A=1/0,_=1/0,y=-1/0,b=-1/0;const N=f[0];for(let U=0;U<N.length;U++){const Q=N[U];(!U||Q.x<A)&&(A=Q.x),(!U||Q.y<_)&&(_=Q.y),(!U||Q.x>y)&&(y=Q.x),(!U||Q.y>b)&&(b=Q.y)}const z=Math.min(y-A,b-_);let G=z/2;const T=new la([],uZ);if(z===0)return new Ze(A,_);for(let U=A;U<y;U+=z)for(let Q=_;Q<b;Q+=z)T.push(new $0(U+G,Q+G,G,f));let O=function(U){let Q=0,W=0,re=0;const ue=U[0];for(let Be=0,Te=ue.length,he=Te-1;Be<Te;he=Be++){const ke=ue[Be],Ve=ue[he],rt=ke.x*Ve.y-Ve.x*ke.y;W+=(ke.x+Ve.x)*rt,re+=(ke.y+Ve.y)*rt,Q+=3*rt}return new $0(W/Q,re/Q,0,U)}(f),H=T.length;for(;T.length;){const U=T.pop();(U.d>O.d||!O.d)&&(O=U,d&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,H)),U.max-O.d<=a||(G=U.h/2,T.push(new $0(U.p.x-G,U.p.y-G,G,f)),T.push(new $0(U.p.x+G,U.p.y-G,G,f)),T.push(new $0(U.p.x-G,U.p.y+G,G,f)),T.push(new $0(U.p.x+G,U.p.y+G,G,f)),H+=4)}return d&&(console.log(`num probes: ${H}`),console.log(`best distance: ${O.d}`)),O.p}function uZ(f,a){return a.max-f.max}class $0{constructor(a,d,A,_){this.p=new Ze(a,d),this.h=A,this.d=function(y,b){let N=!1,z=1/0;for(let G=0;G<b.length;G++){const T=b[G];for(let O=0,H=T.length,U=H-1;O<H;U=O++){const Q=T[O],W=T[U];Q.y>y.y!=W.y>y.y&&y.x<(W.x-Q.x)*(y.y-Q.y)/(W.y-Q.y)+Q.x&&(N=!N),z=Math.min(z,Ks(y,Q,W))}}return(N?1:-1)*Math.sqrt(z)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}}const sB=Number.POSITIVE_INFINITY,dZ=Math.sqrt(2);function Uj(f,[a,d]){let A=0,_=0;if(d===sB){a<0&&(a=0);const y=a/dZ;switch(f){case"top-right":case"top-left":_=y-7;break;case"bottom-right":case"bottom-left":_=7-y;break;case"bottom":_=7-a;break;case"top":_=a-7}switch(f){case"top-right":case"bottom-right":A=-y;break;case"top-left":case"bottom-left":A=y;break;case"left":A=a;break;case"right":A=-a}}else{switch(a=Math.abs(a),d=Math.abs(d),f){case"top-right":case"top-left":case"top":_=d-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-d}switch(f){case"top-right":case"bottom-right":case"right":A=-a;break;case"top-left":case"bottom-left":case"left":A=a}}return[A,_]}function oB(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hZ(f,a,d,A,_,y,b,N,z,G,T,O,H,U,Q){let W=y.textMaxSize.evaluate(a,{},O);W===void 0&&(W=b);const re=f.layers[0].layout,ue=re.get("icon-offset").evaluate(a,{},O),Be=Qj(d.horizontal)||d.vertical,Te=H.name==="globe",he=zc,ke=b/he,Ve=f.tilePixelRatio*W/he,rt=(Gt=f.overscaling,f.zoom>18&&Gt>2&&(Gt>>=1),Math.max(Yr/(512*Gt),1)*re.get("symbol-spacing")),dt=re.get("text-padding")*f.tilePixelRatio,ft=re.get("icon-padding")*f.tilePixelRatio,at=vt(re.get("text-max-angle")),Et=re.get("text-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",yt=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Nt=re.get("symbol-placement"),zt=rt/2;var Gt;const $t=re.get("icon-text-fit").evaluate(a,{},O),Zt=re.get("icon-text-fit-padding").evaluate(a,{},O),vr=$t!=="none";let tr;f.hasAnyIconTextFit===!1&&vr&&(f.hasAnyIconTextFit=!0),A&&vr&&(f.allowVerticalPlacement&&d.vertical&&(tr=Ej(A,d.vertical,$t,Zt,ue,ke)),Be&&(A=Ej(A,Be,$t,Zt,ue,ke)));const Br=(Ur,br,Cn)=>{if(br.x<0||br.x>=Yr||br.y<0||br.y>=Yr)return;let hn=null;if(Te){const{x:tn,y:Vr,z:Jn}=H.projectTilePoint(br.x,br.y,Cn);hn={anchor:new zp(tn,Vr,Jn,0,void 0),up:H.upVector(Cn,br.x,br.y)}}(function(tn,Vr,Jn,wn,Pn,ui,Ri,Bi,Ei,Wi,Xi,po,Gs,pi,js,Rs,Oo,Da,dl,Oa,va,hc,xl,Qc,Fo,Ad,xf){const Dh=tn.addToLineVertexArray(Vr,wn);let Oh,vg,UA,xg,Tv,ck,uk,dk=0,hk=0,fk=0,pk=0,MB=-1,kB=-1;const np={};let Ak=Jt("");const _g=Jn?Jn.anchor:Vr,DB=Ei.layout.get("icon-text-fit").evaluate(va,{},Fo)!=="none";let OB=0,RB=0;if(Ei._unevaluatedLayout.getValue("text-radial-offset")===void 0?[OB,RB]=Ei.layout.get("text-offset").evaluate(va,{},Fo).map(jd=>jd*zc):(OB=Ei.layout.get("text-radial-offset").evaluate(va,{},Fo)*zc,RB=sB),tn.allowVerticalPlacement&&Pn.vertical){const jd=Pn.vertical;if(js)ck=aB(jd),Bi&&(uk=aB(Bi));else{const Md=Ei.layout.get("text-rotate").evaluate(va,{},Fo)+90;UA=iw(Wi,_g,Vr,Xi,po,Gs,jd,pi,Md,Rs),Bi&&(xg=iw(Wi,_g,Vr,Xi,po,Gs,Bi,Da,Md))}}if(ui){const jd=Ei.layout.get("icon-rotate").evaluate(va,{},Fo),Md=Oj(ui,jd,xl,DB),ey=Bi?Oj(Bi,jd,xl,DB):void 0;vg=iw(Wi,_g,Vr,Xi,po,Gs,ui,Da,jd),dk=4*Md.length;const mk=tn.iconSizeData;let bg=null;mk.kind==="source"?(bg=[Af*Ei.layout.get("icon-size").evaluate(va,{},Fo)],bg[0]>kA&&jn(`${tn.layerIds[0]}: Value for "icon-size" is >= ${dv}. Reduce your "icon-size".`)):mk.kind==="composite"&&(bg=[Af*hc.compositeIconSizes[0].evaluate(va,{},Fo),Af*hc.compositeIconSizes[1].evaluate(va,{},Fo)],(bg[0]>kA||bg[1]>kA)&&jn(`${tn.layerIds[0]}: Value for "icon-size" is >= ${dv}. Reduce your "icon-size".`)),tn.addSymbols(tn.icon,Md,bg,Oa,dl,va,!1,Jn,Vr,Dh.lineStartIndex,Dh.lineLength,-1,Qc,Fo,Ad,xf),MB=tn.icon.placedSymbolArray.length-1,ey&&(hk=4*ey.length,tn.addSymbols(tn.icon,ey,bg,Oa,dl,va,sh.vertical,Jn,Vr,Dh.lineStartIndex,Dh.lineLength,-1,Qc,Fo,Ad,xf),kB=tn.icon.placedSymbolArray.length-1)}for(const jd in Pn.horizontal){const Md=Pn.horizontal[jd];Oh||(Ak=Jt(Md.text),js?Tv=aB(Md):Oh=iw(Wi,_g,Vr,Xi,po,Gs,Md,pi,Ei.layout.get("text-rotate").evaluate(va,{},Fo),Rs));const ey=Md.positionedLines.length===1;if(fk+=zj(tn,Jn,Vr,Md,Ri,Ei,js,va,Rs,Dh,Pn.vertical?sh.horizontal:sh.horizontalOnly,ey?Object.keys(Pn.horizontal):[jd],np,MB,hc,Qc,Fo,Ad),ey)break}Pn.vertical&&(pk+=zj(tn,Jn,Vr,Pn.vertical,Ri,Ei,js,va,Rs,Dh,sh.vertical,["vertical"],np,kB,hc,Qc,Fo,Ad));let zA=-1;const UB=(jd,Md)=>jd?Math.max(jd,Md):Md;zA=UB(Tv,zA),zA=UB(ck,zA),zA=UB(uk,zA);const EJ=zA>-1?1:0;tn.glyphOffsetArray.length>=65535&&jn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),va.sortKey!==void 0&&tn.addToSortKeyRanges(tn.symbolInstances.length,va.sortKey),tn.symbolInstances.emplaceBack(Vr.x,Vr.y,_g.x,_g.y,_g.z,np.right>=0?np.right:-1,np.center>=0?np.center:-1,np.left>=0?np.left:-1,np.vertical>=0?np.vertical:-1,MB,kB,Ak,Oh!==void 0?Oh:tn.collisionBoxArray.length,Oh!==void 0?Oh+1:tn.collisionBoxArray.length,UA!==void 0?UA:tn.collisionBoxArray.length,UA!==void 0?UA+1:tn.collisionBoxArray.length,vg!==void 0?vg:tn.collisionBoxArray.length,vg!==void 0?vg+1:tn.collisionBoxArray.length,xg||tn.collisionBoxArray.length,xg?xg+1:tn.collisionBoxArray.length,Xi,fk,pk,dk,hk,EJ,0,OB,RB,zA,0,DB?1:0)})(f,br,hn,Ur,d,A,_,tr,f.layers[0],f.collisionBoxArray,a.index,a.sourceLayerIndex,f.index,dt,Et,z,0,ft,yt,ue,a,y,G,T,O,U,Q)};if(Nt==="line")for(const Ur of Pj(a.geometry,0,0,Yr,Yr)){const br=aZ(Ur,rt,at,d.vertical||Be,A,he,Ve,f.overscaling,Yr);for(const Cn of br)Be&&fZ(f,Be.text,zt,Cn)||Br(Ur,Cn,O)}else if(Nt==="line-center"){for(const Ur of a.geometry)if(Ur.length>1){const br=oZ(Ur,at,d.vertical||Be,A,he,Ve);br&&Br(Ur,br,O)}}else if(a.type==="Polygon")for(const Ur of Gb(a.geometry,0)){const br=cZ(Ur,16);Br(Ur[0],new zp(br.x,br.y,0,0,void 0),O)}else if(a.type==="LineString")for(const Ur of a.geometry)Br(Ur,new zp(Ur[0].x,Ur[0].y,0,0,void 0),O);else if(a.type==="Point")for(const Ur of a.geometry)for(const br of Ur)Br([br],new zp(br.x,br.y,0,0,void 0),O)}const dv=255,kA=dv*Af;function zj(f,a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re,ue){const Be=function(ke,Ve,rt,dt,ft,at,Et,yt){const Nt=[];if(Ve.positionedLines.length===0)return Nt;const zt=dt.layout.get("text-rotate").evaluate(at,{})*Math.PI/180,Gt=function(Br){const Ur=Br[0],br=Br[1],Cn=Ur*br;return Cn>0?[Ur,-br]:Cn<0?[-Ur,br]:Ur===0?[br,Ur]:[br,-Ur]}(rt);let $t=Math.abs(Ve.top-Ve.bottom);for(const Br of Ve.positionedLines)$t-=Br.lineOffset;const Zt=Ve.positionedLines.length,vr=$t/Zt;let tr=Ve.top-rt[1];for(let Br=0;Br<Zt;++Br){const Ur=Ve.positionedLines[Br];tr=lZ(Ve,vr,tr,Br);for(const br of Ur.positionedGlyphs){if(!br.rect)continue;const Cn=br.rect||{};let hn=_j+1,tn=!0,Vr=1,Jn=0;if(br.imageName){const Oa=Et[br.imageName];if(!Oa)continue;if(Oa.sdf){jn("SDF images are not supported in formatted text and will be ignored.");continue}tn=!1,Vr=Oa.pixelRatio,hn=cv/Vr}const wn=(ft||yt)&&br.vertical,Pn=br.metrics.advance*br.scale/2,ui=br.metrics,Ri=br.rect;if(Ri===null)continue;yt&&Ve.verticalizable&&(Jn=br.imageName?Pn-br.metrics.width*br.scale/2:0);const Bi=ft?[br.x+Pn,br.y]:[0,0];let Ei=[0,0],Wi=[0,0],Xi=!1;ft||(wn?(Wi=[br.x+Pn+Gt[0],br.y+Gt[1]-Jn],Xi=!0):Ei=[br.x+Pn+rt[0],br.y+rt[1]-Jn]);const po=Ri.w*br.scale/(Vr*(br.localGlyph?mf:1)),Gs=Ri.h*br.scale/(Vr*(br.localGlyph?mf:1));let pi,js,Rs,Oo;if(wn){const Oa=br.y-tr,va=new Ze(-Pn,Pn-Oa),hc=-Math.PI/2,xl=new Ze(...Wi);pi=new Ze(-Pn+Ei[0],Ei[1]),pi._rotateAround(hc,va)._add(xl),pi.x+=-Oa+Pn,pi.y-=(ui.left-hn)*br.scale;const Qc=br.imageName?ui.advance*br.scale:zc*br.scale,Fo=String.fromCodePoint(br.glyph);YY(Fo)?pi.x+=(1-hn)*br.scale:ZY(Fo)?pi.x+=Qc-ui.height*br.scale+(-hn-1)*br.scale:pi.x+=br.imageName||ui.width+2*hn===Ri.w&&ui.height+2*hn===Ri.h?(Qc-Gs)/2:(Qc-(ui.height+2*hn)*br.scale)/2,js=new Ze(pi.x,pi.y-po),Rs=new Ze(pi.x+Gs,pi.y),Oo=new Ze(pi.x+Gs,pi.y-po)}else{const Oa=(ui.left-hn)*br.scale-Pn+Ei[0],va=(-ui.top-hn)*br.scale+Ei[1],hc=Oa+po,xl=va+Gs;pi=new Ze(Oa,va),js=new Ze(hc,va),Rs=new Ze(Oa,xl),Oo=new Ze(hc,xl)}if(zt){let Oa;Oa=ft?new Ze(0,0):Xi?new Ze(Gt[0],Gt[1]):new Ze(rt[0],rt[1]),pi._rotateAround(zt,Oa),js._rotateAround(zt,Oa),Rs._rotateAround(zt,Oa),Oo._rotateAround(zt,Oa)}const Da=new Ze(0,0),dl=new Ze(0,0);Nt.push({tl:pi,tr:js,bl:Rs,br:Oo,texPrimary:Cn,texSecondary:void 0,writingMode:Ve.writingMode,glyphOffset:Bi,sectionIndex:br.sectionIndex,isSDF:tn,pixelOffsetTL:Da,pixelOffsetBR:dl,minFontScaleX:0,minFontScaleY:0})}}return Nt}(0,A,z,y,b,N,_,f.allowVerticalPlacement),Te=f.textSizeData;let he=null;Te.kind==="source"?(he=[Af*y.layout.get("text-size").evaluate(N,{},re)],he[0]>kA&&jn(`${f.layerIds[0]}: Value for "text-size" is >= ${dv}. Reduce your "text-size".`)):Te.kind==="composite"&&(he=[Af*Q.compositeTextSizes[0].evaluate(N,{},re),Af*Q.compositeTextSizes[1].evaluate(N,{},re)],(he[0]>kA||he[1]>kA)&&jn(`${f.layerIds[0]}: Value for "text-size" is >= ${dv}. Reduce your "text-size".`)),f.addSymbols(f.text,Be,he,z,b,N,T,a,d,G.lineStartIndex,G.lineLength,U,W,re,ue,!1);for(const ke of O)H[ke]=f.text.placedSymbolArray.length-1;return 4*Be.length}function Qj(f){for(const a in f)return f[a];return null}function iw(f,a,d,A,_,y,b,N,z,G){let T=b.top,O=b.bottom,H=b.left,U=b.right;const Q=b.collisionPadding;if(Q&&(H-=Q[0],T-=Q[1],U+=Q[2],O+=Q[3]),z){const W=new Ze(H,T),re=new Ze(U,T),ue=new Ze(H,O),Be=new Ze(U,O),Te=vt(z);let he=new Ze(0,0);G&&(he=new Ze(G[0],G[1])),W._rotateAround(Te,he),re._rotateAround(Te,he),ue._rotateAround(Te,he),Be._rotateAround(Te,he),H=Math.min(W.x,re.x,ue.x,Be.x),U=Math.max(W.x,re.x,ue.x,Be.x),T=Math.min(W.y,re.y,ue.y,Be.y),O=Math.max(W.y,re.y,ue.y,Be.y)}return f.emplaceBack(a.x,a.y,a.z,d.x,d.y,H,T,U,O,N,A,_,y),f.length-1}function aB(f){f.collisionPadding&&(f.top-=f.collisionPadding[1],f.bottom+=f.collisionPadding[3]);const a=f.bottom-f.top;return a>0?Math.max(10,a):null}function fZ(f,a,d,A){const _=f.compareText;if(a in _){const y=_[a];for(let b=y.length-1;b>=0;b--)if(A.dist(y[b])<d)return!0}else _[a]=[];return _[a].push(A),!1}function Hj(f,a){const d=f.fovAboveCenter,A=f.elevation?f.elevation.getMinElevationBelowMSL()*a:0,_=(f._camera.position[2]*f.worldSize-A)/Math.cos(f._pitch),y=Math.sin(d)*_/Math.sin(Math.max(Math.PI/2-f._pitch-d,.01));let b=Math.sin(f._pitch)*y+_;const N=_*(1/f._horizonShift);return f.elevation&&f.elevation.exaggeration()!==0||(b*=1+Math.max(f.zoom-17,0)),Math.min(1.01*b,N)}function hv(f,a){if(!a.isReprojectedInTileSpace)return{scale:1<<f.z,x:f.x,y:f.y,x2:f.x+1,y2:f.y+1,projection:a};const d=Math.pow(2,-f.z),A=f.x*d,_=(f.x+1)*d,y=f.y*d,b=(f.y+1)*d,N=wt(A),z=wt(_),G=_t(y),T=_t(b),O=a.project(N,G),H=a.project(z,G),U=a.project(z,T),Q=a.project(N,T);let W=Math.min(O.x,H.x,U.x,Q.x),re=Math.min(O.y,H.y,U.y,Q.y),ue=Math.max(O.x,H.x,U.x,Q.x),Be=Math.max(O.y,H.y,U.y,Q.y);const Te=d/16;function he(Ve,rt,dt,ft,at,Et){const yt=(dt+at)/2,Nt=(ft+Et)/2,zt=a.project(wt(yt),_t(Nt)),Gt=Math.max(0,W-zt.x,re-zt.y,zt.x-ue,zt.y-Be);W=Math.min(W,zt.x),ue=Math.max(ue,zt.x),re=Math.min(re,zt.y),Be=Math.max(Be,zt.y),Gt>Te&&(he(Ve,zt,dt,ft,yt,Nt),he(zt,rt,yt,Nt,at,Et))}he(O,H,A,y,_,y),he(H,U,_,y,_,b),he(U,Q,_,b,A,b),he(Q,O,A,b,A,y),W-=Te,re-=Te,ue+=Te,Be+=Te;const ke=1/Math.max(ue-W,Be-re);return{scale:ke,x:W*ke,y:re*ke,x2:ue*ke,y2:Be*ke,projection:a}}function Vj(f,{x:a,y:d},A=0){return new Ze(((a-A)*f.scale-f.x)*Yr,(d*f.scale-f.y)*Yr)}const pZ=De.mat4.identity(new Float32Array(16));class DA{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,d){return{x:0,y:0,z:0}}unproject(a,d){return new Ee(0,0)}projectTilePoint(a,d,A){return{x:a,y:d,z:0}}locationPoint(a,d,A=!0){return a._coordinatePoint(a.locationCoordinate(d),A)}pixelsPerMeter(a,d){return ut(1,a)*d}pixelSpaceConversion(a,d,A){return 1}farthestPixelDistance(a){return Hj(a,a.pixelsPerMeter)}pointCoordinate(a,d,A,_){const y=a.horizonLineFromTop(!1),b=new Ze(d,Math.max(y,A));return a.rayIntersectionCoordinate(a.pointRayIntersection(b,_))}pointCoordinate3D(a,d,A){const _=new Ze(d,A);if(a.elevation)return a.elevation.pointCoordinate(_);{const y=this.pointCoordinate(a,_.x,_.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(a,d){if(a.elevation&&a.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(a,d.x,d.y);const A=a.horizonLineFromTop();return d.y<A}createInversionMatrix(a,d){return pZ}createTileMatrix(a,d,A){let _,y,b;const N=A.canonical,z=De.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const G=hv(N,this);_=1,y=G.x+A.wrap*G.scale,b=G.y,De.mat4.scale(z,z,[_/G.scale,_/G.scale,a.pixelsPerMeter/d])}else _=d/a.zoomScale(N.z),y=(N.x+Math.pow(2,N.z)*A.wrap)*_,b=N.y*_;return De.mat4.translate(z,z,[y,b,0]),De.mat4.scale(z,z,[_/Yr,_/Yr,1]),z}upVector(a,d,A){return[0,0,1]}upVectorScale(a,d,A){return{metersToTile:1}}}class AZ extends DA{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[d,A]=this.parallels=a.parallels||[29.5,45.5],_=Math.sin(vt(d));this.n=(_+Math.sin(vt(A)))/2,this.c=1+_*(2*this.n-_),this.r0=Math.sqrt(this.c)/this.n}project(a,d){const{n:A,c:_,r0:y}=this,b=vt(a-this.center[0]),N=vt(d),z=Math.sqrt(_-2*A*Math.sin(N))/A;return{x:z*Math.sin(b*A),y:z*Math.cos(b*A)-y,z:0}}unproject(a,d){const{n:A,c:_,r0:y}=this,b=y+d;let N=Math.atan2(a,Math.abs(b))*Math.sign(b);b*A<0&&(N-=Math.PI*Math.sign(a)*Math.sign(b));const z=vt(this.center[0])*A;N=Sn(N,-Math.PI-z,Math.PI-z);const G=Ir(Kt(N/A)+this.center[0],-180,180),T=Math.asin(Ir((_-(a*a+b*b)*A*A)/(2*A),-1,1)),O=Ir(Kt(T),-Tt,Tt);return new Ee(G,O)}}const fv=1.340264,pv=-.081106,Av=893e-6,mv=.003796,sw=Math.sqrt(3)/2;class mZ extends DA{project(a,d){d=d/180*Math.PI,a=a/180*Math.PI;const A=Math.asin(sw*Math.sin(d)),_=A*A,y=_*_*_;return{x:.5*(a*Math.cos(A)/(sw*(fv+3*pv*_+y*(7*Av+9*mv*_)))/Math.PI+.5),y:1-.5*(A*(fv+pv*_+y*(Av+mv*_))/Math.PI+1),z:0}}unproject(a,d){a=(2*a-.5)*Math.PI;let A=d=(2*(1-d)-1)*Math.PI,_=A*A,y=_*_*_;for(let T,O,H,U=0;U<12&&(O=A*(fv+pv*_+y*(Av+mv*_))-d,H=fv+3*pv*_+y*(7*Av+9*mv*_),T=O/H,A=Ir(A-T,-Math.PI/3,Math.PI/3),_=A*A,y=_*_*_,!(Math.abs(T)<1e-12));++U);const b=sw*a*(fv+3*pv*_+y*(7*Av+9*mv*_))/Math.cos(A),N=Math.asin(Math.sin(A)/sw),z=Ir(180*b/Math.PI,-180,180),G=Ir(180*N/Math.PI,-Tt,Tt);return new Ee(z,G)}}class gZ extends DA{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,d){return{x:.5+a/360,y:.5-d/360,z:0}}unproject(a,d){const A=360*(a-.5),_=Ir(360*(.5-d),-Tt,Tt);return new Ee(A,_)}}const q0=Math.PI/2;function ow(f){return Math.tan((q0+f)/2)}class yZ extends DA{constructor(a){super(a),this.center=a.center||[0,30];const[d,A]=this.parallels=a.parallels||[30,30];let _=vt(d),y=vt(A);this.southernCenter=_+y<0,this.southernCenter&&(_=-_,y=-y);const b=Math.cos(_),N=ow(_);this.n=_===y?Math.sin(_):Math.log(b/Math.cos(y))/Math.log(ow(y)/N),this.f=b*Math.pow(ow(_),this.n)/this.n}project(a,d){d=vt(d),this.southernCenter&&(d=-d),a=vt(a-this.center[0]);const A=1e-6,{n:_,f:y}=this;y>0?d<-q0+A&&(d=-q0+A):d>q0-A&&(d=q0-A);const b=y/Math.pow(ow(d),_);let N=b*Math.sin(_*a),z=y-b*Math.cos(_*a);return N=.5*(N/Math.PI+.5),z=.5*(z/Math.PI+.5),{x:N,y:this.southernCenter?z:1-z,z:0}}unproject(a,d){a=(2*a-.5)*Math.PI,this.southernCenter&&(d=1-d),d=(2*(1-d)-.5)*Math.PI;const{n:A,f:_}=this,y=_-d,b=Math.sign(y),N=Math.sign(A)*Math.sqrt(a*a+y*y);let z=Math.atan2(a,Math.abs(y))*b;y*A<0&&(z-=Math.PI*Math.sign(a)*b);const G=Ir(Kt(z/A)+this.center[0],-180,180),T=Ir(Kt(2*Math.atan(Math.pow(_/N,1/A))-q0),-Tt,Tt);return new Ee(G,this.southernCenter?-T:T)}}class Gj extends DA{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,d){return{x:ht(a),y:gt(d),z:0}}unproject(a,d){const A=wt(a),_=_t(d);return new Ee(A,_)}}const $j=vt(Tt);class vZ extends DA{project(a,d){const A=(d=vt(d))*d,_=A*A;return{x:.5*((a=vt(a))*(.8707-.131979*A+_*(_*(.003971*A-.001529*_)-.013791))/Math.PI+.5),y:1-.5*(d*(1.007226+A*(.015085+_*(.028874*A-.044475-.005916*_)))/Math.PI+1),z:0}}unproject(a,d){a=(2*a-.5)*Math.PI;let A=d=(2*(1-d)-1)*Math.PI,_=25,y=0,b=A*A;do{b=A*A;const G=b*b;y=(A*(1.007226+b*(.015085+G*(.028874*b-.044475-.005916*G)))-d)/(1.007226+b*(.045255+G*(.259866*b-.311325-.005916*11*G))),A=Ir(A-y,-$j,$j)}while(Math.abs(y)>1e-6&&--_>0);b=A*A;const N=Ir(Kt(a/(.8707+b*(b*(b*b*b*(.003971-.001529*b)-.013791)-.131979))),-180,180),z=Kt(A);return new Ee(N,z)}}const qj=vt(Tt);class xZ extends DA{project(a,d){d=vt(d),a=vt(a);const A=Math.cos(d),_=2/Math.PI,y=Math.acos(A*Math.cos(a/2)),b=Math.sin(y)/y,N=.5*(a*_+2*A*Math.sin(a/2)/b)||0,z=.5*(d+Math.sin(d)/b)||0;return{x:.5*(N/Math.PI+.5),y:1-.5*(z/Math.PI+1),z:0}}unproject(a,d){let A=a=(2*a-.5)*Math.PI,_=d=(2*(1-d)-1)*Math.PI,y=25;const b=1e-6;let N=0,z=0;do{const G=Math.cos(_),T=Math.sin(_),O=2*T*G,H=T*T,U=G*G,Q=Math.cos(A/2),W=Math.sin(A/2),re=2*Q*W,ue=W*W,Be=1-U*Q*Q,Te=Be?1/Be:0,he=Be?Math.acos(G*Q)*Math.sqrt(1/Be):0,ke=.5*(2*he*G*W+2*A/Math.PI)-a,Ve=.5*(he*T+_)-d,rt=.5*Te*(U*ue+he*G*Q*H)+1/Math.PI,dt=Te*(re*O/4-he*T*W),ft=.125*Te*(O*W-he*T*U*re),at=.5*Te*(H*Q+he*ue*G)+.5,Et=dt*ft-at*rt;N=(Ve*dt-ke*at)/Et,z=(ke*ft-Ve*rt)/Et,A=Ir(A-N,-Math.PI,Math.PI),_=Ir(_-z,-qj,qj)}while((Math.abs(N)>b||Math.abs(z)>b)&&--y>0);return new Ee(Kt(A),Kt(_))}}class Wj extends DA{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(vt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,d){const{scale:A,cosPhi:_}=this;return{x:vt(a)*_*A+.5,y:-Math.sin(vt(d))/_*A+.5,z:0}}unproject(a,d){const{scale:A,cosPhi:_}=this,y=-(d-.5)/A,b=Ir(Kt((a-.5)/A)/_,-180,180),N=Math.asin(Ir(y*_,-1,1)),z=Ir(Kt(N),-Tt,Tt);return new Ee(b,z)}}class _Z extends Gj{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,d,A){const _=X1(a,d,A),y=zb(tp(A));return De.vec3.transformMat4(_,_,y),{x:_[0],y:_[1],z:_[2]}}locationPoint(a,d){const A=ae(d.lat,d.lng),_=De.vec3.normalize([],A),y=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(d),a._centerAltitude):a._centerAltitude,b=ut(1,0)*Yr*y;De.vec3.scaleAndAdd(A,A,_,b);const N=De.mat4.identity(new Float64Array(16));return De.mat4.multiply(N,a.pixelMatrix,a.globeMatrix),De.vec3.transformMat4(A,A,N),new Ze(A[0],A[1])}pixelsPerMeter(a,d){return ut(1,0)*d}pixelSpaceConversion(a,d,A){const _=ut(1,a)*d,y=Sr(ut(1,45)*d,_,A);return this.pixelsPerMeter(a,d)/y}createTileMatrix(a,d,A){const _=NS(tp(A.canonical));return De.mat4.multiply(new Float64Array(16),a.globeMatrix,_)}createInversionMatrix(a,d){const{center:A}=a,_=zb(tp(d));return De.mat4.rotateY(_,_,vt(A.lng)),De.mat4.rotateX(_,_,vt(A.lat)),De.mat4.scale(_,_,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(_)}pointCoordinate(a,d,A,_){return Ob(a,d,A,!0)||new sr(0,0)}pointCoordinate3D(a,d,A){const _=this.pointCoordinate(a,d,A,0);return[_.x,_.y,_.z]}isPointAboveHorizon(a,d){return!Ob(a,d.x,d.y,!1)}farthestPixelDistance(a){const d=function(_,y){const b=_.cameraToCenterDistance,N=_._centerAltitude*y,z=_._camera,G=_._camera.forward(),T=De.vec3.add([],De.vec3.scale([],G,-b),[0,0,N]),O=_.worldSize/(2*Math.PI),H=[0,0,-O],U=_.width/_.height,Q=Math.tan(_.fovAboveCenter),W=De.vec3.scale([],z.up(),Q),re=De.vec3.scale([],z.right(),Q*U),ue=De.vec3.normalize([],De.vec3.add([],De.vec3.add([],G,W),re)),Be=[];let Te;if(new pf(T,ue).closestPointOnSphere(H,O,Be)){const he=De.vec3.add([],Be,H),ke=De.vec3.sub([],he,T);Te=Math.cos(_.fovAboveCenter)*De.vec3.length(ke)}else{const he=De.vec3.sub([],T,H),ke=De.vec3.sub([],H,T);De.vec3.normalize(ke,ke);const Ve=De.vec3.length(he)-O;Te=Math.sqrt(Ve*(Ve+2*O));const rt=Math.acos(Te/(O+Ve))-Math.acos(De.vec3.dot(G,ke));Te*=Math.cos(rt)}return 1.01*Te}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),A=FA(a.zoom);if(A>0){const _=Hj(a,ut(1,a.center.lat)*a.worldSize),y=a.worldSize/(2*Math.PI),b=Math.max(a.width,a.height)/a.worldSize*Math.PI;return Sr(d,_+y*(1-Math.cos(b)),Math.pow(A,10))}return d}upVector(a,d,A){return X1(d,A,a,1)}upVectorScale(a){return{metersToTile:Rp(Ub(tp(a)))}}}function Kj(f){const a=f.parallels,d=!!a&&Math.abs(a[0]+a[1])<.01;switch(f.name){case"mercator":return new Gj(f);case"equirectangular":return new gZ(f);case"naturalEarth":return new vZ(f);case"equalEarth":return new mZ(f);case"winkelTripel":return new xZ(f);case"albers":return d?new Wj(f):new AZ(f);case"lambertConformalConic":return d?new Wj(f):new yZ(f);case"globe":return new _Z(f)}throw new Error(`Invalid projection name: ${f.name}`)}const bZ=Q0.VectorTileFeature.types,wZ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function aw(f,a,d,A,_,y,b,N,z,G,T,O,H){const U=N?Math.min(kA,Math.round(N[0])):0,Q=N?Math.min(kA,Math.round(N[1])):0;f.emplaceBack(a,d,Math.round(32*A),Math.round(32*_),y,b,(U<<1)+(z?1:0),Q,16*G,16*T,256*O,256*H)}function lw(f,a,d){f.emplaceBack(a,d)}function cw(f,a,d,A,_,y,b){f.emplaceBack(a,d,A,_,y,b)}function uw(f,a,d,A,_){f.emplaceBack(a,d,A,_),f.emplaceBack(a,d,A,_),f.emplaceBack(a,d,A,_),f.emplaceBack(a,d,A,_)}function CZ(f){for(const a of f.sections)if(Or(a.text))return!0;return!1}class lB{constructor(a){this.layoutVertexArray=new nh,this.indexArray=new Ka,this.programConfigurations=a,this.segments=new La,this.dynamicLayoutVertexArray=new El,this.opacityVertexArray=new df,this.placedSymbolArray=new H1,this.iconTransitioningVertexArray=new Iu,this.globeExtVertexArray=new Tl,this.zOffsetVertexArray=new Ih}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(a,d,A,_,y){this.isEmpty()||(A&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,zY.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,HY.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,wZ,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=a.createVertexBuffer(this.iconTransitioningVertexArray,GY.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,QY.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||y)&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,VY.members,!0)),this.opacityVertexBuffer.itemSize=1),(A||_)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}je(lB,"SymbolBuffers");class cB{constructor(a,d,A){this.layoutVertexArray=new a,this.layoutAttributes=d,this.indexArray=new A,this.segments=new La,this.collisionVertexArray=new Lh,this.collisionVertexArrayExt=new El}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,$Y.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,qY.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}je(cB,"CollisionBuffers");class dw{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.lut=a.lut,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(b=>b.fqid),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=De.mat4.identity([]),this.placementViewportMatrix=De.mat4.identity([]);const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=YS(this.zoom,d["text-size"]),this.iconSizeData=YS(this.zoom,d["icon-size"]);const A=this.layers[0].layout,_=A.get("symbol-sort-key"),y=A.get("symbol-z-order");this.canOverlap=A.get("text-allow-overlap")||A.get("icon-allow-overlap")||A.get("text-ignore-placement")||A.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&_.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=A.get("text-writing-mode").map(b=>sh[b]),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=a.sourceID,this.projection=a.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=A.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new lB(new Jf(this.layers,{zoom:this.zoom,lut:this.lut},a=>a.startsWith("text")||a.startsWith("symbol"))),this.icon=new lB(new Jf(this.layers,{zoom:this.zoom,lut:this.lut},a=>a.startsWith("icon")||a.startsWith("symbol"))),this.glyphOffsetArray=new Lb,this.lineVertexArray=new D0,this.symbolInstances=new V1}calculateGlyphDependencies(a,d,A,_,y){for(let b=0;b<a.length;b++){const N=a.codePointAt(b);if(N===void 0)break;if(d[N]=!0,_&&y&&N<=65535){const z=av[a.charAt(b)];z&&(d[z.charCodeAt(0)]=!0)}}}updateFootprints(a,d){}updateReplacement(a,d){if(d.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=d.updateTime;const A=d.getReplacementRegionsForTile(a.toUnwrapped(),!0);return!GS(this.activeReplacements,A)&&(this.activeReplacements=A,!0)}populate(a,d,A,_){const y=this.layers[0],b=y.layout,N=this.projection.name==="globe",z=b.get("text-font"),G=b.get("text-field"),T=b.get("icon-image"),O=(G.value.kind!=="constant"||G.value.value instanceof Bo&&!G.value.value.isEmpty()||G.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),H=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,U=b.get("symbol-sort-key");if(this.features=[],!O&&!H)return;const Q=d.iconDependencies,W=d.glyphDependencies,re=d.availableImages,ue=new Qi(this.zoom);for(const{feature:Be,id:Te,index:he,sourceLayerIndex:ke}of a){const Ve=y._featureFilter.needGeometry,rt=nn(Be,Ve);if(!y._featureFilter.filter(ue,rt,A))continue;if(Ve||(rt.geometry=en(Be,A,_)),N&&Be.type!==1&&A.z<=5){const Et=rt.geometry,yt=.98078528056,Nt=(zt,Gt)=>{const $t=X1(zt.x,zt.y,A,1),Zt=X1(Gt.x,Gt.y,A,1);return De.vec3.dot($t,Zt)<yt};for(let zt=0;zt<Et.length;zt++)Et[zt]=Jr(Et[zt],Nt)}let dt,ft;if(O){const Et=y.getValueAndResolveTokens("text-field",rt,A,re),yt=Bo.factory(Et);CZ(yt)&&(this.hasRTLText=!0),(!this.hasRTLText||gs()==="unavailable"||this.hasRTLText&&zi.isParsed())&&(dt=XY(yt,y,rt))}if(H){const Et=y.getValueAndResolveTokens("icon-image",rt,A,re);ft=Et instanceof Zs?Et:Zs.fromString(Et)}if(!dt&&!ft)continue;const at=this.sortFeaturesByKey?U.evaluate(rt,{},A):void 0;if(this.features.push({id:Te,text:dt,icon:ft,index:he,sourceLayerIndex:ke,geometry:rt.geometry,properties:Be.properties,type:bZ[Be.type],sortKey:at}),ft&&(Q[ft.namePrimary]=!0,ft.nameSecondary&&(Q[ft.nameSecondary]=!0)),dt){const Et=z.evaluate(rt,{},A).join(","),yt=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(sh.vertical)>=0;for(const Nt of dt.sections)if(Nt.image)Q[Nt.image.namePrimary]=!0;else{const zt=Qt(dt.toString()),Gt=Nt.fontStack||Et,$t=W[Gt]=W[Gt]||{};this.calculateGlyphDependencies(Nt.text,$t,yt,this.allowVerticalPlacement,zt)}}}b.get("symbol-placement")==="line"&&(this.features=function(Be){const Te={},he={},ke=[];let Ve=0;function rt(Et){ke.push(Be[Et]),Ve++}function dt(Et,yt,Nt){const zt=he[Et];return delete he[Et],he[yt]=zt,ke[zt].geometry[0].pop(),ke[zt].geometry[0]=ke[zt].geometry[0].concat(Nt[0]),zt}function ft(Et,yt,Nt){const zt=Te[yt];return delete Te[yt],Te[Et]=zt,ke[zt].geometry[0].shift(),ke[zt].geometry[0]=Nt[0].concat(ke[zt].geometry[0]),zt}function at(Et,yt,Nt){const zt=Nt?yt[0][yt[0].length-1]:yt[0][0];return`${Et}:${zt.x}:${zt.y}`}for(let Et=0;Et<Be.length;Et++){const yt=Be[Et],Nt=yt.geometry,zt=yt.text?yt.text.toString():null;if(!zt){rt(Et);continue}const Gt=at(zt,Nt),$t=at(zt,Nt,!0);if(Gt in he&&$t in Te&&he[Gt]!==Te[$t]){const Zt=ft(Gt,$t,Nt),vr=dt(Gt,$t,ke[Zt].geometry);delete Te[Gt],delete he[$t],he[at(zt,ke[vr].geometry,!0)]=vr,ke[Zt].geometry=null}else Gt in he?dt(Gt,$t,Nt):$t in Te?ft(Gt,$t,Nt):(rt(Et),Te[Gt]=Ve-1,he[$t]=Ve-1)}return ke.filter(Et=>Et.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Be,Te)=>Be.sortKey-Te.sortKey)}update(a,d,A,_,y){const b=Object.keys(a).length!==0;if(b&&!this.stateDependentLayers.length)return;const N=b?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(a,d,N,A,_,y),this.icon.programConfigurations.updatePaintArrays(a,d,N,A,_,y)}updateZOffset(){const a=(y,b,N)=>{A+=b,A>y.length&&y.resize(A);for(let z=-b;z<0;z++)y.emplace(z+A,N)},d=(y,b,N)=>{_+=b,_>y.length&&y.resize(_);for(let z=-b;z<0;z++)y.emplace(z+_,N)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let A=0,_=0;for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y),{numHorizontalGlyphVertices:N,numVerticalGlyphVertices:z,numIconVertices:G}=b,T=b.zOffset,O=G>0;if((N>0||z>0)&&(a(this.text.zOffsetVertexArray,N,T),a(this.text.zOffsetVertexArray,z,T)),O){const{placedIconSymbolIndex:H,verticalPlacedIconSymbolIndex:U}=b;H>=0&&d(this.icon.zOffsetVertexArray,G,T),U>=0&&d(this.icon.zOffsetVertexArray,b.numVerticalIconVertices,T)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Kj(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,d){const A=this.lineVertexArray.length;if(a.segment!==void 0)for(const{x:_,y}of d)this.lineVertexArray.emplaceBack(_,y);return{lineStartIndex:A,lineLength:this.lineVertexArray.length-A}}addSymbols(a,d,A,_,y,b,N,z,G,T,O,H,U,Q,W,re){const ue=a.indexArray,Be=a.layoutVertexArray,Te=a.globeExtVertexArray,he=a.segments.prepareSegment(4*d.length,Be,ue,this.canOverlap?b.sortKey:void 0),ke=this.glyphOffsetArray.length,Ve=he.vertexLength,rt=this.allowVerticalPlacement&&N===sh.vertical?Math.PI/2:0,dt=b.text&&b.text.sections;for(let at=0;at<d.length;at++){const{tl:Et,tr:yt,bl:Nt,br:zt,texPrimary:Gt,texSecondary:$t,pixelOffsetTL:Zt,pixelOffsetBR:vr,minFontScaleX:tr,minFontScaleY:Br,glyphOffset:Ur,isSDF:br,sectionIndex:Cn}=d[at],hn=he.vertexLength,tn=Ur[1];if(aw(Be,G.x,G.y,Et.x,tn+Et.y,Gt.x,Gt.y,A,br,Zt.x,Zt.y,tr,Br),aw(Be,G.x,G.y,yt.x,tn+yt.y,Gt.x+Gt.w,Gt.y,A,br,vr.x,Zt.y,tr,Br),aw(Be,G.x,G.y,Nt.x,tn+Nt.y,Gt.x,Gt.y+Gt.h,A,br,Zt.x,vr.y,tr,Br),aw(Be,G.x,G.y,zt.x,tn+zt.y,Gt.x+Gt.w,Gt.y+Gt.h,A,br,vr.x,vr.y,tr,Br),z){const{x:Vr,y:Jn,z:wn}=z.anchor,[Pn,ui,Ri]=z.up;cw(Te,Vr,Jn,wn,Pn,ui,Ri),cw(Te,Vr,Jn,wn,Pn,ui,Ri),cw(Te,Vr,Jn,wn,Pn,ui,Ri),cw(Te,Vr,Jn,wn,Pn,ui,Ri),uw(a.dynamicLayoutVertexArray,Vr,Jn,wn,rt)}else uw(a.dynamicLayoutVertexArray,G.x,G.y,G.z,rt);if(re){const Vr=$t||Gt;lw(a.iconTransitioningVertexArray,Vr.x,Vr.y),lw(a.iconTransitioningVertexArray,Vr.x+Vr.w,Vr.y),lw(a.iconTransitioningVertexArray,Vr.x,Vr.y+Vr.h),lw(a.iconTransitioningVertexArray,Vr.x+Vr.w,Vr.y+Vr.h)}ue.emplaceBack(hn,hn+1,hn+2),ue.emplaceBack(hn+1,hn+2,hn+3),he.vertexLength+=4,he.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ur[0]),at!==d.length-1&&Cn===d[at+1].sectionIndex||a.programConfigurations.populatePaintArrays(Be.length,b,b.index,{},U,Q,W,dt&&dt[Cn])}const ft=z?z.anchor:G;a.placedSymbolArray.emplaceBack(ft.x,ft.y,ft.z,G.x,G.y,ke,this.glyphOffsetArray.length-ke,Ve,T,O,G.segment,A?A[0]:0,A?A[1]:0,_[0],_[1],N,0,!1,0,H,0)}_commitLayoutVertex(a,d,A,_,y,b,N){a.emplaceBack(d,A,_,y,b,Math.round(N.x),Math.round(N.y))}_addCollisionDebugVertices(a,d,A,_,y,b,N){const z=A.segments.prepareSegment(4,A.layoutVertexArray,A.indexArray),G=z.vertexLength,T=N.tileAnchorX,O=N.tileAnchorY;for(let U=0;U<4;U++)A.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(A.collisionVertexArrayExt,d,a.padding,N.zOffset),this._commitLayoutVertex(A.layoutVertexArray,_,y,b,T,O,new Ze(a.x1,a.y1)),this._commitLayoutVertex(A.layoutVertexArray,_,y,b,T,O,new Ze(a.x2,a.y1)),this._commitLayoutVertex(A.layoutVertexArray,_,y,b,T,O,new Ze(a.x2,a.y2)),this._commitLayoutVertex(A.layoutVertexArray,_,y,b,T,O,new Ze(a.x1,a.y2)),z.vertexLength+=4;const H=A.indexArray;H.emplaceBack(G,G+1),H.emplaceBack(G+1,G+2),H.emplaceBack(G+2,G+3),H.emplaceBack(G+3,G),z.primitiveLength+=4}_addTextDebugCollisionBoxes(a,d,A,_,y,b){for(let N=_;N<y;N++){const z=A.get(N),G=this.getSymbolInstanceTextSize(a,b,d,N);this._addCollisionDebugVertices(z,G,this.textCollisionBox,z.projectedAnchorX,z.projectedAnchorY,z.projectedAnchorZ,b)}}_addIconDebugCollisionBoxes(a,d,A,_,y,b){for(let N=_;N<y;N++){const z=A.get(N),G=this.getSymbolInstanceIconSize(a,d,b.placedIconSymbolIndex);this._addCollisionDebugVertices(z,G,this.iconCollisionBox,z.projectedAnchorX,z.projectedAnchorY,z.projectedAnchorZ,b)}}generateCollisionDebugBuffers(a,d){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new cB(dd,gj.members,Iu),this.iconCollisionBox=new cB(dd,gj.members,Iu);const A=H0(this.iconSizeData,a),_=H0(this.textSizeData,a);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(_,a,d,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(_,a,d,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(A,a,d,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(A,a,d,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(a,d,A,_){const y=this.text.placedSymbolArray.get(d.rightJustifiedTextSymbolIndex>=0?d.rightJustifiedTextSymbolIndex:d.centerJustifiedTextSymbolIndex>=0?d.centerJustifiedTextSymbolIndex:d.leftJustifiedTextSymbolIndex>=0?d.leftJustifiedTextSymbolIndex:d.verticalPlacedTextSymbolIndex>=0?d.verticalPlacedTextSymbolIndex:_),b=Zb(this.textSizeData,a,y)/zc;return this.tilePixelRatio*b}getSymbolInstanceIconSize(a,d,A){const _=this.icon.placedSymbolArray.get(A),y=Zb(this.iconSizeData,a,_);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(a,d,A,_){a.emplaceBack(d,-A,-A,_),a.emplaceBack(d,A,-A,_),a.emplaceBack(d,A,A,_),a.emplaceBack(d,-A,A,_)}_updateTextDebugCollisionBoxes(a,d,A,_,y,b){for(let N=_;N<y;N++){const z=A.get(N),G=this.getSymbolInstanceTextSize(a,b,d,N);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,G,z.padding,b.zOffset)}}_updateIconDebugCollisionBoxes(a,d,A,_,y,b){for(let N=_;N<y;N++){const z=A.get(N),G=this.getSymbolInstanceIconSize(a,d,b.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,G,z.padding,b.zOffset)}}updateCollisionDebugBuffers(a,d){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const A=H0(this.iconSizeData,a),_=H0(this.textSizeData,a);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(_,a,d,b.textBoxStartIndex,b.textBoxEndIndex,b),this._updateTextDebugCollisionBoxes(_,a,d,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._updateIconDebugCollisionBoxes(A,a,d,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._updateIconDebugCollisionBoxes(A,a,d,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,d,A,_,y,b,N,z,G){const T={};if(d<A){const{x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he,featureIndex:ke}=a.get(d);T.textBox={x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he},T.textFeatureIndex=ke}if(_<y){const{x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he,featureIndex:ke}=a.get(_);T.verticalTextBox={x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he},T.verticalTextFeatureIndex=ke}if(b<N){const{x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he,featureIndex:ke}=a.get(b);T.iconBox={x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he},T.iconFeatureIndex=ke}if(z<G){const{x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he,featureIndex:ke}=a.get(z);T.verticalIconBox={x1:O,y1:H,x2:U,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:Be,tileAnchorX:Te,tileAnchorY:he},T.verticalIconFeatureIndex=ke}return T}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const A=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,A.textBoxStartIndex,A.textBoxEndIndex,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A.iconBoxStartIndex,A.iconBoxEndIndex,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(a,d){const A=a.placedSymbolArray.get(d),_=A.vertexStartIndex+4*A.numGlyphs;for(let y=A.vertexStartIndex;y<_;y+=4)a.indexArray.emplaceBack(y,y+1,y+2),a.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(a),A=Math.cos(a),_=[],y=[],b=[];for(let N=0;N<this.symbolInstances.length;++N){b.push(N);const z=this.symbolInstances.get(N);_.push(0|Math.round(d*z.tileAnchorX+A*z.tileAnchorY)),y.push(z.featureIndex)}return b.sort((N,z)=>_[N]-_[z]||y[z]-y[N]),b}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let a=0;a<this.symbolInstances.length;++a)this.symbolInstanceIndexesSortedZOffset.push(a)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((a,d)=>this.symbolInstances.get(d).zOffset-this.symbolInstances.get(a).zOffset)}addToSortKeyRanges(a,d){const A=this.sortKeyRanges[this.sortKeyRanges.length-1];A&&A.sortKey===d?A.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const A=this.symbolInstances.get(d);this.featureSortOrder.push(A.featureIndex);const{rightJustifiedTextSymbolIndex:_,centerJustifiedTextSymbolIndex:y,leftJustifiedTextSymbolIndex:b,verticalPlacedTextSymbolIndex:N,placedIconSymbolIndex:z,verticalPlacedIconSymbolIndex:G}=A;_>=0&&this.addIndicesForPlacedSymbol(this.text,_),y>=0&&y!==_&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&b!==y&&b!==_&&this.addIndicesForPlacedSymbol(this.text,b),N>=0&&this.addIndicesForPlacedSymbol(this.text,N),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z),G>=0&&this.addIndicesForPlacedSymbol(this.icon,G)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Xj,Yj,uB;je(dw,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),dw.addDynamicAttributes=uw;class Zj{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:Ro,this.defaultValue=a}evaluate(a){if(a.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(a.formattedSection))return d.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}je(Zj,"FormatSectionOverride",{omit:["defaultValue"]});const dB=()=>uB||(uB={layout:Xj||(Xj=new Es({"symbol-placement":new jr(cr.layout_symbol["symbol-placement"]),"symbol-spacing":new jr(cr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jr(cr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new In(cr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jr(cr.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new jr(cr.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new jr(cr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new jr(cr.layout_symbol["icon-ignore-placement"]),"icon-optional":new jr(cr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jr(cr.layout_symbol["icon-rotation-alignment"]),"icon-size":new In(cr.layout_symbol["icon-size"]),"icon-text-fit":new In(cr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new In(cr.layout_symbol["icon-text-fit-padding"]),"icon-image":new In(cr.layout_symbol["icon-image"]),"icon-rotate":new In(cr.layout_symbol["icon-rotate"]),"icon-padding":new jr(cr.layout_symbol["icon-padding"]),"icon-keep-upright":new jr(cr.layout_symbol["icon-keep-upright"]),"icon-offset":new In(cr.layout_symbol["icon-offset"]),"icon-anchor":new In(cr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jr(cr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jr(cr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jr(cr.layout_symbol["text-rotation-alignment"]),"text-field":new In(cr.layout_symbol["text-field"]),"text-font":new In(cr.layout_symbol["text-font"]),"text-size":new In(cr.layout_symbol["text-size"]),"text-max-width":new In(cr.layout_symbol["text-max-width"]),"text-line-height":new In(cr.layout_symbol["text-line-height"]),"text-letter-spacing":new In(cr.layout_symbol["text-letter-spacing"]),"text-justify":new In(cr.layout_symbol["text-justify"]),"text-radial-offset":new In(cr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jr(cr.layout_symbol["text-variable-anchor"]),"text-anchor":new In(cr.layout_symbol["text-anchor"]),"text-max-angle":new jr(cr.layout_symbol["text-max-angle"]),"text-writing-mode":new jr(cr.layout_symbol["text-writing-mode"]),"text-rotate":new In(cr.layout_symbol["text-rotate"]),"text-padding":new jr(cr.layout_symbol["text-padding"]),"text-keep-upright":new jr(cr.layout_symbol["text-keep-upright"]),"text-transform":new In(cr.layout_symbol["text-transform"]),"text-offset":new In(cr.layout_symbol["text-offset"]),"text-allow-overlap":new jr(cr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new jr(cr.layout_symbol["text-ignore-placement"]),"text-optional":new jr(cr.layout_symbol["text-optional"]),visibility:new jr(cr.layout_symbol.visibility)})),paint:Yj||(Yj=new Es({"icon-opacity":new In(cr.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new In(cr.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new In(cr.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new In(cr.paint_symbol["text-emissive-strength"]),"icon-color":new In(cr.paint_symbol["icon-color"]),"icon-halo-color":new In(cr.paint_symbol["icon-halo-color"]),"icon-halo-width":new In(cr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new In(cr.paint_symbol["icon-halo-blur"]),"icon-translate":new jr(cr.paint_symbol["icon-translate"]),"icon-translate-anchor":new jr(cr.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new In(cr.paint_symbol["icon-image-cross-fade"]),"text-opacity":new In(cr.paint_symbol["text-opacity"]),"text-occlusion-opacity":new In(cr.paint_symbol["text-occlusion-opacity"]),"text-color":new In(cr.paint_symbol["text-color"],{runtimeType:ha,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new In(cr.paint_symbol["text-halo-color"]),"text-halo-width":new In(cr.paint_symbol["text-halo-width"]),"text-halo-blur":new In(cr.paint_symbol["text-halo-blur"]),"text-translate":new jr(cr.paint_symbol["text-translate"]),"text-translate-anchor":new jr(cr.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new jr(cr.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new jr(cr.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new jr(cr.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new jr(cr.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new In(cr.paint_symbol["symbol-z-offset"]),"symbol-elevation-reference":new jr(cr.paint_symbol["symbol-elevation-reference"])}))},uB);class hw extends Wa{constructor(a,d,A,_){super(a,dB(),d,A,_),this._colorAdjustmentMatrix=De.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=a.paint!==void 0&&("icon-occlusion-opacity"in a.paint||"text-occlusion-opacity"in a.paint)}recalculate(a,d){super.recalculate(a,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const A=this.layout.get("text-writing-mode");if(A){const _=[];for(const y of A)_.indexOf(y)<0&&_.push(y);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(a,d,A,_){return this._saturation===a&&this._contrast===d&&this._brightnessMin===A&&this._brightnessMax===_||(this._colorAdjustmentMatrix=function(y,b,N,z){y=pt(y),b=qe(b);const G=De.mat4.create(),T=y/3,O=1-2*T,H=[O,T,T,0,T,O,T,0,T,T,O,0,0,0,0,1],U=.5-.5*b,Q=z-N;return De.mat4.multiply(G,[Q,0,0,0,0,Q,0,0,0,0,Q,0,N,N,N,1],[b,0,0,0,0,b,0,0,0,0,b,0,U,U,U,1]),De.mat4.multiply(G,G,H),G}(a,d,A,_),this._saturation=a,this._contrast=d,this._brightnessMin=A,this._brightnessMax=_),this._colorAdjustmentMatrix}getValueAndResolveTokens(a,d,A,_){const y=this.layout.get(a).evaluate(d,{},A,_),b=this._unevaluatedLayout._values[a];return b.isDataDriven()||Yf(b.value)||!y?y:function(N,z){return z.replace(/{([^{}]+)}/g,(G,T)=>T in N?String(N[T]):"")}(d.properties,y)}createBucket(a){return new dw(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of dB().paint.overridableProperties){if(!hw.hasPaintOverride(this.layout,a))continue;const d=this.paint.get(a),A=new Zj(d),_=new Cu(A,d.property.specification,this.scope,this.options);let y=null;y=d.value.kind==="constant"||d.value.kind==="source"?new lf("source",_):new w("composite",_,d.value.zoomStops,d.value._interpolationType),this.paint._values[a]=new ko(d.property,y,d.parameters)}}_handleOverridablePaintPropertyUpdate(a,d,A){return!(!this.layout||d.isDataDriven()||A.isDataDriven())&&hw.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,d){const A=a.get("text-field"),_=dB().paint.properties[d];let y=!1;const b=N=>{for(const z of N)if(_.overrides&&_.overrides.hasOverride(z))return void(y=!0)};if(A.value.kind==="constant"&&A.value.value instanceof Bo)b(A.value.value.sections);else if(A.value.kind==="source"){const N=G=>{y||(G instanceof qo&&_s(G.value)===zl?b(G.value.sections):G instanceof rl?b(G.sections):G.eachChild(N))},z=A.value;z._styleExpression&&N(z._styleExpression.expression)}return y}getProgramIds(){return["symbol"]}getDefaultProgramParams(a,d,A){return{config:new Op(this,{zoom:d,lut:A}),overrideFog:!1}}}let Jj,eM,tM,rM;var hB=as([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function fB(f){switch(f){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function pB(f){switch(f){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class AB{constructor(a,d,A,_){this.context=a,this.format=A,this.useMipmap=_&&_.useMipmap,this.texture=a.gl.createTexture(),this.update(d,{premultiply:_&&_.premultiply})}update(a,d){const A=a&&a instanceof HTMLVideoElement&&a.width===0?a.videoWidth:a.width,_=a&&a instanceof HTMLVideoElement&&a.height===0?a.videoHeight:a.height,{context:y}=this,{gl:b}=y,{x:N,y:z}=d&&d.position?d.position:{x:0,y:0},G=Math.max(N+A,this.size?this.size[0]:0),T=Math.max(z+_,this.size?this.size[1]:0);!this.size||this.size[0]===G&&this.size[1]===T||(b.bindTexture(b.TEXTURE_2D,null),b.deleteTexture(this.texture),this.texture=b.createTexture(),this.size=null),b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA8&&(!d||d.premultiply!==!1));const O=a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||ImageBitmap&&a instanceof ImageBitmap;if(!this.size&&G>0&&T>0){const H=this.useMipmap?Math.floor(Math.log2(Math.max(G,T)))+1:1;b.texStorage2D(b.TEXTURE_2D,H,this.format,G,T),this.size=[G,T]}if(this.size)if(O)b.texSubImage2D(b.TEXTURE_2D,0,N,z,fB(this.format),pB(this.format),a);else{const H=a.data;H&&b.texSubImage2D(b.TEXTURE_2D,0,N,z,A,_,fB(this.format),pB(this.format),H)}this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(a,d,A=!1){const{context:_}=this,{gl:y}=_;y.bindTexture(y.TEXTURE_2D,this.texture),a!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap&&!A?a===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),d!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,d),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,d),this.wrapS=d)}bindExtraParam(a,d,A,_){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),d!==this.magFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,d),this.magFilter=d),a!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap?a===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),A!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,A),this.wrapS=A),_!==this.wrapT&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,_),this.wrapT=_)}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class fw{constructor(a,d){this.context=a,this.texture=d}bind(a,d){const{context:A}=this,{gl:_}=A;_.bindTexture(_.TEXTURE_2D,this.texture),a!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,a),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,a),this.minFilter=a),d!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,d),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,d),this.wrapS=d)}}function pw(f,a,d,A,_,y,b,N){const z=[f,a,1,d,A,1,_,y,1],G=[b,N,1],T=De.mat3.adjoint([],z),[O,H,U]=De.vec3.transformMat3(G,G,T);return De.mat3.multiply(z,z,[O,0,0,0,H,0,0,0,U])}function nM(f,a,d,A,_,y,b,N){const z=function(G,T,O,H,U,Q,W,re){const ue=pw(0,0,1,0,1,1,0,1),Be=pw(G,T,O,H,U,Q,W,re),Te=De.mat3.adjoint([],ue);return De.mat3.multiply(Be,Be,Te)}(f,a,d,A,_,y,b,N);return[z[2]/z[8]/Yr,z[5]/z[8]/Yr]}function Aw(f){return[f[0],Math.min(Math.max(f[1],-Tt),Tt)]}class iM extends Fn{constructor(a,d,A,_){super(),this.id=a,this.dispatcher=A,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(_),this.options=d,this._dirty=!1}load(a,d){if(this._loaded=d||!1,this.fire(new er("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return a&&(this.coordinates=a),this._loaded=!0,void this._finishLoading();this._imageRequest=xs(this.map._requestManager.transformRequest(this.url,Ha.Image),(A,_)=>{this._imageRequest=null,this._loaded=!0,A?this.fire(new _r(A)):_&&(this.image=_ instanceof HTMLImageElement?sn.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,a&&(this.coordinates=a),this._finishLoading())})}loaded(){return this._loaded}updateImage(a){return a.url?(this._imageRequest&&a.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=a.url,this.load(a.coordinates,this._loaded),this):this}setTexture(a){if(!(a.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new fw(this.map.painter.context,a.handle),this.width=a.dimensions[0],this.height=a.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new er("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(a){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof fw||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(a){if(this.coordinates=a,this._boundsArray=void 0,this._unsupportedCoords=!1,!a.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let d=a[0][1],A=a[0][1];for(const y of a)y[1]>A&&(A=y[1]),y[1]<d&&(d=y[1]);const _=(A+d)/2;if(_>Tt?this.onNorthPole=!0:_<-Tt&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const y=a.map(sr.fromLngLat);this.tileID=function(b){let N=1/0,z=1/0,G=-1/0,T=-1/0;for(const W of b)N=Math.min(N,W.x),z=Math.min(z,W.y),G=Math.max(G,W.x),T=Math.max(T,W.y);const O=Math.max(G-N,T-z),H=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),U=Math.pow(2,H);let Q=Math.floor((N+G)/2*U);return Q>1&&(Q-=1),new Xl(H,Q,Math.floor((z+T)/2*U))}(y),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new er("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(a){for(const ue in this.tiles){const Be=this.tiles[ue];Be.state!=="loaded"&&(Be.state="loaded",Be.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const d=hv(new Xl(0,0,0),this.map.transform.projection),A=[d.projection.project(this.coordinates[0][0],this.coordinates[0][1]),d.projection.project(this.coordinates[1][0],this.coordinates[1][1]),d.projection.project(this.coordinates[2][0],this.coordinates[2][1]),d.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ue){const Be=ue[1].x-ue[0].x,Te=ue[1].y-ue[0].y,he=ue[2].x-ue[1].x,ke=ue[2].y-ue[1].y,Ve=ue[3].x-ue[2].x,rt=ue[3].y-ue[2].y,dt=ue[0].x-ue[3].x,ft=ue[0].y-ue[3].y,at=Be*ke-he*Te,Et=he*rt-Ve*ke,yt=Ve*ft-dt*rt,Nt=dt*Te-Be*ft;return at>0&&Et>0&&yt>0&&Nt>0||at<0&&Et<0&&yt<0&&Nt<0}(A))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const _=hv(this.tileID,this.map.transform.projection),[y,b,N,z]=this.coordinates.map(ue=>{const Be=_.projection.project(ue[0],ue[1]);return Vj(_,Be)._round()});this.perspectiveTransform=nM(y.x,y.y,b.x,b.y,N.x,N.y,z.x,z.y);const G=this._boundsArray=new Eu;G.emplaceBack(y.x,y.y,0,0),G.emplaceBack(b.x,b.y,Yr,0),G.emplaceBack(z.x,z.y,0,Yr),G.emplaceBack(N.x,N.y,Yr,Yr),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=a.createVertexBuffer(G,hB.members),this.boundsSegments=La.simpleSegment(0,0,4,2);const T=[],O=[Aw((H=this.coordinates)[0]),Aw(H[1]),Aw(H[2]),Aw(H[3])];var H;const[U,Q,W,re]=function(ue){let Be=ue[0][0],Te=Be,he=ue[0][1],ke=he;for(let Ve=1;Ve<ue.length;Ve++)ue[Ve][0]<Be?Be=ue[Ve][0]:ue[Ve][0]>Te&&(Te=ue[Ve][0]),ue[Ve][1]<he?he=ue[Ve][1]:ue[Ve][1]>ke&&(ke=ue[Ve][1]);return[Be,he,Te-Be,ke-he]}(O);{const ue=new Eu,[Be,Te,he,ke]=function(Zt){let vr=Zt[0].x,tr=vr,Br=Zt[0].y,Ur=Br;for(let br=1;br<Zt.length;br++)Zt[br].x<vr?vr=Zt[br].x:Zt[br].x>tr&&(tr=Zt[br].x),Zt[br].y<Br?Br=Zt[br].y:Zt[br].y>Ur&&(Ur=Zt[br].y);return[vr,Br,tr-vr,Ur-Br]}(A),Ve=Zt=>[(Zt.x-Be)/he,(Zt.y-Te)/ke],[rt,dt,ft,at]=A.map(Ve),Et=function(Zt,vr,tr,Br,Ur,br,Cn,hn){const tn=pw(0,0,1,0,1,1,0,1),Vr=pw(Zt,vr,tr,Br,Ur,br,Cn,hn),Jn=De.mat3.adjoint([],Vr);return De.mat3.multiply(tn,tn,Jn)}(rt[0],rt[1],dt[0],dt[1],ft[0],ft[1],at[0],at[1]);this.elevatedGlobePerspectiveTransform=nM(rt[0],rt[1],dt[0],dt[1],ft[0],ft[1],at[0],at[1]);const yt=(Zt,vr)=>{T.push(Zt.lng);const tr=Math.round((Zt.lng-U)/W*Yr),Br=Math.round((Zt.lat-Q)/re*Yr),Ur=Ve(vr),br=De.vec3.transformMat3([],[Ur[0],Ur[1],1],Et),Cn=Math.round(br[0]/br[2]*Yr),hn=Math.round(br[1]/br[2]*Yr);ue.emplaceBack(tr,Br,Cn,hn)},Nt=A[3].x-A[0].x,zt=A[3].y-A[0].y,Gt=A[2].x-A[1].x,$t=A[2].y-A[1].y;for(let Zt=0;Zt<65;Zt++){const vr=Zt/64,tr=[A[0].x+vr*Nt,A[0].y+vr*zt],Br=[A[1].x+vr*Gt,A[1].y+vr*$t],Ur=Br[0]-tr[0],br=Br[1]-tr[1];for(let Cn=0;Cn<65;Cn++){const hn=Cn/64,tn={x:tr[0]+Ur*hn,y:tr[1]+br*hn,z:0};yt(d.projection.unproject(tn.x,tn.y),tn)}}this.elevatedGlobeVertexBuffer=a.createVertexBuffer(ue,hB.members)}{this.maxLongitudeTriangleSize=0;let ue=[],Be=new Ka;const Te=(he,ke,Ve)=>{Be.emplaceBack(he,ke,Ve);const rt=T[he],dt=T[ke],ft=T[Ve],at=Math.min(Math.min(rt,dt),ft),Et=Math.max(Math.max(rt,dt),ft)-at;Et>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Et),ue.push(at+Et/2)};for(let he=0;he<64;he++)for(let ke=0;ke<64;ke++){const Ve=65*he+ke,rt=Ve+1,dt=Ve+65,ft=dt+1;Te(Ve,dt,rt),Te(rt,dt,ft)}[ue,Be]=function(he,ke){const Ve=Array.from({length:he.length},(ft,at)=>at);Ve.sort((ft,at)=>he[ft]-he[at]);const rt=[],dt=new Ka;for(let ft=0;ft<Ve.length;ft++){const at=Ve[ft];rt.push(he[at]);const Et=3*at,yt=Et+1;dt.emplaceBack(ke.uint16[Et],ke.uint16[yt],ke.uint16[yt+1])}return[rt,dt]}(ue,Be),this.elevatedGlobeTrianglesCenterLongitudes=ue,this.elevatedGlobeIndexBuffer=a.createIndexBuffer(Be)}this.elevatedGlobeSegments=La.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,W/Yr,0,re/Yr,0,0,Q,U,0])}prepare(){const a=Object.keys(this.tiles).length!==0;if(this.tileID&&!a)return;const d=this.map.painter.context,A=d.gl;!this._dirty||this.texture instanceof fw||(this.texture?this.texture.update(this.image):(this.texture=new AB(d,this.image,A.RGBA8),this.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE)),this._dirty=!1),a&&this._prepareData(d)}loadTile(a,d){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},d(null)):(a.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(a){const d=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!d)return null;const A=this.elevatedGlobeTrianglesCenterLongitudes;let _=(y=a+180)+360*Math.round((A[0]-y)/360);var y;const b=new La,N=(O,H)=>{b.segments.push({vertexOffset:0,primitiveOffset:O,vertexLength:d.segments[0].vertexLength,primitiveLength:H,sortKey:void 0,vaos:{}})},z=.51*this.maxLongitudeTriangleSize;if(Math.abs(A[0]-_)<=z){const O=We(A,0,A.length,_+z);return O===A.length||N(O,ur(A,O+1,A.length,_+360-z)-O),b}_<A[0]&&(_+=360);const G=ur(A,0,A.length,_-z);if(G===A.length)return N(0,A.length),b;N(0,G-0);const T=We(A,G+1,A.length,_+z);return T!==A.length&&N(T,A.length-T),b}}const SZ=(Math.pow(256,2)-1)/16907520;class sM extends Wa{constructor(a,d,A,_){super(a,{layout:tM||(tM=new Es({visibility:new jr(cr.layout_raster.visibility)})),paint:rM||(rM=new Es({"raster-opacity":new jr(cr.paint_raster["raster-opacity"]),"raster-color":new ya(cr.paint_raster["raster-color"]),"raster-color-mix":new jr(cr.paint_raster["raster-color-mix"]),"raster-color-range":new jr(cr.paint_raster["raster-color-range"]),"raster-hue-rotate":new jr(cr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jr(cr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jr(cr.paint_raster["raster-brightness-max"]),"raster-saturation":new jr(cr.paint_raster["raster-saturation"]),"raster-contrast":new jr(cr.paint_raster["raster-contrast"]),"raster-resampling":new jr(cr.paint_raster["raster-resampling"]),"raster-fade-duration":new jr(cr.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new jr(cr.paint_raster["raster-emissive-strength"]),"raster-array-band":new jr(cr.paint_raster["raster-array-band"]),"raster-elevation":new jr(cr.paint_raster["raster-elevation"])}))},d,A,_),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(a){return!(a&&a._source instanceof iM&&(a._source.onNorthPole||a._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(a){a!=="raster-color"&&a!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(a){if(!this.hasColorMap()||!this._curRampRange)return;const d=this._transitionablePaint._values["raster-color"].value.expression,[A,_]=a||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(A)&&isNaN(_)||A===this._curRampRange[0]&&_===this._curRampRange[1]||(this.colorRamp=Y1({expression:d,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:A,end:_}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[A,_])}}let oM,aM,lM,cM,uM;class dM extends Wa{constructor(a,d,A,_){super(a,{layout:oM||(oM=new Es({visibility:new jr(cr["layout_raster-particle"].visibility)})),paint:aM||(aM=new Es({"raster-particle-array-band":new jr(cr["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new jr(cr["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new ya(cr["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new jr(cr["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new jr(cr["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new jr(cr["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new jr(cr["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new jr(cr["paint_raster-particle"]["raster-particle-elevation"])}))},d,A,_),this._updateColorRamp(),this.lastInvalidatedAt=sn.now()}onRemove(a){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(a){return!1}_handleSpecialPaintPropertyUpdate(a){a!=="raster-particle-color"&&a!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),a==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const a=this._transitionablePaint._values["raster-particle-color"].value.expression,d=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=Y1({expression:a,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:d}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=sn.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class BZ extends Wa{constructor(a,d){super(a,{},d,null),this.implementation=a,a.slot&&(this.slot=a.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(a){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}function mB(f,a,d){const A=[0,0,1],_=De.quat.identity([]);return De.quat.rotateY(_,_,d?-vt(f)+Math.PI:vt(f)),De.quat.rotateX(_,_,-vt(a)),De.vec3.transformQuat(A,A,_),De.vec3.normalize(A,A)}function hM(f,a){const d=mw(f.projection,f.zoom,f.width,f.height),A=function(y,b,N,z,G){const T=new Ee(N.lng-180*OA,N.lat),O=new Ee(N.lng+180*OA,N.lat),H=y.project(T.lng,T.lat),U=y.project(O.lng,O.lat),Q=-Math.atan2(U.y-H.y,U.x-H.x),W=sr.fromLngLat(N);W.y=Ir(W.y,-1+OA,1-OA);const re=W.toLngLat(),ue=y.project(re.lng,re.lat),Be=sr.fromLngLat(re);Be.x+=OA;const Te=Be.toLngLat(),he=y.project(Te.lng,Te.lat),ke=pM(he.x-ue.x,he.y-ue.y,Q),Ve=sr.fromLngLat(re);Ve.y+=OA;const rt=Ve.toLngLat(),dt=y.project(rt.lng,rt.lat),ft=pM(dt.x-ue.x,dt.y-ue.y,Q),at=Math.abs(ke.x)/Math.abs(ft.y),Et=De.mat4.identity([]);De.mat4.rotateZ(Et,Et,-Q*(1-(G?0:z)));const yt=De.mat4.identity([]);return De.mat4.scale(yt,yt,[1,1-(1-at)*z,1]),yt[4]=-ft.x/ft.y*z,De.mat4.rotateZ(yt,yt,Q),De.mat4.multiply(yt,Et,yt),yt}(f.projection,0,f.center,d,a),_=fM(f);return De.mat4.scale(A,A,[_,_,1]),A}function fM(f){const a=f.projection,d=mw(f.projection,f.zoom,f.width,f.height),A=gB(a,f.center),_=gB(a,Ee.convert(a.center));return Math.pow(2,A*d+(1-d)*_)}function mw(f,a,d,A,_=1/0){const y=f.range;if(!y)return 0;const b=Math.min(_,Math.max(d,A)),N=Math.log(b/1024)/Math.LN2;return cn(y[0]+N,y[1]+N,a)}const OA=1/4e4;function gB(f,a){const d=Ir(a.lat,-Tt,Tt),A=new Ee(a.lng-180*OA,d),_=new Ee(a.lng+180*OA,d),y=f.project(A.lng,d),b=f.project(_.lng,d),N=sr.fromLngLat(A),z=sr.fromLngLat(_),G=b.x-y.x,T=b.y-y.y,O=z.x-N.x,H=z.y-N.y,U=Math.sqrt((O*O+H*H)/(G*G+T*T));return Math.log(U)/Math.LN2}function pM(f,a,d){const A=Math.cos(d),_=Math.sin(d);return{x:f*A-a*_,y:f*_+a*A}}function AM(f,a,d){De.mat4.identity(f),De.mat4.rotateZ(f,f,vt(a[2])),De.mat4.rotateX(f,f,vt(a[0])),De.mat4.rotateY(f,f,vt(a[1])),De.mat4.scale(f,f,d),De.mat4.multiply(f,f,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function gw(f,a,d,A,_,y,b,N){const z=[d[0]-a[0],d[1]-a[1],0],G=[A[0]-a[0],A[1]-a[1],0];if(De.vec3.length(z)<1e-12||De.vec3.length(G)<1e-12)return De.quat.identity(f);const T=De.vec3.cross([],z,G);De.vec3.normalize(T,T),De.vec3.subtract(G,A,a),z[2]=(y-_)*N,G[2]=(b-_)*N;const O=z;return De.vec3.cross(O,z,G),De.vec3.normalize(O,O),De.quat.rotationTo(f,T,O)}function yB(f,a,d=!1){const A=FA(a.zoom),_=function(y,b,N){const z=b.worldSize,G=[y[12],y[13],y[14]],T=_t(G[1]/z),O=wt(G[0]/z),H=De.mat4.identity([]),U=ut(1,T)*z,Q=ut(1,0)*z*Vt(T,b.zoom),W=1/FS(z);let re=Q*W;if(N){const he=mw(b.projection,b.zoom,b.width,b.height,1024);re=W*b.projection.pixelSpaceConversion(b.center.lat,z,he)}const ue=ae(T,O);De.vec3.add(ue,ue,De.vec3.scale([],De.vec3.normalize([],ue),U*re*G[2]));const Be=function(he){const ke=[he[0],he[1],he[2]];let Ve=[0,1,0];const rt=De.vec3.cross([],Ve,ke);return De.vec3.cross(Ve,ke,rt),De.vec3.squaredLength(Ve)===0&&(Ve=[0,1,0],De.vec3.cross(rt,ke,Ve)),De.vec3.normalize(rt,rt),De.vec3.normalize(Ve,Ve),De.vec3.normalize(ke,ke),[rt[0],rt[1],rt[2],0,Ve[0],Ve[1],Ve[2],0,ke[0],ke[1],ke[2],0,he[0],he[1],he[2],1]}(ue);De.mat4.scale(H,H,[re,re,re*U]),De.mat4.translate(H,H,[-G[0],-G[1],-G[2]]);const Te=De.mat4.multiply([],b.globeMatrix,Be);return De.mat4.multiply(Te,Te,H),De.mat4.multiply(Te,Te,y),Te}(f,a,d);if(A>0){const y=function(b,N){const z=N.worldSize,G=ut(1,0)*z*Vt(N.center.lat,N.zoom)/FS(z),T=ut(1,N.center.lat)*z,O=De.mat4.identity([]);return De.mat4.rotateY(O,O,vt(N.center.lng)),De.mat4.rotateX(O,O,vt(N.center.lat)),De.mat4.translate(O,O,[0,0,l]),De.mat4.scale(O,O,[G,G,G*T]),De.mat4.translate(O,O,[N.point.x-.5*z,N.point.y-.5*z,0]),De.mat4.multiply(O,O,b),De.mat4.multiply(O,N.globeMatrix,O)}(f,a);return function(b,N,z){const G=(Q,W,re)=>{const ue=De.vec3.length(Q),Be=De.vec3.length(W),Te=Up(Q,W,re);return De.vec3.scale(Te,Te,1/De.vec3.length(Te)*Sr(ue,Be,re))},T=G([b[0],b[1],b[2]],[N[0],N[1],N[2]],z),O=G([b[4],b[5],b[6]],[N[4],N[5],N[6]],z),H=G([b[8],b[9],b[10]],[N[8],N[9],N[10]],z),U=Up([b[12],b[13],b[14]],[N[12],N[13],N[14]],z);return[T[0],T[1],T[2],0,O[0],O[1],O[2],0,H[0],H[1],H[2],0,U[0],U[1],U[2],1]}(_,y,A)}return _}function mM(f,a,d,A){const _=No.projectAabbCorners(A,d);let y=Number.MAX_VALUE,b=-1;for(let G=0;G<_.length;++G){const T=_[G];T[0]=(.5*T[0]+.5)*a.width,T[1]=(.5-.5*T[1])*a.height,T[2]<y&&(b=G,y=T[2])}const N=G=>new Ze(_[G][0],_[G][1]);let z;switch(b){case 0:case 6:z=[N(1),N(5),N(4),N(7),N(3),N(2),N(1)];break;case 1:case 7:z=[N(0),N(4),N(5),N(6),N(2),N(3),N(0)];break;case 3:case 5:z=[N(1),N(0),N(4),N(7),N(6),N(2),N(1)];break;default:z=[N(1),N(5),N(6),N(7),N(3),N(0),N(1)]}if(dn(f,z))return y}const EZ=as([{name:"a_pos_3f",components:3,type:"Float32"}]),TZ=as([{name:"a_color_3f",components:3,type:"Float32"}]),LZ=as([{name:"a_color_4f",components:4,type:"Float32"}]),IZ=as([{name:"a_uv_2f",components:2,type:"Float32"}]),NZ=as([{name:"a_normal_3f",components:3,type:"Float32"}]),FZ=as([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),PZ=as([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),gM={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class yw{constructor(a,d,A,_){this.message=(a?`${a}: `:"")+A,_&&(this.identifier=_),d!=null&&d.__line__&&(this.line=d.__line__)}}function yM(f,a){const d=f.indexOf("://")===-1;try{return new URL(f,d&&a?"http://example.com":void 0),!0}catch{return!1}}class vM{constructor(a,d){this.feature=a,this.instancedDataOffset=d,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class xM{constructor(){this.instancedDataArray=new cl,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class vB{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.fqid),this.projection=a.projection,this.index=a.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(a,d){}populate(a,d,A,_){this.tileToMeter=Ot(A);const y=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:b,id:N,index:z,sourceLayerIndex:G}of a){const T=N??(b.properties&&b.properties.hasOwnProperty("id")?b.properties.id:void 0),O=nn(b,y);if(!this.layers[0]._featureFilter.filter(new Qi(this.zoom),O,A))continue;const H={id:T,sourceLayerIndex:G,index:z,geometry:y?O.geometry:en(b,A,_),properties:b.properties,type:b.type,patterns:{}},U=this.addFeature(H,H.geometry,O);U&&d.featureIndex.insert(b,H.geometry,z,G,this.index,this.instancesPerModel[U].instancedDataArray.length,Yr/32)}this.lookup=null}update(a,d,A,_){for(const y in this.instancesPerModel){const b=this.instancesPerModel[y];for(const N in a)b.idToFeaturesIndex.hasOwnProperty(N)&&(this.evaluate(b.features[b.idToFeaturesIndex[N]],a[N],b,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let a=!1;for(const d in this.instancesPerModel){const A=this.instancesPerModel[d];for(const _ of A.features){const y=this.layers[0],b=_.feature,N=this.canonical,z=y.paint.get("model-rotation").evaluate(b,{},N),G=y.paint.get("model-scale").evaluate(b,{},N),T=y.paint.get("model-translation").evaluate(b,{},N);De.vec3.exactEquals(_.rotation,z)&&De.vec3.exactEquals(_.scale,G)&&De.vec3.exactEquals(_.translation,T)||(this.evaluate(_,_.featureStates,A,!0),a=!0)}}return a}updateReplacement(a,d,A,_){if(d.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=d.updateTime;const y=d.getReplacementRegionsForTile(a.toUnwrapped(),!0);if(GS(this.activeReplacements,y))return!1;this.activeReplacements=y;let b=!1;for(const N in this.instancesPerModel){const z=this.instancesPerModel[N],G=z.instancedDataArray;for(const T of z.features){const O=T.instancedDataOffset,H=T.instancedDataCount;for(let U=0;U<H;U++){const Q=16*(U+O);let W=G.float32[Q+0];const re=W>Yr;W=re?W-Yr:W;const ue=Math.floor(W),Be=G.float32[Q+1];let Te=!1;for(const he of this.activeReplacements)if(!MP(he,A,gM.Model,_)&&!(he.min.x>ue||ue>he.max.x||he.min.y>Be||Be>he.max.y)&&(Te=zP(UP(ue,Be,a.canonical,he.footprintTileId.canonical),he.footprint),Te))break;G.float32[Q]=Te?W+Yr:W,b=b||Te!==re}}}return b}isEmpty(){for(const a in this.instancesPerModel)if(this.instancesPerModel[a].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(a){if(!this.uploaded)for(const d in this.instancesPerModel){const A=this.instancesPerModel[d];A.instancedDataArray.length<0||A.instancedDataArray.length===0||(A.instancedDataBuffer?A.instancedDataBuffer.updateData(A.instancedDataArray):A.instancedDataBuffer=a.createVertexBuffer(A.instancedDataArray,FZ.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const d in this.instancesPerModel){const A=this.instancesPerModel[d];A.instancedDataArray.length!==0&&A.instancedDataBuffer&&A.instancedDataBuffer.destroy()}const a=this.layers[0].modelManager;if(a&&this.modelUris)for(const d of this.modelUris)a.removeModel(d,"")}addFeature(a,d,A){const _=this.layers[0],y=_.layout.get("model-id").evaluate(A,{},this.canonical);if(!y)return jn(`modelId is not evaluated for layer ${_.id} and it is not going to get rendered.`),y;yM(y,!1)&&(this.modelUris.includes(y)||this.modelUris.push(y)),this.instancesPerModel[y]||(this.instancesPerModel[y]=new xM);const b=this.instancesPerModel[y],N=b.instancedDataArray,z=new vM(A,N.length);for(const G of d)for(const T of G){if(T.x<0||T.x>=Yr||T.y<0||T.y>=Yr)continue;const O=(this.lookupDim-1)/Yr,H=this.lookupDim*(T.y*O|0)+T.x*O|0;if(this.lookup){if(this.lookup[H]!==0)continue;this.lookup[H]=1}this.instanceCount++;const U=N.length;N.resize(U+1),b.instancesEvaluatedElevation.push(0),N.float32[16*U]=T.x,N.float32[16*U+1]=T.y}return z.instancedDataCount=b.instancedDataArray.length-z.instancedDataOffset,z.instancedDataCount>0&&(a.id&&(b.idToFeaturesIndex[a.id]=b.features.length),b.features.push(z),this.evaluate(z,{},b,!1)),y}getModelUris(){return this.modelUris}evaluate(a,d,A,_){const y=this.layers[0],b=a.feature,N=this.canonical,z=a.rotation=y.paint.get("model-rotation").evaluate(b,d,N),G=a.scale=y.paint.get("model-scale").evaluate(b,d,N),T=a.translation=y.paint.get("model-translation").evaluate(b,d,N),O=y.paint.get("model-color").evaluate(b,d,N);O.a=y.paint.get("model-color-mix-intensity").evaluate(b,d,N);const H=[];this.maxVerticalOffset<T[2]&&(this.maxVerticalOffset=T[2]),this.maxScale=Math.max(Math.max(this.maxScale,G[0]),Math.max(G[1],G[2])),AM(H,z,G);const U=Math.round(100*O.a)+O.b/1.05;for(let Q=0;Q<a.instancedDataCount;++Q){const W=a.instancedDataOffset+Q,re=16*W,ue=A.instancedDataArray.float32;let Be=0;_&&(Be=ue[re+6]-A.instancesEvaluatedElevation[W]);const Te=0|ue[re+1];ue[re]=(0|ue[re])+O.r/1.05,ue[re+1]=Te+O.g/1.05,ue[re+2]=U,ue[re+3]=1/(N.z>10?this.tileToMeter:Ot(N,Te)),ue[re+4]=T[0],ue[re+5]=T[1],ue[re+6]=T[2]+Be,ue[re+7]=H[0],ue[re+8]=H[1],ue[re+9]=H[2],ue[re+10]=H[4],ue[re+11]=H[5],ue[re+12]=H[6],ue[re+13]=H[8],ue[re+14]=H[9],ue[re+15]=H[10],A.instancesEvaluatedElevation[W]=T[2]}}}let _M,bM;je(vB,"ModelBucket",{omit:["layers"]}),je(xM,"PerModelAttributes"),je(vM,"ModelFeature");const mg=64,W0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function wM(f,a,d,A,_,y,b,N,z,G=!1){const T=d.zoom,O=d.project(A),H=Vt(A.lat,T),U=1/H;De.mat4.identity(f),De.mat4.translate(f,f,[O.x+b[0]*U,O.y+b[1]*U,b[2]]);let Q=1,W=1;const re=d.worldSize;if(G){if(d.projection.name==="mercator"){let he=0;d.elevation&&(he=d.elevation.getAtPointOrZero(new sr(O.x/re,O.y/re),0));const ke=De.vec4.transformMat4([],[O.x,O.y,he,1],d.projMatrix)[3]/d.cameraToCenterDistance;Q=ke,W=ke*Vt(d.center.lat,T)}else if(d.projection.name==="globe"){const he=yB(f,d),ke=De.mat4.multiply([],d.projMatrix,he),Ve=[0,0,0,1];De.vec4.transformMat4(Ve,Ve,ke);const rt=Ve[3]/d.cameraToCenterDistance,dt=FA(T),ft=d.projection.pixelsPerMeter(A.lat,re)*Vt(A.lat,T),at=d.projection.pixelsPerMeter(d.center.lat,re)*Vt(d.center.lat,T);Q=rt/Sr(ft,jt(d.center.lat),dt),W=rt*H/ft,Q*=at,W*=at}}else Q=U;De.mat4.scale(f,f,[Q,Q,W]);const ue=[...f],Be=a.orientation,Te=[];if(AM(Te,[Be[0]+_[0],Be[1]+_[1],Be[2]+_[2]],y),De.mat4.multiply(f,ue,Te),N&&d.elevation){let he=0;const ke=[];if(z&&d.elevation){he=function(dt,ft,at,Et,yt){const Nt=ft.elevation;if(!Nt)return 0;const zt=No.projectAabbCorners(at,Et),Gt=ut(1,yt.lat)*ft.worldSize,$t=function(Jn,wn){const Pn=[0,0,1],ui=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Ri of ui){const Bi=Jn[Ri.corners[0]],Ei=Jn[Ri.corners[1]],Wi=Jn[Ri.corners[2]],Xi=[Ei[0]-Bi[0],Ei[1]-Bi[1],wn*(Ei[2]-Bi[2])],po=De.vec3.cross(Xi,Xi,[Wi[0]-Bi[0],Wi[1]-Bi[1],wn*(Wi[2]-Bi[2])]);De.vec3.normalize(po,po),Ri.dotProductWithUp=De.vec3.dot(po,Pn)}return ui.sort((Ri,Bi)=>Ri.dotProductWithUp-Bi.dotProductWithUp),ui[0].corners}(zt,Gt),Zt=zt[$t[0]],vr=zt[$t[1]],tr=zt[$t[2]],Br=zt[$t[3]],Ur=Nt.getAtPointOrZero(new sr(Zt[0]/ft.worldSize,Zt[1]/ft.worldSize),0),br=Nt.getAtPointOrZero(new sr(vr[0]/ft.worldSize,vr[1]/ft.worldSize),0),Cn=Nt.getAtPointOrZero(new sr(tr[0]/ft.worldSize,tr[1]/ft.worldSize),0),hn=Nt.getAtPointOrZero(new sr(Br[0]/ft.worldSize,Br[1]/ft.worldSize),0),tn=(Ur+hn)/2,Vr=(br+Cn)/2;return tn>Vr?br<Cn?gw(dt,vr,Br,Zt,br,hn,Ur,Gt):gw(dt,tr,Zt,Br,Cn,Ur,hn,Gt):Ur<hn?gw(dt,Zt,vr,tr,Ur,br,Cn,Gt):gw(dt,Br,tr,vr,hn,Cn,br,Gt),Math.max(tn,Vr)}(ke,d,a.aabb,f,A);const Ve=De.mat4.fromQuat([],ke),rt=De.mat4.multiply([],Ve,Te);De.mat4.multiply(f,ue,rt)}else he=d.elevation.getAtPointOrZero(new sr(O.x/re,O.y/re),0);he!==0&&(f[14]+=he)}}function gv(f,a,d=!1){f.uploaded||(f.gfxTexture=new AB(a,f.image,d?a.gl.R8:a.gl.RGBA8,{useMipmap:f.sampler.minFilter>=a.gl.NEAREST_MIPMAP_NEAREST}),f.uploaded=!0,f.image=null)}function jZ(f,a,d){f.indexBuffer=a.createIndexBuffer(f.indexArray,!1,!0),f.vertexBuffer=a.createVertexBuffer(f.vertexArray,EZ.members,!1,!0),f.normalArray&&(f.normalBuffer=a.createVertexBuffer(f.normalArray,NZ.members,!1,!0)),f.texcoordArray&&(f.texcoordBuffer=a.createVertexBuffer(f.texcoordArray,IZ.members,!1,!0)),f.colorArray&&(f.colorBuffer=a.createVertexBuffer(f.colorArray,(f.colorArray.bytesPerElement===12?TZ:LZ).members,!1,!0)),f.featureArray&&(f.pbrBuffer=a.createVertexBuffer(f.featureArray,PZ.members,!0)),f.segments=La.simpleSegment(0,0,f.vertexArray.length,f.indexArray.length);const A=f.material;A.pbrMetallicRoughness.baseColorTexture&&gv(A.pbrMetallicRoughness.baseColorTexture,a),A.pbrMetallicRoughness.metallicRoughnessTexture&&gv(A.pbrMetallicRoughness.metallicRoughnessTexture,a),A.normalTexture&&gv(A.normalTexture,a),A.occlusionTexture&&gv(A.occlusionTexture,a,d),A.emissionTexture&&gv(A.emissionTexture,a)}function xB(f,a,d){if(f.meshes)for(const A of f.meshes)jZ(A,a,d);if(f.children)for(const A of f.children)xB(A,a,d)}function vw(f){if(f.meshes)for(const a of f.meshes)a.indexArray.destroy(),a.vertexArray.destroy(),a.colorArray&&a.colorArray.destroy(),a.normalArray&&a.normalArray.destroy(),a.texcoordArray&&a.texcoordArray.destroy(),a.featureArray&&a.featureArray.destroy();if(f.children)for(const a of f.children)vw(a)}function _B(f){if(f.meshes)for(const d of f.meshes)d.vertexBuffer&&(d.vertexBuffer.destroy(),d.indexBuffer.destroy(),d.normalBuffer&&d.normalBuffer.destroy(),d.texcoordBuffer&&d.texcoordBuffer.destroy(),d.colorBuffer&&d.colorBuffer.destroy(),d.pbrBuffer&&d.pbrBuffer.destroy(),d.segments.destroy(),d.material&&((a=d.material).pbrMetallicRoughness.baseColorTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),a.pbrMetallicRoughness.metallicRoughnessTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),a.normalTexture&&a.normalTexture.gfxTexture&&a.normalTexture.gfxTexture.destroy(),a.emissionTexture&&a.emissionTexture.gfxTexture&&a.emissionTexture.gfxTexture.destroy(),a.occlusionTexture&&a.occlusionTexture.gfxTexture&&a.occlusionTexture.gfxTexture.destroy()));var a;if(f.children)for(const d of f.children)_B(d)}class K0{constructor(a,d,A){this._demTile=a,this._dem=this._demTile.dem,this._scale=d,this._offset=A}static create(a,d,A){const _=A||a.findDEMTileFor(d);if(!_||!_.dem)return;const y=_.dem,b=_.tileID,N=1<<d.canonical.z-b.canonical.z;return new K0(_,y.dim/Yr/N,[(d.canonical.x/N-b.canonical.x)*y.dim,(d.canonical.y/N-b.canonical.y)*y.dim])}tileCoordToPixel(a,d){const A=d*this._scale+this._offset[1],_=Math.floor(a*this._scale+this._offset[0]),y=Math.floor(A);return new Ze(_,y)}getElevationAt(a,d,A,_){const y=a*this._scale+this._offset[0],b=d*this._scale+this._offset[1],N=Math.floor(y),z=Math.floor(b),G=this._dem;return _=!!_,A?Sr(Sr(G.get(N,z,_),G.get(N,z+1,_),b-z),Sr(G.get(N+1,z,_),G.get(N+1,z+1,_),b-z),y-N):G.get(N,z,_)}getElevationAtPixel(a,d,A){return this._dem.get(a,d,!!A)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*ut(1,a)*this._dem.stride}}const bB=new Float32Array(262144),gg=new Uint8Array(262144);function CM(f){let a=0;if(f.meshes)for(const d of f.meshes)a=Math.max(a,d.aabb.max[2]);if(f.children)for(const d of f.children)a=Math.max(a,CM(d));return a}function SM(f,a,d){if(f.meshes)for(const A of f.meshes)A.aabb.min[0]!==1/0&&d.insert(a,A.aabb.min[0],A.aabb.min[1],A.aabb.max[0],A.aabb.max[1]);if(f.children)for(const A of f.children)SM(A,a,d)}const BM=["","wall","door","roof","window","lamp","logo"];class EM{constructor(a){this.node=a,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:a.id,geometry:[],properties:{height:CM(a)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new No([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let a=0;const d=new No([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const A of this.node.meshes)this.node.lightMeshIndex!==a&&(A.transformedAabb=No.applyTransformFast(A.aabb,this.node.matrix),d.encapsulate(A.transformedAabb)),a++;this.aabb=d}return this.aabb}}class xw{constructor(a,d,A,_,y,b){this.id=d,this.modelTraits|=W0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,A&&(this.modelTraits|=W0.HasMapboxMeshFeatures),_&&(this.modelTraits|=W0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=y,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const N of a)this.nodesInfo.push(new EM(N)),SM(N,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0)}updateFootprints(a,d){for(const A of this.getNodesInfo()){const _=A.node;_.footprint&&d.push({footprint:_.footprint,id:a})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(a){if(!this.needsUpload)return;const d=this.getNodesInfo();for(const A of d){const _=A.node;this.uploaded?this.updatePbrBuffer(_):xB(_,a,!0)}for(const A of d)vw(A.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(a){let d=!1;if(!a.meshes)return d;for(const A of a.meshes)A.pbrBuffer&&(A.pbrBuffer.updateData(A.featureArray),d=!0);return d}needsReEvaluation(a,d,A){const _=a.transform.projectionOptions,y=a.style.getBrightness(),b=this.brightness!==y;return!!(!this.uploaded||this.dirty||_.name!==this.projection.name||yv(A.paint.get("model-color").value,b)||yv(A.paint.get("model-color-mix-intensity").value,b)||yv(A.paint.get("model-roughness").value,b)||yv(A.paint.get("model-emissive-strength").value,b)||yv(A.paint.get("model-height-based-emissive-strength-multiplier").value,b))&&(this.projection=_,this.brightness=y,!0)}evaluateScale(a,d){if(a.transform.zoom===this.zoom)return;this.zoom=a.transform.zoom;const A=this.getNodesInfo(),_=this.id.canonical;for(const y of A){const b=y.feature;y.evaluatedScale=d.paint.get("model-scale").evaluate(b,{},_)}}evaluate(a){const d=this.getNodesInfo();for(const A of d){if(!A.node.meshes)continue;const _=A.feature,y=A.node.meshes&&A.node.meshes[0].featureData,b=A.evaluatedColor[2],N=A.evaluatedRMEA[2],z=this.id.canonical;if(A.hasTranslucentParts=!1,y){for(let G=0;G<BM.length;G++){const T=BM[G];T.length&&(_.properties.part=T);const O=a.paint.get("model-color").evaluate(_,{},z).toRenderColor(null),H=a.paint.get("model-color-mix-intensity").evaluate(_,{},z);A.evaluatedColor[G]=[O.r,O.g,O.b,H],A.evaluatedRMEA[G][0]=a.paint.get("model-roughness").evaluate(_,{},z),A.evaluatedRMEA[G][2]=a.paint.get("model-emissive-strength").evaluate(_,{},z),A.evaluatedRMEA[G][3]=O.a,A.emissionHeightBasedParams[G]=a.paint.get("model-height-based-emissive-strength-multiplier").evaluate(_,{},z),!A.hasTranslucentParts&&O.a<1&&(A.hasTranslucentParts=!0)}delete _.properties.part,kZ(A,b!==A.evaluatedColor[2]||N!==A.evaluatedRMEA[2],this.modelTraits)}else A.evaluatedRMEA[0][2]=a.paint.get("model-emissive-strength").evaluate(_,{},z);A.evaluatedScale=a.paint.get("model-scale").evaluate(_,{},z),this.updatePbrBuffer(A.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(a,d,A,_){const y=a.findDEMTileFor(A);if(y&&(y.tileID.canonical!==this.terrainTile||d!==this.terrainExaggeration)){if(y.dem&&y.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=y.tileID.overscaledZ;const b=K0.create(a,A,y);if(!b)return;this.modelTraits&W0.HasMapboxMeshFeatures&&this.updateDEM(a,b,A,_);for(const N of this.getNodesInfo()){const z=N.node;if(!z.footprint||!z.footprint.vertices||!z.footprint.vertices.length)continue;const G=z.footprint.vertices;let T=b.getElevationAt(G[0].x,G[0].y,!0,!0);for(let O=1;O<G.length;O++)T=Math.min(T,b.getElevationAt(G[O].x,G[O].y,!0,!0));z.elevation=T}}this.terrainTile=y.tileID.canonical,this.terrainExaggeration=d}}updateDEM(a,d,A,_){let y=d._dem._modifiedForSources[_];if(y===void 0&&(d._dem._modifiedForSources[_]=[],y=d._dem._modifiedForSources[_]),y.includes(A.canonical))return;const b=d._dem.dim;y.push(A.canonical);let N=!1;for(const z of this.getNodesInfo()){const G=z.node;if(!G.footprint||!G.footprint.grid)continue;const T=G.footprint.grid,O=d.tileCoordToPixel(T.min.x,T.min.y),H=d.tileCoordToPixel(T.max.x,T.max.y),U=Math.min(Math.min(b-H.y,O.x),Math.min(O.y,b-H.x));if(U<0)continue;const Q=Ir(U,2,5);let W=Math.max(0,O.x-Q),re=Math.max(0,O.y-Q),ue=Math.min(H.x+Q,b-1),Be=Math.min(H.y+Q,b-1);for(let Ve=re;Ve<=Be;++Ve)for(let rt=W;rt<=ue;++rt)gg[Ve*b+rt]=255;let Te=0,he=0;for(let Ve=0;Ve<T.cellsY;++Ve)for(let rt=0;rt<T.cellsX;++rt){if(!T.cells[Ve*T.cellsX+rt])continue;const dt=d.tileCoordToPixel(T.min.x+rt/T.xScale,T.min.y+Ve/T.yScale),ft=d.tileCoordToPixel(T.min.x+(rt+1)/T.xScale,T.min.y+(Ve+1)/T.yScale);for(let at=dt.y;at<=Math.min(ft.y+1,b-1);++at)for(let Et=dt.x;Et<=Math.min(ft.x+1,b-1);++Et)gg[at*b+Et]===255&&(gg[at*b+Et]=0,Te+=d.getElevationAtPixel(Et,at),he++)}const ke=Te/he;W=Math.max(1,O.x-Q),re=Math.max(1,O.y-Q),ue=Math.min(H.x+Q,b-2),Be=Math.min(H.y+Q,b-2),N=!0;for(let Ve=re;Ve<=Be;++Ve)for(let rt=W;rt<=ue;++rt)gg[Ve*b+rt]===0&&(bB[Ve*b+rt]=d._dem.set(rt,Ve,ke));for(let Ve=1;Ve<Q;++Ve){W=Math.max(1,O.x-Ve),re=Math.max(1,O.y-Ve),ue=Math.min(H.x+Ve,b-2),Be=Math.min(H.y+Ve,b-2);for(let rt=re;rt<=Be;++rt)for(let dt=W;dt<=ue;++dt){const ft=rt*b+dt;if(gg[ft]===255){let at=0,Et=0,yt=-1,Nt=-1;for(let zt=-1;zt<=1;++zt)for(let Gt=-1;Gt<=1;++Gt){const $t=(rt+zt)*b+dt+Gt;if(gg[$t]>=Ve)continue;const Zt=bB[$t],vr=Math.abs(Zt);vr>Et&&(at=Zt,Et=vr,yt=Gt,Nt=zt)}if(Et>.1){const zt=1-(Ve+.5*Math.abs(yt*Nt))/Q;let Gt=d._dem.get(dt,rt)+at*zt;const $t=d._dem.get(dt+yt,rt+Nt),Zt=d._dem.get(dt-yt,rt-Nt,!0);(Gt-$t)*(Gt-Zt)>0&&(Gt=($t+Zt)/2),bB[ft]=d._dem.set(dt,rt,Gt),gg[ft]=Ve}}}}}N&&(d._demTile.needsDEMTextureUpload=!0,d._dem._timestamp=sn.now())}getNodesInfo(){return this.nodesInfo}destroy(){const a=this.getNodesInfo();for(const d of a)vw(d.node),_B(d.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(a,d){if(d.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=d.updateTime;const A=d.getReplacementRegionsForTile(a.toUnwrapped()),_=this.getNodesInfo();for(let y=0;y<this.nodesInfo.length;y++){const b=_[y].node;_[y].hiddenByReplacement=!!b.footprint&&!A.find(N=>N.footprint===b.footprint)}}getHeightAtTileCoord(a,d){const A=this.getNodesInfo(),_=[],y=[0,0,0],b=De.mat4.identity([]);for(let N=0;N<this.nodesInfo.length;N++){const z=A[N],G=z.node.meshes[0],T=G.transformedAabb;if(a<T.min[0]||d<T.min[1]||a>T.max[0]||d>T.max[1])continue;if(z.node.hidden===!0)return{height:1/0,maxHeight:z.feature.properties.height,hidden:!1,verticalScale:z.evaluatedScale[2]};De.mat4.invert(b,z.node.matrix),y[0]=a,y[1]=d,De.vec3.transformMat4(y,y,b);const O=(y[0]-G.aabb.min[0])/(G.aabb.max[0]-G.aabb.min[0])*mg|0,H=Math.min(63,(y[1]-G.aabb.min[1])/(G.aabb.max[1]-G.aabb.min[1])*mg|0)*mg+Math.min(63,O),U=G.heightmap[H];if(!(U<0&&z.node.footprint))return z.hiddenByReplacement?void 0:{height:U,maxHeight:z.feature.properties.height,hidden:!1,verticalScale:z.evaluatedScale[2]};if(z.node.footprint.grid.query(new Ze(a,d),new Ze(a,d),_),_.length>0)return{height:void 0,maxHeight:z.feature.properties.height,hidden:z.hiddenByReplacement,verticalScale:z.evaluatedScale[2]}}}}function yv(f,a){return!f.isLightConstant&&a}function MZ(f,a,d,A,_,y,b,N){let z=(61440&a|(61440&a)>>4)>>8,G=(3840&a|(3840&a)>>4)>>4,T=240&a|(240&a)>>4;d[3]>0&&(z=Sr(z,255*d[0],d[3]),G=Sr(G,255*d[1],d[3]),T=Sr(T,255*d[2],d[3]));const O=z<<8|G,H=T<<8|Math.floor(255*A[3]),U=function(Ve){const rt=Ir(Ve,0,2);return Math.min(Math.round(.5*rt*255),255)}(A[2])<<8|15*A[0]<<4|15*A[1],Q=Ir(_[0],0,1),W=Ir(_[1],0,1),re=Ir(_[2],0,1),ue=Ir(_[3],0,1);let Be,Te,he,ke;if(Q!==W&&b!==y&&W!==Q){const Ve=b-y;Te=1/(Ve*(W-Q)),he=-(y+Ve*Q)/(Ve*(W-Q));const rt=Ir(_[4],-1,1);ke=Math.pow(10,rt),Be=255*re<<8|255*ue}else Be=65535,Te=0,he=1,ke=1;if(f.emplaceBack(O,H,U,Be,Te,he,ke),N){const Ve=N.length;N.clear();for(let rt=0;rt<Ve;rt++)N.emplaceBack(O,H,U,Be,Te,he,ke)}}function kZ(f,a,d){const A=f.node;let _=0;const y=d&W0.HasMeshoptCompression;for(const b of A.meshes){if(A.lights&&A.lightMeshIndex===_||!b.featureData)continue;b.featureArray=new Nu,b.featureArray.reserve(b.featureData.length);let N=a;for(const z of b.featureData){const G=y?65535&z:z>>16&65535,T=y?z>>16&65535:65535&z,O=(15&T)<8?15&T:0,H=f.evaluatedRMEA[O],U=f.evaluatedColor[O],Q=f.emissionHeightBasedParams[O];let W;if(N&&O===2&&A.lights&&(W=new Nu,W.resize(10*A.lights.length)),MZ(b.featureArray,G,U,H,Q,b.aabb.min[2],b.aabb.max[2],W),W&&N){N=!1;const re=A.meshes[A.lightMeshIndex];re.featureArray=W,re.featureArray._trim()}}b.featureArray._trim(),_++}}function TM(f,a,d,A){const _=1<<f.z;a.lat=_t((A/Yr+f.y)/_),a.lng=wt((d/Yr+f.x)/_)}je(xw,"Tiled3dModelBucket",{omit:["layers"]}),je(EM,"Tiled3dModelFeature");const DZ={circle:class extends Wa{constructor(f,a,d,A){super(f,{layout:Vs||(Vs=new Es({"circle-sort-key":new In(cr.layout_circle["circle-sort-key"]),visibility:new jr(cr.layout_circle.visibility)})),paint:Ia||(Ia=new Es({"circle-radius":new In(cr.paint_circle["circle-radius"]),"circle-color":new In(cr.paint_circle["circle-color"]),"circle-blur":new In(cr.paint_circle["circle-blur"]),"circle-opacity":new In(cr.paint_circle["circle-opacity"]),"circle-translate":new jr(cr.paint_circle["circle-translate"]),"circle-translate-anchor":new jr(cr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jr(cr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jr(cr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new In(cr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new In(cr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new In(cr.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new jr(cr.paint_circle["circle-emissive-strength"])}))},a,d,A)}createBucket(f){return new Yn(f)}queryRadius(f){const a=f;return ia("circle-radius",this,a)+ia("circle-stroke-width",this,a)+ro(this.paint.get("circle-translate"))}queryIntersectsFeature(f,a,d,A,_,y,b,N){const z=Ts(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),G=this.paint.get("circle-radius").evaluate(a,d)+this.paint.get("circle-stroke-width").evaluate(a,d);return oP(f,A,y,b,N,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",z,G)}getProgramIds(){return["circle"]}getDefaultProgramParams(f,a,d){const A=sP(this);return{config:new Op(this,{zoom:a,lut:d}),defines:A,overrideFog:!1}}},heatmap:class extends Wa{createBucket(f){return new lP(f)}constructor(f,a,d,A){super(f,{layout:cP||(cP=new Es({visibility:new jr(cr.layout_heatmap.visibility)})),paint:uP||(uP=new Es({"heatmap-radius":new In(cr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new In(cr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jr(cr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ya(cr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jr(cr.paint_heatmap["heatmap-opacity"])}))},a,d,A),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(f){f==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Y1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(f){return ia("heatmap-radius",this,f)}queryIntersectsFeature(f,a,d,A,_,y,b,N){const z=this.paint.get("heatmap-radius").evaluate(a,d);return oP(f,A,y,b,N,!0,!0,new Ze(0,0),z)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(f,a,d){return f==="heatmap"?{config:new Op(this,{zoom:a,lut:d}),overrideFog:!1}:{}}},hillshade:class extends Wa{constructor(f,a,d,A){super(f,{layout:dP||(dP=new Es({visibility:new jr(cr.layout_hillshade.visibility)})),paint:hP||(hP=new Es({"hillshade-illumination-direction":new jr(cr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new jr(cr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jr(cr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jr(cr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jr(cr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jr(cr.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new jr(cr.paint_hillshade["hillshade-emissive-strength"])}))},a,d,A)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(f,a,d){return{overrideFog:!1}}},fill:class extends Wa{constructor(f,a,d,A){super(f,{layout:xP||(xP=new Es({"fill-sort-key":new In(cr.layout_fill["fill-sort-key"]),visibility:new jr(cr.layout_fill.visibility)})),paint:_P||(_P=new Es({"fill-antialias":new jr(cr.paint_fill["fill-antialias"]),"fill-opacity":new In(cr.paint_fill["fill-opacity"]),"fill-color":new In(cr.paint_fill["fill-color"]),"fill-outline-color":new In(cr.paint_fill["fill-outline-color"]),"fill-translate":new jr(cr.paint_fill["fill-translate"]),"fill-translate-anchor":new jr(cr.paint_fill["fill-translate-anchor"]),"fill-pattern":new In(cr.paint_fill["fill-pattern"]),"fill-emissive-strength":new jr(cr.paint_fill["fill-emissive-strength"]),"fill-z-offset":new In(cr.paint_fill["fill-z-offset"])}))},a,d,A)}getProgramIds(){const f=this.paint.get("fill-pattern"),a=f&&f.constantOr(1),d=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&d.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),d}getDefaultProgramParams(f,a,d){return{config:new Op(this,{zoom:a,lut:d}),overrideFog:!1}}recalculate(f,a){super.recalculate(f,a);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(f){return new RS(f)}queryRadius(){return ro(this.paint.get("fill-translate"))}queryIntersectsFeature(f,a,d,A,_,y){return!f.queryGeometry.isAboveHorizon&&ai(Oi(f.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),A)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Wa{constructor(f,a,d,A){super(f,{layout:rj||(rj=new Es({visibility:new jr(cr["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new jr(cr["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:nj||(nj=new Es({"fill-extrusion-opacity":new jr(cr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new In(cr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jr(cr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jr(cr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new In(cr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new In(cr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new In(cr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jr(cr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new jr(cr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new jr(cr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new jr(cr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new jr(cr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new jr(cr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new jr(cr["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new jr(cr["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new In(cr["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new In(cr["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new jr(cr["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new jr(cr["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new jr(cr["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new jr(cr["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new In(cr["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new In(cr["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new jr(cr["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},a,d,A),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(f){return new Yb(f)}queryRadius(){return ro(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(f,a,d,A,_,y,b,N,z){const G=Ts(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(a,d),O=this.paint.get("fill-extrusion-base").evaluate(a,d),H=[0,0],U=N&&y.elevation,Q=y.elevation?y.elevation.exaggeration():1,W=f.tile.getBucket(this);if(U&&W instanceof Yb){const he=W.centroidVertexArray,ke=z+1;ke<he.length&&(H[0]=he.geta_centroid_pos0(ke),H[1]=he.geta_centroid_pos1(ke))}if(H[0]===0&&H[1]===1)return!1;y.projection.name==="globe"&&(A=tj([A],[new Ze(0,0),new Ze(Yr,Yr)],f.tileID.canonical).map(he=>he.polygon).flat());const re=U?N:null,[ue,Be]=function(he,ke,Ve,rt,dt,ft,at,Et,yt,Nt,zt){return he.projection.name==="globe"?function(Gt,$t,Zt,vr,tr,Br,Ur,br,Cn,hn,tn){const Vr=[],Jn=[],wn=Gt.projection.upVectorScale(tn,Gt.center.lat,Gt.worldSize).metersToTile,Pn=[0,0,0,1],ui=[0,0,0,1],Ri=(Ei,Wi,Xi,po)=>{Ei[0]=Wi,Ei[1]=Xi,Ei[2]=po,Ei[3]=1},Bi=ej();Zt>0&&(Zt+=Bi),vr+=Bi;for(const Ei of $t){const Wi=[],Xi=[];for(const po of Ei){const Gs=po.x+tr.x,pi=po.y+tr.y,js=Gt.projection.projectTilePoint(Gs,pi,tn),Rs=Gt.projection.upVector(tn,po.x,po.y);let Oo=Zt,Da=vr;if(Ur){const dl=sj(Gs,pi,Zt,vr,Ur,br,Cn,hn);Oo+=dl.base,Da+=dl.top}Zt!==0?Ri(Pn,js.x+Rs[0]*wn*Oo,js.y+Rs[1]*wn*Oo,js.z+Rs[2]*wn*Oo):Ri(Pn,js.x,js.y,js.z),Ri(ui,js.x+Rs[0]*wn*Da,js.y+Rs[1]*wn*Da,js.z+Rs[2]*wn*Da),De.vec3.transformMat4(Pn,Pn,Br),De.vec3.transformMat4(ui,ui,Br),Wi.push(new Ag(Pn[0],Pn[1],Pn[2])),Xi.push(new Ag(ui[0],ui[1],ui[2]))}Vr.push(Wi),Jn.push(Xi)}return[Vr,Jn]}(he,ke,Ve,rt,dt,ft,at,Et,yt,Nt,zt):at?function(Gt,$t,Zt,vr,tr,Br,Ur,br,Cn){const hn=[],tn=[],Vr=[0,0,0,1];for(const Jn of Gt){const wn=[],Pn=[];for(const ui of Jn){const Ri=ui.x+vr.x,Bi=ui.y+vr.y,Ei=sj(Ri,Bi,$t,Zt,Br,Ur,br,Cn);Vr[0]=Ri,Vr[1]=Bi,Vr[2]=Ei.base,Vr[3]=1,De.vec4.transformMat4(Vr,Vr,tr),Vr[3]=Math.max(Vr[3],1e-5);const Wi=new Ag(Vr[0]/Vr[3],Vr[1]/Vr[3],Vr[2]/Vr[3]);Vr[0]=Ri,Vr[1]=Bi,Vr[2]=Ei.top,Vr[3]=1,De.vec4.transformMat4(Vr,Vr,tr),Vr[3]=Math.max(Vr[3],1e-5);const Xi=new Ag(Vr[0]/Vr[3],Vr[1]/Vr[3],Vr[2]/Vr[3]);wn.push(Wi),Pn.push(Xi)}hn.push(wn),tn.push(Pn)}return[hn,tn]}(ke,Ve,rt,dt,ft,at,Et,yt,Nt):function(Gt,$t,Zt,vr,tr){const Br=[],Ur=[],br=tr[8]*$t,Cn=tr[9]*$t,hn=tr[10]*$t,tn=tr[11]*$t,Vr=tr[8]*Zt,Jn=tr[9]*Zt,wn=tr[10]*Zt,Pn=tr[11]*Zt;for(const ui of Gt){const Ri=[],Bi=[];for(const Ei of ui){const Wi=Ei.x+vr.x,Xi=Ei.y+vr.y,po=tr[0]*Wi+tr[4]*Xi+tr[12],Gs=tr[1]*Wi+tr[5]*Xi+tr[13],pi=tr[2]*Wi+tr[6]*Xi+tr[14],js=tr[3]*Wi+tr[7]*Xi+tr[15],Rs=po+br,Oo=Gs+Cn,Da=pi+hn,dl=Math.max(js+tn,1e-5),Oa=po+Vr,va=Gs+Jn,hc=pi+wn,xl=Math.max(js+Pn,1e-5);Ri.push(new Ag(Rs/dl,Oo/dl,Da/dl)),Bi.push(new Ag(Oa/xl,va/xl,hc/xl))}Br.push(Ri),Ur.push(Bi)}return[Br,Ur]}(ke,Ve,rt,dt,ft)}(y,A,O,T,G,b,re,H,Q,y.center.lat,f.tileID.canonical),Te=f.queryGeometry;return function(he,ke,Ve){let rt=1/0;ai(Ve,ke)&&(rt=ij(Ve,ke[0]));for(let dt=0;dt<ke.length;dt++){const ft=ke[dt],at=he[dt];for(let Et=0;Et<ft.length-1;Et++){const yt=ft[Et],Nt=[yt,ft[Et+1],at[Et+1],at[Et],yt];dn(Ve,Nt)&&(rt=Math.min(rt,ij(Ve,Nt)))}}return rt!==1/0&&rt}(ue,Be,Te.isPointQuery()?Te.screenBounds:Te.screenGeometry)}},line:class extends Wa{constructor(f,a,d,A){const _=Aj();super(f,_,a,d,A),_.layout&&(this.layout=new ca(_.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(f){if(f==="line-gradient"){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof $a,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(f,a){super.recalculate(f,a),this.paint._values["line-floorwidth"]=(()=>{if(ov)return ov;const d=Aj();return ov=new UY(d.paint.properties["line-width"].specification),ov.useIntegerZoom=!0,ov})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)}createBucket(f){return new KS(f)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(f,a,d){const A=fj(this);return{config:new Op(this,{zoom:a,lut:d}),defines:A,overrideFog:!1}}queryRadius(f){const a=f,d=mj(ia("line-width",this,a),ia("line-gap-width",this,a)),A=ia("line-offset",this,a);return d/2+Math.abs(A)+ro(this.paint.get("line-translate"))}queryIntersectsFeature(f,a,d,A,_,y){if(f.queryGeometry.isAboveHorizon)return!1;const b=Oi(f.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),N=f.pixelToTileUnitsFactor/2*mj(this.paint.get("line-width").evaluate(a,d),this.paint.get("line-gap-width").evaluate(a,d)),z=this.paint.get("line-offset").evaluate(a,d);return z&&(A=function(G,T){const O=[],H=new Ze(0,0);for(let U=0;U<G.length;U++){const Q=G[U],W=[];for(let re=0;re<Q.length;re++){const ue=Q[re],Be=Q[re+1],Te=re===0?H:ue.sub(Q[re-1])._unit()._perp(),he=re===Q.length-1?H:Be.sub(ue)._unit()._perp(),ke=Te._add(he)._unit();ke._mult(1/(ke.x*he.x+ke.y*he.y)),W.push(ke._mult(T)._add(ue))}O.push(W)}return O}(A,z*f.pixelToTileUnitsFactor)),function(G,T,O){for(let H=0;H<T.length;H++){const U=T[H];if(G.length>=3){for(let Q=0;Q<U.length;Q++)if(Do(G,U[Q]))return!0}if(zn(G,U,O))return!0}return!1}(b,A,N)}isTileClipped(){return!0}isDraped(f){const a=this.layout.get("line-z-offset");return a.isConstant()&&!a.constantOr(0)}},symbol:hw,background:class extends Wa{constructor(f,a,d,A){super(f,{layout:Jj||(Jj=new Es({visibility:new jr(cr.layout_background.visibility)})),paint:eM||(eM=new Es({"background-pitch-alignment":new jr(cr.paint_background["background-pitch-alignment"]),"background-color":new jr(cr.paint_background["background-color"]),"background-pattern":new jr(cr.paint_background["background-pattern"]),"background-opacity":new jr(cr.paint_background["background-opacity"]),"background-emissive-strength":new jr(cr.paint_background["background-emissive-strength"])}))},a,d,A)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(f,a,d){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:sM,"raster-particle":dM,sky:class extends Wa{constructor(f,a,d,A){super(f,{layout:lM||(lM=new Es({visibility:new jr(cr.layout_sky.visibility)})),paint:cM||(cM=new Es({"sky-type":new jr(cr.paint_sky["sky-type"]),"sky-atmosphere-sun":new jr(cr.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new jr(cr.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new jr(cr.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new jr(cr.paint_sky["sky-gradient-radius"]),"sky-gradient":new ya(cr.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new jr(cr.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new jr(cr.paint_sky["sky-atmosphere-color"]),"sky-opacity":new jr(cr.paint_sky["sky-opacity"])}))},a,d,A),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(f){f==="sky-gradient"?this._updateColorRamp():f!=="sky-atmosphere-sun"&&f!=="sky-atmosphere-halo-color"&&f!=="sky-atmosphere-color"&&f!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Y1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(f){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=f.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(f,a){if(this.paint.get("sky-type")==="atmosphere"){const A=this.paint.get("sky-atmosphere-sun"),_=!A,y=f.style.light,b=y.properties.get("position");return _&&y.properties.get("anchor")==="viewport"&&jn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),_?mB(b.azimuthal,90-b.polar,a):mB(A[0],90-A[1],a)}const d=this.paint.get("sky-gradient-center");return mB(d[0],90-d[1],a)}isSky(){return!0}markSkyboxValid(f){this._skyboxInvalidated=!1,this._lightPosition=f.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const f=this.paint.get("sky-type");return f==="atmosphere"?["skyboxCapture","skybox"]:f==="gradient"?["skyboxGradient"]:null}},slot:class extends Wa{constructor(f,a,d,A){super(f,{paint:uM||(uM=new Es({}))},a,null)}},model:class extends Wa{constructor(f,a,d,A){super(f,{layout:_M||(_M=new Es({visibility:new jr(cr.layout_model.visibility),"model-id":new In(cr.layout_model["model-id"])})),paint:bM||(bM=new Es({"model-opacity":new jr(cr.paint_model["model-opacity"]),"model-rotation":new In(cr.paint_model["model-rotation"]),"model-scale":new In(cr.paint_model["model-scale"]),"model-translation":new In(cr.paint_model["model-translation"]),"model-color":new In(cr.paint_model["model-color"]),"model-color-mix-intensity":new In(cr.paint_model["model-color-mix-intensity"]),"model-type":new jr(cr.paint_model["model-type"]),"model-cast-shadows":new jr(cr.paint_model["model-cast-shadows"]),"model-receive-shadows":new jr(cr.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new jr(cr.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new In(cr.paint_model["model-emissive-strength"]),"model-roughness":new In(cr.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new In(cr.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new jr(cr.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new jr(cr.paint_model["model-front-cutoff"])}))},a,d,A),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(f){return new vB(f)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(f){return f instanceof xw?Yr-1:0}queryIntersectsFeature(f,a,d,A,_,y){if(!this.modelManager)return!1;const b=this.modelManager,N=f.tile.getBucket(this);if(!(N&&N instanceof vB))return!1;const z=N;for(const G in z.instancesPerModel){const T=z.instancesPerModel[G],O=a.id!==void 0?a.id:a.properties&&a.properties.hasOwnProperty("id")?a.properties.id:void 0;if(T.idToFeaturesIndex.hasOwnProperty(O)){const H=T.features[T.idToFeaturesIndex[O]],U=b.getModel(G,this.scope);if(!U)return!1;let Q=De.mat4.create();const W=new Ee(0,0),re=z.canonical;let ue=Number.MAX_VALUE;for(let Be=0;Be<H.instancedDataCount;++Be){const Te=16*(H.instancedDataOffset+Be),he=T.instancedDataArray.float32,ke=[he[Te+4],he[Te+5],he[Te+6]];TM(re,W,he[Te],0|he[Te+1]),wM(Q,U,y,W,H.rotation,H.scale,ke,!1,!1,!1),y.projection.name==="globe"&&(Q=yB(Q,y));const Ve=De.mat4.multiply([],y.projMatrix,Q),rt=f.queryGeometry,dt=mM(rt.isPointQuery()?rt.screenBounds:rt.screenGeometry,y,Ve,U.aabb);dt!=null&&(ue=Math.min(dt,ue))}return ue!==Number.MAX_VALUE&&ue}}return!1}_handleOverridablePaintPropertyUpdate(f,a,d){return!(!this.layout||a.isDataDriven()||d.isDataDriven()||f!=="model-color"&&f!=="model-color-mix-intensity"&&f!=="model-rotation"&&f!=="model-scale"&&f!=="model-translation"&&f!=="model-emissive-strength")}_isPropertyZoomDependent(f){const a=this._transitionablePaint._values[f];return a!=null&&a.value!=null&&a.value.expression!=null&&a.value.expression instanceof w}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(f,a,d,A){const _=f.tile,y=_.getBucket(this);let b=null,N=Number.MAX_VALUE;if(!(y&&y instanceof xw))return{queryFeature:b,intersectionZ:N};const z=y.getNodesInfo()[a];if(z.hiddenByReplacement||!z.node.meshes||!d.filter(new Qi(_.tileID.overscaledZ),z.feature,_.tileID.canonical))return{queryFeature:b,intersectionZ:N};const G=z.node,T=A.calculatePosMatrix(_.tileID.toUnwrapped(),A.worldSize),O=z.evaluatedScale;let H=0;A.elevation&&G.elevation&&(H=G.elevation*A.elevation.exaggeration()),De.mat4.translate(T,T,[(G.anchor?G.anchor[0]:0)*(O[0]-1),(G.anchor?G.anchor[1]:0)*(O[1]-1),H]),De.mat4.scale(T,T,O),De.mat4.multiply(T,T,G.matrix);const U=f.queryGeometry,Q=U.isPointQuery()?U.screenBounds:U.screenGeometry,W=function(ue){const Be=De.mat4.multiply([],T,ue.matrix),Te=De.mat4.multiply(Be,A.expandedFarZProjMatrix,Be);for(let he=0;he<ue.meshes.length;++he){const ke=ue.meshes[he];if(he===ue.lightMeshIndex)continue;const Ve=mM(Q,A,Te,ke.aabb);Ve!=null&&(N=Math.min(Ve,N))}if(ue.children)for(const he of ue.children)W(he)};if(W(G),N===Number.MAX_VALUE)return{queryFeature:b,intersectionZ:N};const re=new Ee(0,0);return TM(_.tileID.canonical,re,z.node.anchor[0],z.node.anchor[1]),b={type:"Feature",geometry:{type:"Point",coordinates:[re.lng,re.lat]},properties:z.feature.properties,id:z.feature.id,state:{},layer:this.serialize()},{queryFeature:b,intersectionZ:N}}},clip:class extends Wa{constructor(f,a,d,A){super(f,{layout:bP||(bP=new Es({"clip-layer-types":new jr(cr.layout_clip["clip-layer-types"]),"clip-layer-scope":new jr(cr.layout_clip["clip-layer-scope"])})),paint:wP||(wP=new Es({}))},a,d,A)}recalculate(f,a){super.recalculate(f,a)}createBucket(f){return new CP(f)}isTileClipped(){return!0}is3D(){return!0}}};class OZ{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class RZ{constructor(){this.tasks={},this.taskQueue=[],Wr(["process"],this),this.invoker=new OZ(this.process),this.nextId=0}add(a,d){const A=this.nextId++,_=function({type:y,isSymbolTile:b,zoom:N}){return N=N||0,y==="message"?0:y!=="maybePrepare"||b?y!=="parseTile"||b?y==="parseTile"&&b?300-N:y==="maybePrepare"&&b?400-N:500:200-N:100-N}(d);if(_===0){try{a()}finally{}return null}return this.tasks[A]={fn:a,metadata:d,priority:_,id:A},this.taskQueue.push(A),this.invoker.trigger(),{cancel:()=>{delete this.tasks[A]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(A=>!!this.tasks[A]),!this.taskQueue.length)return;const a=this.pick();if(a===null)return;const d=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!d)return;d.fn()}finally{}}pick(){let a=null,d=1/0;for(let _=0;_<this.taskQueue.length;_++){const y=this.tasks[this.taskQueue[_]];y.priority<d&&(d=y.priority,a=_)}if(a===null)return null;const A=this.taskQueue[a];return this.taskQueue.splice(a,1),A}remove(){this.invoker.remove()}}class LM{constructor(a,d,A){this.target=a,this.parent=d,this.mapId=A,this.callbacks={},this.cancelCallbacks={},Wr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new RZ}send(a,d,A,_,y=!1,b){const N=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(A.metadata=b,this.callbacks[N]=A);const z=new Set;return this.target.postMessage({id:N,type:a,hasCallback:!!A,targetMapId:_,mustQueue:y,sourceMapId:this.mapId,data:Bt(d,z)},z),{cancel:()=>{A&&delete this.callbacks[N],this.target.postMessage({id:N,type:"<cancel>",targetMapId:_,sourceMapId:this.mapId})}}}receive(a){const d=a.data,A=d.id;if(A&&(!d.targetMapId||this.mapId===d.targetMapId))if(d.type==="<cancel>"){const _=this.cancelCallbacks[A];delete this.cancelCallbacks[A],_&&_.cancel()}else if(d.mustQueue||Zr()){const _=this.callbacks[A],y=this.scheduler.add(()=>this.processTask(A,d),_&&_.metadata||{type:"message"});y&&(this.cancelCallbacks[A]=y)}else this.processTask(A,d)}processTask(a,d){if(delete this.cancelCallbacks[a],d.type==="<response>"){const A=this.callbacks[a];delete this.callbacks[a],A&&(d.error?A(xt(d.error)):A(null,xt(d.data)))}else{const A=new Set,_=d.hasCallback?(b,N)=>{this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:b?Bt(b):null,data:Bt(N,A)},A)}:b=>{},y=xt(d.data);if(this.parent[d.type])this.parent[d.type](d.sourceMapId,y,_);else if(this.parent.getWorkerSource){const b=d.type.split(".");this.parent.getWorkerSource(d.sourceMapId,b[0],y.source,y.scope)[b[1]](y,_)}else _(new Error(`Could not find function ${d.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class X0{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=Yt();const A=this.workerPool.acquire(this.id);for(let _=0;_<A.length;_++){const y=new X0.Actor(A[_],d,this.id);y.name=`Worker ${_}`,this.actors.push(y)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(a,d,A){Ln(this.actors,(_,y)=>{_.send(a,d,y)},A=A||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(a=>{a.remove()}),this.actors=[],this.workerPool.release(this.id)}}X0.Actor=LM;class IM{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,d){const A=this.toIdx(a,d);return{min:this.minimums[A],max:this.maximums[A]}}isLeaf(a,d){return this.leaves[this.toIdx(a,d)]}toIdx(a,d){return d*this.size+a}}function NM(f,a,d,A){let _=0,y=Number.MAX_VALUE;for(let b=0;b<3;b++)if(Math.abs(A[b])<1e-15){if(d[b]<f[b]||d[b]>a[b])return null}else{const N=1/A[b];let z=(f[b]-d[b])*N,G=(a[b]-d[b])*N;if(z>G){const T=z;z=G,G=T}if(z>_&&(_=z),G<y&&(y=G),_>y)return null}return _}function FM(f,a,d,A,_,y,b,N,z,G,T){const O=A-f,H=_-a,U=y-d,Q=b-f,W=N-a,re=z-d,ue=T[1]*re-T[2]*W,Be=T[2]*Q-T[0]*re,Te=T[0]*W-T[1]*Q,he=O*ue+H*Be+U*Te;if(Math.abs(he)<1e-15)return null;const ke=1/he,Ve=G[0]-f,rt=G[1]-a,dt=G[2]-d,ft=(Ve*ue+rt*Be+dt*Te)*ke;if(ft<0||ft>1)return null;const at=rt*U-dt*H,Et=dt*O-Ve*U,yt=Ve*H-rt*O,Nt=(T[0]*at+T[1]*Et+T[2]*yt)*ke;return Nt<0||ft+Nt>1?null:(Q*at+W*Et+re*yt)*ke}function PM(f,a,d){return(f-a)/(d-a)}function jM(f,a,d,A,_,y,b,N,z){const G=1<<d,T=y-A,O=b-_,H=(f+1)/G*T+A,U=(a+0)/G*O+_,Q=(a+1)/G*O+_;N[0]=(f+0)/G*T+A,N[1]=U,z[0]=H,z[1]=Q}class MM{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const d=function(y){const b=Math.ceil(Math.log2(y.dim/8)),N=[];let z=Math.ceil(Math.pow(2,b));const G=1/z,T=(U,Q,W,re,ue)=>{const Be=re?1:0,Te=(U+1)*W-Be,he=Q*W,ke=(Q+1)*W-Be;ue[0]=U*W,ue[1]=he,ue[2]=Te,ue[3]=ke};let O=new IM(z);const H=[];for(let U=0;U<z*z;U++){T(U%z,Math.floor(U/z),G,!1,H);const Q=RA(H[0],H[1],y),W=RA(H[2],H[1],y),re=RA(H[2],H[3],y),ue=RA(H[0],H[3],y);O.minimums.push(Math.min(Q,W,re,ue)),O.maximums.push(Math.max(Q,W,re,ue)),O.leaves.push(1)}for(N.push(O),z/=2;z>=1;z/=2){const U=N[N.length-1];O=new IM(z);for(let Q=0;Q<z*z;Q++){T(Q%z,Math.floor(Q/z),2,!0,H);const W=U.getElevation(H[0],H[1]),re=U.getElevation(H[2],H[1]),ue=U.getElevation(H[2],H[3]),Be=U.getElevation(H[0],H[3]),Te=U.isLeaf(H[0],H[1]),he=U.isLeaf(H[2],H[1]),ke=U.isLeaf(H[2],H[3]),Ve=U.isLeaf(H[0],H[3]),rt=Math.min(W.min,re.min,ue.min,Be.min),dt=Math.max(W.max,re.max,ue.max,Be.max),ft=Te&&he&&ke&&Ve;O.maximums.push(dt),O.minimums.push(rt),O.leaves.push(dt-rt<=5&&ft?1:0)}N.push(O)}return N}(this.dem),A=d.length-1,_=d[A];this._addNode(_.minimums[0],_.maximums[0],_.leaves[0]),this._construct(d,0,0,A,0)}raycastRoot(a,d,A,_,y,b,N=1){return NM([a,d,-100],[A,_,this.maximums[0]*N],y,b)}raycast(a,d,A,_,y,b,N=1){if(!this.nodeCount)return null;const z=this.raycastRoot(a,d,A,_,y,b,N);if(z==null)return null;const G=[],T=[],O=[],H=[],U=[{idx:0,t:z,nodex:0,nodey:0,depth:0}];for(;U.length>0;){const{idx:Q,t:W,nodex:re,nodey:ue,depth:Be}=U.pop();if(this.leaves[Q]){jM(re,ue,Be,a,d,A,_,O,H);const he=1<<Be,ke=(re+0)/he,Ve=(re+1)/he,rt=(ue+0)/he,dt=(ue+1)/he,ft=RA(ke,rt,this.dem)*N,at=RA(Ve,rt,this.dem)*N,Et=RA(Ve,dt,this.dem)*N,yt=RA(ke,dt,this.dem)*N,Nt=FM(O[0],O[1],ft,H[0],O[1],at,H[0],H[1],Et,y,b),zt=FM(H[0],H[1],Et,O[0],H[1],yt,O[0],O[1],ft,y,b),Gt=Math.min(Nt!==null?Nt:Number.MAX_VALUE,zt!==null?zt:Number.MAX_VALUE);if(Gt!==Number.MAX_VALUE)return Gt;{const $t=De.vec3.scaleAndAdd([],y,b,W);if(kM(ft,at,yt,Et,PM($t[0],O[0],H[0]),PM($t[1],O[1],H[1]))>=$t[2])return W}continue}let Te=0;for(let he=0;he<this._siblingOffset.length;he++){jM((re<<1)+this._siblingOffset[he][0],(ue<<1)+this._siblingOffset[he][1],Be+1,a,d,A,_,O,H),O[2]=-100,H[2]=this.maximums[this.childOffsets[Q]+he]*N;const ke=NM(O,H,y,b);if(ke!=null){const Ve=ke;G[he]=Ve;let rt=!1;for(let dt=0;dt<Te&&!rt;dt++)Ve>=G[T[dt]]&&(T.splice(dt,0,he),rt=!0);rt||(T[Te]=he),Te++}}for(let he=0;he<Te;he++){const ke=T[he];U.push({idx:this.childOffsets[Q]+ke,t:G[ke],nodex:(re<<1)+this._siblingOffset[ke][0],nodey:(ue<<1)+this._siblingOffset[ke][1],depth:Be+1})}}return null}_addNode(a,d,A){return this.minimums.push(a),this.maximums.push(d),this.leaves.push(A),this.childOffsets.push(0),this.nodeCount++}_construct(a,d,A,_,y){if(a[_].isLeaf(d,A)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const b=_-1,N=a[b];let z=0,G=0;for(let T=0;T<this._siblingOffset.length;T++){const O=2*d+this._siblingOffset[T][0],H=2*A+this._siblingOffset[T][1],U=N.getElevation(O,H),Q=N.isLeaf(O,H),W=this._addNode(U.min,U.max,Q);Q&&(z|=1<<T),G||(G=W)}for(let T=0;T<this._siblingOffset.length;T++)z&1<<T||this._construct(a,2*d+this._siblingOffset[T][0],2*A+this._siblingOffset[T][1],b,G+T)}}function kM(f,a,d,A,_,y){return Sr(Sr(f,d,y),Sr(a,A,y),_)}function RA(f,a,d){const A=d.dim,_=Ir(f*A-.5,0,A-1),y=Ir(a*A-.5,0,A-1),b=Math.floor(_),N=Math.floor(y),z=Math.min(b+1,A-1),G=Math.min(N+1,A-1);return kM(d.get(b,N),d.get(z,N),d.get(b,G),d.get(z,G),_-b,y-N)}const UZ={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function zZ(f,a,d){return(256*f*256+256*a+d)/10-1e4}function QZ(f,a,d){return 256*f+a+d/256-32768}class _w{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,d,A,_=!1){if(this.uid=a,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(A&&A!=="mapbox"&&A!=="terrarium")return void jn(`"${A}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=d.height;const y=this.dim=d.height-2,b=new Uint32Array(d.data.buffer);if(this.pixels=new Uint8Array(d.data.buffer),this.floatView=new Float32Array(d.data.buffer),this.borderReady=_,this._modifiedForSources={},!_){for(let z=0;z<y;z++)b[this._idx(-1,z)]=b[this._idx(0,z)],b[this._idx(y,z)]=b[this._idx(y-1,z)],b[this._idx(z,-1)]=b[this._idx(z,0)],b[this._idx(z,y)]=b[this._idx(z,y-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(y,-1)]=b[this._idx(y-1,0)],b[this._idx(-1,y)]=b[this._idx(0,y-1)],b[this._idx(y,y)]=b[this._idx(y-1,y-1)]}const N=A==="terrarium"?QZ:zZ;for(let z=0;z<b.length;++z){const G=4*z;this.floatView[z]=N(this.pixels[G],this.pixels[G+1],this.pixels[G+2])}this._timestamp=sn.now()}_buildQuadTree(){this._tree=new MM(this)}get(a,d,A=!1){A&&(a=Ir(a,-1,this.dim),d=Ir(d,-1,this.dim));const _=this._idx(a,d);return this.floatView[_]}set(a,d,A){const _=this._idx(a,d),y=this.floatView[_];return this.floatView[_]=A,A-y}static getUnpackVector(a){return UZ[a]}_idx(a,d){if(a<-1||a>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(a+1)}static pack(a,d){const A=[0,0,0,0],_=_w.getUnpackVector(d);let y=Math.floor((a+_[3])/_[2]);return A[2]=y%256,y=Math.floor(y/256),A[1]=y%256,y=Math.floor(y/256),A[0]=y,A}getPixels(){return new AP({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,d,A){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let _=d*this.dim,y=d*this.dim+this.dim,b=A*this.dim,N=A*this.dim+this.dim;switch(d){case-1:_=y-1;break;case 1:y=_+1}switch(A){case-1:b=N-1;break;case 1:N=b+1}const z=-d*this.dim,G=-A*this.dim;for(let T=b;T<N;T++)for(let O=_;O<y;O++){const H=4*this._idx(O,T),U=4*this._idx(O+z,T+G);this.pixels[H+0]=a.pixels[U+0],this.pixels[H+1]=a.pixels[U+1],this.pixels[H+2]=a.pixels[U+2],this.pixels[H+3]=a.pixels[U+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function HZ(f,a,d){f===1?a.header_length=d.readFixed32():f===2?a.x=d.readVarint():f===3?a.y=d.readVarint():f===4?a.z=d.readVarint():f===5&&a.layers.push(function(A,_){return A.readFields(WZ,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},_)}(d,d.readVarint()+d.pos))}function VZ(f,a,d){f===1?(a.delta_filter=function(A,_){return A.readFields(GZ,{block_size:0},_)}(d,d.readVarint()+d.pos),a.filter="delta_filter"):f===2?(d.readVarint(),a.filter="zigzag_filter"):f===3?(d.readVarint(),a.filter="bitshuffle_filter"):f===4&&(d.readVarint(),a.filter="byteshuffle_filter")}function GZ(f,a,d){f===1&&(a.block_size=d.readVarint())}function $Z(f,a,d){f===1?(d.readVarint(),a.codec="gzip_data"):f===2?(d.readVarint(),a.codec="jpeg_image"):f===3?(d.readVarint(),a.codec="webp_image"):f===4&&(d.readVarint(),a.codec="png_image")}function qZ(f,a,d){f===1?a.first_byte=d.readFixed64():f===2?a.last_byte=d.readFixed64():f===3?a.filters.push(function(A,_){return A.readFields(VZ,{},_)}(d,d.readVarint()+d.pos)):f===4?a.codec=function(A,_){return A.readFields($Z,{},_)}(d,d.readVarint()+d.pos):f===5?a.deprecated_offset=d.readFloat():f===6?a.deprecated_scale=d.readFloat():f===7?a.bands.push(d.readString()):f===8?a.offset=d.readDouble():f===9&&(a.scale=d.readDouble())}function WZ(f,a,d){f===1?a.version=d.readVarint():f===2?a.name=d.readString():f===3?a.units=d.readString():f===4?a.tilesize=d.readVarint():f===5?a.buffer=d.readVarint():f===6?a.pixel_format=d.readVarint():f===7&&a.data_index.push(function(A,_){return A.readFields(qZ,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,deprecated_offset:0,deprecated_scale:0,bands:[]},_)}(d,d.readVarint()+d.pos))}function KZ(f,a,d){if(f===2)(function(A,_,y){A.readFields(XZ,y,_)})(d,d.readVarint()+d.pos,a);else if(f===3)throw new Error("Not implemented")}function XZ(f,a,d){if(f===1){let A=0;const _=d.readVarint()+d.pos;for(;d.pos<_;)a[A++]=d.readVarint()}}je(_w,"DEMData"),je(MM,"DemMinMaxQuadTree",{omit:["dem"]});class YZ{constructor(a){this.capacity=a,this.cache=new Map}get(a){if(!this.cache.has(a))return;const d=this.cache.get(a);return this.cache.delete(a),this.cache.set(a,d),d}put(a,d){this.cache.has(a)?this.cache.delete(a):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(a,d)}}function ZZ(f,a){if(a.length!==4)throw new Error(`Expected data of dimension 4 but got ${a.length}.`);let d=a[3];for(let A=2;A>=1;A--){const _=A===1?1:0,y=A===2?1:0;for(let b=0;b<a[0];b++){const N=a[1]*b;for(let z=_;z<a[1];z++){const G=a[2]*(z+N);for(let T=y;T<a[2];T++){const O=a[3]*(T+G);for(let H=0;H<a[3];H++){const U=O+H;f[U]+=f[U-d]}}}}d*=a[A]}return f}function JZ(f){for(let a=0,d=f.length;a<d;a++)f[a]=f[a]>>>1^-(1&f[a]);return f}function eJ(f,a){switch(a){case"uint32":return f;case"uint16":for(let d=0;d<f.length;d+=2){const A=f[d],_=f[d+1];f[d]=(240&A)>>4|(61440&A)>>8|(240&_)<<4|61440&_,f[d+1]=15&A|(3840&A)>>4|(15&_)<<8|(3840&_)<<4}return f;case"uint8":for(let d=0;d<f.length;d+=4){const A=f[d],_=f[d+1],y=f[d+2],b=f[d+3];f[d+0]=(192&A)>>6|(192&_)>>4|(192&y)>>2|192&b,f[d+1]=(48&A)>>4|(48&_)>>2|48&y|(48&b)<<2,f[d+2]=(12&A)>>2|12&_|(12&y)<<2|(12&b)<<4,f[d+3]=3&A|(3&_)<<2|(3&y)<<4|(3&b)<<6}return f;default:throw new Error(`Invalid pixel format, "${a}"`)}}var oh=Uint8Array,vv=Uint16Array,tJ=Int32Array,DM=new oh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),OM=new oh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rJ=new oh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RM=function(f,a){for(var d=new vv(31),A=0;A<31;++A)d[A]=a+=1<<f[A-1];var _=new tJ(d[30]);for(A=1;A<30;++A)for(var y=d[A];y<d[A+1];++y)_[y]=y-d[A]<<5|A;return{b:d,r:_}},UM=RM(DM,2),zM=UM.b,nJ=UM.r;zM[28]=258,nJ[258]=28;for(var iJ=RM(OM,0).b,QM=new vv(32768),ul=0;ul<32768;++ul){var Y0=(43690&ul)>>1|(21845&ul)<<1;QM[ul]=((65280&(Y0=(61680&(Y0=(52428&Y0)>>2|(13107&Y0)<<2))>>4|(3855&Y0)<<4))>>8|(255&Y0)<<8)>>1}var xv=function(f,a,d){for(var A=f.length,_=0,y=new vv(a);_<A;++_)f[_]&&++y[f[_]-1];var b,N=new vv(a);for(_=1;_<a;++_)N[_]=N[_-1]+y[_-1]<<1;b=new vv(1<<a);var z=15-a;for(_=0;_<A;++_)if(f[_])for(var G=_<<4|f[_],T=a-f[_],O=N[f[_]-1]++<<T,H=O|(1<<T)-1;O<=H;++O)b[QM[O]>>z]=G;return b},_v=new oh(288);for(ul=0;ul<144;++ul)_v[ul]=8;for(ul=144;ul<256;++ul)_v[ul]=9;for(ul=256;ul<280;++ul)_v[ul]=7;for(ul=280;ul<288;++ul)_v[ul]=8;var HM=new oh(32);for(ul=0;ul<32;++ul)HM[ul]=5;var sJ=xv(_v,9),oJ=xv(HM,5),wB=function(f){for(var a=f[0],d=1;d<f.length;++d)f[d]>a&&(a=f[d]);return a},gf=function(f,a,d){var A=a/8|0;return(f[A]|f[A+1]<<8)>>(7&a)&d},CB=function(f,a){var d=a/8|0;return(f[d]|f[d+1]<<8|f[d+2]<<16)>>(7&a)},aJ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yf=function(f,a,d){var A=new Error(a||aJ[f]);if(A.code=f,Error.captureStackTrace&&Error.captureStackTrace(A,yf),!d)throw A;return A},lJ=new oh(0),cJ=typeof TextDecoder<"u"&&new TextDecoder;try{cJ.decode(lJ,{stream:!0})}catch{}const uJ={gzip_data:"gzip"};class kh extends Error{constructor(a){super(a),this.name="MRTError"}}const dJ={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},VM={uint32:1,uint16:2,uint8:4},hJ={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let SB;class BB{constructor(a=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=a}getLayer(a){const d=this.layers[a];if(!d)throw new kh(`Layer '${a}' not found`);return d}getHeaderLength(a){const d=new Uint8Array(a),A=new DataView(a);if(d[0]!==13)throw new kh("File is not a valid MRT.");return A.getUint32(1,!0)}parseHeader(a){const d=new Uint8Array(a),A=this.getHeaderLength(a);if(d.length<A)throw new kh(`Expected header with length >= ${A} but got buffer of length ${d.length}`);const _=function(y,b){return y.readFields(HZ,{header_length:0,x:0,y:0,z:0,layers:[]},void 0)}(new SB(d.subarray(0,A)));if(!isNaN(this.x)&&(this.x!==_.x||this.y!==_.y||this.z!==_.z))throw new kh(`Invalid attempt to parse header ${_.z}/${_.x}/${_.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=_.x,this.y=_.y,this.z=_.z;for(const y of _.layers)this.layers[y.name]=new fJ(y,{cacheSize:this._cacheSize});return this}createDecodingTask(a){const d=[],A=this.getLayer(a.layerName);for(let _ of a.blockIndices){const y=A.dataIndex[_],b=y.first_byte-a.firstByte,N=y.last_byte-a.firstByte;if(A._blocksInProgress.has(_))continue;const z={layerName:A.name,firstByte:b,lastByte:N,pixelFormat:A.pixelFormat,blockIndex:_,blockShape:[y.bands.length].concat(A.bandShape),buffer:A.buffer,codec:y.codec.codec,filters:y.filters.map(G=>G.filter)};A._blocksInProgress.add(_),d.push(z)}return new GM(d,()=>{d.forEach(_=>A._blocksInProgress.delete(_.blockIndex))},(_,y)=>{if(d.forEach(b=>A._blocksInProgress.delete(b.blockIndex)),_)throw _;y.forEach(b=>{this.getLayer(b.layerName).processDecodedData(b)})})}}class fJ{constructor({version:a,name:d,units:A,tilesize:_,pixel_format:y,buffer:b,data_index:N},z){if(this.version=a,this.version!==1)throw new kh(`Cannot parse raster layer encoded with MRT version ${a}`);this.name=d,this.units=A,this.tileSize=_,this.buffer=b,this.pixelFormat=dJ[y],this.dataIndex=N,this.bandShape=[_+2*b,_+2*b,VM[this.pixelFormat]],this._decodedBlocks=new YZ(z?z.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return VM[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:a})=>a).flat()}processDecodedData(a){const d=a.blockIndex.toString();this._decodedBlocks.get(d)||this._decodedBlocks.put(d,a.data)}getBlockForBand(a){let d=0;switch(typeof a){case"string":for(const[A,_]of this.dataIndex.entries()){for(const[y,b]of _.bands.entries())if(b===a)return{bandIndex:d+y,blockIndex:A,blockBandIndex:y};d+=_.bands.length}break;case"number":for(const[A,_]of this.dataIndex.entries()){if(a>=d&&a<d+_.bands.length)return{bandIndex:a,blockIndex:A,blockBandIndex:a-d};d+=_.bands.length}break;default:throw new kh(`Invalid band \`${JSON.stringify(a)}\`. Expected string or integer.`)}throw new kh(`Band not found: ${JSON.stringify(a)}`)}getDataRange(a){let d=1/0,A=-1/0;const _=[],y=new Set;for(const b of a){const{blockIndex:N}=this.getBlockForBand(b);if(N<0)throw new kh(`Invalid band: ${JSON.stringify(b)}`);const z=this.dataIndex[N];_.includes(N)||_.push(N),y.add(N),d=Math.min(d,z.first_byte),A=Math.max(A,z.last_byte)}if(y.size>this.cacheSize)throw new kh(`Number of blocks to decode (${y.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:d,lastByte:A,blockIndices:_}}hasBand(a){const{blockIndex:d}=this.getBlockForBand(a);return d>=0}hasDataForBand(a){const{blockIndex:d}=this.getBlockForBand(a);return d>=0&&!!this._decodedBlocks.get(d.toString())}getBandView(a){const{blockIndex:d,blockBandIndex:A}=this.getBlockForBand(a),_=this._decodedBlocks.get(d.toString());if(!_)throw new kh(`Data for band ${JSON.stringify(a)} of layer "${this.name}" not decoded.`);const y=this.dataIndex[d],b=this.bandShape.reduce((G,T)=>G*T,1),N=A*b,z=_.subarray(N,N+b);return{data:z,bytes:new Uint8Array(z.buffer).subarray(z.byteOffset,z.byteOffset+z.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:y.offset!==0?y.offset:y.deprecated_offset,scale:y.scale!==0?y.scale:y.deprecated_scale}}}BB.setPbf=function(f){SB=f};class GM{constructor(a,d,A){this.tasks=a,this._onCancel=d,this._onComplete=A,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(a,d){this._finalized||(this._onComplete(a,d),this._finalized=!0)}}BB.performDecoding=function(f,a){const d=new Uint8Array(f);return Promise.all(a.tasks.map(A=>{const{layerName:_,firstByte:y,lastByte:b,pixelFormat:N,blockShape:z,blockIndex:G,filters:T,codec:O}=A,H=d.subarray(y,b+1),U=new Uint32Array(z[0]*z[1]*z[2]);let Q;if(O!=="gzip_data")throw new kh(`Unhandled codec: ${O}`);return Q=function(W,re){if(!globalThis.DecompressionStream&&re==="gzip_data")return Promise.resolve(((he=function(rt){rt[0]==31&&rt[1]==139&&rt[2]==8||yf(6,"invalid gzip data");var dt=rt[3],ft=10;4&dt&&(ft+=2+(rt[10]|rt[11]<<8));for(var at=(dt>>3&1)+(dt>>4&1);at>0;at-=!rt[ft++]);return ft+(2&dt)}(Te=W))+8>Te.length&&yf(6,"invalid gzip data"),function(rt,dt,ft,at){var Et=rt.length;if(!Et||dt.f&&!dt.l)return ft||new oh(0);var yt=!ft,Nt=yt||dt.i!=2,zt=dt.i;yt&&(ft=new oh(3*Et));var Gt,$t,Zt=function(UA){var xg=ft.length;if(UA>xg){var Tv=new oh(Math.max(2*xg,UA));Tv.set(ft),ft=Tv}},vr=dt.f||0,tr=dt.p||0,Br=dt.b||0,Ur=dt.l,br=dt.d,Cn=dt.m,hn=dt.n,tn=8*Et;do{if(!Ur){vr=gf(rt,tr,1);var Vr=gf(rt,tr+1,3);if(tr+=3,!Vr){var Jn=rt[(pi=4+((tr+7)/8|0))-4]|rt[pi-3]<<8,wn=pi+Jn;if(wn>Et){zt&&yf(0);break}Nt&&Zt(Br+Jn),ft.set(rt.subarray(pi,wn),Br),dt.b=Br+=Jn,dt.p=tr=8*wn,dt.f=vr;continue}if(Vr==1)Ur=sJ,br=oJ,Cn=9,hn=5;else if(Vr==2){var Pn=gf(rt,tr,31)+257,ui=gf(rt,tr+10,15)+4,Ri=Pn+gf(rt,tr+5,31)+1;tr+=14;for(var Bi=new oh(Ri),Ei=new oh(19),Wi=0;Wi<ui;++Wi)Ei[rJ[Wi]]=gf(rt,tr+3*Wi,7);tr+=3*ui;var Xi=wB(Ei),po=(1<<Xi)-1,Gs=xv(Ei,Xi);for(Wi=0;Wi<Ri;){var pi,js=Gs[gf(rt,tr,po)];if(tr+=15&js,(pi=js>>4)<16)Bi[Wi++]=pi;else{var Rs=0,Oo=0;for(pi==16?(Oo=3+gf(rt,tr,3),tr+=2,Rs=Bi[Wi-1]):pi==17?(Oo=3+gf(rt,tr,7),tr+=3):pi==18&&(Oo=11+gf(rt,tr,127),tr+=7);Oo--;)Bi[Wi++]=Rs}}var Da=Bi.subarray(0,Pn),dl=Bi.subarray(Pn);Cn=wB(Da),hn=wB(dl),Ur=xv(Da,Cn),br=xv(dl,hn)}else yf(1);if(tr>tn){zt&&yf(0);break}}Nt&&Zt(Br+131072);for(var Oa=(1<<Cn)-1,va=(1<<hn)-1,hc=tr;;hc=tr){var xl=(Rs=Ur[CB(rt,tr)&Oa])>>4;if((tr+=15&Rs)>tn){zt&&yf(0);break}if(Rs||yf(2),xl<256)ft[Br++]=xl;else{if(xl==256){hc=tr,Ur=null;break}var Qc=xl-254;xl>264&&(Qc=gf(rt,tr,(1<<(xf=DM[Wi=xl-257]))-1)+zM[Wi],tr+=xf);var Fo=br[CB(rt,tr)&va],Ad=Fo>>4;if(Fo||yf(3),tr+=15&Fo,dl=iJ[Ad],Ad>3){var xf=OM[Ad];dl+=CB(rt,tr)&(1<<xf)-1,tr+=xf}if(tr>tn){zt&&yf(0);break}Nt&&Zt(Br+131072);var Dh=Br+Qc;if(Br<dl){var Oh=0-dl,vg=Math.min(dl,Dh);for(Oh+Br<0&&yf(3);Br<vg;++Br)ft[Br]=(void 0)[Oh+Br]}for(;Br<Dh;++Br)ft[Br]=ft[Br-dl]}}dt.l=Ur,dt.p=hc,dt.b=Br,dt.f=vr,Ur&&(vr=1,dt.m=Cn,dt.d=br,dt.n=hn)}while(!vr);return Br!=ft.length&&yt?(Gt=ft,(($t=Br)==null||$t>Gt.length)&&($t=Gt.length),new oh(Gt.subarray(0,$t))):ft.subarray(0,Br)}(Te.subarray(he,-8),{i:2},new oh(((ue=Te)[(Be=ue.length)-4]|ue[Be-3]<<8|ue[Be-2]<<16|ue[Be-1]<<24)>>>0))));var ue,Be,Te,he;const ke=uJ[re];if(!ke)throw new Error(`Unhandled codec: ${re}`);const Ve=new globalThis.DecompressionStream(ke);return new Response(new Blob([W]).stream().pipeThrough(Ve)).arrayBuffer().then(rt=>new Uint8Array(rt))}(H,O).then(W=>(function(re,ue){re.readFields(KZ,ue)}(new SB(W),U),new hJ[N](U.buffer))),Q.then(W=>{for(let re=T.length-1;re>=0;re--)switch(T[re]){case"delta_filter":ZZ(W,z);break;case"zigzag_filter":JZ(W);break;case"bitshuffle_filter":eJ(W,N);break;default:throw new kh(`Unhandled filter "${T[re]}"`)}return{layerName:_,blockIndex:G,data:W}}).catch(W=>{throw W})}))},je(GM,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var bv={workerUrl:"",workerClass:null,workerParams:void 0};const EB="mapboxgl_preloaded_worker_pool";class wv{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<wv.workerCount;)this.workers.push(bv.workerClass!=null?new bv.workerClass:new self.Worker(bv.workerUrl,bv.workerParams));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.workers&&this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[EB]}numActive(){return Object.keys(this.active).length}}let Cv;function bw(){return Cv||(Cv=new wv),Cv}wv.workerCount=2;let Sv,TB,vf,Z0,LB,J0=null;function $M(){return Zr()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:TB||Lt.DRACO_URL}function qM(){if(Zr()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Z0)return Z0;const f=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Z0=WebAssembly.validate(f)?Lt.MESHOPT_SIMD_URL:Lt.MESHOPT_URL,Z0}const ww={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pJ={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Bv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function WM(f,a,d){const A=d.json.bufferViews.length,_=d.buffers.length;a.bufferView=A,d.json.bufferViews[A]={buffer:_,byteLength:f.byteLength},d.buffers[_]=f}const IB="KHR_draco_mesh_compression";function AJ(f,a){const d=f.extensions&&f.extensions[IB];if(!d)return;const A=new vf.Decoder,_=ZM(a,d.bufferView),y=new vf.Mesh;if(!A.DecodeArrayToMesh(_,_.byteLength,y))throw new Error("Failed to decode Draco mesh");const b=a.json.accessors[f.indices],N=ww[b.componentType],z=b.count*N.BYTES_PER_ELEMENT,G=vf._malloc(z);N===Uint16Array?A.GetTrianglesUInt16Array(y,z,G):A.GetTrianglesUInt32Array(y,z,G),WM(vf.memory.buffer.slice(G,G+z),b,a),vf._free(G);for(const T of Object.keys(d.attributes)){const O=A.GetAttributeByUniqueId(y,d.attributes[T]),H=a.json.accessors[f.attributes[T]],U=pJ[H.componentType],Q=H.count*Bv[H.type]*ww[H.componentType].BYTES_PER_ELEMENT,W=vf._malloc(Q);A.GetAttributeDataArrayForAllPoints(y,O,vf[U],Q,W),WM(vf.memory.buffer.slice(W,W+Q),H,a),vf._free(W)}A.destroy(),y.destroy(),delete f.extensions[IB]}const Cw="EXT_meshopt_compression";function mJ(f,a){if(!f.extensions||!f.extensions[Cw])return;const d=f.extensions[Cw],A=new Uint8Array(a.buffers[d.buffer],d.byteOffset||0,d.byteLength||0),_=new Uint8Array(d.count*d.byteStride);LB.decodeGltfBuffer(_,d.count,d.byteStride,A,d.mode,d.filter),f.buffer=a.buffers.length,f.byteOffset=0,a.buffers[f.buffer]=_.buffer,delete f.extensions[Cw]}const KM=1179937895,XM=new TextDecoder("utf8");function YM(f,a){return new URL(f,a).href}function gJ(f,a,d,A){return fetch(YM(f.uri,A)).then(_=>_.arrayBuffer()).then(_=>{a.buffers[d]=_})}function ZM(f,a){const d=f.json.bufferViews[a];return new Uint8Array(f.buffers[d.buffer],d.byteOffset||0,d.byteLength)}function yJ(f,a,d,A){if(f.uri){const _=YM(f.uri,A);return fetch(_).then(y=>y.blob()).then(y=>createImageBitmap(y)).then(y=>{a.images[d]=y})}if(f.bufferView!==void 0){const _=ZM(a,f.bufferView),y=new Blob([_],{type:f.mimeType});return createImageBitmap(y).then(b=>{a.images[d]=b})}}function JM(f,a=0,d){const A={json:null,images:[],buffers:[]};if(new Uint32Array(f,a,1)[0]===KM){const T=new Uint32Array(f,a);let O=2;const H=(T[O++]>>2)-3,U=T[O++]>>2;if(O++,A.json=JSON.parse(XM.decode(T.subarray(O,O+U))),O+=U,O<H){const Q=T[O++];O++;const W=a+(O<<2);A.buffers[0]=f.slice(W,W+Q)}}else A.json=JSON.parse(XM.decode(new Uint8Array(f,a)));const{buffers:_,images:y,meshes:b,extensionsUsed:N,bufferViews:z}=A.json;let G=Promise.resolve();if(_){const T=[];for(let O=0;O<_.length;O++){const H=_[O];H.uri?T.push(gJ(H,A,O,d)):A.buffers[O]||(A.buffers[O]=null)}G=Promise.all(T)}return G.then(()=>{const T=[],O=N&&N.includes(IB),H=N&&N.includes(Cw);if(O&&T.push(function(){if(!vf)return Sv??(Sv=function(U){let Q,W=null;function re(){Q=new Uint8Array(W.buffer)}function ue(){throw new Error("Unexpected Draco error.")}const Be={a:{a:ue,d:function(Te,he,ke){return Q.copyWithin(Te,he,he+ke)},c:function(Te){const he=Q.length,ke=Math.max(Te>>>0,Math.ceil(1.2*he)),Ve=Math.ceil((ke-he)/65536);try{return W.grow(Ve),re(),!0}catch{return!1}},b:ue}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(U,Be):U.then(Te=>Te.arrayBuffer()).then(Te=>WebAssembly.instantiate(Te,Be))).then(Te=>{const{Rb:he,Qb:ke,P:Ve,T:rt,X:dt,Ja:ft,La:at,Qa:Et,Va:yt,Wa:Nt,eb:zt,jb:Gt,f:$t,e:Zt,yb:vr,zb:tr,Ab:Br,Bb:Ur,Db:br,Gb:Cn}=Te.instance.exports;W=Zt;const hn=(()=>{let tn=0,Vr=0,Jn=0,wn=0;return Pn=>{Jn&&(he(wn),he(tn),Vr+=Jn,Jn=tn=0),tn||(Vr+=128,tn=ke(Vr));const ui=Pn.length+7&-8;let Ri=tn;ui>=Vr&&(Jn=ui,Ri=wn=ke(ui));for(let Bi=0;Bi<Pn.length;Bi++)Q[Ri+Bi]=Pn[Bi];return Ri}})();return re(),$t(),{memory:Zt,_free:he,_malloc:ke,Mesh:class{constructor(){this.ptr=Ve()}destroy(){rt(this.ptr)}},Decoder:class{constructor(){this.ptr=ft()}destroy(){Gt(this.ptr)}DecodeArrayToMesh(tn,Vr,Jn){const wn=hn(tn),Pn=at(this.ptr,wn,Vr,Jn.ptr);return!!dt(Pn)}GetAttributeByUniqueId(tn,Vr){return{ptr:Et(this.ptr,tn.ptr,Vr)}}GetTrianglesUInt16Array(tn,Vr,Jn){yt(this.ptr,tn.ptr,Vr,Jn)}GetTrianglesUInt32Array(tn,Vr,Jn){Nt(this.ptr,tn.ptr,Vr,Jn)}GetAttributeDataArrayForAllPoints(tn,Vr,Jn,wn,Pn){zt(this.ptr,tn.ptr,Vr.ptr,Jn,wn,Pn)}},DT_INT8:vr(),DT_UINT8:tr(),DT_INT16:Br(),DT_UINT16:Ur(),DT_UINT32:br(),DT_FLOAT32:Cn()}})}(fetch($M())),Sv.then(U=>{vf=U,Sv=void 0}))}()),H&&T.push(function(){if(LB)return;const U=function(Q){let W;const re=WebAssembly.instantiateStreaming(Q,{}).then(Te=>{W=Te.instance,W.exports.__wasm_call_ctors()}),ue={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Be={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:re,supported:!0,decodeGltfBuffer(Te,he,ke,Ve,rt,dt){(function(ft,at,Et,yt,Nt,zt,Gt){const $t=ft.exports.sbrk,Zt=yt+3&-4,vr=$t(Zt*Nt),tr=$t(zt.length),Br=new Uint8Array(ft.exports.memory.buffer);Br.set(zt,tr);const Ur=at(vr,yt,Nt,tr,zt.length);if(Ur===0&&Gt&&Gt(vr,Zt,Nt),Et.set(Br.subarray(vr,vr+yt*Nt)),$t(vr-$t(0)),Ur!==0)throw new Error(`Malformed buffer data: ${Ur}`)})(W,W.exports[Be[rt]],Te,he,ke,Ve,W.exports[ue[dt]])}}}(fetch(qM()));return U.ready.then(()=>{LB=U})}()),y)for(let U=0;U<y.length;U++)T.push(yJ(y[U],A,U,d));return(T.length?Promise.all(T):Promise.resolve()).then(()=>{if(O&&b)for(const{primitives:U}of b)for(const Q of U)AJ(Q,A);if(H&&b&&z)for(const U of z)mJ(U,A);return A})})}function yg(f,a){const d=f.json.bufferViews[a.bufferView],A=ww[a.componentType];return new A(f.buffers[d.buffer],(a.byteOffset||0)+(d.byteOffset||0),a.count*(d.byteStride&&d.byteStride!==Bv[a.type]*A.BYTES_PER_ELEMENT?d.byteStride/A.BYTES_PER_ELEMENT:Bv[a.type]))}function NB(f,a,d,A){const _=ww[a.componentType],y=function(T){switch(T){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(_),b=f.json.bufferViews[a.bufferView],N=b.byteStride?b.byteStride/_.BYTES_PER_ELEMENT:Bv[a.type],z=d.float32,G=z.length/d.capacity;for(let T=0,O=0;T<a.count*N;T+=N,O+=G)for(let H=0;H<G;H++)z[O+H]=A[T+H]*y;d._trim()}function vJ(f,a,d){const A=f.indices,_=f.attributes,y={};y.indexArray=new Ka;const b=a.json.accessors[A],N=b.count/3;y.indexArray.reserve(N);const z=yg(a,b);for(let H=0;H<N;H++)y.indexArray.emplaceBack(z[3*H],z[3*H+1],z[3*H+2]);y.indexArray._trim(),y.vertexArray=new Lu;const G=a.json.accessors[_.POSITION];y.vertexArray.reserve(G.count);const T=yg(a,G);for(let H=0;H<G.count;H++)y.vertexArray.emplaceBack(T[3*H],T[3*H+1],T[3*H+2]);if(y.vertexArray._trim(),y.aabb=new No(G.min,G.max),y.centroid=function(H,U){const Q=[0,0,0],W=H.length;if(W>0){for(let re=0;re<W;re++){const ue=3*H[re];Q[0]+=U[ue],Q[1]+=U[ue+1],Q[2]+=U[ue+2]}Q[0]/=W,Q[1]/=W,Q[2]/=W}return Q}(z,T),_.COLOR_0!==void 0){const H=a.json.accessors[_.COLOR_0],U=Bv[H.type],Q=yg(a,H);y.colorArray=U===3?new Lu:new El,y.colorArray.resize(H.count),NB(a,H,y.colorArray,Q)}if(_.NORMAL!==void 0){y.normalArray=new Lu;const H=a.json.accessors[_.NORMAL];y.normalArray.resize(H.count);const U=yg(a,H);NB(a,H,y.normalArray,U)}if(_.TEXCOORD_0!==void 0&&d.length>0){y.texcoordArray=new ll;const H=a.json.accessors[_.TEXCOORD_0];y.texcoordArray.resize(H.count);const U=yg(a,H);NB(a,H,y.texcoordArray,U)}if(_._FEATURE_ID_RGBA4444!==void 0){const H=a.json.accessors[_._FEATURE_ID_RGBA4444];a.json.extensionsUsed&&a.json.extensionsUsed.includes("EXT_meshopt_compression")&&(y.featureData=yg(a,H))}_._FEATURE_RGBA4444!==void 0&&(y.featureData=new Uint32Array(yg(a,a.json.accessors[_._FEATURE_RGBA4444]).buffer));const O=f.material;return y.material=function(H,U){const{emissiveFactor:Q=[0,0,0],alphaMode:W="OPAQUE",alphaCutoff:re=.5,normalTexture:ue,occlusionTexture:Be,emissiveTexture:Te,doubleSided:he}=H,{baseColorFactor:ke=[1,1,1,1],metallicFactor:Ve=1,roughnessFactor:rt=1,baseColorTexture:dt,metallicRoughnessTexture:ft}=H.pbrMetallicRoughness||{},at=Be?U[Be.index]:void 0;if(Be&&Be.extensions&&Be.extensions.KHR_texture_transform&&at){const Et=Be.extensions.KHR_texture_transform;at.offsetScale=[Et.offset[0],Et.offset[1],Et.scale[0],Et.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new si(...ke),metallicFactor:Ve,roughnessFactor:rt,baseColorTexture:dt?U[dt.index]:void 0,metallicRoughnessTexture:ft?U[ft.index]:void 0},doubleSided:he,emissiveFactor:Q,alphaMode:W,alphaCutoff:re,normalTexture:ue?U[ue.index]:void 0,occlusionTexture:at,emissionTexture:Te?U[Te.index]:void 0,defined:H.defined===void 0}}(O!==void 0?a.json.materials[O]:{defined:!1},d),y}function ek(f,a,d){const{matrix:A,rotation:_,translation:y,scale:b,mesh:N,extras:z,children:G}=f,T={};if(T.matrix=A||De.mat4.fromRotationTranslationScale([],_||[0,0,0,1],y||[0,0,0],b||[1,1,1]),N!==void 0){T.meshes=d[N];const O=T.anchor=[0,0];for(const H of T.meshes){const{min:U,max:Q}=H.aabb;O[0]+=U[0]+Q[0],O[1]+=U[1]+Q[1]}O[0]=Math.floor(O[0]/T.meshes.length/2),O[1]=Math.floor(O[1]/T.meshes.length/2)}if(z&&(z.id&&(T.id=z.id),z.lights&&(T.lights=function(O){if(!O.length)return[];const H=function(ue){const Be=atob(ue),Te=new Uint8Array(Be.length);for(let he=0;he<Be.length;he++)Te[he]=Be.codePointAt(he);return Te}(O),U=[],Q=H.length/24,W=new Uint16Array(H.buffer),re=new Float32Array(H.buffer);for(let ue=0;ue<Q;ue++){const Be=W[2*ue*6]/30,Te=W[2*ue*6+1]/30,he=W[2*ue*6+10]/100,ke=re[6*ue+1],Ve=re[6*ue+2],rt=re[6*ue+3],dt=re[6*ue+4],ft=rt-ke,at=dt-Ve,Et=Math.hypot(ft,at);U.push({pos:[ke+.5*ft,Ve+.5*at,Te],normal:[at/Et,-ft/Et,0],width:Et,height:Be,depth:he,points:[ke,Ve,rt,dt]})}return U}(z.lights))),G){const O=[];for(const H of G)O.push(ek(a.json.nodes[H],a,d));T.children=O}return T}function xJ(f){if(f.vertices.length===0||f.indices.length===0)return null;const a=new US(f.vertices,f.indices,8,256),[d,A]=[a.min.clone(),a.max.clone()];return{vertices:f.vertices,indices:f.indices,grid:a,min:d,max:A}}function _J(f){if(!f.extras||!f.extras.ground)return null;const a=f.extras.ground;if(!a||!Array.isArray(a)||a.length===0)return null;const d=a[0];if(!d||!Array.isArray(d)||d.length===0)return null;const A=[];for(const b of d){if(!Array.isArray(b)||b.length!==2)continue;const N=b[0],z=b[1];typeof N=="number"&&typeof z=="number"&&A.push(new Ze(N,z))}if(A.length<3)return null;A.length>1&&A[A.length-1].equals(A[0])&&A.pop();let _=0;for(let b=0;b<A.length;b++){const N=A[b],z=A[(b+1)%A.length],G=A[(b+2)%A.length];_+=(N.x-z.x)*(G.y-z.y)-(G.x-z.x)*(N.y-z.y)}_>0&&A.reverse();const y=Z1(A.flatMap(b=>[b.x,b.y]),[]);return y.length===0?null:{vertices:A,indices:y}}function bJ(f,a){const d=[],A=[];let _=0;const y=[];for(const b of f){_=d.length;const N=b.vertexArray.float32,z=b.indexArray.uint16;for(let G=0;G<b.vertexArray.length;G++)y[0]=N[3*G+0],y[1]=N[3*G+1],y[2]=N[3*G+2],De.vec3.transformMat4(y,y,a),d.push(new Ze(y[0],y[1]));for(let G=0;G<3*b.indexArray.length;G++)A.push(z[G]+_)}if(A.length%3!=0)return null;for(let b=0;b<A.length;b+=3){const N=d[A[b+0]],z=d[A[b+1]],G=d[A[b+2]];(N.x-z.x)*(G.y-z.y)-(G.x-z.x)*(N.y-z.y)>0&&([A[b+1],A[b+2]]=[A[b+2],A[b+1]])}return{vertices:d,indices:A}}function tk(f){const a=function(z,G){const T=[],O=WebGL2RenderingContext;if(z.json.textures)for(const H of z.json.textures){const U={magFilter:O.LINEAR,minFilter:O.NEAREST,wrapS:O.REPEAT,wrapT:O.REPEAT};H.sampler!==void 0&&Object.assign(U,z.json.samplers[H.sampler]),T.push({image:G[H.source],sampler:U,uploaded:!1})}return T}(f,f.images),d=function(z,G){const T=[];for(const O of z.json.meshes){const H=[];for(const U of O.primitives)H.push(vJ(U,z,G));T.push(H)}return T}(f,a),{scenes:A,scene:_,nodes:y}=f.json,b=A?A[_||0].nodes:y,N=[];for(const z of b)N.push(ek(y[z],f,d));return function(z,G,T){const O={},H=new Set;for(let U=0;U<z.length;U++){const Q=T[G[U]];if(!Q.extras)continue;const W=Q.extras["mapbox:footprint:version"],re=Q.extras["mapbox:footprint:id"];(W||re)&&H.add(U),W==="1.0.0"&&re&&(O[re]=U)}for(let U=0;U<z.length;U++){if(H.has(U))continue;const Q=z[U],W=T[G[U]];if(!W.extras)continue;let re=null;Q.id in O&&(re=bJ(z[O[Q.id]].meshes,Q.matrix)),re||(re=_J(W)),re&&(Q.footprint=xJ(re))}if(H.size>0){const U=Array.from(H.values()).sort((Q,W)=>Q-W);for(let Q=U.length-1;Q>=0;Q--)z.splice(U[Q],1)}}(N,b,f.json.nodes),N}function wJ(f){f.heightmap=new Float32Array(4096),f.heightmap.fill(-1);const a=f.vertexArray.float32,d=f.aabb.min[0]-1,A=f.aabb.min[1]-1,_=mg/(f.aabb.max[0]-d+2),y=mg/(f.aabb.max[1]-A+2);for(let b=0;b<a.length;b+=3){const N=a[b+2],z=(a[b+0]-d)*_|0,G=(a[b+1]-A)*y|0;N>f.heightmap[G*mg+z]&&(f.heightmap[G*mg+z]=N)}}function CJ(f,a){const d={};d.indexArray=new Ka,d.indexArray.reserve(4*f.length),d.vertexArray=new Lu,d.vertexArray.reserve(10*f.length),d.colorArray=new El,d.vertexArray.reserve(10*f.length);let A=0;for(const b of f){const N=Math.min(10,Math.max(4,1.3*b.height))*a,z=[-b.normal[1],b.normal[0],0],G=Math.min(.29,.1*b.width/b.depth),T=b.width-2*b.depth*a*(G+.01),O=De.vec3.scaleAndAdd([],b.pos,z,T/2),H=De.vec3.scaleAndAdd([],b.pos,z,-T/2),U=[O[0],O[1],O[2]+b.height],Q=[H[0],H[1],H[2]+b.height],W=De.vec3.scaleAndAdd([],b.normal,z,G);De.vec3.scale(W,W,N);const re=De.vec3.scaleAndAdd([],b.normal,z,-G);De.vec3.scale(re,re,N),De.vec3.add(W,O,W),De.vec3.add(re,H,re),O[2]+=.1,H[2]+=.1,d.vertexArray.emplaceBack(W[0],W[1],W[2]),d.vertexArray.emplaceBack(re[0],re[1],re[2]),d.vertexArray.emplaceBack(O[0],O[1],O[2]),d.vertexArray.emplaceBack(H[0],H[1],H[2]),d.vertexArray.emplaceBack(U[0],U[1],U[2]),d.vertexArray.emplaceBack(Q[0],Q[1],Q[2]),d.vertexArray.emplaceBack(O[0],O[1],O[2]),d.vertexArray.emplaceBack(H[0],H[1],H[2]),d.vertexArray.emplaceBack(W[0],W[1],W[2]),d.vertexArray.emplaceBack(re[0],re[1],re[2]);const ue=T/N/2;d.colorArray.emplaceBack(-ue-G,-1,ue,.8),d.colorArray.emplaceBack(ue+G,-1,ue,.8),d.colorArray.emplaceBack(-ue,0,ue,1.3),d.colorArray.emplaceBack(ue,0,ue,1.3),d.colorArray.emplaceBack(ue+G,-.8,ue,.7),d.colorArray.emplaceBack(ue+G,-.8,ue,.7),d.colorArray.emplaceBack(0,0,ue,1.3),d.colorArray.emplaceBack(0,0,ue,1.3),d.colorArray.emplaceBack(ue+G,-1.2,ue,.8),d.colorArray.emplaceBack(ue+G,-1.2,ue,.8),d.indexArray.emplaceBack(6+A,4+A,8+A),d.indexArray.emplaceBack(7+A,9+A,5+A),d.indexArray.emplaceBack(0+A,1+A,2+A),d.indexArray.emplaceBack(1+A,3+A,2+A),A+=10}const _={defined:!0,emissiveFactor:[0,0,0]},y={};return y.baseColorFactor=si.white,_.pbrMetallicRoughness=y,d.material=_,d.aabb=new No([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),d}class rk{constructor(a){this._stringToNumber={},this._numberToString=[];for(let d=0;d<a.length;d++){const A=a[d];this._stringToNumber[A]=d,this._numberToString[d]=A}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const SJ=["id","tile","layer","source","sourceLayer","state"];class nk{constructor(a,d,A,_,y){this.type="Feature",this._vectorTileFeature=a,this._z=d,this._x=A,this._y=_,this.properties=a.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const d of SJ)this[d]!==void 0&&(a[d]=this[d]);return a}}class ik{constructor(a,d){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Pe(Yr,16,0),this.featureIndexArray=new Nb,this.promoteId=d,this.is3DTile=!1}insert(a,d,A,_,y,b=0,N=0){const z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(A,_,y,b);const G=this.grid;for(let T=0;T<d.length;T++){const O=d[T],H=[1/0,1/0,-1/0,-1/0];for(let U=0;U<O.length;U++){const Q=O[U];H[0]=Math.min(H[0],Q.x),H[1]=Math.min(H[1],Q.y),H[2]=Math.max(H[2],Q.x),H[3]=Math.max(H[3],Q.y)}N!==0&&(H[0]-=N,H[1]-=N,H[2]+=N,H[3]+=N),H[0]<Yr&&H[1]<Yr&&H[2]>=0&&H[3]>=0&&G.insert(z,H[0],H[1],H[2],H[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Q0.VectorTile(new Jb(this.rawTileData)).layers,this.sourceLayerCoder=new rk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,d,A,_){this.loadVTLayers();const y=a.params||{},b=Rc(y.filter),N=a.tileResult,z=a.transform,G=N.bufferedTilespaceBounds,T=this.grid.query(G.min.x,G.min.y,G.max.x,G.max.y,(Q,W,re,ue)=>Nd(N.bufferedTilespaceGeometry,Q,W,re,ue));T.sort(BJ);let O=null;z.elevation&&T.length>0&&(O=K0.create(z.elevation,this.tileID));const H={};let U;for(let Q=0;Q<T.length;Q++){const W=T[Q];if(W===U)continue;U=W;const re=this.featureIndexArray.get(W);let ue=null;if(this.is3DTile){const Be=this.bucketLayerIDs[0][0],Te=d[Be];if(Te.type!=="model")continue;const{queryFeature:he,intersectionZ:ke}=Te.queryIntersectsMatchingFeature(N,re.featureIndex,b,z);he&&this.appendToResult(H,Be,re.featureIndex,he,ke)}else this.loadMatchingFeature(H,re,b,y.layers,y.availableImages,d,A,_,(Be,Te,he,ke=0)=>(ue||(ue=en(Be,this.tileID.canonical,a.tileTransform)),Te.queryIntersectsFeature(N,Be,he,ue,this.z,a.transform,a.pixelPosMatrix,O,ke)))}return H}loadMatchingFeature(a,d,A,_,y,b,N,z,G){const{featureIndex:T,bucketIndex:O,sourceLayerIndex:H,layoutVertexArrayOffset:U}=d,Q=this.bucketLayerIDs[O];if(_&&!function(Be,Te){for(let he=0;he<Be.length;he++)if(Te.indexOf(Be[he])>=0)return!0;return!1}(_,Q))return;const W=this.sourceLayerCoder.decode(H),re=this.vtLayers[W].feature(T);if(A.needGeometry){const Be=nn(re,!0);if(!A.filter(new Qi(this.tileID.overscaledZ),Be,this.tileID.canonical))return}else if(!A.filter(new Qi(this.tileID.overscaledZ),re))return;const ue=this.getId(re,W);for(let Be=0;Be<Q.length;Be++){const Te=Q[Be];if(_&&_.indexOf(Te)<0)continue;const he=b[Te];if(!he)continue;let ke={};ue!==void 0&&z&&(ke=z.getState(he.sourceLayer||"_geojsonTileLayer",ue));const Ve=!G||G(re,he,ke,U);if(!Ve)continue;const rt=new nk(re,this.z,this.x,this.y,ue),dt=ln({},N[Te]);dt.paint=sk(dt.paint,he.paint,re,ke,y),dt.layout=sk(dt.layout,he.layout,re,ke,y),rt.layer=dt,this.appendToResult(a,Te,T,rt,Ve)}}appendToResult(a,d,A,_,y){let b=a[d];b===void 0&&(b=a[d]=[]),b.push({featureIndex:A,feature:_,intersectionZ:y})}lookupSymbolFeatures(a,d,A,_,y,b,N,z){const G={};this.loadVTLayers();const T=Rc(y);for(const O of a)this.loadMatchingFeature(G,{bucketIndex:A,sourceLayerIndex:_,featureIndex:O,layoutVertexArrayOffset:0},T,b,N,z,d);return G}loadFeature(a){const{featureIndex:d,sourceLayerIndex:A}=a;this.loadVTLayers();const _=this.sourceLayerCoder.decode(A),y=this.vtFeatures[_];if(y[d])return y[d];const b=this.vtLayers[_].feature(d);return y[d]=b,b}hasLayer(a){for(const d of this.bucketLayerIDs)for(const A of d)if(a===A)return!0;return!1}getId(a,d){let A=a.id;if(this.promoteId){const _=typeof this.promoteId=="string"?this.promoteId:this.promoteId[d];_!=null&&(A=a.properties[_]),typeof A=="boolean"&&(A=Number(A))}return A}}function sk(f,a,d,A,_){return mn(f,(y,b)=>{const N=a instanceof ca?a.get(b):null;return N&&N.evaluate?N.evaluate(d,A,_):N})}function BJ(f,a){return a-f}je(ik,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const ok=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class FB{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,A]=new Uint8Array(a,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=A>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const y=ok[15&A];if(!y)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(a,2,1),[N]=new Uint32Array(a,4,1);return new FB(N,b,y,a)}constructor(a,d=64,A=Float64Array,_){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=A,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const y=ok.indexOf(this.ArrayType),b=2*a*this.ArrayType.BYTES_PER_ELEMENT,N=a*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-N%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${A}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+N+z,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+b+N+z),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+N+z,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=a)}add(a,d){const A=this._pos>>1;return this.ids[A]=A,this.coords[this._pos++]=a,this.coords[this._pos++]=d,A}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return PB(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,d,A,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:b,nodeSize:N}=this,z=[0,y.length-1,0],G=[];for(;z.length;){const T=z.pop()||0,O=z.pop()||0,H=z.pop()||0;if(O-H<=N){for(let re=H;re<=O;re++){const ue=b[2*re],Be=b[2*re+1];ue>=a&&ue<=A&&Be>=d&&Be<=_&&G.push(y[re])}continue}const U=H+O>>1,Q=b[2*U],W=b[2*U+1];Q>=a&&Q<=A&&W>=d&&W<=_&&G.push(y[U]),(T===0?a<=Q:d<=W)&&(z.push(H),z.push(U-1),z.push(1-T)),(T===0?A>=Q:_>=W)&&(z.push(U+1),z.push(O),z.push(1-T))}return G}within(a,d,A){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:y,nodeSize:b}=this,N=[0,_.length-1,0],z=[],G=A*A;for(;N.length;){const T=N.pop()||0,O=N.pop()||0,H=N.pop()||0;if(O-H<=b){for(let re=H;re<=O;re++)lk(y[2*re],y[2*re+1],a,d)<=G&&z.push(_[re]);continue}const U=H+O>>1,Q=y[2*U],W=y[2*U+1];lk(Q,W,a,d)<=G&&z.push(_[U]),(T===0?a-A<=Q:d-A<=W)&&(N.push(H),N.push(U-1),N.push(1-T)),(T===0?a+A>=Q:d+A>=W)&&(N.push(U+1),N.push(O),N.push(1-T))}return z}}function PB(f,a,d,A,_,y){if(_-A<=d)return;const b=A+_>>1;ak(f,a,b,A,_,y),PB(f,a,d,A,b-1,1-y),PB(f,a,d,b+1,_,1-y)}function ak(f,a,d,A,_,y){for(;_>A;){if(_-A>600){const G=_-A+1,T=d-A+1,O=Math.log(G),H=.5*Math.exp(2*O/3),U=.5*Math.sqrt(O*H*(G-H)/G)*(T-G/2<0?-1:1);ak(f,a,d,Math.max(A,Math.floor(d-T*H/G+U)),Math.min(_,Math.floor(d+(G-T)*H/G+U)),y)}const b=a[2*d+y];let N=A,z=_;for(Ev(f,a,A,d),a[2*_+y]>b&&Ev(f,a,A,_);N<z;){for(Ev(f,a,N,z),N++,z--;a[2*N+y]<b;)N++;for(;a[2*z+y]>b;)z--}a[2*A+y]===b?Ev(f,a,A,z):(z++,Ev(f,a,z,_)),z<=d&&(A=z+1),d<=z&&(_=z-1)}}function Ev(f,a,d,A){jB(f,d,A),jB(a,2*d,2*A),jB(a,2*d+1,2*A+1)}function jB(f,a,d){const A=f[a];f[a]=f[d],f[d]=A}function lk(f,a,d,A){const _=f-d,y=a-A;return _*_+y*y}i.$=Ko,i.A=class extends yw{},i.B=Va,i.C=Ci,i.D=es,i.E=Fn,i.F=jp,i.G=Hs,i.H=Xf,i.I=nB,i.J=Yf,i.K=Td,i.L=I,i.M=af,i.N=to,i.O=Ji,i.P=Ze,i.Q=co,i.R=Ha,i.S=xo,i.T=AB,i.U=Gn,i.V=yw,i.W=cf,i.X=wh,i.Y=Oc,i.Z=function(f){const a=f.value;let d=[];if(!a)return d;const A=Va(a);return A!=="string"?(d=d.concat([new yw(f.key,a,`string expected, "${A}" found`)]),d):(yM(a,!0)||(d=d.concat([new yw(f.key,a,`invalid url "${a}"`)])),d)},i._=cr,i.a=function(f){return Lt.API_CDN_URL_REGEX.test(f)},i.a$=al,i.a0=Es,i.a1=jr,i.a2=class{constructor(f){this.specification=f}possiblyEvaluate(f,a){return Rn(f.expression.evaluate(a))}interpolate(f,a,d){return{x:Sr(f.x,a.x,d),y:Sr(f.y,a.y,d),z:Sr(f.z,a.z,d),azimuthal:Sr(f.azimuthal,a.azimuthal,d),polar:Sr(f.polar,a.polar,d)}}},i.a3=Qi,i.a4=w,i.a5=sr,i.a6=De,i.a7=cn,i.a8=ca,i.a9=FA,i.aA=Io,i.aB=sM,i.aC=dM,i.aD=iM,i.aE=function(f,a){const d=document.createElement("video");d.muted=!0,d.onloadstart=function(){a(null,d)};for(let A=0;A<f.length;A++){const _=document.createElement("source");Xo(f[A])||(d.crossOrigin="Anonymous"),_.src=f[A],d.appendChild(_)}return{cancel:()=>{}}},i.aF=fw,i.aG=function(f){return fetch(f).then(a=>a.arrayBuffer()).then(a=>JM(a,0,f))},i.aH=tk,i.aI=class{constructor(f,a,d,A){this.id=f,this.position=a!=null?new Ee(a[0],a[1]):new Ee(0,0),this.orientation=d??[0,0,0],this.nodes=A,this.uploaded=!1,this.aabb=new No([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(f,a){if(De.mat4.multiply(f.matrix,a,f.matrix),f.meshes)for(const d of f.meshes){const A=No.applyTransformFast(d.aabb,f.matrix);this.aabb.encapsulate(A)}if(f.children)for(const d of f.children)this._applyTransformations(d,f.matrix)}computeBoundsAndApplyParent(){const f=De.mat4.identity([]);for(const a of this.nodes)this._applyTransformations(a,f)}computeModelMatrix(f,a,d,A,_,y,b=!1){wM(this.matrix,this,f.transform,this.position,a,d,A,_,y,b)}upload(f){if(!this.uploaded){for(const a of this.nodes)xB(a,f);for(const a of this.nodes)vw(a);this.uploaded=!0}}destroy(){for(const f of this.nodes)_B(f)}},i.aJ=Wr,i.aK=hv,i.aL=wt,i.aM=_t,i.aN=Eu,i.aO=Ka,i.aP=Yt,i.aQ=Id,i.aR=dw,i.aS=function(){zi.isLoading()||zi.isLoaded()||gs()!=="deferred"||To()},i.aT=Rc,i.aU=nn,i.aV=nk,i.aW=Pr,i.aX=KS,i.aY=RS,i.aZ=en,i.a_=Bc,i.aa=Sr,i.ab=Yr,i.ac=an,i.ad=class{constructor(f){this.specification=f}possiblyEvaluate(f,a){return function([d,A]){const _=Rn([1,d,A]);return{x:_.x,y:_.y,z:_.z}}(f.expression.evaluate(a))}interpolate(f,a,d){return{x:Sr(f.x,a.x,d),y:Sr(f.y,a.y,d),z:Sr(f.z,a.z,d)}}},i.ae=function(f,a,d=0,A=!0){const _=new Ze(d,d),y=f.sub(_),b=a.add(_),N=[y,new Ze(b.x,y.y),b,new Ze(y.x,b.y)];return A&&N.push(y.clone()),N},i.af=function(f,a){const d=[];for(let A=0;A<f.length;A++){const _=Sn(A-1,-1,f.length-1),y=Sn(A+1,-1,f.length-1),b=f[A],N=f[y],z=f[_].sub(b).unit(),G=N.sub(b).unit(),T=G.angleWithSep(z.x,z.y),O=z.add(G).unit().mult(-1*a/Math.sin(T/2));d.push(b.add(O))}return d},i.ag=Vj,i.ah=Nd,i.ai=function(f,a,d=0){return De.vec3.fromValues(((a.x-d)*f.scale-f.x)*Yr,(a.y*f.scale-f.y)*Yr,Pt(a.z,a.y))},i.aj=pf,i.ak=uj,i.al=function(f){let a=1/0,d=1/0,A=-1/0,_=-1/0;for(const y of f)a=Math.min(a,y.x),d=Math.min(d,y.y),A=Math.max(A,y.x),_=Math.max(_,y.y);return{min:new Ze(a,d),max:new Ze(A,_)}},i.am=ht,i.an=Do,i.ao=Rr,i.ap=Ir,i.aq=l,i.ar=function(f,a){const d={};for(let A=0;A<a.length;A++){const _=a[A];_ in f&&(d[_]=f[_])}return d},i.as=Ge,i.at=gt,i.au=class{constructor(f){this.entries={},this.scheduler=f}request(f,a,d,A){const _=this.entries[f]=this.entries[f]||{callbacks:[]};if(_.result){const[y,b]=_.result;return this.scheduler?this.scheduler.add(()=>{A(y,b)},a):A(y,b),()=>{}}return _.callbacks.push(A),_.cancel||(_.cancel=d((y,b)=>{_.result=[y,b];for(const N of _.callbacks)this.scheduler?this.scheduler.add(()=>{N(y,b)},a):N(y,b);setTimeout(()=>delete this.entries[f],3e3)})),()=>{_.result||(_.callbacks=_.callbacks.filter(y=>y!==A),_.callbacks.length||(_.cancel(),delete this.entries[f]))}}},i.av=Bu,i.aw=function(f,a,d){const A=JSON.stringify(f.request);return f.data&&(this.deduped.entries[A]={result:[null,f.data]}),this.deduped.request(A,{type:"parseTile",isSymbolTile:f.isSymbolTile,zoom:f.tileZoom},_=>{const y=Ul(f.request,(b,N,z,G)=>{b?_(b):N&&_(null,{vectorTile:d?void 0:new Q0.VectorTile(new Jb(N)),rawData:N,cacheControl:z,expires:G})});return()=>{y.cancel(),_()}},a)},i.ax=function(f){Fs++,Fs>Pi&&(f.getActor().send("enforceCacheSizeLimit",Wn),Fs=0)},i.ay=rn,i.az=function(f){return f<=1?1:Math.pow(2,Math.floor(Math.log(f)/Math.LN2))},i.b=function(f){return Lt.API_FONTS_REGEX.test(f)},i.b$=function(f){const{x:a,y:d}=f.point,{lng:A,lat:_}=f._center;return rP(a,d,f.worldSize,A,_)},i.b0=Pd,i.b1=La,i.b2=Z1,i.b3=hB,i.b4=function(f,a){const d=FA(a.zoom);if(d===0)return tp(f);const A=Rb(f),_=IS(A),y=ht(A.getWest())*a.worldSize,b=ht(A.getEast())*a.worldSize,N=gt(A.getNorth())*a.worldSize,z=gt(A.getSouth())*a.worldSize,G=[y,N,0],T=[b,N,0],O=[y,z,0],H=[b,z,0],U=De.mat4.invert([],a.globeMatrix);return De.vec3.transformMat4(G,G,U),De.vec3.transformMat4(T,T,U),De.vec3.transformMat4(O,O,U),De.vec3.transformMat4(H,H,U),_[0]=Up(_[0],O,d),_[1]=Up(_[1],H,d),_[2]=Up(_[2],T,d),_[3]=Up(_[3],G,d),No.fromPoints(_)},i.b5=zb,i.b6=X1,i.b7=Up,i.b8=Bh,i.b9=Fu,i.bA=Sn,i.bB=vt,i.bC=ri,i.bD=ut,i.bE=function(f,a,d){f[4*a+0]=d[0],f[4*a+1]=d[1],f[4*a+2]=d[2],f[4*a+3]=d[3]},i.bF=hg,i.bG=Fh,i.bH=$1,i.bI=Zc,i.bJ=Dp,i.bK=Ee,i.bL=Kj,i.bM=Nl,i.bN=NA,i.bO=fM,i.bP=Xl,i.bQ=JF,i.bR=function(f,a,d,A,_,y,b,N,z){if(z.name==="globe")return JF(f,a,new Xl(d,A,_),!1);const G=hv({z:d,x:A,y:_},z);return new No([(y+G.x/G.scale)*a,a*(G.y/G.scale),b],[(y+G.x2/G.scale)*a,a*(G.y2/G.scale),N])},i.bS=function(f,a,d){let A=0;for(let _=0;_<2;++_)f[_]>0&&(A+=(f[_]-0)*(f[_]-0)),a[_]<0&&(A+=(0-a[_])*(0-a[_]));return A},i.bT=Tt,i.bU=x,i.bV=function(f){const a=De.mat4.identity(new Float64Array(16));De.mat4.multiply(a,f.pixelMatrix,f.globeMatrix);const d=[0,q,0],A=[0,X,0];return De.vec3.transformMat4(d,d,a),De.vec3.transformMat4(A,A,a),[d[0]>0&&d[0]<=f.width&&d[1]>0&&d[1]<=f.height&&!PS(f,new Ee(f.center.lat,90)),A[0]>0&&A[0]<=f.width&&A[1]>0&&A[1]<=f.height&&!PS(f,new Ee(f.center.lat,-90))]},i.bW=function(f,a){const{scale:d}=f.tileTransform,A=d*Yr/(f.tileSize*Math.pow(2,a.zoom-f.tileID.overscaledZ+f.tileID.canonical.z));return De.mat2.scale(new Float32Array(4),a.inverseAdjustmentMatrix,[A,A])},i.bX=mw,i.bY=hM,i.bZ=function(f){const a=hM(f,!0);return De.mat2.invert([],[a[0],a[1],a[4],a[5]])},i.b_=ep,i.ba=BB,i.bb=Jb,i.bc=Ul,i.bd=function(f){const a=[];for(const d in f)a.push(f[d]);return a},i.be=function(f,a){const d=[];for(const A in f)A in a||d.push(A);return d},i.bf=Ln,i.bg=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bh=Ue,i.bi=function(f,a){const{x:d,y:A}=f.point,_=rP(d,A,f.worldSize/f._pixelsPerMercatorPixel,0,0);return De.mat4.multiply(_,_,NS(tp(a)))},i.bj=H0,i.bk=sh,i.bl=Zb,i.bm=function(f,a,d,A,_){const y=5*a+2;f.float32[y+0]=d,f.float32[y+1]=A,f.float32[y+2]=_},i.bn=uw,i.bo=Pj,i.bp=dn,i.bq=zc,i.br=MP,i.bs=gM,i.bt=UP,i.bu=zP,i.bv=oB,i.bw=Uj,i.bx=rB,i.by=FB,i.bz=si,i.c=kt,i.c$=uu,i.c0=Kt,i.c1=cu,i.c2=h,i.c3=function(f){const a=Math.round((f+45+360)%360/90)%4;return rr[a]},i.c4=45,i.c5=Je,i.c6=R0,i.c7=function(f,a,d){const A=Math.sqrt(f*f+a*a+d*d),_=A>0?Math.acos(d/A)*Dt:0;let y=f!==0||a!==0?Math.atan2(-a,-f)*Dt+90:0;return y<0&&(y+=360),[A,y,_]},i.c8=Ot,i.c9=No,i.cA=function(f){const a=Tt-5;f=Ir(f,-a,a)/a*90;const d=Math.pow(Math.abs(Math.sin(vt(f))),3);return Math.round(d*(M.length-1))},i.cB=function(f,a,d,A){const _=a.getNorth(),y=a.getSouth(),b=a.getWest(),N=a.getEast(),z=1<<f.z,G=N-b,T=_-y,O=G/L,H=-T/M[d],U=[0,O,0,H,0,0,_,b,0];if(f.z>0){const Q=180/A;De.mat3.multiply(U,U,[Q/G+1,0,0,0,Q/T+1,0,-.5*Q/O,.5*Q/H,1])}return U[2]=z,U[5]=f.x,U[8]=f.y,U},i.cC=tp,i.cD=function(f,a,d){const A=De.mat4.identity(new Float64Array(16)),_=(a/(1<<f)-.5)*Math.PI*2;return De.mat4.rotateY(A,d.globeMatrix,_),Float32Array.from(A)},i.cE=class{isDataAvailableAtPoint(f){const a=this._source();if(this.isUsingMockSource()||!a||f.y<0||f.y>1)return!1;const d=a.getSource().maxzoom,A=1<<d,_=Math.floor(f.x),y=Math.floor((f.x-_)*A),b=Math.floor(f.y*A),N=this.findDEMTileFor(new Io(d,_,d,y,b));return!(!N||!N.dem)}getAtPointOrZero(f,a=0){return this.getAtPoint(f,a)||0}getAtPoint(f,a,d=!0){if(this.isUsingMockSource())return null;a==null&&(a=null);const A=this._source();if(!A||f.y<0||f.y>1)return a;const _=A.getSource().maxzoom,y=1<<_,b=Math.floor(f.x),N=f.x-b,z=new Io(_,b,_,Math.floor(N*y),Math.floor(f.y*y)),G=this.findDEMTileFor(z);if(!G||!G.dem)return a;const T=G.dem,O=1<<G.tileID.canonical.z,H=(N*O-G.tileID.canonical.x)*T.dim,U=(f.y*O-G.tileID.canonical.y)*T.dim,Q=Math.floor(H),W=Math.floor(U);return(d?this.exaggeration():1)*Sr(Sr(T.get(Q,W),T.get(Q,W+1),U-W),Sr(T.get(Q+1,W),T.get(Q+1,W+1),U-W),H-Q)}getAtTileOffset(f,a,d){const A=1<<f.canonical.z;return this.getAtPointOrZero(new sr(f.wrap+(f.canonical.x+a/Yr)/A,(f.canonical.y+d/Yr)/A))}getAtTileOffsetFunc(f,a,d,A){return _=>{const y=this.getAtTileOffset(f,_.x,_.y),b=A.upVector(f.canonical,_.x,_.y),N=A.upVectorScale(f.canonical,a,d).metersToTile;return De.vec3.scale(b,b,y*N),b}}getForTilePoints(f,a,d,A){if(this.isUsingMockSource())return!1;const _=K0.create(this,f,A);return!!_&&(a.forEach(y=>{y[2]=this.exaggeration()*_.getElevationAt(y[0],y[1],d)}),!0)}getMinMaxForTile(f){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(f);if(!a||!a.dem)return null;const d=a.dem.tree,A=a.tileID,_=1<<f.canonical.z-A.canonical.z;let y=f.canonical.x/_-A.canonical.x,b=f.canonical.y/_-A.canonical.y,N=0;for(let z=0;z<f.canonical.z-A.canonical.z&&!d.leaves[N];z++){y*=2,b*=2;const G=2*Math.floor(b)+Math.floor(y);N=d.childOffsets[N]+G,y%=1,b%=1}return{min:this.exaggeration()*d.minimums[N],max:this.exaggeration()*d.maximums[N]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(f,a,d){throw new Error("Pure virtual method called.")}pointCoordinate(f){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(f){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const f=this.visibleDemTiles;if(f.length===0)return null;let a=!1,d=Number.MAX_VALUE,A=Number.MIN_VALUE;for(const _ of f){const y=this.getMinMaxForTile(_.tileID);y&&(d=Math.min(d,y.min),A=Math.max(A,y.max),a=!0)}return a?{min:d,max:A}:null}},i.cF=AP,i.cG=Rp,i.cH=function(f,a){return[Math.pow(f[0],2.2)*a,Math.pow(f[1],2.2)*a,Math.pow(f[2],2.2)*a]},i.cI=tP,i.cJ=pt,i.cK=qe,i.cL=256,i.cM=function(f,a){const d=[0,0,0],A=zb(tp(a.canonical));return De.vec3.transformMat4(d,d,A),De.vec3.transformMat4(d,d,f),d},i.cN=f=>({u_camera_to_center_distance:new Zc(f),u_extrude_scale:new W1(f),u_device_pixel_ratio:new Zc(f),u_matrix:new hg(f),u_inv_rot_matrix:new hg(f),u_merc_center:new Fh(f),u_tile_id:new $1(f),u_zoom_transition:new Zc(f),u_up_dir:new $1(f),u_emissive_strength:new Zc(f)}),i.cO=f=>({u_matrix:new hg(f),u_pixels_to_tile_units:new W1(f),u_device_pixel_ratio:new Zc(f),u_units_to_pixels:new Fh(f),u_dash_image:new Dp(f),u_gradient_image:new Dp(f),u_image_height:new Zc(f),u_texsize:new Fh(f),u_tile_units_to_pixels:new Zc(f),u_alpha_discard_threshold:new Zc(f),u_trim_offset:new Fh(f),u_trim_fade_range:new Fh(f),u_trim_color:new R0(f),u_emissive_strength:new Zc(f)}),i.cP=f=>({u_matrix:new hg(f),u_texsize:new Fh(f),u_pixels_to_tile_units:new W1(f),u_device_pixel_ratio:new Zc(f),u_image:new Dp(f),u_units_to_pixels:new Fh(f),u_tile_units_to_pixels:new Zc(f),u_alpha_discard_threshold:new Zc(f),u_trim_offset:new Fh(f)}),i.cQ=na,i.cR=WY,i.cS=KY,i.cT=sP,i.cU=(f,a,d,A,_,y)=>{const b=f.transform,N=b.projection.name==="globe";let z;if(y.paint.get("circle-pitch-alignment")==="map")if(N){const T=tP(b.zoom,a.canonical)*b._pixelsPerMercatorPixel;z=Float32Array.from([T,0,0,T])}else z=b.calculatePixelsToTileUnitsMatrix(d);else z=new Float32Array([b.pixelsToGLUnits[0],0,0,b.pixelsToGLUnits[1]]);const G={u_camera_to_center_distance:f.transform.getCameraToCenterDistance(b.projection),u_matrix:f.translatePosMatrix(a.projMatrix,d,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_device_pixel_ratio:sn.devicePixelRatio,u_extrude_scale:z,u_inv_rot_matrix:ZX,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:y.paint.get("circle-emissive-strength")};if(N){G.u_inv_rot_matrix=A,G.u_merc_center=_,G.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],G.u_zoom_transition=FA(b.zoom);const T=_[0]*Yr,O=_[1]*Yr;G.u_up_dir=b.projection.upVector(new Xl(0,0,0),T,O)}return G},i.cV=fj,i.cW=(f,a,d,A,_,y)=>{const b=f.transform;return{u_matrix:hj(f,a,d,A),u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(a),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:dj(a,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:y}},i.cX=(f,a,d,A,_,y,b)=>{const N=f.transform,z=N.calculatePixelsToTileUnitsMatrix(a);return{u_matrix:hj(f,a,d,A),u_pixels_to_tile_units:z,u_device_pixel_ratio:y,u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:pj(d)&&a.lineAtlasTexture?a.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:dj(a,f.transform),u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:d.paint.get("line-trim-fade-range"),u_trim_color:d.paint.get("line-trim-color").toRenderColor(d.lut).toArray01(),u_emissive_strength:d.paint.get("line-emissive-strength")}},i.cY=Gr,i.cZ=Y1,i.c_=ej,i.ca=Rn,i.cb=function(f){return[Math.pow(f[0],1/2.2),Math.pow(f[1],1/2.2),Math.pow(f[2],1/2.2)]},i.cc=function(f){return f({pluginStatus:$n,pluginURL:ti}),Vn.on("pluginStateChange",f),f},i.cd=X0,i.ce=bw,i.cf=G0,i.cg=iB,i.ch=Nc,i.ci=Mi,i.cj=Un,i.ck=Jt,i.cl=Vi,i.cm=function(f){const a=f.indexOf(Yc);return a>=0?f.slice(0,a):f},i.cn=function(f){return f.indexOf(Yc)>=0},i.co=function(f){const a=f.indexOf(Yc);return a>=0?f.slice(a+1):""},i.cp=function(f){const a=[],d=f.id;return d===void 0&&a.push({message:`layers.${d}: missing required property "id"`}),f.render===void 0&&a.push({message:`layers.${d}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&a.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),a},i.cq=function(f,a,d,A){return f.type==="custom"?new BZ(f,a):new DZ[f.type](f,a,d,A)},i.cr=Hn,i.cs=Vn,i.ct=nc,i.cu=q1,i.cv=class extends ff{constructor(f){super(f),this.current=wS}set(f,a,d){if(this.fetchUniformLocation(f,a)){for(let A=0;A<9;A++)if(d[A]!==this.current[A]){this.current=d,this.gl.uniformMatrix3fv(this.location,!1,d);break}}}},i.cw=nr,i.cx=function(f,a,d){const A=FA(d.zoom),_=f.style.map._antialias,y=a.options.extStandardDerivativesForceOff||f.terrain&&f.terrain.exaggeration()>0;return A===0&&!_&&!y},i.cy=function(f){const a=f.pixelsPerMeter,d=a/ut(1,f.center.lat),A=De.mat4.identity(new Float64Array(16));return De.mat4.translate(A,A,[f.point.x,f.point.y,0]),De.mat4.scale(A,A,[d,d,a]),Float32Array.from(A)},i.cz=Rb,i.d=function(f){return Lt.API_TILEJSON_REGEX.test(f)},i.d$=m,i.d0=Yb,i.d1=jA,i.d2=450,i.d3=7,i.d4=SZ,i.d5=as,i.d6=Ld,i.d7=256,i.d8=NS,i.d9=Lu,i.dA=nP,i.dB=function(f){const a=[0,0,0],d=De.mat4.identity(new Float64Array(16));return De.mat4.multiply(d,f.pixelMatrix,f.globeMatrix),De.vec3.transformMat4(a,a,d),new Ze(a[0],a[1])},i.dC=function(f,a,d=!1){if($n===bn||$n===zr||$n===ci)throw new Error("setRTLTextPlugin cannot be called multiple times.");ti=sn.resolveURL(f),$n=bn,fi=a,wi(),d||To()},i.dD=gs,i.dE=function(){bw().acquire(EB)},i.dF=function(){const f=Cv;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(EB),Cv=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.dG=wv,i.dH=function(f){const a=Ss();if(!a)return;const d=a.delete(qn);f&&d.catch(f).then(()=>f())},i.dI=bv,i.dJ=$M,i.dK=function(f){TB=sn.resolveURL(f),J0||(J0=new X0(bw(),new Fn)),J0.broadcast("setDracoUrl",TB)},i.dL=qM,i.dM=function(f){Z0=sn.resolveURL(f),J0||(J0=new X0(bw(),new Fn)),J0.broadcast("setMeshoptUrl",Z0)},i.dN=je,i.dO=PA,i.dP=mf,i.dQ=rk,i.dR=ik,i.dS=oj,i.dT=mn,i.dU=Mj,i.dV=function(f,a,d,A,_,y,b,N,z,G,T){f.createArrays(),f.tilePixelRatio=Yr/(512*f.overscaling),f.compareText={},f.iconsNeedLinear=!1;const O=f.layers[0].layout,H=f.layers[0]._unevaluatedLayout._values,U={};if(f.textSizeData.kind==="composite"){const{minZoom:ue,maxZoom:Be}=f.textSizeData;U.compositeTextSizes=[H["text-size"].possiblyEvaluate(new Qi(ue),N),H["text-size"].possiblyEvaluate(new Qi(Be),N)]}if(f.iconSizeData.kind==="composite"){const{minZoom:ue,maxZoom:Be}=f.iconSizeData;U.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new Qi(ue),N),H["icon-size"].possiblyEvaluate(new Qi(Be),N)]}U.layoutTextSize=H["text-size"].possiblyEvaluate(new Qi(z+1),N),U.layoutIconSize=H["icon-size"].possiblyEvaluate(new Qi(z+1),N),U.textMaxSize=H["text-size"].possiblyEvaluate(new Qi(18),N);const Q=O.get("text-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",W=O.get("text-size");let re=!1;for(const ue of f.features)if(ue.icon&&ue.icon.nameSecondary){re=!0;break}for(const ue of f.features){const Be=O.get("text-font").evaluate(ue,{},N).join(","),Te=W.evaluate(ue,{},N),he=U.layoutTextSize.evaluate(ue,{},N),ke=(U.layoutIconSize.evaluate(ue,{},N),{horizontal:{},vertical:void 0}),Ve=ue.text;let rt,dt=[0,0];if(Ve){const Et=Ve.toString(),yt=O.get("text-letter-spacing").evaluate(ue,{},N)*zc,Nt=O.get("text-line-height").evaluate(ue,{},N)*zc,zt=ct(Et)?yt:0,Gt=O.get("text-anchor").evaluate(ue,{},N),$t=O.get("text-variable-anchor");if(!$t){const Ur=O.get("text-radial-offset").evaluate(ue,{},N);dt=Ur?Uj(Gt,[Ur*zc,sB]):O.get("text-offset").evaluate(ue,{},N).map(br=>br*zc)}let Zt=Q?"center":O.get("text-justify").evaluate(ue,{},N);const vr=O.get("symbol-placement")==="point",tr=vr?O.get("text-max-width").evaluate(ue,{},N)*zc:1/0,Br=Ur=>{f.allowVerticalPlacement&&Qt(Et)&&(ke.vertical=tB(Ve,a,d,_,Be,tr,Nt,Gt,Ur,zt,dt,sh.vertical,!0,he,Te))};if(!Q&&$t){const Ur=Zt==="auto"?$t.map(Cn=>oB(Cn)):[Zt];let br=!1;for(let Cn=0;Cn<Ur.length;Cn++){const hn=Ur[Cn];if(!ke.horizontal[hn])if(br)ke.horizontal[hn]=ke.horizontal[0];else{const tn=tB(Ve,a,d,_,Be,tr,Nt,"center",hn,zt,dt,sh.horizontal,!1,he,Te);tn&&(ke.horizontal[hn]=tn,br=tn.positionedLines.length===1)}}Br("left")}else{if(Zt==="auto"&&(Zt=oB(Gt)),vr||O.get("text-writing-mode").indexOf("horizontal")>=0||!Qt(Et)){const Ur=tB(Ve,a,d,_,Be,tr,Nt,Gt,Zt,zt,dt,sh.horizontal,!1,he,Te);Ur&&(ke.horizontal[Zt]=Ur)}Br(vr?"left":Zt)}}let ft=!1;if(ue.icon&&ue.icon.namePrimary){const Et=A[ue.icon.namePrimary];Et&&(rt=sZ(_[ue.icon.namePrimary],ue.icon.nameSecondary?_[ue.icon.nameSecondary]:void 0,O.get("icon-offset").evaluate(ue,{},N),O.get("icon-anchor").evaluate(ue,{},N)),ft=Et.sdf,f.sdfIcons===void 0?f.sdfIcons=Et.sdf:f.sdfIcons!==Et.sdf&&jn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Et.pixelRatio!==f.pixelRatio||O.get("icon-rotate").constantOr(1)!==0)&&(f.iconsNeedLinear=!0))}const at=Qj(ke.horizontal)||ke.vertical;f.iconsInText||(f.iconsInText=!!at&&at.iconsInText),(at||rt)&&hZ(f,ue,ke,rt,A,U,he,0,dt,ft,b,N,G,T,re)}y&&f.generateCollisionDebugBuffers(z,f.collisionBoxArray)},i.dW=Q0,i.dX=_w,i.dY=Ar,i.dZ=NP,i.d_=xj,i.da=Ll,i.db=ih,i.dc=function(f,a,d,A,_){return Ir((f-a)/(d-a)*(_-A)+A,A,_)},i.dd=uo,i.de=Vt,i.df=class{constructor(f,a,d,A){this.context=f,this.format=A,this.size=d,this.texture=f.gl.createTexture();const[_,y,b]=this.size,{gl:N}=f;N.bindTexture(N.TEXTURE_3D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(!1),N.texImage3D(N.TEXTURE_3D,0,this.format,_,y,b,0,fB(this.format),pB(this.format),a.data)}bind(f,a){const{context:d}=this,{gl:A}=d;A.bindTexture(A.TEXTURE_3D,this.texture),f!==this.minFilter&&(A.texParameteri(A.TEXTURE_3D,A.TEXTURE_MAG_FILTER,f),A.texParameteri(A.TEXTURE_3D,A.TEXTURE_MIN_FILTER,f),this.minFilter=f),a!==this.wrapS&&(A.texParameteri(A.TEXTURE_3D,A.TEXTURE_WRAP_S,a),A.texParameteri(A.TEXTURE_3D,A.TEXTURE_WRAP_T,a),this.wrapS=a)}destroy(){const{gl:f}=this.context;f.deleteTexture(this.texture),this.texture=null}},i.dg=yB,i.dh=[1,1,1],i.di=K0,i.dj=W0,i.dk=Iu,i.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Ze(1/0,1/0),max:new Ze(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(f,a=!1){const d=DP(new Ze(0,0),new Ze(Yr,Yr),f),A=[];if(a&&!VS(d,this._globalClipBounds))return A;for(const _ of this._activeRegions){if(_.hiddenByOverlap||!VS(d,_))continue;const y=_Y(_.min,_.max,f);A.push({min:y.min,max:y.max,sourceId:this._sourceIds[_.priority],footprint:_.footprint,footprintTileId:_.tileId,order:_.order,clipMask:_.clipMask,clipScope:_.clipScope})}return A}setSources(f){this._setSources(f.map(a=>({getSourceId:()=>a.cache.id,getFootprints:()=>{const d=[];for(const A of a.cache.getVisibleCoordinates()){const _=a.cache.getTile(A).buckets[a.layer];_&&_.updateFootprints(A.toUnwrapped(),d)}return d},getOrder:()=>a.order,getClipMask:()=>a.clipMask,getClipScope:()=>a.clipScope})))}_addSource(f){const a=f.getFootprints();if(a.length===0)return;const d=f.getOrder(),A=f.getClipMask(),_=f.getClipScope();for(const y of a){if(!y.footprint)continue;const b=DP(y.footprint.min,y.footprint.max,y.id);this._activeRegions.push({min:b.min,max:b.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:y.id,footprint:y.footprint,order:d,clipMask:A,clipScope:_})}this._sourceIds.push(f.getSourceId())}_computeReplacement(){this._activeRegions.sort((a,d)=>a.priority-d.priority||Kb(a.min,d.min)||Kb(a.max,d.max)||a.order-d.order||a.clipMask-d.clipMask||function(A,_){const y=(b,N)=>b+N;return A.length-_.length||A.reduce(y,"").localeCompare(_.reduce(y,""))}(a.clipScope,d.clipScope));let f=this._activeRegions.length!==this._prevRegions.length;if(!f){let a=0;for(;!f&&a!==this._activeRegions.length;){const d=this._activeRegions[a],A=this._prevRegions[a];f=d.priority!==A.priority||!kP(d,A)||d.order!==A.order||d.clipMask!==A.clipMask||!Ue(d.clipScope,A.clipScope),++a}}if(f){++this._updateTime;for(const d of this._activeRegions)d.order!==Wb&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,d.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,d.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,d.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,d.max.y));const a=d=>{const A=this._activeRegions;if(d>=A.length)return d;const _=A[d].priority;for(;d<A.length&&A[d].priority===_;)++d;return d};if(this._sourceIds.length>1){let d=0,A=a(d);for(;d!==A;){let _=d;const y=d;for(;_!==A;){const b=this._activeRegions[_];b.hiddenByOverlap=!1;for(let N=0;N<y;N++){const z=this._activeRegions[N];if(!z.hiddenByOverlap&&b.order===Wb&&VS(b,z)&&(b.hiddenByOverlap=RP(b.footprint,b.tileId,z.footprint,z.tileId),b.hiddenByOverlap))break}++_}d=A,A=a(d)}}}}_setSources(f){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let a=f.length-1;a>=0;a--)this._addSource(f[a]);this._computeReplacement()}},i.dm=class{constructor(f){this._createGrid(f),this._createPoles(f)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const f of this._poleSegments)f.destroy();for(const f of this._gridSegments)f.withSkirts.destroy(),f.withoutSkirts.destroy()}_fillGridMeshWithLods(f,a){const d=new Bc,A=new Ka,_=[],y=f+1+2,b=a[0]+1,N=a[0]+1+(1+a.length),z=(G,T,O)=>{let H=G===y-1?G-2:G===0?G:G-1;return H+=O?24575:0,[H,T]};for(let G=0;G<y;++G)d.emplaceBack(...z(G,0,!0));for(let G=0;G<b;++G)for(let T=0;T<y;++T)d.emplaceBack(...z(T,G,(T===0||T===y-1)&&!0));for(let G=0;G<a.length;++G){const T=a[G];for(let O=0;O<y;++O)d.emplaceBack(...z(O,T,!0))}for(let G=0;G<a.length;++G){const T=A.length,O=a[G]+1+2,H=new Ka;for(let W=0;W<O-1;W++){const re=W===O-2,ue=re?y*(N-a.length+G-W):y;for(let Be=0;Be<y-1;Be++){const Te=W*y+Be;W===0||re||Be===0||Be===y-2?(H.emplaceBack(Te+1,Te,Te+ue),H.emplaceBack(Te+ue,Te+ue+1,Te+1)):(A.emplaceBack(Te+1,Te,Te+ue),A.emplaceBack(Te+ue,Te+ue+1,Te+1))}}const U=La.simpleSegment(0,T,d.length,A.length-T);for(let W=0;W<H.uint16.length;W+=3)A.emplaceBack(H.uint16[W],H.uint16[W+1],H.uint16[W+2]);const Q=La.simpleSegment(0,T,d.length,A.length-T);_.push({withoutSkirts:U,withSkirts:Q})}return{vertices:d,indices:A,segments:_}}_createGrid(f){const a=this._fillGridMeshWithLods(L,M);this._gridSegments=a.segments,this._gridBuffer=f.createVertexBuffer(a.vertices,Pd.members),this._gridIndexBuffer=f.createIndexBuffer(a.indices,!0)}_createPoles(f){const a=new Ka;for(let b=0;b<=L;b++)a.emplaceBack(0,b+1,b+2);this._poleIndexBuffer=f.createIndexBuffer(a,!0);const d=new Ll,A=new Ll,_=new Ll,y=new Ll;this._poleSegments=[];for(let b=0,N=0;b<h;b++){const z=360/(1<<b);d.emplaceBack(0,-l,0,.5,0),A.emplaceBack(0,-l,0,.5,1),_.emplaceBack(0,-l,0,.5,.5),y.emplaceBack(0,-l,0,.5,.5);for(let G=0;G<=L;G++){let T=G/L,O=0;const H=Sr(0,z,T),[U,Q,W]=ne(XX,YX,H,l);d.emplaceBack(U,Q,W,T,O),A.emplaceBack(U,Q,W,T,1-O);const re=vt(H);T=.5+.5*Math.sin(re),O=.5+.5*Math.cos(re),_.emplaceBack(U,Q,W,T,O),y.emplaceBack(U,Q,W,T,1-O)}this._poleSegments.push(La.simpleSegment(N,0,66,64)),N+=66}this._poleNorthVertexBuffer=f.createVertexBuffer(d,pd,!1),this._poleSouthVertexBuffer=f.createVertexBuffer(A,pd,!1),this._texturedPoleNorthVertexBuffer=f.createVertexBuffer(_,pd,!1),this._texturedPoleSouthVertexBuffer=f.createVertexBuffer(y,pd,!1)}getGridBuffers(f,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[f].withSkirts:this._gridSegments[f].withoutSkirts]}getPoleBuffers(f,a){return[a?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,a?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[f]]}},i.dn=Wb,i.dp=Nr,i.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.dr=on,i.ds=Ut,i.dt=ae,i.du=function([f,a,d]){const A=Math.hypot(f,a,d),_=Math.atan2(f,d),y=.5*Math.PI-Math.acos(-a/A);return new Ee(Kt(_),Kt(y))},i.dv=gB,i.dw=xe,i.dx=function(f){const a=f.navigator?f.navigator.userAgent:null;return!!function(d){if(Ii==null){const A=d.navigator?d.navigator.userAgent:null;Ii=!!d.safari||!(!A||!(/\b(iPad|iPhone|iPod)\b/.test(A)||A.match("Safari")&&!A.match("Chrome")))}return Ii}(f)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},i.dy=function(f,a){Wn=f,Pi=a},i.dz=PS,i.e=Lt,i.e0=function(f){let a=0;if(new Uint32Array(f,0,1)[0]!==KM){const d=new Uint32Array(f,0,7),[,,A,_,y,b]=d;a=d.byteLength+_+y+b+y,(A!==f.byteLength||a>=f.byteLength)&&jn("Invalid b3dm header information.")}return JM(f,a)},i.e1=function(f,a){const d=tk(f);for(const A of d){for(const _ of A.meshes)wJ(_);A.lights&&(A.lightMeshIndex=A.meshes.length,A.meshes.push(CJ(A.lights,a)))}return d},i.e2=xw,i.e3=LM,i.e4=zi,i.e5=function(f){no(),Kn!=null&&Kn.then(a=>{a.keys().then(d=>{for(let A=0;A<d.length-f;A++)a.delete(d[A])})})},i.f=function(f){return f.indexOf("mapbox:")===0},i.g=function(f,a){return nc(ln(f,{method:"GET"}),a)},i.h=Ct,i.i=function(f){return Lt.API_STYLE_REGEX.test(f)&&!kt(f)},i.j=function(f){return decodeURIComponent(atob(f).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""))},i.k=function(f){return btoa(encodeURIComponent(f).replace(/%([0-9A-F]{2})/g,(a,d)=>String.fromCharCode(+("0x"+d))))},i.l=ln,i.m=rs,i.n=function(f,a){return nc(ln(f,{type:"json"}),a)},i.o=xs,i.p=function(f,a){return nc(ln(f,{method:"POST"}),a)},i.q=sn,i.r=du,i.s=function(f){try{const a=self[f];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=_r,i.u=function(){return function f(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,f)}()},i.v=function(f){return!!f&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(f)},i.w=jn,i.x=er,i.y=2,i.z=jj}),c(["./shared"],function(i){function m(ur){const We=ur?ur.url.toString():void 0;return We?performance.getEntriesByName(We):[]}function g(ur){if(typeof ur=="number"||typeof ur=="boolean"||typeof ur=="string"||ur==null)return JSON.stringify(ur);if(Array.isArray(ur)){let qe="[";for(const pt of ur)qe+=`${g(pt)},`;return`${qe}]`}let We="{";for(const qe of Object.keys(ur).sort())We+=`${qe}:${g(ur[qe])},`;return`${We}}`}function C(ur){let We="";for(const qe of i.bg)We+=`/${g(ur[qe])}`;return We}class B{constructor(We){this.keyCache={},this._layers={},this._layerConfigs={},We&&this.replace(We)}replace(We,qe){this._layerConfigs={},this._layers={},this.update(We,[],qe)}update(We,qe,pt){this._options=pt;for(const Ct of We)this._layerConfigs[Ct.id]=Ct,(this._layers[Ct.id]=i.cq(Ct,this.scope,null,this._options)).compileFilter(pt),this.keyCache[Ct.id]&&delete this.keyCache[Ct.id];for(const Ct of qe)delete this.keyCache[Ct],delete this._layerConfigs[Ct],delete this._layers[Ct];this.familiesBySource={};const Lt=function(Ct,kt){const Wt={};for(let fr=0;fr<Ct.length;fr++){const xr=kt&&kt[Ct[fr].id]||C(Ct[fr]);kt&&(kt[Ct[fr].id]=xr);let pr=Wt[xr];pr||(pr=Wt[xr]=[]),pr.push(Ct[fr])}const Rt=[];for(const fr in Wt)Rt.push(Wt[fr]);return Rt}(i.bd(this._layerConfigs),this.keyCache);for(const Ct of Lt){const kt=Ct.map(Lr=>this._layers[Lr.id]),Wt=kt[0];if(Wt.visibility==="none")continue;const Rt=Wt.source||"";let fr=this.familiesBySource[Rt];fr||(fr=this.familiesBySource[Rt]={});const xr=Wt.sourceLayer||"_geojsonTileLayer";let pr=fr[xr];pr||(pr=fr[xr]=[]),pr.push(kt)}}}const S=1*i.dP;class P{constructor(We){const qe={},pt=[];for(const Wt in We){const Rt=We[Wt],fr=qe[Wt]={};for(const xr in Rt.glyphs){const pr=Rt.glyphs[+xr];if(!pr||pr.bitmap.width===0||pr.bitmap.height===0)continue;const Lr=pr.metrics.localGlyph?S:1,rn={x:0,y:0,w:pr.bitmap.width+2*Lr,h:pr.bitmap.height+2*Lr};pt.push(rn),fr[xr]=rn}}const{w:Lt,h:Ct}=i.z(pt),kt=new i.dO({width:Lt||1,height:Ct||1});for(const Wt in We){const Rt=We[Wt];for(const fr in Rt.glyphs){const xr=Rt.glyphs[+fr];if(!xr||xr.bitmap.width===0||xr.bitmap.height===0)continue;const pr=qe[Wt][fr],Lr=xr.metrics.localGlyph?S:1;i.dO.copy(xr.bitmap,kt,{x:0,y:0},{x:pr.x+Lr,y:pr.y+Lr},xr.bitmap)}}this.image=kt,this.positions=qe}}i.dN(P,"GlyphAtlas");class j{constructor(We){this.tileID=new i.aA(We.tileID.overscaledZ,We.tileID.wrap,We.tileID.canonical.z,We.tileID.canonical.x,We.tileID.canonical.y),this.tileZoom=We.tileZoom,this.uid=We.uid,this.zoom=We.zoom,this.lut=We.lut,this.canonical=We.tileID.canonical,this.pixelRatio=We.pixelRatio,this.tileSize=We.tileSize,this.source=We.source,this.scope=We.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=We.showCollisionBoxes,this.collectResourceTiming=!!We.collectResourceTiming,this.promoteId=We.promoteId,this.isSymbolTile=We.isSymbolTile,this.tileTransform=i.aK(We.tileID.canonical,We.projection),this.projection=We.projection,this.brightness=We.brightness,this.extraShadowCaster=!!We.extraShadowCaster,this.tessellationStep=We.tessellationStep}parse(We,qe,pt,Lt,Ct){this.status="parsing",this.data=We,this.collisionBoxArray=new i.aQ;const kt=new i.dQ(Object.keys(We.layers).sort()),Wt=new i.dR(this.tileID,this.promoteId);Wt.bucketLayerIDs=[];const Rt={},fr=new i.dS(256,256),xr={featureIndex:Wt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:fr,availableImages:pt,brightness:this.brightness},pr=qe.familiesBySource[this.source];for(const Wn in pr){const Pi=We.layers[Wn];if(!Pi)continue;let $i=!1,Kn=!1,Yi=!1;for(const Fs of pr[Wn])Fs[0].type==="symbol"?$i=!0:Kn=!0,Fs[0].is3D()&&Fs[0].type!=="model"&&(Yi=!0);if(this.extraShadowCaster&&!Yi||this.isSymbolTile===!0&&!$i||this.isSymbolTile===!1&&!Kn)continue;Pi.version===1&&i.w(`Vector tile source "${this.source}" layer "${Wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ss=kt.encode(Wn),no=[];for(let Fs=0;Fs<Pi.length;Fs++){const rs=Pi.feature(Fs),Sa=Wt.getId(rs,Wn);no.push({feature:rs,id:Sa,index:Fs,sourceLayerIndex:Ss})}for(const Fs of pr[Wn]){const rs=Fs[0];(!this.extraShadowCaster||rs.is3D()&&rs.type!=="model")&&(this.isSymbolTile!==void 0&&rs.type==="symbol"!==this.isSymbolTile||rs.minzoom&&this.zoom<Math.floor(rs.minzoom)||rs.maxzoom&&this.zoom>=rs.maxzoom||rs.visibility!=="none"&&(D(Fs,this.zoom,xr.brightness,pt),(Rt[rs.id]=rs.createBucket({index:Wt.bucketLayerIDs.length,layers:Fs,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ss,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(no,xr,this.tileID.canonical,this.tileTransform),Wt.bucketLayerIDs.push(Fs.map(Sa=>Sa.id))))}}let Lr,rn,sn,_n;fr.trim();const Un={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},qn=()=>{if(Lr)return this.status="done",Ct(Lr);if(this.extraShadowCaster)this.status="done",Ct(null,{buckets:i.bd(Rt).filter(Wn=>!Wn.isEmpty()),featureIndex:Wt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:xr.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(rn&&sn&&_n){const Wn=new P(rn),Pi=new i.dU(sn,_n,this.lut);for(const $i in Rt){const Kn=Rt[$i];Kn instanceof i.aR?(D(Kn.layers,this.zoom,xr.brightness,pt),i.dV(Kn,rn,Wn.positions,sn,Pi.iconPositions,this.showCollisionBoxes,pt,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Kn.hasPattern&&(Kn instanceof i.aX||Kn instanceof i.aY||Kn instanceof i.d0)&&(D(Kn.layers,this.zoom,xr.brightness,pt),Kn.addFeatures(xr,this.tileID.canonical,Pi.patternPositions,pt,this.tileTransform,this.brightness))}this.status="done",Ct(null,{buckets:i.bd(Rt).filter($i=>!$i.isEmpty()),featureIndex:Wt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wn.image,lineAtlas:fr,imageAtlas:Pi,brightness:xr.brightness})}};if(!this.extraShadowCaster){const Wn=i.dT(xr.glyphDependencies,Kn=>Object.keys(Kn).map(Number));Object.keys(Wn).length?Lt.send("getGlyphs",{uid:this.uid,stacks:Wn,scope:this.scope},(Kn,Yi)=>{Lr||(Lr=Kn,rn=Yi,qn())},void 0,!1,Un):rn={};const Pi=Object.keys(xr.iconDependencies);Pi.length?Lt.send("getImages",{icons:Pi,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Kn,Yi)=>{Lr||(Lr=Kn,sn=Yi,qn())},void 0,!1,Un):sn={};const $i=Object.keys(xr.patternDependencies);$i.length?Lt.send("getImages",{icons:$i,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Kn,Yi)=>{Lr||(Lr=Kn,_n=Yi,qn())},void 0,!1,Un):_n={}}qn()}}function D(ur,We,qe,pt){const Lt=new i.a3(We,{brightness:qe});for(const Ct of ur)Ct.recalculate(Lt,pt)}class F extends i.E{constructor(We,qe,pt,Lt,Ct,kt){super(),this.actor=We,this.layerIndex=qe,this.availableImages=pt,this.loadVectorData=Ct||i.aw,this.loading={},this.loaded={},this.deduped=new i.au(We.scheduler),this.isSpriteLoaded=Lt,this.scheduler=We.scheduler,this.brightness=kt}loadTile(We,qe){const pt=We.uid,Lt=We&&We.request,Ct=Lt&&Lt.collectResourceTiming,kt=this.loading[pt]=new j(We);kt.abort=this.loadVectorData(We,(Wt,Rt)=>{const fr=!this.loading[pt];if(delete this.loading[pt],fr||Wt||!Rt)return kt.status="done",fr||(this.loaded[pt]=kt),qe(Wt);const xr=Rt.rawData,pr={};Rt.expires&&(pr.expires=Rt.expires),Rt.cacheControl&&(pr.cacheControl=Rt.cacheControl),kt.vectorTile=Rt.vectorTile||new i.dW.VectorTile(new i.bb(xr));const Lr=()=>{kt.parse(kt.vectorTile,this.layerIndex,this.availableImages,this.actor,(rn,sn)=>{if(rn||!sn)return qe(rn);const _n={};if(Ct){const Un=m(Lt);Un.length>0&&(_n.resourceTiming=JSON.parse(JSON.stringify(Un)))}qe(null,i.l({rawTileData:xr.slice(0)},sn,pr,_n))})};this.isSpriteLoaded?Lr():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Lr,{type:"parseTile",isSymbolTile:We.isSymbolTile,zoom:We.tileZoom}):Lr()}),this.loaded=this.loaded||{},this.loaded[pt]=kt})}reloadTile(We,qe){const pt=this.loaded,Lt=We.uid;if(pt&&pt[Lt]){const Ct=pt[Lt];Ct.showCollisionBoxes=We.showCollisionBoxes,Ct.projection=We.projection,Ct.brightness=We.brightness,Ct.tileTransform=i.aK(We.tileID.canonical,We.projection),Ct.extraShadowCaster=We.extraShadowCaster,Ct.lut=We.lut;const kt=(Wt,Rt)=>{const fr=Ct.reloadCallback;fr&&(delete Ct.reloadCallback,Ct.parse(Ct.vectorTile,this.layerIndex,this.availableImages,this.actor,fr)),qe(Wt,Rt)};Ct.status==="parsing"?Ct.reloadCallback=kt:Ct.status==="done"&&(Ct.vectorTile?Ct.parse(Ct.vectorTile,this.layerIndex,this.availableImages,this.actor,kt):kt())}else qe(null,void 0)}abortTile(We,qe){const pt=We.uid,Lt=this.loading[pt];Lt&&(Lt.abort&&Lt.abort(),delete this.loading[pt]),qe()}removeTile(We,qe){const pt=this.loaded,Lt=We.uid;pt&&pt[Lt]&&delete pt[Lt],qe()}}class R{loadTile(We,qe){const{uid:pt,encoding:Lt,rawImageData:Ct,padding:kt}=We,Wt=ImageBitmap&&Ct instanceof ImageBitmap?this.getImageData(Ct,kt):Ct;qe(null,new i.dX(pt,Wt,Lt,kt<1))}getImageData(We,qe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(We.width,We.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=We.width,this.offscreenCanvas.height=We.height,this.offscreenCanvasContext.drawImage(We,0,0,We.width,We.height);const pt=this.offscreenCanvasContext.getImageData(-qe,-qe,We.width+2*qe,We.height+2*qe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),pt}}i.ba.setPbf(i.bb);class V{decodeRasterArray({task:We,buffer:qe},pt){i.ba.performDecoding(qe,We).then(Lt=>{pt(null,Lt)},Lt=>{pt(Lt)})}}const Y=i.dW.VectorTileFeature.prototype.toGeoJSON;class te{constructor(We){this._feature=We,this.extent=i.ab,this.type=We.type,this.properties=We.tags,"id"in We&&!isNaN(We.id)&&(this.id=parseInt(We.id,10))}loadGeometry(){if(this._feature.type===1){const We=[];for(const qe of this._feature.geometry)We.push([new i.P(qe[0],qe[1])]);return We}{const We=[];for(const qe of this._feature.geometry){const pt=[];for(const Lt of qe)pt.push(new i.P(Lt[0],Lt[1]));We.push(pt)}return We}}toGeoJSON(We,qe,pt){return Y.call(this,We,qe,pt)}}class se{constructor(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.ab,this.length=We.length,this._features=We}feature(We){return new te(this._features[We])}}const oe=64/4096,K=128;class de{constructor(){this.features=new Map}clear(){this.features.clear()}load(We=[],qe){for(const pt of We){const Lt=pt.id;if(Lt==null)continue;let Ct=this.features.get(Lt);Ct&&this.updateCache(Ct,qe),pt.geometry?(Ct=J(pt),this.updateCache(Ct,qe),this.features.set(Lt,Ct)):this.features.delete(Lt),this.updateCache(Ct,qe)}}updateCache(We,qe){for(const{canonical:pt,uid:Lt}of Object.values(qe)){const{z:Ct,x:kt,y:Wt}=pt;we(We,Math.pow(2,Ct),kt,Wt)&&delete qe[Lt]}}getTile(We,qe,pt){const Lt=Math.pow(2,We),Ct=[];for(const kt of this.features.values())we(kt,Lt,qe,pt)&&Ct.push(He(kt,Lt,qe,pt));return{features:Ct}}getFeatures(){return[...this.features.values()]}}function we({minX:ur,minY:We,maxX:qe,maxY:pt},Lt,Ct,kt){return ur<(Ct+1+oe)/Lt&&We<(kt+1+oe)/Lt&&qe>(Ct-oe)/Lt&&pt>(kt-oe)/Lt}function J(ur){const{id:We,geometry:qe,properties:pt}=ur;if(!qe)return;if(qe.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Lt,coordinates:Ct}=qe,kt={id:We,type:1,geometry:[],tags:pt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Wt=kt.geometry;if(Lt==="Point")Z(Ct,Wt,kt);else if(Lt==="MultiPoint")for(const Rt of Ct)Z(Rt,Wt,kt);else if(Lt==="LineString")kt.type=2,Ie(Ct,Wt,kt);else if(Lt==="MultiLineString")kt.type=2,be(Ct,Wt,kt);else if(Lt==="Polygon")kt.type=3,be(Ct,Wt,kt,!0);else{if(Lt!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");kt.type=3;for(const Rt of Ct)be(Rt,Wt,kt,!0)}return kt}function Z([ur,We],qe,pt){const Lt=i.am(ur);let Ct=i.at(We);Ct=Ct<0?0:Ct>1?1:Ct,qe.push(Lt,Ct),pt.minX=Math.min(pt.minX,Lt),pt.minY=Math.min(pt.minY,Ct),pt.maxX=Math.max(pt.maxX,Lt),pt.maxY=Math.max(pt.maxY,Ct)}function Ie(ur,We,qe,pt=!1,Lt=!1){const Ct=[];for(const kt of ur)Z(kt,Ct,qe);We.push(Ct),pt&&function(kt,Wt){let Rt=0;for(let fr=0,xr=kt.length,pr=xr-2;fr<xr;pr=fr,fr+=2)Rt+=(kt[fr]-kt[pr])*(kt[fr+1]+kt[pr+1]);if(Rt>0===Wt)for(let fr=0,xr=kt.length;fr<xr/2;fr+=2){const pr=kt[fr],Lr=kt[fr+1];kt[fr]=kt[xr-2-fr],kt[fr+1]=kt[xr-1-fr],kt[xr-2-fr]=pr,kt[xr-1-fr]=Lr}}(Ct,Lt)}function be(ur,We,qe,pt=!1){for(let Lt=0;Lt<ur.length;Lt++)Ie(ur[Lt],We,qe,pt,Lt===0)}function He(ur,We,qe,pt){const{id:Lt,type:Ct,geometry:kt,tags:Wt}=ur,Rt=[];if(Ct===1)(function(fr,xr,pr,Lr,rn){for(let sn=0;sn<fr.length;sn+=2){const _n=Math.round(i.ab*(fr[sn+0]*xr-pr)),Un=Math.round(i.ab*(fr[sn+1]*xr-Lr));rn.push([_n,Un])}})(kt,We,qe,pt,Rt);else for(const fr of kt)Fe(fr,We,qe,pt,Rt);return{id:Lt,type:Ct,geometry:Rt,tags:Wt}}function Fe(ur,We,qe,pt,Lt){const Ct=-K,kt=i.ab+K;let Wt;for(let Rt=0;Rt<ur.length-2;Rt+=2){let fr=Math.round(i.ab*(ur[Rt+0]*We-qe)),xr=Math.round(i.ab*(ur[Rt+1]*We-pt)),pr=Math.round(i.ab*(ur[Rt+2]*We-qe)),Lr=Math.round(i.ab*(ur[Rt+3]*We-pt));const rn=pr-fr,sn=Lr-xr;fr<Ct&&pr<Ct||(fr<Ct?(xr+=Math.round(sn*((Ct-fr)/rn)),fr=Ct):pr<Ct&&(Lr=xr+Math.round(sn*((Ct-fr)/rn)),pr=Ct),xr<Ct&&Lr<Ct||(xr<Ct?(fr+=Math.round(rn*((Ct-xr)/sn)),xr=Ct):Lr<Ct&&(pr=fr+Math.round(rn*((Ct-xr)/sn)),Lr=Ct),fr>=kt&&pr>=kt||(fr>=kt?(xr+=Math.round(sn*((kt-fr)/rn)),fr=kt):pr>=kt&&(Lr=xr+Math.round(sn*((kt-fr)/rn)),pr=kt),xr>=kt&&Lr>=kt||(xr>=kt?(fr+=Math.round(rn*((kt-xr)/sn)),xr=kt):Lr>=kt&&(pr=fr+Math.round(rn*((kt-xr)/sn)),Lr=kt),Wt&&fr===Wt[Wt.length-1][0]&&xr===Wt[Wt.length-1][1]||(Wt=[[fr,xr]],Lt.push(Wt)),Wt.push([pr,Lr])))))}}var ve,_e,ze,Ne={exports:{}},st=function(){if(ze)return Ne.exports;ze=1;var ur=i.d_(),We=function(){if(_e)return ve;_e=1;var xr=i.dY(),pr=i.dZ().VectorTileFeature;function Lr(sn,_n){this.options=_n||{},this.features=sn,this.length=sn.length}function rn(sn,_n){this.id=typeof sn.id=="number"?sn.id:void 0,this.type=sn.type,this.rawGeometry=sn.type===1?[sn.geometry]:sn.geometry,this.properties=sn.tags,this.extent=_n||4096}return ve=Lr,Lr.prototype.feature=function(sn){return new rn(this.features[sn],this.options.extent)},rn.prototype.loadGeometry=function(){var sn=this.rawGeometry;this.geometry=[];for(var _n=0;_n<sn.length;_n++){for(var Un=sn[_n],qn=[],Wn=0;Wn<Un.length;Wn++)qn.push(new xr(Un[Wn][0],Un[Wn][1]));this.geometry.push(qn)}return this.geometry},rn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var sn=this.geometry,_n=1/0,Un=-1/0,qn=1/0,Wn=-1/0,Pi=0;Pi<sn.length;Pi++)for(var $i=sn[Pi],Kn=0;Kn<$i.length;Kn++){var Yi=$i[Kn];_n=Math.min(_n,Yi.x),Un=Math.max(Un,Yi.x),qn=Math.min(qn,Yi.y),Wn=Math.max(Wn,Yi.y)}return[_n,qn,Un,Wn]},rn.prototype.toGeoJSON=pr.prototype.toGeoJSON,ve}();function qe(xr){var pr=new ur;return function(Lr,rn){for(var sn in Lr.layers)rn.writeMessage(3,pt,Lr.layers[sn])}(xr,pr),pr.finish()}function pt(xr,pr){var Lr;pr.writeVarintField(15,xr.version||1),pr.writeStringField(1,xr.name||""),pr.writeVarintField(5,xr.extent||4096);var rn={keys:[],values:[],keycache:{},valuecache:{}};for(Lr=0;Lr<xr.length;Lr++)rn.feature=xr.feature(Lr),pr.writeMessage(2,Lt,rn);var sn=rn.keys;for(Lr=0;Lr<sn.length;Lr++)pr.writeStringField(3,sn[Lr]);var _n=rn.values;for(Lr=0;Lr<_n.length;Lr++)pr.writeMessage(4,fr,_n[Lr])}function Lt(xr,pr){var Lr=xr.feature;Lr.id!==void 0&&pr.writeVarintField(1,Lr.id),pr.writeMessage(2,Ct,xr),pr.writeVarintField(3,Lr.type),pr.writeMessage(4,Rt,Lr)}function Ct(xr,pr){var Lr=xr.feature,rn=xr.keys,sn=xr.values,_n=xr.keycache,Un=xr.valuecache;for(var qn in Lr.properties){var Wn=Lr.properties[qn],Pi=_n[qn];if(Wn!==null){Pi===void 0&&(rn.push(qn),_n[qn]=Pi=rn.length-1),pr.writeVarint(Pi);var $i=typeof Wn;$i!=="string"&&$i!=="boolean"&&$i!=="number"&&(Wn=JSON.stringify(Wn));var Kn=$i+":"+Wn,Yi=Un[Kn];Yi===void 0&&(sn.push(Wn),Un[Kn]=Yi=sn.length-1),pr.writeVarint(Yi)}}}function kt(xr,pr){return(pr<<3)+(7&xr)}function Wt(xr){return xr<<1^xr>>31}function Rt(xr,pr){for(var Lr=xr.loadGeometry(),rn=xr.type,sn=0,_n=0,Un=Lr.length,qn=0;qn<Un;qn++){var Wn=Lr[qn],Pi=1;rn===1&&(Pi=Wn.length),pr.writeVarint(kt(1,Pi));for(var $i=rn===3?Wn.length-1:Wn.length,Kn=0;Kn<$i;Kn++){Kn===1&&rn!==1&&pr.writeVarint(kt(2,$i-1));var Yi=Wn[Kn].x-sn,Ss=Wn[Kn].y-_n;pr.writeVarint(Wt(Yi)),pr.writeVarint(Wt(Ss)),sn+=Yi,_n+=Ss}rn===3&&pr.writeVarint(kt(7,1))}}function fr(xr,pr){var Lr=typeof xr;Lr==="string"?pr.writeStringField(1,xr):Lr==="boolean"?pr.writeBooleanField(7,xr):Lr==="number"&&(xr%1!=0?pr.writeDoubleField(3,xr):xr<0?pr.writeSVarintField(6,xr):pr.writeVarintField(5,xr))}return Ne.exports=qe,Ne.exports.fromVectorTileJs=qe,Ne.exports.fromGeojsonVt=function(xr,pr){pr=pr||{};var Lr={};for(var rn in xr)Lr[rn]=new We(xr[rn].features,pr),Lr[rn].name=rn,Lr[rn].version=pr.version,Lr[rn].extent=pr.extent;return qe({layers:Lr})},Ne.exports.GeoJSONWrapper=We,Ne.exports}(),ie=i.d$(st);const le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ur=>ur},pe=Math.fround||(fe=new Float32Array(1),ur=>(fe[0]=+ur,fe[0]));var fe;const Qe=3,Ke=5,et=6;class tt{constructor(We){this.options=Object.assign(Object.create(le),We),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(We){const{log:qe,minZoom:pt,maxZoom:Lt}=this.options;qe&&console.time("total time");const Ct=`prepare ${We.length} points`;qe&&console.time(Ct),this.points=We;const kt=[];for(let Rt=0;Rt<We.length;Rt++){const fr=We[Rt];if(!fr.geometry)continue;const[xr,pr]=fr.geometry.coordinates,Lr=pe(Mt(xr)),rn=pe(ir(pr));kt.push(Lr,rn,1/0,Rt,-1,1),this.options.reduce&&kt.push(0)}let Wt=this.trees[Lt+1]=this._createTree(kt);qe&&console.timeEnd(Ct);for(let Rt=Lt;Rt>=pt;Rt--){const fr=+Date.now();Wt=this.trees[Rt]=this._createTree(this._cluster(Wt,Rt)),qe&&console.log("z%d: %d clusters in %dms",Rt,Wt.numItems,+Date.now()-fr)}return qe&&console.timeEnd("total time"),this}getClusters(We,qe){let pt=((We[0]+180)%360+360)%360-180;const Lt=Math.max(-90,Math.min(90,We[1]));let Ct=We[2]===180?180:((We[2]+180)%360+360)%360-180;const kt=Math.max(-90,Math.min(90,We[3]));if(We[2]-We[0]>=360)pt=-180,Ct=180;else if(pt>Ct){const pr=this.getClusters([pt,Lt,180,kt],qe),Lr=this.getClusters([-180,Lt,Ct,kt],qe);return pr.concat(Lr)}const Wt=this.trees[this._limitZoom(qe)],Rt=Wt.range(Mt(pt),ir(kt),Mt(Ct),ir(Lt)),fr=Wt.data,xr=[];for(const pr of Rt){const Lr=this.stride*pr;xr.push(fr[Lr+Ke]>1?bt(fr,Lr,this.clusterProps):this.points[fr[Lr+Qe]])}return xr}getChildren(We){const qe=this._getOriginId(We),pt=this._getOriginZoom(We),Lt="No cluster with the specified id.",Ct=this.trees[pt];if(!Ct)throw new Error(Lt);const kt=Ct.data;if(qe*this.stride>=kt.length)throw new Error(Lt);const Wt=this.options.radius/(this.options.extent*Math.pow(2,pt-1)),Rt=Ct.within(kt[qe*this.stride],kt[qe*this.stride+1],Wt),fr=[];for(const xr of Rt){const pr=xr*this.stride;kt[pr+4]===We&&fr.push(kt[pr+Ke]>1?bt(kt,pr,this.clusterProps):this.points[kt[pr+Qe]])}if(fr.length===0)throw new Error(Lt);return fr}getLeaves(We,qe,pt){const Lt=[];return this._appendLeaves(Lt,We,qe=qe||10,pt=pt||0,0),Lt}getTile(We,qe,pt){const Lt=this.trees[this._limitZoom(We)],Ct=Math.pow(2,We),{extent:kt,radius:Wt}=this.options,Rt=Wt/kt,fr=(pt-Rt)/Ct,xr=(pt+1+Rt)/Ct,pr={features:[]};return this._addTileFeatures(Lt.range((qe-Rt)/Ct,fr,(qe+1+Rt)/Ct,xr),Lt.data,qe,pt,Ct,pr),qe===0&&this._addTileFeatures(Lt.range(1-Rt/Ct,fr,1,xr),Lt.data,Ct,pt,Ct,pr),qe===Ct-1&&this._addTileFeatures(Lt.range(0,fr,Rt/Ct,xr),Lt.data,-1,pt,Ct,pr),pr.features.length?pr:null}getClusterExpansionZoom(We){let qe=this._getOriginZoom(We)-1;for(;qe<=this.options.maxZoom;){const pt=this.getChildren(We);if(qe++,pt.length!==1)break;We=pt[0].properties.cluster_id}return qe}_appendLeaves(We,qe,pt,Lt,Ct){const kt=this.getChildren(qe);for(const Wt of kt){const Rt=Wt.properties;if(Rt&&Rt.cluster?Ct+Rt.point_count<=Lt?Ct+=Rt.point_count:Ct=this._appendLeaves(We,Rt.cluster_id,pt,Lt,Ct):Ct<Lt?Ct++:We.push(Wt),We.length===pt)break}return Ct}_createTree(We){const qe=new i.by(We.length/this.stride|0,this.options.nodeSize,Float32Array);for(let pt=0;pt<We.length;pt+=this.stride)qe.add(We[pt],We[pt+1]);return qe.finish(),qe.data=We,qe}_addTileFeatures(We,qe,pt,Lt,Ct,kt){for(const Wt of We){const Rt=Wt*this.stride,fr=qe[Rt+Ke]>1;let xr,pr,Lr;if(fr)xr=De(qe,Rt,this.clusterProps),pr=qe[Rt],Lr=qe[Rt+1];else{const _n=this.points[qe[Rt+Qe]];xr=_n.properties;const[Un,qn]=_n.geometry.coordinates;pr=Mt(Un),Lr=ir(qn)}const rn={type:1,geometry:[[Math.round(this.options.extent*(pr*Ct-pt)),Math.round(this.options.extent*(Lr*Ct-Lt))]],tags:xr};let sn;sn=fr||this.options.generateId?qe[Rt+Qe]:this.points[qe[Rt+Qe]].id,sn!==void 0&&(rn.id=sn),kt.features.push(rn)}}_limitZoom(We){return Math.max(this.options.minZoom,Math.min(Math.floor(+We),this.options.maxZoom+1))}_cluster(We,qe){const{radius:pt,extent:Lt,reduce:Ct,minPoints:kt}=this.options,Wt=pt/(Lt*Math.pow(2,qe)),Rt=We.data,fr=[],xr=this.stride;for(let pr=0;pr<Rt.length;pr+=xr){if(Rt[pr+2]<=qe)continue;Rt[pr+2]=qe;const Lr=Rt[pr],rn=Rt[pr+1],sn=We.within(Rt[pr],Rt[pr+1],Wt),_n=Rt[pr+Ke];let Un=_n;for(const qn of sn){const Wn=qn*xr;Rt[Wn+2]>qe&&(Un+=Rt[Wn+Ke])}if(Un>_n&&Un>=kt){let qn,Wn=Lr*_n,Pi=rn*_n,$i=-1;const Kn=(pr/xr<<5)+(qe+1)+this.points.length;for(const Yi of sn){const Ss=Yi*xr;if(Rt[Ss+2]<=qe)continue;Rt[Ss+2]=qe;const no=Rt[Ss+Ke];Wn+=Rt[Ss]*no,Pi+=Rt[Ss+1]*no,Rt[Ss+4]=Kn,Ct&&(qn||(qn=this._map(Rt,pr,!0),$i=this.clusterProps.length,this.clusterProps.push(qn)),Ct(qn,this._map(Rt,Ss)))}Rt[pr+4]=Kn,fr.push(Wn/Un,Pi/Un,1/0,Kn,-1,Un),Ct&&fr.push($i)}else{for(let qn=0;qn<xr;qn++)fr.push(Rt[pr+qn]);if(Un>1)for(const qn of sn){const Wn=qn*xr;if(!(Rt[Wn+2]<=qe)){Rt[Wn+2]=qe;for(let Pi=0;Pi<xr;Pi++)fr.push(Rt[Wn+Pi])}}}}return fr}_getOriginId(We){return We-this.points.length>>5}_getOriginZoom(We){return(We-this.points.length)%32}_map(We,qe,pt){if(We[qe+Ke]>1){const kt=this.clusterProps[We[qe+et]];return pt?Object.assign({},kt):kt}const Lt=this.points[We[qe+Qe]].properties,Ct=this.options.map(Lt);return pt&&Ct===Lt?Object.assign({},Ct):Ct}}function bt(ur,We,qe){return{type:"Feature",id:ur[We+Qe],properties:De(ur,We,qe),geometry:{type:"Point",coordinates:[(pt=ur[We],360*(pt-.5)),Ar(ur[We+1])]}};var pt}function De(ur,We,qe){const pt=ur[We+Ke],Lt=pt>=1e4?`${Math.round(pt/1e3)}k`:pt>=1e3?Math.round(pt/100)/10+"k":pt,Ct=ur[We+et],kt=Ct===-1?{}:Object.assign({},qe[Ct]);return Object.assign(kt,{cluster:!0,cluster_id:ur[We+Qe],point_count:pt,point_count_abbreviated:Lt})}function Mt(ur){return ur/360+.5}function ir(ur){const We=Math.sin(ur*Math.PI/180),qe=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return qe<0?0:qe>1?1:qe}function Ar(ur){const We=(180-360*ur)*Math.PI/180;return 360*Math.atan(Math.exp(We))/Math.PI-90}function Ze(ur,We,qe,pt){let Lt=pt;const Ct=We+(qe-We>>1);let kt,Wt=qe-We;const Rt=ur[We],fr=ur[We+1],xr=ur[qe],pr=ur[qe+1];for(let Lr=We+3;Lr<qe;Lr+=3){const rn=Ue(ur[Lr],ur[Lr+1],Rt,fr,xr,pr);if(rn>Lt)kt=Lr,Lt=rn;else if(rn===Lt){const sn=Math.abs(Lr-Ct);sn<Wt&&(kt=Lr,Wt=sn)}}Lt>pt&&(kt-We>3&&Ze(ur,We,kt,pt),ur[kt+2]=Lt,qe-kt>3&&Ze(ur,kt,qe,pt))}function Ue(ur,We,qe,pt,Lt,Ct){let kt=Lt-qe,Wt=Ct-pt;if(kt!==0||Wt!==0){const Rt=((ur-qe)*kt+(We-pt)*Wt)/(kt*kt+Wt*Wt);Rt>1?(qe=Lt,pt=Ct):Rt>0&&(qe+=kt*Rt,pt+=Wt*Rt)}return kt=ur-qe,Wt=We-pt,kt*kt+Wt*Wt}function hr(ur,We,qe,pt){const Lt={id:ur??null,type:We,geometry:qe,tags:pt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(We==="Point"||We==="MultiPoint"||We==="LineString")Dt(Lt,qe);else if(We==="Polygon")Dt(Lt,qe[0]);else if(We==="MultiLineString")for(const Ct of qe)Dt(Lt,Ct);else if(We==="MultiPolygon")for(const Ct of qe)Dt(Lt,Ct[0]);return Lt}function Dt(ur,We){for(let qe=0;qe<We.length;qe+=3)ur.minX=Math.min(ur.minX,We[qe]),ur.minY=Math.min(ur.minY,We[qe+1]),ur.maxX=Math.max(ur.maxX,We[qe]),ur.maxY=Math.max(ur.maxY,We[qe+1])}function vt(ur,We,qe,pt){if(!We.geometry)return;const Lt=We.geometry.coordinates;if(Lt&&Lt.length===0)return;const Ct=We.geometry.type,kt=Math.pow(qe.tolerance/((1<<qe.maxZoom)*qe.extent),2);let Wt=[],Rt=We.id;if(qe.promoteId?Rt=We.properties[qe.promoteId]:qe.generateId&&(Rt=pt||0),Ct==="Point")Kt(Lt,Wt);else if(Ct==="MultiPoint")for(const fr of Lt)Kt(fr,Wt);else if(Ct==="LineString")rr(Lt,Wt,kt,!1);else if(Ct==="MultiLineString"){if(qe.lineMetrics){for(const fr of Lt)Wt=[],rr(fr,Wt,kt,!1),ur.push(hr(Rt,"LineString",Wt,We.properties));return}nr(Lt,Wt,kt,!1)}else if(Ct==="Polygon")nr(Lt,Wt,kt,!0);else{if(Ct!=="MultiPolygon"){if(Ct==="GeometryCollection"){for(const fr of We.geometry.geometries)vt(ur,{id:Rt,geometry:fr,properties:We.properties},qe,pt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const fr of Lt){const xr=[];nr(fr,xr,kt,!0),Wt.push(xr)}}ur.push(hr(Rt,Ct,Wt,We.properties))}function Kt(ur,We){We.push(Nr(ur[0]),on(ur[1]),0)}function rr(ur,We,qe,pt){let Lt,Ct,kt=0;for(let Rt=0;Rt<ur.length;Rt++){const fr=Nr(ur[Rt][0]),xr=on(ur[Rt][1]);We.push(fr,xr,0),Rt>0&&(kt+=pt?(Lt*xr-fr*Ct)/2:Math.sqrt(Math.pow(fr-Lt,2)+Math.pow(xr-Ct,2))),Lt=fr,Ct=xr}const Wt=We.length-3;We[2]=1,Ze(We,0,Wt,qe),We[Wt+2]=1,We.size=Math.abs(kt),We.start=0,We.end=We.size}function nr(ur,We,qe,pt){for(let Lt=0;Lt<ur.length;Lt++){const Ct=[];rr(ur[Lt],Ct,qe,pt),We.push(Ct)}}function Nr(ur){return ur/360+.5}function on(ur){const We=Math.sin(ur*Math.PI/180),qe=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return qe<0?0:qe>1?1:qe}function Ir(ur,We,qe,pt,Lt,Ct,kt,Wt){if(pt/=We,Ct>=(qe/=We)&&kt<pt)return ur;if(kt<qe||Ct>=pt)return null;const Rt=[];for(const fr of ur){const xr=fr.geometry;let pr=fr.type;const Lr=Lt===0?fr.minX:fr.minY,rn=Lt===0?fr.maxX:fr.maxY;if(Lr>=qe&&rn<pt){Rt.push(fr);continue}if(rn<qe||Lr>=pt)continue;let sn=[];if(pr==="Point"||pr==="MultiPoint")cn(xr,sn,qe,pt,Lt);else if(pr==="LineString")Sn(xr,sn,qe,pt,Lt,!1,Wt.lineMetrics);else if(pr==="MultiLineString")ln(xr,sn,qe,pt,Lt,!1);else if(pr==="Polygon")ln(xr,sn,qe,pt,Lt,!0);else if(pr==="MultiPolygon")for(const _n of xr){const Un=[];ln(_n,Un,qe,pt,Lt,!0),Un.length&&sn.push(Un)}if(sn.length){if(Wt.lineMetrics&&pr==="LineString"){for(const _n of sn)Rt.push(hr(fr.id,pr,_n,fr.tags));continue}pr!=="LineString"&&pr!=="MultiLineString"||(sn.length===1?(pr="LineString",sn=sn[0]):pr="MultiLineString"),pr!=="Point"&&pr!=="MultiPoint"||(pr=sn.length===3?"Point":"MultiPoint"),Rt.push(hr(fr.id,pr,sn,fr.tags))}}return Rt.length?Rt:null}function cn(ur,We,qe,pt,Lt){for(let Ct=0;Ct<ur.length;Ct+=3){const kt=ur[Ct+Lt];kt>=qe&&kt<=pt&&ar(We,ur[Ct],ur[Ct+1],ur[Ct+2])}}function Sn(ur,We,qe,pt,Lt,Ct,kt){let Wt=Ln(ur);const Rt=Lt===0?Yt:Gr;let fr,xr,pr=ur.start;for(let Un=0;Un<ur.length-3;Un+=3){const qn=ur[Un],Wn=ur[Un+1],Pi=ur[Un+2],$i=ur[Un+3],Kn=ur[Un+4],Yi=Lt===0?qn:Wn,Ss=Lt===0?$i:Kn;let no=!1;kt&&(fr=Math.sqrt(Math.pow(qn-$i,2)+Math.pow(Wn-Kn,2))),Yi<qe?Ss>qe&&(xr=Rt(Wt,qn,Wn,$i,Kn,qe),kt&&(Wt.start=pr+fr*xr)):Yi>pt?Ss<pt&&(xr=Rt(Wt,qn,Wn,$i,Kn,pt),kt&&(Wt.start=pr+fr*xr)):ar(Wt,qn,Wn,Pi),Ss<qe&&Yi>=qe&&(xr=Rt(Wt,qn,Wn,$i,Kn,qe),no=!0),Ss>pt&&Yi<=pt&&(xr=Rt(Wt,qn,Wn,$i,Kn,pt),no=!0),!Ct&&no&&(kt&&(Wt.end=pr+fr*xr),We.push(Wt),Wt=Ln(ur)),kt&&(pr+=fr)}let Lr=ur.length-3;const rn=ur[Lr],sn=ur[Lr+1],_n=Lt===0?rn:sn;_n>=qe&&_n<=pt&&ar(Wt,rn,sn,ur[Lr+2]),Lr=Wt.length-3,Ct&&Lr>=3&&(Wt[Lr]!==Wt[0]||Wt[Lr+1]!==Wt[1])&&ar(Wt,Wt[0],Wt[1],Wt[2]),Wt.length&&We.push(Wt)}function Ln(ur){const We=[];return We.size=ur.size,We.start=ur.start,We.end=ur.end,We}function ln(ur,We,qe,pt,Lt,Ct){for(const kt of ur)Sn(kt,We,qe,pt,Lt,Ct,!1)}function ar(ur,We,qe,pt){ur.push(We,qe,pt)}function Yt(ur,We,qe,pt,Lt,Ct){const kt=(Ct-We)/(pt-We);return ar(ur,Ct,qe+(Lt-qe)*kt,1),kt}function Gr(ur,We,qe,pt,Lt,Ct){const kt=(Ct-qe)/(Lt-qe);return ar(ur,We+(pt-We)*kt,Ct,1),kt}function Wr(ur,We){const qe=[];for(let pt=0;pt<ur.length;pt++){const Lt=ur[pt],Ct=Lt.type;let kt;if(Ct==="Point"||Ct==="MultiPoint"||Ct==="LineString")kt=On(Lt.geometry,We);else if(Ct==="MultiLineString"||Ct==="Polygon"){kt=[];for(const Wt of Lt.geometry)kt.push(On(Wt,We))}else if(Ct==="MultiPolygon"){kt=[];for(const Wt of Lt.geometry){const Rt=[];for(const fr of Wt)Rt.push(On(fr,We));kt.push(Rt)}}qe.push(hr(Lt.id,Ct,kt,Lt.tags))}return qe}function On(ur,We){const qe=[];qe.size=ur.size,ur.start!==void 0&&(qe.start=ur.start,qe.end=ur.end);for(let pt=0;pt<ur.length;pt+=3)qe.push(ur[pt]+We,ur[pt+1],ur[pt+2]);return qe}function mn(ur,We){if(ur.transformed)return ur;const qe=1<<ur.z,pt=ur.x,Lt=ur.y;for(const Ct of ur.features){const kt=Ct.geometry,Wt=Ct.type;if(Ct.geometry=[],Wt===1)for(let Rt=0;Rt<kt.length;Rt+=2)Ct.geometry.push(Hn(kt[Rt],kt[Rt+1],We,qe,pt,Lt));else for(let Rt=0;Rt<kt.length;Rt++){const fr=[];for(let xr=0;xr<kt[Rt].length;xr+=2)fr.push(Hn(kt[Rt][xr],kt[Rt][xr+1],We,qe,pt,Lt));Ct.geometry.push(fr)}}return ur.transformed=!0,ur}function Hn(ur,We,qe,pt,Lt,Ct){return[Math.round(qe*(ur*pt-Lt)),Math.round(qe*(We*pt-Ct))]}function Vi(ur,We,qe,pt,Lt){const Ct=We===Lt.maxZoom?0:Lt.tolerance/((1<<We)*Lt.extent),kt={features:[],numPoints:0,numSimplified:0,numFeatures:ur.length,source:null,x:qe,y:pt,z:We,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Wt of ur)Bn(kt,Wt,Ct,Lt);return kt}function Bn(ur,We,qe,pt){const Lt=We.geometry,Ct=We.type,kt=[];if(ur.minX=Math.min(ur.minX,We.minX),ur.minY=Math.min(ur.minY,We.minY),ur.maxX=Math.max(ur.maxX,We.maxX),ur.maxY=Math.max(ur.maxY,We.maxY),Ct==="Point"||Ct==="MultiPoint")for(let Wt=0;Wt<Lt.length;Wt+=3)kt.push(Lt[Wt],Lt[Wt+1]),ur.numPoints++,ur.numSimplified++;else if(Ct==="LineString")jn(kt,Lt,ur,qe,!1,!1);else if(Ct==="MultiLineString"||Ct==="Polygon")for(let Wt=0;Wt<Lt.length;Wt++)jn(kt,Lt[Wt],ur,qe,Ct==="Polygon",Wt===0);else if(Ct==="MultiPolygon")for(let Wt=0;Wt<Lt.length;Wt++){const Rt=Lt[Wt];for(let fr=0;fr<Rt.length;fr++)jn(kt,Rt[fr],ur,qe,!0,fr===0)}if(kt.length){let Wt=We.tags||null;if(Ct==="LineString"&&pt.lineMetrics){Wt={};for(const fr in We.tags)Wt[fr]=We.tags[fr];Wt.mapbox_clip_start=Lt.start/Lt.size,Wt.mapbox_clip_end=Lt.end/Lt.size}const Rt={geometry:kt,type:Ct==="Polygon"||Ct==="MultiPolygon"?3:Ct==="LineString"||Ct==="MultiLineString"?2:1,tags:Wt};We.id!==null&&(Rt.id=We.id),ur.features.push(Rt)}}function jn(ur,We,qe,pt,Lt,Ct){const kt=pt*pt;if(pt>0&&We.size<(Lt?kt:pt))return void(qe.numPoints+=We.length/3);const Wt=[];for(let Rt=0;Rt<We.length;Rt+=3)(pt===0||We[Rt+2]>kt)&&(qe.numSimplified++,Wt.push(We[Rt],We[Rt+1])),qe.numPoints++;Lt&&function(Rt,fr){let xr=0;for(let pr=0,Lr=Rt.length,rn=Lr-2;pr<Lr;rn=pr,pr+=2)xr+=(Rt[pr]-Rt[rn])*(Rt[pr+1]+Rt[rn+1]);if(xr>0===fr)for(let pr=0,Lr=Rt.length;pr<Lr/2;pr+=2){const rn=Rt[pr],sn=Rt[pr+1];Rt[pr]=Rt[Lr-2-pr],Rt[pr+1]=Rt[Lr-1-pr],Rt[Lr-2-pr]=rn,Rt[Lr-1-pr]=sn}}(Wt,Ct),ur.push(Wt)}const Dn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Gi{constructor(We,qe){const pt=(qe=this.options=function(Ct,kt){for(const Wt in kt)Ct[Wt]=kt[Wt];return Ct}(Object.create(Dn),qe)).debug;if(pt&&console.time("preprocess data"),qe.maxZoom<0||qe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(qe.promoteId&&qe.generateId)throw new Error("promoteId and generateId cannot be used together.");let Lt=function(Ct,kt){const Wt=[];if(Ct.type==="FeatureCollection")for(let Rt=0;Rt<Ct.features.length;Rt++)vt(Wt,Ct.features[Rt],kt,Rt);else vt(Wt,Ct.type==="Feature"?Ct:{geometry:Ct},kt);return Wt}(We,qe);this.tiles={},this.tileCoords=[],pt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",qe.indexMaxZoom,qe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Lt=function(Ct,kt){const Wt=kt.buffer/kt.extent;let Rt=Ct;const fr=Ir(Ct,1,-1-Wt,Wt,0,-1,2,kt),xr=Ir(Ct,1,1-Wt,2+Wt,0,-1,2,kt);return(fr||xr)&&(Rt=Ir(Ct,1,-Wt,1+Wt,0,-1,2,kt)||[],fr&&(Rt=Wr(fr,1).concat(Rt)),xr&&(Rt=Rt.concat(Wr(xr,-1)))),Rt}(Lt,qe),Lt.length&&this.splitTile(Lt,0,0,0),pt&&(Lt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(We,qe,pt,Lt,Ct,kt,Wt){const Rt=[We,qe,pt,Lt],fr=this.options,xr=fr.debug;for(;Rt.length;){Lt=Rt.pop(),pt=Rt.pop(),qe=Rt.pop(),We=Rt.pop();const pr=1<<qe,Lr=Rn(qe,pt,Lt);let rn=this.tiles[Lr];if(!rn&&(xr>1&&console.time("creation"),rn=this.tiles[Lr]=Vi(We,qe,pt,Lt,fr),this.tileCoords.push({z:qe,x:pt,y:Lt}),xr)){xr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",qe,pt,Lt,rn.numFeatures,rn.numPoints,rn.numSimplified),console.timeEnd("creation"));const no=`z${qe}`;this.stats[no]=(this.stats[no]||0)+1,this.total++}if(rn.source=We,Ct==null){if(qe===fr.indexMaxZoom||rn.numPoints<=fr.indexMaxPoints)continue}else{if(qe===fr.maxZoom||qe===Ct)continue;if(Ct!=null){const no=Ct-qe;if(pt!==kt>>no||Lt!==Wt>>no)continue}}if(rn.source=null,We.length===0)continue;xr>1&&console.time("clipping");const sn=.5*fr.buffer/fr.extent,_n=.5-sn,Un=.5+sn,qn=1+sn;let Wn=null,Pi=null,$i=null,Kn=null,Yi=Ir(We,pr,pt-sn,pt+Un,0,rn.minX,rn.maxX,fr),Ss=Ir(We,pr,pt+_n,pt+qn,0,rn.minX,rn.maxX,fr);We=null,Yi&&(Wn=Ir(Yi,pr,Lt-sn,Lt+Un,1,rn.minY,rn.maxY,fr),Pi=Ir(Yi,pr,Lt+_n,Lt+qn,1,rn.minY,rn.maxY,fr),Yi=null),Ss&&($i=Ir(Ss,pr,Lt-sn,Lt+Un,1,rn.minY,rn.maxY,fr),Kn=Ir(Ss,pr,Lt+_n,Lt+qn,1,rn.minY,rn.maxY,fr),Ss=null),xr>1&&console.timeEnd("clipping"),Rt.push(Wn||[],qe+1,2*pt,2*Lt),Rt.push(Pi||[],qe+1,2*pt,2*Lt+1),Rt.push($i||[],qe+1,2*pt+1,2*Lt),Rt.push(Kn||[],qe+1,2*pt+1,2*Lt+1)}}getTile(We,qe,pt){We=+We,qe=+qe,pt=+pt;const Lt=this.options,{extent:Ct,debug:kt}=Lt;if(We<0||We>24)return null;const Wt=1<<We,Rt=Rn(We,qe=qe+Wt&Wt-1,pt);if(this.tiles[Rt])return mn(this.tiles[Rt],Ct);kt>1&&console.log("drilling down to z%d-%d-%d",We,qe,pt);let fr,xr=We,pr=qe,Lr=pt;for(;!fr&&xr>0;)xr--,pr>>=1,Lr>>=1,fr=this.tiles[Rn(xr,pr,Lr)];return fr&&fr.source?(kt>1&&(console.log("found parent tile z%d-%d-%d",xr,pr,Lr),console.time("drilling down")),this.splitTile(fr.source,xr,pr,Lr,We,qe,pt),kt>1&&console.timeEnd("drilling down"),this.tiles[Rt]?mn(this.tiles[Rt],Ct):null):null}}function Rn(ur,We,qe){return 32*((1<<ur)*qe+We)+ur}function Zr(ur,We){const qe=ur.tileID.canonical;if(!this._geoJSONIndex)return void We(null,null);const pt=this._geoJSONIndex.getTile(qe.z,qe.x,qe.y);if(!pt)return void We(null,null);const Lt=new se(pt.features);let Ct=ie(Lt);Ct.byteOffset===0&&Ct.byteLength===Ct.buffer.byteLength||(Ct=new Uint8Array(Ct)),We(null,{vectorTile:Lt,rawData:Ct.buffer})}class Pr extends F{constructor(We,qe,pt,Lt,Ct,kt){super(We,qe,pt,Lt,Zr,kt),Ct&&(this.loadGeoJSON=Ct),this._dynamicIndex=new de}loadData(We,qe){const pt=We&&We.request,Lt=pt&&pt.collectResourceTiming;this.loadGeoJSON(We,(Ct,kt)=>{if(Ct||!kt)return qe(Ct);if(typeof kt!="object")return qe(new Error(`Input data given to '${We.source}' is not a valid GeoJSON object.`));{try{if(We.filter){const Rt=i.M(We.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Rt.result==="error")throw new Error(Rt.value.map(fr=>`${fr.key}: ${fr.message}`).join(", "));kt.features=kt.features.filter(fr=>Rt.value.evaluate({zoom:0},fr))}We.dynamic?(kt.type==="Feature"&&(kt={type:"FeatureCollection",features:[kt]}),We.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(kt.features,this.loaded),We.cluster&&(kt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=We.cluster?new tt(function({superclusterOptions:Rt,clusterProperties:fr}){if(!fr||!Rt)return Rt;const xr={},pr={},Lr={accumulated:null,zoom:0},rn={properties:null},sn=Object.keys(fr);for(const _n of sn){const[Un,qn]=fr[_n],Wn=i.M(qn),Pi=i.M(typeof Un=="string"?[Un,["accumulated"],["get",_n]]:Un);xr[_n]=Wn.value,pr[_n]=Pi.value}return Rt.map=_n=>{rn.properties=_n;const Un={};for(const qn of sn)Un[qn]=xr[qn].evaluate(Lr,rn);return Un},Rt.reduce=(_n,Un)=>{rn.properties=Un;for(const qn of sn)Lr.accumulated=_n[qn],_n[qn]=pr[qn].evaluate(Lr,rn)},Rt}(We)).load(kt.features):We.dynamic?this._dynamicIndex:function(Rt,fr){return new Gi(Rt,fr)}(kt,We.geojsonVtOptions)}catch(Rt){return qe(Rt)}const Wt={};if(Lt){const Rt=m(pt);Rt&&(Wt.resourceTiming={},Wt.resourceTiming[We.source]=JSON.parse(JSON.stringify(Rt)))}qe(null,Wt)}})}reloadTile(We,qe){const pt=this.loaded;return pt&&pt[We.uid]?We.partial?qe(null,void 0):super.reloadTile(We,qe):this.loadTile(We,qe)}loadGeoJSON(We,qe){if(We.request)i.n(We.request,qe);else{if(typeof We.data!="string")return qe(new Error(`Input data given to '${We.source}' is not a valid GeoJSON object.`));try{return qe(null,JSON.parse(We.data))}catch{return qe(new Error(`Input data given to '${We.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(We,qe){try{qe(null,this._geoJSONIndex.getClusterExpansionZoom(We.clusterId))}catch(pt){qe(pt)}}getClusterChildren(We,qe){try{qe(null,this._geoJSONIndex.getChildren(We.clusterId))}catch(pt){qe(pt)}}getClusterLeaves(We,qe){try{qe(null,this._geoJSONIndex.getLeaves(We.clusterId,We.limit,We.offset))}catch(pt){qe(pt)}}}class un{constructor(We,qe){this.tileID=new i.aA(We.tileID.overscaledZ,We.tileID.wrap,We.tileID.canonical.z,We.tileID.canonical.x,We.tileID.canonical.y),this.tileZoom=We.tileZoom,this.uid=We.uid,this.zoom=We.zoom,this.canonical=We.tileID.canonical,this.pixelRatio=We.pixelRatio,this.tileSize=We.tileSize,this.source=We.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=We.projection,this.brightness=qe}parse(We,qe,pt,Lt){this.status="parsing";const Ct=new i.aA(pt.tileID.overscaledZ,pt.tileID.wrap,pt.tileID.canonical.z,pt.tileID.canonical.x,pt.tileID.canonical.y),kt={},Wt=qe.familiesBySource[pt.source],Rt=new i.dR(Ct,pt.promoteId);return Rt.bucketLayerIDs=[],Rt.is3DTile=!0,i.e0(We).then(fr=>{if(!fr)return Lt(new Error("Could not parse tile"));const xr=i.e1(fr,1/i.c8(pt.tileID.canonical)),pr=fr.json.extensionsUsed&&fr.json.extensionsUsed.includes("MAPBOX_mesh_features")||fr.json.asset.extras&&fr.json.asset.extras.MAPBOX_mesh_features,Lr=fr.json.extensionsUsed&&fr.json.extensionsUsed.includes("EXT_meshopt_compression"),rn=new i.a3(this.zoom,{brightness:this.brightness});for(const sn in Wt)for(const _n of Wt[sn]){const Un=_n[0];Rt.bucketLayerIDs.push(_n.map(Wn=>Wn.id)),Un.recalculate(rn,[]);const qn=new i.e2(xr,Ct,pr,Lr,this.brightness,Rt);pr||(qn.needsUpload=!0),kt[Un.fqid]=qn,qn.evaluate(Un)}this.status="done",Lt(null,{buckets:kt,featureIndex:Rt})}).catch(fr=>Lt(new Error(fr.message)))}}class Ii{constructor(We,qe,pt,Lt,Ct,kt){this.actor=We,this.layerIndex=qe,this.brightness=kt,this.loading={},this.loaded={}}loadTile(We,qe){const pt=We.uid,Lt=this.loading[pt]=new un(We,this.brightness);i.bc(We.request,(Ct,kt)=>{const Wt=!this.loading[pt];return delete this.loading[pt],Wt||Ct?(Lt.status="done",Wt||(this.loaded[pt]=Lt),qe(Ct)):kt&&kt.byteLength!==0?void Lt.parse(kt,this.layerIndex,We,(Rt,fr)=>{Lt.status="done",this.loaded=this.loaded||{},this.loaded[pt]=Lt,Rt||!fr?qe(Rt):qe(null,fr)}):(Lt.status="done",this.loaded[pt]=Lt,qe())})}reloadTile(We,qe){const pt=this.loaded,Lt=We.uid;if(pt&&pt[Lt]){const Ct=pt[Lt];Ct.projection=We.projection,Ct.brightness=We.brightness;const kt=(Wt,Rt)=>{Ct.reloadCallback&&(delete Ct.reloadCallback,this.loadTile(We,qe)),qe(Wt,Rt)};Ct.status==="parsing"?Ct.reloadCallback=kt:Ct.status==="done"&&this.loadTile(We,qe)}}abortTile(We,qe){const pt=We.uid;this.loading[pt]&&delete this.loading[pt],qe()}removeTile(We,qe){const pt=this.loaded,Lt=We.uid;pt&&pt[Lt]&&delete pt[Lt],qe()}}class ri{constructor(We){this.self=We,this.actor=new i.e3(We,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=i.bL({name:"mercator"}),this.workerSourceTypes={vector:F,geojson:Pr,"batched-model":Ii},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(qe,pt)=>{if(this.workerSourceTypes[qe])throw new Error(`Worker source with name "${qe}" already registered.`);this.workerSourceTypes[qe]=pt},this.self.registerRTLTextPlugin=qe=>{if(i.e4.isParsed())throw new Error("RTL text plugin already registered.");i.e4.applyArabicShaping=qe.applyArabicShaping,i.e4.processBidirectionalText=qe.processBidirectionalText,i.e4.processStyledBidirectionalText=qe.processStyledBidirectionalText}}clearCaches(We,qe,pt){delete this.layerIndexes[We],delete this.availableImages[We],delete this.workerSources[We],delete this.demWorkerSources[We],delete this.rasterArrayWorkerSource,pt()}checkIfReady(We,qe,pt){pt()}setReferrer(We,qe){this.referrer=qe}spriteLoaded(We,{scope:qe,isLoaded:pt}){if(this.isSpriteLoaded[We]||(this.isSpriteLoaded[We]={}),this.isSpriteLoaded[We][qe]=pt,this.workerSources[We]&&this.workerSources[We][qe])for(const Lt in this.workerSources[We][qe]){const Ct=this.workerSources[We][qe][Lt];for(const kt in Ct){const Wt=Ct[kt];Wt instanceof F&&(Wt.isSpriteLoaded=pt,Wt.fire(new i.x("isSpriteLoaded")))}}}setImages(We,{scope:qe,images:pt},Lt){if(this.availableImages[We]||(this.availableImages[We]={}),this.availableImages[We][qe]=pt,this.workerSources[We]&&this.workerSources[We][qe]){for(const Ct in this.workerSources[We][qe]){const kt=this.workerSources[We][qe][Ct];for(const Wt in kt)kt[Wt].availableImages=pt}Lt()}else Lt()}setProjection(We,qe){this.projections[We]=i.bL(qe)}setBrightness(We,qe,pt){this.brightness=qe,pt()}setLayers(We,qe,pt){this.getLayerIndex(We,qe.scope).replace(qe.layers,qe.options),pt()}updateLayers(We,qe,pt){this.getLayerIndex(We,qe.scope).update(qe.layers,qe.removedIds,qe.options),pt()}loadTile(We,qe,pt){qe.projection=this.projections[We]||this.defaultProjection,this.getWorkerSource(We,qe.type,qe.source,qe.scope).loadTile(qe,pt)}loadDEMTile(We,qe,pt){this.getDEMWorkerSource(We,qe.source,qe.scope).loadTile(qe,pt)}decodeRasterArray(We,qe,pt){this.getRasterArrayWorkerSource().decodeRasterArray(qe,pt)}reloadTile(We,qe,pt){qe.projection=this.projections[We]||this.defaultProjection,this.getWorkerSource(We,qe.type,qe.source,qe.scope).reloadTile(qe,pt)}abortTile(We,qe,pt){this.getWorkerSource(We,qe.type,qe.source,qe.scope).abortTile(qe,pt)}removeTile(We,qe,pt){this.getWorkerSource(We,qe.type,qe.source,qe.scope).removeTile(qe,pt)}removeSource(We,qe,pt){if(!(this.workerSources[We]&&this.workerSources[We][qe.scope]&&this.workerSources[We][qe.scope][qe.type]&&this.workerSources[We][qe.scope][qe.type][qe.source]))return;const Lt=this.workerSources[We][qe.scope][qe.type][qe.source];delete this.workerSources[We][qe.scope][qe.type][qe.source],Lt.removeSource!==void 0?Lt.removeSource(qe,pt):pt()}loadWorkerSource(We,qe,pt){try{this.self.importScripts(qe.url),pt()}catch(Lt){pt(Lt.toString())}}syncRTLPluginState(We,qe,pt){try{i.e4.setState(qe);const Lt=i.e4.getPluginURL();if(i.e4.isLoaded()&&!i.e4.isParsed()&&Lt!=null){this.self.importScripts(Lt);const Ct=i.e4.isParsed();pt(Ct?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Lt}`),Ct)}}catch(Lt){pt(Lt.toString())}}setDracoUrl(We,qe){this.dracoUrl=qe}getAvailableImages(We,qe){this.availableImages[We]||(this.availableImages[We]={});let pt=this.availableImages[We][qe];return pt||(pt=[]),pt}getLayerIndex(We,qe){this.layerIndexes[We]||(this.layerIndexes[We]={});let pt=this.layerIndexes[We][qe];return pt||(pt=this.layerIndexes[We][qe]=new B,pt.scope=qe),pt}getWorkerSource(We,qe,pt,Lt){return this.workerSources[We]||(this.workerSources[We]={}),this.workerSources[We][Lt]||(this.workerSources[We][Lt]={}),this.workerSources[We][Lt][qe]||(this.workerSources[We][Lt][qe]={}),this.isSpriteLoaded[We]||(this.isSpriteLoaded[We]={}),this.workerSources[We][Lt][qe][pt]||(this.workerSources[We][Lt][qe][pt]=new this.workerSourceTypes[qe]({send:(Ct,kt,Wt,Rt,fr,xr)=>{this.actor.send(Ct,kt,Wt,We,fr,xr)},scheduler:this.actor.scheduler},this.getLayerIndex(We,Lt),this.getAvailableImages(We,Lt),this.isSpriteLoaded[We][Lt],void 0,this.brightness)),this.workerSources[We][Lt][qe][pt]}getDEMWorkerSource(We,qe,pt){return this.demWorkerSources[We]||(this.demWorkerSources[We]={}),this.demWorkerSources[We][pt]||(this.demWorkerSources[We][pt]={}),this.demWorkerSources[We][pt][qe]||(this.demWorkerSources[We][pt][qe]=new R),this.demWorkerSources[We][pt][qe]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new V),this.rasterArrayWorkerSource}enforceCacheSizeLimit(We,qe){i.e5(qe)}getWorkerPerformanceMetrics(We,qe,pt){pt(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ri(self)),ri}),c(["./shared"],function(i){var m="3.7.0";const g={create:"create",load:"load",fullLoad:"fullLoad"},C={mark(v){performance.mark(v)},measure(v,l,h){performance.measure(v,l,h)}};function B(v){const l=v.name.split("?")[0];return i.a(l)&&l.includes("mapbox-gl.js")?"javascript":i.a(l)&&l.includes("mapbox-gl.css")?"css":i.b(l)?"fontRange":i.c(l)?"sprite":i.i(l)?"style":i.d(l)?"tilejson":"other"}var S,P={},j=function(){if(S)return P;function v(x){return!l(x)}function l(x){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var L,M,q=new Blob([""],{type:"text/javascript"}),X=URL.createObjectURL(q);try{M=new Worker(X),L=!0}catch{L=!1}return M&&M.terminate(),URL.revokeObjectURL(X),L}()?function(){var L=document.createElement("canvas");L.width=L.height=1;var M=L.getContext("2d");if(!M)return!1;var q=M.getImageData(0,0,1,1);return q&&q.width===L.width}()?(h[E=x&&x.failIfMajorPerformanceCaveat]===void 0&&(h[E]=function(L){var M,q=function(X){var ne=document.createElement("canvas"),ae=Object.create(v.webGLContextAttributes);return ae.failIfMajorPerformanceCaveat=X,ne.getContext("webgl2",ae)}(L);if(!q)return!1;try{M=q.createShader(q.VERTEX_SHADER)}catch{return!1}return!(!M||q.isContextLost())&&(q.shaderSource(M,"void main() {}"),q.compileShader(M),q.getShaderParameter(M,q.COMPILE_STATUS)===!0)}(E)),h[E]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var E}S=1,P.supported=v,P.notSupportedReason=l;var h={};return v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},P}();function D(v,l,h){const x=document.createElement(v);return l!=null&&(x.className=l),h&&h.appendChild(x),x}function F(v,l,h){const x=document.createElementNS("http://www.w3.org/2000/svg",v);for(const E of Object.keys(l))x.setAttributeNS(null,E,String(l[E]));return h&&h.appendChild(x),x}const R=typeof document<"u"?document.documentElement&&document.documentElement.style:null,V=R&&R.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Y;function te(){R&&V&&(Y=R[V],R[V]="none")}function se(){R&&V&&(R[V]=Y)}function oe(v){v.preventDefault(),v.stopPropagation(),window.removeEventListener("click",oe,!0)}function K(){window.addEventListener("click",oe,!0),window.setTimeout(()=>{window.removeEventListener("click",oe,!0)},0)}function de(v,l){const h=v.getBoundingClientRect();return Z(v,h,l)}function we(v,l){const h=v.getBoundingClientRect(),x=[];for(let E=0;E<l.length;E++)x.push(Z(v,h,l[E]));return x}function J(v){return window.InstallTrigger!==void 0&&v.button===2&&v.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function Z(v,l,h){const x=v.offsetWidth===l.width?1:v.offsetWidth/l.width;return new i.P((h.clientX-l.left)*x,(h.clientY-l.top)*x)}const Ie="01",be="NO_ACCESS_TOKEN";class He{constructor(l,h,x){this._transformRequestFn=l,this._customAccessToken=h,this._silenceAuthErrors=!!x,this._createSkuToken()}_createSkuToken(){const l=function(){let h="";for(let x=0;x<10;x++)h+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ie,h].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,h){return this._transformRequestFn&&this._transformRequestFn(l,h)||{url:l}}normalizeStyleURL(l,h){if(!i.f(l))return l;const x=ve(l);return x.params.push(`sdk=js-${m}`),x.path=`/styles/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||h)}normalizeGlyphsURL(l,h){if(!i.f(l))return l;const x=ve(l);return x.path=`/fonts/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||h)}normalizeModelURL(l,h){if(!i.f(l))return l;const x=ve(l);return x.path=`/models/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||h)}normalizeSourceURL(l,h,x,E){if(!i.f(l))return l;const L=ve(l);return L.path=`/v4/${L.authority}.json`,L.params.push("secure"),x&&L.params.push(`language=${x}`),E&&L.params.push(`worldview=${E}`),this._makeAPIURL(L,this._customAccessToken||h)}normalizeSpriteURL(l,h,x,E){const L=ve(l);return i.f(l)?(L.path=`/styles/v1${L.path}/sprite${h}${x}`,this._makeAPIURL(L,this._customAccessToken||E)):(L.path+=`${h}${x}`,_e(L))}normalizeTileURL(l,h,x){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!i.f(l))return l;const E=ve(l);E.path=E.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${h||x&&E.authority!=="raster"&&x===512?"@2x":""}${i.m.supported?".webp":"$1"}`),E.authority==="raster"?E.path=`/${i.e.RASTER_URL_PREFIX}${E.path}`:E.authority==="rasterarrays"?E.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${E.path}`:E.authority==="3dtiles"?E.path=`/${i.e.TILES3D_URL_PREFIX}${E.path}`:(E.path=E.path.replace(/^.+\/v4\//,"/"),E.path=`/${i.e.TILE_URL_VERSION}${E.path}`);const L=this._customAccessToken||function(M){for(const q of M){const X=q.match(/^access_token=(.*)$/);if(X)return X[1]}return null}(E.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&L&&this._skuToken&&E.params.push(`sku=${this._skuToken}`),this._makeAPIURL(E,L)}canonicalizeTileURL(l,h){const x=ve(l);if(!x.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!x.path.match(/\.[\w]+$/))return l;let E="mapbox://";x.path.match(/^\/raster\/v1\//)?E+=`raster/${x.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:x.path.match(/^\/rasterarrays\/v1\//)?E+=`rasterarrays/${x.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:E+=`tiles/${x.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let L=x.params;return h&&(L=L.filter(M=>!M.match(/^access_token=/))),L.length&&(E+=`?${L.join("&")}`),E}canonicalizeTileset(l,h){const x=!!h&&i.f(h),E=[];for(const L of l.tiles||[])i.h(L)?E.push(this.canonicalizeTileURL(L,x)):E.push(L);return E}_makeAPIURL(l,h){const x="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",E=ve(i.e.API_URL);if(l.protocol=E.protocol,l.authority=E.authority,l.protocol==="http"){const L=l.params.indexOf("secure");L>=0&&l.params.splice(L,1)}if(E.path!=="/"&&(l.path=`${E.path}${l.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return _e(l);if(h=h||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!h)throw new Error(`An API access token is required to use Mapbox GL. ${x}`);if(h[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${x}`)}return l.params=l.params.filter(L=>L.indexOf("access_token")===-1),l.params.push(`access_token=${h||""}`),_e(l)}}const Fe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ve(v){const l=v.match(Fe);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function _e(v){const l=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${l}`}const ze="mapbox.eventData";function Ne(v){if(!v)return null;const l=v.split(".");if(!l||l.length!==3)return null;try{return JSON.parse(i.j(l[1]))}catch{return null}}class st{constructor(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const h=Ne(i.e.ACCESS_TOKEN);let x="";return x=h&&h.u?i.k(h.u):i.e.ACCESS_TOKEN||"",l?`${ze}.${l}:${x}`:`${ze}:${x}`}fetchEventData(){const l=i.s("localStorage"),h=this.getStorageKey(),x=this.getStorageKey("uuid");if(l)try{const E=localStorage.getItem(h);E&&(this.eventData=JSON.parse(E));const L=localStorage.getItem(x);L&&(this.anonId=L)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const l=i.s("localStorage"),h=this.getStorageKey(),x=this.getStorageKey("uuid"),E=this.anonId;if(l&&E)try{localStorage.setItem(x,E),Object.keys(this.eventData).length>=1&&localStorage.setItem(h,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,h,x,E){if(!i.e.EVENTS_URL)return;const L=ve(i.e.EVENTS_URL);L.params.push(`access_token=${E||i.e.ACCESS_TOKEN||""}`);const M={event:this.type,created:new Date(l).toISOString()},q=h?i.l(M,h):M,X={url:_e(L),headers:{"Content-Type":"text/plain"},body:JSON.stringify([q])};this.pendingRequest=i.p(X,ne=>{this.pendingRequest=null,x(ne),this.saveEventData(),this.processRequests(E)})}queueRequest(l,h){this.queue.push(l),this.processRequests(h)}}const ie=new class extends st{constructor(v){super("appUserTurnstile"),this._customAccessToken=v}postTurnstileEvent(v,l){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(v)&&v.some(h=>i.f(h)||i.h(h))&&this.queueRequest(Date.now(),l)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=Ne(i.e.ACCESS_TOKEN),h=l?l.u:i.e.ACCESS_TOKEN;let x=h!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),x=!0);const E=this.queue.shift();if(this.eventData.lastSuccess){const L=new Date(this.eventData.lastSuccess),M=new Date(E),q=(E-this.eventData.lastSuccess)/864e5;x=x||q>=1||q<-1||L.getDate()!==M.getDate()}else x=!0;x?this.postEvent(E,{sdkIdentifier:"mapbox-gl-js",sdkVersion:m,skuId:Ie,"enabled.telemetry":!1,userId:this.anonId},L=>{L||(this.eventData.lastSuccess=E,this.eventData.tokenU=h)},v):this.processRequests()}},le=ie.postTurnstileEvent.bind(ie),pe=new class extends st{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(v,l,h,x){this.skuToken=l,this.errorCb=x,i.e.EVENTS_URL&&(h||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},h):this.errorCb(new Error(be)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:h}=this.queue.shift();l&&this.success[l]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(h,{sdkIdentifier:"mapbox-gl-js",sdkVersion:m,skuId:Ie,skuToken:this.skuToken,userId:this.anonId},x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},v))}remove(){this.errorCb=null}},fe=pe.postMapLoadEvent.bind(pe),Qe=new class extends st{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(v){let l=this.mapInstanceIdMap.get(v);return l||(l=i.u(),this.mapInstanceIdMap.set(v,l)),l}getEventId(v){const l=this.eventIdPerMapInstanceMap.get(v)||0;return this.eventIdPerMapInstanceMap.set(v,l+1),l}postStyleLoadEvent(v,l){const{map:h,style:x,importedStyles:E}=l;if(!i.e.EVENTS_URL||!v&&!i.e.ACCESS_TOKEN)return;const L=this.getMapInstanceId(h),M={mapInstanceId:L,eventId:this.getEventId(L),style:x};E.length&&(M.importedStyles=E),this.queueRequest({timestamp:Date.now(),payload:M},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,payload:h}=this.queue.shift();this.postEvent(l,h,()=>{},v)}},Ke=Qe.postStyleLoadEvent.bind(Qe),et=new class extends st{constructor(){super("gljs.performance")}postPerformanceEvent(v,l){i.e.EVENTS_URL&&(v||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:l},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,performanceData:h}=this.queue.shift(),x=function(E){const L=performance.getEntriesByType("resource"),M=performance.getEntriesByType("mark"),q=function(Ee){const Ge={};if(Ee){for(const $e in Ee)if($e!=="other")for(const Ye of Ee[$e]){const Je=`${$e}ResolveRangeMin`,ht=`${$e}ResolveRangeMax`,gt=`${$e}RequestCount`,ut=`${$e}RequestCachedCount`;Ge[Je]=Math.min(Ge[Je]||1/0,Ye.startTime),Ge[ht]=Math.max(Ge[ht]||-1/0,Ye.responseEnd);const wt=_t=>{Ge[_t]===void 0&&(Ge[_t]=0),++Ge[_t]};Ye.transferSize!==void 0&&Ye.transferSize===0&&wt(ut),wt(gt)}}return Ge}(function(Ee,Ge){const $e={};if(Ee)for(const Ye of Ee){const Je=Ge(Ye);$e[Je]===void 0&&($e[Je]=[]),$e[Je].push(Ye)}return $e}(L,B)),X=window.devicePixelRatio,ne=navigator.connection||navigator.mozConnection||navigator.webkitConnection,ae=ne?ne.effectiveType:void 0,xe={counters:[],metadata:[],attributes:[]},Ce=(Ee,Ge,$e)=>{$e!=null&&Ee.push({name:Ge,value:$e.toString()})};for(const Ee in q)Ce(xe.counters,Ee,q[Ee]);if(E.interactionRange[0]!==1/0&&E.interactionRange[1]!==-1/0&&(Ce(xe.counters,"interactionRangeMin",E.interactionRange[0]),Ce(xe.counters,"interactionRangeMax",E.interactionRange[1])),M)for(const Ee of Object.keys(g)){const Ge=g[Ee],$e=M.find(Ye=>Ye.name===Ge);$e&&Ce(xe.counters,Ge,$e.startTime)}return Ce(xe.counters,"visibilityHidden",E.visibilityHidden),Ce(xe.attributes,"style",function(Ee){if(Ee)for(const Ge of Ee){const $e=Ge.name.split("?")[0];if(i.i($e)){const Ye=$e.split("/").slice(-2);if(Ye.length===2)return`mapbox://styles/${Ye[0]}/${Ye[1]}`}}}(L)),Ce(xe.attributes,"terrainEnabled",E.terrainEnabled?"true":"false"),Ce(xe.attributes,"fogEnabled",E.fogEnabled?"true":"false"),Ce(xe.attributes,"projection",E.projection),Ce(xe.attributes,"zoom",E.zoom),Ce(xe.metadata,"devicePixelRatio",X),Ce(xe.metadata,"connectionEffectiveType",ae),Ce(xe.metadata,"navigatorUserAgent",navigator.userAgent),Ce(xe.metadata,"screenWidth",window.screen.width),Ce(xe.metadata,"screenHeight",window.screen.height),Ce(xe.metadata,"windowWidth",window.innerWidth),Ce(xe.metadata,"windowHeight",window.innerHeight),Ce(xe.metadata,"mapWidth",E.width/X),Ce(xe.metadata,"mapHeight",E.height/X),Ce(xe.metadata,"webglRenderer",E.renderer),Ce(xe.metadata,"webglVendor",E.vendor),Ce(xe.metadata,"sdkVersion",m),Ce(xe.metadata,"sdkIdentifier","mapbox-gl-js"),xe}(h);for(const E of x.metadata);for(const E of x.counters);for(const E of x.attributes);this.postEvent(l,x,()=>{},v)}},tt=et.postPerformanceEvent.bind(et),bt=new class extends st{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(v,l,h,x){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const E=ve(i.e.API_URL+i.e.SESSION_PATH);E.params.push(`sku=${l||""}`),E.params.push(`access_token=${x||i.e.ACCESS_TOKEN||""}`);const L={url:_e(E),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(L,M=>{this.pendingRequest=null,h(M),this.saveEventData(),this.processRequests(x)})}getSessionAPI(v,l,h,x){this.skuToken=l,this.errorCb=x,i.e.SESSION_PATH&&i.e.API_URL&&(h||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},h):this.errorCb(new Error(be)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:h}=this.queue.shift();l&&this.success[l]||this.getSession(h,this.skuToken,x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},v)}remove(){this.errorCb=null}},De=bt.getSessionAPI.bind(bt),Mt=new Set;function ir(v,l){l?Mt.add(v):Mt.delete(v)}class Ar{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(l,h){this._updatedSourceCaches[l]=h,this.setDirty()}discardSourceCacheUpdate(l){delete this._updatedSourceCaches[l]}updateLayer(l){const h=l.scope;this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._updatedLayers[h].add(l.id),this.setDirty()}removeLayer(l){const h=l.scope;this._removedLayers[h]=this._removedLayers[h]||{},this._updatedLayers[h]=this._updatedLayers[h]||new Set,this._removedLayers[h][l.id]=l,this._updatedLayers[h].delete(l.id),this._updatedPaintProps.delete(l.fqid),this.setDirty()}getRemovedLayer(l){return this._removedLayers[l.scope]?this._removedLayers[l.scope][l.id]:null}discardLayerRemoval(l){this._removedLayers[l.scope]&&delete this._removedLayers[l.scope][l.id]}getLayerUpdatesByScope(){const l={};for(const h in this._updatedLayers)l[h]=l[h]||{},l[h].updatedIds=Array.from(this._updatedLayers[h].values());for(const h in this._removedLayers)l[h]=l[h]||{},l[h].removedIds=Object.keys(this._removedLayers[h]);return l}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(l){this._updatedPaintProps.add(l.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(l){this._updatedImages.add(l),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Ze(v){const{userImage:l}=v;return!!(l&&l.render&&l.render())&&(v.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ue extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(l){this.images[l]={},this.loaded[l]=!1,this.updatedImages[l]={},this.patterns[l]={},this.callbackDispatchedThisFrame[l]={},this.atlasImage[l]=new i.r({width:1,height:1})}isLoaded(){for(const l in this.loaded)if(!this.loaded[l])return!1;return!0}setLoaded(l,h){if(this.loaded[h]!==l&&(this.loaded[h]=l,l)){for(const{ids:x,callback:E}of this.requestors)this._notify(x,h,E);this.requestors=[]}}hasImage(l,h){return!!this.getImage(l,h)}getImage(l,h){return this.images[h][l]}addImage(l,h,x){this._validate(l,x)&&(this.images[h][l]=x)}_validate(l,h){let x=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new i.t(new Error(`Image "${l}" has invalid "stretchX" value`))),x=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new i.t(new Error(`Image "${l}" has invalid "stretchY" value`))),x=!1),this._validateContent(h.content,h)||(this.fire(new i.t(new Error(`Image "${l}" has invalid "content" value`))),x=!1),x}_validateStretch(l,h){if(!l)return!0;let x=0;for(const E of l){if(E[0]<x||E[1]<E[0]||h<E[1])return!1;x=E[1]}return!0}_validateContent(l,h){return!(l&&(l.length!==4||l[0]<0||h.data.width<l[0]||l[1]<0||h.data.height<l[1]||l[2]<0||h.data.width<l[2]||l[3]<0||h.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,h,x){x.version=this.images[h][l].version+1,this.images[h][l]=x,this.updatedImages[h][l]=!0}removeImage(l,h){const x=this.images[h][l];delete this.images[h][l],delete this.patterns[h][l],x.userImage&&x.userImage.onRemove&&x.userImage.onRemove()}listImages(l){return Object.keys(this.images[l])}getImages(l,h,x){let E=!0;const L=!!this.loaded[h];if(!L)for(const M of l)this.images[h][M]||(E=!1);L||E?this._notify(l,h,x):this.requestors.push({ids:l,scope:h,callback:x})}getUpdatedImages(l){return this.updatedImages[l]}_notify(l,h,x){const E={};for(const L of l){this.images[h][L]||this.fire(new i.x("styleimagemissing",{id:L}));const M=this.images[h][L];M?E[L]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:i.w(`Image "${L}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}x(null,E)}getPixelSize(l){const{width:h,height:x}=this.atlasImage[l];return{width:h,height:x}}getPattern(l,h,x){const E=this.patterns[h][l],L=this.getImage(l,h);if(!L)return null;if(E&&E.position.version===L.version)return E.position;if(E)E.position.version=L.version;else{const M={w:L.data.width+2*i.y,h:L.data.height+2*i.y,x:0,y:0},q=new i.I(M,L,i.y);this.patterns[h][l]={bin:M,position:q}}return this._updatePatternAtlas(h,x),this.patterns[h][l].position}bind(l,h){const x=l.gl;let E=this.atlasTexture[h];E?this.dirty&&(E.update(this.atlasImage[h]),this.dirty=!1):(E=new i.T(l,this.atlasImage[h],x.RGBA8),this.atlasTexture[h]=E),E.bind(x.LINEAR,x.CLAMP_TO_EDGE)}_updatePatternAtlas(l,h){const x=[];for(const q in this.patterns[l])x.push(this.patterns[l][q].bin);const{w:E,h:L}=i.z(x),M=this.atlasImage[l];M.resize({width:E||1,height:L||1});for(const q in this.patterns[l]){const{bin:X,position:ne}=this.patterns[l][q];let ae=ne.padding;const xe=X.x+ae,Ce=X.y+ae,Ee=this.images[l][q].data,Ge=Ee.width,$e=Ee.height;ae=ae>1?ae-1:ae,i.r.copy(Ee,M,{x:0,y:0},{x:xe,y:Ce},{width:Ge,height:$e},h),i.r.copy(Ee,M,{x:0,y:$e-ae},{x:xe,y:Ce-ae},{width:Ge,height:ae},h),i.r.copy(Ee,M,{x:0,y:0},{x:xe,y:Ce+$e},{width:Ge,height:ae},h),i.r.copy(Ee,M,{x:Ge-ae,y:0},{x:xe-ae,y:Ce},{width:ae,height:$e},h),i.r.copy(Ee,M,{x:0,y:0},{x:xe+Ge,y:Ce},{width:ae,height:$e},h),i.r.copy(Ee,M,{x:Ge-ae,y:$e-ae},{x:xe-ae,y:Ce-ae},{width:ae,height:ae},h),i.r.copy(Ee,M,{x:0,y:$e-ae},{x:xe+Ge,y:Ce-ae},{width:ae,height:ae},h),i.r.copy(Ee,M,{x:0,y:0},{x:xe+Ge,y:Ce+$e},{width:ae,height:ae},h),i.r.copy(Ee,M,{x:Ge-ae,y:0},{x:xe-ae,y:Ce+$e},{width:ae,height:ae},h)}this.dirty=!0}beginFrame(){for(const l in this.images)this.callbackDispatchedThisFrame[l]={}}dispatchRenderCallbacks(l,h){for(const x of l){if(this.callbackDispatchedThisFrame[h][x])continue;this.callbackDispatchedThisFrame[h][x]=!0;const E=this.images[h][x];Ze(E)&&this.updateImage(x,h,E)}}}function hr(v){const l=v.key,h=v.value,x=v.valueSpec||{},E=v.objectElementValidators||{},L=v.style,M=v.styleSpec;let q=[];const X=i.B(h);if(X!=="object")return[new i.V(l,h,`object expected, ${X} found`)];for(const ne in h){const ae=ne.split(".")[0];let xe;E[ae]?xe=E[ae]:x[ae]?xe=jn:E["*"]?xe=E["*"]:x["*"]&&(xe=jn),xe?q=q.concat(xe({key:(l&&`${l}.`)+ne,value:h[ne],valueSpec:x[ae]||x["*"],style:L,styleSpec:M,object:h,objectKey:ne},h)):q.push(new i.A(l,h[ne],`unknown property "${ne}"`))}for(const ne in x)E[ne]||x[ne].required&&x[ne].default===void 0&&h[ne]===void 0&&q.push(new i.V(l,h,`missing required property "${ne}"`));return q}function Dt(v){const l=v.value,h=v.valueSpec,x=v.style,E=v.styleSpec,L=v.key,M=v.arrayElementValidator||jn;if(i.B(l)!=="array")return[new i.V(L,l,`array expected, ${i.B(l)} found`)];if(h.length&&l.length!==h.length)return[new i.V(L,l,`array length ${h.length} expected, length ${l.length} found`)];if(h["min-length"]&&l.length<h["min-length"])return[new i.V(L,l,`array length at least ${h["min-length"]} expected, length ${l.length} found`)];let q={type:h.value,values:h.values,minimum:h.minimum,maximum:h.maximum,function:void 0};E.$version<7&&(q.function=h.function),i.B(h.value)==="object"&&(q=h.value);let X=[];for(let ne=0;ne<l.length;ne++)X=X.concat(M({array:l,arrayIndex:ne,value:l[ne],valueSpec:q,style:x,styleSpec:E,key:`${L}[${ne}]`},!0));return X}function vt(v){const l=v.key,h=v.value,x=v.valueSpec;let E=i.B(h);if(E==="number"&&h!=h&&(E="NaN"),E!=="number")return[new i.V(l,h,`number expected, ${E} found`)];if("minimum"in x){let L=x.minimum;if(i.B(x.minimum)==="array"&&(L=x.minimum[v.arrayIndex]),h<L)return[new i.V(l,h,`${h} is less than the minimum value ${L}`)]}if("maximum"in x){let L=x.maximum;if(i.B(x.maximum)==="array"&&(L=x.maximum[v.arrayIndex]),h>L)return[new i.V(l,h,`${h} is greater than the maximum value ${L}`)]}return[]}function Kt(v){const l=v.valueSpec,h=i.D(v.value.type);let x,E,L,M={};const q=h!=="categorical"&&v.value.property===void 0,X=!q,ne=i.B(v.value.stops)==="array"&&i.B(v.value.stops[0])==="array"&&i.B(v.value.stops[0][0])==="object",ae=hr({key:v.key,value:v.value,valueSpec:v.styleSpec.function,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{stops:function(Ee){if(h==="identity")return[new i.V(Ee.key,Ee.value,'identity function may not have a "stops" property')];let Ge=[];const $e=Ee.value;return Ge=Ge.concat(Dt({key:Ee.key,value:$e,valueSpec:Ee.valueSpec,style:Ee.style,styleSpec:Ee.styleSpec,arrayElementValidator:xe})),i.B($e)==="array"&&$e.length===0&&Ge.push(new i.V(Ee.key,$e,"array must have at least one stop")),Ge},default:function(Ee){return jn({key:Ee.key,value:Ee.value,valueSpec:l,style:Ee.style,styleSpec:Ee.styleSpec})}}});return h==="identity"&&q&&ae.push(new i.V(v.key,v.value,'missing required property "property"')),h==="identity"||v.value.stops||ae.push(new i.V(v.key,v.value,'missing required property "stops"')),h==="exponential"&&v.valueSpec.expression&&!i.F(v.valueSpec)&&ae.push(new i.V(v.key,v.value,"exponential functions not supported")),v.styleSpec.$version>=8&&(X&&!i.G(v.valueSpec)?ae.push(new i.V(v.key,v.value,"property functions not supported")):q&&!i.H(v.valueSpec)&&ae.push(new i.V(v.key,v.value,"zoom functions not supported"))),h!=="categorical"&&!ne||v.value.property!==void 0||ae.push(new i.V(v.key,v.value,'"property" property is required')),ae;function xe(Ee){let Ge=[];const $e=Ee.value,Ye=Ee.key;if(i.B($e)!=="array")return[new i.V(Ye,$e,`array expected, ${i.B($e)} found`)];if($e.length!==2)return[new i.V(Ye,$e,`array length 2 expected, length ${$e.length} found`)];if(ne){if(i.B($e[0])!=="object")return[new i.V(Ye,$e,`object expected, ${i.B($e[0])} found`)];if($e[0].zoom===void 0)return[new i.V(Ye,$e,"object stop key must have zoom")];if($e[0].value===void 0)return[new i.V(Ye,$e,"object stop key must have value")];const Je=i.D($e[0].zoom);if(typeof Je!="number")return[new i.V(Ye,$e[0].zoom,"stop zoom values must be numbers")];if(L&&L>Je)return[new i.V(Ye,$e[0].zoom,"stop zoom values must appear in ascending order")];Je!==L&&(L=Je,E=void 0,M={}),Ge=Ge.concat(hr({key:`${Ye}[0]`,value:$e[0],valueSpec:{zoom:{}},style:Ee.style,styleSpec:Ee.styleSpec,objectElementValidators:{zoom:vt,value:Ce}}))}else Ge=Ge.concat(Ce({key:`${Ye}[0]`,value:$e[0],valueSpec:{},style:Ee.style,styleSpec:Ee.styleSpec},$e));return i.J(i.K($e[1]))?Ge.concat([new i.V(`${Ye}[1]`,$e[1],"expressions are not allowed in function stops.")]):Ge.concat(jn({key:`${Ye}[1]`,value:$e[1],valueSpec:l,style:Ee.style,styleSpec:Ee.styleSpec}))}function Ce(Ee,Ge){const $e=i.B(Ee.value),Ye=i.D(Ee.value),Je=Ee.value!==null?Ee.value:Ge;if(x){if($e!==x)return[new i.V(Ee.key,Je,`${$e} stop domain type must match previous stop domain type ${x}`)]}else x=$e;if($e!=="number"&&$e!=="string"&&$e!=="boolean"&&typeof Ye!="number"&&typeof Ye!="string"&&typeof Ye!="boolean")return[new i.V(Ee.key,Je,"stop domain value must be a number, string, or boolean")];if($e!=="number"&&h!=="categorical"){let ht=`number expected, ${$e} found`;return i.G(l)&&h===void 0&&(ht+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(Ee.key,Je,ht)]}return h!=="categorical"||$e!=="number"||typeof Ye=="number"&&isFinite(Ye)&&Math.floor(Ye)===Ye?h!=="categorical"&&$e==="number"&&typeof Ye=="number"&&typeof E=="number"&&E!==void 0&&Ye<E?[new i.V(Ee.key,Je,"stop domain values must appear in ascending order")]:(E=Ye,h==="categorical"&&Ye in M?[new i.V(Ee.key,Je,"stop domain values must be unique")]:(M[Ye]=!0,[])):[new i.V(Ee.key,Je,`integer expected, found ${String(Ye)}`)]}}function rr(v){const l=(v.expressionContext==="property"?i.L:i.M)(i.K(v.value),v.valueSpec);if(l.result==="error")return l.value.map(x=>new i.V(`${v.key}${x.key}`,v.value,x.message));const h=l.value.expression||l.value._styleExpression.expression;if(v.expressionContext==="property"&&v.propertyKey==="text-font"&&!h.outputDefined())return[new i.V(v.key,v.value,`Invalid data expression for "${v.propertyKey}". Output values must be contained as literals within the expression.`)];if(v.expressionContext==="property"&&v.propertyType==="layout"&&!i.N(h))return[new i.V(v.key,v.value,'"feature-state" data expressions are not supported with layout properties.')];if(v.expressionContext==="filter")return nr(h,v);if(v.expressionContext&&v.expressionContext.indexOf("cluster")===0){if(!i.O(h,["zoom","feature-state"]))return[new i.V(v.key,v.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(v.expressionContext==="cluster-initial"&&!i.Q(h))return[new i.V(v.key,v.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nr(v,l){const h=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(l.valueSpec&&l.valueSpec.expression)for(const E of l.valueSpec.expression.parameters)h.delete(E);if(h.size===0)return[];const x=[];return v instanceof i.S&&h.has(v.name)?[new i.V(l.key,l.value,`["${v.name}"] expression is not supported in a filter for a ${l.object.type} layer with id: ${l.object.id}`)]:(v.eachChild(E=>{x.push(...nr(E,l))}),x)}function Nr(v){const l=v.key,h=v.value,x=v.valueSpec,E=[];return Array.isArray(x.values)?x.values.indexOf(i.D(h))===-1&&E.push(new i.V(l,h,`expected one of [${x.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(x.values).indexOf(i.D(h))===-1&&E.push(new i.V(l,h,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(h)} found`)),E}function on(v){return i.W(i.K(v.value))?rr(i.C({},v,{expressionContext:"filter",valueSpec:v.styleSpec[`filter_${v.layerType||"fill"}`]})):Ir(v)}function Ir(v){const l=v.value,h=v.key;if(i.B(l)!=="array")return[new i.V(h,l,`array expected, ${i.B(l)} found`)];const x=v.styleSpec;let E,L=[];if(l.length<1)return[new i.V(h,l,"filter array must have at least 1 element")];switch(L=L.concat(Nr({key:`${h}[0]`,value:l[0],valueSpec:x.filter_operator,style:v.style,styleSpec:v.styleSpec})),i.D(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&i.D(l[1])==="$type"&&L.push(new i.V(h,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&L.push(new i.V(h,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(E=i.B(l[1]),E!=="string"&&L.push(new i.V(`${h}[1]`,l[1],`string expected, ${E} found`)));for(let M=2;M<l.length;M++)E=i.B(l[M]),i.D(l[1])==="$type"?L=L.concat(Nr({key:`${h}[${M}]`,value:l[M],valueSpec:x.geometry_type,style:v.style,styleSpec:v.styleSpec})):E!=="string"&&E!=="number"&&E!=="boolean"&&L.push(new i.V(`${h}[${M}]`,l[M],`string, number, or boolean expected, ${E} found`));break;case"any":case"all":case"none":for(let M=1;M<l.length;M++)L=L.concat(Ir({key:`${h}[${M}]`,value:l[M],style:v.style,styleSpec:v.styleSpec}));break;case"has":case"!has":E=i.B(l[1]),l.length!==2?L.push(new i.V(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):E!=="string"&&L.push(new i.V(`${h}[1]`,l[1],`string expected, ${E} found`))}return L}function cn(v,l){const h=v.key,x=v.style,E=v.layer,L=v.styleSpec,M=v.value,q=v.objectKey,X=L[`${l}_${v.layerType}`];if(!X)return[];const ne=q.match(/^(.*)-transition$/);if(l==="paint"&&ne&&X[ne[1]]&&X[ne[1]].transition)return jn({key:h,value:M,valueSpec:L.transition,style:x,styleSpec:L});const ae=v.valueSpec||X[q];if(!ae)return[new i.A(h,M,`unknown property "${q}"`)];let xe;if(i.B(M)==="string"&&i.G(ae)&&!ae.tokens&&(xe=/^{([^}]+)}$/.exec(M))){const Ee=`\`{ "type": "identity", "property": ${xe?JSON.stringify(xe[1]):'"_"'} }\``;return[new i.V(h,M,`"${q}" does not support interpolation syntax
Use an identity property function instead: ${Ee}.`)]}const Ce=[];if(v.layerType==="symbol")q!=="text-field"||!x||x.glyphs||x.imports||Ce.push(new i.V(h,M,'use of "text-field" requires a style "glyphs" property')),q==="text-font"&&i.X(i.K(M))&&i.D(M.type)==="identity"&&Ce.push(new i.V(h,M,'"text-font" does not support identity functions'));else if(v.layerType==="model"&&l==="paint"&&E&&E.layout&&E.layout.hasOwnProperty("model-id")&&i.G(ae)&&(i.Y(ae)||i.H(ae))){const Ee=i.L(i.K(M),ae),Ge=Ee.value.expression||Ee.value._styleExpression.expression;Ge&&!i.O(Ge,["measure-light"])&&(q==="model-emissive-strength"&&i.Q(Ge)&&i.N(Ge)||Ce.push(new i.V(h,M,`${q} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return Ce.concat(jn({key:v.key,value:M,valueSpec:ae,style:x,styleSpec:L,expressionContext:"property",propertyType:l,propertyKey:q}))}function Sn(v){return cn(v,"paint")}function Ln(v){return cn(v,"layout")}function ln(v){let l=[];const h=v.value,x=v.key,E=v.style,L=v.styleSpec;h.type||h.ref||l.push(new i.V(x,h,'either "type" or "ref" is required'));let M=i.D(h.type);const q=i.D(h.ref);if(h.id){const X=i.D(h.id);for(let ne=0;ne<v.arrayIndex;ne++){const ae=E.layers[ne];i.D(ae.id)===X&&l.push(new i.V(x,h.id,`duplicate layer id "${h.id}", previously used at line ${ae.id.__line__}`))}}if("ref"in h){let X;["type","source","source-layer","filter","layout"].forEach(ne=>{ne in h&&l.push(new i.V(x,h[ne],`"${ne}" is prohibited for ref layers`))}),E.layers.forEach(ne=>{i.D(ne.id)===q&&(X=ne)}),X?X.ref?l.push(new i.V(x,h.ref,"ref cannot reference another ref layer")):M=i.D(X.type):typeof q=="string"&&l.push(new i.V(x,h.ref,`ref layer "${q}" not found`))}else if(M!=="background"&&M!=="sky"&&M!=="slot")if(h.source){const X=E.sources&&E.sources[h.source],ne=X&&i.D(X.type);X?ne==="vector"&&M==="raster"?l.push(new i.V(x,h.source,`layer "${h.id}" requires a raster source`)):ne==="raster"&&M!=="raster"?l.push(new i.V(x,h.source,`layer "${h.id}" requires a vector source`)):ne!=="vector"||h["source-layer"]?ne==="raster-dem"&&M!=="hillshade"?l.push(new i.V(x,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):ne!=="raster-array"||["raster","raster-particle"].includes(M)?M!=="line"||!h.paint||!h.paint["line-gradient"]&&!h.paint["line-trim-offset"]||ne==="geojson"&&X.lineMetrics?M==="raster-particle"&&ne!=="raster-array"&&l.push(new i.V(x,h.source,`layer "${h.id}" requires a 'raster-array' source.`)):l.push(new i.V(x,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new i.V(x,h.source,"raster-array source can only be used with layer type 'raster'.")):l.push(new i.V(x,h,`layer "${h.id}" must specify a "source-layer"`)):l.push(new i.V(x,h.source,`source "${h.source}" not found`))}else l.push(new i.V(x,h,'missing required property "source"'));return l=l.concat(hr({key:x,value:h,valueSpec:L.layer,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{"*":()=>[],type:()=>jn({key:`${x}.type`,value:h.type,valueSpec:L.layer.type,style:v.style,styleSpec:v.styleSpec,object:h,objectKey:"type"}),filter:X=>on(i.C({layerType:M},X)),layout:X=>hr({layer:h,key:X.key,value:X.value,valueSpec:{},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":ne=>Ln(i.C({layerType:M},ne))}}),paint:X=>hr({layer:h,key:X.key,value:X.value,valueSpec:{},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":ne=>Sn(i.C({layerType:M,layer:h},ne))}})}})),l}function ar(v){const l=v.value,h=v.key,x=i.B(l);return x!=="string"?[new i.V(h,l,`string expected, ${x} found`)]:[]}const Yt={promoteId:function({key:v,value:l}){if(i.B(l)==="string")return ar({key:v,value:l});{const h=[];for(const x in l)h.push(...ar({key:`${v}.${x}`,value:l[x]}));return h}}};function Gr(v){const l=v.value,h=v.key,x=v.styleSpec,E=v.style;if(!l.type)return[new i.V(h,l,'"type" is required')];const L=i.D(l.type);let M=[];switch(["vector","raster","raster-dem","raster-array"].includes(L)&&(l.url||l.tiles||M.push(new i.A(h,l,'Either "url" or "tiles" is required.'))),L){case"vector":case"raster":case"raster-dem":case"raster-array":return M=M.concat(hr({key:h,value:l,valueSpec:x[`source_${L.replace("-","_")}`],style:v.style,styleSpec:x,objectElementValidators:Yt})),M;case"geojson":if(M=hr({key:h,value:l,valueSpec:x.source_geojson,style:E,styleSpec:x,objectElementValidators:Yt}),l.cluster)for(const q in l.clusterProperties){const[X,ne]=l.clusterProperties[q],ae=typeof X=="string"?[X,["accumulated"],["get",q]]:X;M.push(...rr({key:`${h}.${q}.map`,value:ne,expressionContext:"cluster-map"})),M.push(...rr({key:`${h}.${q}.reduce`,value:ae,expressionContext:"cluster-reduce"}))}return M;case"video":return hr({key:h,value:l,valueSpec:x.source_video,style:E,styleSpec:x});case"image":return hr({key:h,value:l,valueSpec:x.source_image,style:E,styleSpec:x});case"canvas":return[new i.V(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Nr({key:`${h}.type`,value:l.type,valueSpec:{values:Wr(x)},style:E,styleSpec:x})}}function Wr(v){return v.source.reduce((l,h)=>{const x=v[h];return x.type.type==="enum"&&(l=l.concat(Object.keys(x.type.values))),l},[])}function On(v){const l=v.value,h=v.styleSpec,x=h.light,E=v.style;let L=[];const M=i.B(l);if(l===void 0)return L;if(M!=="object")return L=L.concat([new i.V("light",l,`object expected, ${M} found`)]),L;for(const q in l){const X=q.match(/^(.*)-transition$/);L=L.concat(X&&x[X[1]]&&x[X[1]].transition?jn({key:q,value:l[q],valueSpec:h.transition,style:E,styleSpec:h}):x[q]?jn({key:q,value:l[q],valueSpec:x[q],style:E,styleSpec:h}):[new i.V(q,l[q],`unknown property "${q}"`)])}return L}function mn(v){const l=v.value;let h=[];if(!l)return h;const x=i.B(l);if(x!=="object")return h=h.concat([new i.V("light-3d",l,`object expected, ${x} found`)]),h;const E=v.styleSpec,L=E["light-3d"],M=v.key,q=v.style,X=v.style.lights;for(const xe of["type","id"])if(!(xe in l))return h=h.concat([new i.V("light-3d",l,`missing property ${xe} on light`)]),h;if(l.type&&X)for(let xe=0;xe<v.arrayIndex;xe++){const Ce=i.D(l.type),Ee=X[xe];i.D(Ee.type)===Ce&&h.push(new i.V(M,l.id,`duplicate light type "${l.type}", previously defined at line ${Ee.id.__line__}`))}const ne=`properties_light_${l.type}`;if(!(ne in E))return h=h.concat([new i.V("light-3d",l,`Invalid light type ${l.type}`)]),h;const ae=E[ne];for(const xe in l)if(xe==="properties"){const Ce=l[xe],Ee=i.B(Ce);if(Ee!=="object")return h=h.concat([new i.V("properties",Ce,`object expected, ${Ee} found`)]),h;for(const Ge in Ce)h=h.concat(ae[Ge]?jn({key:Ge,value:Ce[Ge],valueSpec:ae[Ge],style:q,styleSpec:E}):[new i.A(v.key,Ce[Ge],`unknown property "${Ge}"`)])}else{const Ce=xe.match(/^(.*)-transition$/);h=h.concat(Ce&&L[Ce[1]]&&L[Ce[1]].transition?jn({key:xe,value:l[xe],valueSpec:E.transition,style:q,styleSpec:E}):L[xe]?jn({key:xe,value:l[xe],valueSpec:L[xe],style:q,styleSpec:E}):[new i.A(xe,l[xe],`unknown property "${xe}"`)])}return h}function Hn(v){const l=v.value,h=v.key,x=v.style,E=v.styleSpec,L=E.terrain;let M=[];const q=i.B(l);if(l===void 0||q==="null")return M;if(q!=="object")return M=M.concat([new i.V("terrain",l,`object expected, ${q} found`)]),M;for(const X in l){const ne=X.match(/^(.*)-transition$/);M=M.concat(ne&&L[ne[1]]&&L[ne[1]].transition?jn({key:X,value:l[X],valueSpec:E.transition,style:x,styleSpec:E}):L[X]?jn({key:X,value:l[X],valueSpec:L[X],style:x,styleSpec:E}):[new i.A(X,l[X],`unknown property "${X}"`)])}if(l.source){const X=x.sources&&x.sources[l.source],ne=X&&i.D(X.type);X?ne!=="raster-dem"&&M.push(new i.V(h,l.source,`terrain cannot be used with a source of type ${String(ne)}, it only be used with a "raster-dem" source type`)):M.push(new i.V(h,l.source,`source "${l.source}" not found`))}else M.push(new i.V(h,l,'terrain is missing required property "source"'));return M}function Vi(v){const l=v.value,h=v.style,x=v.styleSpec,E=x.fog;let L=[];const M=i.B(l);if(l===void 0)return L;if(M!=="object")return L=L.concat([new i.V("fog",l,`object expected, ${M} found`)]),L;for(const q in l){const X=q.match(/^(.*)-transition$/);L=L.concat(X&&E[X[1]]&&E[X[1]].transition?jn({key:q,value:l[q],valueSpec:x.transition,style:h,styleSpec:x}):E[q]?jn({key:q,value:l[q],valueSpec:E[q],style:h,styleSpec:x}):[new i.A(q,l[q],`unknown property "${q}"`)])}return L}const Bn={"*":()=>[],array:Dt,boolean:function(v){const l=v.value,h=v.key,x=i.B(l);return x!=="boolean"?[new i.V(h,l,`boolean expected, ${x} found`)]:[]},number:vt,color:function(v){const l=v.key,h=v.value,x=i.B(h);return x!=="string"?[new i.V(l,h,`color expected, ${x} found`)]:i.U.parseCSSColor(h)===null?[new i.V(l,h,`color expected, "${h}" found`)]:[]},enum:Nr,filter:on,function:Kt,layer:ln,object:hr,source:Gr,model:i.Z,light:On,"light-3d":mn,terrain:Hn,fog:Vi,string:ar,formatted:function(v){return ar(v).length===0?[]:rr(v)},resolvedImage:function(v){return ar(v).length===0?[]:rr(v)},projection:function(v){const l=v.value,h=v.styleSpec,x=h.projection,E=v.style;let L=[];const M=i.B(l);if(M==="object")for(const q in l)L=L.concat(jn({key:q,value:l[q],valueSpec:x[q],style:E,styleSpec:h}));else M!=="string"&&(L=L.concat([new i.V("projection",l,`object or string expected, ${M} found`)]));return L},import:function(v){const{value:l,styleSpec:h}=v,{data:x,...E}=l;Object.defineProperty(E,"__line__",{value:l.__line__,enumerable:!1});let L=hr(i.C({},v,{value:E,valueSpec:h.import}));return i.D(E.id)===""&&L.push(new i.V(`${v.key}.id`,E,"import id can't be an empty string")),x&&(L=L.concat(Gi(x,h,{key:`${v.key}.data`}))),L}};function jn(v,l=!1){const h=v.value,x=v.valueSpec,E=v.styleSpec;if(x.expression&&i.X(i.D(h)))return Kt(v);if(x.expression&&i.J(i.K(h)))return rr(v);if(x.type&&Bn[x.type]){const L=Bn[x.type](v);return l===!0&&L.length>0&&i.B(v.value)==="array"?rr(v):L}return hr(i.C({},v,{valueSpec:x.type?E[x.type]:x}))}function Dn(v){const l=v.value,h=v.key,x=ar(v);return x.length||(l.indexOf("{fontstack}")===-1&&x.push(new i.V(h,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&x.push(new i.V(h,l,'"glyphs" url must include a "{range}" token'))),x}function Gi(v,l=i._,h={}){return jn({key:h.key||"",value:v,valueSpec:l.$root,styleSpec:l,style:v,objectElementValidators:{glyphs:Dn,"*":()=>[]}})}function Rn(v,l=i._){return Ct(Gi(v,l))}const Zr=v=>Ct(Gr(v)),Pr=v=>Ct(On(v)),un=v=>Ct(mn(v)),Ii=v=>Ct(Hn(v)),ri=v=>Ct(Vi(v)),ur=v=>Ct(ln(v)),We=v=>Ct(on(v)),qe=v=>Ct(Sn(v)),pt=v=>Ct(Ln(v)),Lt=v=>Ct(i.Z(v));function Ct(v){return v.slice().sort((l,h)=>l.line&&h.line?l.line-h.line:0)}function kt(v,l){let h=!1;if(l&&l.length)for(const x of l)x instanceof i.A?i.w(x.message):(v.fire(new i.t(new Error(x.message))),h=!0);return h}let Wt;class Rt extends i.E{constructor(l,h="flat"){super(),this._transitionable=new i.$(Wt||(Wt=new i.a0({anchor:new i.a1(i._.light.anchor),position:new i.a2(i._.light.position),color:new i.a1(i._.light.color),intensity:new i.a1(i._.light.intensity)}))),this.setLight(l,h),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h,x={}){this._validate(Pr,l,x)||(this._transitionable.setTransitionOrValue(l),this.id=h)}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,x){return(!x||x.validate!==!1)&&kt(this,l.call(Rn,i.l({value:h,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}const fr=new i.a0({source:new i.a1(i._.terrain.source),exaggeration:new i.a1(i._.terrain.exaggeration)});let xr=class extends i.E{constructor(v,l,h,x){super(),this.scope=h,this._transitionable=new i.$(fr,h,x),this._transitionable.setTransitionOrValue(v,x),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(v,l){this._transitionable.setTransitionOrValue(v,l)}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}getExaggeration(v){return this._transitioning.possiblyEvaluate(new i.a3(v)).get("exaggeration")}isZoomDependent(){const v=this._transitionable._values.exaggeration;return v!=null&&v.value!=null&&v.value.expression!=null&&v.value.expression instanceof i.a4}};const pr=45,Lr=65,rn=.05;function sn(v,l,h,x){const E=i.a7(pr,Lr,h),[L,M]=_n(v,x);let q=1-Math.min(1,Math.exp((l-L)/(M-L)*-6));return q*=q*q,q=Math.min(1,1.00747*q),q*E*v.alpha}function _n(v,l){const h=.5/Math.tan(.5*l);return[v.range[0]+h,v.range[1]+h]}function Un(v,l,h,x,E){const L=i.a6.vec3.transformMat4([],[l,h,x],E.mercatorFogMatrix);return sn(v,i.a6.vec3.length(L),E.pitch,E._fov)}function qn(v,l,h,x,E,L,M){const q=[[h,x,0],[E,x,0],[E,L,0],[h,L,0]];let X=Number.MAX_VALUE,ne=-Number.MAX_VALUE;for(const ae of q){const xe=i.a6.vec3.transformMat4([],ae,l),Ce=i.a6.vec3.length(xe);X=Math.min(X,Ce),ne=Math.max(ne,Ce)}return[sn(v,X,M.pitch,M._fov),sn(v,ne,M.pitch,M._fov)]}const Wn=new i.a0({range:new i.a1(i._.fog.range),color:new i.a1(i._.fog.color),"high-color":new i.a1(i._.fog["high-color"]),"space-color":new i.a1(i._.fog["space-color"]),"horizon-blend":new i.a1(i._.fog["horizon-blend"]),"star-intensity":new i.a1(i._.fog["star-intensity"]),"vertical-range":new i.a1(i._.fog["vertical-range"])});class Pi extends i.E{constructor(l,h,x,E){super(),this._transitionable=new i.$(Wn,x,new Map(E)),this.set(l,E),this._transitioning=this._transitionable.untransitioned(),this._transform=h,this.properties=new i.a8(Wn),this.scope=x}get state(){const l=this._transform,h=l.projection.name==="globe",x=i.a9(l.zoom),E=this.properties.get("range"),L=[.5,3];return{range:h?[i.aa(L[0],E[0],x),i.aa(L[1],E[1],x)]:E,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,h,x={}){if(this._validate(ri,l,x))return;const E=i.l({},l);for(const L of Object.keys(i._.fog))E[L]===void 0&&(E[L]=i._.fog[L].default);this._options=E,this._transitionable.setTransitionOrValue(this._options,h)}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.a7(pr,Lr,l))*h.a}getOpacityAtLatLng(l,h){return this._transform.projection.supportsFog?function(x,E,L){const M=i.a5.fromLngLat(E),q=L.elevation?L.elevation.getAtPointOrZero(M):0;return Un(x,M.x,M.y,q,L)}(this.state,l,h):0}getOpacityForTile(l){if(!this._transform.projection.supportsFog)return[1,1];const h=this._transform.calculateFogTileMatrix(l.toUnwrapped());return qn(this.state,h,0,0,i.ab,i.ab,this._transform)}getOpacityForBounds(l,h,x,E,L){return this._transform.projection.supportsFog?qn(this.state,l,h,x,E,L,this._transform):[1,1]}getFovAdjustedRange(l){return this._transform.projection.supportsFog?_n(this.state,l):[0,1]}isVisibleOnFrustum(l){if(!this._transform.projection.supportsFog)return!1;const h=[4,5,6,7];for(const x of h){const E=l.points[x];let L;if(E[2]>=0)L=E;else{const M=l.points[x-4];L=i.ac(M,E,M[2]/(M[2]-E[2]))}if(Un(this.state,L[0],L[1],0,this._transform)>=rn)return!0}return!1}updateConfig(l){this._transitionable.setTransitionOrValue(this._options,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,x){return(!x||x.validate!==!1)&&kt(this,l.call(Rn,i.l({value:h,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}class $i extends i.E{constructor(l,h,x,E){super(),this.scope=x,this._options=l,this.properties=new i.a8(h),this._transitionable=new i.$(h,x,new Map(E)),this._transitionable.setTransitionOrValue(l.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(l){this._transitionable.setTransitionOrValue(this._options.properties,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(l,h){this._options=l,this._transitionable.setTransitionOrValue(l.properties,h)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let Kn,Yi;class Ss{constructor(l,h,x,E){this.screenBounds=l,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=x,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(l,h){let x,E;if(l instanceof i.P||typeof l[0]=="number"){const L=i.P.convert(l);x=[L],E=h.isPointAboveHorizon(L)}else{const L=i.P.convert(l[0]),M=i.P.convert(l[1]);x=[L,M],E=i.ae(L,M).every(q=>h.isPointAboveHorizon(q))}return new Ss(x,h.getCameraPoint(),E,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return i.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const h=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],E=i.ae(h,x,0,!1);return this.cameraPoint.y>x.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<x.x?E.splice(3,0,this.cameraPoint):this.cameraPoint.x>=x.x?E[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(E[3]=this.cameraPoint)),i.af(E,l)}bufferedCameraGeometryGlobe(l){const h=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],E=i.ae(h,x,l),L=this.cameraPoint.clone();switch(3*((L.y>h.y)+(L.y>x.y))+((L.x>h.x)+(L.x>x.x))){case 0:E[0]=L,E[4]=L.clone();break;case 1:E.splice(1,0,L);break;case 2:E[1]=L;break;case 3:E.splice(4,0,L);break;case 5:E.splice(2,0,L);break;case 6:E[3]=L;break;case 7:E.splice(3,0,L);break;case 8:E[2]=L}return E}containsTile(l,h,x,E=0){const L=l.queryPadding/h._pixelsPerMercatorPixel+1,M=x?this._bufferedCameraMercator(L,h):this._bufferedScreenMercator(L,h);let q=l.tileID.wrap+(M.unwrapped?E:0);const X=M.polygon.map(Ye=>i.ag(l.tileTransform,Ye,q));if(!i.ah(X,0,0,i.ab,i.ab))return;q=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?E:0);const ne=this.screenGeometryMercator.polygon.map(Ye=>i.ai(l.tileTransform,Ye,q)),ae=ne.map(Ye=>new i.P(Ye[0],Ye[1])),xe=h.getFreeCameraOptions().position||new i.a5(0,0,0),Ce=i.ai(l.tileTransform,xe,q),Ee=ne.map(Ye=>{const Je=i.a6.vec3.sub(Ye,Ye,Ce);return i.a6.vec3.normalize(Je,Je),new i.aj(Ce,Je)}),Ge=i.ak(l,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:ae,tilespaceRays:Ee,bufferedTilespaceGeometry:X,bufferedTilespaceBounds:($e=i.al(X),$e.min.x=i.ap($e.min.x,0,i.ab),$e.min.y=i.ap($e.min.y,0,i.ab),$e.max.x=i.ap($e.max.x,0,i.ab),$e.max.y=i.ap($e.max.y,0,i.ab),$e),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:Ge};var $e}_bufferedScreenMercator(l,h){const x=rs(l);if(this._screenRaycastCache[x])return this._screenRaycastCache[x];{let E;return E=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),h):{polygon:this.bufferedScreenGeometry(l).map(L=>h.pointCoordinate3D(L)),unwrapped:!0},this._screenRaycastCache[x]=E,E}}_bufferedCameraMercator(l,h){const x=rs(l);if(this._cameraRaycastCache[x])return this._cameraRaycastCache[x];{let E;return E=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),h):{polygon:this.bufferedCameraGeometry(l).map(L=>h.pointCoordinate3D(L)),unwrapped:!0},this._cameraRaycastCache[x]=E,E}}_projectAndResample(l,h){const x=function(L,M){const q=i.a6.mat4.multiply([],M.pixelMatrix,M.globeMatrix),X=[0,-i.aq,0,1],ne=[0,i.aq,0,1],ae=[0,0,0,1];i.a6.vec4.transformMat4(X,X,q),i.a6.vec4.transformMat4(ne,ne,q),i.a6.vec4.transformMat4(ae,ae,q);const xe=new i.P(X[0]/X[3],X[1]/X[3]),Ce=new i.P(ne[0]/ne[3],ne[1]/ne[3]),Ee=i.an(L,xe)&&X[3]<ae[3],Ge=i.an(L,Ce)&&ne[3]<ae[3];if(!Ee&&!Ge)return null;const $e=function(Pt,Tt,jt){for(let Vt=1;Vt<Pt.length;Vt++){const Ut=Fs(Tt.pointCoordinate3D(Pt[Vt-1]).x),Ot=Fs(Tt.pointCoordinate3D(Pt[Vt]).x);if(jt<0){if(Ut<Ot)return{idx:Vt,t:-Ut/(Ot-1-Ut)}}else if(Ot<Ut)return{idx:Vt,t:(1-Ut)/(Ot+1-Ut)}}return null}(L,M,Ee?-1:1);if(!$e)return null;const{idx:Ye,t:Je}=$e;let ht=Ye>1?no(L.slice(0,Ye),M):[],gt=Ye<L.length?no(L.slice(Ye),M):[];ht=ht.map(Pt=>new i.P(Fs(Pt.x),Pt.y)),gt=gt.map(Pt=>new i.P(Fs(Pt.x),Pt.y));const ut=[...ht];ut.length===0&&ut.push(gt[gt.length-1]);const wt=i.aa(ut[ut.length-1].y,(gt.length===0?ht[0]:gt[0]).y,Je);let _t;return _t=Ee?[new i.P(0,wt),new i.P(0,0),new i.P(1,0),new i.P(1,wt)]:[new i.P(1,wt),new i.P(1,1),new i.P(0,1),new i.P(0,wt)],ut.push(..._t),gt.length===0?ut.push(ht[0]):ut.push(...gt),{polygon:ut.map(Pt=>new i.a5(Pt.x,Pt.y)),unwrapped:!1}}(l,h);if(x)return x;const E=function(L,M){let q=!1,X=-1/0,ne=0;for(let xe=0;xe<L.length-1;xe++)L[xe].x>X&&(X=L[xe].x,ne=xe);for(let xe=0;xe<L.length-1;xe++){const Ce=(ne+xe)%(L.length-1),Ee=L[Ce],Ge=L[Ce+1];Math.abs(Ee.x-Ge.x)>.5&&(Ee.x<Ge.x?(Ee.x+=1,Ce===0&&(L[L.length-1].x+=1)):(Ge.x+=1,Ce+1===L.length-1&&(L[0].x+=1)),q=!0)}const ae=i.am(M.center.lng);return q&&ae<Math.abs(ae-1)&&L.forEach(xe=>{xe.x-=1}),{polygon:L,unwrapped:q}}(no(l,h).map(L=>new i.P(Fs(L.x),L.y)),h);return{polygon:E.polygon.map(L=>new i.a5(L.x,L.y)),unwrapped:E.unwrapped}}}function no(v,l){return i.ao(v,h=>{const x=l.pointCoordinate3D(h);h.x=x.x,h.y=x.y},1/256)}function Fs(v){return v<0?1+v%1:v%1}function rs(v){return 100*v|0}function Sa(v,l,h,x,E){const L=function(q,X){if(q)return E(q);if(X){if(v.url&&X.tiles&&v.tiles&&delete v.tiles,X.variants){if(!Array.isArray(X.variants))return E(new Error("variants must be an array"));for(const ae of X.variants){if(ae==null||typeof ae!="object"||ae.constructor!==Object)return E(new Error("variant must be an object"));if(!Array.isArray(ae.capabilities))return E(new Error("capabilities must be an array"));if(ae.capabilities.length===1&&ae.capabilities[0]==="meshopt"){X=i.l(X,ae);break}}}const ne=i.ar(i.l(X,v),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);X.vector_layers&&(ne.vectorLayers=X.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(ae=>ae.id)),X.raster_layers&&(ne.rasterLayers=X.raster_layers,ne.rasterLayerIds=ne.rasterLayers.map(ae=>ae.id)),ne.tiles=l.canonicalizeTileset(ne,v.url),E(null,ne)}},M=function(q,X,ne){if(!q)return null;if(!X&&!ne)return q;ne=ne||q.worldview_default;const ae=Object.values(q.language||{});if(ae.length===0)return null;const xe=Object.values(q.worldview||{});if(xe.length===0)return null;const Ce=ae.every(Ge=>Ge===X),Ee=xe.every(Ge=>Ge===ne);return Ce&&Ee?q:X in(q.language_options||{})||ne in(q.worldview_options||{})?null:q.language_options&&q.worldview_options?q:null}(v.data,h,x);return M?i.q.frame(()=>L(null,M)):v.url?i.n(l.transformRequest(l.normalizeSourceURL(v.url,null,h,x),i.R.Source),L):i.q.frame(()=>{const{data:q,...X}=v;L(null,X)})}class Ba{constructor(l,h,x){this.bounds=i.as.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=x||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),x=Math.floor(i.am(this.bounds.getWest())*h),E=Math.floor(i.at(this.bounds.getNorth())*h),L=Math.ceil(i.am(this.bounds.getEast())*h),M=Math.ceil(i.at(this.bounds.getSouth())*h);return l.x>=x&&l.x<L&&l.y>=E&&l.y<M}}class tl extends i.E{constructor(l,h,x,E){if(super(),this.id=l,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.ar(h,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},h),this._collectResourceTiming=!!h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E),this._tileWorkers={},this._deduped=new i.au}load(l){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,x=this.map._worldview;this._tileJSONRequest=Sa(this._options,this.map._requestManager,h,x,(E,L)=>{this._tileJSONRequest=null,this._loaded=!0,E?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),x&&x.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${x}`),this.fire(new i.t(E))):L&&(i.l(this,L),L.bounds&&(this.tileBounds=new Ba(L.bounds,this.minzoom,this.maxzoom)),le(L.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),l&&l(E)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(l,h){const x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),E=this.map._requestManager.transformRequest(x,i.R.Tile),L=this.map.style?this.map.style.getLut(this.scope):null,M={request:E,data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,lut:L?{image:L.image.clone()}:null,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:l.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(M.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=h:l.request=l.actor.send("reloadTile",M,q.bind(this));else if(l.actor=this._tileWorkers[x]=this._tileWorkers[x]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",M,q.bind(this),void 0,!0);else{const X=i.aw.call({deduped:this._deduped},M,(ne,ae)=>{ne||!ae?q.call(this,ne):(M.data={cacheControl:ae.cacheControl,expires:ae.expires,rawData:ae.rawData.slice(0)},l.actor&&l.actor.send("loadTile",M,q.bind(this),void 0,!0))},!0);l.request={cancel:X}}function q(X,ne){return delete l.request,l.aborted?h(null):X&&X.status!==404?h(X):(ne&&ne.resourceTiming&&(l.resourceTiming=ne.resourceTiming),this.map._refreshExpiredTiles&&ne&&l.setExpiryData(ne),l.loadVectorData(ne,this.map.painter),i.ax(this.dispatcher),h(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,h){l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope}),l.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class go extends i.E{constructor(l,h,x,E){super(),this.id=l,this.dispatcher=x,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},h),i.l(this,i.ar(h,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._tileJSONRequest=Sa(this._options,this.map._requestManager,null,null,(h,x)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new i.t(h)):x&&(i.l(this,x),x.bounds&&(this.tileBounds=new Ba(x.bounds,this.minzoom,this.maxzoom)),le(x.tiles),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),l&&l(h)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,h){const x=i.q.devicePixelRatio>=2,E=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),x,this.tileSize);l.request=i.o(this.map._requestManager.transformRequest(E,i.R.Tile),(L,M,q,X)=>(delete l.request,l.aborted?(l.state="unloaded",h(null)):L?(l.state="errored",h(L)):M?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:q,expires:X}),l.setTexture(M,this.map.painter),l.state="loaded",i.ax(this.dispatcher),void h(null)):h(null)))}abortTile(l,h){l.request&&(l.request.cancel(),delete l.request),h&&h()}unloadTile(l,h){l.texture&&l.texture instanceof i.T?(l.destroy(!0),l.texture&&l.texture instanceof i.T&&this.map.painter.saveTileTexture(l.texture)):l.destroy(),h&&h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Sl extends go{constructor(l,h,x,E){super(l,h,x,E),this.type="raster-array",this.maxzoom=22,this._options=i.l({type:"raster-array"},h)}triggerRepaint(l){const h=this.map.painter._terrain,x=this.map.style.getSourceCache(this.id);h&&h.enabled&&x&&h._clearRenderCacheForTile(x.id,l.tileID),this.map.triggerRepaint()}loadTile(l,h){const x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),E=this.map._requestManager.transformRequest(x,i.R.Tile);l.requestParams=E,l.actor||(l.actor=this.dispatcher.getActor()),l.request=l.fetchHeader(void 0,(L,M,q,X)=>{if(delete l.request,l.aborted)return l.state="unloaded",h(null);if(L)return L.code===20?void 0:(l.state="errored",h(L));this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:q,expires:X}),l.state="empty",h(null)})}unloadTile(l,h){const x=l.texture;x&&x instanceof i.T?(l.destroy(!0),this.map.painter.saveTileTexture(x)):(l.destroy(),l.flushQueues(),l._isHeaderLoaded=!1,delete l._mrt,delete l.textureDescriptor),l.fbo&&(l.fbo.destroy(),delete l.fbo),delete l.request,delete l.requestParams,delete l.neighboringTiles,l.state="unloaded"}prepareTile(l,h,x){l._isHeaderLoaded&&(l.state!=="empty"&&(l.state="reloading"),l.fetchBand(h,x,(E,L)=>{if(E)return l.state="errored",this.fire(new i.t(E)),void this.triggerRepaint(l);L&&(l.setTexture(L,this.map.painter),l.state="loaded",this.triggerRepaint(l))}))}getInitialBand(l){if(!this.rasterLayers)return 0;const h=this.rasterLayers.find(({id:L})=>L===l),x=h&&h.fields,E=x&&x.bands&&x.bands;return E?E[0]:0}getTextureDescriptor(l,h,x){if(!l)return;const E=h.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!E)return;let L=null;h instanceof i.aB?L=h.paint.get("raster-array-band"):h instanceof i.aC&&(L=h.paint.get("raster-particle-array-band"));const M=L||this.getInitialBand(E);if(M!=null)if(l.textureDescriptor){if(!l.updateNeeded(E,M)||x)return Object.assign({},l.textureDescriptor,{texture:l.texture})}else this.prepareTile(l,E,M)}}const sa={vector:tl,raster:go,"raster-dem":class extends go{constructor(v,l,h,x){super(v,l,h,x),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(v,l){const h=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function x(E,L){E&&(v.state="errored",l(E)),L&&(v.dem=L,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",l(null))}v.request=i.o(this.map._requestManager.transformRequest(h,i.R.Tile),(function(E,L,M,q){if(delete v.request,v.aborted)v.state="unloaded",l(null);else if(E)v.state="errored",l(E);else if(L){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:M,expires:q});const X=ImageBitmap&&L instanceof ImageBitmap&&i.ay(),ne=1-(L.width-i.az(L.width))/2;ne<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const ae=X?L:i.q.getImageData(L,ne),xe={uid:v.uid,coord:v.tileID,source:this.id,scope:this.scope,rawImageData:ae,encoding:this.encoding,padding:ne};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",xe,x.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(v){const l=v.canonical,h=Math.pow(2,l.z),x=(l.x-1+h)%h,E=l.x===0?v.wrap-1:v.wrap,L=(l.x+1+h)%h,M=l.x+1===h?v.wrap+1:v.wrap,q={};return q[new i.aA(v.overscaledZ,E,l.z,x,l.y).key]={backfilled:!1},q[new i.aA(v.overscaledZ,M,l.z,L,l.y).key]={backfilled:!1},l.y>0&&(q[new i.aA(v.overscaledZ,E,l.z,x,l.y-1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,v.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,M,l.z,L,l.y-1).key]={backfilled:!1}),l.y+1<h&&(q[new i.aA(v.overscaledZ,E,l.z,x,l.y+1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,v.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,M,l.z,L,l.y+1).key]={backfilled:!1}),q}},"raster-array":Sl,geojson:class extends i.E{constructor(v,l,h,x){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(x),this._data=l.data,this._options=i.l({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.minzoom!==void 0&&(this.minzoom=l.minzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const E=i.ab/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*E,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*E,extent:i.ab,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:i.ab,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*E,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter,dynamic:l.dynamic},l.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}updateData(v){if(!this._options.dynamic)return this.fire(new i.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof v!="string"&&(v.type==="Feature"&&(v={type:"FeatureCollection",features:[v]}),v.type!=="FeatureCollection"))return this.fire(new i.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof v!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const l=new Map;for(const h of this._data.features)l.set(h.id,h);for(const h of v.features)l.set(h.id,h);this._data.features=[...l.values()]}else this._data=v;return this._updateWorkerData(!0),this}getClusterExpansionZoom(v,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterChildren(v,l){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterLeaves(v,l,h,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:v,limit:l,offset:h},x),this}_updateWorkerData(v=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.x("dataloading",{dataType:"source"})),this._loaded=!1;const l=i.l({append:v},this.workerOptions);l.scope=this.scope;const h=this._data;typeof h=="string"?(l.request=this.map._requestManager.transformRequest(i.q.resolveURL(h),i.R.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(h),this._pendingLoad=this.actor.send(`${this.type}.loadData`,l,(x,E)=>{if(this._loaded=!0,this._pendingLoad=null,x)this.fire(new i.t(x));else{const L={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&E&&E.resourceTiming&&E.resourceTiming[this.id]&&(L.resourceTiming=E.resourceTiming[this.id]),v&&(this._partialReload=!0),this.fire(new i.x("data",L)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(v),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(v,l){const h=v.actor?"reloadTile":"loadTile";v.actor=this.actor;const x=this.map.style?this.map.style.getLut(this.scope):null,E=this._partialReload,L={type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:x?{image:x.image.clone()}:null,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:E};v.request=this.actor.send(h,L,(M,q)=>E&&!q?(v.state="loaded",l(null)):(delete v.request,v.destroy(),v.aborted?l(null):M?l(M):(v.loadVectorData(q,this.map.painter,h==="reloadTile"),l(null))),void 0,h==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v,l){this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id,scope:this.scope}),v.destroy()}onRemove(v){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aD{constructor(v,l,h,x){super(v,l,h,x),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const l of v.urls)this.urls.push(this.map._requestManager.transformRequest(l,i.R.Source).url);i.aE(this.urls,(l,h)=>{this._loaded=!0,l?this.fire(new i.t(l)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const l=this.video.seekable;v<l.start(0)||v>l.end(0)?this.fire(new i.t(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,l=v.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(v,this.video,l.RGBA8),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aD,model:class extends i.E{constructor(v,l,h,x){super(),this.id=v,this.type="model",this.models=[],this._loaded=!1,this._options=l}load(){const v=[];for(const l in this._options.models){const h=this._options.models[l],x=i.aG(this.map._requestManager.transformRequest(h.uri,i.R.Model).url).then(E=>{if(!E)return;const L=i.aH(E),M=new i.aI(l,h.position,h.orientation,L);M.computeBoundsAndApplyParent(),this.models.push(M)}).catch(E=>{this.fire(new i.t(new Error(`Could not load model ${l} from ${h.uri}: ${E.message}`)))});v.push(x)}return Promise.allSettled(v).then(()=>{this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(l=>{this.fire(new i.t(new Error(`Could not load models: ${l.message}`)))})}onAdd(v){this.map=v,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(v,l){}serialize(){return{type:"model"}}},"batched-model":class extends i.E{constructor(v,l,h,x){super(),this.type="batched-model",this.id=v,this.tileSize=512,this._options=l,this.tiles=this._options.tiles,this.maxzoom=l.maxzoom||19,this.minzoom=l.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=h,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(x)}onAdd(v){this.map=v,this.load()}load(v){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,h=this.map._worldview;this._tileJSONRequest=Sa(this._options,this.map._requestManager,l,h,(x,E)=>{this._tileJSONRequest=null,this._loaded=!0,x?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),h&&h.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${h}`),this.fire(new i.t(x))):E&&(i.l(this,E),E.bounds&&(this.tileBounds=new Ba(E.bounds,this.minzoom,this.maxzoom)),le(E.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),v&&v(x)})}hasTransition(){return!1}hasTile(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)}loaded(){return this._loaded}loadTile(v,l){const h=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(h,i.R.Tile),data:void 0,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,tileSize:this.tileSize*v.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:v.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(v.actor&&v.state!=="expired")if(v.state==="loading")v.reloadCallback=l;else{if(v.buckets){const L=Object.values(v.buckets);for(const M of L)M.dirty=!0;return void(v.state="loaded")}v.request=v.actor.send("reloadTile",x,E.bind(this))}else v.actor=this.dispatcher.getActor(),v.request=v.actor.send("loadTile",x,E.bind(this),void 0,!0);function E(L,M){return v.aborted?l(null):L&&L.status!==404?l(L):(M&&(M.resourceTiming&&(v.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&v.setExpiryData(M),v.buckets={...v.buckets,...M.buckets},M.featureIndex&&(v.latestFeatureIndex=M.featureIndex)),v.state="loaded",void l(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aD{constructor(v,l,h,x){super(v,l,h,x),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(L=>typeof L!="number"))||this.fire(new i.t(new i.V(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.t(new i.V(`sources.${v}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new i.t(new i.V(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new i.t(new i.V(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.t(new i.V(`sources.${v}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(v){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?!v&&!this._playing||this.texture instanceof i.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(l,this.canvas,l.gl.RGBA8,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends i.E{constructor(v,l,h,x){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=l,this.setEventedParent(x),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ba(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.ar(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this.map=v,this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:l,y:h,z:x}=v.canonical;return this._implementation.hasTile({x:l,y:h,z:x})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,l){const{x:h,y:x,z:E}=v.tileID.canonical,L=new AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:h,y:x,z:E},{signal:L.signal})).then((function(M){return delete v.request,v.aborted?(v.state="unloaded",l(null)):M===void 0?(v.state="errored",l(null)):M===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",l(null)):function(q){return q instanceof ImageData||q instanceof HTMLCanvasElement||q instanceof ImageBitmap||q instanceof HTMLImageElement}(M)?(this.loadTileData(v,M),v.state="loaded",void l(null)):(v.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(M=>{M.code!==20&&(v.state="errored",l(M))}),v.request.cancel=()=>L.abort()}loadTileData(v,l){v.setTexture(l,this.map.painter)}unloadTile(v,l){if(v.texture&&v.texture instanceof i.T?(v.destroy(!0),v.texture&&v.texture instanceof i.T&&this.map.painter.saveTileTexture(v.texture)):v.destroy(),this._implementation.unloadTile){const{x:h,y:x,z:E}=v.tileID.canonical;this._implementation.unloadTile({x:h,y:x,z:E})}l&&l()}abortTile(v,l){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),l&&l()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z}))}_clearTiles(){const v=i.av(this.id,this.scope);this.map.style.clearSource(v)}_update(){this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}}},Ha=function(v,l,h,x){const E=new sa[l.type](v,l,h,x);if(E.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${E.id}`);return i.aJ(["load","abort","unload","serialize","prepare"],E),E};function qi(v,l){const h=i.a6.mat4.identity([]);return i.a6.mat4.scale(h,h,[.5*v.width,.5*-v.height,1]),i.a6.mat4.translate(h,h,[1,-1,0]),i.a6.mat4.multiply(h,h,v.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(h)}function Nc(v,l,h,x,E,L,M,q=!1){const X=v.tilesIn(x,M,q);X.sort(Ul);const ne=[];for(const xe of X)ne.push({wrappedTileID:xe.tile.tileID.wrapped().key,queryResults:xe.tile.queryRenderedFeatures(l,h,v._state,xe,E,L,qi(v.transform,xe.tile.tileID),q)});const ae=function(xe){const Ce={},Ee={};for(const Ge of xe){const $e=Ge.queryResults,Ye=Ge.wrappedTileID,Je=Ee[Ye]=Ee[Ye]||{};for(const ht in $e){const gt=$e[ht],ut=Je[ht]=Je[ht]||{},wt=Ce[ht]=Ce[ht]||[];for(const _t of gt)ut[_t.featureIndex]||(ut[_t.featureIndex]=!0,wt.push(_t))}}return Ce}(ne);for(const xe in ae)ae[xe].forEach(Ce=>{const Ee=Ce.feature,Ge=Ee.layer;Ge&&Ge.type!=="background"&&Ge.type!=="sky"&&Ge.type!=="slot"&&(Ee.source=Ge.source,Ge["source-layer"]&&(Ee.sourceLayer=Ge["source-layer"]),Ee.state=Ee.id!==void 0?v.getFeatureState(Ge["source-layer"],Ee.id):{})});return ae}function nc(v,l){const h=v.getRenderableIds().map(L=>v.getTileByID(L)),x=[],E={};for(let L=0;L<h.length;L++){const M=h[L],q=M.tileID.canonical.key;E[q]||(E[q]=!0,M.querySourceFeatures(x,l))}return x}function Ul(v,l){const h=v.tileID,x=l.tileID;return h.overscaledZ-x.overscaledZ||h.canonical.y-x.canonical.y||h.wrap-x.wrap||h.canonical.x-x.canonical.x}const Xo=32,Pa=33,Ai=new Uint16Array(8184);for(let v=0;v<2046;v++){let l=v+2,h=0,x=0,E=0,L=0,M=0,q=0;for(1&l?E=L=M=Xo:h=x=q=Xo;(l>>=1)>1;){const ne=h+E>>1,ae=x+L>>1;1&l?(E=h,L=x,h=M,x=q):(h=E,x=L,E=M,L=q),M=ne,q=ae}const X=4*v;Ai[X+0]=h,Ai[X+1]=x,Ai[X+2]=E,Ai[X+3]=L}const So=new Uint16Array(2178),xs=new Uint8Array(1089),Bl=new Uint16Array(1089);function Fc(v){return v===0?-.03125:v===32?.03125:0}const Cc={type:2,extent:i.ab,loadGeometry:()=>[[new i.P(0,0),new i.P(i.ab+1,0),new i.P(i.ab+1,i.ab+1),new i.P(0,i.ab+1),new i.P(0,0)]]};class ce{constructor(l,h,x,E,L){this.tileID=l,this.uid=i.aP(),this.uses=0,this.tileSize=h,this.tileZoom=x,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=L,E&&E.style&&(this._lastUpdatedBrightness=E.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",E&&E.transform&&(this.projection=E.transform.projection)}registerFadeDuration(l){const h=l+this.timeAdded;h<i.q.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aK(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(l,h,x){if(this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(E,L){const M={};if(!L)return M;for(const q of E){const X=q.layerIds.map(ne=>L.getLayer(ne)).filter(Boolean);if(X.length!==0){q.layers=X,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(ne=>X.filter(ae=>ae.id===ne)[0]));for(const ne of X)M[ne.fqid]=q}}return M}(l.buckets,h.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const L=this.buckets[E];if(L instanceof i.aR){if(this.hasSymbolBuckets=!0,!x)break;L.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const L=this.buckets[E];if(L instanceof i.aR&&L.hasRTLText){this.hasRTLText=!0,i.aS();break}}this.queryPadding=0;for(const E in this.buckets){const L=this.buckets[E],M=h.style.getOwnLayer(E);if(!M)continue;const q=M.queryRadius(L);this.queryPadding=Math.max(this.queryPadding,q)}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas),this._lastUpdatedBrightness=l.brightness}else this.collisionBoxArray=new i.aQ}unloadVectorData(){if(this.hasData()){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(l){return this.buckets[l.fqid]}upload(l){for(const E in this.buckets){const L=this.buckets[E];L.uploadPending()&&L.upload(l)}const h=l.gl,x=this.imageAtlas;if(x&&!x.uploaded){const E=!!Object.keys(x.patternPositions).length;this.imageAtlasTexture=new i.T(l,x.image,h.RGBA8,{useMipmap:E}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(l,this.glyphAtlasImage,h.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(l,this.lineAtlas.image,h.R8),this.lineAtlas.uploaded=!0)}prepare(l,h,x){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture,x),!h||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const E=h.style.getBrightness();(this._lastUpdatedBrightness||E)&&(this._lastUpdatedBrightness&&E&&Math.abs(this._lastUpdatedBrightness-E)<.001||(this._lastUpdatedBrightness=E,this.updateBuckets(h)))}queryRenderedFeatures(l,h,x,E,L,M,q,X){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:E,pixelPosMatrix:q,transform:M,params:L,tileTransform:this.tileTransform},l,h,x):{}}querySourceFeatures(l,h){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const E=x.loadVTLayers(),L=h?h.sourceLayer:"",M=E._geojsonTileLayer||E[L];if(!M)return;const q=i.aT(h&&h.filter),{z:X,x:ne,y:ae}=this.tileID.canonical,xe={z:X,x:ne,y:ae};for(let Ce=0;Ce<M.length;Ce++){const Ee=M.feature(Ce);if(q.needGeometry){const Ye=i.aU(Ee,!0);if(!q.filter(new i.a3(this.tileID.overscaledZ),Ye,this.tileID.canonical))continue}else if(!q.filter(new i.a3(this.tileID.overscaledZ),Ee))continue;const Ge=x.getId(Ee,L),$e=new i.aV(Ee,X,ne,ae,Ge);$e.tile=xe,l.push($e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const h=this.expirationTime;if(l.cacheControl){const x=i.aW(l.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const x=Date.now();let E=!1;if(this.expirationTime>x)E=!1;else if(h)if(this.expirationTime<h)E=!0;else{const L=this.expirationTime-h;L?this.expirationTime=x+Math.max(L,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,h){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(l).length!==0&&h&&this.updateBuckets(h)}updateBuckets(l){if(!this.latestFeatureIndex)return;const h=this.latestFeatureIndex.loadVTLayers(),x=l.style.listImages(),E=l.style.getBrightness();for(const L in this.buckets){if(!l.style.hasLayer(L))continue;const M=this.buckets[L],q=M.layers[0].sourceLayer||"_geojsonTileLayer",X=h[q],ne=l.style.getOwnSourceCache(M.layers[0].source);let ae={};ne&&(ae=ne._state.getState(q,void 0)),M.update(ae,X,x,this.imageAtlas&&this.imageAtlas.patternPositions||{},E),(M instanceof i.aX||M instanceof i.aY)&&l._terrain&&l._terrain.enabled&&ne&&M.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(ne.id,this.tileID);const xe=l&&l.style&&l.style.getOwnLayer(L);xe&&(this.queryPadding=Math.max(this.queryPadding,xe.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=i.q.now()+l}setTexture(l,h){const x=h.context,E=x.gl;this.texture=this.texture||h.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l):(this.texture=new i.T(x,l,E.RGBA8,{useMipmap:!0}),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE))}setDependencies(l,h){const x={};for(const E of h)x[E]=!0;this.dependencies[l]=x}hasDependency(l,h){for(const x of l){const E=this.dependencies[x];if(E){for(const L of h)if(E[L])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(l,h){if(!h||h.name==="mercator"||this._tileDebugBuffer)return;const x=i.aZ(Cc,this.tileID.canonical,this.tileTransform)[0],E=new i.a_,L=new i.a$;for(let M=0;M<x.length;M++){const{x:q,y:X}=x[M];E.emplaceBack(q,X),L.emplaceBack(M)}L.emplaceBack(0),this._tileDebugIndexBuffer=l.createIndexBuffer(L),this._tileDebugBuffer=l.createVertexBuffer(E,i.b0.members),this._tileDebugSegments=i.b1.simpleSegment(0,0,E.length,L.length)}_makeTileBoundsBuffers(l,h){if(this._tileBoundsBuffer||!h||h.name==="mercator")return;const x=i.aZ(Cc,this.tileID.canonical,this.tileTransform)[0];let E,L;if(this.isRaster){const M=function(q,X){const ne=i.aK(q,X),ae=Math.pow(2,q.z);for(let Ye=0;Ye<Pa;Ye++)for(let Je=0;Je<Pa;Je++){const ht=i.aL((q.x+(Je+Fc(Je))/Xo)/ae),gt=i.aM((q.y+(Ye+Fc(Ye))/Xo)/ae),ut=X.project(ht,gt),wt=Ye*Pa+Je;So[2*wt+0]=Math.round((ut.x*ne.scale-ne.x)*i.ab),So[2*wt+1]=Math.round((ut.y*ne.scale-ne.y)*i.ab)}xs.fill(0),Bl.fill(0);for(let Ye=2045;Ye>=0;Ye--){const Je=4*Ye,ht=Ai[Je+0],gt=Ai[Je+1],ut=Ai[Je+2],wt=Ai[Je+3],_t=ht+ut>>1,Pt=gt+wt>>1,Tt=_t+Pt-gt,jt=Pt+ht-_t,Vt=gt*Pa+ht,Ut=wt*Pa+ut,Ot=Pt*Pa+_t,sr=Math.hypot((So[2*Vt+0]+So[2*Ut+0])/2-So[2*Ot+0],(So[2*Vt+1]+So[2*Ut+1])/2-So[2*Ot+1])>=16;xs[Ot]=xs[Ot]||(sr?1:0),Ye<1022&&(xs[Ot]=xs[Ot]||xs[(gt+jt>>1)*Pa+(ht+Tt>>1)]||xs[(wt+jt>>1)*Pa+(ut+Tt>>1)])}const xe=new i.aN,Ce=new i.aO;let Ee=0;function Ge(Ye,Je){const ht=Je*Pa+Ye;return Bl[ht]===0&&(xe.emplaceBack(So[2*ht+0],So[2*ht+1],Ye*i.ab/Xo,Je*i.ab/Xo),Bl[ht]=++Ee),Bl[ht]-1}function $e(Ye,Je,ht,gt,ut,wt){const _t=Ye+ht>>1,Pt=Je+gt>>1;if(Math.abs(Ye-ut)+Math.abs(Je-wt)>1&&xs[Pt*Pa+_t])$e(ut,wt,Ye,Je,_t,Pt),$e(ht,gt,ut,wt,_t,Pt);else{const Tt=Ge(Ye,Je),jt=Ge(ht,gt),Vt=Ge(ut,wt);Ce.emplaceBack(Tt,jt,Vt)}}return $e(0,0,Xo,Xo,Xo,0),$e(Xo,Xo,0,0,0,Xo),{vertices:xe,indices:Ce}}(this.tileID.canonical,h);E=M.vertices,L=M.indices}else{E=new i.aN,L=new i.aO;for(const{x:q,y:X}of x)E.emplaceBack(q,X,0,0);const M=i.b2(E.int16,void 0,4);for(let q=0;q<M.length;q+=3)L.emplaceBack(M[q],M[q+1],M[q+2])}this._tileBoundsBuffer=l.createVertexBuffer(E,i.b3.members),this._tileBoundsIndexBuffer=l.createIndexBuffer(L),this._tileBoundsSegments=i.b1.simpleSegment(0,0,E.length,L.length)}_makeGlobeTileDebugBuffers(l,h){const x=h.projection;if(!x||x.name!=="globe"||h.freezeTileCoverage)return;const E=this.tileID.canonical,L=i.b4(E,h),M=i.b5(L),q=i.a9(h.zoom);let X;q>0&&(X=i.a6.mat4.invert(new Float64Array(16),h.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(l,E,h,M,X,q),this._makeGlobeTileDebugTextBuffer(l,E,h,M,X,q)}_globePoint(l,h,x,E,L,M,q){let X=i.b6(l,h,x);if(M){const ne=1<<x.z,ae=i.am(E.center.lng),xe=i.at(E.center.lat),Ce=(x.x+.5)/ne-ae;let Ee=0;Ce>.5?Ee=-1:Ce<-.5&&(Ee=1);let Ge=(l/i.ab+x.x)/ne+Ee,$e=(h/i.ab+x.y)/ne;Ge=(Ge-ae)*E._pixelsPerMercatorPixel+ae,$e=($e-xe)*E._pixelsPerMercatorPixel+xe;const Ye=[Ge*E.worldSize,$e*E.worldSize,0];i.a6.vec3.transformMat4(Ye,Ye,M),X=i.b7(X,Ye,q)}return i.a6.vec3.transformMat4(X,X,L)}_makeGlobeTileDebugBorderBuffer(l,h,x,E,L,M){const q=new i.a_,X=new i.a$,ne=new i.b8,ae=(Ce,Ee,Ge,$e,Ye)=>{const Je=(Ge-Ce)/(Ye-1),ht=($e-Ee)/(Ye-1),gt=q.length;for(let ut=0;ut<Ye;ut++){const wt=Ce+ut*Je,_t=Ee+ut*ht;q.emplaceBack(wt,_t);const Pt=this._globePoint(wt,_t,h,x,E,L,M);ne.emplaceBack(Pt[0],Pt[1],Pt[2]),X.emplaceBack(gt+ut)}},xe=i.ab;ae(0,0,xe,0,16),ae(xe,0,xe,xe,16),ae(xe,xe,0,xe,16),ae(0,xe,0,0,16),this._tileDebugIndexBuffer=l.createIndexBuffer(X),this._tileDebugBuffer=l.createVertexBuffer(q,i.b0.members),this._globeTileDebugBorderBuffer=l.createVertexBuffer(ne,i.b9.members),this._tileDebugSegments=i.b1.simpleSegment(0,0,q.length,X.length)}_makeGlobeTileDebugTextBuffer(l,h,x,E,L,M){const q=i.ab/4,X=new i.a_,ne=new i.aO,ae=new i.b8,xe=25;ne.reserve(32),X.reserve(xe),ae.reserve(xe);const Ce=(Ee,Ge)=>xe*Ee+Ge;for(let Ee=0;Ee<xe;Ee++){const Ge=Ee*q;for(let $e=0;$e<xe;$e++){const Ye=$e*q;X.emplaceBack(Ye,Ge);const Je=this._globePoint(Ye,Ge,h,x,E,L,M);ae.emplaceBack(Je[0],Je[1],Je[2])}}for(let Ee=0;Ee<4;Ee++)for(let Ge=0;Ge<4;Ge++){const $e=Ce(Ee,Ge),Ye=Ce(Ee,Ge+1),Je=Ce(Ee+1,Ge),ht=Ce(Ee+1,Ge+1);ne.emplaceBack($e,Ye,Je),ne.emplaceBack(Je,Ye,ht)}this._tileDebugTextIndexBuffer=l.createIndexBuffer(ne),this._tileDebugTextBuffer=l.createVertexBuffer(X,i.b0.members),this._globeTileDebugTextBuffer=l.createVertexBuffer(ae,i.b9.members),this._tileDebugTextSegments=i.b1.simpleSegment(0,0,xe,32)}destroy(l=!1){for(const h in this.buckets)this.buckets[h].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!l&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.ba.setPbf(i.bb);class Re extends ce{constructor(l,h,x,E,L){super(l,h,x,E,L),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(l,h){const x=h.context,E=x.gl;this.texture=this.texture||h.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l,{premultiply:!1}):this.texture=new i.T(x,l,E.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(l=16384,h){const x=this._mrt=new i.ba(30),E=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(l-1)}});return this.entireBuffer=null,this.request=i.bc(E,(L,M,q,X)=>{if(L)h(L);else try{const ne=x.getHeaderLength(M);if(ne>l)return void(this.request=this.fetchHeader(ne,h));x.parseHeader(M),this._isHeaderLoaded=!0;let ae=0;for(const xe of Object.values(x.layers))ae=Math.max(ae,xe.dataIndex[xe.dataIndex.length-1].last_byte);M.byteLength>=ae&&(this.entireBuffer=M),h(null,this.entireBuffer||M,q,X)}catch(ne){h(ne)}}),this.request}fetchBand(l,h,x){const E=this._mrt;if(!this._isHeaderLoaded||!E)return void x(new Error("Tile header is not ready"));const L=this.actor;if(!L)return void x(new Error("Can't fetch tile band without an actor"));let M;const q=(xe,Ce)=>{M.complete(xe,Ce),xe?x(xe):(this.updateTextureDescriptor(l,h),x(null,this.textureDescriptor&&this.textureDescriptor.img))},X=(xe,Ce)=>{if(xe)return x(xe);const Ee=L.send("decodeRasterArray",{buffer:Ce,task:M},q,void 0,!0);this._workQueue.push(()=>{Ee&&Ee.cancel(),M.cancel()})},ne=E.getLayer(l);if(!ne)return void x(new Error(`Unknown sourceLayer "${l}"`));if(ne.hasDataForBand(h))return this.updateTextureDescriptor(l,h),void x(null,this.textureDescriptor?this.textureDescriptor.img:null);const ae=ne.getDataRange([h]);if(M=E.createDecodingTask(ae),!M||M.tasks.length)if(this.flushQueues(),this.entireBuffer)X(null,this.entireBuffer.slice(ae.firstByte,ae.lastByte+1));else{const xe=Object.assign({},this.requestParams,{headers:{Range:`bytes=${ae.firstByte}-${ae.lastByte}`}}),Ce=i.bc(xe,X);this._fetchQueue.push(()=>{Ce.cancel(),M.cancel()})}else x(null)}updateNeeded(l,h){return(!this.textureDescriptor||this.textureDescriptor.band!==h||this.textureDescriptor.layer!==l)&&this.state!=="errored"}updateTextureDescriptor(l,h){if(!this._mrt)return;const x=this._mrt.getLayer(l);if(!x||!x.hasBand(h)||!x.hasDataForBand(h))return;const{bytes:E,tileSize:L,buffer:M,offset:q,scale:X}=x.getBandView(h),ne=L+2*M,ae={data:E,width:ne,height:ne},xe=this.texture;xe&&xe instanceof i.T&&xe.update(ae,{premultiply:!1}),this.textureDescriptor={layer:l,band:h,img:ae,buffer:M,offset:q,tileSize:L,format:x.pixelFormat,mix:[X,256*X,65536*X,16777216*X]}}}class At{constructor(l,h){this.max=l,this.onRemove=h,this.reset()}reset(){for(const l in this.data)for(const h of this.data[l])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(l,h,x){const E=l.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const L={value:h,timeout:void 0};if(x!==void 0&&(L.timeout=setTimeout(()=>{this.remove(l,L)},x)),this.data[E].push(L),this.order.push(E),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const h=this.data[l].shift();return h.timeout&&clearTimeout(h.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),h.value}getByKey(l){const h=this.data[l];return h?h[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,h){if(!this.has(l))return this;const x=l.wrapped().key,E=h===void 0?0:this.data[x].indexOf(h),L=this.data[x][E];return this.data[x].splice(E,1),L.timeout&&clearTimeout(L.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(L.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(l){const h=[];for(const x in this.data)for(const E of this.data[x])l(E.value)||h.push(E);for(const x of h)this.remove(x.value.tileID,x)}}class Ht{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,h,x){const E=String(h);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][E]=this.stateChanges[l][E]||{},i.l(this.stateChanges[l][E],x),this.deletedStates[l]===null){this.deletedStates[l]={};for(const L in this.state[l])L!==E&&(this.deletedStates[l][L]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][E]===null){this.deletedStates[l][E]={};for(const L in this.state[l][E])x[L]||(this.deletedStates[l][E][L]=null)}else for(const L in x)this.deletedStates[l]&&this.deletedStates[l][E]&&this.deletedStates[l][E][L]===null&&delete this.deletedStates[l][E][L]}removeFeatureState(l,h,x){if(this.deletedStates[l]===null)return;const E=String(h);if(this.deletedStates[l]=this.deletedStates[l]||{},x&&h!==void 0)this.deletedStates[l][E]!==null&&(this.deletedStates[l][E]=this.deletedStates[l][E]||{},this.deletedStates[l][E][x]=null);else if(h!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][E])for(x in this.deletedStates[l][E]={},this.stateChanges[l][E])this.deletedStates[l][E][x]=null;else this.deletedStates[l][E]=null;else this.deletedStates[l]=null}getState(l,h){const x=this.state[l]||{},E=this.stateChanges[l]||{},L=this.deletedStates[l];if(L===null)return{};if(h!==void 0){const q=String(h),X=i.l({},x[q],E[q]);if(L){const ne=L[h];if(ne===null)return{};for(const ae in ne)delete X[ae]}return X}const M=i.l({},x,E);if(L)for(const q in L)delete M[q];return M}initializeTileState(l,h){l.setFeatureState(this.state,h)}coalesceChanges(l,h){const x={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const L={};for(const M in this.stateChanges[E])this.state[E][M]||(this.state[E][M]={}),i.l(this.state[E][M],this.stateChanges[E][M]),L[M]=this.state[E][M];x[E]=L}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const L={};if(this.deletedStates[E]===null)for(const M in this.state[E])L[M]={},this.state[E][M]={};else for(const M in this.deletedStates[E]){if(this.deletedStates[E][M]===null)this.state[E][M]={};else if(this.state[E][M])for(const q of Object.keys(this.deletedStates[E][M]))delete this.state[E][M][q];L[M]=this.state[E][M]}x[E]=x[E]||{},i.l(x[E],L)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(const E in l)l[E].setFeatureState(x,h)}}class Jt extends i.E{constructor(l,h,x){super(),this.id=l,this._onlySymbols=x,h.on("data",E=>{E.dataType==="source"&&E.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),h.on("error",()=>{this._sourceErrored=!0}),this._source=h,this._tiles={},this._cache=new At(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=h.minTileCacheSize,this._maxTileCacheSize=h.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Ht,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(l){this.map=l,this._minTileCacheSize=this._minTileCacheSize===void 0&&l?l._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&l?l._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const h=this._tiles[l];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,h){return l.isSymbolTile=this._onlySymbols,l.isExtraShadowCaster=this._shadowCasterTiles[l.tileID.key],this._source.loadTile(l,h)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l)}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l)}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const x=this._tiles[h];x.upload(l),x.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return i.bd(this._tiles).map(l=>l.tileID).sort(er).map(l=>l.key)}getRenderableIds(l,h){const x=[];for(const E in this._tiles)this._isIdRenderable(+E,l,h)&&x.push(this._tiles[E]);return l?x.sort((E,L)=>{const M=E.tileID,q=L.tileID,X=new i.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),ne=new i.P(q.canonical.x,q.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-q.overscaledZ||ne.y-X.y||ne.x-X.x}).map(E=>E.tileID.key):x.map(E=>E.tileID).sort(er).map(E=>E.key)}hasRenderableParent(l){const h=this.findLoadedParent(l,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(l,h,x){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(h||!this._tiles[l].holdingForFade())&&(x||!this._shadowCasterTiles[l])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(+l,"reloading")}}_reloadTile(l,h){const x=this._tiles[l];x&&(x.state!=="loading"&&(x.state=h),this._loadTile(x,this._tileLoaded.bind(this,x,l,h)))}_tileLoaded(l,h,x,E){if(E)if(l.state="errored",E.status!==404)this._source.fire(new i.t(E,{tile:l}));else{if(this._source.fire(new i.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:l})),!(l.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const L=this.map.painter.terrain;this.update(this.transform,L.getScaledDemTileSize(),!0),L.resetTileLookupCache(this.id)}else this.update(this.transform)}else l.timeAdded=i.q.now(),x==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(h,l),this._source.type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),this._source.fire(new i.x("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id}))}_backfillDEM(l){const h=this.getRenderableIds();for(let E=0;E<h.length;E++){const L=h[E];if(l.neighboringTiles&&l.neighboringTiles[L]){const M=this.getTileByID(L);x(l,M),x(M,l)}}function x(E,L){if(!E.dem||E.dem.borderReady)return;E.needsHillshadePrepare=!0,E.needsDEMTextureUpload=!0;let M=L.tileID.canonical.x-E.tileID.canonical.x;const q=L.tileID.canonical.y-E.tileID.canonical.y,X=Math.pow(2,E.tileID.canonical.z),ne=L.tileID.key;M===0&&q===0||Math.abs(q)>1||(Math.abs(M)>1&&(Math.abs(M+X)===1?M+=X:Math.abs(M-X)===1&&(M-=X)),L.dem&&E.dem&&(E.dem.backfillBorder(L.dem,M,q),E.neighboringTiles&&E.neighboringTiles[ne]&&(E.neighboringTiles[ne].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,h,x,E){for(const L in this._tiles){let M=this._tiles[L];if(E[L]||!M.hasData()||M.tileID.overscaledZ<=h||M.tileID.overscaledZ>x)continue;let q=M.tileID;for(;M&&M.tileID.overscaledZ>h+1;){const ne=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[ne.key],M&&M.hasData()&&(q=ne)}let X=q;for(;X.overscaledZ>h;)if(X=X.scaledTo(X.overscaledZ-1),l[X.key]){E[q.key]=q;break}}}findLoadedParent(l,h){if(l.key in this._loadedParentTiles){const x=this._loadedParentTiles[l.key];return x&&x.tileID.overscaledZ>=h?x:null}for(let x=l.overscaledZ-1;x>=h;x--){const E=l.scaledTo(x),L=this._getLoadedTile(E);if(L)return L}}_getLoadedTile(l){const h=this._tiles[l.key];return h&&h.hasData()?h:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,h){h=h||this._source.tileSize;const x=Math.ceil(l.width/h)+1,E=Math.ceil(l.height/h)+1,L=Math.floor(x*E*5),M=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,L):L,q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(q)}handleWrapJump(l){const h=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,h){const x={};for(const E in this._tiles){const L=this._tiles[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+h),x[L.tileID.key]=L}this._tiles=x;for(const E in this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(const E in this._tiles)this._setTileReloadTimer(+E,this._tiles[E])}}update(l,h,x,E){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!x)return;this.updateCacheSize(l,h),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const L=this._source.type==="batched-model";let M;if(this.used||this.usedForTerrain){if(this._source.tileID)M=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(ne=>new i.aA(ne.canonical.z,ne.wrap,ne.canonical.z,ne.canonical.x,ne.canonical.y));else if(this.tileCoverLift!==0){const ne=l.clone();ne.tileCoverLift=this.tileCoverLift,M=ne.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:L}),this._source.minzoom<=1&&l.projection.name==="globe"&&(M.push(new i.aA(1,0,1,0,0)),M.push(new i.aA(1,0,1,1,0)),M.push(new i.aA(1,0,1,0,1)),M.push(new i.aA(1,0,1,1,1)))}else if(M=l.coveringTiles({tileSize:h||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:L}),this._source.hasTile){const ne=this._source.hasTile.bind(this._source);M=M.filter(ae=>ne(ae))}}else M=[];if(M.length>0&&this.castsShadows&&E&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!_r(this._source.type)){const ne=l.coveringZoomLevel({tileSize:h||this._source.tileSize,roundZoom:this._source.roundZoom&&!x}),ae=Math.min(ne,this._source.maxzoom);if(L){const xe=l.extendTileCover(M,ae);for(const Ce of xe)M.push(Ce)}else{const xe=l.extendTileCover(M,ae,E);for(const Ce of xe)this._shadowCasterTiles[Ce.key]=!0,M.push(Ce)}}const q=this._updateRetainedTiles(M);if(_r(this._source.type)&&M.length!==0){const ne={},ae={},xe=Object.keys(q);for(const Ee of xe){const Ge=q[Ee],$e=this._tiles[Ee];if(!$e||$e.fadeEndTime&&$e.fadeEndTime<=i.q.now())continue;const Ye=this.findLoadedParent(Ge,Math.max(Ge.overscaledZ-Jt.maxOverzooming,this._source.minzoom));Ye&&(this._addTile(Ye.tileID),ne[Ye.tileID.key]=Ye.tileID),ae[Ee]=Ge}const Ce=M[M.length-1].overscaledZ;for(const Ee in this._tiles){const Ge=this._tiles[Ee];if(q[Ee]||!Ge.hasData())continue;let $e=Ge.tileID;for(;$e.overscaledZ>Ce;){$e=$e.scaledTo($e.overscaledZ-1);const Ye=this._tiles[$e.key];if(Ye&&Ye.hasData()&&ae[$e.key]){q[Ee]=Ge.tileID;break}}}for(const Ee in ne)q[Ee]||(this._coveredTiles[Ee]=!0,q[Ee]=ne[Ee])}for(const ne in q)this._tiles[ne].clearFadeHold();const X=i.be(this._tiles,q);for(const ne of X){const ae=this._tiles[ne];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(+ne)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const h={};if(l.length===0)return h;const x={},E=l.reduce((ne,ae)=>Math.min(ne,ae.overscaledZ),1/0),L=l[0].overscaledZ,M=Math.max(L-Jt.maxOverzooming,this._source.minzoom),q=Math.max(L+Jt.maxUnderzooming,this._source.minzoom),X={};for(const ne of l){const ae=this._addTile(ne);h[ne.key]=ne,ae.hasData()||E<this._source.maxzoom&&(X[ne.key]=ne)}this._retainLoadedChildren(X,E,q,h);for(const ne of l){let ae=this._tiles[ne.key];if(ae.hasData())continue;if(ne.canonical.z>=this._source.maxzoom){const Ce=ne.children(this._source.maxzoom)[0],Ee=this.getTile(Ce);if(Ee&&Ee.hasData()){h[Ce.key]=Ce;continue}}else{const Ce=ne.children(this._source.maxzoom);if(h[Ce[0].key]&&h[Ce[1].key]&&h[Ce[2].key]&&h[Ce[3].key])continue}let xe=ae.wasRequested();for(let Ce=ne.overscaledZ-1;Ce>=M;--Ce){const Ee=ne.scaledTo(Ce);if(x[Ee.key]||(x[Ee.key]=!0,ae=this.getTile(Ee),!ae&&xe&&(ae=this._addTile(Ee)),ae&&(h[Ee.key]=Ee,xe=ae.wasRequested(),ae.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const h=[];let x,E=this._tiles[l].tileID;for(;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){x=this._loadedParentTiles[E.key];break}h.push(E.key);const L=E.scaledTo(E.overscaledZ-1);if(x=this._getLoadedTile(L),x)break;E=L}for(const L of h)this._loadedParentTiles[L]=x}}_addTile(l){let h=this._tiles[l.key];if(h)return h.isExtraShadowCaster!==!0||this._shadowCasterTiles[l.key]||this._reloadTile(l.key,"reloading"),h;h=this._cache.getAndRemove(l),h&&(this._setTileReloadTimer(l.key,h),h.tileID=l,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,h)));const x=!!h;if(!x){const E=this.map?this.map.painter:null,L=this._source.tileSize*l.overscaleFactor();h=this._source.type==="raster-array"?new Re(l,L,this.transform.tileZoom,E,this._isRaster):new ce(l,L,this.transform.tileZoom,E,this._isRaster),this._loadTile(h,this._tileLoaded.bind(this,h,l.key,h.state))}return h?(h.uses++,this._tiles[l.key]=h,x||this._source.fire(new i.x("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h):null}_setTileReloadTimer(l,h){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const x=h.getExpiryTimeout();x&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},x))}_removeTile(l){const h=this._tiles[l];h&&(h.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),h.uses>0||(h.hasData()&&h.state!=="reloading"||h.state==="empty"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(l,h,x){const E=[],L=this.transform;if(!L)return E;const M=L.projection.name==="globe",q=i.am(L.center.lng);for(const X in this._tiles){const ne=this._tiles[X];if(x&&ne.clearQueryDebugViz(),ne.holdingForFade())continue;let ae;if(M){const xe=ne.tileID.canonical;if(xe.z===0){const Ce=[Math.abs(i.ap(q,...fn(xe,-1))-q),Math.abs(i.ap(q,...fn(xe,1))-q)];ae=[0,2*Ce.indexOf(Math.min(...Ce))-1]}else{const Ce=[Math.abs(i.ap(q,...fn(xe,-1))-q),Math.abs(i.ap(q,...fn(xe,0))-q),Math.abs(i.ap(q,...fn(xe,1))-q)];ae=[Ce.indexOf(Math.min(...Ce))-1]}}else ae=[0];for(const xe of ae){const Ce=l.containsTile(ne,L,h,xe);Ce&&E.push(Ce)}}return E}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(l){return this._getRenderableCoordinates(l)}_getRenderableCoordinates(l,h){const x=this.getRenderableIds(l,h).map(L=>this._tiles[L].tileID),E=this.transform.projection.name==="globe";for(const L of x)L.projMatrix=this.transform.calculateProjMatrix(L.toUnwrapped()),L.expandedProjMatrix=E?this.transform.calculateProjMatrix(L.toUnwrapped(),!1,!0):L.projMatrix;return x}sortCoordinatesByDistance(l){const h=l.slice(),x=this.transform._camera.position,E=this.transform._camera.forward(),L={};for(const M of h){const q=1/(1<<M.canonical.z);L[M.key]=((M.canonical.x+.5)*q+M.wrap-x[0])*E[0]+((M.canonical.y+.5)*q-x[1])*E[1]-x[2]*E[2]}return h.sort((M,q)=>L[M.key]-L[q.key]),h}hasTransition(){if(this._source.hasTransition())return!0;if(_r(this._source.type))for(const l in this._tiles){const h=this._tiles[l];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(l,h,x){this._state.updateState(l=l||"_geojsonTileLayer",h,x)}removeFeatureState(l,h,x){this._state.removeFeatureState(l=l||"_geojsonTileLayer",h,x)}getFeatureState(l,h){return this._state.getState(l=l||"_geojsonTileLayer",h)}setDependencies(l,h,x){const E=this._tiles[l];E&&E.setDependencies(h,x)}reloadTilesForDependencies(l,h){for(const x in this._tiles)this._tiles[x].hasDependency(l,h)&&this._reloadTile(+x,"reloading");this._cache.filter(x=>!x.hasDependency(l,h))}_preloadTiles(l,h){if(!this._sourceLoaded){const X=()=>{this._sourceLoaded&&(this._source.off("data",X),this._preloadTiles(l,h))};return void this._source.on("data",X)}const x=new Map,E=Array.isArray(l)?l:[l],L=this.map.painter.terrain,M=this.usedForTerrain&&L?L.getScaledDemTileSize():this._source.tileSize;for(const X of E){const ne=X.coveringTiles({tileSize:M,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const ae of ne)x.set(ae.key,ae);this.usedForTerrain&&X.updateElevation(!1)}const q=Array.from(x.values());i.bf(q,(X,ne)=>{const ae=new ce(X,this._source.tileSize*X.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(ae,xe=>{this._source.type==="raster-dem"&&ae.dem&&this._backfillDEM(ae),ne(xe,ae)})},h)}}function er(v,l){const h=Math.abs(2*v.wrap)-+(v.wrap<0),x=Math.abs(2*l.wrap)-+(l.wrap<0);return v.overscaledZ-l.overscaledZ||x-h||l.canonical.y-v.canonical.y||l.canonical.x-v.canonical.x}function _r(v){return v==="raster"||v==="image"||v==="video"||v==="custom"}function fn(v,l){const h=1<<v.z;return[v.x/h+l,(v.x+1)/h+l]}Jt.maxOverzooming=10,Jt.maxUnderzooming=3;class pn{constructor(l){this.style=l,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const l=!1,h=!1;for(const x in this.style._mergedLayers){const E=this.style._mergedLayers[x];if(E.type==="fill-extrusion")this.layers.push({layer:E,visible:l,visibilityChanged:h});else if(E.type==="model"){const L=this.style.getLayerSource(E);L&&L.type==="batched-model"&&this.layers.push({layer:E,visible:l,visibilityChanged:h})}}}onNewFrame(l){this.layersGotHidden=!1;for(const h of this.layers){const x=h.layer;let E=!1;x.type==="fill-extrusion"?E=!x.isHidden(l)&&x.paint.get("fill-extrusion-opacity")>0:x.type==="model"&&(E=!x.isHidden(l)&&x.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!E&&h.visible,h.visible=E}}updateZOffset(l,h){this.currentBuildingBuckets=[];for(const E of this.layers){const L=E.layer,M=this.style.getLayerSourceCache(L);let q=1;L.type==="fill-extrusion"&&(q=E.visible?L.paint.get("fill-extrusion-vertical-scale"):0);let X=M?M.getTile(h):null;if(!X&&M&&h.canonical.z>M.getSource().minzoom){let ne=h.scaledTo(Math.min(M.getSource().maxzoom,h.overscaledZ-1));for(;ne.overscaledZ>=M.getSource().minzoom&&(X=M.getTile(ne),!X&&ne.overscaledZ!==0);)ne=ne.scaledTo(ne.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:X?X.getBucket(L):null,tileID:X?X.tileID:h,verticalScale:q})}l.hasAnyZOffset=!1;let x=!1;for(let E=0;E<l.symbolInstances.length;E++){const L=l.symbolInstances.get(E),M=L.zOffset,q=this._getHeightAtTileOffset(h,L.tileAnchorX,L.tileAnchorY);L.zOffset=q!==Number.NEGATIVE_INFINITY?q:M,x||M===L.zOffset||(x=!0),l.hasAnyZOffset||L.zOffset===0||(l.hasAnyZOffset=!0)}x&&(l.zOffsetBuffersNeedUpload=!0,l.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(l,h,x,E){let L=h,M=x;if(l.canonical.z!==E.canonical.z){const q=E.canonical,X=1/(1<<l.canonical.z-q.z);L=(h+l.canonical.x*i.ab)*X-q.x*i.ab|0,M=(x+l.canonical.y*i.ab)*X-q.y*i.ab|0}return{tileX:L,tileY:M}}_getHeightAtTileOffset(l,h,x){let E,L;for(let M=0;M<this.layers.length;++M){if(this.layers[M].layer.type!=="fill-extrusion")continue;const{bucket:q,tileID:X,verticalScale:ne}=this.currentBuildingBuckets[M];if(!q)continue;const{tileX:ae,tileY:xe}=this._mapCoordToOverlappingTile(l,h,x,X),Ce=q.getHeightAtTileCoord(ae,xe);Ce&&Ce.height!==void 0&&(Ce.hidden?E=Ce.height:L=Math.max(Ce.height*ne,L||0))}if(L!==void 0)return L;for(let M=0;M<this.layers.length;++M){const q=this.layers[M];if(q.layer.type!=="model"||!q.visible)continue;const{bucket:X,tileID:ne}=this.currentBuildingBuckets[M];if(!X)continue;const{tileX:ae,tileY:xe}=this._mapCoordToOverlappingTile(l,h,x,ne),Ce=X.getHeightAtTileCoord(ae,xe);if(Ce&&!Ce.hidden)return Ce.height===void 0&&E!==void 0?Math.min(Ce.maxHeight,E)*Ce.verticalScale:Ce.height?Ce.height*Ce.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Fn(v,l){const h={};for(const x in v)x!=="ref"&&(h[x]=v[x]);return i.bg.forEach(x=>{x in l&&(h[x]=l[x])}),h}function Mn(v){v=v.slice();const l=Object.create(null);for(let h=0;h<v.length;h++)l[v[h].id]=v[h];for(let h=0;h<v.length;h++)"ref"in v[h]&&(v[h]=Fn(v[h],l[v[h].ref]));return v}const Kr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Gn(v,l,h){h.push({command:Kr.addSource,args:[v,l[v]]})}function si(v,l,h){l.push({command:Kr.removeSource,args:[v]}),h[v]=!0}function ji(v,l,h,x){si(v,h,x),Gn(v,l,h)}function Sr(v,l,h){let x;for(x in v[h])if(v[h].hasOwnProperty(x)&&x!=="data"&&!i.bh(v[h][x],l[h][x]))return!1;for(x in l[h])if(l[h].hasOwnProperty(x)&&x!=="data"&&!i.bh(v[h][x],l[h][x]))return!1;return!0}function an(v,l,h,x,E,L){let M;for(M in l=l||{},v=v||{})v.hasOwnProperty(M)&&(i.bh(v[M],l[M])||h.push({command:L,args:[x,M,l[M],E]}));for(M in l)l.hasOwnProperty(M)&&!v.hasOwnProperty(M)&&(i.bh(v[M],l[M])||h.push({command:L,args:[x,M,l[M],E]}))}function ei(v){return v.id}function Ci(v,l){return v[l.id]=l,v}class Ps{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=i.ap(l,0,1);let h=1,x=this._distances[h];const E=l*this.paddedLength+this.padding;for(;x<E&&h<this._distances.length;)x=this._distances[++h];const L=h-1,M=this._distances[L],q=x-M,X=q>0?(E-M)/q:0;return this.points[L].mult(1-X).add(this.points[h].mult(X))}}class Xs{constructor(l,h,x){const E=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(l/x),this.yCellCount=Math.ceil(h/x);for(let M=0;M<this.xCellCount*this.yCellCount;M++)E.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,x,E,L){this._forEachCell(h,x,E,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(x),this.bboxes.push(E),this.bboxes.push(L)}insertCircle(l,h,x,E){this._forEachCell(h-E,x-E,h+E,x+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(x),this.circles.push(E)}_insertBoxCell(l,h,x,E,L,M){this.boxCells[L].push(M)}_insertCircleCell(l,h,x,E,L,M){this.circleCells[L].push(M)}_query(l,h,x,E,L,M){if(x<0||l>this.width||E<0||h>this.height)return!L&&[];const q=[];if(l<=0&&h<=0&&this.width<=x&&this.height<=E){if(L)return!0;for(let X=0;X<this.boxKeys.length;X++)q.push({key:this.boxKeys[X],x1:this.bboxes[4*X],y1:this.bboxes[4*X+1],x2:this.bboxes[4*X+2],y2:this.bboxes[4*X+3]});for(let X=0;X<this.circleKeys.length;X++){const ne=this.circles[3*X],ae=this.circles[3*X+1],xe=this.circles[3*X+2];q.push({key:this.circleKeys[X],x1:ne-xe,y1:ae-xe,x2:ne+xe,y2:ae+xe})}return M?q.filter(M):q}return this._forEachCell(l,h,x,E,this._queryCell,q,{hitTest:L,seenUids:{box:{},circle:{}}},M),L?q.length>0:q}_queryCircle(l,h,x,E,L){const M=l-x,q=l+x,X=h-x,ne=h+x;if(q<0||M>this.width||ne<0||X>this.height)return!E&&[];const ae=[];return this._forEachCell(M,X,q,ne,this._queryCellCircle,ae,{hitTest:E,circle:{x:l,y:h,radius:x},seenUids:{box:{},circle:{}}},L),E?ae.length>0:ae}query(l,h,x,E,L){return this._query(l,h,x,E,!1,L)}hitTest(l,h,x,E,L){return this._query(l,h,x,E,!0,L)}hitTestCircle(l,h,x,E){return this._queryCircle(l,h,x,!0,E)}_queryCell(l,h,x,E,L,M,q,X){const ne=q.seenUids,ae=this.boxCells[L];if(ae!==null){const Ce=this.bboxes;for(const Ee of ae)if(!ne.box[Ee]){ne.box[Ee]=!0;const Ge=4*Ee;if(l<=Ce[Ge+2]&&h<=Ce[Ge+3]&&x>=Ce[Ge+0]&&E>=Ce[Ge+1]&&(!X||X(this.boxKeys[Ee]))){if(q.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[Ee],x1:Ce[Ge],y1:Ce[Ge+1],x2:Ce[Ge+2],y2:Ce[Ge+3]})}}}const xe=this.circleCells[L];if(xe!==null){const Ce=this.circles;for(const Ee of xe)if(!ne.circle[Ee]){ne.circle[Ee]=!0;const Ge=3*Ee;if(this._circleAndRectCollide(Ce[Ge],Ce[Ge+1],Ce[Ge+2],l,h,x,E)&&(!X||X(this.circleKeys[Ee]))){if(q.hitTest)return M.push(!0),!0;{const $e=Ce[Ge],Ye=Ce[Ge+1],Je=Ce[Ge+2];M.push({key:this.circleKeys[Ee],x1:$e-Je,y1:Ye-Je,x2:$e+Je,y2:Ye+Je})}}}}}_queryCellCircle(l,h,x,E,L,M,q,X){const ne=q.circle,ae=q.seenUids,xe=this.boxCells[L];if(xe!==null){const Ee=this.bboxes;for(const Ge of xe)if(!ae.box[Ge]){ae.box[Ge]=!0;const $e=4*Ge;if(this._circleAndRectCollide(ne.x,ne.y,ne.radius,Ee[$e+0],Ee[$e+1],Ee[$e+2],Ee[$e+3])&&(!X||X(this.boxKeys[Ge])))return M.push(!0),!0}}const Ce=this.circleCells[L];if(Ce!==null){const Ee=this.circles;for(const Ge of Ce)if(!ae.circle[Ge]){ae.circle[Ge]=!0;const $e=3*Ge;if(this._circlesCollide(Ee[$e],Ee[$e+1],Ee[$e+2],ne.x,ne.y,ne.radius)&&(!X||X(this.circleKeys[Ge])))return M.push(!0),!0}}}_forEachCell(l,h,x,E,L,M,q,X){const ne=this._convertToXCellCoord(l),ae=this._convertToYCellCoord(h),xe=this._convertToXCellCoord(x),Ce=this._convertToYCellCoord(E);for(let Ee=ne;Ee<=xe;Ee++)for(let Ge=ae;Ge<=Ce;Ge++)if(L.call(this,l,h,x,E,this.xCellCount*Ge+Ee,M,q,X))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,x,E,L,M){const q=E-l,X=L-h,ne=x+M;return ne*ne>q*q+X*X}_circleAndRectCollide(l,h,x,E,L,M,q){const X=(M-E)/2,ne=Math.abs(l-(E+X));if(ne>X+x)return!1;const ae=(q-L)/2,xe=Math.abs(h-(L+ae));if(xe>ae+x)return!1;if(ne<=X||xe<=ae)return!0;const Ce=ne-X,Ee=xe-ae;return Ce*Ce+Ee*Ee<=x*x}}const Ro={unknown:0,flipRequired:1,flipNotRequired:2},yn=Math.tan(85*Math.PI/180);function Zn(v,l,h,x,E,L,M){const q=i.a6.mat4.create();if(h)if(L.name==="globe"){const X=i.bi(E,l);i.a6.mat4.multiply(q,q,X)}else{const X=i.a6.mat2.invert([],M);q[0]=X[0],q[1]=X[1],q[4]=X[2],q[5]=X[3],x||i.a6.mat4.rotateZ(q,q,E.angle)}else i.a6.mat4.multiply(q,E.labelPlaneMatrix,v);return q}function Ni(v,l,h,x,E,L,M){const q=Zn(v,l,h,x,E,L,M);return L.name==="globe"&&h||(q[2]=q[6]=q[10]=q[14]=0),q}function ha(v,l,h,x,E,L,M){if(h){if(L.name==="globe"){const q=Zn(v,l,h,x,E,L,M);return i.a6.mat4.invert(q,q),i.a6.mat4.multiply(q,v,q),q}{const q=i.a6.mat4.clone(v),X=i.a6.mat4.identity([]);return X[0]=M[0],X[1]=M[1],X[4]=M[2],X[5]=M[3],i.a6.mat4.multiply(q,q,X),x||i.a6.mat4.rotateZ(q,q,-E.angle),q}}return E.glCoordMatrix}function Ms(v,l,h,x){const E=[v,l,h,1];h?i.a6.vec4.transformMat4(E,E,x):$o(E,E,x);const L=E[3];return E[0]/=L,E[1]/=L,E[2]/=L,E}function hi(v,l){return Math.min(.5+v/l*.5,1.5)}function jo(v,l){const h=v[0]/v[3],x=v[1]/v[3];return h>=-l[0]&&h<=l[0]&&x>=-l[1]&&x<=l[1]}function zl(v,l,h,x,E,L,M,q,X,ne){const ae=h.transform,xe=x?v.textSizeData:v.iconSizeData,Ce=i.bj(xe,h.transform.zoom),Ee=ae.projection.name==="globe",Ge=[256/h.width*2+1,256/h.height*2+1],$e=x?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;$e.clear();let Ye=null;Ee&&(Ye=x?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const Je=v.lineVertexArray,ht=x?v.text.placedSymbolArray:v.icon.placedSymbolArray,gt=h.transform.width/h.transform.height;let ut,wt=!1;for(let _t=0;_t<ht.length;_t++){const Pt=ht.get(_t),{numGlyphs:Tt,writingMode:jt}=Pt;if(jt!==i.bk.vertical||wt||ut===i.bk.horizontal||(wt=!0),ut=jt,(Pt.hidden||jt===i.bk.vertical)&&!wt){ja(Tt,$e);continue}wt=!1;const Vt=new i.P(Pt.tileAnchorX,Pt.tileAnchorY);let{x:Ut,y:Ot,z:sr}=ae.projection.projectTilePoint(Vt.x,Vt.y,ne.canonical);if(X){const[kr,Hr,Yn]=X(Vt);Ut+=kr,Ot+=Hr,sr+=Yn}const Cr=[Ut,Ot,sr,1];if(i.a6.vec4.transformMat4(Cr,Cr,l),!jo(Cr,Ge)){ja(Tt,$e);continue}const Rr=Cr[3],wr=hi(h.transform.getCameraToCenterDistance(ae.projection),Rr),Jr=i.bl(xe,Ce,Pt),or=M?Jr/wr:Jr*wr,Fr=Ms(Ut,Ot,sr,E);if(Fr[3]<=0){ja(Tt,$e);continue}let Er={};const en=M?null:X,nn=As(Pt,or,!1,q,l,E,L,v.glyphOffsetArray,Je,$e,Ye,Fr,Vt,Er,gt,en,ae.projection,ne,M);wt=nn.useVertical,en&&nn.needsFlipping&&(Er={}),(nn.notEnoughRoom||wt||nn.needsFlipping&&As(Pt,or,!0,q,l,E,L,v.glyphOffsetArray,Je,$e,Ye,Fr,Vt,Er,gt,en,ae.projection,ne,M).notEnoughRoom)&&ja(Tt,$e)}x?(v.text.dynamicLayoutVertexBuffer.updateData($e),Ye&&v.text.globeExtVertexBuffer&&v.text.globeExtVertexBuffer.updateData(Ye)):(v.icon.dynamicLayoutVertexBuffer.updateData($e),Ye&&v.icon.globeExtVertexBuffer&&v.icon.globeExtVertexBuffer.updateData(Ye))}function oa(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e){const{lineStartIndex:Ye,glyphStartIndex:Je,segment:ht}=q,gt=Je+q.numGlyphs,ut=Ye+q.lineLength,wt=l.getoffsetX(Je),_t=l.getoffsetX(gt-1),Pt=Hl(v*wt,h,x,E,L,M,ht,Ye,ut,X,ne,ae,xe,Ce,!0,Ee,Ge,$e);if(!Pt)return null;const Tt=Hl(v*_t,h,x,E,L,M,ht,Ye,ut,X,ne,ae,xe,Ce,!0,Ee,Ge,$e);return Tt?{first:Pt,last:Tt}:null}function yo(v,l,h,x){return v===i.bk.horizontal&&Math.abs(x)>Math.abs(h)?{useVertical:!0}:v===i.bk.vertical?x>0?{needsFlipping:!0}:null:l!==Ro.unknown&&function(E,L){return E===0||Math.abs(L/E)>yn}(h,x)?l===Ro.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function As(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e,Ye,Je,ht){const gt=l/24,ut=v.lineOffsetX*gt,wt=v.lineOffsetY*gt,{lineStartIndex:_t,glyphStartIndex:Pt,numGlyphs:Tt,segment:jt,writingMode:Vt,flipState:Ut}=v,Ot=_t+v.lineLength,sr=Cr=>{if(ae){const[or,Fr,Er]=Cr.up,en=ne.length;i.bm(ae,en+0,or,Fr,Er),i.bm(ae,en+1,or,Fr,Er),i.bm(ae,en+2,or,Fr,Er),i.bm(ae,en+3,or,Fr,Er)}const[Rr,wr,Jr]=Cr.point;i.bn(ne,Rr,wr,Jr,Cr.angle)};if(Tt>1){const Cr=oa(gt,q,ut,wt,h,xe,Ce,v,X,L,Ee,$e,!1,Ye,Je,ht);if(!Cr)return{notEnoughRoom:!0};if(x&&!h){let[Rr,wr,Jr]=Cr.first.point,[or,Fr,Er]=Cr.last.point;[Rr,wr]=Ms(Rr,wr,Jr,M),[or,Fr]=Ms(or,Fr,Er,M);const en=yo(Vt,Ut,(or-Rr)*Ge,Fr-wr);if(v.flipState=en&&en.needsFlipping?Ro.flipRequired:Ro.flipNotRequired,en)return en}sr(Cr.first);for(let Rr=Pt+1;Rr<Pt+Tt-1;Rr++){const wr=Hl(gt*q.getoffsetX(Rr),ut,wt,h,xe,Ce,jt,_t,Ot,X,L,Ee,$e,!1,!1,Ye,Je,ht);if(!wr)return ne.length-=4*(Rr-Pt),{notEnoughRoom:!0};sr(wr)}sr(Cr.last)}else{if(x&&!h){const Rr=Ms(Ce.x,Ce.y,0,E),wr=_t+jt+1,Jr=new i.P(X.getx(wr),X.gety(wr)),or=Ms(Jr.x,Jr.y,0,E),Fr=or[3]>0?or:Ql(Ce,Jr,Rr,1,E,void 0,Ye,Je.canonical),Er=yo(Vt,Ut,(Fr[0]-Rr[0])*Ge,Fr[1]-Rr[1]);if(v.flipState=Er&&Er.needsFlipping?Ro.flipRequired:Ro.flipNotRequired,Er)return Er}const Cr=Hl(gt*q.getoffsetX(Pt),ut,wt,h,xe,Ce,jt,_t,Ot,X,L,Ee,$e,!1,!1,Ye,Je,ht);if(!Cr)return{notEnoughRoom:!0};sr(Cr)}return{}}function Wc(v,l,h,x,E){const{x:L,y:M,z:q}=x.projectTilePoint(v.x,v.y,l);if(!E)return Ms(L,M,q,h);const[X,ne,ae]=E(v);return Ms(L+X,M+ne,q+ae,h)}function Ql(v,l,h,x,E,L,M,q){const X=Wc(v.sub(l)._unit()._add(v),q,E,M,L);return i.a6.vec3.sub(X,h,X),i.a6.vec3.normalize(X,X),i.a6.vec3.scaleAndAdd(X,h,X,x)}function Hl(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e,Ye,Je){const ht=x?v-l:v+l;let gt=ht>0?1:-1,ut=0;x&&(gt*=-1,ut=Math.PI),gt<0&&(ut+=Math.PI);let wt=q+M+(gt>0?0:1)|0,_t=E,Pt=E,Tt=0,jt=0;const Vt=Math.abs(ht),Ut=[],Ot=[];let sr=L,Cr=sr;const Rr=()=>Ql(Cr,sr,Pt,Vt-Tt+1,ae,Ce,$e,Ye.canonical);for(;Tt+jt<=Vt;){if(wt+=gt,wt<q||wt>=X)return null;if(Pt=_t,Cr=sr,Ut.push(Pt),Ee&&Ot.push(Cr),sr=new i.P(ne.getx(wt),ne.gety(wt)),_t=xe[wt],!_t){const Hr=Wc(sr,Ye.canonical,ae,$e,Ce);_t=Hr[3]>0?xe[wt]=Hr:Rr()}Tt+=jt,jt=i.a6.vec3.distance(Pt,_t)}Ge&&Ce&&(xe[wt]&&(_t=Rr(),jt=i.a6.vec3.distance(Pt,_t)),xe[wt]=_t);const wr=(Vt-Tt)/jt,Jr=sr.sub(Cr)._mult(wr)._add(Cr),or=i.a6.vec3.sub([],_t,Pt),Fr=i.a6.vec3.scaleAndAdd([],Pt,or,wr);let Er=[0,0,1],en=or[0],nn=or[1];if(Je&&(Er=$e.upVector(Ye.canonical,Jr.x,Jr.y),Er[0]!==0||Er[1]!==0||Er[2]!==1)){const Hr=[Er[2],0,-Er[0]],Yn=i.a6.vec3.cross([],Er,Hr);i.a6.vec3.normalize(Hr,Hr),i.a6.vec3.normalize(Yn,Yn),en=i.a6.vec3.dot(or,Hr),nn=i.a6.vec3.dot(or,Yn)}if(h){const Hr=i.a6.vec3.cross([],Er,or);i.a6.vec3.normalize(Hr,Hr),i.a6.vec3.scaleAndAdd(Fr,Fr,Hr,h*gt)}const kr=ut+Math.atan2(nn,en);return Ut.push(Fr),Ee&&Ot.push(Jr),{point:Fr,angle:kr,path:Ut,tilePath:Ot,up:Er}}function ja(v,l){const h=l.length,x=h+4*v;l.resize(x),l.float32.fill(-1/0,4*h,4*x)}function $o(v,l,h){const x=l[0],E=l[1];return v[0]=h[0]*x+h[4]*E+h[12],v[1]=h[1]*x+h[5]*E+h[13],v[3]=h[3]*x+h[7]*E+h[15],v}const Ys=100;class Bo{constructor(l,h,x=new Xs(l.width+200,l.height+200,25),E=new Xs(l.width+200,l.height+200,25)){this.transform=l,this.grid=x,this.ignoredGrid=E,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Ys,this.screenBottomBoundary=l.height+Ys,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=h}placeCollisionBox(l,h,x,E,L,M,q,X){let ne=x.projectedAnchorX,ae=x.projectedAnchorY,xe=x.projectedAnchorZ;const Ce=x.elevation,Ee=x.tileID,Ge=l.getProjection();if(Ce&&Ee){const[_t,Pt,Tt]=Ge.upVector(Ee.canonical,x.tileAnchorX,x.tileAnchorY),jt=Ge.upVectorScale(Ee.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;ne+=_t*Ce*jt,ae+=Pt*Ce*jt,xe+=Tt*Ce*jt}const $e=this.projectAndGetPerspectiveRatio(q,ne,ae,xe,x.tileID,Ge.name==="globe"||!!Ce||this.transform.pitch>0,Ge),Ye=M*$e.perspectiveRatio,Je=(x.x1*h+E.x-x.padding)*Ye+$e.point.x,ht=(x.y1*h+E.y-x.padding)*Ye+$e.point.y,gt=(x.x2*h+E.x+x.padding)*Ye+$e.point.x,ut=(x.y2*h+E.y+x.padding)*Ye+$e.point.y,wt=$e.perspectiveRatio<=.55||$e.occluded;return!this.isInsideGrid(Je,ht,gt,ut)||!L&&this.grid.hitTest(Je,ht,gt,ut,X)||wt?{box:[],offscreen:!1,occluded:$e.occluded}:{box:[Je,ht,gt,ut],offscreen:this.isOffscreen(Je,ht,gt,ut),occluded:!1}}placeCollisionCircles(l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e){const Ye=[],Je=this.transform.elevation,ht=l.getProjection(),gt=Je?Je.getAtTileOffsetFunc($e,this.transform.center.lat,this.transform.worldSize,ht):null,ut=new i.P(x.tileAnchorX,x.tileAnchorY);let{x:wt,y:_t,z:Pt}=ht.projectTilePoint(ut.x,ut.y,$e.canonical);if(gt){const[Jr,or,Fr]=gt(ut);wt+=Jr,_t+=or,Pt+=Fr}const Tt=ht.name==="globe",jt=this.projectAndGetPerspectiveRatio(q,wt,_t,Pt,$e,Tt||!!Je||this.transform.pitch>0,ht),{perspectiveRatio:Vt}=jt,Ut=(xe?M/Vt:M*Vt)/i.bq,Ot=Ms(wt,_t,Pt,X),sr=jt.signedDistanceFromCamera>0?oa(Ut,L,x.lineOffsetX*Ut,x.lineOffsetY*Ut,!1,Ot,ut,x,E,X,{},Je&&!xe?gt:null,xe&&!!Je,ht,$e,xe):null;let Cr=!1,Rr=!1,wr=!0;if(sr&&!jt.occluded){const Jr=.5*Ee*Vt+Ge,or=new i.P(-100,-100),Fr=new i.P(this.screenRightBoundary,this.screenBottomBoundary),Er=new Ps,{first:en,last:nn}=sr,kr=en.path.length;let Hr=[];for(let Nn=kr-1;Nn>=1;Nn--)Hr.push(en.path[Nn]);for(let Nn=1;Nn<nn.path.length;Nn++)Hr.push(nn.path[Nn]);const Yn=2.5*Jr;ne&&(Hr=Hr.map(([Nn,ai,zn],ii)=>(gt&&!Tt&&(zn=gt(ii<kr-1?en.tilePath[kr-1-ii]:nn.tilePath[ii-kr+2])[2]),Ms(Nn,ai,zn,ne))),Hr.some(Nn=>Nn[3]<=0)&&(Hr=[]));let dn=[];if(Hr.length>0){let Nn=1/0,ai=-1/0,zn=1/0,ii=-1/0;for(const Hi of Hr)Nn=Math.min(Nn,Hi[0]),zn=Math.min(zn,Hi[1]),ai=Math.max(ai,Hi[0]),ii=Math.max(ii,Hi[1]);ai>=or.x&&Nn<=Fr.x&&ii>=or.y&&zn<=Fr.y&&(dn=[Hr.map(Hi=>new i.P(Hi[0],Hi[1]))],(Nn<or.x||ai>Fr.x||zn<or.y||ii>Fr.y)&&(dn=i.bo(dn,or.x,or.y,Fr.x,Fr.y)))}for(const Nn of dn){Er.reset(Nn,.25*Jr);let ai=0;ai=Er.length<=.5*Jr?1:Math.ceil(Er.paddedLength/Yn)+1;for(let zn=0;zn<ai;zn++){const ii=zn/Math.max(ai-1,1),Hi=Er.lerp(ii),ki=Hi.x+Ys,Ks=Hi.y+Ys;Ye.push(ki,Ks,Jr,0);const fo=ki-Jr,Do=Ks-Jr,Nd=ki+Jr,Xa=Ks+Jr;if(wr=wr&&this.isOffscreen(fo,Do,Nd,Xa),Rr=Rr||this.isInsideGrid(fo,Do,Nd,Xa),!h&&this.grid.hitTestCircle(ki,Ks,Jr,Ce)&&(Cr=!0,!ae))return{circles:[],offscreen:!1,collisionDetected:Cr,occluded:!1}}}}return{circles:!ae&&Cr||!Rr?[]:Ye,offscreen:wr,collisionDetected:Cr,occluded:jt.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let x=1/0,E=1/0,L=-1/0,M=-1/0;for(const ae of l){const xe=new i.P(ae.x+Ys,ae.y+Ys);x=Math.min(x,xe.x),E=Math.min(E,xe.y),L=Math.max(L,xe.x),M=Math.max(M,xe.y),h.push(xe)}const q=this.grid.query(x,E,L,M).concat(this.ignoredGrid.query(x,E,L,M)),X={},ne={};for(const ae of q){const xe=ae.key;if(X[xe.bucketInstanceId]===void 0&&(X[xe.bucketInstanceId]={}),X[xe.bucketInstanceId][xe.featureIndex])continue;const Ce=[new i.P(ae.x1,ae.y1),new i.P(ae.x2,ae.y1),new i.P(ae.x2,ae.y2),new i.P(ae.x1,ae.y2)];i.bp(h,Ce)&&(X[xe.bucketInstanceId][xe.featureIndex]=!0,ne[xe.bucketInstanceId]===void 0&&(ne[xe.bucketInstanceId]=[]),ne[xe.bucketInstanceId].push(xe.featureIndex))}return ne}insertCollisionBox(l,h,x,E,L){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:E,collisionGroupID:L},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,x,E,L){const M=h?this.ignoredGrid:this.grid,q={bucketInstanceId:x,featureIndex:E,collisionGroupID:L};for(let X=0;X<l.length;X+=4)M.insertCircle(q,l[X],l[X+1],l[X+2])}projectAndGetPerspectiveRatio(l,h,x,E,L,M,q){const X=[h,x,E,1];let ne=!1;E||this.transform.pitch>0?(i.a6.vec4.transformMat4(X,X,l),this.fogState&&L&&q.name!=="globe"&&(ne=function(Ce,Ee,Ge,$e,Ye,Je){const ht=Je.calculateFogTileMatrix(Ye),gt=[Ee,Ge,$e];return i.a6.vec3.transformMat4(gt,gt,ht),sn(Ce,i.a6.vec3.length(gt),Je.pitch,Je._fov)}(this.fogState,h,x,E,L.toUnwrapped(),this.transform)>.9)):$o(X,X,l);const ae=X[3];return{point:new i.P((X[0]/ae+1)/2*this.transform.width+Ys,(-X[1]/ae+1)/2*this.transform.height+Ys),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(q)/ae*.5,1.5),signedDistanceFromCamera:ae,occluded:M&&X[2]>ae||ne}}isOffscreen(l,h,x,E){return x<Ys||l>=this.screenRightBoundary||E<Ys||h>this.screenBottomBoundary}isInsideGrid(l,h,x,E){return x>=0&&l<this.gridRightBoundary&&E>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=i.a6.mat4.identity([]);return i.a6.mat4.translate(l,l,[-100,-100,0]),l}}function Zs(v,l,h){const x=l.createTileMatrix(v,v.worldSize,h.toUnwrapped());return i.a6.mat4.multiply(new Float32Array(16),v.projMatrix,x)}function vo(v,l,h){if(l.projection.name===h.projection.name)return v.projMatrix;const x=h.clone();return x.setProjection(l.projection),Zs(x,l.getProjection(),v)}function fa(v,l,h){return l.name===h.projection.name?v.projMatrix:Zs(h,l,v)}class _s{constructor(l,h,x,E){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):E&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class io{constructor(l,h,x,E,L,M=!1){this.text=new _s(l?l.text:null,h,x,L),this.icon=new _s(l?l.icon:null,h,E,L),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qo{constructor(l,h,x,E=!1){this.text=l,this.icon=h,this.skipFade=x,this.clipped=E}}class Eo{constructor(){this.invProjMatrix=i.a6.mat4.create(),this.viewportMatrix=i.a6.mat4.create(),this.circles=[]}}class ic{constructor(l,h,x,E,L){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=x,this.bucketIndex=E,this.tileID=L}}class aa{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:x=>x.collisionGroupID===h}}return this.collisionGroups[l]}}function rl(v,l,h,x,E){const{horizontalAlign:L,verticalAlign:M}=i.bx(v),q=-(L-.5)*l,X=-(M-.5)*h,ne=i.bw(v,x);return new i.P(q+ne[0]*E,X+ne[1]*E)}function Uo(v,l,h,x,E){const L=new i.P(v,l);return h&&L._rotate(x?E:-E),L}class Va{constructor(l,h,x,E,L,M){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Bo(this.transform,L),this.buildingIndex=M,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new aa(x),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,h,x,E){const L=x.getBucket(h),M=x.latestFeatureIndex;if(!L||!M||h.fqid!==L.layerIds[0])return;const q=L.layers[0].layout,X=L.layers[0].paint,ne=x.collisionBoxArray,ae=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),xe=x.tileSize/i.ab,Ce=x.tileID.toUnwrapped();this.transform.setProjection(L.projection);const Ee=(Ge=x.tileID,$e=L.getProjection(),Ye=this.transform,$e.name===this.projection?Ye.calculateProjMatrix(Ge.toUnwrapped()):Zs(Ye,$e,Ge));var Ge,$e,Ye;const Je=q.get("text-pitch-alignment")==="map",ht=q.get("text-rotation-alignment")==="map";h.compileFilter();const gt=h.dynamicFilter(),ut=h.dynamicFilterNeedsFeature(),wt=this.transform.calculatePixelsToTileUnitsMatrix(x),_t=Ni(Ee,x.tileID.canonical,Je,ht,this.transform,L.getProjection(),wt);let Pt=null;if(Je){const Vt=ha(Ee,x.tileID.canonical,Je,ht,this.transform,L.getProjection(),wt);Pt=i.a6.mat4.multiply([],this.transform.labelPlaneMatrix,Vt)}let Tt=null;gt&&x.latestFeatureIndex&&(Tt={unwrappedTileID:Ce,dynamicFilter:gt,dynamicFilterNeedsFeature:ut}),this.retainedQueryData[L.bucketInstanceId]=new ic(L.bucketInstanceId,M,L.sourceLayerIndex,L.index,x.tileID);const jt={bucket:L,layout:q,paint:X,posMatrix:Ee,textLabelPlaneMatrix:_t,labelToScreenMatrix:Pt,clippingData:Tt,scale:ae,textPixelRatio:xe,holdingForFade:x.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:i.bj(L.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:i.bj(L.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID),latestFeatureIndex:x.latestFeatureIndex};if(E)for(const Vt of L.sortKeyRanges){const{sortKey:Ut,symbolInstanceStart:Ot,symbolInstanceEnd:sr}=Vt;l.push({sortKey:Ut,symbolInstanceStart:Ot,symbolInstanceEnd:sr,parameters:jt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:jt})}attemptAnchorPlacement(l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e,Ye,Je,ht){const{textOffset0:gt,textOffset1:ut,crossTileID:wt}=Ce,_t=[gt,ut],Pt=rl(l,x,E,_t,L),Tt=this.collisionIndex.placeCollisionBox(Ge,L,h,Uo(Pt.x,Pt.y,M,q,this.transform.angle),xe,X,ne,ae.predicate);if(Ye){const jt=Ge.getSymbolInstanceIconSize(ht,this.transform.zoom,Ce.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Ge,jt,Ye,Uo(Pt.x,Pt.y,M,q,this.transform.angle),xe,X,ne,ae.predicate).box.length===0)return}if(Tt.box.length>0){let jt;return this.prevPlacement&&this.prevPlacement.variableOffsets[wt]&&this.prevPlacement.placements[wt]&&this.prevPlacement.placements[wt].text&&(jt=this.prevPlacement.variableOffsets[wt].anchor),this.variableOffsets[wt]={textOffset:_t,width:x,height:E,anchor:l,textScale:L,prevAnchor:jt},this.markUsedJustification(Ge,l,Ce,$e),Ge.allowVerticalPlacement&&(this.markUsedOrientation(Ge,$e,Ce),this.placedOrientations[wt]=$e),{shift:Pt,placedGlyphBoxes:Tt}}}placeLayerBucketPart(l,h,x,E){const{bucket:L,layout:M,paint:q,posMatrix:X,textLabelPlaneMatrix:ne,labelToScreenMatrix:ae,clippingData:xe,textPixelRatio:Ce,holdingForFade:Ee,collisionBoxArray:Ge,partiallyEvaluatedTextSize:$e,partiallyEvaluatedIconSize:Ye,collisionGroup:Je,latestFeatureIndex:ht}=l.parameters,gt=M.get("text-optional"),ut=M.get("icon-optional"),wt=M.get("text-allow-overlap"),_t=M.get("icon-allow-overlap"),Pt=M.get("text-rotation-alignment")==="map",Tt=M.get("text-pitch-alignment")==="map",jt=M.get("symbol-z-elevate"),Vt=q.get("symbol-z-offset"),Ut=q.get("symbol-elevation-reference")==="sea";this.transform.setProjection(L.projection);let Ot=wt&&(_t||!L.hasIconData()||ut),sr=_t&&(wt||!L.hasTextData()||gt);const Cr=!Vt.isConstant();!L.collisionArrays&&Ge&&L.deserializeCollisionBoxes(Ge),x&&E&&L.updateCollisionDebugBuffers(this.transform.zoom,Ge);const Rr=(wr,Jr,or)=>{const{crossTileID:Fr,numVerticalGlyphVertices:Er}=wr;let en=null;if(xe&&xe.dynamicFilterNeedsFeature||Cr){const Oi=this.retainedQueryData[L.bucketInstanceId];en=ht.loadFeature({featureIndex:wr.featureIndex,bucketIndex:Oi.bucketIndex,sourceLayerIndex:Oi.sourceLayerIndex,layoutVertexArrayOffset:0})}if(xe&&!(0,xe.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},en,this.retainedQueryData[L.bucketInstanceId].tileID.canonical,new i.P(wr.tileAnchorX,wr.tileAnchorY),this.transform.calculateDistanceTileData(xe.unwrappedTileID)))return this.placements[Fr]=new qo(!1,!1,!1,!0),void h.add(Fr);const nn=Vt.evaluate(en,{});if(h.has(Fr))return;if(Ee)return void(this.placements[Fr]=new qo(!1,!1,!1));let kr=!1,Hr=!1,Yn=!0,dn=!1,Nn=!1,ai=null,zn={box:null,offscreen:null,occluded:null},ii={box:null,offscreen:null,occluded:null},Hi=null,ki=null,Ks=null,fo=0,Do=0,Nd=0;or.textFeatureIndex?fo=or.textFeatureIndex:wr.useRuntimeCollisionCircles&&(fo=wr.featureIndex),or.verticalTextFeatureIndex&&(Do=or.verticalTextFeatureIndex);const Xa=Oi=>{Oi.tileID=this.retainedQueryData[L.bucketInstanceId].tileID;const Ts=this.transform.elevation;Oi.elevation=Ut?nn:nn+(Ts?Ts.getAtTileOffset(Oi.tileID,Oi.tileAnchorX,Oi.tileAnchorY):0),Oi.elevation+=wr.zOffset},ts=or.textBox;if(ts){Xa(ts);const Oi=Vs=>{let Ia=i.bk.horizontal;if(L.allowVerticalPlacement&&!Vs&&this.prevPlacement){const Ya=this.prevPlacement.placedOrientations[Fr];Ya&&(this.placedOrientations[Fr]=Ya,Ia=Ya,this.markUsedOrientation(L,Ia,wr))}return Ia},Ts=(Vs,Ia)=>{if(L.allowVerticalPlacement&&Er>0&&or.verticalTextBox){for(const Ya of L.writingModes)if(Ya===i.bk.vertical?(zn=Ia(),ii=zn):zn=Vs(),zn&&zn.box&&zn.box.length)break}else zn=Vs()};if(M.get("text-variable-anchor")){let Vs=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Fr]){const fs=this.prevPlacement.variableOffsets[Fr];Vs.indexOf(fs.anchor)>0&&(Vs=Vs.filter(Il=>Il!==fs.anchor),Vs.unshift(fs.anchor))}const Ia=(fs,Il,Xl)=>{const Nl=L.getSymbolInstanceTextSize($e,wr,this.transform.zoom,Jr),Io=(fs.x2-fs.x1)*Nl+2*fs.padding,cu=(fs.y2-fs.y1)*Nl+2*fs.padding,uu=wr.hasIconTextFit&&!_t?Il:null;uu&&Xa(uu);let Fd={box:[],offscreen:!1,occluded:!1};const pd=wt?2*Vs.length:Vs.length;for(let Fu=0;Fu<pd;++Fu){const Pd=this.attemptAnchorPlacement(Vs[Fu%Vs.length],fs,Io,cu,Nl,Pt,Tt,Ce,X,Je,Fu>=Vs.length,wr,Jr,L,Xl,uu,$e,Ye);if(Pd&&(Fd=Pd.placedGlyphBoxes,Fd&&Fd.box&&Fd.box.length)){kr=!0,ai=Pd.shift;break}}return Fd};Ts(()=>Ia(ts,or.iconBox,i.bk.horizontal),()=>{const fs=or.verticalTextBox;return fs&&Xa(fs),L.allowVerticalPlacement&&!(zn&&zn.box&&zn.box.length)&&Er>0&&fs?Ia(fs,or.verticalIconBox,i.bk.vertical):{box:null,offscreen:null,occluded:null}}),zn&&(kr=zn.box,Yn=zn.offscreen,dn=zn.occluded);const Ya=Oi(!(!zn||!zn.box));if(!kr&&this.prevPlacement){const fs=this.prevPlacement.variableOffsets[Fr];fs&&(this.variableOffsets[Fr]=fs,this.markUsedJustification(L,fs.anchor,wr,Ya))}}else{const Vs=(Ia,Ya)=>{const fs=L.getSymbolInstanceTextSize($e,wr,this.transform.zoom,Jr),Il=this.collisionIndex.placeCollisionBox(L,fs,Ia,new i.P(0,0),wt,Ce,X,Je.predicate);return Il&&Il.box&&Il.box.length&&(this.markUsedOrientation(L,Ya,wr),this.placedOrientations[Fr]=Ya),Il};Ts(()=>Vs(ts,i.bk.horizontal),()=>{const Ia=or.verticalTextBox;return L.allowVerticalPlacement&&Er>0&&Ia?(Xa(Ia),Vs(Ia,i.bk.vertical)):{box:null,offscreen:null,occluded:null}}),Oi(!!(zn&&zn.box&&zn.box.length))}}if(Hi=zn,kr=Hi&&Hi.box&&Hi.box.length>0,Yn=Hi&&Hi.offscreen,dn=Hi&&Hi.occluded,wr.useRuntimeCollisionCircles){const Oi=L.text.placedSymbolArray.get(wr.centerJustifiedTextSymbolIndex>=0?wr.centerJustifiedTextSymbolIndex:wr.verticalPlacedTextSymbolIndex),Ts=i.bl(L.textSizeData,$e,Oi),Vs=M.get("text-padding");ki=this.collisionIndex.placeCollisionCircles(L,wt,Oi,L.lineVertexArray,L.glyphOffsetArray,Ts,X,ne,ae,x,Tt,Je.predicate,wr.collisionCircleDiameter*Ts/i.bq,Vs,this.retainedQueryData[L.bucketInstanceId].tileID),kr=wt||ki.circles.length>0&&!ki.collisionDetected,Yn=Yn&&ki.offscreen,dn=ki.occluded}if(or.iconFeatureIndex&&(Nd=or.iconFeatureIndex),or.iconBox){const Oi=Ts=>{Xa(Ts);const Vs=wr.hasIconTextFit&&ai?Uo(ai.x,ai.y,Pt,Tt,this.transform.angle):new i.P(0,0),Ia=L.getSymbolInstanceIconSize(Ye,this.transform.zoom,wr.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(L,Ia,Ts,Vs,_t,Ce,X,Je.predicate)};ii&&ii.box&&ii.box.length&&or.verticalIconBox?(Ks=Oi(or.verticalIconBox),Hr=Ks.box.length>0):(Ks=Oi(or.iconBox),Hr=Ks.box.length>0),Yn=Yn&&Ks.offscreen,Nn=Ks.occluded}const ao=gt||wr.numHorizontalGlyphVertices===0&&Er===0,ia=ut||wr.numIconVertices===0;if(ao||ia?ia?ao||(Hr=Hr&&kr):kr=Hr&&kr:Hr=kr=Hr&&kr,kr&&Hi&&Hi.box&&this.collisionIndex.insertCollisionBox(Hi.box,M.get("text-ignore-placement"),L.bucketInstanceId,ii&&ii.box&&Do?Do:fo,Je.ID),Hr&&Ks&&this.collisionIndex.insertCollisionBox(Ks.box,M.get("icon-ignore-placement"),L.bucketInstanceId,Nd,Je.ID),ki&&(kr&&this.collisionIndex.insertCollisionCircles(ki.circles,M.get("text-ignore-placement"),L.bucketInstanceId,fo,Je.ID),x)){const Oi=L.bucketInstanceId;let Ts=this.collisionCircleArrays[Oi];Ts===void 0&&(Ts=this.collisionCircleArrays[Oi]=new Eo);for(let Vs=0;Vs<ki.circles.length;Vs+=4)Ts.circles.push(ki.circles[Vs+0]),Ts.circles.push(ki.circles[Vs+1]),Ts.circles.push(ki.circles[Vs+2]),Ts.circles.push(ki.collisionDetected?1:0)}const ro=L.projection.name!=="globe";Ot=Ot&&(ro||!dn),sr=sr&&(ro||!Nn),this.placements[Fr]=new qo(kr||Ot,Hr||sr,Yn||L.justReloaded),h.add(Fr)};if(jt&&this.buildingIndex&&(this.buildingIndex.updateZOffset(L,this.retainedQueryData[L.bucketInstanceId].tileID),L.updateZOffset()),L.sortFeaturesByY){const wr=L.getSortedSymbolIndexes(this.transform.angle);for(let Jr=wr.length-1;Jr>=0;--Jr){const or=wr[Jr];Rr(L.symbolInstances.get(or),or,L.collisionArrays[or])}L.hasAnyZOffset&&i.w(`${L.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(L.hasAnyZOffset){const wr=L.getSortedIndexesByZOffset();for(let Jr=0;Jr<wr.length;++Jr){const or=wr[Jr];Rr(L.symbolInstances.get(or),or,L.collisionArrays[or])}}else for(let wr=l.symbolInstanceStart;wr<l.symbolInstanceEnd;wr++)Rr(L.symbolInstances.get(wr),wr,L.collisionArrays[wr]);if(x&&L.bucketInstanceId in this.collisionCircleArrays){const wr=this.collisionCircleArrays[L.bucketInstanceId];i.a6.mat4.invert(wr.invProjMatrix,X),wr.viewportMatrix=this.collisionIndex.getViewportMatrix()}L.justReloaded=!1}markUsedJustification(l,h,x,E){const{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:q,verticalPlacedTextSymbolIndex:X,crossTileID:ne}=x,ae=i.bv(h),xe=E===i.bk.vertical?X:ae==="left"?L:ae==="center"?M:ae==="right"?q:-1;L>=0&&(l.text.placedSymbolArray.get(L).crossTileID=xe>=0&&L!==xe?0:ne),M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=xe>=0&&M!==xe?0:ne),q>=0&&(l.text.placedSymbolArray.get(q).crossTileID=xe>=0&&q!==xe?0:ne),X>=0&&(l.text.placedSymbolArray.get(X).crossTileID=xe>=0&&X!==xe?0:ne)}markUsedOrientation(l,h,x){const E=h===i.bk.horizontal||h===i.bk.horizontalOnly?h:0,L=h===i.bk.vertical?h:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:q,rightJustifiedTextSymbolIndex:X,verticalPlacedTextSymbolIndex:ne}=x,ae=l.text.placedSymbolArray;M>=0&&(ae.get(M).placedOrientation=E),q>=0&&(ae.get(q).placedOrientation=E),X>=0&&(ae.get(X).placedOrientation=E),ne>=0&&(ae.get(ne).placedOrientation=L)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let x=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const E=h?h.symbolFadeChange(l):1,L=h?h.opacities:{},M=h?h.variableOffsets:{},q=h?h.placedOrientations:{};for(const X in this.placements){const ne=this.placements[X],ae=L[X];ae?(this.opacities[X]=new io(ae,E,ne.text,ne.icon,null,ne.clipped),x=x||ne.text!==ae.text.placed||ne.icon!==ae.icon.placed):(this.opacities[X]=new io(null,E,ne.text,ne.icon,ne.skipFade,ne.clipped),x=x||ne.text||ne.icon)}for(const X in L){const ne=L[X];if(!this.opacities[X]){const ae=new io(ne,E,!1,!1);ae.isHidden()||(this.opacities[X]=ae,x=x||ne.text.placed||ne.icon.placed)}}for(const X in M)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=M[X]);for(const X in q)this.placedOrientations[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.placedOrientations[X]=q[X]);x?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h,x,E){const L=new Set;for(const M of h){const q=M.getBucket(l);q&&M.latestFeatureIndex&&l.fqid===q.layerIds[0]&&(this.updateBucketOpacities(q,L,M,M.collisionBoxArray,x,E,M.tileID,l.scope),q.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(q,M.tileID),q.updateZOffset()))}}updateBucketOpacities(l,h,x,E,L,M,q,X){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const ne=l.layers[0].layout,ae=l.layers[0].paint,xe=!!l.layers[0].dynamicFilter(),Ce=new io(null,0,!1,!1,!0),Ee=ne.get("text-allow-overlap"),Ge=ne.get("icon-allow-overlap"),$e=ne.get("text-variable-anchor"),Ye=ne.get("text-rotation-alignment")==="map",Je=ne.get("text-pitch-alignment")==="map",ht=ae.get("symbol-z-offset"),gt=ae.get("symbol-elevation-reference")==="sea",ut=!ht.isConstant(),wt=new io(null,0,Ee&&(Ge||!l.hasIconData()||ne.get("icon-optional")),Ge&&(Ee||!l.hasTextData()||ne.get("text-optional")),!0);!l.collisionArrays&&E&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(E);const _t=(Tt,jt,Vt)=>{for(let Ut=0;Ut<jt/4;Ut++)Tt.opacityVertexArray.emplaceBack(Vt)};let Pt=0;M&&l.updateReplacement(q,M);for(let Tt=0;Tt<l.symbolInstances.length;Tt++){const jt=l.symbolInstances.get(Tt),{numHorizontalGlyphVertices:Vt,numVerticalGlyphVertices:Ut,crossTileID:Ot,numIconVertices:sr,tileAnchorX:Cr,tileAnchorY:Rr}=jt;let wr=null;if(jt&&ut){const dn=this.retainedQueryData[l.bucketInstanceId];wr=x.latestFeatureIndex.loadFeature({featureIndex:jt.featureIndex,bucketIndex:dn.bucketIndex,sourceLayerIndex:dn.sourceLayerIndex,layoutVertexArrayOffset:0})}const Jr=ht.evaluate(wr,{}),or=h.has(Ot);let Fr=this.opacities[Ot];or?Fr=Ce:Fr||(Fr=wt,this.opacities[Ot]=Fr),h.add(Ot);const Er=Vt>0||Ut>0,en=sr>0,nn=this.placedOrientations[Ot],kr=nn===i.bk.vertical,Hr=nn===i.bk.horizontal||nn===i.bk.horizontalOnly;!Er&&!en||Fr.isHidden()||Pt++;let Yn=!1;if((Er||en)&&M)for(const dn of l.activeReplacements){if(i.br(dn,L,i.bs.Symbol,X)||dn.min.x>Cr||Cr>dn.max.x||dn.min.y>Rr||Rr>dn.max.y)continue;const Nn=i.bt(Cr,Rr,q.canonical,dn.footprintTileId.canonical);if(Yn=i.bu(Nn,dn.footprint),Yn)break}if(Er){const dn=Yn?me:k(Fr.text);_t(l.text,Vt,kr?me:dn),_t(l.text,Ut,Hr?me:dn);const Nn=Fr.text.isHidden(),{leftJustifiedTextSymbolIndex:ai,centerJustifiedTextSymbolIndex:zn,rightJustifiedTextSymbolIndex:ii,verticalPlacedTextSymbolIndex:Hi}=jt,ki=l.text.placedSymbolArray,Ks=Nn||kr?1:0;ai>=0&&(ki.get(ai).hidden=Ks),zn>=0&&(ki.get(zn).hidden=Ks),ii>=0&&(ki.get(ii).hidden=Ks),Hi>=0&&(ki.get(Hi).hidden=Nn||Hr?1:0);const fo=this.variableOffsets[Ot];fo&&this.markUsedJustification(l,fo.anchor,jt,nn);const Do=this.placedOrientations[Ot];Do&&(this.markUsedJustification(l,"left",jt,Do),this.markUsedOrientation(l,Do,jt))}if(en){const dn=Yn?me:k(Fr.icon),{placedIconSymbolIndex:Nn,verticalPlacedIconSymbolIndex:ai}=jt,zn=l.icon.placedSymbolArray,ii=Fr.icon.isHidden()?1:0;Nn>=0&&(_t(l.icon,sr,kr?me:dn),zn.get(Nn).hidden=ii),ai>=0&&(_t(l.icon,jt.numVerticalIconVertices,Hr?me:dn),zn.get(ai).hidden=ii)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const dn=l.collisionArrays[Tt];if(dn){let Nn=new i.P(0,0),ai=!0;if(dn.textBox||dn.verticalTextBox){if($e){const ii=this.variableOffsets[Ot];ii?(Nn=rl(ii.anchor,ii.width,ii.height,ii.textOffset,ii.textScale),Ye&&Nn._rotate(Je?this.transform.angle:-this.transform.angle)):ai=!1}xe&&(ai=!Fr.clipped),dn.textBox&&Vl(l.textCollisionBox.collisionVertexArray,Fr.text.placed,!ai||kr,Jr,gt,Nn.x,Nn.y),dn.verticalTextBox&&Vl(l.textCollisionBox.collisionVertexArray,Fr.text.placed,!ai||Hr,Jr,gt,Nn.x,Nn.y)}const zn=ai&&!!(!Hr&&dn.verticalIconBox);dn.iconBox&&Vl(l.iconCollisionBox.collisionVertexArray,Fr.icon.placed,zn,Jr,gt,jt.hasIconTextFit?Nn.x:0,jt.hasIconTextFit?Nn.y:0),dn.verticalIconBox&&Vl(l.iconCollisionBox.collisionVertexArray,Fr.icon.placed,!zn,Jr,gt,jt.hasIconTextFit?Nn.x:0,jt.hasIconTextFit?Nn.y:0)}}}if(l.fullyClipped=Pt===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const Tt=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Tt.invProjMatrix,l.placementViewportMatrix=Tt.viewportMatrix,l.collisionCircleArray=Tt.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const x=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*x>l}setStale(){this.stale=!0}}function Vl(v,l,h,x,E,L,M){v.emplaceBack(l?1:0,h?1:0,L||0,M||0,x,E?1:0),v.emplaceBack(l?1:0,h?1:0,L||0,M||0,x,E?1:0),v.emplaceBack(l?1:0,h?1:0,L||0,M||0,x,E?1:0),v.emplaceBack(l?1:0,h?1:0,L||0,M||0,x,E?1:0)}const Wo=Math.pow(2,25),xu=Math.pow(2,24),pa=Math.pow(2,17),xo=Math.pow(2,16),Gl=Math.pow(2,9),_o=Math.pow(2,8),$l=Math.pow(2,1);function k(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const l=v.placed?1:0,h=Math.floor(127*v.opacity);return h*Wo+l*xu+h*pa+l*xo+h*Gl+l*_o+h*$l+l}const me=0;class Xe{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,h,x,E,L){const M=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(M,E,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((q,X)=>q.sortKey-X.sortKey));this._currentPartIndex<M.length;){const q=M[this._currentPartIndex];if(h.placeLayerBucketPart(q,this._seenCrossTileIDs,x,q.symbolInstanceStart===0),this._currentPartIndex++,L())return!0}return!1}}class ot{constructor(l,h,x,E,L,M,q,X,ne){this.placement=new Va(l,L,M,q,X,ne),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(l,h,x,E){const L=i.q.now(),M=()=>{const q=i.q.now()-L;return!this._forceFullPlacement&&q>2};for(;this._currentPlacementIndex>=0;){const q=h[l[this._currentPlacementIndex]],X=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=X)&&(!q.maxzoom||q.maxzoom>X)){const ne=q,ae=ne.layout.get("symbol-z-elevate"),xe=ne.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ce=ne.layout.get("symbol-z-order"),Ee=Ce==="viewport-y"||Ce==="auto"&&!(Ce!=="viewport-y"&&xe),Ge=ne.layout.get("text-allow-overlap")||ne.layout.get("icon-allow-overlap")||ne.layout.get("text-ignore-placement")||ne.layout.get("icon-ignore-placement"),$e=Ee&&Ge,Ye=this._inProgressLayer=this._inProgressLayer||new Xe(ne),Je=i.av(q.source,q.scope);if(Ye.continuePlacement(ae||$e?E[Je]:x[Je],this.placement,this._showCollisionBoxes,q,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const St=512/i.ab/2;class qt{constructor(l,h,x){this.tileID=l,this.bucketInstanceId=x,this.index=new i.by(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const E=l.canonical.x*i.ab,L=l.canonical.y*i.ab;for(let M=0;M<h.length;M++){const{key:q,crossTileID:X,tileAnchorX:ne,tileAnchorY:ae}=h.get(M),xe=Math.floor((E+ne)*St),Ce=Math.floor((L+ae)*St);this.index.add(xe,Ce),this.keys.push(q),this.crossTileIDs.push(X)}this.index.finish()}findMatches(l,h,x){const E=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),L=St/Math.pow(2,h.canonical.z-this.tileID.canonical.z),M=h.canonical.x*i.ab,q=h.canonical.y*i.ab;for(let X=0;X<l.length;X++){const ne=l.get(X);if(ne.crossTileID)continue;const{key:ae,tileAnchorX:xe,tileAnchorY:Ce}=ne,Ee=Math.floor((M+xe)*L),Ge=Math.floor((q+Ce)*L),$e=this.index.range(Ee-E,Ge-E,Ee+E,Ge+E);for(const Ye of $e){const Je=this.crossTileIDs[Ye];if(this.keys[Ye]===ae&&!x.has(Je)){x.add(Je),ne.crossTileID=Je;break}}}}}class gr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class $r{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const x in this.indexes){const E=this.indexes[x],L={};for(const M in E){const q=E[M];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+h),L[q.tileID.key]=q}this.indexes[x]=L}this.lng=l}addBucket(l,h,x){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let L=0;L<h.symbolInstances.length;L++)h.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const E=this.usedCrossTileIDs[l.overscaledZ];for(const L in this.indexes){const M=this.indexes[L];if(Number(L)>l.overscaledZ)for(const q in M){const X=M[q];X.tileID.isChildOf(l)&&X.findMatches(h.symbolInstances,l,E)}else{const q=M[l.scaledTo(Number(L)).key];q&&q.findMatches(h.symbolInstances,l,E)}}for(let L=0;L<h.symbolInstances.length;L++){const M=h.symbolInstances.get(L);M.crossTileID||(M.crossTileID=x.generate(),E.add(M.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new qt(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const x of h.crossTileIDs)this.usedCrossTileIDs[l].delete(x)}removeStaleBuckets(l){let h=!1;for(const x in this.indexes){const E=this.indexes[x];for(const L in E)l[E[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,E[L]),delete E[L],h=!0)}return h}}class An{constructor(){this.layerIndexes={},this.crossTileIDs=new gr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,x,E){let L=this.layerIndexes[l.fqid];L===void 0&&(L=this.layerIndexes[l.fqid]=new $r);let M=!1;const q={};E.name!=="globe"&&L.handleWrapJump(x);for(const X of h){const ne=X.getBucket(l);ne&&l.fqid===ne.layerIds[0]&&(ne.bucketInstanceId||(ne.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(X.tileID,ne,this.crossTileIDs)&&(M=!0),q[ne.bucketInstanceId]=!0)}return L.removeStaleBuckets(q)&&(M=!0),M}pruneUnusedLayers(l){const h={};l.forEach(x=>{h[x]=!0});for(const x in this.layerIndexes)h[x]||delete this.layerIndexes[x]}}const En=771;class qr{constructor(l,h,x,E){this.blendFunction=l,this.blendColor=h,this.mask=x,this.blendEquation=E}}qr.Replace=[1,0,1,0],qr.disabled=new qr(qr.Replace,i.bz.transparent,[!1,!1,!1,!1]),qr.unblended=new qr(qr.Replace,i.bz.transparent,[!0,!0,!0,!0]),qr.alphaBlended=new qr([1,En,1,En],i.bz.transparent,[!0,!0,!0,!0]),qr.alphaBlendedNonPremultiplied=new qr([770,En,770,En],i.bz.transparent,[!0,!0,!0,!0]),qr.multiply=new qr([774,0,774,0],i.bz.transparent,[!0,!0,!0,!0]);class Dr{constructor(l,h,x){this.func=l,this.mask=h,this.range=x}}Dr.ReadOnly=!1,Dr.ReadWrite=!0,Dr.disabled=new Dr(519,Dr.ReadOnly,[0,1]);const bi=7680;class gn{constructor(l,h,x,E,L,M){this.test=l,this.ref=h,this.mask=x,this.fail=E,this.depthFail=L,this.pass=M}}gn.disabled=new gn({func:519,mask:0},0,0,bi,bi,bi);const Fi=1029,bs=2305;class vn{constructor(l,h,x){this.enable=l,this.mode=h,this.frontFace=x}}function lo(v,l){const h=i.bC(v,3);i.a6.mat4.fromQuat(v,l),i.bE(v,3,h)}function Js(v,l){const h=i.a6.quat.identity([]);return i.a6.quat.rotateZ(h,h,-l),i.a6.quat.rotateX(h,h,-v),h}function Yo(v,l){const h=[v[0],v[1],0],x=[l[0],l[1],0];if(i.a6.vec3.length(h)>=1e-15){const M=i.a6.vec3.normalize([],h);i.a6.vec3.scale(x,M,i.a6.vec3.dot(x,M)),l[0]=x[0],l[1]=x[1]}const E=i.a6.vec3.cross([],l,v);if(i.a6.vec3.len(E)<1e-15)return null;const L=Math.atan2(-E[1],E[0]);return Js(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),L)}vn.disabled=new vn(!1,Fi,bs),vn.backCCW=new vn(!0,Fi,bs),vn.backCW=new vn(!0,Fi,2304),vn.frontCW=new vn(!0,1028,2304),vn.frontCCW=new vn(!0,1028,bs);class nl{constructor(l,h){this.position=l,this.orientation=h}get position(){return this._position}set position(l){if(l){const h=l instanceof i.a5?l:new i.a5(l[0],l[1],l[2]);this._renderWorldCopies&&(h.x=i.bA(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(l,h){if(this.orientation=null,!this.position)return;const x=this.position,E=this._elevation?this._elevation.getAtPointOrZero(i.a5.fromLngLat(l)):0,L=i.a5.fromLngLat(l,E),M=[L.x-x.x,L.y-x.y,L.z-x.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=Yo(M,h)}setPitchBearing(l,h){this.orientation=Js(i.bB(l),i.bB(-h))}}class il{constructor(l,h){this._transform=i.a6.mat4.identity([]),this.orientation=h,this.position=l}get mercatorPosition(){const l=this.position;return new i.a5(l[0],l[1],l[2])}get position(){const l=i.bC(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var h;l&&i.bE(this._transform,3,[(h=l)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||i.a6.quat.identity([]),l&&lo(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,h){this._orientation=Js(l,h),lo(this._transform,this._orientation)}forward(){const l=i.bC(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=i.bC(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=i.bC(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,h){const x=new Float64Array(16);return i.a6.mat4.invert(x,this.getWorldToCamera(l,h)),x}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(l,h,x){const E=this.position;i.a6.vec3.scale(E,E,-l);const L=new Float64Array(16);return i.a6.mat4.fromScaling(L,[x,x,x]),i.a6.mat4.translate(L,L,E),L[10]*=h,L}getWorldToCamera(l,h){const x=new Float64Array(16),E=new Float64Array(4),L=this.position;return i.a6.quat.conjugate(E,this._orientation),i.a6.vec3.scale(L,L,-l),i.a6.mat4.fromQuat(x,E),i.a6.mat4.translate(x,x,L),x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,x[8]*=h,x[9]*=h,x[10]*=h,x[11]*=h,x}getCameraToClipPerspective(l,h,x,E){const L=new Float64Array(16);return i.a6.mat4.perspective(L,l,h,x,E),L}getCameraToClipOrthographic(l,h,x,E,L,M){const q=new Float64Array(16);return i.a6.mat4.ortho(q,l,h,x,E,L,M),q}getDistanceToElevation(l,h=!1){const x=l===0?0:i.bD(l,h?i.aM(this.position[1]):this.position[1]),E=this.forward();return(x-this.position[2])/E[2]}clone(){return new il([...this.position],[...this.orientation])}}const so={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class Ga{constructor(l=0,h=0,x=0,E=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(x)||x<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=x,this.right=E}interpolate(l,h,x){return h.top!=null&&l.top!=null&&(this.top=i.aa(l.top,h.top,x)),h.bottom!=null&&l.bottom!=null&&(this.bottom=i.aa(l.bottom,h.bottom,x)),h.left!=null&&l.left!=null&&(this.left=i.aa(l.left,h.left,x)),h.right!=null&&l.right!=null&&(this.right=i.aa(l.right,h.right,x)),this}getCenter(l,h){const x=i.ap((this.left+l-this.right)/2,0,l),E=i.ap((this.top+h-this.bottom)/2,0,h);return new i.P(x,E)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Ga(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ea=(v,l,h)=>(1-h)*v+h*l,Zo=v=>v*v*v*v*v;class Ma{constructor(l,h,x,E,L,M,q){this.tileSize=512,this._renderWorldCopies=L===void 0||L,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=x??0,this._maxPitch=E??60,this.setProjection(M),this.setMaxBounds(q),this.width=0,this.height=0,this._center=new i.bK(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ga,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new il,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const l=new Ma(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(l,h=!1){const x=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||x)&&this._updateCameraOnTerrain(),(l||x)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return i.ar(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=i.bL(this.projectionOptions);const x=this.getProjection(),E=!i.bh(h,x);return E&&this._calcMatrices(),this.mercatorFromTransition=!1,E}setOrthographicProjectionAtLowPitch(l){return this._orthographicProjectionAtLowPitch!==l&&(this._orthographicProjectionAtLowPitch=l,this._calcMatrices(),!0)}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.bL({name:"mercator"});const h=l!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.bD(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bA(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const h=-l*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=i.a6.mat2.create(),i.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const h=i.ap(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=i.bB(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(l){this._tileCoverLift!==l&&(this._tileCoverLift=l)}_updateCameraOnTerrain(){const l=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,h=this.elevation&&l===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||l===Number.NEGATIVE_INFINITY&&(!h||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const x=this._elevation;h||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&x.exaggeration()&&this._centerAltitudeValidForExaggeration!==x.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*x.exaggeration(),this._centerAltitudeValidForExaggeration=x.exaggeration()):(this._centerAltitude=l||0,this._centerAltitudeValidForExaggeration=x.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],x=this.horizonLineFromTop();let E=0,L=0;for(let M=0;M<h.length;M++){const q=new i.P(h[M][0]*this.width,x+h[M][1]*(this.height-x)),X=l.pointCoordinate(q);if(!X)continue;const ne=1/Math.hypot(X[0]-this._camera.position[0],X[1]-this._camera.position[1]);E+=X[3]*ne,L+=ne}return L===0?NaN:E/L}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),x=this.pixelsPerMeter/this.worldSize*h,E=this._mercatorZfromZoom(l),L=this._mercatorZfromZoom(this._maxZoom),M=Math.max(E-x,L);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let x;x=l.z<this._camera.position[2]?[h.x,h.y,h.z]:[l.x,l.y,l.z];const E=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,x));return i.ap(this._zoomFromMercatorZ(E),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let h=!1;if(l.orientation&&!i.a6.quat.exactEquals(l.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(l.orientation)),l.position){const x=[l.position.x,l.position.y,l.position.z];i.a6.vec3.exactEquals(x,this._camera.position)||(this._setCameraPosition(x),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,h=new nl;return h.position=new i.a5(l[0],l[1],l[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(l){if(!i.a6.quat.length(l))return!1;i.a6.quat.normalize(l,l);const h=i.a6.vec3.transformQuat([],[0,0,-1],l),x=i.a6.vec3.transformQuat([],[0,-1,0],l);if(x[2]<0)return!1;const E=Yo(h,x);return!!E&&(this._camera.orientation=E,!0)}_setCameraPosition(l){const h=this.zoomScale(this.minZoom)*this.tileSize,x=this.zoomScale(this.maxZoom)*this.tileSize,E=this.cameraToCenterDistance;l[2]=i.ap(l[2],E/x,E/h),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,x){this._unmodified=!1,this._edgeInsets.interpolate(l,h,x),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(l){const h=[new i.bM(0,l)];if(this.renderWorldCopies){const x=this.pointCoordinate(new i.P(0,0)),E=this.pointCoordinate(new i.P(this.width,0)),L=this.pointCoordinate(new i.P(this.width,this.height)),M=this.pointCoordinate(new i.P(0,this.height)),q=Math.floor(Math.min(x.x,E.x,L.x,M.x)),X=Math.floor(Math.max(x.x,E.x,L.x,M.x)),ne=1;for(let ae=q-ne;ae<=X+ne;ae++)ae!==0&&h.push(new i.bM(ae,l))}return h}isLODDisabled(l){return(!l||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(l,h,x){let E=[];const L=x!==void 0,M=!L;if(M&&this.zoom<h||L&&x[0]===0&&x[1]===0)return E;const q=new Set,X=(ae,xe,Ce,Ee,Ge)=>{const $e=i.c1(xe,ae,Ce,Ee,Ge);q.has($e)||(E.push(new i.aA(ae,xe,Ce,Ee,Ge)),q.add($e))};for(let ae=0;ae<l.length;ae++){const xe=l[ae];if(M&&xe.canonical.z!==h)continue;const Ce=xe.canonical,Ee=xe.overscaledZ,Ge=xe.wrap,$e=1<<Ce.z,Ye=Ce.x+1<$e,Je=Ce.x>0,ht=Ce.y+1<$e,gt=Ce.y>0,ut=xe.wrap-(Je?0:1),wt=xe.wrap+(Ye?0:1),_t=Je?Ce.x-1:$e-1,Pt=Ye?Ce.x+1:0;if(L)x[0]<0?(X(Ee,wt,Ce.z,Pt,Ce.y),x[1]<0&&ht&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y+1),X(Ee,wt,Ce.z,Pt,Ce.y+1)),x[1]>0&&gt&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y-1),X(Ee,wt,Ce.z,Pt,Ce.y-1))):x[0]>0?(X(Ee,ut,Ce.z,_t,Ce.y),x[1]<0&&ht&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y+1),X(Ee,ut,Ce.z,_t,Ce.y+1)),x[1]>0&&gt&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y-1),X(Ee,ut,Ce.z,_t,Ce.y-1))):x[1]<0&&ht?X(Ee,Ge,Ce.z,Ce.x,Ce.y+1):gt&&X(Ee,Ge,Ce.z,Ce.x,Ce.y-1);else{const Tt=xe.visibleQuadrants;1&Tt&&(X(Ee,ut,Ce.z,_t,Ce.y),gt&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y-1),X(Ee,ut,Ce.z,_t,Ce.y-1))),2&Tt&&(X(Ee,wt,Ce.z,Pt,Ce.y),gt&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y-1),X(Ee,wt,Ce.z,Pt,Ce.y-1))),4&Tt&&(X(Ee,ut,Ce.z,_t,Ce.y),ht&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y+1),X(Ee,ut,Ce.z,_t,Ce.y+1))),8&Tt&&(X(Ee,wt,Ce.z,Pt,Ce.y),ht&&(X(Ee,Ge,Ce.z,Ce.x,Ce.y+1),X(Ee,wt,Ce.z,Pt,Ce.y+1)))}}const ne=[];for(const ae of E)E.some(xe=>ae.isChildOf(xe))||ne.push(ae);if(E=ne.filter(ae=>!l.some(xe=>!!(ae.overscaledZ<h&&xe.isChildOf(ae))||ae.equals(xe)||ae.isChildOf(xe))),M){const ae=1<<h,xe=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Ce=[ae*xe.x,ae*xe.y],Ee=4,Ge=Ee*Ee;E=E.filter($e=>{const Ye=$e.canonical.x+.5-Ce[0],Je=$e.canonical.y+.5-Ce[1];return Ye*Ye+Je*Je<Ge})}return E}coveringTiles(l){let h=this.coveringZoomLevel(l);const x=h,E=this.elevation&&this.elevation.exaggeration(),L=E&&!l.isTerrainDEM,M=this.projection.name==="mercator";if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);const q=this.locationCoordinate(this.center),X=this.center.lat,ne=1<<h,ae=[ne*q.x,ne*q.y,0],xe=this.projection.name==="globe",Ce=!xe,Ee=i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,Ce),Ge=xe?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),$e=ne*i.bD(1,this.center.lat),Ye=this._camera.position[2]/i.bD(1,this.center.lat),Je=[ne*Ge.x,ne*Ge.y,Ye*(Ce?1:$e)],ht=xe||E,gt=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),ut=this.isLODDisabled(!0)?h:0;let wt;if(this._elevation&&l.isTerrainDEM)wt=1e4*this._elevation.exaggeration();else if(this._elevation){const or=this._elevation.getMinMaxForVisibleTiles();wt=or?or.max:this._centerAltitude}else wt=this._centerAltitude;const _t=l.isTerrainDEM?-wt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Pt=this.projection.isReprojectedInTileSpace?i.bO(this):1,Tt=or=>{const Er=new i.a5(or.x+25e-6,or.y,or.z),en=new i.a5(or.x,or.y+25e-6,or.z),nn=or.toLngLat(),kr=Er.toLngLat(),Hr=en.toLngLat(),Yn=this.locationCoordinate(nn),dn=this.locationCoordinate(kr),Nn=this.locationCoordinate(Hr),ai=Math.hypot(dn.x-Yn.x,dn.y-Yn.y),zn=Math.hypot(Nn.x-Yn.x,Nn.y-Yn.y);return Math.sqrt(ai*zn)*Pt/25e-6},jt=or=>{const Fr=wt,Er=_t;return{aabb:i.bR(this,ne,0,0,0,or,Er,Fr,this.projection),zoom:0,x:0,y:0,minZ:Er,maxZ:Fr,wrap:or,fullyVisible:!1}},Vt=[];let Ut=[];const Ot=h,sr=l.reparseOverscaled?x:h,Cr=(Ye-this._centerAltitude)*$e,Rr=or=>{if(!this._elevation||!or.tileID||!M)return;const Fr=this._elevation.getMinMaxForTile(or.tileID),Er=or.aabb;Fr?(Er.min[2]=Fr.min,Er.max[2]=Fr.max,Er.center[2]=(Er.min[2]+Er.max[2])/2):(or.shouldSplit=Jr(or),or.shouldSplit||(Er.min[2]=Er.max[2]=Er.center[2]=this._centerAltitude))},wr=(or,Fr)=>{if(.707*Fr<or)return 1;const Er=Fr/or;return Er/(1.4144271570014144+(Math.pow(1.1,Er-1.4144271570014144+1)-1)/(1.1-1)-1)},Jr=or=>{if(or.zoom<ut)return!0;if(or.zoom===Ot)return!1;if(or.shouldSplit!=null)return or.shouldSplit;const Fr=or.aabb.distanceX(Je),Er=or.aabb.distanceY(Je);let en=Cr,nn=1;if(xe){en=or.aabb.distanceZ(Je);const zn=Math.pow(2,or.zoom),ii=i.aM((or.y+1)/zn),Hi=i.aM(or.y/zn),ki=Math.min(Math.max(X,ii),Hi),Ks=i.c5(ki)/i.c5(X);if(nn=ki===X?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ks/this._mercatorScaleRatio),this.zoom<=i.c2&&or.zoom===Ot-1&&Ks>=.9)return!0}else if(L&&(en=or.aabb.distanceZ(Je)*$e),this.projection.isReprojectedInTileSpace&&x<=5){const zn=Math.pow(2,or.zoom),ii=Tt(new i.a5((or.x+.5)/zn,(or.y+.5)/zn));nn=ii>.85?1:ii}if(!M){const zn=Math.sqrt(Fr*Fr+Er*Er+en*en);let ii=(1<<Ot-or.zoom)*gt*nn;return ii*=wr(Math.max(en,Cr),zn),zn<ii}let kr=Number.MAX_VALUE,Hr=0;const Yn=or.aabb.getCorners(),dn=[];for(const zn of Yn){i.a6.vec3.sub(dn,zn,Je),xe||(L?dn[2]*=$e:dn[2]=Cr);const ii=i.a6.vec3.dot(dn,this._camera.forward());ii<kr&&(kr=ii,Hr=Math.abs(dn[2]))}let Nn=(1<<Ot-or.zoom)*gt*nn;if(Nn*=wr(Math.max(Hr,Cr),kr),kr<Nn)return!0;const ai=or.aabb.closestPoint(ae);return ai[0]===ae[0]&&ai[1]===ae[1]};if(this.renderWorldCopies)for(let or=1;or<=3;or++)Vt.push(jt(-or)),Vt.push(jt(or));for(Vt.push(jt(0));Vt.length>0;){const or=Vt.pop(),Fr=or.x,Er=or.y;let en=or.fullyVisible;const nn=()=>this.projection.name==="globe"&&(or.y===0||or.y===(1<<or.zoom)-1);if(!en){let kr=ht?or.aabb.intersects(Ee):or.aabb.intersectsFlat(Ee);if(kr===0&&nn()){const Hr=new i.bP(or.zoom,Fr,Er);kr=i.bQ(this,ne,Hr,!0).intersects(Ee)}if(kr===0)continue;en=kr===2}if(or.zoom!==Ot&&Jr(or))for(let kr=0;kr<4;kr++){const Hr=(Fr<<1)+kr%2,Yn=(Er<<1)+(kr>>1),dn={aabb:M?or.aabb.quadrant(kr):i.bR(this,ne,or.zoom+1,Hr,Yn,or.wrap,or.minZ,or.maxZ,this.projection),zoom:or.zoom+1,x:Hr,y:Yn,wrap:or.wrap,fullyVisible:en,tileID:void 0,shouldSplit:void 0,minZ:or.minZ,maxZ:or.maxZ};L&&!xe&&(dn.tileID=new i.aA(or.zoom+1===Ot?sr:or.zoom+1,or.wrap,or.zoom+1,Hr,Yn),Rr(dn)),Vt.push(dn)}else{const kr=or.zoom===Ot?sr:or.zoom;if(l.minzoom&&l.minzoom>kr)continue;let Hr=0;if(!en){let ai=ht?or.aabb.intersectsPrecise(Ee):or.aabb.intersectsPreciseFlat(Ee);if(ai===0&&nn()){const zn=new i.bP(or.zoom,Fr,Er);ai=i.bQ(this,ne,zn,!0).intersectsPrecise(Ee)}if(ai===0)continue;if(l.calculateQuadrantVisibility)if(Ee.containsPoint(or.aabb.center))Hr=15;else for(let zn=0;zn<4;zn++)or.aabb.quadrant(zn).intersects(Ee)!==0&&(Hr|=1<<zn)}const Yn=ae[0]-(.5+Fr+(or.wrap<<or.zoom))*(1<<h-or.zoom),dn=ae[1]-.5-Er,Nn=or.tileID?or.tileID:new i.aA(kr,or.wrap,or.zoom,Fr,Er);l.calculateQuadrantVisibility&&(Nn.visibleQuadrants=Hr),Ut.push({tileID:Nn,distanceSq:Yn*Yn+dn*dn})}}if(this.fogCullDistSq){const or=this.fogCullDistSq,Fr=this.horizonLineFromTop();Ut=Ut.filter(Er=>{const en=[0,0,0,1],nn=[i.ab,i.ab,0,1],kr=this.calculateFogTileMatrix(Er.tileID.toUnwrapped());i.a6.vec4.transformMat4(en,en,kr),i.a6.vec4.transformMat4(nn,nn,kr);const Hr=i.a6.vec4.min([],en,nn),Yn=i.a6.vec4.max([],en,nn),dn=i.bS(Hr,Yn);if(dn===0)return!0;let Nn=!1;const ai=this._elevation;if(ai&&dn>or&&Fr!==0){const zn=this.calculateProjMatrix(Er.tileID.toUnwrapped());let ii;l.isTerrainDEM||(ii=ai.getMinMaxForTile(Er.tileID)),ii||(ii={min:_t,max:wt});const Hi=i.c3(this.rotation),ki=[Hi[0]*i.ab,Hi[1]*i.ab,ii.max];i.a6.vec3.transformMat4(ki,ki,zn),Nn=(1-ki[1])*this.height*.5<Fr}return dn<or||Nn})}return Ut.sort((or,Fr)=>or.distanceSq-Fr.distanceSq).map(or=>or.tileID)}resize(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const h=i.ap(l.lat,-i.bT,i.bT),x=this.projection.project(l.lng,h);return new i.P(x.x*this.worldSize,x.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.bD(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,h){let x,E;const L=this.centerPoint;if(this.projection.name==="globe"){const q=this.worldSize;x=(h.x-L.x)/q,E=(h.y-L.y)/q}else{const q=this.pointCoordinate(h),X=this.pointCoordinate(L);x=q.x-X.x,E=q.y-X.y}const M=this.locationCoordinate(l);this.setLocation(new i.a5(M.x-x,M.y-E))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,h){const x=h?i.bD(h,l.lat):void 0,E=this.projection.project(l.lng,l.lat);return new i.a5(E.x,E.y,x)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,h){const x=h??this._centerAltitude,E=[l.x,l.y,0,1],L=[l.x,l.y,1,1];i.a6.vec4.transformMat4(E,E,this.pixelMatrixInverse),i.a6.vec4.transformMat4(L,L,this.pixelMatrixInverse);const M=L[3];i.a6.vec4.scale(E,E,1/E[3]),i.a6.vec4.scale(L,L,1/M);const q=E[2],X=L[2];return{p0:E,p1:L,t:q===X?0:(x-q)/(X-q)}}screenPointToMercatorRay(l){const h=[l.x,l.y,0,1],x=[l.x,l.y,1,1];return i.a6.vec4.transformMat4(h,h,this.pixelMatrixInverse),i.a6.vec4.transformMat4(x,x,this.pixelMatrixInverse),i.a6.vec4.scale(h,h,1/h[3]),i.a6.vec4.scale(x,x,1/x[3]),h[2]=i.bD(h[2],this._center.lat)*this.worldSize,x[2]=i.bD(x[2],this._center.lat)*this.worldSize,i.a6.vec4.scale(h,h,1/this.worldSize),i.a6.vec4.scale(x,x,1/this.worldSize),new i.aj([h[0],h[1],h[2]],i.a6.vec3.normalize([],i.a6.vec3.sub([],x,h)))}rayIntersectionCoordinate(l){const{p0:h,p1:x,t:E}=l,L=i.bD(h[2],this._center.lat),M=i.bD(x[2],this._center.lat);return new i.a5(i.aa(h[0],x[0],E)/this.worldSize,i.aa(h[1],x[1],E)/this.worldSize,i.aa(L,M,E))}pointCoordinate(l,h=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,h)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let h=this.projection.pointCoordinate3D(this,l.x,l.y);if(h)return new i.a5(h[0],h[1],h[2]);let x=0,E=this.horizonLineFromTop();if(l.y>E)return this.pointCoordinate(l);const L=.02*E,M=l.clone();for(let q=0;q<10&&E-x>L;q++){M.y=i.aa(x,E,.66);const X=this.projection.pointCoordinate3D(this,M.x,M.y);X?(E=M.y,h=X):x=M.y}return h?new i.a5(h[0],h[1],h[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=i.bU)return!this.isPointAboveHorizon(l);const h=this.pointCoordinate(l);return h.y>=0&&h.y<=1}_coordinatePoint(l,h){const x=h&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,E=[l.x*this.worldSize,l.y*this.worldSize,x+l.toAltitude(),1];return i.a6.vec4.transformMat4(E,E,this.pixelMatrix),E[3]>0?new i.P(E[0]/E[3],E[1]/E[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:h}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,L=this.pointLocation3D(new i.P(h,l)),M=this.pointLocation3D(new i.P(E,l)),q=this.pointLocation3D(new i.P(E,x)),X=this.pointLocation3D(new i.P(h,x));let ne=Math.min(L.lng,M.lng,q.lng,X.lng),ae=Math.max(L.lng,M.lng,q.lng,X.lng),xe=Math.min(L.lat,M.lat,q.lat,X.lat),Ce=Math.max(L.lat,M.lat,q.lat,X.lat);const Ee=Math.pow(2,-this.zoom)/16*270,Ge=this.projection.name==="globe"?1:4,$e=(Ye,Je,ht,gt,ut)=>{const wt=(Ye+ht)/2,_t=(Je+gt)/2,Pt=new i.P(wt,_t),{lng:Tt,lat:jt}=this.pointLocation3D(Pt),Vt=Math.max(0,ne-Tt,xe-jt,Tt-ae,jt-Ce);ne=Math.min(ne,Tt),ae=Math.max(ae,Tt),xe=Math.min(xe,jt),Ce=Math.max(Ce,jt),(ut<Ge||Vt>Ee)&&($e(Ye,Je,wt,_t,ut+1),$e(wt,_t,ht,gt,ut+1))};if($e(h,l,E,l,1),$e(E,l,E,x,1),$e(E,x,h,x,1),$e(h,x,h,l,1),this.projection.name==="globe"){const[Ye,Je]=i.bV(this);Ye?(Ce=90,ae=180,ne=-180):Je&&(xe=-90,ae=180,ne=-180)}return new i.as(new i.bK(ne,xe),new i.bK(ae,Ce))}_getBoundsRectangular(l,h){const{top:x,left:E}=this._edgeInsets,L=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,q=new i.P(E,x),X=new i.P(M,x),ne=new i.P(M,L),ae=new i.P(E,L);let xe=this.pointCoordinate(q,l),Ce=this.pointCoordinate(X,l);const Ee=this.pointCoordinate(ne,h),Ge=this.pointCoordinate(ae,h),$e=(Ye,Je)=>(Je.y-Ye.y)/(Je.x-Ye.x);return xe.y>1&&Ce.y>=0?xe=new i.a5((1-Ge.y)/$e(Ge,xe)+Ge.x,1):xe.y<0&&Ce.y<=1&&(xe=new i.a5(-Ge.y/$e(Ge,xe)+Ge.x,0)),Ce.y>1&&xe.y>=0?Ce=new i.a5((1-Ee.y)/$e(Ee,Ce)+Ee.x,1):Ce.y<0&&xe.y<=1&&(Ce=new i.a5(-Ee.y/$e(Ee,Ce)+Ee.x,0)),new i.as().extend(this.coordinateLocation(xe)).extend(this.coordinateLocation(Ce)).extend(this.coordinateLocation(Ge)).extend(this.coordinateLocation(Ee))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=l.visibleDemTiles.reduce((x,E)=>{if(E.dem){const L=E.dem.tree;x.min=Math.min(x.min,L.minimums[0]),x.max=Math.max(x.max,L.maximums[0])}return x},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*l.exaggeration(),h.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,x=this.height/2-h*(1-this._horizonShift);return l?Math.max(0,x):x}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-i.bT,this.maxLat=i.bT,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.am(this.minLng)*this.tileSize,this.worldMaxX=i.am(this.maxLng)*this.tileSize,this.worldMinY=i.at(this.maxLat)*this.tileSize,this.worldMaxY=i.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,h){return this.projection.createTileMatrix(this,h,l)}calculateDistanceTileData(l){const h=l.key,x=this._distanceTileDataCache;if(x[h])return x[h];const E=l.canonical,L=1/this.height,M=this.cameraWorldSize,q=M/this.zoomScale(E.z),X=(E.x+Math.pow(2,E.z)*l.wrap)*q,ne=E.y*q,ae=this.point;ae.x*=M/this.worldSize,ae.y*=M/this.worldSize;const xe=this.angle,Ce=Math.sin(-xe),Ee=-Math.cos(-xe);return x[h]={bearing:[Ce,Ee],center:[(ae.x-X)*L,(ae.y-ne)*L],scale:q/i.ab*L},x[h]}calculateFogTileMatrix(l){const h=l.key,x=this._fogTileMatrixCache;if(x[h])return x[h];const E=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return i.a6.mat4.multiply(E,this.worldToFogMatrix,E),x[h]=new Float32Array(E),x[h]}calculateProjMatrix(l,h=!1,x=!1){const E=l.key;let L;if(L=x?this._expandedProjMatrixCache:h?this._alignedProjMatrixCache:this._projMatrixCache,L[E])return L[E];const M=this.calculatePosMatrix(l,this.worldSize);let q;return q=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:x?this.expandedFarZProjMatrix:h?this.alignedProjMatrix:this.projMatrix,i.a6.mat4.multiply(M,q,M),L[E]=new Float32Array(M),L[E]}calculatePixelsToTileUnitsMatrix(l){const h=l.tileID.key,x=this._pixelsToTileUnitsCache;if(x[h])return x[h];const E=i.bW(l,this);return x[h]=E,x[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,h=i.a6.mat4.fromScaling([],[l,l,l]);return i.a6.mat4.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const h=i.bD(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(h),E=this._camera.forward(),L=i.bD(1,this._center.lat);x[2]/=L,E[2]/=L,i.a6.vec3.normalize(E,E);const M=l.raycast(x,E,l.exaggeration());if(M){const q=i.a6.vec3.scaleAndAdd([],x,E,M),X=new i.a5(q[0],q[1],i.bD(q[2],i.aM(q[1]))),ne=(X.z+i.a6.vec3.length([X.x-x[0],X.y-x[1],X.z-x[2]*L]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(ne),this._centerAltitude=X.toAltitude(),this._center=this.coordinateLocation(X),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const h=this._elevation,x=i.bD(1,this._center.lat)*this.worldSize,E=this._computeCameraPosition(x),L=h.getAtPointOrZero(new i.a5(...E)),M=this.pixelsPerMeter/this.worldSize*L,q=this._minimumHeightOverTerrain(),X=E[2]-M;if(X<=q)if(X<0||l){const ne=this.locationCoordinate(this._center,this._centerAltitude),ae=[E[0],E[1],ne.z-E[2]],xe=i.a6.vec3.length(ae);ae[2]-=(q-X)/this._pixelsPerMercatorPixel;const Ce=i.a6.vec3.length(ae);if(Ce===0)return;i.a6.vec3.scale(ae,ae,xe/Ce*this._pixelsPerMercatorPixel),this._camera.position=[E[0],E[1],ne.z*this._pixelsPerMercatorPixel-ae[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const Ce=this.center;return Ce.lat=i.ap(Ce.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(Ce.lng=i.ap(Ce.lng,this.minLng,this.maxLng)),this.center=Ce,void(this._constraining=!1)}const h=this._unmodified,{x,y:E}=this.point;let L=0,M=x,q=E;const X=this.width/2,ne=this.height/2,ae=this.worldMinY*this.scale,xe=this.worldMaxY*this.scale;if(E-ne<ae&&(q=ae+ne),E+ne>xe&&(q=xe-ne),xe-ae<this.height&&(L=Math.max(L,this.height/(xe-ae)),q=(xe+ae)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Ce=this.worldMinX*this.scale,Ee=this.worldMaxX*this.scale,Ge=this.worldSize/2-(Ce+Ee)/2;M=(x+Ge+this.worldSize)%this.worldSize-Ge,M-X<Ce&&(M=Ce+X),M+X>Ee&&(M=Ee-X),Ee-Ce<this.width&&(L=Math.max(L,this.width/(Ee-Ce)),M=(Ee+Ce)/2)}M===x&&q===E||(this.center=this.unproject(new i.P(M,q))),L&&(this.zoom+=this.scaleZoom(L)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,h=this.projection.name==="globe",x=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.bD(1,this.center.lat)/i.bD(1,i.c4));const E=i.bX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,E),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const L=this.projection.zAxisUnit==="meters"?x:1,M=this._camera.getWorldToCamera(this.worldSize,L);let q;const X=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(X[8]=2*-l.x/this.width,X[9]=2*l.y/this.height,this.isOrthographic){let jt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Vt=jt*this.aspect,Ut=-Vt,Ot=-jt;Vt-=l.x,Ut-=l.x,jt+=l.y,Ot+=l.y,q=this._camera.getCameraToClipOrthographic(Ut,Vt,Ot,jt,this._nearZ,this._farZ),((sr,Cr,Rr,wr)=>{for(let Jr=0;Jr<16;Jr++)sr[Jr]=Ea(Cr[Jr],Rr[Jr],wr)})(q,q,X,Zo(this.pitch>=15?1:this.pitch/15))}else q=X;const ne=i.a6.mat4.mul([],X,M);let ae=i.a6.mat4.mul([],q,M);if(this.projection.isReprojectedInTileSpace){const jt=this.locationCoordinate(this.center),Vt=i.a6.mat4.identity([]);i.a6.mat4.translate(Vt,Vt,[jt.x*this.worldSize,jt.y*this.worldSize,0]),i.a6.mat4.multiply(Vt,Vt,i.bY(this)),i.a6.mat4.translate(Vt,Vt,[-jt.x*this.worldSize,-jt.y*this.worldSize,0]),i.a6.mat4.multiply(ae,ae,Vt),i.a6.mat4.multiply(ne,ne,Vt),this.inverseAdjustmentMatrix=i.bZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.a6.mat4.scale([],ae,[this.worldSize,this.worldSize,this.worldSize/L,1]),this.projMatrix=ae,this.invProjMatrix=i.a6.mat4.invert(new Float64Array(16),this.projMatrix),h){const jt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);jt[8]=2*-l.x/this.width,jt[9]=2*l.y/this.height,this.expandedFarZProjMatrix=i.a6.mat4.mul([],jt,M)}else this.expandedFarZProjMatrix=this.projMatrix;const xe=i.a6.mat4.invert([],q);this.frustumCorners=i.b_.fromInvProjectionMatrix(xe,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!h);const Ce=new Float32Array(16);i.a6.mat4.identity(Ce),i.a6.mat4.scale(Ce,Ce,[1,-1,1]),i.a6.mat4.rotateX(Ce,Ce,this._pitch),i.a6.mat4.rotateZ(Ce,Ce,this.angle);const Ee=i.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.a6.mat4.clone(Ee);const Ge=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ee[8]=2*-l.x/this.width,Ee[9]=2*(l.y+Ge)/this.height,this.skyboxMatrix=i.a6.mat4.multiply(Ce,Ee,Ce);const $e=this.point,Ye=$e.x,Je=$e.y,ht=this.width%2/2,gt=this.height%2/2,ut=Math.cos(this.angle),wt=Math.sin(this.angle),_t=Ye-Math.round(Ye)+ut*ht+wt*gt,Pt=Je-Math.round(Je)+ut*gt+wt*ht,Tt=new Float64Array(ae);if(i.a6.mat4.translate(Tt,Tt,[_t>.5?_t-1:_t,Pt>.5?Pt-1:Pt,0]),this.alignedProjMatrix=Tt,ae=i.a6.mat4.create(),i.a6.mat4.scale(ae,ae,[this.width/2,-this.height/2,1]),i.a6.mat4.translate(ae,ae,[1,-1,0]),this.labelPlaneMatrix=ae,ae=i.a6.mat4.create(),i.a6.mat4.scale(ae,ae,[1,-1,1]),i.a6.mat4.translate(ae,ae,[-1,-1,0]),i.a6.mat4.scale(ae,ae,[2/this.width,2/this.height,1]),this.glCoordMatrix=ae,this.pixelMatrix=i.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,ne),this._calcFogMatrices(),this._distanceTileDataCache={},ae=i.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!ae)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=ae,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.b$(this);const jt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.a6.vec3.transformMat4(jt,jt,M),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=ae;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,x=this._camera.position,E=1/this.height/this._pixelsPerMercatorPixel,L=[l,l,h];i.a6.vec3.scale(L,L,E),i.a6.vec3.scale(x,x,-1),i.a6.vec3.multiply(x,x,L);const M=i.a6.mat4.create();i.a6.mat4.translate(M,M,x),i.a6.mat4.scale(M,M,L),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,h,E)}_computeCameraPosition(l){const h=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,x=this._camera.forward(),E=this.point,L=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-l/this.worldSize*this._centerAltitude;return[E.x/this.worldSize-x[0]*L,E.y/this.worldSize-x[1]*L,l/this.worldSize*this._centerAltitude-x[2]*L]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),x=this._camera.position[2],E=l[2];let L=1;this.projection.wrap&&(this.center=this.center.wrap()),E>0&&(L=Math.min((h-x)/E,1)),this._camera.position=i.a6.vec3.scaleAndAdd([],this._camera.position,l,L),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,h=this._camera.forward(),{pitch:x,bearing:E}=this._camera.getPitchBearing(),L=i.bD(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.bB(this._maxPitch)),q=Math.max((l[2]-L)/Math.cos(x),M),X=this._zoomFromMercatorZ(q);i.a6.vec3.scaleAndAdd(l,l,h,q),this._pitch=i.ap(x,i.bB(this.minPitch),i.bB(this.maxPitch)),this.angle=i.bA(E,-Math.PI,Math.PI),this._setZoom(i.ap(X,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.a5(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let h=0,x=i.bU,E=0,L=1/0;for(;x-h>1e-6&&x>h;){const M=h+.5*(x-h),q=this.tileSize*Math.pow(2,M),X=this.getCameraToCenterDistance(this.projection,M,q),ne=this.scaleZoom(X/(l*this.tileSize)),ae=Math.abs(M-ne);ae<L&&(L=ae,E=M),M<ne?h=M:x=M}return E}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,h){const x=Math.min(l.x,h.x),E=Math.max(l.x,h.x),L=Math.min(l.y,h.y),M=Math.max(l.y,h.y);if(L<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const q=[new i.P(x,L),new i.P(E,M),new i.P(x,M),new i.P(E,L)],X=this.renderWorldCopies?-3:0,ne=this.renderWorldCopies?4:1;for(const ae of q){const xe=this.pointRayIntersection(ae);if(xe.t<0)return!0;const Ce=this.rayIntersectionCoordinate(xe);if(Ce.x<X||Ce.y<0||Ce.x>ne||Ce.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.c0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(l,h){const x=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,l)),E=this._zoomFromMercatorZ(x)+h;return x-this._mercatorZfromZoom(E)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([h,x,E],L){const M=[h,x,E,1];i.a6.vec4.transformMat4(M,M,L);const q=M[3]=Math.max(M[3],1e-6);return M[0]/=q,M[1]/=q,M[2]/=q,M}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,l))}}getCameraToCenterDistance(l,h=this.zoom,x=this.worldSize){const E=i.bX(l,h,this.width,this.height,1024),L=l.pixelSpaceConversion(this.center.lat,x,E);let M=.5/Math.tan(.5*this._fov)*this.height*L;return this.isOrthographic&&(M=Ea(1,M,Zo(this.pitch>=15?1:this.pitch/15))),M}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.a6.mat4.multiply(l,l,this.globeMatrix),l}getFrustum(l){return i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,this.projection.zAxisUnit==="meters")}}const Ki=(v,l)=>{if(l>0&&v.terrain&&i.w("Cutoff is currently disabled on terrain"),l<=0||v.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const h=v.transform,x=Math.max(Math.abs(h._zoom-(v.minCutoffZoom-1)),1),E=h.isLODDisabled(!1)?i.a7(60,45,h.pitch):i.a7(30,15,h.pitch),L=h._farZ-h._nearZ,M=l*h.height,q=((1-(X=E))*h.cameraToCenterDistance+X*(h._farZ+M))*x;var X;return{shouldRenderCutoff:E<1,uniformValues:{u_cutoff_params:[h._nearZ,h._farZ,(q-h._nearZ)/L,(q-M-h._nearZ)/L]}}},us={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class la{constructor(l,h){this.aabb=l,this.lastCascade=h}}class Yr{add(l,h){const x=this.receivers[l.key];x!==void 0?(x.aabb.min[0]=Math.min(x.aabb.min[0],h.min[0]),x.aabb.min[1]=Math.min(x.aabb.min[1],h.min[1]),x.aabb.min[2]=Math.min(x.aabb.min[2],h.min[2]),x.aabb.max[0]=Math.max(x.aabb.max[0],h.max[0]),x.aabb.max[1]=Math.max(x.aabb.max[1],h.max[1]),x.aabb.max[2]=Math.max(x.aabb.max[2],h.max[2])):this.receivers[l.key]=new la(h,null)}clear(){this.receivers={}}get(l){return this.receivers[l.key]}computeRequiredCascades(l,h,x){const E=i.c9.fromPoints(l.points);let L=0;for(const M in this.receivers){const q=this.receivers[M];if(!q||!E.intersectsAabb(q.aabb))continue;q.aabb.min=E.closestPoint(q.aabb.min),q.aabb.max=E.closestPoint(q.aabb.max);const X=q.aabb.getCorners();for(let ne=0;ne<x.length;ne++){let ae=!0;for(const xe of X){const Ce=[xe[0]*h,xe[1]*h,xe[2]];if(i.a6.vec3.transformMat4(Ce,Ce,x[ne].matrix),Ce[0]<-1||Ce[0]>1||Ce[1]<-1||Ce[1]>1){ae=!1;break}}if(q.lastCascade=ne,L=Math.max(L,ne),ae)break}}return L+1}}class sc{constructor(l){this.painter=l,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Yr,this._depthMode=new Dr(l.context.gl.LEQUAL,Dr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,l.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),l.tp.registerParameter(us,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),l.tp.registerParameter(us,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),l.tp.registerParameter(us,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),l.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const l of this._cascades)l.texture.destroy(),l.framebuffer.destroy();this._cascades=[]}updateShadowParameters(l,h){const x=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!h||!h.properties)return;const E=h.properties.get("shadow-intensity");if(!h.shadowsEnabled()||E<=0||(this._shadowLayerCount=x.style.order.reduce((Ge,$e)=>{const Ye=x.style._mergedLayers[$e];return Ge+(Ye.hasShadowPass()&&!Ye.isHidden(l.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const L=x.context,M=us.shadowMapResolution,q=us.shadowMapResolution;if(this._cascades.length===0||us.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Ge=0;Ge<us.cascadeCount;++Ge){const $e=x._shadowMapDebug,Ye=L.gl,Je=L.createFramebuffer(M,q,$e,"texture"),ht=new i.T(L,{width:M,height:q,data:null},Ye.DEPTH_COMPONENT16);if(Je.depthAttachment.set(ht.texture),$e){const gt=new i.T(L,{width:M,height:q,data:null},Ye.RGBA8);Je.colorAttachment.set(gt.texture)}this._cascades.push({framebuffer:Je,texture:ht,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.bN,scale:0})}}this.shadowDirection=oc(h);let X=0;if(l.elevation){const Ge=l.elevation,$e=[1e4,-1e4];Ge.visibleDemTiles.filter(Ye=>Ye.dem).forEach(Ye=>{const Je=Ye.dem.tree;$e[0]=Math.min($e[0],Je.minimums[0]),$e[1]=Math.max($e[1],Je.maximums[0])}),$e[0]!==1e4&&(X=($e[1]-$e[0])*Ge.exaggeration())}const ne=1.5*l.cameraToCenterDistance,ae=3*ne,xe=new Float64Array(16);for(let Ge=0;Ge<this._cascades.length;++Ge){const $e=this._cascades[Ge];let Ye=l.height/50,Je=1;us.cascadeCount===1?Je=ae:Ge===0?Je=ne:(Ye=ne,Je=ae);const[ht,gt]=ql(l,this.shadowDirection,Ye,Je,us.shadowMapResolution,X);$e.scale=l.scale,$e.matrix=ht,$e.boundingSphereRadius=gt,i.a6.mat4.invert(xe,$e.matrix),$e.frustum=i.bN.fromInvProjectionMatrix(xe,1,0,!0),$e.far=Je}const Ce=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[Ce].far,this._cascades[Ce].far],this._uniformValues.u_shadow_intensity=E,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/us.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=us.shadowMapResolution,this._uniformValues.u_shadowmap_0=so.ShadowMap0,this._uniformValues.u_shadowmap_1=so.ShadowMap0+1,this._groundShadowTiles=x.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Ee=x.transform.elevation;for(const Ge of this._groundShadowTiles){let $e={min:0,max:0};if(Ee){const Ye=Ee.getMinMaxForTile(Ge);Ye&&($e=Ye)}this.addShadowReceiver(Ge.toUnwrapped(),$e.min,$e.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(l){this._enabled=l}drawShadowPass(l,h){if(!this.enabled)return;const x=this.painter,E=x.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(x.transform.getFrustum(0),x.transform.worldSize,this._cascades),E.viewport.set([0,0,us.shadowMapResolution,us.shadowMapResolution]);for(let L=0;L<this._numCascadesToRender;++L){x.currentShadowCascade=L,E.bindFramebuffer.set(this._cascades[L].framebuffer.framebuffer),E.clear({color:i.bz.white,depth:1});for(const M of l.order){const q=l._mergedLayers[M];if(!q.hasShadowPass()||q.isHidden(x.transform.zoom))continue;const X=l.getLayerSourceCache(q),ne=X?h[X.id]:void 0;(q.type==="model"||ne&&ne.length)&&x.renderLayer(x,X,q,ne)}}x.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const l=this.painter,h=l.style,x=l.context,E=h.directionalLight,L=h.ambientLight;if(!E||!L)return;const M=[],q=Ki(l,l.longestCutoffRange);q.shouldRenderCutoff&&M.push("RENDER_CUTOFF");const X=yl(h,E,L),ne=new Dr(x.gl.LEQUAL,Dr.ReadOnly,l.depthRangeFor3D);for(const ae of this._groundShadowTiles){const xe=ae.toUnwrapped(),Ce=l.isTileAffectedByFog(ae),Ee=l.getOrCreateProgram("groundShadow",{defines:M,overrideFog:Ce});this.setupShadows(xe,Ee),l.uploadCommonUniforms(x,Ee,xe,null,q);const Ge={u_matrix:l.transform.calculateProjMatrix(xe),u_ground_shadow_factor:X};Ee.draw(l,x.gl.TRIANGLES,ne,gn.disabled,qr.multiply,vn.disabled,Ge,"ground_shadow",l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments,{},l.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?qr.unblended:qr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(l){const h=this.painter.transform,x=h.calculatePosMatrix(l,h.worldSize);return i.a6.mat4.multiply(x,this._cascades[this.painter.currentShadowCascade].matrix,x),Float32Array.from(x)}calculateShadowPassMatrixFromMatrix(l){return i.a6.mat4.multiply(l,this._cascades[this.painter.currentShadowCascade].matrix,l),Float32Array.from(l)}setupShadows(l,h,x,E=0){if(!this.enabled)return;const L=this.painter.transform,M=this.painter.context,q=M.gl,X=this._uniformValues,ne=new Float64Array(16),ae=L.calculatePosMatrix(l,L.worldSize);for(let xe=0;xe<this._cascades.length;xe++)i.a6.mat4.multiply(ne,this._cascades[xe].matrix,ae),X[xe===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(ne),M.activeTexture.set(q.TEXTURE0+so.ShadowMap0+xe),this._cascades[xe].texture.bind(q.NEAREST,q.CLAMP_TO_EDGE);if(this.useNormalOffset=!!x,this.useNormalOffset){const xe=i.c8(l.canonical),Ce=2/L.tileSize*i.ab/us.shadowMapResolution,Ee=Ce*this._cascades[0].boundingSphereRadius,Ge=Ce*this._cascades[this._cascades.length-1].boundingSphereRadius,$e=(x==="vector-tile"?1:3)/Math.pow(2,E-l.canonical.z-(1-L.zoom+Math.floor(L.zoom)));X.u_shadow_normal_offset=[xe,Ee*$e,Ge*$e],X.u_shadow_bias=[6e-5,.0012,.012]}else X.u_shadow_bias=[36e-5,.0012,.012];h.setShadowUniformValues(M,X)}setupShadowsFromMatrix(l,h,x=!1){if(!this.enabled)return;const E=this.painter.context,L=E.gl,M=this._uniformValues,q=new Float64Array(16);for(let X=0;X<us.cascadeCount;X++)i.a6.mat4.multiply(q,this._cascades[X].matrix,l),M[X===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(q),E.activeTexture.set(L.TEXTURE0+so.ShadowMap0+X),this._cascades[X].texture.bind(L.NEAREST,L.CLAMP_TO_EDGE);if(this.useNormalOffset=x,x){const X=us.normalOffset;M.u_shadow_normal_offset=[1,X,X],M.u_shadow_bias=[6e-5,.0012,.012]}else M.u_shadow_bias=[36e-5,.0012,.012];h.setShadowUniformValues(E,M)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(l,h,x,E){if(E[2]>=0)return{};const L=function(X,ne,ae){const xe=ae/(1<<X.canonical.z);return new i.c9([X.canonical.x*xe+X.wrap*ae,X.canonical.y*xe+X.wrap*ae,0],[(X.canonical.x+1)*xe+X.wrap*ae,(X.canonical.y+1)*xe+X.wrap*ae,ne])}(l,h,x).getCorners(),M=h/-E[2];E[0]<0?(i.a6.vec3.add(L[0],L[0],[E[0]*M,0,0]),i.a6.vec3.add(L[3],L[3],[E[0]*M,0,0])):E[0]>0&&(i.a6.vec3.add(L[1],L[1],[E[0]*M,0,0]),i.a6.vec3.add(L[2],L[2],[E[0]*M,0,0])),E[1]<0?(i.a6.vec3.add(L[0],L[0],[0,E[1]*M,0]),i.a6.vec3.add(L[1],L[1],[0,E[1]*M,0])):E[1]>0&&(i.a6.vec3.add(L[2],L[2],[0,E[1]*M,0]),i.a6.vec3.add(L[3],L[3],[0,E[1]*M,0]));const q={};return q.vertices=L,q.planes=[ws(L[1],L[0],L[4]),ws(L[2],L[1],L[5]),ws(L[3],L[2],L[6]),ws(L[0],L[3],L[7])],q}addShadowReceiver(l,h,x){this._receivers.add(l,i.c9.fromTileIdAndHeight(l,h,x))}getMaxCascadeForTile(l){const h=this._receivers.get(l);return h&&h.lastCascade?h.lastCascade:0}}function ws(v,l,h){const x=i.a6.vec3.sub([],h,l),E=i.a6.vec3.sub([],v,l),L=i.a6.vec3.cross([],x,E),M=i.a6.vec3.length(L);return M===0?[0,0,1,0]:(i.a6.vec3.scale(L,L,1/M),[L[0],L[1],L[2],-i.a6.vec3.dot(L,l)])}function oc(v){const l=v.properties.get("direction"),h=i.c7(l.x,l.y,l.z);h[2]=i.ap(h[2],0,75);const x=i.ca([h[0],h[1],h[2]]);return i.a6.vec3.fromValues(x.x,x.y,x.z)}function yl(v,l,h){const x=l.properties.get("color"),E=l.properties.get("intensity"),L=l.properties.get("direction"),M=[L.x,L.y,L.z],q=h.properties.get("color"),X=h.properties.get("intensity"),ne=Math.max(i.a6.vec3.dot([0,0,1],M),0),ae=[0,0,0];i.a6.vec3.scale(ae,q.toRenderColor(v.getLut(l.scope)).toArray01Linear().slice(0,3),X);const xe=[0,0,0];return i.a6.vec3.scale(xe,x.toRenderColor(v.getLut(h.scope)).toArray01Linear().slice(0,3),ne*E),i.cb([ae[0]>0?ae[0]/(ae[0]+xe[0]):0,ae[1]>0?ae[1]/(ae[1]+xe[1]):0,ae[2]>0?ae[2]/(ae[2]+xe[2]):0])}function ql(v,l,h,x,E,L){const M=v.zoom,q=v.scale,X=v.worldSize,ne=1/X,ae=v.aspect,xe=Math.sqrt(1+ae*ae)*Math.tan(.5*v.fovX),Ce=xe*xe,Ee=x-h,Ge=x+h;let $e,Ye;Ce>Ee/Ge?($e=x,Ye=x*xe):($e=.5*Ge*(1+Ce),Ye=.5*Math.sqrt(Ee*Ee+2*(x*x+h*h)*Ce+Ge*Ge*Ce*Ce));const Je=v.projection.pixelsPerMeter(v.center.lat,X),ht=v._camera.getCameraToWorldMercator(),gt=[0,0,-$e*ne];i.a6.vec3.transformMat4(gt,gt,ht);let ut=Ye*ne;const wt=v._edgeInsets;if(!(wt.left===0&&wt.top===0&&wt.right===0&&wt.bottom===0||wt.left===wt.right&&wt.top===wt.bottom)){const en=v._camera.getWorldToCamera(v.worldSize,v.projection.zAxisUnit==="meters"?Je:1),nn=v._camera.getCameraToClipPerspective(v._fov,v.width/v.height,h,x);nn[8]=2*-v.centerOffset.x/v.width,nn[9]=2*v.centerOffset.y/v.height;const kr=new Float64Array(16);i.a6.mat4.mul(kr,nn,en);const Hr=new Float64Array(16);i.a6.mat4.invert(Hr,kr);const Yn=i.bN.fromInvProjectionMatrix(Hr,X,M,!0);for(const dn of Yn.points){const Nn=((_t=dn)[0]/=q,_t[1]/=q,_t[2]=i.bD(_t[2],v._center.lat),_t);ut=Math.max(ut,i.a6.vec3.len(i.a6.vec3.subtract([],gt,Nn)))}}var _t;ut*=E/(E-1);const Pt=Math.acos(l[2]),Tt=Math.atan2(-l[0],-l[1]),jt=new il;jt.position=gt,jt.setPitchBearing(Pt,Tt);const Vt=jt.getWorldToCamera(X,Je),Ut=ut*X,Ot=Math.min(v._mercatorZfromZoom(17)*X*-2,-2*Ut),sr=jt.getCameraToClipOrthographic(-Ut,Ut,-Ut,Ut,Ot,(Ut+L*Je)/l[2]),Cr=new Float64Array(16);i.a6.mat4.multiply(Cr,sr,Vt);const Rr=i.a6.vec3.fromValues(Math.floor(1e6*gt[0])/1e6*X,Math.floor(1e6*gt[1])/1e6*X,0),wr=.5*E,Jr=[0,0,0];i.a6.vec3.transformMat4(Jr,Rr,Cr),i.a6.vec3.scale(Jr,Jr,wr);const or=[Math.floor(Jr[0]),Math.floor(Jr[1]),Math.floor(Jr[2])],Fr=[0,0,0];i.a6.vec3.sub(Fr,Jr,or),i.a6.vec3.scale(Fr,Fr,-1/wr);const Er=new Float64Array(16);return i.a6.mat4.identity(Er),i.a6.mat4.translate(Er,Er,Fr),i.a6.mat4.multiply(Cr,Er,Cr),[Cr,Ut]}class ks extends i.E{constructor(l){super(),this.requestManager=l,this.models={"":{}},this.numModelsLoading={}}loadModel(l,h){return i.aG(this.requestManager.transformRequest(h,i.R.Model).url).then(x=>{if(!x)return;const E=i.aH(x),L=new i.aI(l,void 0,void 0,E);return L.computeBoundsAndApplyParent(),L}).catch(x=>{if(x&&x.status===404)return null;this.fire(new i.t(new Error(`Could not load model ${l} from ${h}: ${x.message}`)))})}load(l,h){this.models[h]||(this.models[h]={});const x=Object.keys(l);this.numModelsLoading[h]=(this.numModelsLoading[h]||0)+x.length;const E=[];for(const L of x)E.push(this.loadModel(L,l[L]));Promise.allSettled(E).then(L=>{for(let M=0;M<L.length;M++){const{status:q,value:X}=L[M];q==="fulfilled"&&X&&(this.models[h][x[M]]={model:X,numReferences:1})}this.numModelsLoading[h]-=x.length,this.fire(new i.x("data",{dataType:"style"}))}).catch(L=>{this.fire(new i.t(new Error(`Could not load models: ${L.message}`)))})}isLoaded(){for(const l in this.numModelsLoading)if(this.numModelsLoading[l]>0)return!1;return!0}hasModel(l,h){return!!this.getModel(l,h)}getModel(l,h){return this.models[h]||(this.models[h]={}),this.models[h][l]?this.models[h][l].model:void 0}addModel(l,h,x){this.models[x]||(this.models[x]={}),this.hasModel(l,x)&&this.models[x][l].numReferences++,this.load({[l]:this.requestManager.normalizeModelURL(h)},x)}addModels(l,h){this.models[h]||(this.models[h]={});const x={};for(const E in l)this.models[h][E]={},x[E]=this.requestManager.normalizeModelURL(l[E]);this.load(x,h)}addModelsFromBucket(l,h){this.models[h]||(this.models[h]={});const x={};for(const E of l)this.hasModel(E,h)?this.models[h][E].numReferences++:x[E]=this.requestManager.normalizeModelURL(E);this.load(x,h)}removeModel(l,h){if(this.models[h]&&this.models[h][l]&&(this.models[h][l].numReferences--,this.models[h][l].numReferences===0)){const x=this.models[h][l].model;delete this.models[h][l],x.destroy()}}listModels(l){return this.models[l]||(this.models[l]={}),Object.keys(this.models[l])}upload(l,h){this.models[h]||(this.models[h]={});for(const x in this.models[h])this.models[h][x].model&&this.models[h][x].model.upload(l.context)}}const Jo=new i.a0({data:new i.a1(i._.colorTheme.data)}),Aa=(v,l)=>kt(v,l&&l.filter(h=>h.identifier!=="source.canvas")),Pc=i.ar(Kr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),yr=i.ar(Kr,["setCenter","setZoom","setBearing","setPitch"]),Mr={version:8,layers:[],sources:{}},xn={duration:300,delay:0};class kn extends i.E{constructor(l,h={}){super(),this.map=l,this.scope=h.scope||"",this.globalId=null,this.fragments=[],this.importDepth=h.importDepth||0,this.importsCache=h.importsCache||new Map,this.resolvedImports=h.resolvedImports||new Set,this.transition=i.l({},xn),this._buildingIndex=new pn(this),this.crossTileSymbolIndex=new An,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=h.styleChanges||new Ar,this.dispatcher=h.dispatcher?h.dispatcher:new i.cd(i.ce(),this),h.imageManager?this.imageManager=h.imageManager:(this.imageManager=new Ue,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=h.glyphManager?h.glyphManager:new i.cf(l._requestManager,h.localFontFamily?i.cg.all:h.localIdeographFontFamily?i.cg.ideographs:i.cg.none,h.localFontFamily||h.localIdeographFontFamily),h.modelManager?this.modelManager=h.modelManager:(this.modelManager=new ks(l._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=h.configOptions?h.configOptions:new Map,this._configDependentLayers=h.configDependentLayers?h.configDependentLayers:new Set,this._config=h.config,this._initialConfig=h.initialConfig,this.dispatcher.broadcast("setReferrer",i.ch());const x=this;this._rtlTextPluginCallback=kn.registerForPluginStateChange(E=>{x.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(L,M)=>{if(i.ci(L),M&&M.every(q=>q))for(const q in x._sourceCaches){const X=x._sourceCaches[q],ne=X.getSource().type;ne!=="vector"&&ne!=="geojson"||X.reload()}})}),this.on("data",E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const L=this.getOwnSource(E.sourceId);if(L&&L.vectorLayerIds)for(const M in this._layers){const q=this._layers[M];q.source===L.id&&this._validateLayer(q)}})}load(l){return l?(typeof l=="string"?this.loadURL(l):this.loadJSON(l),this):this}_getGlobalId(l){if(!l)return null;if(typeof l=="string"){if(i.f(l))return l;const h=i.cj(l);if(!h.startsWith("http"))try{return new URL(h,location.href).toString()}catch{return h}return h}return`json://${i.ck(JSON.stringify(l))}`}_diffStyle(l,h,x){this.globalId=this._getGlobalId(l);const E=(L,M)=>{try{M(null,this.setState(L,x))}catch(q){M(q,!1)}};if(typeof l=="string"){const L=this.map._requestManager.normalizeStyleURL(l),M=this.map._requestManager.transformRequest(L,i.R.Style);i.n(M,(q,X)=>{q?this.fire(new i.t(q)):X&&E(X,h)})}else typeof l=="object"&&E(l,h)}loadURL(l,h={}){this.fire(new i.x("dataloading",{dataType:"style"}));const x=typeof h.validate=="boolean"?h.validate:!i.f(l);this.globalId=this._getGlobalId(l),l=this.map._requestManager.normalizeStyleURL(l,h.accessToken),this.resolvedImports.add(l);const E=this.importsCache.get(l);if(E)return this._load(E,x);const L=this.map._requestManager.transformRequest(l,i.R.Style);this._request=i.n(L,(M,q)=>{if(this._request=null,M)this.fire(new i.t(M));else if(q)return this.importsCache.set(l,q),this._load(q,x)})}loadJSON(l,h={}){this.fire(new i.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(l),this._request=i.q.frame(()=>{this._request=null,this._load(l,h.validate!==!1)})}loadEmpty(){this.fire(new i.x("dataloading",{dataType:"style"})),this._load(Mr,!1)}_loadImports(l,h,x){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const E=[];for(const L of l){const M=this._createFragmentStyle(L),q=new Promise(ae=>{M.once("style.import.load",ae),M.once("error",ae)}).then(()=>this.mergeAll());if(E.push(q),this.resolvedImports.has(L.url)){M.loadEmpty();continue}const X=L.data||this.importsCache.get(L.url);X?(M.loadJSON(X,{validate:h}),this._isInternalStyle(X)&&(M.globalId=null)):L.url?M.loadURL(L.url,{validate:h}):M.loadEmpty();const ne={style:M,id:L.id,config:L.config};if(x){const ae=this.fragments.findIndex(({id:xe})=>xe===x);this.fragments=this.fragments.slice(0,ae).concat(ne).concat(this.fragments.slice(ae))}else this.fragments.push(ne)}return Promise.allSettled(E)}getImportGlobalIds(l=this,h=new Set){for(const x of l.fragments)x.style.globalId&&h.add(x.style.globalId),this.getImportGlobalIds(x.style,h);return[...h.values()]}_createFragmentStyle(l){const h=this.scope?i.av(l.id,this.scope):l.id;let x;const E=this._initialConfig&&this._initialConfig[h];(l.config||E)&&(x=i.l({},l.config,E));const L=new kn(this.map,{scope:h,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:x,configOptions:this.options,configDependentLayers:this._configDependentLayers});return L.setEventedParent(this.map,{style:L}),L}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(l){return this.isRootStyle()&&(l.fragment||!!l.schema&&l.fragment!==!1)}_load(l,h){const x=l.schema;if(this._isInternalStyle(l)){const M=i.l({},Mr,{imports:[{id:"basemap",data:l,url:""}]});return void this._load(M,h)}if(this.updateConfig(this._config,x),h&&Aa(this,Rn(l)))return;this._loaded=!0,this.stylesheet=i.cl(l);const E=()=>{for(const ne in l.sources)this.addSource(ne,l.sources[ne],{validate:!1,isInitialLoad:!0});l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(l.glyphs,this.scope);const M=Mn(this.stylesheet.layers);if(this._order=M.map(ne=>ne.id),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const ne=this.stylesheet.lights[0];this.light=new Rt(ne.properties,ne.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Rt(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const ne of M){const ae=i.cq(ne,this.scope,this._styleColorTheme.lut,this.options);ae.configDependencies.size!==0&&this._configDependentLayers.add(ae.fqid),ae.setEventedParent(this,{layer:{id:ae.id}}),this._layers[ae.id]=ae,this._serializedLayers[ae.id]=ae.serialize();const xe=this.getOwnLayerSourceCache(ae),Ce=!!this.directionalLight&&this.directionalLight.shadowsEnabled();xe&&ae.canCastShadows()&&Ce&&(xe.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const q=this.stylesheet.terrain;q&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(q,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.x("data",{dataType:"style"}));const X=this.isRootStyle();l.imports?this._loadImports(l.imports,h).then(()=>{this._reloadImports(),this.fire(new i.x(X?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new i.x(X?"style.load":"style.import.load")))},L=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=L,L){const M=this._evaluateColorThemeData(L);this._loadColorTheme(M).then(()=>{E()}).catch(q=>{i.w(`Couldn't load color theme from the stylesheet: ${q}`),E()})}else this._styleColorTheme.lut=null,E()}isRootStyle(){return this.importDepth===0}mergeAll(){let l,h,x,E,L,M,q,X;const ne={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(ae=>{if(ae.stylesheet){if(ae.light!=null&&(l=ae.light),ae.stylesheet.lights)for(const xe of ae.stylesheet.lights)xe.type==="ambient"&&ae.ambientLight!=null&&(h=ae.ambientLight),xe.type==="directional"&&ae.directionalLight!=null&&(x=ae.directionalLight);E=this._prioritizeTerrain(E,ae.terrain,ae.stylesheet.terrain),ae.stylesheet.fog&&ae.fog!=null&&(L=ae.fog),ae.stylesheet.camera!=null&&(X=ae.stylesheet.camera),ae.stylesheet.projection!=null&&(M=ae.stylesheet.projection),ae.stylesheet.transition!=null&&(q=ae.stylesheet.transition),ne[ae.scope]=ae._styleColorTheme}}),this.light=l,this.ambientLight=h,this.directionalLight=x,this.fog=L,this._styleColorThemeForScope=ne,E===null?delete this.terrain:this.terrain=E,this.camera=X||{"camera-projection":"perspective"},this.projection=M||{name:"mercator"},this.transition=i.l({},xn,q),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(l){const h=x=>{for(const E of x.fragments)h(E.style);l(x)};h(this)}_prioritizeTerrain(l,h,x){const E=l&&l.drapeRenderMode===0;return x===null?h&&h.drapeRenderMode===0?h:E?l:null:h!=null&&(!l||E||h&&h.drapeRenderMode===1)?h:l}mergeTerrain(){let l;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(h=>{l=this._prioritizeTerrain(l,h.terrain,h.stylesheet.terrain)}),l===null?delete this.terrain:this.terrain=l}mergeProjection(){let l;this.forEachFragmentStyle(h=>{h.stylesheet.projection!=null&&(l=h.stylesheet.projection)}),this.projection=l||{name:"mercator"}}mergeSources(){const l={},h={},x={};this.forEachFragmentStyle(E=>{for(const L in E._sourceCaches){const M=i.av(L,E.scope);l[M]=E._sourceCaches[L]}for(const L in E._otherSourceCaches){const M=i.av(L,E.scope);h[M]=E._otherSourceCaches[L]}for(const L in E._symbolSourceCaches){const M=i.av(L,E.scope);x[M]=E._symbolSourceCaches[L]}}),this._mergedSourceCaches=l,this._mergedOtherSourceCaches=h,this._mergedSymbolSourceCaches=x}mergeLayers(){const l={},h=[],x={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(L=>{for(const M of L._order){const q=L._layers[M];if(q.type==="slot"){const X=i.cm(M);if(l[X])continue;l[X]=[]}q.slot&&l[q.slot]?l[q.slot].push(q):h.push(q)}}),this._mergedOrder=[];const E=(L=[])=>{for(const M of L)if(M.type==="slot"){const q=i.cm(M.id);l[q]&&E(l[q]),this._mergedSlots.push(q)}else{const q=i.av(M.id,M.scope);this._mergedOrder.push(q),x[q]=M,M.is3D()&&(this._has3DLayers=!0),M.type==="circle"&&(this._hasCircleLayers=!0),M.type==="symbol"&&(this._hasSymbolLayers=!0),M.type==="clip"&&(this._clipLayerPresent=!0)}};E(h),this._mergedOrder.sort((L,M)=>{const q=x[L],X=x[M];return q.hasInitialOcclusionOpacityProperties?X.is3D()?1:0:q.is3D()&&X.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=x,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(l){return this.stylesheet.camera=i.l({},this.stylesheet.camera,l),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(l){return l.data?function(h,x,E){const L=i.l({},x);for(const q of Object.keys(i._.colorTheme))L[q]===void 0&&(L[q]=i._.colorTheme[q].default);const M=new i.$(Jo,h,new Map(E));return M.setTransitionOrValue(L,E),M.untransitioned().possiblyEvaluate(new i.a3(0))}(this.scope,l,this.options).get("data"):null}_loadColorTheme(l){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const h=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((x,E)=>{const L="data:image/png;base64,";if(!l||l.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void x();let M=l;M.startsWith(L)||(M=L+M);const q="mapbox-reserved-lut",X=new Image;X.src=M,X.onerror=()=>{this._styleColorTheme.lutLoading=!1,E(new Error("Failed to load image data"))},X.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==h)return void x();this._styleColorTheme.lutLoading=!1;const{width:ne,height:ae,data:xe}=i.q.getImageData(X);if(ae>32)return void E(new Error("The height of the image must be less than or equal to 32 pixels."));if(ne!==ae*ae)return void E(new Error("The width of the image must be equal to the height squared."));this.getImage(q)&&this.removeImage(q),this.addImage(q,{data:new i.r({width:ne,height:ae},xe),pixelRatio:1,sdf:!1,version:0});const Ce=this.imageManager.getImage(q,this.scope);Ce?(this._styleColorTheme.lut={image:Ce.data,data:l},x()):E(new Error("Missing LUT image."))}})}getLut(l){const h=this._styleColorThemeForScope[l];return h?h.lut:null}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(l){this._spriteRequest=function(h,x,E){let L,M,q;const X=i.q.devicePixelRatio>1?"@2x":"";let ne=i.n(x.transformRequest(x.normalizeSpriteURL(h,X,".json"),i.R.SpriteJSON),(Ce,Ee)=>{ne=null,q||(q=Ce,L=Ee,xe())}),ae=i.o(x.transformRequest(x.normalizeSpriteURL(h,X,".png"),i.R.SpriteImage),(Ce,Ee)=>{ae=null,q||(q=Ce,M=Ee,xe())});function xe(){if(q)E(q);else if(L&&M){const Ce=i.q.getImageData(M),Ee={};for(const Ge in L){const{width:$e,height:Ye,x:Je,y:ht,sdf:gt,pixelRatio:ut,stretchX:wt,stretchY:_t,content:Pt}=L[Ge],Tt=new i.r({width:$e,height:Ye});i.r.copy(Ce,Tt,{x:Je,y:ht},{x:0,y:0},{width:$e,height:Ye},null),Ee[Ge]={data:Tt,pixelRatio:ut,sdf:gt,stretchX:wt,stretchY:_t,content:Pt}}E(null,Ee)}}return{cancel(){ne&&(ne.cancel(),ne=null),ae&&(ae.cancel(),ae=null)}}}(l,this.map._requestManager,(h,x)=>{if(this._spriteRequest=null,h)this.fire(new i.t(h));else if(x)for(const E in x)this.imageManager.addImage(E,this.scope,x[E]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.x("data",{dataType:"style"}))})}_validateLayer(l){const h=this.getOwnSource(l.source);if(!h)return;const x=l.sourceLayer;x&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(x)===-1)&&this.fire(new i.t(new Error(`Source layer "${x}" does not exist on source "${h.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:l}of this.fragments)if(!l.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((l,h)=>{const x=this.fragments[h];return x&&x.style&&(l.data=x.style.serialize()),l})}_serializeSources(){const l={};for(const h in this._sourceCaches){const x=this._sourceCaches[h].getSource();l[x.id]||(l[x.id]=x.serialize())}return l}_serializeLayers(l){const h=[];for(const x of l){const E=this._layers[x];E&&E.type!=="custom"&&h.push(E.serialize())}return h}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(l){return!!this.terrain&&l.isDraped(this.getLayerSourceCache(l))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(l){const h=this.getOwnLayer(l);if(h)return h;this.fire(new i.t(new Error(`The layer '${l}' does not exist in the map's style.`)))}_checkSource(l){const h=this.getOwnSource(l);if(h)return h;this.fire(new i.t(new Error(`The source '${l}' does not exist in the map's style.`)))}precompilePrograms(l,h){const x=this.map.painter;if(x)for(let E=l.minzoom||0;E<(l.maxzoom||25.5);E++){const L=l.getProgramIds();if(L)for(const M of L){const q=l.getDefaultProgramParams(M,h.zoom,this._styleColorTheme.lut);q&&(x.style=this,this.fog&&(x._fogVisible=!0,q.overrideFog=!0,x.getOrCreateProgram(M,q)),x._fogVisible=!1,q.overrideFog=!1,x.getOrCreateProgram(M,q),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(q.overrideRtt=!0,x.getOrCreateProgram(M,q)))}}}update(l){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(l),this.directionalLight&&this.directionalLight.recalculate(l);const h=this.calculateLightsBrightness();l.brightness=h||0,h!==this._brightness&&(this._brightness=h,this.dispatcher.broadcast("setBrightness",h));const x=this._changes.isDirty();let E=!1;if(this._changes.isDirty()){const M=this._changes.getLayerUpdatesByScope();for(const q in M){const{updatedIds:X,removedIds:ne}=M[q];(X||ne)&&(this._updateWorkerLayers(q,X,ne),E=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(l),this.light&&this.light.updateTransitions(l),this.ambientLight&&this.ambientLight.updateTransitions(l),this.directionalLight&&this.directionalLight.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._changes.reset()}const L={};for(const M in this._mergedSourceCaches){const q=this._mergedSourceCaches[M];L[M]=q.used,q.used=!1,q.tileCoverLift=0}for(const M of this._mergedOrder){const q=this._mergedLayers[M];if(q.recalculate(l,this._availableImages),!q.isHidden(l.zoom)){const X=this.getLayerSourceCache(q);X&&(X.used=!0,X.tileCoverLift=Math.max(X.tileCoverLift,q.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(q,l)}):this.precompilePrograms(q,l))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&E&&this.mergeLayers();for(const M in L){const q=this._mergedSourceCaches[M];L[M]!==q.used&&q.getSource().fire(new i.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:q.getSource().id}))}this.light&&this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),x&&this.fire(new i.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=this._changes.getUpdatedImages();if(l.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],l);this._changes.resetUpdatedImages()}}_updateWorkerLayers(l,h,x){const E=this.getFragmentStyle(l);E&&this.dispatcher.broadcast("updateLayers",{layers:h?E._serializeLayers(h):[],scope:l,removedIds:x||[],options:E.options})}setState(l,h){if(this._checkLoaded(),Aa(this,Rn(l)))return!1;(l=i.cl(l)).layers=Mn(l.layers);const x=function(M,q){if(!M)return[{command:Kr.setStyle,args:[q]}];let X=[];try{if(!i.bh(M.version,q.version))return[{command:Kr.setStyle,args:[q]}];if(i.bh(M.center,q.center)||X.push({command:Kr.setCenter,args:[q.center]}),i.bh(M.zoom,q.zoom)||X.push({command:Kr.setZoom,args:[q.zoom]}),i.bh(M.bearing,q.bearing)||X.push({command:Kr.setBearing,args:[q.bearing]}),i.bh(M.pitch,q.pitch)||X.push({command:Kr.setPitch,args:[q.pitch]}),i.bh(M.sprite,q.sprite)||X.push({command:Kr.setSprite,args:[q.sprite]}),i.bh(M.glyphs,q.glyphs)||X.push({command:Kr.setGlyphs,args:[q.glyphs]}),i.bh(M.imports,q.imports)||function(Ee=[],Ge=[],$e){Ge=Ge||[];const Ye=(Ee=Ee||[]).map(ei),Je=Ge.map(ei),ht=Ee.reduce(Ci,{}),gt=Ge.reduce(Ci,{}),ut=Ye.slice();let wt,_t,Pt,Tt;for(wt=0,_t=0;wt<Ye.length;wt++)Pt=Ye[wt],gt.hasOwnProperty(Pt)?_t++:($e.push({command:Kr.removeImport,args:[Pt]}),ut.splice(ut.indexOf(Pt,_t),1));for(wt=0,_t=0;wt<Je.length;wt++)Pt=Je[Je.length-1-wt],ut[ut.length-1-wt]!==Pt&&(ht.hasOwnProperty(Pt)?($e.push({command:Kr.removeImport,args:[Pt]}),ut.splice(ut.lastIndexOf(Pt,ut.length-_t),1)):_t++,Tt=ut[ut.length-wt],$e.push({command:Kr.addImport,args:[gt[Pt],Tt]}),ut.splice(ut.length-wt,0,Pt));for(const jt of Ge){const Vt=ht[jt.id];Vt&&!i.bh(Vt,jt)&&$e.push({command:Kr.updateImport,args:[jt.id,jt]})}}(M.imports,q.imports,X),i.bh(M.transition,q.transition)||X.push({command:Kr.setTransition,args:[q.transition]}),i.bh(M.light,q.light)||X.push({command:Kr.setLight,args:[q.light]}),i.bh(M.fog,q.fog)||X.push({command:Kr.setFog,args:[q.fog]}),i.bh(M.projection,q.projection)||X.push({command:Kr.setProjection,args:[q.projection]}),i.bh(M.lights,q.lights)||X.push({command:Kr.setLights,args:[q.lights]}),i.bh(M.camera,q.camera)||X.push({command:Kr.setCamera,args:[q.camera]}),!i.bh(M["color-theme"],q["color-theme"]))return[{command:Kr.setStyle,args:[q]}];const ne={},ae=[];(function(Ee,Ge,$e,Ye){let Je;for(Je in Ge=Ge||{},Ee=Ee||{})Ee.hasOwnProperty(Je)&&(Ge.hasOwnProperty(Je)||si(Je,$e,Ye));for(Je in Ge){if(!Ge.hasOwnProperty(Je))continue;const ht=Ge[Je];Ee.hasOwnProperty(Je)?i.bh(Ee[Je],ht)||(Ee[Je].type==="geojson"&&ht.type==="geojson"&&Sr(Ee,Ge,Je)?$e.push({command:Kr.setGeoJSONSourceData,args:[Je,ht.data]}):ji(Je,Ge,$e,Ye)):Gn(Je,Ge,$e)}})(M.sources,q.sources,ae,ne);const xe=[];M.layers&&M.layers.forEach(Ee=>{Ee.source&&ne[Ee.source]?X.push({command:Kr.removeLayer,args:[Ee.id]}):xe.push(Ee)});let Ce=M.terrain;Ce&&ne[Ce.source]&&(X.push({command:Kr.setTerrain,args:[void 0]}),Ce=void 0),X=X.concat(ae),i.bh(Ce,q.terrain)||X.push({command:Kr.setTerrain,args:[q.terrain]}),function(Ee,Ge,$e){Ge=Ge||[];const Ye=(Ee=Ee||[]).map(ei),Je=Ge.map(ei),ht=Ee.reduce(Ci,{}),gt=Ge.reduce(Ci,{}),ut=Ye.slice(),wt=Object.create(null);let _t,Pt,Tt,jt,Vt,Ut,Ot;for(_t=0,Pt=0;_t<Ye.length;_t++)Tt=Ye[_t],gt.hasOwnProperty(Tt)?Pt++:($e.push({command:Kr.removeLayer,args:[Tt]}),ut.splice(ut.indexOf(Tt,Pt),1));for(_t=0,Pt=0;_t<Je.length;_t++)Tt=Je[Je.length-1-_t],ut[ut.length-1-_t]!==Tt&&(ht.hasOwnProperty(Tt)?($e.push({command:Kr.removeLayer,args:[Tt]}),ut.splice(ut.lastIndexOf(Tt,ut.length-Pt),1)):Pt++,Ut=ut[ut.length-_t],$e.push({command:Kr.addLayer,args:[gt[Tt],Ut]}),ut.splice(ut.length-_t,0,Tt),wt[Tt]=!0);for(_t=0;_t<Je.length;_t++)if(Tt=Je[_t],jt=ht[Tt],Vt=gt[Tt],!wt[Tt]&&!i.bh(jt,Vt))if(i.bh(jt.source,Vt.source)&&i.bh(jt["source-layer"],Vt["source-layer"])&&i.bh(jt.type,Vt.type)){for(Ot in an(jt.layout,Vt.layout,$e,Tt,null,Kr.setLayoutProperty),an(jt.paint,Vt.paint,$e,Tt,null,Kr.setPaintProperty),i.bh(jt.slot,Vt.slot)||$e.push({command:Kr.setSlot,args:[Tt,Vt.slot]}),i.bh(jt.filter,Vt.filter)||$e.push({command:Kr.setFilter,args:[Tt,Vt.filter]}),i.bh(jt.minzoom,Vt.minzoom)&&i.bh(jt.maxzoom,Vt.maxzoom)||$e.push({command:Kr.setLayerZoomRange,args:[Tt,Vt.minzoom,Vt.maxzoom]}),jt)jt.hasOwnProperty(Ot)&&Ot!=="layout"&&Ot!=="paint"&&Ot!=="filter"&&Ot!=="metadata"&&Ot!=="minzoom"&&Ot!=="maxzoom"&&Ot!=="slot"&&(Ot.indexOf("paint.")===0?an(jt[Ot],Vt[Ot],$e,Tt,Ot.slice(6),Kr.setPaintProperty):i.bh(jt[Ot],Vt[Ot])||$e.push({command:Kr.setLayerProperty,args:[Tt,Ot,Vt[Ot]]}));for(Ot in Vt)Vt.hasOwnProperty(Ot)&&!jt.hasOwnProperty(Ot)&&Ot!=="layout"&&Ot!=="paint"&&Ot!=="filter"&&Ot!=="metadata"&&Ot!=="minzoom"&&Ot!=="maxzoom"&&Ot!=="slot"&&(Ot.indexOf("paint.")===0?an(jt[Ot],Vt[Ot],$e,Tt,Ot.slice(6),Kr.setPaintProperty):i.bh(jt[Ot],Vt[Ot])||$e.push({command:Kr.setLayerProperty,args:[Tt,Ot,Vt[Ot]]}))}else $e.push({command:Kr.removeLayer,args:[Tt]}),Ut=ut[ut.lastIndexOf(Tt)+1],$e.push({command:Kr.addLayer,args:[Vt,Ut]})}(xe,q.layers,X)}catch(ne){console.warn("Unable to compute style diff:",ne),X=[{command:Kr.setStyle,args:[q]}]}return X}(this.serialize(),l).filter(M=>!(M.command in yr));if(x.length===0)return!1;const E=x.filter(M=>!(M.command in Pc));if(E.length>0)throw new Error(`Unimplemented: ${E.map(M=>M.command).join(", ")}.`);const L=[];return x.forEach(M=>{L.push(this[M.command].apply(this,M.args))}),h&&Promise.all(L).then(h),this.stylesheet=l,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(l,h){return this.getImage(l)?this.fire(new i.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,this.scope,h),this._afterImageUpdated(l),this)}updateImage(l,h){this.imageManager.updateImage(l,this.scope,h)}getImage(l){return this.imageManager.getImage(l,this.scope)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l,this.scope),this._afterImageUpdated(l),this):this.fire(new i.t(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(l),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new i.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(l,h,x={}){return this._checkLoaded(),this._validate(Lt,`models.${l}`,h,null,x)||(this.modelManager.addModel(l,h,this.scope),this._changes.setDirty()),this}hasModel(l){return this.modelManager.hasModel(l,this.scope)}removeModel(l){return this.hasModel(l)?(this.modelManager.removeModel(l,this.scope),this):this.fire(new i.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(l,h,x={}){if(this._checkLoaded(),this.getOwnSource(l)!==void 0)throw new Error(`There is already a source with ID "${l}".`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(Zr,`sources.${l}`,h,null,x))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const E=Ha(l,h,this.dispatcher,this);E.scope=this.scope,E.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(E.id),source:E.serialize(),sourceId:E.id}));const L=M=>{const q=(M?"symbol:":"other:")+E.id,X=i.av(q,this.scope),ne=this._sourceCaches[q]=new Jt(X,E,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[E.id]=ne,ne.onAdd(this.map)};L(!1),h.type!=="vector"&&h.type!=="geojson"||L(!0),E.onAdd&&E.onAdd(this.map),x.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(l){this._checkLoaded();const h=this.getOwnSource(l);if(!h)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===l)return this.fire(new i.t(new Error(`Source "${l}" cannot be removed while layer "${E}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===l)return this.fire(new i.t(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const x=this.getOwnSourceCaches(l);for(const E of x){const L=i.cm(E.id);delete this._sourceCaches[L],this._changes.discardSourceCacheUpdate(E.id),E.fire(new i.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:E.getSource().id})),E.setEventedParent(null),E.clearTiles()}return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],this.mergeSources(),h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(l,h){this._checkLoaded(),this.getOwnSource(l).setData(h),this._changes.setDirty()}getOwnSource(l){const h=this.getOwnSourceCache(l);return h&&h.getSource()}getOwnSources(){const l=[];for(const h in this._otherSourceCaches){const x=this.getOwnSourceCache(h);x&&l.push(x.getSource())}return l}areTilesLoaded(){const l=this._mergedSourceCaches;for(const h in l){const x=l[h]._tiles;for(const E in x){const L=x[E];if(L.state!=="loaded"&&L.state!=="errored")return!1}}return!0}setLights(l){if(this._checkLoaded(),!l)return delete this.ambientLight,void delete this.directionalLight;const h=this._getTransitionParameters();for(const E of l){if(this._validate(un,"lights",E))return;switch(E.type){case"ambient":if(this.ambientLight){const L=this.ambientLight;L.set(E),L.updateTransitions(h)}else this.ambientLight=new $i(E,Kn||(Kn=new i.a0({color:new i.a1(i._.properties_light_ambient.color),intensity:new i.a1(i._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const L=this.directionalLight;L.set(E),L.updateTransitions(h)}else this.directionalLight=new $i(E,Yi||(Yi=new i.a0({direction:new i.ad(i._.properties_light_directional.direction),color:new i.a1(i._.properties_light_directional.color),intensity:new i.a1(i._.properties_light_directional.intensity),"cast-shadows":new i.a1(i._.properties_light_directional["cast-shadows"]),"shadow-intensity":new i.a1(i._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const x=new i.a3(this.z||0,h);this.ambientLight&&this.ambientLight.recalculate(x),this.directionalLight&&this.directionalLight.recalculate(x),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const l=this.directionalLight,h=this.ambientLight;if(!l||!h)return;const x=xe=>.2126*(xe[0]<=.03928?xe[0]/12.92:Math.pow((xe[0]+.055)/1.055,2.4))+.7152*(xe[1]<=.03928?xe[1]/12.92:Math.pow((xe[1]+.055)/1.055,2.4))+.0722*(xe[2]<=.03928?xe[2]/12.92:Math.pow((xe[2]+.055)/1.055,2.4)),E=l.properties.get("color").toRenderColor(null).toArray01(),L=l.properties.get("intensity"),M=l.properties.get("direction"),q=1-i.c7(M.x,M.y,M.z)[2]/90,X=x(E)*L*q,ne=h.properties.get("color").toRenderColor(null).toArray01(),ae=h.properties.get("intensity");return(X+x(ne)*ae)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const l=[];return this.directionalLight&&l.push(this.directionalLight.get()),this.ambientLight&&l.push(this.ambientLight.get()),l}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(l){if(!l)return this;if(i.cn(l)){const h=i.co(l),x=this.fragments.find(({id:L})=>L===h);if(!x)throw new Error(`Style import not found: ${l}`);const E=i.cm(l);return x.style.getFragmentStyle(E)}{const h=this.fragments.find(({id:x})=>x===l);if(!h)throw new Error(`Style import not found: ${l}`);return h.style}}getConfigProperty(l,h){const x=this.getFragmentStyle(l);if(!x)return null;const E=i.av(h,x.scope),L=x.options.get(E),M=L?L.value||L.default:null;return M?M.serialize():null}setConfigProperty(l,h,x){const E=this.getFragmentStyle(l);if(!E)return;const L=E.stylesheet.schema;if(!L||!L[h])return;const M=i.M(x);if(M.result!=="success")return void Aa(this,M.value);const q=M.value.expression,X=i.av(h,E.scope),ne=E.options.get(X);if(!ne)return;let ae;const{minValue:xe,maxValue:Ce,stepValue:Ee,type:Ge,values:$e}=L[h],Ye=i.M(L[h].default);Ye.result==="success"&&(ae=Ye.value.expression),ae?(this.options.set(X,{...ne,value:q,default:ae,minValue:xe,maxValue:Ce,stepValue:Ee,type:Ge,values:$e}),this.updateConfigDependencies(h)):this.fire(new i.t(new Error(`No schema defined for the config option "${h}" in the "${l}" fragment.`)))}getConfig(l){const h=this.getFragmentStyle(l);if(!h)return null;const x=h.stylesheet.schema;if(!x)return null;const E={};for(const L in x){const M=i.av(L,h.scope),q=h.options.get(M),X=q?q.value||q.default:null;E[L]=X?X.serialize():null}return E}setConfig(l,h){const x=this.getFragmentStyle(l);x&&(x.updateConfig(h,x.stylesheet.schema),this.updateConfigDependencies())}getSchema(l){const h=this.getFragmentStyle(l);return h?h.stylesheet.schema:null}setSchema(l,h){const x=this.getFragmentStyle(l);x&&(x.stylesheet.schema=h,x.updateConfig(x._config,h),this.updateConfigDependencies())}updateConfig(l,h){if(this._config=l,l||h)if(h)for(const x in h){let E,L;const M=i.M(h[x].default);if(M.result==="success"&&(E=M.value.expression),l&&l[x]!==void 0){const Ce=i.M(l[x]);Ce.result==="success"&&(L=Ce.value.expression)}const{minValue:q,maxValue:X,stepValue:ne,type:ae,values:xe}=h[x];if(E){const Ce=i.av(x,this.scope);this.options.set(Ce,{default:E,value:L,minValue:q,maxValue:X,stepValue:ne,type:ae,values:xe})}else this.fire(new i.t(new Error(`No schema defined for config option "${x}".`)))}else this.fire(new i.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(l){for(const h of this._configDependentLayers){const x=this.getLayer(h);if(x){if(l&&!x.configDependencies.has(l))continue;x.possiblyEvaluateVisibility(),this._updateLayer(x)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(h=>{if(h._styleColorTheme.colorTheme){const x=h._evaluateColorThemeData(h._styleColorTheme.colorTheme);(!h._styleColorTheme.lut&&x!==""||h._styleColorTheme.lut&&x!==h._styleColorTheme.lut.data)&&h.setColorTheme(h._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(l,h,x={}){this._checkLoaded();const E=l.id;if(this._layers[E])return void this.fire(new i.t(new Error(`Layer with id "${E}" already exists on this map`)));let L;if(l.type==="custom"){if(Aa(this,i.cp(l)))return;L=i.cq(l,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof l.source=="object"&&(this.addSource(E,l.source),l=i.cl(l),l=i.l(l,{source:E})),this._validate(ur,`layers.${E}`,l,{arrayIndex:-1},x))return;L=i.cq(l,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(L),L.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[L.id]=L.serialize()}L.configDependencies.size!==0&&this._configDependentLayers.add(L.fqid);let M=this._order.length;if(h){const ae=this._order.indexOf(h);if(ae===-1)return void this.fire(new i.t(new Error(`Layer with id "${h}" does not exist on this map.`)));L.slot===this._layers[h].slot?M=ae:i.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(M,0,E),this._layerOrderChanged=!0,this._layers[E]=L;const q=this.getOwnLayerSourceCache(L),X=!!this.directionalLight&&this.directionalLight.shadowsEnabled();q&&L.canCastShadows()&&X&&(q.castsShadows=!0);const ne=this._changes.getRemovedLayer(L);if(ne&&L.source&&q&&L.type!=="custom"){this._changes.discardLayerRemoval(L);const ae=i.av(L.source,L.scope);ne.type!==L.type?this._changes.updateSourceCache(ae,"clear"):(this._changes.updateSourceCache(ae,"reload"),q.pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map),L.scope=this.scope,this.mergeLayers()}moveLayer(l,h){this._checkLoaded();const x=this._checkLayer(l);if(!x||l===h)return;const E=this._order.indexOf(l);this._order.splice(E,1);let L=this._order.length;if(h){const M=this._order.indexOf(h);if(M===-1)return void this.fire(new i.t(new Error(`Layer with id "${h}" does not exist on this map.`)));x.slot===this._layers[h].slot?L=M:i.w(`Layer with id "${h}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(L,0,l),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(l){this._checkLoaded();const h=this._checkLayer(l);if(!h)return;h.setEventedParent(null);const x=this._order.indexOf(l);this._order.splice(x,1),delete this._layers[l],delete this._serializedLayers[l],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(h.fqid),this._changes.removeLayer(h);const E=this.getOwnLayerSourceCache(h);if(E&&E.castsShadows){let L=!1;for(const M in this._layers)if(this._layers[M].source===h.source&&this._layers[M].canCastShadows()){L=!0;break}E.castsShadows=L}h.onRemove&&h.onRemove(this.map),this.mergeLayers()}getOwnLayer(l){return this._layers[l]}hasLayer(l){return l in this._mergedLayers}hasLayerType(l){for(const h in this._layers)if(this._layers[h].type===l)return!0;return!1}setLayerZoomRange(l,h,x){this._checkLoaded();const E=this._checkLayer(l);E&&(E.minzoom===h&&E.maxzoom===x||(h!=null&&(E.minzoom=h),x!=null&&(E.maxzoom=x),this._updateLayer(E)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(l,h){this._checkLoaded();const x=this._checkLayer(l);x&&x.slot!==h&&(x.slot=h,this._updateLayer(x))}setFilter(l,h,x={}){this._checkLoaded();const E=this._checkLayer(l);if(E&&!i.bh(E.filter,h))return h==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(We,`layers.${E.id}.filter`,h,{layerType:E.type},x)||(E.filter=i.cl(h),this._updateLayer(E)))}getFilter(l){const h=this._checkLayer(l);if(h)return i.cl(h.filter)}setLayoutProperty(l,h,x,E={}){this._checkLoaded();const L=this._checkLayer(l);if(L&&!i.bh(L.getLayoutProperty(h),x)){if(x!=null&&(!E||E.validate!==!1)&&Aa(L,pt.call(Rn,{key:`layers.${l}.layout.${h}`,layerType:L.type,objectKey:h,value:x,styleSpec:i._,style:{glyphs:!0,sprite:!0}})))return;L.setLayoutProperty(h,x),L.configDependencies.size!==0&&this._configDependentLayers.add(L.fqid),this._updateLayer(L)}}getLayoutProperty(l,h){const x=this._checkLayer(l);if(x)return x.getLayoutProperty(h)}setPaintProperty(l,h,x,E={}){this._checkLoaded();const L=this._checkLayer(l);if(!L||i.bh(L.getPaintProperty(h),x)||x!=null&&(!E||E.validate!==!1)&&Aa(L,qe.call(Rn,{key:`layers.${l}.paint.${h}`,layerType:L.type,objectKey:h,value:x,styleSpec:i._})))return;const M=L.setPaintProperty(h,x);L.configDependencies.size!==0&&this._configDependentLayers.add(L.fqid),M&&this._updateLayer(L),this._changes.updatePaintProperties(L)}getPaintProperty(l,h){const x=this._checkLayer(l);if(x)return x.getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const x=l.source,E=l.sourceLayer,L=this._checkSource(x);if(!L)return;const M=L.type;if(M==="geojson"&&E)return void this.fire(new i.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!E)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided.")));const q=this.getOwnSourceCaches(x);for(const X of q)X.setFeatureState(E,l.id,h)}removeFeatureState(l,h){this._checkLoaded();const x=l.source,E=this._checkSource(x);if(!E)return;const L=E.type,M=L==="vector"?l.sourceLayer:void 0;if(L==="vector"&&!M)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new i.t(new Error("A feature id is required to remove its specific state property.")));const q=this.getOwnSourceCaches(x);for(const X of q)X.removeFeatureState(M,l.id,h)}getFeatureState(l){this._checkLoaded();const h=l.source,x=l.sourceLayer,E=this._checkSource(h);if(E){if(E.type!=="vector"||x)return l.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(h)[0].getFeatureState(x,l.id);this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(l){return this.stylesheet.transition=i.l({},this.stylesheet.transition,l),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const l=this.getTerrain(),h=l&&this.terrain&&this.terrain.scope===this.scope?l:this.stylesheet.terrain;return i.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:h,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},x=>x!==void 0)}_updateLayer(l){this._changes.updateLayer(l);const h=this.getLayerSourceCache(l),x=i.av(l.source,l.scope),E=this._changes.getUpdatedSourceCaches();l.source&&!E[x]&&h&&h.getSource().type!=="raster"&&(this._changes.updateSourceCache(x,"reload"),h.pause()),l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const h=q=>this._mergedLayers[q].is3D(),x=this.order,E={},L=[];for(let q=x.length-1;q>=0;q--){const X=x[q];if(h(X)){E[X]=q;for(const ne of l){const ae=ne[X];if(ae)for(const xe of ae)L.push(xe)}}}L.sort((q,X)=>X.intersectionZ-q.intersectionZ);const M=[];for(let q=x.length-1;q>=0;q--){const X=x[q];if(h(X))for(let ne=L.length-1;ne>=0;ne--){const ae=L[ne].feature;if(ae.layer&&E[ae.layer.id]<q)break;M.push(ae),L.pop()}else for(const ne of l){const ae=ne[X];if(ae)for(const xe of ae)M.push(xe.feature)}}return M}queryRenderedFeatures(l,h,x){h&&h.filter&&this._validate(We,"queryRenderedFeatures.filter",h.filter,null,h),h.scope=this.scope,h.availableImages=this._availableImages,h.serializedLayers=this._serializedLayers;const E={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new i.t(new Error("parameters.layers must be an Array."))),[];for(const ne of h.layers){const ae=this._mergedLayers[ne];if(!ae)return this.fire(new i.t(new Error(`The layer '${ne}' does not exist in the map's style and cannot be queried for features.`))),[];E[ae.source]=!0}}const L=[],M=h.serializedLayers||{},q=h&&h.layers?h.layers.some(ne=>{const ae=this.getLayer(ne);return ae&&ae.is3D()}):this.has3DLayers(),X=Ss.createFromScreenPoints(l,x);for(const ne in this._mergedSourceCaches){const ae=this._mergedSourceCaches[ne].getSource();if(!ae||ae.scope!==h.scope)continue;const xe=this._mergedSourceCaches[ne].getSource().id;h.layers&&!E[xe]||L.push(Nc(this._mergedSourceCaches[ne],this._mergedLayers,M,X,h,x,q,!!this.map._showQueryGeometry))}return this.placement&&L.push(function(ne,ae,xe,Ce,Ee,Ge,$e){const Ye={},Je=Ge.queryRenderedSymbols(Ce),ht=[];for(const gt of Object.keys(Je).map(Number))ht.push($e[gt]);ht.sort(Ul);for(const gt of ht){const ut=gt.featureIndex.lookupSymbolFeatures(Je[gt.bucketInstanceId],ae,gt.bucketIndex,gt.sourceLayerIndex,Ee.filter,Ee.layers,Ee.availableImages,ne);for(const wt in ut){const _t=Ye[wt]=Ye[wt]||[],Pt=ut[wt];Pt.sort((Tt,jt)=>{const Vt=gt.featureSortOrder;if(Vt){const Ut=Vt.indexOf(Tt.featureIndex);return Vt.indexOf(jt.featureIndex)-Ut}return jt.featureIndex-Tt.featureIndex});for(const Tt of Pt)_t.push(Tt)}}for(const gt in Ye)Ye[gt].forEach(ut=>{const wt=ut.feature,_t=xe(ne[gt]);if(!_t)return;const Pt=_t.getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=Pt});return Ye}(this._mergedLayers,M,this.getLayerSourceCache.bind(this),X.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)}querySourceFeatures(l,h){h&&h.filter&&this._validate(We,"querySourceFeatures.filter",h.filter,null,h);const x=this.getOwnSourceCaches(l);let E=[];for(const L of x)E=E.concat(nc(L,h));return E}addSourceType(l,h,x){return kn.getSourceType(l)?x(new Error(`A source type called "${l}" already exists.`)):(kn.setSourceType(l,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:h.workerSourceURL},x):x(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(l,h,x={}){this._checkLoaded();const E=this.light.getLight();let L=!1;for(const q in l)if(!i.bh(l[q],E[q])){L=!0;break}if(!L)return;const M=this._getTransitionParameters();this.light.setLight(l,h,x),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(l,h=1){if(this._checkLoaded(),!l)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),h===0&&delete this.terrain,l===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let x=l;const E=l.source==null;if(h===1){if(this.disableElevatedTerrain)return;if(typeof x.source=="object"){const q="terrain-dem-src";this.addSource(q,x.source),x=i.cl(x),x=i.l(x,{source:q})}const L=i.l({},x),M={};if(this.terrain&&E){L.source=this.terrain.get().source;const q=this.terrain?this.getFragmentStyle(this.terrain.scope):null;q&&(M.style=q.serialize())}if(this._validate(Ii,"terrain",L,M))return}if(!this.terrain||this.terrain.scope!==this.scope&&!E||this.terrain&&h!==this.terrain.drapeRenderMode){if(!x)return;this._createTerrain(x,h),this.fire(new i.x("data",{dataType:"style"}))}else{const L=this.terrain,M=L.get();for(const q of Object.keys(i._.terrain))!x.hasOwnProperty(q)&&i._.terrain[q].default&&(x[q]=i._.terrain[q].default);for(const q in l)if(!i.bh(l[q],M[q])){L.set(l,this.options),this.stylesheet.terrain=l;const X=this._getTransitionParameters({duration:0});L.updateTransitions(X),this.fire(new i.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const h=this.fog=new Pi(l,this.map.transform,this.scope,this.options);this.stylesheet.fog=h.get();const x=this._getTransitionParameters({duration:0});h.updateTransitions(x)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog;if(!i.bh(h.get(),l)){h.set(l,this.options),this.stylesheet.fog=h.get();const x=this._getTransitionParameters({duration:0});h.updateTransitions(x)}}else this._createFog(l);this._markersNeedUpdate=!0}setColorTheme(l){this._checkLoaded();const h=()=>{for(const E in this._layers)this._layers[E].lut=this._styleColorTheme.lut;for(const E in this._sourceCaches)this._sourceCaches[E].clearTiles()};if(this._styleColorTheme.colorTheme=l,!l)return this._styleColorTheme.lut=null,void h();const x=this._evaluateColorThemeData(l);this._loadColorTheme(x).then(()=>{this.fire(new i.x("colorthemeset")),h()}).catch(E=>{i.w(`Couldn't set color theme: ${E}`)})}_getTransitionParameters(l){return{now:i.q.now(),transition:i.l(this.transition,l)}}updateDrapeFirstLayers(){if(!this.terrain)return;const l=[],h=[];for(const x of this._mergedOrder)this.isLayerDraped(this._mergedLayers[x])?l.push(x):h.push(x);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...h)}_createTerrain(l,h){const x=this.terrain=new xr(l,h,this.scope,this.options);h===1&&(this.stylesheet.terrain=l),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const E=this._getTransitionParameters({duration:0});x.updateTransitions(E)}_force3DLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="symbol"&&this._updateLayer(h)}}_validate(l,h,x,E,L={}){if(L&&L.validate===!1)return!1;const M=i.l({},this.serialize());return Aa(this,l.call(Rn,i.l({key:h,style:M,value:x,styleSpec:i._},E)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._mergedLayers)this._mergedLayers[l].setEventedParent(null);for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles(),this._mergedSourceCaches[l].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(l){const h=this.getSourceCaches(l);for(const x of h)x.clearTiles()}clearSources(){for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles()}reloadSource(l){const h=this.getSourceCaches(l);for(const x of h)x.resume(),x.reload()}reloadSources(){for(const l of this.getSources())l.reload&&l.reload()}updateSources(l){let h;this.directionalLight&&(h=oc(this.directionalLight));for(const x in this._mergedSourceCaches)this._mergedSourceCaches[x].update(l,void 0,void 0,h)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const h=this._sourceCaches[l];h.resume(),h.reload()}}_updatePlacement(l,h,x,E,L,M,q=!1){let X=!1,ne=!1;const ae={},xe={};for(const Ce of this._mergedOrder){const Ee=this._mergedLayers[Ce];if(Ee.type!=="symbol")continue;const Ge=i.av(Ee.source,Ee.scope);let $e=ae[Ge];if(!$e){const Je=this.getLayerSourceCache(Ee);if(!Je)continue;const ht=Je.getRenderableIds(!0).map(gt=>Je.getTileByID(gt));xe[Ge]=ht.slice(),$e=ae[Ge]=ht.sort((gt,ut)=>ut.tileID.overscaledZ-gt.tileID.overscaledZ||(gt.tileID.isLessThan(ut.tileID)?-1:1))}const Ye=this.crossTileSymbolIndex.addLayer(Ee,$e,h.center.lng,h.projection);X=X||Ye}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),q=q||this._layerOrderChanged||E===0,this._layerOrderChanged&&this.fire(new i.x("neworder")),(q||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),h.zoom))&&(this.pauseablePlacement=new ot(h,this._mergedOrder,q,x,E,L,this.placement,this.fog&&h.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,ae,xe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),ne=!0),X&&this.pauseablePlacement.placement.setStale()),ne||X){this._buildingIndex.onNewFrame(h.zoom);for(let Ce=0;Ce<this._mergedOrder.length;Ce++){const Ee=this._mergedLayers[this._mergedOrder[Ce]];if(Ee.type!=="symbol")continue;const Ge=this.isLayerClipped(Ee);this.placement.updateLayerOpacities(Ee,ae[i.av(Ee.source,Ee.scope)],Ce,Ge?M:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}addImport(l,h){this._checkLoaded();const x=this.stylesheet.imports=this.stylesheet.imports||[];if(x.findIndex(({id:L})=>L===l.id)!==-1)return void this.fire(new i.t(new Error(`Import with id '${l.id}' already exists in the map's style.`)));if(!h)return x.push(l),this._loadImports([l],!0);const E=x.findIndex(({id:L})=>L===h);return E===-1&&this.fire(new i.t(new Error(`Import with id "${h}" does not exist on this map.`))),this.stylesheet.imports=x.slice(0,E).concat(l).concat(x.slice(E)),this._loadImports([l],!0,h)}updateImport(l,h){this._checkLoaded();const x=this.stylesheet.imports||[],E=this.getImportIndex(l);return E===-1?this:typeof h=="string"?(this.setImportUrl(l,h),this):(h.url&&h.url!==x[E].url&&this.setImportUrl(l,h.url),i.bh(h.config,x[E].config)||this.setImportConfig(l,h.config),i.bh(h.data,x[E].data)||this.setImportData(l,h.data),this)}moveImport(l,h){this._checkLoaded();let x=this.stylesheet.imports||[];const E=this.getImportIndex(l);if(E===-1)return this;const L=this.getImportIndex(h);if(L===-1)return this;const M=x[E],q=this.fragments[E];return x=x.filter(({id:X})=>X!==l),this.fragments=this.fragments.filter(({id:X})=>X!==l),this.stylesheet.imports=x.slice(0,L).concat(M).concat(x.slice(L)),this.fragments=this.fragments.slice(0,L).concat(q).concat(this.fragments.slice(L)),this.mergeLayers(),this}setImportUrl(l,h){this._checkLoaded();const x=this.stylesheet.imports||[],E=this.getImportIndex(l);if(E===-1)return this;x[E].url=h;const L=this.fragments[E];return L.style=this._createFragmentStyle(x[E]),L.style.on("style.import.load",()=>this.mergeAll()),L.style.loadURL(h),this}setImportData(l,h){this._checkLoaded();const x=this.getImportIndex(l),E=this.stylesheet.imports||[];return x===-1?this:h?(this.fragments[x].style.setState(h),this._reloadImports(),this):(delete E[x].data,this.setImportUrl(l,E[x].url))}setImportConfig(l,h){this._checkLoaded();const x=this.getImportIndex(l),E=this.stylesheet.imports||[];if(x===-1)return this;h?E[x].config=h:delete E[x].config;const L=this.fragments[x],M=L.style.stylesheet&&L.style.stylesheet.schema;return L.config=h,L.style.updateConfig(h,M),this.updateConfigDependencies(),this}removeImport(l){this._checkLoaded();const h=this.stylesheet.imports||[],x=this.getImportIndex(l);x!==-1&&(h.splice(x,1),this.fragments[x].style._remove(),this.fragments.splice(x,1),this._reloadImports())}getImportIndex(l){const h=(this.stylesheet.imports||[]).findIndex(x=>x.id===l);return h===-1&&this.fire(new i.t(new Error(`Import '${l}' does not exist in the map's style and cannot be updated.`))),h}getLayer(l){return this._mergedLayers[l]}getSources(){const l=[];for(const h in this._mergedOtherSourceCaches){const x=this._mergedOtherSourceCaches[h];x&&l.push(x.getSource())}return l}getSource(l,h){const x=this.getSourceCache(l,h);return x&&x.getSource()}getLayerSource(l){const h=this.getLayerSourceCache(l);return h&&h.getSource()}getSourceCache(l,h){const x=i.av(l,h);return this._mergedOtherSourceCaches[x]}getLayerSourceCache(l){const h=i.av(l.source,l.scope);return l.type==="symbol"?this._mergedSymbolSourceCaches[h]:this._mergedOtherSourceCaches[h]}getSourceCaches(l){if(l==null)return Object.values(this._mergedSourceCaches);const h=[];return this._mergedOtherSourceCaches[l]&&h.push(this._mergedOtherSourceCaches[l]),this._mergedSymbolSourceCaches[l]&&h.push(this._mergedSymbolSourceCaches[l]),h}updateSourceCaches(){const l=this._changes.getUpdatedSourceCaches();for(const h in l){const x=l[h];x==="reload"?this.reloadSource(h):x==="clear"&&this.clearSource(h)}}updateLayers(l){const h=this._changes.getUpdatedPaintProperties();for(const x of h){const E=this.getLayer(x);E&&E.updateTransitions(l)}}getImages(l,h,x){this.imageManager.getImages(h.icons,h.scope,x),this._updateTilesForChangedImages();const E=L=>{L&&L.setDependencies(h.tileID.key,h.type,h.icons)};E(this._otherSourceCaches[h.source]),E(this._symbolSourceCaches[h.source])}getGlyphs(l,h,x){this.glyphManager.getGlyphs(h.stacks,h.scope,x)}getResource(l,h,x){return i.ct(h,x)}getOwnSourceCache(l){return this._otherSourceCaches[l]}getOwnLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}getOwnSourceCaches(l){const h=[];return this._otherSourceCaches[l]&&h.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&h.push(this._symbolSourceCaches[l]),h}_isSourceCacheLoaded(l){const h=this.getOwnSourceCaches(l);return h.length===0?(this.fire(new i.t(new Error(`There is no source with ID '${l}'`))),!1):h.every(x=>x.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(l,h){if(!this._clipLayerPresent&&l.type!=="fill-extrusion")return!1;const x=l.type==="fill-extrusion"&&l.sourceLayer==="building";if(l.is3D()){if(x||h&&h.type==="batched-model"||l.type==="model")return!0}else if(l.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(l=>{l.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}kn.getSourceType=function(v){return sa[v]},kn.setSourceType=function(v,l){sa[v]=l},kn.registerForPluginStateChange=i.cc;var ns=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,xi=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,ms=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,ds="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",bo=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Zi=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ds=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Bs=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,zs=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,eo=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,ea=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ma=[];os(ns,ma),os(ms,ma),os(xi,ma);const ta={"_prelude_fog.vertex.glsl":Zi,"_prelude_terrain.vertex.glsl":bo,"_prelude_shadow.vertex.glsl":eo,"_prelude_fog.fragment.glsl":Ds,"_prelude_shadow.fragment.glsl":ea,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Bs,"_prelude_raster_particle.glsl":zs},ra={};Tn("",bo),Tn(Ds,Zi),Tn(ea,eo),Tn(Bs,""),Tn(zs,"");const $s=Tn(xi,ms),ga=ns;var hs={background:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Tn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Tn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Tn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Tn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Tn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Tn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Tn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Tn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:Tn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Tn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:Tn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Tn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Tn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,ds),skyboxGradient:Tn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,ds),skyboxCapture:Tn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Tn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Tn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),occlusion:Tn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function os(v,l){const h=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let x of h)if(x=x.trim(),x[0]==="#"&&x.includes("if")&&!x.includes("endif")){x=x.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const E=x.split(" ");for(const L of E)l.includes(L)||l.push(L)}}function Tn(v,l){const h=/#include\s+"([^"]+)"/g,x=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let E=l.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);E&&(E=E.map(ne=>{const ae=ne.split(" ");return ae[ae.length-1]}),E=[...new Set(E)]);const L={},M=[],q=[];if(v=v.replace(h,(ne,ae)=>(q.push(ae),"")),(l=l.replace(h,(ne,ae)=>(M.push(ae),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let X=[...ma];os(v,X),os(l,X);for(const ne of[...M,...q])ta[ne]||console.error(`Undefined include: ${ne}`),ra[ne]||(ra[ne]=[],os(ta[ne],ra[ne])),X=[...X,...ra[ne]];return{fragmentSource:v=v.replace(x,(ne,ae,xe,Ce,Ee)=>(L[Ee]=!0,ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
in ${xe} ${Ce} ${Ee};
#else
uniform ${xe} ${Ce} u_${Ee};
#endif
`:ae==="initialize"?`
#ifdef HAS_UNIFORM_u_${Ee}
    ${xe} ${Ce} ${Ee} = u_${Ee};
#endif
`:ae==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    in ${xe} ${Ce} ${Ee};
#endif
`:ae==="initialize-attribute"?"":void 0)),vertexSource:l=l.replace(x,(ne,ae,xe,Ce,Ee)=>{const Ge=Ce==="float"?"vec2":Ce,$e=Ee.match(/color/)?"color":Ge;return ae==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
in ${xe} ${Ce} a_${Ee};
#endif
`:L[Ee]?ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
in ${xe} ${Ge} a_${Ee};
out ${xe} ${Ce} ${Ee};
#else
uniform ${xe} ${Ce} u_${Ee};
#endif
`:ae==="initialize"?$e==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = a_${Ee};
#else
    ${xe} ${Ce} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = unpack_mix_${$e}(a_${Ee}, u_${Ee}_t);
#else
    ${xe} ${Ce} ${Ee} = u_${Ee};
#endif
`:ae==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    in ${xe} ${Ce} a_${Ee};
    out ${xe} ${Ce} ${Ee};
#endif
`:ae==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    ${Ee} = a_${Ee};
#endif
`:void 0:ae==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
in ${xe} ${Ge} a_${Ee};
#else
uniform ${xe} ${Ce} u_${Ee};
#endif
`:ae==="define-instanced"?$e==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${Ee}0;
in vec4 a_${Ee}1;
in vec4 a_${Ee}2;
in vec4 a_${Ee}3;
#else
uniform ${xe} ${Ce} u_${Ee};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${xe} ${Ge} a_${Ee};
#else
uniform ${xe} ${Ce} u_${Ee};
#endif
`:ae==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    ${xe} ${Ce} ${Ee} = a_${Ee};
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${xe} ${Ce} ${Ee} = a_${Ee};
#else
    ${xe} ${Ce} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${xe} ${Ce} ${Ee} = unpack_mix_${$e}(a_${Ee}, u_${Ee}_t);
#else
    ${xe} ${Ce} ${Ee} = u_${Ee};
#endif
`}),staticAttributes:E,usedDefines:X,vertexIncludes:M,fragmentIncludes:q}}class mi{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,h,x,E,L,M,q,X){this.context=l;let ne=this.boundPaintVertexBuffers.length!==E.length;for(let xe=0;!ne&&xe<E.length;xe++)this.boundPaintVertexBuffers[xe]!==E[xe]&&(ne=!0);let ae=this.boundDynamicVertexBuffers.length!==q.length;for(let xe=0;!ae&&xe<q.length;xe++)this.boundDynamicVertexBuffers[xe]!==q[xe]&&(ae=!0);if(!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==x||ne||ae||this.boundIndexBuffer!==L||this.boundVertexOffset!==M)this.freshBind(h,x,E,L,M,q,X);else{l.bindVertexArrayOES.set(this.vao);for(const xe of q)xe&&(xe.bind(),X&&xe.instanceCount&&xe.setVertexAttribDivisor(l.gl,h,X));L&&L.dynamicDraw&&L.bind()}}freshBind(l,h,x,E,L,M,q){const X=l.numAttributes,ne=this.context,ae=ne.gl;this.vao&&this.destroy(),this.vao=ne.gl.createVertexArray(),ne.bindVertexArrayOES.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=E,this.boundVertexOffset=L,this.boundDynamicVertexBuffers=M,h.enableAttributes(ae,l),h.bind(),h.setVertexAttribPointers(ae,l,L);for(const xe of x)xe.enableAttributes(ae,l),xe.bind(),xe.setVertexAttribPointers(ae,l,L);for(const xe of M)xe&&(xe.enableAttributes(ae,l),xe.bind(),xe.setVertexAttribPointers(ae,l,L),q&&xe.instanceCount&&xe.setVertexAttribDivisor(ae,l,q));E&&E.bind(),ne.currentNumAttributes=X}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function co(v,l){const h=Math.pow(2,l.canonical.z),x=l.canonical.y;return[new i.a5(0,x/h).toLngLat().lat,new i.a5(0,(x+1)/h).toLngLat().lat]}function to(v,l,h,x,E,L,M){const q=v.context,X=q.gl,ne=h.hillshadeFBO;if(!ne)return;v.prepareDrawTile();const ae=v.isTileAffectedByFog(l),xe=v.getOrCreateProgram("hillshade",{overrideFog:ae});q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ne.colorAttachment.get());const Ce=((Ye,Je,ht,gt)=>{const ut=ht.paint.get("hillshade-shadow-color"),wt=ht.paint.get("hillshade-highlight-color"),_t=ht.paint.get("hillshade-accent-color"),Pt=ht.paint.get("hillshade-emissive-strength");let Tt=i.bB(ht.paint.get("hillshade-illumination-direction"));if(ht.paint.get("hillshade-illumination-anchor")==="viewport")Tt-=Ye.transform.angle;else if(Ye.style&&Ye.style.enable3dLights()&&Ye.style.directionalLight){const Vt=Ye.style.directionalLight.properties.get("direction"),Ut=i.c7(Vt.x,Vt.y,Vt.z);Tt=i.bB(Ut[1])}const jt=!Ye.options.moving;return{u_matrix:gt||Ye.transform.calculateProjMatrix(Je.tileID.toUnwrapped(),jt),u_image:0,u_latrange:co(0,Je.tileID),u_light:[ht.paint.get("hillshade-exaggeration"),Tt],u_shadow:ut.toRenderColor(ht.lut),u_highlight:wt.toRenderColor(ht.lut),u_emissive_strength:Pt,u_accent:_t.toRenderColor(ht.lut)}})(v,h,x,v.terrain?l.projMatrix:null);v.uploadCommonUniforms(q,xe,l.toUnwrapped());const{tileBoundsBuffer:Ee,tileBoundsIndexBuffer:Ge,tileBoundsSegments:$e}=v.getTileBoundsBuffers(h);xe.draw(v,X.TRIANGLES,E,L,M,vn.disabled,Ce,x.id,Ee,Ge,$e)}function Cs(v,l,h){if(!l.needsDEMTextureUpload)return;const x=v.context,E=x.gl;x.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||v.getTileTexture(h.stride);const L=h.getPixels();l.demTexture?l.demTexture.update(L,{premultiply:!1}):l.demTexture=new i.T(x,L,E.R32F,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Ji(v,l,h){const x=v.context,E=x.gl;if(!l.dem)return;const L=l.dem;if(x.activeTexture.set(E.TEXTURE1),Cs(v,l,L),!l.demTexture)return;l.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);const M=L.dim;x.activeTexture.set(E.TEXTURE0);let q=l.hillshadeFBO;if(!q){const Ce=new i.T(x,{width:M,height:M,data:null},E.RGBA8);Ce.bind(E.LINEAR,E.CLAMP_TO_EDGE),q=l.hillshadeFBO=x.createFramebuffer(M,M,!0,"renderbuffer"),q.colorAttachment.set(Ce.texture)}x.bindFramebuffer.set(q.framebuffer),x.viewport.set([0,0,M,M]);const{tileBoundsBuffer:X,tileBoundsIndexBuffer:ne,tileBoundsSegments:ae}=v.getMercatorTileBoundsBuffers(),xe=[];v.linearFloatFilteringSupported()&&xe.push("TERRAIN_DEM_FLOAT_FORMAT"),v.getOrCreateProgram("hillshadePrepare",{defines:xe}).draw(v,E.TRIANGLES,Dr.disabled,gn.disabled,qr.unblended,vn.disabled,((Ce,Ee)=>{const Ge=Ee.stride,$e=i.a6.mat4.create();return i.a6.mat4.ortho($e,0,i.ab,-i.ab,0,0,1),i.a6.mat4.translate($e,$e,[0,-i.ab,0]),{u_matrix:$e,u_image:1,u_dimension:[Ge,Ge],u_zoom:Ce.overscaledZ}})(l.tileID,L),h.id,X,ne,ae),l.needsHillshadePrepare=!1}class oi{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qs extends oi{getDefault(){return i.bz.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class sl extends oi{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class ac extends oi{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class ol extends oi{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class $a extends oi{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class jc extends oi{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class lc extends oi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class oo extends oi{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Qs extends oi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class cc extends oi{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Mc extends oi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class _u extends oi{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Sc extends oi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class iu extends oi{getDefault(){const l=this.gl;return[l.ONE,l.ZERO,l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.blendFuncSeparate(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class id extends oi{getDefault(){return i.bz.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class eh extends oi{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(l,l),this.current=l,this.dirty=!1)}}class sd extends oi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class Cd extends oi{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class bu extends oi{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let th=class extends oi{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class kc extends oi{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Sd extends oi{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class vh extends oi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Wl extends oi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class sf extends oi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class xh extends oi{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class _h extends oi{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class bh extends oi{getDefault(){return null}set(l){this.gl&&(l!==this.current||this.dirty)&&(this.gl.bindVertexArray(l),this.current=l,this.dirty=!1)}}class od extends oi{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class wu extends oi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Dc extends oi{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Kl extends oi{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class ad extends Kl{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class zo extends Kl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class qf extends Kl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,this.attachment(),h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Bd extends zo{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Pp=(v,l,h)=>({u_matrix:v,u_image0:0,u_skirt_height:l,u_ground_shadow_factor:h}),Wf=(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(x),u_merc_matrix:h,u_zoom_transition:E,u_merc_center:L,u_image0:0,u_frustum_tl:M,u_frustum_tr:q,u_frustum_br:X,u_frustum_bl:ne,u_globe_pos:ae,u_globe_radius:xe,u_viewport:Ce,u_grid_matrix:$e?Float32Array.from($e):new Float32Array(9),u_skirt_height:Ee,u_far_z_cutoff:Ge});function vl(v,l){return v!=null&&l!=null&&!(!v.hasData()||!l.hasData())&&v.demTexture!=null&&l.demTexture!=null&&v.tileID.key!==l.tileID.key}const Mo=new class{constructor(){this.operations={}}newMorphing(v,l,h,x,E){if(v in this.operations){const L=this.operations[v];L.to.tileID.key!==h.tileID.key&&(L.queued=h)}else this.operations[v]={startTime:x,phase:0,duration:E,from:l,to:h,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const l=this.operations[v];return{from:l.from,to:l.to,phase:l.phase}}update(v){for(const l in this.operations){const h=this.operations[l];for(h.phase=(v-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,v)){delete this.operations[l];break}}}_nextOp(v,l){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=l,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},qa={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Kf(v,l,h){if(l===0)return 0;const x=l<1&&h===514?.25/l:1;return 6*Math.pow(1.5,22-v)*Math.max(l,1)*x}function Ed(v,l){const h=1<<v.z;return!l&&(v.x===0||v.x===h-1)||v.y===0||v.y===h-1}const Ta=v=>({u_matrix:v});function uo(v,l,h,x,E){if(E>0){const L=i.q.now(),M=(L-v.timeAdded)/E,q=l?(L-l.timeAdded)/E:-1,X=h.getSource(),ne=x.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),ae=!l||Math.abs(l.tileID.overscaledZ-ne)>Math.abs(v.tileID.overscaledZ-ne),xe=ae&&v.refreshedUponExpiration?1:i.ap(ae?M:1-q,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),l?{opacity:1,mix:1-xe}:{opacity:xe,mix:0}}return{opacity:1,mix:0}}class it extends Jt{constructor(l){const h={type:"raster-dem",maxzoom:l.transform.maxZoom},x=new i.cd(i.ce(),null),E=Ha("mock-dem",h,x,l.style);super("mock-dem",E,!1),E.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,h){l.state="loaded",h(null)}}class ye extends Jt{constructor(l){const h=Ha("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new i.cd(i.ce(),null),l.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,h,x){if(l.freezeTileCoverage)return;this.transform=l;const E=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((L,M)=>{if(L[M.key]="",!this._tiles[M.key]){const q=new ce(M,this._source.tileSize*M.overscaleFactor(),l.tileZoom);q.state="loaded",this._tiles[M.key]=q}return L},{});for(const L in this._tiles)L in E||(this.freeFBO(L),this._tiles[L].unloadVectorData(),delete this._tiles[L])}freeFBO(l){const h=this.proxyCachedFBO[l];if(h!==void 0){const x=Object.values(h);this.renderCachePool.push(...x),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Oe extends i.aA{constructor(l,h,x){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=h,this.projMatrix=x}}class nt extends i.cE{constructor(l,h){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},l.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[x,E,L]=function(X){const ne=new i.a_,ae=new i.aO,xe=131;ne.reserve(17161),ae.reserve(33800);const Ce=i.ab/128,Ee=i.ab+Ce/2,Ge=Ee+Ce;for(let Ye=-Ce;Ye<Ge;Ye+=Ce)for(let Je=-Ce;Je<Ge;Je+=Ce){const ht=Je<0||Je>Ee||Ye<0||Ye>Ee?24575:0,gt=i.ap(Math.round(Je),0,i.ab),ut=i.ap(Math.round(Ye),0,i.ab);ne.emplaceBack(gt+ht,ut)}const $e=(Ye,Je)=>{const ht=Je*xe+Ye;ae.emplaceBack(ht+1,ht,ht+xe),ae.emplaceBack(ht+xe,ht+xe+1,ht+1)};for(let Ye=1;Ye<129;Ye++)for(let Je=1;Je<129;Je++)$e(Je,Ye);return[0,129].forEach(Ye=>{for(let Je=0;Je<130;Je++)$e(Je,Ye),$e(Ye,Je)}),[ne,ae,32768]}(),M=l.context;this.gridBuffer=M.createVertexBuffer(x,i.b0.members),this.gridIndexBuffer=M.createIndexBuffer(E),this.gridSegments=i.b1.simpleSegment(0,0,x.length,E.length),this.gridNoSkirtSegments=i.b1.simpleSegment(0,0,x.length,L),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ye(h.map),this.orthoMatrix=i.a6.mat4.create(),i.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.ab,0,i.ab,0,1);const q=M.gl;this._overlapStencilMode=new gn({func:q.GEQUAL,mask:255},0,255,q.KEEP,q.KEEP,q.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new it(h.map),this._pendingGroundEffectLayers=[]}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),this._style=l,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,h,x){if(l&&l.terrain){this._style!==l&&(this.style=l,this._evaluationZoom=void 0);const E=l.terrain.properties,L=l.terrain.drapeRenderMode===0,M=l.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const q=l.terrain&&l.terrain.scope,X=E.get("source"),ne=L?this._mockSourceCache:l.getSourceCache(X,q);if(!ne)return void i.w(`Couldn't find terrain source "${X}".`);if(this.sourceCache=ne,this._exaggeration=M?this.calculateExaggeration(h):E.get("exaggeration"),!h.projection.requiresDraping&&M&&this._exaggeration===0)return void this._disable();this.enabled=!0;const ae=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const xe=this.getScaledDemTileSize();this.sourceCache.update(h,xe,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,ae(),this._initializing=!0),ae(),h.updateElevation(!0,x),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0,this._previousZoom=h.zoom}else this._disable()}calculateExaggeration(l){const h=this._previousCameraAltitude,x=l.getFreeCameraOptions().position.z/l.pixelsPerMeter*l.worldSize;this._previousCameraAltitude=x;const E=h!=null?x-h:Number.MAX_VALUE;if(Math.abs(E)<2)return this._exaggeration;const L=l.zoom,M=this._style.terrain;if(!this._previousUpdateTimestamp)return M.getExaggeration(L);let q=L-this._previousZoom;const X=this._previousUpdateTimestamp;let ne=L;this._evaluationZoom!=null&&(ne=this._evaluationZoom,Math.abs(L-ne)>.5&&(q=.5*(L-ne+q)),q*E<0&&(ne+=q)),this._evaluationZoom=ne;const ae=M.getExaggeration(ne),xe=ae===M.getExaggeration(Math.max(0,ne-.1));if(xe&&Math.abs(ae-this._exaggeration)<.01)return ae;let Ce=Math.min(.1,.00375*(this._updateTimestamp-X));return(xe||ae<.1||Math.abs(q)<1e-4)&&(Ce=Math.min(.2,4*Ce)),i.aa(this._exaggeration,ae,Ce)}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._mergedSourceCaches)this._style._mergedSourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,x=this.painter.transform;this._initializing&&(this._initializing=x._centerAltitude===0&&this.getAtPointOrZero(i.a5.fromLngLat(x.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const E=this.proxyCoords=h.getIds().map(X=>{const ne=h.getTileByID(X).tileID;return ne.projMatrix=x.calculateProjMatrix(ne.toUnwrapped()),ne});(function(X,ne){const ae=ne.transform.pointCoordinate(ne.transform.getCameraPoint()),xe=new i.P(ae.x,ae.y);X.sort((Ce,Ee)=>{if(Ee.overscaledZ-Ce.overscaledZ)return Ee.overscaledZ-Ce.overscaledZ;const Ge=new i.P(Ce.canonical.x+(1<<Ce.canonical.z)*Ce.wrap,Ce.canonical.y),$e=new i.P(Ee.canonical.x+(1<<Ee.canonical.z)*Ee.wrap,Ee.canonical.y),Ye=xe.mult(1<<Ce.canonical.z);return Ye.x-=.5,Ye.y-=.5,Ye.distSqr(Ge)-Ye.distSqr($e)})})(E,this.painter);const L=this.proxyToSource||{};this.proxyToSource={},E.forEach(X=>{this.proxyToSource[X.key]={}}),this.terrainTileForTile={};const M=this._style._mergedSourceCaches;for(const X in M){const ne=M[X];if(!ne.used||(ne!==this.sourceCache&&this.resetTileLookupCache(ne.id),this._setupProxiedCoordsForOrtho(ne,l[X],L),ne.usedForTerrain))continue;const ae=l[X];ne.getSource().reparseOverscaled&&this._assignTerrainTiles(ae)}this.proxiedCoords[h.id]=E.map(X=>new Oe(X,X.key,this.orthoMatrix)),this._assignTerrainTiles(E),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(L),this.renderingToTexture=!1;const q={};this._visibleDemTiles=[];for(const X of this.proxyCoords){const ne=this.terrainTileForTile[X.key];if(!ne)continue;const ae=ne.tileID.key;ae in q||(this._visibleDemTiles.push(ne),q[ae]=ae)}}_assignTerrainTiles(l){this._initializing||l.forEach(h=>{if(this.terrainTileForTile[h.key])return;const x=this._findTileCoveringTileID(h,this.sourceCache);x&&(this.terrainTileForTile[h.key]=x)})}_prepareDEMTextures(){const l=this.painter.context,h=l.gl;for(const x in this.terrainTileForTile){const E=this.terrainTileForTile[x],L=E.dem;!L||E.demTexture&&!E.needsDEMTextureUpload||(l.activeTexture.set(h.TEXTURE1),Cs(this.painter,E,L))}}_prepareDemTileUniforms(l,h,x,E){if(!h||h.demTexture==null)return!1;const L=l.tileID.canonical,M=Math.pow(2,h.tileID.canonical.z-L.z),q=E||"";return x[`u_dem_tl${q}`]=[L.x*M%1,L.y*M%1],x[`u_dem_scale${q}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let l=0;const h=this._visibleDemTiles.reduce((x,E)=>{if(!E.dem)return x;const L=E.dem.tree.minimums[0];return L>0&&l++,x+L},0);return l?h/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,h=l.gl;l.activeTexture.set(h.TEXTURE2);const x=this._getLoadedAreaMinimum(),E=new i.cF({width:1,height:1},new Float32Array([x]));this._emptyDEMTextureDirty=!1;let L=this._emptyDEMTexture;return L?L.update(E,{premultiply:!1}):L=this._emptyDEMTexture=new i.T(l,E,h.R32F,{premultiply:!1}),L}setupElevationDraw(l,h,x){const E=this.painter.context,L=E.gl,M={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};M.u_exaggeration=this.exaggeration();let q=null,X=null,ne=1;if(x&&x.morphing&&this._useVertexMorphing){const Ee=x.morphing.srcDemTile,Ge=x.morphing.dstDemTile;ne=x.morphing.phase,Ee&&Ge&&(this._prepareDemTileUniforms(l,Ee,M,"_prev")&&(X=Ee),this._prepareDemTileUniforms(l,Ge,M)&&(q=Ge))}const ae=Ee=>Ee&&Ee.demTexture&&this.painter.linearFloatFilteringSupported()?L.LINEAR:L.NEAREST;let xe=null;var Ce;if(this.enabled?X&&q?(xe=q.demTexture,E.activeTexture.set(L.TEXTURE4),X.demTexture.bind(ae(X),L.CLAMP_TO_EDGE),M.u_dem_lerp=ne):(q=this.terrainTileForTile[l.tileID.key],xe=this._prepareDemTileUniforms(l,q,M)?q.demTexture:this.emptyDEMTexture):xe=this.emptyDEMTexture,E.activeTexture.set(L.TEXTURE2),xe&&(M.u_dem_size=(Ce=xe).size[0]===1?1:Ce.size[0]-2,xe.bind(ae(q),L.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(x&&x.useDepthForOcclusion,h,M),x&&x.useMeterToDem&&q){const Ee=(1<<q.tileID.canonical.z)*i.bD(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=Ee}if(x&&x.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=x.labelPlaneMatrixInv),h.setTerrainUniformValues(E,M),this.painter.transform.projection.name==="globe"){const Ee=this.globeUniformValues(this.painter.transform,l.tileID.canonical,x&&x.useDenormalizedUpVectorScale);h.setGlobeUniformValues(E,Ee)}}globeUniformValues(l,h,x){const E=l.projection;return{u_tile_tl_up:E.upVector(h,0,0),u_tile_tr_up:E.upVector(h,i.ab,0),u_tile_br_up:E.upVector(h,i.ab,i.ab),u_tile_bl_up:E.upVector(h,0,i.ab),u_tile_up_scale:x?i.cG(1):E.upVectorScale(h,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const h=this.painter,x=this.painter.context;l.length!==0&&(x.bindFramebuffer.set(null),x.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(E,L,M,q,X){if(E.transform.projection.name==="globe")(function(ne,ae,xe,Ce,Ee){const Ge=ne.context,$e=Ge.gl;let Ye,Je;const ht=ne.transform,gt=i.cx(ne,Ge,ht),ut=(sr,Cr)=>{if(Je===Cr)return;const Rr=[qa[Cr],"PROJECTION_GLOBE_VIEW"];gt&&Rr.push("CUSTOM_ANTIALIASING");const wr=ne.isTileAffectedByFog(sr);Ye=ne.getOrCreateProgram("globeRaster",{defines:Rr,overrideFog:wr}),Je=Cr},wt=ne.colorModeForRenderPass(),_t=new Dr($e.LEQUAL,Dr.ReadWrite,ne.depthRangeFor3D);Mo.update(Ee);const Pt=i.cy(ht),Tt=[i.am(ht.center.lng),i.at(ht.center.lat)],jt=ne.globeSharedBuffers,Vt=[ht.width*i.q.devicePixelRatio,ht.height*i.q.devicePixelRatio],Ut=Float32Array.from(ht.globeMatrix),Ot={useDenormalizedUpVectorScale:!0};{const sr=ne.transform,Cr=Kf(sr.zoom,ae.exaggeration(),ae.sourceCache._source.tileSize);Je=-1;const Rr=$e.TRIANGLES;for(const wr of Ce){const Jr=xe.getTile(wr),or=gn.disabled,Fr=ae.prevTerrainTileForTile[wr.key],Er=ae.terrainTileForTile[wr.key];vl(Fr,Er)&&Mo.newMorphing(wr.key,Fr,Er,Ee,250),Ge.activeTexture.set($e.TEXTURE0),Jr.texture&&Jr.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE);const en=Mo.getMorphValuesForProxy(wr.key),nn=en?1:0;en&&i.C(Ot,{morphing:{srcDemTile:en.from,dstDemTile:en.to,phase:i.cw(en.phase)}});const kr=i.cz(wr.canonical),Hr=i.cA(kr.getCenter().lat),Yn=i.cB(wr.canonical,kr,Hr,sr.worldSize/sr._pixelsPerMercatorPixel),dn=i.b5(i.cC(wr.canonical)),Nn=Wf(sr.expandedFarZProjMatrix,Ut,Pt,dn,i.a9(sr.zoom),Tt,sr.frustumCorners.TL,sr.frustumCorners.TR,sr.frustumCorners.BR,sr.frustumCorners.BL,sr.globeCenterInViewSpace,sr.globeRadius,Vt,Cr,sr._farZ,Yn);if(ut(wr,nn),Ye&&(ae.setupElevationDraw(Jr,Ye,Ot),ne.uploadCommonUniforms(Ge,Ye,wr.toUnwrapped()),jt)){const[ai,zn,ii]=jt.getGridBuffers(Hr,Cr!==0);Ye.draw(ne,Rr,_t,or,wt,vn.backCCW,Nn,"globe_raster",ai,zn,ii)}}}if(jt&&(ne.renderDefaultNorthPole||ne.renderDefaultSouthPole)){const sr=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];gt&&sr.push("CUSTOM_ANTIALIASING"),Ye=ne.getOrCreateProgram("globeRaster",{defines:sr});for(const Cr of Ce){const{x:Rr,y:wr,z:Jr}=Cr.canonical,or=wr===0,Fr=wr===(1<<Jr)-1,[Er,en,nn,kr]=jt.getPoleBuffers(Jr,!1);if(kr&&(or||Fr)){const Hr=xe.getTile(Cr);Ge.activeTexture.set($e.TEXTURE0),Hr.texture&&Hr.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE);let Yn=i.cD(Jr,Rr,ht);const dn=i.b5(i.cC(Cr.canonical)),Nn=(ai,zn)=>ai.draw(ne,$e.TRIANGLES,_t,gn.disabled,wt,vn.disabled,Wf(ht.expandedFarZProjMatrix,Yn,Yn,dn,0,Tt,ht.frustumCorners.TL,ht.frustumCorners.TR,ht.frustumCorners.BR,ht.frustumCorners.BL,ht.globeCenterInViewSpace,ht.globeRadius,Vt,0,ht._farZ),"globe_pole_raster",zn,nn,kr);ae.setupElevationDraw(Hr,Ye,Ot),ne.uploadCommonUniforms(Ge,Ye,Cr.toUnwrapped()),or&&ne.renderDefaultNorthPole&&Nn(Ye,Er),Fr&&ne.renderDefaultSouthPole&&(Yn=i.a6.mat4.scale(i.a6.mat4.create(),Yn,[1,-1,1]),Nn(Ye,en))}}}})(E,L,M,q,X);else{const ne=E.context,ae=ne.gl;let xe,Ce;const Ee=E.shadowRenderer,Ge=Ki(E,E.longestCutoffRange),$e=wt=>{if(Ce===wt)return;const _t=[];_t.push(qa[wt]),Ge.shouldRenderCutoff&&_t.push("RENDER_CUTOFF"),xe=E.getOrCreateProgram("terrainRaster",{defines:_t}),Ce=wt},Ye=E.colorModeForRenderPass(),Je=new Dr(ae.LEQUAL,Dr.ReadWrite,E.depthRangeFor3D);Mo.update(X);const ht=E.transform,gt=Kf(ht.zoom,L.exaggeration(),L.sourceCache._source.tileSize);let ut=[0,0,0];if(Ee){const wt=E.style.directionalLight,_t=E.style.ambientLight;wt&&_t&&(ut=yl(E.style,wt,_t))}{Ce=-1;const wt=ae.TRIANGLES,[_t,Pt]=[L.gridIndexBuffer,L.gridSegments];for(const Tt of q){const jt=M.getTile(Tt),Vt=gn.disabled,Ut=L.prevTerrainTileForTile[Tt.key],Ot=L.terrainTileForTile[Tt.key];vl(Ut,Ot)&&Mo.newMorphing(Tt.key,Ut,Ot,X,250),ne.activeTexture.set(ae.TEXTURE0),jt.texture&&jt.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const sr=Mo.getMorphValuesForProxy(Tt.key),Cr=sr?1:0;let Rr;sr&&(Rr={morphing:{srcDemTile:sr.from,dstDemTile:sr.to,phase:i.cw(sr.phase)}});const wr=Pp(Tt.projMatrix,Ed(Tt.canonical,ht.renderWorldCopies)?gt/10:gt,ut);if($e(Cr),!xe)continue;L.setupElevationDraw(jt,xe,Rr);const Jr=Tt.toUnwrapped();Ee&&Ee.setupShadows(Jr,xe),E.uploadCommonUniforms(ne,xe,Jr,null,Ge),xe.draw(E,wt,Je,Vt,Ye,vn.backCCW,wr,"terrain_raster",L.gridBuffer,_t,Pt)}}}}(h,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const h=this.painter,x=this.painter.context,E=this.proxySourceCache,L=this.proxiedCoords[E.id],M=this._drapedRenderBatches.shift(),q=h.style.order,X=[];let ne=0;for(const ae of L){const xe=E.getTileByID(ae.proxyTileKey),Ce=E.proxyCachedFBO[ae.key]?E.proxyCachedFBO[ae.key][l]:void 0,Ee=Ce!==void 0?E.renderCache[Ce]:this.pool[ne++],Ge=Ce!==void 0;if(xe.texture=Ee.tex,Ge&&!Ee.dirty){X.push(xe.tileID);continue}let $e;x.bindFramebuffer.set(Ee.fb.framebuffer),this.renderedToTile=!1,Ee.dirty&&(x.clear({color:i.bz.transparent,stencil:0}),Ee.dirty=!1);for(let Ye=M.start;Ye<=M.end;++Ye){const Je=h.style._mergedLayers[q[Ye]];if(Je.isHidden(h.transform.zoom))continue;const ht=h.style.getLayerSourceCache(Je),gt=ht?this.proxyToSource[ae.key][ht.id]:[ae];if(!gt)continue;const ut=gt;x.viewport.set([0,0,Ee.fb.width,Ee.fb.height]),$e!==(ht?ht.id:null)&&(this._setupStencil(Ee,gt,Je,ht),$e=ht?ht.id:null),h.renderLayer(h,ht,Je,ut)}if(this._drapedRenderBatches.length===0)for(const Ye of this._pendingGroundEffectLayers){const Je=h.style._mergedLayers[q[Ye]];if(Je.isHidden(h.transform.zoom))continue;const ht=h.style.getLayerSourceCache(Je),gt=ht?this.proxyToSource[ae.key][ht.id]:[ae];if(!gt)continue;const ut=gt;x.viewport.set([0,0,Ee.fb.width,Ee.fb.height]),$e!==(ht?ht.id:null)&&(this._setupStencil(Ee,gt,Je,ht),$e=ht?ht.id:null),h.renderLayer(h,ht,Je,ut)}this.renderedToTile?(Ee.dirty=!0,X.push(xe.tileID)):Ge||--ne,ne===5&&(ne=0,this.renderToBackBuffer(X))}return this.renderToBackBuffer(X),this.renderingToTexture=!1,x.bindFramebuffer.set(null),x.viewport.set([0,0,h.width,h.height]),M.end+1}postRender(){}isLayerOrderingCorrect(l){const h=l.order.length;let x=-1,E=h;for(let L=0;L<h;++L)this._style.isLayerDraped(l._mergedLayers[l.order[L]])?x=Math.max(x,L):E=Math.min(E,L);return E>x}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{l=Math.min(l,h.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,h,x){if(!this._visibleDemTiles)return null;const E=this._visibleDemTiles.filter(L=>L.dem).map(L=>{const M=L.tileID,q=1<<M.overscaledZ,{x:X,y:ne}=M.canonical,ae=X/q,xe=(X+1)/q,Ce=ne/q,Ee=(ne+1)/q;return{minx:ae,miny:Ce,maxx:xe,maxy:Ee,t:L.dem.tree.raycastRoot(ae,Ce,xe,Ee,l,h,x),tile:L}});E.sort((L,M)=>(L.t!==null?L.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const L of E){if(L.t==null)return null;const M=L.tile.dem.tree.raycast(L.minx,L.miny,L.maxx,L.maxy,l,h,x);if(M!=null)return M}return null}_createFBO(){const l=this.painter.context,h=l.gl,x=this.drapeBufferSize;l.activeTexture.set(h.TEXTURE0);const E=new i.T(l,{width:x[0],height:x[1],data:null},h.RGBA8);E.bind(h.LINEAR,h.CLAMP_TO_EDGE);const L=l.createFramebuffer(x[0],x[1],!0,null);return L.colorAttachment.set(E.texture),L.depthAttachment=new Bd(l,L.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,x[0],x[1]),this._stencilRef=0,L.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):L.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&h.texParameterf(h.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:L,tex:E,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const l in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const h=this._style._mergedLayers[l],x=h.isHidden(this.painter.transform.zoom);return h.type==="hillshade"||h.type==="custom"?!x&&h.shouldRedrape():!x&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const x of this._style.getSources())if(x instanceof tl){l=!0;break}if(!l)return;const h={};for(let x=0;x<this._style.order.length;++x){const E=this._style._mergedLayers[this._style.order[x]],L=this._style.getLayerSourceCache(E);if(L&&!h[L.id]&&!E.isHidden(this.painter.transform.zoom)&&E.type==="line"&&E.widthExpression()instanceof i.a4){h[L.id]=!0;for(const M of this.proxyCoords){const q=this.proxyToSource[M.key][L.id];if(q)for(const X of q)this._clearRenderCacheForTile(L.id,X)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const x in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[x]._source instanceof go){l=!0;break}if(!l)return;const h={};for(let x=0;x<this._style.order.length;++x){const E=this._style._mergedLayers[this._style.order[x]],L=this._style.getLayerSourceCache(E);if(!L||h[L.id]||E.isHidden(this.painter.transform.zoom)||E.type!=="raster")continue;const M=E.paint.get("raster-fade-duration");for(const q of this.proxyCoords){const X=this.proxyToSource[q.key][L.id];if(X)for(const ne of X){const ae=uo(L.getTile(ne),L.findLoadedParent(ne,0),L,this.painter.transform,M);(ae.opacity!==1||ae.mix!==0)&&this._clearRenderCacheForTile(L.id,ne)}}}}_setupDrapedRenderBatches(){const l=this._style.order,h=l.length;if(h===0)return;const x=[];this._pendingGroundEffectLayers=[];let E,L=0,M=this._style._mergedLayers[l[L]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++L<h;)M=this._style._mergedLayers[l[L]];for(;L<h;++L){const q=this._style._mergedLayers[l[L]];q.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(q)?E===void 0&&(E=L):(q.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(L),E!==void 0&&(x.push({start:E,end:L-1}),E=void 0)))}if(E!==void 0&&x.push({start:E,end:L-1}),x.length!==0){const q=x[x.length-1];this._pendingGroundEffectLayers.every(X=>X>q.end)||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=x}_setupRenderCache(l){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const M=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let q=0;q<M.length;++q){const X=Object.values(M[q]);h.renderCachePool.push(...X)}}return}this._clearRasterLayersFromRenderCache();const x=this.proxyCoords,E=this._tilesDirty;for(let M=x.length-1;M>=0;M--){const q=x[M];if(h.getTileByID(q.key),h.proxyCachedFBO[q.key]!==void 0){const X=l[q.key],ne=this.proxyToSource[q.key];let ae=0;for(const xe in ne){const Ce=ne[xe],Ee=X[xe];if(!Ee||Ee.length!==Ce.length||Ce.some((Ge,$e)=>Ge!==Ee[$e]||E[xe]&&E[xe].hasOwnProperty(Ge.key))){ae=-1;break}++ae}for(const xe in h.proxyCachedFBO[q.key])h.renderCache[h.proxyCachedFBO[q.key][xe]].dirty=ae<0||ae!==Object.values(X).length}}const L=[...this._drapedRenderBatches];L.sort((M,q)=>q.end-q.start-(M.end-M.start));for(const M of L)for(const q of x){if(h.proxyCachedFBO[q.key])continue;let X=h.renderCachePool.pop();X===void 0&&h.renderCache.length<50&&(X=h.renderCache.length,h.renderCache.push(this._createFBO())),X!==void 0&&(h.proxyCachedFBO[q.key]={},h.proxyCachedFBO[q.key][M.start]=X,h.renderCache[X].dirty=!0)}this._tilesDirty={}}_setupStencil(l,h,x,E){if(!E||!this._sourceTilesOverlap[E.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const L=this.painter.context,M=L.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let q;if(x.isTileClipped())q=h.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);q=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+q>255&&(L.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=q,this._overlapStencilMode.ref=this._stencilRef,x.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):gn.disabled}_renderTileClippingMasks(l,h){const x=this.painter,E=this.painter.context,L=E.gl;x._tileClippingMaskIDs={},E.setColorMode(qr.disabled),E.setDepthMode(Dr.disabled);const M=x.getOrCreateProgram("clippingMask");for(const q of l){const X=x._tileClippingMaskIDs[q.key]=--h;M.draw(x,L.TRIANGLES,Dr.disabled,new gn({func:L.ALWAYS,mask:0},X,255,L.KEEP,L.KEEP,L.REPLACE),qr.disabled,vn.disabled,Ta(q.projMatrix),"$clipping",x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}pointCoordinate(l){const h=this.painter.transform;if(l.x<0||l.x>h.width||l.y<0||l.y>h.height)return null;const x=[l.x,l.y,1,1];i.a6.vec4.transformMat4(x,x,h.pixelMatrixInverse),i.a6.vec4.scale(x,x,1/x[3]),x[0]/=h.worldSize,x[1]/=h.worldSize;const E=h._camera.position,L=i.bD(1,h.center.lat),M=[E[0],E[1],E[2]/L,0],q=i.a6.vec3.subtract([],x.slice(0,3),M);i.a6.vec3.normalize(q,q);const X=this.raycast(M,q,this._exaggeration);return X!==null&&X?(i.a6.vec3.scaleAndAdd(M,M,q,X),M[3]=M[2],M[2]*=L,M):null}_setupProxiedCoordsForOrtho(l,h,x){if(l.getSource()instanceof i.aD)return this._setupProxiedCoordsForImageSource(l,h,x);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const E=this.proxiedCoords[l.id]=[],L=this.proxyCoords;for(let X=0;X<L.length;X++){const ne=L[X],ae=this._findTileCoveringTileID(ne,l);if(ae){const xe=this._createProxiedId(ne,ae,x[ne.key]&&x[ne.key][l.id]);E.push(xe),this.proxyToSource[ne.key][l.id]=[xe]}}let M=!1;const q=new Set;for(let X=0;X<h.length;X++){const ne=l.getTile(h[X]);if(!ne||!ne.hasData())continue;const ae=this._findTileCoveringTileID(ne.tileID,this.proxySourceCache);if(ae&&ae.tileID.canonical.z!==ne.tileID.canonical.z){const xe=this.proxyToSource[ae.tileID.key][l.id],Ce=this._createProxiedId(ae.tileID,ne,x[ae.tileID.key]&&x[ae.tileID.key][l.id]);xe?xe.splice(xe.length-1,0,Ce):this.proxyToSource[ae.tileID.key][l.id]=[Ce];const Ee=this.proxyToSource[ae.tileID.key][l.id];q.has(Ee)||q.add(Ee),E.push(Ce),M=!0}}if(this._sourceTilesOverlap[l.id]=M,M&&this._debugParams.sortTilesHiZFirst)for(const X of q)X.sort((ne,ae)=>ae.overscaledZ-ne.overscaledZ)}_setupProxiedCoordsForImageSource(l,h,x){if(!l.getSource().loaded())return;const E=this.proxiedCoords[l.id]=[],L=this.proxyCoords,M=l.getSource(),q=M.tileID;if(!q)return;const X=new i.P(q.x,q.y)._div(1<<q.z),ne=M.coordinates.map(i.a5.fromLngLat).reduce((xe,Ce)=>(xe.min.x=Math.min(xe.min.x,Ce.x-X.x),xe.min.y=Math.min(xe.min.y,Ce.y-X.y),xe.max.x=Math.max(xe.max.x,Ce.x-X.x),xe.max.y=Math.max(xe.max.y,Ce.y-X.y),xe),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),ae=(xe,Ce)=>{const Ee=xe.wrap+xe.canonical.x/(1<<xe.canonical.z),Ge=xe.canonical.y/(1<<xe.canonical.z),$e=i.ab/(1<<xe.canonical.z),Ye=Ce.wrap+Ce.canonical.x/(1<<Ce.canonical.z),Je=Ce.canonical.y/(1<<Ce.canonical.z);return Ee+$e<Ye+ne.min.x||Ee>Ye+ne.max.x||Ge+$e<Je+ne.min.y||Ge>Je+ne.max.y};for(let xe=0;xe<L.length;xe++){const Ce=L[xe];for(let Ee=0;Ee<h.length;Ee++){const Ge=l.getTile(h[Ee]);if(!Ge||!Ge.hasData()||ae(Ce,Ge.tileID))continue;const $e=this._createProxiedId(Ce,Ge,x[Ce.key]&&x[Ce.key][l.id]),Ye=this.proxyToSource[Ce.key][l.id];Ye?Ye.push($e):this.proxyToSource[Ce.key][l.id]=[$e],E.push($e)}}}_createProxiedId(l,h,x){let E=this.orthoMatrix;if(x){const L=x.find(M=>M.key===h.tileID.key);if(L)return L}if(h.tileID.key!==l.key){const L=l.canonical.z-h.tileID.canonical.z;let M,q,X;E=i.a6.mat4.create();const ne=h.tileID.wrap-l.wrap<<l.overscaledZ;L>0?(M=i.ab>>L,q=M*((h.tileID.canonical.x<<L)-l.canonical.x+ne),X=M*((h.tileID.canonical.y<<L)-l.canonical.y)):(M=i.ab<<-L,q=i.ab*(h.tileID.canonical.x-(l.canonical.x+ne<<-L)),X=i.ab*(h.tileID.canonical.y-(l.canonical.y<<-L))),i.a6.mat4.ortho(E,0,M,0,M,0,1),i.a6.mat4.translate(E,E,[q,X,0])}return new Oe(h.tileID,l.key,E)}_findTileCoveringTileID(l,h){let x=h.getTile(l);if(x&&x.hasData())return x;const E=this._findCoveringTileCache[h.id],L=E[l.key];if(x=L?h.getTileByID(L):null,x&&x.hasData()||L===null)return x;let M=x?x.tileID:l,q=M.overscaledZ;const X=h.getSource().minzoom,ne=[];if(!L){const xe=h.getSource().maxzoom;if(l.canonical.z>=xe){const Ce=l.canonical.z-xe;h.getSource().reparseOverscaled?(q=Math.max(l.canonical.z+2,h.transform.tileZoom),M=new i.aA(q,l.wrap,xe,l.canonical.x>>Ce,l.canonical.y>>Ce)):Ce!==0&&(q=xe,M=new i.aA(q,l.wrap,xe,l.canonical.x>>Ce,l.canonical.y>>Ce))}M.key!==l.key&&(ne.push(M.key),x=h.getTile(M))}const ae=xe=>{ne.forEach(Ce=>{E[Ce]=xe}),ne.length=0};for(q-=1;q>=X&&(!x||!x.hasData());q--){x&&ae(x.tileID.key);const xe=M.calculateScaledKey(q);if(x=h.getTileByID(xe),x&&x.hasData())break;const Ce=E[xe];if(Ce===null)break;Ce===void 0?ne.push(xe):x=h.getTileByID(Ce)}return ae(x?x.tileID.key:null),x&&x.hasData()?x:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,h){let x=this._tilesDirty[l];x||(x=this._tilesDirty[l]={}),x[h.key]=!0}}function Xt(v,l,h){const x=function(q,X,ne){const ae=i.a6.vec3.dot(X,q),xe=i.a6.vec3.dot(ne,[.2126,.7152,.0722]),Ce=(Ge,$e,Ye)=>(1-Ye)*Ge+Ye*$e,Ee=Ce(1-.3*Math.min(xe,1),1,Math.min(ae+1,1));return Ce(.92,1,Math.asin(i.ap(X[2],-1,1))/Math.PI+.5)*Ee}(v,[0,0,1],l),E=[0,0,0];i.a6.vec3.scale(E,h.slice(0,3),x);const L=[0,0,0];i.a6.vec3.scale(L,l.slice(0,3),v[2]);const M=[0,0,0];return i.a6.vec3.add(M,E,L),i.cb(M)}const Qr=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Xn=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class Si{static cacheKey(l,h,x,E){let L=`${h}${E?E.cacheKey:""}`;for(const M of x)l.usedDefines.includes(M)&&(L+=`/${M}`);return L}constructor(l,h,x,E,L,M){const q=l.gl;this.program=q.createProgram(),this.configuration=E,this.name=h,this.fixedDefines=[...M];const X=E?E.getBinderAttributes():[],ne=(x.staticAttributes||[]).concat(X);let ae=E?E.defines():[];ae=ae.concat(M.map(Ye=>`#define ${Ye}`));const xe=`#version 300 es
`;let Ce=xe+ae.concat("precision mediump float;",ga,$s.fragmentSource).join(`
`);for(const Ye of x.fragmentIncludes)Ce+=`
${ta[Ye]}`;Ce+=`
${x.fragmentSource}`;let Ee=xe+ae.concat("precision highp float;",ga,$s.vertexSource).join(`
`);for(const Ye of x.vertexIncludes)Ee+=`
${ta[Ye]}`;Ee+=`
${x.vertexSource}`;const Ge=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(Ge,Ce),q.compileShader(Ge),q.attachShader(this.program,Ge);const $e=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())this.failedToCreate=!0;else{q.shaderSource($e,Ee),q.compileShader($e),q.attachShader(this.program,$e),this.attributes={},this.numAttributes=ne.length;for(let Ye=0;Ye<this.numAttributes;Ye++)if(ne[Ye]){const Je=ne[Ye].startsWith("a_")?ne[Ye]:`a_${ne[Ye]}`;q.bindAttribLocation(this.program,Ye,Je),this.attributes[Je]=Ye}q.linkProgram(this.program),q.deleteShader($e),q.deleteShader(Ge),this.fixedUniforms=L(l),this.binderUniforms=E?E.getUniforms(l):[],(M.includes("TERRAIN")||h.indexOf("symbol")!==-1||h.indexOf("circle")!==-1)&&(this.terrainUniforms=(Ye=>({u_dem:new i.bJ(Ye),u_dem_prev:new i.bJ(Ye),u_dem_tl:new i.bG(Ye),u_dem_scale:new i.bI(Ye),u_dem_tl_prev:new i.bG(Ye),u_dem_scale_prev:new i.bI(Ye),u_dem_size:new i.bI(Ye),u_dem_lerp:new i.bI(Ye),u_exaggeration:new i.bI(Ye),u_depth:new i.bJ(Ye),u_depth_size_inv:new i.bG(Ye),u_depth_range_unpack:new i.bG(Ye),u_occluder_half_size:new i.bI(Ye),u_occlusion_depth_offset:new i.bI(Ye),u_meter_to_dem:new i.bI(Ye),u_label_plane_matrix_inv:new i.bF(Ye)}))(l)),M.includes("GLOBE")&&(this.globeUniforms=(Ye=>({u_tile_tl_up:new i.bH(Ye),u_tile_tr_up:new i.bH(Ye),u_tile_br_up:new i.bH(Ye),u_tile_bl_up:new i.bH(Ye),u_tile_up_scale:new i.bI(Ye)}))(l)),M.includes("FOG")&&(this.fogUniforms=(Ye=>({u_fog_matrix:new i.bF(Ye),u_fog_range:new i.bG(Ye),u_fog_color:new i.c6(Ye),u_fog_horizon_blend:new i.bI(Ye),u_fog_vertical_limit:new i.bG(Ye),u_fog_temporal_offset:new i.bI(Ye),u_frustum_tl:new i.bH(Ye),u_frustum_tr:new i.bH(Ye),u_frustum_br:new i.bH(Ye),u_frustum_bl:new i.bH(Ye),u_globe_pos:new i.bH(Ye),u_globe_radius:new i.bI(Ye),u_globe_transition:new i.bI(Ye),u_is_globe:new i.bJ(Ye),u_viewport:new i.bG(Ye)}))(l)),M.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Ye=>({u_cutoff_params:new i.c6(Ye)}))(l)),M.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Ye=>({u_lighting_ambient_color:new i.bH(Ye),u_lighting_directional_dir:new i.bH(Ye),u_lighting_directional_color:new i.bH(Ye),u_ground_radiance:new i.bH(Ye)}))(l)),M.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Ye=>({u_light_matrix_0:new i.bF(Ye),u_light_matrix_1:new i.bF(Ye),u_fade_range:new i.bG(Ye),u_shadow_normal_offset:new i.bH(Ye),u_shadow_intensity:new i.bI(Ye),u_shadow_texel_size:new i.bI(Ye),u_shadow_map_resolution:new i.bI(Ye),u_shadow_direction:new i.bH(Ye),u_shadow_bias:new i.bH(Ye),u_shadowmap_0:new i.bJ(Ye),u_shadowmap_1:new i.bJ(Ye)}))(l))}}setTerrainUniformValues(l,h){if(!this.terrainUniforms)return;const x=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in h)x[E]&&x[E].set(this.program,E,h[E])}}setGlobeUniformValues(l,h){if(!this.globeUniforms)return;const x=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in h)x[E]&&x[E].set(this.program,E,h[E])}}setFogUniformValues(l,h){if(!this.fogUniforms)return;const x=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in h)x[E].set(this.program,E,h[E])}}setCutoffUniformValues(l,h){if(!this.cutoffUniforms)return;const x=this.cutoffUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in h)x[E].set(this.program,E,h[E])}}setLightsUniformValues(l,h){if(!this.lightsUniforms)return;const x=this.lightsUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in h)x[E].set(this.program,E,h[E])}}setShadowUniformValues(l,h){if(this.failedToCreate||!this.shadowUniforms)return;const x=this.shadowUniforms;l.program.set(this.program);for(const E in h)x[E].set(this.program,E,h[E])}_drawDebugWireframe(l,h,x,E,L,M,q,X,ne,ae){const xe=l.options.wireframe;if(xe.terrain===!1&&xe.layers2D===!1&&xe.layers3D===!1)return;const Ce=l.context;if(!(!(!xe.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!xe.layers2D||l._terrain&&l._terrain.renderingToTexture||!Qr.includes(this.name))||!(!xe.layers3D||!Xn.includes(this.name))))return;const Ee=Ce.gl,Ge=l.wireframeDebugCache.getLinesFromTrianglesBuffer(l.frameCounter,L,Ce);if(!Ge)return;const $e=[...this.fixedDefines];$e.push("DEBUG_WIREFRAME");const Ye=l.getOrCreateProgram(this.name,{config:this.configuration,defines:$e});Ce.program.set(Ye.program);const Je=(ut,wt,_t)=>{if(wt[ut]&&_t[ut])for(const Pt in wt[ut])_t[ut][Pt]&&_t[ut][Pt].set(_t.program,Pt,wt[ut][Pt].current)};ne&&ne.setUniforms(Ye.program,Ce,Ye.binderUniforms,q,{zoom:X}),Je("fixedUniforms",this,Ye),Je("terrainUniforms",this,Ye),Je("globeUniforms",this,Ye),Je("fogUniforms",this,Ye),Je("lightsUniforms",this,Ye),Je("shadowUniforms",this,Ye),Ge.bind(),Ce.setColorMode(new qr([Ee.ONE,Ee.ONE_MINUS_SRC_ALPHA,Ee.ZERO,Ee.ONE],i.bz.transparent,[!0,!0,!0,!1])),Ce.setDepthMode(new Dr(h.func===Ee.LESS?Ee.LEQUAL:h.func,Dr.ReadOnly,h.range)),Ce.setStencilMode(gn.disabled);const ht=3*M.primitiveLength*2,gt=3*M.primitiveOffset*2*2;ae&&ae>1?Ee.drawElementsInstanced(Ee.LINES,ht,Ee.UNSIGNED_SHORT,gt,ae):Ee.drawElements(Ee.LINES,ht,Ee.UNSIGNED_SHORT,gt),L.bind(),Ce.program.set(this.program),Ce.setDepthMode(h),Ce.setStencilMode(x),Ce.setColorMode(E)}draw(l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e,Ye){const Je=l.context,ht=Je.gl;if(this.failedToCreate)return;Je.program.set(this.program),Je.setDepthMode(x),Je.setStencilMode(E),Je.setColorMode(L),Je.setCullFace(M);for(const wt of Object.keys(this.fixedUniforms))this.fixedUniforms[wt].set(this.program,wt,q[wt]);Ge&&Ge.setUniforms(this.program,Je,this.binderUniforms,Ce,{zoom:Ee});const gt={[ht.POINTS]:1,[ht.LINES]:2,[ht.TRIANGLES]:3,[ht.LINE_STRIP]:1}[h],ut=Ye&&Ye>0?1:void 0;for(const wt of xe.get()){const _t=wt.vaos||(wt.vaos={});(_t[X]||(_t[X]=new mi)).bind(Je,this,ne,Ge?Ge.getPaintVertexBuffers():[],ae,wt.vertexOffset,$e||[],ut),Ye&&Ye>1?ht.drawElementsInstanced(h,wt.primitiveLength*gt,ht.UNSIGNED_SHORT,wt.primitiveOffset*gt*2,Ye):ae?ht.drawElements(h,wt.primitiveLength*gt,ht.UNSIGNED_SHORT,wt.primitiveOffset*gt*2):ht.drawArrays(h,wt.vertexOffset,wt.vertexLength),h===ht.TRIANGLES&&ae&&this._drawDebugWireframe(l,x,E,L,ae,wt,Ce,Ee,Ge,Ye)}}}function Di(v,l){const h=Math.pow(2,l.tileID.overscaledZ),x=l.tileSize*Math.pow(2,v.transform.tileZoom)/h,E=x*(l.tileID.canonical.x+l.tileID.wrap*h),L=x*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture?l.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.ak(l,1,v.transform.tileZoom),u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}const Hs=i.a6.mat4.create(),Oc=(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e)=>{const Ye=l.style.light,Je=Ye.properties.get("position"),ht=[Je.x,Je.y,Je.z],gt=i.a6.mat3.create();Ye.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(gt,-l.transform.angle),i.a6.vec3.transformMat3(ht,ht,gt));const ut=Ye.properties.get("color"),wt=l.transform,_t={u_matrix:v,u_lightpos:ht,u_lightintensity:Ye.properties.get("intensity"),u_lightcolor:[ut.r,ut.g,ut.b],u_vertical_gradient:+h,u_opacity:x,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Hs,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:E,u_edge_radius:L,u_width_scale:M,u_flood_light_color:Ce,u_vertical_scale:Ee,u_flood_light_intensity:Ge,u_ground_shadow_factor:$e};return wt.projection.name==="globe"&&(_t.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],_t.u_zoom_transition=ne,_t.u_inv_rot_matrix=xe,_t.u_merc_center=ae,_t.u_up_dir=wt.projection.upVector(new i.bP(0,0,0),ae[0]*i.ab,ae[1]*i.ab),_t.u_height_lift=X),_t},Xf=(v,l,h,x)=>({u_matrix:v,u_edge_radius:l,u_width_scale:h,u_vertical_scale:x}),jp=(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge)=>{const $e=Oc(v,l,h,x,E,L,M,q,ne,ae,xe,Ce,Ee,Ge,1,[0,0,0]),Ye={u_height_factor:-Math.pow(2,q.overscaledZ)/X.tileSize/8};return i.l($e,Di(l,X),Ye)},wh=(v,l)=>({u_matrix:v,u_emissive_strength:l}),bA=(v,l,h,x)=>i.l(wh(v,l),Di(h,x)),wA=(v,l,h)=>({u_matrix:v,u_world:h,u_emissive_strength:l}),of=(v,l,h,x,E)=>i.l(bA(v,l,h,x),{u_world:E}),cg=(v,l,h,x)=>{const E=i.ab/h.tileSize;return{u_matrix:v,u_camera_to_center_distance:l.getCameraToCenterDistance(x),u_extrude_scale:[l.pixelsToGLUnits[0]/E,l.pixelsToGLUnits[1]/E]}},CA=(v,l,h=1)=>({u_matrix:v,u_color:l.toRenderColor(null),u_overlay:0,u_overlay_scale:h}),SA=i.a6.mat4.create(),Mp=(v,l,h,x,E,L,M)=>{const q=v.transform,X=q.projection.name==="globe",ne=X?i.cI(q.zoom,l.canonical)*q._pixelsPerMercatorPixel:i.ak(h,1,L),ae={u_matrix:l.projMatrix,u_extrude_scale:ne,u_intensity:M,u_inv_rot_matrix:SA,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(X){ae.u_inv_rot_matrix=x,ae.u_merc_center=E,ae.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],ae.u_zoom_transition=i.a9(q.zoom);const xe=E[0]*i.ab,Ce=E[1]*i.ab;ae.u_up_dir=q.projection.upVector(new i.bP(0,0,0),xe,Ce)}return ae};function Cu(v,[l,h,x,E],[L,M]){if(L===M)return[0,0,0,0];const q=255*(v-1)/(v*(M-L));return[l*q,h*q,x*q,E*q]}function Yf(v,l,[h,x]){return h===x?0:.5/v+(l-h)*(v-1)/(v*(x-h))}const af=(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e,Ye,Je,ht,gt,ut)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:h,u_merc_matrix:x,u_grid_matrix:E,u_tl_parent:L,u_scale_parent:ne,u_fade_t:ae.mix,u_opacity:ae.opacity*xe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:xe.paint.get("raster-brightness-min"),u_brightness_high:xe.paint.get("raster-brightness-max"),u_saturation_factor:i.cJ(xe.paint.get("raster-saturation")),u_contrast_factor:i.cK(xe.paint.get("raster-contrast")),u_spin_weights:lf(xe.paint.get("raster-hue-rotate")),u_perspective_transform:Ce,u_raster_elevation:Ee,u_zoom_transition:M,u_merc_center:q,u_cutoff_params:X,u_colorization_mix:Cu(i.cL,$e,Je),u_colorization_offset:Yf(i.cL,Ye,Je),u_color_ramp:Ge,u_texture_offset:[gt/(ht+2*gt),ht/(ht+2*gt)],u_texture_res:[ht+2*gt,ht+2*gt],u_emissive_strength:ut});function lf(v){v*=Math.PI/180;const l=Math.sin(v),h=Math.cos(v);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const w=.05,I=(v,l,h,x,E,L,M,q,X,ne,ae,xe)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:h,u_merc_matrix:x,u_grid_matrix:E,u_tl_parent:L,u_scale_parent:ne,u_fade_t:ae.mix,u_opacity:ae.opacity,u_image0:0,u_image1:1,u_raster_elevation:xe,u_zoom_transition:M,u_merc_center:q,u_cutoff_params:X}),$=(v,l,h,x,E,L,M,q,X,ne)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_tile_offset:h,u_velocity:x,u_color_ramp:L,u_velocity_res:E,u_max_speed:M,u_uv_offset:q,u_data_scale:[255*X[0],255*X[1]],u_data_offset:ne,u_particle_pos_scale:1.1,u_particle_pos_offset:[w,w]}),ee=(v,l,h,x,E,L,M,q,X,ne)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_velocity:h,u_velocity_res:x,u_max_speed:E,u_speed_factor:L,u_reset_rate:M,u_rand_seed:Math.random(),u_uv_offset:q,u_data_scale:[255*X[0],255*X[1]],u_data_offset:ne,u_particle_pos_scale:1.1,u_particle_pos_offset:[w,w]}),ge=i.a6.mat4.create(),Se=(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e,Ye,Je,ht,gt,ut)=>{const wt=E.transform,_t={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:wt.getCameraToCenterDistance(ht),u_rotate_symbol:+h,u_aspect_ratio:wt.width/wt.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:L,u_label_plane_matrix:M,u_coord_matrix:q,u_is_text:+ne,u_elevation_from_sea:X?1:0,u_pitch_with_map:+x,u_texsize:ae,u_texsize_icon:xe,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ge,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ge,u_up_vector:[0,-1,0],u_color_adj_mat:gt,u_icon_transition:ut||0,u_gamma_scale:x?E.transform.getCameraToCenterDistance(ht)*Math.cos(E.terrain?0:E.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:+Ce};return ht.name==="globe"&&(_t.u_tile_id=[Ee.canonical.x,Ee.canonical.y,1<<Ee.canonical.z],_t.u_zoom_transition=Ge,_t.u_inv_rot_matrix=Ye,_t.u_merc_center=$e,_t.u_camera_forward=wt._camera.forward(),_t.u_ecef_origin=i.cM(wt.globeMatrix,Ee.toUnwrapped()),_t.u_tile_matrix=Float32Array.from(wt.globeMatrix),_t.u_up_vector=Je),_t},Le=(v,l,h,x)=>({u_matrix:v,u_emissive_strength:l,u_opacity:h,u_color:x}),Pe=(v,l,h,x,E,L,M,q,X)=>i.l(function(ne,ae,xe,Ce,Ee,Ge){const{width:$e,height:Ye}=Ce.imageManager.getPixelSize(ae),Je=Math.pow(2,Ge.tileID.overscaledZ),ht=Ge.tileSize*Math.pow(2,Ce.transform.tileZoom)/Je,gt=ht*(Ge.tileID.canonical.x+Ge.tileID.wrap*Je),ut=ht*Ge.tileID.canonical.y;return{u_image:0,u_pattern_tl:xe.tl,u_pattern_br:xe.br,u_texsize:[$e,Ye],u_pattern_size:xe.displaySize,u_pattern_units_to_pixels:Ee?[Ce.transform.width,-1*Ce.transform.height]:[1/i.ak(Ge,1,Ce.transform.tileZoom),1/i.ak(Ge,1,Ce.transform.tileZoom)],u_pixel_coord_upper:[gt>>16,ut>>16],u_pixel_coord_lower:[65535&gt,65535&ut]}}(0,L,M,x,q,X),{u_matrix:v,u_emissive_strength:l,u_opacity:h}),Me=new Float32Array(i.a6.mat4.identity([])),je=(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee=[0,0,0],Ge)=>{const $e=E.style.light,Ye=$e.properties.get("position"),Je=[-Ye.x,-Ye.y,Ye.z],ht=i.a6.mat3.create();$e.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(ht,-E.transform.angle),i.a6.vec3.transformMat3(Je,Je,ht));const gt=ae.alphaMode==="MASK",ut=$e.properties.get("color").toRenderColor(null),wt=Ce.paint.get("model-ambient-occlusion-intensity"),_t=Ce.paint.get("model-color").constantOr(i.bz.white).toRenderColor(null),Pt=Ce.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:v,u_lighting_matrix:l,u_normal_matrix:h,u_node_matrix:x||Me,u_lightpos:Je,u_lightintensity:$e.properties.get("intensity"),u_lightcolor:[ut.r,ut.g,ut.b],u_camera_pos:Ee,u_opacity:L,u_baseTextureIsAlpha:0,u_alphaMask:+gt,u_alphaCutoff:ae.alphaCutoff,u_baseColorFactor:[M.r,M.g,M.b,M.a],u_emissiveFactor:[q[0],q[1],q[2],1],u_metallicFactor:X,u_roughnessFactor:ne,u_baseColorTexture:so.BaseColor,u_metallicRoughnessTexture:so.MetallicRoughness,u_normalTexture:so.Normal,u_occlusionTexture:so.Occlusion,u_emissionTexture:so.Emission,u_lutTexture:so.LUT,u_color_mix:[_t.r,_t.g,_t.b,Pt],u_aoIntensity:wt,u_emissive_strength:xe,u_occlusionTextureTransform:Ge||[0,0,0,0]}},lt=(v,l=Me,h=Me)=>({u_matrix:v,u_instance:l,u_node_matrix:h}),It={fillExtrusion:v=>({u_matrix:new i.bF(v),u_lightpos:new i.bH(v),u_lightintensity:new i.bI(v),u_lightcolor:new i.bH(v),u_vertical_gradient:new i.bI(v),u_opacity:new i.bI(v),u_edge_radius:new i.bI(v),u_width_scale:new i.bI(v),u_ao:new i.bG(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_up_dir:new i.bH(v),u_height_lift:new i.bI(v),u_flood_light_color:new i.bH(v),u_vertical_scale:new i.bI(v),u_flood_light_intensity:new i.bI(v),u_ground_shadow_factor:new i.bH(v)}),fillExtrusionDepth:v=>({u_matrix:new i.bF(v),u_edge_radius:new i.bI(v),u_width_scale:new i.bI(v),u_vertical_scale:new i.bI(v)}),fillExtrusionPattern:v=>({u_matrix:new i.bF(v),u_lightpos:new i.bH(v),u_lightintensity:new i.bI(v),u_lightcolor:new i.bH(v),u_vertical_gradient:new i.bI(v),u_height_factor:new i.bI(v),u_edge_radius:new i.bI(v),u_width_scale:new i.bI(v),u_ao:new i.bG(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_up_dir:new i.bH(v),u_height_lift:new i.bI(v),u_image:new i.bJ(v),u_texsize:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_tile_units_to_pixels:new i.bI(v),u_opacity:new i.bI(v)}),fillExtrusionGroundEffect:v=>({u_matrix:new i.bF(v),u_opacity:new i.bI(v),u_ao_pass:new i.bI(v),u_meter_to_tile:new i.bI(v),u_ao:new i.bG(v),u_flood_light_intensity:new i.bI(v),u_flood_light_color:new i.bH(v),u_attenuation:new i.bI(v),u_edge_radius:new i.bI(v),u_fb:new i.bJ(v),u_fb_size:new i.bI(v),u_dynamic_offset:new i.bI(v)}),fill:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v)}),fillPattern:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_image:new i.bJ(v),u_texsize:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_tile_units_to_pixels:new i.bI(v)}),fillOutline:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_world:new i.bG(v)}),fillOutlinePattern:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_world:new i.bG(v),u_image:new i.bJ(v),u_texsize:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_tile_units_to_pixels:new i.bI(v)}),circle:i.cN,collisionBox:v=>({u_matrix:new i.bF(v),u_camera_to_center_distance:new i.bI(v),u_extrude_scale:new i.bG(v)}),collisionCircle:v=>({u_matrix:new i.bF(v),u_inv_matrix:new i.bF(v),u_camera_to_center_distance:new i.bI(v),u_viewport_size:new i.bG(v)}),debug:v=>({u_color:new i.cu(v),u_matrix:new i.bF(v),u_overlay:new i.bJ(v),u_overlay_scale:new i.bI(v)}),clippingMask:v=>({u_matrix:new i.bF(v)}),heatmap:v=>({u_extrude_scale:new i.bI(v),u_intensity:new i.bI(v),u_matrix:new i.bF(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_up_dir:new i.bH(v)}),heatmapTexture:v=>({u_image:new i.bJ(v),u_color_ramp:new i.bJ(v),u_opacity:new i.bI(v)}),hillshade:v=>({u_matrix:new i.bF(v),u_image:new i.bJ(v),u_latrange:new i.bG(v),u_light:new i.bG(v),u_shadow:new i.cu(v),u_highlight:new i.cu(v),u_emissive_strength:new i.bI(v),u_accent:new i.cu(v)}),hillshadePrepare:v=>({u_matrix:new i.bF(v),u_image:new i.bJ(v),u_dimension:new i.bG(v),u_zoom:new i.bI(v)}),line:i.cO,linePattern:i.cP,raster:v=>({u_matrix:new i.bF(v),u_normalize_matrix:new i.bF(v),u_globe_matrix:new i.bF(v),u_merc_matrix:new i.bF(v),u_grid_matrix:new i.cv(v),u_tl_parent:new i.bG(v),u_scale_parent:new i.bI(v),u_fade_t:new i.bI(v),u_opacity:new i.bI(v),u_image0:new i.bJ(v),u_image1:new i.bJ(v),u_brightness_low:new i.bI(v),u_brightness_high:new i.bI(v),u_saturation_factor:new i.bI(v),u_contrast_factor:new i.bI(v),u_spin_weights:new i.bH(v),u_perspective_transform:new i.bG(v),u_raster_elevation:new i.bI(v),u_zoom_transition:new i.bI(v),u_merc_center:new i.bG(v),u_cutoff_params:new i.c6(v),u_colorization_mix:new i.c6(v),u_colorization_offset:new i.bI(v),u_color_ramp:new i.bJ(v),u_texture_offset:new i.bG(v),u_texture_res:new i.bG(v),u_emissive_strength:new i.bI(v)}),rasterParticle:v=>({u_matrix:new i.bF(v),u_normalize_matrix:new i.bF(v),u_globe_matrix:new i.bF(v),u_merc_matrix:new i.bF(v),u_grid_matrix:new i.cv(v),u_tl_parent:new i.bG(v),u_scale_parent:new i.bI(v),u_fade_t:new i.bI(v),u_opacity:new i.bI(v),u_image0:new i.bJ(v),u_image1:new i.bJ(v),u_raster_elevation:new i.bI(v),u_zoom_transition:new i.bI(v),u_merc_center:new i.bG(v),u_cutoff_params:new i.c6(v)}),rasterParticleTexture:v=>({u_texture:new i.bJ(v),u_opacity:new i.bI(v)}),rasterParticleDraw:v=>({u_particle_texture:new i.bJ(v),u_particle_texture_side_len:new i.bI(v),u_tile_offset:new i.bG(v),u_velocity:new i.bJ(v),u_color_ramp:new i.bJ(v),u_velocity_res:new i.bG(v),u_max_speed:new i.bI(v),u_uv_offset:new i.bG(v),u_data_scale:new i.bG(v),u_data_offset:new i.bI(v),u_particle_pos_scale:new i.bI(v),u_particle_pos_offset:new i.bG(v)}),rasterParticleUpdate:v=>({u_particle_texture:new i.bJ(v),u_particle_texture_side_len:new i.bI(v),u_velocity:new i.bJ(v),u_velocity_res:new i.bG(v),u_max_speed:new i.bI(v),u_speed_factor:new i.bI(v),u_reset_rate:new i.bI(v),u_rand_seed:new i.bI(v),u_uv_offset:new i.bG(v),u_data_scale:new i.bG(v),u_data_offset:new i.bI(v),u_particle_pos_scale:new i.bI(v),u_particle_pos_offset:new i.bG(v)}),symbol:v=>({u_is_size_zoom_constant:new i.bJ(v),u_is_size_feature_constant:new i.bJ(v),u_size_t:new i.bI(v),u_size:new i.bI(v),u_camera_to_center_distance:new i.bI(v),u_rotate_symbol:new i.bJ(v),u_aspect_ratio:new i.bI(v),u_fade_change:new i.bI(v),u_matrix:new i.bF(v),u_label_plane_matrix:new i.bF(v),u_coord_matrix:new i.bF(v),u_is_text:new i.bJ(v),u_elevation_from_sea:new i.bJ(v),u_pitch_with_map:new i.bJ(v),u_texsize:new i.bG(v),u_texsize_icon:new i.bG(v),u_texture:new i.bJ(v),u_texture_icon:new i.bJ(v),u_gamma_scale:new i.bI(v),u_device_pixel_ratio:new i.bI(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_camera_forward:new i.bH(v),u_tile_matrix:new i.bF(v),u_up_vector:new i.bH(v),u_ecef_origin:new i.bH(v),u_is_halo:new i.bJ(v),u_icon_transition:new i.bI(v),u_color_adj_mat:new i.bF(v)}),background:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_opacity:new i.bI(v),u_color:new i.cu(v)}),backgroundPattern:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_opacity:new i.bI(v),u_image:new i.bJ(v),u_pattern_tl:new i.bG(v),u_pattern_br:new i.bG(v),u_texsize:new i.bG(v),u_pattern_size:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_pattern_units_to_pixels:new i.bG(v)}),terrainRaster:v=>({u_matrix:new i.bF(v),u_image0:new i.bJ(v),u_skirt_height:new i.bI(v),u_ground_shadow_factor:new i.bH(v)}),skybox:v=>({u_matrix:new i.bF(v),u_sun_direction:new i.bH(v),u_cubemap:new i.bJ(v),u_opacity:new i.bI(v),u_temporal_offset:new i.bI(v)}),skyboxGradient:v=>({u_matrix:new i.bF(v),u_color_ramp:new i.bJ(v),u_center_direction:new i.bH(v),u_radius:new i.bI(v),u_opacity:new i.bI(v),u_temporal_offset:new i.bI(v)}),skyboxCapture:v=>({u_matrix_3f:new i.cv(v),u_sun_direction:new i.bH(v),u_sun_intensity:new i.bI(v),u_color_tint_r:new i.c6(v),u_color_tint_m:new i.c6(v),u_luminance:new i.bI(v)}),globeRaster:v=>({u_proj_matrix:new i.bF(v),u_globe_matrix:new i.bF(v),u_normalize_matrix:new i.bF(v),u_merc_matrix:new i.bF(v),u_zoom_transition:new i.bI(v),u_merc_center:new i.bG(v),u_image0:new i.bJ(v),u_grid_matrix:new i.cv(v),u_skirt_height:new i.bI(v),u_far_z_cutoff:new i.bI(v),u_frustum_tl:new i.bH(v),u_frustum_tr:new i.bH(v),u_frustum_br:new i.bH(v),u_frustum_bl:new i.bH(v),u_globe_pos:new i.bH(v),u_globe_radius:new i.bI(v),u_viewport:new i.bG(v)}),globeAtmosphere:v=>({u_frustum_tl:new i.bH(v),u_frustum_tr:new i.bH(v),u_frustum_br:new i.bH(v),u_frustum_bl:new i.bH(v),u_horizon:new i.bI(v),u_transition:new i.bI(v),u_fadeout_range:new i.bI(v),u_color:new i.c6(v),u_high_color:new i.c6(v),u_space_color:new i.c6(v),u_temporal_offset:new i.bI(v),u_horizon_angle:new i.bI(v)}),model:v=>({u_matrix:new i.bF(v),u_lighting_matrix:new i.bF(v),u_normal_matrix:new i.bF(v),u_node_matrix:new i.bF(v),u_lightpos:new i.bH(v),u_lightintensity:new i.bI(v),u_lightcolor:new i.bH(v),u_camera_pos:new i.bH(v),u_opacity:new i.bI(v),u_baseColorFactor:new i.c6(v),u_emissiveFactor:new i.c6(v),u_metallicFactor:new i.bI(v),u_roughnessFactor:new i.bI(v),u_baseTextureIsAlpha:new i.bJ(v),u_alphaMask:new i.bJ(v),u_alphaCutoff:new i.bI(v),u_baseColorTexture:new i.bJ(v),u_metallicRoughnessTexture:new i.bJ(v),u_normalTexture:new i.bJ(v),u_occlusionTexture:new i.bJ(v),u_emissionTexture:new i.bJ(v),u_lutTexture:new i.bJ(v),u_color_mix:new i.c6(v),u_aoIntensity:new i.bI(v),u_emissive_strength:new i.bI(v),u_occlusionTextureTransform:new i.c6(v)}),modelDepth:v=>({u_matrix:new i.bF(v),u_instance:new i.bF(v),u_node_matrix:new i.bF(v)}),groundShadow:v=>({u_matrix:new i.bF(v),u_ground_shadow_factor:new i.bH(v)}),stars:v=>({u_matrix:new i.bF(v),u_up:new i.bH(v),u_right:new i.bH(v),u_intensity_multiplier:new i.bI(v)}),occlusion:v=>({u_matrix:new i.bF(v),u_anchorPos:new i.bH(v),u_screenSizePx:new i.bG(v),u_occluderSizePx:new i.bG(v),u_color:new i.c6(v)})};class Bt{constructor(l,h,x,E){this.id=Bt.uniqueIdxCounter,Bt.uniqueIdxCounter++,this.context=l;const L=l.gl;this.buffer=L.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),L.bufferData(L.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||E||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){this.id=Bt.uniqueIdxCounter,Bt.uniqueIdxCounter++;const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Bt.uniqueIdxCounter=0;const xt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ft{constructor(l,h,x,E,L,M){this.length=h.length,this.attributes=x,this.itemSize=h.bytesPerElement,this.dynamicDraw=E,this.instanceCount=M,this.context=l;const q=l.gl;this.buffer=q.createBuffer(),l.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||L||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let x=0;x<this.attributes.length;x++){const E=h.attributes[this.attributes[x].name];E!==void 0&&l.enableVertexAttribArray(E)}}setVertexAttribPointers(l,h,x){for(let E=0;E<this.attributes.length;E++){const L=this.attributes[E],M=h.attributes[L.name];M!==void 0&&l.vertexAttribPointer(M,L.components,l[xt[L.type]],!1,this.itemSize,L.offset+this.itemSize*(x||0))}}setVertexAttribDivisor(l,h,x){for(let E=0;E<this.attributes.length;E++){const L=h.attributes[this.attributes[E].name];L!==void 0&&this.instanceCount&&this.instanceCount>0&&l.vertexAttribDivisor(L,x)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Qt{constructor(l,h,x,E,L){this.context=l,this.width=h,this.height=x;const M=this.framebuffer=l.gl.createFramebuffer();E&&(this.colorAttachment=new ad(l,M)),L&&(this.depthAttachmentType=L,this.depthAttachment=L==="renderbuffer"?new zo(l,M):new qf(l,M))}destroy(){const l=this.context.gl;if(this.colorAttachment){const h=this.colorAttachment.get();h&&l.deleteTexture(h)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const h=this.depthAttachment.get();h&&l.deleteRenderbuffer(h)}else{const h=this.depthAttachment.get();h&&l.deleteTexture(h)}l.deleteFramebuffer(this.framebuffer)}}class ct{constructor(l,h){this.gl=l,this.clearColor=new qs(this),this.clearDepth=new sl(this),this.clearStencil=new ac(this),this.colorMask=new ol(this),this.depthMask=new $a(this),this.stencilMask=new jc(this),this.stencilFunc=new lc(this),this.stencilOp=new oo(this),this.stencilTest=new Qs(this),this.depthRange=new cc(this),this.depthTest=new Mc(this),this.depthFunc=new _u(this),this.blend=new Sc(this),this.blendFunc=new iu(this),this.blendColor=new id(this),this.blendEquation=new eh(this),this.cullFace=new sd(this),this.cullFaceSide=new Cd(this),this.frontFace=new bu(this),this.program=new th(this),this.activeTexture=new kc(this),this.viewport=new Sd(this),this.bindFramebuffer=new vh(this),this.bindRenderbuffer=new Wl(this),this.bindTexture=new sf(this),this.bindVertexBuffer=new xh(this),this.bindElementBuffer=new _h(this),this.bindVertexArrayOES=new bh(this),this.pixelStoreUnpack=new od(this),this.pixelStoreUnpackPremultiplyAlpha=new wu(this),this.pixelStoreUnpackFlipY=new Dc(this),this.options=h?{...h}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=l.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),this.maxPointSize=l.getParameter(l.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h,x){return new Bt(this,l,h,x)}createVertexBuffer(l,h,x,E,L){return new Ft(this,l,h,x,E,L)}createRenderbuffer(l,h,x){const E=this.gl,L=E.createRenderbuffer();return this.bindRenderbuffer.set(L),E.renderbufferStorage(E.RENDERBUFFER,l,h,x),this.bindRenderbuffer.set(null),L}createFramebuffer(l,h,x,E){return new Qt(this,l,h,x,E)}clear({color:l,depth:h,stencil:x,colorMask:E}){const L=this.gl;let M=0;l&&(M|=L.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set(E||[!0,!0,!0,!0])),h!==void 0&&(M|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),x!==void 0&&(M|=L.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),L.clear(M)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){i.bh(l.blendFunction,qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor),l.blendEquation?this.blendEquation.set(l.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(l.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let mt;function lr(v,l,h,x,E,L,M){const q=v.context,X=q.gl,ne=v.transform,ae=v.getOrCreateProgram("collisionBox"),xe=[];let Ce=0,Ee=0;for(let ut=0;ut<x.length;ut++){const wt=x[ut],_t=l.getTile(wt),Pt=_t.getBucket(h);if(!Pt)continue;const Tt=vo(wt,Pt,ne);let jt=Tt;E[0]===0&&E[1]===0||(jt=v.translatePosMatrix(Tt,_t,E,L));const Vt=M?Pt.textCollisionBox:Pt.iconCollisionBox,Ut=Pt.collisionCircleArray;if(Ut.length>0){const Ot=i.a6.mat4.create(),sr=jt;i.a6.mat4.mul(Ot,Pt.placementInvProjMatrix,ne.glCoordMatrix),i.a6.mat4.mul(Ot,Ot,Pt.placementViewportMatrix),xe.push({circleArray:Ut,circleOffset:Ee,transform:sr,invTransform:Ot,projection:Pt.getProjection()}),Ce+=Ut.length/4,Ee=Ce}Vt&&(v.terrain&&v.terrain.setupElevationDraw(_t,ae),ae.draw(v,X.LINES,Dr.disabled,gn.disabled,v.colorModeForRenderPass(),vn.disabled,cg(jt,ne,_t,Pt.getProjection()),h.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,null,ne.zoom,null,[Vt.collisionVertexBuffer,Vt.collisionVertexBufferExt]))}if(!M||!xe.length)return;const Ge=v.getOrCreateProgram("collisionCircle"),$e=new i.cQ;$e.resize(4*Ce),$e._trim();let Ye=0;for(const ut of xe)for(let wt=0;wt<ut.circleArray.length/4;wt++){const _t=4*wt,Pt=ut.circleArray[_t+0],Tt=ut.circleArray[_t+1],jt=ut.circleArray[_t+2],Vt=ut.circleArray[_t+3];$e.emplace(Ye++,Pt,Tt,jt,Vt,0),$e.emplace(Ye++,Pt,Tt,jt,Vt,1),$e.emplace(Ye++,Pt,Tt,jt,Vt,2),$e.emplace(Ye++,Pt,Tt,jt,Vt,3)}(!mt||mt.length<2*Ce)&&(mt=function(ut){const wt=2*ut,_t=new i.aO;_t.resize(wt),_t._trim();for(let Pt=0;Pt<wt;Pt++){const Tt=6*Pt;_t.uint16[Tt+0]=4*Pt+0,_t.uint16[Tt+1]=4*Pt+1,_t.uint16[Tt+2]=4*Pt+2,_t.uint16[Tt+3]=4*Pt+2,_t.uint16[Tt+4]=4*Pt+3,_t.uint16[Tt+5]=4*Pt+0}return _t}(Ce));const Je=q.createIndexBuffer(mt,!0),ht=q.createVertexBuffer($e,i.cR.members,!0);for(const ut of xe){const wt={u_matrix:ut.transform,u_inv_matrix:ut.invTransform,u_camera_to_center_distance:(gt=ne).getCameraToCenterDistance(ut.projection),u_viewport_size:[gt.width,gt.height]};Ge.draw(v,X.TRIANGLES,Dr.disabled,gn.disabled,v.colorModeForRenderPass(),vn.disabled,wt,h.id,ht,Je,i.b1.simpleSegment(0,2*ut.circleOffset,ut.circleArray.length,ut.circleArray.length/2),null,ne.zoom)}var gt;ht.destroy(),Je.destroy()}const mr=i.a6.mat4.create();function dr(v){const l=v._camera.getWorldToCamera(v.worldSize,1),h=i.a6.mat4.multiply([],l,v.globeMatrix);i.a6.mat4.invert(h,h);const x=[0,0,0],E=[0,1,0,0];return i.a6.vec4.transformMat4(E,E,h),x[0]=E[0],x[1]=E[1],x[2]=E[2],i.a6.vec3.normalize(x,x),x}function Xr({width:v,height:l,anchor:h,textOffset:x,textScale:E},L){const{horizontalAlign:M,verticalAlign:q}=i.bx(h),X=-(M-.5)*v,ne=-(q-.5)*l,ae=i.bw(h,x);return new i.P((X/E+ae[0])*L,(ne/E+ae[1])*L)}function Or(v,l,h,x,E,L,M,q,X,ne,ae){const xe=v.text.placedSymbolArray,Ce=v.text.dynamicLayoutVertexArray,Ee=v.icon.dynamicLayoutVertexArray,Ge={},$e=v.getProjection(),Ye=fa(q,$e,L),Je=L.elevation,ht=$e.upVectorScale(q.canonical,L.center.lat,L.worldSize).metersToTile;Ce.clear();for(let gt=0;gt<xe.length;gt++){const ut=xe.get(gt),{tileAnchorX:wt,tileAnchorY:_t,numGlyphs:Pt}=ut,Tt=ut.hidden||!ut.crossTileID||v.allowVerticalPlacement&&!ut.placedOrientation?null:x[ut.crossTileID];if(Tt){let jt=0,Vt=0,Ut=0;if(Je){const Er=Je?Je.getAtTileOffset(q,wt,_t):0,[en,nn,kr]=$e.upVector(q.canonical,wt,_t);jt=Er*en*ht,Vt=Er*nn*ht,Ut=Er*kr*ht}let[Ot,sr,Cr,Rr]=Ms(ut.projectedAnchorX+jt,ut.projectedAnchorY+Vt,ut.projectedAnchorZ+Ut,h?Ye:M);const wr=hi(L.getCameraToCenterDistance($e),Rr);let Jr=E.evaluateSizeForFeature(v.textSizeData,ne,ut)*wr/i.bq;h&&(Jr*=v.tilePixelRatio/X);const or=Xr(Tt,Jr);h?({x:Ot,y:sr,z:Cr}=$e.projectTilePoint(wt+or.x,_t+or.y,q.canonical),[Ot,sr,Cr]=Ms(Ot+jt,sr+Vt,Cr+Ut,M)):(l&&or._rotate(-L.angle),Ot+=or.x,sr+=or.y,Cr=0);const Fr=v.allowVerticalPlacement&&ut.placedOrientation===i.bk.vertical?Math.PI/2:0;for(let Er=0;Er<Pt;Er++)i.bn(Ce,Ot,sr,Cr,Fr);ae&&ut.associatedIconIndex>=0&&(Ge[ut.associatedIconIndex]={x:Ot,y:sr,z:Cr,angle:Fr})}else ja(Pt,Ce)}if(ae){Ee.clear();const gt=v.icon.placedSymbolArray;for(let ut=0;ut<gt.length;ut++){const wt=gt.get(ut),{numGlyphs:_t}=wt,Pt=Ge[ut];if(wt.hidden||!Pt)ja(_t,Ee);else{const{x:Tt,y:jt,z:Vt,angle:Ut}=Pt;for(let Ot=0;Ot<_t;Ot++)i.bn(Ee,Tt,jt,Vt,Ut)}}v.icon.dynamicLayoutVertexBuffer.updateData(Ee)}v.text.dynamicLayoutVertexBuffer.updateData(Ce)}function bn(v,l,h,x,E,L,M={}){const q=h.paint.get("icon-translate"),X=h.paint.get("text-translate"),ne=h.paint.get("icon-translate-anchor"),ae=h.paint.get("text-translate-anchor"),xe=h.layout.get("icon-rotation-alignment"),Ce=h.layout.get("text-rotation-alignment"),Ee=h.layout.get("icon-pitch-alignment"),Ge=h.layout.get("text-pitch-alignment"),$e=h.layout.get("icon-keep-upright"),Ye=h.layout.get("text-keep-upright"),Je=h.paint.get("icon-color-saturation"),ht=h.paint.get("icon-color-contrast"),gt=h.paint.get("icon-color-brightness-min"),ut=h.paint.get("icon-color-brightness-max"),wt=h.paint.get("symbol-elevation-reference")==="sea",_t=h.paint.get("text-occlusion-opacity").constantOr(0),Pt=v.context,Tt=Pt.gl,jt=v.transform,Vt=xe==="map",Ut=Ce==="map",Ot=Ee==="map",sr=Ge==="map",Cr=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Rr=!1;const wr=v.depthModeForSublayer(0,Dr.ReadOnly),Jr=[i.am(jt.center.lng),i.at(jt.center.lat)],or=h.layout.get("text-variable-anchor"),Fr=jt.projection.name==="globe",Er=[],en=[0,-1,0];for(const nn of x){const kr=l.getTile(nn),Hr=kr.getBucket(h);if(!Hr||Hr.projection.name==="mercator"&&Fr||Hr.fullyClipped)continue;const Yn=Hr.projection.name==="globe",dn=Yn?i.a9(jt.zoom):0,Nn=fa(nn,Hr.getProjection(),jt),ai=jt.calculatePixelsToTileUnitsMatrix(kr),zn=or&&Hr.hasTextData(),ii=Hr.hasIconTextFit()&&zn&&Hr.hasIconData(),Hi=Hr.getProjection().createInversionMatrix(jt,nn.canonical),ki=ro=>{jt.depthOcclusionForSymbolsAndCircles&&(h.hasInitialOcclusionOpacityProperties||v.terrain)&&(ro.push("DEPTH_D24"),ro.push("DEPTH_OCCLUSION"))},Ks=()=>{const ro=Vt&&h.layout.get("symbol-placement")!=="point",Oi=[];ki(Oi);const Ts=ro||ii,Vs=h.paint.get("icon-image-cross-fade").constantOr(0);v.terrainRenderModeElevated()&&Ot&&Oi.push("PITCH_WITH_MAP_TERRAIN"),Yn&&(Oi.push("PROJECTION_GLOBE_VIEW"),Ts&&Oi.push("PROJECTED_POS_ON_VIEWPORT")),Vs>0&&Oi.push("ICON_TRANSITION"),Hr.icon.zOffsetVertexBuffer&&Oi.push("Z_OFFSET"),Je===0&&ht===0&&gt===0&&ut===1||Oi.push("COLOR_ADJUSTMENT"),Hr.sdfIcons&&Oi.push("RENDER_SDF");const Ia=Hr.icon.programConfigurations.get(h.id),Ya=v.getOrCreateProgram("symbol",{config:Ia,defines:Oi}),fs=kr.imageAtlasTexture?kr.imageAtlasTexture.size:[0,0],Il=Hr.iconSizeData,Xl=i.bj(Il,jt.zoom),Nl=Ot||jt.pitch!==0,Io=Zn(Nn,kr.tileID.canonical,Ot,Vt,jt,Hr.getProjection(),ai),cu=ha(Nn,kr.tileID.canonical,Ot,Vt,jt,Hr.getProjection(),ai),uu=v.translatePosMatrix(cu,kr,q,ne,!0),Fd=v.translatePosMatrix(Nn,kr,q,ne),pd=Ts?mr:Io,Fu=Vt&&!Ot&&!ro;let Pd=en;!Fr&&!jt.mercatorFromTransition||Vt||(Pd=dr(jt));const pf=Yn?Pd:en,ep=h.getColorAdjustmentMatrix(Je,ht,gt,ut),Mh=Se(Il.kind,Xl,Fu,Ot,v,Fd,pd,uu,wt,!1,fs,[0,0],!0,nn,dn,Jr,Hi,pf,Hr.getProjection(),ep,Vs),LA=kr.imageAtlasTexture?kr.imageAtlasTexture:null,IA=h.layout.get("icon-size").constantOr(0)!==1||Hr.iconsNeedLinear,U0=Hr.sdfIcons||v.options.rotating||v.options.zooming||IA||Nl?Tt.LINEAR:Tt.NEAREST,NA=Hr.sdfIcons&&h.paint.get("icon-halo-width").constantOr(1)!==0,No=v.terrain&&Ot&&ro?i.a6.mat4.invert(i.a6.mat4.create(),Io):mr;if(ro&&Hr.icon){const Rp=jt.elevation,TS=Rp?Rp.getAtTileOffsetFunc(nn,jt.center.lat,jt.worldSize,Hr.getProjection()):null,Ob=Ni(Nn,kr.tileID.canonical,Ot,Vt,jt,Hr.getProjection(),ai);zl(Hr,Nn,v,!1,Ob,cu,Ot,$e,TS,nn)}return{program:Ya,buffers:Hr.icon,uniformValues:Mh,atlasTexture:LA,atlasTextureIcon:null,atlasInterpolation:U0,atlasInterpolationIcon:null,isSDF:Hr.sdfIcons,hasHalo:NA,tile:kr,labelPlaneMatrixInv:No}},fo=()=>{const ro=Ut&&h.layout.get("symbol-placement")!=="point",Oi=[],Ts=ro||or||ii;v.terrainRenderModeElevated()&&sr&&Oi.push("PITCH_WITH_MAP_TERRAIN"),Yn&&(Oi.push("PROJECTION_GLOBE_VIEW"),Ts&&Oi.push("PROJECTED_POS_ON_VIEWPORT")),Hr.text.zOffsetVertexBuffer&&Oi.push("Z_OFFSET"),Hr.iconsInText&&Oi.push("RENDER_TEXT_AND_SYMBOL"),Oi.push("RENDER_SDF"),ki(Oi);const Vs=Hr.text.programConfigurations.get(h.id),Ia=v.getOrCreateProgram("symbol",{config:Vs,defines:Oi});let Ya,fs=[0,0],Il=null;const Xl=Hr.textSizeData;Hr.iconsInText&&(fs=kr.imageAtlasTexture?kr.imageAtlasTexture.size:[0,0],Il=kr.imageAtlasTexture?kr.imageAtlasTexture:null,Ya=sr||jt.pitch!==0||v.options.rotating||v.options.zooming||Xl.kind==="composite"||Xl.kind==="camera"?Tt.LINEAR:Tt.NEAREST);const Nl=kr.glyphAtlasTexture?kr.glyphAtlasTexture.size:[0,0],Io=i.bj(Xl,jt.zoom),cu=Zn(Nn,kr.tileID.canonical,sr,Ut,jt,Hr.getProjection(),ai),uu=ha(Nn,kr.tileID.canonical,sr,Ut,jt,Hr.getProjection(),ai),Fd=v.translatePosMatrix(uu,kr,X,ae,!0),pd=v.translatePosMatrix(Nn,kr,X,ae),Fu=Ts?mr:cu,Pd=Ut&&!sr&&!ro;let pf=en;!Fr&&!jt.mercatorFromTransition||Ut||(pf=dr(jt));const ep=Se(Xl.kind,Io,Pd,sr,v,pd,Fu,Fd,wt,!0,Nl,fs,!0,nn,dn,Jr,Hi,Yn?pf:en,Hr.getProjection(),_t),Mh=kr.glyphAtlasTexture?kr.glyphAtlasTexture:null,LA=Tt.LINEAR,IA=h.paint.get("text-halo-width").constantOr(1)!==0,U0=v.terrain&&sr&&ro?i.a6.mat4.invert(i.a6.mat4.create(),cu):mr;if(ro&&Hr.text){const NA=jt.elevation,No=NA?NA.getAtTileOffsetFunc(nn,jt.center.lat,jt.worldSize,Hr.getProjection()):null,Rp=Ni(Nn,kr.tileID.canonical,sr,Ut,jt,Hr.getProjection(),ai);zl(Hr,Nn,v,!0,Rp,uu,sr,Ye,No,nn)}return{program:Ia,buffers:Hr.text,uniformValues:ep,atlasTexture:Mh,atlasTextureIcon:Il,atlasInterpolation:LA,atlasInterpolationIcon:Ya,isSDF:!0,hasHalo:IA,tile:kr,labelPlaneMatrixInv:U0}},Do=Hr.icon.segments.get().length,Nd=Hr.text.segments.get().length,Xa=Do&&!M.onlyText?Ks():null,ts=Nd&&!M.onlyIcons?fo():null,ao=h.paint.get("icon-opacity").constantOr(1),ia=h.paint.get("text-opacity").constantOr(1);if(Cr&&Hr.canOverlap){Rr=!0;const ro=ao&&!M.onlyText?Hr.icon.segments.get():[],Oi=ia&&!M.onlyIcons?Hr.text.segments.get():[];for(const Ts of ro)Er.push({segments:new i.b1([Ts]),sortKey:Ts.sortKey,state:Xa});for(const Ts of Oi)Er.push({segments:new i.b1([Ts]),sortKey:Ts.sortKey,state:ts})}else M.onlyText||Er.push({segments:ao?Hr.icon.segments:new i.b1([]),sortKey:0,state:Xa}),M.onlyIcons||Er.push({segments:ia?Hr.text.segments:new i.b1([]),sortKey:0,state:ts})}Rr&&Er.sort((nn,kr)=>nn.sortKey-kr.sortKey);for(const nn of Er){const kr=nn.state;if(kr)if(v.terrain?v.terrain.setupElevationDraw(kr.tile,kr.program,{useDepthForOcclusion:jt.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:kr.labelPlaneMatrixInv}):v.setupDepthForOcclusion(jt.depthOcclusionForSymbolsAndCircles,kr.program),Pt.activeTexture.set(Tt.TEXTURE0),kr.atlasTexture&&kr.atlasTexture.bind(kr.atlasInterpolation,Tt.CLAMP_TO_EDGE,!0),kr.atlasTextureIcon&&(Pt.activeTexture.set(Tt.TEXTURE1),kr.atlasTextureIcon&&kr.atlasTextureIcon.bind(kr.atlasInterpolationIcon,Tt.CLAMP_TO_EDGE,!0)),v.uploadCommonLightUniforms(v.context,kr.program),kr.hasHalo){const Hr=kr.uniformValues;Hr.u_is_halo=1,zr(kr.buffers,nn.segments,h,v,kr.program,wr,E,L,Hr,2),Hr.u_is_halo=0}else{if(kr.isSDF){const Hr=kr.uniformValues;kr.hasHalo&&(Hr.u_is_halo=1,zr(kr.buffers,nn.segments,h,v,kr.program,wr,E,L,Hr,1)),Hr.u_is_halo=0}zr(kr.buffers,nn.segments,h,v,kr.program,wr,E,L,kr.uniformValues,1)}}}function zr(v,l,h,x,E,L,M,q,X,ne){const ae=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.iconTransitioningVertexBuffer,v.globeExtVertexBuffer,v.zOffsetVertexBuffer];E.draw(x,x.context.gl.TRIANGLES,L,M,q,vn.disabled,X,h.id,v.layoutVertexBuffer,v.indexBuffer,l,h.paint,x.transform.zoom,v.programConfigurations.get(h.id),ae,ne)}function ci(v,l,h,x,E,L,M){const q=v.context.gl,X=h.paint.get("fill-pattern"),ne=h.is3D(),ae=ne?v.stencilModeFor3D():gn.disabled,xe=X&&X.constantOr(1);let Ce,Ee,Ge,$e,Ye;M?(Ee=xe&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ce=q.LINES):(Ee=xe?"fillPattern":"fill",Ce=q.TRIANGLES);for(const Je of x){const ht=l.getTile(Je);if(xe&&!ht.patternsLoaded())continue;const gt=ht.getBucket(h);if(!gt)continue;v.prepareDrawTile();const ut=gt.programConfigurations.get(h.id),wt=v.isTileAffectedByFog(Je),_t=v.getOrCreateProgram(Ee,{config:ut,overrideFog:wt});xe&&(v.context.activeTexture.set(q.TEXTURE0),ht.imageAtlasTexture&&ht.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ut.updatePaintBuffers());const Pt=X.constantOr(null);if(Pt&&ht.imageAtlas){const Vt=ht.imageAtlas.patternPositions[Pt.toString()];Vt&&ut.setConstantPatternPositions(Vt)}const Tt=v.translatePosMatrix(Je.projMatrix,ht,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor")),jt=h.paint.get("fill-emissive-strength");if(M){$e=gt.indexBuffer2,Ye=gt.segments2;const Vt=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[q.drawingBufferWidth,q.drawingBufferHeight];Ge=Ee==="fillOutlinePattern"&&xe?of(Tt,jt,v,ht,Vt):wA(Tt,jt,Vt)}else $e=gt.indexBuffer,Ye=gt.segments,Ge=xe?bA(Tt,jt,v,ht):wh(Tt,jt);v.uploadCommonUniforms(v.context,_t,Je.toUnwrapped()),_t.draw(v,Ce,E,ne?ae:v.stencilModeForClipping(Je),L,vn.disabled,Ge,h.id,gt.layoutVertexBuffer,$e,Ye,h.paint,v.transform.zoom,ut,void 0)}}function fi(v,l,h,x,E,L,M,q){h.resetLayerRenderingStats(v);const X=v.context,ne=X.gl,ae=v.transform,xe=h.paint.get("fill-extrusion-pattern"),Ce=xe.constantOr(1),Ee=h.paint.get("fill-extrusion-opacity"),Ge=v.style.enable3dLights(),$e=h.paint.get(Ge&&!Ce?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Ye=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),$e],Je=h.layout.get("fill-extrusion-edge-radius"),ht=Je>0&&!h.paint.get("fill-extrusion-rounded-roof"),gt=ht?0:Je,ut=ae.projection.name==="globe"?i.c_():0,wt=ae.projection.name==="globe",_t=wt?i.a9(ae.zoom):0,Pt=[i.am(ae.center.lng),i.at(ae.center.lat)],Tt=h.paint.get("fill-extrusion-flood-light-color").toRenderColor(h.lut).toArray01().slice(0,3),jt=h.paint.get("fill-extrusion-flood-light-intensity"),Vt=h.paint.get("fill-extrusion-vertical-scale"),Ut=h.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Ot=Ki(v,h.paint.get("fill-extrusion-cutoff-fade-range")),sr=[];let Cr;wt&&sr.push("PROJECTION_GLOBE_VIEW"),Ye[0]>0&&sr.push("FAUX_AO"),ht&&sr.push("ZERO_ROOF_RADIUS"),q&&sr.push("HAS_CENTROID"),jt>0&&sr.push("FLOOD_LIGHT"),Ot.shouldRenderCutoff&&sr.push("RENDER_CUTOFF"),Ut&&sr.push("RENDER_WALL_MODE");const Rr=v.renderPass==="shadow",wr=v.shadowRenderer,Jr=Rr&&!!wr;v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!0);let or=[0,0,0];if(wr){const en=v.style.directionalLight,nn=v.style.ambientLight;en&&nn&&(or=yl(v.style,en,nn)),Cr=sr.concat(["SHADOWS_SINGLE_CASCADE"])}const Fr=Jr?"fillExtrusionDepth":Ce?"fillExtrusionPattern":"fillExtrusion",Er=h.getLayerRenderingStats();for(const en of x){const nn=l.getTile(en),kr=nn.getBucket(h);if(!kr||kr.projection.name!==ae.projection.name)continue;let Hr=!1;wr&&(Hr=wr.getMaxCascadeForTile(en.toUnwrapped())===0);const Yn=v.isTileAffectedByFog(en),dn=kr.programConfigurations.get(h.id),Nn=v.getOrCreateProgram(Fr,{config:dn,defines:Hr?Cr:sr,overrideFog:Yn});if(v.terrain&&v.terrain.setupElevationDraw(nn,Nn,{useMeterToDem:!0}),!kr.centroidVertexBuffer){const fo=Nn.attributes.a_centroid_pos;fo!==void 0&&ne.vertexAttrib2f(fo,0,0)}!Rr&&wr&&wr.setupShadows(nn.tileID.toUnwrapped(),Nn,"vector-tile",nn.tileID.overscaledZ),Ce&&(v.context.activeTexture.set(ne.TEXTURE0),nn.imageAtlasTexture&&nn.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),dn.updatePaintBuffers());const ai=xe.constantOr(null);if(ai&&nn.imageAtlas){const fo=nn.imageAtlas.patternPositions[ai.toString()];fo&&dn.setConstantPatternPositions(fo)}const zn=h.paint.get("fill-extrusion-vertical-gradient"),ii=1/kr.tileToMeter;let Hi;if(Rr&&wr){if(gs(nn.tileID,kr,v))continue;const fo=wr.calculateShadowPassMatrixFromTile(nn.tileID.toUnwrapped());Hi=Xf(fo,gt,ii,Vt)}else{const fo=v.translatePosMatrix(en.expandedProjMatrix,nn,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Do=ae.projection.createInversionMatrix(ae,en.canonical);Hi=Ce?jp(fo,v,zn,Ee,Ye,gt,ii,en,nn,ut,_t,Pt,Do,Tt,Vt):Oc(fo,v,zn,Ee,Ye,gt,ii,en,ut,_t,Pt,Do,Tt,Vt,jt,or)}v.uploadCommonUniforms(X,Nn,en.toUnwrapped(),null,Ot);let ki=kr.segments;if(ae.projection.name==="mercator"&&!Rr&&(ki=kr.getVisibleSegments(nn.tileID,v.terrain,v.transform.getFrustum(0)),!ki.get().length))continue;if(Er)if(Rr)for(const fo of ki.get())Er.numRenderedVerticesInShadowPass+=fo.primitiveLength;else for(const fo of ki.get())Er.numRenderedVerticesInTransparentPass+=fo.primitiveLength;const Ks=[];(v.terrain||q)&&Ks.push(kr.centroidVertexBuffer),wt&&Ks.push(kr.layoutVertexExtBuffer),Ut&&Ks.push(kr.wallVertexBuffer),Nn.draw(v,X.gl.TRIANGLES,E,L,M,vn.backCCW,Hi,h.id,kr.layoutVertexBuffer,kr.indexBuffer,ki,h.paint,v.transform.zoom,dn,Ks)}v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!1)}function $n(v,l,h,x,E,L,M,q,X,ne,ae,xe,Ce,Ee,Ge,$e,Ye,Je,ht){const gt=v.context,ut=gt.gl,wt=v.transform,_t=v.transform.zoom,Pt=[],Tt=Ki(v,h.paint.get("fill-extrusion-cutoff-fade-range"));ne==="clear"?(Pt.push("CLEAR_SUBPASS"),ht&&(Pt.push("CLEAR_FROM_TEXTURE"),gt.activeTexture.set(ut.TEXTURE0),ht.bind(ut.LINEAR,ut.CLAMP_TO_EDGE))):ne==="sdf"&&Pt.push("SDF_SUBPASS"),Ye&&Pt.push("HAS_CENTROID"),Tt.shouldRenderCutoff&&Pt.push("RENDER_CUTOFF");const jt=h.layout.get("fill-extrusion-edge-radius"),Vt=(Ut,Ot,sr,Cr,Rr)=>{const wr=Ot.programConfigurations.get(h.id),Jr=v.isTileAffectedByFog(Ut),or=v.getOrCreateProgram("fillExtrusionGroundEffect",{config:wr,defines:Pt,overrideFog:Jr}),Fr=((en,nn,kr,Hr,Yn,dn,Nn,ai,zn,ii,Hi)=>({u_matrix:nn,u_opacity:kr,u_ao_pass:Hr?1:0,u_meter_to_tile:Yn,u_ao:dn,u_flood_light_intensity:Nn,u_flood_light_color:ai,u_attenuation:zn,u_edge_radius:ii,u_fb:0,u_fb_size:Hi,u_dynamic_offset:1}))(0,Cr,ae,X,Rr,[xe,Ce*Rr],Ee,Ge,$e,_t>=17?0:jt*Rr,ht?ht.size[0]:0),Er=[];Ye&&Er.push(Ot.hiddenByLandmarkVertexBuffer),v.uploadCommonUniforms(gt,or,Ut.toUnwrapped(),null,Tt),or.draw(v,gt.gl.TRIANGLES,E,L,M,q,Fr,h.id,Ot.vertexBuffer,Ot.indexBuffer,sr,h.paint,_t,wr,Er)};for(const Ut of x){const Ot=l.getTile(Ut),sr=Ot.getBucket(h);if(!sr||sr.projection.name!==wt.projection.name||!sr.groundEffect||sr.groundEffect&&!sr.groundEffect.hasData())continue;const Cr=sr.groundEffect,Rr=1/sr.tileToMeter;{const wr=v.translatePosMatrix(Ut.projMatrix,Ot,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Jr=Cr.getDefaultSegment();Vt(Ut,Cr,Jr,wr,Rr)}if(Je)for(let wr=0;wr<4;wr++){const Jr=i.c$[wr](Ut),or=l.getTile(Jr);if(!or)continue;const Fr=or.getBucket(h);if(!Fr||Fr.projection.name!==wt.projection.name||!Fr.groundEffect||Fr.groundEffect&&!Fr.groundEffect.hasData())continue;const Er=Fr.groundEffect;let en,nn;wr===0?(en=[-i.ab,0,0],nn=1):wr===1?(en=[i.ab,0,0],nn=0):wr===2?(en=[0,-i.ab,0],nn=3):(en=[0,i.ab,0],nn=2);const kr=Er.regionSegments[nn];if(!kr)continue;const Hr=new Float32Array(16);i.a6.mat4.translate(Hr,Ut.projMatrix,en),Vt(Ut,Er,kr,v.translatePosMatrix(Hr,Ot,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Rr)}}}function ti(v,l,h,x,E,L,M){x.centroidVertexArray.length===0&&x.createCentroidsBuffer();const q=L?L.findDEMTileFor(h):null;if(!(q&&q.dem||M))return;const X=Je=>new i.P(Math.ceil((Je+i.d2)*i.d3),0),ne=Je=>{const ht=l.getSource().minzoom,gt=wt=>{const _t=l.getTileByID(wt);if(_t&&_t.hasData())return _t.getBucket(E)},ut=[0,-1,1];for(const wt of ut){if(Je.overscaledZ+wt<ht)continue;const _t=gt(Je.calculateScaledKey(Je.overscaledZ+wt));if(_t)return _t}},ae=[0,0,0],xe=(Je,ht)=>(ae[0]=Math.min(Je.min.y,ht.min.y),ae[1]=Math.max(Je.max.y,ht.max.y),ae[2]=i.ab-ht.min.x>Je.max.x?ht.min.x-i.ab:Je.max.x,ae),Ce=(Je,ht)=>(ae[0]=Math.min(Je.min.x,ht.min.x),ae[1]=Math.max(Je.max.x,ht.max.x),ae[2]=i.ab-ht.min.y>Je.max.y?ht.min.y-i.ab:Je.max.y,ae),Ee=[(Je,ht)=>xe(Je,ht),(Je,ht)=>xe(ht,Je),(Je,ht)=>Ce(Je,ht),(Je,ht)=>Ce(ht,Je)],Ge=(Je,ht,gt,ut,wt,_t,Pt)=>{if(!L)return 0;const Tt=[[_t?gt:Je,_t?Je:gt,0],[_t?gt:ht,_t?ht:gt,0]],jt=Pt<0?i.ab+Pt:Pt,Vt=[_t?jt:(Je+ht)/2,_t?(Je+ht)/2:jt,0];return gt===0&&Pt<0||gt!==0&&Pt>0?L.getForTilePoints(wt,[Vt],!0,ut):Tt.push(Vt),L.getForTilePoints(h,Tt,!0,q),Math.max(Tt[0][2],Tt[1][2],Vt[2])/L.exaggeration()};for(let Je=0;Je<4;Je++){const ht=x.borderFeatureIndices[Je];if(ht.length===0)continue;const gt=i.c$[Je](h),ut=ne(gt);if(!(ut&&ut instanceof i.d0)||x.borderDoneWithNeighborZ[Je]===ut.canonical.z)continue;ut.centroidVertexArray.length===0&&ut.createCentroidsBuffer();const wt=L?L.findDEMTileFor(gt):null;if(!(wt&&wt.dem||M))continue;const _t=(Je<2?1:5)-Je,Pt=ut.borderDoneWithNeighborZ[_t]!==x.canonical.z,Tt=ut.borderFeatureIndices[_t];let jt=0;if(x.canonical.z!==ut.canonical.z){for(const Vt of ht)x.showCentroid(x.featuresOnBorder[Vt]);if(Pt)for(const Vt of Tt)ut.showCentroid(ut.featuresOnBorder[Vt]);x.borderDoneWithNeighborZ[Je]=ut.canonical.z,ut.borderDoneWithNeighborZ[_t]=x.canonical.z}for(const Vt of ht){const Ut=x.featuresOnBorder[Vt],Ot=x.centroidData[Ut.centroidDataIndex],sr=Ut.borders[Je];let Cr;for(;jt<Tt.length;){Cr=ut.featuresOnBorder[Tt[jt]];const Rr=Cr.borders[_t];if(Rr[1]>sr[0]+3||Rr[0]>sr[0]-3)break;ut.showCentroid(Cr),jt++}if(Cr&&jt<Tt.length){const Rr=jt;let wr=0;for(;!(Cr.borders[_t][0]>sr[1]-3)&&(wr++,++jt!==Tt.length);)Cr=ut.featuresOnBorder[Tt[jt]];Cr=ut.featuresOnBorder[Tt[Rr]];let Jr=!1;if(wr>=1){const Er=Cr.borders[_t];Math.abs(sr[0]-Er[0])<3&&Math.abs(sr[1]-Er[1])<3&&(wr=1,Jr=!0,jt=Rr+1)}else if(wr===0){x.showCentroid(Ut);continue}const or=ut.centroidData[Cr.centroidDataIndex];M&&Jr&&((($e=Ot).flags|(Ye=or).flags)&i.d1?($e.flags|=i.d1,Ye.flags|=i.d1):($e.flags&=~i.d1,Ye.flags&=~i.d1));const Fr=Ut.intersectsCount()>1||Cr.intersectsCount()>1;if(wr>1)jt=Rr,Ot.centroidXY=or.centroidXY=new i.P(0,0);else if(wt&&wt.dem&&!Fr){const Er=Ee[Je](Ot,or),en=Je%2?i.ab-1:0,nn=Ge(Er[0],Math.min(i.ab-1,Er[1]),en,wt,gt,Je<2,Er[2]);Ot.centroidXY=or.centroidXY=X(nn)}else Fr?Ot.centroidXY=or.centroidXY=new i.P(0,0):(Ot.centroidXY=x.encodeBorderCentroid(Ut),or.centroidXY=ut.encodeBorderCentroid(Cr));x.writeCentroidToBuffer(Ot),ut.writeCentroidToBuffer(or)}else x.showCentroid(Ut)}x.borderDoneWithNeighborZ[Je]=ut.canonical.z,ut.borderDoneWithNeighborZ[_t]=x.canonical.z}var $e,Ye;(x.needsCentroidUpdate||!x.centroidVertexBuffer&&x.centroidVertexArray.length!==0)&&x.uploadCentroid(v)}const Mi=[1,0,0],wi=[0,1,0],Vn=[0,0,1];function gs(v,l,h){const x=h.transform,E=h.shadowRenderer;if(!E)return!0;const L=v.toUnwrapped(),M=x.tileSize*E._cascades[h.currentShadowCascade].scale;let q=l.maxHeight;if(x.elevation){const $e=x.elevation.getMinMaxForTile(v);$e&&(q+=$e.max)}const X=[...E.shadowDirection];X[2]=-X[2];const ne=E.computeSimplifiedTileShadowVolume(L,q,M,X);if(!ne)return!1;const ae=[Mi,wi,Vn,X,[X[0],0,X[2]],[0,X[1],X[2]]],xe=x.projection.name==="globe",Ce=x.scaleZoom(M),Ee=i.bN.fromInvProjectionMatrix(x.invProjMatrix,x.worldSize,Ce,!xe),Ge=E.getCurrentCascadeFrustum();return Ee.intersectsPrecise(ne.vertices,ne.planes,ae)===0||Ge.intersectsPrecise(ne.vertices,ne.planes,ae)===0}function To(v){return[v[0]*i.d4,v[1]*i.d4,v[2]*i.d4,0]}function zi(v,l,h,x,E,L,M,q,X){const ne=x.getSource(),ae=h.globeSharedBuffers;if(!ae)return;let xe,Ce,Ee;if(l&&(xe=x.getTile(l)),ne instanceof i.aD?(Ce=ne.texture,Ee=i.cD(0,0,h.transform)):xe&&l&&(Ce=xe.texture,Ee=i.cD(l.canonical.z,l.canonical.x,h.transform)),!Ce||!Ee)return;v||(Ee=i.a6.mat4.scale(i.a6.mat4.create(),Ee,[1,-1,1]));const Ge=h.context,$e=Ge.gl,Ye=E.paint.get("raster-resampling")==="nearest"?$e.NEAREST:$e.LINEAR,Je=h.colorModeForDrapableLayerRenderPass(L),ht=M.defines;ht.push("GLOBE_POLES");const gt=new Dr($e.LEQUAL,Dr.ReadWrite,h.depthRangeFor3D),ut=Float32Array.from(h.transform.expandedFarZProjMatrix),wt=Float32Array.from(i.b5(i.cC(new i.bP(0,0,0))));h.terrain&&h.terrain.prepareDrawTile(),Ge.activeTexture.set($e.TEXTURE0),Ce.bind(Ye,$e.CLAMP_TO_EDGE),Ge.activeTexture.set($e.TEXTURE1),Ce.bind(Ye,$e.CLAMP_TO_EDGE),Ce.useMipmap&&Ge.extTextureFilterAnisotropic&&h.transform.pitch>20&&$e.texParameterf($e.TEXTURE_2D,Ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ge.extTextureFilterAnisotropicMax);const[_t,Pt,Tt,jt]=l?ae.getPoleBuffers(l.canonical.z,!1):ae.getPoleBuffers(0,!0),Vt=E.paint.get("raster-elevation");let Ut;v?(Ut=_t,h.renderDefaultNorthPole=Vt!==0):(Ut=Pt,h.renderDefaultSouthPole=Vt!==0);const Ot=To(M.mix),sr=((Rr,wr,Jr,or,Fr,Er,en,nn,kr,Hr,Yn,dn,Nn)=>af(Rr,wr,Jr,new Float32Array(16),new Float32Array(9),[0,0],or,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Er,[0,0],nn,2,Hr,Yn,dn,1,0,Nn))(ut,wt,Ee,i.a9(h.transform.zoom),0,E,0,Vt,0,Ot,M.offset,M.range,L),Cr=h.getOrCreateProgram("raster",{defines:ht});h.uploadCommonUniforms(Ge,Cr,null),Cr.draw(h,$e.TRIANGLES,gt,X,Je,q,sr,E.id,Ut,Tt,jt)}function Qi(v){const l=v._nearZ,h=v.projection.farthestPixelDistance(v),x=h-l,E=.2*v.height,L=l+E;return[l,h,(L-E-l)/x,(L-l)/x]}function gi(v,l,h,x){if(v)return l instanceof Sl&&v instanceof Re?l.getTextureDescriptor(v,h,!0):{texture:v.texture,mix:To(x.mix),offset:x.offset,buffer:0,tileSize:1}}var Qo=i.d5([{name:"a_index",type:"Int16",components:1}]);class Ko{constructor(l,h,x,E){const L={width:x[0],height:x[1],data:null},M=l.gl;this.targetColorTexture=new i.T(l,L,M.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(l,L,M.RGBA8,{useMipmap:!1}),this.context=l,this.updateParticleTexture(h,E),this.lastInvalidatedAt=0}updateParticleTexture(l,h){if(this.particleTextureDimension===h.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const x=this.context.gl,E=h.width*h.height;this.particleTexture0=new i.T(this.context,h,x.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,h,x.RGBA8,{premultiply:!1,useMipmap:!1});const L=new i.d6;L.reserve(E);for(let M=0;M<E;M++)L.emplaceBack(M);this.particleIndexBuffer=this.context.createVertexBuffer(L,Qo.members,!0),this.particleSegment=i.b1.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=h.width}update(l){return!(this.lastInvalidatedAt<l&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Os(v,l,h){if(!v)return null;const x=l.getTextureDescriptor(v,h,!0);if(!x)return null;let{texture:E,mix:L,offset:M,tileSize:q,buffer:X,format:ne}=x;if(!E||!ne)return null;let ae=!1;return ne==="uint32"&&(ae=!0,L[3]=0,L=Cu(i.d7,L,[0,h.paint.get("raster-particle-max-speed")]),M=Yf(i.d7,M,[0,h.paint.get("raster-particle-max-speed")])),{texture:E,textureOffset:[X/(q+2*X),q/(q+2*X)],tileSize:q,scalarData:ae,scale:L,offset:M,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[ne]]}}function Ws(v){const l=v._nearZ,h=v.projection.farthestPixelDistance(v),x=h-l,E=.2*v.height,L=l+E;return[l,h,(L-E-l)/x,(L-l)/x]}const Lo=new i.bz(1,0,0,1),ko=new i.bz(0,1,0,1),ca=new i.bz(0,0,1,1),jr=new i.bz(1,0,1,1),In=new i.bz(0,1,1,1);function ya(v,l,h,x,E,L,M){const q=v.context,X=v.transform,ne=q.gl,ae=X.projection.name==="globe",xe=ae?["PROJECTION_GLOBE_VIEW"]:[];let Ce=i.a6.mat4.clone(h.projMatrix);if(ae&&i.a9(X.zoom)>0){const Ot=i.b4(h.canonical,X),sr=i.d8(Ot);Ce=i.a6.mat4.multiply(new Float32Array(16),X.globeMatrix,sr),i.a6.mat4.multiply(Ce,X.projMatrix,Ce)}const Ee=i.a6.mat4.create();Ee[12]+=2*E/(i.q.devicePixelRatio*X.width),Ee[13]+=2*L/(i.q.devicePixelRatio*X.height),i.a6.mat4.multiply(Ce,Ee,Ce);const Ge=v.getOrCreateProgram("debug",{defines:xe}),$e=l.getTileByID(h.key);v.terrain&&v.terrain.setupElevationDraw($e,Ge);const Ye=Dr.disabled,Je=gn.disabled,ht=v.colorModeForRenderPass(),gt="$debug";q.activeTexture.set(ne.TEXTURE0),v.emptyTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),ae?$e._makeGlobeTileDebugBuffers(v.context,X):$e._makeDebugTileBoundsBuffers(v.context,X.projection);const ut=$e._tileDebugBuffer||v.debugBuffer,wt=$e._tileDebugIndexBuffer||v.debugIndexBuffer,_t=$e._tileDebugSegments||v.debugSegments;if(Ge.draw(v,ne.LINE_STRIP,Ye,Je,ht,vn.disabled,CA(Ce,x),gt,ut,wt,_t,null,null,null,[$e._globeTileDebugBorderBuffer]),M){const Ot=$e.latestRawTileData,sr=Math.floor((Ot&&Ot.byteLength||0)/1024);let Cr=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Cr+=` => ${h.overscaledZ}`),Cr+=` ${$e.state}`,Cr+=` ${sr}kb`,function(Rr,wr){Rr.initDebugOverlayCanvas();const Jr=Rr.debugOverlayCanvas,or=Rr.context.gl,Fr=Rr.debugOverlayCanvas.getContext("2d");Fr.clearRect(0,0,Jr.width,Jr.height),Fr.shadowColor="white",Fr.shadowBlur=2,Fr.lineWidth=1.5,Fr.strokeStyle="white",Fr.textBaseline="top",Fr.font="bold 36px Open Sans, sans-serif",Fr.fillText(wr,5,5),Fr.strokeText(wr,5,5),Rr.debugOverlayTexture.update(Jr),Rr.debugOverlayTexture.bind(or.LINEAR,or.CLAMP_TO_EDGE)}(v,Cr)}const Pt=l.getTile(h).tileSize,Tt=512/Math.min(Pt,512)*(h.overscaledZ/X.zoom)*.5,jt=$e._tileDebugTextBuffer||v.debugBuffer,Vt=$e._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,Ut=$e._tileDebugTextSegments||v.debugSegments;Ge.draw(v,ne.TRIANGLES,Ye,Je,qr.alphaBlended,vn.disabled,CA(Ce,i.bz.transparent,Tt),gt,jt,Vt,Ut,null,null,null,[$e._globeTileDebugTextBuffer])}function Es(v,l,h,x){es(v,0,l+h/2,v.transform.width,h,x)}function cr(v,l,h,x){es(v,l-h/2,0,h,v.transform.height,x)}function es(v,l,h,x,E,L){const M=v.context,q=M.gl;q.enable(q.SCISSOR_TEST),q.scissor(l*i.q.devicePixelRatio,h*i.q.devicePixelRatio,x*i.q.devicePixelRatio,E*i.q.devicePixelRatio),M.clear({color:L}),q.disable(q.SCISSOR_TEST)}const Td=i.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:cf}=Td;function Rc(v,l,h,x){v.emplaceBack(l,h,x)}class ld{constructor(l){this.vertexArray=new i.d9,this.indices=new i.aO,Rc(this.vertexArray,-1,-1,1),Rc(this.vertexArray,1,-1,1),Rc(this.vertexArray,-1,1,1),Rc(this.vertexArray,1,1,1),Rc(this.vertexArray,-1,-1,-1),Rc(this.vertexArray,1,-1,-1),Rc(this.vertexArray,-1,1,-1),Rc(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,cf),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=i.b1.simpleSegment(0,0,36,12)}}function uc(v,l,h,x,E,L){const M=v.context.gl,q=l.paint.get("sky-atmosphere-color"),X=l.paint.get("sky-atmosphere-halo-color"),ne=l.paint.get("sky-atmosphere-sun-intensity"),ae=((xe,Ce,Ee,Ge,$e)=>({u_matrix_3f:xe,u_sun_direction:Ce,u_sun_intensity:Ee,u_color_tint_r:[Ge.r,Ge.g,Ge.b,Ge.a],u_color_tint_m:[$e.r,$e.g,$e.b,$e.a],u_luminance:5e-5}))(i.a6.mat3.fromMat4(i.a6.mat3.create(),x),E,ne,q,X);M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+L,l.skyboxTexture,0),h.draw(v,M.TRIANGLES,Dr.disabled,gn.disabled,qr.unblended,vn.frontCW,ae,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Kc=i.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ka{constructor(l){const h=new i.da;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const x=new i.aO;x.emplaceBack(0,1,2),x.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(h,Kc.members),this.indexBuffer=l.createIndexBuffer(x),this.segments=i.b1.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const su=i.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Xc{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Ch{constructor(l){this.colorModeAlphaBlendedWriteRGB=new qr([1,En,1,En],i.bz.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new qr([1,0,1,0],i.bz.transparent,[!1,!1,!1,!0]),this.params=new Xc,this.updateNeeded=!0,l.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),l.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(l){const h=l.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new ka(h);const x=this.params.sizeRange,E=this.params.intensityRange,L=function(ae){const xe=i.dd(30),Ce=[];for(let Ee=0;Ee<ae;++Ee){const Ge=2*Math.PI*xe(),$e=Math.acos(1-2*xe())-.5*Math.PI;Ce.push(i.a6.vec3.fromValues(Math.cos($e)*Math.cos(Ge),Math.cos($e)*Math.sin(Ge),Math.sin($e)))}return Ce}(this.params.starsCount),M=i.dd(300),q=new i.db,X=new i.aO;let ne=0;for(let ae=0;ae<L.length;++ae){const xe=i.a6.vec3.scale([],L[ae],200),Ce=Math.max(0,1+.01*x*(1*M()-.5)),Ee=Math.max(0,1+.01*E*(1*M()-.5));q.emplaceBack(xe[0],xe[1],xe[2],-1,-1,Ce,Ee),q.emplaceBack(xe[0],xe[1],xe[2],1,-1,Ce,Ee),q.emplaceBack(xe[0],xe[1],xe[2],1,1,Ce,Ee),q.emplaceBack(xe[0],xe[1],xe[2],-1,1,Ce,Ee),X.emplaceBack(ne+0,ne+1,ne+2),X.emplaceBack(ne+0,ne+2,ne+3),ne+=4}this.starsVx=h.createVertexBuffer(q,su.members),this.starsIdx=h.createIndexBuffer(X),this.starsSegments=i.b1.simpleSegment(0,0,q.length,X.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(l,h){const x=l.context,E=x.gl,L=l.transform,M=new Dr(E.LEQUAL,Dr.ReadOnly,[0,1]),q=i.a9(L.zoom),X=l.style.getLut(h.scope),ne=h.properties.get("color").toRenderColor(X).toArray01(),ae=h.properties.get("high-color").toRenderColor(X).toArray01(),xe=h.properties.get("space-color").toRenderColor(X).toArray01PremultipliedAlpha(),Ce=5e-4,Ee=i.dc(h.properties.get("horizon-blend"),0,1,Ce,.25),Ge=i.cx(l,x,L)&&Ee===Ce?L.worldSize/(2*Math.PI*1.025)-1:L.globeRadius,$e=l.frameCounter/1e3%1,Ye=i.a6.vec3.length(L.globeCenterInViewSpace),Je=Math.sqrt(Math.pow(Ye,2)-Math.pow(Ge,2)),ht=Math.acos(Je/Ye),gt=ut=>{const wt=L.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ut&&wt.push("ALPHA_PASS");const _t=l.getOrCreateProgram("globeAtmosphere",{defines:wt}),Pt=((jt,Vt,Ut,Ot,sr,Cr,Rr,wr,Jr,or,Fr,Er)=>({u_frustum_tl:jt,u_frustum_tr:Vt,u_frustum_br:Ut,u_frustum_bl:Ot,u_horizon:sr,u_transition:Cr,u_fadeout_range:Rr,u_color:wr,u_high_color:Jr,u_space_color:or,u_temporal_offset:Fr,u_horizon_angle:Er}))(L.frustumCorners.TL,L.frustumCorners.TR,L.frustumCorners.BR,L.frustumCorners.BL,L.frustumCorners.horizon,q,Ee,ne,ae,xe,$e,ht);l.uploadCommonUniforms(x,_t);const Tt=this.atmosphereBuffer;Tt&&_t.draw(l,E.TRIANGLES,M,gn.disabled,ut?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,vn.backCW,Pt,ut?"atmosphere_glow_alpha":"atmosphere_glow",Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)};gt(!1),gt(!0)}drawStars(l,h){const x=i.ap(h.properties.get("star-intensity"),0,1);if(x===0)return;const E=l.context,L=E.gl,M=l.transform,q=l.getOrCreateProgram("stars"),X=i.a6.quat.identity([]);i.a6.quat.rotateX(X,X,-M._pitch),i.a6.quat.rotateZ(X,X,-M.angle),i.a6.quat.rotateX(X,X,i.bB(M._center.lat)),i.a6.quat.rotateY(X,X,-i.bB(M._center.lng));const ne=i.a6.mat4.fromQuat(new Float32Array(16),X),ae=i.a6.mat4.multiply([],M.starsProjMatrix,ne),xe=i.a6.mat3.fromMat4([],ne),Ce=i.a6.mat3.invert([],xe),Ee=[0,1,0];i.a6.vec3.transformMat3(Ee,Ee,Ce),i.a6.vec3.scale(Ee,Ee,this.params.sizeMultiplier);const Ge=[1,0,0];i.a6.vec3.transformMat3(Ge,Ge,Ce),i.a6.vec3.scale(Ge,Ge,this.params.sizeMultiplier);const $e=(Ye=Ee,Je=Ge,ht=x,{u_matrix:Float32Array.from(ae),u_up:Ye,u_right:Je,u_intensity_multiplier:ht});var Ye,Je,ht;l.uploadCommonUniforms(E,q),this.starsVx&&this.starsIdx&&q.draw(l,L.TRIANGLES,Dr.disabled,gn.disabled,this.colorModeAlphaBlendedWriteRGB,vn.disabled,$e,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Su(v,l){const h=[...v],x=l.cameraWorldSizeForFog/l.worldSize,E=i.a6.mat4.identity([]);return i.a6.mat4.scale(E,E,[x,x,1]),i.a6.mat4.multiply(h,E,h),i.a6.mat4.multiply(h,l.worldToFogMatrix,h),h}function Sh(v,l,h,x,E){const L=h.material,M=x.context,{baseColorTexture:q,metallicRoughnessTexture:X}=L.pbrMetallicRoughness,{normalTexture:ne,occlusionTexture:ae,emissionTexture:xe}=L;function Ce(Ee,Ge,$e){if(Ee&&(v.push(Ge),M.activeTexture.set(M.gl.TEXTURE0+$e),Ee.gfxTexture)){const{minFilter:Ye,magFilter:Je,wrapS:ht,wrapT:gt}=Ee.sampler;Ee.gfxTexture.bindExtraParam(Ye,Je,ht,gt)}}Ce(q,"HAS_TEXTURE_u_baseColorTexture",so.BaseColor),Ce(X,"HAS_TEXTURE_u_metallicRoughnessTexture",so.MetallicRoughness),Ce(ne,"HAS_TEXTURE_u_normalTexture",so.Normal),Ce(ae,"HAS_TEXTURE_u_occlusionTexture",so.Occlusion),Ce(xe,"HAS_TEXTURE_u_emissionTexture",so.Emission),E&&(E.texture||(E.texture=new i.df(x.context,E.image,[E.image.height,E.image.height,E.image.height],M.gl.RGBA8)),M.activeTexture.set(M.gl.TEXTURE0+so.LUT),E.texture&&E.texture.bind(M.gl.LINEAR,M.gl.CLAMP_TO_EDGE),v.push("APPLY_LUT_ON_GPU")),h.texcoordBuffer&&(v.push("HAS_ATTRIBUTE_a_uv_2f"),l.push(h.texcoordBuffer)),h.colorBuffer&&(v.push(h.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),l.push(h.colorBuffer)),h.normalBuffer&&(v.push("HAS_ATTRIBUTE_a_normal_3f"),l.push(h.normalBuffer)),h.pbrBuffer&&(v.push("HAS_ATTRIBUTE_a_pbr"),v.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),l.push(h.pbrBuffer)),L.alphaMode!=="OPAQUE"&&L.alphaMode!=="MASK"||v.push("UNPREMULT_TEXTURE_IN_SHADER"),L.defined||v.push("DIFFUSE_SHADED"),v.push("USE_STANDARD_DERIVATIVES")}function ou(v,l,h,x,E,L){const M=h.paint.get("model-opacity"),q=l.context,X=new Dr(l.context.gl.LEQUAL,Dr.ReadWrite,l.depthRangeFor3D),ne=l.transform,ae=v.mesh,xe=ae.material,Ce=xe.pbrMetallicRoughness,Ee=l.style.fog;let Ge;Ge=l.transform.projection.zAxisUnit==="pixels"?[...v.nodeModelMatrix]:i.a6.mat4.multiply([],x.zScaleMatrix,v.nodeModelMatrix),i.a6.mat4.multiply(Ge,x.negCameraPosMatrix,Ge);const $e=i.a6.mat4.invert([],Ge);i.a6.mat4.transpose($e,$e);const Ye=h.paint.get("model-emissive-strength").constantOr(0),Je=je(new Float32Array(v.worldViewProjection),new Float32Array(Ge),new Float32Array($e),null,l,M,Ce.baseColorFactor.toRenderColor(null),xe.emissiveFactor,Ce.metallicFactor,Ce.roughnessFactor,xe,Ye,h),ht={defines:[]},gt=[];Sh(ht.defines,gt,ae,l,h.lut);const ut=l.shadowRenderer;ut&&(ut.useNormalOffset=!1);let wt=null;if(Ee){const Tt=Su(v.nodeModelMatrix,l.transform);if(wt=new Float32Array(Tt),ne.projection.name!=="globe"){const jt=ae.aabb.min,Vt=ae.aabb.max,[Ut,Ot]=Ee.getOpacityForBounds(Tt,jt[0],jt[1],Vt[0],Vt[1]);ht.overrideFog=Ut>=rn||Ot>=rn}}const _t=Ki(l,h.paint.get("model-cutoff-fade-range"));_t.shouldRenderCutoff&&ht.defines.push("RENDER_CUTOFF");const Pt=l.getOrCreateProgram("model",ht);l.uploadCommonUniforms(q,Pt,null,wt,_t),l.renderPass!=="shadow"&&ut&&ut.setupShadowsFromMatrix(v.nodeModelMatrix,Pt),Pt.draw(l,q.gl.TRIANGLES,X,E,L,ae.material.doubleSided?vn.disabled:vn.backCCW,Je,h.id,ae.vertexBuffer,ae.indexBuffer,ae.segments,h.paint,l.transform.zoom,void 0,gt)}function cd(v,l,h,x,E,L,M){let q;q=v.projection.name==="globe"?i.dg(h,v):[...h],i.a6.mat4.multiply(q,q,l.matrix);const X=i.a6.mat4.multiply([],x,q);if(l.meshes)for(const ne of l.meshes){if(ne.material.alphaMode!=="BLEND"){M.push({mesh:ne,depth:0,modelIndex:E,worldViewProjection:X,nodeModelMatrix:q});continue}const ae=i.a6.vec3.transformMat4([],ne.centroid,X);ae[2]>0&&L.push({mesh:ne,depth:ae[2],modelIndex:E,worldViewProjection:X,nodeModelMatrix:q})}if(l.children)for(const ne of l.children)cd(v,ne,h,x,E,L,M)}function Yc(v,l,h,x){const E=h.shadowRenderer;if(!E)return;const L=E.getShadowPassDepthMode(),M=E.getShadowPassColorMode(),q=E.calculateShadowPassMatrixFromMatrix(l),X=lt(q);h.getOrCreateProgram("modelDepth",{defines:h._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(h,h.context.gl.TRIANGLES,L,gn.disabled,M,vn.backCCW,X,x.id,v.vertexBuffer,v.indexBuffer,v.segments,x.paint,h.transform.zoom,void 0,void 0)}function Bu(v,l,h){const x=l.updateZoomBasedPaintProperties(),E=function(L,M,q){let X,ne,ae,xe=L.terrain?L.terrain.exaggeration():0;if(L.terrain&&xe>0){const Ce=L.terrain,Ee=Ce.findDEMTileFor(q);Ee&&Ee.dem?X=i.di.create(Ce,q,Ee):xe=0}if(xe===0&&(M.terrainElevationMin=0,M.terrainElevationMax=0),xe===M.validForExaggeration&&(xe===0||X&&X._demTile&&X._demTile.tileID===M.validForDEMTile.id&&X._dem._timestamp===M.validForDEMTile.timestamp))return!1;for(const Ce in M.instancesPerModel){const Ee=M.instancesPerModel[Ce];for(let Ge=0;Ge<Ee.instancedDataArray.length;++Ge){const $e=(X?xe*X.getElevationAt(0|Ee.instancedDataArray.float32[16*Ge],0|Ee.instancedDataArray.float32[16*Ge+1],!0,!0):0)+Ee.instancesEvaluatedElevation[Ge];Ee.instancedDataArray.float32[16*Ge+6]=$e,ne=ne?Math.min(M.terrainElevationMin,$e):$e,ae=ae?Math.max(M.terrainElevationMax,$e):$e}}return M.terrainElevationMin=ne||0,M.terrainElevationMax=ae||0,M.validForExaggeration=xe,M.validForDEMTile=X&&X._demTile?{id:X._demTile.tileID,timestamp:X._dem._timestamp}:{id:void 0,timestamp:0},!0}(v,l,h);(x||E)&&(l.uploaded=!1,l.upload(v.context))}const au={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.c9([0,0,0],[i.ab,i.ab,0])};function ug(v,l){const h=1<<v.canonical.z,x=l.getFreeCameraOptions().position,E=l.elevation,L=v.canonical.x/h,M=(v.canonical.x+1)/h,q=v.canonical.y/h,X=(v.canonical.y+1)/h;let ne=l._centerAltitude;if(E){const Ee=E.getMinMaxForTile(v);Ee&&Ee.max>ne&&(ne=Ee.max)}const ae=i.ap(x.x,L,M)-x.x,xe=i.ap(x.y,q,X)-x.y,Ce=i.bD(ne,l.center.lat)-x.z;return l._zoomFromMercatorZ(Math.sqrt(ae*ae+xe*xe+Ce*Ce))}function Wa(v,l,h,x,E,L,M){const q=v.context,X=v.renderPass==="shadow",ne=v.shadowRenderer,ae=X&&ne?ne.getShadowPassDepthMode():new Dr(q.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D),xe=v.isTileAffectedByFog(L);if(h.meshes)for(const Ce of h.meshes){const Ee=["MODEL_POSITION_ON_GPU"],Ge=[];let $e,Ye,Je;x.instancedDataArray.length>20&&Ee.push("INSTANCED_ARRAYS");const ht=Ki(v,l.paint.get("model-cutoff-fade-range"));if(ht.shouldRenderCutoff&&Ee.push("RENDER_CUTOFF"),X&&ne)$e=v.getOrCreateProgram("modelDepth",{defines:Ee}),Ye=lt(M.shadowTileMatrix,M.shadowTileMatrix,Float32Array.from(h.matrix)),Je=ne.getShadowPassColorMode();else{Sh(Ee,Ge,Ce,v,l.lut),$e=v.getOrCreateProgram("model",{defines:Ee,overrideFog:xe});const ut=Ce.material,wt=ut.pbrMetallicRoughness,_t=l.paint.get("model-opacity"),Pt=l.paint.get("model-emissive-strength").constantOr(0);Ye=je(L.expandedProjMatrix,Float32Array.from(h.matrix),new Float32Array(16),null,v,_t,wt.baseColorFactor.toRenderColor(null),ut.emissiveFactor,wt.metallicFactor,wt.roughnessFactor,ut,Pt,l,E),ne&&(M.shadowUniformsInitialized?$e.setShadowUniformValues(q,ne.getShadowUniformValues()):(ne.setupShadows(L.toUnwrapped(),$e,"model-tile",L.overscaledZ),M.shadowUniformsInitialized=!0)),Je=ht.shouldRenderCutoff||_t<1||ut.alphaMode!=="OPAQUE"?qr.alphaBlended:qr.unblended}v.uploadCommonUniforms(q,$e,L.toUnwrapped(),null,ht);const gt=Ce.material.doubleSided?vn.disabled:vn.backCCW;if(x.instancedDataArray.length>20)Ge.push(x.instancedDataBuffer),$e.draw(v,q.gl.TRIANGLES,ae,gn.disabled,Je,gt,Ye,l.id,Ce.vertexBuffer,Ce.indexBuffer,Ce.segments,l.paint,v.transform.zoom,void 0,Ge,x.instancedDataArray.length);else{const ut=X?"u_instance":"u_normal_matrix";for(let wt=0;wt<x.instancedDataArray.length;++wt)Ye[ut]=new Float32Array(x.instancedDataArray.arrayBuffer,64*wt,16),$e.draw(v,q.gl.TRIANGLES,ae,gn.disabled,Je,gt,Ye,l.id,Ce.vertexBuffer,Ce.indexBuffer,Ce.segments,l.paint,v.transform.zoom,void 0,Ge)}}if(h.children)for(const Ce of h.children)Wa(v,l,Ce,x,E,L,M)}const dc=[1,-1,1];function uf(v,l,h,x){if(!h.modelManager)return!0;const E=h.modelManager;if(!h.shadowRenderer)return!0;const L=h.shadowRenderer,M=l.aabb;let q=!0,X=v.maxHeight;if(X===0){let ae=0;for(const xe in v.instancesPerModel){const Ce=E.getModel(xe,x);Ce?ae=Math.max(ae,Math.max(Math.max(Ce.aabb.max[0],Ce.aabb.max[1]),Ce.aabb.max[2])):q=!1}X=v.maxScale*ae*1.41+v.maxVerticalOffset,q&&(v.maxHeight=X)}M.max[2]=X,M.min[2]+=v.terrainElevationMin,M.max[2]+=v.terrainElevationMax,i.a6.vec3.transformMat4(M.min,M.min,l.tileMatrix),i.a6.vec3.transformMat4(M.max,M.max,l.tileMatrix);const ne=M.intersects(L.getCurrentCascadeFrustum());return h.currentShadowCascade===0&&(v.isInsideFirstShadowMapFrustum=ne===2),ne===0}function ho(v,l){const h=v.uniformValues.u_cutoff_params[0],x=v.uniformValues.u_cutoff_params[1],E=v.uniformValues.u_cutoff_params[2],L=v.uniformValues.u_cutoff_params[3];return x===h||L===E?1:i.ap(((l-h)/(x-h)-E)/(L-E),0,1)}function as(v,l,h,x){if(l.pitch<20)return 1;const E=l.getWorldToCameraMatrix();i.a6.mat4.multiply(E,E,v);const L=i.a6.vec4.fromValues(h.min[0],h.min[1],h.min[2],1);let M=i.a6.vec4.transformMat4(i.a6.vec4.create(),L,E),q=M,X=M;L[1]=h.max[1],M=i.a6.vec4.transformMat4(i.a6.vec4.create(),L,E),q=M[1]<q[1]?M:q,X=M[1]>X[1]?M:X,L[0]=h.max[0],M=i.a6.vec4.transformMat4(i.a6.vec4.create(),L,E),q=M[1]<q[1]?M:q,X=M[1]>X[1]?M:X,L[1]=h.min[1],M=i.a6.vec4.transformMat4(i.a6.vec4.create(),L,E),q=M[1]<q[1]?M:q,X=M[1]>X[1]?M:X;const ne=i.ap(x[0],0,1),ae=100*l.pixelsPerMeter*i.ap(x[1],0,1),xe=i.ap(x[2],0,1),Ce=i.a6.vec4.lerp(i.a6.vec4.create(),q,X,ne),Ee=Math.tan(.5*l.fovX),Ge=-Ce[2]*Ee;if(ae===0)return Ce[1]<-Math.abs(Ge)?xe:1;const $e=(-Math.abs(Ge)-Ce[1])/ae,Ye=(ht,gt,ut)=>(1-ut)*ht+ut*gt,Je=i.ap(Ye(1,xe,$e),xe,1);return Ye(1,Je,i.ap((l.pitch-20)/20,0,1))}class Zf{}class Bc{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(l,h,x){{const xe=this._storage.get(h.id);if(xe)return xe.lastUsedFrameIdx=l,xe.buf}const E=x.gl,L=E.getBufferParameter(E.ELEMENT_ARRAY_BUFFER,E.BUFFER_SIZE),M=new ArrayBuffer(L),q=new Int16Array(M);E.getBufferSubData(E.ELEMENT_ARRAY_BUFFER,0,new Int16Array(M));const X=new i.dk;for(let xe=0;xe<L/2;xe+=3){const Ce=q[xe],Ee=q[xe+1],Ge=q[xe+2];X.emplaceBack(Ce,Ee),X.emplaceBack(Ee,Ge),X.emplaceBack(Ge,Ce)}const ne=x.bindVertexArrayOES.current,ae=new Zf;return ae.buf=new Bt(x,X),ae.lastUsedFrameIdx=l,this._storage.set(h.id,ae),x.bindVertexArrayOES.set(ne),ae.buf}update(l){for(const[h,x]of this._storage)l-x.lastUsedFrameIdx>30&&(x.buf.destroy(),this._storage.delete(h))}destroy(){for(const[l,h]of this._storage)h.buf.destroy(),this._storage.delete(l)}}class Bh{constructor(l){this.occluderSize=30,this.depthOffset=-1e-4,l.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),l.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Eu={symbol:function(v,l,h,x,E){if(v.renderPass!=="translucent")return;const L=gn.disabled,M=v.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(ne,ae,xe,Ce,Ee,Ge,$e){const Ye=ae.transform,Je=Ee==="map",ht=Ge==="map";for(const gt of ne){const ut=Ce.getTile(gt),wt=ut.getBucket(xe);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const _t=i.bj(wt.textSizeData,Ye.zoom),Pt=fa(gt,wt.getProjection(),Ye),Tt=Ye.calculatePixelsToTileUnitsMatrix(ut),jt=Zn(Pt,ut.tileID.canonical,ht,Je,Ye,wt.getProjection(),Tt),Vt=wt.hasIconTextFit()&&wt.hasIconData();if(_t){const Ut=Math.pow(2,Ye.zoom-ut.tileID.overscaledZ);Or(wt,Je,ht,$e,i.cS,Ye,jt,gt,Ut,_t,Vt)}}}(x,v,h,l,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),E);const q=h.paint.get("icon-opacity").constantOr(1)!==0,X=h.paint.get("text-opacity").constantOr(1)!==0;h.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(q||X)?bn(v,l,h,x,L,M):(q&&bn(v,l,h,x,L,M,{onlyIcons:!0}),X&&bn(v,l,h,x,L,M,{onlyText:!0})),l.map.showCollisionBoxes&&(lr(v,l,h,x,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),lr(v,l,h,x,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(v,l,h,x){if(v.renderPass!=="translucent")return;const E=h.paint.get("circle-opacity"),L=h.paint.get("circle-stroke-width"),M=h.paint.get("circle-stroke-opacity"),q=h.layout.get("circle-sort-key").constantOr(1)!==void 0,X=h.paint.get("circle-emissive-strength");if(E.constantOr(1)===0&&(L.constantOr(1)===0||M.constantOr(1)===0))return;const ne=v.context,ae=ne.gl,xe=v.transform,Ce=v.depthModeForSublayer(0,Dr.ReadOnly),Ee=gn.disabled,Ge=v.colorModeForDrapableLayerRenderPass(X),$e=xe.projection.name==="globe",Ye=[i.am(xe.center.lng),i.at(xe.center.lat)],Je=[];for(let gt=0;gt<x.length;gt++){const ut=x[gt],wt=l.getTile(ut),_t=wt.getBucket(h);if(!_t||_t.projection.name!==xe.projection.name)continue;const Pt=_t.programConfigurations.get(h.id),Tt=i.cT(h),jt=v.isTileAffectedByFog(ut);$e&&Tt.push("PROJECTION_GLOBE_VIEW"),Tt.push("DEPTH_D24"),v.terrain&&xe.depthOcclusionForSymbolsAndCircles&&Tt.push("DEPTH_OCCLUSION");const Vt=v.getOrCreateProgram("circle",{config:Pt,defines:Tt,overrideFog:jt}),Ut=_t.layoutVertexBuffer,Ot=_t.globeExtVertexBuffer,sr=_t.indexBuffer,Cr=xe.projection.createInversionMatrix(xe,ut.canonical),Rr={programConfiguration:Pt,program:Vt,layoutVertexBuffer:Ut,globeExtVertexBuffer:Ot,indexBuffer:sr,uniformValues:i.cU(v,ut,wt,Cr,Ye,h),tile:wt};if(q){const wr=_t.segments.get();for(const Jr of wr)Je.push({segments:new i.b1([Jr]),sortKey:Jr.sortKey,state:Rr})}else Je.push({segments:_t.segments,sortKey:0,state:Rr})}q&&Je.sort((gt,ut)=>gt.sortKey-ut.sortKey);const ht={useDepthForOcclusion:xe.depthOcclusionForSymbolsAndCircles};for(const gt of Je){const{programConfiguration:ut,program:wt,layoutVertexBuffer:_t,globeExtVertexBuffer:Pt,indexBuffer:Tt,uniformValues:jt,tile:Vt}=gt.state,Ut=gt.segments;v.terrain&&v.terrain.setupElevationDraw(Vt,wt,ht),v.uploadCommonUniforms(ne,wt,Vt.tileID.toUnwrapped()),wt.draw(v,ae.TRIANGLES,Ce,Ee,Ge,vn.disabled,jt,h.id,_t,Tt,Ut,h.paint,xe.zoom,ut,[Pt])}},heatmap:function(v,l,h,x){if(h.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const E=v.context,L=E.gl,M=gn.disabled,q=new qr([L.ONE,L.ONE,L.ONE,L.ONE],i.bz.transparent,[!0,!0,!0,!0]);(function(Ee,Ge,$e,Ye){const Je=Ee.gl,ht=Ge.width*Ye,gt=Ge.height*Ye;Ee.activeTexture.set(Je.TEXTURE1),Ee.viewport.set([0,0,ht,gt]);let ut=$e.heatmapFbo;if(!ut||ut&&(ut.width!==ht||ut.height!==gt)){ut&&ut.destroy();const wt=Je.createTexture();Je.bindTexture(Je.TEXTURE_2D,wt),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.LINEAR),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.LINEAR),ut=$e.heatmapFbo=Ee.createFramebuffer(ht,gt,!0,null),function(_t,Pt,Tt,jt,Vt,Ut){const Ot=_t.gl;Ot.texImage2D(Ot.TEXTURE_2D,0,_t.extRenderToTextureHalfFloat?Ot.RGBA16F:Ot.RGBA,Vt,Ut,0,Ot.RGBA,_t.extRenderToTextureHalfFloat?Ot.HALF_FLOAT:Ot.UNSIGNED_BYTE,null),jt.colorAttachment.set(Tt)}(Ee,0,wt,ut,ht,gt)}else Je.bindTexture(Je.TEXTURE_2D,ut.colorAttachment.get()),Ee.bindFramebuffer.set(ut.framebuffer)})(E,v,h,v.transform.projection.name==="globe"?.5:.25),E.clear({color:i.bz.transparent});const X=v.transform,ne=X.projection.name==="globe",ae=ne?["PROJECTION_GLOBE_VIEW"]:[],xe=ne?vn.frontCCW:vn.disabled,Ce=[i.am(X.center.lng),i.at(X.center.lat)];for(let Ee=0;Ee<x.length;Ee++){const Ge=x[Ee];if(l.hasRenderableParent(Ge))continue;const $e=l.getTile(Ge),Ye=$e.getBucket(h);if(!Ye||Ye.projection.name!==X.projection.name)continue;const Je=v.isTileAffectedByFog(Ge),ht=Ye.programConfigurations.get(h.id),gt=v.getOrCreateProgram("heatmap",{config:ht,defines:ae,overrideFog:Je}),{zoom:ut}=v.transform;v.terrain&&v.terrain.setupElevationDraw($e,gt),v.uploadCommonUniforms(E,gt,Ge.toUnwrapped());const wt=X.projection.createInversionMatrix(X,Ge.canonical);gt.draw(v,L.TRIANGLES,Dr.disabled,M,q,xe,Mp(v,Ge,$e,wt,Ce,ut,h.paint.get("heatmap-intensity")),h.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,h.paint,v.transform.zoom,ht,ne?[Ye.globeExtVertexBuffer]:null)}E.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(E,L){const M=E.context,q=M.gl,X=L.heatmapFbo;if(!X)return;M.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,X.colorAttachment.get()),M.activeTexture.set(q.TEXTURE1);let ne=L.colorRampTexture;ne||(ne=L.colorRampTexture=new i.T(M,L.colorRamp,q.RGBA8)),ne.bind(q.LINEAR,q.CLAMP_TO_EDGE),E.getOrCreateProgram("heatmapTexture").draw(E,q.TRIANGLES,Dr.disabled,gn.disabled,E.colorModeForRenderPass(),vn.disabled,((ae,xe,Ce,Ee)=>({u_image:0,u_color_ramp:1,u_opacity:xe.paint.get("heatmap-opacity")}))(0,L),L.id,E.viewportBuffer,E.quadTriangleIndexBuffer,E.viewportSegments,L.paint,E.transform.zoom)}(v,h))},line:function(v,l,h,x){if(v.renderPass!=="translucent")return;const E=h.paint.get("line-opacity"),L=h.paint.get("line-width");if(E.constantOr(1)===0||L.constantOr(1)===0)return;const M=h.paint.get("line-emissive-strength"),q=h.paint.get("line-occlusion-opacity"),X=v.context,ne=X.gl,ae=h.layout.get("line-z-offset"),xe=!ae.isConstant()||!!ae.constantOr(0),Ce=xe?new Dr(v.depthOcclusion?ne.GREATER:ne.LEQUAL,Dr.ReadOnly,v.depthRangeFor3D):v.depthModeForSublayer(0,Dr.ReadOnly),Ee=v.colorModeForDrapableLayerRenderPass(M),Ge=v.terrain&&v.terrain.renderingToTexture,$e=Ge?1:i.q.devicePixelRatio,Ye=h.paint.get("line-dasharray"),Je=Ye.constantOr(1),ht=h.layout.get("line-cap"),gt=Ye.constantOr(null),ut=ht.constantOr(null),wt=h.paint.get("line-pattern"),_t=wt.constantOr(1),Pt=wt.constantOr(null),Tt=h.paint.get("line-opacity").constantOr(1);let jt=!_t&&Tt!==1||v.depthOcclusion&&q>0&&q<1;const Vt=h.paint.get("line-gradient"),Ut=_t?"linePattern":"line",Ot=i.cV(h);let sr;if(Ge&&v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(jt=!1),q!==0&&v.depthOcclusion){const Rr=h.paint._values["line-opacity"];Rr&&Rr.value&&Rr.value.kind==="constant"?sr=Rr.value:i.w(`Occlusion opacity for layer ${h.id} is supported only when line-opacity isn't data-driven.`)}if(xe&&(v.forceTerrainMode=!0),!xe&&q!==0&&v.terrain&&!Ge)return void i.w(`Occlusion opacity for layer ${h.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const Cr=jt&&xe?v.stencilModeFor3D():gn.disabled;for(const Rr of x){const wr=l.getTile(Rr);if(_t&&!wr.patternsLoaded())continue;const Jr=wr.getBucket(h);if(!Jr)continue;v.prepareDrawTile();const or=Jr.programConfigurations.get(h.id),Fr=v.isTileAffectedByFog(Rr),Er=v.getOrCreateProgram(Ut,{config:or,defines:xe?[...Ot,"ELEVATED"]:Ot,overrideFog:Fr});if(Pt&&wr.imageAtlas){const dn=wr.imageAtlas.patternPositions[Pt.toString()];dn&&or.setConstantPatternPositions(dn)}if(!_t&&gt&&ut&&wr.lineAtlas){const dn=wr.lineAtlas.getDash(gt,ut);dn&&or.setConstantPatternPositions(dn)}let[en,nn]=h.paint.get("line-trim-offset");(ut==="round"||ut==="square")&&en!==nn&&(en===0&&(en-=1),nn===1&&(nn+=1));const kr=Ge?Rr.projMatrix:null,Hr=_t?i.cW(v,wr,h,kr,$e,[en,nn]):i.cX(v,wr,h,kr,Jr.lineClipsArray.length,$e,[en,nn]);if(Vt){const dn=Jr.gradients[h.id];let Nn=dn.texture;if(h.gradientVersion!==dn.version){let ai=256;if(h.stepInterpolant){const zn=l.getSource().maxzoom,ii=Rr.canonical.z===zn?Math.ceil(1<<v.transform.maxZoom-Rr.canonical.z):1;ai=i.ap(i.cY(Jr.maxLineLength/i.ab*1024*ii),256,X.maxTextureSize)}dn.gradient=i.cZ({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:ai,image:dn.gradient||void 0,clips:Jr.lineClipsArray}),dn.texture?dn.texture.update(dn.gradient):dn.texture=new i.T(X,dn.gradient,ne.RGBA8),dn.version=h.gradientVersion,Nn=dn.texture}X.activeTexture.set(ne.TEXTURE1),Nn.bind(h.stepInterpolant?ne.NEAREST:ne.LINEAR,ne.CLAMP_TO_EDGE)}Je&&(X.activeTexture.set(ne.TEXTURE0),wr.lineAtlasTexture&&wr.lineAtlasTexture.bind(ne.LINEAR,ne.REPEAT),or.updatePaintBuffers()),_t&&(X.activeTexture.set(ne.TEXTURE0),wr.imageAtlasTexture&&wr.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),or.updatePaintBuffers()),xe&&v.terrain.setupElevationDraw(wr,Er),v.uploadCommonUniforms(X,Er,Rr.toUnwrapped());const Yn=dn=>{sr!=null&&(sr.value=Tt*q),Er.draw(v,ne.TRIANGLES,Ce,dn,Ee,vn.disabled,Hr,h.id,Jr.layoutVertexBuffer,Jr.indexBuffer,Jr.segments,h.paint,v.transform.zoom,or,[Jr.layoutVertexBuffer2,Jr.patternVertexBuffer,Jr.zOffsetVertexBuffer]),sr!=null&&(sr.value=Tt)};if(jt&&!xe){const dn=v.stencilModeForClipping(Rr).ref;dn===0&&Ge&&X.clear({stencil:0});const Nn={func:ne.EQUAL,mask:255};Hr.u_alpha_discard_threshold=.8,Yn(new gn(Nn,dn,255,ne.KEEP,ne.KEEP,ne.INVERT)),Hr.u_alpha_discard_threshold=0,Yn(new gn(Nn,dn,255,ne.KEEP,ne.KEEP,ne.KEEP))}else jt&&xe&&(Hr.u_alpha_discard_threshold=.001),Yn(xe?Cr:v.stencilModeForClipping(Rr))}jt&&(v.resetStencilClippingMasks(),Ge&&X.clear({stencil:0})),q===0||v.depthOcclusion||Ge||v.layersWithOcclusionOpacity.push(v.currentLayer),xe&&(v.forceTerrainMode=!1)},fill:function(v,l,h,x){const E=h.paint.get("fill-color"),L=h.paint.get("fill-opacity"),M=h.is3D(),q=new Dr(v.context.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D);if(L.constantOr(1)===0)return;const X=h.paint.get("fill-emissive-strength"),ne=v.colorModeForDrapableLayerRenderPass(X),ae=h.paint.get("fill-pattern"),xe=v.opaquePassEnabledForLayer()&&!ae.constantOr(1)&&E.constantOr(i.bz.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===xe){const Ce=M?q:v.depthModeForSublayer(1,v.renderPass==="opaque"?Dr.ReadWrite:Dr.ReadOnly);ci(v,l,h,x,Ce,ne,!1)}if(!M&&v.renderPass==="translucent"&&h.paint.get("fill-antialias")){const Ce=M?q:v.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,Dr.ReadOnly);ci(v,l,h,x,Ce,ne,!0)}},"fill-extrusion":function(v,l,h,x){const E=h.paint.get("fill-extrusion-opacity"),L=v.context,M=L.gl,q=v.terrain,X=q&&q.renderingToTexture;if(E===0)return;const ne=v.conflationActive&&v.style.isLayerClipped(h,l.getSource()),ae=v.style.order.indexOf(h.fqid);if(ne&&function(xe,Ce,Ee,Ge,$e){for(const Ye of Ge){const Je=Ce.getTile(Ye).getBucket(Ee);Je&&(Je.updateReplacement(Ye,xe.replacementSource,$e),Je.uploadCentroid(xe.context))}}(v,l,h,x,ae),q||ne)for(const xe of x){const Ce=l.getTile(xe).getBucket(h);Ce&&ti(v.context,l,xe,Ce,h,q,ne)}if(v.renderPass==="shadow"&&v.shadowRenderer){const xe=v.shadowRenderer;if(q&&E<.65&&h._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.a4)return;const Ce=xe.getShadowPassDepthMode(),Ee=xe.getShadowPassColorMode();fi(v,l,h,x,Ce,gn.disabled,Ee,ne)}else if(v.renderPass==="translucent"){const xe=!h.paint.get("fill-extrusion-pattern").constantOr(1),Ce=h.paint.get("fill-extrusion-color").constantOr(i.bz.white);if(!X&&Ce.a!==0){const Ee=new Dr(v.context.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D);E===1&&xe?fi(v,l,h,x,Ee,gn.disabled,qr.unblended,ne):(fi(v,l,h,x,Ee,gn.disabled,qr.disabled,ne),fi(v,l,h,x,Ee,v.stencilModeFor3D(),v.colorModeForRenderPass(),ne),v.resetStencilClippingMasks())}if(v.style.enable3dLights()&&xe&&(!q&&v.transform.projection.name!=="globe"||X)){const Ee=h.paint.get("fill-extrusion-opacity"),Ge=h.paint.get("fill-extrusion-ambient-occlusion-intensity"),$e=h.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Ye=h.paint.get("fill-extrusion-flood-light-intensity"),Je=h.paint.get("fill-extrusion-flood-light-color").toRenderColor(h.lut).toArray01().slice(0,3),ht=Ge>0&&$e>0,gt=Ye>0,ut=(_t,Pt,Tt)=>(1-Tt)*_t+Tt*Pt,wt=_t=>{const Pt=v.depthModeForSublayer(1,Dr.ReadOnly,M.LEQUAL,!0),Tt=h.paint.get(_t?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),jt=ut(.1,3,Tt),Vt=v._showOverdrawInspector;if(!Vt){const Ut=new gn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),Ot=new qr([M.ONE,M.ONE,M.ONE,M.ONE],i.bz.transparent,[!1,!1,!1,!0],M.MIN);$n(v,l,h,x,Pt,Ut,Ot,vn.disabled,_t,"sdf",Ee,Ge,$e,Ye,Je,jt,ne,!1)}{const Ut=Vt?gn.disabled:new gn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),Ot=Vt?v.colorModeForRenderPass():new qr([M.ONE_MINUS_DST_ALPHA,M.DST_ALPHA,M.ONE,M.ONE],i.bz.transparent,[!0,!0,!0,!0]);$n(v,l,h,x,Pt,Ut,Ot,vn.disabled,_t,"color",Ee,Ge,$e,Ye,Je,jt,ne,!1)}};if(X){const _t=(Pt,Tt,jt)=>{const Vt=v.depthModeForSublayer(1,Dr.ReadOnly,M.LEQUAL,!1),Ut=h.paint.get(Pt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ot=ut(.1,3,Ut);{const sr=new qr([M.ONE,M.ONE,M.ONE,M.ONE],i.bz.transparent,[!1,!1,!1,!0]);$n(v,l,h,x,Vt,gn.disabled,sr,vn.disabled,Pt,"clear",Ee,Ge,$e,Ye,Je,Ot,ne,Tt)}{const sr=new gn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),Cr=new qr([M.ONE,M.ONE,M.ONE,M.ONE],i.bz.transparent,[!1,!1,!1,!0],M.MIN);$n(v,l,h,x,Vt,sr,Cr,vn.disabled,Pt,"sdf",Ee,Ge,$e,Ye,Je,Ot,ne,Tt)}{const sr=Pt?M.ZERO:M.ONE_MINUS_DST_ALPHA,Cr=new gn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),Rr=new qr([sr,M.DST_ALPHA,M.ONE_MINUS_DST_ALPHA,M.ZERO],i.bz.transparent,[!0,!0,!0,!0]);$n(v,l,h,x,Vt,Cr,Rr,vn.disabled,Pt,"color",Ee,Ge,$e,Ye,Je,Ot,ne,Tt)}{const sr=new qr([M.ONE,M.ONE,M.ONE,Pt?M.ZERO:M.ONE],i.bz.transparent,[!1,!1,!1,!0],Pt?M.FUNC_ADD:M.MAX);$n(v,l,h,x,Vt,gn.disabled,sr,vn.disabled,Pt,"clear",Ee,Ge,$e,Ye,Je,Ot,ne,Tt,jt)}};if(ht||gt){let Pt;if(v.prepareDrawTile(),q){const Tt=q.drapeBufferSize[0],jt=q.drapeBufferSize[1];Pt=q.framebufferCopyTexture,Pt&&(!Pt||Pt.size[0]===Tt&&Pt.size[1]===jt)||(Pt&&Pt.destroy(),Pt=q.framebufferCopyTexture=new i.T(L,new i.r({width:Tt,height:jt}),M.RGBA8)),Pt.bind(M.LINEAR,M.CLAMP_TO_EDGE),M.copyTexImage2D(M.TEXTURE_2D,0,M.RGBA,0,0,Tt,jt,0)}ht&&_t(!0,!1,Pt),gt&&_t(!1,!0,Pt)}}else ht&&wt(!0),gt&&wt(!1),(ht||gt)&&v.resetStencilClippingMasks()}}},hillshade:function(v,l,h,x){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent"||v.style.disableElevatedTerrain)return;const E=v.context,L=v.terrain&&v.terrain.renderingToTexture,[M,q]=v.renderPass!=="translucent"||L?[{},x]:v.stencilConfigForOverlap(x);for(const X of q){const ne=l.getTile(X);if(ne.needsHillshadePrepare&&v.renderPass==="offscreen")Ji(v,ne,h);else if(v.renderPass==="translucent"){const ae=v.depthModeForSublayer(0,Dr.ReadOnly),xe=h.paint.get("hillshade-emissive-strength"),Ce=v.colorModeForDrapableLayerRenderPass(xe),Ee=L&&v.terrain?v.terrain.stencilModeForRTTOverlap(X):M[X.overscaledZ];to(v,X,ne,h,ae,Ee,Ce)}}E.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,l,h,x,E,L){if(v.renderPass!=="translucent"||h.paint.get("raster-opacity")===0)return;const M=v.transform.projection.name==="globe",q=h.paint.get("raster-elevation")!==0,X=q&&M;if(v.renderElevatedRasterBackface&&!X)return;const ne=v.context,ae=ne.gl,xe=l.getSource(),Ce=function(_t,Pt,Tt,jt){const Vt=Pt.paint.get("raster-color"),Ut=_t.type==="raster-array",Ot=[],sr=Pt.paint.get("raster-resampling"),Cr=Pt.paint.get("raster-color-mix");let Rr=Pt.paint.get("raster-color-range");const wr=[Cr[0],Cr[1],Cr[2],0],Jr=Cr[3];let or=sr==="nearest"?jt.NEAREST:jt.LINEAR;if(Ut&&(Ot.push("RASTER_ARRAY"),Vt||Ot.push("RASTER_COLOR"),sr==="linear"&&Ot.push("RASTER_ARRAY_LINEAR"),or=jt.NEAREST,!Rr&&_t.rasterLayers)){const Fr=_t.rasterLayers.find(({id:Er})=>Er===Pt.sourceLayer);Fr&&Fr.fields&&Fr.fields.range&&(Rr=Fr.fields.range)}if(Rr=Rr||[0,1],Vt){Ot.push("RASTER_COLOR"),Tt.activeTexture.set(jt.TEXTURE2),Pt.updateColorRamp(Rr);let Fr=Pt.colorRampTexture;Fr||(Fr=Pt.colorRampTexture=new i.T(Tt,Pt.colorRamp,jt.RGBA8)),Fr.bind(jt.LINEAR,jt.CLAMP_TO_EDGE)}return{mix:wr,range:Rr,offset:Jr,defines:Ot,resampling:or}}(xe,h,ne,ae);if(xe instanceof i.aD&&!x.length&&!M)return;const Ee=h.paint.get("raster-emissive-strength"),Ge=v.colorModeForDrapableLayerRenderPass(Ee),$e=v.terrain&&v.terrain.renderingToTexture,Ye=!v.options.moving,Je=h.paint.get("raster-resampling")==="nearest"?ae.NEAREST:ae.LINEAR;if(xe instanceof i.aD&&!x.length&&(xe.onNorthPole||xe.onSouthPole)){const _t=q?v.stencilModeFor3D():gn.disabled;return void zi(!!xe.onNorthPole,null,v,l,h,Ee,Ce,vn.disabled,_t)}if(!x.length)return;const[ht,gt]=xe instanceof i.aD||$e?[{},x]:v.stencilConfigForOverlap(x),ut=gt[gt.length-1].overscaledZ;X&&Ce.defines.push("PROJECTION_GLOBE_VIEW"),q&&Ce.defines.push("RENDER_CUTOFF");const wt=(_t,Pt,Tt)=>{for(const jt of _t){const Vt=jt.toUnwrapped(),Ut=l.getTile(jt);if($e&&(!Ut||!Ut.hasData()))continue;ne.activeTexture.set(ae.TEXTURE0);const Ot=gi(Ut,xe,h,Ce);if(!Ot||!Ot.texture)continue;const{texture:sr,mix:Cr,offset:Rr,tileSize:wr,buffer:Jr}=Ot;let or,Fr;$e?(or=Dr.disabled,Fr=jt.projMatrix):q?(or=new Dr(ae.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D),Fr=M?Float32Array.from(v.transform.expandedFarZProjMatrix):v.transform.calculateProjMatrix(Vt,Ye)):(or=v.depthModeForSublayer(jt.overscaledZ-ut,h.paint.get("raster-opacity")===1?Dr.ReadWrite:Dr.ReadOnly,ae.LESS),Fr=v.transform.calculateProjMatrix(Vt,Ye));const Er=v.terrain&&$e?v.terrain.stencilModeForRTTOverlap(jt):ht[jt.overscaledZ],en=L?0:h.paint.get("raster-fade-duration");Ut.registerFadeDuration(en);const nn=l.findLoadedParent(jt,0),kr=uo(Ut,nn,l,v.transform,en);let Hr,Yn;v.terrain&&v.terrain.prepareDrawTile(),ne.activeTexture.set(ae.TEXTURE0),sr.bind(Je,ae.CLAMP_TO_EDGE),ne.activeTexture.set(ae.TEXTURE1),nn?(nn.texture&&nn.texture.bind(Je,ae.CLAMP_TO_EDGE),Hr=Math.pow(2,nn.tileID.overscaledZ-Ut.tileID.overscaledZ),Yn=[Ut.tileID.canonical.x*Hr%1,Ut.tileID.canonical.y*Hr%1]):sr.bind(Je,ae.CLAMP_TO_EDGE),sr.useMipmap&&ne.extTextureFilterAnisotropic&&v.transform.pitch>20&&ae.texParameterf(ae.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const dn=v.transform;let Nn;const ai=q?Qi(dn):[0,0,0,0];let zn,ii,Hi,ki,Ks,fo=0;if(X&&xe instanceof i.aD&&xe.coordinates.length>3)zn=Float32Array.from(i.b5(i.cC(new i.bP(0,0,0)))),ii=Float32Array.from(dn.globeMatrix),Hi=Float32Array.from(i.cy(dn)),ki=[i.am(dn.center.lng),i.at(dn.center.lat)],Nn=xe.elevatedGlobePerspectiveTransform,Ks=xe.elevatedGlobeGridMatrix||new Float32Array(9);else if(X){const ts=i.cz(jt.canonical);fo=i.cA(ts.getCenter().lat),zn=Float32Array.from(i.b5(i.cC(jt.canonical))),ii=Float32Array.from(dn.globeMatrix),Hi=Float32Array.from(i.cy(dn)),ki=[i.am(dn.center.lng),i.at(dn.center.lat)],Nn=[0,0],Ks=Float32Array.from(i.cB(jt.canonical,ts,fo,dn.worldSize/dn._pixelsPerMercatorPixel))}else Nn=xe instanceof i.aD?xe.perspectiveTransform:[0,0],zn=new Float32Array(16),ii=new Float32Array(9),Hi=new Float32Array(16),ki=[0,0],Ks=new Float32Array(9);const Do=af(Fr,zn,ii,Hi,Ks,Yn||[0,0],i.a9(v.transform.zoom),ki,ai,Hr||1,kr,h,Nn,q?h.paint.get("raster-elevation"):0,2,Cr,Rr,Ce.range,wr,Jr,Ee),Nd=v.isTileAffectedByFog(jt),Xa=v.getOrCreateProgram("raster",{defines:Ce.defines,overrideFog:Nd});if(v.uploadCommonUniforms(ne,Xa,Vt),xe instanceof i.aD){const ts=xe.elevatedGlobeVertexBuffer,ao=xe.elevatedGlobeIndexBuffer;if($e||!M)xe.boundsBuffer&&xe.boundsSegments&&Xa.draw(v,ae.TRIANGLES,or,gn.disabled,Ge,vn.disabled,Do,h.id,xe.boundsBuffer,v.quadTriangleIndexBuffer,xe.boundsSegments);else if(ts&&ao){const ia=dn.zoom<=i.c2?xe.elevatedGlobeSegments:xe.getSegmentsForLongitude(dn.center.lng);ia&&Xa.draw(v,ae.TRIANGLES,or,gn.disabled,Ge,Pt,Do,h.id,ts,ao,ia)}}else if(X){or=new Dr(ae.LEQUAL,Dr.ReadOnly,v.depthRangeFor3D);const ts=v.globeSharedBuffers;if(ts){const[ao,ia,ro]=ts.getGridBuffers(fo,!1);Xa.draw(v,ae.TRIANGLES,or,Tt||Er,v.colorModeForRenderPass(),Pt,Do,h.id,ao,ia,ro)}}else{const{tileBoundsBuffer:ts,tileBoundsIndexBuffer:ao,tileBoundsSegments:ia}=v.getTileBoundsBuffers(Ut);Xa.draw(v,ae.TRIANGLES,or,Er,Ge,vn.disabled,Do,h.id,ts,ao,ia)}}if(!(xe instanceof i.aD)&&X)for(const jt of _t){const Vt=jt.canonical.y===(1<<jt.canonical.z)-1;jt.canonical.y===0&&zi(!0,jt,v,l,h,Ee,Ce,Pt,Tt||gn.disabled),Vt&&zi(!1,jt,v,l,h,Ee,Ce,Pt===vn.frontCW?vn.backCW:vn.frontCW,Tt||gn.disabled)}};X?wt(gt,v.renderElevatedRasterBackface?vn.backCW:vn.frontCW,v.stencilModeFor3D()):wt(gt,vn.disabled,void 0),v.resetStencilClippingMasks()},"raster-particle":function(v,l,h,x,E,L){v.renderPass==="offscreen"&&function(M,q,X,ne){if(!ne.length)return;const ae=M.context,xe=ae.gl,Ce=q.getSource();if(!(Ce instanceof Sl))return;const Ee=Math.ceil(Math.sqrt(X.paint.get("raster-particle-count")));let Ge=X.particlePositionRGBAImage;if(!Ge||Ge.width!==Ee){const gt=function(ut){const wt=ut*ut,_t=new Uint8Array(4*wt),Pt=function(jt){return jt|=0,jt=Math.imul(2747636419^jt,2654435769),jt=Math.imul(jt^jt>>>16,2654435769),((jt=Math.imul(jt^jt>>>16,2654435769))>>>0)/4294967296},Tt=1/1.1;for(let jt=0;jt<wt;jt++){const Vt=Tt*(Pt(2*jt+0)+w),Ut=Tt*(Pt(2*jt+1)+w),Ot=255*Vt%1,sr=255*Ut%1,Cr=Ot,Rr=Ut-sr/255,wr=sr;_t[4*jt+0]=255*(Vt-Ot/255),_t[4*jt+1]=255*Cr,_t[4*jt+2]=255*Rr,_t[4*jt+3]=255*wr}return _t}(Ee);Ge=X.particlePositionRGBAImage=new i.r({width:Ee,height:Ee},gt)}let $e=X.particleFramebuffer;$e?$e.width!==Ee&&($e.destroy(),$e=X.particleFramebuffer=ae.createFramebuffer(Ee,Ee,!0,null)):$e=X.particleFramebuffer=ae.createFramebuffer(Ee,Ee,!0,null);const Ye=[];for(const gt of ne){const ut=q.getTile(gt);if(!(ut instanceof Re))continue;const wt=Os(ut,Ce,X);if(!wt)continue;const _t=[ut.tileSize,ut.tileSize];let Pt=X.tileFramebuffer;Pt||(Pt=X.tileFramebuffer=ae.createFramebuffer(_t[0],_t[1],!0,null));let Tt=ut.rasterParticleState;Tt||(Tt=ut.rasterParticleState=new Ko(ae,gt,_t,Ge));const jt=Tt.update(X.lastInvalidatedAt);Tt.particleTextureDimension!==Ee&&Tt.updateParticleTexture(gt,Ge);const Vt=Tt.targetColorTexture;Tt.targetColorTexture=Tt.backgroundColorTexture,Tt.backgroundColorTexture=Vt;const Ut=Tt.particleTexture0;Tt.particleTexture0=Tt.particleTexture1,Tt.particleTexture1=Ut,Ye.push([gt,wt,Tt,jt])}if(Ye.length===0)return;const Je=i.q.now(),ht=X.previousDrawTimestamp?.001*(Je-X.previousDrawTimestamp):.0167;if(X.previousDrawTimestamp=Je,X.hasColorMap()){ae.activeTexture.set(xe.TEXTURE0+2);let gt=X.colorRampTexture;gt||(gt=X.colorRampTexture=new i.T(ae,X.colorRamp,xe.RGBA8)),gt.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}ae.bindFramebuffer.set(X.tileFramebuffer.framebuffer),function(gt,ut,wt){const _t=gt.context,Pt=_t.gl,Tt=ut.tileFramebuffer;_t.activeTexture.set(Pt.TEXTURE0);const jt={u_texture:0,u_opacity:1.05*(Ut=ut.paint.get("raster-particle-fade-opacity-factor"))/(Ut+.05)},Vt=gt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Ut;for(const Ot of wt){const[,,sr,Cr]=Ot;Tt.colorAttachment.set(sr.targetColorTexture.texture),_t.viewport.set([0,0,Tt.width,Tt.height]),_t.clear({color:i.bz.transparent}),Cr&&(sr.backgroundColorTexture.bind(Pt.NEAREST,Pt.CLAMP_TO_EDGE),Vt.draw(gt,Pt.TRIANGLES,Dr.disabled,gn.disabled,qr.alphaBlended,vn.disabled,jt,ut.id,gt.viewportBuffer,gt.quadTriangleIndexBuffer,gt.viewportSegments))}}(M,X,Ye),function(gt,ut,wt,_t){const Pt=gt.context,Tt=Pt.gl,jt=wt.tileFramebuffer,Vt=gt.transform.projection.name==="globe",Ut=wt.paint.get("raster-particle-max-speed");for(const Ot of _t){const[sr,Cr,Rr]=Ot;Pt.activeTexture.set(Tt.TEXTURE0+0),Cr.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),jt.colorAttachment.set(Rr.targetColorTexture.texture);const wr=gt.getOrCreateProgram("rasterParticleDraw",{defines:Cr.defines,overrideFog:!1});Pt.activeTexture.set(Tt.TEXTURE0+1);const Jr=Cr.scalarData?[]:[0,1,2,3].map(Er=>i.c$[Er](sr));Jr.push(sr);const or=sr.canonical.x,Fr=sr.canonical.y;for(const Er of Jr){const en=ut.getTile(Vt?Er.wrapped():Er);if(!en)continue;const nn=en.rasterParticleState;if(!nn)continue;const kr=Er.canonical.x+(1<<Er.canonical.z)*(Er.wrap-sr.wrap),Hr=Er.canonical.y;nn.particleTexture0.bind(Tt.NEAREST,Tt.CLAMP_TO_EDGE);const Yn=$(1,nn.particleTexture0.size[0],[kr-or,Hr-Fr],0,Cr.texture.size,2,Ut,Cr.textureOffset,Cr.scale,Cr.offset);wr.draw(gt,Tt.POINTS,Dr.disabled,gn.disabled,qr.alphaBlended,vn.disabled,Yn,wt.id,nn.particleIndexBuffer,void 0,nn.particleSegment)}}}(M,q,X,Ye),ae.bindFramebuffer.set(X.particleFramebuffer.framebuffer),function(gt,ut,wt,_t){const Pt=gt.context,Tt=Pt.gl,jt=ut.paint.get("raster-particle-max-speed"),Vt=_t*ut.paint.get("raster-particle-speed-factor")*.15,Ut=function(sr){return Math.pow(sr,6)}(.01+1*ut.paint.get("raster-particle-reset-rate-factor")),Ot=ut.particleFramebuffer;Pt.viewport.set([0,0,Ot.width,Ot.height]);for(const sr of wt){const[,Cr,Rr]=sr;Pt.activeTexture.set(Tt.TEXTURE0+0),Cr.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),Pt.activeTexture.set(Tt.TEXTURE0+1);const wr=Rr.particleTexture0;wr.bind(Tt.NEAREST,Tt.CLAMP_TO_EDGE);const Jr=ee(1,wr.size[0],0,Cr.texture.size,jt,Vt,Ut,Cr.textureOffset,Cr.scale,Cr.offset);Ot.colorAttachment.set(Rr.particleTexture1.texture),Pt.clear({color:i.bz.transparent}),gt.getOrCreateProgram("rasterParticleUpdate",{defines:Cr.defines}).draw(gt,Tt.TRIANGLES,Dr.disabled,gn.disabled,qr.unblended,vn.disabled,Jr,ut.id,gt.viewportBuffer,gt.quadTriangleIndexBuffer,gt.viewportSegments)}}(M,X,Ye,ht)}(v,l,h,x),v.renderPass==="translucent"&&(function(M,q,X,ne,ae){const xe=M.context,Ce=xe.gl,Ee=q.getSource().tileSize,Ge=5*(1-i.a7(i.bU,i.bU+1,M.transform.zoom))*Ee+X.paint.get("raster-particle-elevation"),$e=!M.options.moving,Ye=M.transform.projection.name==="globe";if(!ne.length)return;const[Je,ht]=M.stencilConfigForOverlap(ne),gt=[];Ye&&gt.push("PROJECTION_GLOBE_VIEW");const ut=M.stencilModeFor3D();for(const wt of ht){const _t=wt.toUnwrapped(),Pt=q.getTile(wt);if(!Pt.rasterParticleState)continue;const Tt=Pt.rasterParticleState,jt=100;Pt.registerFadeDuration(jt);const Vt=q.findLoadedParent(wt,0),Ut=uo(Pt,Vt,q,M.transform,jt);let Ot,sr;M.terrain&&M.terrain.prepareDrawTile(),xe.activeTexture.set(Ce.TEXTURE0),Tt.targetColorTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),xe.activeTexture.set(Ce.TEXTURE1),Vt&&Vt.rasterParticleState?(Vt.rasterParticleState.targetColorTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Ot=Math.pow(2,Vt.tileID.overscaledZ-Pt.tileID.overscaledZ),sr=[Pt.tileID.canonical.x*Ot%1,Pt.tileID.canonical.y*Ot%1]):Tt.targetColorTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE);const Cr=Ye?Float32Array.from(M.transform.expandedFarZProjMatrix):M.transform.calculateProjMatrix(_t,$e),Rr=M.transform,wr=Ws(Rr),Jr=i.cz(wt.canonical),or=i.cA(Jr.getCenter().lat);let Fr,Er,en,nn,kr;Ye?(Fr=Float32Array.from(i.b5(i.cC(wt.canonical))),Er=Float32Array.from(Rr.globeMatrix),en=Float32Array.from(i.cy(Rr)),nn=[i.am(Rr.center.lng),i.at(Rr.center.lat)],kr=Float32Array.from(i.cB(wt.canonical,Jr,or,Rr.worldSize/Rr._pixelsPerMercatorPixel))):(Fr=new Float32Array(16),Er=new Float32Array(9),en=new Float32Array(16),nn=[0,0],kr=new Float32Array(9));const Hr=I(Cr,Fr,Er,en,kr,sr||[0,0],i.a9(M.transform.zoom),nn,wr,Ot||1,Ut,Ge),Yn=M.isTileAffectedByFog(wt),dn=M.getOrCreateProgram("rasterParticle",{defines:gt,overrideFog:Yn});if(M.uploadCommonUniforms(xe,dn,_t),Ye){const Nn=new Dr(Ce.LEQUAL,Dr.ReadOnly,M.depthRangeFor3D),ai=0,zn=M.globeSharedBuffers;if(zn){const[ii,Hi,ki]=zn.getGridBuffers(or,ai!==0);dn.draw(M,Ce.TRIANGLES,Nn,ut,qr.alphaBlended,M.renderElevatedRasterBackface?vn.frontCCW:vn.backCCW,Hr,X.id,ii,Hi,ki)}}else{const Nn=M.depthModeForSublayer(0,Dr.ReadOnly),ai=Je[wt.overscaledZ],{tileBoundsBuffer:zn,tileBoundsIndexBuffer:ii,tileBoundsSegments:Hi}=M.getTileBoundsBuffers(Pt);dn.draw(M,Ce.TRIANGLES,Nn,ai,qr.alphaBlended,vn.disabled,Hr,X.id,zn,ii,Hi)}}M.resetStencilClippingMasks()}(v,l,h,x),v.style.map.triggerRepaint())},background:function(v,l,h,x){const E=h.paint.get("background-color"),L=h.paint.get("background-opacity"),M=h.paint.get("background-emissive-strength"),q=h.paint.get("background-pitch-alignment")==="viewport";if(L===0)return;const X=v.context,ne=X.gl,ae=v.transform,xe=ae.tileSize,Ce=h.paint.get("background-pattern");let Ee;if(Ce!==void 0&&(Ce===null||(Ee=v.imageManager.getPattern(Ce.toString(),h.scope,v.style.getLut(h.scope)),!Ee)))return;const Ge=!Ce&&E.a===1&&L===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Ge)return;const $e=gn.disabled,Ye=v.depthModeForSublayer(0,Ge==="opaque"?Dr.ReadWrite:Dr.ReadOnly),Je=v.colorModeForDrapableLayerRenderPass(M),ht=Ce?"backgroundPattern":"background";let gt,ut=x;if(ut||(gt=v.getBackgroundTiles(),ut=Object.values(gt).map(wt=>wt.tileID)),Ce&&(X.activeTexture.set(ne.TEXTURE0),v.imageManager.bind(v.context,h.scope)),q){const wt=v.getOrCreateProgram(ht,{overrideFog:!1,overrideRtt:!0}),_t=new Float32Array(i.a6.mat4.identity([])),Pt=new i.aA(0,0,0,0,0),Tt=Ce?Pe(_t,M,L,v,0,h.scope,Ee,q,{tileID:Pt,tileSize:xe}):Le(_t,M,L,E.toRenderColor(h.lut));wt.draw(v,ne.TRIANGLES,Ye,$e,Je,vn.disabled,Tt,h.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments)}else for(const wt of ut){const _t=v.isTileAffectedByFog(wt),Pt=v.getOrCreateProgram(ht,{overrideFog:_t}),Tt=wt.toUnwrapped(),jt=x?wt.projMatrix:v.transform.calculateProjMatrix(Tt);v.prepareDrawTile();const Vt=l?l.getTile(wt):gt?gt[wt.key]:new ce(wt,xe,ae.zoom,v),Ut=Ce?Pe(jt,M,L,v,0,h.scope,Ee,q,{tileID:wt,tileSize:xe}):Le(jt,M,L,E.toRenderColor(h.lut));v.uploadCommonUniforms(X,Pt,Tt);const{tileBoundsBuffer:Ot,tileBoundsIndexBuffer:sr,tileBoundsSegments:Cr}=v.getTileBoundsBuffers(Vt);Pt.draw(v,ne.TRIANGLES,Ye,$e,Je,vn.disabled,Ut,h.id,Ot,sr,Cr)}},sky:function(v,l,h){const x=v._atmosphere?i.a9(v.transform.zoom):1,E=h.paint.get("sky-opacity")*x;if(E===0)return;const L=v.context,M=h.paint.get("sky-type"),q=new Dr(L.gl.LEQUAL,Dr.ReadOnly,[0,1]),X=v.frameCounter/1e3%1;M==="atmosphere"?v.renderPass==="offscreen"?h.needsSkyboxCapture(v)&&(function(ne,ae,xe,Ce){const Ee=ne.context,Ge=Ee.gl;let $e=ae.skyboxFbo;if(!$e){$e=ae.skyboxFbo=Ee.createFramebuffer(32,32,!0,null),ae.skyboxGeometry=new ld(Ee),ae.skyboxTexture=Ee.gl.createTexture(),Ge.bindTexture(Ge.TEXTURE_CUBE_MAP,ae.skyboxTexture),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_WRAP_S,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_WRAP_T,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_MIN_FILTER,Ge.LINEAR),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_MAG_FILTER,Ge.LINEAR);for(let gt=0;gt<6;++gt)Ge.texImage2D(Ge.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,Ge.RGBA,32,32,0,Ge.RGBA,Ge.UNSIGNED_BYTE,null)}Ee.bindFramebuffer.set($e.framebuffer),Ee.viewport.set([0,0,32,32]);const Ye=ae.getCenter(ne,!0),Je=ne.getOrCreateProgram("skyboxCapture"),ht=new Float64Array(16);i.a6.mat4.identity(ht),i.a6.mat4.rotateY(ht,ht,.5*-Math.PI),uc(ne,ae,Je,ht,Ye,0),i.a6.mat4.identity(ht),i.a6.mat4.rotateY(ht,ht,.5*Math.PI),uc(ne,ae,Je,ht,Ye,1),i.a6.mat4.identity(ht),i.a6.mat4.rotateX(ht,ht,.5*-Math.PI),uc(ne,ae,Je,ht,Ye,2),i.a6.mat4.identity(ht),i.a6.mat4.rotateX(ht,ht,.5*Math.PI),uc(ne,ae,Je,ht,Ye,3),i.a6.mat4.identity(ht),uc(ne,ae,Je,ht,Ye,4),i.a6.mat4.identity(ht),i.a6.mat4.rotateY(ht,ht,Math.PI),uc(ne,ae,Je,ht,Ye,5),Ee.viewport.set([0,0,ne.width,ne.height])}(v,h),h.markSkyboxValid(v)):v.renderPass==="sky"&&function(ne,ae,xe,Ce,Ee){const Ge=ne.context,$e=Ge.gl,Ye=ne.transform,Je=ne.getOrCreateProgram("skybox");Ge.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_CUBE_MAP,ae.skyboxTexture);const ht=((gt,ut,wt,_t,Pt)=>({u_matrix:gt,u_sun_direction:ut,u_cubemap:0,u_opacity:_t,u_temporal_offset:Pt}))(Ye.skyboxMatrix,ae.getCenter(ne,!1),0,Ce,Ee);ne.uploadCommonUniforms(Ge,Je),Je.draw(ne,$e.TRIANGLES,xe,gn.disabled,ne.colorModeForRenderPass(),vn.backCW,ht,"skybox",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)}(v,h,q,E,X):M==="gradient"&&v.renderPass==="sky"&&function(ne,ae,xe,Ce,Ee){const Ge=ne.context,$e=Ge.gl,Ye=ne.transform,Je=ne.getOrCreateProgram("skyboxGradient");ae.skyboxGeometry||(ae.skyboxGeometry=new ld(Ge)),Ge.activeTexture.set($e.TEXTURE0);let ht=ae.colorRampTexture;ht||(ht=ae.colorRampTexture=new i.T(Ge,ae.colorRamp,$e.RGBA8)),ht.bind($e.LINEAR,$e.CLAMP_TO_EDGE);const gt=((ut,wt,_t,Pt,Tt)=>({u_matrix:ut,u_color_ramp:0,u_center_direction:wt,u_radius:i.bB(_t),u_opacity:Pt,u_temporal_offset:Tt}))(Ye.skyboxMatrix,ae.getCenter(ne,!1),ae.paint.get("sky-gradient-radius"),Ce,Ee);ne.uploadCommonUniforms(Ge,Je),Je.draw(ne,$e.TRIANGLES,xe,gn.disabled,ne.colorModeForRenderPass(),vn.backCW,gt,"skyboxGradient",ae.skyboxGeometry.vertexBuffer,ae.skyboxGeometry.indexBuffer,ae.skyboxGeometry.segment)}(v,h,q,E,X)},debug:function(v,l,h,x,E,L){for(let M=0;M<h.length;M++)if(E){const ne=new i.bz(x.r*.8,x.g*.8,x.b*.8,1);ya(v,l,h[M],x,-1,-1,L),ya(v,l,h[M],x,-1,1,L),ya(v,l,h[M],x,1,1,L),ya(v,l,h[M],x,1,-1,L),ya(v,l,h[M],ne,0,0,L)}else ya(v,l,h[M],x,0,0,L)},custom:function(v,l,h,x){const E=v.context,L=h.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&h.isDraped(l)){if(v.renderPass==="offscreen"){const M=L.prerender;if(M){if(v.setCustomLayerDefaults(),E.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const q=v.transform.pointMerc;M.call(L,E.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.a9(v.transform.zoom),[q.x,q.y],v.transform.pixelsPerMeterRatio)}else M.call(L,E.gl,v.transform.customLayerMatrix());E.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const q=L.renderToTile;if(q){const X=x[0].canonical,ne=new i.a5(X.x+x[0].wrap*(1<<X.z),X.y,X.z);E.setDepthMode(Dr.disabled),E.setStencilMode(gn.disabled),E.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),q.call(L,E.gl,ne),E.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),E.setColorMode(v.colorModeForRenderPass()),E.setStencilMode(gn.disabled);const M=L.renderingMode==="3d"?new Dr(v.context.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Dr.ReadOnly);if(E.setDepthMode(M),v.transform.projection.name==="globe"){const q=v.transform.pointMerc;L.render(E.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.a9(v.transform.zoom),[q.x,q.y],v.transform.pixelsPerMeterRatio)}else L.render(E.gl,v.transform.customLayerMatrix());E.setDirty(),v.setBaseState(),E.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(v,l,h,x){if(v.renderPass==="opaque")return;const E=h.paint.get("model-opacity");if(E===0)return;const L=h.paint.get("model-cast-shadows");if(v.renderPass==="shadow"&&(!L||v.terrain&&E<.65&&h._transitionablePaint._values["model-opacity"].value.expression instanceof i.a4))return;const M=v.shadowRenderer,q=h.paint.get("model-receive-shadows");M&&(M.useNormalOffset=!0,q||(M.enabled=!1));const X=()=>{M&&(M.useNormalOffset=!0,q||(M.enabled=!0))},ne=l.getSource();if(v.renderPass==="light-beam"&&ne.type!=="batched-model")return;if(ne.type==="vector"||ne.type==="geojson")return function(Je,ht,gt,ut,wt){const _t=Je.transform;if(_t.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${_t.projection.name} projection is not yet implemented`);const Pt=_t.getFreeCameraOptions().position;if(!Je.modelManager)return;const Tt=Je.modelManager;gt.modelManager=Tt;const jt=Je.shadowRenderer;if(!gt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Vt=gt._unevaluatedLayout._values["model-id"],Ut={...gt.layout.get("model-id").parameters},Ot=Je.style.order.indexOf(gt.fqid);for(const sr of ut){const Cr=ht.getTile(sr).getBucket(gt);if(!Cr||Cr.projection.name!==_t.projection.name)continue;const Rr=Cr.getModelUris();Rr&&!Cr.modelsRequested&&(Tt.addModelsFromBucket(Rr,wt),Cr.modelsRequested=!0);const wr=ug(sr,_t);Ut.zoom=wr;const Jr=Vt.possiblyEvaluate(Ut);if(Bu(Je,Cr,sr),au.shadowUniformsInitialized=!1,au.useSingleShadowCascade=!!jt&&jt.getMaxCascadeForTile(sr.toUnwrapped())===0,Je.renderPass==="shadow"&&jt){if(Je.currentShadowCascade===1&&Cr.isInsideFirstShadowMapFrustum)continue;const Er=_t.calculatePosMatrix(sr.toUnwrapped(),_t.worldSize);if(au.tileMatrix.set(Er),au.shadowTileMatrix=Float32Array.from(jt.calculateShadowPassMatrixFromMatrix(Er)),au.aabb.min.fill(0),au.aabb.max[0]=au.aabb.max[1]=i.ab,au.aabb.max[2]=0,uf(Cr,au,Je,gt.scope))continue}const or=1<<sr.canonical.z,Fr=[((Pt.x-sr.wrap)*or-sr.canonical.x)*i.ab,(Pt.y*or-sr.canonical.y)*i.ab,Pt.z*or*i.ab];Je.conflationActive&&Object.keys(Cr.instancesPerModel).length>0&&Je.style.isLayerClipped(gt,ht.getSource())&&Cr.updateReplacement(sr,Je.replacementSource,Ot,wt)&&(Cr.uploaded=!1,Cr.upload(Je.context));for(let Er in Cr.instancesPerModel){const en=Cr.instancesPerModel[Er];en.features.length>0&&(Er=Jr.evaluate(en.features[0].feature,{}));const nn=Tt.getModel(Er,wt);if(nn&&nn.uploaded)for(const kr of nn.nodes)Wa(Je,gt,kr,en,Fr,sr,au)}}}(v,l,h,x,ne.type==="vector"?h.scope:""),void X();if(!ne.loaded())return;if(ne.type==="batched-model")return function(Je,ht,gt,ut){gt.resetLayerRenderingStats(Je);const wt=Je.context,_t=Je.transform,Pt=Je.style.fog,Tt=Je.shadowRenderer;if(_t.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${_t.projection.name} projection is not yet implemented`);const jt=Je.transform.getFreeCameraOptions().position,Vt=i.a6.vec3.scale([],[jt.x,jt.y,jt.z],Je.transform.worldSize),Ut=i.a6.vec3.negate([],Vt),Ot=i.a6.mat4.identity([]),sr=i.de(_t.center.lat,_t.zoom),Cr=i.a6.mat4.fromScaling([],[1,1,1/sr]);i.a6.mat4.translate(Ot,Ot,Ut);const Rr=gt.paint.get("model-opacity"),wr=new Dr(wt.gl.LEQUAL,Dr.ReadWrite,Je.depthRangeFor3D),Jr=new Dr(wt.gl.LEQUAL,Dr.ReadOnly,Je.depthRangeFor3D),or=new i.c9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Fr=Je.renderPass==="shadow",Er=Fr&&Tt?Tt.getCurrentCascadeFrustum():_t.getFrustum(_t.scaleZoom(_t.worldSize)),en=gt.paint.get("model-front-cutoff"),nn=en[2]<1,kr=Ki(Je,gt.paint.get("model-cutoff-fade-range")),Hr=gt.getLayerRenderingStats();(function(Yn,dn,Nn,ai){const zn=Yn.terrain?Yn.terrain.exaggeration():0,ii=Yn.transform.zoom;for(const Hi of ai){const ki=dn.getTile(Hi).getBucket(Nn);ki&&(Yn.conflationActive&&ki.updateReplacement(Hi,Yn.replacementSource),ki.evaluateScale(Yn,Nn),Yn.terrain&&zn>0&&ki.elevationUpdate(Yn.terrain,zn,Hi,Nn.source),ki.needsReEvaluation(Yn,ii,Nn)&&ki.evaluate(Nn))}})(Je,ht,gt,ut),function(){let Yn,dn,Nn;nn?(Yn=ut.length-1,dn=-1,Nn=-1):(Yn=0,dn=ut.length,Nn=1);const ai=new Float64Array(16),zn=i.a6.vec3.create(),ii=new i.P(0,0);for(let Hi=Yn;Hi!==dn;Hi+=Nn){const ki=ut[Hi],Ks=ht.getTile(ki).getBucket(gt);if(!Ks||!Ks.uploaded)continue;let fo=!1;Tt&&(fo=Tt.getMaxCascadeForTile(ki.toUnwrapped())===0);const Do=_t.calculatePosMatrix(ki.toUnwrapped(),_t.worldSize),Nd=Ks.modelTraits;!Fr&&nn&&(i.a6.mat4.invert(ai,Do),i.a6.vec3.transformMat4(zn,Vt,ai),ii.x=zn[0],ii.y=zn[1]);const Xa=[];for(const ts of Ks.getNodesInfo()){if(ts.hiddenByReplacement||!ts.node.meshes)continue;const ao=ts.node;let ia=0;Je.terrain&&ao.elevation&&(ia=ao.elevation*Je.terrain.exaggeration());const ro=(()=>{const Io=ts.aabb;return or.min=[...Io.min],or.max=[...Io.max],or.min[2]+=ia,or.max[2]+=ia,i.a6.vec3.transformMat4(or.min,or.min,Do),i.a6.vec3.transformMat4(or.max,or.max,Do),or})(),Oi=ts.evaluatedScale;if(Oi[0]<=1&&Oi[1]<=1&&Oi[2]<=1&&ro.intersects(Er)===0)continue;if(!Fr&&nn){const Io=.16666666666666666;ts.cameraCollisionOpacity=Vt[0]>ro.min[0]&&Vt[0]<ro.max[0]&&Vt[1]>ro.min[1]&&Vt[1]<ro.max[1]&&Vt[2]*sr<ro.max[2]&&ao.footprint&&i.bu(ii,ao.footprint)?Math.max(ts.cameraCollisionOpacity-Io,0):Math.min(1,ts.cameraCollisionOpacity+Io)}const Ts=[...Do],Vs=ao.anchor?ao.anchor[0]:0,Ia=ao.anchor?ao.anchor[1]:0;i.a6.mat4.translate(Ts,Ts,[Vs*(Oi[0]-1),Ia*(Oi[1]-1),ia]),i.a6.vec3.exactEquals(Oi,i.dh)||i.a6.mat4.scale(Ts,Ts,Oi);const Ya=i.a6.mat4.multiply([],Ts,ao.matrix),fs=i.a6.mat4.multiply([],_t.expandedFarZProjMatrix,Ya),Il=i.a6.mat4.multiply([],_t.expandedFarZProjMatrix,Ts),Xl=i.a6.vec4.transformMat4([],[Vs,Ia,ia,1],fs)[2];ao.hidden=!1;let Nl=Rr;Fr||(nn&&(Nl*=ts.cameraCollisionOpacity,Nl*=as(Ts,_t,ts.aabb,en)),Nl*=ho(kr,Xl)),Nl!==0?Xa.push({nodeInfo:ts,depth:Xl,opacity:Nl,wvpForNode:fs,wvpForTile:Il,nodeModelMatrix:Ya,tileModelMatrix:Ts}):ao.hidden=!0}Fr||Xa.sort((ts,ao)=>!nn||ts.opacity===1&&ao.opacity===1?ts.depth<ao.depth?-1:1:ts.opacity===1?-1:ao.opacity===1?1:ts.depth>ao.depth?-1:1);for(const ts of Xa){const ao=ts.nodeInfo,ia=ao.node;let ro=i.a6.mat4.multiply([],Cr,ts.tileModelMatrix);i.a6.mat4.multiply(ro,Ot,ro);const Oi=i.a6.mat4.invert([],ro);i.a6.mat4.transpose(Oi,Oi),i.a6.mat4.scale(Oi,Oi,dc),ro=i.a6.mat4.multiply(ro,ro,ia.matrix);const Ts=Je.renderPass==="light-beam",Vs=Nd&i.dj.HasMapboxMeshFeatures,Ia=Vs?0:ao.evaluatedRMEA[0][2];for(let Ya=0;Ya<ia.meshes.length;++Ya){const fs=ia.meshes[Ya],Il=Ya===ia.lightMeshIndex;let Xl=ts.wvpForNode;if(Il){if(!Ts&&!Je.terrain&&Je.shadowRenderer){Je.currentLayer<Je.firstLightBeamLayer&&(Je.firstLightBeamLayer=Je.currentLayer);continue}Xl=ts.wvpForTile}else if(Ts)continue;const Nl={defines:[]},Io=[];if(Sh(Nl.defines,Io,fs,Je,gt.lut),Vs||Nl.defines.push("DIFFUSE_SHADED"),fo&&Nl.defines.push("SHADOWS_SINGLE_CASCADE"),Hr&&(Fr?Hr.numRenderedVerticesInShadowPass+=fs.vertexArray.length:Hr.numRenderedVerticesInTransparentPass+=fs.vertexArray.length),Fr){Yc(fs,ts.nodeModelMatrix,Je,gt);continue}let cu=null;if(Pt){const pf=Su(ts.nodeModelMatrix,Je.transform);if(cu=new Float32Array(pf),_t.projection.name!=="globe"){const ep=fs.aabb.min,Mh=fs.aabb.max,[LA,IA]=Pt.getOpacityForBounds(pf,ep[0],ep[1],Mh[0],Mh[1]);Nl.overrideFog=LA>=rn||IA>=rn}}const uu=fs.material;let Fd;uu.occlusionTexture&&uu.occlusionTexture.offsetScale&&(Fd=uu.occlusionTexture.offsetScale,Nl.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!Fr&&Tt&&(Tt.useNormalOffset=!!fs.normalBuffer);const pd=Je.getOrCreateProgram("model",Nl);!Fr&&Tt&&Tt.setupShadowsFromMatrix(ts.tileModelMatrix,pd,Tt.useNormalOffset),Je.uploadCommonUniforms(wt,pd,null,cu);const Fu=uu.pbrMetallicRoughness;Fu.metallicFactor=.9,Fu.roughnessFactor=.5;const Pd=je(new Float32Array(Xl),new Float32Array(ro),new Float32Array(Oi),new Float32Array(ia.matrix),Je,ts.opacity,Fu.baseColorFactor.toRenderColor(null),uu.emissiveFactor,Fu.metallicFactor,Fu.roughnessFactor,uu,Ia,gt,[0,0,0],Fd);!Il&&(ao.hasTranslucentParts||ts.opacity<1)&&pd.draw(Je,wt.gl.TRIANGLES,wr,gn.disabled,qr.disabled,vn.backCCW,Pd,gt.id,fs.vertexBuffer,fs.indexBuffer,fs.segments,gt.paint,Je.transform.zoom,void 0,Io),pd.draw(Je,wt.gl.TRIANGLES,Il?Jr:wr,gn.disabled,Il||ts.opacity<1||ao.hasTranslucentParts?qr.alphaBlended:qr.unblended,vn.backCCW,Pd,gt.id,fs.vertexBuffer,fs.indexBuffer,fs.segments,gt.paint,Je.transform.zoom,void 0,Io)}}}}()}(v,l,h,x),void X();if(ne.type!=="model")return;const ae=ne.getModels(),xe=[],Ce=v.transform.getFreeCameraOptions().position,Ee=i.a6.vec3.scale([],[Ce.x,Ce.y,Ce.z],v.transform.worldSize);i.a6.vec3.negate(Ee,Ee);const Ge=[],$e=[];let Ye=0;for(const Je of ae){const ht=h.paint.get("model-rotation").constantOr(null),gt=h.paint.get("model-scale").constantOr(null),ut=h.paint.get("model-translation").constantOr(null);Je.computeModelMatrix(v,ht,gt,ut,!0,!0,!1);const wt=i.a6.mat4.identity([]),_t=i.de(Je.position.lat,v.transform.zoom),Pt=i.a6.mat4.fromScaling([],[1,1,1/_t]);i.a6.mat4.translate(wt,wt,Ee),xe.push({zScaleMatrix:Pt,negCameraPosMatrix:wt});for(const Tt of Je.nodes)cd(v.transform,Tt,Je.matrix,v.transform.expandedFarZProjMatrix,Ye,Ge,$e);Ye++}if(Ge.sort((Je,ht)=>ht.depth-Je.depth),v.renderPass!=="shadow"){if(E===1)for(const Je of $e)ou(Je,v,h,xe[Je.modelIndex],gn.disabled,v.colorModeForRenderPass());else{for(const Je of $e)ou(Je,v,h,xe[Je.modelIndex],gn.disabled,qr.disabled);for(const Je of $e)ou(Je,v,h,xe[Je.modelIndex],v.stencilModeFor3D(),v.colorModeForRenderPass());v.resetStencilClippingMasks()}for(const Je of Ge)ou(Je,v,h,xe[Je.modelIndex],gn.disabled,v.colorModeForRenderPass());X()}else{for(const Je of $e)Yc(Je.mesh,Je.nodeModelMatrix,v,h);for(const Je of Ge)Yc(Je.mesh,Je.nodeModelMatrix,v,h);X()}}},Tu={model:function(v,l,h){const x=l.getSource();if(!x.loaded())return;if(x.type==="vector"||x.type==="geojson")return void(h.modelManager&&h.modelManager.upload(h,x.type==="vector"?v.scope:""));if(x.type==="batched-model"||x.type!=="model")return;const E=x.getModels();for(const L of E)L.upload(h.context)},raster:function(v,l,h){const x=l.getSource();if(!(x instanceof Sl&&x.loaded()))return;const E=v.sourceLayer||x.rasterLayerIds&&x.rasterLayerIds[0];if(!E)return;const L=v.paint.get("raster-array-band")||x.getInitialBand(E);if(L==null)return;const M=l.getIds().map(q=>l.getTileByID(q));for(const q of M)q.updateNeeded(E,L)&&x.prepareTile(q,E,L)},"raster-particle":function(v,l,h){const x=l.getSource();if(!(x instanceof Sl&&x.loaded()))return;const E=v.sourceLayer||x.rasterLayerIds&&x.rasterLayerIds[0];if(!E)return;const L=v.paint.get("raster-particle-array-band")||x.getInitialBand(E);if(L==null)return;const M=l.getIds().map(q=>l.getTileByID(q));for(const q of M)q.updateNeeded(E,L)&&x.prepareTile(q,E,L)}};class rh{constructor(l,h,x,E){this.context=new ct(l,h),this.transform=x,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=E,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const L=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const q of L)this._debugParams.enabledLayers[q]=!0;E.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),E.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),E.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const q of L)E.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],q);this.occlusionParams=new Bh(E),this.setup(),this.numSublayers=Jt.maxUnderzooming+Jt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new sc(this),this._wireframeDebugCache=new Bc,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const M=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,M,l.RGBA8),this._clippingActiveLastFrame=!1}updateTerrain(l,h){const x=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(x||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new nt(this,l));const E=this._terrain;this.transform.elevation=x?E:null,E.update(l,this.transform,h),this.transform.elevation&&!E.enabled&&(this.transform.elevation=null)}_updateFog(l){const h=l.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[x,E]=h.getFovAdjustedRange(this.transform._fov);if(x>E)return void(this.transform.fogCullDistSq=null);const L=x+.78*(E-x);this.transform.fogCullDistSq=L*L}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(l){l&&!this._terrain&&(this._terrain=new nt(this,this.style)),this._forceTerrainMode=l}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(l,h){if(this.width=l*i.q.devicePixelRatio,this.height=h*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style.order)this.style._mergedLayers[x].resize()}setup(){const l=this.context,h=new i.a_;h.emplaceBack(0,0),h.emplaceBack(i.ab,0),h.emplaceBack(0,i.ab),h.emplaceBack(i.ab,i.ab),this.tileExtentBuffer=l.createVertexBuffer(h,i.b0.members),this.tileExtentSegments=i.b1.simpleSegment(0,0,4,2);const x=new i.a_;x.emplaceBack(0,0),x.emplaceBack(i.ab,0),x.emplaceBack(0,i.ab),x.emplaceBack(i.ab,i.ab),this.debugBuffer=l.createVertexBuffer(x,i.b0.members),this.debugSegments=i.b1.simpleSegment(0,0,4,5);const E=new i.a_;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(-1,1),E.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(E,i.b0.members),this.viewportSegments=i.b1.simpleSegment(0,0,4,2);const L=new i.aN;L.emplaceBack(0,0,0,0),L.emplaceBack(i.ab,0,i.ab,0),L.emplaceBack(0,i.ab,0,i.ab),L.emplaceBack(i.ab,i.ab,i.ab,i.ab),this.mercatorBoundsBuffer=l.createVertexBuffer(L,i.b3.members),this.mercatorBoundsSegments=i.b1.simpleSegment(0,0,4,2);const M=new i.aO;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const q=new i.a$;for(const ne of[0,1,3,2,0])q.emplaceBack(ne);this.debugIndexBuffer=l.createIndexBuffer(q),this.emptyTexture=new i.T(l,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA8),this.identityMat=i.a6.mat4.create();const X=this.context.gl;this.stencilClearMode=new gn({func:X.ALWAYS,mask:0},0,255,X.ZERO,X.ZERO,X.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,l.TRIANGLES,Dr.disabled,this.stencilClearMode,qr.disabled,vn.disabled,Ta(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,h,x){if(!h||this.currentStencilSource===h.id||!l.isTileClipped()||!x||x.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let q=!1;for(const X of x)if(this._tileClippingMaskIDs[X.key]===void 0){q=!0;break}if(!q)return}this.currentStencilSource=h.id;const E=this.context,L=E.gl;this.nextStencilID+x.length>256&&this.clearStencil(),E.setColorMode(qr.disabled),E.setDepthMode(Dr.disabled);const M=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const q of x){const X=h.getTile(q),ne=this._tileClippingMaskIDs[q.key]=this.nextStencilID++,{tileBoundsBuffer:ae,tileBoundsIndexBuffer:xe,tileBoundsSegments:Ce}=this.getTileBoundsBuffers(X);M.draw(this,L.TRIANGLES,Dr.disabled,new gn({func:L.ALWAYS,mask:0},ne,255,L.KEEP,L.KEEP,L.REPLACE),qr.disabled,vn.disabled,Ta(q.projMatrix),"$clipping",ae,xe,Ce)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new gn({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const h=this.context.gl;return new gn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(l){const h=this.context.gl,x=l.sort((M,q)=>q.overscaledZ-M.overscaledZ),E=x[x.length-1].overscaledZ,L=x[0].overscaledZ-E+1;if(L>1){this.currentStencilSource=void 0,this.nextStencilID+L>256&&this.clearStencil();const M={};for(let q=0;q<L;q++)M[q+E]=new gn({func:h.GEQUAL,mask:255},q+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=L,[M,x]}return[{[E]:gn.disabled},x]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new qr([l.CONSTANT_COLOR,l.ONE,l.CONSTANT_COLOR,l.ONE],new i.bz(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qr.unblended:qr.alphaBlended}colorModeForDrapableLayerRenderPass(l){const h=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new qr([h.ONE,h.ONE_MINUS_SRC_ALPHA,h.CONSTANT_ALPHA,h.ONE_MINUS_SRC_ALPHA],new i.bz(0,0,0,l===void 0?0:l),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(l,h,x,E=!1){if(this.depthOcclusion)return new Dr(this.context.gl.GREATER,Dr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!E)return Dr.disabled;const L=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Dr(x||this.context.gl.LEQUAL,h,[L,L])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const l=this.context.gl,h=Math.ceil(this.width),x=Math.ceil(this.height),E=this.context.bindFramebuffer.get(),L=l.getParameter(l.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===h&&this.depthFBO.height===x||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),h!==0&&x!==0&&(this.depthFBO=new Qt(this.context,h,x,!1,"texture"),this.depthTexture=new i.T(this.context,{width:h,height:x,data:null},l.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(E),l.bindTexture(l.TEXTURE_2D,L),this.depthFBO&&(l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),l.blitFramebuffer(0,0,h,x,0,0,h,x,l.DEPTH_BUFFER_BIT,l.NEAREST),l.bindFramebuffer(l.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((l,h)=>l+h/this._fpsHistory.length,0))}render(l,h){const x=i.q.now();this._dt=x-this._timeStamp,this._timeStamp=x,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=l.map.repaint,this.style=l,this.options=h;const E=this.style._mergedLayers,L=this.style.order.filter(Ut=>{const Ot=E[Ut];return!(Ot.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Ot.type]});let M=!1,q=!1;for(const Ut of L){const Ot=E[Ut];Ot.type==="circle"&&(M=!0),Ot.type==="symbol"&&(Ot.hasInitialOcclusionOpacityProperties?q=!0:M=!0)}const X=L.map(Ut=>E[Ut]),ne=this.style._mergedSourceCaches;this.imageManager=l.imageManager,this.modelManager=l.modelManager,this.symbolFadeChange=l.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let ae=0,xe=!1;for(const Ut in ne){const Ot=ne[Ut];Ot.used&&(Ot.prepare(this.context),Ot.getSource().usedInConflation&&++ae)}let Ce=!1;for(const Ut of X)Ut.isHidden(this.transform.zoom)||(Ut.type==="clip"&&(Ce=!0),this.prepareLayer(Ut));const Ee={},Ge={},$e={},Ye={},Je={};for(const Ut in ne){const Ot=ne[Ut];Ee[Ut]=Ot.getVisibleCoordinates(),Ge[Ut]=Ee[Ut].slice().reverse(),$e[Ut]=Ot.getVisibleCoordinates(!0).reverse(),Ye[Ut]=Ot.getShadowCasterCoordinates(),Je[Ut]=Ot.sortCoordinatesByDistance(Ee[Ut])}const ht=Ut=>{const Ot=this.style.getLayerSourceCache(Ut);return Ot&&Ot.used?Ot.getSource():null};if(ae||Ce||this._clippingActiveLastFrame){const Ut=[],Ot=[];let sr=0;for(const Cr of X)this.isSourceForClippingOrConflation(Cr,ht(Cr))&&(Ut.push(Cr),Ot.push(sr)),sr++;if(Ut&&(Ce||Ut.length>1)||this._clippingActiveLastFrame){Ce=!1;const Cr=[];for(let Rr=0;Rr<Ut.length;Rr++){const wr=Ut[Rr],Jr=Ot[Rr],or=this.style.getLayerSourceCache(wr);if(!or||!or.used||!or.getSource().usedInConflation&&wr.type!=="clip")continue;let Fr=i.dn,Er=i.bs.None;const en=[];let nn=!0;if(wr.type==="clip"){Fr=Jr;for(const kr of wr.layout.get("clip-layer-types"))Er|=kr==="model"?i.bs.Model:kr==="symbol"?i.bs.Symbol:i.bs.FillExtrusion;for(const kr of wr.layout.get("clip-layer-scope"))en.push(kr);wr.isHidden(this.transform.zoom)?nn=!1:Ce=!0}nn&&Cr.push({layer:wr.fqid,cache:or,order:Fr,clipMask:Er,clipScope:en})}this.replacementSource.setSources(Cr),xe=!0}}this._clippingActiveLastFrame=Ce,xe||this.replacementSource.clear(),this.conflationActive=xe,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Ut=0;Ut<X.length;Ut++){const Ot=X[Ut],sr=Ot.cutoffRange();if(this.longestCutoffRange=Math.max(sr,this.longestCutoffRange),sr>0){const Cr=ht(Ot);Cr&&(this.minCutoffZoom=Math.max(Cr.minzoom,this.minCutoffZoom)),Ot.minzoom&&(this.minCutoffZoom=Math.max(Ot.minzoom,this.minCutoffZoom))}Ot.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Ut),this._lastOcclusionLayer=Ut)}const gt=this.style&&this.style.fog;gt?(this._fogVisible=gt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=gt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding($e),this.opaquePassCutoff=0);const ut=this._shadowRenderer;if(ut){ut.updateShadowParameters(this.transform,this.style.directionalLight);for(const Ut in ne)for(const Ot of Ee[Ut]){let sr={min:0,max:0};this.terrain&&(sr=this.terrain.getMinMaxForTile(Ot)||sr),ut.addShadowReceiver(Ot.toUnwrapped(),sr.min,sr.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Ch(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!Mt.has(this.context.gl))return;this.renderPass="offscreen";for(const Ut of X){const Ot=l.getLayerSourceCache(Ut);if(!Ut.hasOffscreenPass()||Ut.isHidden(this.transform.zoom))continue;const sr=Ot?Ge[Ot.id]:void 0;(Ut.type==="custom"||Ut.type==="raster"||Ut.type==="raster-particle"||Ut.isSky()||sr&&sr.length)&&this.renderLayer(this,Ot,Ut,sr)}this.depthRangeFor3D=[0,1-(X.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ye)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const wt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),_t=(()=>{if(h.showOverdrawInspector)return i.bz.black;const Ut=this.style.fog;if(Ut&&this.transform.projection.supportsFog){const Ot=this.style.getLut(Ut.scope);if(!wt){const sr=Ut.properties.get("color").toRenderColor(Ot).toArray01();return new i.bz(...sr)}if(wt){const sr=Ut.properties.get("space-color").toRenderColor(Ot).toArray01();return new i.bz(...sr)}}return i.bz.transparent})();if(this.context.clear({color:_t,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&wt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const Ut=X[this.currentLayer],Ot=l.getLayerSourceCache(Ut);if(Ut.isSky())continue;const sr=Ot?(Ut.is3D()?Je:Ge)[Ot.id]:void 0;this._renderTileClippingMasks(Ut,Ot,sr),this.renderLayer(this,Ot,Ut,sr)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&wt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const Ut=X[this.currentLayer],Ot=l.getLayerSourceCache(Ut);Ut.isSky()&&this.renderLayer(this,Ot,Ut,Ot?Ge[Ot.id]:void 0)}function Pt(Ut,Ot){let sr;return Ot&&(sr=(Ut.type==="symbol"?$e:Ut.is3D()?Je:Ge)[Ot.id]),sr}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<L.length;){const Ut=X[this.currentLayer];if(Ut.type==="raster"||Ut.type==="raster-particle"){const Ot=l.getLayerSourceCache(Ut);this.renderLayer(this,Ot,Ut,Pt(Ut,Ot))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Tt=0;ut&&(Tt=ut.getShadowCastingLayerCount());let jt=!1,Vt=-1;for(let Ut=0;Ut<L.length;++Ut){const Ot=X[Ut];Ot.isHidden(this.transform.zoom)||Ot.is3D()&&(Vt=Ut)}for(q&&Vt===-1&&(M=!0);this.currentLayer<L.length;){const Ut=X[this.currentLayer],Ot=l.getLayerSourceCache(Ut);if(Ut.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Ut)){if(Ut.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(M&&!jt&&this.terrain&&!this.transform.isOrthographic&&(jt=!0,this.blitDepth()),q&&Vt!==-1&&this.currentLayer===Vt+1&&!this.transform.isOrthographic&&this.blitDepth(),Ut.is3D()||this.terrain||this._renderTileClippingMasks(Ut,Ot,Ot?Ee[Ot.id]:void 0),this.renderLayer(this,Ot,Ut,Pt(Ut,Ot)),!this.terrain&&ut&&Tt>0&&Ut.hasShadowPass()&&--Tt==0&&(ut.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const sr=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=sr;this.currentLayer++){const Cr=X[this.currentLayer];if(!Cr.hasLightBeamPass())continue;const Rr=l.getLayerSourceCache(Cr);this.renderLayer(this,Rr,Cr,Rr?Ge[Rr.id]:void 0)}this.currentLayer=sr,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const sr=this.currentLayer;this.depthOcclusion=!0;for(const Cr of this.layersWithOcclusionOpacity){this.currentLayer=Cr;const Rr=X[this.currentLayer],wr=l.getLayerSourceCache(Rr),Jr=wr?Ge[wr.id]:void 0;Rr.is3D()||this.terrain||this._renderTileClippingMasks(Rr,wr,wr?Ee[wr.id]:void 0),this.renderLayer(this,wr,Rr,Jr)}this.depthOcclusion=!1,this.currentLayer=sr,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Ut=null;X.forEach(Ot=>{const sr=l.getLayerSourceCache(Ot);sr&&!Ot.isHidden(this.transform.zoom)&&sr.getVisibleCoordinates().length&&(!Ut||Ut.getSource().maxzoom<sr.getSource().maxzoom)&&(Ut=sr)}),Ut&&this.options.showTileBoundaries&&Eu.debug(this,Ut,Ut.getVisibleCoordinates(),i.bz.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Eu.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.bz(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Ut){const Ot=Ut.transform.padding;Es(Ut,Ut.transform.height-(Ot.top||0),3,Lo),Es(Ut,Ot.bottom||0,3,ko),cr(Ut,Ot.left||0,3,ca),cr(Ut,Ut.transform.width-(Ot.right||0),3,jr);const sr=Ut.transform.centerPoint;(function(Cr,Rr,wr,Jr){es(Cr,Rr-1,wr-10,2,20,Jr),es(Cr,Rr-10,wr-1,20,2,Jr)})(Ut,sr.x,Ut.transform.height-sr.y,In)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),xe||(this.conflationActive=!1)}prepareLayer(l){this.gpuTimingStart(l);const{unsupportedLayers:h}=this.transform.projection,x=!h||!h.includes(l.type);if(Tu[l.type]&&(x||this.terrain&&l.type==="custom")){const E=this.style.getLayerSourceCache(l);Tu[l.type](l,E,this)}this.gpuTimingEnd()}renderLayer(l,h,x,E){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="sky"||x.type==="custom"||x.type==="model"||x.type==="raster"||x.type==="raster-particle"||E&&E.length)&&(this.id=x.id,this.gpuTimingStart(x),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(x.type)&&(!l.terrain||x.type!=="custom")||x.type==="clip"||Eu[x.type](l,h,x,E,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery,x=this.context.gl;let E=this.gpuTimers[l.id];E||(E=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:x.createQuery()}),E.calls++,x.beginQuery(h.TIME_ELAPSED_EXT,E.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,h=this.context.gl,x=h.createQuery();this.deferredRenderGpuTimeQueries.push(x),h.beginQuery(l.TIME_ELAPSED_EXT,x)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const h={};for(const x in l){const E=l[x],L=this.context.extTimerQuery,M=L.getQueryParameter(E.query,this.context.gl.QUERY_RESULT)/1e6;L.deleteQueryEXT(E.query),h[x]=M}return h}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery,x=this.context.gl;let E=0;for(const L of l)E+=h.getQueryParameter(L,x.QUERY_RESULT)/1e6,h.deleteQueryEXT(L);return E}translatePosMatrix(l,h,x,E,L){if(!x[0]&&!x[1])return l;const M=L?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(M){const ne=Math.sin(M),ae=Math.cos(M);x=[x[0]*ae-x[1]*ne,x[0]*ne+x[1]*ae]}const q=[L?x[0]:i.ak(h,x[0],this.transform.zoom),L?x[1]:i.ak(h,x[1],this.transform.zoom),0],X=new Float32Array(16);return i.a6.mat4.translate(X,l,q),X}saveTileTexture(l){const h=l.size[0],x=this._tileTextures[h];x?x.push(l):this._tileTextures[h]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(l,h,x){const E=x===void 0?this.terrain&&this.terrain.renderingToTexture:x,L=[];return this.style&&this.style.enable3dLights()&&(l==="globeRaster"||l==="terrainRaster"?(L.push("LIGHTING_3D_MODE"),L.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):E||L.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||L.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?L.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):L.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(L.push("TERRAIN"),this.linearFloatFilteringSupported()&&L.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&L.push("GLOBE"),!this._fogVisible||E||h!==void 0&&!h||L.push("FOG","FOG_DITHERING"),E&&L.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&L.push("OVERDRAW_INSPECTOR"),L}getOrCreateProgram(l,h){this.cache=this.cache||{};const x=h&&h.defines||[],E=h&&h.config,L=this.currentGlobalDefines(l,h&&h.overrideFog,h&&h.overrideRtt).concat(x),M=Si.cacheKey(hs[l],l,L,E);return this.cache[M]||(this.cache[M]=new Si(this.context,l,hs[l],E,It[l],L)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(l,h){if(this.style.enable3dLights()){const x=this.style.directionalLight,E=this.style.ambientLight;if(x&&E){const L=((M,q,X)=>{const ne=M.properties.get("direction"),ae=M.properties.get("color").toRenderColor(X.getLut(M.scope)).toArray01(),xe=M.properties.get("intensity"),Ce=q.properties.get("color").toRenderColor(X.getLut(q.scope)).toArray01(),Ee=q.properties.get("intensity"),Ge=[ne.x,ne.y,ne.z],$e=i.cH(Ce,Ee),Ye=i.cH(ae,xe);return{u_lighting_ambient_color:$e,u_lighting_directional_dir:Ge,u_lighting_directional_color:Ye,u_ground_radiance:Xt(Ge,Ye,$e)}})(x,E,this.style);h.setLightsUniformValues(l,L)}}}uploadCommonUniforms(l,h,x,E,L){if(this.uploadCommonLightUniforms(l,h),this.terrain&&this.terrain.renderingToTexture)return;const M=this.style.fog;if(M){const q=M.getOpacity(this.transform.pitch),X=((ne,ae,xe,Ce,Ee,Ge,$e,Ye,Je,ht,gt,ut)=>{const wt=ne.transform,_t=ae.properties.get("color").toRenderColor(ne.style.getLut(ae.scope)).toArray01();_t[3]=Ce;const Pt=ne.frameCounter/1e3%1,[Tt,jt]=ae.properties.get("vertical-range");return{u_fog_matrix:xe?wt.calculateFogTileMatrix(xe):ut||ne.identityMat,u_fog_range:ae.getFovAdjustedRange(wt._fov),u_fog_color:_t,u_fog_horizon_blend:ae.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Tt,jt),jt],u_fog_temporal_offset:Pt,u_frustum_tl:Ee,u_frustum_tr:Ge,u_frustum_br:$e,u_frustum_bl:Ye,u_globe_pos:Je,u_globe_radius:ht,u_viewport:gt,u_globe_transition:i.a9(wt.zoom),u_is_globe:+(wt.projection.name==="globe")}})(this,M,x,q,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],E);h.setFogUniformValues(l,X)}L&&h.setCutoffUniformValues(l,L.uniformValues)}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,h=l.createTexture();return l.bindTexture(l.TEXTURE_2D,h),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,h=this._backgroundTiles={},x=this.transform.coveringTiles({tileSize:512});for(const E of x)h[E.key]=l[E.key]||new ce(E,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(l,h){return!(!l.is3D()||l.type!=="clip"&&(l.minzoom&&l.minzoom>this.transform.zoom||(this.style._clipLayerPresent||l.sourceLayer!=="building")&&(!h||h.type!=="batched-model")))}isTileAffectedByFog(l){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let h=this._cachedTileFogOpacities[l.key];return h||(this._cachedTileFogOpacities[l.key]=h=this.style.fog.getOpacityForTile(l)),h[0]>=rn||h[1]>=rn}setupDepthForOcclusion(l,h,x){const E=this.context,L=E.gl,M=!!x;var q;x||(x={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),E.activeTexture.set(L.TEXTURE3),l&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE),x.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],x.u_depth_range_unpack=[2/((q=this.depthRangeFor3D)[1]-q[0]),-1-2*q[0]/(q[1]-q[0])],x.u_occluder_half_size=.5*this.occlusionParams.occluderSize,x.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE),E.activeTexture.set(L.TEXTURE0),M||h.setTerrainUniformValues(E,x)}}function El(v,l){let h=!1,x=null;const E=()=>{x=null,h&&(v(),x=setTimeout(E,l),h=!1)};return()=>(h=!0,x||E(),x)}class Lu{constructor(l){this._hashName=l&&encodeURIComponent(l),i.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=El(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const h=ud(l);if(this._hashName){const x=this._hashName;let E=!1;const L=location.hash.slice(1).split("&").map(M=>{const q=M.split("=")[0];return q===x?(E=!0,`${q}=${h}`):M}).filter(M=>M);return E||L.push(`${x}=${h}`),`#${L.join("&")}`}return`#${h}`}_getCurrentHash(){const l=location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(h=x)}),(h&&h[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(x=>isNaN(x))){const x=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(h[3]||0):l.getBearing();return l.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:x,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function ud(v,l){const h=v.getCenter(),x=Math.round(100*v.getZoom())/100,E=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,E),M=Math.round(h.lng*L)/L,q=Math.round(h.lat*L)/L,X=v.getBearing(),ne=v.getPitch();let ae=l?`/${M}/${q}/${x}`:`${x}/${q}/${M}`;return(X||ne)&&(ae+="/"+Math.round(10*X)/10),ne&&(ae+=`/${Math.round(ne)}`),ae}const Uc={linearity:.3,easing:i.dp(0,0,.3,1)},Eh=i.l({deceleration:2500,maxSpeed:1400},Uc),nh=i.l({deceleration:20,maxSpeed:1400},Uc),Tl=i.l({deceleration:1e3,maxSpeed:360},Uc),df=i.l({deceleration:1e3,maxSpeed:90},Uc);class Iu{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=i.q.now();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:L}of this._inertiaBuffer)h.zoom+=L.zoomDelta||0,h.bearing+=L.bearingDelta||0,h.pitch+=L.pitchDelta||0,L.panDelta&&h.pan._add(L.panDelta),L.around&&(h.around=L.around),L.pinchAround&&(h.pinchAround=L.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(h.pan.mag()){const L=dd(h.pan.mag(),x,i.l({},Eh,l||{}));E.offset=h.pan.mult(L.amount/h.pan.mag()),E.center=this._map.transform.center,Th(E,L)}if(h.zoom){const L=dd(h.zoom,x,nh);E.zoom=this._map.transform.zoom+L.amount,Th(E,L)}if(h.bearing){const L=dd(h.bearing,x,Tl);E.bearing=this._map.transform.bearing+i.ap(L.amount,-179,179),Th(E,L)}if(h.pitch){const L=dd(h.pitch,x,df);E.pitch=this._map.transform.pitch+L.amount,Th(E,L)}if(E.zoom||E.bearing){const L=h.pinchAround===void 0?h.around:h.pinchAround;E.around=L?this._map.unproject(L):this._map.getCenter()}return this.clear(),E.noMoveStart=!0,E}}function Th(v,l){(!v.duration||v.duration<l.duration)&&(v.duration=l.duration,v.easing=l.easing)}function dd(v,l,h){const{maxSpeed:x,linearity:E,deceleration:L}=h,M=i.ap(v*E/(l/1e3),-x,x),q=Math.abs(M)/(L*E);return{easing:h.easing,duration:1e3*q,amount:M*(q/2)}}class na extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,x,E={}){const L=de(h.getCanvasContainer(),x),M=h.unproject(L);super(l,i.l({point:L,lngLat:M,originalEvent:x},E)),this._defaultPrevented=!1,this.target=h}}class Lh extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,x){const E=l==="touchend"?x.changedTouches:x.touches,L=we(h.getCanvasContainer(),E),M=L.map(X=>h.unproject(X)),q=L.reduce((X,ne,ae,xe)=>X.add(ne.div(xe.length)),new i.P(0,0));super(l,{points:L,point:q,lngLats:M,lngLat:h.unproject(q),originalEvent:x}),this._defaultPrevented=!1}}class Ka extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h){super("wheel",{originalEvent:h}),this._defaultPrevented=!1}}class kp{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new Ka(this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new na(l.type,this._map,l))}mouseup(l){this._map.fire(new na(l.type,this._map,l))}preclick(l){const h=i.l({},l);h.type="preclick",this._map.fire(new na(h.type,this._map,h))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(l),this._map.fire(new na(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new na(l.type,this._map,l))}mouseover(l){this._map.fire(new na(l.type,this._map,l))}mouseout(l){this._map.fire(new na(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Lh(l.type,this._map,l))}touchmove(l){this._map.fire(new Lh(l.type,this._map,l))}touchend(l){this._map.fire(new Lh(l.type,this._map,l))}touchcancel(l){this._map.fire(new Lh(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hf{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new na(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new na("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new na(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ih{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(te(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const x=h,E=this._startPos,L=this._lastPos;if(!E||!L||L.equals(x)||!this._box&&x.dist(E)<this._clickTolerance)return;this._lastPos=x,this._box||(this._box=D("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const M=Math.min(E.x,x.x),q=Math.max(E.x,x.x),X=Math.min(E.y,x.y),ne=Math.max(E.y,x.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${X}px)`,this._box.style.width=q-M+"px",this._box.style.height=ne-X+"px")})}mouseupWindow(l,h){if(!this._active)return;const x=this._startPos,E=h;if(x&&l.button===0){if(this.reset(),K(),x.x!==E.x||x.y!==E.y)return this._map.fire(new i.x("boxzoomend",{originalEvent:l})),{cameraAnimation:L=>L.fitScreenCoordinates(x,E,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),se(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new i.x(l,{originalEvent:h}))}}function Ll(v,l){const h={};for(let x=0;x<v.length;x++)h[v[x].identifier]=l[x];return h}class ih{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,h,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),x.length===this.numTouches&&(this.centroid=function(E){const L=new i.P(0,0);for(const M of E)L._add(M);return L.div(E.length)}(h),this.touches=Ll(x,h)))}touchmove(l,h,x){if(this.aborted||!this.centroid)return;const E=Ll(x,h);for(const L in this.touches){const M=E[L];(!M||M.dist(this.touches[L])>30)&&(this.aborted=!0)}}touchend(l,h,x){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class lu{constructor(l){this.singleTap=new ih(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,h,x){this.singleTap.touchstart(l,h,x)}touchmove(l,h,x){this.singleTap.touchmove(l,h,x)}touchend(l,h,x){const E=this.singleTap.touchend(l,h,x);if(E){const L=l.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(E)<30;if(L&&M||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class al{constructor(){this._zoomIn=new lu({numTouches:1,numTaps:2}),this._zoomOut=new lu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,x){this._zoomIn.touchstart(l,h,x),this._zoomOut.touchstart(l,h,x)}touchmove(l,h,x){this._zoomIn.touchmove(l,h,x),this._zoomOut.touchmove(l,h,x)}touchend(l,h,x){const E=this._zoomIn.touchend(l,h,x),L=this._zoomOut.touchend(l,h,x);return E?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(E)},{originalEvent:l})}):L?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(L)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ll={0:1,2:2};class cl{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,h){return!1}_move(l,h){return{}}mousedown(l,h){if(this._lastPoint)return;const x=J(l);this._correctButton(l,x)&&(this._lastPoint=h,this._eventButton=x)}mousemoveWindow(l,h){const x=this._lastPoint;if(x){if(l.preventDefault(),this._eventButton!=null&&function(E,L){const M=ll[L];return E.buttons===void 0||(E.buttons&M)!==M}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(x,h)}}mouseupWindow(l){this._lastPoint&&J(l)===this._eventButton&&(this._moved&&K(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nu extends cl{mousedown(l,h){super.mousedown(l,h),this._lastPoint&&(this._active=!0)}_correctButton(l,h){return h===0&&!l.ctrlKey}_move(l,h){return{around:h,panDelta:h.sub(l)}}}class Ld extends cl{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const x=.8*(h.x-l.x);if(x)return this._active=!0,{bearingDelta:x}}contextmenu(l){l.preventDefault()}}class Nh extends cl{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const x=-.5*(h.y-l.y);if(x)return this._active=!0,{pitchDelta:x}}contextmenu(l){l.preventDefault()}}class BA{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),i.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(l,h,x){return this._calculateTransform(l,h,x)}touchmove(l,h,x){if(this._active&&!(x.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(x.length===1&&!i.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,h,x)}}touchend(l,h,x){this._calculateTransform(l,h,x),this._active&&x.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,x){x.length>0&&(this._active=!0);const E=Ll(x,h),L=new i.P(0,0),M=new i.P(0,0);let q=0;for(const ne in E){const ae=E[ne],xe=this._touches[ne];xe&&(L._add(ae),M._add(ae.sub(xe)),q++,E[ne]=ae)}if(this._touches=E,q<this._minTouches||!M.mag())return;const X=M.div(q);return this._sum._add(X),this._sum.mag()<this._clickTolerance?void 0:{around:L.div(q),panDelta:X}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=D("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Id{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,h,x){return{}}touchstart(l,h,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,x){const E=this._firstTwoTouches;if(!E)return;l.preventDefault();const[L,M]=E,q=hd(x,h,L),X=hd(x,h,M);if(!q||!X)return;const ne=this._aroundCenter?null:q.add(X).div(2);return this._move([q,X],ne,l)}touchend(l,h,x){if(!this._firstTwoTouches)return;const[E,L]=this._firstTwoTouches,M=hd(x,h,E),q=hd(x,h,L);M&&q||(this._active&&K(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function hd(v,l,h){for(let x=0;x<v.length;x++)if(v[x].identifier===h)return l[x]}function H1(v,l){return Math.log(v/l)/Math.LN2}class Tb extends Id{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const x=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(H1(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:H1(this._distance,x),pinchAround:h}}}function V1(v,l){return 180*v.angleWith(l)/Math.PI}class Lb extends Id{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h){const x=this._vector;if(this._vector=l[0].sub(l[1]),x&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:V1(this._vector,x),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,x=this._startVector;if(!x)return!1;const E=V1(l,x);return Math.abs(E)<h}}function D0(v){return Math.abs(v.y)>Math.abs(v.x)}class Ib extends Id{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,D0(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,x){const E=this._lastPoints;if(!E)return;const L=l[0].sub(E[0]),M=l[1].sub(E[1]);return this._map._cooperativeGestures&&!i.dq()&&x.touches.length<3||(this._valid=this.gestureBeginsVertically(L,M,x.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(L.y+M.y)/2*-.5})}gestureBeginsVertically(l,h,x){if(this._valid!==void 0)return this._valid;const E=l.mag()>=2,L=h.mag()>=2;if(!E&&!L)return;if(!E||!L)return this._firstMove==null&&(this._firstMove=x),x-this._firstMove<100&&void 0;const M=l.y>0==h.y>0;return D0(l)&&D0(h)&&M}}const Nb={panStep:100,bearingStep:15,pitchStep:10};class Fb{constructor(){const l=Nb;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,x=0,E=0,L=0,M=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?x=-1:(l.preventDefault(),L=-1);break;case 39:l.shiftKey?x=1:(l.preventDefault(),L=1);break;case 38:l.shiftKey?E=1:(l.preventDefault(),M=-1);break;case 40:l.shiftKey?E=-1:(l.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(x=0,E=0),{cameraAnimation:q=>{const X=q.getZoom();q.easeTo({duration:300,easeId:"keyboardHandler",easing:Pb,zoom:h?Math.round(X)+h*(l.shiftKey?2:1):X,bearing:q.getBearing()+x*this._bearingStep,pitch:q.getPitch()+E*this._pitchStep,offset:[-L*this._panStep,-M*this._panStep],center:q.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pb(v){return v*(2-v)}const G1=4.000244140625,vS=1/450;class xS{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=vS,i.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||i.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const x=i.q.now(),E=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,h!==0&&h%G1==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=h,this._timeout=window.setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(E*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=de(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const ne=this._type==="wheel"&&Math.abs(this._delta)>G1?this._wheelZoomRate:this._defaultZoomRate;let ae=2/(1+Math.exp(-Math.abs(this._delta*ne)));this._delta<0&&ae!==0&&(ae=1/ae);const xe=h(),Ce=Math.pow(2,xe),Ee=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):Ce;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Ee*ae))),this._type==="wheel"&&(this._startZoom=xe,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const x=typeof this._targetZoom=="number"?this._targetZoom:h(),E=this._startZoom,L=this._easing;let M,q=!1;if(this._type==="wheel"&&E&&L){const ne=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),ae=L(ne);M=i.aa(E,x,ae),ne<1?this._frameId||(this._frameId=!0):q=!0}else M=x,q=!0;this._active=!0,q&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let X=M-h();return X*this._lastDelta<0&&(X=0),{noInertia:!0,needsRenderFrame:!q,zoomDelta:X,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=i.dr;if(this._prevEase){const x=this._prevEase,E=(i.q.now()-x.start)/x.duration,L=x.easing(E+.01)-x.easing(E),M=.27/Math.sqrt(L*L+1e-4)*.01,q=Math.sqrt(.0729-M*M);h=i.dp(M,q,.25,1)}return this._prevEase={start:i.q.now(),duration:l,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=D("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class La{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class jb{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,h){return l.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:x.getZoom()+(l.shiftKey?-1:1),around:x.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _S{constructor(){this._tap=new lu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,h,x){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=h[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(l,h,x))}touchmove(l,h,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const E=h[0],L=E.y-this._swipePoint.y;return this._swipePoint=E,l.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(l,h,x)}touchend(l,h,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(l,h,x)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bS{constructor(l,h,x){this._el=l,this._mousePan=h,this._touchPan=x}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class dg{constructor(l,h,x){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Mb{constructor(l,h,x,E){this._el=l,this._touchZoom=h,this._touchRotate=x,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const EA=v=>v.zoom||v.drag||v.pitch||v.rotate;class O0 extends i.x{}class ff{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,h){const x=i.a6.vec3.sub([],h,l);this.radius=i.a6.vec3.length(x[2]<0?i.a6.vec3.div([],x,this.constants):[x[0],x[1],0])}projectRay(l){i.a6.vec3.div(l,l,this.constants),i.a6.vec3.normalize(l,l),i.a6.vec3.mul(l,l,this.constants);const h=i.a6.vec3.scale([],l,this.radius);if(h[2]>0){const x=i.a6.vec3.scale([],[0,0,1],i.a6.vec3.dot(h,[0,0,1])),E=i.a6.vec3.scale([],i.a6.vec3.normalize([],[h[0],h[1],0]),this.radius),L=i.a6.vec3.add([],h,i.a6.vec3.scale([],i.a6.vec3.sub([],i.a6.vec3.add([],E,x),h),2));h[0]=L[0],h[1]=L[1]}return h}}function Dp(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Zc{constructor(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Iu(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ff,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),i.aJ(["handleEvent","handleWindowEvent"],this);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,L,M]of this._listeners){const q=E===document?this.handleWindowEvent:this.handleEvent;E.addEventListener(L,q,M)}}destroy(){for(const[l,h,x]of this._listeners){const E=l===document?this.handleWindowEvent:this.handleEvent;l.removeEventListener(h,E,x)}}_addDefaultHandlers(l){const h=this._map,x=h.getCanvasContainer();this._add("mapEvent",new kp(h,l));const E=h.boxZoom=new Ih(h,l);this._add("boxZoom",E);const L=new al,M=new jb;h.doubleClickZoom=new La(M,L),this._add("tapZoom",L),this._add("clickZoom",M);const q=new _S;this._add("tapDragZoom",q);const X=h.touchPitch=new Ib(h);this._add("touchPitch",X);const ne=new Ld(l),ae=new Nh(l);h.dragRotate=new dg(l,ne,ae),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);const xe=new Nu(l),Ce=new BA(h,l);h.dragPan=new bS(x,xe,Ce),this._add("mousePan",xe),this._add("touchPan",Ce,["touchZoom","touchRotate"]);const Ee=new Lb,Ge=new Tb;h.touchZoomRotate=new Mb(x,Ge,Ee,q),this._add("touchRotate",Ee,["touchPan","touchZoom"]),this._add("touchZoom",Ge,["touchPan","touchRotate"]),this._add("blockableMapEvent",new hf(h));const $e=h.scrollZoom=new xS(h,this);this._add("scrollZoom",$e,["mousePan"]);const Ye=h.keyboard=new Fb;this._add("keyboard",Ye);for(const Je of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Je]&&h[Je].enable(l[Je])}_add(l,h,x){this._handlers.push({handlerName:l,handler:h,allowed:x}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!EA(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,h,x){for(const E in l)if(E!==x&&(!h||h.indexOf(E)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const h=[];for(const x of l)this._el.contains(x.target)&&h.push(x);return h}handleEvent(l,h){this._updatingCamera=!0;const x=l.type==="renderFrame",E=x?void 0:l,L={needsRenderFrame:!1},M={},q={},X=l.touches?this._getMapTouches(l.touches):void 0,ne=X?we(this._el,X):x?void 0:de(this._el,l);for(const{handlerName:Ce,handler:Ee,allowed:Ge}of this._handlers){if(!Ee.isEnabled())continue;let $e;this._blockedByActive(q,Ge,Ce)?Ee.reset():Ee[h||l.type]&&($e=Ee[h||l.type](l,ne,X),this.mergeHandlerResult(L,M,$e,Ce,E),$e&&$e.needsRenderFrame&&this._triggerRenderFrame()),($e||Ee.isActive())&&(q[Ce]=Ee)}const ae={};for(const Ce in this._previousActiveHandlers)q[Ce]||(ae[Ce]=E);this._previousActiveHandlers=q,(Object.keys(ae).length||Dp(L))&&(this._changes.push([L,M,ae]),this._triggerRenderFrame()),(Object.keys(q).length||Dp(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:xe}=L;xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],xe(this._map))}mergeHandlerResult(l,h,x,E,L){if(!x)return;i.l(l,x);const M={handlerName:E,originalEvent:x.originalEvent||L};x.zoomDelta!==void 0&&(h.zoom=M),x.panDelta!==void 0&&(h.drag=M),x.pitchDelta!==void 0&&(h.pitch=M),x.bearingDelta!==void 0&&(h.rotate=M)}_applyChanges(){const l={},h={},x={};for(const[E,L,M]of this._changes)E.panDelta&&(l.panDelta=(l.panDelta||new i.P(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(l.around=E.around),E.aroundCoord!==void 0&&(l.aroundCoord=E.aroundCoord),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),i.l(h,L),i.l(x,M);this._updateMapTransform(l,h,x),this._changes=[]}_updateMapTransform(l,h,x){const E=this._map,L=E.transform,M=ht=>[ht.x,ht.y,ht.z];if((ht=>{const gt=this._eventsInProgress.drag;return gt&&!this._handlersById[gt.handlerName].isActive()})()&&!Dp(l)){const ht=L.zoom;L.cameraElevationReference="sea",this._originalZoom!=null&&L._orthographicProjectionAtLowPitch&&L.projection.name!=="globe"&&L.pitch===0?(L.cameraElevationReference="ground",L.zoom=this._originalZoom):(L.recenterOnTerrain(),L.cameraElevationReference="ground"),ht!==L.zoom&&this._map._update(!0)}if(L._isCameraConstrained&&E._stop(!0),!Dp(l))return void this._fireEvents(h,x,!0);let{panDelta:q,zoomDelta:X,bearingDelta:ne,pitchDelta:ae,around:xe,aroundCoord:Ce,pinchAround:Ee}=l;L._isCameraConstrained&&(X>0&&(X=0),L._isCameraConstrained=!1),Ee!==void 0&&(xe=Ee),(X||(ht=>h[ht]&&!this._eventsInProgress[ht])("drag"))&&xe&&(this._dragOrigin=M(L.pointCoordinate3D(xe)),this._originalZoom=L.zoom,this._trackingEllipsoid.setup(L._camera.position,this._dragOrigin)),L.cameraElevationReference="sea",E._stop(!0),xe=xe||E.transform.centerPoint,ne&&(L.bearing+=ne),ae&&(L.pitch+=ae),L._updateCameraState();const Ge=[0,0,0];if(q)if(L.projection.name==="mercator"){const ht=this._trackingEllipsoid.projectRay(L.screenPointToMercatorRay(xe).dir),gt=this._trackingEllipsoid.projectRay(L.screenPointToMercatorRay(xe.sub(q)).dir);Ge[0]=gt[0]-ht[0],Ge[1]=gt[1]-ht[1]}else{const ht=L.pointCoordinate(xe);if(L.projection.name==="globe"){q=q.rotate(-L.angle);const gt=L._pixelsPerMercatorPixel/L.worldSize;Ge[0]=-q.x*i.ds(i.aM(ht.y))*gt,Ge[1]=-q.y*i.ds(L.center.lat)*gt}else{const gt=L.pointCoordinate(xe.sub(q));ht&&gt&&(Ge[0]=gt.x-ht.x,Ge[1]=gt.y-ht.y)}}const $e=L.zoom,Ye=[0,0,0];if(X){const ht=M(Ce||L.pointCoordinate3D(xe)),gt={dir:i.a6.vec3.normalize([],i.a6.vec3.sub([],ht,L._camera.position))};if(gt.dir[2]<0){const ut=L.zoomDeltaToMovement(ht,X);i.a6.vec3.scale(Ye,gt.dir,ut)}}const Je=i.a6.vec3.add(Ge,Ge,Ye);L._translateCameraConstrained(Je),X&&Math.abs(L.zoom-$e)>1e-4&&L.recenterOnTerrain(),L.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,x,!0)}_fireEvents(l,h,x){const E=EA(this._eventsInProgress),L=EA(l),M={};for(const ae in l){const{originalEvent:xe}=l[ae];this._eventsInProgress[ae]||(M[`${ae}start`]=xe),this._eventsInProgress[ae]=l[ae]}!E&&L&&this._fireEvent("movestart",L.originalEvent);for(const ae in M)this._fireEvent(ae,M[ae]);L&&this._fireEvent("move",L.originalEvent);for(const ae in l){const{originalEvent:xe}=l[ae];this._fireEvent(ae,xe)}const q={};let X;for(const ae in this._eventsInProgress){const{handlerName:xe,originalEvent:Ce}=this._eventsInProgress[ae];this._handlersById[xe].isActive()||(delete this._eventsInProgress[ae],X=h[xe]||Ce,q[`${ae}end`]=X)}for(const ae in q)this._fireEvent(ae,q[ae]);const ne=EA(this._eventsInProgress);if(x&&(E||L)&&!ne){this._updatingCamera=!0;const ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xe=Ce=>Ce!==0&&-this._bearingSnap<Ce&&Ce<this._bearingSnap;ae?(xe(ae.bearing||this._map.getBearing())&&(ae.bearing=0),this._map.easeTo(ae,{originalEvent:X})):(this._map.fire(new i.x("moveend",{originalEvent:X})),xe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new i.x(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new O0("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Fh="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class $1 extends i.E{constructor(l,h){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,i.aJ(["_renderFrameCallback"],this)}getCenter(){return new i.bK(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}panBy(l,h,x){return l=i.P.convert(l).mult(-1),this.panTo(this.transform.center,i.l({offset:l},h),x)}panTo(l,h,x){return this.easeTo(i.l({center:l},h),x)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,x){return this.easeTo(i.l({zoom:l},h),x)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,x){return this.easeTo(i.l({bearing:l},h),x)}resetNorth(l,h){return this.rotateTo(0,i.l({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}cameraForBounds(l,h){l=i.as.convert(l);const x=h&&h.bearing||0,E=h&&h.pitch||0,L=l.getNorthWest(),M=l.getSouthEast();return this._cameraForBounds(this.transform,L,M,x,E,h)}_extendPadding(l){const h={top:0,right:0,bottom:0,left:0};return l==null?i.l({},h,this.transform.padding):typeof l=="number"?{top:l,bottom:l,right:l,left:l}:i.l({},h,l)}_extendCameraOptions(l){return(l=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=this._extendPadding(l.padding),l}_minimumAABBFrustumDistance(l,h){const x=h.max[0]-h.min[0],E=h.max[1]-h.min[1];return x/E>l.aspect?x/(2*Math.tan(.5*l.fovX)*l.aspect):E/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,h,x,E,L,M){const q=l.clone(),X=this._extendCameraOptions(M);q.bearing=E,q.pitch=L;const ne=i.bK.convert(h),ae=i.bK.convert(x),xe=.5*(ne.lat+ae.lat),Ce=.5*(ne.lng+ae.lng),Ee=i.dt(xe,Ce),Ge=i.a6.vec3.normalize([],Ee),$e=i.a6.vec3.normalize([],i.a6.vec3.cross([],Ge,[0,1,0])),Ye=i.a6.vec3.cross([],$e,Ge),Je=[$e[0],$e[1],$e[2],0,Ye[0],Ye[1],Ye[2],0,Ge[0],Ge[1],Ge[2],0,0,0,0,1],ht=[Ee,i.dt(ne.lat,ne.lng),i.dt(ae.lat,ne.lng),i.dt(ae.lat,ae.lng),i.dt(ne.lat,ae.lng),i.dt(xe,ne.lng),i.dt(xe,ae.lng),i.dt(ne.lat,Ce),i.dt(ae.lat,Ce)];let gt=i.c9.fromPoints(ht.map(Er=>[i.a6.vec3.dot($e,Er),i.a6.vec3.dot(Ye,Er),i.a6.vec3.dot(Ge,Er)]));const ut=i.a6.vec3.transformMat4([],gt.center,Je);i.a6.vec3.squaredLength(ut)===0&&i.a6.vec3.set(ut,0,0,1),i.a6.vec3.normalize(ut,ut),i.a6.vec3.scale(ut,ut,i.aq),q.center=i.du(ut);const wt=q.getWorldToCameraMatrix(),_t=i.a6.mat4.invert(new Float64Array(16),wt);gt=i.c9.applyTransform(gt,i.a6.mat4.multiply([],wt,Je));const Pt=this._extendAABB(gt,q,X,E);if(!Pt)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");gt=Pt,i.a6.vec3.transformMat4(ut,ut,wt);const Tt=.5*(gt.max[2]-gt.min[2]),jt=this._minimumAABBFrustumDistance(q,gt),Vt=i.a6.vec3.scale([],[0,0,1],Tt),Ut=i.a6.vec3.add(Vt,ut,Vt),Ot=jt+(q.pitch===0?0:i.a6.vec3.distance(ut,Ut)),sr=q.globeCenterInViewSpace,Cr=i.a6.vec3.sub([],ut,[sr[0],sr[1],sr[2]]);i.a6.vec3.normalize(Cr,Cr),i.a6.vec3.scale(Cr,Cr,Ot);const Rr=i.a6.vec3.add([],ut,Cr);i.a6.vec3.transformMat4(Rr,Rr,_t);const wr=i.dw/i.aq,Jr=i.a6.vec3.length(Rr),or=i.bD(Math.max(Jr*wr-i.dw,Number.EPSILON),0),Fr=Math.min(q.zoomFromMercatorZAdjusted(or),X.maxZoom);return Fr>.5*(i.c2+i.bU)?(q.setProjection({name:"mercator"}),q.zoom=Fr,this._cameraForBounds(q,h,x,E,L,M)):{center:q.center,zoom:Fr,bearing:E,pitch:L}}_extendAABB(l,h,x,E){const L=.5*((x.padding.left||0)+(x.padding.right||0)),M=.5*((x.padding.top||0)+(x.padding.bottom||0)),q=M,X=L,ne=L,ae=M,xe=h.width-(X+ne),Ce=h.height-(q+ae),Ee=i.a6.vec3.sub([],l.max,l.min),Ge=Math.min(xe/Ee[0],Ce/Ee[1]),$e=Math.min(h.scaleZoom(h.scale*Ge),x.maxZoom);if(isNaN($e))return null;const Ye=h.scale/h.zoomScale($e),Je=new i.c9([l.min[0]-X*Ye,l.min[1]-ae*Ye,l.min[2]],[l.max[0]+ne*Ye,l.max[1]+q*Ye,l.max[2]]),ht=(typeof x.offset.x=="number"&&typeof x.offset.y=="number"?new i.P(x.offset.x,x.offset.y):i.P.convert(x.offset)).rotate(-i.bB(E));return Je.center[0]-=ht.x*Ye,Je.center[1]+=ht.y*Ye,Je}queryTerrainElevation(l,h){const x=this.transform.elevation;return x?(h=i.l({},{exaggerated:!0},h),x.getAtPoint(i.a5.fromLngLat(l),null,h.exaggerated)):null}_cameraForBounds(l,h,x,E,L,M){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,h,x,E,L,M);const q=l.clone(),X=this._extendCameraOptions(M);q.bearing=E,q.pitch=L;const ne=i.bK.convert(h),ae=i.bK.convert(x),xe=new i.bK(ne.lng,ae.lat),Ce=new i.bK(ae.lng,ne.lat),Ee=q.project(ne),Ge=q.project(ae),$e=this.queryTerrainElevation(ne),Ye=this.queryTerrainElevation(ae),Je=this.queryTerrainElevation(xe),ht=this.queryTerrainElevation(Ce),gt=[[Ee.x,Ee.y,Math.min($e||0,Ye||0,Je||0,ht||0)],[Ge.x,Ge.y,Math.max($e||0,Ye||0,Je||0,ht||0)]];let ut=i.c9.fromPoints(gt);const wt=q.getWorldToCameraMatrix(),_t=i.a6.mat4.invert(new Float64Array(16),wt);ut=i.c9.applyTransform(ut,wt);const Pt=this._extendAABB(ut,q,X,E);if(!Pt)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ut=Pt;const Tt=.5*i.a6.vec3.sub([],ut.max,ut.min)[2],jt=this._minimumAABBFrustumDistance(q,ut),Vt=[0,0,1,0];i.a6.vec4.transformMat4(Vt,Vt,wt),i.a6.vec4.normalize(Vt,Vt);const Ut=i.a6.vec3.scale([],Vt,jt+Tt),Ot=i.a6.vec3.add([],ut.center,Ut);i.a6.vec3.transformMat4(ut.center,ut.center,_t),i.a6.vec3.transformMat4(Ot,Ot,_t);const sr=q.unproject(new i.P(ut.center[0],ut.center[1])),Cr=i.dv(q.projection,sr),Rr=Math.pow(2,Cr),wr=Math.min(q._zoomFromMercatorZ(Ot[2]*q.pixelsPerMeter*Rr/q.worldSize),X.maxZoom);return q.mercatorFromTransition&&wr<.5*(i.c2+i.bU)?(q.setProjection({name:"globe"}),q.zoom=wr,this._cameraForBounds(q,h,x,E,L,M)):{center:sr,zoom:wr,bearing:E,pitch:L}}fitBounds(l,h,x){const E=this.cameraForBounds(l,h);return this._fitInternal(E,h,x)}fitScreenCoordinates(l,h,x,E,L){const M=i.P.convert(l),q=i.P.convert(h),X=new i.P(Math.min(M.x,q.x),Math.min(M.y,q.y)),ne=new i.P(Math.max(M.x,q.x),Math.max(M.y,q.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,q))return this;const ae=this.transform.pointLocation3D(X),xe=this.transform.pointLocation3D(ne),Ce=this.transform.pointLocation3D(new i.P(X.x,ne.y)),Ee=this.transform.pointLocation3D(new i.P(ne.x,X.y)),Ge=[Math.min(ae.lng,xe.lng,Ce.lng,Ee.lng),Math.min(ae.lat,xe.lat,Ce.lat,Ee.lat)],$e=[Math.max(ae.lng,xe.lng,Ce.lng,Ee.lng),Math.max(ae.lat,xe.lat,Ce.lat,Ee.lat)],Ye=E&&E.pitch?E.pitch:this.getPitch(),Je=this._cameraForBounds(this.transform,Ge,$e,x,Ye,E);return this._fitInternal(Je,E,L)}_fitInternal(l,h,x){return l?(h=i.l(l,h)).linear?this.easeTo(h,x):this.flyTo(h,x):this}jumpTo(l,h){this.stop();const x=l.preloadOnly?this.transform.clone():this.transform;let E=!1,L=!1,M=!1;"zoom"in l&&x.zoom!==+l.zoom&&(E=!0,x.zoom=+l.zoom),l.center!==void 0&&(x.center=i.bK.convert(l.center)),"bearing"in l&&x.bearing!==+l.bearing&&(L=!0,x.bearing=+l.bearing),"pitch"in l&&x.pitch!==+l.pitch&&(M=!0,x.pitch=+l.pitch);const q=typeof l.padding=="number"?this._extendPadding(l.padding):l.padding;if(l.padding!=null&&!x.isPaddingEqual(q))if(l.retainPadding===!1){const X=x.clone();X.padding=q,x.setLocationAtPoint(x.center,X.centerPoint)}else x.padding=q;return l.preloadOnly?(this._preloadTiles(x),this):(this.fire(new i.x("movestart",h)).fire(new i.x("move",h)),E&&this.fire(new i.x("zoomstart",h)).fire(new i.x("zoom",h)).fire(new i.x("zoomend",h)),L&&this.fire(new i.x("rotatestart",h)).fire(new i.x("rotate",h)).fire(new i.x("rotateend",h)),M&&this.fire(new i.x("pitchstart",h)).fire(new i.x("pitch",h)).fire(new i.x("pitchend",h)),this.fire(new i.x("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(Fh),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,h){const x=this.transform;if(!x.projection.supportsFreeCamera)return i.w(Fh),this;this.stop();const E=x.zoom,L=x.pitch,M=x.bearing;x.setFreeCameraOptions(l);const q=E!==x.zoom,X=L!==x.pitch,ne=M!==x.bearing;return this.fire(new i.x("movestart",h)).fire(new i.x("move",h)),q&&this.fire(new i.x("zoomstart",h)).fire(new i.x("zoom",h)).fire(new i.x("zoomend",h)),ne&&this.fire(new i.x("rotatestart",h)).fire(new i.x("rotate",h)).fire(new i.x("rotateend",h)),X&&this.fire(new i.x("pitchstart",h)).fire(new i.x("pitch",h)).fire(new i.x("pitchend",h)),this.fire(new i.x("moveend",h)),this}easeTo(l,h){this._stop(!1,l.easeId),((l=i.l({offset:[0,0],duration:500,easing:i.dr},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const x=this.transform,E=this.getZoom(),L=this.getBearing(),M=this.getPitch(),q=this.getPadding(),X="zoom"in l?+l.zoom:E,ne="bearing"in l?this._normalizeBearing(l.bearing,L):L,ae="pitch"in l?+l.pitch:M,xe=this._extendPadding(l.padding),Ce=i.P.convert(l.offset);let Ee,Ge,$e;if(x.projection.name==="globe"){const Vt=i.a5.fromLngLat(x.center),Ut=Ce.rotate(-x.angle);Vt.x+=Ut.x/x.worldSize,Vt.y+=Ut.y/x.worldSize;const Ot=Vt.toLngLat(),sr=i.bK.convert(l.center||Ot);this._normalizeCenter(sr),Ee=x.centerPoint.add(Ut),Ge=new i.P(Vt.x,Vt.y).mult(x.worldSize),$e=new i.P(i.am(sr.lng),i.at(sr.lat)).mult(x.worldSize).sub(Ge)}else{Ee=x.centerPoint.add(Ce);const Vt=x.pointLocation(Ee),Ut=i.bK.convert(l.center||Vt);this._normalizeCenter(Ut),Ge=x.project(Vt),$e=x.project(Ut).sub(Ge)}const Ye=x.zoomScale(X-E);let Je,ht;l.around&&(Je=i.bK.convert(l.around),ht=x.locationPoint(Je));const gt=this._zooming||X!==E,ut=this._rotating||L!==ne,wt=this._pitching||ae!==M,_t=!x.isPaddingEqual(xe),Pt=l.retainPadding===!1?x.clone():x,Tt=Vt=>Ut=>{if(gt&&(Vt.zoom=i.aa(E,X,Ut)),ut&&(Vt.bearing=i.aa(L,ne,Ut)),wt&&(Vt.pitch=i.aa(M,ae,Ut)),_t&&(Pt.interpolatePadding(q,xe,Ut),Ee=Pt.centerPoint.add(Ce)),Je)Vt.setLocationAtPoint(Je,ht);else{const Ot=Vt.zoomScale(Vt.zoom-E),sr=X>E?Math.min(2,Ye):Math.max(.5,Ye),Cr=Math.pow(sr,1-Ut),Rr=Vt.unproject(Ge.add($e.mult(Ut*Cr)).mult(Ot));Vt.setLocationAtPoint(Vt.renderWorldCopies?Rr.wrap():Rr,Ee)}return l.preloadOnly||this._fireMoveEvents(h),Vt};if(l.preloadOnly){const Vt=this._emulate(Tt,l.duration,x);return this._preloadTiles(Vt),this}const jt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=gt,this._rotating=ut,this._pitching=wt,this._padding=_t,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,jt),this._ease(Tt(x),Vt=>{x.cameraElevationReference==="sea"&&x.recenterOnTerrain(),this._afterEase(h,Vt)},l),this}_prepareEase(l,h,x={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),h||x.moving||this.fire(new i.x("movestart",l)),this._zooming&&!x.zooming&&this.fire(new i.x("zoomstart",l)),this._rotating&&!x.rotating&&this.fire(new i.x("rotatestart",l)),this._pitching&&!x.pitching&&this.fire(new i.x("pitchstart",l))}_fireMoveEvents(l){this.fire(new i.x("move",l)),this._zooming&&this.fire(new i.x("zoom",l)),this._rotating&&this.fire(new i.x("rotate",l)),this._pitching&&this.fire(new i.x("pitch",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const x=this._zooming,E=this._rotating,L=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new i.x("zoomend",l)),E&&this.fire(new i.x("rotateend",l)),L&&this.fire(new i.x("pitchend",l)),this.fire(new i.x("moveend",l))}flyTo(l,h){if(this._prefersReducedMotion(l)){const Er=i.ar(l,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Er,h)}this.stop(),l=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.dr},l);const x=this.transform,E=this.getZoom(),L=this.getBearing(),M=this.getPitch(),q=this.getPadding(),X="zoom"in l?i.ap(+l.zoom,x.minZoom,x.maxZoom):E,ne="bearing"in l?this._normalizeBearing(l.bearing,L):L,ae="pitch"in l?+l.pitch:M,xe=this._extendPadding(l.padding),Ce=x.zoomScale(X-E),Ee=i.P.convert(l.offset);let Ge=x.centerPoint.add(Ee);const $e=x.pointLocation(Ge),Ye=i.bK.convert(l.center||$e);this._normalizeCenter(Ye);const Je=x.project($e),ht=x.project(Ye).sub(Je);let gt=l.curve;const ut=Math.max(x.width,x.height),wt=ut/Ce,_t=ht.mag();if("minZoom"in l){const Er=i.ap(Math.min(l.minZoom,E,X),x.minZoom,x.maxZoom),en=ut/x.zoomScale(Er-E);gt=Math.sqrt(en/_t*2)}const Pt=gt*gt;function Tt(Er){const en=(wt*wt-ut*ut+(Er?-1:1)*Pt*Pt*_t*_t)/(2*(Er?wt:ut)*Pt*_t);return Math.log(Math.sqrt(en*en+1)-en)}function jt(Er){return(Math.exp(Er)-Math.exp(-Er))/2}function Vt(Er){return(Math.exp(Er)+Math.exp(-Er))/2}const Ut=Tt(0);let Ot=function(Er){return Vt(Ut)/Vt(Ut+gt*Er)},sr=function(Er){return ut*((Vt(Ut)*(jt(en=Ut+gt*Er)/Vt(en))-jt(Ut))/Pt)/_t;var en},Cr=(Tt(1)-Ut)/gt;if(Math.abs(_t)<1e-6||!isFinite(Cr)){if(Math.abs(ut-wt)<1e-6)return this.easeTo(l,h);const Er=wt<ut?-1:1;Cr=Math.abs(Math.log(wt/ut))/gt,sr=function(){return 0},Ot=function(en){return Math.exp(Er*gt*en)}}l.duration="duration"in l?+l.duration:1e3*Cr/("screenSpeed"in l?+l.screenSpeed/gt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const Rr=L!==ne,wr=ae!==M,Jr=!x.isPaddingEqual(xe),or=l.retainPadding===!1?x.clone():x,Fr=Er=>en=>{const nn=en*Cr,kr=1/Ot(nn);Er.zoom=en===1?X:E+Er.scaleZoom(kr),Rr&&(Er.bearing=i.aa(L,ne,en)),wr&&(Er.pitch=i.aa(M,ae,en)),Jr&&(or.interpolatePadding(q,xe,en),Ge=or.centerPoint.add(Ee));const Hr=en===1?Ye:Er.unproject(Je.add(ht.mult(sr(nn))).mult(kr));return Er.setLocationAtPoint(Er.renderWorldCopies?Hr.wrap():Hr,Ge),Er._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(h),Er};if(l.preloadOnly){const Er=this._emulate(Fr,l.duration,x);return this._preloadTiles(Er),this}return this._zooming=!0,this._rotating=Rr,this._pitching=wr,this._padding=Jr,this._prepareEase(h,!1),this._ease(Fr(x),()=>this._afterEase(h),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(l){}_cancelRenderFrame(l){}_stop(l,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const x=this._onEaseEnd;this._onEaseEnd=void 0,x.call(this,h)}if(!l){const x=this.handlers;x&&x.stop(!1)}return this}_ease(l,h,x){x.animate===!1||x.duration===0?(l(1),h()):(this._easeStart=i.q.now(),this._easeOptions=x,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,h){l=i.bA(l,-180,180);const x=Math.abs(l-h);return Math.abs(l-360-h)<x&&(l-=360),Math.abs(l+360-h)<x&&(l+=360),l}_normalizeCenter(l){const h=this.transform;if(h.maxBounds||h.projection.name!=="globe"&&!h.renderWorldCopies)return;const x=l.lng-h.center.lng;l.lng+=x>180?-360:x<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,h,x){const E=Math.ceil(15*h/1e3),L=[],M=l(x.clone());for(let q=0;q<=E;q++){const X=M(q/E);L.push(X.clone())}return L}_preloadTiles(l,h){}}class R0{constructor(l={}){this.options=l,i.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const h=this.options&&this.options.compact,x=l._getUIString("AttributionControl.ToggleAttribution");this._map=l,this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=D("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",x);const E=D("span","mapboxgl-ctrl-icon",this._compactButton);return E.setAttribute("aria-hidden","true"),E.setAttribute("title",x),this._innerContainer=D("div","mapboxgl-ctrl-attrib-inner",this._container),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(l){const x=h.reduce((E,L,M)=>(L.value&&(E+=`${L.key}=${L.value}${M<h.length-1?"&":""}`),E),"?");l.href=`${i.e.FEEDBACK_URL}/${x}#${ud(this._map,!0)}`,l.rel="noopener nofollow"}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const h=this._map.style._mergedSourceCaches;for(const E in h){const L=h[E];if(L.used){const M=L.getSource();M.attribution&&l.indexOf(M.attribution)<0&&l.push(M.attribution)}}l.sort((E,L)=>E.length-L.length),l=l.filter((E,L)=>{for(let M=L+1;M<l.length;M++)if(l[M].indexOf(E)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const x=l.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,l.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class q1{constructor(){i.aJ(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=D("div","mapboxgl-ctrl");const h=D("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const h in l){const x=l[h].getSource();if(x.hasOwnProperty("mapbox_logo")&&!x.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class kb{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,x=h?this._queue.concat(h):this._queue;for(const E of x)if(E.id===l)return void(E.cancelled=!0)}run(l=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const x of h)if(!x.cancelled&&(x.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class hg{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const h=i.cw((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,h,x){this._start=this.getValue(h),this._end=l,this._startTime=h,this._endTime=h+x}}const wS={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class CS{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class W1{constructor(l){this.map=l,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(l,h){if(this.typeById.has(l))throw new Error(`Interaction id "${l}" already exists.`);const{type:x,filter:E}=h;if(E){const M=i.M(E,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(M.result==="error")throw new Error(M.value.map(q=>`${q.key}: ${q.message}`).join(", "));this.filters.set(l,M.value)}const L=this.interactionsByType.get(x)||new Map;L.size===0&&(this.map.on(x,this.handleType),this.interactionsByType.set(x,L)),L.set(l,h),this.typeById.set(l,x)}remove(l){const h=this.typeById.get(l);if(!h)return;this.typeById.delete(l),this.filters.delete(l);const x=this.interactionsByType.get(h);x&&(x.delete(l),x.size===0&&this.map.off(h,this.handleType))}handleType(l){const h=l.features||this.map.queryRenderedFeatures(l.point);if(!h)return;const x=this.interactionsByType.get(l.type),E={zoom:0};for(const[L,M]of x){const q=this.filters.get(L),{handler:X,layers:ne}=M;for(const ae of h)if((!ne||ne.includes(ae.layer.id))&&(!q||q.evaluate(E,ae))&&X({id:L,feature:ae,interaction:M})!==!1)break}}}const K1={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0},fg={showCompass:!0,showZoom:!0,visualizePitch:!1};class TA{constructor(l,h,x=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new Ld({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,x&&(this.mousePitch=new Nh({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),i.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),te()}move(l,h){const x=this.map,E=this.mouseRotate.mousemoveWindow(l,h),L=E&&E.bearingDelta;if(L&&x.setBearing(x.getBearing()+L),this.mousePitch){const M=this.mousePitch.mousemoveWindow(l,h),q=M&&M.pitchDelta;q&&x.setPitch(x.getPitch()+q)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){se(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(i.l({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),de(this.element,l)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,de(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=we(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=we(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ph(v,l,h){if(v=new i.bK(v.lng,v.lat),l){const x=new i.bK(v.lng-360,v.lat),E=new i.bK(v.lng+360,v.lat),L=360*Math.ceil(Math.abs(v.lng-h.center.lng)/360),M=h.locationPoint(v).distSqr(l),q=l.x<0||l.y<0||l.x>h.width||l.y>h.height;h.locationPoint(x).distSqr(l)<M&&(q||Math.abs(x.lng-h.center.lng)<L)?v=x:h.locationPoint(E).distSqr(l)<M&&(q||Math.abs(E.lng-h.center.lng)<L)&&(v=E)}for(;Math.abs(v.lng-h.center.lng)>180;){const x=h.locationPoint(v);if(x.x>=0&&x.y>=0&&x.x<=h.width&&x.y<=h.height)break;v.lng>h.center.lng?v.lng-=360:v.lng+=360}return v}const fd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class jh extends i.E{constructor(l,h){if(super(),(l instanceof HTMLElement||h)&&(l=i.l({element:l},h)),i.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=i.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=D("div");const L=41,M=27,q=F("svg",{display:"block",height:L*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${L}`},this._element),X=F("radialGradient",{id:"shadowGradient"},F("defs",{},q));F("stop",{offset:"10%","stop-opacity":.4},X),F("stop",{offset:"100%","stop-opacity":.05},X),F("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},q),F("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},q),F("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},q),F("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},q),this._offset=i.P.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",L=>{L.preventDefault()}),this._element.addEventListener("mousedown",L=>{L.preventDefault()});const x=this._element.classList;for(const L in fd)x.remove(`mapboxgl-marker-anchor-${L}`);x.add(`mapboxgl-marker-anchor-${this._anchor}`);const E=l&&l.className?l.className.trim().split(/\s+/):[];x.add(...E),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=i.bK.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const E=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const h=l.code,x=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&x!==32&&x!==13||this.togglePopup()}_onMapClick(l){const h=l.originalEvent.target,x=this._element;this._popup&&(h===x||x.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,h=this._pos;if(!l||!h)return!1;const x=l.unproject(h),E=l.getFreeCameraOptions();if(!E.position)return!1;const L=E.position.toLngLat();return L.distanceTo(x)<.9*L.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const h=this._pos;if(!h||h.x<0||h.x>l.transform.width||h.y<0||h.y>l.transform.height)return void this._clearFadeTimer();const x=l.unproject(h);let E;l._showingGlobe()&&i.dz(l.transform,this._lngLat)?E=0:(E=1-l._queryFogOpacity(x),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(E*=this._occludedOpacity)),this._element.style.opacity=`${E}`,this._element.style.pointerEvents=E>0?"auto":"none",this._popup&&this._popup._setOpacity(E),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${fd[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const l=this._pos,h=this._map,x=this.getPitchAlignment();if(!h||!l||x!=="map")return"";if(!h._showingGlobe()){const X=h.getPitch();return X?`rotateX(${X}deg)`:""}const E=i.c0(i.dA(h.transform,this._lngLat)),L=l.sub(i.dB(h.transform)),M=Math.abs(L.x)+Math.abs(L.y);if(M===0)return"";const q=E/M;return`rotateX(${-L.y*q}deg) rotateY(${L.x*q}deg)`}_calculateZTransform(){const l=this._pos,h=this._map;if(!h||!l)return"";let x=0;const E=this.getRotationAlignment();if(E==="map")if(h._showingGlobe()){const L=h.project(new i.bK(this._lngLat.lng,this._lngLat.lat+.001)),M=h.project(new i.bK(this._lngLat.lng,this._lngLat.lat-.001)).sub(L);x=i.c0(Math.atan2(M.y,M.x))-90}else x=-h.getBearing();else if(E==="horizon"){const L=i.a7(4,6,h.getZoom()),M=i.dB(h.transform);M.y+=L*h.transform.height;const q=l.sub(M),X=i.c0(Math.atan2(q.y,q.x));x=(X>90?X-270:X+90)*(1-L)}return x+=this._rotation,x?`rotateZ(${x}deg)`:""}_update(l){cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=Ph(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),l===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=i.P.convert(l),this._update(),this}addClassName(l){return this._element.classList.add(l),this}removeClassName(l){return this._element.classList.remove(l),this}toggleClassName(l){return this._element.classList.toggle(l)}_onMove(l){const h=this._map;if(!h)return;const x=this._pointerdownPos,E=this._positionDelta;if(x&&E){if(!this._isDragging){const L=this._clickTolerance||h._clickTolerance;if(l.point.dist(x)<L)return;this._isDragging=!0}this._pos=l.point.sub(E),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.x("dragstart"))),this.fire(new i.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.x("dragend")),this._state="inactive"}_addDragHandler(l){const h=this._map,x=this._pos;h&&x&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(x),this._pointerdownPos=l.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const h=this._map;return h&&(l?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Op={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Jf={maxWidth:100,unit:"metric"},SS={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},BS={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ES=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Db(v=new i.P(0,0),l="bottom"){if(typeof v=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(l){case"top":return new i.P(0,v);case"top-left":return new i.P(h,h);case"top-right":return new i.P(-h,h);case"bottom":return new i.P(0,-v);case"bottom-left":return new i.P(h,-h);case"bottom-right":return new i.P(-h,-h);case"left":return new i.P(v,0);case"right":return new i.P(-v,0)}return new i.P(0,0)}return v instanceof i.P||Array.isArray(v)?i.P.convert(v):i.P.convert(v[l]||[0,0])}return{version:m,supported:j.supported,setRTLTextPlugin:i.dC,getRTLTextPluginStatus:i.dD,Map:class extends $1{constructor(v){C.mark(g.create);const l=v;if((v=i.l({},K1,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&i.dx(window)&&(v.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ma(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._repaint=!!v.repaint,this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new kb,this._domRenderTaskQueue=new kb,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.aP(),this._locale=i.l({},wS,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._tessellationStep=v.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=v.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new hg(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._requestManager=new He(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,this._contextCreateOptions=v.contextCreateOptions?{...v.contextCreateOptions}:{},typeof v.container=="string"){const h=document.getElementById(v.container);if(!h)throw new Error(`Container '${v.container.toString()}' not found.`);this._container=h}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),i.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new CS),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Zc(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,(v.style||!v.testMode)&&this.setStyle(v.style||i.e.DEFAULT_STYLE,{config:v.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),v.hash&&(this._hash=new Lu(typeof v.hash=="string"&&v.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){l.center==null&&l.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch});const h=v.bounds;h&&(this.resize(),this.fitBounds(h,i.l({},v.fitBoundsOptions,{duration:0})))}this.resize(),v.attributionControl&&this.addControl(new R0({customAttribution:v.customAttribution})),this._logoControl=new q1,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new i.x(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new i.x(`${h.dataType}dataloading`,h))}),this._interactions=new W1(this)}_getMapId(){return this._mapId}addControl(v,l){if(l===void 0&&(l=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new i.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=v.onAdd(this);this._controls.push(v);const x=this._controlPositions[l];return l.indexOf("bottom")!==-1?x.insertBefore(h,x.firstChild):x.appendChild(h),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new i.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(v);return l>-1&&this._controls.splice(l,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new i.x("movestart",v)).fire(new i.x("move",v)),this.fire(new i.x("resize",v)),l&&this.fire(new i.x("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(i.as.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?navigator.language:Array.isArray(v)?v.length===0?void 0:v.map(l=>l==="auto"?navigator.language:l):v}setLanguage(v){const l=this._parseLanguage(v);if(!this.style||l===this._language)return this;this._language=l,this.style.reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,l=v.projection.name;let h;l==="globe"&&v.zoom>=i.bU?(v.setMercatorFromTransition(),h=!0):l==="mercator"&&v.zoom<i.bU&&(v.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,l){return this._updateProjection(v||l||{name:"mercator"})}_updateProjection(v){let l;return l=v.name==="globe"&&this.transform.zoom>=i.bU?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),l&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(v){return this.transform.locationPoint3D(i.bK.convert(v))}unproject(v){return this.transform.pointLocation3D(i.P.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,l,h){if(v==="mouseenter"||v==="mouseover"){let x=!1;const E=M=>{const q=l.filter(ne=>this.getLayer(ne)),X=q.length?this.queryRenderedFeatures(M.point,{layers:q}):[];X.length?x||(x=!0,h.call(this,new na(v,this,M.originalEvent,{features:X}))):x=!1},L=()=>{x=!1};return{layers:new Set(l),listener:h,delegates:{mousemove:E,mouseout:L}}}if(v==="mouseleave"||v==="mouseout"){let x=!1;const E=M=>{const q=l.filter(X=>this.getLayer(X));(q.length?this.queryRenderedFeatures(M.point,{layers:q}):[]).length?x=!0:x&&(x=!1,h.call(this,new na(v,this,M.originalEvent)))},L=M=>{x&&(x=!1,h.call(this,new na(v,this,M.originalEvent)))};return{layers:new Set(l),listener:h,delegates:{mousemove:E,mouseout:L}}}{const x=E=>{const L=l.filter(q=>this.getLayer(q)),M=L.length?this.queryRenderedFeatures(E.point,{layers:L}):[];M.length&&(E.features=M,h.call(this,E),delete E.features)};return{layers:new Set(l),listener:h,delegates:{[v]:x}}}}on(v,l,h){if(typeof l=="function"||h===void 0)return super.on(v,l);if(Array.isArray(l)||(l=[l]),l){for(const E of l)if(!this._isValidId(E))return this}const x=this._createDelegatedListener(v,l,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(x);for(const E in x.delegates)this.on(E,x.delegates[E]);return this}once(v,l,h){if(typeof l=="function"||h===void 0)return super.once(v,l);if(Array.isArray(l)||(l=[l]),l){for(const E of l)if(!this._isValidId(E))return this}const x=this._createDelegatedListener(v,l,h);for(const E in x.delegates)this.once(E,x.delegates[E]);return this}off(v,l,h){if(typeof l=="function"||h===void 0)return super.off(v,l);const x=new Set(Array.isArray(l)?l:[l]);for(const M of x)if(!this._isValidId(M))return this;const E=(M,q)=>{if(M.size!==q.size)return!1;for(const X of M)if(!q.has(X))return!1;return!0},L=this._delegatedListeners?this._delegatedListeners[v]:void 0;return L&&(M=>{for(let q=0;q<M.length;q++){const X=M[q];if(X.listener===h&&E(X.layers,x)){for(const ne in X.delegates)this.off(ne,X.delegates[ne]);return M.splice(q,1),this}}})(L),this}queryRenderedFeatures(v,l){if(!this.style)return[];if(l!==void 0||v===void 0||v instanceof i.P||Array.isArray(v)||(l=v,v=void 0),v=v||[[0,0],[this.transform.width,this.transform.height]],(l=l||{}).layers&&Array.isArray(l.layers)){for(const h of l.layers)if(!this._isValidId(h))return[]}return this.style.queryRenderedFeatures(v,l,this.transform)}querySourceFeatures(v,l){return this._isValidId(v)?this.style.querySourceFeatures(v,l):[]}isPointOnSurface(v){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&i.w(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(v))}addInteraction(v,l){return this._interactions.add(v,l),this}removeInteraction(v){return this._interactions.remove(v),this}setStyle(v,l){return l=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l),this.style&&v&&l.diff!==!1&&l.localFontFamily===this._localFontFamily&&l.localIdeographFontFamily===this._localIdeographFontFamily&&!l.config?(this.style._diffStyle(v,(h,x)=>{h?(i.w(`Unable to perform style diff: ${String(h.message||h.error||h)}. Rebuilding the style from scratch.`),this._updateStyle(v,l)):x&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(v,l))}_getUIString(v){const l=this._locale[v];if(l==null)throw new Error(`Missing UI string '${v}'`);return l}_updateStyle(v,l){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v){const h=i.l({},l);l&&l.config&&(h.initialConfig=l.config,delete h.config),this.style=new kn(this,h).load(v),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new kn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(v){return v==null?(this.fire(new i.t(new Error("IDs can't be empty."))),!1):!i.cn(v)||(this.fire(new i.t(new Error(`IDs can't contain special symbols: "${v}".`))),!1)}addSource(v,l){return this._isValidId(v)?(this._lazyInitEmptyStyle(),this.style.addSource(v,l),this._update(!0)):this}isSourceLoaded(v){return!!this._isValidId(v)&&!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(v,l,h){this._lazyInitEmptyStyle(),this.style.addSourceType(v,l,h)}removeSource(v){return this._isValidId(v)?(this.style.removeSource(v),this._updateTerrain(),this._update(!0)):this}getSource(v){return this._isValidId(v)?this.style.getOwnSource(v):null}addImage(v,l,{pixelRatio:h=1,sdf:x=!1,stretchX:E,stretchY:L,content:M}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap){const{width:q,height:X,data:ne}=i.q.getImageData(l);this.style.addImage(v,{data:new i.r({width:q,height:X},ne),pixelRatio:h,stretchX:E,stretchY:L,content:M,sdf:x,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new i.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:q,height:X}=l,ne=l;this.style.addImage(v,{data:new i.r({width:q,height:X},new Uint8Array(ne.data)),pixelRatio:h,stretchX:E,stretchY:L,content:M,sdf:x,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,v)}}updateImage(v,l){this._lazyInitEmptyStyle();const h=this.style.getImage(v);if(!h)return void this.fire(new i.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap?i.q.getImageData(l):l,{width:E,height:L,data:M}=x;if(E===void 0||L===void 0)return void this.fire(new i.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==h.data.width||L!==h.data.height)return void this.fire(new i.t(new Error(`The width and height of the updated image (${E}, ${L})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`)));const q=!(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap);h.data.replace(M,q),this.style.updateImage(v,h)}hasImage(v){return v?!!this.style&&!!this.style.getImage(v):(this.fire(new i.t(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,l){i.o(this._requestManager.transformRequest(v,i.R.Image),(h,x)=>{l(h,x instanceof HTMLImageElement?i.q.getImageData(x):x)})}listImages(){return this.style.listImages()}addModel(v,l){this._lazyInitEmptyStyle(),this.style.addModel(v,l)}hasModel(v){return v?this.style.hasModel(v):(this.fire(new i.t(new Error("Missing required model id"))),!1)}removeModel(v){this.style.removeModel(v)}listModels(){return this.style.listModels()}addLayer(v,l){return this._isValidId(v.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(v,l),this._update(!0)):this}getSlot(v){const l=this.getLayer(v);return l&&l.slot||null}setSlot(v,l){return this.style.setSlot(v,l),this.style.mergeLayers(),this._update(!0)}addImport(v,l){return this.style.addImport(v,l),this}updateImport(v,l){return typeof l!="string"&&l.id!==v?(this.removeImport(v),this.addImport(l)):(this.style.updateImport(v,l),this._update(!0))}removeImport(v){return this.style.removeImport(v),this}moveImport(v,l){return this.style.moveImport(v,l),this._update(!0)}moveLayer(v,l){return this._isValidId(v)?(this.style.moveLayer(v,l),this._update(!0)):this}removeLayer(v){return this._isValidId(v)?(this.style.removeLayer(v),this._update(!0)):this}getLayer(v){if(!this._isValidId(v))return null;const l=this.style.getOwnLayer(v);return l?l.type==="custom"?l.implementation:l.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(v,l,h){return this._isValidId(v)?(this.style.setLayerZoomRange(v,l,h),this._update(!0)):this}setFilter(v,l,h={}){return this._isValidId(v)?(this.style.setFilter(v,l,h),this._update(!0)):this}getFilter(v){return this._isValidId(v)?this.style.getFilter(v):null}setPaintProperty(v,l,h,x={}){return this._isValidId(v)?(this.style.setPaintProperty(v,l,h,x),this._update(!0)):this}getPaintProperty(v,l){return this._isValidId(v)?this.style.getPaintProperty(v,l):null}setLayoutProperty(v,l,h,x={}){return this._isValidId(v)?(this.style.setLayoutProperty(v,l,h,x),this._update(!0)):this}getLayoutProperty(v,l){return this._isValidId(v)?this.style.getLayoutProperty(v,l):null}getSchema(v){return this.style.getSchema(v)}setSchema(v,l){return this.style.setSchema(v,l),this._update(!0)}getConfig(v){return this.style.getConfig(v)}setConfig(v,l){return this.style.setConfig(v,l),this._update(!0)}getConfigProperty(v,l){return this.style.getConfigProperty(v,l)}setConfigProperty(v,l,h){return this.style.setConfigProperty(v,l,h),this._update(!0)}setLights(v){if(this._lazyInitEmptyStyle(),v&&v.length===1&&v[0].type==="flat"){const l=v[0];l.properties?this.style.setFlatLight(l.properties,l.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(v),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const v=this.style.getLights()||[];return v.length===0&&v.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),v}setLight(v,l={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:v}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(v){return this._lazyInitEmptyStyle(),this.style.setColorTheme(v),this._update(!0)}setCamera(v){return this.style.setCamera(v),this._triggerCameraUpdate(v)}_triggerCameraUpdate(v){return this._update(this.transform.setOrthographicProjectionAtLowPitch(v["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.bK.convert(v),this.transform):0}setFeatureState(v,l){return this._isValidId(v.source)?(this.style.setFeatureState(v,l),this._update()):this}removeFeatureState(v,l){return this._isValidId(v.source)?(this.style.removeFeatureState(v,l),this._update()):this}getFeatureState(v){return this._isValidId(v.source)?this.style.getFeatureState(v):null}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let h,x,E,L=this._container;for(;L&&(!x||!E);){const M=window.getComputedStyle(L).transform;M&&M!=="none"&&(h=M.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(x=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(E=h[3])),L=L.parentElement}this._containerWidth=x?Math.abs(v/x):v,this._containerHeight=E?Math.abs(l/E):l}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=D("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=D("div","mapboxgl-canvas-container",v);this._canvas=D("canvas","mapboxgl-canvas",l),this._interactive&&(l.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=D("div","mapboxgl-control-container",v),x=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(E=>{x[E]=D("div",`mapboxgl-ctrl-${E}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,l){const h=i.q.devicePixelRatio||1;this._canvas.width=h*Math.ceil(v),this._canvas.height=h*Math.ceil(l),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${l}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const l=this._markers.indexOf(v);l!==-1&&this._markers.splice(l,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const l=this._popups.indexOf(v);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const v=i.l({},j.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl2",v);l?(ir(l,!0),this.painter=new rh(l,this._contextCreateOptions,this.transform,this._tp),this.on("data",h=>{h.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),i.m.testSupport(l)):this.fire(new i.t(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.x("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new i.x("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let l;this.fire(new i.x("renderstart")),++this._frameId;const h=this.painter.context.extTimerQuery,x=i.q.now(),E=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(l=E.createQuery(),E.beginQuery(h.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const L=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,ae=this.transform.pitch,xe=i.q.now(),Ce=new i.a3(ne,{now:xe,fadeDuration:L,pitch:ae,transition:this.style.transition});this.style.update(Ce)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let M=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),M=this._updateAverageElevation(x),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):M=this._updateAverageElevation(x);const q=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,L,this._crossSourceCollisions,this.painter.replacementSource);if(q&&(this._placementDirty=q.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:L,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,C.mark(g.load),this.fire(new i.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const ne=i.q.now()-x;E.endQuery(h.TIME_ELAPSED_EXT),setTimeout(()=>{const ae=E.getQueryParameter(l,E.QUERY_RESULT)/1e6;E.deleteQuery(l),this.fire(new i.x("gpu-timing-frame",{cpuTime:ne,gpuTime:ae}))},50)}if(this.listens("gpu-timing-layer")){const ne=this.painter.collectGpuTimers();setTimeout(()=>{const ae=this.painter.queryGpuTimers(ne);this.fire(new i.x("gpu-timing-layer",{layerTimes:ae}))},50)}if(this.listens("gpu-timing-deferred-render")){const ne=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const ae=this.painter.queryGpuTimeDeferredRender(ne);this.fire(new i.x("gpu-timing-deferred-render",{gpuTime:ae}))},50)}const X=this._sourcesDirty||this._styleDirty||this._placementDirty||M;if(X||this._repaint)this.triggerRepaint();else{const ne=this.idle();if(ne&&(M=this._updateAverageElevation(x,!0)),M)this.triggerRepaint();else if(this._triggerFrame(!1),ne&&(this.fire(new i.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const ae=this._calculateSpeedIndex();this.fire(new i.x("speedindexcompleted",{speedIndex:ae})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||X||(this._fullyLoaded=!0,C.mark(g.fullLoad),this._performanceMetricsCollection&&tt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const l of this._markers)v&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!v||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(v,l=!1){const h=E=>(this.transform.averageElevation=E,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);const x=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(x||(l||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const E=this.transform.averageElevation;let L=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(L)?L=0:this._averageElevationLastSampledAt=v;const M=Math.abs(E-L);if(M>1){if(this._isInitialLoad||x)return this._averageElevation.jumpTo(L),h(L);this._averageElevation.easeTo(L,v,300)}else if(M>1e-4)return this._averageElevation.jumpTo(L),h(L)}return!!this._averageElevation.isEasing(v)&&h(this._averageElevation.getValue(v))}_authenticate(){De(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,v=>{if(v&&(v.message===be||v.status===401)){const l=this.painter.context.gl;ir(l,!1),this._logoControl instanceof q1&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),fe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Ke(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const h=this.painter.context.gl,x=h.createFramebuffer();function E(L){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,L,0);const M=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,M),M}return h.bindFramebuffer(h.FRAMEBUFFER,x),this._canvasPixelComparison(E(v),l.canvasCopies.map(E),l.timeStamps)}_canvasPixelComparison(v,l,h){let x=h[1]-h[0];const E=v.length/4;for(let L=0;L<l.length;L++){const M=l[L];let q=0;for(let X=0;X<M.length;X+=4)M[X]===v[X]&&M[X+1]===v[X+1]&&M[X+2]===v[X+2]&&M[X+3]===v[X+3]&&(q+=1);x+=(h[L+2]-h[L+1])*(1-q/E)}return x}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Mt.delete(this.painter.context.gl),bt.remove(),pe.remove(),this._removed=!0,this.fire(new i.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=i.q.frame(l=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(l)}))}_preloadTiles(v){const l=this.style?this.style.getSourceCaches():[];return i.bf(l,(h,x)=>h._preloadTiles(v,x),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(v){this._showParseStatus!==v&&(this._showParseStatus=v,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(v){this._showLayers2DWireframe!==v&&(this._showLayers2DWireframe=v,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(v){this._showLayers3DWireframe!==v&&(this._showLayers3DWireframe=v,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,this._tp.refreshUI(),v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,this._tp.refreshUI(),v&&this._update())}_setCacheLimits(v,l){i.dy(v,l)}get version(){return m}},NavigationControl:class{constructor(v={}){this.options=i.l({},fg,v),this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(i.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),D("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),D("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:l}):h.resetNorth({},{originalEvent:l}))}),this._compassIcon=D("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const l=v.getZoom(),h=l===v.getMaxZoom(),x=l===v.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new TA(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,l){const h=D("button",v,this._container);return h.type="button",h.addEventListener("click",l),h}_setButtonTitle(v,l){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${l}`);v.setAttribute("aria-label",h),v.firstElementChild&&v.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends i.E{constructor(v={}){super();const l=navigator.geolocation;this.options=i.l({geolocation:l},Op,v),i.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=El(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const l=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,v(h)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(h=>l(h.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(v){const l=this._map.getMaxBounds(),h=v.coords;return!!l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new i.x("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("geolocate",v)),this._finish()}}_updateCamera(v){const l=new i.bK(v.coords.longitude,v.coords.latitude),h=v.coords.accuracy,x=this._map.getBearing(),E=i.l({bearing:x},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(h),E,{geolocateSource:!0})}_updateMarker(v){if(v){const l=new i.bK(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,l=i.bD(1,v._center.lat)*v.worldSize,h=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=D("button","mapboxgl-ctrl-geolocate",this._container),D("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D("div","mapboxgl-user-location"),this._dotElement.appendChild(D("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(D("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=D("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.x("trackuserlocationend")))})}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&v()}).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:R0,ScaleControl:class{constructor(v={}){this.options=i.l({},Jf,v),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,l=this._map,h=l._containerHeight/2,x=l._containerWidth/2-v/2,E=l.unproject([x,h]),L=l.unproject([x+v,h]),M=E.distanceTo(L);if(this.options.unit==="imperial"){const q=3.2808*M;q>5280?this._setScale(v,q/5280,"mile"):this._setScale(v,q,"foot")}else this.options.unit==="nautical"?this._setScale(v,M/1852,"nautical-mile"):M>=1e3?this._setScale(v,M/1e3,"kilometer"):this._setScale(v,M,"meter")}_setScale(v,l,h){this._map._requestDomTask(()=>{const x=function(L){const M=Math.pow(10,`${Math.floor(L)}`.length-1);let q=L/M;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(X){const ne=Math.pow(10,Math.ceil(-Math.log(X)/Math.LN10));return Math.round(X*ne)/ne}(q),M*q}(l),E=x/l;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(x):`${x}&nbsp;${SS[h]}`,this._container.style.width=v*E+"px"})}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v={}){this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:i.w("Full screen control 'container' must be a DOM element.")),i.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=D("button","mapboxgl-ctrl-fullscreen",this._controlContainer);D("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(v){super(),this.options=i.l(Object.create(BS),v),i.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new i.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new i.x("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=i.bK.convert(v),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const l=document.createDocumentFragment(),h=document.createElement("body");let x;for(h.innerHTML=v;x=h.firstChild,x;)l.appendChild(x);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=D("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(v),this.options.closeButton){const h=this._closeButton=D("button","mapboxgl-popup-close-button",l);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let l;return this._classList.delete(v)?l=!1:(this._classList.add(v),l=!0),this._updateClassList(),l}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const l=this._map,h=this._container,x=this._pos;if(!l||!h||!x)return"bottom";const E=h.offsetWidth,L=h.offsetHeight,M=x.x<E/2,q=x.x>l.transform.width-E/2;if(x.y+v<L)return M?"top-left":q?"top-right":"top";if(x.y>l.transform.height-L){if(M)return"bottom-left";if(q)return"bottom-right"}return M?"left":q?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),v.className=l.join(" ")}_update(v){const l=this._map,h=this._content;if(!l||!this._lngLat&&!this._trackPointer||!h)return;let x=this._container;if(x||(x=this._container=D("div","mapboxgl-popup",l.getContainer()),this._tip=D("div","mapboxgl-popup-tip",x),x.appendChild(h)),this.options.maxWidth&&x.style.maxWidth!==this.options.maxWidth&&(x.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ph(this._lngLat,this._pos,l.transform)),!this._trackPointer||v){const E=this._pos=this._trackPointer&&v instanceof i.P?v:l.project(this._lngLat),L=Db(this.options.offset),M=this._anchor=this._getAnchor(L.y),q=Db(this.options.offset,M),X=E.add(q).round();l._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${fd[M]} translate(${X.x}px,${X.y}px)`)})}if(!this._marker&&l._showingGlobe()){const E=i.dz(l.transform,this._lngLat)?0:1;this._setOpacity(E)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(ES);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:jh,Style:kn,LngLat:i.bK,LngLatBounds:i.as,Point:i.P,MercatorCoordinate:i.a5,FreeCameraOptions:nl,Evented:i.E,config:i.e,prewarm:i.dE,clearPrewarmedResources:i.dF,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(v){i.e.ACCESS_TOKEN=v},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(v){i.e.API_URL=v},get workerCount(){return i.dG.workerCount},set workerCount(v){i.dG.workerCount=v},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){i.e.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){i.dH(v)},get workerUrl(){return i.dI.workerUrl},set workerUrl(v){i.dI.workerUrl=v},get workerClass(){return i.dI.workerClass},set workerClass(v){i.dI.workerClass=v},get workerParams(){return i.dI.workerParams},set workerParams(v){i.dI.workerParams=v},get dracoUrl(){return i.dJ()},set dracoUrl(v){i.dK(v)},get meshoptUrl(){return i.dL()},set meshoptUrl(v){i.dM(v)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}});var u=o;return u})})(YV);var Yce=YV.exports;const Li=Bp(Yce);var F1=Jce,Zce=Object.prototype.hasOwnProperty;function Jce(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)Zce.call(r,n)&&(t[n]=r[n])}return t}var JV={exports:{}};(function(t,e){(function(){var r={};t.exports=r,r.simpleFilter=function(n,s){return s.filter(function(o){return r.test(n,o)})},r.test=function(n,s){return r.match(n,s)!==null},r.match=function(n,s,o){o=o||{};var c=0,u=[],i=s.length,m=0,g=0,C=o.pre||"",B=o.post||"",S=o.caseSensitive&&s||s.toLowerCase(),P;n=o.caseSensitive&&n||n.toLowerCase();for(var j=0;j<i;j++)P=s[j],S[j]===n[c]?(P=C+P+B,c+=1,g+=1+g):g=0,m+=g,u[u.length]=P;return c===n.length?(m=S===n?1/0:m,{rendered:u.join(""),score:m}):null},r.filter=function(n,s,o){return!s||s.length===0?[]:typeof n!="string"?s:(o=o||{},s.reduce(function(c,u,i,m){var g=u;o.extract&&(g=o.extract(u));var C=r.match(n,g,o);return C!=null&&(c[c.length]={string:C.rendered,score:C.score,index:i,original:u}),c},[]).sort(function(c,u){var i=u.score-c.score;return i||c.index-u.index}))}})()})(JV);var eue=JV.exports,Xd=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};Xd.prototype.show=function(){this.element.style.display="block"};Xd.prototype.hide=function(){this.element.style.display="none"};Xd.prototype.add=function(t){this.items.push(t)};Xd.prototype.clear=function(){this.items=[],this.active=0};Xd.prototype.isEmpty=function(){return!this.items.length};Xd.prototype.isVisible=function(){return this.element.style.display==="block"};Xd.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()};Xd.prototype.drawItem=function(t,e){var r=document.createElement("li"),n=document.createElement("a");e&&(r.className+=" active"),n.innerHTML=t.string,r.appendChild(n),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))};Xd.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()};Xd.prototype.move=function(t){this.active=t,this.draw()};Xd.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Xd.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Xd.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()};var tue=Xd,rue=F1,nue=eue,iue=tue,nd=function(t,e,r){return r=r||{},this.options=rue({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=t,this.data=e||[],this.list=new iue(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(n){this.handleKeyUp(n.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(n){this.handleKeyDown(n)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(n){this.handlePaste(n)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};nd.prototype.handleKeyUp=function(t){t===40||t===38||t===27||t===13||t===9||this.handleInputChange(this.el.value)};nd.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};nd.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};nd.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}};nd.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var r=0;r<e.length&&(this.list.add(e[r]),r!==this.options.limit-1);r++);this.list.draw()}).bind(this))};nd.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};nd.prototype.update=function(t){this.data=t,this.handleKeyUp()};nd.prototype.clear=function(){this.data=[],this.list.clear()};nd.prototype.normalize=function(t){return t=t.toLowerCase(),t};nd.prototype.match=function(t,e){return t.indexOf(e)>-1};nd.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};nd.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(n){return this.getItemValue(n)}).bind(this)},r;this.options.filter?(r=nue.filter(this.query,this.data,e),r=r.map((function(n){return{original:n.original,string:this.render(n.original,n.string)}}).bind(this))):r=this.data.map((function(n){var s=this.render(n);return{original:n,string:s}}).bind(this)),t(r)};nd.prototype.getItemValue=function(t){return t};nd.prototype.render=function(t,e){if(e)return e;for(var r=t.original?this.getItemValue(t.original):this.getItemValue(t),n=this.normalize(r),s=n.lastIndexOf(this.query);s>-1;){var o=s+this.query.length;r=r.slice(0,s)+"<strong>"+r.slice(s,o)+"</strong>"+r.slice(o),s=n.slice(0,s).lastIndexOf(this.query)}return r};nd.prototype.renderError=function(t){this.list.drawError(t)};var sue=nd,eG=sue,oue=eG;typeof window<"u"&&(window.Suggestions=eG);var aue="Expected a function",N8=NaN,lue="[object Symbol]",cue=/^\s+|\s+$/g,uue=/^[-+]0x[0-9a-f]+$/i,due=/^0b[01]+$/i,hue=/^0o[0-7]+$/i,fue=parseInt,pue=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,Aue=typeof self=="object"&&self&&self.Object===Object&&self,mue=pue||Aue||Function("return this")(),gue=Object.prototype,yue=gue.toString,vue=Math.max,xue=Math.min,HE=function(){return mue.Date.now()};function _ue(t,e,r){var n,s,o,c,u,i,m=0,g=!1,C=!1,B=!0;if(typeof t!="function")throw new TypeError(aue);e=F8(e)||0,b6(r)&&(g=!!r.leading,C="maxWait"in r,o=C?vue(F8(r.maxWait)||0,e):o,B="trailing"in r?!!r.trailing:B);function S(se){var oe=n,K=s;return n=s=void 0,m=se,c=t.apply(K,oe),c}function P(se){return m=se,u=setTimeout(F,e),g?S(se):c}function j(se){var oe=se-i,K=se-m,de=e-oe;return C?xue(de,o-K):de}function D(se){var oe=se-i,K=se-m;return i===void 0||oe>=e||oe<0||C&&K>=o}function F(){var se=HE();if(D(se))return R(se);u=setTimeout(F,j(se))}function R(se){return u=void 0,B&&n?S(se):(n=s=void 0,c)}function V(){u!==void 0&&clearTimeout(u),m=0,n=i=s=u=void 0}function Y(){return u===void 0?c:R(HE())}function te(){var se=HE(),oe=D(se);if(n=arguments,s=this,i=se,oe){if(u===void 0)return P(i);if(C)return u=setTimeout(F,e),S(i)}return u===void 0&&(u=setTimeout(F,e)),c}return te.cancel=V,te.flush=Y,te}function b6(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function bue(t){return!!t&&typeof t=="object"}function wue(t){return typeof t=="symbol"||bue(t)&&yue.call(t)==lue}function F8(t){if(typeof t=="number")return t;if(wue(t))return N8;if(b6(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=b6(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(cue,"");var r=due.test(t);return r||hue.test(t)?fue(t.slice(2),r?2:8):uue.test(t)?N8:+t}var Cue=_ue,NN={exports:{}},Zy=typeof Reflect=="object"?Reflect:null,P8=Zy&&typeof Zy.apply=="function"?Zy.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},h5;Zy&&typeof Zy.ownKeys=="function"?h5=Zy.ownKeys:Object.getOwnPropertySymbols?h5=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:h5=function(e){return Object.getOwnPropertyNames(e)};function Sue(t){console&&console.warn&&console.warn(t)}var tG=Number.isNaN||function(e){return e!==e};function Fa(){Fa.init.call(this)}NN.exports=Fa;NN.exports.once=Lue;Fa.EventEmitter=Fa;Fa.prototype._events=void 0;Fa.prototype._eventsCount=0;Fa.prototype._maxListeners=void 0;var j8=10;function _C(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Fa,"defaultMaxListeners",{enumerable:!0,get:function(){return j8},set:function(t){if(typeof t!="number"||t<0||tG(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");j8=t}});Fa.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Fa.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||tG(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function rG(t){return t._maxListeners===void 0?Fa.defaultMaxListeners:t._maxListeners}Fa.prototype.getMaxListeners=function(){return rG(this)};Fa.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",o=this._events;if(o!==void 0)s=s&&o.error===void 0;else if(!s)return!1;if(s){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var u=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw u.context=c,u}var i=o[e];if(i===void 0)return!1;if(typeof i=="function")P8(i,this,r);else for(var m=i.length,g=aG(i,m),n=0;n<m;++n)P8(g[n],this,r);return!0};function nG(t,e,r,n){var s,o,c;if(_C(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),c=o[e]),c===void 0)c=o[e]=r,++t._eventsCount;else if(typeof c=="function"?c=o[e]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),s=rG(t),s>0&&c.length>s&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=c.length,Sue(u)}return t}Fa.prototype.addListener=function(e,r){return nG(this,e,r,!1)};Fa.prototype.on=Fa.prototype.addListener;Fa.prototype.prependListener=function(e,r){return nG(this,e,r,!0)};function Bue(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function iG(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=Bue.bind(n);return s.listener=r,n.wrapFn=s,s}Fa.prototype.once=function(e,r){return _C(r),this.on(e,iG(this,e,r)),this};Fa.prototype.prependOnceListener=function(e,r){return _C(r),this.prependListener(e,iG(this,e,r)),this};Fa.prototype.removeListener=function(e,r){var n,s,o,c,u;if(_C(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){u=n[c].listener,o=c;break}if(o<0)return this;o===0?n.shift():Eue(n,o),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this};Fa.prototype.off=Fa.prototype.removeListener;Fa.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),c;for(s=0;s<o.length;++s)c=o[s],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function sG(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?Tue(s):aG(s,s.length)}Fa.prototype.listeners=function(e){return sG(this,e,!0)};Fa.prototype.rawListeners=function(e){return sG(this,e,!1)};Fa.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):oG.call(t,e)};Fa.prototype.listenerCount=oG;function oG(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Fa.prototype.eventNames=function(){return this._eventsCount>0?h5(this._events):[]};function aG(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Eue(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Tue(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Lue(t,e){return new Promise(function(r,n){function s(c){t.removeListener(e,o),n(c)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}lG(t,e,o,{once:!0}),e!=="error"&&Iue(t,s,{once:!0})})}function Iue(t,e,r){typeof t.on=="function"&&lG(t,"error",e,r)}function lG(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(o){n.once&&t.removeEventListener(e,s),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Nue=NN.exports,Fue={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function Pue(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}function jue(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var r=e[1],n=e[2].split(";"),s=null,o=n.reduce(function(c,u){var i=Pue(u);return i?i.key==="rel"?(s||(s=i.value),c):(c[i.key]=i.value,c):c},{});return s?{url:r,rel:s,params:o}:null}function Mue(t){return t?t.split(/,\s*</).reduce(function(e,r){var n=jue(r);if(!n)return e;var s=n.rel.split(/\s+/);return s.forEach(function(o){e[o]||(e[o]={url:n.url,params:n.params})}),e},{}):{}}var kue=Mue,Due=kue;function FN(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch{this.body=e.body}this.links=Due(this.headers.link)}FN.prototype.hasNextPage=function(){return!!this.links.next};FN.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Oue=FN,bC={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},M8=bC;function Rue(t){var e=t.type||M8.ERROR_HTTP,r;if(t.body)try{r=JSON.parse(t.body)}catch{r=t.body}else r=null;var n=t.message||null;n||(typeof r=="string"?n=r:r&&typeof r.message=="string"?n=r.message:e===M8.ERROR_REQUEST_ABORTED&&(n="Request aborted")),this.message=n,this.type=e,this.statusCode=t.statusCode||null,this.request=t.request,this.body=r}var Uue=Rue;function zue(t){var e=t.indexOf(":"),r=t.substring(0,e).trim().toLowerCase(),n=t.substring(e+1).trim();return{name:r,value:n}}function Que(t){var e={};return t&&t.trim().split(/[\r|\n]+/).forEach(function(r){var n=zue(r);e[n.name]=n.value}),e}var Hue=Que,Vue=Oue,k8=Uue,VE=bC,Gue=Hue,p4={};function $ue(t){var e=p4[t.id];e&&(e.abort(),delete p4[t.id])}function que(t,e){return new Vue(t,{body:e.response,headers:Gue(e.getAllResponseHeaders()),statusCode:e.status})}function D8(t){var e=t.total,r=t.loaded,n=100*r/e;return{total:e,transferred:r,percent:n}}function cG(t,e){return new Promise(function(r,n){e.onprogress=function(c){t.emitter.emit(VE.EVENT_PROGRESS_DOWNLOAD,D8(c))};var s=t.file;s&&(e.upload.onprogress=function(c){t.emitter.emit(VE.EVENT_PROGRESS_UPLOAD,D8(c))}),e.onerror=function(c){n(c)},e.onabort=function(){var c=new k8({request:t,type:VE.ERROR_REQUEST_ABORTED});n(c)},e.onload=function(){if(delete p4[t.id],e.status<200||e.status>=400){var c=new k8({request:t,body:e.response,statusCode:e.status});n(c);return}r(e)};var o=t.body;typeof o=="string"?e.send(o):o?e.send(JSON.stringify(o)):s?e.send(s):e.send(),p4[t.id]=e}).then(function(r){return que(t,r)})}function uG(t,e){var r=t.url(e),n=new window.XMLHttpRequest;return n.open(t.method,r),Object.keys(t.headers).forEach(function(s){n.setRequestHeader(s,t.headers[s])}),n}function Wue(t){return Promise.resolve().then(function(){var e=uG(t,t.client.accessToken);return cG(t,e)})}var Kue={browserAbort:$ue,sendRequestXhr:cG,browserSend:Wue,createRequestXhr:uG},A4={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */A4.exports;(function(t,e){(function(r){var n=e,s=t&&t.exports==n&&t,o=typeof Ho=="object"&&Ho;(o.global===o||o.window===o)&&(r=o);var c=function(P){this.message=P};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var u=function(P){throw new c(P)},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=/[\t\n\f\r ]/g,g=function(P){P=String(P).replace(m,"");var j=P.length;j%4==0&&(P=P.replace(/==?$/,""),j=P.length),(j%4==1||/[^+a-zA-Z0-9/]/.test(P))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var D=0,F,R,V="",Y=-1;++Y<j;)R=i.indexOf(P.charAt(Y)),F=D%4?F*64+R:R,D++%4&&(V+=String.fromCharCode(255&F>>(-2*D&6)));return V},C=function(P){P=String(P),/[^\0-\xFF]/.test(P)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var j=P.length%3,D="",F=-1,R,V,Y,te,se=P.length-j;++F<se;)R=P.charCodeAt(F)<<16,V=P.charCodeAt(++F)<<8,Y=P.charCodeAt(++F),te=R+V+Y,D+=i.charAt(te>>18&63)+i.charAt(te>>12&63)+i.charAt(te>>6&63)+i.charAt(te&63);return j==2?(R=P.charCodeAt(F)<<8,V=P.charCodeAt(++F),te=R+V,D+=i.charAt(te>>10)+i.charAt(te>>4&63)+i.charAt(te<<2&63)+"="):j==1&&(te=P.charCodeAt(F),D+=i.charAt(te>>2)+i.charAt(te<<4&63)+"=="),D},B={encode:C,decode:g,version:"0.1.0"};if(n&&!n.nodeType)if(s)s.exports=B;else for(var S in B)B.hasOwnProperty(S)&&(n[S]=B[S]);else r.base64=B})(Ho)})(A4,A4.exports);var Xue=A4.exports,Yue=Xue,GE={};function Zue(t){if(GE[t])return GE[t];var e=t.split("."),r=e[0],n=e[1];if(!n)throw new Error("Invalid token");var s=Jue(n),o={usage:r,user:s.u};return Bg(s,"a")&&(o.authorization=s.a),Bg(s,"exp")&&(o.expires=s.exp*1e3),Bg(s,"iat")&&(o.created=s.iat*1e3),Bg(s,"scopes")&&(o.scopes=s.scopes),Bg(s,"client")&&(o.client=s.client),Bg(s,"ll")&&(o.lastLogin=s.ll),Bg(s,"iu")&&(o.impersonator=s.iu),GE[t]=o,o}function Jue(t){try{return JSON.parse(Yue.decode(t))}catch{throw new Error("Invalid token")}}function Bg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var dG=Zue,hG={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(i,m,g){this.fn=i,this.context=m,this.once=g||!1}function o(i,m,g,C,B){if(typeof g!="function")throw new TypeError("The listener must be a function");var S=new s(g,C||i,B),P=r?r+m:m;return i._events[P]?i._events[P].fn?i._events[P]=[i._events[P],S]:i._events[P].push(S):(i._events[P]=S,i._eventsCount++),i}function c(i,m){--i._eventsCount===0?i._events=new n:delete i._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],g,C;if(this._eventsCount===0)return m;for(C in g=this._events)e.call(g,C)&&m.push(r?C.slice(1):C);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},u.prototype.listeners=function(m){var g=r?r+m:m,C=this._events[g];if(!C)return[];if(C.fn)return[C.fn];for(var B=0,S=C.length,P=new Array(S);B<S;B++)P[B]=C[B].fn;return P},u.prototype.listenerCount=function(m){var g=r?r+m:m,C=this._events[g];return C?C.fn?1:C.length:0},u.prototype.emit=function(m,g,C,B,S,P){var j=r?r+m:m;if(!this._events[j])return!1;var D=this._events[j],F=arguments.length,R,V;if(D.fn){switch(D.once&&this.removeListener(m,D.fn,void 0,!0),F){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,g),!0;case 3:return D.fn.call(D.context,g,C),!0;case 4:return D.fn.call(D.context,g,C,B),!0;case 5:return D.fn.call(D.context,g,C,B,S),!0;case 6:return D.fn.call(D.context,g,C,B,S,P),!0}for(V=1,R=new Array(F-1);V<F;V++)R[V-1]=arguments[V];D.fn.apply(D.context,R)}else{var Y=D.length,te;for(V=0;V<Y;V++)switch(D[V].once&&this.removeListener(m,D[V].fn,void 0,!0),F){case 1:D[V].fn.call(D[V].context);break;case 2:D[V].fn.call(D[V].context,g);break;case 3:D[V].fn.call(D[V].context,g,C);break;case 4:D[V].fn.call(D[V].context,g,C,B);break;default:if(!R)for(te=1,R=new Array(F-1);te<F;te++)R[te-1]=arguments[te];D[V].fn.apply(D[V].context,R)}}return!0},u.prototype.on=function(m,g,C){return o(this,m,g,C,!1)},u.prototype.once=function(m,g,C){return o(this,m,g,C,!0)},u.prototype.removeListener=function(m,g,C,B){var S=r?r+m:m;if(!this._events[S])return this;if(!g)return c(this,S),this;var P=this._events[S];if(P.fn)P.fn===g&&(!B||P.once)&&(!C||P.context===C)&&c(this,S);else{for(var j=0,D=[],F=P.length;j<F;j++)(P[j].fn!==g||B&&!P[j].once||C&&P[j].context!==C)&&D.push(P[j]);D.length?this._events[S]=D.length===1?D[0]:D:c(this,S)}return this},u.prototype.removeAllListeners=function(m){var g;return m?(g=r?r+m:m,this._events[g]&&c(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u})(hG);var ede=hG.exports;function tde(t){return t.map(encodeURIComponent).join(",")}function fG(t){return Array.isArray(t)?tde(t):encodeURIComponent(String(t))}function pG(t,e,r){if(r===!1||r===null)return t;var n=/\?/.test(t)?"&":"?",s=encodeURIComponent(e);return r!==void 0&&r!==""&&r!==!0&&(s+="="+fG(r)),""+t+n+s}function rde(t,e){if(!e)return t;var r=t;return Object.keys(e).forEach(function(n){var s=e[n];s!==void 0&&(Array.isArray(s)&&(s=s.filter(function(o){return o!=null}).join(",")),r=pG(r,n,s))}),r}function nde(t,e){if(!e||t.slice(0,4)==="http")return t;var r=t[0]==="/"?"":"/";return""+e.replace(/\/$/,"")+r+t}function ide(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,function(r,n){var s=e[n];if(s===void 0)throw new Error("Unspecified route parameter "+n);var o=fG(s);return"/"+o}):t}var sde={appendQueryObject:rde,appendQueryParam:pG,prependOrigin:nde,interpolateRouteParams:ide},ode=dG,PN=F1,ade=ede,r2=sde,O8=bC,lde=1;function Gm(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};e.body&&(r["content-type"]="application/json");var n=PN(r,e.headers),s=Object.keys(n).reduce(function(o,c){return o[c.toLowerCase()]=n[c],o},{});this.id=lde++,this._options=e,this.emitter=new ade,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=s}Gm.prototype.url=function(e){var r=r2.prependOrigin(this.path,this.origin);r=r2.appendQueryObject(r,this.query);var n=this.params,s=e??this.client.accessToken;if(s){r=r2.appendQueryParam(r,"access_token",s);var o=ode(s).user;n=PN({ownerId:o},n)}return r=r2.interpolateRouteParams(r,n),r};Gm.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then(function(r){return e.response=r,e.emitter.emit(O8.EVENT_RESPONSE,r),r},function(r){throw e.error=r,e.emitter.emit(O8.EVENT_ERROR,r),r})};Gm.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Gm.prototype.eachPage=function(e){var r=this;function n(c){function u(){delete r._nextPageRequest;var i=c.nextPage();i&&(r._nextPageRequest=i,o(i))}e(null,c,u)}function s(c){e(c,null,function(){})}function o(c){c.send().then(n,s)}o(this)};Gm.prototype.clone=function(){return this._extend()};Gm.prototype._extend=function(e){var r=PN(this._options,e);return new Gm(this.client,r)};var cde=Gm,ude=dG,dde=cde,hde=bC;function AG(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");ude(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||hde.API_ORIGIN}AG.prototype.createRequest=function(e){return new dde(this,e)};var mG=AG,gG=Kue,yG=mG;function y1(t){yG.call(this,t)}y1.prototype=Object.create(yG.prototype);y1.prototype.constructor=y1;y1.prototype.sendRequest=gG.browserSend;y1.prototype.abortRequest=gG.browserAbort;function fde(t){return new y1(t)}var vG=fde,pde=vG,Ade=pde,mde=Object.prototype.toString,gde=function(t){var e;return mde.call(t)==="[object Object]"&&(e=Object.getPrototypeOf(t),e===null||e===Object.getPrototypeOf({}))},yde=gde,vde=F1,xG="value",$E=`
  `,el={};el.assert=function(t,e){return e=e||{},function(r){var n=$m(t,r);if(n){var s=jN(n,e);throw e.apiName&&(s=e.apiName+": "+s),new Error(s)}}};el.shape=function(e){var r=wde(e);return function(s){var o=$m(el.plainObject,s);if(o)return o;for(var c,u,i=[],m=0;m<r.length;m++)c=r[m].key,u=r[m].value,o=$m(u,s[c]),o&&i.push([c].concat(o));return i.length<2?i[0]:function(g){i=i.map(function(S){var P=S[0],j=jN(S,g).split(`
`).join($E);return"- "+P+": "+j});var C=g.path.join("."),B=C===xG?"":" of "+C;return"The following properties"+B+" have invalid values:"+$E+i.join($E)}}};el.strictShape=function(e){var r=el.shape(e);return function(s){var o=r(s);if(o)return o;var c=Object.keys(s).reduce(function(u,i){return e[i]===void 0&&u.push(i),u},[]);if(c.length!==0)return function(){return"The following keys are invalid: "+c.join(", ")}}};el.arrayOf=function(e){return _G(e)};el.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return _G(e)};function _G(t){var e=Array.isArray(t),r=function(n){return e?t[n]:t};return function(s){var o=$m(el.plainArray,s);if(o)return o;if(e&&s.length!==t.length)return"an array with "+t.length+" items";for(var c=0;c<s.length;c++)if(o=$m(r(c),s[c]),o)return[c].concat(o)}}el.required=function(e){function r(n){return n==null?function(s){return bG(s,wG(s.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return r.__required=!0,r};el.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(n){var s=e.map(function(o){return $m(o,n)}).filter(Boolean);if(s.length===e.length)return s.every(function(o){return o.length===1&&typeof o[0]=="string"})?xde(s.map(function(o){return o[0]})):s.reduce(function(o,c){return c.length>o.length?c:o})}};el.equal=function(e){return function(n){if(n!==e)return JSON.stringify(e)}};el.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),r=e.map(function(n){return el.equal(n)});return el.oneOfType.apply(this,r)};el.range=function(e){var r=e[0],n=e[1];return function(o){var c=$m(el.number,o);if(c||o<r||o>n)return"number between "+r+" & "+n+" (inclusive)"}};el.any=function(){};el.boolean=function(e){if(typeof e!="boolean")return"boolean"};el.number=function(e){if(typeof e!="number")return"number"};el.plainArray=function(e){if(!Array.isArray(e))return"array"};el.plainObject=function(e){if(!yde(e))return"object"};el.string=function(e){if(typeof e!="string")return"string"};el.func=function(e){if(typeof e!="function")return"function"};function $m(t,e){if(!(e==null&&!t.hasOwnProperty("__required"))){var r=t(e);if(r)return Array.isArray(r)?r:[r]}}function jN(t,e){var r=t.length,n=t[r-1],s=t.slice(0,r-1);return s.length===0&&(s=[xG]),e=vde(e,{path:s}),typeof n=="function"?n(e):bG(e,_de(n))}function xde(t){return t.length<2?t[0]:t.length===2?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function _de(t){return"must be "+bde(t)+"."}function bde(t){return/^an? /.test(t)?t:/^[aeiou]/i.test(t)?"an "+t:/^[a-z]/i.test(t)?"a "+t:t}function bG(t,e){var r=wG(t.path),n=t.path.join(".")+" "+e,s=r?"Item at position ":"";return s+n}function wG(t){return typeof t[t.length-1]=="number"||typeof t[0]=="number"}function wde(t){return Object.keys(t||{}).map(function(e){return{key:e,value:t[e]}})}el.validate=$m;el.processMessage=jN;var Cde=el,Sde=F1,Jy=Cde;function Bde(t){if(typeof window<"u")return t instanceof Ho.Blob||t instanceof Ho.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof t=="string"||t.pipe!==void 0))return"Filename or Readable stream"}function Ede(t,e){return Jy.assert(Jy.strictShape(t),e)}function Tde(t){var e="date";if(typeof t=="boolean")return e;try{var r=new Date(t);if(r.getTime&&isNaN(r.getTime()))return e}catch{return e}}function Lde(t){return Jy.tuple(Jy.number,Jy.number)(t)}var Ide=Sde(Jy,{file:Bde,date:Tde,coordinates:Lde,assertShape:Ede});function Nde(t,e){var r=function(n,s){return e.indexOf(n)!==-1&&s!==void 0};return typeof e=="function"&&(r=e),Object.keys(t).filter(function(n){return r(n,t[n])}).reduce(function(n,s){return n[s]=t[s],n},{})}var Fde=Nde;function Pde(t,e){return Object.keys(t).reduce(function(r,n){return r[n]=e(n,t[n]),r},{})}var jde=Pde,Mde=jde;function kde(t){return Mde(t,function(e,r){return typeof r=="boolean"?JSON.stringify(r):r})}var Dde=kde,Ode=mG,Rde=vG;function Ude(t){return function(e){var r;Ode.prototype.isPrototypeOf(e)?r=e:r=Rde(e);var n=Object.create(t);return n.client=r,n}}var zde=Ude,CG=F1,Ao=Ide,m4=Fde,SG=Dde,Qde=zde,MN={},BG=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];MN.forwardGeocode=function(t){Ao.assertShape({query:Ao.required(Ao.string),mode:Ao.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ao.arrayOf(Ao.string),proximity:Ao.oneOf(Ao.coordinates,"ip"),types:Ao.arrayOf(Ao.oneOf(BG)),autocomplete:Ao.boolean,bbox:Ao.arrayOf(Ao.number),limit:Ao.number,language:Ao.arrayOf(Ao.string),routing:Ao.boolean,fuzzyMatch:Ao.boolean,worldview:Ao.string,session_token:Ao.string})(t),t.mode=t.mode||"mapbox.places";var e=SG(CG({country:t.countries},m4(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:m4(t,["mode","query"]),query:e})};MN.reverseGeocode=function(t){Ao.assertShape({query:Ao.required(Ao.coordinates),mode:Ao.oneOf("mapbox.places","mapbox.places-permanent"),countries:Ao.arrayOf(Ao.string),types:Ao.arrayOf(Ao.oneOf(BG)),bbox:Ao.arrayOf(Ao.number),limit:Ao.number,language:Ao.arrayOf(Ao.string),reverseMode:Ao.oneOf("distance","score"),routing:Ao.boolean,worldview:Ao.string,session_token:Ao.string})(t),t.mode=t.mode||"mapbox.places";var e=SG(CG({country:t.countries},m4(t,["country","types","bbox","limit","language","reverseMode","routing","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:m4(t,["mode","query"]),query:e})};var Hde=Qde(MN);let Vde="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",EG=t=>crypto.getRandomValues(new Uint8Array(t)),TG=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(o=e)=>{let c="";for(;;){let u=r(s),i=s;for(;i--;)if(c+=t[u[i]&n]||"",c.length===o)return c}}},Gde=(t,e=21)=>TG(t,e,EG),$de=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const qde=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:Gde,customRandom:TG,nanoid:$de,random:EG,urlAlphabet:Vde},Symbol.toStringTag,{value:"Module"})),Wde=$4(qde);var Kde=Wde.nanoid;function LG(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.3.0",this.pluginSessionID=this.generateSessionID(),this.sessionIncrementer=0,this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}LG.prototype={select:function(t,e){var r=this.getEventPayload("search.select",e,{selectedFeature:t});if(r&&!(r.resultIndex===this.lastSentIndex&&r.queryString===this.lastSentInput||r.resultIndex==-1))return this.lastSentIndex=r.resultIndex,this.lastSentInput=r.queryString,this.push(r)},start:function(t){var e=this.getEventPayload("search.start",t);if(e)return this.push(e)},keyevent:function(t,e){if(t.key&&!(t.metaKey||[9,27,37,39,13,38,40].indexOf(t.keyCode)!==-1)){var r=this.getEventPayload("search.keystroke",e,{key:t.key});if(r)return this.push(r)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var r=this.getRequestOptions(t);this.request(r,(function(n){if(n)return this.handleError(n,e);if(e)return e()}).bind(this))},getRequestOptions:function(t){Array.isArray(t)||(t=[t]);var e={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return e},getEventPayload:function(t,e,r={}){if(t==="search.select"&&!r.selectedFeature||t==="search.keystroke"&&!r.key)return null;var n;if(!e.options.proximity)n=null;else if(typeof e.options.proximity=="object")n=[e.options.proximity.longitude,e.options.proximity.latitude];else if(e.options.proximity==="ip"){var s=e._headers?e._headers["ip-proximity"]:null;s&&typeof s=="string"?n=s.split(",").map(parseFloat):n=[999,999]}else n=e.options.proximity;var o=e._map?e._map.getZoom():void 0,c={event:t,version:this.getEventSchemaVersion(t),created:+new Date,sessionIdentifier:this.getSessionId(),country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:n,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:o,keyboardLocale:this.locale};if(t==="search.select"?c.queryString=e.inputString:t!="search.select"&&e._inputEl?c.queryString=e._inputEl.value:c.queryString=e.inputString,["search.keystroke","search.select"].includes(t)&&(c.path="geocoding/v5/mapbox.places"),t==="search.keystroke"&&r.key)c.lastAction=r.key;else if(t==="search.select"&&r.selectedFeature){var u=r.selectedFeature,i=this.getSelectedIndex(u,e);if(c.resultIndex=i,c.resultPlaceName=u.place_name,c.resultId=u.id,u.properties&&(c.resultMapboxId=u.properties.mapbox_id),e._typeahead){var m=e._typeahead.data;m&&m.length>0&&(c.suggestionIds=this.getSuggestionIds(m),c.suggestionNames=this.getSuggestionNames(m),c.suggestionTypes=this.getSuggestionTypes(m),c.suggestionSources=this.getSuggestionSources(m))}}return this.validatePayload(c)?c:null},request:function(t,e){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(this.readyState==4)return this.status==204?e(null):e(this.statusText)},r.open(t.method,t.host+"/"+t.path,!0);for(var n in t.headers){var s=t.headers[n];r.setRequestHeader(n,s)}r.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return Kde()},getSessionId:function(){return this.pluginSessionID+"."+this.sessionIncrementer},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var r=e._typeahead.data,n=t.id,s=r.map(function(c){return c.id}),o=s.indexOf(n);return o}},getSuggestionIds:function(t){return t.map(function(e){return e.properties?e.properties.mapbox_id||"":e.id||""})},getSuggestionNames:function(t){return t.map(function(e){return e.place_name||""})},getSuggestionTypes:function(t){return t.map(function(e){return e.place_type&&Array.isArray(e.place_type)&&e.place_type[0]||""})},getSuggestionSources:function(t){return t.map(function(e){return e._source||""})},getEventSchemaVersion:function(t){return["search.keystroke","search.select"].includes(t)?"2.2":"2.0"},validatePayload:function(t){if(!t||!t.event)return!1;var e=["event","created","sessionIdentifier","queryString"],r=["event","created","sessionIdentifier","queryString","lastAction"],n=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],s=t.event;return s==="search.start"?this.objectHasRequiredProps(t,e):s==="search.keystroke"?this.objectHasRequiredProps(t,r):s==="search.select"?this.objectHasRequiredProps(t,n):!0},objectHasRequiredProps:function(t,e){return e.every(function(r){return r==="queryString"?typeof t[r]=="string"&&t[r].length>0:t[r]!==void 0})},shouldEnableLogging:function(t){return!(t.enableEventLogging===!1||t.origin&&t.origin!=="https://api.mapbox.com")},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}};var Xde=LG,Yde={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},Zde={placeholder:Yde},IG={exports:{}};(function(t){(function(e,r,n){t.exports?t.exports=n():e[r]=n()})(Ho,"subtag",function(){var e="",r=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(i){return i.match(r)||[]}function s(i){return n(i).filter(function(m,g){return m&&g})}function o(i){return i=n(i),{language:i[1]||e,extlang:i[2]||e,script:i[3]||e,region:i[4]||e}}function c(i,m,g){Object.defineProperty(i,m,{value:g,enumerable:!0})}function u(i,m,g){function C(B){return n(B)[i]||e}c(C,"pattern",m),c(o,g,C)}return u(1,/^[a-zA-Z]{2,3}$/,"language"),u(2,/^[a-zA-Z]{3}$/,"extlang"),u(3,/^[a-zA-Z]{4}$/,"script"),u(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),c(o,"split",s),o})})(IG);var Jde=IG.exports;function NG(){}NG.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(e,r){window.navigator.geolocation.getCurrentPosition(e,r,t)})}};var ehe=NG;function the(t,e){const r=FG(t),n=["address","street","place","country"];var s;if(typeof e=="function")return e(r);const o=n.indexOf(e);return o===-1?s=n:s=n.slice(o),s.reduce(function(c,u){return r[u]?(c!==""&&(c=c+", "),c+r[u]):c},"")}function FG(t){const e=t.address||"",r=t.text||"",n=t.place_name||"",o={address:n.split(",")[0],houseNumber:e,street:r,placeName:n};return t.context.forEach(function(c){const u=c.id.split(".")[0];o[u]=c.text}),o}const rhe=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var nhe={transformFeatureToGeolocationText:the,getAddressInfo:FG,REVERSE_GEOCODE_COORD_RGX:rhe},ihe=oue,she=Cue,Mg=F1,ohe=Nue.EventEmitter,R8=Fue,qE=Ade,WE=Hde,ahe=Xde,lhe=Zde,che=Jde,uhe=ehe,U8=nhe;const HA={FORWARD:0,LOCAL:1,REVERSE:2};function dhe(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}function PG(t){this._eventEmitter=new ohe,this.options=Mg({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new uhe}PG.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},_headers:{},addTo:function(t){function e(r,n){if(!document.body.contains(n))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();n.appendChild(s)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else if(typeof t=="string"){const r=document.querySelectorAll(t);if(r.length===0)throw new Error("Element ",t,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,r[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(t){if(t&&typeof t!="string"&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=WE(qE({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new ahe(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",she(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(m){this.eventManager.keyevent(m,this)}).bind(this));var n=document.createElement("div");n.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),n.appendChild(this._clearEl),n.appendChild(this._loadingEl),e.appendChild(r),e.appendChild(this._inputEl),e.appendChild(n),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(o),n.appendChild(this._geolocateEl),this._showGeolocateButton()}var c=this._typeahead=new ihe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),c.getItemValue=this.options.getItemValue;var u=c.list.draw,i=this._footerNode=dhe();return c.list.draw=function(){u.call(this),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(i)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(t){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const r={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const n=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(n),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(r).send().then((function(n){const s=n.body.features[0];if(s){const o=U8.transformFeatureToGeolocationText(s,this.options.addressAccuracy);this._setInputValue(o),s.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:s})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(t){t.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),r.innerHTML=e,r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,r=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var n=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target,s=n?n.value:"";if(!s)return this.fresh=!0,t.keyCode!==r&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(t.metaKey||[r,e,37,39,13,38,40].indexOf(t.keyCode)!==-1)&&n.value.length>=this.options.minLength&&this._geocode(n.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var e;if(t.properties&&R8[t.properties.short_code])e=Mg({},this.options.flyTo),this._map&&this._map.fitBounds(R8[t.properties.short_code].bbox,e);else if(t.bbox){var r=t.bbox;e=Mg({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],e)}else{var n={zoom:this.options.zoom};e=Mg({},n,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(t,e){var r;return t.localGeocoderOnly?r=HA.LOCAL:t.reverseGeocode&&U8.REVERSE_GEOCODE_COORD_RGX.test(e)?r=HA.REVERSE:r=HA.FORWARD,r},_setupConfig:function(t,e){const r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],n=/[\s,]+/;var s=this,o=r.reduce(function(u,i){if(s.options[i]===void 0||s.options[i]===null)return u;["countries","types","language"].indexOf(i)>-1?u[i]=s.options[i].split(n):u[i]=s.options[i];const m=typeof s.options[i].longitude=="number"&&typeof s.options[i].latitude=="number";if(i==="proximity"&&m){const g=s.options[i].longitude,C=s.options[i].latitude;u[i]=[g,C]}return u},{});switch(t){case HA.REVERSE:{var c=e.split(n).map(function(u){return parseFloat(u,10)});s.options.flipCoordinates||c.reverse(),o.types&&o.types[0],o=Mg(o,{query:c,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(u){u in o&&delete o[u]})}break;case HA.FORWARD:{const u=e.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(u)&&(e=e.replace(/,/g," ")),o=Mg(o,{query:e})}break}return o.session_token=this.eventManager.getSessionId(),o},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const e=this._requestType(this.options,t),r=this._setupConfig(e,t);var n;switch(e){case HA.LOCAL:n=Promise.resolve();break;case HA.FORWARD:n=this.geocoderService.forwardGeocode(r).send();break;case HA.REVERSE:n=this.geocoderService.reverseGeocode(r).send();break}var s=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[],o=[],c=null;return n.catch((function(u){c=u}).bind(this)).then((function(u){this._hideLoadingIcon();var i={};return u?u.statusCode=="200"&&(i=u.body,i.request=u.request,i.headers=u.headers,this._headers=u.headers):i={type:"FeatureCollection",features:[]},i.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),i.features&&i.features.length&&i.features.map(function(m){m._source="mapbox"}),i.features=i.features?s.concat(i.features):s,this.options.externalGeocoder?(o=this.options.externalGeocoder(t,i.features)||Promise.resolve([]),o.then(function(m){return i.features=i.features?m.concat(i.features):m,i},function(){return i})):i}).bind(this)).then((function(u){if(c)throw c;this.options.filter&&u.features.length&&(u.features=u.features.filter(this.options.filter)),u.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",u),this._typeahead.update(u.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",u))}).bind(this)).catch((function(u){this._hideLoadingIcon(),this._hideAttribution(),s.length&&this.options.localGeocoder||o.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(s)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:s}),this._eventEmitter.emit("error",{error:u})}).bind(this)),n},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this.eventManager.sessionIncrementer++,this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var e=this;t.relatedTarget&&e._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var r=e.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){var t="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(t)},_renderLocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(t)},_renderNoResults:function(){var t="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(t)},_renderUserDeniedGeolocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(t)},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=che.language(t),r=lhe.placeholder[e];if(r)return r}return"Search"},setInput:function(t,e){return e===void 0&&(e=!1),this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&(e?this._geocode(t):this._onChange()),this},setProximity:function(t,e=!0){return this.options.proximity=t,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&typeof t=="function"&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.options.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=WE(qE({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=WE(qE({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var e={color:"#4668F2"},r=Mg({},e,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(r),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}};var hhe=PG;const wC=Bp(hhe);var jG={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Ho,function(){var r=function(ce,Re){var At={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Ht={on:function(er,_r,fn){if(At[er]===void 0)throw new Error("Invalid event type: "+er);At[er].push({selector:_r,fn})},render:function(er){Re.store.featureChanged(er)}},Jt=function(er,_r){for(var fn=At[er],pn=fn.length;pn--;){var Fn=fn[pn];if(Fn.selector(_r)){Fn.fn.call(Ht,_r)||Re.store.render(),Re.ui.updateMapClasses();break}}};return ce.start.call(Ht),{render:ce.render,stop:function(){ce.stop&&ce.stop()},trash:function(){ce.trash&&(ce.trash(),Re.store.render())},combineFeatures:function(){ce.combineFeatures&&ce.combineFeatures()},uncombineFeatures:function(){ce.uncombineFeatures&&ce.uncombineFeatures()},drag:function(er){Jt("drag",er)},click:function(er){Jt("click",er)},mousemove:function(er){Jt("mousemove",er)},mousedown:function(er){Jt("mousedown",er)},mouseup:function(er){Jt("mouseup",er)},mouseout:function(er){Jt("mouseout",er)},keydown:function(er){Jt("keydown",er)},keyup:function(er){Jt("keyup",er)},touchstart:function(er){Jt("touchstart",er)},touchmove:function(er){Jt("touchmove",er)},touchend:function(er){Jt("touchend",er)},tap:function(er){Jt("tap",er)}}};function n(ce){return ce&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce}function s(ce){if(ce.__esModule)return ce;var Re=ce.default;if(typeof Re=="function"){var At=function Ht(){if(this instanceof Ht){var Jt=[null];Jt.push.apply(Jt,arguments);var er=Function.bind.apply(Re,Jt);return new er}return Re.apply(this,arguments)};At.prototype=Re.prototype}else At={};return Object.defineProperty(At,"__esModule",{value:!0}),Object.keys(ce).forEach(function(Ht){var Jt=Object.getOwnPropertyDescriptor(ce,Ht);Object.defineProperty(At,Ht,Jt.get?Jt:{enumerable:!0,get:function(){return ce[Ht]}})}),At}var o={},c={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},u=c;function i(ce){var Re=0;if(ce&&ce.length>0){Re+=Math.abs(m(ce[0]));for(var At=1;At<ce.length;At++)Re-=Math.abs(m(ce[At]))}return Re}function m(ce){var Re,At,Ht,Jt,er,_r,fn=0,pn=ce.length;if(pn>2){for(_r=0;_r<pn;_r++)_r===pn-2?(Ht=pn-2,Jt=pn-1,er=0):_r===pn-1?(Ht=pn-1,Jt=0,er=1):(Ht=_r,Jt=_r+1,er=_r+2),Re=ce[Ht],At=ce[Jt],fn+=(g(ce[er][0])-g(Re[0]))*Math.sin(g(At[1]));fn=fn*u.RADIUS*u.RADIUS/2}return fn}function g(ce){return ce*Math.PI/180}o.geometry=function ce(Re){var At,Ht=0;switch(Re.type){case"Polygon":return i(Re.coordinates);case"MultiPolygon":for(At=0;At<Re.coordinates.length;At++)Ht+=i(Re.coordinates[At]);return Ht;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(At=0;At<Re.geometries.length;At++)Ht+=ce(Re.geometries[At]);return Ht}},o.ring=m;var C={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},B={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},S={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},P={POLYGON:"polygon",LINE:"line_string",POINT:"point"},j={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},D={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},F={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},R={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},V={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},Y={ACTIVE:"true",INACTIVE:"false"},te=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],se=-85,oe=Object.freeze({__proto__:null,classes:C,sources:B,cursors:S,types:P,geojsonTypes:j,modes:D,events:F,updateActions:R,meta:V,activeStates:Y,interactions:te,LAT_MIN:-90,LAT_RENDERED_MIN:se,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),K={Point:0,LineString:1,MultiLineString:1,Polygon:2};function de(ce,Re){var At=K[ce.geometry.type]-K[Re.geometry.type];return At===0&&ce.geometry.type===j.POLYGON?ce.area-Re.area:At}function we(ce){return ce.map(function(Re){return Re.geometry.type===j.POLYGON&&(Re.area=o.geometry({type:j.FEATURE,property:{},geometry:Re.geometry})),Re}).sort(de).map(function(Re){return delete Re.area,Re})}function J(ce,Re){return Re===void 0&&(Re=0),[[ce.point.x-Re,ce.point.y-Re],[ce.point.x+Re,ce.point.y+Re]]}function Z(ce){if(this._items={},this._nums={},this._length=ce?ce.length:0,ce)for(var Re=0,At=ce.length;Re<At;Re++)this.add(ce[Re]),ce[Re]!==void 0&&(typeof ce[Re]=="string"?this._items[ce[Re]]=Re:this._nums[ce[Re]]=Re)}Z.prototype.add=function(ce){return this.has(ce)||(this._length++,typeof ce=="string"?this._items[ce]=this._length:this._nums[ce]=this._length),this},Z.prototype.delete=function(ce){return this.has(ce)===!1||(this._length--,delete this._items[ce],delete this._nums[ce]),this},Z.prototype.has=function(ce){return(typeof ce=="string"||typeof ce=="number")&&(this._items[ce]!==void 0||this._nums[ce]!==void 0)},Z.prototype.values=function(){var ce=this,Re=[];return Object.keys(this._items).forEach(function(At){Re.push({k:At,v:ce._items[At]})}),Object.keys(this._nums).forEach(function(At){Re.push({k:JSON.parse(At),v:ce._nums[At]})}),Re.sort(function(At,Ht){return At.v-Ht.v}).map(function(At){return At.k})},Z.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Ie=[V.FEATURE,V.MIDPOINT,V.VERTEX],be={click:function(ce,Re,At){return He(ce,Re,At,At.options.clickBuffer)},touch:function(ce,Re,At){return He(ce,Re,At,At.options.touchBuffer)}};function He(ce,Re,At,Ht){if(At.map===null)return[];var Jt=ce?J(ce,Ht):Re,er={};At.options.styles&&(er.layers=At.options.styles.map(function(Fn){return Fn.id}).filter(function(Fn){return At.map.getLayer(Fn)!=null}));var _r=At.map.queryRenderedFeatures(Jt,er).filter(function(Fn){return Ie.indexOf(Fn.properties.meta)!==-1}),fn=new Z,pn=[];return _r.forEach(function(Fn){var Mn=Fn.properties.id;fn.has(Mn)||(fn.add(Mn),pn.push(Fn))}),we(pn)}function Fe(ce,Re){var At=be.click(ce,null,Re),Ht={mouse:S.NONE};return At[0]&&(Ht.mouse=At[0].properties.active===Y.ACTIVE?S.MOVE:S.POINTER,Ht.feature=At[0].properties.meta),Re.events.currentModeName().indexOf("draw")!==-1&&(Ht.mouse=S.ADD),Re.ui.queueMapClasses(Ht),Re.ui.updateMapClasses(),At[0]}function ve(ce,Re){var At=ce.x-Re.x,Ht=ce.y-Re.y;return Math.sqrt(At*At+Ht*Ht)}function _e(ce,Re,At){At===void 0&&(At={});var Ht=At.fineTolerance!=null?At.fineTolerance:4,Jt=At.grossTolerance!=null?At.grossTolerance:12,er=At.interval!=null?At.interval:500;ce.point=ce.point||Re.point,ce.time=ce.time||Re.time;var _r=ve(ce.point,Re.point);return _r<Ht||_r<Jt&&Re.time-ce.time<er}function ze(ce,Re,At){At===void 0&&(At={});var Ht=At.tolerance!=null?At.tolerance:25,Jt=At.interval!=null?At.interval:250;return ce.point=ce.point||Re.point,ce.time=ce.time||Re.time,ve(ce.point,Re.point)<Ht&&Re.time-ce.time<Jt}var Ne={exports:{}},st=Ne.exports=function(ce,Re){if(Re||(Re=16),ce===void 0&&(ce=128),ce<=0)return"0";for(var At=Math.log(Math.pow(2,ce))/Math.log(Re),Ht=2;At===1/0;Ht*=2)At=Math.log(Math.pow(2,ce/Ht))/Math.log(Re)*Ht;var Jt=At-Math.floor(At),er="";for(Ht=0;Ht<Math.floor(At);Ht++)er=Math.floor(Math.random()*Re).toString(Re)+er;if(Jt){var _r=Math.pow(Re,Jt);er=Math.floor(Math.random()*_r).toString(Re)+er}var fn=parseInt(er,Re);return fn!==1/0&&fn>=Math.pow(2,ce)?st(ce,Re):er};st.rack=function(ce,Re,At){var Ht=function(er){var _r=0;do{if(_r++>10){if(!At)throw new Error("too many ID collisions, use more bits");ce+=At}var fn=st(ce,Re)}while(Object.hasOwnProperty.call(Jt,fn));return Jt[fn]=er,fn},Jt=Ht.hats={};return Ht.get=function(er){return Ht.hats[er]},Ht.set=function(er,_r){return Ht.hats[er]=_r,Ht},Ht.bits=ce||128,Ht.base=Re||16,Ht};var ie=n(Ne.exports),le=function(ce,Re){this.ctx=ce,this.properties=Re.properties||{},this.coordinates=Re.geometry.coordinates,this.id=Re.id||ie(),this.type=Re.geometry.type};le.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},le.prototype.incomingCoords=function(ce){this.setCoordinates(ce)},le.prototype.setCoordinates=function(ce){this.coordinates=ce,this.changed()},le.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},le.prototype.setProperty=function(ce,Re){this.properties[ce]=Re},le.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:j.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},le.prototype.internal=function(ce){var Re={id:this.id,meta:V.FEATURE,"meta:type":this.type,active:Y.INACTIVE,mode:ce};if(this.ctx.options.userProperties)for(var At in this.properties)Re["user_"+At]=this.properties[At];return{type:j.FEATURE,properties:Re,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var pe=function(ce,Re){le.call(this,ce,Re)};(pe.prototype=Object.create(le.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},pe.prototype.updateCoordinate=function(ce,Re,At){this.coordinates=arguments.length===3?[Re,At]:[ce,Re],this.changed()},pe.prototype.getCoordinate=function(){return this.getCoordinates()};var fe=function(ce,Re){le.call(this,ce,Re)};(fe.prototype=Object.create(le.prototype)).isValid=function(){return this.coordinates.length>1},fe.prototype.addCoordinate=function(ce,Re,At){this.changed();var Ht=parseInt(ce,10);this.coordinates.splice(Ht,0,[Re,At])},fe.prototype.getCoordinate=function(ce){var Re=parseInt(ce,10);return JSON.parse(JSON.stringify(this.coordinates[Re]))},fe.prototype.removeCoordinate=function(ce){this.changed(),this.coordinates.splice(parseInt(ce,10),1)},fe.prototype.updateCoordinate=function(ce,Re,At){var Ht=parseInt(ce,10);this.coordinates[Ht]=[Re,At],this.changed()};var Qe=function(ce,Re){le.call(this,ce,Re),this.coordinates=this.coordinates.map(function(At){return At.slice(0,-1)})};(Qe.prototype=Object.create(le.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(ce){return ce.length>2})},Qe.prototype.incomingCoords=function(ce){this.coordinates=ce.map(function(Re){return Re.slice(0,-1)}),this.changed()},Qe.prototype.setCoordinates=function(ce){this.coordinates=ce,this.changed()},Qe.prototype.addCoordinate=function(ce,Re,At){this.changed();var Ht=ce.split(".").map(function(Jt){return parseInt(Jt,10)});this.coordinates[Ht[0]].splice(Ht[1],0,[Re,At])},Qe.prototype.removeCoordinate=function(ce){this.changed();var Re=ce.split(".").map(function(Ht){return parseInt(Ht,10)}),At=this.coordinates[Re[0]];At&&(At.splice(Re[1],1),At.length<3&&this.coordinates.splice(Re[0],1))},Qe.prototype.getCoordinate=function(ce){var Re=ce.split(".").map(function(Ht){return parseInt(Ht,10)}),At=this.coordinates[Re[0]];return JSON.parse(JSON.stringify(At[Re[1]]))},Qe.prototype.getCoordinates=function(){return this.coordinates.map(function(ce){return ce.concat([ce[0]])})},Qe.prototype.updateCoordinate=function(ce,Re,At){this.changed();var Ht=ce.split("."),Jt=parseInt(Ht[0],10),er=parseInt(Ht[1],10);this.coordinates[Jt]===void 0&&(this.coordinates[Jt]=[]),this.coordinates[Jt][er]=[Re,At]};var Ke={MultiPoint:pe,MultiLineString:fe,MultiPolygon:Qe},et=function(ce,Re,At,Ht,Jt){var er=At.split("."),_r=parseInt(er[0],10),fn=er[1]?er.slice(1).join("."):null;return ce[_r][Re](fn,Ht,Jt)},tt=function(ce,Re){if(le.call(this,ce,Re),delete this.coordinates,this.model=Ke[Re.geometry.type],this.model===void 0)throw new TypeError(Re.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(Re.geometry.coordinates)};function bt(ce){this.map=ce.map,this.drawConfig=JSON.parse(JSON.stringify(ce.options||{})),this._ctx=ce}(tt.prototype=Object.create(le.prototype))._coordinatesToFeatures=function(ce){var Re=this,At=this.model.bind(this);return ce.map(function(Ht){return new At(Re.ctx,{id:ie(),type:j.FEATURE,properties:{},geometry:{coordinates:Ht,type:Re.type.replace("Multi","")}})})},tt.prototype.isValid=function(){return this.features.every(function(ce){return ce.isValid()})},tt.prototype.setCoordinates=function(ce){this.features=this._coordinatesToFeatures(ce),this.changed()},tt.prototype.getCoordinate=function(ce){return et(this.features,"getCoordinate",ce)},tt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(ce){return ce.type===j.POLYGON?ce.getCoordinates():ce.coordinates})))},tt.prototype.updateCoordinate=function(ce,Re,At){et(this.features,"updateCoordinate",ce,Re,At),this.changed()},tt.prototype.addCoordinate=function(ce,Re,At){et(this.features,"addCoordinate",ce,Re,At),this.changed()},tt.prototype.removeCoordinate=function(ce){et(this.features,"removeCoordinate",ce),this.changed()},tt.prototype.getFeatures=function(){return this.features},bt.prototype.setSelected=function(ce){return this._ctx.store.setSelected(ce)},bt.prototype.setSelectedCoordinates=function(ce){var Re=this;this._ctx.store.setSelectedCoordinates(ce),ce.reduce(function(At,Ht){return At[Ht.feature_id]===void 0&&(At[Ht.feature_id]=!0,Re._ctx.store.get(Ht.feature_id).changed()),At},{})},bt.prototype.getSelected=function(){return this._ctx.store.getSelected()},bt.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},bt.prototype.isSelected=function(ce){return this._ctx.store.isSelected(ce)},bt.prototype.getFeature=function(ce){return this._ctx.store.get(ce)},bt.prototype.select=function(ce){return this._ctx.store.select(ce)},bt.prototype.deselect=function(ce){return this._ctx.store.deselect(ce)},bt.prototype.deleteFeature=function(ce,Re){return Re===void 0&&(Re={}),this._ctx.store.delete(ce,Re)},bt.prototype.addFeature=function(ce){return this._ctx.store.add(ce)},bt.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},bt.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},bt.prototype.setActionableState=function(ce){ce===void 0&&(ce={});var Re={trash:ce.trash||!1,combineFeatures:ce.combineFeatures||!1,uncombineFeatures:ce.uncombineFeatures||!1};return this._ctx.events.actionable(Re)},bt.prototype.changeMode=function(ce,Re,At){return Re===void 0&&(Re={}),At===void 0&&(At={}),this._ctx.events.changeMode(ce,Re,At)},bt.prototype.updateUIClasses=function(ce){return this._ctx.ui.queueMapClasses(ce)},bt.prototype.activateUIButton=function(ce){return this._ctx.ui.setActiveButton(ce)},bt.prototype.featuresAt=function(ce,Re,At){if(At===void 0&&(At="click"),At!=="click"&&At!=="touch")throw new Error("invalid buffer type");return be[At](ce,Re,this._ctx)},bt.prototype.newFeature=function(ce){var Re=ce.geometry.type;return Re===j.POINT?new pe(this._ctx,ce):Re===j.LINE_STRING?new fe(this._ctx,ce):Re===j.POLYGON?new Qe(this._ctx,ce):new tt(this._ctx,ce)},bt.prototype.isInstanceOf=function(ce,Re){if(ce===j.POINT)return Re instanceof pe;if(ce===j.LINE_STRING)return Re instanceof fe;if(ce===j.POLYGON)return Re instanceof Qe;if(ce==="MultiFeature")return Re instanceof tt;throw new Error("Unknown feature class: "+ce)},bt.prototype.doRender=function(ce){return this._ctx.store.featureChanged(ce)},bt.prototype.onSetup=function(){},bt.prototype.onDrag=function(){},bt.prototype.onClick=function(){},bt.prototype.onMouseMove=function(){},bt.prototype.onMouseDown=function(){},bt.prototype.onMouseUp=function(){},bt.prototype.onMouseOut=function(){},bt.prototype.onKeyUp=function(){},bt.prototype.onKeyDown=function(){},bt.prototype.onTouchStart=function(){},bt.prototype.onTouchMove=function(){},bt.prototype.onTouchEnd=function(){},bt.prototype.onTap=function(){},bt.prototype.onStop=function(){},bt.prototype.onTrash=function(){},bt.prototype.onCombineFeature=function(){},bt.prototype.onUncombineFeature=function(){},bt.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var De={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Mt=Object.keys(De);function ir(ce){var Re=Object.keys(ce);return function(At,Ht){Ht===void 0&&(Ht={});var Jt={},er=Re.reduce(function(_r,fn){return _r[fn]=ce[fn],_r},new bt(At));return{start:function(){var _r=this;Jt=er.onSetup(Ht),Mt.forEach(function(fn){var pn,Fn=De[fn],Mn=function(){return!1};ce[Fn]&&(Mn=function(){return!0}),_r.on(fn,Mn,(pn=Fn,function(Kr){return er[pn](Jt,Kr)}))})},stop:function(){er.onStop(Jt)},trash:function(){er.onTrash(Jt)},combineFeatures:function(){er.onCombineFeatures(Jt)},uncombineFeatures:function(){er.onUncombineFeatures(Jt)},render:function(_r,fn){er.toDisplayFeatures(Jt,_r,fn)}}}}function Ar(ce){return[].concat(ce).filter(function(Re){return Re!==void 0})}function Ze(){var ce=this;if(!(ce.ctx.map&&ce.ctx.map.getSource(B.HOT)!==void 0))return pn();var Re=ce.ctx.events.currentModeName();ce.ctx.ui.queueMapClasses({mode:Re});var At=[],Ht=[];ce.isDirty?Ht=ce.getAllIds():(At=ce.getChangedIds().filter(function(Fn){return ce.get(Fn)!==void 0}),Ht=ce.sources.hot.filter(function(Fn){return Fn.properties.id&&At.indexOf(Fn.properties.id)===-1&&ce.get(Fn.properties.id)!==void 0}).map(function(Fn){return Fn.properties.id})),ce.sources.hot=[];var Jt=ce.sources.cold.length;ce.sources.cold=ce.isDirty?[]:ce.sources.cold.filter(function(Fn){var Mn=Fn.properties.id||Fn.properties.parent;return At.indexOf(Mn)===-1});var er=Jt!==ce.sources.cold.length||Ht.length>0;function _r(Fn,Mn){var Kr=ce.get(Fn).internal(Re);ce.ctx.events.currentModeRender(Kr,function(Gn){ce.sources[Mn].push(Gn)})}if(At.forEach(function(Fn){return _r(Fn,"hot")}),Ht.forEach(function(Fn){return _r(Fn,"cold")}),er&&ce.ctx.map.getSource(B.COLD).setData({type:j.FEATURE_COLLECTION,features:ce.sources.cold}),ce.ctx.map.getSource(B.HOT).setData({type:j.FEATURE_COLLECTION,features:ce.sources.hot}),ce._emitSelectionChange&&(ce.ctx.map.fire(F.SELECTION_CHANGE,{features:ce.getSelected().map(function(Fn){return Fn.toGeoJSON()}),points:ce.getSelectedCoordinates().map(function(Fn){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:Fn.coordinates}}})}),ce._emitSelectionChange=!1),ce._deletedFeaturesToEmit.length){var fn=ce._deletedFeaturesToEmit.map(function(Fn){return Fn.toGeoJSON()});ce._deletedFeaturesToEmit=[],ce.ctx.map.fire(F.DELETE,{features:fn})}function pn(){ce.isDirty=!1,ce.clearChangedIds()}pn(),ce.ctx.map.fire(F.RENDER,{})}function Ue(ce){var Re,At=this;this._features={},this._featureIds=new Z,this._selectedFeatureIds=new Z,this._selectedCoordinates=[],this._changedFeatureIds=new Z,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=ce,this.sources={hot:[],cold:[]},this.render=function(){Re||(Re=requestAnimationFrame(function(){Re=null,Ze.call(At)}))},this.isDirty=!1}function hr(ce,Re){var At=ce._selectedCoordinates.filter(function(Ht){return ce._selectedFeatureIds.has(Ht.feature_id)});ce._selectedCoordinates.length===At.length||Re.silent||(ce._emitSelectionChange=!0),ce._selectedCoordinates=At}Ue.prototype.createRenderBatch=function(){var ce=this,Re=this.render,At=0;return this.render=function(){At++},function(){ce.render=Re,At>0&&ce.render()}},Ue.prototype.setDirty=function(){return this.isDirty=!0,this},Ue.prototype.featureChanged=function(ce){return this._changedFeatureIds.add(ce),this},Ue.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ue.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ue.prototype.getAllIds=function(){return this._featureIds.values()},Ue.prototype.add=function(ce){return this.featureChanged(ce.id),this._features[ce.id]=ce,this._featureIds.add(ce.id),this},Ue.prototype.delete=function(ce,Re){var At=this;return Re===void 0&&(Re={}),Ar(ce).forEach(function(Ht){At._featureIds.has(Ht)&&(At._featureIds.delete(Ht),At._selectedFeatureIds.delete(Ht),Re.silent||At._deletedFeaturesToEmit.indexOf(At._features[Ht])===-1&&At._deletedFeaturesToEmit.push(At._features[Ht]),delete At._features[Ht],At.isDirty=!0)}),hr(this,Re),this},Ue.prototype.get=function(ce){return this._features[ce]},Ue.prototype.getAll=function(){var ce=this;return Object.keys(this._features).map(function(Re){return ce._features[Re]})},Ue.prototype.select=function(ce,Re){var At=this;return Re===void 0&&(Re={}),Ar(ce).forEach(function(Ht){At._selectedFeatureIds.has(Ht)||(At._selectedFeatureIds.add(Ht),At._changedFeatureIds.add(Ht),Re.silent||(At._emitSelectionChange=!0))}),this},Ue.prototype.deselect=function(ce,Re){var At=this;return Re===void 0&&(Re={}),Ar(ce).forEach(function(Ht){At._selectedFeatureIds.has(Ht)&&(At._selectedFeatureIds.delete(Ht),At._changedFeatureIds.add(Ht),Re.silent||(At._emitSelectionChange=!0))}),hr(this,Re),this},Ue.prototype.clearSelected=function(ce){return ce===void 0&&(ce={}),this.deselect(this._selectedFeatureIds.values(),{silent:ce.silent}),this},Ue.prototype.setSelected=function(ce,Re){var At=this;return Re===void 0&&(Re={}),ce=Ar(ce),this.deselect(this._selectedFeatureIds.values().filter(function(Ht){return ce.indexOf(Ht)===-1}),{silent:Re.silent}),this.select(ce.filter(function(Ht){return!At._selectedFeatureIds.has(Ht)}),{silent:Re.silent}),this},Ue.prototype.setSelectedCoordinates=function(ce){return this._selectedCoordinates=ce,this._emitSelectionChange=!0,this},Ue.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ue.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ue.prototype.getSelected=function(){var ce=this;return this._selectedFeatureIds.values().map(function(Re){return ce.get(Re)})},Ue.prototype.getSelectedCoordinates=function(){var ce=this;return this._selectedCoordinates.map(function(Re){return{coordinates:ce.get(Re.feature_id).getCoordinate(Re.coord_path)}})},Ue.prototype.isSelected=function(ce){return this._selectedFeatureIds.has(ce)},Ue.prototype.setFeatureProperty=function(ce,Re,At){this.get(ce).setProperty(Re,At),this.featureChanged(ce)},Ue.prototype.storeMapConfig=function(){var ce=this;te.forEach(function(Re){ce.ctx.map[Re]&&(ce._mapInitialConfig[Re]=ce.ctx.map[Re].isEnabled())})},Ue.prototype.restoreMapConfig=function(){var ce=this;Object.keys(this._mapInitialConfig).forEach(function(Re){ce._mapInitialConfig[Re]?ce.ctx.map[Re].enable():ce.ctx.map[Re].disable()})},Ue.prototype.getInitialConfigValue=function(ce){return this._mapInitialConfig[ce]===void 0||this._mapInitialConfig[ce]};var Dt=function(){for(var ce=arguments,Re={},At=0;At<arguments.length;At++){var Ht=ce[At];for(var Jt in Ht)vt.call(Ht,Jt)&&(Re[Jt]=Ht[Jt])}return Re},vt=Object.prototype.hasOwnProperty,Kt=n(Dt),rr=["mode","feature","mouse"];function nr(ce){var Re=null,At=null,Ht={onRemove:function(){return ce.map.off("load",Ht.connect),clearInterval(At),Ht.removeLayers(),ce.store.restoreMapConfig(),ce.ui.removeButtons(),ce.events.removeEventListeners(),ce.ui.clearMapClasses(),ce.boxZoomInitial&&ce.map.boxZoom.enable(),ce.map=null,ce.container=null,ce.store=null,Re&&Re.parentNode&&Re.parentNode.removeChild(Re),Re=null,this},connect:function(){ce.map.off("load",Ht.connect),clearInterval(At),Ht.addLayers(),ce.store.storeMapConfig(),ce.events.addEventListeners()},onAdd:function(Jt){var er=Jt.fire;return Jt.fire=function(_r,fn){var pn=arguments;return er.length===1&&arguments.length!==1&&(pn=[Kt({},{type:_r},fn)]),er.apply(Jt,pn)},ce.map=Jt,ce.events=function(_r){var fn=Object.keys(_r.options.modes).reduce(function(an,ei){return an[ei]=ir(_r.options.modes[ei]),an},{}),pn={},Fn={},Mn={},Kr=null,Gn=null;Mn.drag=function(an,ei){ei({point:an.point,time:new Date().getTime()})?(_r.ui.queueMapClasses({mouse:S.DRAG}),Gn.drag(an)):an.originalEvent.stopPropagation()},Mn.mousedrag=function(an){Mn.drag(an,function(ei){return!_e(pn,ei)})},Mn.touchdrag=function(an){Mn.drag(an,function(ei){return!ze(Fn,ei)})},Mn.mousemove=function(an){if((an.originalEvent.buttons!==void 0?an.originalEvent.buttons:an.originalEvent.which)===1)return Mn.mousedrag(an);var ei=Fe(an,_r);an.featureTarget=ei,Gn.mousemove(an)},Mn.mousedown=function(an){pn={time:new Date().getTime(),point:an.point};var ei=Fe(an,_r);an.featureTarget=ei,Gn.mousedown(an)},Mn.mouseup=function(an){var ei=Fe(an,_r);an.featureTarget=ei,_e(pn,{point:an.point,time:new Date().getTime()})?Gn.click(an):Gn.mouseup(an)},Mn.mouseout=function(an){Gn.mouseout(an)},Mn.touchstart=function(an){if(_r.options.touchEnabled){Fn={time:new Date().getTime(),point:an.point};var ei=be.touch(an,null,_r)[0];an.featureTarget=ei,Gn.touchstart(an)}},Mn.touchmove=function(an){if(_r.options.touchEnabled)return Gn.touchmove(an),Mn.touchdrag(an)},Mn.touchend=function(an){if(an.originalEvent.preventDefault(),_r.options.touchEnabled){var ei=be.touch(an,null,_r)[0];an.featureTarget=ei,ze(Fn,{time:new Date().getTime(),point:an.point})?Gn.tap(an):Gn.touchend(an)}};var si=function(an){return!(an===8||an===46||an>=48&&an<=57)};function ji(an,ei,Ci){Ci===void 0&&(Ci={}),Gn.stop();var Ps=fn[an];if(Ps===void 0)throw new Error(an+" is not valid");Kr=an;var Xs=Ps(_r,ei);Gn=r(Xs,_r),Ci.silent||_r.map.fire(F.MODE_CHANGE,{mode:an}),_r.store.setDirty(),_r.store.render()}Mn.keydown=function(an){(an.srcElement||an.target).classList.contains("mapboxgl-canvas")&&(an.keyCode!==8&&an.keyCode!==46||!_r.options.controls.trash?si(an.keyCode)?Gn.keydown(an):an.keyCode===49&&_r.options.controls.point?ji(D.DRAW_POINT):an.keyCode===50&&_r.options.controls.line_string?ji(D.DRAW_LINE_STRING):an.keyCode===51&&_r.options.controls.polygon&&ji(D.DRAW_POLYGON):(an.preventDefault(),Gn.trash()))},Mn.keyup=function(an){si(an.keyCode)&&Gn.keyup(an)},Mn.zoomend=function(){_r.store.changeZoom()},Mn.data=function(an){if(an.dataType==="style"){var ei=_r.setup,Ci=_r.map,Ps=_r.options,Xs=_r.store;Ps.styles.some(function(Ro){return Ci.getLayer(Ro.id)})||(ei.addLayers(),Xs.setDirty(),Xs.render())}};var Sr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Kr=_r.options.defaultMode,Gn=r(fn[Kr](_r),_r)},changeMode:ji,actionable:function(an){var ei=!1;Object.keys(an).forEach(function(Ci){if(Sr[Ci]===void 0)throw new Error("Invalid action type");Sr[Ci]!==an[Ci]&&(ei=!0),Sr[Ci]=an[Ci]}),ei&&_r.map.fire(F.ACTIONABLE,{actions:Sr})},currentModeName:function(){return Kr},currentModeRender:function(an,ei){return Gn.render(an,ei)},fire:function(an,ei){Mn[an]&&Mn[an](ei)},addEventListeners:function(){_r.map.on("mousemove",Mn.mousemove),_r.map.on("mousedown",Mn.mousedown),_r.map.on("mouseup",Mn.mouseup),_r.map.on("data",Mn.data),_r.map.on("touchmove",Mn.touchmove),_r.map.on("touchstart",Mn.touchstart),_r.map.on("touchend",Mn.touchend),_r.container.addEventListener("mouseout",Mn.mouseout),_r.options.keybindings&&(_r.container.addEventListener("keydown",Mn.keydown),_r.container.addEventListener("keyup",Mn.keyup))},removeEventListeners:function(){_r.map.off("mousemove",Mn.mousemove),_r.map.off("mousedown",Mn.mousedown),_r.map.off("mouseup",Mn.mouseup),_r.map.off("data",Mn.data),_r.map.off("touchmove",Mn.touchmove),_r.map.off("touchstart",Mn.touchstart),_r.map.off("touchend",Mn.touchend),_r.container.removeEventListener("mouseout",Mn.mouseout),_r.options.keybindings&&(_r.container.removeEventListener("keydown",Mn.keydown),_r.container.removeEventListener("keyup",Mn.keyup))},trash:function(an){Gn.trash(an)},combineFeatures:function(){Gn.combineFeatures()},uncombineFeatures:function(){Gn.uncombineFeatures()},getMode:function(){return Kr}}}(ce),ce.ui=function(_r){var fn={},pn=null,Fn={mode:null,feature:null,mouse:null},Mn={mode:null,feature:null,mouse:null};function Kr(an){Mn=Kt(Mn,an)}function Gn(){var an,ei;if(_r.container){var Ci=[],Ps=[];rr.forEach(function(Xs){Mn[Xs]!==Fn[Xs]&&(Ci.push(Xs+"-"+Fn[Xs]),Mn[Xs]!==null&&Ps.push(Xs+"-"+Mn[Xs]))}),Ci.length>0&&(an=_r.container.classList).remove.apply(an,Ci),Ps.length>0&&(ei=_r.container.classList).add.apply(ei,Ps),Fn=Kt(Fn,Mn)}}function si(an,ei){ei===void 0&&(ei={});var Ci=document.createElement("button");return Ci.className=C.CONTROL_BUTTON+" "+ei.className,Ci.setAttribute("title",ei.title),ei.container.appendChild(Ci),Ci.addEventListener("click",function(Ps){if(Ps.preventDefault(),Ps.stopPropagation(),Ps.target===pn)return ji(),void ei.onDeactivate();Sr(an),ei.onActivate()},!0),Ci}function ji(){pn&&(pn.classList.remove(C.ACTIVE_BUTTON),pn=null)}function Sr(an){ji();var ei=fn[an];ei&&ei&&an!=="trash"&&(ei.classList.add(C.ACTIVE_BUTTON),pn=ei)}return{setActiveButton:Sr,queueMapClasses:Kr,updateMapClasses:Gn,clearMapClasses:function(){Kr({mode:null,feature:null,mouse:null}),Gn()},addButtons:function(){var an=_r.options.controls,ei=document.createElement("div");return ei.className=C.CONTROL_GROUP+" "+C.CONTROL_BASE,an&&(an[P.LINE]&&(fn[P.LINE]=si(P.LINE,{container:ei,className:C.CONTROL_BUTTON_LINE,title:"LineString tool "+(_r.options.keybindings?"(l)":""),onActivate:function(){return _r.events.changeMode(D.DRAW_LINE_STRING)},onDeactivate:function(){return _r.events.trash()}})),an[P.POLYGON]&&(fn[P.POLYGON]=si(P.POLYGON,{container:ei,className:C.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(_r.options.keybindings?"(p)":""),onActivate:function(){return _r.events.changeMode(D.DRAW_POLYGON)},onDeactivate:function(){return _r.events.trash()}})),an[P.POINT]&&(fn[P.POINT]=si(P.POINT,{container:ei,className:C.CONTROL_BUTTON_POINT,title:"Marker tool "+(_r.options.keybindings?"(m)":""),onActivate:function(){return _r.events.changeMode(D.DRAW_POINT)},onDeactivate:function(){return _r.events.trash()}})),an.trash&&(fn.trash=si("trash",{container:ei,className:C.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){_r.events.trash()}})),an.combine_features&&(fn.combine_features=si("combineFeatures",{container:ei,className:C.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){_r.events.combineFeatures()}})),an.uncombine_features&&(fn.uncombine_features=si("uncombineFeatures",{container:ei,className:C.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){_r.events.uncombineFeatures()}}))),ei},removeButtons:function(){Object.keys(fn).forEach(function(an){var ei=fn[an];ei.parentNode&&ei.parentNode.removeChild(ei),delete fn[an]})}}}(ce),ce.container=Jt.getContainer(),ce.store=new Ue(ce),Re=ce.ui.addButtons(),ce.options.boxSelect&&(ce.boxZoomInitial=Jt.boxZoom.isEnabled(),Jt.boxZoom.disable(),Jt.dragPan.disable(),Jt.dragPan.enable()),Jt.loaded()?Ht.connect():(Jt.on("load",Ht.connect),At=setInterval(function(){Jt.loaded()&&Ht.connect()},16)),ce.events.start(),Re},addLayers:function(){ce.map.addSource(B.COLD,{data:{type:j.FEATURE_COLLECTION,features:[]},type:"geojson"}),ce.map.addSource(B.HOT,{data:{type:j.FEATURE_COLLECTION,features:[]},type:"geojson"}),ce.options.styles.forEach(function(Jt){ce.map.addLayer(Jt)}),ce.store.setDirty(!0),ce.store.render()},removeLayers:function(){ce.options.styles.forEach(function(Jt){ce.map.getLayer(Jt.id)&&ce.map.removeLayer(Jt.id)}),ce.map.getSource(B.COLD)&&ce.map.removeSource(B.COLD),ce.map.getSource(B.HOT)&&ce.map.removeSource(B.HOT)}};return ce.setup=Ht,Ht}var Nr=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function on(ce){return function(Re){var At=Re.featureTarget;return!!At&&!!At.properties&&At.properties.meta===ce}}function Ir(ce){return!!ce.originalEvent&&!!ce.originalEvent.shiftKey&&ce.originalEvent.button===0}function cn(ce){return!!ce.featureTarget&&!!ce.featureTarget.properties&&ce.featureTarget.properties.active===Y.ACTIVE&&ce.featureTarget.properties.meta===V.FEATURE}function Sn(ce){return!!ce.featureTarget&&!!ce.featureTarget.properties&&ce.featureTarget.properties.active===Y.INACTIVE&&ce.featureTarget.properties.meta===V.FEATURE}function Ln(ce){return ce.featureTarget===void 0}function ln(ce){return!!ce.featureTarget&&!!ce.featureTarget.properties&&ce.featureTarget.properties.meta===V.FEATURE}function ar(ce){var Re=ce.featureTarget;return!!Re&&!!Re.properties&&Re.properties.meta===V.VERTEX}function Yt(ce){return!!ce.originalEvent&&ce.originalEvent.shiftKey===!0}function Gr(ce){return ce.keyCode===27}function Wr(ce){return ce.keyCode===13}var On=Object.freeze({__proto__:null,isOfMetaType:on,isShiftMousedown:Ir,isActiveFeature:cn,isInactiveFeature:Sn,noTarget:Ln,isFeature:ln,isVertex:ar,isShiftDown:Yt,isEscapeKey:Gr,isEnterKey:Wr,isTrue:function(){return!0}}),mn=Hn;function Hn(ce,Re){this.x=ce,this.y=Re}Hn.prototype={clone:function(){return new Hn(this.x,this.y)},add:function(ce){return this.clone()._add(ce)},sub:function(ce){return this.clone()._sub(ce)},multByPoint:function(ce){return this.clone()._multByPoint(ce)},divByPoint:function(ce){return this.clone()._divByPoint(ce)},mult:function(ce){return this.clone()._mult(ce)},div:function(ce){return this.clone()._div(ce)},rotate:function(ce){return this.clone()._rotate(ce)},rotateAround:function(ce,Re){return this.clone()._rotateAround(ce,Re)},matMult:function(ce){return this.clone()._matMult(ce)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(ce){return this.x===ce.x&&this.y===ce.y},dist:function(ce){return Math.sqrt(this.distSqr(ce))},distSqr:function(ce){var Re=ce.x-this.x,At=ce.y-this.y;return Re*Re+At*At},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(ce){return Math.atan2(this.y-ce.y,this.x-ce.x)},angleWith:function(ce){return this.angleWithSep(ce.x,ce.y)},angleWithSep:function(ce,Re){return Math.atan2(this.x*Re-this.y*ce,this.x*ce+this.y*Re)},_matMult:function(ce){var Re=ce[0]*this.x+ce[1]*this.y,At=ce[2]*this.x+ce[3]*this.y;return this.x=Re,this.y=At,this},_add:function(ce){return this.x+=ce.x,this.y+=ce.y,this},_sub:function(ce){return this.x-=ce.x,this.y-=ce.y,this},_mult:function(ce){return this.x*=ce,this.y*=ce,this},_div:function(ce){return this.x/=ce,this.y/=ce,this},_multByPoint:function(ce){return this.x*=ce.x,this.y*=ce.y,this},_divByPoint:function(ce){return this.x/=ce.x,this.y/=ce.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var ce=this.y;return this.y=this.x,this.x=-ce,this},_rotate:function(ce){var Re=Math.cos(ce),At=Math.sin(ce),Ht=Re*this.x-At*this.y,Jt=At*this.x+Re*this.y;return this.x=Ht,this.y=Jt,this},_rotateAround:function(ce,Re){var At=Math.cos(ce),Ht=Math.sin(ce),Jt=Re.x+At*(this.x-Re.x)-Ht*(this.y-Re.y),er=Re.y+Ht*(this.x-Re.x)+At*(this.y-Re.y);return this.x=Jt,this.y=er,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Hn.convert=function(ce){return ce instanceof Hn?ce:Array.isArray(ce)?new Hn(ce[0],ce[1]):ce};var Vi=n(mn);function Bn(ce,Re){var At=Re.getBoundingClientRect();return new Vi(ce.clientX-At.left-(Re.clientLeft||0),ce.clientY-At.top-(Re.clientTop||0))}function jn(ce,Re,At,Ht){return{type:j.FEATURE,properties:{meta:V.VERTEX,parent:ce,coord_path:At,active:Ht?Y.ACTIVE:Y.INACTIVE},geometry:{type:j.POINT,coordinates:Re}}}function Dn(ce,Re,At){var Ht=Re.geometry.coordinates,Jt=At.geometry.coordinates;if(Ht[1]>85||Ht[1]<se||Jt[1]>85||Jt[1]<se)return null;var er={lng:(Ht[0]+Jt[0])/2,lat:(Ht[1]+Jt[1])/2};return{type:j.FEATURE,properties:{meta:V.MIDPOINT,parent:ce,lng:er.lng,lat:er.lat,coord_path:At.properties.coord_path},geometry:{type:j.POINT,coordinates:[er.lng,er.lat]}}}function Gi(ce,Re,At){Re===void 0&&(Re={}),At===void 0&&(At=null);var Ht,Jt=ce.geometry,er=Jt.type,_r=Jt.coordinates,fn=ce.properties&&ce.properties.id,pn=[];function Fn(Kr,Gn){var si="",ji=null;Kr.forEach(function(Sr,an){var ei=Gn!=null?Gn+"."+an:String(an),Ci=jn(fn,Sr,ei,Mn(ei));if(Re.midpoints&&ji){var Ps=Dn(fn,ji,Ci);Ps&&pn.push(Ps)}ji=Ci;var Xs=JSON.stringify(Sr);si!==Xs&&pn.push(Ci),an===0&&(si=Xs)})}function Mn(Kr){return!!Re.selectedPaths&&Re.selectedPaths.indexOf(Kr)!==-1}return er===j.POINT?pn.push(jn(fn,_r,At,Mn(At))):er===j.POLYGON?_r.forEach(function(Kr,Gn){Fn(Kr,At!==null?At+"."+Gn:String(Gn))}):er===j.LINE_STRING?Fn(_r,At):er.indexOf(j.MULTI_PREFIX)===0&&(Ht=er.replace(j.MULTI_PREFIX,""),_r.forEach(function(Kr,Gn){var si={type:j.FEATURE,properties:ce.properties,geometry:{type:Ht,coordinates:Kr}};pn=pn.concat(Gi(si,Re,Gn))})),pn}var Rn={enable:function(ce){setTimeout(function(){ce.map&&ce.map.doubleClickZoom&&ce._ctx&&ce._ctx.store&&ce._ctx.store.getInitialConfigValue&&ce._ctx.store.getInitialConfigValue("doubleClickZoom")&&ce.map.doubleClickZoom.enable()},0)},disable:function(ce){setTimeout(function(){ce.map&&ce.map.doubleClickZoom&&ce.map.doubleClickZoom.disable()},0)}},Zr={exports:{}},Pr=function(ce){if(!ce||!ce.type)return null;var Re=un[ce.type];if(!Re)return null;if(Re==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:ce}]};if(Re==="feature")return{type:"FeatureCollection",features:[ce]};if(Re==="featurecollection")return ce},un={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Ii=n(Pr),ri=Object.freeze({__proto__:null,default:function ce(Re){switch(Re&&Re.type||null){case"FeatureCollection":return Re.features=Re.features.reduce(function(At,Ht){return At.concat(ce(Ht))},[]),Re;case"Feature":return Re.geometry?ce(Re.geometry).map(function(At){var Ht={type:"Feature",properties:JSON.parse(JSON.stringify(Re.properties)),geometry:At};return Re.id!==void 0&&(Ht.id=Re.id),Ht}):[Re];case"MultiPoint":return Re.coordinates.map(function(At){return{type:"Point",coordinates:At}});case"MultiPolygon":return Re.coordinates.map(function(At){return{type:"Polygon",coordinates:At}});case"MultiLineString":return Re.coordinates.map(function(At){return{type:"LineString",coordinates:At}});case"GeometryCollection":return Re.geometries.map(ce).reduce(function(At,Ht){return At.concat(Ht)},[]);case"Point":case"Polygon":case"LineString":return[Re]}}}),ur=Pr,We=s(ri),qe=function(ce){return function Re(At){return Array.isArray(At)&&At.length&&typeof At[0]=="number"?[At]:At.reduce(function(Ht,Jt){return Array.isArray(Jt)&&Array.isArray(Jt[0])?Ht.concat(Re(Jt)):(Ht.push(Jt),Ht)},[])}(ce)};We instanceof Function||(We=We.default);var pt={exports:{}},Lt=pt.exports=function(ce){return new Ct(ce)};function Ct(ce){this.value=ce}function kt(ce,Re,At){var Ht=[],Jt=[],er=!0;return function _r(fn){var pn=At?Wt(fn):fn,Fn={},Mn=!0,Kr={node:pn,node_:fn,path:[].concat(Ht),parent:Jt[Jt.length-1],parents:Jt,key:Ht.slice(-1)[0],isRoot:Ht.length===0,level:Ht.length,circular:null,update:function(ji,Sr){Kr.isRoot||(Kr.parent.node[Kr.key]=ji),Kr.node=ji,Sr&&(Mn=!1)},delete:function(ji){delete Kr.parent.node[Kr.key],ji&&(Mn=!1)},remove:function(ji){xr(Kr.parent.node)?Kr.parent.node.splice(Kr.key,1):delete Kr.parent.node[Kr.key],ji&&(Mn=!1)},keys:null,before:function(ji){Fn.before=ji},after:function(ji){Fn.after=ji},pre:function(ji){Fn.pre=ji},post:function(ji){Fn.post=ji},stop:function(){er=!1},block:function(){Mn=!1}};if(!er)return Kr;function Gn(){if(typeof Kr.node=="object"&&Kr.node!==null){Kr.keys&&Kr.node_===Kr.node||(Kr.keys=Rt(Kr.node)),Kr.isLeaf=Kr.keys.length==0;for(var ji=0;ji<Jt.length;ji++)if(Jt[ji].node_===fn){Kr.circular=Jt[ji];break}}else Kr.isLeaf=!0,Kr.keys=null;Kr.notLeaf=!Kr.isLeaf,Kr.notRoot=!Kr.isRoot}Gn();var si=Re.call(Kr,Kr.node);return si!==void 0&&Kr.update&&Kr.update(si),Fn.before&&Fn.before.call(Kr,Kr.node),Mn&&(typeof Kr.node!="object"||Kr.node===null||Kr.circular||(Jt.push(Kr),Gn(),pr(Kr.keys,function(ji,Sr){Ht.push(ji),Fn.pre&&Fn.pre.call(Kr,Kr.node[ji],ji);var an=_r(Kr.node[ji]);At&&Lr.call(Kr.node,ji)&&(Kr.node[ji]=an.node),an.isLast=Sr==Kr.keys.length-1,an.isFirst=Sr==0,Fn.post&&Fn.post.call(Kr,an),Ht.pop()}),Jt.pop()),Fn.after&&Fn.after.call(Kr,Kr.node)),Kr}(ce).node}function Wt(ce){if(typeof ce=="object"&&ce!==null){var Re;if(xr(ce))Re=[];else if(fr(ce)==="[object Date]")Re=new Date(ce.getTime?ce.getTime():ce);else if(function(Jt){return fr(Jt)==="[object RegExp]"}(ce))Re=new RegExp(ce);else if(function(Jt){return fr(Jt)==="[object Error]"}(ce))Re={message:ce.message};else if(function(Jt){return fr(Jt)==="[object Boolean]"}(ce))Re=new Boolean(ce);else if(function(Jt){return fr(Jt)==="[object Number]"}(ce))Re=new Number(ce);else if(function(Jt){return fr(Jt)==="[object String]"}(ce))Re=new String(ce);else if(Object.create&&Object.getPrototypeOf)Re=Object.create(Object.getPrototypeOf(ce));else if(ce.constructor===Object)Re={};else{var At=ce.constructor&&ce.constructor.prototype||ce.__proto__||{},Ht=function(){};Ht.prototype=At,Re=new Ht}return pr(Rt(ce),function(Jt){Re[Jt]=ce[Jt]}),Re}return ce}Ct.prototype.get=function(ce){for(var Re=this.value,At=0;At<ce.length;At++){var Ht=ce[At];if(!Re||!Lr.call(Re,Ht)){Re=void 0;break}Re=Re[Ht]}return Re},Ct.prototype.has=function(ce){for(var Re=this.value,At=0;At<ce.length;At++){var Ht=ce[At];if(!Re||!Lr.call(Re,Ht))return!1;Re=Re[Ht]}return!0},Ct.prototype.set=function(ce,Re){for(var At=this.value,Ht=0;Ht<ce.length-1;Ht++){var Jt=ce[Ht];Lr.call(At,Jt)||(At[Jt]={}),At=At[Jt]}return At[ce[Ht]]=Re,Re},Ct.prototype.map=function(ce){return kt(this.value,ce,!0)},Ct.prototype.forEach=function(ce){return this.value=kt(this.value,ce,!1),this.value},Ct.prototype.reduce=function(ce,Re){var At=arguments.length===1,Ht=At?this.value:Re;return this.forEach(function(Jt){this.isRoot&&At||(Ht=ce.call(this,Ht,Jt))}),Ht},Ct.prototype.paths=function(){var ce=[];return this.forEach(function(Re){ce.push(this.path)}),ce},Ct.prototype.nodes=function(){var ce=[];return this.forEach(function(Re){ce.push(this.node)}),ce},Ct.prototype.clone=function(){var ce=[],Re=[];return function At(Ht){for(var Jt=0;Jt<ce.length;Jt++)if(ce[Jt]===Ht)return Re[Jt];if(typeof Ht=="object"&&Ht!==null){var er=Wt(Ht);return ce.push(Ht),Re.push(er),pr(Rt(Ht),function(_r){er[_r]=At(Ht[_r])}),ce.pop(),Re.pop(),er}return Ht}(this.value)};var Rt=Object.keys||function(ce){var Re=[];for(var At in ce)Re.push(At);return Re};function fr(ce){return Object.prototype.toString.call(ce)}var xr=Array.isArray||function(ce){return Object.prototype.toString.call(ce)==="[object Array]"},pr=function(ce,Re){if(ce.forEach)return ce.forEach(Re);for(var At=0;At<ce.length;At++)Re(ce[At],At,ce)};pr(Rt(Ct.prototype),function(ce){Lt[ce]=function(Re){var At=[].slice.call(arguments,1),Ht=new Ct(Re);return Ht[ce].apply(Ht,At)}});var Lr=Object.hasOwnProperty||function(ce,Re){return Re in ce},rn=pt.exports,sn=_n;function _n(ce){if(!(this instanceof _n))return new _n(ce);this._bbox=ce||[1/0,1/0,-1/0,-1/0],this._valid=!!ce}_n.prototype.include=function(ce){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],ce[0]),this._bbox[1]=Math.min(this._bbox[1],ce[1]),this._bbox[2]=Math.max(this._bbox[2],ce[0]),this._bbox[3]=Math.max(this._bbox[3],ce[1]),this},_n.prototype.equals=function(ce){var Re;return Re=ce instanceof _n?ce.bbox():ce,this._bbox[0]==Re[0]&&this._bbox[1]==Re[1]&&this._bbox[2]==Re[2]&&this._bbox[3]==Re[3]},_n.prototype.center=function(ce){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},_n.prototype.union=function(ce){var Re;return this._valid=!0,Re=ce instanceof _n?ce.bbox():ce,this._bbox[0]=Math.min(this._bbox[0],Re[0]),this._bbox[1]=Math.min(this._bbox[1],Re[1]),this._bbox[2]=Math.max(this._bbox[2],Re[2]),this._bbox[3]=Math.max(this._bbox[3],Re[3]),this},_n.prototype.bbox=function(){return this._valid?this._bbox:null},_n.prototype.contains=function(ce){if(!ce)return this._fastContains();if(!this._valid)return null;var Re=ce[0],At=ce[1];return this._bbox[0]<=Re&&this._bbox[1]<=At&&this._bbox[2]>=Re&&this._bbox[3]>=At},_n.prototype.intersect=function(ce){return this._valid?(Re=ce instanceof _n?ce.bbox():ce,!(this._bbox[0]>Re[2]||this._bbox[2]<Re[0]||this._bbox[3]<Re[1]||this._bbox[1]>Re[3])):null;var Re},_n.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var ce="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",ce)},_n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Un=function(ce){if(!ce)return[];var Re=We(ur(ce)),At=[];return Re.features.forEach(function(Ht){Ht.geometry&&(At=At.concat(qe(Ht.geometry.coordinates)))}),At},qn=rn,Wn=sn,Pi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},$i=Object.keys(Pi);function Kn(ce){for(var Re=Wn(),At=Un(ce),Ht=0;Ht<At.length;Ht++)Re.include(At[Ht]);return Re}Zr.exports=function(ce){return Kn(ce).bbox()},Zr.exports.polygon=function(ce){return Kn(ce).polygon()},Zr.exports.bboxify=function(ce){return qn(ce).map(function(Re){Re&&$i.some(function(At){return!!Re[At]&&Pi[At].indexOf(Re.type)!==-1})&&(Re.bbox=Kn(Re).bbox(),this.update(Re))})};var Yi=n(Zr.exports),Ss=-90;function no(ce,Re){var At=Ss,Ht=90,Jt=Ss,er=90,_r=270,fn=-270;ce.forEach(function(Fn){var Mn=Yi(Fn),Kr=Mn[1],Gn=Mn[3],si=Mn[0],ji=Mn[2];Kr>At&&(At=Kr),Gn<Ht&&(Ht=Gn),Gn>Jt&&(Jt=Gn),Kr<er&&(er=Kr),si<_r&&(_r=si),ji>fn&&(fn=ji)});var pn=Re;return At+pn.lat>85&&(pn.lat=85-At),Jt+pn.lat>90&&(pn.lat=90-Jt),Ht+pn.lat<-85&&(pn.lat=-85-Ht),er+pn.lat<Ss&&(pn.lat=Ss-er),_r+pn.lng<=-270&&(pn.lng+=360*Math.ceil(Math.abs(pn.lng)/360)),fn+pn.lng>=270&&(pn.lng-=360*Math.ceil(Math.abs(pn.lng)/360)),pn}function Fs(ce,Re){var At=no(ce.map(function(Ht){return Ht.toGeoJSON()}),Re);ce.forEach(function(Ht){var Jt,er=Ht.getCoordinates(),_r=function(pn){var Fn={lng:pn[0]+At.lng,lat:pn[1]+At.lat};return[Fn.lng,Fn.lat]},fn=function(pn){return pn.map(function(Fn){return _r(Fn)})};Ht.type===j.POINT?Jt=_r(er):Ht.type===j.LINE_STRING||Ht.type===j.MULTI_POINT?Jt=er.map(_r):Ht.type===j.POLYGON||Ht.type===j.MULTI_LINE_STRING?Jt=er.map(fn):Ht.type===j.MULTI_POLYGON&&(Jt=er.map(function(pn){return pn.map(function(Fn){return fn(Fn)})})),Ht.incomingCoords(Jt)})}var rs={onSetup:function(ce){var Re=this,At={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:ce.featureIds||[]};return this.setSelected(At.initiallySelectedFeatureIds.filter(function(Ht){return Re.getFeature(Ht)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),At},fireUpdate:function(){this.map.fire(F.UPDATE,{action:R.MOVE,features:this.getSelected().map(function(ce){return ce.toGeoJSON()})})},fireActionable:function(){var ce=this,Re=this.getSelected(),At=Re.filter(function(fn){return ce.isInstanceOf("MultiFeature",fn)}),Ht=!1;if(Re.length>1){Ht=!0;var Jt=Re[0].type.replace("Multi","");Re.forEach(function(fn){fn.type.replace("Multi","")!==Jt&&(Ht=!1)})}var er=At.length>0,_r=Re.length>0;this.setActionableState({combineFeatures:Ht,uncombineFeatures:er,trash:_r})},getUniqueIds:function(ce){return ce.length?ce.map(function(Re){return Re.properties.id}).filter(function(Re){return Re!==void 0}).reduce(function(Re,At){return Re.add(At),Re},new Z).values():[]},stopExtendedInteractions:function(ce){ce.boxSelectElement&&(ce.boxSelectElement.parentNode&&ce.boxSelectElement.parentNode.removeChild(ce.boxSelectElement),ce.boxSelectElement=null),this.map.dragPan.enable(),ce.boxSelecting=!1,ce.canBoxSelect=!1,ce.dragMoving=!1,ce.canDragMove=!1},onStop:function(){Rn.enable(this)},onMouseMove:function(ce,Re){return ln(Re)&&ce.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(ce),!0},onMouseOut:function(ce){return!ce.dragMoving||this.fireUpdate()}};rs.onTap=rs.onClick=function(ce,Re){return Ln(Re)?this.clickAnywhere(ce,Re):on(V.VERTEX)(Re)?this.clickOnVertex(ce,Re):ln(Re)?this.clickOnFeature(ce,Re):void 0},rs.clickAnywhere=function(ce){var Re=this,At=this.getSelectedIds();At.length&&(this.clearSelectedFeatures(),At.forEach(function(Ht){return Re.doRender(Ht)})),Rn.enable(this),this.stopExtendedInteractions(ce)},rs.clickOnVertex=function(ce,Re){this.changeMode(D.DIRECT_SELECT,{featureId:Re.featureTarget.properties.parent,coordPath:Re.featureTarget.properties.coord_path,startPos:Re.lngLat}),this.updateUIClasses({mouse:S.MOVE})},rs.startOnActiveFeature=function(ce,Re){this.stopExtendedInteractions(ce),this.map.dragPan.disable(),this.doRender(Re.featureTarget.properties.id),ce.canDragMove=!0,ce.dragMoveLocation=Re.lngLat},rs.clickOnFeature=function(ce,Re){var At=this;Rn.disable(this),this.stopExtendedInteractions(ce);var Ht=Yt(Re),Jt=this.getSelectedIds(),er=Re.featureTarget.properties.id,_r=this.isSelected(er);if(!Ht&&_r&&this.getFeature(er).type!==j.POINT)return this.changeMode(D.DIRECT_SELECT,{featureId:er});_r&&Ht?(this.deselect(er),this.updateUIClasses({mouse:S.POINTER}),Jt.length===1&&Rn.enable(this)):!_r&&Ht?(this.select(er),this.updateUIClasses({mouse:S.MOVE})):_r||Ht||(Jt.forEach(function(fn){return At.doRender(fn)}),this.setSelected(er),this.updateUIClasses({mouse:S.MOVE})),this.doRender(er)},rs.onMouseDown=function(ce,Re){return cn(Re)?this.startOnActiveFeature(ce,Re):this.drawConfig.boxSelect&&Ir(Re)?this.startBoxSelect(ce,Re):void 0},rs.startBoxSelect=function(ce,Re){this.stopExtendedInteractions(ce),this.map.dragPan.disable(),ce.boxSelectStartLocation=Bn(Re.originalEvent,this.map.getContainer()),ce.canBoxSelect=!0},rs.onTouchStart=function(ce,Re){if(cn(Re))return this.startOnActiveFeature(ce,Re)},rs.onDrag=function(ce,Re){return ce.canDragMove?this.dragMove(ce,Re):this.drawConfig.boxSelect&&ce.canBoxSelect?this.whileBoxSelect(ce,Re):void 0},rs.whileBoxSelect=function(ce,Re){ce.boxSelecting=!0,this.updateUIClasses({mouse:S.ADD}),ce.boxSelectElement||(ce.boxSelectElement=document.createElement("div"),ce.boxSelectElement.classList.add(C.BOX_SELECT),this.map.getContainer().appendChild(ce.boxSelectElement));var At=Bn(Re.originalEvent,this.map.getContainer()),Ht=Math.min(ce.boxSelectStartLocation.x,At.x),Jt=Math.max(ce.boxSelectStartLocation.x,At.x),er=Math.min(ce.boxSelectStartLocation.y,At.y),_r=Math.max(ce.boxSelectStartLocation.y,At.y),fn="translate("+Ht+"px, "+er+"px)";ce.boxSelectElement.style.transform=fn,ce.boxSelectElement.style.WebkitTransform=fn,ce.boxSelectElement.style.width=Jt-Ht+"px",ce.boxSelectElement.style.height=_r-er+"px"},rs.dragMove=function(ce,Re){ce.dragMoving=!0,Re.originalEvent.stopPropagation();var At={lng:Re.lngLat.lng-ce.dragMoveLocation.lng,lat:Re.lngLat.lat-ce.dragMoveLocation.lat};Fs(this.getSelected(),At),ce.dragMoveLocation=Re.lngLat},rs.onTouchEnd=rs.onMouseUp=function(ce,Re){var At=this;if(ce.dragMoving)this.fireUpdate();else if(ce.boxSelecting){var Ht=[ce.boxSelectStartLocation,Bn(Re.originalEvent,this.map.getContainer())],Jt=this.featuresAt(null,Ht,"click"),er=this.getUniqueIds(Jt).filter(function(_r){return!At.isSelected(_r)});er.length&&(this.select(er),er.forEach(function(_r){return At.doRender(_r)}),this.updateUIClasses({mouse:S.MOVE}))}this.stopExtendedInteractions(ce)},rs.toDisplayFeatures=function(ce,Re,At){Re.properties.active=this.isSelected(Re.properties.id)?Y.ACTIVE:Y.INACTIVE,At(Re),this.fireActionable(),Re.properties.active===Y.ACTIVE&&Re.geometry.type!==j.POINT&&Gi(Re).forEach(At)},rs.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},rs.onCombineFeatures=function(){var ce=this.getSelected();if(!(ce.length===0||ce.length<2)){for(var Re=[],At=[],Ht=ce[0].type.replace("Multi",""),Jt=0;Jt<ce.length;Jt++){var er=ce[Jt];if(er.type.replace("Multi","")!==Ht)return;er.type.includes("Multi")?er.getCoordinates().forEach(function(fn){Re.push(fn)}):Re.push(er.getCoordinates()),At.push(er.toGeoJSON())}if(At.length>1){var _r=this.newFeature({type:j.FEATURE,properties:At[0].properties,geometry:{type:"Multi"+Ht,coordinates:Re}});this.addFeature(_r),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_r.id]),this.map.fire(F.COMBINE_FEATURES,{createdFeatures:[_r.toGeoJSON()],deletedFeatures:At})}this.fireActionable()}},rs.onUncombineFeatures=function(){var ce=this,Re=this.getSelected();if(Re.length!==0){for(var At=[],Ht=[],Jt=function(_r){var fn=Re[_r];ce.isInstanceOf("MultiFeature",fn)&&(fn.getFeatures().forEach(function(pn){ce.addFeature(pn),pn.properties=fn.properties,At.push(pn.toGeoJSON()),ce.select([pn.id])}),ce.deleteFeature(fn.id,{silent:!0}),Ht.push(fn.toGeoJSON()))},er=0;er<Re.length;er++)Jt(er);At.length>1&&this.map.fire(F.UNCOMBINE_FEATURES,{createdFeatures:At,deletedFeatures:Ht}),this.fireActionable()}};var Sa=on(V.VERTEX),Ba=on(V.MIDPOINT),tl={fireUpdate:function(){this.map.fire(F.UPDATE,{action:R.CHANGE_COORDINATES,features:this.getSelected().map(function(ce){return ce.toGeoJSON()})})},fireActionable:function(ce){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:ce.selectedCoordPaths.length>0})},startDragging:function(ce,Re){this.map.dragPan.disable(),ce.canDragMove=!0,ce.dragMoveLocation=Re.lngLat},stopDragging:function(ce){this.map.dragPan.enable(),ce.dragMoving=!1,ce.canDragMove=!1,ce.dragMoveLocation=null},onVertex:function(ce,Re){this.startDragging(ce,Re);var At=Re.featureTarget.properties,Ht=ce.selectedCoordPaths.indexOf(At.coord_path);Yt(Re)||Ht!==-1?Yt(Re)&&Ht===-1&&ce.selectedCoordPaths.push(At.coord_path):ce.selectedCoordPaths=[At.coord_path];var Jt=this.pathsToCoordinates(ce.featureId,ce.selectedCoordPaths);this.setSelectedCoordinates(Jt)},onMidpoint:function(ce,Re){this.startDragging(ce,Re);var At=Re.featureTarget.properties;ce.feature.addCoordinate(At.coord_path,At.lng,At.lat),this.fireUpdate(),ce.selectedCoordPaths=[At.coord_path]},pathsToCoordinates:function(ce,Re){return Re.map(function(At){return{feature_id:ce,coord_path:At}})},onFeature:function(ce,Re){ce.selectedCoordPaths.length===0?this.startDragging(ce,Re):this.stopDragging(ce)},dragFeature:function(ce,Re,At){Fs(this.getSelected(),At),ce.dragMoveLocation=Re.lngLat},dragVertex:function(ce,Re,At){for(var Ht=ce.selectedCoordPaths.map(function(fn){return ce.feature.getCoordinate(fn)}),Jt=no(Ht.map(function(fn){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:fn}}}),At),er=0;er<Ht.length;er++){var _r=Ht[er];ce.feature.updateCoordinate(ce.selectedCoordPaths[er],_r[0]+Jt.lng,_r[1]+Jt.lat)}},clickNoTarget:function(){this.changeMode(D.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(D.SIMPLE_SELECT)},clickActiveFeature:function(ce){ce.selectedCoordPaths=[],this.clearSelectedCoordinates(),ce.feature.changed()},onSetup:function(ce){var Re=ce.featureId,At=this.getFeature(Re);if(!At)throw new Error("You must provide a featureId to enter direct_select mode");if(At.type===j.POINT)throw new TypeError("direct_select mode doesn't handle point features");var Ht={featureId:Re,feature:At,dragMoveLocation:ce.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:ce.coordPath?[ce.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(Re,Ht.selectedCoordPaths)),this.setSelected(Re),Rn.disable(this),this.setActionableState({trash:!0}),Ht},onStop:function(){Rn.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(ce,Re,At){ce.featureId===Re.properties.id?(Re.properties.active=Y.ACTIVE,At(Re),Gi(Re,{map:this.map,midpoints:!0,selectedPaths:ce.selectedCoordPaths}).forEach(At)):(Re.properties.active=Y.INACTIVE,At(Re)),this.fireActionable(ce)},onTrash:function(ce){ce.selectedCoordPaths.sort(function(Re,At){return At.localeCompare(Re,"en",{numeric:!0})}).forEach(function(Re){return ce.feature.removeCoordinate(Re)}),this.fireUpdate(),ce.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(ce),ce.feature.isValid()===!1&&(this.deleteFeature([ce.featureId]),this.changeMode(D.SIMPLE_SELECT,{}))},onMouseMove:function(ce,Re){var At=cn(Re),Ht=Sa(Re),Jt=Ba(Re),er=ce.selectedCoordPaths.length===0;return At&&er||Ht&&!er?this.updateUIClasses({mouse:S.MOVE}):this.updateUIClasses({mouse:S.NONE}),(Ht||At||Jt)&&ce.dragMoving&&this.fireUpdate(),this.stopDragging(ce),!0},onMouseOut:function(ce){return ce.dragMoving&&this.fireUpdate(),!0}};tl.onTouchStart=tl.onMouseDown=function(ce,Re){return Sa(Re)?this.onVertex(ce,Re):cn(Re)?this.onFeature(ce,Re):Ba(Re)?this.onMidpoint(ce,Re):void 0},tl.onDrag=function(ce,Re){if(ce.canDragMove===!0){ce.dragMoving=!0,Re.originalEvent.stopPropagation();var At={lng:Re.lngLat.lng-ce.dragMoveLocation.lng,lat:Re.lngLat.lat-ce.dragMoveLocation.lat};ce.selectedCoordPaths.length>0?this.dragVertex(ce,Re,At):this.dragFeature(ce,Re,At),ce.dragMoveLocation=Re.lngLat}},tl.onClick=function(ce,Re){return Ln(Re)?this.clickNoTarget(ce,Re):cn(Re)?this.clickActiveFeature(ce,Re):Sn(Re)?this.clickInactive(ce,Re):void this.stopDragging(ce)},tl.onTap=function(ce,Re){return Ln(Re)?this.clickNoTarget(ce,Re):cn(Re)?this.clickActiveFeature(ce,Re):Sn(Re)?this.clickInactive(ce,Re):void 0},tl.onTouchEnd=tl.onMouseUp=function(ce){ce.dragMoving&&this.fireUpdate(),this.stopDragging(ce)};var go={};function Sl(ce,Re){return!!ce.lngLat&&ce.lngLat.lng===Re[0]&&ce.lngLat.lat===Re[1]}go.onSetup=function(){var ce=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:[]}});return this.addFeature(ce),this.clearSelectedFeatures(),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(P.POINT),this.setActionableState({trash:!0}),{point:ce}},go.stopDrawingAndRemove=function(ce){this.deleteFeature([ce.point.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)},go.onTap=go.onClick=function(ce,Re){this.updateUIClasses({mouse:S.MOVE}),ce.point.updateCoordinate("",Re.lngLat.lng,Re.lngLat.lat),this.map.fire(F.CREATE,{features:[ce.point.toGeoJSON()]}),this.changeMode(D.SIMPLE_SELECT,{featureIds:[ce.point.id]})},go.onStop=function(ce){this.activateUIButton(),ce.point.getCoordinate().length||this.deleteFeature([ce.point.id],{silent:!0})},go.toDisplayFeatures=function(ce,Re,At){var Ht=Re.properties.id===ce.point.id;if(Re.properties.active=Ht?Y.ACTIVE:Y.INACTIVE,!Ht)return At(Re)},go.onTrash=go.stopDrawingAndRemove,go.onKeyUp=function(ce,Re){if(Gr(Re)||Wr(Re))return this.stopDrawingAndRemove(ce,Re)};var sa={onSetup:function(){var ce=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.POLYGON,coordinates:[[]]}});return this.addFeature(ce),this.clearSelectedFeatures(),Rn.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(P.POLYGON),this.setActionableState({trash:!0}),{polygon:ce,currentVertexPosition:0}},clickAnywhere:function(ce,Re){if(ce.currentVertexPosition>0&&Sl(Re,ce.polygon.coordinates[0][ce.currentVertexPosition-1]))return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ce.polygon.id]});this.updateUIClasses({mouse:S.ADD}),ce.polygon.updateCoordinate("0."+ce.currentVertexPosition,Re.lngLat.lng,Re.lngLat.lat),ce.currentVertexPosition++,ce.polygon.updateCoordinate("0."+ce.currentVertexPosition,Re.lngLat.lng,Re.lngLat.lat)},clickOnVertex:function(ce){return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ce.polygon.id]})},onMouseMove:function(ce,Re){ce.polygon.updateCoordinate("0."+ce.currentVertexPosition,Re.lngLat.lng,Re.lngLat.lat),ar(Re)&&this.updateUIClasses({mouse:S.POINTER})}};sa.onTap=sa.onClick=function(ce,Re){return ar(Re)?this.clickOnVertex(ce,Re):this.clickAnywhere(ce,Re)},sa.onKeyUp=function(ce,Re){Gr(Re)?(this.deleteFeature([ce.polygon.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)):Wr(Re)&&this.changeMode(D.SIMPLE_SELECT,{featureIds:[ce.polygon.id]})},sa.onStop=function(ce){this.updateUIClasses({mouse:S.NONE}),Rn.enable(this),this.activateUIButton(),this.getFeature(ce.polygon.id)!==void 0&&(ce.polygon.removeCoordinate("0."+ce.currentVertexPosition),ce.polygon.isValid()?this.map.fire(F.CREATE,{features:[ce.polygon.toGeoJSON()]}):(this.deleteFeature([ce.polygon.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT,{},{silent:!0})))},sa.toDisplayFeatures=function(ce,Re,At){var Ht=Re.properties.id===ce.polygon.id;if(Re.properties.active=Ht?Y.ACTIVE:Y.INACTIVE,!Ht)return At(Re);if(Re.geometry.coordinates.length!==0){var Jt=Re.geometry.coordinates[0].length;if(!(Jt<3)){if(Re.properties.meta=V.FEATURE,At(jn(ce.polygon.id,Re.geometry.coordinates[0][0],"0.0",!1)),Jt>3){var er=Re.geometry.coordinates[0].length-3;At(jn(ce.polygon.id,Re.geometry.coordinates[0][er],"0."+er,!1))}if(Jt<=4){var _r=[[Re.geometry.coordinates[0][0][0],Re.geometry.coordinates[0][0][1]],[Re.geometry.coordinates[0][1][0],Re.geometry.coordinates[0][1][1]]];if(At({type:j.FEATURE,properties:Re.properties,geometry:{coordinates:_r,type:j.LINE_STRING}}),Jt===3)return}return At(Re)}}},sa.onTrash=function(ce){this.deleteFeature([ce.polygon.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)};var Ha={onSetup:function(ce){var Re,At,Ht=(ce=ce||{}).featureId,Jt="forward";if(Ht){if(!(Re=this.getFeature(Ht)))throw new Error("Could not find a feature with the provided featureId");var er=ce.from;if(er&&er.type==="Feature"&&er.geometry&&er.geometry.type==="Point"&&(er=er.geometry),er&&er.type==="Point"&&er.coordinates&&er.coordinates.length===2&&(er=er.coordinates),!er||!Array.isArray(er))throw new Error("Please use the `from` property to indicate which point to continue the line from");var _r=Re.coordinates.length-1;if(Re.coordinates[_r][0]===er[0]&&Re.coordinates[_r][1]===er[1])At=_r+1,Re.addCoordinate.apply(Re,[At].concat(Re.coordinates[_r]));else{if(Re.coordinates[0][0]!==er[0]||Re.coordinates[0][1]!==er[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Jt="backwards",At=0,Re.addCoordinate.apply(Re,[At].concat(Re.coordinates[0]))}}else Re=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.LINE_STRING,coordinates:[]}}),At=0,this.addFeature(Re);return this.clearSelectedFeatures(),Rn.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(P.LINE),this.setActionableState({trash:!0}),{line:Re,currentVertexPosition:At,direction:Jt}},clickAnywhere:function(ce,Re){if(ce.currentVertexPosition>0&&Sl(Re,ce.line.coordinates[ce.currentVertexPosition-1])||ce.direction==="backwards"&&Sl(Re,ce.line.coordinates[ce.currentVertexPosition+1]))return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ce.line.id]});this.updateUIClasses({mouse:S.ADD}),ce.line.updateCoordinate(ce.currentVertexPosition,Re.lngLat.lng,Re.lngLat.lat),ce.direction==="forward"?(ce.currentVertexPosition++,ce.line.updateCoordinate(ce.currentVertexPosition,Re.lngLat.lng,Re.lngLat.lat)):ce.line.addCoordinate(0,Re.lngLat.lng,Re.lngLat.lat)},clickOnVertex:function(ce){return this.changeMode(D.SIMPLE_SELECT,{featureIds:[ce.line.id]})},onMouseMove:function(ce,Re){ce.line.updateCoordinate(ce.currentVertexPosition,Re.lngLat.lng,Re.lngLat.lat),ar(Re)&&this.updateUIClasses({mouse:S.POINTER})}};Ha.onTap=Ha.onClick=function(ce,Re){if(ar(Re))return this.clickOnVertex(ce,Re);this.clickAnywhere(ce,Re)},Ha.onKeyUp=function(ce,Re){Wr(Re)?this.changeMode(D.SIMPLE_SELECT,{featureIds:[ce.line.id]}):Gr(Re)&&(this.deleteFeature([ce.line.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT))},Ha.onStop=function(ce){Rn.enable(this),this.activateUIButton(),this.getFeature(ce.line.id)!==void 0&&(ce.line.removeCoordinate(""+ce.currentVertexPosition),ce.line.isValid()?this.map.fire(F.CREATE,{features:[ce.line.toGeoJSON()]}):(this.deleteFeature([ce.line.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT,{},{silent:!0})))},Ha.onTrash=function(ce){this.deleteFeature([ce.line.id],{silent:!0}),this.changeMode(D.SIMPLE_SELECT)},Ha.toDisplayFeatures=function(ce,Re,At){var Ht=Re.properties.id===ce.line.id;if(Re.properties.active=Ht?Y.ACTIVE:Y.INACTIVE,!Ht)return At(Re);Re.geometry.coordinates.length<2||(Re.properties.meta=V.FEATURE,At(jn(ce.line.id,Re.geometry.coordinates[ce.direction==="forward"?Re.geometry.coordinates.length-2:1],""+(ce.direction==="forward"?Re.geometry.coordinates.length-2:1),!1)),At(Re))};var qi={simple_select:rs,direct_select:tl,draw_point:go,draw_polygon:sa,draw_line_string:Ha},Nc={defaultMode:D.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Nr,modes:qi,controls:{},userProperties:!1},nc={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Ul={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Xo(ce,Re){return ce.map(function(At){return At.source?At:Kt(At,{id:At.id+"."+Re,source:Re==="hot"?B.HOT:B.COLD})})}var Pa={exports:{}};(function(ce,Re){var At="__lodash_hash_undefined__",Ht=9007199254740991,Jt="[object Arguments]",er="[object Array]",_r="[object Boolean]",fn="[object Date]",pn="[object Error]",Fn="[object Function]",Mn="[object Map]",Kr="[object Number]",Gn="[object Object]",si="[object Promise]",ji="[object RegExp]",Sr="[object Set]",an="[object String]",ei="[object Symbol]",Ci="[object WeakMap]",Ps="[object ArrayBuffer]",Xs="[object DataView]",Ro=/^\[object .+?Constructor\]$/,yn=/^(?:0|[1-9]\d*)$/,Zn={};Zn["[object Float32Array]"]=Zn["[object Float64Array]"]=Zn["[object Int8Array]"]=Zn["[object Int16Array]"]=Zn["[object Int32Array]"]=Zn["[object Uint8Array]"]=Zn["[object Uint8ClampedArray]"]=Zn["[object Uint16Array]"]=Zn["[object Uint32Array]"]=!0,Zn[Jt]=Zn[er]=Zn[Ps]=Zn[_r]=Zn[Xs]=Zn[fn]=Zn[pn]=Zn[Fn]=Zn[Mn]=Zn[Kr]=Zn[Gn]=Zn[ji]=Zn[Sr]=Zn[an]=Zn[Ci]=!1;var Ni=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,ha=typeof self=="object"&&self&&self.Object===Object&&self,Ms=Ni||ha||Function("return this")(),hi=Re&&!Re.nodeType&&Re,jo=hi&&ce&&!ce.nodeType&&ce,zl=jo&&jo.exports===hi,oa=zl&&Ni.process,yo=function(){try{return oa&&oa.binding&&oa.binding("util")}catch{}}(),As=yo&&yo.isTypedArray;function Wc(yr,Mr){for(var xn=-1,kn=yr==null?0:yr.length;++xn<kn;)if(Mr(yr[xn],xn,yr))return!0;return!1}function Ql(yr){var Mr=-1,xn=Array(yr.size);return yr.forEach(function(kn,ns){xn[++Mr]=[ns,kn]}),xn}function Hl(yr){var Mr=-1,xn=Array(yr.size);return yr.forEach(function(kn){xn[++Mr]=kn}),xn}var ja,$o,Ys,Bo=Array.prototype,Zs=Function.prototype,vo=Object.prototype,fa=Ms["__core-js_shared__"],_s=Zs.toString,io=vo.hasOwnProperty,qo=(ja=/[^.]+$/.exec(fa&&fa.keys&&fa.keys.IE_PROTO||""))?"Symbol(src)_1."+ja:"",Eo=vo.toString,ic=RegExp("^"+_s.call(io).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=zl?Ms.Buffer:void 0,rl=Ms.Symbol,Uo=Ms.Uint8Array,Va=vo.propertyIsEnumerable,Vl=Bo.splice,Wo=rl?rl.toStringTag:void 0,xu=Object.getOwnPropertySymbols,pa=aa?aa.isBuffer:void 0,xo=($o=Object.keys,Ys=Object,function(yr){return $o(Ys(yr))}),Gl=Zo(Ms,"DataView"),_o=Zo(Ms,"Map"),$l=Zo(Ms,"Promise"),k=Zo(Ms,"Set"),me=Zo(Ms,"WeakMap"),Xe=Zo(Object,"create"),ot=la(Gl),St=la(_o),qt=la($l),gr=la(k),$r=la(me),An=rl?rl.prototype:void 0,En=An?An.valueOf:void 0;function qr(yr){var Mr=-1,xn=yr==null?0:yr.length;for(this.clear();++Mr<xn;){var kn=yr[Mr];this.set(kn[0],kn[1])}}function Dr(yr){var Mr=-1,xn=yr==null?0:yr.length;for(this.clear();++Mr<xn;){var kn=yr[Mr];this.set(kn[0],kn[1])}}function bi(yr){var Mr=-1,xn=yr==null?0:yr.length;for(this.clear();++Mr<xn;){var kn=yr[Mr];this.set(kn[0],kn[1])}}function gn(yr){var Mr=-1,xn=yr==null?0:yr.length;for(this.__data__=new bi;++Mr<xn;)this.add(yr[Mr])}function Fi(yr){var Mr=this.__data__=new Dr(yr);this.size=Mr.size}function bs(yr,Mr){var xn=ws(yr),kn=!xn&&sc(yr),ns=!xn&&!kn&&oc(yr),xi=!xn&&!kn&&!ns&&Aa(yr),ms=xn||kn||ns||xi,ds=ms?function(Ds,Bs){for(var zs=-1,eo=Array(Ds);++zs<Ds;)eo[zs]=Bs(zs);return eo}(yr.length,String):[],bo=ds.length;for(var Zi in yr)!io.call(yr,Zi)||ms&&(Zi=="length"||ns&&(Zi=="offset"||Zi=="parent")||xi&&(Zi=="buffer"||Zi=="byteLength"||Zi=="byteOffset")||us(Zi,bo))||ds.push(Zi);return ds}function vn(yr,Mr){for(var xn=yr.length;xn--;)if(Yr(yr[xn][0],Mr))return xn;return-1}function lo(yr){return yr==null?yr===void 0?"[object Undefined]":"[object Null]":Wo&&Wo in Object(yr)?function(Mr){var xn=io.call(Mr,Wo),kn=Mr[Wo];try{Mr[Wo]=void 0;var ns=!0}catch{}var xi=Eo.call(Mr);return ns&&(xn?Mr[Wo]=kn:delete Mr[Wo]),xi}(yr):function(Mr){return Eo.call(Mr)}(yr)}function Js(yr){return Jo(yr)&&lo(yr)==Jt}function Yo(yr,Mr,xn,kn,ns){return yr===Mr||(yr==null||Mr==null||!Jo(yr)&&!Jo(Mr)?yr!=yr&&Mr!=Mr:function(xi,ms,ds,bo,Zi,Ds){var Bs=ws(xi),zs=ws(ms),eo=Bs?er:Ki(xi),ea=zs?er:Ki(ms),ma=(eo=eo==Jt?Gn:eo)==Gn,ta=(ea=ea==Jt?Gn:ea)==Gn,ra=eo==ea;if(ra&&oc(xi)){if(!oc(ms))return!1;Bs=!0,ma=!1}if(ra&&!ma)return Ds||(Ds=new Fi),Bs||Aa(xi)?so(xi,ms,ds,bo,Zi,Ds):function(Tn,mi,co,to,Cs,Ji,oi){switch(co){case Xs:if(Tn.byteLength!=mi.byteLength||Tn.byteOffset!=mi.byteOffset)return!1;Tn=Tn.buffer,mi=mi.buffer;case Ps:return!(Tn.byteLength!=mi.byteLength||!Ji(new Uo(Tn),new Uo(mi)));case _r:case fn:case Kr:return Yr(+Tn,+mi);case pn:return Tn.name==mi.name&&Tn.message==mi.message;case ji:case an:return Tn==mi+"";case Mn:var qs=Ql;case Sr:var sl=1&to;if(qs||(qs=Hl),Tn.size!=mi.size&&!sl)return!1;var ac=oi.get(Tn);if(ac)return ac==mi;to|=2,oi.set(Tn,mi);var ol=so(qs(Tn),qs(mi),to,Cs,Ji,oi);return oi.delete(Tn),ol;case ei:if(En)return En.call(Tn)==En.call(mi)}return!1}(xi,ms,eo,ds,bo,Zi,Ds);if(!(1&ds)){var $s=ma&&io.call(xi,"__wrapped__"),ga=ta&&io.call(ms,"__wrapped__");if($s||ga){var hs=$s?xi.value():xi,os=ga?ms.value():ms;return Ds||(Ds=new Fi),Zi(hs,os,ds,bo,Ds)}}return ra?(Ds||(Ds=new Fi),function(Tn,mi,co,to,Cs,Ji){var oi=1&co,qs=Ga(Tn),sl=qs.length,ac=Ga(mi).length;if(sl!=ac&&!oi)return!1;for(var ol=sl;ol--;){var $a=qs[ol];if(!(oi?$a in mi:io.call(mi,$a)))return!1}var jc=Ji.get(Tn);if(jc&&Ji.get(mi))return jc==mi;var lc=!0;Ji.set(Tn,mi),Ji.set(mi,Tn);for(var oo=oi;++ol<sl;){var Qs=Tn[$a=qs[ol]],cc=mi[$a];if(to)var Mc=oi?to(cc,Qs,$a,mi,Tn,Ji):to(Qs,cc,$a,Tn,mi,Ji);if(!(Mc===void 0?Qs===cc||Cs(Qs,cc,co,to,Ji):Mc)){lc=!1;break}oo||(oo=$a=="constructor")}if(lc&&!oo){var _u=Tn.constructor,Sc=mi.constructor;_u==Sc||!("constructor"in Tn)||!("constructor"in mi)||typeof _u=="function"&&_u instanceof _u&&typeof Sc=="function"&&Sc instanceof Sc||(lc=!1)}return Ji.delete(Tn),Ji.delete(mi),lc}(xi,ms,ds,bo,Zi,Ds)):!1}(yr,Mr,xn,kn,Yo,ns))}function nl(yr){return!(!ks(yr)||function(Mr){return!!qo&&qo in Mr}(yr))&&(yl(yr)?ic:Ro).test(la(yr))}function il(yr){if(xn=(Mr=yr)&&Mr.constructor,kn=typeof xn=="function"&&xn.prototype||vo,Mr!==kn)return xo(yr);var Mr,xn,kn,ns=[];for(var xi in Object(yr))io.call(yr,xi)&&xi!="constructor"&&ns.push(xi);return ns}function so(yr,Mr,xn,kn,ns,xi){var ms=1&xn,ds=yr.length,bo=Mr.length;if(ds!=bo&&!(ms&&bo>ds))return!1;var Zi=xi.get(yr);if(Zi&&xi.get(Mr))return Zi==Mr;var Ds=-1,Bs=!0,zs=2&xn?new gn:void 0;for(xi.set(yr,Mr),xi.set(Mr,yr);++Ds<ds;){var eo=yr[Ds],ea=Mr[Ds];if(kn)var ma=ms?kn(ea,eo,Ds,Mr,yr,xi):kn(eo,ea,Ds,yr,Mr,xi);if(ma!==void 0){if(ma)continue;Bs=!1;break}if(zs){if(!Wc(Mr,function(ta,ra){if($s=ra,!zs.has($s)&&(eo===ta||ns(eo,ta,xn,kn,xi)))return zs.push(ra);var $s})){Bs=!1;break}}else if(eo!==ea&&!ns(eo,ea,xn,kn,xi)){Bs=!1;break}}return xi.delete(yr),xi.delete(Mr),Bs}function Ga(yr){return function(Mr,xn,kn){var ns=xn(Mr);return ws(Mr)?ns:function(xi,ms){for(var ds=-1,bo=ms.length,Zi=xi.length;++ds<bo;)xi[Zi+ds]=ms[ds];return xi}(ns,kn(Mr))}(yr,Pc,Ma)}function Ea(yr,Mr){var xn,kn,ns=yr.__data__;return((kn=typeof(xn=Mr))=="string"||kn=="number"||kn=="symbol"||kn=="boolean"?xn!=="__proto__":xn===null)?ns[typeof Mr=="string"?"string":"hash"]:ns.map}function Zo(yr,Mr){var xn=function(kn,ns){return kn==null?void 0:kn[ns]}(yr,Mr);return nl(xn)?xn:void 0}qr.prototype.clear=function(){this.__data__=Xe?Xe(null):{},this.size=0},qr.prototype.delete=function(yr){var Mr=this.has(yr)&&delete this.__data__[yr];return this.size-=Mr?1:0,Mr},qr.prototype.get=function(yr){var Mr=this.__data__;if(Xe){var xn=Mr[yr];return xn===At?void 0:xn}return io.call(Mr,yr)?Mr[yr]:void 0},qr.prototype.has=function(yr){var Mr=this.__data__;return Xe?Mr[yr]!==void 0:io.call(Mr,yr)},qr.prototype.set=function(yr,Mr){var xn=this.__data__;return this.size+=this.has(yr)?0:1,xn[yr]=Xe&&Mr===void 0?At:Mr,this},Dr.prototype.clear=function(){this.__data__=[],this.size=0},Dr.prototype.delete=function(yr){var Mr=this.__data__,xn=vn(Mr,yr);return!(xn<0)&&(xn==Mr.length-1?Mr.pop():Vl.call(Mr,xn,1),--this.size,!0)},Dr.prototype.get=function(yr){var Mr=this.__data__,xn=vn(Mr,yr);return xn<0?void 0:Mr[xn][1]},Dr.prototype.has=function(yr){return vn(this.__data__,yr)>-1},Dr.prototype.set=function(yr,Mr){var xn=this.__data__,kn=vn(xn,yr);return kn<0?(++this.size,xn.push([yr,Mr])):xn[kn][1]=Mr,this},bi.prototype.clear=function(){this.size=0,this.__data__={hash:new qr,map:new(_o||Dr),string:new qr}},bi.prototype.delete=function(yr){var Mr=Ea(this,yr).delete(yr);return this.size-=Mr?1:0,Mr},bi.prototype.get=function(yr){return Ea(this,yr).get(yr)},bi.prototype.has=function(yr){return Ea(this,yr).has(yr)},bi.prototype.set=function(yr,Mr){var xn=Ea(this,yr),kn=xn.size;return xn.set(yr,Mr),this.size+=xn.size==kn?0:1,this},gn.prototype.add=gn.prototype.push=function(yr){return this.__data__.set(yr,At),this},gn.prototype.has=function(yr){return this.__data__.has(yr)},Fi.prototype.clear=function(){this.__data__=new Dr,this.size=0},Fi.prototype.delete=function(yr){var Mr=this.__data__,xn=Mr.delete(yr);return this.size=Mr.size,xn},Fi.prototype.get=function(yr){return this.__data__.get(yr)},Fi.prototype.has=function(yr){return this.__data__.has(yr)},Fi.prototype.set=function(yr,Mr){var xn=this.__data__;if(xn instanceof Dr){var kn=xn.__data__;if(!_o||kn.length<199)return kn.push([yr,Mr]),this.size=++xn.size,this;xn=this.__data__=new bi(kn)}return xn.set(yr,Mr),this.size=xn.size,this};var Ma=xu?function(yr){return yr==null?[]:(yr=Object(yr),function(Mr,xn){for(var kn=-1,ns=Mr==null?0:Mr.length,xi=0,ms=[];++kn<ns;){var ds=Mr[kn];xn(ds,kn,Mr)&&(ms[xi++]=ds)}return ms}(xu(yr),function(Mr){return Va.call(yr,Mr)}))}:function(){return[]},Ki=lo;function us(yr,Mr){return!!(Mr=Mr??Ht)&&(typeof yr=="number"||yn.test(yr))&&yr>-1&&yr%1==0&&yr<Mr}function la(yr){if(yr!=null){try{return _s.call(yr)}catch{}try{return yr+""}catch{}}return""}function Yr(yr,Mr){return yr===Mr||yr!=yr&&Mr!=Mr}(Gl&&Ki(new Gl(new ArrayBuffer(1)))!=Xs||_o&&Ki(new _o)!=Mn||$l&&Ki($l.resolve())!=si||k&&Ki(new k)!=Sr||me&&Ki(new me)!=Ci)&&(Ki=function(yr){var Mr=lo(yr),xn=Mr==Gn?yr.constructor:void 0,kn=xn?la(xn):"";if(kn)switch(kn){case ot:return Xs;case St:return Mn;case qt:return si;case gr:return Sr;case $r:return Ci}return Mr});var sc=Js(function(){return arguments}())?Js:function(yr){return Jo(yr)&&io.call(yr,"callee")&&!Va.call(yr,"callee")},ws=Array.isArray,oc=pa||function(){return!1};function yl(yr){if(!ks(yr))return!1;var Mr=lo(yr);return Mr==Fn||Mr=="[object GeneratorFunction]"||Mr=="[object AsyncFunction]"||Mr=="[object Proxy]"}function ql(yr){return typeof yr=="number"&&yr>-1&&yr%1==0&&yr<=Ht}function ks(yr){var Mr=typeof yr;return yr!=null&&(Mr=="object"||Mr=="function")}function Jo(yr){return yr!=null&&typeof yr=="object"}var Aa=As?function(yr){return function(Mr){return yr(Mr)}}(As):function(yr){return Jo(yr)&&ql(yr.length)&&!!Zn[lo(yr)]};function Pc(yr){return(Mr=yr)!=null&&ql(Mr.length)&&!yl(Mr)?bs(yr):il(yr);var Mr}ce.exports=function(yr,Mr){return Yo(yr,Mr)}})(Pa,Pa.exports);var Ai=n(Pa.exports);function So(ce,Re){return ce.length===Re.length&&JSON.stringify(ce.map(function(At){return At}).sort())===JSON.stringify(Re.map(function(At){return At}).sort())}var xs={Polygon:Qe,LineString:fe,Point:pe,MultiPolygon:tt,MultiLineString:tt,MultiPoint:tt},Bl=Object.freeze({__proto__:null,CommonSelectors:On,constrainFeatureMovement:no,createMidPoint:Dn,createSupplementaryPoints:Gi,createVertex:jn,doubleClickZoom:Rn,euclideanDistance:ve,featuresAt:be,getFeatureAtAndSetCursors:Fe,isClick:_e,isEventAtCoordinates:Sl,isTap:ze,mapEventToBoundingBox:J,ModeHandler:r,moveFeatures:Fs,sortFeatures:we,stringSetsAreEqual:So,StringSet:Z,theme:Nr,toDenseArray:Ar}),Fc=function(ce,Re){var At={options:ce=function(Jt){Jt===void 0&&(Jt={});var er=Kt(Jt);return Jt.controls||(er.controls={}),Jt.displayControlsDefault===!1?er.controls=Kt(Ul,Jt.controls):er.controls=Kt(nc,Jt.controls),(er=Kt(Nc,er)).styles=Xo(er.styles,"cold").concat(Xo(er.styles,"hot")),er}(ce)};Re=function(Jt,er){return er.modes=D,er.getFeatureIdsAt=function(_r){return be.click({point:_r},null,Jt).map(function(fn){return fn.properties.id})},er.getSelectedIds=function(){return Jt.store.getSelectedIds()},er.getSelected=function(){return{type:j.FEATURE_COLLECTION,features:Jt.store.getSelectedIds().map(function(_r){return Jt.store.get(_r)}).map(function(_r){return _r.toGeoJSON()})}},er.getSelectedPoints=function(){return{type:j.FEATURE_COLLECTION,features:Jt.store.getSelectedCoordinates().map(function(_r){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:_r.coordinates}}})}},er.set=function(_r){if(_r.type===void 0||_r.type!==j.FEATURE_COLLECTION||!Array.isArray(_r.features))throw new Error("Invalid FeatureCollection");var fn=Jt.store.createRenderBatch(),pn=Jt.store.getAllIds().slice(),Fn=er.add(_r),Mn=new Z(Fn);return(pn=pn.filter(function(Kr){return!Mn.has(Kr)})).length&&er.delete(pn),fn(),Fn},er.add=function(_r){var fn=JSON.parse(JSON.stringify(Ii(_r))).features.map(function(pn){if(pn.id=pn.id||ie(),pn.geometry===null)throw new Error("Invalid geometry: null");if(Jt.store.get(pn.id)===void 0||Jt.store.get(pn.id).type!==pn.geometry.type){var Fn=xs[pn.geometry.type];if(Fn===void 0)throw new Error("Invalid geometry type: "+pn.geometry.type+".");var Mn=new Fn(Jt,pn);Jt.store.add(Mn)}else{var Kr=Jt.store.get(pn.id);Kr.properties=pn.properties,Ai(Kr.properties,pn.properties)||Jt.store.featureChanged(Kr.id),Ai(Kr.getCoordinates(),pn.geometry.coordinates)||Kr.incomingCoords(pn.geometry.coordinates)}return pn.id});return Jt.store.render(),fn},er.get=function(_r){var fn=Jt.store.get(_r);if(fn)return fn.toGeoJSON()},er.getAll=function(){return{type:j.FEATURE_COLLECTION,features:Jt.store.getAll().map(function(_r){return _r.toGeoJSON()})}},er.delete=function(_r){return Jt.store.delete(_r,{silent:!0}),er.getMode()!==D.DIRECT_SELECT||Jt.store.getSelectedIds().length?Jt.store.render():Jt.events.changeMode(D.SIMPLE_SELECT,void 0,{silent:!0}),er},er.deleteAll=function(){return Jt.store.delete(Jt.store.getAllIds(),{silent:!0}),er.getMode()===D.DIRECT_SELECT?Jt.events.changeMode(D.SIMPLE_SELECT,void 0,{silent:!0}):Jt.store.render(),er},er.changeMode=function(_r,fn){return fn===void 0&&(fn={}),_r===D.SIMPLE_SELECT&&er.getMode()===D.SIMPLE_SELECT?(So(fn.featureIds||[],Jt.store.getSelectedIds())||(Jt.store.setSelected(fn.featureIds,{silent:!0}),Jt.store.render()),er):(_r===D.DIRECT_SELECT&&er.getMode()===D.DIRECT_SELECT&&fn.featureId===Jt.store.getSelectedIds()[0]||Jt.events.changeMode(_r,fn,{silent:!0}),er)},er.getMode=function(){return Jt.events.getMode()},er.trash=function(){return Jt.events.trash({silent:!0}),er},er.combineFeatures=function(){return Jt.events.combineFeatures({silent:!0}),er},er.uncombineFeatures=function(){return Jt.events.uncombineFeatures({silent:!0}),er},er.setFeatureProperty=function(_r,fn,pn){return Jt.store.setFeatureProperty(_r,fn,pn),er},er}(At,Re),At.api=Re;var Ht=nr(At);return Re.onAdd=Ht.onAdd,Re.onRemove=Ht.onRemove,Re.types=P,Re.options=ce,Re};function Cc(ce){Fc(ce,this)}return Cc.modes=qi,Cc.constants=oe,Cc.lib=Bl,Cc})})(jG);var fhe=jG.exports;const MG=Bp(fhe);var z8=63710088e-1;function kG(t,e,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function phe(t,e,r={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Q8(t[0])||!Q8(t[1]))throw new Error("coordinates must contain numbers");return kG({type:"Point",coordinates:t},e,r)}function Ahe(t,e,r={}){for(const s of t){if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(s[s.length-1].length!==s[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return kG({type:"Polygon",coordinates:t},e,r)}function Q8(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function DG(t,e,r){if(t!==null)for(var n,s,o,c,u,i,m,g=0,C=0,B,S=t.type,P=S==="FeatureCollection",j=S==="Feature",D=P?t.features.length:1,F=0;F<D;F++){m=P?t.features[F].geometry:j?t.geometry:t,B=m?m.type==="GeometryCollection":!1,u=B?m.geometries.length:1;for(var R=0;R<u;R++){var V=0,Y=0;if(c=B?m.geometries[R]:m,c!==null){i=c.coordinates;var te=c.type;switch(g=te==="Polygon"||te==="MultiPolygon"?1:0,te){case null:break;case"Point":if(e(i,C,F,V,Y)===!1)return!1;C++,V++;break;case"LineString":case"MultiPoint":for(n=0;n<i.length;n++){if(e(i[n],C,F,V,Y)===!1)return!1;C++,te==="MultiPoint"&&V++}te==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(n=0;n<i.length;n++){for(s=0;s<i[n].length-g;s++){if(e(i[n][s],C,F,V,Y)===!1)return!1;C++}te==="MultiLineString"&&V++,te==="Polygon"&&Y++}te==="Polygon"&&V++;break;case"MultiPolygon":for(n=0;n<i.length;n++){for(Y=0,s=0;s<i[n].length;s++){for(o=0;o<i[n][s].length-g;o++){if(e(i[n][s][o],C,F,V,Y)===!1)return!1;C++}Y++}V++}break;case"GeometryCollection":for(n=0;n<c.geometries.length;n++)if(DG(c.geometries[n],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mhe(t,e){var r,n,s,o,c,u,i,m,g,C,B=0,S=t.type==="FeatureCollection",P=t.type==="Feature",j=S?t.features.length:1;for(r=0;r<j;r++){for(u=S?t.features[r].geometry:P?t.geometry:t,m=S?t.features[r].properties:P?t.properties:{},g=S?t.features[r].bbox:P?t.bbox:void 0,C=S?t.features[r].id:P?t.id:void 0,i=u?u.type==="GeometryCollection":!1,c=i?u.geometries.length:1,s=0;s<c;s++){if(o=i?u.geometries[s]:u,o===null){if(e(null,B,m,g,C)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,B,m,g,C)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],B,m,g,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}B++}}function ghe(t,e,r){var n=r;return mhe(t,function(s,o,c,u,i){o===0&&r===void 0?n=s:n=e(n,s,o,c,u,i)}),n}function rf(t){return ghe(t,(e,r)=>e+yhe(r),0)}function yhe(t){let e=0,r;switch(t.type){case"Polygon":return H8(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)e+=H8(t.coordinates[r]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function H8(t){let e=0;if(t&&t.length>0){e+=Math.abs(V8(t[0]));for(let r=1;r<t.length;r++)e-=Math.abs(V8(t[r]))}return e}var vhe=z8*z8/2,KE=Math.PI/180;function V8(t){const e=t.length-1;if(e<=2)return 0;let r=0,n=0;for(;n<e;){const s=t[n],o=t[n+1===e?0:n+1],c=t[n+2>=e?(n+2)%e:n+2],u=s[0]*KE,i=o[1]*KE,m=c[0]*KE;r+=(m-u)*Math.sin(i),n++}return r*vhe}function kN(t,e={}){let r=0,n=0,s=0;return DG(t,function(o){r+=o[0],n+=o[1],s++}),phe([r/s,n/s],e.properties)}const xhe=({longitude:t,latitude:e,onPolygonChange:r,onPlaceSelect:n})=>{const s=Ae.useRef(),o=Ae.useRef(),c=Ae.useRef(),[u,i]=Ae.useState();return Ae.useEffect(()=>{Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q";const m=new Li.Map({container:s.current,style:"mapbox://styles/mapbox/satellite-v9",center:[t,e],zoom:8});o.current=m;const g=new MG({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},defaultMode:"draw_polygon"});m.addControl(g),c.current=g;const C=new wC({accessToken:Li.accessToken,zoom:4,placeholder:"Search coordinates",mapboxgl:Li,reverseGeocode:!0});m.addControl(C),C.on("result",S=>{n==null||n(S.result),m.flyTo({center:S.result.geometry.coordinates,zoom:15})});const B=()=>{const S=g.getAll();if(S.features.length>0){const P=rf(S);i(Math.round(P*100)/100),r==null||r(S.features[0].geometry.coordinates)}else i(void 0)};m.on("draw.create",B),m.on("draw.delete",B),m.on("draw.update",B)},[t,e]),{mapContainerRef:s,mapRef:o,drawRef:c,roundedArea:u}},_he=({onAdd:t,onValidate:e})=>{const[r,n]=Ae.useState({lng:"",lat:""}),s=()=>{if(!r.lng||!r.lat){alert("Please enter valid coordinates.");return}t([parseFloat(r.lng),parseFloat(r.lat)]),n({lng:"",lat:""})};return p.jsxs("div",{className:"bg-white p-4 rounded-md shadow-lg",children:[p.jsx("div",{children:p.jsxs("label",{children:["Longitude:",p.jsx("input",{type:"number",value:r.lng,onChange:o=>n({...r,lng:o.target.value}),className:"border p-2 rounded-md ml-2"})]})}),p.jsx("div",{className:"mt-2",children:p.jsxs("label",{children:["Latitude:",p.jsx("input",{type:"number",value:r.lat,onChange:o=>n({...r,lat:o.target.value}),className:"border p-2 rounded-md ml-2"})]})}),p.jsx("button",{onClick:s,className:"mt-4 bg-blue-500 text-white p-2 rounded-md",children:"Add Coordinate"}),p.jsx("button",{onClick:e,className:"mt-4 bg-green-500 text-white p-2 rounded-md ml-2",children:"Validate Selection"})]})},bhe=()=>{var j,D,F;const t=vu(),e=(j=t.state)==null?void 0:j.owner_id,r=(D=t.state)==null?void 0:D.geolocation,n=(F=t.state)==null?void 0:F.owner_type;let s="32.5825",o="0.3476";r&&r.includes(",")&&([s,o]=r.split(","));const[c,u]=Ae.useState([]),[i,m]=Ae.useState(null),{mapContainerRef:g,mapRef:C,drawRef:B}=xhe({longitude:s,latitude:o,onPolygonChange:u,onPlaceSelect:R=>console.log("Selected place:",R)}),S=R=>{u(V=>{const Y=V.length?[...V]:[[]];return Y[0].push(R),Y})},P=async()=>{if(c.length===0||c[0].length<4){m({type:"error",message:"Invalid polygon"});return}try{const{data:R}=await Tr.get(`/api/points/exists/${n}/${e}`);if(R.exists){m({type:"error",message:"GeoMap already exists"});return}const V=c[0].map(([Y,te])=>({longitude:Y,latitude:te}));for(const Y of V)await Tr.post("/api/points/create",{...Y,owner_id:e,owner_type:n});m({type:"success",message:"Points saved!"})}catch(R){m({type:"error",message:R.response?R.response.data:R.message})}};return p.jsxs("div",{className:"relative h-full",children:[i&&p.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg ${i.type==="success"?"bg-green-500":"bg-red-500"} text-white`,children:i.message}),p.jsx("div",{className:"absolute top-10 left-2 z-10",children:p.jsx(_he,{onAdd:S,onValidate:P})}),p.jsx("div",{className:"relative h-[600px]",children:p.jsx("div",{ref:g,className:"absolute inset-0"})})]})},whe=()=>{var F,R,V;const t=Ae.useRef(),e=Ae.useRef(),r=Ae.useRef(new Li.Popup({closeButton:!1,closeOnClick:!1})),n=vu(),s=(F=n.state)==null?void 0:F.owner_id,o=(R=n.state)==null?void 0:R.owner_type,c=(V=n.state)==null?void 0:V.geolocation;let u="32.5825",i="0.3476";const[m,g]=Ae.useState(null);c&&c.includes(",")&&([u,i]=c.split(","));const[C,B]=Ae.useState(null),[S,P]=Ae.useState({center:[u,i],zoom:15}),[j,D]=Ae.useState(null);return Ae.useEffect(()=>{Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current||(e.current=new Li.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:[u,i],zoom:15}),e.current.on("move",()=>{const te=e.current.getCenter(),se=e.current.getZoom();P({center:[te.lng,te.lat],zoom:se.toFixed(2)})})),(async()=>{try{const se=(await Tr.get(`/api/points/getbyownerid/${o}/${s}`)).data.points;if(se.length===0){B({type:"info",message:"No points found. Please create a point first."});return}B(null);const oe={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[se.map(de=>[de.longitude,de.latitude])]},properties:{owner_type:o,owner_id:s,id:"unique-feature-id"}}]},K=()=>{e.current.getSource("polygon")?e.current.getSource("polygon").setData(oe):(e.current.addSource("polygon",{type:"geojson",data:oe}),e.current.addLayer({id:"polygon-fill",type:"fill",source:"polygon",paint:{"fill-color":"#0080ff","fill-opacity":.5}}),e.current.addLayer({id:"polygon-outline",type:"line",source:"polygon",paint:{"line-color":"#000","line-width":2}}),e.current.on("mouseenter","polygon-fill",Ie=>{const be=Ie.features[0].properties;r.current.setLngLat(J.geometry.coordinates).setHTML(`
                  <strong>Owner ID:</strong> ${be.owner_id}<br />
                  <strong>Area:</strong> ${Math.round(rf(oe.features[0])*100)/100} m<br />
                `).addTo(e.current)}),e.current.on("mouseleave","polygon-fill",()=>{r.current.remove()}));const de=new Li.LngLatBounds;se.forEach(Ie=>{de.extend([Ie.longitude,Ie.latitude])}),e.current.fitBounds(de,{padding:20});const we=rf(oe.features[0]);D(Math.round(we*100)/100),g(Math.round(we/4));const J=kN(oe.features[0]),Z=new Li.Marker({color:"red"}).setLngLat(J.geometry.coordinates).addTo(e.current);r.current.setLngLat(J.geometry.coordinates).setHTML(`
              <strong>Owner ID:</strong> ${s}<br />
              <strong>Area:</strong> ${Math.round(we*100)/100} m<br />
            `).addTo(e.current)};e.current.isStyleLoaded()?K():e.current.on("load",K)}catch(te){console.error("Error fetching points:",te)}})()},[s,o,u,i]),p.jsxs("div",{className:"relative h-full",children:[C&&p.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg transition-shadow duration-300 focus:outline-none ${C.type==="info"?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:C.message}),p.jsx("div",{ref:t,id:"map",className:"h-[80vh]"}),p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 p-4 max-w-sm w-full",children:p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Map Properties"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Area m:"})," ",j||"Calculating..."," m"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Zoom:"})," ",S.zoom]})]})]})}),p.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 ms-4 p-4 flex-1",children:p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Estimated Trees:"})," ",m||"Calculating..."]})]})]})})]})]})},Che=()=>{var P;const t=Ae.useRef(),e=Ae.useRef(),r=vu();Ae.useRef(new Li.Popup({closeButton:!1,closeOnClick:!1}));const n=(P=r.state)==null?void 0:P.owner_type,[s,o]=Ae.useState(null),[c,u]=Ae.useState({center:[-32.5825,.3476],zoom:5}),[i,m]=Ae.useState([]),[g,C]=Ae.useState(0),[B,S]=Ae.useState(0);return Ae.useEffect(()=>{Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current||(e.current=new Li.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:c.center,zoom:c.zoom}),e.current.on("move",()=>{const j=e.current.getCenter(),D=e.current.getZoom();u({center:[j.lng,j.lat],zoom:D.toFixed(2)})}))},[c.center,c.zoom]),Ae.useEffect(()=>{(async()=>{try{const F=(await Tr.get(`/api/points/getallbyownertype/${n}`)).data;if(console.log(F),!F.polygons||F.polygons.length===0){o({type:"info",message:"No polygons found."});return}o(null),m(F.polygons),S(F.polygons.length)}catch(D){console.error("Error fetching polygons:",D)}})()},[n]),Ae.useEffect(()=>{const j=()=>{const F="0123456789ABCDEF";let R="#";for(let V=0;V<6;V++)R+=F[Math.floor(Math.random()*16)];return R},D=()=>{if(!e.current||i.length===0)return;const F=i.map((Y,te)=>{const se=Y.points.map(de=>[de.longitude,de.latitude]),oe={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[se]},properties:{id:te,owner_type:Y.owner_type,owner_id:Y.owner_id,area:Math.round(rf({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[se]}}]})*100)/100}}]},K=kN(oe.features[0]);return new Li.Marker().setLngLat([K.geometry.coordinates[0],K.geometry.coordinates[1]]).addTo(e.current),{type:"Feature",geometry:{type:"Polygon",coordinates:[se]},properties:{id:te,owner_type:Y.owner_type,owner_id:Y.owner_id,area:Math.round(rf(oe.features[0])*100)/100,color:j()}}}),R=F.reduce((Y,te)=>Y+te.properties.area,0);C(R);const V={type:"FeatureCollection",features:F};if(e.current.getSource("multiPolygon"))e.current.getSource("multiPolygon").setData(V);else{e.current.addSource("multiPolygon",{type:"geojson",data:V}),e.current.addLayer({id:"multiPolygon-fill",type:"fill",source:"multiPolygon",paint:{"fill-color":["get","color"],"fill-opacity":.5}}),e.current.addLayer({id:"multiPolygon-outline",type:"line",source:"multiPolygon",paint:{"line-color":"#000","line-width":2}}),e.current.on("click","multiPolygon-fill",te=>{const{properties:se}=te.features[0];new Li.Popup().setLngLat(te.lngLat).setHTML(` <h3>Owner Type: ${se.owner_type}</h3>
              <p>Owner ID: ${se.owner_id}</p>
              <p>Feature ID: ${se.id}</p>
              <p>Area: ${se.area} m</p>
              <button class="delete-btn" data-owner-id="${se.owner_id}" style="margin-top: 10px; padding: 5px 10px; background-color: red; color: white; border: none; border-radius: 3px; cursor: pointer;">Delete Polygon</button>`).addTo(e.current)}),e.current.on("mouseenter","multiPolygon-fill",()=>{e.current.getCanvas().style.cursor="pointer"}),e.current.on("mouseleave","multiPolygon-fill",()=>{e.current.getCanvas().style.cursor=""});const Y=new Li.LngLatBounds;F.forEach(te=>{te.geometry.coordinates[0].forEach(se=>Y.extend(se))}),e.current.fitBounds(Y,{padding:20})}};e.current&&i.length>0&&(e.current.isStyleLoaded()?D():e.current.on("load",D))},[i]),Ae.useEffect(()=>{const j=async D=>{if(D.target.classList.contains("delete-btn")){const F=D.target.getAttribute("data-owner-id");if(!window.confirm(`Are you sure you want to delete the polygon with owner ID: ${F}?`))return;console.log("Owner ID:",F);try{if((await Tr.delete(`/api/points/owner/${F}`)).status===204){console.log(`Polygon with owner ID: ${F} deleted successfully.`),o({type:"info",message:`Polygon with owner ID: ${F} deleted successfully.`});const te=(await Tr.get(`/api/points/getallbyownertype/${n}`)).data;m(te.polygons),S(te.polygons.length)}else o({type:"error",message:`Failed to delete polygon with owner ID: ${F}.`})}catch(V){console.error("Error deleting polygon:",V),o({type:"error",message:`Error deleting polygon with owner ID: ${F}.`})}}};return t.current.addEventListener("click",j),()=>{t.current&&t.current.removeEventListener("click",j)}},[i]),p.jsxs("div",{className:"relative h-full",children:[s&&p.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg transition-shadow duration-300 focus:outline-none ${s.type==="info"?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:s.message}),p.jsx("div",{ref:t,id:"map",className:"h-[80vh]"}),p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 p-4 max-w-sm w-full",children:p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Map Properties"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Total Area:"})," ",g?`${g} m`:"Calculating..."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Number of Polygons:"})," ",B]})," ",p.jsxs("p",{children:[p.jsx("strong",{children:"Zoom:"})," ",c.zoom]})]})]})}),p.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 ms-4 p-4 flex-1",children:p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),p.jsx("p",{children:"This is where you can add more details related to the map or your application."})]})]})})]})]})},OG=Ae.createContext({});function She(t){const e=Ae.useRef(null);return e.current===null&&(e.current=t()),e.current}const DN=typeof window<"u",Bhe=DN?Ae.useLayoutEffect:Ae.useEffect,ON=Ae.createContext(null);function RN(t,e){t.indexOf(e)===-1&&t.push(e)}function UN(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const AA=(t,e,r)=>r>e?e:r<t?t:r;let g4=()=>{};const mA={},RG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function UG(t){return typeof t=="object"&&t!==null}const zG=t=>/^0[^.\s]+$/u.test(t);function zN(t){let e;return()=>(e===void 0&&(e=t()),e)}const Jh=t=>t,Ehe=(t,e)=>r=>e(t(r)),ob=(...t)=>t.reduce(Ehe),N_=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class QN{constructor(){this.subscriptions=[]}add(e){return RN(this.subscriptions,e),()=>UN(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let o=0;o<s;o++){const c=this.subscriptions[o];c&&c(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _p=t=>t*1e3,bp=t=>t/1e3;function QG(t,e){return e?t*(1e3/e):0}const HG=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,The=1e-7,Lhe=12;function Ihe(t,e,r,n,s){let o,c,u=0;do c=e+(r-e)/2,o=HG(c,n,s)-t,o>0?r=c:e=c;while(Math.abs(o)>The&&++u<Lhe);return c}function ab(t,e,r,n){if(t===e&&r===n)return Jh;const s=o=>Ihe(o,0,1,t,r);return o=>o===0||o===1?o:HG(s(o),e,n)}const VG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,GG=t=>e=>1-t(1-e),$G=ab(.33,1.53,.69,.99),HN=GG($G),qG=VG(HN),WG=t=>(t*=2)<1?.5*HN(t):.5*(2-Math.pow(2,-10*(t-1))),VN=t=>1-Math.sin(Math.acos(t)),KG=GG(VN),XG=VG(VN),Nhe=ab(.42,0,1,1),Fhe=ab(0,0,.58,1),YG=ab(.42,0,.58,1),Phe=t=>Array.isArray(t)&&typeof t[0]!="number",ZG=t=>Array.isArray(t)&&typeof t[0]=="number",G8={linear:Jh,easeIn:Nhe,easeInOut:YG,easeOut:Fhe,circIn:VN,circInOut:XG,circOut:KG,backIn:HN,backInOut:qG,backOut:$G,anticipate:WG},jhe=t=>typeof t=="string",$8=t=>{if(ZG(t)){g4(t.length===4);const[e,r,n,s]=t;return ab(e,r,n,s)}else if(jhe(t))return g4(G8[t]!==void 0),G8[t];return t},n2=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],q8={value:null,addProjectionMetrics:null};function Mhe(t,e){let r=new Set,n=new Set,s=!1,o=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},i=0;function m(C){c.has(C)&&(g.schedule(C),t()),i++,C(u)}const g={schedule:(C,B=!1,S=!1)=>{const j=S&&s?r:n;return B&&c.add(C),j.has(C)||j.add(C),C},cancel:C=>{n.delete(C),c.delete(C)},process:C=>{if(u=C,s){o=!0;return}s=!0,[r,n]=[n,r],r.forEach(m),e&&q8.value&&q8.value.frameloop[e].push(i),i=0,r.clear(),s=!1,o&&(o=!1,g.process(C))}};return g}const khe=40;function JG(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>r=!0,c=n2.reduce((V,Y)=>(V[Y]=Mhe(o,e?Y:void 0),V),{}),{setup:u,read:i,resolveKeyframes:m,preUpdate:g,update:C,preRender:B,render:S,postRender:P}=c,j=()=>{const V=mA.useManualTiming?s.timestamp:performance.now();r=!1,mA.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(V-s.timestamp,khe),1)),s.timestamp=V,s.isProcessing=!0,u.process(s),i.process(s),m.process(s),g.process(s),C.process(s),B.process(s),S.process(s),P.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(j))},D=()=>{r=!0,n=!0,s.isProcessing||t(j)};return{schedule:n2.reduce((V,Y)=>{const te=c[Y];return V[Y]=(se,oe=!1,K=!1)=>(r||D(),te.schedule(se,oe,K)),V},{}),cancel:V=>{for(let Y=0;Y<n2.length;Y++)c[n2[Y]].cancel(V)},state:s,steps:c}}const{schedule:Ol,cancel:qm,state:fu,steps:XE}=JG(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jh,!0);let f5;function Dhe(){f5=void 0}const Hd={now:()=>(f5===void 0&&Hd.set(fu.isProcessing||mA.useManualTiming?fu.timestamp:performance.now()),f5),set:t=>{f5=t,queueMicrotask(Dhe)}},e$=t=>e=>typeof e=="string"&&e.startsWith(t),GN=e$("--"),Ohe=e$("var(--"),$N=t=>Ohe(t)?Rhe.test(t.split("/*")[0].trim()):!1,Rhe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,P1={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},F_={...P1,transform:t=>AA(0,1,t)},i2={...P1,default:1},Ox=t=>Math.round(t*1e5)/1e5,qN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Uhe(t){return t==null}const zhe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WN=(t,e)=>r=>!!(typeof r=="string"&&zhe.test(r)&&r.startsWith(t)||e&&!Uhe(r)&&Object.prototype.hasOwnProperty.call(r,e)),t$=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,o,c,u]=n.match(qN);return{[t]:parseFloat(s),[e]:parseFloat(o),[r]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},Qhe=t=>AA(0,255,t),YE={...P1,transform:t=>Math.round(Qhe(t))},Wg={test:WN("rgb","red"),parse:t$("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+YE.transform(t)+", "+YE.transform(e)+", "+YE.transform(r)+", "+Ox(F_.transform(n))+")"};function Hhe(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const w6={test:WN("#"),parse:Hhe,transform:Wg.transform},lb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),YA=lb("deg"),wp=lb("%"),ps=lb("px"),Vhe=lb("vh"),Ghe=lb("vw"),W8={...wp,parse:t=>wp.parse(t)/100,transform:t=>wp.transform(t*100)},ky={test:WN("hsl","hue"),parse:t$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+wp.transform(Ox(e))+", "+wp.transform(Ox(r))+", "+Ox(F_.transform(n))+")"},Wu={test:t=>Wg.test(t)||w6.test(t)||ky.test(t),parse:t=>Wg.test(t)?Wg.parse(t):ky.test(t)?ky.parse(t):w6.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Wg.transform(t):ky.transform(t)},$he=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qhe(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qN))==null?void 0:e.length)||0)+(((r=t.match($he))==null?void 0:r.length)||0)>0}const r$="number",n$="color",Whe="var",Khe="var(",K8="${}",Xhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function P_(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(Xhe,i=>(Wu.test(i)?(n.color.push(o),s.push(n$),r.push(Wu.parse(i))):i.startsWith(Khe)?(n.var.push(o),s.push(Whe),r.push(i)):(n.number.push(o),s.push(r$),r.push(parseFloat(i))),++o,K8)).split(K8);return{values:r,split:u,indexes:n,types:s}}function i$(t){return P_(t).values}function s$(t){const{split:e,types:r}=P_(t),n=e.length;return s=>{let o="";for(let c=0;c<n;c++)if(o+=e[c],s[c]!==void 0){const u=r[c];u===r$?o+=Ox(s[c]):u===n$?o+=Wu.transform(s[c]):o+=s[c]}return o}}const Yhe=t=>typeof t=="number"?0:t;function Zhe(t){const e=i$(t);return s$(t)(e.map(Yhe))}const Wm={test:qhe,parse:i$,createTransformer:s$,getAnimatableNone:Zhe};function ZE(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Jhe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,o=0,c=0;if(!e)s=o=c=r;else{const u=r<.5?r*(1+e):r+e-r*e,i=2*r-u;s=ZE(i,u,t+1/3),o=ZE(i,u,t),c=ZE(i,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:n}}function y4(t,e){return r=>r>0?e:t}const kl=(t,e,r)=>t+(e-t)*r,JE=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},efe=[w6,Wg,ky],tfe=t=>efe.find(e=>e.test(t));function X8(t){const e=tfe(t);if(!e)return!1;let r=e.parse(t);return e===ky&&(r=Jhe(r)),r}const Y8=(t,e)=>{const r=X8(t),n=X8(e);if(!r||!n)return y4(t,e);const s={...r};return o=>(s.red=JE(r.red,n.red,o),s.green=JE(r.green,n.green,o),s.blue=JE(r.blue,n.blue,o),s.alpha=kl(r.alpha,n.alpha,o),Wg.transform(s))},C6=new Set(["none","hidden"]);function rfe(t,e){return C6.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function nfe(t,e){return r=>kl(t,e,r)}function KN(t){return typeof t=="number"?nfe:typeof t=="string"?$N(t)?y4:Wu.test(t)?Y8:ofe:Array.isArray(t)?o$:typeof t=="object"?Wu.test(t)?Y8:ife:y4}function o$(t,e){const r=[...t],n=r.length,s=t.map((o,c)=>KN(o)(o,e[c]));return o=>{for(let c=0;c<n;c++)r[c]=s[c](o);return r}}function ife(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=KN(t[s])(t[s],e[s]));return s=>{for(const o in n)r[o]=n[o](s);return r}}function sfe(t,e){const r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],c=t.indexes[o][n[o]],u=t.values[c]??0;r[s]=u,n[o]++}return r}const ofe=(t,e)=>{const r=Wm.createTransformer(e),n=P_(t),s=P_(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?C6.has(t)&&!s.values.length||C6.has(e)&&!n.values.length?rfe(t,e):ob(o$(sfe(n,s),s.values),r):y4(t,e)};function a$(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?kl(t,e,r):KN(t)(t,e)}const afe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>Ol.update(e,r),stop:()=>qm(e),now:()=>fu.isProcessing?fu.timestamp:Hd.now()}},l$=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let o=0;o<s;o++)n+=t(o/(s-1))+", ";return`linear(${n.substring(0,n.length-2)})`},v4=2e4;function XN(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<v4;)e+=r,n=t.next(e);return e>=v4?1/0:e}function lfe(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(XN(n),v4);return{type:"keyframes",ease:o=>n.next(s*o).value/e,duration:bp(s)}}const cfe=5;function c$(t,e,r){const n=Math.max(e-cfe,0);return QG(r-t(n),e-n)}const Jl={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},e3=.001;function ufe({duration:t=Jl.duration,bounce:e=Jl.bounce,velocity:r=Jl.velocity,mass:n=Jl.mass}){let s,o,c=1-e;c=AA(Jl.minDamping,Jl.maxDamping,c),t=AA(Jl.minDuration,Jl.maxDuration,bp(t)),c<1?(s=m=>{const g=m*c,C=g*t,B=g-r,S=S6(m,c),P=Math.exp(-C);return e3-B/S*P},o=m=>{const C=m*c*t,B=C*r+r,S=Math.pow(c,2)*Math.pow(m,2)*t,P=Math.exp(-C),j=S6(Math.pow(m,2),c);return(-s(m)+e3>0?-1:1)*((B-S)*P)/j}):(s=m=>{const g=Math.exp(-m*t),C=(m-r)*t+1;return-e3+g*C},o=m=>{const g=Math.exp(-m*t),C=(r-m)*(t*t);return g*C});const u=5/t,i=hfe(s,o,u);if(t=_p(t),isNaN(i))return{stiffness:Jl.stiffness,damping:Jl.damping,duration:t};{const m=Math.pow(i,2)*n;return{stiffness:m,damping:c*2*Math.sqrt(n*m),duration:t}}}const dfe=12;function hfe(t,e,r){let n=r;for(let s=1;s<dfe;s++)n=n-t(n)/e(n);return n}function S6(t,e){return t*Math.sqrt(1-e*e)}const ffe=["duration","bounce"],pfe=["stiffness","damping","mass"];function Z8(t,e){return e.some(r=>t[r]!==void 0)}function Afe(t){let e={velocity:Jl.velocity,stiffness:Jl.stiffness,damping:Jl.damping,mass:Jl.mass,isResolvedFromDuration:!1,...t};if(!Z8(t,pfe)&&Z8(t,ffe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,o=2*AA(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Jl.mass,stiffness:s,damping:o}}else{const r=ufe(t);e={...e,...r,mass:Jl.mass},e.isResolvedFromDuration=!0}return e}function x4(t=Jl.visualDuration,e=Jl.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const o=r.keyframes[0],c=r.keyframes[r.keyframes.length-1],u={done:!1,value:o},{stiffness:i,damping:m,mass:g,duration:C,velocity:B,isResolvedFromDuration:S}=Afe({...r,velocity:-bp(r.velocity||0)}),P=B||0,j=m/(2*Math.sqrt(i*g)),D=c-o,F=bp(Math.sqrt(i/g)),R=Math.abs(D)<5;n||(n=R?Jl.restSpeed.granular:Jl.restSpeed.default),s||(s=R?Jl.restDelta.granular:Jl.restDelta.default);let V;if(j<1){const te=S6(F,j);V=se=>{const oe=Math.exp(-j*F*se);return c-oe*((P+j*F*D)/te*Math.sin(te*se)+D*Math.cos(te*se))}}else if(j===1)V=te=>c-Math.exp(-F*te)*(D+(P+F*D)*te);else{const te=F*Math.sqrt(j*j-1);V=se=>{const oe=Math.exp(-j*F*se),K=Math.min(te*se,300);return c-oe*((P+j*F*D)*Math.sinh(K)+te*D*Math.cosh(K))/te}}const Y={calculatedDuration:S&&C||null,next:te=>{const se=V(te);if(S)u.done=te>=C;else{let oe=te===0?P:0;j<1&&(oe=te===0?_p(P):c$(V,te,se));const K=Math.abs(oe)<=n,de=Math.abs(c-se)<=s;u.done=K&&de}return u.value=u.done?c:se,u},toString:()=>{const te=Math.min(XN(Y),v4),se=l$(oe=>Y.next(te*oe).value,te,30);return te+"ms "+se},toTransition:()=>{}};return Y}x4.applyToOptions=t=>{const e=lfe(t,100,x4);return t.ease=e.ease,t.duration=_p(e.duration),t.type="keyframes",t};function B6({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:c,min:u,max:i,restDelta:m=.5,restSpeed:g}){const C=t[0],B={done:!1,value:C},S=K=>u!==void 0&&K<u||i!==void 0&&K>i,P=K=>u===void 0?i:i===void 0||Math.abs(u-K)<Math.abs(i-K)?u:i;let j=r*e;const D=C+j,F=c===void 0?D:c(D);F!==D&&(j=F-C);const R=K=>-j*Math.exp(-K/n),V=K=>F+R(K),Y=K=>{const de=R(K),we=V(K);B.done=Math.abs(de)<=m,B.value=B.done?F:we};let te,se;const oe=K=>{S(B.value)&&(te=K,se=x4({keyframes:[B.value,P(B.value)],velocity:c$(V,K,B.value),damping:s,stiffness:o,restDelta:m,restSpeed:g}))};return oe(0),{calculatedDuration:null,next:K=>{let de=!1;return!se&&te===void 0&&(de=!0,Y(K),oe(K)),te!==void 0&&K>=te?se.next(K-te):(!de&&Y(K),B)}}}function mfe(t,e,r){const n=[],s=r||mA.mix||a$,o=t.length-1;for(let c=0;c<o;c++){let u=s(t[c],t[c+1]);if(e){const i=Array.isArray(e)?e[c]||Jh:e;u=ob(i,u)}n.push(u)}return n}function gfe(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const o=t.length;if(g4(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=mfe(e,n,s),i=u.length,m=g=>{if(c&&g<t[0])return e[0];let C=0;if(i>1)for(;C<t.length-2&&!(g<t[C+1]);C++);const B=N_(t[C],t[C+1],g);return u[C](B)};return r?g=>m(AA(t[0],t[o-1],g)):m}function yfe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=N_(0,e,n);t.push(kl(r,1,s))}}function vfe(t){const e=[0];return yfe(e,t.length-1),e}function xfe(t,e){return t.map(r=>r*e)}function _fe(t,e){return t.map(()=>e||YG).splice(0,t.length-1)}function Rx({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=Phe(n)?n.map($8):$8(n),o={done:!1,value:e[0]},c=xfe(r&&r.length===e.length?r:vfe(e),t),u=gfe(c,e,{ease:Array.isArray(s)?s:_fe(e,s)});return{calculatedDuration:t,next:i=>(o.value=u(i),o.done=i>=t,o)}}const bfe=t=>t!==null;function YN(t,{repeat:e,repeatType:r="loop"},n,s=1){const o=t.filter(bfe),u=s<0||e&&r!=="loop"&&e%2===1?0:o.length-1;return!u||n===void 0?o[u]:n}const wfe={decay:B6,inertia:B6,tween:Rx,keyframes:Rx,spring:x4};function u$(t){typeof t.type=="string"&&(t.type=wfe[t.type])}class ZN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const Cfe=t=>t/100;class JN extends ZN{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var n,s;if(r){const{motionValue:o}=this.options;o&&o.updatedAt!==Hd.now()&&this.tick(Hd.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;u$(e);const{type:r=Rx,repeat:n=0,repeatDelay:s=0,repeatType:o,velocity:c=0}=e;let{keyframes:u}=e;const i=r||Rx;i!==Rx&&typeof u[0]!="number"&&(this.mixKeyframes=ob(Cfe,a$(u[0],u[1])),u=[0,100]);const m=i({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=i({...e,keyframes:[...u].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=XN(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=m}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:s,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:i}=this;if(this.startTime===null)return n.next(0);const{delay:m=0,keyframes:g,repeat:C,repeatType:B,repeatDelay:S,type:P,onUpdate:j,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const F=this.currentTime-m*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?F<0:F>s;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let V=this.currentTime,Y=n;if(C){const K=Math.min(this.currentTime,s)/u;let de=Math.floor(K),we=K%1;!we&&K>=1&&(we=1),we===1&&de--,de=Math.min(de,C+1),!!(de%2)&&(B==="reverse"?(we=1-we,S&&(we-=S/u)):B==="mirror"&&(Y=c)),V=AA(0,1,we)*u}const te=R?{done:!1,value:g[0]}:Y.next(V);o&&(te.value=o(te.value));let{done:se}=te;!R&&i!==null&&(se=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const oe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&se);return oe&&P!==B6&&(te.value=YN(g,this.options,D,this.speed)),j&&j(te.value),oe&&this.finish(),te}then(e,r){return this.finished.then(e,r)}get duration(){return bp(this.calculatedDuration)}get time(){return bp(this.currentTime)}set time(e){var r;e=_p(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Hd.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=bp(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=afe,startTime:r}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(s=this.options).onPlay)==null||o.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hd.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function Sfe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Kg=t=>t*180/Math.PI,E6=t=>{const e=Kg(Math.atan2(t[1],t[0]));return T6(e)},Bfe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:E6,rotateZ:E6,skewX:t=>Kg(Math.atan(t[1])),skewY:t=>Kg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},T6=t=>(t=t%360,t<0&&(t+=360),t),J8=E6,eR=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),tR=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Efe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eR,scaleY:tR,scale:t=>(eR(t)+tR(t))/2,rotateX:t=>T6(Kg(Math.atan2(t[6],t[5]))),rotateY:t=>T6(Kg(Math.atan2(-t[2],t[0]))),rotateZ:J8,rotate:J8,skewX:t=>Kg(Math.atan(t[4])),skewY:t=>Kg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function L6(t){return t.includes("scale")?1:0}function I6(t,e){if(!t||t==="none")return L6(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=Efe,s=r;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Bfe,s=u}if(!s)return L6(e);const o=n[e],c=s[1].split(",").map(Lfe);return typeof o=="function"?o(c):c[o]}const Tfe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return I6(r,e)};function Lfe(t){return parseFloat(t.trim())}const j1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],M1=new Set(j1),rR=t=>t===P1||t===ps,Ife=new Set(["x","y","z"]),Nfe=j1.filter(t=>!Ife.has(t));function Ffe(t){const e=[];return Nfe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const n0={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>I6(e,"x"),y:(t,{transform:e})=>I6(e,"y")};n0.translateX=n0.x;n0.translateY=n0.y;const i0=new Set;let N6=!1,F6=!1,P6=!1;function d$(){if(F6){const t=Array.from(i0).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=Ffe(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([o,c])=>{var u;(u=n.getValue(o))==null||u.set(c)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}F6=!1,N6=!1,i0.forEach(t=>t.complete(P6)),i0.clear()}function h$(){i0.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(F6=!0)})}function Pfe(){P6=!0,h$(),d$(),P6=!1}class eF{constructor(e,r,n,s,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(i0.add(this),N6||(N6=!0,Ol.read(h$),Ol.resolveKeyframes(d$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const u=n.readValue(r,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),s&&o===void 0&&s.set(e[0])}Sfe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),i0.delete(this)}cancel(){this.state==="scheduled"&&(i0.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jfe=t=>t.startsWith("--");function Mfe(t,e,r){jfe(e)?t.style.setProperty(e,r):t.style[e]=r}const kfe=zN(()=>window.ScrollTimeline!==void 0),Dfe={};function Ofe(t,e){const r=zN(t);return()=>Dfe[e]??r()}const f$=Ofe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lx=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,nR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lx([0,.65,.55,1]),circOut:lx([.55,0,1,.45]),backIn:lx([.31,.01,.66,-.59]),backOut:lx([.33,1.53,.69,.99])};function p$(t,e){if(t)return typeof t=="function"?f$()?l$(t,e):"ease-out":ZG(t)?lx(t):Array.isArray(t)?t.map(r=>p$(r,e)||nR.easeOut):nR[t]}function Rfe(t,e,r,{delay:n=0,duration:s=300,repeat:o=0,repeatType:c="loop",ease:u="easeOut",times:i}={},m=void 0){const g={[e]:r};i&&(g.offset=i);const C=p$(u,s);Array.isArray(C)&&(g.easing=C);const B={delay:n,duration:s,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return m&&(B.pseudoElement=m),t.animate(g,B)}function A$(t){return typeof t=="function"&&"applyToOptions"in t}function Ufe({type:t,...e}){return A$(t)&&f$()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zfe extends ZN{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:s,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:u,onComplete:i}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,g4(typeof e.type!="string");const m=Ufe(e);this.animation=Rfe(r,n,s,m,o),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=YN(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):Mfe(r,n,g),this.animation.cancel()}i==null||i(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return bp(Number(e))}get time(){return bp(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=_p(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&kfe()?(this.animation.timeline=e,Jh):r(this)}}const m$={anticipate:WG,backInOut:qG,circInOut:XG};function Qfe(t){return t in m$}function Hfe(t){typeof t.ease=="string"&&Qfe(t.ease)&&(t.ease=m$[t.ease])}const iR=10;class Vfe extends zfe{constructor(e){Hfe(e),u$(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:s,element:o,...c}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const u=new JN({...c,autoplay:!1}),i=_p(this.finishedTime??this.time);r.setWithVelocity(u.sample(i-iR).value,u.sample(i).value,iR),u.stop()}}const sR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wm.test(t)||t==="0")&&!t.startsWith("url("));function Gfe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function $fe(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=sR(s,e),u=sR(o,e);return!c||!u?!1:Gfe(t)||(r==="spring"||A$(r))&&n}function g$(t){return UG(t)&&"offsetHeight"in t}const qfe=new Set(["opacity","clipPath","filter","transform"]),Wfe=zN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kfe(t){var m;const{motionValue:e,name:r,repeatDelay:n,repeatType:s,damping:o,type:c}=t;if(!g$((m=e==null?void 0:e.owner)==null?void 0:m.current))return!1;const{onUpdate:u,transformTemplate:i}=e.owner.getProps();return Wfe()&&r&&qfe.has(r)&&(r!=="transform"||!i)&&!u&&!n&&s!=="mirror"&&o!==0&&c!=="inertia"}const Xfe=40;class Yfe extends ZN{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:c="loop",keyframes:u,name:i,motionValue:m,element:g,...C}){var P;super(),this.stop=()=>{var j,D;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(D=this.keyframeResolver)==null||D.cancel()},this.createdAt=Hd.now();const B={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:o,repeatType:c,name:i,motionValue:m,element:g,...C},S=(g==null?void 0:g.KeyframeResolver)||eF;this.keyframeResolver=new S(u,(j,D,F)=>this.onKeyframesResolved(j,D,B,!F),i,m,g),(P=this.keyframeResolver)==null||P.scheduleResolve()}onKeyframesResolved(e,r,n,s){this.keyframeResolver=void 0;const{name:o,type:c,velocity:u,delay:i,isHandoff:m,onUpdate:g}=n;this.resolvedAt=Hd.now(),$fe(e,o,c,u)||((mA.instantAnimations||!i)&&(g==null||g(YN(e,n,r))),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const B={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Xfe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},S=!m&&Kfe(B)?new Vfe({...B,element:B.motionValue.owner.current}):new JN(B);S.finished.then(()=>this.notifyFinished()).catch(Jh),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Pfe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Zfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Jfe(t){const e=Zfe.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function y$(t,e,r=1){const[n,s]=Jfe(t);if(!n)return;const o=window.getComputedStyle(e).getPropertyValue(n);if(o){const c=o.trim();return RG(c)?parseFloat(c):c}return $N(s)?y$(s,e,r+1):s}function tF(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const v$=new Set(["width","height","top","left","right","bottom",...j1]),epe={test:t=>t==="auto",parse:t=>t},x$=t=>e=>e.test(t),_$=[P1,ps,wp,YA,Ghe,Vhe,epe],oR=t=>_$.find(x$(t));function tpe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zG(t):!0}const rpe=new Set(["brightness","contrast","saturate","opacity"]);function npe(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(qN)||[];if(!n)return t;const s=r.replace(n,"");let o=rpe.has(e)?1:0;return n!==r&&(o*=100),e+"("+o+s+")"}const ipe=/\b([a-z-]*)\(.*?\)/gu,j6={...Wm,getAnimatableNone:t=>{const e=t.match(ipe);return e?e.map(npe).join(" "):t}},aR={...P1,transform:Math.round},spe={rotate:YA,rotateX:YA,rotateY:YA,rotateZ:YA,scale:i2,scaleX:i2,scaleY:i2,scaleZ:i2,skew:YA,skewX:YA,skewY:YA,distance:ps,translateX:ps,translateY:ps,translateZ:ps,x:ps,y:ps,z:ps,perspective:ps,transformPerspective:ps,opacity:F_,originX:W8,originY:W8,originZ:ps},rF={borderWidth:ps,borderTopWidth:ps,borderRightWidth:ps,borderBottomWidth:ps,borderLeftWidth:ps,borderRadius:ps,radius:ps,borderTopLeftRadius:ps,borderTopRightRadius:ps,borderBottomRightRadius:ps,borderBottomLeftRadius:ps,width:ps,maxWidth:ps,height:ps,maxHeight:ps,top:ps,right:ps,bottom:ps,left:ps,padding:ps,paddingTop:ps,paddingRight:ps,paddingBottom:ps,paddingLeft:ps,margin:ps,marginTop:ps,marginRight:ps,marginBottom:ps,marginLeft:ps,backgroundPositionX:ps,backgroundPositionY:ps,...spe,zIndex:aR,fillOpacity:F_,strokeOpacity:F_,numOctaves:aR},ope={...rF,color:Wu,backgroundColor:Wu,outlineColor:Wu,fill:Wu,stroke:Wu,borderColor:Wu,borderTopColor:Wu,borderRightColor:Wu,borderBottomColor:Wu,borderLeftColor:Wu,filter:j6,WebkitFilter:j6},b$=t=>ope[t];function w$(t,e){let r=b$(t);return r!==j6&&(r=Wm),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const ape=new Set(["auto","none","0"]);function lpe(t,e,r){let n=0,s;for(;n<t.length&&!s;){const o=t[n];typeof o=="string"&&!ape.has(o)&&P_(o).values.length&&(s=t[n]),n++}if(s&&r)for(const o of e)t[o]=w$(r,s)}class cpe extends eF{constructor(e,r,n,s,o){super(e,r,n,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let i=0;i<e.length;i++){let m=e[i];if(typeof m=="string"&&(m=m.trim(),$N(m))){const g=y$(m,r.current);g!==void 0&&(e[i]=g),i===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!v$.has(n)||e.length!==2)return;const[s,o]=e,c=oR(s),u=oR(o);if(c!==u)if(rR(c)&&rR(u))for(let i=0;i<e.length;i++){const m=e[i];typeof m=="string"&&(e[i]=parseFloat(m))}else n0[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||tpe(e[s]))&&n.push(s);n.length&&lpe(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=n0[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var u;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=n.length-1,c=n[o];n[o]=n0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([i,m])=>{e.getValue(i).set(m)}),this.resolveNoneKeyframes()}}function upe(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const lR=30,dpe=t=>!isNaN(parseFloat(t));class hpe{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{var c,u;const o=Hd.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty();s&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Hd.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=dpe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new QN);const n=this.events[e].add(r);return e==="change"?()=>{n(),Ol.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hd.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,lR);return QG(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function v1(t,e){return new hpe(t,e)}const C$=(t,e)=>e&&typeof t=="number"?e.transform(t):t,{schedule:nF,cancel:_Te}=JG(queueMicrotask,!1),Ef={x:!1,y:!1};function S$(){return Ef.x||Ef.y}function fpe(t){return t==="x"||t==="y"?Ef[t]?null:(Ef[t]=!0,()=>{Ef[t]=!1}):Ef.x||Ef.y?null:(Ef.x=Ef.y=!0,()=>{Ef.x=Ef.y=!1})}function B$(t,e){const r=upe(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function cR(t){return!(t.pointerType==="touch"||S$())}function ppe(t,e,r={}){const[n,s,o]=B$(t,r),c=u=>{if(!cR(u))return;const{target:i}=u,m=e(i,u);if(typeof m!="function"||!i)return;const g=C=>{cR(C)&&(m(C),i.removeEventListener("pointerleave",g))};i.addEventListener("pointerleave",g,s)};return n.forEach(u=>{u.addEventListener("pointerenter",c,s)}),o}const E$=(t,e)=>e?t===e?!0:E$(t,e.parentElement):!1,iF=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Ape=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function mpe(t){return Ape.has(t.tagName)||t.tabIndex!==-1}const p5=new WeakSet;function uR(t){return e=>{e.key==="Enter"&&t(e)}}function t3(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const gpe=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=uR(()=>{if(p5.has(r))return;t3(r,"down");const s=uR(()=>{t3(r,"up")}),o=()=>t3(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",o,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function dR(t){return iF(t)&&!S$()}function ype(t,e,r={}){const[n,s,o]=B$(t,r),c=u=>{const i=u.currentTarget;if(!dR(u))return;p5.add(i);const m=e(i,u),g=(S,P)=>{window.removeEventListener("pointerup",C),window.removeEventListener("pointercancel",B),p5.has(i)&&p5.delete(i),dR(S)&&typeof m=="function"&&m(S,{success:P})},C=S=>{g(S,i===window||i===document||r.useGlobalTarget||E$(i,S.target))},B=S=>{g(S,!1)};window.addEventListener("pointerup",C,s),window.addEventListener("pointercancel",B,s)};return n.forEach(u=>{(r.useGlobalTarget?window:u).addEventListener("pointerdown",c,s),g$(u)&&(u.addEventListener("focus",m=>gpe(m,s)),!mpe(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function T$(t){return UG(t)&&"ownerSVGElement"in t}function vpe(t){return T$(t)&&t.tagName==="svg"}const Ju=t=>!!(t&&t.getVelocity),xpe=[..._$,Wu,Wm],_pe=t=>xpe.find(x$(t)),L$=Ae.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function bpe(t=!0){const e=Ae.useContext(ON);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,o=Ae.useId();Ae.useEffect(()=>{if(t)return s(o)},[t]);const c=Ae.useCallback(()=>t&&n&&n(o),[o,n,t]);return!r&&n?[!1,c]:[!0]}const I$=Ae.createContext({strict:!1}),hR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},x1={};for(const t in hR)x1[t]={isEnabled:e=>hR[t].some(r=>!!e[r])};function wpe(t){for(const e in t)x1[e]={...x1[e],...t[e]}}const Cpe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _4(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Cpe.has(t)}let N$=t=>!_4(t);function Spe(t){t&&(N$=e=>e.startsWith("on")?!_4(e):t(e))}try{Spe(require("@emotion/is-prop-valid").default)}catch{}function Bpe(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(N$(s)||r===!0&&_4(s)||!e&&!_4(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function Epe(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const CC=Ae.createContext({});function SC(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function j_(t){return typeof t=="string"||Array.isArray(t)}const sF=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oF=["initial",...sF];function BC(t){return SC(t.animate)||oF.some(e=>j_(t[e]))}function F$(t){return!!(BC(t)||t.variants)}function Tpe(t,e){if(BC(t)){const{initial:r,animate:n}=t;return{initial:r===!1||j_(r)?r:void 0,animate:j_(n)?n:void 0}}return t.inherit!==!1?e:{}}function Lpe(t){const{initial:e,animate:r}=Tpe(t,Ae.useContext(CC));return Ae.useMemo(()=>({initial:e,animate:r}),[fR(e),fR(r)])}function fR(t){return Array.isArray(t)?t.join(" "):t}const Ipe=Symbol.for("motionComponentSymbol");function Dy(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Npe(t,e,r){return Ae.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Dy(r)&&(r.current=n))},[e])}const aF=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Fpe="framerAppearId",P$="data-"+aF(Fpe),j$=Ae.createContext({});function Ppe(t,e,r,n,s){var j,D;const{visualElement:o}=Ae.useContext(CC),c=Ae.useContext(I$),u=Ae.useContext(ON),i=Ae.useContext(L$).reducedMotion,m=Ae.useRef(null);n=n||c.renderer,!m.current&&n&&(m.current=n(t,{visualState:e,parent:o,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:i}));const g=m.current,C=Ae.useContext(j$);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&jpe(m.current,r,s,C);const B=Ae.useRef(!1);Ae.useInsertionEffect(()=>{g&&B.current&&g.update(r,u)});const S=r[P$],P=Ae.useRef(!!S&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,S))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,S)));return Bhe(()=>{g&&(B.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),nF.render(g.render),P.current&&g.animationState&&g.animationState.animateChanges())}),Ae.useEffect(()=>{g&&(!P.current&&g.animationState&&g.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var F;(F=window.MotionHandoffMarkAsComplete)==null||F.call(window,S)}),P.current=!1))}),g}function jpe(t,e,r,n){const{layoutId:s,layout:o,drag:c,dragConstraints:u,layoutScroll:i,layoutRoot:m,layoutCrossfade:g}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:M$(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!c||u&&Dy(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:g,layoutScroll:i,layoutRoot:m})}function M$(t){if(t)return t.options.allowProjection!==!1?t.projection:M$(t.parent)}function Mpe({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){t&&wpe(t);function o(u,i){let m;const g={...Ae.useContext(L$),...u,layoutId:kpe(u)},{isStatic:C}=g,B=Lpe(u),S=n(u,C);if(!C&&DN){Dpe();const P=Ope(g);m=P.MeasureLayout,B.visualElement=Ppe(s,S,g,e,P.ProjectionNode)}return p.jsxs(CC.Provider,{value:B,children:[m&&B.visualElement?p.jsx(m,{visualElement:B.visualElement,...g}):null,r(s,u,Npe(S,B.visualElement,i),S,C,B.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const c=Ae.forwardRef(o);return c[Ipe]=s,c}function kpe({layoutId:t}){const e=Ae.useContext(OG).id;return e&&t!==void 0?e+"-"+t:t}function Dpe(t,e){Ae.useContext(I$).strict}function Ope(t){const{drag:e,layout:r}=x1;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const M_={};function Rpe(t){for(const e in t)M_[e]=t[e],GN(e)&&(M_[e].isCSSVariable=!0)}function k$(t,{layout:e,layoutId:r}){return M1.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!M_[t]||t==="opacity")}const Upe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zpe=j1.length;function Qpe(t,e,r){let n="",s=!0;for(let o=0;o<zpe;o++){const c=j1[o],u=t[c];if(u===void 0)continue;let i=!0;if(typeof u=="number"?i=u===(c.startsWith("scale")?1:0):i=parseFloat(u)===0,!i||r){const m=C$(u,rF[c]);if(!i){s=!1;const g=Upe[c]||c;n+=`${g}(${m}) `}r&&(e[c]=m)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function lF(t,e,r){const{style:n,vars:s,transformOrigin:o}=t;let c=!1,u=!1;for(const i in e){const m=e[i];if(M1.has(i)){c=!0;continue}else if(GN(i)){s[i]=m;continue}else{const g=C$(m,rF[i]);i.startsWith("origin")?(u=!0,o[i]=g):n[i]=g}}if(e.transform||(c||r?n.transform=Qpe(e,t.transform,r):n.transform&&(n.transform="none")),u){const{originX:i="50%",originY:m="50%",originZ:g=0}=o;n.transformOrigin=`${i} ${m} ${g}`}}const cF=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D$(t,e,r){for(const n in e)!Ju(e[n])&&!k$(n,r)&&(t[n]=e[n])}function Hpe({transformTemplate:t},e){return Ae.useMemo(()=>{const r=cF();return lF(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Vpe(t,e){const r=t.style||{},n={};return D$(n,r,t),Object.assign(n,Hpe(t,e)),n}function Gpe(t,e){const r={},n=Vpe(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const $pe={offset:"stroke-dashoffset",array:"stroke-dasharray"},qpe={offset:"strokeDashoffset",array:"strokeDasharray"};function Wpe(t,e,r=1,n=0,s=!0){t.pathLength=1;const o=s?$pe:qpe;t[o.offset]=ps.transform(-n);const c=ps.transform(e),u=ps.transform(r);t[o.array]=`${c} ${u}`}function O$(t,{attrX:e,attrY:r,attrScale:n,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...u},i,m,g){if(lF(t,u,m),i){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:C,style:B}=t;C.transform&&(B.transform=C.transform,delete C.transform),(B.transform||C.transformOrigin)&&(B.transformOrigin=C.transformOrigin??"50% 50%",delete C.transformOrigin),B.transform&&(B.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete C.transformBox),e!==void 0&&(C.x=e),r!==void 0&&(C.y=r),n!==void 0&&(C.scale=n),s!==void 0&&Wpe(C,s,o,c,!1)}const R$=()=>({...cF(),attrs:{}}),U$=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Kpe(t,e,r,n){const s=Ae.useMemo(()=>{const o=R$();return O$(o,e,U$(n),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};D$(o,t.style,t),s.style={...o,...s.style}}return s}const Xpe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uF(t){return typeof t!="string"||t.includes("-")?!1:!!(Xpe.indexOf(t)>-1||/[A-Z]/u.test(t))}function Ype(t=!1){return(r,n,s,{latestValues:o},c)=>{const i=(uF(r)?Kpe:Gpe)(n,o,c,r),m=Bpe(n,typeof r=="string",t),g=r!==Ae.Fragment?{...m,...i,ref:s}:{},{children:C}=n,B=Ae.useMemo(()=>Ju(C)?C.get():C,[C]);return Ae.createElement(r,{...g,children:B})}}function pR(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function dF(t,e,r,n){if(typeof e=="function"){const[s,o]=pR(n);e=e(r!==void 0?r:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=pR(n);e=e(r!==void 0?r:t.custom,s,o)}return e}function A5(t){return Ju(t)?t.get():t}function Zpe({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,s){return{latestValues:Jpe(r,n,s,t),renderState:e()}}const z$=t=>(e,r)=>{const n=Ae.useContext(CC),s=Ae.useContext(ON),o=()=>Zpe(t,e,n,s);return r?o():She(o)};function Jpe(t,e,r,n){const s={},o=n(t,{});for(const B in o)s[B]=A5(o[B]);let{initial:c,animate:u}=t;const i=BC(t),m=F$(t);e&&m&&!i&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let g=r?r.initial===!1:!1;g=g||c===!1;const C=g?u:c;if(C&&typeof C!="boolean"&&!SC(C)){const B=Array.isArray(C)?C:[C];for(let S=0;S<B.length;S++){const P=dF(t,B[S]);if(P){const{transitionEnd:j,transition:D,...F}=P;for(const R in F){let V=F[R];if(Array.isArray(V)){const Y=g?V.length-1:0;V=V[Y]}V!==null&&(s[R]=V)}for(const R in j)s[R]=j[R]}}}return s}function hF(t,e,r){var o;const{style:n}=t,s={};for(const c in n)(Ju(n[c])||e.style&&Ju(e.style[c])||k$(c,t)||((o=r==null?void 0:r.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(s[c]=n[c]);return s}const eAe={useVisualState:z$({scrapeMotionValuesFromProps:hF,createRenderState:cF})};function Q$(t,e,r){const n=hF(t,e,r);for(const s in t)if(Ju(t[s])||Ju(e[s])){const o=j1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[o]=t[s]}return n}const tAe={useVisualState:z$({scrapeMotionValuesFromProps:Q$,createRenderState:R$})};function rAe(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const c={...uF(n)?tAe:eAe,preloadedFeatures:t,useRender:Ype(s),createVisualElement:e,Component:n};return Mpe(c)}}function k_(t,e,r){const n=t.getProps();return dF(n,e,r!==void 0?r:n.custom,t)}const M6=t=>Array.isArray(t);function nAe(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,v1(r))}function iAe(t){return M6(t)?t[t.length-1]||0:t}function sAe(t,e){const r=k_(t,e);let{transitionEnd:n={},transition:s={},...o}=r||{};o={...o,...n};for(const c in o){const u=iAe(o[c]);nAe(t,c,u)}}function oAe(t){return!!(Ju(t)&&t.add)}function k6(t,e){const r=t.getValue("willChange");if(oAe(r))return r.add(e);if(!r&&mA.WillChange){const n=new mA.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function H$(t){return t.props[P$]}const aAe=t=>t!==null;function lAe(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(aAe),o=e&&r!=="loop"&&e%2===1?0:s.length-1;return!o||n===void 0?s[o]:n}const cAe={type:"spring",stiffness:500,damping:25,restSpeed:10},uAe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),dAe={type:"keyframes",duration:.8},hAe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fAe=(t,{keyframes:e})=>e.length>2?dAe:M1.has(t)?t.startsWith("scale")?uAe(e[1]):cAe:hAe;function pAe({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:c,repeatDelay:u,from:i,elapsed:m,...g}){return!!Object.keys(g).length}const fF=(t,e,r,n={},s,o)=>c=>{const u=tF(n,t)||{},i=u.delay||n.delay||0;let{elapsed:m=0}=n;m=m-_p(i);const g={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-m,onUpdate:B=>{e.set(B),u.onUpdate&&u.onUpdate(B)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:s};pAe(u)||Object.assign(g,fAe(t,g)),g.duration&&(g.duration=_p(g.duration)),g.repeatDelay&&(g.repeatDelay=_p(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let C=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(C=!0)),(mA.instantAnimations||mA.skipAnimations)&&(C=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,C&&!o&&e.get()!==void 0){const B=lAe(g.keyframes,u);if(B!==void 0){Ol.update(()=>{g.onUpdate(B),g.onComplete()});return}}return u.isSync?new JN(g):new Yfe(g)};function AAe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function V$(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;n&&(o=n);const i=[],m=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const C=t.getValue(g,t.latestValues[g]??null),B=u[g];if(B===void 0||m&&AAe(m,g))continue;const S={delay:r,...tF(o||{},g)},P=C.get();if(P!==void 0&&!C.isAnimating&&!Array.isArray(B)&&B===P&&!S.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const F=H$(t);if(F){const R=window.MotionHandoffAnimation(F,g,Ol);R!==null&&(S.startTime=R,j=!0)}}k6(t,g),C.start(fF(g,C,B,t.shouldReduceMotion&&v$.has(g)?{type:!1}:S,t,j));const D=C.animation;D&&i.push(D)}return c&&Promise.all(i).then(()=>{Ol.update(()=>{c&&sAe(t,c)})}),i}function D6(t,e,r={}){var i;const n=k_(t,e,r.type==="exit"?(i=t.presenceContext)==null?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const o=n?()=>Promise.all(V$(t,n,r)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:C,staggerDirection:B}=s;return mAe(t,e,g+m,C,B,r)}:()=>Promise.resolve(),{when:u}=s;if(u){const[m,g]=u==="beforeChildren"?[o,c]:[c,o];return m().then(()=>g())}else return Promise.all([o(),c(r.delay)])}function mAe(t,e,r=0,n=0,s=1,o){const c=[],u=(t.variantChildren.size-1)*n,i=s===1?(m=0)=>m*n:(m=0)=>u-m*n;return Array.from(t.variantChildren).sort(gAe).forEach((m,g)=>{m.notify("AnimationStart",e),c.push(D6(m,e,{...o,delay:r+i(g)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(c)}function gAe(t,e){return t.sortNodePosition(e)}function yAe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(o=>D6(t,o,r));n=Promise.all(s)}else if(typeof e=="string")n=D6(t,e,r);else{const s=typeof e=="function"?k_(t,e,r.custom):e;n=Promise.all(V$(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function G$(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const vAe=oF.length;function $$(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?$$(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<vAe;r++){const n=oF[r],s=t.props[n];(j_(s)||s===!1)&&(e[n]=s)}return e}const xAe=[...sF].reverse(),_Ae=sF.length;function bAe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>yAe(t,r,n)))}function wAe(t){let e=bAe(t),r=AR(),n=!0;const s=i=>(m,g)=>{var B;const C=k_(t,g,i==="exit"?(B=t.presenceContext)==null?void 0:B.custom:void 0);if(C){const{transition:S,transitionEnd:P,...j}=C;m={...m,...j,...P}}return m};function o(i){e=i(t)}function c(i){const{props:m}=t,g=$$(t.parent)||{},C=[],B=new Set;let S={},P=1/0;for(let D=0;D<_Ae;D++){const F=xAe[D],R=r[F],V=m[F]!==void 0?m[F]:g[F],Y=j_(V),te=F===i?R.isActive:null;te===!1&&(P=D);let se=V===g[F]&&V!==m[F]&&Y;if(se&&n&&t.manuallyAnimateOnMount&&(se=!1),R.protectedKeys={...S},!R.isActive&&te===null||!V&&!R.prevProp||SC(V)||typeof V=="boolean")continue;const oe=CAe(R.prevProp,V);let K=oe||F===i&&R.isActive&&!se&&Y||D>P&&Y,de=!1;const we=Array.isArray(V)?V:[V];let J=we.reduce(s(F),{});te===!1&&(J={});const{prevResolvedValues:Z={}}=R,Ie={...Z,...J},be=ve=>{K=!0,B.has(ve)&&(de=!0,B.delete(ve)),R.needsAnimating[ve]=!0;const _e=t.getValue(ve);_e&&(_e.liveStyle=!1)};for(const ve in Ie){const _e=J[ve],ze=Z[ve];if(S.hasOwnProperty(ve))continue;let Ne=!1;M6(_e)&&M6(ze)?Ne=!G$(_e,ze):Ne=_e!==ze,Ne?_e!=null?be(ve):B.add(ve):_e!==void 0&&B.has(ve)?be(ve):R.protectedKeys[ve]=!0}R.prevProp=V,R.prevResolvedValues=J,R.isActive&&(S={...S,...J}),n&&t.blockInitialAnimation&&(K=!1),K&&(!(se&&oe)||de)&&C.push(...we.map(ve=>({animation:ve,options:{type:F}})))}if(B.size){const D={};if(typeof m.initial!="boolean"){const F=k_(t,Array.isArray(m.initial)?m.initial[0]:m.initial);F&&F.transition&&(D.transition=F.transition)}B.forEach(F=>{const R=t.getBaseTarget(F),V=t.getValue(F);V&&(V.liveStyle=!0),D[F]=R??null}),C.push({animation:D})}let j=!!C.length;return n&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(j=!1),n=!1,j?e(C):Promise.resolve()}function u(i,m){var C;if(r[i].isActive===m)return Promise.resolve();(C=t.variantChildren)==null||C.forEach(B=>{var S;return(S=B.animationState)==null?void 0:S.setActive(i,m)}),r[i].isActive=m;const g=c(i);for(const B in r)r[B].protectedKeys={};return g}return{animateChanges:c,setActive:u,setAnimateFunction:o,getState:()=>r,reset:()=>{r=AR(),n=!0}}}function CAe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!G$(e,t):!1}function Eg(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function AR(){return{animate:Eg(!0),whileInView:Eg(),whileHover:Eg(),whileTap:Eg(),whileDrag:Eg(),whileFocus:Eg(),exit:Eg()}}class lg{constructor(e){this.isMounted=!1,this.node=e}update(){}}class SAe extends lg{constructor(e){super(e),e.animationState||(e.animationState=wAe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();SC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let BAe=0;class EAe extends lg{constructor(){super(...arguments),this.id=BAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const TAe={animation:{Feature:SAe},exit:{Feature:EAe}};function D_(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function cb(t){return{point:{x:t.pageX,y:t.pageY}}}const LAe=t=>e=>iF(e)&&t(e,cb(e));function Ux(t,e,r,n){return D_(t,e,LAe(r),n)}function q$({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function IAe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function NAe(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}const W$=1e-4,FAe=1-W$,PAe=1+W$,K$=.01,jAe=0-K$,MAe=0+K$;function vd(t){return t.max-t.min}function kAe(t,e,r){return Math.abs(t-e)<=r}function mR(t,e,r,n=.5){t.origin=n,t.originPoint=kl(e.min,e.max,t.origin),t.scale=vd(r)/vd(e),t.translate=kl(r.min,r.max,t.origin)-t.originPoint,(t.scale>=FAe&&t.scale<=PAe||isNaN(t.scale))&&(t.scale=1),(t.translate>=jAe&&t.translate<=MAe||isNaN(t.translate))&&(t.translate=0)}function zx(t,e,r,n){mR(t.x,e.x,r.x,n?n.originX:void 0),mR(t.y,e.y,r.y,n?n.originY:void 0)}function gR(t,e,r){t.min=r.min+e.min,t.max=t.min+vd(e)}function DAe(t,e,r){gR(t.x,e.x,r.x),gR(t.y,e.y,r.y)}function yR(t,e,r){t.min=e.min-r.min,t.max=t.min+vd(e)}function Qx(t,e,r){yR(t.x,e.x,r.x),yR(t.y,e.y,r.y)}const vR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oy=()=>({x:vR(),y:vR()}),xR=()=>({min:0,max:0}),pc=()=>({x:xR(),y:xR()});function Qh(t){return[t("x"),t("y")]}function r3(t){return t===void 0||t===1}function O6({scale:t,scaleX:e,scaleY:r}){return!r3(t)||!r3(e)||!r3(r)}function kg(t){return O6(t)||X$(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function X$(t){return _R(t.x)||_R(t.y)}function _R(t){return t&&t!=="0%"}function b4(t,e,r){const n=t-r,s=e*n;return r+s}function bR(t,e,r,n,s){return s!==void 0&&(t=b4(t,s,n)),b4(t,r,n)+e}function R6(t,e=0,r=1,n,s){t.min=bR(t.min,e,r,n,s),t.max=bR(t.max,e,r,n,s)}function Y$(t,{x:e,y:r}){R6(t.x,e.translate,e.scale,e.originPoint),R6(t.y,r.translate,r.scale,r.originPoint)}const wR=.999999999999,CR=1.0000000000001;function OAe(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let o,c;for(let u=0;u<s;u++){o=r[u],c=o.projectionDelta;const{visualElement:i}=o.options;i&&i.props.style&&i.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Uy(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,Y$(t,c)),n&&kg(o.latestValues)&&Uy(t,o.latestValues))}e.x<CR&&e.x>wR&&(e.x=1),e.y<CR&&e.y>wR&&(e.y=1)}function Ry(t,e){t.min=t.min+e,t.max=t.max+e}function SR(t,e,r,n,s=.5){const o=kl(t.min,t.max,s);R6(t,e,r,o,n)}function Uy(t,e){SR(t.x,e.x,e.scaleX,e.scale,e.originX),SR(t.y,e.y,e.scaleY,e.scale,e.originY)}function Z$(t,e){return q$(NAe(t.getBoundingClientRect(),e))}function RAe(t,e,r){const n=Z$(t,r),{scroll:s}=e;return s&&(Ry(n.x,s.offset.x),Ry(n.y,s.offset.y)),n}const J$=({current:t})=>t?t.ownerDocument.defaultView:null,BR=(t,e)=>Math.abs(t-e);function UAe(t,e){const r=BR(t.x,e.x),n=BR(t.y,e.y);return Math.sqrt(r**2+n**2)}class eq{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=i3(this.lastMoveEventInfo,this.history),B=this.startEvent!==null,S=UAe(C.offset,{x:0,y:0})>=3;if(!B&&!S)return;const{point:P}=C,{timestamp:j}=fu;this.history.push({...P,timestamp:j});const{onStart:D,onMove:F}=this.handlers;B||(D&&D(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,C)},this.handlePointerMove=(C,B)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=n3(B,this.transformPagePoint),Ol.update(this.updatePoint,!0)},this.handlePointerUp=(C,B)=>{this.end();const{onEnd:S,onSessionEnd:P,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=i3(C.type==="pointercancel"?this.lastMoveEventInfo:n3(B,this.transformPagePoint),this.history);this.startEvent&&S&&S(C,D),P&&P(C,D)},!iF(e))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const c=cb(e),u=n3(c,this.transformPagePoint),{point:i}=u,{timestamp:m}=fu;this.history=[{...i,timestamp:m}];const{onSessionStart:g}=r;g&&g(e,i3(u,this.history)),this.removeListeners=ob(Ux(this.contextWindow,"pointermove",this.handlePointerMove),Ux(this.contextWindow,"pointerup",this.handlePointerUp),Ux(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qm(this.updatePoint)}}function n3(t,e){return e?{point:e(t.point)}:t}function ER(t,e){return{x:t.x-e.x,y:t.y-e.y}}function i3({point:t},e){return{point:t,delta:ER(t,tq(e)),offset:ER(t,zAe(e)),velocity:QAe(e,.1)}}function zAe(t){return t[0]}function tq(t){return t[t.length-1]}function QAe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=tq(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>_p(e)));)r--;if(!n)return{x:0,y:0};const o=bp(s.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const c={x:(s.x-n.x)/o,y:(s.y-n.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function HAe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?kl(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?kl(r,t,n.max):Math.min(t,r)),t}function TR(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function VAe(t,{top:e,left:r,bottom:n,right:s}){return{x:TR(t.x,r,s),y:TR(t.y,e,n)}}function LR(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function GAe(t,e){return{x:LR(t.x,e.x),y:LR(t.y,e.y)}}function $Ae(t,e){let r=.5;const n=vd(t),s=vd(e);return s>n?r=N_(e.min,e.max-n,t.min):n>s&&(r=N_(t.min,t.max-s,e.min)),AA(0,1,r)}function qAe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const U6=.35;function WAe(t=U6){return t===!1?t=0:t===!0&&(t=U6),{x:IR(t,"left","right"),y:IR(t,"top","bottom")}}function IR(t,e,r){return{min:NR(t,e),max:NR(t,r)}}function NR(t,e){return typeof t=="number"?t:t[e]||0}const KAe=new WeakMap;class XAe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pc(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(cb(g).point)},o=(g,C)=>{const{drag:B,dragPropagation:S,onDragStart:P}=this.getProps();if(B&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fpe(B),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qh(D=>{let F=this.getAxisMotionValue(D).get()||0;if(wp.test(F)){const{projection:R}=this.visualElement;if(R&&R.layout){const V=R.layout.layoutBox[D];V&&(F=vd(V)*(parseFloat(F)/100))}}this.originPoint[D]=F}),P&&Ol.postRender(()=>P(g,C)),k6(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},c=(g,C)=>{const{dragPropagation:B,dragDirectionLock:S,onDirectionLock:P,onDrag:j}=this.getProps();if(!B&&!this.openDragLock)return;const{offset:D}=C;if(S&&this.currentDirection===null){this.currentDirection=YAe(D),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",C.point,D),this.updateAxis("y",C.point,D),this.visualElement.render(),j&&j(g,C)},u=(g,C)=>this.stop(g,C),i=()=>Qh(g=>{var C;return this.getAnimationState(g)==="paused"&&((C=this.getAxisMotionValue(g).animation)==null?void 0:C.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new eq(e,{onSessionStart:s,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:i},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:J$(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Ol.postRender(()=>o(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!s2(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(c=HAe(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&Dy(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=VAe(n.layoutBox,e):this.constraints=!1,this.elastic=WAe(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Qh(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=qAe(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Dy(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=RAe(n,s.root,this.visualElement.getTransformPagePoint());let c=GAe(s.layout.layoutBox,o);if(r){const u=r(IAe(c));this.hasMutatedConstraints=!!u,u&&(c=q$(u))}return c}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),i=this.constraints||{},m=Qh(g=>{if(!s2(g,r,this.currentDirection))return;let C=i&&i[g]||{};c&&(C={min:0,max:0});const B=s?200:1e6,S=s?40:1e7,P={type:"inertia",velocity:n?e[g]:0,bounceStiffness:B,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...C};return this.startAxisValueAnimation(g,P)});return Promise.all(m).then(u)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return k6(this.visualElement,e),n.start(fF(e,n,0,r,this.visualElement,!1))}stopAnimation(){Qh(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qh(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Qh(r=>{const{drag:n}=this.getProps();if(!s2(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(r);if(s&&s.layout){const{min:c,max:u}=s.layout.layoutBox[r];o.set(e[r]-kl(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Dy(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qh(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const i=u.get();s[c]=$Ae({min:i,max:i},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Qh(c=>{if(!s2(c,e,null))return;const u=this.getAxisMotionValue(c),{min:i,max:m}=this.constraints[c];u.set(kl(i,m,s[c]))})}addListeners(){if(!this.visualElement.current)return;KAe.set(this.visualElement,this);const e=this.visualElement.current,r=Ux(e,"pointerdown",i=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(i)}),n=()=>{const{dragConstraints:i}=this.getProps();Dy(i)&&i.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ol.read(n);const c=D_(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:i,hasLayoutChanged:m})=>{this.isDragging&&m&&(Qh(g=>{const C=this.getAxisMotionValue(g);C&&(this.originPoint[g]+=i[g].translate,C.set(C.get()+i[g].translate))}),this.visualElement.render())});return()=>{c(),r(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:c=U6,dragMomentum:u=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:o,dragElastic:c,dragMomentum:u}}}function s2(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function YAe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class ZAe extends lg{constructor(e){super(e),this.removeGroupControls=Jh,this.removeListeners=Jh,this.controls=new XAe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jh}unmount(){this.removeGroupControls(),this.removeListeners()}}const FR=t=>(e,r)=>{t&&Ol.postRender(()=>t(e,r))};class JAe extends lg{constructor(){super(...arguments),this.removePointerDownListener=Jh}onPointerDown(e){this.session=new eq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:J$(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:FR(e),onStart:FR(r),onMove:n,onEnd:(o,c)=>{delete this.session,s&&Ol.postRender(()=>s(o,c))}}}mount(){this.removePointerDownListener=Ux(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const m5={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Qv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ps.test(t))t=parseFloat(t);else return t;const r=PR(t,e.target.x),n=PR(t,e.target.y);return`${r}% ${n}%`}},eme={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=Wm.parse(t);if(s.length>5)return n;const o=Wm.createTransformer(t),c=typeof s[0]!="number"?1:0,u=r.x.scale*e.x,i=r.y.scale*e.y;s[0+c]/=u,s[1+c]/=i;const m=kl(u,i,.5);return typeof s[2+c]=="number"&&(s[2+c]/=m),typeof s[3+c]=="number"&&(s[3+c]/=m),o(s)}};class tme extends Ae.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:o}=e;Rpe(rme),o&&(r.group&&r.group.add(o),n&&n.register&&s&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),m5.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:o}=this.props,{projection:c}=n;return c&&(c.isPresent=o,s||e.layoutDependency!==r||r===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||Ol.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nF.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rq(t){const[e,r]=bpe(),n=Ae.useContext(OG);return p.jsx(tme,{...t,layoutGroup:n,switchLayoutGroup:Ae.useContext(j$),isPresent:e,safeToRemove:r})}const rme={borderRadius:{...Qv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qv,borderTopRightRadius:Qv,borderBottomLeftRadius:Qv,borderBottomRightRadius:Qv,boxShadow:eme};function nme(t,e,r){const n=Ju(t)?t:v1(t);return n.start(fF("",n,e,r)),n.animation}const ime=(t,e)=>t.depth-e.depth;class sme{constructor(){this.children=[],this.isDirty=!1}add(e){RN(this.children,e),this.isDirty=!0}remove(e){UN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ime),this.isDirty=!1,this.children.forEach(e)}}function ome(t,e){const r=Hd.now(),n=({timestamp:s})=>{const o=s-r;o>=e&&(qm(n),t(o-e))};return Ol.setup(n,!0),()=>qm(n)}const nq=["TopLeft","TopRight","BottomLeft","BottomRight"],ame=nq.length,jR=t=>typeof t=="string"?parseFloat(t):t,MR=t=>typeof t=="number"||ps.test(t);function lme(t,e,r,n,s,o){s?(t.opacity=kl(0,r.opacity??1,cme(n)),t.opacityExit=kl(e.opacity??1,0,ume(n))):o&&(t.opacity=kl(e.opacity??1,r.opacity??1,n));for(let c=0;c<ame;c++){const u=`border${nq[c]}Radius`;let i=kR(e,u),m=kR(r,u);if(i===void 0&&m===void 0)continue;i||(i=0),m||(m=0),i===0||m===0||MR(i)===MR(m)?(t[u]=Math.max(kl(jR(i),jR(m),n),0),(wp.test(m)||wp.test(i))&&(t[u]+="%")):t[u]=m}(e.rotate||r.rotate)&&(t.rotate=kl(e.rotate||0,r.rotate||0,n))}function kR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const cme=iq(0,.5,KG),ume=iq(.5,.95,Jh);function iq(t,e,r){return n=>n<t?0:n>e?1:r(N_(t,e,n))}function DR(t,e){t.min=e.min,t.max=e.max}function Uh(t,e){DR(t.x,e.x),DR(t.y,e.y)}function OR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function RR(t,e,r,n,s){return t-=e,t=b4(t,1/r,n),s!==void 0&&(t=b4(t,1/s,n)),t}function dme(t,e=0,r=1,n=.5,s,o=t,c=t){if(wp.test(e)&&(e=parseFloat(e),e=kl(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=kl(o.min,o.max,n);t===o&&(u-=e),t.min=RR(t.min,e,r,u,s),t.max=RR(t.max,e,r,u,s)}function UR(t,e,[r,n,s],o,c){dme(t,e[r],e[n],e[s],e.scale,o,c)}const hme=["x","scaleX","originX"],fme=["y","scaleY","originY"];function zR(t,e,r,n){UR(t.x,e,hme,r?r.x:void 0,n?n.x:void 0),UR(t.y,e,fme,r?r.y:void 0,n?n.y:void 0)}function QR(t){return t.translate===0&&t.scale===1}function sq(t){return QR(t.x)&&QR(t.y)}function HR(t,e){return t.min===e.min&&t.max===e.max}function pme(t,e){return HR(t.x,e.x)&&HR(t.y,e.y)}function VR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function oq(t,e){return VR(t.x,e.x)&&VR(t.y,e.y)}function GR(t){return vd(t.x)/vd(t.y)}function $R(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Ame{constructor(){this.members=[]}add(e){RN(this.members,e),e.scheduleRender()}remove(e){if(UN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mme(t,e,r){let n="";const s=t.x.translate/e.x,o=t.y.translate/e.y,c=(r==null?void 0:r.z)||0;if((s||o||c)&&(n=`translate3d(${s}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:m,rotate:g,rotateX:C,rotateY:B,skewX:S,skewY:P}=r;m&&(n=`perspective(${m}px) ${n}`),g&&(n+=`rotate(${g}deg) `),C&&(n+=`rotateX(${C}deg) `),B&&(n+=`rotateY(${B}deg) `),S&&(n+=`skewX(${S}deg) `),P&&(n+=`skewY(${P}deg) `)}const u=t.x.scale*e.x,i=t.y.scale*e.y;return(u!==1||i!==1)&&(n+=`scale(${u}, ${i})`),n||"none"}const s3=["","X","Y","Z"],gme={visibility:"hidden"},yme=1e3;let vme=0;function o3(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function aq(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=H$(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Ol,!(s||o))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&aq(n)}function lq({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(c={},u=e==null?void 0:e()){this.id=vme++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bme),this.nodes.forEach(Eme),this.nodes.forEach(Tme),this.nodes.forEach(wme)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let i=0;i<this.path.length;i++)this.path[i].shouldResetTransform=!0;this.root===this&&(this.nodes=new sme)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new QN),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const i=this.eventHandlers.get(c);i&&i.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=T$(c)&&!vpe(c),this.instance=c;const{layoutId:u,layout:i,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||u)&&(this.isLayoutDirty=!0),t){let g;const C=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=ome(C,250),m5.hasAnimatedSinceResize&&(m5.hasAnimatedSinceResize=!1,this.nodes.forEach(WR))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&m&&(u||i)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:C,hasRelativeLayoutChanged:B,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||m.getDefaultTransition()||Pme,{onLayoutAnimationStart:j,onLayoutAnimationComplete:D}=m.getProps(),F=!this.targetLayout||!oq(this.targetLayout,S),R=!C&&B;if(this.options.layoutRoot||this.resumeFrom||R||C&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,R);const V={...tF(P,"layout"),onPlay:j,onComplete:D};(m.shouldReduceMotion||this.options.layoutRoot)&&(V.delay=0,V.type=!1),this.startAnimation(V)}else C||WR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qm(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Lme),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aq(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const C=this.path[g];C.shouldResetTransform=!0,C.updateScroll("snapshot"),C.options.layoutRoot&&C.willUpdate(!1)}const{layoutId:u,layout:i}=this.options;if(u===void 0&&!i)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qR);return}this.isUpdating||this.nodes.forEach(Sme),this.isUpdating=!1,this.nodes.forEach(Bme),this.nodes.forEach(xme),this.nodes.forEach(_me),this.clearAllSnapshots();const u=Hd.now();fu.delta=AA(0,1e3/60,u-fu.timestamp),fu.timestamp=u,fu.isProcessing=!0,XE.update.process(fu),XE.preRender.process(fu),XE.render.process(fu),fu.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nF.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cme),this.sharedNodes.forEach(Ime)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ol.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ol.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vd(this.snapshot.measuredBox.x)&&!vd(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let i=0;i<this.path.length;i++)this.path[i].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pc(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const i=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:i,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:i}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!sq(this.projectionDelta),i=this.getTransformTemplate(),m=i?i(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(u||kg(this.latestValues)||g)&&(s(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let i=this.removeElementScroll(u);return c&&(i=this.removeTransform(i)),jme(i),{animationId:this.root.animationId,measuredBox:u,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return pc();const u=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(Mme))){const{scroll:g}=this.root;g&&(Ry(u.x,g.offset.x),Ry(u.y,g.offset.y))}return u}removeElementScroll(c){var i;const u=pc();if(Uh(u,c),(i=this.scroll)!=null&&i.wasRoot)return u;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:C,options:B}=g;g!==this.root&&C&&B.layoutScroll&&(C.wasRoot&&Uh(u,c),Ry(u.x,C.offset.x),Ry(u.y,C.offset.y))}return u}applyTransform(c,u=!1){const i=pc();Uh(i,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Uy(i,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),kg(g.latestValues)&&Uy(i,g.latestValues)}return kg(this.latestValues)&&Uy(i,this.latestValues),i}removeTransform(c){const u=pc();Uh(u,c);for(let i=0;i<this.path.length;i++){const m=this.path[i];if(!m.instance||!kg(m.latestValues))continue;O6(m.latestValues)&&m.updateSnapshot();const g=pc(),C=m.measurePageBox();Uh(g,C),zR(u,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return kg(this.latestValues)&&zR(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fu.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var B;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const i=!!this.resumingFrom||this!==u;if(!(c||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(B=this.parent)!=null&&B.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:C}=this.options;if(!(!this.layout||!(g||C))){if(this.resolvedRelativeTargetAt=fu.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pc(),this.relativeTargetOrigin=pc(),Qx(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Uh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pc(),this.targetWithTransforms=pc()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Uh(this.target,this.layout.layoutBox),Y$(this.target,this.targetDelta)):Uh(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pc(),this.relativeTargetOrigin=pc(),Qx(this.relativeTargetOrigin,this.target,S.target),Uh(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||O6(this.parent.latestValues)||X$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var P;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let i=!0;if((this.isProjectionDirty||(P=this.parent)!=null&&P.isProjectionDirty)&&(i=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===fu.timestamp&&(i=!1),i)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;Uh(this.layoutCorrected,this.layout.layoutBox);const C=this.treeScale.x,B=this.treeScale.y;OAe(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pc());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OR(this.prevProjectionDelta.x,this.projectionDelta.x),OR(this.prevProjectionDelta.y,this.projectionDelta.y)),zx(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==C||this.treeScale.y!==B||!$R(this.projectionDelta.x,this.prevProjectionDelta.x)||!$R(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const i=this.getStack();i&&i.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oy(),this.projectionDelta=Oy(),this.projectionDeltaWithTransform=Oy()}setAnimationOrigin(c,u=!1){const i=this.snapshot,m=i?i.latestValues:{},g={...this.latestValues},C=Oy();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const B=pc(),S=i?i.source:void 0,P=this.layout?this.layout.source:void 0,j=S!==P,D=this.getStack(),F=!D||D.members.length<=1,R=!!(j&&!F&&this.options.crossfade===!0&&!this.path.some(Fme));this.animationProgress=0;let V;this.mixTargetDelta=Y=>{const te=Y/1e3;KR(C.x,c.x,te),KR(C.y,c.y,te),this.setTargetDelta(C),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qx(B,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Nme(this.relativeTarget,this.relativeTargetOrigin,B,te),V&&pme(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=pc()),Uh(V,this.relativeTarget)),j&&(this.animationValues=g,lme(g,m,this.latestValues,te,R,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,i,m;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(!1),(m=(i=this.resumingFrom)==null?void 0:i.currentAnimation)==null||m.stop(!1),this.pendingAnimation&&(qm(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ol.update(()=>{m5.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=v1(0)),this.currentAnimation=nme(this.motionValue,[0,1e3],{...c,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yme),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:i,layout:m,latestValues:g}=c;if(!(!u||!i||!m)){if(this!==c&&this.layout&&m&&cq(this.options.animationType,this.layout.layoutBox,m.layoutBox)){i=this.target||pc();const C=vd(this.layout.layoutBox.x);i.x.min=c.target.x.min,i.x.max=i.x.min+C;const B=vd(this.layout.layoutBox.y);i.y.min=c.target.y.min,i.y.max=i.y.min+B}Uh(u,i),Uy(u,g),zx(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new Ame),this.sharedNodes.get(c).add(u);const m=u.options.initialPromotionConfig;u.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:i}={}){const m=this.getStack();m&&m.promote(this,i),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:i}=c;if((i.z||i.rotate||i.rotateX||i.rotateY||i.rotateZ||i.skewX||i.skewY)&&(u=!0),!u)return;const m={};i.z&&o3("z",c,m,this.animationValues);for(let g=0;g<s3.length;g++)o3(`rotate${s3[g]}`,c,m,this.animationValues),o3(`skew${s3[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}getProjectionStyles(c){if(!this.instance||this.isSVG)return;if(!this.isVisible)return gme;const u={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=A5(c==null?void 0:c.pointerEvents)||"",u.transform=i?i(this.latestValues,""):"none",u;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=A5(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!kg(this.latestValues)&&(S.transform=i?i({},""):"none",this.hasProjected=!1),S}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),u.transform=mme(this.projectionDeltaWithTransform,this.treeScale,g),i&&(u.transform=i(g,u.transform));const{x:C,y:B}=this.projectionDelta;u.transformOrigin=`${C.origin*100}% ${B.origin*100}% 0`,m.animationValues?u.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const S in M_){if(g[S]===void 0)continue;const{correct:P,applyTo:j,isCSSVariable:D}=M_[S],F=u.transform==="none"?g[S]:P(g[S],m);if(j){const R=j.length;for(let V=0;V<R;V++)u[j[V]]=F}else D?this.options.visualElement.renderState.vars[S]=F:u[S]=F}return this.options.layoutId&&(u.pointerEvents=m===this?A5(c==null?void 0:c.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop(!1)}),this.root.nodes.forEach(qR),this.root.sharedNodes.clear()}}}function xme(t){t.updateLayout()}function _me(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:o}=t.options,c=e.source!==t.layout.source;o==="size"?Qh(C=>{const B=c?e.measuredBox[C]:e.layoutBox[C],S=vd(B);B.min=n[C].min,B.max=B.min+S}):cq(o,e.layoutBox,n)&&Qh(C=>{const B=c?e.measuredBox[C]:e.layoutBox[C],S=vd(n[C]);B.max=B.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[C].max=t.relativeTarget[C].min+S)});const u=Oy();zx(u,n,e.layoutBox);const i=Oy();c?zx(i,t.applyTransform(s,!0),e.measuredBox):zx(i,n,e.layoutBox);const m=!sq(u);let g=!1;if(!t.resumeFrom){const C=t.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:B,layout:S}=C;if(B&&S){const P=pc();Qx(P,e.layoutBox,B.layoutBox);const j=pc();Qx(j,n,S.layoutBox),oq(P,j)||(g=!0),C.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=P,t.relativeParent=C)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:i,layoutDelta:u,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function bme(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wme(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Cme(t){t.clearSnapshot()}function qR(t){t.clearMeasurements()}function Sme(t){t.isLayoutDirty=!1}function Bme(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function WR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Eme(t){t.resolveTargetDelta()}function Tme(t){t.calcProjection()}function Lme(t){t.resetSkewAndRotation()}function Ime(t){t.removeLeadSnapshot()}function KR(t,e,r){t.translate=kl(e.translate,0,r),t.scale=kl(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function XR(t,e,r,n){t.min=kl(e.min,r.min,n),t.max=kl(e.max,r.max,n)}function Nme(t,e,r,n){XR(t.x,e.x,r.x,n),XR(t.y,e.y,r.y,n)}function Fme(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Pme={duration:.45,ease:[.4,0,.1,1]},YR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ZR=YR("applewebkit/")&&!YR("chrome/")?Math.round:Jh;function JR(t){t.min=ZR(t.min),t.max=ZR(t.max)}function jme(t){JR(t.x),JR(t.y)}function cq(t,e,r){return t==="position"||t==="preserve-aspect"&&!kAe(GR(e),GR(r),.2)}function Mme(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const kme=lq({attachResizeListener:(t,e)=>D_(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),a3={current:void 0},uq=lq({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!a3.current){const t=new kme({});t.mount(window),t.setOptions({layoutScroll:!0}),a3.current=t}return a3.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Dme={pan:{Feature:JAe},drag:{Feature:ZAe,ProjectionNode:uq,MeasureLayout:rq}};function e7(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,o=n[s];o&&Ol.postRender(()=>o(e,cb(e)))}class Ome extends lg{mount(){const{current:e}=this.node;e&&(this.unmount=ppe(e,(r,n)=>(e7(this.node,n,"Start"),s=>e7(this.node,s,"End"))))}unmount(){}}class Rme extends lg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ob(D_(this.node.current,"focus",()=>this.onFocus()),D_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function t7(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),o=n[s];o&&Ol.postRender(()=>o(e,cb(e)))}class Ume extends lg{mount(){const{current:e}=this.node;e&&(this.unmount=ype(e,(r,n)=>(t7(this.node,n,"Start"),(s,{success:o})=>t7(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const z6=new WeakMap,l3=new WeakMap,zme=t=>{const e=z6.get(t.target);e&&e(t)},Qme=t=>{t.forEach(zme)};function Hme({root:t,...e}){const r=t||document;l3.has(r)||l3.set(r,{});const n=l3.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(Qme,{root:t,...e})),n[s]}function Vme(t,e,r){const n=Hme(e);return z6.set(t,r),n.observe(t),()=>{z6.delete(t),n.unobserve(t)}}const Gme={some:0,all:1};class $me extends lg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:o}=e,c={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Gme[s]},u=i=>{const{isIntersecting:m}=i;if(this.isInView===m||(this.isInView=m,o&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:C}=this.node.getProps(),B=m?g:C;B&&B(i)};return Vme(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(qme(e,r))&&this.startObserver()}unmount(){}}function qme({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Wme={inView:{Feature:$me},tap:{Feature:Ume},focus:{Feature:Rme},hover:{Feature:Ome}},Kme={layout:{ProjectionNode:uq,MeasureLayout:rq}},Q6={current:null},dq={current:!1};function Xme(){if(dq.current=!0,!!DN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Q6.current=t.matches;t.addListener(e),e()}else Q6.current=!1}const Yme=new WeakMap;function Zme(t,e,r){for(const n in e){const s=e[n],o=r[n];if(Ju(s))t.addValue(n,s);else if(Ju(o))t.addValue(n,v1(s,{owner:t}));else if(o!==s)if(t.hasValue(n)){const c=t.getValue(n);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(n);t.addValue(n,v1(c!==void 0?c:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const r7=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jme{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:o,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eF,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const B=Hd.now();this.renderScheduledAt<B&&(this.renderScheduledAt=B,Ol.render(this.render,!1,!0))};const{latestValues:i,renderState:m}=c;this.latestValues=i,this.baseTarget={...i},this.initialValues=r.initial?{...i}:{},this.renderState=m,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=BC(r),this.isVariantNode=F$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...C}=this.scrapeMotionValuesFromProps(r,{},this);for(const B in C){const S=C[B];i[B]!==void 0&&Ju(S)&&S.set(i[B],!1)}}mount(e){this.current=e,Yme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),dq.current||Xme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Q6.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),qm(this.notifyUpdate),qm(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=M1.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Ol.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),o(),c&&c(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in x1){const r=x1[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pc()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<r7.length;n++){const s=r7[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,c=e[o];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=Zme(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=v1(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(RG(n)||zG(n))?n=parseFloat(n):!_pe(n)&&Wm.test(r)&&(n=w$(e,r)),this.setBaseTarget(e,Ju(n)?n.get():n)),Ju(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var o;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const c=dF(this.props,r,(o=this.presenceContext)==null?void 0:o.custom);c&&(n=c[e])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ju(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new QN),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class hq extends Jme{constructor(){super(...arguments),this.KeyframeResolver=cpe}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ju(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function fq(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const o in r)t.style.setProperty(o,r[o])}function ege(t){return window.getComputedStyle(t)}class tge extends hq{constructor(){super(...arguments),this.type="html",this.renderInstance=fq}readValueFromInstance(e,r){var n;if(M1.has(r))return(n=this.projection)!=null&&n.isProjecting?L6(r):Tfe(e,r);{const s=ege(e),o=(GN(r)?s.getPropertyValue(r):s[r])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Z$(e,r)}build(e,r,n){lF(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return hF(e,r,n)}}const pq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rge(t,e,r,n){fq(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(pq.has(s)?s:aF(s),e.attrs[s])}class nge extends hq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pc}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(M1.has(r)){const n=b$(r);return n&&n.default||0}return r=pq.has(r)?r:aF(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Q$(e,r,n)}build(e,r,n){O$(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,s){rge(e,r,n,s)}mount(e){this.isSVGTag=U$(e.tagName),super.mount(e)}}const ige=(t,e)=>uF(t)?new nge(e):new tge(e,{allowProjection:t!==Ae.Fragment}),sge=rAe({...TAe,...Wme,...Dme,...Kme},ige),oA=Epe(sge);function c3(t){return vs({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"},child:[]}]})(t)}const oge="/assets/bg-CXlWhlXB.jpg",n7=({text:t,className:e})=>p.jsx("span",{children:t.split("").map((r,n)=>p.jsx(oA.span,{className:e,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.05},children:r},n))}),age=()=>p.jsxs("div",{className:"relative bg-gradient-to-br from-purple-500 via-pink-500 to-blue-500 text-gray-100 min-h-screen flex flex-col",children:[p.jsx(lge,{}),p.jsx(cge,{}),p.jsx(uge,{})]}),lge=()=>p.jsxs("header",{className:"relative h-screen",children:[p.jsx("img",{src:oge,alt:"Agriculture Background",className:"w-full h-full object-cover mix-blend-overlay"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-700 via-transparent to-blue-800 opacity-80"}),p.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-center px-8 md:px-16",children:[p.jsx(oA.h1,{className:"text-7xl font-extrabold mb-6 text-white drop-shadow-lg",children:p.jsx(n7,{text:"Welcome to the Agriyields Traceability Portal"})}),p.jsx(oA.p,{className:"text-3xl max-w-2xl mb-8 text-gray-200 drop-shadow-md",children:p.jsx(n7,{text:"Data-driven monitoring and insights for your area of interest using satellite imagery and crop yield forecasts."})}),p.jsxs("div",{className:"flex space-x-6",children:[p.jsx(d3,{href:"/login",bgColor:"bg-gradient-to-r from-indigo-500 to-blue-500",hoverColor:"bg-gradient-to-r from-indigo-600 to-blue-600",icon:p.jsx(mne,{className:"w-6 h-6 mr-2 text-white"}),label:"Login"}),p.jsx(d3,{href:"/contactus",bgColor:"bg-gradient-to-r from-orange-400 to-red-400",hoverColor:"bg-gradient-to-r from-orange-500 to-red-500",icon:p.jsx(f1,{className:"w-6 h-6 mr-2 text-white"}),label:"Contact Us"}),p.jsx(d3,{href:"/signup",bgColor:"bg-gradient-to-r from-teal-500 to-green-500",hoverColor:"bg-gradient-to-r from-teal-600 to-green-600",icon:p.jsx(_ne,{className:"w-6 h-6 mr-2 text-white"}),label:"Sign Up"})]})]})]}),cge=()=>p.jsxs("main",{className:"flex-1 bg-gradient-to-tl from-white via-blue-50 to-pink-50 p-8 md:p-16",children:[p.jsx(i7,{title:"Get Started",children:p.jsx("p",{className:"text-center text-xl text-gray-700",children:"Join us in transforming the way you manage your farm. Explore the features and benefits today!"})}),p.jsx(i7,{title:"Why Choose Us?",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsx(u3,{title:"Forest Management",description:"Monitor crop growth and yields efficiently with real-time data.",icon:p.jsx(c3,{className:"w-12 h-12 text-green-500 mb-4"})}),p.jsx(u3,{title:"Digital Trace ID",description:"Easily generate QR codes for your produce and track inventory.",icon:p.jsx(c3,{className:"w-12 h-12 text-pink-500 mb-4"})}),p.jsx(u3,{title:"Farm Management",description:"Stay on top of your farms productivity with detailed yield reports.",icon:p.jsx(c3,{className:"w-12 h-12 text-blue-500 mb-4"})})]})})]}),u3=({title:t,description:e,icon:r})=>p.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 transition-transform duration-300 hover:shadow-xl hover:scale-105 flex flex-col items-center text-center",children:[r,p.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:t}),p.jsx("p",{className:"text-gray-600",children:e})]}),i7=({title:t,children:e})=>p.jsxs("section",{className:"mb-16",children:[p.jsx("h2",{className:"text-5xl font-semibold text-center text-blue-800 mb-10 drop-shadow-lg",children:t}),p.jsx("div",{className:"bg-white shadow-2xl rounded-lg p-10 transition duration-300 transform hover:scale-105",children:e})]}),d3=({href:t,bgColor:e,hoverColor:r,icon:n,label:s})=>p.jsxs(oA.a,{href:t,className:`flex items-center ${e} text-white px-6 py-3 rounded-full shadow-lg transition transform hover:${r} hover:scale-105`,whileHover:{scale:1.1},whileTap:{scale:.95},children:[n,s]}),uge=()=>p.jsx("footer",{className:"bg-gray-900 text-white py-8 mt-8 text-center",children:p.jsx("p",{children:" 2024 Agriyields Traceability Portal. All rights reserved."})});var ec={},pF={},ub={},db={},Aq="Expected a function",s7=NaN,dge="[object Symbol]",hge=/^\s+|\s+$/g,fge=/^[-+]0x[0-9a-f]+$/i,pge=/^0b[01]+$/i,Age=/^0o[0-7]+$/i,mge=parseInt,gge=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,yge=typeof self=="object"&&self&&self.Object===Object&&self,vge=gge||yge||Function("return this")(),xge=Object.prototype,_ge=xge.toString,bge=Math.max,wge=Math.min,h3=function(){return vge.Date.now()};function Cge(t,e,r){var n,s,o,c,u,i,m=0,g=!1,C=!1,B=!0;if(typeof t!="function")throw new TypeError(Aq);e=o7(e)||0,w4(r)&&(g=!!r.leading,C="maxWait"in r,o=C?bge(o7(r.maxWait)||0,e):o,B="trailing"in r?!!r.trailing:B);function S(se){var oe=n,K=s;return n=s=void 0,m=se,c=t.apply(K,oe),c}function P(se){return m=se,u=setTimeout(F,e),g?S(se):c}function j(se){var oe=se-i,K=se-m,de=e-oe;return C?wge(de,o-K):de}function D(se){var oe=se-i,K=se-m;return i===void 0||oe>=e||oe<0||C&&K>=o}function F(){var se=h3();if(D(se))return R(se);u=setTimeout(F,j(se))}function R(se){return u=void 0,B&&n?S(se):(n=s=void 0,c)}function V(){u!==void 0&&clearTimeout(u),m=0,n=i=s=u=void 0}function Y(){return u===void 0?c:R(h3())}function te(){var se=h3(),oe=D(se);if(n=arguments,s=this,i=se,oe){if(u===void 0)return P(i);if(C)return u=setTimeout(F,e),S(i)}return u===void 0&&(u=setTimeout(F,e)),c}return te.cancel=V,te.flush=Y,te}function Sge(t,e,r){var n=!0,s=!0;if(typeof t!="function")throw new TypeError(Aq);return w4(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),Cge(t,e,{leading:n,maxWait:e,trailing:s})}function w4(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Bge(t){return!!t&&typeof t=="object"}function Ege(t){return typeof t=="symbol"||Bge(t)&&_ge.call(t)==dge}function o7(t){if(typeof t=="number")return t;if(Ege(t))return s7;if(w4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=w4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(hge,"");var r=pge.test(t);return r||Age.test(t)?mge(t.slice(2),r?2:8):fge.test(t)?s7:+t}var Tge=Sge,hb={};Object.defineProperty(hb,"__esModule",{value:!0});hb.addPassiveEventListener=function(e,r,n){var s=n.name;s||(s=r,console.warn("Listener must be a named function.")),g5.has(r)||g5.set(r,new Set);var o=g5.get(r);if(!o.has(s)){var c=function(){var u=!1;try{var i=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,i)}catch{}return u}();e.addEventListener(r,n,c?{passive:!0}:!1),o.add(s)}};hb.removePassiveEventListener=function(e,r,n){e.removeEventListener(r,n),g5.get(r).delete(n.name||r)};var g5=new Map;Object.defineProperty(db,"__esModule",{value:!0});var Lge=Tge,Ige=Nge(Lge),a7=hb;function Nge(t){return t&&t.__esModule?t:{default:t}}var Fge=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,Ige.default)(e,r)},Pl={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,r){if(e){var n=Fge(function(s){Pl.scrollHandler(e)},r);return Pl.scrollSpyContainers.push(e),(0,a7.addPassiveEventListener)(e,"scroll",n),function(){(0,a7.removePassiveEventListener)(e,"scroll",n),Pl.scrollSpyContainers.splice(Pl.scrollSpyContainers.indexOf(e),1)}}return function(){}},isMounted:function(e){return Pl.scrollSpyContainers.indexOf(e)!==-1},currentPositionX:function(e){if(e===document){var r=window.scrollY!==void 0,n=(document.compatMode||"")==="CSS1Compat";return r?window.scrollX:n?document.documentElement.scrollLeft:document.body.scrollLeft}else return e.scrollLeft},currentPositionY:function(e){if(e===document){var r=window.scrollX!==void 0,n=(document.compatMode||"")==="CSS1Compat";return r?window.scrollY:n?document.documentElement.scrollTop:document.body.scrollTop}else return e.scrollTop},scrollHandler:function(e){var r=Pl.scrollSpyContainers[Pl.scrollSpyContainers.indexOf(e)].spyCallbacks||[];r.forEach(function(n){return n(Pl.currentPositionX(e),Pl.currentPositionY(e))})},addStateHandler:function(e){Pl.spySetState.push(e)},addSpyHandler:function(e,r){var n=Pl.scrollSpyContainers[Pl.scrollSpyContainers.indexOf(r)];n.spyCallbacks||(n.spyCallbacks=[]),n.spyCallbacks.push(e)},updateStates:function(){Pl.spySetState.forEach(function(e){return e()})},unmount:function(e,r){Pl.scrollSpyContainers.forEach(function(n){return n.spyCallbacks&&n.spyCallbacks.length&&n.spyCallbacks.indexOf(r)>-1&&n.spyCallbacks.splice(n.spyCallbacks.indexOf(r),1)}),Pl.spySetState&&Pl.spySetState.length&&Pl.spySetState.indexOf(e)>-1&&Pl.spySetState.splice(Pl.spySetState.indexOf(e),1),document.removeEventListener("scroll",Pl.scrollHandler)},update:function(){return Pl.scrollSpyContainers.forEach(function(e){return Pl.scrollHandler(e)})}};db.default=Pl;var k1={},fb={};Object.defineProperty(fb,"__esModule",{value:!0});var Pge=function(e,r){var n=e.indexOf("#")===0?e.substring(1):e,s=n?"#"+n:"",o=window&&window.location,c=s?o.pathname+o.search+s:o.pathname+o.search;r?history.pushState(history.state,"",c):history.replaceState(history.state,"",c)},jge=function(){return window.location.hash.replace(/^#/,"")},Mge=function(e){return function(r){return e.contains?e!=r&&e.contains(r):!!(e.compareDocumentPosition(r)&16)}},kge=function(e){return getComputedStyle(e).position!=="static"},f3=function(e,r){for(var n=e.offsetTop,s=e.offsetParent;s&&!r(s);)n+=s.offsetTop,s=s.offsetParent;return{offsetTop:n,offsetParent:s}},Dge=function(e,r,n){if(n)return e===document?r.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(e).position!=="static"?r.offsetLeft:r.offsetLeft-e.offsetLeft;if(e===document)return r.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(kge(e)){if(r.offsetParent!==e){var s=function(g){return g===e||g===document},o=f3(r,s),c=o.offsetTop,u=o.offsetParent;if(u!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return c}return r.offsetTop}if(r.offsetParent===e.offsetParent)return r.offsetTop-e.offsetTop;var i=function(g){return g===document};return f3(r,i).offsetTop-f3(e,i).offsetTop};fb.default={updateHash:Pge,getHash:jge,filterElementInContainer:Mge,scrollOffset:Dge};var EC={},AF={};Object.defineProperty(AF,"__esModule",{value:!0});AF.default={defaultEasing:function(e){return e<.5?Math.pow(e*2,2)/2:1-Math.pow((1-e)*2,2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var mF={};Object.defineProperty(mF,"__esModule",{value:!0});var Oge=hb,Rge=["mousedown","wheel","touchmove","keydown"];mF.default={subscribe:function(e){return typeof document<"u"&&Rge.forEach(function(r){return(0,Oge.addPassiveEventListener)(document,r,e)})}};var pb={};Object.defineProperty(pb,"__esModule",{value:!0});var H6={registered:{},scrollEvent:{register:function(e,r){H6.registered[e]=r},remove:function(e){H6.registered[e]=null}}};pb.default=H6;Object.defineProperty(EC,"__esModule",{value:!0});var Uge=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zge=fb;TC(zge);var Qge=AF,l7=TC(Qge),Hge=mF,Vge=TC(Hge),Gge=pb,fp=TC(Gge);function TC(t){return t&&t.__esModule?t:{default:t}}var mq=function(e){return l7.default[e.smooth]||l7.default.defaultEasing},$ge=function(e){return typeof e=="function"?e:function(){return e}},qge=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},V6=function(){return qge()||function(t,e,r){window.setTimeout(t,r||1e3/60,new Date().getTime())}}(),gq=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},yq=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollLeft;var n=window.pageXOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return n?window.pageXOffset:s?document.documentElement.scrollLeft:document.body.scrollLeft},vq=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollTop;var n=window.pageXOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return n?window.pageYOffset:s?document.documentElement.scrollTop:document.body.scrollTop},Wge=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollWidth-r.offsetWidth;var n=document.body,s=document.documentElement;return Math.max(n.scrollWidth,n.offsetWidth,s.clientWidth,s.scrollWidth,s.offsetWidth)},Kge=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollHeight-r.offsetHeight;var n=document.body,s=document.documentElement;return Math.max(n.scrollHeight,n.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight)},Xge=function t(e,r,n){var s=r.data;if(!r.ignoreCancelEvents&&s.cancel){fp.default.registered.end&&fp.default.registered.end(s.to,s.target,s.currentPositionY);return}if(s.delta=Math.round(s.targetPosition-s.startPosition),s.start===null&&(s.start=n),s.progress=n-s.start,s.percent=s.progress>=s.duration?1:e(s.progress/s.duration),s.currentPosition=s.startPosition+Math.ceil(s.delta*s.percent),s.containerElement&&s.containerElement!==document&&s.containerElement!==document.body?r.horizontal?s.containerElement.scrollLeft=s.currentPosition:s.containerElement.scrollTop=s.currentPosition:r.horizontal?window.scrollTo(s.currentPosition,0):window.scrollTo(0,s.currentPosition),s.percent<1){var o=t.bind(null,e,r);V6.call(window,o);return}fp.default.registered.end&&fp.default.registered.end(s.to,s.target,s.currentPosition)},gF=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},Ab=function(e,r,n,s){r.data=r.data||gq(),window.clearTimeout(r.data.delayTimeout);var o=function(){r.data.cancel=!0};if(Vge.default.subscribe(o),gF(r),r.data.start=null,r.data.cancel=!1,r.data.startPosition=r.horizontal?yq(r):vq(r),r.data.targetPosition=r.absolute?e:e+r.data.startPosition,r.data.startPosition===r.data.targetPosition){fp.default.registered.end&&fp.default.registered.end(r.data.to,r.data.target,r.data.currentPosition);return}r.data.delta=Math.round(r.data.targetPosition-r.data.startPosition),r.data.duration=$ge(r.duration)(r.data.delta),r.data.duration=isNaN(parseFloat(r.data.duration))?1e3:parseFloat(r.data.duration),r.data.to=n,r.data.target=s;var c=mq(r),u=Xge.bind(null,c,r);if(r&&r.delay>0){r.data.delayTimeout=window.setTimeout(function(){fp.default.registered.begin&&fp.default.registered.begin(r.data.to,r.data.target),V6.call(window,u)},r.delay);return}fp.default.registered.begin&&fp.default.registered.begin(r.data.to,r.data.target),V6.call(window,u)},LC=function(e){return e=Uge({},e),e.data=e.data||gq(),e.absolute=!0,e},Yge=function(e){Ab(0,LC(e))},Zge=function(e,r){Ab(e,LC(r))},Jge=function(e){e=LC(e),gF(e),Ab(e.horizontal?Wge(e):Kge(e),e)},e0e=function(e,r){r=LC(r),gF(r);var n=r.horizontal?yq(r):vq(r);Ab(e+n,r)};EC.default={animateTopScroll:Ab,getAnimationType:mq,scrollToTop:Yge,scrollToBottom:Jge,scrollTo:Zge,scrollMore:e0e};Object.defineProperty(k1,"__esModule",{value:!0});var t0e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r0e=fb,n0e=yF(r0e),i0e=EC,s0e=yF(i0e),o0e=pb,o2=yF(o0e);function yF(t){return t&&t.__esModule?t:{default:t}}var a2={},c7=void 0;k1.default={unmount:function(){a2={}},register:function(e,r){a2[e]=r},unregister:function(e){delete a2[e]},get:function(e){return a2[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return c7=e},getActiveLink:function(){return c7},scrollTo:function(e,r){var n=this.get(e);if(!n){console.warn("target Element not found");return}r=t0e({},r,{absolute:!1});var s=r.containerId,o=r.container,c=void 0;s?c=document.getElementById(s):o&&o.nodeType?c=o:c=document,r.absolute=!0;var u=r.horizontal,i=n0e.default.scrollOffset(c,n,u)+(r.offset||0);if(!r.smooth){o2.default.registered.begin&&o2.default.registered.begin(e,n),c===document?r.horizontal?window.scrollTo(i,0):window.scrollTo(0,i):c.scrollTop=i,o2.default.registered.end&&o2.default.registered.end(e,n);return}s0e.default.animateTopScroll(i,r,e,n)}};var xq={exports:{}},a0e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",l0e=a0e,c0e=l0e;function _q(){}function bq(){}bq.resetWarningCache=_q;var u0e=function(){function t(n,s,o,c,u,i){if(i!==c0e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:bq,resetWarningCache:_q};return r.PropTypes=r,r};xq.exports=u0e();var N0=xq.exports;const l2=Bp(N0);var IC={};Object.defineProperty(IC,"__esModule",{value:!0});var d0e=fb,p3=h0e(d0e);function h0e(t){return t&&t.__esModule?t:{default:t}}var f0e={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,r){this.containers[e]=r},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,r=this.getHash();r?window.setTimeout(function(){e.scrollTo(r,!0),e.initialized=!0},10):this.initialized=!0},scrollTo:function(e,r){var n=this.scroller,s=n.get(e);if(s&&(r||e!==n.getActiveLink())){var o=this.containers[e]||document;n.scrollTo(e,{container:o})}},getHash:function(){return p3.default.getHash()},changeHash:function(e,r){this.isInitialized()&&p3.default.getHash()!==e&&p3.default.updateHash(e,r)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};IC.default=f0e;Object.defineProperty(ub,"__esModule",{value:!0});var c2=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),A0e=Ae,u7=mb(A0e),m0e=db,u2=mb(m0e),g0e=k1,y0e=mb(g0e),v0e=N0,_l=mb(v0e),x0e=IC,VA=mb(x0e);function mb(t){return t&&t.__esModule?t:{default:t}}function _0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function w0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d7={to:_l.default.string.isRequired,containerId:_l.default.string,container:_l.default.object,activeClass:_l.default.string,activeStyle:_l.default.object,spy:_l.default.bool,horizontal:_l.default.bool,smooth:_l.default.oneOfType([_l.default.bool,_l.default.string]),offset:_l.default.number,delay:_l.default.number,isDynamic:_l.default.bool,onClick:_l.default.func,duration:_l.default.oneOfType([_l.default.number,_l.default.func]),absolute:_l.default.bool,onSetActive:_l.default.func,onSetInactive:_l.default.func,ignoreCancelEvents:_l.default.bool,hashSpy:_l.default.bool,saveHashHistory:_l.default.bool,spyThrottle:_l.default.number};ub.default=function(t,e){var r=e||y0e.default,n=function(o){w0e(c,o);function c(u){_0e(this,c);var i=b0e(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return s.call(i),i.state={active:!1},i.beforeUnmountCallbacks=[],i}return p0e(c,[{key:"getScrollSpyContainer",value:function(){var i=this.props.containerId,m=this.props.container;return i&&!m?document.getElementById(i):m&&m.nodeType?m:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var i=this.getScrollSpyContainer();if(!u2.default.isMounted(i)){var m=u2.default.mount(i,this.props.spyThrottle);this.beforeUnmountCallbacks.push(m)}this.props.hashSpy&&(VA.default.isMounted()||VA.default.mount(r),VA.default.mapContainer(this.props.to,i)),u2.default.addSpyHandler(this.spyHandler,i),this.setState({container:i})}}},{key:"componentWillUnmount",value:function(){u2.default.unmount(this.stateHandler,this.spyHandler),this.beforeUnmountCallbacks.forEach(function(i){return i()})}},{key:"render",value:function(){var i="";this.state&&this.state.active?i=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():i=this.props.className;var m={};this.state&&this.state.active?m=c2({},this.props.style,this.props.activeStyle):m=c2({},this.props.style);var g=c2({},this.props);for(var C in d7)g.hasOwnProperty(C)&&delete g[C];return g.className=i,g.style=m,g.onClick=this.handleClick,u7.default.createElement(t,g)}}]),c}(u7.default.PureComponent),s=function(){var c=this;this.scrollTo=function(u,i){r.scrollTo(u,c2({},c.state,i))},this.handleClick=function(u){c.props.onClick&&c.props.onClick(u),u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault(),c.scrollTo(c.props.to,c.props)},this.spyHandler=function(u,i){var m=c.getScrollSpyContainer();if(!(VA.default.isMounted()&&!VA.default.isInitialized())){var g=c.props.horizontal,C=c.props.to,B=null,S=void 0,P=void 0;if(g){var j=0,D=0,F=0;if(m.getBoundingClientRect){var R=m.getBoundingClientRect();F=R.left}if(!B||c.props.isDynamic){if(B=r.get(C),!B)return;var V=B.getBoundingClientRect();j=V.left-F+u,D=j+V.width}var Y=u-c.props.offset;S=Y>=Math.floor(j)&&Y<Math.floor(D),P=Y<Math.floor(j)||Y>=Math.floor(D)}else{var te=0,se=0,oe=0;if(m.getBoundingClientRect){var K=m.getBoundingClientRect();oe=K.top}if(!B||c.props.isDynamic){if(B=r.get(C),!B)return;var de=B.getBoundingClientRect();te=de.top-oe+i,se=te+de.height}var we=i-c.props.offset;S=we>=Math.floor(te)&&we<Math.floor(se),P=we<Math.floor(te)||we>=Math.floor(se)}var J=r.getActiveLink();if(P){if(C===J&&r.setActiveLink(void 0),c.props.hashSpy&&VA.default.getHash()===C){var Z=c.props.saveHashHistory,Ie=Z===void 0?!1:Z;VA.default.changeHash("",Ie)}c.props.spy&&c.state.active&&(c.setState({active:!1}),c.props.onSetInactive&&c.props.onSetInactive(C,B))}if(S&&(J!==C||c.state.active===!1)){r.setActiveLink(C);var be=c.props.saveHashHistory,He=be===void 0?!1:be;c.props.hashSpy&&VA.default.changeHash(C,He),c.props.spy&&(c.setState({active:!0}),c.props.onSetActive&&c.props.onSetActive(C,B))}}}};return n.propTypes=d7,n.defaultProps={offset:0},n};Object.defineProperty(pF,"__esModule",{value:!0});var C0e=Ae,h7=wq(C0e),S0e=ub,B0e=wq(S0e);function wq(t){return t&&t.__esModule?t:{default:t}}function E0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function T0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var L0e=function(t){T0e(e,t);function e(){var r,n,s,o;E0e(this,e);for(var c=arguments.length,u=Array(c),i=0;i<c;i++)u[i]=arguments[i];return o=(n=(s=f7(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(u))),s),s.render=function(){return h7.default.createElement("a",s.props,s.props.children)},n),f7(s,o)}return e}(h7.default.Component);pF.default=(0,B0e.default)(L0e);var vF={};Object.defineProperty(vF,"__esModule",{value:!0});var I0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),N0e=Ae,p7=Cq(N0e),F0e=ub,P0e=Cq(F0e);function Cq(t){return t&&t.__esModule?t:{default:t}}function j0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function k0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var D0e=function(t){k0e(e,t);function e(){return j0e(this,e),M0e(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return I0e(e,[{key:"render",value:function(){return p7.default.createElement("button",this.props,this.props.children)}}]),e}(p7.default.Component);vF.default=(0,P0e.default)(D0e);var xF={},NC={};Object.defineProperty(NC,"__esModule",{value:!0});var O0e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),U0e=Ae,A7=FC(U0e),z0e=cC;FC(z0e);var Q0e=k1,m7=FC(Q0e),H0e=N0,g7=FC(H0e);function FC(t){return t&&t.__esModule?t:{default:t}}function V0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}NC.default=function(t){var e=function(r){$0e(n,r);function n(s){V0e(this,n);var o=G0e(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,s));return o.childBindings={domNode:null},o}return R0e(n,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(o){this.props.name!==o.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;m7.default.unregister(this.props.name)}},{key:"registerElems",value:function(o){m7.default.register(o,this.childBindings.domNode)}},{key:"render",value:function(){return A7.default.createElement(t,O0e({},this.props,{parentBindings:this.childBindings}))}}]),n}(A7.default.Component);return e.propTypes={name:g7.default.string,id:g7.default.string},e};Object.defineProperty(xF,"__esModule",{value:!0});var y7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},q0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),W0e=Ae,v7=_F(W0e),K0e=NC,X0e=_F(K0e),Y0e=N0,x7=_F(Y0e);function _F(t){return t&&t.__esModule?t:{default:t}}function Z0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function eye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Sq=function(t){eye(e,t);function e(){return Z0e(this,e),J0e(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return q0e(e,[{key:"render",value:function(){var n=this,s=y7({},this.props);return delete s.name,s.parentBindings&&delete s.parentBindings,v7.default.createElement("div",y7({},s,{ref:function(c){n.props.parentBindings.domNode=c}}),this.props.children)}}]),e}(v7.default.Component);Sq.propTypes={name:x7.default.string,id:x7.default.string};xF.default=(0,X0e.default)(Sq);var A3=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_7=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function b7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function C7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d2=Ae,Tg=db,m3=k1,jl=N0,GA=IC,S7={to:jl.string.isRequired,containerId:jl.string,container:jl.object,activeClass:jl.string,spy:jl.bool,smooth:jl.oneOfType([jl.bool,jl.string]),offset:jl.number,delay:jl.number,isDynamic:jl.bool,onClick:jl.func,duration:jl.oneOfType([jl.number,jl.func]),absolute:jl.bool,onSetActive:jl.func,onSetInactive:jl.func,ignoreCancelEvents:jl.bool,hashSpy:jl.bool,spyThrottle:jl.number},tye={Scroll:function(e,r){console.warn("Helpers.Scroll is deprecated since v1.7.0");var n=r||m3,s=function(c){C7(u,c);function u(i){b7(this,u);var m=w7(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,i));return o.call(m),m.state={active:!1},m}return _7(u,[{key:"getScrollSpyContainer",value:function(){var m=this.props.containerId,g=this.props.container;return m?document.getElementById(m):g&&g.nodeType?g:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var m=this.getScrollSpyContainer();Tg.isMounted(m)||Tg.mount(m,this.props.spyThrottle),this.props.hashSpy&&(GA.isMounted()||GA.mount(n),GA.mapContainer(this.props.to,m)),this.props.spy&&Tg.addStateHandler(this.stateHandler),Tg.addSpyHandler(this.spyHandler,m),this.setState({container:m})}}},{key:"componentWillUnmount",value:function(){Tg.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var m="";this.state&&this.state.active?m=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():m=this.props.className;var g=A3({},this.props);for(var C in S7)g.hasOwnProperty(C)&&delete g[C];return g.className=m,g.onClick=this.handleClick,d2.createElement(e,g)}}]),u}(d2.Component),o=function(){var u=this;this.scrollTo=function(i,m){n.scrollTo(i,A3({},u.state,m))},this.handleClick=function(i){u.props.onClick&&u.props.onClick(i),i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),u.scrollTo(u.props.to,u.props)},this.stateHandler=function(){n.getActiveLink()!==u.props.to&&(u.state!==null&&u.state.active&&u.props.onSetInactive&&u.props.onSetInactive(),u.setState({active:!1}))},this.spyHandler=function(i){var m=u.getScrollSpyContainer();if(!(GA.isMounted()&&!GA.isInitialized())){var g=u.props.to,C=null,B=0,S=0,P=0;if(m.getBoundingClientRect){var j=m.getBoundingClientRect();P=j.top}if(!C||u.props.isDynamic){if(C=n.get(g),!C)return;var D=C.getBoundingClientRect();B=D.top-P+i,S=B+D.height}var F=i-u.props.offset,R=F>=Math.floor(B)&&F<Math.floor(S),V=F<Math.floor(B)||F>=Math.floor(S),Y=n.getActiveLink();if(V)return g===Y&&n.setActiveLink(void 0),u.props.hashSpy&&GA.getHash()===g&&GA.changeHash(),u.props.spy&&u.state.active&&(u.setState({active:!1}),u.props.onSetInactive&&u.props.onSetInactive()),Tg.updateStates();if(R&&Y!==g)return n.setActiveLink(g),u.props.hashSpy&&GA.changeHash(g),u.props.spy&&(u.setState({active:!0}),u.props.onSetActive&&u.props.onSetActive(g)),Tg.updateStates()}}};return s.propTypes=S7,s.defaultProps={offset:0},s},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var r=function(n){C7(s,n);function s(o){b7(this,s);var c=w7(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,o));return c.childBindings={domNode:null},c}return _7(s,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(c){this.props.name!==c.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;m3.unregister(this.props.name)}},{key:"registerElems",value:function(c){m3.register(c,this.childBindings.domNode)}},{key:"render",value:function(){return d2.createElement(e,A3({},this.props,{parentBindings:this.childBindings}))}}]),s}(d2.Component);return r.propTypes={name:jl.string,id:jl.string},r}},rye=tye;Object.defineProperty(ec,"__esModule",{value:!0});ec.Helpers=ec.ScrollElement=ec.ScrollLink=ec.animateScroll=ec.scrollSpy=ec.Events=ec.scroller=ec.Element=ec.Button=G6=ec.Link=void 0;var nye=pF,Bq=Ep(nye),iye=vF,Eq=Ep(iye),sye=xF,Tq=Ep(sye),oye=k1,Lq=Ep(oye),aye=pb,Iq=Ep(aye),lye=db,Nq=Ep(lye),cye=EC,Fq=Ep(cye),uye=ub,Pq=Ep(uye),dye=NC,jq=Ep(dye),hye=rye,Mq=Ep(hye);function Ep(t){return t&&t.__esModule?t:{default:t}}var G6=ec.Link=Bq.default;ec.Button=Eq.default;ec.Element=Tq.default;ec.scroller=Lq.default;ec.Events=Iq.default;ec.scrollSpy=Nq.default;ec.animateScroll=Fq.default;ec.ScrollLink=Pq.default;ec.ScrollElement=jq.default;ec.Helpers=Mq.default;ec.default={Link:Bq.default,Button:Eq.default,Element:Tq.default,scroller:Lq.default,Events:Iq.default,scrollSpy:Nq.default,animateScroll:Fq.default,ScrollLink:Pq.default,ScrollElement:jq.default,Helpers:Mq.default};const PC="/assets/parrot-CPW7Bwmu.jpg",fye=()=>(Ae.useEffect(()=>{const t=()=>{const e=window.scrollY,r=document.querySelector(".parallax-background");r&&(r.style.transform=`translateY(${e*.5}px)`)};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]),p.jsxs("div",{className:"bg-gradient-to-br from-green-300 via-teal-100 to-blue-200 min-h-screen font-poppins text-gray-800",children:[p.jsxs("header",{className:"bg-gradient-to-r from-teal-700 to-blue-800 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90",children:[p.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[p.jsx("span",{className:"bg-white p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:p.jsx("img",{src:PC,alt:"Description de l'image",className:"w-16 h-16 rounded-full object-cover"})}),p.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),p.jsxs("nav",{className:"hidden md:flex space-x-8 text-lg font-medium animate-fade-in",children:[p.jsx(G6,{to:"features",smooth:!0,duration:500,offset:-80,className:"cursor-pointer relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Features"}),p.jsx("a",{href:"/sectionfutur",className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"About"},"about"),p.jsx(G6,{to:"contact",smooth:!0,duration:500,offset:-80,className:"cursor-pointer relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Contact"}),p.jsx("a",{href:"/EUDRSubmissionForGuest",className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Resources"},"EUDR"),p.jsx("a",{href:"#",className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Blog"},"#")]}),p.jsx("a",{href:"/login",className:"hidden md:inline-block bg-teal-500 hover:bg-teal-300 text-white font-semibold px-6 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Get Started"})]}),p.jsxs("section",{className:"py-20 bg-gradient-to-tl from-teal-200 to-white text-center animate-gradient",children:[p.jsx("h2",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Welcome to the Agriyields Traceability Portal"}),p.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto mb-8 animate-fade-in-color",children:"Data driven monitoring and insights for your area of interest using next generation satellite imagery."}),p.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-6 items-center",children:[p.jsx("a",{href:"/login",className:"bg-teal-500 hover:bg-teal-600 text-white px-8 py-3 rounded-full shadow-lg text-lg text-center",children:"Get Started"}),p.jsx("a",{href:"/learn-more",className:"bg-white hover:bg-gray-100 text-teal-500 border border-teal-500 px-8 py-3 rounded-full shadow-lg text-lg text-center",children:"Learn More"})]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 mt-12 max-w-6xl mx-auto",children:[{title:"Forest Management",icon:w_,description:"Real time data insights for biodiversity and forestry conservation, antideforestation, afforestation & reforesatation.",bgColor:"bg-gradient-to-br from-blue-100 to-teal-50",iconColor:"text-blue-500"},{title:"Digital Trace ID",icon:oN,description:"Track your produce and inventory, trace supply chains from farm to fork by generating secure digital certificates & stamps.",bgColor:"bg-gradient-to-br from-green-100 to-lime-50",iconColor:"text-green-500"},{title:"Farm Management",icon:vne,description:"Manage and monitor your farms operations with actionable geospatial data insights, monitor crop.",bgColor:"bg-gradient-to-br from-purple-100 to-pink-50",iconColor:"text-purple-500"}].map(({title:t,icon:e,description:r,bgColor:n,iconColor:s},o)=>p.jsxs("div",{className:`${n} rounded-xl shadow-lg p-8 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300`,children:[p.jsx("div",{className:`w-16 h-16 flex items-center justify-center rounded-full shadow-md mb-6 ${s} bg-white`,children:p.jsx(e,{className:"text-3xl"})}),p.jsx("h4",{className:"text-2xl font-bold text-gray-800 mb-4",children:t}),p.jsx("p",{className:"text-gray-600",children:r})]},o))})]}),p.jsxs("section",{id:"features",className:"py-20 bg-gradient-to-br from-teal-50 via-white to-blue-100",children:[p.jsx("h3",{className:"text-4xl font-extrabold text-center text-teal-700 mb-16 animate-fade-in-up",children:"Features"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 max-w-7xl mx-auto px-6",children:[{Icon:FH,title:"Climate",description:"Gain insights into how changing patterns in weather and climate affect your business by conducting area based risk assessments.",color:"bg-purple-400",textColor:"text-purple-600"},{Icon:sN,title:"Environment",description:"Leverage the power of advanced Geospatial data analytics and machine learning to conduct environmental risk assessments and feasibility, EUDR risk assessment & compliance verification with precision and accurancy.",color:"bg-pink-400",textColor:"text-pink-600"},{Icon:w_,title:"Carbon Offset Projects",description:"Contribute to environmental & climate sustainability and the net Zero agenda by managing and tracking carbon and other GHG emissions.",color:"bg-teal-400",textColor:"text-teal-600"},{Icon:iN,title:"Multiple Report",description:"Access detailed reports and analytics for informed decision-making on your farm.",color:"bg-purple-400",textColor:"text-purple-600"}].map(({Icon:t,title:e,description:r,color:n,textColor:s},o)=>p.jsxs("div",{className:"relative bg-white rounded-2xl p-8 shadow-md hover:shadow-2xl hover:scale-105 transition-transform duration-300",children:[p.jsx("div",{className:`${n} text-white w-16 h-16 flex items-center justify-center rounded-full shadow-lg mb-6`,children:p.jsx(t,{className:"text-2xl"})}),p.jsx("h4",{className:`text-2xl font-bold mb-4 animate-fade-in ${s}`,children:e}),p.jsx("p",{className:"text-gray-600 leading-relaxed",children:r})]},o))})]}),p.jsxs("section",{id:"contact",className:"py-20 bg-gradient-to-tl from-teal-200 to-white",children:[p.jsx("h3",{className:"text-4xl font-bold text-center text-teal-700 mb-10",children:"Contact Us"}),p.jsx("p",{className:"text-lg text-gray-600 text-center max-w-3xl mx-auto mb-12",children:"Join the big data revolution, explore and transform the way you do business by reaching out to us."}),p.jsx("div",{className:"flex justify-center gap-8",children:[{label:"Email Us",Icon:f1,href:"/contactus"},{label:"Sign Up",Icon:t4,href:"/signup"}].map(({label:t,Icon:e,href:r},n)=>p.jsxs("a",{href:r,className:"bg-teal-500 text-white px-10 py-3 rounded-full font-medium flex items-center gap-2 shadow-lg hover:bg-teal-700 transition-transform transform hover:scale-105",children:[p.jsx(e,{})," ",t]},n))})]}),p.jsxs("footer",{className:"bg-teal-700 text-white text-center py-4",children:[p.jsxs("p",{children:[" ",new Date().getFullYear(),"  Agriyields traceability portal. All rights reserved."]}),p.jsxs(oA.a,{href:"mailto:lwetutb@gmail.com",className:"text-gray-300 hover:text-gray-200 flex items-center justify-center mt-2",whileHover:{scale:1.1},children:[p.jsx(f1,{className:"w-5 h-5 mr-1"}),"nkusu@agriyields.com"]})]})]})),pye=()=>{const[t,e]=Ae.useState(""),[r,n]=Ae.useState(""),[s,o]=Ae.useState(""),[c,u]=Ae.useState(""),i=og(),m=async g=>{g.preventDefault();try{const C=await Tr.post("/api/login",{email:t,password:r});localStorage.setItem("token",C.data.token),u("Login successful!"),o(""),i("/home")}catch{o("Login failed. Please check your credentials."),u("")}};return p.jsxs("div",{className:"bg-gradient-to-br from-teal-400 via-cyan-300 to-blue-500 min-h-screen flex items-center justify-center p-6 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-5 left-0 right-0 flex justify-center",children:p.jsx(Dd,{size:120,className:"text-white opacity-30 animate-pulse"})}),p.jsx("div",{className:"absolute top-5 left-5 text-white opacity-20 animate-pulse",children:p.jsx(Dd,{size:200})}),p.jsx("div",{className:"absolute top-10 right-5 text-white opacity-10 animate-pulse",children:p.jsx(Dd,{size:150})}),p.jsx("div",{className:"absolute top-20 left-20 text-white opacity-40 animate-pulse",children:p.jsx(Dd,{size:180})}),p.jsx("div",{className:"absolute top-40 left-40 text-white opacity-50 animate-pulse",children:p.jsx(Dd,{size:140})}),p.jsx("div",{className:"absolute bottom-20 right-10 text-white opacity-30 animate-pulse",children:p.jsx(Dd,{size:150})}),p.jsx("div",{className:"absolute bottom-5 right-5 text-white opacity-20 animate-pulse",children:p.jsx(Dd,{size:120})}),p.jsx(oA.div,{className:"bg-white p-10 rounded-3xl shadow-lg w-full max-w-2xl flex overflow-hidden relative z-10",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},children:p.jsxs("div",{className:"w-full p-8",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h1",{className:"text-3xl font-extrabold text-gray-800 mb-2",children:"Login"}),p.jsx("p",{className:"text-gray-600",children:"Enter your credentials to access your account"})]}),p.jsxs("form",{onSubmit:m,children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Email Address:"}),p.jsxs(oA.div,{className:"mt-2 flex items-center border-2 border-gray-300 rounded-lg shadow-sm focus-within:ring-2 focus-within:ring-teal-500 focus-within:border-teal-500 transition duration-150 ease-in-out",whileFocus:{scale:1.02},children:[p.jsx(f1,{className:"mx-3 text-gray-400"}),p.jsx("input",{type:"email",id:"email",name:"email",required:!0,className:"w-full px-4 py-3 focus:outline-none",value:t,onChange:g=>e(g.target.value)})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Password:"}),p.jsxs(oA.div,{className:"mt-2 flex items-center border-2 border-gray-300 rounded-lg shadow-sm focus-within:ring-2 focus-within:ring-teal-500 focus-within:border-teal-500 transition duration-150 ease-in-out",whileFocus:{scale:1.02},children:[p.jsx(pne,{className:"mx-3 text-gray-400"}),p.jsx("input",{type:"password",id:"password",name:"password",required:!0,className:"w-full px-4 py-3 focus:outline-none",value:r,onChange:g=>n(g.target.value)})]})]}),s&&p.jsx("p",{className:"text-red-600 mb-4",children:s}),c&&p.jsx("p",{className:"text-green-600 mb-4",children:c}),p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("button",{type:"submit",className:"bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold px-6 py-2 rounded-lg shadow-md hover:shadow-lg transition duration-300 ease-in-out transform hover:-translate-y-1",children:"Login"}),p.jsx("a",{href:"mailto:lwetutb@gmail.com",className:"text-teal-600 font-semibold hover:text-teal-700 hover:underline transition duration-150 ease-in-out",children:"Contact Us to register"})]}),p.jsx("div",{className:"text-center",children:p.jsx("a",{href:"#",className:"text-teal-600 hover:text-teal-800 hover:underline text-sm",children:"Already have an account? Log in"})})]})]})})]})};class cx extends Error{}cx.prototype.name="InvalidTokenError";function Aye(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function mye(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Aye(e)}catch{return atob(e)}}function gb(t,e){if(typeof t!="string")throw new cx("Invalid token specified: must be a string");e||(e={});const r=e.header===!0?0:1,n=t.split(".")[r];if(typeof n!="string")throw new cx(`Invalid token specified: missing part #${r+1}`);let s;try{s=mye(n)}catch(o){throw new cx(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new cx(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}const gye=()=>{const[t,e]=Ae.useState(null);Ae.useEffect(()=>{var s;const n=localStorage.getItem("token");if(n){const c=((s=gb(n).sub)==null?void 0:s.user_type)||"";e(c)}},[]);const r=[{Icon:w_,title:"Forest Management",description:"Manage and monitor your forest areas efficiently.",textColor:"text-green-700",buttonText:"Manage Forest",color:"bg-teal-500",link:"/forestpage",isBlurred:!(t==="admin"||t==="forest")},{Icon:FH,title:"Weather",description:"Monitor and manage weather data efficiently.",textColor:"text-blue-700",color:"bg-blue-500",buttonText:"View Weather",link:"/weathermap",isBlurred:!(t==="admin"||t==="weather")},{Icon:oN,title:"Digital Trace ID",description:"Generate secure digital marks and certificates.",textColor:"text-indigo-700",color:"bg-indigo-500",buttonText:"Generate Codes",link:"/qr",isBlurred:!1},{Icon:sN,title:"Farm Management",description:"Track and manage your farm data effectively.",textColor:"text-yellow-700",color:"bg-yellow-500",buttonText:"Manage Farm",link:"/farmmanager",isBlurred:!(t==="admin"||t==="farmer")}];return p.jsxs("div",{className:"bg-gradient-to-br from-teal-50 via-green-50 to-yellow-50 min-h-screen font-poppins text-gray-800 relative",children:[p.jsx("div",{className:"absolute top-5 left-5 text-yellow-300 opacity-50 animate-pulse",children:p.jsx(Dd,{size:200})}),p.jsx("div",{className:"absolute top-10 right-5 text-blue-300 opacity-40 animate-pulse",children:p.jsx(Dd,{size:150})}),p.jsx("div",{className:"absolute top-20 left-20 text-white opacity-60 animate-pulse",children:p.jsx(Dd,{size:180})}),p.jsx("div",{className:"absolute top-40 left-40 text-white opacity-50 animate-pulse",children:p.jsx(Dd,{size:140})}),p.jsx("div",{className:"absolute bottom-20 right-10 text-white opacity-60 animate-pulse",children:p.jsx(Dd,{size:150})}),p.jsxs("header",{className:"bg-gradient-to-r from-teal-600 to-blue-700 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90 w-full",children:[p.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[p.jsx("span",{className:"bg-white p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:p.jsx("img",{src:PC,alt:"Nkusu Logo",className:"w-16 h-16 rounded-full object-cover"})}),p.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),p.jsx("nav",{className:"hidden md:flex space-x-8 text-lg font-medium animate-fade-in",children:[{label:"Features",href:"#features"},{label:"Contact",href:"#contact"}].map(({label:n,href:s})=>p.jsx("a",{href:s,className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:n},n))}),p.jsx("a",{href:"/login",className:"hidden md:inline-block bg-teal-600 hover:bg-teal-500 text-white font-semibold px-6 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Get Started"})]}),p.jsxs("div",{className:"text-center max-w-6xl mx-auto mt-10",children:[p.jsx("h2",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Welcome to the Agriyields"}),p.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto mb-8 animate-fade-in-color",children:"Choose an option below to get started:"})]}),p.jsxs("div",{id:"features",className:"pt-24",children:[p.jsx("h2",{className:"text-4xl font-bold text-teal-700 text-center mb-10",children:"Features"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 max-w-4xl mx-auto px-6",children:r.map(({Icon:n,title:s,description:o,textColor:c,buttonText:u,color:i,link:m,isBlurred:g},C)=>p.jsxs("div",{className:`flex flex-col items-center p-6 rounded-lg shadow-lg transition-shadow duration-300 bg-white ${g?"opacity-50 pointer-events-none":"hover:shadow-xl"}`,children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-200 mr-4",children:p.jsx(n,{className:`text-3xl ${c}`})}),p.jsx("h3",{className:`text-xl font-semibold ${c}`,children:s})]}),p.jsx("p",{className:"text-gray-700 text-center mb-4",children:o}),p.jsx("a",{href:m,className:`mt-auto px-4 py-2 text-sm font-semibold text-white rounded ${g?"bg-gray-400":i} ${c}`,children:u})]},C))})]}),p.jsxs("div",{id:"contact",className:"py-20 bg-gradient-to-tl from-teal-200 to-white mt-20",children:[p.jsx("h3",{className:"text-4xl font-bold text-center text-teal-700 mb-10",children:"Contact Us"}),p.jsx("p",{className:"text-lg text-gray-600 text-center max-w-3xl mx-auto mb-12",children:"Have a question or want to get in touch? We'd love to hear from you."}),p.jsxs("div",{className:"flex justify-center gap-8",children:[p.jsxs("a",{href:"mailto:nkusu@agriyields.com",className:"bg-teal-500 text-white px-10 py-3 rounded-full font-medium flex items-center gap-2 shadow-lg hover:bg-teal-700 transition-transform transform hover:scale-105",children:[p.jsx(Dd,{})," Email Us"]}),p.jsxs("a",{href:"/signup",className:"bg-white text-teal-600 border border-teal-500 px-10 py-3 rounded-full font-medium flex items-center gap-2 shadow-lg hover:bg-teal-500 hover:text-white transition-transform transform hover:scale-105",children:[p.jsx(J_,{})," Sign Up"]})]})]})]})};function B7(t){return vs({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"circle",attr:{cx:"10",cy:"8",r:"4"},child:[]},{tag:"path",attr:{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26a6.963 6.963 0 0 1-.59-6.98zM20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(t)}function g3(t){return vs({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"},child:[]}]})(t)}var kq={exports:{}};/*!
* sweetalert2 v11.12.4
* Released under the MIT License.
*/(function(t,e){(function(r,n){t.exports=n()})(Ho,function(){function r(it,ye){(ye==null||ye>it.length)&&(ye=it.length);for(var Oe=0,nt=Array(ye);Oe<ye;Oe++)nt[Oe]=it[Oe];return nt}function n(it){if(Array.isArray(it))return it}function s(it){if(Array.isArray(it))return r(it)}function o(it,ye,Oe){if(typeof it=="function"?it===ye:it.has(ye))return arguments.length<3?ye:Oe;throw new TypeError("Private element is not present on this object")}function c(it){if(it===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return it}function u(it,ye,Oe){return ye=R(ye),de(it,Y()?Reflect.construct(ye,Oe||[],R(it).constructor):ye.apply(it,Oe))}function i(it,ye){if(ye.has(it))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(it,ye){if(!(it instanceof ye))throw new TypeError("Cannot call a class as a function")}function g(it,ye){return it.get(o(it,ye))}function C(it,ye,Oe){i(it,ye),ye.set(it,Oe)}function B(it,ye,Oe){return it.set(o(it,ye),Oe),Oe}function S(it,ye,Oe){if(Y())return Reflect.construct.apply(null,arguments);var nt=[null];nt.push.apply(nt,ye);var Xt=new(it.bind.apply(it,nt));return Xt}function P(it,ye){for(var Oe=0;Oe<ye.length;Oe++){var nt=ye[Oe];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(it,Fe(nt.key),nt)}}function j(it,ye,Oe){return ye&&P(it.prototype,ye),Object.defineProperty(it,"prototype",{writable:!1}),it}function D(it,ye){var Oe=typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(!Oe){if(Array.isArray(it)||(Oe=_e(it))||ye){Oe&&(it=Oe);var nt=0,Xt=function(){};return{s:Xt,n:function(){return nt>=it.length?{done:!0}:{done:!1,value:it[nt++]}},e:function(Di){throw Di},f:Xt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qr,Xn=!0,Si=!1;return{s:function(){Oe=Oe.call(it)},n:function(){var Di=Oe.next();return Xn=Di.done,Di},e:function(Di){Si=!0,Qr=Di},f:function(){try{Xn||Oe.return==null||Oe.return()}finally{if(Si)throw Qr}}}}function F(){return F=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(it,ye,Oe){var nt=Z(it,ye);if(nt){var Xt=Object.getOwnPropertyDescriptor(nt,ye);return Xt.get?Xt.get.call(arguments.length<3?it:Oe):Xt.value}},F.apply(null,arguments)}function R(it){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ye){return ye.__proto__||Object.getPrototypeOf(ye)},R(it)}function V(it,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");it.prototype=Object.create(ye&&ye.prototype,{constructor:{value:it,writable:!0,configurable:!0}}),Object.defineProperty(it,"prototype",{writable:!1}),ye&&we(it,ye)}function Y(){try{var it=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y=function(){return!!it})()}function te(it){if(typeof Symbol<"u"&&it[Symbol.iterator]!=null||it["@@iterator"]!=null)return Array.from(it)}function se(it,ye){var Oe=it==null?null:typeof Symbol<"u"&&it[Symbol.iterator]||it["@@iterator"];if(Oe!=null){var nt,Xt,Qr,Xn,Si=[],Di=!0,Hs=!1;try{if(Qr=(Oe=Oe.call(it)).next,ye!==0)for(;!(Di=(nt=Qr.call(Oe)).done)&&(Si.push(nt.value),Si.length!==ye);Di=!0);}catch(Oc){Hs=!0,Xt=Oc}finally{try{if(!Di&&Oe.return!=null&&(Xn=Oe.return(),Object(Xn)!==Xn))return}finally{if(Hs)throw Xt}}return Si}}function oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(it,ye){if(ye&&(typeof ye=="object"||typeof ye=="function"))return ye;if(ye!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(it)}function we(it,ye){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Oe,nt){return Oe.__proto__=nt,Oe},we(it,ye)}function J(it,ye){return n(it)||se(it,ye)||_e(it,ye)||oe()}function Z(it,ye){for(;!{}.hasOwnProperty.call(it,ye)&&(it=R(it))!==null;);return it}function Ie(it,ye,Oe,nt){var Xt=F(R(it.prototype),ye,Oe);return function(Qr){return Xt.apply(Oe,Qr)}}function be(it){return s(it)||te(it)||_e(it)||K()}function He(it,ye){if(typeof it!="object"||!it)return it;var Oe=it[Symbol.toPrimitive];if(Oe!==void 0){var nt=Oe.call(it,ye);if(typeof nt!="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(it)}function Fe(it){var ye=He(it,"string");return typeof ye=="symbol"?ye:ye+""}function ve(it){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ye){return typeof ye}:function(ye){return ye&&typeof Symbol=="function"&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye},ve(it)}function _e(it,ye){if(it){if(typeof it=="string")return r(it,ye);var Oe={}.toString.call(it).slice(8,-1);return Oe==="Object"&&it.constructor&&(Oe=it.constructor.name),Oe==="Map"||Oe==="Set"?Array.from(it):Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe)?r(it,ye):void 0}}var ze=100,Ne={},st=function(){Ne.previousActiveElement instanceof HTMLElement?(Ne.previousActiveElement.focus(),Ne.previousActiveElement=null):document.body&&document.body.focus()},ie=function(ye){return new Promise(function(Oe){if(!ye)return Oe();var nt=window.scrollX,Xt=window.scrollY;Ne.restoreFocusTimeout=setTimeout(function(){st(),Oe()},ze),window.scrollTo(nt,Xt)})},le="swal2-",pe=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],fe=pe.reduce(function(it,ye){return it[ye]=le+ye,it},{}),Qe=["success","warning","info","question","error"],Ke=Qe.reduce(function(it,ye){return it[ye]=le+ye,it},{}),et="SweetAlert2:",tt=function(ye){return ye.charAt(0).toUpperCase()+ye.slice(1)},bt=function(ye){console.warn("".concat(et," ").concat(ve(ye)==="object"?ye.join(" "):ye))},De=function(ye){console.error("".concat(et," ").concat(ye))},Mt=[],ir=function(ye){Mt.includes(ye)||(Mt.push(ye),bt(ye))},Ar=function(ye){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ir('"'.concat(ye,'" is deprecated and will be removed in the next major release.').concat(Oe?' Use "'.concat(Oe,'" instead.'):""))},Ze=function(ye){return typeof ye=="function"?ye():ye},Ue=function(ye){return ye&&typeof ye.toPromise=="function"},hr=function(ye){return Ue(ye)?ye.toPromise():Promise.resolve(ye)},Dt=function(ye){return ye&&Promise.resolve(ye)===ye},vt=function(){return document.body.querySelector(".".concat(fe.container))},Kt=function(ye){var Oe=vt();return Oe?Oe.querySelector(ye):null},rr=function(ye){return Kt(".".concat(ye))},nr=function(){return rr(fe.popup)},Nr=function(){return rr(fe.icon)},on=function(){return rr(fe["icon-content"])},Ir=function(){return rr(fe.title)},cn=function(){return rr(fe["html-container"])},Sn=function(){return rr(fe.image)},Ln=function(){return rr(fe["progress-steps"])},ln=function(){return rr(fe["validation-message"])},ar=function(){return Kt(".".concat(fe.actions," .").concat(fe.confirm))},Yt=function(){return Kt(".".concat(fe.actions," .").concat(fe.cancel))},Gr=function(){return Kt(".".concat(fe.actions," .").concat(fe.deny))},Wr=function(){return rr(fe["input-label"])},On=function(){return Kt(".".concat(fe.loader))},mn=function(){return rr(fe.actions)},Hn=function(){return rr(fe.footer)},Vi=function(){return rr(fe["timer-progress-bar"])},Bn=function(){return rr(fe.close)},jn=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Dn=function(){var ye=nr();if(!ye)return[];var Oe=ye.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),nt=Array.from(Oe).sort(function(Xn,Si){var Di=parseInt(Xn.getAttribute("tabindex")||"0"),Hs=parseInt(Si.getAttribute("tabindex")||"0");return Di>Hs?1:Di<Hs?-1:0}),Xt=ye.querySelectorAll(jn),Qr=Array.from(Xt).filter(function(Xn){return Xn.getAttribute("tabindex")!=="-1"});return be(new Set(nt.concat(Qr))).filter(function(Xn){return Lr(Xn)})},Gi=function(){return un(document.body,fe.shown)&&!un(document.body,fe["toast-shown"])&&!un(document.body,fe["no-backdrop"])},Rn=function(){var ye=nr();return ye?un(ye,fe.toast):!1},Zr=function(){var ye=nr();return ye?ye.hasAttribute("data-loading"):!1},Pr=function(ye,Oe){if(ye.textContent="",Oe){var nt=new DOMParser,Xt=nt.parseFromString(Oe,"text/html"),Qr=Xt.querySelector("head");Qr&&Array.from(Qr.childNodes).forEach(function(Si){ye.appendChild(Si)});var Xn=Xt.querySelector("body");Xn&&Array.from(Xn.childNodes).forEach(function(Si){Si instanceof HTMLVideoElement||Si instanceof HTMLAudioElement?ye.appendChild(Si.cloneNode(!0)):ye.appendChild(Si)})}},un=function(ye,Oe){if(!Oe)return!1;for(var nt=Oe.split(/\s+/),Xt=0;Xt<nt.length;Xt++)if(!ye.classList.contains(nt[Xt]))return!1;return!0},Ii=function(ye,Oe){Array.from(ye.classList).forEach(function(nt){!Object.values(fe).includes(nt)&&!Object.values(Ke).includes(nt)&&!Object.values(Oe.showClass||{}).includes(nt)&&ye.classList.remove(nt)})},ri=function(ye,Oe,nt){if(Ii(ye,Oe),!!Oe.customClass){var Xt=Oe.customClass[nt];if(Xt){if(typeof Xt!="string"&&!Xt.forEach){bt("Invalid type of customClass.".concat(nt,'! Expected string or iterable object, got "').concat(ve(Xt),'"'));return}pt(ye,Xt)}}},ur=function(ye,Oe){if(!Oe)return null;switch(Oe){case"select":case"textarea":case"file":return ye.querySelector(".".concat(fe.popup," > .").concat(fe[Oe]));case"checkbox":return ye.querySelector(".".concat(fe.popup," > .").concat(fe.checkbox," input"));case"radio":return ye.querySelector(".".concat(fe.popup," > .").concat(fe.radio," input:checked"))||ye.querySelector(".".concat(fe.popup," > .").concat(fe.radio," input:first-child"));case"range":return ye.querySelector(".".concat(fe.popup," > .").concat(fe.range," input"));default:return ye.querySelector(".".concat(fe.popup," > .").concat(fe.input))}},We=function(ye){if(ye.focus(),ye.type!=="file"){var Oe=ye.value;ye.value="",ye.value=Oe}},qe=function(ye,Oe,nt){!ye||!Oe||(typeof Oe=="string"&&(Oe=Oe.split(/\s+/).filter(Boolean)),Oe.forEach(function(Xt){Array.isArray(ye)?ye.forEach(function(Qr){nt?Qr.classList.add(Xt):Qr.classList.remove(Xt)}):nt?ye.classList.add(Xt):ye.classList.remove(Xt)}))},pt=function(ye,Oe){qe(ye,Oe,!0)},Lt=function(ye,Oe){qe(ye,Oe,!1)},Ct=function(ye,Oe){for(var nt=Array.from(ye.children),Xt=0;Xt<nt.length;Xt++){var Qr=nt[Xt];if(Qr instanceof HTMLElement&&un(Qr,Oe))return Qr}},kt=function(ye,Oe,nt){nt==="".concat(parseInt(nt))&&(nt=parseInt(nt)),nt||parseInt(nt)===0?ye.style.setProperty(Oe,typeof nt=="number"?"".concat(nt,"px"):nt):ye.style.removeProperty(Oe)},Wt=function(ye){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";ye&&(ye.style.display=Oe)},Rt=function(ye){ye&&(ye.style.display="none")},fr=function(ye){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";ye&&new MutationObserver(function(){pr(ye,ye.innerHTML,Oe)}).observe(ye,{childList:!0,subtree:!0})},xr=function(ye,Oe,nt,Xt){var Qr=ye.querySelector(Oe);Qr&&Qr.style.setProperty(nt,Xt)},pr=function(ye,Oe){var nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";Oe?Wt(ye,nt):Rt(ye)},Lr=function(ye){return!!(ye&&(ye.offsetWidth||ye.offsetHeight||ye.getClientRects().length))},rn=function(){return!Lr(ar())&&!Lr(Gr())&&!Lr(Yt())},sn=function(ye){return ye.scrollHeight>ye.clientHeight},_n=function(ye){var Oe=window.getComputedStyle(ye),nt=parseFloat(Oe.getPropertyValue("animation-duration")||"0"),Xt=parseFloat(Oe.getPropertyValue("transition-duration")||"0");return nt>0||Xt>0},Un=function(ye){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,nt=Vi();nt&&Lr(nt)&&(Oe&&(nt.style.transition="none",nt.style.width="100%"),setTimeout(function(){nt.style.transition="width ".concat(ye/1e3,"s linear"),nt.style.width="0%"},10))},qn=function(){var ye=Vi();if(ye){var Oe=parseInt(window.getComputedStyle(ye).width);ye.style.removeProperty("transition"),ye.style.width="100%";var nt=parseInt(window.getComputedStyle(ye).width),Xt=Oe/nt*100;ye.style.width="".concat(Xt,"%")}},Wn=function(){return typeof window>"u"||typeof document>"u"},Pi=`
 <div aria-labelledby="`.concat(fe.title,'" aria-describedby="').concat(fe["html-container"],'" class="').concat(fe.popup,`" tabindex="-1">
   <button type="button" class="`).concat(fe.close,`"></button>
   <ul class="`).concat(fe["progress-steps"],`"></ul>
   <div class="`).concat(fe.icon,`"></div>
   <img class="`).concat(fe.image,`" />
   <h2 class="`).concat(fe.title,'" id="').concat(fe.title,`"></h2>
   <div class="`).concat(fe["html-container"],'" id="').concat(fe["html-container"],`"></div>
   <input class="`).concat(fe.input,'" id="').concat(fe.input,`" />
   <input type="file" class="`).concat(fe.file,`" />
   <div class="`).concat(fe.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(fe.select,'" id="').concat(fe.select,`"></select>
   <div class="`).concat(fe.radio,`"></div>
   <label class="`).concat(fe.checkbox,`">
     <input type="checkbox" id="`).concat(fe.checkbox,`" />
     <span class="`).concat(fe.label,`"></span>
   </label>
   <textarea class="`).concat(fe.textarea,'" id="').concat(fe.textarea,`"></textarea>
   <div class="`).concat(fe["validation-message"],'" id="').concat(fe["validation-message"],`"></div>
   <div class="`).concat(fe.actions,`">
     <div class="`).concat(fe.loader,`"></div>
     <button type="button" class="`).concat(fe.confirm,`"></button>
     <button type="button" class="`).concat(fe.deny,`"></button>
     <button type="button" class="`).concat(fe.cancel,`"></button>
   </div>
   <div class="`).concat(fe.footer,`"></div>
   <div class="`).concat(fe["timer-progress-bar-container"],`">
     <div class="`).concat(fe["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),$i=function(){var ye=vt();return ye?(ye.remove(),Lt([document.documentElement,document.body],[fe["no-backdrop"],fe["toast-shown"],fe["has-column"]]),!0):!1},Kn=function(){Ne.currentInstance.resetValidationMessage()},Yi=function(){var ye=nr(),Oe=Ct(ye,fe.input),nt=Ct(ye,fe.file),Xt=ye.querySelector(".".concat(fe.range," input")),Qr=ye.querySelector(".".concat(fe.range," output")),Xn=Ct(ye,fe.select),Si=ye.querySelector(".".concat(fe.checkbox," input")),Di=Ct(ye,fe.textarea);Oe.oninput=Kn,nt.onchange=Kn,Xn.onchange=Kn,Si.onchange=Kn,Di.oninput=Kn,Xt.oninput=function(){Kn(),Qr.value=Xt.value},Xt.onchange=function(){Kn(),Qr.value=Xt.value}},Ss=function(ye){return typeof ye=="string"?document.querySelector(ye):ye},no=function(ye){var Oe=nr();Oe.setAttribute("role",ye.toast?"alert":"dialog"),Oe.setAttribute("aria-live",ye.toast?"polite":"assertive"),ye.toast||Oe.setAttribute("aria-modal","true")},Fs=function(ye){window.getComputedStyle(ye).direction==="rtl"&&pt(vt(),fe.rtl)},rs=function(ye){var Oe=$i();if(Wn()){De("SweetAlert2 requires document to initialize");return}var nt=document.createElement("div");nt.className=fe.container,Oe&&pt(nt,fe["no-transition"]),Pr(nt,Pi);var Xt=Ss(ye.target);Xt.appendChild(nt),no(ye),Fs(Xt),Yi()},Sa=function(ye,Oe){ye instanceof HTMLElement?Oe.appendChild(ye):ve(ye)==="object"?Ba(ye,Oe):ye&&Pr(Oe,ye)},Ba=function(ye,Oe){ye.jquery?tl(Oe,ye):Pr(Oe,ye.toString())},tl=function(ye,Oe){if(ye.textContent="",0 in Oe)for(var nt=0;nt in Oe;nt++)ye.appendChild(Oe[nt].cloneNode(!0));else ye.appendChild(Oe.cloneNode(!0))},go=function(){if(Wn())return!1;var it=document.createElement("div");return typeof it.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof it.style.animation<"u"?"animationend":!1}(),Sl=function(ye,Oe){var nt=mn(),Xt=On();!nt||!Xt||(!Oe.showConfirmButton&&!Oe.showDenyButton&&!Oe.showCancelButton?Rt(nt):Wt(nt),ri(nt,Oe,"actions"),sa(nt,Xt,Oe),Pr(Xt,Oe.loaderHtml||""),ri(Xt,Oe,"loader"))};function sa(it,ye,Oe){var nt=ar(),Xt=Gr(),Qr=Yt();!nt||!Xt||!Qr||(qi(nt,"confirm",Oe),qi(Xt,"deny",Oe),qi(Qr,"cancel",Oe),Ha(nt,Xt,Qr,Oe),Oe.reverseButtons&&(Oe.toast?(it.insertBefore(Qr,nt),it.insertBefore(Xt,nt)):(it.insertBefore(Qr,ye),it.insertBefore(Xt,ye),it.insertBefore(nt,ye))))}function Ha(it,ye,Oe,nt){if(!nt.buttonsStyling){Lt([it,ye,Oe],fe.styled);return}pt([it,ye,Oe],fe.styled),nt.confirmButtonColor&&(it.style.backgroundColor=nt.confirmButtonColor,pt(it,fe["default-outline"])),nt.denyButtonColor&&(ye.style.backgroundColor=nt.denyButtonColor,pt(ye,fe["default-outline"])),nt.cancelButtonColor&&(Oe.style.backgroundColor=nt.cancelButtonColor,pt(Oe,fe["default-outline"]))}function qi(it,ye,Oe){var nt=tt(ye);pr(it,Oe["show".concat(nt,"Button")],"inline-block"),Pr(it,Oe["".concat(ye,"ButtonText")]||""),it.setAttribute("aria-label",Oe["".concat(ye,"ButtonAriaLabel")]||""),it.className=fe[ye],ri(it,Oe,"".concat(ye,"Button"))}var Nc=function(ye,Oe){var nt=Bn();nt&&(Pr(nt,Oe.closeButtonHtml||""),ri(nt,Oe,"closeButton"),pr(nt,Oe.showCloseButton),nt.setAttribute("aria-label",Oe.closeButtonAriaLabel||""))},nc=function(ye,Oe){var nt=vt();nt&&(Ul(nt,Oe.backdrop),Xo(nt,Oe.position),Pa(nt,Oe.grow),ri(nt,Oe,"container"))};function Ul(it,ye){typeof ye=="string"?it.style.background=ye:ye||pt([document.documentElement,document.body],fe["no-backdrop"])}function Xo(it,ye){ye&&(ye in fe?pt(it,fe[ye]):(bt('The "position" parameter is not valid, defaulting to "center"'),pt(it,fe.center)))}function Pa(it,ye){ye&&pt(it,fe["grow-".concat(ye)])}var Ai={innerParams:new WeakMap,domCache:new WeakMap},So=["input","file","range","select","radio","checkbox","textarea"],xs=function(ye,Oe){var nt=nr();if(nt){var Xt=Ai.innerParams.get(ye),Qr=!Xt||Oe.input!==Xt.input;So.forEach(function(Xn){var Si=Ct(nt,fe[Xn]);Si&&(Cc(Xn,Oe.inputAttributes),Si.className=fe[Xn],Qr&&Rt(Si))}),Oe.input&&(Qr&&Bl(Oe),ce(Oe))}},Bl=function(ye){if(ye.input){if(!er[ye.input]){De("Unexpected type of input! Expected ".concat(Object.keys(er).join(" | "),', got "').concat(ye.input,'"'));return}var Oe=Ht(ye.input);if(Oe){var nt=er[ye.input](Oe,ye);Wt(Oe),ye.inputAutoFocus&&setTimeout(function(){We(nt)})}}},Fc=function(ye){for(var Oe=0;Oe<ye.attributes.length;Oe++){var nt=ye.attributes[Oe].name;["id","type","value","style"].includes(nt)||ye.removeAttribute(nt)}},Cc=function(ye,Oe){var nt=nr();if(nt){var Xt=ur(nt,ye);if(Xt){Fc(Xt);for(var Qr in Oe)Xt.setAttribute(Qr,Oe[Qr])}}},ce=function(ye){if(ye.input){var Oe=Ht(ye.input);Oe&&ri(Oe,ye,"input")}},Re=function(ye,Oe){!ye.placeholder&&Oe.inputPlaceholder&&(ye.placeholder=Oe.inputPlaceholder)},At=function(ye,Oe,nt){if(nt.inputLabel){var Xt=document.createElement("label"),Qr=fe["input-label"];Xt.setAttribute("for",ye.id),Xt.className=Qr,ve(nt.customClass)==="object"&&pt(Xt,nt.customClass.inputLabel),Xt.innerText=nt.inputLabel,Oe.insertAdjacentElement("beforebegin",Xt)}},Ht=function(ye){var Oe=nr();if(Oe)return Ct(Oe,fe[ye]||fe.input)},Jt=function(ye,Oe){["string","number"].includes(ve(Oe))?ye.value="".concat(Oe):Dt(Oe)||bt('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(ve(Oe),'"'))},er={};er.text=er.email=er.password=er.number=er.tel=er.url=er.search=er.date=er["datetime-local"]=er.time=er.week=er.month=function(it,ye){return Jt(it,ye.inputValue),At(it,it,ye),Re(it,ye),it.type=ye.input,it},er.file=function(it,ye){return At(it,it,ye),Re(it,ye),it},er.range=function(it,ye){var Oe=it.querySelector("input"),nt=it.querySelector("output");return Jt(Oe,ye.inputValue),Oe.type=ye.input,Jt(nt,ye.inputValue),At(Oe,it,ye),it},er.select=function(it,ye){if(it.textContent="",ye.inputPlaceholder){var Oe=document.createElement("option");Pr(Oe,ye.inputPlaceholder),Oe.value="",Oe.disabled=!0,Oe.selected=!0,it.appendChild(Oe)}return At(it,it,ye),it},er.radio=function(it){return it.textContent="",it},er.checkbox=function(it,ye){var Oe=ur(nr(),"checkbox");Oe.value="1",Oe.checked=!!ye.inputValue;var nt=it.querySelector("span");return Pr(nt,ye.inputPlaceholder),Oe},er.textarea=function(it,ye){Jt(it,ye.inputValue),Re(it,ye),At(it,it,ye);var Oe=function(Xt){return parseInt(window.getComputedStyle(Xt).marginLeft)+parseInt(window.getComputedStyle(Xt).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var nt=parseInt(window.getComputedStyle(nr()).width),Xt=function(){if(document.body.contains(it)){var Xn=it.offsetWidth+Oe(it);Xn>nt?nr().style.width="".concat(Xn,"px"):kt(nr(),"width",ye.width)}};new MutationObserver(Xt).observe(it,{attributes:!0,attributeFilter:["style"]})}}),it};var _r=function(ye,Oe){var nt=cn();nt&&(fr(nt),ri(nt,Oe,"htmlContainer"),Oe.html?(Sa(Oe.html,nt),Wt(nt,"block")):Oe.text?(nt.textContent=Oe.text,Wt(nt,"block")):Rt(nt),xs(ye,Oe))},fn=function(ye,Oe){var nt=Hn();nt&&(fr(nt),pr(nt,Oe.footer,"block"),Oe.footer&&Sa(Oe.footer,nt),ri(nt,Oe,"footer"))},pn=function(ye,Oe){var nt=Ai.innerParams.get(ye),Xt=Nr();if(Xt){if(nt&&Oe.icon===nt.icon){si(Xt,Oe),Fn(Xt,Oe);return}if(!Oe.icon&&!Oe.iconHtml){Rt(Xt);return}if(Oe.icon&&Object.keys(Ke).indexOf(Oe.icon)===-1){De('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(Oe.icon,'"')),Rt(Xt);return}Wt(Xt),si(Xt,Oe),Fn(Xt,Oe),pt(Xt,Oe.showClass&&Oe.showClass.icon)}},Fn=function(ye,Oe){for(var nt=0,Xt=Object.entries(Ke);nt<Xt.length;nt++){var Qr=J(Xt[nt],2),Xn=Qr[0],Si=Qr[1];Oe.icon!==Xn&&Lt(ye,Si)}pt(ye,Oe.icon&&Ke[Oe.icon]),ji(ye,Oe),Mn(),ri(ye,Oe,"icon")},Mn=function(){var ye=nr();if(ye)for(var Oe=window.getComputedStyle(ye).getPropertyValue("background-color"),nt=ye.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Xt=0;Xt<nt.length;Xt++)nt[Xt].style.backgroundColor=Oe},Kr=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Gn=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,si=function(ye,Oe){if(!(!Oe.icon&&!Oe.iconHtml)){var nt=ye.innerHTML,Xt="";if(Oe.iconHtml)Xt=Sr(Oe.iconHtml);else if(Oe.icon==="success")Xt=Kr,nt=nt.replace(/ style=".*?"/g,"");else if(Oe.icon==="error")Xt=Gn;else if(Oe.icon){var Qr={question:"?",warning:"!",info:"i"};Xt=Sr(Qr[Oe.icon])}nt.trim()!==Xt.trim()&&Pr(ye,Xt)}},ji=function(ye,Oe){if(Oe.iconColor){ye.style.color=Oe.iconColor,ye.style.borderColor=Oe.iconColor;for(var nt=0,Xt=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];nt<Xt.length;nt++){var Qr=Xt[nt];xr(ye,Qr,"background-color",Oe.iconColor)}xr(ye,".swal2-success-ring","border-color",Oe.iconColor)}},Sr=function(ye){return'<div class="'.concat(fe["icon-content"],'">').concat(ye,"</div>")},an=function(ye,Oe){var nt=Sn();if(nt){if(!Oe.imageUrl){Rt(nt);return}Wt(nt,""),nt.setAttribute("src",Oe.imageUrl),nt.setAttribute("alt",Oe.imageAlt||""),kt(nt,"width",Oe.imageWidth),kt(nt,"height",Oe.imageHeight),nt.className=fe.image,ri(nt,Oe,"image")}},ei=function(ye,Oe){var nt=vt(),Xt=nr();if(!(!nt||!Xt)){if(Oe.toast){kt(nt,"width",Oe.width),Xt.style.width="100%";var Qr=On();Qr&&Xt.insertBefore(Qr,Nr())}else kt(Xt,"width",Oe.width);kt(Xt,"padding",Oe.padding),Oe.color&&(Xt.style.color=Oe.color),Oe.background&&(Xt.style.background=Oe.background),Rt(ln()),Ci(Xt,Oe)}},Ci=function(ye,Oe){var nt=Oe.showClass||{};ye.className="".concat(fe.popup," ").concat(Lr(ye)?nt.popup:""),Oe.toast?(pt([document.documentElement,document.body],fe["toast-shown"]),pt(ye,fe.toast)):pt(ye,fe.modal),ri(ye,Oe,"popup"),typeof Oe.customClass=="string"&&pt(ye,Oe.customClass),Oe.icon&&pt(ye,fe["icon-".concat(Oe.icon)])},Ps=function(ye,Oe){var nt=Ln();if(nt){var Xt=Oe.progressSteps,Qr=Oe.currentProgressStep;if(!Xt||Xt.length===0||Qr===void 0){Rt(nt);return}Wt(nt),nt.textContent="",Qr>=Xt.length&&bt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Xt.forEach(function(Xn,Si){var Di=Xs(Xn);if(nt.appendChild(Di),Si===Qr&&pt(Di,fe["active-progress-step"]),Si!==Xt.length-1){var Hs=Ro(Oe);nt.appendChild(Hs)}})}},Xs=function(ye){var Oe=document.createElement("li");return pt(Oe,fe["progress-step"]),Pr(Oe,ye),Oe},Ro=function(ye){var Oe=document.createElement("li");return pt(Oe,fe["progress-step-line"]),ye.progressStepsDistance&&kt(Oe,"width",ye.progressStepsDistance),Oe},yn=function(ye,Oe){var nt=Ir();nt&&(fr(nt),pr(nt,Oe.title||Oe.titleText,"block"),Oe.title&&Sa(Oe.title,nt),Oe.titleText&&(nt.innerText=Oe.titleText),ri(nt,Oe,"title"))},Zn=function(ye,Oe){ei(ye,Oe),nc(ye,Oe),Ps(ye,Oe),pn(ye,Oe),an(ye,Oe),yn(ye,Oe),Nc(ye,Oe),_r(ye,Oe),Sl(ye,Oe),fn(ye,Oe);var nt=nr();typeof Oe.didRender=="function"&&nt&&Oe.didRender(nt)},Ni=function(){return Lr(nr())},ha=function(){var ye;return(ye=ar())===null||ye===void 0?void 0:ye.click()},Ms=function(){var ye;return(ye=Gr())===null||ye===void 0?void 0:ye.click()},hi=function(){var ye;return(ye=Yt())===null||ye===void 0?void 0:ye.click()},jo=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),zl=function(ye){ye.keydownTarget&&ye.keydownHandlerAdded&&(ye.keydownTarget.removeEventListener("keydown",ye.keydownHandler,{capture:ye.keydownListenerCapture}),ye.keydownHandlerAdded=!1)},oa=function(ye,Oe,nt){zl(ye),Oe.toast||(ye.keydownHandler=function(Xt){return Ql(Oe,Xt,nt)},ye.keydownTarget=Oe.keydownListenerCapture?window:nr(),ye.keydownListenerCapture=Oe.keydownListenerCapture,ye.keydownTarget.addEventListener("keydown",ye.keydownHandler,{capture:ye.keydownListenerCapture}),ye.keydownHandlerAdded=!0)},yo=function(ye,Oe){var nt,Xt=Dn();if(Xt.length){ye=ye+Oe,ye===Xt.length?ye=0:ye===-1&&(ye=Xt.length-1),Xt[ye].focus();return}(nt=nr())===null||nt===void 0||nt.focus()},As=["ArrowRight","ArrowDown"],Wc=["ArrowLeft","ArrowUp"],Ql=function(ye,Oe,nt){ye&&(Oe.isComposing||Oe.keyCode===229||(ye.stopKeydownPropagation&&Oe.stopPropagation(),Oe.key==="Enter"?Hl(Oe,ye):Oe.key==="Tab"?ja(Oe):[].concat(As,Wc).includes(Oe.key)?$o(Oe.key):Oe.key==="Escape"&&Ys(Oe,ye,nt)))},Hl=function(ye,Oe){if(Ze(Oe.allowEnterKey)){var nt=ur(nr(),Oe.input);if(ye.target&&nt&&ye.target instanceof HTMLElement&&ye.target.outerHTML===nt.outerHTML){if(["textarea","file"].includes(Oe.input))return;ha(),ye.preventDefault()}}},ja=function(ye){for(var Oe=ye.target,nt=Dn(),Xt=-1,Qr=0;Qr<nt.length;Qr++)if(Oe===nt[Qr]){Xt=Qr;break}ye.shiftKey?yo(Xt,-1):yo(Xt,1),ye.stopPropagation(),ye.preventDefault()},$o=function(ye){var Oe=mn(),nt=ar(),Xt=Gr(),Qr=Yt();if(!(!Oe||!nt||!Xt||!Qr)){var Xn=[nt,Xt,Qr];if(!(document.activeElement instanceof HTMLElement&&!Xn.includes(document.activeElement))){var Si=As.includes(ye)?"nextElementSibling":"previousElementSibling",Di=document.activeElement;if(Di){for(var Hs=0;Hs<Oe.children.length;Hs++){if(Di=Di[Si],!Di)return;if(Di instanceof HTMLButtonElement&&Lr(Di))break}Di instanceof HTMLButtonElement&&Di.focus()}}}},Ys=function(ye,Oe,nt){Ze(Oe.allowEscapeKey)&&(ye.preventDefault(),nt(jo.esc))},Bo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Zs=function(){var ye=vt(),Oe=Array.from(document.body.children);Oe.forEach(function(nt){nt.contains(ye)||(nt.hasAttribute("aria-hidden")&&nt.setAttribute("data-previous-aria-hidden",nt.getAttribute("aria-hidden")||""),nt.setAttribute("aria-hidden","true"))})},vo=function(){var ye=Array.from(document.body.children);ye.forEach(function(Oe){Oe.hasAttribute("data-previous-aria-hidden")?(Oe.setAttribute("aria-hidden",Oe.getAttribute("data-previous-aria-hidden")||""),Oe.removeAttribute("data-previous-aria-hidden")):Oe.removeAttribute("aria-hidden")})},fa=typeof window<"u"&&!!window.GestureEvent,_s=function(){if(fa&&!un(document.body,fe.iosfix)){var ye=document.body.scrollTop;document.body.style.top="".concat(ye*-1,"px"),pt(document.body,fe.iosfix),io()}},io=function(){var ye=vt();if(ye){var Oe;ye.ontouchstart=function(nt){Oe=qo(nt)},ye.ontouchmove=function(nt){Oe&&(nt.preventDefault(),nt.stopPropagation())}}},qo=function(ye){var Oe=ye.target,nt=vt(),Xt=cn();return!nt||!Xt||Eo(ye)||ic(ye)?!1:Oe===nt||!sn(nt)&&Oe instanceof HTMLElement&&Oe.tagName!=="INPUT"&&Oe.tagName!=="TEXTAREA"&&!(sn(Xt)&&Xt.contains(Oe))},Eo=function(ye){return ye.touches&&ye.touches.length&&ye.touches[0].touchType==="stylus"},ic=function(ye){return ye.touches&&ye.touches.length>1},aa=function(){if(un(document.body,fe.iosfix)){var ye=parseInt(document.body.style.top,10);Lt(document.body,fe.iosfix),document.body.style.top="",document.body.scrollTop=ye*-1}},rl=function(){var ye=document.createElement("div");ye.className=fe["scrollbar-measure"],document.body.appendChild(ye);var Oe=ye.getBoundingClientRect().width-ye.clientWidth;return document.body.removeChild(ye),Oe},Uo=null,Va=function(ye){Uo===null&&(document.body.scrollHeight>window.innerHeight||ye==="scroll")&&(Uo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Uo+rl(),"px"))},Vl=function(){Uo!==null&&(document.body.style.paddingRight="".concat(Uo,"px"),Uo=null)};function Wo(it,ye,Oe,nt){Rn()?Xe(it,nt):(ie(Oe).then(function(){return Xe(it,nt)}),zl(Ne)),fa?(ye.setAttribute("style","display:none !important"),ye.removeAttribute("class"),ye.innerHTML=""):ye.remove(),Gi()&&(Vl(),aa(),vo()),xu()}function xu(){Lt([document.documentElement,document.body],[fe.shown,fe["height-auto"],fe["no-backdrop"],fe["toast-shown"]])}function pa(it){it=$l(it);var ye=Bo.swalPromiseResolve.get(this),Oe=xo(this);this.isAwaitingPromise?it.isDismissed||(_o(this),ye(it)):Oe&&ye(it)}var xo=function(ye){var Oe=nr();if(!Oe)return!1;var nt=Ai.innerParams.get(ye);if(!nt||un(Oe,nt.hideClass.popup))return!1;Lt(Oe,nt.showClass.popup),pt(Oe,nt.hideClass.popup);var Xt=vt();return Lt(Xt,nt.showClass.backdrop),pt(Xt,nt.hideClass.backdrop),k(ye,Oe,nt),!0};function Gl(it){var ye=Bo.swalPromiseReject.get(this);_o(this),ye&&ye(it)}var _o=function(ye){ye.isAwaitingPromise&&(delete ye.isAwaitingPromise,Ai.innerParams.get(ye)||ye._destroy())},$l=function(ye){return typeof ye>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},ye)},k=function(ye,Oe,nt){var Xt=vt(),Qr=go&&_n(Oe);typeof nt.willClose=="function"&&nt.willClose(Oe),Qr?me(ye,Oe,Xt,nt.returnFocus,nt.didClose):Wo(ye,Xt,nt.returnFocus,nt.didClose)},me=function(ye,Oe,nt,Xt,Qr){go&&(Ne.swalCloseEventFinishedCallback=Wo.bind(null,ye,nt,Xt,Qr),Oe.addEventListener(go,function(Xn){Xn.target===Oe&&(Ne.swalCloseEventFinishedCallback(),delete Ne.swalCloseEventFinishedCallback)}))},Xe=function(ye,Oe){setTimeout(function(){typeof Oe=="function"&&Oe.bind(ye.params)(),ye._destroy&&ye._destroy()})},ot=function(ye){var Oe=nr();if(Oe||new uo,Oe=nr(),!!Oe){var nt=On();Rn()?Rt(Nr()):St(Oe,ye),Wt(nt),Oe.setAttribute("data-loading","true"),Oe.setAttribute("aria-busy","true"),Oe.focus()}},St=function(ye,Oe){var nt=mn(),Xt=On();!nt||!Xt||(!Oe&&Lr(ar())&&(Oe=ar()),Wt(nt),Oe&&(Rt(Oe),Xt.setAttribute("data-button-to-replace",Oe.className),nt.insertBefore(Xt,Oe)),pt([ye,nt],fe.loading))},qt=function(ye,Oe){Oe.input==="select"||Oe.input==="radio"?qr(ye,Oe):["text","email","number","tel","textarea"].some(function(nt){return nt===Oe.input})&&(Ue(Oe.inputValue)||Dt(Oe.inputValue))&&(ot(ar()),Dr(ye,Oe))},gr=function(ye,Oe){var nt=ye.getInput();if(!nt)return null;switch(Oe.input){case"checkbox":return $r(nt);case"radio":return An(nt);case"file":return En(nt);default:return Oe.inputAutoTrim?nt.value.trim():nt.value}},$r=function(ye){return ye.checked?1:0},An=function(ye){return ye.checked?ye.value:null},En=function(ye){return ye.files&&ye.files.length?ye.getAttribute("multiple")!==null?ye.files:ye.files[0]:null},qr=function(ye,Oe){var nt=nr();if(nt){var Xt=function(Xn){Oe.input==="select"?bi(nt,Fi(Xn),Oe):Oe.input==="radio"&&gn(nt,Fi(Xn),Oe)};Ue(Oe.inputOptions)||Dt(Oe.inputOptions)?(ot(ar()),hr(Oe.inputOptions).then(function(Qr){ye.hideLoading(),Xt(Qr)})):ve(Oe.inputOptions)==="object"?Xt(Oe.inputOptions):De("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(ve(Oe.inputOptions)))}},Dr=function(ye,Oe){var nt=ye.getInput();nt&&(Rt(nt),hr(Oe.inputValue).then(function(Xt){nt.value=Oe.input==="number"?"".concat(parseFloat(Xt)||0):"".concat(Xt),Wt(nt),nt.focus(),ye.hideLoading()}).catch(function(Xt){De("Error in inputValue promise: ".concat(Xt)),nt.value="",Wt(nt),nt.focus(),ye.hideLoading()}))};function bi(it,ye,Oe){var nt=Ct(it,fe.select);if(nt){var Xt=function(Xn,Si,Di){var Hs=document.createElement("option");Hs.value=Di,Pr(Hs,Si),Hs.selected=bs(Di,Oe.inputValue),Xn.appendChild(Hs)};ye.forEach(function(Qr){var Xn=Qr[0],Si=Qr[1];if(Array.isArray(Si)){var Di=document.createElement("optgroup");Di.label=Xn,Di.disabled=!1,nt.appendChild(Di),Si.forEach(function(Hs){return Xt(Di,Hs[1],Hs[0])})}else Xt(nt,Si,Xn)}),nt.focus()}}function gn(it,ye,Oe){var nt=Ct(it,fe.radio);if(nt){ye.forEach(function(Qr){var Xn=Qr[0],Si=Qr[1],Di=document.createElement("input"),Hs=document.createElement("label");Di.type="radio",Di.name=fe.radio,Di.value=Xn,bs(Xn,Oe.inputValue)&&(Di.checked=!0);var Oc=document.createElement("span");Pr(Oc,Si),Oc.className=fe.label,Hs.appendChild(Di),Hs.appendChild(Oc),nt.appendChild(Hs)});var Xt=nt.querySelectorAll("input");Xt.length&&Xt[0].focus()}}var Fi=function(ye){var Oe=[];return ye instanceof Map?ye.forEach(function(nt,Xt){var Qr=nt;ve(Qr)==="object"&&(Qr=Fi(Qr)),Oe.push([Xt,Qr])}):Object.keys(ye).forEach(function(nt){var Xt=ye[nt];ve(Xt)==="object"&&(Xt=Fi(Xt)),Oe.push([nt,Xt])}),Oe},bs=function(ye,Oe){return!!Oe&&Oe.toString()===ye.toString()},vn=void 0,lo=function(ye){var Oe=Ai.innerParams.get(ye);ye.disableButtons(),Oe.input?nl(ye,"confirm"):Zo(ye,!0)},Js=function(ye){var Oe=Ai.innerParams.get(ye);ye.disableButtons(),Oe.returnInputValueOnDeny?nl(ye,"deny"):so(ye,!1)},Yo=function(ye,Oe){ye.disableButtons(),Oe(jo.cancel)},nl=function(ye,Oe){var nt=Ai.innerParams.get(ye);if(!nt.input){De('The "input" parameter is needed to be set when using returnInputValueOn'.concat(tt(Oe)));return}var Xt=ye.getInput(),Qr=gr(ye,nt);nt.inputValidator?il(ye,Qr,Oe):Xt&&!Xt.checkValidity()?(ye.enableButtons(),ye.showValidationMessage(nt.validationMessage||Xt.validationMessage)):Oe==="deny"?so(ye,Qr):Zo(ye,Qr)},il=function(ye,Oe,nt){var Xt=Ai.innerParams.get(ye);ye.disableInput();var Qr=Promise.resolve().then(function(){return hr(Xt.inputValidator(Oe,Xt.validationMessage))});Qr.then(function(Xn){ye.enableButtons(),ye.enableInput(),Xn?ye.showValidationMessage(Xn):nt==="deny"?so(ye,Oe):Zo(ye,Oe)})},so=function(ye,Oe){var nt=Ai.innerParams.get(ye||vn);if(nt.showLoaderOnDeny&&ot(Gr()),nt.preDeny){ye.isAwaitingPromise=!0;var Xt=Promise.resolve().then(function(){return hr(nt.preDeny(Oe,nt.validationMessage))});Xt.then(function(Qr){Qr===!1?(ye.hideLoading(),_o(ye)):ye.close({isDenied:!0,value:typeof Qr>"u"?Oe:Qr})}).catch(function(Qr){return Ea(ye||vn,Qr)})}else ye.close({isDenied:!0,value:Oe})},Ga=function(ye,Oe){ye.close({isConfirmed:!0,value:Oe})},Ea=function(ye,Oe){ye.rejectPromise(Oe)},Zo=function(ye,Oe){var nt=Ai.innerParams.get(ye||vn);if(nt.showLoaderOnConfirm&&ot(),nt.preConfirm){ye.resetValidationMessage(),ye.isAwaitingPromise=!0;var Xt=Promise.resolve().then(function(){return hr(nt.preConfirm(Oe,nt.validationMessage))});Xt.then(function(Qr){Lr(ln())||Qr===!1?(ye.hideLoading(),_o(ye)):Ga(ye,typeof Qr>"u"?Oe:Qr)}).catch(function(Qr){return Ea(ye||vn,Qr)})}else Ga(ye,Oe)};function Ma(){var it=Ai.innerParams.get(this);if(it){var ye=Ai.domCache.get(this);Rt(ye.loader),Rn()?it.icon&&Wt(Nr()):Ki(ye),Lt([ye.popup,ye.actions],fe.loading),ye.popup.removeAttribute("aria-busy"),ye.popup.removeAttribute("data-loading"),ye.confirmButton.disabled=!1,ye.denyButton.disabled=!1,ye.cancelButton.disabled=!1}}var Ki=function(ye){var Oe=ye.popup.getElementsByClassName(ye.loader.getAttribute("data-button-to-replace"));Oe.length?Wt(Oe[0],"inline-block"):rn()&&Rt(ye.actions)};function us(){var it=Ai.innerParams.get(this),ye=Ai.domCache.get(this);return ye?ur(ye.popup,it.input):null}function la(it,ye,Oe){var nt=Ai.domCache.get(it);ye.forEach(function(Xt){nt[Xt].disabled=Oe})}function Yr(it,ye){var Oe=nr();if(!(!Oe||!it))if(it.type==="radio")for(var nt=Oe.querySelectorAll('[name="'.concat(fe.radio,'"]')),Xt=0;Xt<nt.length;Xt++)nt[Xt].disabled=ye;else it.disabled=ye}function sc(){la(this,["confirmButton","denyButton","cancelButton"],!1)}function ws(){la(this,["confirmButton","denyButton","cancelButton"],!0)}function oc(){Yr(this.getInput(),!1)}function yl(){Yr(this.getInput(),!0)}function ql(it){var ye=Ai.domCache.get(this),Oe=Ai.innerParams.get(this);Pr(ye.validationMessage,it),ye.validationMessage.className=fe["validation-message"],Oe.customClass&&Oe.customClass.validationMessage&&pt(ye.validationMessage,Oe.customClass.validationMessage),Wt(ye.validationMessage);var nt=this.getInput();nt&&(nt.setAttribute("aria-invalid","true"),nt.setAttribute("aria-describedby",fe["validation-message"]),We(nt),pt(nt,fe.inputerror))}function ks(){var it=Ai.domCache.get(this);it.validationMessage&&Rt(it.validationMessage);var ye=this.getInput();ye&&(ye.removeAttribute("aria-invalid"),ye.removeAttribute("aria-describedby"),Lt(ye,fe.inputerror))}var Jo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Aa=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Pc={allowEnterKey:void 0},yr=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Mr=function(ye){return Object.prototype.hasOwnProperty.call(Jo,ye)},xn=function(ye){return Aa.indexOf(ye)!==-1},kn=function(ye){return Pc[ye]},ns=function(ye){Mr(ye)||bt('Unknown parameter "'.concat(ye,'"'))},xi=function(ye){yr.includes(ye)&&bt('The parameter "'.concat(ye,'" is incompatible with toasts'))},ms=function(ye){var Oe=kn(ye);Oe&&Ar(ye,Oe)},ds=function(ye){ye.backdrop===!1&&ye.allowOutsideClick&&bt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var Oe in ye)ns(Oe),ye.toast&&xi(Oe),ms(Oe)};function bo(it){var ye=nr(),Oe=Ai.innerParams.get(this);if(!ye||un(ye,Oe.hideClass.popup)){bt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var nt=Zi(it),Xt=Object.assign({},Oe,nt);Zn(this,Xt),Ai.innerParams.set(this,Xt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,it),writable:!1,enumerable:!0}})}var Zi=function(ye){var Oe={};return Object.keys(ye).forEach(function(nt){xn(nt)?Oe[nt]=ye[nt]:bt("Invalid parameter to update: ".concat(nt))}),Oe};function Ds(){var it=Ai.domCache.get(this),ye=Ai.innerParams.get(this);if(!ye){zs(this);return}it.popup&&Ne.swalCloseEventFinishedCallback&&(Ne.swalCloseEventFinishedCallback(),delete Ne.swalCloseEventFinishedCallback),typeof ye.didDestroy=="function"&&ye.didDestroy(),Bs(this)}var Bs=function(ye){zs(ye),delete ye.params,delete Ne.keydownHandler,delete Ne.keydownTarget,delete Ne.currentInstance},zs=function(ye){ye.isAwaitingPromise?(eo(Ai,ye),ye.isAwaitingPromise=!0):(eo(Bo,ye),eo(Ai,ye),delete ye.isAwaitingPromise,delete ye.disableButtons,delete ye.enableButtons,delete ye.getInput,delete ye.disableInput,delete ye.enableInput,delete ye.hideLoading,delete ye.disableLoading,delete ye.showValidationMessage,delete ye.resetValidationMessage,delete ye.close,delete ye.closePopup,delete ye.closeModal,delete ye.closeToast,delete ye.rejectPromise,delete ye.update,delete ye._destroy)},eo=function(ye,Oe){for(var nt in ye)ye[nt].delete(Oe)},ea=Object.freeze({__proto__:null,_destroy:Ds,close:pa,closeModal:pa,closePopup:pa,closeToast:pa,disableButtons:ws,disableInput:yl,disableLoading:Ma,enableButtons:sc,enableInput:oc,getInput:us,handleAwaitingPromise:_o,hideLoading:Ma,rejectPromise:Gl,resetValidationMessage:ks,showValidationMessage:ql,update:bo}),ma=function(ye,Oe,nt){ye.toast?ta(ye,Oe,nt):(ga(Oe),hs(Oe),os(ye,Oe,nt))},ta=function(ye,Oe,nt){Oe.popup.onclick=function(){ye&&(ra(ye)||ye.timer||ye.input)||nt(jo.close)}},ra=function(ye){return!!(ye.showConfirmButton||ye.showDenyButton||ye.showCancelButton||ye.showCloseButton)},$s=!1,ga=function(ye){ye.popup.onmousedown=function(){ye.container.onmouseup=function(Oe){ye.container.onmouseup=function(){},Oe.target===ye.container&&($s=!0)}}},hs=function(ye){ye.container.onmousedown=function(Oe){Oe.target===ye.container&&Oe.preventDefault(),ye.popup.onmouseup=function(nt){ye.popup.onmouseup=function(){},(nt.target===ye.popup||nt.target instanceof HTMLElement&&ye.popup.contains(nt.target))&&($s=!0)}}},os=function(ye,Oe,nt){Oe.container.onclick=function(Xt){if($s){$s=!1;return}Xt.target===Oe.container&&Ze(ye.allowOutsideClick)&&nt(jo.backdrop)}},Tn=function(ye){return ve(ye)==="object"&&ye.jquery},mi=function(ye){return ye instanceof Element||Tn(ye)},co=function(ye){var Oe={};return ve(ye[0])==="object"&&!mi(ye[0])?Object.assign(Oe,ye[0]):["title","html","icon"].forEach(function(nt,Xt){var Qr=ye[Xt];typeof Qr=="string"||mi(Qr)?Oe[nt]=Qr:Qr!==void 0&&De("Unexpected type of ".concat(nt,'! Expected "string" or "Element", got ').concat(ve(Qr)))}),Oe};function to(){for(var it=arguments.length,ye=new Array(it),Oe=0;Oe<it;Oe++)ye[Oe]=arguments[Oe];return S(this,ye)}function Cs(it){var ye=function(Oe){function nt(){return m(this,nt),u(this,nt,arguments)}return V(nt,Oe),j(nt,[{key:"_main",value:function(Qr,Xn){return Ie(nt,"_main",this)([Qr,Object.assign({},it,Xn)])}}])}(this);return ye}var Ji=function(){return Ne.timeout&&Ne.timeout.getTimerLeft()},oi=function(){if(Ne.timeout)return qn(),Ne.timeout.stop()},qs=function(){if(Ne.timeout){var ye=Ne.timeout.start();return Un(ye),ye}},sl=function(){var ye=Ne.timeout;return ye&&(ye.running?oi():qs())},ac=function(ye){if(Ne.timeout){var Oe=Ne.timeout.increase(ye);return Un(Oe,!0),Oe}},ol=function(){return!!(Ne.timeout&&Ne.timeout.isRunning())},$a=!1,jc={};function lc(){var it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";jc[it]=this,$a||(document.body.addEventListener("click",oo),$a=!0)}var oo=function(ye){for(var Oe=ye.target;Oe&&Oe!==document;Oe=Oe.parentNode)for(var nt in jc){var Xt=Oe.getAttribute(nt);if(Xt){jc[nt].fire({template:Xt});return}}},Qs=Object.freeze({__proto__:null,argsToParams:co,bindClickHandler:lc,clickCancel:hi,clickConfirm:ha,clickDeny:Ms,enableLoading:ot,fire:to,getActions:mn,getCancelButton:Yt,getCloseButton:Bn,getConfirmButton:ar,getContainer:vt,getDenyButton:Gr,getFocusableElements:Dn,getFooter:Hn,getHtmlContainer:cn,getIcon:Nr,getIconContent:on,getImage:Sn,getInputLabel:Wr,getLoader:On,getPopup:nr,getProgressSteps:Ln,getTimerLeft:Ji,getTimerProgressBar:Vi,getTitle:Ir,getValidationMessage:ln,increaseTimer:ac,isDeprecatedParameter:kn,isLoading:Zr,isTimerRunning:ol,isUpdatableParameter:xn,isValidParameter:Mr,isVisible:Ni,mixin:Cs,resumeTimer:qs,showLoading:ot,stopTimer:oi,toggleTimer:sl}),cc=function(){function it(ye,Oe){m(this,it),this.callback=ye,this.remaining=Oe,this.running=!1,this.start()}return j(it,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(Oe){var nt=this.running;return nt&&this.stop(),this.remaining+=Oe,nt&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),Mc=["swal-title","swal-html","swal-footer"],_u=function(ye){var Oe=typeof ye.template=="string"?document.querySelector(ye.template):ye.template;if(!Oe)return{};var nt=Oe.content;th(nt);var Xt=Object.assign(Sc(nt),iu(nt),id(nt),eh(nt),sd(nt),Cd(nt),bu(nt,Mc));return Xt},Sc=function(ye){var Oe={},nt=Array.from(ye.querySelectorAll("swal-param"));return nt.forEach(function(Xt){kc(Xt,["name","value"]);var Qr=Xt.getAttribute("name"),Xn=Xt.getAttribute("value");!Qr||!Xn||(typeof Jo[Qr]=="boolean"?Oe[Qr]=Xn!=="false":ve(Jo[Qr])==="object"?Oe[Qr]=JSON.parse(Xn):Oe[Qr]=Xn)}),Oe},iu=function(ye){var Oe={},nt=Array.from(ye.querySelectorAll("swal-function-param"));return nt.forEach(function(Xt){var Qr=Xt.getAttribute("name"),Xn=Xt.getAttribute("value");!Qr||!Xn||(Oe[Qr]=new Function("return ".concat(Xn))())}),Oe},id=function(ye){var Oe={},nt=Array.from(ye.querySelectorAll("swal-button"));return nt.forEach(function(Xt){kc(Xt,["type","color","aria-label"]);var Qr=Xt.getAttribute("type");!Qr||!["confirm","cancel","deny"].includes(Qr)||(Oe["".concat(Qr,"ButtonText")]=Xt.innerHTML,Oe["show".concat(tt(Qr),"Button")]=!0,Xt.hasAttribute("color")&&(Oe["".concat(Qr,"ButtonColor")]=Xt.getAttribute("color")),Xt.hasAttribute("aria-label")&&(Oe["".concat(Qr,"ButtonAriaLabel")]=Xt.getAttribute("aria-label")))}),Oe},eh=function(ye){var Oe={},nt=ye.querySelector("swal-image");return nt&&(kc(nt,["src","width","height","alt"]),nt.hasAttribute("src")&&(Oe.imageUrl=nt.getAttribute("src")||void 0),nt.hasAttribute("width")&&(Oe.imageWidth=nt.getAttribute("width")||void 0),nt.hasAttribute("height")&&(Oe.imageHeight=nt.getAttribute("height")||void 0),nt.hasAttribute("alt")&&(Oe.imageAlt=nt.getAttribute("alt")||void 0)),Oe},sd=function(ye){var Oe={},nt=ye.querySelector("swal-icon");return nt&&(kc(nt,["type","color"]),nt.hasAttribute("type")&&(Oe.icon=nt.getAttribute("type")),nt.hasAttribute("color")&&(Oe.iconColor=nt.getAttribute("color")),Oe.iconHtml=nt.innerHTML),Oe},Cd=function(ye){var Oe={},nt=ye.querySelector("swal-input");nt&&(kc(nt,["type","label","placeholder","value"]),Oe.input=nt.getAttribute("type")||"text",nt.hasAttribute("label")&&(Oe.inputLabel=nt.getAttribute("label")),nt.hasAttribute("placeholder")&&(Oe.inputPlaceholder=nt.getAttribute("placeholder")),nt.hasAttribute("value")&&(Oe.inputValue=nt.getAttribute("value")));var Xt=Array.from(ye.querySelectorAll("swal-input-option"));return Xt.length&&(Oe.inputOptions={},Xt.forEach(function(Qr){kc(Qr,["value"]);var Xn=Qr.getAttribute("value");if(Xn){var Si=Qr.innerHTML;Oe.inputOptions[Xn]=Si}})),Oe},bu=function(ye,Oe){var nt={};for(var Xt in Oe){var Qr=Oe[Xt],Xn=ye.querySelector(Qr);Xn&&(kc(Xn,[]),nt[Qr.replace(/^swal-/,"")]=Xn.innerHTML.trim())}return nt},th=function(ye){var Oe=Mc.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(ye.children).forEach(function(nt){var Xt=nt.tagName.toLowerCase();Oe.includes(Xt)||bt("Unrecognized element <".concat(Xt,">"))})},kc=function(ye,Oe){Array.from(ye.attributes).forEach(function(nt){Oe.indexOf(nt.name)===-1&&bt(['Unrecognized attribute "'.concat(nt.name,'" on <').concat(ye.tagName.toLowerCase(),">."),"".concat(Oe.length?"Allowed attributes are: ".concat(Oe.join(", ")):"To set the value, use HTML within the element.")])})},Sd=10,vh=function(ye){var Oe=vt(),nt=nr();typeof ye.willOpen=="function"&&ye.willOpen(nt);var Xt=window.getComputedStyle(document.body),Qr=Xt.overflowY;_h(Oe,nt,ye),setTimeout(function(){sf(Oe,nt)},Sd),Gi()&&(xh(Oe,ye.scrollbarPadding,Qr),Zs()),!Rn()&&!Ne.previousActiveElement&&(Ne.previousActiveElement=document.activeElement),typeof ye.didOpen=="function"&&setTimeout(function(){return ye.didOpen(nt)}),Lt(Oe,fe["no-transition"])},Wl=function(ye){var Oe=nr();if(!(ye.target!==Oe||!go)){var nt=vt();Oe.removeEventListener(go,Wl),nt.style.overflowY="auto"}},sf=function(ye,Oe){go&&_n(Oe)?(ye.style.overflowY="hidden",Oe.addEventListener(go,Wl)):ye.style.overflowY="auto"},xh=function(ye,Oe,nt){_s(),Oe&&nt!=="hidden"&&Va(nt),setTimeout(function(){ye.scrollTop=0})},_h=function(ye,Oe,nt){pt(ye,nt.showClass.backdrop),nt.animation?(Oe.style.setProperty("opacity","0","important"),Wt(Oe,"grid"),setTimeout(function(){pt(Oe,nt.showClass.popup),Oe.style.removeProperty("opacity")},Sd)):Wt(Oe,"grid"),pt([document.documentElement,document.body],fe.shown),nt.heightAuto&&nt.backdrop&&!nt.toast&&pt([document.documentElement,document.body],fe["height-auto"])},bh={email:function(ye,Oe){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(ye)?Promise.resolve():Promise.resolve(Oe||"Invalid email address")},url:function(ye,Oe){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(ye)?Promise.resolve():Promise.resolve(Oe||"Invalid URL")}};function od(it){it.inputValidator||(it.input==="email"&&(it.inputValidator=bh.email),it.input==="url"&&(it.inputValidator=bh.url))}function wu(it){(!it.target||typeof it.target=="string"&&!document.querySelector(it.target)||typeof it.target!="string"&&!it.target.appendChild)&&(bt('Target parameter is not valid, defaulting to "body"'),it.target="body")}function Dc(it){od(it),it.showLoaderOnConfirm&&!it.preConfirm&&bt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),wu(it),typeof it.title=="string"&&(it.title=it.title.split(`
`).join("<br />")),rs(it)}var Kl,ad=new WeakMap,zo=function(){function it(){if(m(this,it),C(this,ad,void 0),!(typeof window>"u")){Kl=this;for(var ye=arguments.length,Oe=new Array(ye),nt=0;nt<ye;nt++)Oe[nt]=arguments[nt];var Xt=Object.freeze(this.constructor.argsToParams(Oe));this.params=Xt,this.isAwaitingPromise=!1,B(ad,this,this._main(Kl.params))}}return j(it,[{key:"_main",value:function(Oe){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ds(Object.assign({},nt,Oe)),Ne.currentInstance){var Xt=Bo.swalPromiseResolve.get(Ne.currentInstance),Qr=Ne.currentInstance.isAwaitingPromise;Ne.currentInstance._destroy(),Qr||Xt({isDismissed:!0}),Gi()&&vo()}Ne.currentInstance=Kl;var Xn=Bd(Oe,nt);Dc(Xn),Object.freeze(Xn),Ne.timeout&&(Ne.timeout.stop(),delete Ne.timeout),clearTimeout(Ne.restoreFocusTimeout);var Si=Pp(Kl);return Zn(Kl,Xn),Ai.innerParams.set(Kl,Xn),qf(Kl,Si,Xn)}},{key:"then",value:function(Oe){return g(ad,this).then(Oe)}},{key:"finally",value:function(Oe){return g(ad,this).finally(Oe)}}])}(),qf=function(ye,Oe,nt){return new Promise(function(Xt,Qr){var Xn=function(Di){ye.close({isDismissed:!0,dismiss:Di})};Bo.swalPromiseResolve.set(ye,Xt),Bo.swalPromiseReject.set(ye,Qr),Oe.confirmButton.onclick=function(){lo(ye)},Oe.denyButton.onclick=function(){Js(ye)},Oe.cancelButton.onclick=function(){Yo(ye,Xn)},Oe.closeButton.onclick=function(){Xn(jo.close)},ma(nt,Oe,Xn),oa(Ne,nt,Xn),qt(ye,nt),vh(nt),Wf(Ne,nt,Xn),vl(Oe,nt),setTimeout(function(){Oe.container.scrollTop=0})})},Bd=function(ye,Oe){var nt=_u(ye),Xt=Object.assign({},Jo,Oe,nt,ye);return Xt.showClass=Object.assign({},Jo.showClass,Xt.showClass),Xt.hideClass=Object.assign({},Jo.hideClass,Xt.hideClass),Xt.animation===!1&&(Xt.showClass={backdrop:"swal2-noanimation"},Xt.hideClass={}),Xt},Pp=function(ye){var Oe={popup:nr(),container:vt(),actions:mn(),confirmButton:ar(),denyButton:Gr(),cancelButton:Yt(),loader:On(),closeButton:Bn(),validationMessage:ln(),progressSteps:Ln()};return Ai.domCache.set(ye,Oe),Oe},Wf=function(ye,Oe,nt){var Xt=Vi();Rt(Xt),Oe.timer&&(ye.timeout=new cc(function(){nt("timer"),delete ye.timeout},Oe.timer),Oe.timerProgressBar&&(Wt(Xt),ri(Xt,Oe,"timerProgressBar"),setTimeout(function(){ye.timeout&&ye.timeout.running&&Un(Oe.timer)})))},vl=function(ye,Oe){if(!Oe.toast){if(!Ze(Oe.allowEnterKey)){Ar("allowEnterKey"),Kf();return}Mo(ye)||qa(ye,Oe)||yo(-1,1)}},Mo=function(ye){var Oe=ye.popup.querySelectorAll("[autofocus]"),nt=D(Oe),Xt;try{for(nt.s();!(Xt=nt.n()).done;){var Qr=Xt.value;if(Qr instanceof HTMLElement&&Lr(Qr))return Qr.focus(),!0}}catch(Xn){nt.e(Xn)}finally{nt.f()}return!1},qa=function(ye,Oe){return Oe.focusDeny&&Lr(ye.denyButton)?(ye.denyButton.focus(),!0):Oe.focusCancel&&Lr(ye.cancelButton)?(ye.cancelButton.focus(),!0):Oe.focusConfirm&&Lr(ye.confirmButton)?(ye.confirmButton.focus(),!0):!1},Kf=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Ed=new Date,Ta=localStorage.getItem("swal-initiation");Ta?(Ed.getTime()-Date.parse(Ta))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var it=document.createElement("audio");it.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",it.loop=!0,document.body.appendChild(it),setTimeout(function(){it.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Ed))}zo.prototype.disableButtons=ws,zo.prototype.enableButtons=sc,zo.prototype.getInput=us,zo.prototype.disableInput=yl,zo.prototype.enableInput=oc,zo.prototype.hideLoading=Ma,zo.prototype.disableLoading=Ma,zo.prototype.showValidationMessage=ql,zo.prototype.resetValidationMessage=ks,zo.prototype.close=pa,zo.prototype.closePopup=pa,zo.prototype.closeModal=pa,zo.prototype.closeToast=pa,zo.prototype.rejectPromise=Gl,zo.prototype.update=bo,zo.prototype._destroy=Ds,Object.assign(zo,Qs),Object.keys(ea).forEach(function(it){zo[it]=function(){if(Kl&&Kl[it]){var ye;return(ye=Kl)[it].apply(ye,arguments)}return null}}),zo.DismissReason=jo,zo.version="11.12.4";var uo=zo;return uo.default=uo,uo}),typeof Ho<"u"&&Ho.Sweetalert2&&(Ho.swal=Ho.sweetAlert=Ho.Swal=Ho.SweetAlert=Ho.Sweetalert2),typeof document<"u"&&function(r,n){var s=r.createElement("style");if(r.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=n);else try{s.innerHTML=n}catch{s.innerText=n}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(kq);var yye=kq.exports;const Ti=Bp(yye),E7=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],y3=()=>{};function Dq(t){function e(s){const o={},c={},u=E7.map(i=>i.key);return Object.entries(s).forEach(i=>{let[m,g]=i;u.includes(m)&&Ui.isValidElement(g)?(o[m]=g,c[m]=" "):c[m]=g}),[o,c]}function r(s,o){Object.entries(o).forEach(c=>{let[u,i]=c;const g=E7.find(B=>B.key===u).getter(t),C=xH(g);C.render(i),s.__roots.push(C)})}function n(s){s.__roots.forEach(o=>{o.unmount()}),s.__roots=[]}return class extends t{static argsToParams(s){if(Ui.isValidElement(s[0])||Ui.isValidElement(s[1])){const o={};return["title","html","icon"].forEach((c,u)=>{s[u]!==void 0&&(o[c]=s[u])}),o}else return t.argsToParams(s)}_main(s,o){this.__roots=[],this.__params=Object.assign({},o,s);const[c,u]=e(this.__params),i=u.willOpen||y3,m=u.didOpen||y3,g=u.didDestroy||y3;return super._main(Object.assign({},u,{willOpen:C=>{r(this,c),i(C)},didOpen:C=>{setTimeout(()=>{m(C)})},didDestroy:C=>{g(C),n(this)}}))}update(s){Object.assign(this.__params,s),n(this);const[o,c]=e(this.__params);super.update(c),r(this,o)}}}const vye=Dq(Ti),xye=[{id:1,name:"Corn",weight:"50kg",category_id:"Grain"},{id:2,name:"Wheat",weight:"40kg",category_id:"Grain"}],_ye=()=>{const[t,e]=Ae.useState(xye),[r,n]=Ae.useState(null),[s,o]=Ae.useState(!1),[c,u]=Ae.useState(""),[i,m]=Ae.useState(null),g=Ae.useRef(null);Ae.useEffect(()=>{const D=F=>{g.current&&!g.current.contains(F.target)&&m(null)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const C=(D,F)=>{u(D),n(F),o(!0)},B=()=>{o(!1),n(null)},S=D=>{D.preventDefault()},P=D=>{m(i===D?null:D)},j=D=>{vye.fire({title:"Crop Details",html:`
        <p><strong>Name:</strong> ${D.name}</p>
        <p><strong>Weight:</strong> ${D.weight}</p>
        <p><strong>Category:</strong> ${D.category_id}</p>
      `,icon:"info",confirmButtonText:"Close",confirmButtonColor:"#3085d6"})};return p.jsxs("div",{className:"container mx-auto p-6 bg-gradient-to-br from-green-50 via-yellow-50 to-blue-50 min-h-screen font-sans",children:[p.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-green-700",children:"Crop Management"}),p.jsx("div",{className:"flex justify-between mb-8",children:p.jsxs("button",{onClick:()=>C("create"),className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg shadow-md flex items-center transition",children:[p.jsx(DD,{className:"w-5 h-5 mr-2"}),"Create Crop"]})}),p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4 text-green-800",children:"Crop List"}),p.jsxs("table",{className:"w-full table-auto border border-gray-300 rounded-lg overflow-hidden",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-green-100 text-green-700",children:[p.jsx("th",{className:"py-2 px-3 text-left",children:"Name"}),p.jsx("th",{className:"py-2 px-3 text-left",children:"Weight"}),p.jsx("th",{className:"py-2 px-3 text-left",children:"Category"}),p.jsx("th",{className:"py-2 px-3 text-left",children:"Actions"})]})}),p.jsx("tbody",{children:t.map(D=>p.jsxs("tr",{className:"bg-white hover:bg-gray-100",children:[p.jsx("td",{className:"border-t py-2 px-3 text-left",children:D.name}),p.jsx("td",{className:"border-t py-2 px-3 text-left",children:D.weight}),p.jsx("td",{className:"border-t py-2 px-3 text-left",children:D.category_id}),p.jsxs("td",{className:"border-t py-2 px-3 text-left flex items-center space-x-2",children:[p.jsxs("button",{onClick:()=>j(D),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1 px-3 rounded-lg flex items-center transition",children:[p.jsx(fne,{className:"w-5 h-5 mr-1"}),"Details"]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>P(D.id),className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-1 px-3 rounded-lg flex items-center transition",children:[p.jsx(g3,{className:"w-5 h-5 mr-1"}),"Actions"]}),i===D.id&&p.jsxs("div",{ref:g,className:"absolute right-0 mt-2 w-32 bg-white border border-gray-300 rounded-lg shadow-lg",children:[p.jsxs("button",{onClick:()=>C("edit",D),className:"block px-4 py-2 text-gray-700 hover:bg-gray-200 w-full text-left rounded-t-lg flex items-center",children:[p.jsx(hne,{className:"w-5 h-5 mr-2 text-green-600"}),"Edit"]}),p.jsxs("button",{onClick:()=>{},className:"block px-4 py-2 text-red-600 hover:bg-red-100 w-full text-left rounded-b-lg flex items-center",children:[p.jsx(xne,{className:"w-5 h-5 mr-2"}),"Delete"]})]})]})]})]},D.id))})]})]}),s&&p.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md w-full max-w-lg",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4 text-green-800",children:c==="create"?"Create Crop":c==="edit"?"Edit Crop":"Crop Details"}),c==="details"?p.jsxs("div",{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Name:"})," ",r==null?void 0:r.name]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Weight:"})," ",r==null?void 0:r.weight]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Category:"})," ",r==null?void 0:r.category_id]}),p.jsxs("button",{onClick:B,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg mt-4 flex items-center justify-center transition",children:[p.jsx(g3,{className:"w-5 h-5 mr-2"}),"Close"]})]}):p.jsxs("form",{onSubmit:S,children:[p.jsxs("label",{className:"block mb-4",children:[p.jsx("span",{className:"text-gray-700",children:"Name"}),p.jsx("input",{type:"text",className:"form-input mt-1 block w-full border rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500",defaultValue:(r==null?void 0:r.name)||""})]}),p.jsxs("label",{className:"block mb-4",children:[p.jsx("span",{className:"text-gray-700",children:"Weight"}),p.jsx("input",{type:"text",className:"form-input mt-1 block w-full border rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500",defaultValue:(r==null?void 0:r.weight)||""})]}),p.jsxs("label",{className:"block mb-4",children:[p.jsx("span",{className:"text-gray-700",children:"Category"}),p.jsx("input",{type:"text",className:"form-input mt-1 block w-full border rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500",defaultValue:(r==null?void 0:r.category_id)||""})]}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsxs("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition flex items-center",children:[p.jsx(DD,{className:"w-5 h-5 mr-2"}),c==="create"?"Create":"Save"]}),"n",p.jsxs("button",{type:"button",onClick:B,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition flex items-center",children:[p.jsx(g3,{className:"w-5 h-5 mr-2"}),"Cancel"]})]})]})]})})]})},T7=({children:t})=>{const[e,r]=Ae.useState(null),[n,s]=Ae.useState({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1,dashDropdown:!1,eudrDropdown:!1}),[o,c]=Ae.useState(!1);Ae.useEffect(()=>{var F,R;const D=localStorage.getItem("token");if(D){const V=gb(D),Y=((F=V.sub)==null?void 0:F.user_type)||"",te=((R=V.sub)==null?void 0:R.is_admin)||!1;console.log("User role:",Y),r(Y),c(te),console.log("ato amin'ny layout ",te)}},[]);const u=Ae.useMemo(()=>o||e==="weather",[o,e]),i=Ae.useMemo(()=>o||e==="farmer",[o,e]),m=Ae.useMemo(()=>o||e==="forest",[o,e]),g=Ae.useMemo(()=>o||["weather","farmer","forest"].includes(e),[o,e]),C=Ae.useMemo(()=>o||["weather","farmer","forest"].includes(e),[o,e]),B=Ae.useMemo(()=>o||["weather","farmer","forest"].includes(e),[o,e]),S=()=>{localStorage.removeItem("token"),sessionStorage.clear(),window.location.href="/login"};Ae.useEffect(()=>{const D=F=>{!F.target.closest(".dropdown")&&!F.target.closest(".dropdown-btn")&&s({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1,dashDropdown:!1,eudrDropdown:!1})};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const P=D=>{setTimeout(()=>{s(F=>({...F,[D]:!0}))},200)},j=D=>{setTimeout(()=>{s(F=>({...F,[D]:!1}))},200)};return p.jsxs("div",{className:"bg-white min-h-screen font-poppins text-gray-800",children:[p.jsxs("header",{className:"bg-gradient-to-r from-teal-700 to-blue-800 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90",children:[p.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[p.jsx("span",{className:"bg-white p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:p.jsx("img",{src:PC,alt:"Description de l'image",className:"w-16 h-16 rounded-full object-cover"})}),p.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),p.jsxs("nav",{className:"hidden md:flex space-x-8 text-lg font-medium",children:[m&&p.jsxs("div",{className:"relative",onMouseEnter:()=>P("forestDropdown"),onMouseLeave:()=>j("forestDropdown"),children:[p.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Forest"}),n.forestDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsxs("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:[p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/forestpage",className:"block w-full h-full",children:"Forest Data"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/treemanager",className:"block w-full h-full",children:"Tree Manager"})})]})})]}),i&&p.jsxs("div",{className:"relative",onMouseEnter:()=>P("farmDropdown"),onMouseLeave:()=>j("farmDropdown"),children:[p.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Farm"}),n.farmDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsxs("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:[p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/farmergroup",className:"block w-full h-full",children:"Farmer Group"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/farmmanager",className:"block w-full h-full",children:"Farmer Manager"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/cropmanage",className:"block w-full h-full",children:"Crop"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"district",className:"block w-full h-full",children:"District"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx(Po,{to:"/mapviewall",state:{owner_type:"farmer"},className:"block w-full h-full",children:"View all"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx(Po,{to:"/storeProductManager",state:{owner_type:"farmer"},className:"block w-full h-full",children:"Store"})})]})})]}),g&&p.jsxs("div",{className:"relative",onMouseEnter:()=>P("digitalTraceDropdown"),onMouseLeave:()=>j("digitalTraceDropdown"),children:[p.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Digital Trace"}),n.digitalTraceDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsxs("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:[p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/qrproduce",className:"block w-full h-full",children:"Produce Stamps"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/qrconservation",className:"block w-full h-full",children:"Forest Conservation Stamps"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"qrexport",className:"block w-full h-full",children:"Export Stamps"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/qrfertilizer",className:"block w-full h-full",children:"Fertilizer Stamps"})})]})})]}),u&&p.jsxs("div",{className:"relative",onMouseEnter:()=>P("weatherDropdown"),onMouseLeave:()=>j("weatherDropdown"),children:[p.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Weather"}),n.weatherDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsxs("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:[p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/weathermapfarm",className:"block w-full h-full",children:"Map Weather"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/weatherhistory",className:"block w-full h-full",children:"Weather History"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/onemonth",className:"block w-full h-full",children:"HDD & CDD"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/graphpest",className:"block w-full h-full",children:"GDD for Pest"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/plantingdate",className:"block w-full h-full",children:"Planting Date"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/weatherdas",className:"block w-full h-full",children:"Anomaly Alert"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/alertmessage",className:"block w-full h-full",children:"Alert Messaging"})})]})})]}),C&&p.jsxs("div",{className:"relative",onMouseEnter:()=>P("dashDropdown"),onMouseLeave:()=>j("dashDropdown"),children:[p.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Dashboard"}),n.dashDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsx("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/userDash",className:"block w-full h-full",children:"Dashboard"})})})})]}),B&&p.jsxs("div",{className:"relative",onMouseEnter:()=>P("eudrDropdown"),onMouseLeave:()=>j("eudrDropdown"),children:[p.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"DDS"}),n.eudrDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsx("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/EUDRSubmission",className:"block w-full h-full",children:"DDS"})})})})]})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[e&&p.jsxs("div",{className:"bg-teal-100 text-teal-700 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-2",children:[e==="weather"&&"",e==="farmer"&&"",e==="forest"&&"",o&&"",p.jsx("span",{className:"capitalize",children:o?"Admin":e})]}),o&&p.jsxs(p.Fragment,{children:[p.jsxs(Po,{to:"/usermanager",className:"text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:[p.jsx(B7,{className:"inline-block"})," User Manager"]}),p.jsxs(Po,{to:"/featuresManager",className:"text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:[p.jsx(B7,{className:"inline-block"})," Feature Manager"]})]}),p.jsxs("button",{onClick:S,className:"bg-teal-100 text-teal-700 font-semibold px-4 py-2 rounded-lg shadow-md flex items-center gap-2 hover:bg-gray-300 hover:text-gray-900 transition-all duration-200",children:[p.jsx(Kce,{className:"text-xl"}),"Log Out"]})]})]}),p.jsx("div",{className:"mt-12 px-6",children:t})]})},bye=({isOpen:t,onClose:e,children:r})=>t?p.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-lg w-full",children:[p.jsx("div",{className:"p-6",children:r}),p.jsx("div",{className:"flex justify-end p-4",children:p.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",onClick:e,children:"Close"})})]})}):null,wye=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState(1),[s,o]=Ae.useState(1),[c,u]=Ae.useState(null),[i,m]=Ae.useState(null),[g,C]=Ae.useState({});Ae.useEffect(()=>{B(r)},[r]);const B=async V=>{try{const Y=await Tr.get(`/api/forest/?page=${V}`);e(Y.data.forests),o(Y.data.total_pages)}catch{Ti.fire({icon:"error",title:"Error",text:"Failed to fetch forests. Please try again."})}},S=V=>{u(c===V?null:V)},P=V=>{m(V.id),C({...V})},j=V=>{const{name:Y,value:te}=V.target;C(se=>({...se,[Y]:te}))},D=async()=>{try{(await Tr.post(`/api/forest/${i}/update`,{name:g.name,tree_type:g.tree_type})).data.success?(e(Y=>Y.map(te=>te.id===i?g:te)),m(null),Ti.fire({icon:"success",title:"Success",text:"Forest updated successfully."})):Ti.fire({icon:"error",title:"Error",text:"Failed to update the forest."})}catch{Ti.fire({icon:"error",title:"Error",text:"An error occurred while updating the forest."})}},F=async(V,Y)=>{if((await Ti.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{(await Tr.post(`/api/forest/${Y}/delete`)).data.success?(e(t.filter(oe=>oe.id!==Y)),Ti.fire({icon:"success",title:"Deleted!",text:"The forest has been deleted."})):Ti.fire({icon:"error",title:"Error",text:"Failed to delete the forest."})}catch{Ti.fire({icon:"error",title:"Error",text:"An error occurred while deleting the forest."})}},R=V=>{V>=1&&V<=s&&n(V)};return p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-extrabold mb-6 text-center text-teal-700",children:"Forest List"}),p.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[p.jsxs("table",{className:"w-full table-auto border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-teal-500 text-white",children:[p.jsx("th",{className:"px-4 py-2",children:"Forest ID"}),p.jsx("th",{className:"px-4 py-2",children:"Name"}),p.jsx("th",{className:"px-4 py-2",children:"Tree Type"}),p.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),p.jsx("tbody",{children:t.length>0?t.map(V=>p.jsxs("tr",{className:"bg-gray-50 hover:bg-gray-100",children:[p.jsx("td",{className:"border px-4 py-2",children:V.id}),p.jsx("td",{className:"border px-4 py-2",children:i===V.id?p.jsx("input",{type:"text",name:"name",value:g.name,onChange:j,className:"border rounded px-2 py-1 w-full"}):V.name}),p.jsx("td",{className:"border px-4 py-2",children:i===V.id?p.jsx("input",{type:"text",name:"tree_type",value:g.tree_type,onChange:j,className:"border rounded px-2 py-1 w-full"}):V.tree_type}),p.jsx("td",{className:"border px-4 py-2",children:p.jsxs("div",{className:"relative",children:[i===V.id?p.jsx("button",{onClick:D,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-2 rounded mr-2",children:"Validate"}):p.jsx("button",{onClick:()=>P(V),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded mr-2",children:"Update"}),p.jsx("button",{onClick:()=>S(V.id),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",children:"Actions"}),c===V.id&&p.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded shadow-lg z-10",children:[p.jsx("button",{onClick:()=>F("Delete",V.id),className:"block px-4 py-2 text-red-600 hover:bg-red-100 w-full text-left",children:"Delete"}),p.jsx(Po,{to:{pathname:"/mapview"},state:{owner_id:V.id,owner_type:"forest"},className:"block px-4 py-2 text-blue-600 hover:bg-blue-100 w-full text-left",children:"View"}),p.jsx(Po,{to:{pathname:"/mapbox"},state:{owner_id:V.id,owner_type:"forest"},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Create Maps"}),p.jsx(Po,{to:{pathname:"/reportforest"},state:{forestId:V.id},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"View Report"}),p.jsx(Po,{to:{pathname:"/reportcarbonforest"},state:{forestId:V.id},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Carbon report"})]})]})})]},V.id)):p.jsx("tr",{children:p.jsx("td",{colSpan:"4",className:"border px-4 py-2 text-center",children:"No forests available"})})})]}),s>1&&p.jsxs("div",{className:"flex justify-center mt-8",children:[p.jsx("button",{onClick:()=>R(r-1),disabled:r===1,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-l disabled:opacity-50",children:"Previous"}),p.jsxs("span",{className:"px-4 py-2",children:["Page ",r," of ",s]}),p.jsx("button",{onClick:()=>R(r+1),disabled:r===s,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-r disabled:opacity-50",children:"Next"})]})]})]})};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cye=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sye=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),L7=t=>{const e=Sye(t);return e.charAt(0).toUpperCase()+e.slice(1)},Oq=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),Bye=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tye=Ae.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},i)=>Ae.createElement("svg",{ref:i,...Eye,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Oq("lucide",s),...!o&&!Bye(u)&&{"aria-hidden":"true"},...u},[...c.map(([m,g])=>Ae.createElement(m,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=(t,e)=>{const r=Ae.forwardRef(({className:n,...s},o)=>Ae.createElement(Tye,{ref:o,iconNode:e,className:Oq(`lucide-${Cye(L7(t))}`,`lucide-${t}`,n),...s}));return r.displayName=L7(t),r};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lye=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Iye=qc("check",Lye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nye=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$6=qc("chevron-left",Nye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fye=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],q6=qc("chevron-right",Fye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_1=qc("circle-alert",Pye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],I7=qc("circle-check",jye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mye=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Rq=qc("download",Mye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Dye=qc("file-text",kye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oye=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Rye=qc("leaf",Oye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uye=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],zye=qc("list",Uye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qye=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Hye=qc("map-pin",Qye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Gye=qc("map",Vye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ye=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qye=qc("pen",$ye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wye=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],W6=qc("play",Wye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xye=qc("plus",Kye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yye=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],N7=qc("search",Yye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zye=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Jye=qc("trash-2",Zye);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1e=[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]],t1e=qc("trees",e1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],e1=qc("upload",r1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Am=qc("x",n1e),i1e=()=>{const[t,e]=Ae.useState(!1),[r,n]=Ae.useState(!1),[s,o]=Ae.useState(!1),c=()=>e(!0),u=()=>e(!1),i=async C=>{C.preventDefault();const B=new FormData(C.target);try{(await Tr.post("/api/forest/create",B,{headers:{"Content-Type":"multipart/form-data"}})).data.success?(Ti.fire("Success","Forest created successfully","success"),o(!s),u()):Ti.fire("Error","Failed to create forest","error")}catch(S){console.error("Error creating forest:",S),Ti.fire("Error","An error occurred while creating the forest","error")}},m=()=>{const C=`name,tree_type
Ambohimanga Forest,Eucalyptus
Ranomafana Forest,Pine
Andasibe Forest,Rosewood
Masoala Forest,Ebony
Isalo Forest,Baobab`,B=new Blob([C],{type:"text/csv"}),S=window.URL.createObjectURL(B),P=document.createElement("a");P.href=S,P.download="forest_import_template.csv",P.click(),window.URL.revokeObjectURL(S)},g=async C=>{var P,j;const B=C.target.files[0];if(!B)return;const S=new FormData;S.append("file",B);try{Ti.fire({title:"Importing Forests...",html:"Processing your CSV file...",allowOutsideClick:!1,didOpen:()=>{Ti.showLoading()}});const D=await Tr.post("/api/forest/bulk-create",S,{headers:{"Content-Type":"multipart/form-data"}}),{success:F,errors:R,skipped:V,details:Y}=D.data;let te='<div style="text-align: left; max-height: 400px; overflow-y: auto; padding: 10px;">';F>0&&(te+='<div style="margin-bottom: 15px;"><h4 style="color: #059669; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;"><span style="font-size: 20px;"></span> Successfully Created:</h4>',Y.forEach(se=>{se.status==="created"&&(te+=`<p style="color: #059669; margin: 5px 0; padding: 8px; background: #d1fae5; border-radius: 4px; border-left: 3px solid #059669;">
              <strong>Row ${se.row}:</strong> ${se.name} 
              <span style="color: #047857;">(${se.tree_type})</span> 
              - <span style="font-size: 11px; color: #065f46;">ID: ${se.forest_id}</span>
            </p>`)}),te+="</div>"),V>0&&(te+='<div style="margin-bottom: 15px;"><h4 style="color: #d97706; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;"><span style="font-size: 20px;"></span> Skipped (Already Exists):</h4>',Y.forEach(se=>{se.status==="skipped"&&(te+=`<p style="color: #d97706; margin: 5px 0; padding: 8px; background: #fef3c7; border-radius: 4px; border-left: 3px solid #d97706;">
              <strong>Row ${se.row}:</strong> ${se.name} 
              ${se.tree_type?`<span style="color: #b45309;">(${se.tree_type})</span>`:""} 
              <br><span style="font-size: 12px; color: #92400e;">${se.reason}</span>
            </p>`)}),te+="</div>"),R>0&&(te+='<div><h4 style="color: #dc2626; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;"><span style="font-size: 20px;"></span> Errors:</h4>',Y.forEach(se=>{se.error&&(te+=`<p style="color: #dc2626; margin: 5px 0; padding: 8px; background: #fee2e2; border-radius: 4px; border-left: 3px solid #dc2626;">
              <strong>Row ${se.row}:</strong> ${se.name||"N/A"}
              <br><span style="font-size: 12px; color: #991b1b;">${se.error}</span>
            </p>`)}),te+="</div>"),te+="</div>",Ti.fire({title:"Import Complete!",html:`
          <div style="text-align: center; margin-bottom: 20px;">
            <div style="display: inline-block; margin: 0 15px;">
              <div style="font-size: 32px; color: #059669; font-weight: bold;">${F}</div>
              <div style="color: #6b7280; font-size: 13px;">Created</div>
            </div>
            <div style="display: inline-block; margin: 0 15px;">
              <div style="font-size: 32px; color: #d97706; font-weight: bold;">${V}</div>
              <div style="color: #6b7280; font-size: 13px;">Skipped</div>
            </div>
            <div style="display: inline-block; margin: 0 15px;">
              <div style="font-size: 32px; color: #dc2626; font-weight: bold;">${R}</div>
              <div style="color: #6b7280; font-size: 13px;">Errors</div>
            </div>
          </div>
          <hr style="margin: 20px 0; border: none; border-top: 2px solid #e5e7eb;">
          ${te}
        `,icon:F>0?"success":V>0?"info":"error",width:"750px",confirmButtonText:"OK",confirmButtonColor:"#0d9488"}),F>0&&o(!s),n(!1)}catch(D){console.error("Bulk import error:",D),Ti.fire({title:"Error",text:((j=(P=D.response)==null?void 0:P.data)==null?void 0:j.msg)||"Failed to import forests",icon:"error",confirmButtonColor:"#dc2626"})}C.target.value=null};return p.jsxs("div",{className:"container mx-auto px-6 py-8 bg-gray-50 min-h-screen",children:[p.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-teal-800",children:"Forest Management"}),p.jsxs("div",{className:"flex flex-col items-center mb-8",children:[p.jsxs("div",{className:"flex flex-wrap gap-3 justify-center mb-6",children:[p.jsxs("button",{onClick:c,className:"bg-teal-600 text-white font-semibold px-6 py-3 rounded-md shadow-lg hover:bg-teal-700 transition duration-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Forest"]}),p.jsxs("button",{onClick:()=>n(!0),className:"bg-purple-600 text-white font-semibold px-6 py-3 rounded-md shadow-lg hover:bg-purple-700 transition duration-300 flex items-center gap-2",children:[p.jsx(e1,{className:"w-5 h-5"}),"Bulk Import"]}),p.jsx(Po,{to:"/mapviewall",state:{owner_type:"forest"},className:"bg-blue-500 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-md shadow-lg transition duration-300",children:"View All Forests"}),p.jsx(Po,{to:"/treemanager",state:{owner_type:"forest"},className:"bg-green-500 hover:bg-green-700 text-white font-semibold px-6 py-3 rounded-md shadow-lg transition duration-300",children:"Go to Trees"})]}),p.jsx("div",{className:"w-full bg-white p-6 rounded-lg shadow-md",children:p.jsx(wye,{},s)})]}),p.jsx(bye,{isOpen:t,onClose:u,children:p.jsxs("form",{onSubmit:i,className:"space-y-4",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-teal-800",children:"Create New Forest"}),p.jsx("input",{type:"text",name:"name",placeholder:"Forest Name",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-teal-400",required:!0}),p.jsx("input",{type:"text",name:"tree_type",placeholder:"Tree Type (e.g., Oak, Pine, Eucalyptus)",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-teal-400",required:!0}),p.jsx("input",{type:"file",name:"image",accept:"image/*",className:"border rounded-md px-4 py-3 w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400"}),p.jsx("button",{type:"submit",className:"bg-teal-600 text-white font-semibold px-6 py-3 rounded-md shadow-lg hover:bg-teal-700 transition duration-300 w-full",children:"Create Forest"})]})}),r&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-purple-800 flex items-center gap-2",children:[p.jsx(e1,{className:"w-6 h-6"}),"Bulk Import Forests"]}),p.jsx("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700 transition",children:p.jsx(Am,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4 flex items-start gap-3",children:[p.jsx(_1,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-semibold text-amber-800 mb-1",children:"Duplicate Prevention Active"}),p.jsxs("p",{className:"text-amber-700",children:["Forests with the same ",p.jsx("strong",{children:"name AND tree type"})," will be automatically skipped. You can have forests with the same name but different tree types."]}),p.jsxs("div",{className:"mt-2 bg-white rounded p-2 text-xs text-amber-900",children:[p.jsx("p",{className:"font-mono",children:' "Oak Forest" (Eucalyptus) - New entry'}),p.jsx("p",{className:"font-mono",children:' "Oak Forest" (Pine) - Different type, will create'}),p.jsx("p",{className:"font-mono",children:' "Oak Forest" (Eucalyptus) - Duplicate, will skip'})]})]})]}),p.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[p.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"CSV Format Instructions"]}),p.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Your CSV file must include these columns:"}),p.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-4",children:[p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-purple-600 font-bold",children:""}),p.jsxs("div",{children:[p.jsx("strong",{className:"text-purple-700",children:"name"})," - Forest name (required)",p.jsx("div",{className:"text-xs text-gray-500 mt-1",children:'Example: "Ambohimanga Forest"'})]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-purple-600 font-bold",children:""}),p.jsxs("div",{children:[p.jsx("strong",{className:"text-purple-700",children:"tree_type"})," - Primary tree type (required)",p.jsx("div",{className:"text-xs text-gray-500 mt-1",children:'Example: "Eucalyptus", "Pine", "Oak"'})]})]})]})]}),p.jsxs("button",{onClick:m,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition flex items-center justify-center gap-2",children:[p.jsx(Rq,{className:"w-5 h-5"}),"Download CSV Template"]}),p.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-lg p-8 text-center bg-purple-50 hover:bg-purple-100 transition",children:[p.jsx(e1,{className:"w-16 h-16 mx-auto text-purple-400 mb-4"}),p.jsx("p",{className:"text-gray-700 mb-2 font-semibold",children:"Choose your CSV file to upload"}),p.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Maximum file size: 5MB"}),p.jsx("input",{type:"file",accept:".csv",onChange:g,className:"hidden",id:"csv-upload-forest"}),p.jsx("label",{htmlFor:"csv-upload-forest",className:"inline-block bg-purple-600 hover:bg-purple-700 text-white font-semibold px-8 py-3 rounded-lg cursor-pointer transition shadow-md",children:"Select CSV File"})]}),p.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[p.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Example CSV Content:"}),p.jsx("pre",{className:"text-xs bg-white p-3 rounded border border-gray-300 overflow-x-auto",children:`name,tree_type
Ambohimanga Forest,Eucalyptus
Ranomafana Forest,Pine
Andasibe Forest,Rosewood
Ambohimanga Forest,Pine`}),p.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Note: Last line has same name but different tree type - it will be created"})]})]})]})})]})};function s1e(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M416 128 192 384l-96-96"},child:[]}]})(t)}function o1e(t){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(t)}const a1e=({isOpen:t,onClose:e,setUpdateFlag:r})=>{const[n,s]=Ae.useState({name:"",subcounty:"",district_id:"",farmergroup_id:"",longitude:"",latitude:"",phonenumber1:"",phonenumber2:""}),[o,c]=Ae.useState({}),[u,i]=Ae.useState({}),[m,g]=Ae.useState(!0),[C,B]=Ae.useState(!0),[S,P]=Ae.useState(!1),[j,D]=Ae.useState(null);Ae.useEffect(()=>{t&&(F(),R(),V())},[t]);const F=async()=>{g(!0);try{const oe=(await Tr.get("/api/district/")).data.districts.reduce((K,de)=>(K[de.id]=de.name,K),{});c(oe)}catch(se){console.error("Error fetching districts:",se)}finally{g(!1)}},R=async()=>{B(!0);try{const oe=(await Tr.get("/api/farmergroup/")).data.reduce((K,de)=>(K[de.id]=de.name,K),{});i(oe)}catch(se){console.error("Error fetching farmer groups:",se)}finally{B(!1)}},V=()=>{s({name:"",subcounty:"",district_id:"",farmergroup_id:"",longitude:"",latitude:"",phonenumber1:"",phonenumber2:""}),D(null)},Y=se=>{s({...n,[se.target.name]:se.target.value})},te=async se=>{se.preventDefault(),P(!0),D(null);const oe={...n,geolocation:`${n.latitude},${n.longitude}`};try{(await Tr.post("/api/farm/create",oe)).data.success?(console.log("Farm created successfully"),r(de=>!de),V(),e()):D("Failed to create farm. Please try again.")}catch(K){console.error("Error creating farm:",K),D("An error occurred while creating the farm.")}finally{P(!1)}};return p.jsx("div",{id:"farmModal",className:`fixed inset-0 bg-gray-900 bg-opacity-50 ${t?"flex":"hidden"} items-center justify-center`,children:p.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-3xl mx-4 md:mx-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-3xl font-bold text-indigo-700",children:"Create a Farm"}),p.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition",children:p.jsx(o1e,{size:24})})]}),p.jsxs("form",{onSubmit:te,className:"space-y-6",children:[j&&p.jsx("div",{className:"text-red-500",children:j}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Farm Name:"}),p.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:n.name,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"subcounty",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Subcounty:"}),p.jsx("input",{type:"text",id:"subcounty",name:"subcounty",required:!0,value:n.subcounty,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"district_id",className:"block text-gray-700 text-sm font-semibold mb-2",children:"District:"}),m?p.jsx("p",{children:"Loading districts..."}):p.jsxs("select",{id:"district_id",name:"district_id",required:!0,value:n.district_id,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[p.jsx("option",{value:"",children:"None"}),Object.entries(o).map(([se,oe])=>p.jsx("option",{value:se,children:oe},se))]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"farmergroup_id",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Farmer Group:"}),C?p.jsx("p",{children:"Loading farmer groups..."}):p.jsxs("select",{id:"farmergroup_id",name:"farmergroup_id",required:!0,value:n.farmergroup_id,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[p.jsx("option",{value:"",children:"None"}),Object.entries(u).map(([se,oe])=>p.jsx("option",{value:se,children:oe},se))]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"longitude",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Longitude:"}),p.jsx("input",{type:"text",id:"longitude",name:"longitude",required:!0,value:n.longitude,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"latitude",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Latitude:"}),p.jsx("input",{type:"text",id:"latitude",name:"latitude",required:!0,value:n.latitude,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"phonenumber1",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Phone Number 1:"}),p.jsx("input",{type:"text",id:"phonenumber1",name:"phonenumber1",value:n.phonenumber1,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("label",{htmlFor:"phonenumber2",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Phone Number 2:"}),p.jsx("input",{type:"text",id:"phonenumber2",name:"phonenumber2",value:n.phonenumber2,onChange:Y,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{type:"submit",disabled:S,className:"bg-indigo-600 text-white py-2 px-6 rounded-lg hover:bg-indigo-500 focus:ring-2 focus:ring-indigo-400 focus:ring-opacity-50 transition",children:S?"Submitting...":p.jsxs("div",{className:"flex items-center",children:[p.jsx(s1e,{size:20,className:"mr-2"}),p.jsx("span",{children:"Submit"})]})})})]})]})})},l1e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState({}),[s,o]=Ae.useState({}),[c,u]=Ae.useState(1),[i,m]=Ae.useState(1),[g,C]=Ae.useState(null);Ae.useEffect(()=>{B(c),S(),P()},[c]);const B=async R=>{try{const V=await Tr.get(`/api/farm/?page=${R}`);e(V.data.farms),m(V.data.total_pages)}catch(V){console.error("Error fetching farms:",V)}},S=async()=>{try{const V=(await Tr.get("/api/district/")).data.districts.reduce((Y,te)=>(Y[te.id]=te.name,Y),{});n(V)}catch(R){console.error("Error fetching districts:",R)}},P=async()=>{try{const V=(await Tr.get("/api/farmergroup/")).data.reduce((Y,te)=>(Y[te.id]=te.name,Y),{});o(V)}catch(R){console.error("Error fetching farmer groups:",R)}},j=R=>{C(g===R?null:R)},D=async(R,V)=>{if(console.log(`${R} action for farm ID: ${V}`),R==="Delete")if(window.confirm("Are you sure you want to delete this farm? This action cannot be undone."))try{(await Tr.post(`/api/farm/${V}/delete`)).data.success?(e(t.filter(se=>se.id!==V)),console.log("Farm deleted successfully")):console.error("Failed to delete farm")}catch(te){console.error("Error deleting farm:",te)}else console.log("User canceled the deletion")},F=R=>{R>=1&&R<=i&&u(R)};return p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-extrabold mb-6 text-center text-teal-700",children:"Farm List"}),p.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[p.jsxs("table",{className:"w-full table-auto border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-teal-500 text-white",children:[p.jsx("th",{className:"px-4 py-2",children:"Farm ID"}),p.jsx("th",{className:"px-4 py-2",children:"Name"}),p.jsx("th",{className:"px-4 py-2",children:"District"}),p.jsx("th",{className:"px-4 py-2",children:"Farmer Group"}),p.jsx("th",{className:"px-4 py-2",children:"Geolocations"}),p.jsx("th",{className:"px-4 py-2",children:"Phone Number 1"}),p.jsx("th",{className:"px-4 py-2",children:"Phone Number 2"}),p.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),p.jsx("tbody",{children:t.length>0?t.map(R=>p.jsxs("tr",{className:"bg-gray-50 hover:bg-gray-100",children:[p.jsx("td",{className:"border px-4 py-2",children:R.id}),p.jsx("td",{className:"border px-4 py-2",children:R.name}),p.jsx("td",{className:"border px-4 py-2",children:r[R.district_id]}),p.jsx("td",{className:"border px-4 py-2",children:s[R.farmergroup_id]}),p.jsx("td",{className:"border px-4 py-2",children:R.geolocation}),p.jsx("td",{className:"border px-4 py-2",children:R.phonenumber1}),p.jsx("td",{className:"border px-4 py-2",children:R.phonenumber2}),p.jsx("td",{className:"border px-4 py-2",children:p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>j(R.id),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",children:"Actions"}),g===R.id&&p.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded shadow-lg z-10",children:[p.jsx("button",{onClick:()=>D("Update",R.id),className:"block px-4 py-2 text-teal-600 hover:bg-teal-100 w-full text-left",children:"Update"}),p.jsx("button",{onClick:()=>D("Delete",R.id),className:"block px-4 py-2 text-red-600 hover:bg-red-100 w-full text-left",children:"Delete"}),p.jsx(Po,{to:{pathname:"/mapview"},state:{owner_id:R.id,owner_type:"farmer",geolocation:R.geolocation},className:"block px-4 py-2 text-blue-600 hover:bg-blue-100 w-full text-left",children:"View"}),p.jsx(Po,{to:"/farmdata",className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Add FD"}),p.jsx(Po,{to:{pathname:"/mapbox"},state:{owner_id:R.id,owner_type:"farmer",geolocation:R.geolocation},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Create Maps"}),p.jsx(Po,{to:{pathname:"/reportfarmer"},state:{farmId:R.id},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"view report"})]})]})})]},R.id)):p.jsx("tr",{children:p.jsx("td",{colSpan:"8",className:"border px-4 py-2 text-center",children:"No farms available"})})})]}),i>1&&p.jsxs("div",{className:"flex justify-center mt-8",children:[p.jsx("button",{onClick:()=>F(c-1),disabled:c===1,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-l disabled:opacity-50",children:"Previous"}),p.jsxs("span",{className:"px-4 py-2",children:["Page ",c," of ",i]}),p.jsx("button",{onClick:()=>F(c+1),disabled:c===i,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-r disabled:opacity-50",children:"Next"})]})]})]})},c1e=()=>{const[t,e]=Ae.useState(!1),r=()=>e(!0),n=()=>e(!1);return p.jsxs("div",{children:[p.jsx(a1e,{isOpen:t,onClose:n}),p.jsx("button",{onClick:r,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Create Farm"}),p.jsx(Po,{to:"/mapviewall",state:{owner_type:"farmer"},className:"inline-block m-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"View All Farms"}),p.jsx(l1e,{})]})},u1e=()=>p.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-4xl",children:[p.jsx("div",{className:"flex justify-between items-center mb-4",children:p.jsx("h1",{className:"text-3xl font-extrabold text-teal-700",children:"Create / Edit Farm Data"})}),p.jsxs("form",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"farm_id",className:"block text-gray-700",children:"Farm:"}),p.jsx("select",{name:"farm_id",id:"farm_id",className:"border rounded p-2 w-full",required:!0,children:p.jsx("option",{value:"",children:"Select Farm"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"crop_id",className:"block text-gray-700",children:"Crop:"}),p.jsx("select",{name:"crop_id",id:"crop_id",className:"border rounded p-2 w-full",required:!0,children:p.jsx("option",{value:"",children:"Select Crop"})})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"land_type",className:"block text-gray-700",children:"Land Type:"}),p.jsx("input",{type:"text",name:"land_type",id:"land_type",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"tilled_land_size",className:"block text-gray-700",children:"Tilled Land Size:"}),p.jsx("input",{type:"number",name:"tilled_land_size",id:"tilled_land_size",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"planting_date",className:"block text-gray-700",children:"Planting Date:"}),p.jsx("input",{type:"date",name:"planting_date",id:"planting_date",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"season",className:"block text-gray-700",children:"Season:"}),p.jsx("input",{type:"number",name:"season",id:"season",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"quality",className:"block text-gray-700",children:"Quality:"}),p.jsx("input",{type:"text",name:"quality",id:"quality",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"quantity",className:"block text-gray-700",children:"Quantity:"}),p.jsx("input",{type:"number",name:"quantity",id:"quantity",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"harvest_date",className:"block text-gray-700",children:"Harvest Date:"}),p.jsx("input",{type:"date",name:"harvest_date",id:"harvest_date",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"expected_yield",className:"block text-gray-700",children:"Expected Yield:"}),p.jsx("input",{type:"number",name:"expected_yield",id:"expected_yield",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"actual_yield",className:"block text-gray-700",children:"Actual Yield:"}),p.jsx("input",{type:"number",name:"actual_yield",id:"actual_yield",className:"border rounded p-2 w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"timestamp",className:"block text-gray-700",children:"Timestamp:"}),p.jsx("input",{type:"datetime-local",name:"timestamp",id:"timestamp",className:"border rounded p-2 w-full",required:!0})]})]}),p.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[p.jsx(Po,{to:"/farmmanager",className:"bg-gray-500 text-white py-2 px-4 rounded inline-flex items-center",children:p.jsx("span",{children:"Cancel"})}),p.jsx("button",{type:"submit",className:"bg-teal-500 text-white py-2 px-4 rounded",children:"Save"})]})]})]})}),Uq=({isOpen:t,crop:e,categories:r=[],onClose:n})=>t?p.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md w-full max-w-lg",children:[p.jsxs("h1",{className:"text-2xl font-bold mb-4",children:[e?"Edit":"Create"," Crop"]}),p.jsxs("form",{className:"bg-white p-6 rounded-lg shadow-md",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:"block text-gray-700",children:"Name:"}),p.jsx("input",{type:"text",id:"name",name:"name",className:"w-full p-2 border border-gray-300 rounded mt-1",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"weight",className:"block text-gray-700",children:"Weight:"}),p.jsx("input",{type:"number",step:"0.01",id:"weight",name:"weight",className:"w-full p-2 border border-gray-300 rounded mt-1",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"category_id",className:"block text-gray-700",children:"Category:"}),p.jsx("select",{id:"category_id",name:"category_id",className:"w-full p-2 border border-gray-300 rounded mt-1",required:!0,children:r.map(s=>p.jsx("option",{value:s.id,children:s.name},s.id))})]})]}),p.jsxs("div",{className:"flex justify-between mt-4",children:[p.jsx("button",{type:"button",onClick:n,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:e?"Update":"Create"})]}),p.jsx("a",{href:"/createcategory",className:"text-blue-500 hover:underline block mt-4",children:"Create Category"})]})]})}):null;Uq.propTypes={isOpen:l2.bool.isRequired,crop:l2.object,categories:l2.array,onClose:l2.func.isRequired};const d1e=()=>{const[t,e]=Ae.useState(!1),r=()=>e(!1);return p.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-green-100 to-blue-200 p-6 font-sans",children:[p.jsx(Uq,{isOpen:t,onClose:r}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 w-full max-w-4xl",children:[p.jsxs(Po,{to:"/cropmanager",className:"bg-blue-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-blue-400 hover:bg-blue-200 transition-transform transform hover:scale-105 duration-300",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(J_,{className:"text-green-600 text-4xl"})," ",p.jsx("h3",{className:"text-2xl font-bold",children:"Crop Manager"})]}),p.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Manage and organize crops effectively."})]}),p.jsxs(Po,{to:"/irrigationmanager",className:"bg-yellow-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-yellow-400 hover:bg-yellow-200 transition-transform transform hover:scale-105 duration-300",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(wne,{className:"text-blue-600 text-4xl"})," ",p.jsx("h3",{className:"text-2xl font-bold",children:"Irrigation Manager"})]}),p.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Oversee and control irrigation systems."})]}),p.jsxs(Po,{to:"/cropcoefficientmanager",className:"bg-green-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-green-400 hover:bg-green-200 transition-transform transform hover:scale-105 duration-300",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(sN,{className:"text-green-600 text-4xl"})," ",p.jsx("h3",{className:"text-2xl font-bold",children:"Crop Coefficient Manager"})]}),p.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Manage crop coefficient data for better insights."})]}),p.jsxs(Po,{to:"/grademanager",className:"bg-gray-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-gray-400 hover:bg-gray-200 transition-transform transform hover:scale-105 duration-300",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(une,{className:"text-purple-600 text-4xl"})," ",p.jsx("h3",{className:"text-2xl font-bold",children:"Grade Manager"})]}),p.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Handle grading of crops for quality control."})]})]})]})};var K6={exports:{}},_0={},X6={exports:{}},Uf={},Y6={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=g;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var r="none",n="contents",s=/input|select|textarea|button|object|iframe/;function o(C,B){return B.getPropertyValue("overflow")!=="visible"||C.scrollWidth<=0&&C.scrollHeight<=0}function c(C){var B=C.offsetWidth<=0&&C.offsetHeight<=0;if(B&&!C.innerHTML)return!0;try{var S=window.getComputedStyle(C),P=S.getPropertyValue("display");return B?P!==n&&o(C,S):P===r}catch{return console.warn("Failed to inspect element style"),!1}}function u(C){for(var B=C,S=C.getRootNode&&C.getRootNode();B&&B!==document.body;){if(S&&B===S&&(B=S.host.parentNode),c(B))return!1;B=B.parentNode}return!0}function i(C,B){var S=C.nodeName.toLowerCase(),P=s.test(S)&&!C.disabled||S==="a"&&C.href||B;return P&&u(C)}function m(C){var B=C.getAttribute("tabindex");B===null&&(B=void 0);var S=isNaN(B);return(S||B>=0)&&i(C,!S)}function g(C){var B=[].slice.call(C.querySelectorAll("*"),0).reduce(function(S,P){return S.concat(P.shadowRoot?g(P.shadowRoot):[P])},[]);return B.filter(m)}t.exports=e.default})(Y6,Y6.exports);var zq=Y6.exports;Object.defineProperty(Uf,"__esModule",{value:!0});Uf.resetState=A1e;Uf.log=m1e;Uf.handleBlur=O_;Uf.handleFocus=R_;Uf.markForFocusLater=g1e;Uf.returnFocus=y1e;Uf.popWithoutFocus=v1e;Uf.setupScopedFocus=x1e;Uf.teardownScopedFocus=_1e;var h1e=zq,f1e=p1e(h1e);function p1e(t){return t&&t.__esModule?t:{default:t}}var b1=[],zy=null,Z6=!1;function A1e(){b1=[]}function m1e(){}function O_(){Z6=!0}function R_(){if(Z6){if(Z6=!1,!zy)return;setTimeout(function(){if(!zy.contains(document.activeElement)){var t=(0,f1e.default)(zy)[0]||zy;t.focus()}},0)}}function g1e(){b1.push(document.activeElement)}function y1e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{b1.length!==0&&(e=b1.pop(),e.focus({preventScroll:t}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function v1e(){b1.length>0&&b1.pop()}function x1e(t){zy=t,window.addEventListener?(window.addEventListener("blur",O_,!1),document.addEventListener("focus",R_,!0)):(window.attachEvent("onBlur",O_),document.attachEvent("onFocus",R_))}function _1e(){zy=null,window.addEventListener?(window.removeEventListener("blur",O_),document.removeEventListener("focus",R_)):(window.detachEvent("onBlur",O_),document.detachEvent("onFocus",R_))}var J6={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var r=zq,n=s(r);function s(u){return u&&u.__esModule?u:{default:u}}function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return u.activeElement.shadowRoot?o(u.activeElement.shadowRoot):u.activeElement}function c(u,i){var m=(0,n.default)(u);if(!m.length){i.preventDefault();return}var g=void 0,C=i.shiftKey,B=m[0],S=m[m.length-1],P=o();if(u===P){if(!C)return;g=S}if(S===P&&!C&&(g=B),B===P&&C&&(g=S),g){i.preventDefault(),g.focus();return}var j=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),D=j!=null&&j[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(D){var F=m.indexOf(P);if(F>-1&&(F+=C?-1:1),g=m[F],typeof g>"u"){i.preventDefault(),g=C?S:B,g.focus();return}i.preventDefault(),g.focus()}}t.exports=e.default})(J6,J6.exports);var b1e=J6.exports,zf={},w1e=function(){},C1e=w1e,Df={},Qq={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=r:window.ExecutionEnvironment=r})()})(Qq);var S1e=Qq.exports;Object.defineProperty(Df,"__esModule",{value:!0});Df.canUseDOM=Df.SafeNodeList=Df.SafeHTMLCollection=void 0;var B1e=S1e,E1e=T1e(B1e);function T1e(t){return t&&t.__esModule?t:{default:t}}var jC=E1e.default,L1e=jC.canUseDOM?window.HTMLElement:{};Df.SafeHTMLCollection=jC.canUseDOM?window.HTMLCollection:{};Df.SafeNodeList=jC.canUseDOM?window.NodeList:{};Df.canUseDOM=jC.canUseDOM;Df.default=L1e;Object.defineProperty(zf,"__esModule",{value:!0});zf.resetState=j1e;zf.log=M1e;zf.assertNodeList=Hq;zf.setElement=k1e;zf.validateElement=bF;zf.hide=D1e;zf.show=O1e;zf.documentNotReadyOrSSRTesting=R1e;var I1e=C1e,N1e=P1e(I1e),F1e=Df;function P1e(t){return t&&t.__esModule?t:{default:t}}var Gh=null;function j1e(){Gh&&(Gh.removeAttribute?Gh.removeAttribute("aria-hidden"):Gh.length!=null?Gh.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(Gh).forEach(function(t){return t.removeAttribute("aria-hidden")})),Gh=null}function M1e(){}function Hq(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function k1e(t){var e=t;if(typeof e=="string"&&F1e.canUseDOM){var r=document.querySelectorAll(e);Hq(r,e),e=r}return Gh=e||Gh,Gh}function bF(t){var e=t||Gh;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,N1e.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function D1e(t){var e=!0,r=!1,n=void 0;try{for(var s=bF(t)[Symbol.iterator](),o;!(e=(o=s.next()).done);e=!0){var c=o.value;c.setAttribute("aria-hidden","true")}}catch(u){r=!0,n=u}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}}function O1e(t){var e=!0,r=!1,n=void 0;try{for(var s=bF(t)[Symbol.iterator](),o;!(e=(o=s.next()).done);e=!0){var c=o.value;c.removeAttribute("aria-hidden")}}catch(u){r=!0,n=u}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}}function R1e(){Gh=null}var D1={};Object.defineProperty(D1,"__esModule",{value:!0});D1.resetState=U1e;D1.log=z1e;var Hx={},Vx={};function F7(t,e){t.classList.remove(e)}function U1e(){var t=document.getElementsByTagName("html")[0];for(var e in Hx)F7(t,Hx[e]);var r=document.body;for(var n in Vx)F7(r,Vx[n]);Hx={},Vx={}}function z1e(){}var Q1e=function(e,r){return e[r]||(e[r]=0),e[r]+=1,r},H1e=function(e,r){return e[r]&&(e[r]-=1),r},V1e=function(e,r,n){n.forEach(function(s){Q1e(r,s),e.add(s)})},G1e=function(e,r,n){n.forEach(function(s){H1e(r,s),r[s]===0&&e.remove(s)})};D1.add=function(e,r){return V1e(e.classList,e.nodeName.toLowerCase()=="html"?Hx:Vx,r.split(" "))};D1.remove=function(e,r){return G1e(e.classList,e.nodeName.toLowerCase()=="html"?Hx:Vx,r.split(" "))};var O1={};Object.defineProperty(O1,"__esModule",{value:!0});O1.log=q1e;O1.resetState=W1e;function $1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Vq=function t(){var e=this;$1e(this,t),this.register=function(r){e.openInstances.indexOf(r)===-1&&(e.openInstances.push(r),e.emit("register"))},this.deregister=function(r){var n=e.openInstances.indexOf(r);n!==-1&&(e.openInstances.splice(n,1),e.emit("deregister"))},this.subscribe=function(r){e.subscribers.push(r)},this.emit=function(r){e.subscribers.forEach(function(n){return n(r,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},C4=new Vq;function q1e(){console.log("portalOpenInstances ----------"),console.log(C4.openInstances.length),C4.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function W1e(){C4=new Vq}O1.default=C4;var wF={};Object.defineProperty(wF,"__esModule",{value:!0});wF.resetState=Z1e;wF.log=J1e;var K1e=O1,X1e=Y1e(K1e);function Y1e(t){return t&&t.__esModule?t:{default:t}}var Gu=void 0,Lf=void 0,s0=[];function Z1e(){for(var t=[Gu,Lf],e=0;e<t.length;e++){var r=t[e];r&&r.parentNode&&r.parentNode.removeChild(r)}Gu=Lf=null,s0=[]}function J1e(){console.log("bodyTrap ----------"),console.log(s0.length);for(var t=[Gu,Lf],e=0;e<t.length;e++){var r=t[e],n=r||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")}function P7(){s0.length!==0&&s0[s0.length-1].focusContent()}function eve(t,e){!Gu&&!Lf&&(Gu=document.createElement("div"),Gu.setAttribute("data-react-modal-body-trap",""),Gu.style.position="absolute",Gu.style.opacity="0",Gu.setAttribute("tabindex","0"),Gu.addEventListener("focus",P7),Lf=Gu.cloneNode(),Lf.addEventListener("focus",P7)),s0=e,s0.length>0?(document.body.firstChild!==Gu&&document.body.insertBefore(Gu,document.body.firstChild),document.body.lastChild!==Lf&&document.body.appendChild(Lf)):(Gu.parentElement&&Gu.parentElement.removeChild(Gu),Lf.parentElement&&Lf.parentElement.removeChild(Lf))}X1e.default.subscribe(eve);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(be){for(var He=1;He<arguments.length;He++){var Fe=arguments[He];for(var ve in Fe)Object.prototype.hasOwnProperty.call(Fe,ve)&&(be[ve]=Fe[ve])}return be},n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},s=function(){function be(He,Fe){for(var ve=0;ve<Fe.length;ve++){var _e=Fe[ve];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(He,_e.key,_e)}}return function(He,Fe,ve){return Fe&&be(He.prototype,Fe),ve&&be(He,ve),He}}(),o=Ae,c=N0,u=te(c),i=Uf,m=Y(i),g=b1e,C=te(g),B=zf,S=Y(B),P=D1,j=Y(P),D=Df,F=te(D),R=O1,V=te(R);function Y(be){if(be&&be.__esModule)return be;var He={};if(be!=null)for(var Fe in be)Object.prototype.hasOwnProperty.call(be,Fe)&&(He[Fe]=be[Fe]);return He.default=be,He}function te(be){return be&&be.__esModule?be:{default:be}}function se(be,He){if(!(be instanceof He))throw new TypeError("Cannot call a class as a function")}function oe(be,He){if(!be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return He&&(typeof He=="object"||typeof He=="function")?He:be}function K(be,He){if(typeof He!="function"&&He!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof He);be.prototype=Object.create(He&&He.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),He&&(Object.setPrototypeOf?Object.setPrototypeOf(be,He):be.__proto__=He)}var de={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},we=function(He){return He.code==="Tab"||He.keyCode===9},J=function(He){return He.code==="Escape"||He.keyCode===27},Z=0,Ie=function(be){K(He,be);function He(Fe){se(this,He);var ve=oe(this,(He.__proto__||Object.getPrototypeOf(He)).call(this,Fe));return ve.setOverlayRef=function(_e){ve.overlay=_e,ve.props.overlayRef&&ve.props.overlayRef(_e)},ve.setContentRef=function(_e){ve.content=_e,ve.props.contentRef&&ve.props.contentRef(_e)},ve.afterClose=function(){var _e=ve.props,ze=_e.appElement,Ne=_e.ariaHideApp,st=_e.htmlOpenClassName,ie=_e.bodyOpenClassName,le=_e.parentSelector,pe=le&&le().ownerDocument||document;ie&&j.remove(pe.body,ie),st&&j.remove(pe.getElementsByTagName("html")[0],st),Ne&&Z>0&&(Z-=1,Z===0&&S.show(ze)),ve.props.shouldFocusAfterRender&&(ve.props.shouldReturnFocusAfterClose?(m.returnFocus(ve.props.preventScroll),m.teardownScopedFocus()):m.popWithoutFocus()),ve.props.onAfterClose&&ve.props.onAfterClose(),V.default.deregister(ve)},ve.open=function(){ve.beforeOpen(),ve.state.afterOpen&&ve.state.beforeClose?(clearTimeout(ve.closeTimer),ve.setState({beforeClose:!1})):(ve.props.shouldFocusAfterRender&&(m.setupScopedFocus(ve.node),m.markForFocusLater()),ve.setState({isOpen:!0},function(){ve.openAnimationFrame=requestAnimationFrame(function(){ve.setState({afterOpen:!0}),ve.props.isOpen&&ve.props.onAfterOpen&&ve.props.onAfterOpen({overlayEl:ve.overlay,contentEl:ve.content})})}))},ve.close=function(){ve.props.closeTimeoutMS>0?ve.closeWithTimeout():ve.closeWithoutTimeout()},ve.focusContent=function(){return ve.content&&!ve.contentHasFocus()&&ve.content.focus({preventScroll:!0})},ve.closeWithTimeout=function(){var _e=Date.now()+ve.props.closeTimeoutMS;ve.setState({beforeClose:!0,closesAt:_e},function(){ve.closeTimer=setTimeout(ve.closeWithoutTimeout,ve.state.closesAt-Date.now())})},ve.closeWithoutTimeout=function(){ve.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},ve.afterClose)},ve.handleKeyDown=function(_e){we(_e)&&(0,C.default)(ve.content,_e),ve.props.shouldCloseOnEsc&&J(_e)&&(_e.stopPropagation(),ve.requestClose(_e))},ve.handleOverlayOnClick=function(_e){ve.shouldClose===null&&(ve.shouldClose=!0),ve.shouldClose&&ve.props.shouldCloseOnOverlayClick&&(ve.ownerHandlesClose()?ve.requestClose(_e):ve.focusContent()),ve.shouldClose=null},ve.handleContentOnMouseUp=function(){ve.shouldClose=!1},ve.handleOverlayOnMouseDown=function(_e){!ve.props.shouldCloseOnOverlayClick&&_e.target==ve.overlay&&_e.preventDefault()},ve.handleContentOnClick=function(){ve.shouldClose=!1},ve.handleContentOnMouseDown=function(){ve.shouldClose=!1},ve.requestClose=function(_e){return ve.ownerHandlesClose()&&ve.props.onRequestClose(_e)},ve.ownerHandlesClose=function(){return ve.props.onRequestClose},ve.shouldBeClosed=function(){return!ve.state.isOpen&&!ve.state.beforeClose},ve.contentHasFocus=function(){return document.activeElement===ve.content||ve.content.contains(document.activeElement)},ve.buildClassName=function(_e,ze){var Ne=(typeof ze>"u"?"undefined":n(ze))==="object"?ze:{base:de[_e],afterOpen:de[_e]+"--after-open",beforeClose:de[_e]+"--before-close"},st=Ne.base;return ve.state.afterOpen&&(st=st+" "+Ne.afterOpen),ve.state.beforeClose&&(st=st+" "+Ne.beforeClose),typeof ze=="string"&&ze?st+" "+ze:st},ve.attributesFromObject=function(_e,ze){return Object.keys(ze).reduce(function(Ne,st){return Ne[_e+"-"+st]=ze[st],Ne},{})},ve.state={afterOpen:!1,beforeClose:!1},ve.shouldClose=null,ve.moveFromContentToOverlay=null,ve}return s(He,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(ve,_e){this.props.isOpen&&!ve.isOpen?this.open():!this.props.isOpen&&ve.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!_e.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var ve=this.props,_e=ve.appElement,ze=ve.ariaHideApp,Ne=ve.htmlOpenClassName,st=ve.bodyOpenClassName,ie=ve.parentSelector,le=ie&&ie().ownerDocument||document;st&&j.add(le.body,st),Ne&&j.add(le.getElementsByTagName("html")[0],Ne),ze&&(Z+=1,S.hide(_e)),V.default.register(this)}},{key:"render",value:function(){var ve=this.props,_e=ve.id,ze=ve.className,Ne=ve.overlayClassName,st=ve.defaultStyles,ie=ve.children,le=ze?{}:st.content,pe=Ne?{}:st.overlay;if(this.shouldBeClosed())return null;var fe={ref:this.setOverlayRef,className:this.buildClassName("overlay",Ne),style:r({},pe,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},Qe=r({id:_e,ref:this.setContentRef,style:r({},le,this.props.style.content),className:this.buildClassName("content",ze),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Ke=this.props.contentElement(Qe,ie);return this.props.overlayElement(fe,Ke)}}]),He}(o.Component);Ie.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Ie.propTypes={isOpen:u.default.bool.isRequired,defaultStyles:u.default.shape({content:u.default.object,overlay:u.default.object}),style:u.default.shape({content:u.default.object,overlay:u.default.object}),className:u.default.oneOfType([u.default.string,u.default.object]),overlayClassName:u.default.oneOfType([u.default.string,u.default.object]),parentSelector:u.default.func,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,ariaHideApp:u.default.bool,appElement:u.default.oneOfType([u.default.instanceOf(F.default),u.default.instanceOf(D.SafeHTMLCollection),u.default.instanceOf(D.SafeNodeList),u.default.arrayOf(u.default.instanceOf(F.default))]),onAfterOpen:u.default.func,onAfterClose:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,role:u.default.string,contentLabel:u.default.string,aria:u.default.object,data:u.default.object,children:u.default.node,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func,testId:u.default.string},e.default=Ie,t.exports=e.default})(X6,X6.exports);var tve=X6.exports;function Gq(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function $q(t){function e(r){var n=this.constructor.getDerivedStateFromProps(t,r);return n??null}this.setState(e.bind(this))}function qq(t,e){try{var r=this.props,n=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}Gq.__suppressDeprecationWarning=!0;$q.__suppressDeprecationWarning=!0;qq.__suppressDeprecationWarning=!0;function rve(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var r=null,n=null,s=null;if(typeof e.componentWillMount=="function"?r="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?s="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),r!==null||n!==null||s!==null){var o=t.displayName||t.name,c=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+c+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=Gq,e.componentWillReceiveProps=$q),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=qq;var u=e.componentDidUpdate;e.componentDidUpdate=function(m,g,C){var B=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:C;u.call(this,m,g,B)}}return t}const nve=Object.freeze(Object.defineProperty({__proto__:null,polyfill:rve},Symbol.toStringTag,{value:"Module"})),ive=$4(nve);Object.defineProperty(_0,"__esModule",{value:!0});_0.bodyOpenClassName=_0.portalClassName=void 0;var j7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sve=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Wq=Ae,S4=yb(Wq),ove=cC,B4=yb(ove),ave=N0,Ls=yb(ave),lve=tve,M7=yb(lve),cve=zf,uve=hve(cve),mm=Df,k7=yb(mm),dve=ive;function hve(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function yb(t){return t&&t.__esModule?t:{default:t}}function fve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ave=_0.portalClassName="ReactModalPortal",mve=_0.bodyOpenClassName="ReactModal__Body--open",Dg=mm.canUseDOM&&B4.default.createPortal!==void 0,O7=function(e){return document.createElement(e)},R7=function(){return Dg?B4.default.createPortal:B4.default.unstable_renderSubtreeIntoContainer};function h2(t){return t()}var vb=function(t){pve(e,t);function e(){var r,n,s,o;fve(this,e);for(var c=arguments.length,u=Array(c),i=0;i<c;i++)u[i]=arguments[i];return o=(n=(s=D7(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(u))),s),s.removePortal=function(){!Dg&&B4.default.unmountComponentAtNode(s.node);var m=h2(s.props.parentSelector);m&&m.contains(s.node)?m.removeChild(s.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},s.portalRef=function(m){s.portal=m},s.renderPortal=function(m){var g=R7(),C=g(s,S4.default.createElement(M7.default,j7({defaultStyles:e.defaultStyles},m)),s.node);s.portalRef(C)},n),D7(s,o)}return sve(e,[{key:"componentDidMount",value:function(){if(mm.canUseDOM){Dg||(this.node=O7("div")),this.node.className=this.props.portalClassName;var n=h2(this.props.parentSelector);n.appendChild(this.node),!Dg&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(n){var s=h2(n.parentSelector),o=h2(this.props.parentSelector);return{prevParent:s,nextParent:o}}},{key:"componentDidUpdate",value:function(n,s,o){if(mm.canUseDOM){var c=this.props,u=c.isOpen,i=c.portalClassName;n.portalClassName!==i&&(this.node.className=i);var m=o.prevParent,g=o.nextParent;g!==m&&(m.removeChild(this.node),g.appendChild(this.node)),!(!n.isOpen&&!u)&&!Dg&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!mm.canUseDOM||!this.node||!this.portal)){var n=this.portal.state,s=Date.now(),o=n.isOpen&&this.props.closeTimeoutMS&&(n.closesAt||s+this.props.closeTimeoutMS);o?(n.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-s)):this.removePortal()}}},{key:"render",value:function(){if(!mm.canUseDOM||!Dg)return null;!this.node&&Dg&&(this.node=O7("div"));var n=R7();return n(S4.default.createElement(M7.default,j7({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(n){uve.setElement(n)}}]),e}(Wq.Component);vb.propTypes={isOpen:Ls.default.bool.isRequired,style:Ls.default.shape({content:Ls.default.object,overlay:Ls.default.object}),portalClassName:Ls.default.string,bodyOpenClassName:Ls.default.string,htmlOpenClassName:Ls.default.string,className:Ls.default.oneOfType([Ls.default.string,Ls.default.shape({base:Ls.default.string.isRequired,afterOpen:Ls.default.string.isRequired,beforeClose:Ls.default.string.isRequired})]),overlayClassName:Ls.default.oneOfType([Ls.default.string,Ls.default.shape({base:Ls.default.string.isRequired,afterOpen:Ls.default.string.isRequired,beforeClose:Ls.default.string.isRequired})]),appElement:Ls.default.oneOfType([Ls.default.instanceOf(k7.default),Ls.default.instanceOf(mm.SafeHTMLCollection),Ls.default.instanceOf(mm.SafeNodeList),Ls.default.arrayOf(Ls.default.instanceOf(k7.default))]),onAfterOpen:Ls.default.func,onRequestClose:Ls.default.func,closeTimeoutMS:Ls.default.number,ariaHideApp:Ls.default.bool,shouldFocusAfterRender:Ls.default.bool,shouldCloseOnOverlayClick:Ls.default.bool,shouldReturnFocusAfterClose:Ls.default.bool,preventScroll:Ls.default.bool,parentSelector:Ls.default.func,aria:Ls.default.object,data:Ls.default.object,role:Ls.default.string,contentLabel:Ls.default.string,shouldCloseOnEsc:Ls.default.bool,overlayRef:Ls.default.func,contentRef:Ls.default.func,id:Ls.default.string,overlayElement:Ls.default.func,contentElement:Ls.default.func};vb.defaultProps={isOpen:!1,portalClassName:Ave,bodyOpenClassName:mve,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,r){return S4.default.createElement("div",e,r)},contentElement:function(e,r){return S4.default.createElement("div",e,r)}};vb.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,dve.polyfill)(vb);_0.default=vb;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=_0,n=s(r);function s(o){return o&&o.__esModule?o:{default:o}}e.default=n.default,t.exports=e.default})(K6,K6.exports);var gve=K6.exports;const yve=Bp(gve),vve=({isOpen:t,onRequestClose:e,cropId:r})=>{const[n,s]=Ae.useState(""),[o,c]=Ae.useState(""),[u,i]=Ae.useState(""),[m,g]=Ae.useState([]);Ae.useEffect(()=>{r&&fetch(`/api/crops/${r}`).then(B=>B.json()).then(B=>{s(B.name),c(B.weight),i(B.category_id)}),fetch("/api/categories").then(B=>B.json()).then(B=>g(B))},[r]);const C=B=>{B.preventDefault(),console.log("Crop updated:",{cropName:n,weight:o,categoryId:u}),e()};return p.jsxs(yve,{isOpen:t,onRequestClose:e,contentLabel:"Edit Crop Modal",className:"fixed inset-0 bg-white mx-auto my-10 max-w-md md:max-w-lg lg:max-w-xl rounded-lg shadow-lg",overlayClassName:"fixed inset-0 bg-gray-800 bg-opacity-50",style:{content:{width:"90%",maxWidth:"600px",maxHeight:"80vh",margin:"auto",overflowY:"auto",padding:"20px"}},children:[p.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Crop"}),p.jsxs("form",{onSubmit:C,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-medium mb-2",children:"Name:"}),p.jsx("input",{type:"text",id:"name",value:n,onChange:B=>s(B.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full",required:!0})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"weight",className:"block text-gray-700 font-medium mb-2",children:"Weight:"}),p.jsx("input",{type:"text",id:"weight",value:o,onChange:B=>c(B.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full",required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{htmlFor:"category_id",className:"block text-gray-700 font-medium mb-2",children:"Category:"}),p.jsxs("select",{id:"category_id",value:u,onChange:B=>i(B.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full",required:!0,children:[p.jsx("option",{value:"",disabled:!0,children:"Select a category"}),m.map(B=>p.jsx("option",{value:B.id,children:B.name},B.id))]})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("button",{type:"submit",className:"bg-teal-500 text-white font-bold py-2 px-4 rounded hover:bg-teal-600",children:"Update Crop"}),p.jsx("button",{type:"button",onClick:e,className:"bg-gray-400 text-white font-bold py-2 px-4 rounded hover:bg-gray-500",children:"Cancel"})]})]})]})},xve=()=>p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 to-green-200 text-gray-800",children:[p.jsxs("header",{className:"py-10 text-center",children:[p.jsx("h1",{className:"text-5xl font-extrabold text-blue-800",children:"Weather Dashboard"}),p.jsx("p",{className:"text-lg mt-4 font-medium text-gray-700",children:"Accurate weather predictions for better planning."})]}),p.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 p-6",children:[p.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 hover:scale-105 transform transition duration-300",children:[p.jsx(PH,{className:"text-blue-500 text-4xl mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Daily Chart"}),p.jsx("p",{className:"text-center mt-2 text-gray-600",children:"View weather variations throughout the day."})]}),p.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 hover:scale-105 transform transition duration-300",children:[p.jsx(iN,{className:"text-green-500 text-4xl mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-center",children:"10-day predictions"}),p.jsx("p",{className:"text-center mt-2 text-gray-600",children:"Discover the weather trends for the coming days."})]}),p.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 hover:scale-105 transform transition duration-300",children:[p.jsx(J_,{className:"text-yellow-500 text-4xl mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-semibold text-center",children:"HDD, CDD, GDD"}),p.jsx("p",{className:"text-center mt-2 text-gray-600",children:"Analyze climate indices for agriculture and energy."})]})]})]}),Kq=({id:t,onSave:e,onClose:r})=>{const[n,s]=Ae.useState(null),[o,c]=Ae.useState(""),[u,i]=Ae.useState("");Ae.useEffect(()=>{(async()=>{try{const C=await Tr.get(`/api/district/${t}`);s(C.data),c(C.data.name||""),i(C.data.region||"")}catch(C){console.error("Error fetching district:",C)}})()},[t]);const m=async g=>{g.preventDefault();const C={name:o,region:u};try{await e(C),Ti.close()}catch(B){console.error("Error saving district:",B),Ti.fire({icon:"error",title:"Oops...",text:"Failed to save district. Please try again later."})}};return n?p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Edit District"}),p.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("form",{onSubmit:m,className:"space-y-4",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-semibold",children:"Name:"}),p.jsx("input",{type:"text",name:"name",id:"name",value:o,onChange:g=>c(g.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter district name"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"region",className:"block text-gray-700 font-semibold",children:"Region:"}),p.jsx("input",{type:"text",name:"region",id:"region",value:u,onChange:g=>i(g.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter region name"})]}),p.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Update"})]})]}):p.jsx("p",{children:"Loading..."})},Lg=Dq(Ti),Xq=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState(null);Ae.useEffect(()=>{s()},[]);const s=async()=>{try{const m=await Tr.get("/api/district/");e(m.data.districts)}catch(m){console.error("Error fetching districts:",m)}},o=async m=>{try{await Tr.delete(`/api/district/${m}/`),e(t.filter(g=>g.id!==m))}catch(g){console.error("Error deleting district:",g)}},c=async m=>{try{Lg.fire({title:"Loading...",text:"Fetching district details",allowOutsideClick:!1,didOpen:()=>{Lg.showLoading()}});const{data:g}=await Tr.get(`/api/district/${m}`);Lg.fire({title:"District Details",html:`<div>
            <p><span class="font-bold">Name:</span> ${g.name}</p>
            <p><span class="font-bold">Region:</span> ${g.region}</p>
          </div>`,showCancelButton:!0,cancelButtonText:"Close",showConfirmButton:!1})}catch(g){console.error("Error fetching district details:",g),Lg.fire({icon:"error",title:"Oops...",text:"Failed to fetch district details. Please try again later."})}},u=async m=>{try{const{data:g}=await Tr.get(`/api/district/${m}`);Lg.fire({title:"Edit District",html:p.jsx(Kq,{id:m,onSave:async C=>{try{await Tr.put(`/api/district/${m}/`,C),s()}catch(B){console.error("Error updating district:",B)}},onClose:()=>Lg.close()}),showConfirmButton:!1,width:"600px",didOpen:()=>{}})}catch(g){console.error("Error fetching district for editing:",g),Lg.fire({icon:"error",title:"Oops...",text:"Failed to fetch district for editing. Please try again later."})}},i=m=>{n(r===m?null:m)};return p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-extrabold mb-6 text-center text-teal-700",children:"Districts"}),p.jsx("ul",{className:"mt-4 bg-white rounded-lg shadow-lg",children:t.map(m=>p.jsxs("li",{className:"border-b border-gray-200 py-2 px-4 flex justify-between items-center",children:[p.jsxs("span",{children:[m.name," - ",m.region]}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>i(m.id),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",children:"Actions"}),r===m.id&&p.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:p.jsxs("ul",{children:[p.jsx("li",{children:p.jsx("button",{onClick:()=>c(m.id),className:"block px-4 py-2 text-blue-500 hover:bg-gray-100 w-full text-left",children:"View"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>u(m.id),className:"block px-4 py-2 text-blue-500 hover:bg-gray-100 w-full text-left",children:"Edit"})}),p.jsx("li",{children:p.jsx("button",{onClick:()=>o(m.id),className:"block px-4 py-2 text-red-500 hover:bg-gray-100 w-full text-left",children:"Delete"})})]})})]})]},m.id))})]})},_ve=({isOpen:t,onClose:e})=>{const[r,n]=Ae.useState(""),[s,o]=Ae.useState("");return t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create District"}),p.jsxs("form",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"name",className:"block text-gray-700",children:"Name:"}),p.jsx("input",{type:"text",id:"name",value:r,onChange:c=>n(c.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter district name"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"region",className:"block text-gray-700",children:"Region:"}),p.jsx("input",{type:"text",id:"region",value:s,onChange:c=>o(c.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter region name"})]}),p.jsxs("div",{className:"flex justify-end",children:[p.jsx("button",{type:"button",onClick:e,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Create"})]})]})]})})]}):null},bve=()=>{const[t,e]=Ae.useState(!1),r=()=>e(!0),n=()=>e(!1);return p.jsxs("div",{className:"p-4",children:[p.jsx("button",{onClick:r,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Create District"}),p.jsx(_ve,{isOpen:t,onClose:n}),p.jsx(Xq,{})]})},wve=({id:t})=>{const[e,r]=Ae.useState(null);return Ae.useEffect(()=>{(async()=>{try{const s=await Tr.get(`/api/district/${t}`);r(s.data)}catch(s){console.error("Error fetching district:",s)}})()},[t]),e?p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-extrabold mb-4 text-center text-teal-700",children:"District Details"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-bold",children:"Name:"})," ",e.name]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-bold",children:"Region:"})," ",e.region]})]}):p.jsx("p",{children:"Loading..."})},Cve=({isOpen:t,onClose:e,children:r})=>t?p.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-lg w-full",children:[p.jsx("div",{className:"p-6",children:r}),p.jsx("div",{className:"flex justify-end p-4",children:p.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",onClick:e,children:"Close"})})]})}):null,Sve=()=>{const[t,e]=Ae.useState(!1),r=()=>e(!0),n=()=>e(!1);return p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Point Management"}),p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx("button",{onClick:r,className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-md shadow hover:bg-blue-700 transition duration-300",children:"Create Point"})}),p.jsx(Cve,{isOpen:t,onClose:n,children:p.jsxs("form",{action:"/point/handle_create_point",method:"post",className:"space-y-4",encType:"multipart/form-data",children:[p.jsx("input",{type:"text",name:"longitude",placeholder:"Longitude",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),p.jsx("input",{type:"text",name:"latitude",placeholder:"Latitude",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),p.jsxs("select",{name:"owner_type",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400",children:[p.jsx("option",{value:"",children:"Select Owner Type"}),p.jsx("option",{value:"private",children:"Private"}),p.jsx("option",{value:"public",children:"Public"})]}),p.jsx("input",{type:"text",name:"forest",placeholder:"Forest",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),p.jsx("input",{type:"text",name:"farmer",placeholder:"Farmer",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),p.jsx("input",{type:"text",name:"district",placeholder:"District",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),p.jsx("input",{type:"file",name:"image",accept:"image/*",className:"border rounded-md px-4 py-3 w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400"}),p.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-md shadow hover:bg-blue-700 transition duration-300",children:"Create Point"})]})})]})},Bve=({isOpen:t,onClose:e,children:r})=>t?p.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:p.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-4xl w-full",children:[p.jsx("div",{className:"p-6",children:r}),p.jsx("div",{className:"flex justify-end p-4",children:p.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",onClick:e,children:"Close"})})]})}):null,Eve=()=>{const[t,e]=Ae.useState(!1),r=()=>e(!0),n=()=>e(!1);return p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Tree Management"}),p.jsx("div",{className:"flex justify-center mb-6",children:p.jsx("button",{onClick:r,className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-md shadow hover:bg-blue-700 transition duration-300",children:"Create Tree"})}),p.jsxs(Bve,{isOpen:t,onClose:n,children:[p.jsx("h2",{className:"text-3xl font-bold text-center text-green-700 mb-6",children:"Create Tree"}),p.jsxs("form",{action:"/tree/handle_create_tree",method:"post",className:"flex flex-wrap space-y-4",encType:"multipart/form-data",children:[p.jsxs("div",{className:"w-full flex",children:[p.jsxs("div",{className:"w-1/2 pr-4",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"tree_name",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Tree Name:"}),p.jsx("input",{type:"text",name:"tree_name",id:"tree_name",placeholder:"Enter tree name",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"species",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Species:"}),p.jsx("input",{type:"text",name:"species",id:"species",placeholder:"Enter species",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"forest_id",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Forest ID:"}),p.jsx("input",{type:"text",name:"forest_id",id:"forest_id",placeholder:"Enter forest ID",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"point_id",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Point ID:"}),p.jsx("input",{type:"text",name:"point_id",id:"point_id",placeholder:"Enter point ID",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"date_planted",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Date Planted:"}),p.jsx("input",{type:"date",name:"date_planted",id:"date_planted",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]})]}),p.jsxs("div",{className:"w-1/2 pl-4",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"cutting_date",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Cutting Date:"}),p.jsx("input",{type:"date",name:"cutting_date",id:"cutting_date",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"height",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Height (m):"}),p.jsx("input",{type:"number",name:"height",id:"height",placeholder:"Enter height in meters",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"diameter",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Diameter (cm):"}),p.jsx("input",{type:"number",name:"diameter",id:"diameter",placeholder:"Enter diameter in cm",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"image",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Tree Image:"}),p.jsx("input",{type:"file",name:"image",id:"image",accept:"image/*",className:"border border-gray-300 rounded-md px-4 py-3 w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]})]})]}),p.jsx("div",{className:"flex justify-end mt-8",children:p.jsx("button",{type:"submit",className:"bg-green-600 text-white font-semibold px-6 py-3 rounded-md shadow-lg hover:bg-green-700 hover:shadow-xl transition duration-300",children:"Create Tree"})})]})]})]})},Tve=()=>{const t=({title:e,description:r,link:n,buttonText:s,bgColor:o,hoverColor:c,icon:u,iconColor:i})=>p.jsxs("div",{className:`p-6 sm:p-8 lg:p-10 rounded-lg border border-gray-200 shadow-lg transform transition-transform hover:scale-105 hover:shadow-xl ${o} flex flex-col justify-between`,children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[p.jsx("div",{className:`text-4xl sm:text-5xl mr-3 sm:mr-4 ${i}`,children:u}),p.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-gray-800",children:e})]}),p.jsx("p",{className:"text-gray-600 mb-4 sm:mb-6 text-base sm:text-lg",children:r})]}),p.jsx(Po,{to:n,className:`bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 sm:py-3 px-4 sm:px-6 rounded-lg transition-colors ${c}`,children:s})]});return p.jsx("div",{className:"bg-gradient-to-r from-teal-50 via-green-50 to-yellow-50 min-h-screen flex justify-center items-center p-6 sm:p-10 font-sans",children:p.jsxs("div",{className:"text-center max-w-5xl mx-auto",children:[p.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-8 sm:mb-12 text-teal-800",children:"Generate Digital Codes"}),p.jsx("p",{className:"text-gray-700 text-lg sm:text-2xl mb-8 sm:mb-14",children:"Choose an option below to get started:"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-10",children:[p.jsx(t,{title:"Produce Stamps",description:"Generate Digital codes for a farm with details such as weight, price per kg, and total value.",link:"/qrproduce",buttonText:"Generate Farm Digital Codes",bgColor:"bg-green-100",hoverColor:"bg-green-200 hover:bg-green-300",icon:p.jsx(J_,{}),iconColor:"text-green-600"}),p.jsx(t,{title:"Forest Conservation Stamps",description:"Generate Digital codes for marking tree cuttings with details such as forest name, tree type, and GPS coordinates.",link:"/qrconservation",buttonText:"Generate Tree Cutting Digital Codes",bgColor:"bg-blue-100",hoverColor:"bg-blue-200 hover:bg-blue-300",icon:p.jsx(w_,{}),iconColor:"text-green-700"}),p.jsx(t,{title:"Digital Export Stamps",description:"Generate EUDR export stamps for a specified farm. Upload a zip file containing the Export stamps codes images.",link:"/qrexport",buttonText:"Generate Export Digital Codes",bgColor:"bg-red-100",hoverColor:"bg-red-200 hover:bg-red-300",icon:p.jsx(oN,{}),iconColor:"text-purple-600"}),p.jsx(t,{title:"Fertilizer Stamps",description:"Generate Digital codes for fertilizers.",link:"/qrconservation",buttonText:"Generate Digital Codes",bgColor:"bg-yellow-100",hoverColor:"bg-blue-200 hover:bg-blue-300",icon:p.jsx(w_,{}),iconColor:"text-green-700"})]})]})})},MC=({currentStep:t,totalSteps:e,stepNames:r})=>p.jsx("div",{className:"flex justify-center items-center mb-8 overflow-x-auto",children:r.map((n,s)=>p.jsxs("div",{className:"flex items-center flex-shrink-0",children:[p.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${s<t?"bg-teal-600 border-teal-600 text-white":s===t?"bg-teal-100 border-teal-600 text-teal-600":"bg-gray-100 border-gray-300 text-gray-400"}`,children:s<t?p.jsx(Iye,{size:16}):s+1}),p.jsx("span",{className:`ml-2 text-sm font-medium whitespace-nowrap ${s<=t?"text-teal-700":"text-gray-400"}`,children:n}),s<r.length-1&&p.jsx("div",{className:`w-12 h-0.5 mx-4 ${s<t?"bg-teal-600":"bg-gray-300"}`})]},s))}),kC=({currentStep:t,totalSteps:e,onPrevStep:r,onNextStep:n,onSubmit:s,isStepValid:o})=>p.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[p.jsxs("button",{type:"button",onClick:r,disabled:t===0,className:"flex items-center px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[p.jsx($6,{size:20,className:"mr-1"}),"Previous"]}),p.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",t+1," of ",e]}),t<e-1?p.jsxs("button",{type:"button",onClick:n,disabled:!o,className:"flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",p.jsx(q6,{size:20,className:"ml-1"})]}):p.jsx("button",{type:"button",onClick:s,disabled:!o,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Generate QR & Receipt"})]}),Yq=({label:t,name:e,type:r="text",value:n,onChange:s,required:o,readOnly:c=!1,placeholder:u})=>p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"text-lg text-gray-800 mb-2 block",htmlFor:e,children:t}),p.jsx("input",{type:r,id:e,name:e,value:n,onChange:s,required:o,readOnly:c,placeholder:u,className:`border-2 p-4 w-full rounded-lg focus:outline-none focus:ring-4 focus:ring-teal-400 ${c?"bg-gray-100 cursor-not-allowed text-gray-600":""}`})]}),eL=({label:t,name:e,value:r,options:n,onChange:s,required:o,disabled:c=!1,placeholder:u})=>p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"text-lg text-gray-800 mb-2 block",htmlFor:e,children:t}),p.jsxs("select",{id:e,name:e,value:r,onChange:s,required:o,disabled:c,className:`border-2 p-4 w-full rounded-lg focus:outline-none focus:ring-4 focus:ring-teal-400 ${c?"bg-gray-100 cursor-not-allowed text-gray-600":""}`,children:[p.jsx("option",{value:"",children:u||`Select ${t}`}),n.map(i=>p.jsx("option",{value:i.value,children:i.label},i.value))]})]}),Lve=({index:t,formData:e,onChange:r,onFarmChange:n,onAddFarm:s,onRemoveFarm:o,farms:c,districts:u,isLastBlock:i,canRemove:m})=>{const g=C=>{console.log("FarmBlock: Farm selection triggered",C.target.value,"Index:",t),console.log("FarmBlock: onFarmChange function exists:",typeof n),n?(console.log("FarmBlock: Calling onFarmChange"),n(C,t)):(console.log("FarmBlock: onFarmChange not provided, using fallback"),r(C))};return p.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-6 bg-gray-50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"text-lg font-medium text-teal-700",children:["Farm #",t+1]}),p.jsxs("div",{className:"flex gap-2",children:[m&&p.jsx("button",{type:"button",onClick:()=>o(t),className:"text-red-600 hover:text-red-800 text-sm font-medium transition-colors",children:"Remove"}),i&&p.jsx("button",{type:"button",onClick:s,className:"text-teal-600 hover:text-teal-800 text-sm font-medium transition-colors",children:"+ Add Farm"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[p.jsx(eL,{label:"Farm ID",name:`farm_${t}_id`,value:e[`farm_${t}_id`]||"",onChange:g,options:c.map(C=>({value:C.id,label:`${C.name} - ${C.subcounty}`})),required:!0}),p.jsx(Yq,{label:"Phone Number",name:`farm_${t}_phone`,value:e[`farm_${t}_phone`]||"",onChange:r,readOnly:!!e[`farm_${t}_id`],placeholder:e[`farm_${t}_id`]?"Auto-filled from farm data":"Will auto-fill when farm is selected",required:!0}),p.jsx(eL,{label:"District",name:`farm_${t}_district`,value:e[`farm_${t}_district`]||"",onChange:r,options:u.map(C=>({value:C.id,label:C.name})),disabled:!!e[`farm_${t}_id`],placeholder:e[`farm_${t}_id`]?"Auto-filled from farm data":"Will auto-fill when farm is selected",required:!0})]}),e[`farm_${t}_id`]&&p.jsx("div",{className:"mt-3 text-sm text-gray-600",children:p.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 rounded-full",children:" Farm data auto-filled"})})]})},DC=({step:t,formData:e,onChange:r,onCategoryChange:n,onStoreChange:s,farmBlocks:o,onAddFarm:c,onRemoveFarm:u,onFarmChange:i,farms:m,districts:g})=>{const C=B=>{let S=r;return B.name==="produceCategory"?S=n:B.name==="agroInputType"||B.name==="agroInputCategory"?S=r:B.name==="store_id"?S=P=>s(P,"id"):B.name==="store_name"&&(S=P=>s(P,"name")),B.type==="select"?p.jsx(eL,{label:B.label,name:B.name,value:e[B.name]||"",onChange:S,options:B.options||[],required:B.required},B.name):p.jsx(Yq,{label:B.label,type:B.type||"text",name:B.name,value:e[B.name]||"",onChange:r,required:B.required},B.name)};return p.jsx("div",{className:"min-h-[400px]",children:t.fields.map((B,S)=>p.jsx("div",{children:B.type==="group"?B.label.includes("Farm")?S===0&&o.map((P,j)=>p.jsx(Lve,{index:j,formData:e,onChange:r,onFarmChange:i,onAddFarm:c,onRemoveFarm:u,farms:m,districts:g,isLastBlock:j===o.length-1,canRemove:o.length>1},j)):p.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-6 bg-gray-50",children:[p.jsx("h3",{className:"text-lg font-medium text-teal-700 mb-4",children:B.label}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:B.fields.map(C)})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:C(B)})},S))})},OC=({qrData:t,onDownloadPDF:e,isDownloading:r})=>t?p.jsxs(p.Fragment,{children:[p.jsxs("div",{id:"receipt",className:"bg-white p-6 rounded-lg shadow-lg border",children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("img",{src:"https://www.nkusu.com/parrotlogo.png",alt:"Logo",className:"w-16 h-16 mx-auto mb-2"}),p.jsx("h2",{className:"text-xl font-bold text-teal-700",children:"NKUSU DIGITAL STAMPS"}),p.jsx("p",{className:"text-gray-600",children:"Digital receipt for produce transaction"})]}),p.jsx("div",{className:"text-center mb-4",children:p.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(t)}`,alt:"QR Code",className:"mx-auto border rounded"})}),p.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded border overflow-auto max-h-40",children:t})]}),p.jsx("button",{onClick:e,className:`w-full mt-4 text-white px-6 py-3 rounded-lg shadow transition-colors ${r?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,disabled:r,children:r?p.jsxs("span",{className:"flex items-center justify-center",children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):"Download PDF"})]}):p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[p.jsx("div",{className:"w-32 h-32 mx-auto mb-4 bg-gray-100 rounded-lg flex items-center justify-center",children:p.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded animate-pulse"})}),p.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Receipt Preview"}),p.jsx("p",{className:"text-gray-400",children:"Complete the form to generate your QR code and digital receipt"})]}),Ive=(t,e,r,n,s)=>[{title:"Farm Information",fields:t.map((o,c)=>({type:"group",label:`Farm #${c+1}`,fields:[{type:"select",name:`farm_${c}_id`,label:"Farm ID",required:!0},{type:"text",name:`farm_${c}_phone`,label:"Phone Number",required:!0},{type:"select",name:`farm_${c}_district`,label:"District",required:!0}]}))},{title:"Product Information",fields:[{type:"text",name:"batch_number",label:"Batch Number",required:!0},{type:"select",name:"country_of_origin",label:"Country of Origin",options:e.map(o=>({value:o.nom_en_gb,label:o.nom_en_gb})),required:!0},{type:"select",name:"produceCategory",label:"Produce Category",options:r.map(o=>({value:o.name,label:o.name})),required:!0},{type:"select",name:"Crop_grade",label:"Crop Grade",options:n.map(o=>({value:o.grade_value,label:`${o.grade_value} - ${o.description||""}`})),required:!0}]},{title:"Transaction Details",fields:[{type:"select",name:"season",label:"Season",options:["Season1","Season2","Season3","Season4"].map(o=>({value:o,label:o})),required:!0},{type:"number",name:"produce_weight",label:"Produce Weight (kg)",required:!0},{type:"number",name:"price_per_kg",label:"Price Per Kg (UGX)",required:!0},{type:"number",name:"total_value",label:"Total Value (UGX)",required:!0}]},{title:"Store & Payment Information",fields:[{type:"select",name:"payment_type",label:"Payment Type",options:[{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"}],required:!0},{type:"select",name:"store_id",label:"Store ID",options:s.map(o=>({value:o.id,label:o.id})),required:!0},{type:"select",name:"store_name",label:"Store Name",options:s.map(o=>({value:o.name,label:o.name})),required:!0},{type:"date",name:"transaction_date",label:"Transaction Date",required:!0}]}],Nve=["Farms","Product","Transaction","Store"],om=(t,e)=>{const[r,n]=Ae.useState([]);return Ae.useEffect(()=>{(async()=>{try{const o=await Tr.get(t);n(o.data[e]||[])}catch(o){console.error(`Error fetching ${e}:`,o)}})()},[t,e]),r},Fve=()=>{var Ie;const[t,e]=Ae.useState(0),[r,n]=Ae.useState({}),[s,o]=Ae.useState([{id:"",props:{}}]),[c,u]=Ae.useState([]),[i,m]=Ae.useState(null),[g,C]=Ae.useState(!1),B=om("/api/farm/","farms"),S=om("/api/district/","districts"),P=om("/api/pays/","pays"),j=om("/api/store/","stores"),D=om("/api/producecategory/","categories"),F=Ive(s,P,D,c,j),R=be=>{n(He=>({...He,[be.target.name]:be.target.value}))},V=async be=>{const He=be.target.value;n(ve=>({...ve,produceCategory:He}));const Fe=D.find(ve=>ve.name===He);if(Fe)try{const ve=await Tr.get(`/api/grade/getbycrop/${Fe.id}`);u(ve.data.status==="success"?ve.data.grades:[])}catch(ve){console.error("Error fetching grades:",ve),u([])}},Y=(be,He)=>{const Fe=be.target.value;let ve=null;He==="id"?ve=j.find(_e=>_e.id.toString()===Fe):He==="name"&&(ve=j.find(_e=>_e.name===Fe)),n(ve?_e=>({..._e,store_id:ve.id,store_name:ve.name}):_e=>({..._e,[He==="id"?"store_id":"store_name"]:Fe}))},te=async(be,He)=>{const Fe=be.target.value;if(n(ve=>({...ve,[`farm_${He}_id`]:Fe})),o(ve=>ve.map((_e,ze)=>ze===He?{..._e,id:Fe}:_e)),Fe)try{const ve=await Tr.get(`/api/farm/${Fe}`);if(ve.data.status==="success"){const _e=ve.data.data;n(ze=>({...ze,[`farm_${He}_phone`]:_e.phonenumber1||_e.phonenumber2||"",[`farm_${He}_district`]:_e.district_id||""})),console.log("Updated formData with:",{phone:_e.phonenumber1,district:_e.district_id})}}catch(ve){console.error("Error fetching farm properties:",ve)}},se=()=>{o(be=>[...be,{id:"",props:{}}])},oe=be=>{s.length>1&&(o(He=>He.filter((Fe,ve)=>ve!==be)),n(He=>{const Fe={...He};return delete Fe[`farm_${be}_id`],delete Fe[`farm_${be}_phone`],delete Fe[`farm_${be}_district`],Fe}))},K=()=>{t<F.length-1&&e(t+1)},de=()=>{t>0&&e(t-1)},we=()=>{var He;const be=((He=F[t])==null?void 0:He.fields)||[];for(let Fe of be)if(Fe.type==="group"){for(let ve of Fe.fields)if(ve.required&&!r[ve.name])return!1}else if(Fe.required&&!r[Fe.name])return!1;return!0},J=()=>{const be=JSON.stringify(r,null,2);m(be)},Z=async()=>{if(!g){C(!0);try{const be=JSON.parse(i),He=parseInt(be.batch_number,10);if(isNaN(He)){console.error("Invalid batch number. Must be a number."),C(!1);return}const Fe=[];for(let Ne=0;Ne<He;Ne++){const st={...be,batch_number:(Ne+1).toString()};Fe.push(st)}const ve=await Tr.post("/api/qrcode/generate_pdf",{qr_data_list:Fe,description:"Digital receipt for produce transaction."},{responseType:"blob"}),_e=window.URL.createObjectURL(new Blob([ve.data])),ze=document.createElement("a");ze.href=_e,ze.setAttribute("download",`receipts_${be.batch_number}_batches.pdf`),document.body.appendChild(ze),ze.click(),ze.remove()}catch(be){console.error("Erreur lors du tlchargement du PDF:",be)}finally{C(!1)}}};return p.jsx("div",{className:"bg-gradient-to-br from-teal-50 via-white to-blue-50 min-h-screen py-8",children:p.jsxs("div",{className:"container mx-auto px-4",children:[p.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-teal-700",children:"Digital receipt for produce transaction"}),p.jsx(MC,{currentStep:t,totalSteps:F.length,stepNames:Nve}),p.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[p.jsx("div",{className:"w-1/2",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[p.jsx("h2",{className:"text-2xl font-semibent mb-6 text-teal-700",children:(Ie=F[t])==null?void 0:Ie.title}),p.jsx(DC,{step:F[t],formData:r,onChange:R,onCategoryChange:V,onStoreChange:Y,farmBlocks:s,onAddFarm:se,onRemoveFarm:oe,onFarmChange:te,farms:B,districts:S}),p.jsx(kC,{currentStep:t,totalSteps:F.length,onPrevStep:de,onNextStep:K,onSubmit:J,isStepValid:we()})]})}),p.jsx("div",{className:"w-1/2",children:p.jsx("div",{className:"sticky top-8",children:p.jsx(OC,{qrData:i,onDownloadPDF:Z,isDownloading:g})})})]})]})})},Pve=()=>[{title:"Forest Information",fields:[{type:"text",name:"forest_name",label:"Forest Name",required:!0},{type:"text",name:"forest_id",label:"Forest ID",required:!0},{type:"text",name:"gps_coordinates",label:"GPS Coordinates",required:!0}]},{title:"Tree Information",fields:[{type:"text",name:"tree_type",label:"Tree Type",required:!0},{type:"number",name:"height",label:"Height (m)",required:!0},{type:"number",name:"diameter",label:"Diameter (cm)",required:!0}]},{title:"Cutting Information",fields:[{type:"date",name:"date_cutting",label:"Date of Cutting",required:!0},{type:"text",name:"batch_number",label:"Batch Number",required:!0}]}],jve=["Forest Info","Tree Info","Cutting Info"],Mve=()=>{var D;const[t,e]=Ae.useState(0),[r,n]=Ae.useState({}),[s,o]=Ae.useState(null),[c,u]=Ae.useState(!1),i=Pve(),m=F=>{n(R=>({...R,[F.target.name]:F.target.value}))},g=()=>{t<i.length-1&&e(t+1)},C=()=>{t>0&&e(t-1)},B=()=>{var R;const F=((R=i[t])==null?void 0:R.fields)||[];for(let V of F)if(V.type==="group"){for(let Y of V.fields)if(Y.required&&!r[Y.name])return!1}else if(V.required&&!r[V.name])return!1;return!0},S=F=>`
Forest Name: ${F.forest_name}
Forest ID: ${F.forest_id}
Tree Type: ${F.tree_type}
Date of Cutting: ${F.date_cutting}
GPS: ${F.gps_coordinates}
Height: ${F.height}m
Diameter: ${F.diameter}cm
Batch: ${F.batch_number}
    `.trim(),P=()=>{const F=S(r);o(F)},j=async()=>{if(!c){u(!0);try{const F=JSON.parse(JSON.stringify(r)),R=parseInt(F.batch_number,10);if(isNaN(R)){console.error("Invalid batch number. Must be a number."),u(!1);return}const V=[];for(let oe=0;oe<R;oe++){const K={...F,batch_number:(oe+1).toString()};V.push(K)}const Y=await Tr.post("/api/qrcode/generate_pdf",{qr_data_list:V,description:"Digital receipt for tree cutting conservation."},{responseType:"blob"}),te=window.URL.createObjectURL(new Blob([Y.data])),se=document.createElement("a");se.href=te,se.setAttribute("download",`conservation_receipts_${F.batch_number}_batches.pdf`),document.body.appendChild(se),se.click(),se.remove()}catch(F){console.error("Erreur lors du tlchargement du PDF:",F)}finally{u(!1)}}};return p.jsx("div",{className:"bg-gradient-to-br from-green-50 via-white to-emerald-50 min-h-screen py-8",children:p.jsxs("div",{className:"container mx-auto px-4",children:[p.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-emerald-700",children:"Generate Digital Codes for Tree Cutting"}),p.jsx(MC,{currentStep:t,totalSteps:i.length,stepNames:jve}),p.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[p.jsx("div",{className:"w-1/2",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-6 text-emerald-700",children:(D=i[t])==null?void 0:D.title}),p.jsx(DC,{step:i[t],formData:r,onChange:m,onCategoryChange:null,onStoreChange:null,farmBlocks:[],onAddFarm:null,onRemoveFarm:null,farms:[],districts:[]}),p.jsx(kC,{currentStep:t,totalSteps:i.length,onPrevStep:C,onNextStep:g,onSubmit:P,isStepValid:B()})]})}),p.jsx("div",{className:"w-1/2",children:p.jsx("div",{className:"sticky top-8",children:p.jsx(OC,{qrData:s,onDownloadPDF:j,isDownloading:c})})})]})]})})},kve=(t,e,r,n,s,o,c,u,i)=>[{title:"Farm & Group Information",fields:[...t.map((m,g)=>({type:"group",label:`Farm #${g+1}`,fields:[{type:"select",name:`farm_${g}_id`,label:"Farm ID",required:!0},{type:"text",name:`farm_${g}_phone`,label:"Farmer Phone Number",required:!0},{type:"select",name:`farm_${g}_district`,label:"District",required:!0}]})),{type:"select",name:"farmergroup_id",label:"Farmer Group",options:e.map(m=>({value:m.id,label:m.name})),required:!0},{type:"text",name:"geolocation",label:"Geolocation",required:!0}]},{title:"Crop Information",fields:[{type:"select",name:"crop_category",label:"Crop Category",options:n.map(m=>({value:m.id,label:m.name})),required:!0},{type:"select",name:"crop",label:"Crop",options:s.map(m=>({value:m.id,label:m.name})),required:!0},...o.length>0?[{type:"select",name:"crop_grade",label:"Crop Grade",options:o.map(m=>({value:m.grade_value,label:m.grade_value})),required:!0}]:[],{type:"select",name:"coffeeType",label:"Coffee Type",options:[{value:"Robusta",label:"Robusta"},{value:"Arabica",label:"Arabica"},{value:"Other",label:"Other"}],required:!0},...i?[{type:"select",name:"hscode",label:"HS Code",options:i==="Robusta"?[{value:"0901.11",label:"0901.11"},{value:"0901.21",label:"0901.21"}]:i==="Arabica"?[{value:"0901.12",label:"0901.12"},{value:"0901.22",label:"0901.22"}]:[{value:"0901.90",label:"0901.90"}],required:!0}]:[]]},{title:"Product Details",fields:[{type:"number",name:"batch_number",label:"Batch Number",required:!0},{type:"text",name:"produce_weight",label:"Produce Weight (Kgs)",required:!0},{type:"select",name:"season",label:"Season",options:[{value:"Season 1",label:"Season 1"},{value:"Season 2",label:"Season 2"},{value:"Season 3",label:"Season 3"},{value:"Season 4",label:"Season 4"}],required:!0}]},{title:"Store Information",fields:[{type:"select",name:"store_id",label:"Store ID",options:c.map(m=>({value:m.id,label:m.id})),required:!0},{type:"select",name:"store_name",label:"Store Name",options:c.map(m=>({value:m.name,label:m.name})),required:!0}]},{title:"Export Information",fields:[{type:"select",name:"country_of_origin",label:"Country of Origin",options:u.map(m=>({value:m.nom_en_gb,label:m.nom_en_gb})),required:!0},{type:"select",name:"destination_country",label:"Destination Country",options:u.map(m=>({value:m.nom_en_gb,label:m.nom_en_gb})),required:!0},{type:"text",name:"channel_partner",label:"Channel Partner",required:!0},{type:"text",name:"end_customer_name",label:"End Customer Name",required:!0},{type:"datetime-local",name:"timestamp",label:"Timestamp (Transaction Date)",required:!0}]}],Dve=["Farm & Group","Crop Info","Product","Store","Export Info"],Ove=()=>{var Ar;const[t,e]=Ae.useState(0),[r,n]=Ae.useState({farm_id:"",farmergroup_id:"",district_name:"",country_of_origin:"",crop_category:"",crop_grade:"",crop:"",produce_weight:"",batch_number:"",harvest_date:"",timestamp:"",geolocation:"",store_name:"",season:"",destination_country:"",channel_partner:"",end_customer_name:"",coffeeType:"",hscode:"",store_id:""}),[s,o]=Ae.useState([]),[c,u]=Ae.useState([{id:"",props:{}}]),[i,m]=Ae.useState([]),[g,C]=Ae.useState([]),[B,S]=Ae.useState([]),[P,j]=Ae.useState([]),[D,F]=Ae.useState([]),[R,V]=Ae.useState([]),[Y,te]=Ae.useState(""),[se,oe]=Ae.useState([]),[K,de]=Ae.useState(""),[we,J]=Ae.useState([]),[Z,Ie]=Ae.useState(null),[be,He]=Ae.useState(!1),[Fe,ve]=Ae.useState(null),_e=kve(c,B,g,i,se,we,R,D,r.coffeeType);Ae.useEffect(()=>{(async()=>{try{const[Ue,hr,Dt,vt,Kt,rr,nr]=await Promise.all([Tr.get("/api/farm/"),Tr.get("/api/district/"),Tr.get("/api/farmergroup/"),Tr.get("/api/crop/"),Tr.get("/api/pays/"),Tr.get("/api/producecategory/"),Tr.get("/api/store/")]);o(Ue.data.farms||[]),C(hr.data.districts||[]),S(Dt.data||[]),j(vt.data.crops||[]),F(Kt.data.pays||[]),m(rr.data.categories||[]),V(nr.data.stores||[])}catch(Ue){console.error("Error fetching data:",Ue)}})()},[]);const ze=Ze=>{const{name:Ue,value:hr}=Ze.target;n(Dt=>({...Dt,[Ue]:hr})),Ue==="crop_category"?Ne(hr):Ue==="crop"?st(hr):Ue==="coffeeType"&&n(Dt=>({...Dt,hscode:""}))},Ne=Ze=>{te(Ze);const Ue=P.filter(hr=>hr.category_id.toString()===Ze);oe(Ue),n(hr=>({...hr,crop_category:Ze,crop:"",crop_grade:""})),J([]),de("")},st=Ze=>{de(Ze),n(Ue=>({...Ue,crop:Ze,crop_grade:""})),ie(Ze)},ie=async Ze=>{var Ue,hr;if(Ze)try{const Dt=await Tr.get(`/api/grade/getbycrop/${Ze}`);J(Dt.data.grades||[]),ve(null)}catch(Dt){console.error("Error fetching grades:",Dt),ve(((hr=(Ue=Dt.response)==null?void 0:Ue.data)==null?void 0:hr.message)||"An error occurred while fetching grades."),J([])}else J([])},le=async(Ze,Ue)=>{const hr=Ze.target.value;if(n(Dt=>({...Dt,[`farm_${Ue}_id`]:hr})),u(Dt=>Dt.map((vt,Kt)=>Kt===Ue?{...vt,id:hr}:vt)),hr)try{const Dt=await Tr.get(`/api/farm/${hr}`);if(Dt.data.status==="success"){const vt=Dt.data.data;u(Kt=>Kt.map((rr,nr)=>nr===Ue?{...rr,id:hr,props:vt}:rr)),n(Kt=>({...Kt,[`farm_${Ue}_phone`]:vt.phonenumber1||vt.phonenumber2||"",[`farm_${Ue}_district`]:vt.district_id||"",...vt}))}}catch(Dt){console.error("Error fetching farm properties:",Dt)}},pe=()=>{u(Ze=>[...Ze,{id:"",props:{}}])},fe=Ze=>{c.length>1&&(u(Ue=>Ue.filter((hr,Dt)=>Dt!==Ze)),n(Ue=>{const hr={...Ue};return delete hr[`farm_${Ze}_id`],delete hr[`farm_${Ze}_phone`],delete hr[`farm_${Ze}_district`],hr}))},Qe=(Ze,Ue)=>{const hr=Ze.target.value;let Dt=null;Ue==="id"?Dt=R.find(vt=>vt.id.toString()===hr):Ue==="name"&&(Dt=R.find(vt=>vt.name===hr)),n(Dt?vt=>({...vt,store_id:Dt.id,store_name:Dt.name}):vt=>({...vt,[Ue==="id"?"store_id":"store_name"]:hr}))},Ke=Ze=>{const{name:Ue}=Ze.target,hr=Ue.match(/^farm_(\d+)_id$/);if(hr){const Dt=parseInt(hr[1],10);le(Ze,Dt)}else Ue==="store_id"?Qe(Ze,"id"):Ue==="store_name"?Qe(Ze,"name"):ze(Ze)},et=()=>{t<_e.length-1&&e(t+1)},tt=()=>{t>0&&e(t-1)},bt=()=>{var Ue;const Ze=((Ue=_e[t])==null?void 0:Ue.fields)||[];for(let hr of Ze)if(hr.type==="group"){for(let Dt of hr.fields)if(Dt.required&&!r[Dt.name])return!1}else if(hr.required&&!r[hr.name])return!1;return!0},De=Ze=>{const Ue=c.map((hr,Dt)=>({id:Ze[`farm_${Dt}_id`],phone:Ze[`farm_${Dt}_phone`],district:Ze[`farm_${Dt}_district`]})).filter(hr=>hr.id);return`
Farms: ${Ue.map(hr=>`www.nkusu.com/farmmanager/${hr.id}`).join(", ")}
Phones: ${Ue.map(hr=>hr.phone).join(", ")}
Districts: ${Ue.map(hr=>hr.district).join(", ")}
Farmer Group: ${Ze.farmergroup_id}
Destination: ${Ze.destination_country}
CP: ${Ze.channel_partner}
ECN: ${Ze.end_customer_name}
Store Name: ${Ze.store_name}
Crop Category: ${Ze.crop_category}
Grade: ${Ze.crop_grade||"N/A"}
Coffee Type: ${Ze.coffeeType}
HS Code: ${Ze.hscode}
Season: ${Ze.season}
Weight: ${Ze.produce_weight}
Geolocation: ${Ze.geolocation}
Country Origin: ${Ze.country_of_origin}
Transaction Date: ${Ze.timestamp}
    `.trim()},Mt=()=>{const Ze=De(r);Ie(Ze)},ir=async()=>{if(!be){He(!0);try{const Ze=JSON.parse(JSON.stringify(r)),Ue=parseInt(Ze.batch_number,10);if(isNaN(Ue)){console.error("Invalid batch number. Must be a number."),He(!1);return}const hr=[];for(let rr=0;rr<Ue;rr++){const nr={...Ze,batch_number:(rr+1).toString()};hr.push(nr)}const Dt=await Tr.post("/api/qrcode/generate_pdf",{qr_data_list:hr,description:"Digital receipt for export transaction."},{responseType:"blob"}),vt=window.URL.createObjectURL(new Blob([Dt.data])),Kt=document.createElement("a");Kt.href=vt,Kt.setAttribute("download",`export_receipts_${Ze.batch_number}_batches.pdf`),document.body.appendChild(Kt),Kt.click(),Kt.remove()}catch(Ze){console.error("Erreur lors du tlchargement du PDF:",Ze)}finally{He(!1)}}};return p.jsx("div",{className:"bg-gradient-to-br from-blue-50 via-white to-indigo-50 min-h-screen py-8",children:p.jsxs("div",{className:"container mx-auto px-4",children:[p.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-blue-700",children:"Digital Export Stamps"}),p.jsx(MC,{currentStep:t,totalSteps:_e.length,stepNames:Dve}),p.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[p.jsx("div",{className:"w-1/2",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-6 text-blue-700",children:(Ar=_e[t])==null?void 0:Ar.title}),Fe&&p.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:Fe}),p.jsx(DC,{step:_e[t],formData:r,onChange:Ke,onCategoryChange:Ne,onStoreChange:Qe,farmBlocks:c,onAddFarm:pe,onRemoveFarm:fe,onFarmChange:le,farms:s,districts:g}),p.jsx(kC,{currentStep:t,totalSteps:_e.length,onPrevStep:tt,onNextStep:et,onSubmit:Mt,isStepValid:bt()})]})}),p.jsx("div",{className:"w-1/2",children:p.jsx("div",{className:"sticky top-8",children:p.jsx(OC,{qrData:Z,onDownloadPDF:ir,isDownloading:be})})})]})]})})},Rve=(t,e,r,n)=>[{title:"Farm Information",fields:t.map((s,o)=>({type:"group",label:`Farm #${o+1}`,fields:[{type:"select",name:`farm_${o}_id`,label:"Farm ID",required:!0},{type:"text",name:`farm_${o}_phone`,label:"Phone Number",required:!0},{type:"select",name:`farm_${o}_district`,label:"District",required:!0}]}))},{title:"AgroInput Information",fields:[{type:"text",name:"batch_number",label:"Batch Number",required:!0},{type:"select",name:"agroInputType",label:"AgroInput Type",options:[{value:"Fertilizer",label:"Fertilizer"},{value:"Pesticide",label:"Pesticide"}],required:!0},...r==="Fertilizer"?[{type:"select",name:"agroInputCategory",label:"AgroInput Category",options:[{value:"Chemical",label:"Chemical"},{value:"Organic",label:"Organic"}],required:!0}]:[],...r==="Fertilizer"&&n?[{type:"select",name:"agroInputSubCategory",label:"AgroInput Level",options:[1,2,3,4].map(s=>({value:`${n} Level ${s}`,label:`${n} Level ${s}`})),required:!0}]:[],{type:"date",name:"application_date",label:"Application Date",required:!0},{type:"number",name:"application_rate",label:"Application Rate (kg/Acre)",required:!0}]},{title:"Product Details",fields:[{type:"number",name:"agroinput_weight",label:"AgroInput Weight (Kgs)",required:!0},{type:"number",name:"price_per_kg",label:"Price / Kg (Ugshs)",required:!0},{type:"number",name:"total_price",label:"Total Price (Ugshs)",required:!0}]},{title:"Store & Transaction Information",fields:[{type:"select",name:"payment_type",label:"Payment Type",options:[{value:"cash",label:"Cash"},{value:"credit",label:"Credit"},{value:"mobilemoney",label:"Mobile Money"},{value:"visa",label:"Visa"}],required:!0},{type:"select",name:"store_id",label:"Store ID",options:e.map(s=>({value:s.id,label:s.id})),required:!0},{type:"select",name:"store_name",label:"Store Name",options:e.map(s=>({value:s.name,label:s.name})),required:!0},{type:"date",name:"transaction_date",label:"Transaction Date",required:!0}]}],Uve=["Farms","AgroInput","Product","Store & Transaction"],zve=()=>{var Fe;const[t,e]=Ae.useState(0),[r,n]=Ae.useState({}),[s,o]=Ae.useState([{id:"",props:{}}]),[c,u]=Ae.useState(null),[i,m]=Ae.useState(!1),[g,C]=Ae.useState(""),[B,S]=Ae.useState(""),P=om("/api/farm/","farms"),j=om("/api/district/","districts"),D=om("/api/store/","stores"),F=Rve(s,D,g,B),R=ve=>{n(_e=>({..._e,[ve.target.name]:ve.target.value}))},V=ve=>{const _e=ve.target.value;C(_e),S(""),n(ze=>({...ze,agroInputType:_e,agroInputCategory:"",agroInputSubCategory:""}))},Y=ve=>{const _e=ve.target.value;S(_e),n(ze=>({...ze,agroInputCategory:_e,agroInputSubCategory:""}))},te=ve=>{const{name:_e}=ve.target;_e==="agroInputType"?V(ve):_e==="agroInputCategory"?Y(ve):_e==="store_id"?se(ve,"id"):_e==="store_name"?se(ve,"name"):R(ve)},se=(ve,_e)=>{const ze=ve.target.value;let Ne=null;_e==="id"?Ne=D.find(st=>st.id.toString()===ze):_e==="name"&&(Ne=D.find(st=>st.name===ze)),n(Ne?st=>({...st,store_id:Ne.id,store_name:Ne.name}):st=>({...st,[_e==="id"?"store_id":"store_name"]:ze}))},oe=async(ve,_e)=>{const ze=ve.target.value;if(n(Ne=>({...Ne,[`farm_${_e}_id`]:ze})),o(Ne=>Ne.map((st,ie)=>ie===_e?{...st,id:ze}:st)),ze)try{const Ne=await Tr.get(`/api/farm/${ze}`);if(Ne.data.status==="success"){const st=Ne.data.data;n(ie=>({...ie,[`farm_${_e}_phone`]:st.phonenumber1||st.phonenumber2||"",[`farm_${_e}_district`]:st.district_id||""})),console.log("Updated formData with:",{phone:st.phonenumber1,district:st.district_id})}}catch(Ne){console.error("Error fetching farm properties:",Ne)}},K=()=>{o(ve=>[...ve,{id:"",props:{}}])},de=ve=>{s.length>1&&(o(_e=>_e.filter((ze,Ne)=>Ne!==ve)),n(_e=>{const ze={..._e};return delete ze[`farm_${ve}_id`],delete ze[`farm_${ve}_phone`],delete ze[`farm_${ve}_district`],ze}))},we=()=>{t<F.length-1&&e(t+1)},J=()=>{t>0&&e(t-1)},Z=()=>{var _e;const ve=((_e=F[t])==null?void 0:_e.fields)||[];for(let ze of ve)if(ze.type==="group"){for(let Ne of ze.fields)if(Ne.required&&!r[Ne.name])return!1}else if(ze.required&&!r[ze.name])return!1;return!0},Ie=ve=>{const _e=s.map((ze,Ne)=>({id:ve[`farm_${Ne}_id`],phone:ve[`farm_${Ne}_phone`],district:ve[`farm_${Ne}_district`]})).filter(ze=>ze.id);return`
Farms: ${_e.map(ze=>ze.id).join(", ")}
Phones: ${_e.map(ze=>ze.phone).join(", ")}
Districts: ${_e.map(ze=>ze.district).join(", ")}
Batch: ${ve.batch_number}
Type: ${ve.agroInputType}
${ve.agroInputType==="Fertilizer"?`Category: ${ve.agroInputCategory} - ${ve.agroInputSubCategory}`:""}
Application Date: ${ve.application_date}
Rate: ${ve.application_rate}
Weight: ${ve.agroinput_weight}
Price/Kg: ${ve.price_per_kg}
Total: ${ve.total_price}
Store: ${ve.store_name} (${ve.store_id})
Transaction Date: ${ve.transaction_date}
Payment: ${ve.payment_type}
    `.trim()},be=()=>{const ve=Ie(r);u(ve)},He=async()=>{if(!i){m(!0);try{const ve=JSON.parse(JSON.stringify(r)),_e=parseInt(ve.batch_number,10);if(isNaN(_e)){console.error("Invalid batch number. Must be a number."),m(!1);return}const ze=[];for(let le=0;le<_e;le++){const pe={...ve,batch_number:(le+1).toString()};ze.push(pe)}const Ne=await Tr.post("/api/qrcode/generate_pdf",{qr_data_list:ze,description:"Digital receipt for fertilizer transaction."},{responseType:"blob"}),st=window.URL.createObjectURL(new Blob([Ne.data])),ie=document.createElement("a");ie.href=st,ie.setAttribute("download",`fertilizer_receipts_${ve.batch_number}_batches.pdf`),document.body.appendChild(ie),ie.click(),ie.remove()}catch(ve){console.error("Erreur lors du tlchargement du PDF:",ve)}finally{m(!1)}}};return p.jsx("div",{className:"bg-gradient-to-br from-teal-50 via-white to-blue-50 min-h-screen py-8",children:p.jsxs("div",{className:"container mx-auto px-4",children:[p.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-teal-700",children:"Generate Digital Codes for Fertilizer Application"}),p.jsx(MC,{currentStep:t,totalSteps:F.length,stepNames:Uve}),p.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[p.jsx("div",{className:"w-1/2",children:p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-6 text-teal-700",children:(Fe=F[t])==null?void 0:Fe.title}),p.jsx(DC,{step:F[t],formData:r,onChange:te,onCategoryChange:Y,onStoreChange:se,farmBlocks:s,onAddFarm:K,onRemoveFarm:de,onFarmChange:oe,farms:P,districts:j}),p.jsx(kC,{currentStep:t,totalSteps:F.length,onPrevStep:J,onNextStep:we,onSubmit:be,isStepValid:Z()})]})}),p.jsx("div",{className:"w-1/2",children:p.jsx("div",{className:"sticky top-8",children:p.jsx(OC,{qrData:c,onDownloadPDF:He,isDownloading:i})})})]})]})})},RC=()=>p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-white to-slate-100",children:p.jsxs("div",{className:"relative w-32 h-32",children:[p.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-dashed border-gray-300 animate-spin-slow"}),p.jsx("div",{className:"absolute inset-4 rounded-full border-2 border-dashed border-blue-400 animate-spin-reverse-slower"}),p.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-md animate-ping-fast"}),p.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-3 bg-indigo-400 rounded-full shadow-md animate-ping-slow"}),p.jsx("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 w-2.5 h-2.5 bg-pink-400 rounded-full shadow-md animate-ping-delay"}),p.jsx("div",{className:"absolute top-1/2 right-0 transform -translate-y-1/2 w-2.5 h-2.5 bg-cyan-400 rounded-full shadow-md animate-ping-delay-2"}),p.jsx("div",{className:"absolute inset-1/3 w-12 h-12 bg-blue-100/60 rounded-full animate-pulse shadow-xl backdrop-blur-md"})]})}),Qve={1:"Commodity driven deforestation",2:"Shifting Agriculture",3:"Forestry",4:"Wildfire",5:"Urbanization"},Hve=t=>Qve[t]||"Unknown",Vve=t=>p.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Category"}),p.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Value"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{className:"px-4 py-2 border-b",children:"Carbon gross emissions"}),p.jsx("td",{className:"px-4 py-2 border-b",children:t.gfw_forest_carbon_gross_emissions__Mg_CO2e||0})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"px-4 py-2 border-b",children:"Carbon gross absorption"}),p.jsx("td",{className:"px-4 py-2 border-b",children:t.gfw_forest_carbon_gross_removals__Mg_CO2e||0})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"px-4 py-2 border-b",children:"Carbon net emissions"}),p.jsx("td",{className:"px-4 py-2 border-b",children:t.gfw_forest_carbon_net_flux__Mg_CO2e||0})]})]})]}),Gve=t=>{var B,S,P,j,D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne,st,ie,le,pe,fe;const{geoData:e={},areaInSquareMeters:r,areaInHectares:n,resultStatus:s={},coverExtentDecileData:o={},tscDriverDriver:c={},isJrcGlobalForestCover:u,complianceStatus:i={}}=t,m=((P=(S=(B=e["tree cover loss"])==null?void 0:B[0])==null?void 0:S.data_fields)==null?void 0:P.area__ha)||0,g=m&&n?m/n*100:0,C=Qe=>{switch(Qe){case"100% Compliant":return"text-green-700 bg-green-100 font-semibold";case"Likely Compliant":return"text-yellow-700 bg-yellow-100 font-semibold";case"Not Compliant":return"text-red-700 bg-red-100 font-semibold";default:return"text-gray-700 bg-gray-100 font-semibold"}};return p.jsxs("table",{className:"table-auto w-full mt-4 border-collapse border border-gray-400",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-gray-200",children:[p.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Metric"}),p.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Value"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Project Area"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r&&n?p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[r.toFixed(2)," m"]}),p.jsxs("p",{children:[n.toFixed(2)," ha"]})]}):"Not available"})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Country Deforestation Risk Level"}),p.jsxs("td",{className:"border border-gray-400 px-4 py-2",children:["STANDARD, ",p.jsx("strong",{children:"Percentage:"})," ",g.toFixed(2),"%"]})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"RADD Alert"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:((F=(D=(j=e["wur radd alerts"])==null?void 0:j[0])==null?void 0:D.data_fields)==null?void 0:F.area__ha)===0?p.jsx("p",{children:"0 ha (no RADD alert)"}):p.jsxs("p",{children:[((Y=(V=(R=e["wur radd alerts"])==null?void 0:R[0])==null?void 0:V.data_fields)==null?void 0:Y.area__ha)||0," ha (Alert)"]})})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Tree Cover Loss"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:((oe=(se=(te=e["tree cover loss"])==null?void 0:te[0])==null?void 0:se.data_fields)==null?void 0:oe.area__ha)===0?p.jsx("p",{className:"text-green-600 font-semibold",children:"0 ha (no tree loss since 2020)"}):p.jsxs("p",{className:"text-red-600 font-semibold",children:[(we=(de=(K=e["tree cover loss"])==null?void 0:K[0])==null?void 0:de.data_fields)==null?void 0:we.area__ha," ha of tree cover loss"]})})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Forest Cover (2020)"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:p.jsx("span",{className:u&&u.includes("Forest cover detected")?"text-orange-600 font-semibold":"text-green-600 font-semibold",children:u})})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"EUDR Compliance Assessment"}),p.jsx("td",{className:`border border-gray-400 px-4 py-2 ${C(i.status)}`,children:p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:"px-3 py-1 rounded-full text-sm",children:i.status||"Assessment Pending"})}),p.jsxs("div",{className:"text-xs space-y-1",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Tree Cover Loss:"})," ",((Ie=(Z=(J=e["tree cover loss"])==null?void 0:J[0])==null?void 0:Z.data_fields)==null?void 0:Ie.area__ha)||0," ha"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Forest Cover:"})," ",u&&u.includes("Forest cover detected")?"Detected":"Not detected"]})]})]})})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Protected Area Status"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:(be=s==null?void 0:s.protectedStatus)!=null&&be.percentages?p.jsx("ul",{children:Object.entries(s.protectedStatus.percentages).map(([Qe,Ke])=>{const et=Qe==="0"?"Not in WDPA protected area":Qe==="1"?"In WDPA protected area":Qe==="2"?"In IUCN vulnerable area":Qe==="No Data"?"No data available":"Unknown";return p.jsxs("li",{children:[et,": ",Ke]},Qe)})}):p.jsx("p",{children:"No protected area data available."})})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Cover Extent Summary"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:p.jsxs("ul",{children:[p.jsxs("li",{children:["Non-Zero Count: ",o.nonZeroCount||0]}),p.jsxs("li",{children:["Coverage: ",((He=o.percentageCoverExtent)==null?void 0:He.toFixed(2))||0,"%"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Details:"}),((Fe=o.valueCountArray)==null?void 0:Fe.length)>0?p.jsx("ul",{children:o.valueCountArray.map((Qe,Ke)=>p.jsxs("li",{children:["Decile: ",Qe.value,", Count: ",Qe.count]},Ke))}):" No data available"]})]})})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Tree Cover Drivers"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:c!=null&&c.mostCommonValue?Hve(c.mostCommonValue):"Unknown"})]}),p.jsxs("tr",{children:[p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Cover Extent Area"}),p.jsx("td",{className:"border border-gray-400 px-4 py-2",children:((ze=(_e=(ve=e["wri tropical tree cover"])==null?void 0:ve[0])==null?void 0:_e.data_fields)==null?void 0:ze.area__ha)===0?p.jsx("p",{children:"0 % (LOW)"}):p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[((ie=(st=(Ne=e["wri tropical tree cover"])==null?void 0:Ne[0])==null?void 0:st.data_fields)==null?void 0:ie.avg_cover)||0," % (HIGH)"]}),p.jsxs("p",{children:[((fe=(pe=(le=e["wri tropical tree cover"])==null?void 0:le[0])==null?void 0:pe.data_fields)==null?void 0:fe.area__ha)||0," ha"]})]})})]})]})]})},Zq=t=>`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/geojson(${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[t]},properties:{stroke:"#00FF00","stroke-width":4,"stroke-opacity":1,fill:"#00FF00","fill-opacity":.2}}]}))})/auto/1200x1000?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,$ve=({treeCoverData:t=[],mapboxToken:e,title:r="Tree Cover Analysis"})=>{const n=Ae.useRef(null),s=Ae.useRef(null),[o,c]=Ae.useState(null),[u,i]=Ae.useState({total:0,avgCover:0,bounds:null});Ae.useEffect(()=>{if(t.length===0)return;const C=t.length,B=Math.round(t.reduce((D,F)=>D+F.wri_tropical_tree_cover_extent__decile,0)/C),S=t.map(D=>D.latitude),P=t.map(D=>D.longitude),j={minLat:Math.min(...S),maxLat:Math.max(...S),minLng:Math.min(...P),maxLng:Math.max(...P),centerLat:(Math.min(...S)+Math.max(...S))/2,centerLng:(Math.min(...P)+Math.max(...P))/2};i({total:C,avgCover:B,bounds:j})},[t]);const m=C=>({type:"FeatureCollection",features:C.map(B=>({type:"Feature",properties:{value:B.wri_tropical_tree_cover_extent__decile,driver:B.tsc_tree_cover_loss_drivers__driver||"N/A"},geometry:{type:"Point",coordinates:[B.longitude,B.latitude]}}))}),g=()=>{s.current&&setTimeout(()=>{const C=s.current.getCanvas(),B=document.createElement("canvas");B.width=400,B.height=400;const S=B.getContext("2d"),P=Math.min(C.width,C.height),j=(C.width-P)/2,D=(C.height-P)/2;S.fillStyle="#fff",S.fillRect(0,0,B.width,B.height),S.drawImage(C,j,D,P,P,0,0,B.width,B.height);const F=250,R=65,V=20,Y=20;S.fillStyle="rgba(255,255,255,0.85)",S.fillRect(V,Y,F,R),S.fillStyle="#005f2f",S.font="bold 16px Arial",S.fillText(r,V+10,Y+20),S.fillStyle="#222",S.font="11px Arial";const te=new Date().toLocaleDateString();S.fillText(`Generated: ${te}`,V+10,Y+40),S.fillText(`Points: ${u.total} | Avg. Cover: ${u.avgCover}%`,V+10,Y+55);const se=[{color:"#f7fcf5",label:"010%"},{color:"#c7e9c0",label:"2030%"},{color:"#74c476",label:"4050%"},{color:"#238b45",label:"6070%"},{color:"#006d2c",label:"8090%"},{color:"#00441b",label:"90100%"}],oe=95,K=15+se.length*15,de=B.width-oe-10,we=B.height-K-10,J=12,Z=15;S.fillStyle="rgba(255,255,255,0.75)",S.fillRect(de,we,oe,K),S.font="bold 10px Arial",S.fillStyle="#000",S.fillText("Forest Cover",de+5,we+12),se.forEach((Ie,be)=>{const He=we+18+be*Z;S.fillStyle=Ie.color,S.fillRect(de+5,He,J,J),S.strokeStyle="#666",S.strokeRect(de+5,He,J,J),S.fillStyle="#000",S.font="9px Arial",S.fillText(Ie.label,de+5+J+4,He+J-3)}),c(B.toDataURL("image/png"))},500)};return Ae.useEffect(()=>{if(s.current||t.length===0||!e||!u.bounds)return;Li.accessToken=e;const C=m(t);s.current=new Li.Map({container:n.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[u.bounds.centerLng,u.bounds.centerLat],zoom:14,preserveDrawingBuffer:!0}),s.current.on("load",()=>{s.current.addSource("tree-cover-data",{type:"geojson",data:C}),s.current.addLayer({id:"tree-heatmap",type:"heatmap",source:"tree-cover-data",paint:{"heatmap-weight":["interpolate",["linear"],["get","value"],0,0,100,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,20,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(247,252,245,0)",.2,"#c7e9c0",.4,"#74c476",.6,"#238b45",.8,"#006d2c",1,"#00441b"],"heatmap-radius":["interpolate",["linear"],["zoom"],10,5,20,30],"heatmap-opacity":.7}}),s.current.addLayer({id:"tree-points",type:"circle",source:"tree-cover-data",paint:{"circle-radius":["interpolate",["linear"],["zoom"],13,3,20,10],"circle-color":["interpolate",["linear"],["get","value"],0,"#f7fcf5",20,"#c7e9c0",40,"#74c476",60,"#238b45",80,"#006d2c",100,"#00441b"],"circle-opacity":.8,"circle-stroke-width":.5,"circle-stroke-color":"#fff"}}),u.bounds&&s.current.once("idle",()=>{s.current.fitBounds([[u.bounds.minLng,u.bounds.minLat],[u.bounds.maxLng,u.bounds.maxLat]],{padding:50,maxZoom:18,duration:0}),setTimeout(()=>g(),1e3)})})},[t,e,u.bounds]),!e||t.length===0?p.jsx("div",{className:"w-full flex justify-center items-center bg-gray-50 h-96",children:p.jsx("p",{className:"text-gray-600",children:"No data or token."})}):p.jsxs("div",{className:"relative w-full min-h-[400px]",children:[p.jsx("div",{ref:n,style:{width:"400px",height:"400px",position:"absolute",opacity:0,pointerEvents:"none",zIndex:-1}}),o?p.jsx("div",{className:"flex justify-center items-center w-full",style:{height:"400px"},children:p.jsx("img",{src:o,alt:"Forest map",className:"w-full h-auto object-contain mx-auto",style:{maxWidth:"400px",maxHeight:"400px"}})}):p.jsx("div",{className:"flex justify-center items-center bg-gray-50 w-full h-[400px]",children:p.jsx("p",{className:"text-gray-600",children:" Generating centered map..."})})]})},UC=({results:t,reportRef:e,farmInfo:r,onReportCalculated:n,reportType:s="farm"})=>{var _e,ze,Ne,st,ie,le,pe,fe,Qe,Ke,et;console.log((ze=(_e=t["wri tropical tree cover extent"])==null?void 0:_e[2])==null?void 0:ze.data_fields);const c=(()=>{switch(s){case"forest":return{entityType:"Forest",idLabel:"Forest ID",description:"This report provides an overview of Forest ID"};case"guest":return{entityType:"Property",idLabel:"Property ID",description:"This report provides an overview of Property ID"};default:return{entityType:"Farm",idLabel:"Farm ID",description:"This report provides an overview of Farm ID"}}})(),[u,i]=Ae.useState({nonZeroValues:[],nonZeroCount:0,percentageCoverExtent:0,valueCountArray:[]}),[m,g]=Ae.useState({protectedStatus:{counts:{},percentages:{}},indigenousStatus:""}),[C,B]=Ae.useState(null),[S,P]=Ae.useState(null),[j,D]=Ae.useState({mostCommonValue:"",frequencyCounts:{}}),[F,R]=Ae.useState(null),[V,Y]=Ae.useState({}),[te,se]=Ae.useState(0),[oe,K]=Ae.useState(0),[de,we]=Ae.useState(0),[J,Z]=Ae.useState({status:"",statusColor:"",description:""}),Ie=Ui.useMemo(()=>{const tt=t["wri tropical tree cover extent"];if(!tt||!Array.isArray(tt))return null;const bt=tt.find(De=>{var Mt;return Array.isArray(De==null?void 0:De.data_fields)&&De.data_fields.length>0&&((Mt=De.data_fields[0])==null?void 0:Mt.latitude)!==void 0});return(bt==null?void 0:bt.data_fields)||null},[t]),be=Ui.useMemo(()=>!Ie||!Array.isArray(Ie)?(console.warn(" No tree cover data available for map"),[]):(console.log(" Tree cover data points:",Ie.length),Ie.map(tt=>({latitude:tt.latitude,longitude:tt.longitude,wri_tropical_tree_cover_extent__decile:tt.wri_tropical_tree_cover_extent__decile,tsc_tree_cover_loss_drivers__driver:tt.tsc_tree_cover_loss_drivers__driver||"Unknown"}))),[Ie]),He="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",Fe=((ie=(st=(Ne=t["jrc global forest cover"])==null?void 0:Ne[0])==null?void 0:st.coordinates)==null?void 0:ie[0])||((fe=(pe=(le=t["tree cover loss"])==null?void 0:le[0])==null?void 0:pe.coordinates)==null?void 0:fe[0])||((et=(Ke=(Qe=t["soil carbon"])==null?void 0:Qe[0])==null?void 0:Ke.coordinates)==null?void 0:et[0]),ve=(tt,bt)=>{const De=tt>0;return console.log(tt,bt),!De&&!bt?{status:"100% Compliant",statusColor:"text-green-600 bg-green-100",description:"No tree cover loss detected and no forest cover detected. Fully compliant with EUDR regulations."}:!De&&bt||De&&!bt?{status:"Likely Compliant",statusColor:"text-yellow-600 bg-yellow-100",description:"No tree cover loss detected but forest cover is present. Area shows good forest conservation practices."}:De?{status:"Not Compliant",statusColor:"text-red-600 bg-red-100",description:"Tree cover loss detected. This indicates potential deforestation activity that may violate EUDR regulations."}:{status:"Assessment Pending",statusColor:"text-gray-600 bg-gray-100",description:"Insufficient data to determine compliance status."}};return Ae.useEffect(()=>{var ar,Yt,Gr,Wr,On,mn,Hn,Vi;if(!t||typeof t!="object"||Object.keys(t).length===0)return;Y(t);let tt={nonZeroValues:[],nonZeroCount:0,percentageCoverExtent:0,valueCountArray:[]};const bt=t["wri tropical tree cover extent"];if(Array.isArray(bt)){const Bn=bt.find(jn=>{var Dn;return((Dn=jn.pixel)==null?void 0:Dn.includes("grouped by"))&&Array.isArray(jn.data_fields)});if(Bn&&Array.isArray(Bn.data_fields)){const jn=Bn.data_fields;let Dn=0,Gi=0;const Rn=[],Zr=[];jn.forEach(un=>{const Ii=un==null?void 0:un.wri_tropical_tree_cover_extent__decile,ri=(un==null?void 0:un.count)||0;if(Gi+=ri,Ii&&Ii!==0){Dn+=ri;for(let ur=0;ur<ri;ur++)Rn.push(Ii)}Zr.push({value:Number(Ii),count:ri})});const Pr=Gi>0?Dn/Gi*100:0;tt={nonZeroValues:Rn,nonZeroCount:Dn,percentageCoverExtent:Pr,valueCountArray:Zr},i(tt)}}let De={mostCommonValue:"",frequencyCounts:{}};const Mt=t["tsc tree cover loss drivers"];if(Array.isArray(Mt)&&Mt.length>0){const Bn=Mt[0],jn=Bn==null?void 0:Bn.data_fields;let Dn={},Gi=null,Rn=0;if(Array.isArray(jn))jn.forEach(Zr=>{const Pr=Zr==null?void 0:Zr.tsc_tree_cover_loss_drivers__driver,un=(Zr==null?void 0:Zr.count)||1;Pr&&(Dn[Pr]=(Dn[Pr]||0)+un,Dn[Pr]>Rn&&(Rn=Dn[Pr],Gi=Pr))});else if(typeof jn=="object"){const Zr=jn==null?void 0:jn.tsc_tree_cover_loss_drivers__driver;Zr&&(Dn[Zr]=1,Gi=Zr)}De={mostCommonValue:Gi,frequencyCounts:Dn},D(De)}let ir=0;const Ar=t["tree cover loss"];Array.isArray(Ar)&&Ar.length>0&&(ir=((Yt=(ar=Ar[0])==null?void 0:ar.data_fields)==null?void 0:Yt.area__ha)||0,se(ir));let Ze={counts:{},percentages:{}};const Ue=t["soil carbon"];if(Array.isArray(Ue)&&Ue.length>0){const Bn=Ue[0],jn=Bn==null?void 0:Bn.data_fields,Dn={};let Gi=0;Array.isArray(jn)&&jn.forEach(Zr=>{const Pr=(Zr==null?void 0:Zr.wdpa_protected_areas__iucn_cat)??"Unknown",un=(Zr==null?void 0:Zr.count)||1;Dn[Pr]=un,Gi+=un});const Rn={};Gi>0?Object.entries(Dn).forEach(([Zr,Pr])=>{Rn[Zr]=(Pr/Gi*100).toFixed(2)+"%"}):Rn["No Data"]="0%",Ze={counts:Dn,percentages:Rn},g(Zr=>({...Zr,protectedStatus:Ze}))}let hr="";const Dt=t["landmark indigenous and community lands"];if(Array.isArray(Dt)&&Dt.length>0){const Bn=((Gr=Dt[0])==null?void 0:Gr.data_fields)||[];!Array.isArray(Bn)||Bn.length===0?hr="Not known, land is not gazetted":hr=Bn.some(Dn=>(Dn==null?void 0:Dn.name)||(Dn==null?void 0:Dn.value)===1)?"Presence of indigenous and community lands":"No presence of indigenous and community lands",g(jn=>({...jn,indigenousStatus:hr}))}let vt=0,Kt=0;if(Fe&&Array.isArray(Fe)&&Fe.length>=3){const Bn=Fe[0],jn=Fe[Fe.length-1],Dn=Bn[0]!==jn[0]||Bn[1]!==jn[1]?[...Fe,Bn]:Fe;try{const Gi=Ahe([Dn]);vt=rf(Gi),Kt=vt/1e4,B(vt),P(Kt)}catch(Gi){console.error("Turf error on polygon:",Gi)}}let rr=!1,nr="No forest cover detected";const Nr=t["jrc global forest cover"];if(Array.isArray(Nr)&&Nr.length>0){const Bn=(Wr=Nr[0])==null?void 0:Wr.data_fields,jn=(Bn==null?void 0:Bn.area__ha)||0;console.log("Forest area ha",jn),jn>0?(rr=!0,nr=`Forest cover detected: ${jn.toFixed(2)} hectares`,R(nr)):(rr=!1,R(nr))}let on=0;const Ir=t["wri tropical tree cover"];Array.isArray(Ir)&&Ir.length>0&&(on=((mn=(On=Ir[0])==null?void 0:On.data_fields)==null?void 0:mn.avg_cover)||0,K(on));let cn=0;const Sn=t["wur radd alerts"];Array.isArray(Sn)&&Sn.length>0&&(cn=((Vi=(Hn=Sn[0])==null?void 0:Hn.data_fields)==null?void 0:Vi.area__ha)||0,we(cn));const Ln=ve(ir,rr);Z(Ln);const ln={areaInSquareMeters:vt,areaInHectares:Kt,deforestationRiskLevel:"STANDARD",raddAlertsArea:cn,treeCoverLossArea:ir,isJrcGlobalForestCover:nr,complianceStatus:Ln,protectedStatus:Ze,coverExtentDecileData:tt,tscDriverDriver:De,wriTropicalTreeCoverAvg:on,indigenousStatus:hr};console.log(" Check conditions for calling callback:"),console.log("  - farmInfo?.farm_id:",r==null?void 0:r.farm_id),console.log("  - calculatedAreaHa:",Kt),console.log("  - calculatedAreaHa > 0:",Kt>0),console.log("  - onReportCalculated exists?:",!!n),n&&typeof n=="function"&&(r!=null&&r.farm_id)&&Kt>0?(console.log(" Calling parent callback with report data..."),n(ln)):(console.warn(" Conditions NOT met for calling callback:"),n||console.warn("  - onReportCalculated is not provided"),r!=null&&r.farm_id||console.warn("  - Missing farmInfo.farm_id"),Kt>0||console.warn("  - calculatedAreaHa is not > 0 (value:",Kt,")"))},[t,r,n]),p.jsxs("div",{ref:e,className:"carbon-report-a4 w-full h-full m-0 p-0 bg-white text-gray-900 font-sans leading-relaxed space-y-8",children:[p.jsxs("div",{className:"flex items-center justify-between border-b-4 border-green-700 pb-6 px-8 pt-8",children:[p.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center shadow-sm",children:p.jsx("img",{src:"https://www.nkusu.com/parrotlogo.svg",alt:"Parrot",className:"object-contain w-full h-full rounded-md"})}),p.jsxs("div",{className:"flex-1 text-center px-4",children:[p.jsx("h2",{className:"text-3xl font-bold text-green-800 mb-1",children:"EUDR COMPLIANCE REPORT"}),p.jsx("p",{className:"text-sm text-gray-600",children:"Report generated based on the Regulation (EU) 2023/1115 on deforestation-free products."})]}),p.jsx("div",{className:"w-24 h-24 flex justify-end",children:p.jsx("img",{src:"https://www.nkusu.com/logo.jpg",alt:"Logo",className:"object-contain w-full h-full rounded-md shadow-sm"})})]}),r&&p.jsxs("p",{className:"px-8 py-2 bg-gray-100 rounded-none border-y border-gray-300 text-sm shadow-inner",children:[c.description," ",p.jsx("strong",{children:r.farm_id}),", owned by ",p.jsx("strong",{children:r.name}),s==="farm"&&r.subcounty&&r.district_name&&p.jsxs(p.Fragment,{children:[", located in ",p.jsx("strong",{children:r.subcounty}),", ",r.district_name,". The farm is a member of the ",r.subcounty," and plays a significant role in the local agricultural landscape."]}),s==="forest"&&p.jsx(p.Fragment,{children:". This forest area is monitored for compliance with EUDR regulations."}),r.geolocation&&p.jsxs(p.Fragment,{children:[" ","With geolocation coordinates ",p.jsx("strong",{children:r.geolocation}),","]}),r.crops&&r.crops.length>0?p.jsxs(p.Fragment,{children:["the ",c.entityType.toLowerCase()," specializes in ",p.jsx("strong",{children:r.crops[0].crop})," and operates within a region characterized by Landtype: ",p.jsx("strong",{children:r.crops[0].land_type}),"."]}):p.jsx("span",{children:" no specific crops mentioned."}),"This report outlines the ",c.entityType.toLowerCase(),"'s activities, challenges, and opportunities to support its continued growth and sustainability."]}),p.jsxs("div",{className:"report-body space-y-6 bg-gray-50 px-8 py-0 shadow-none rounded-none",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsx("p",{children:"This report provides a compliance assessment under the European Union Regulation 2023/1115, which governs the import and export of products associated with deforestation and degradation."}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"1. RADD Alert (EUDR Article 2)"}),p.jsx("p",{children:"applicable to most parts of Uganda, only parts of Lake Albert region neighbouring DRCongo"})]}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"2. Tree Cover Loss (EUDR, Article 2):"}),p.jsxs("div",{className:"text-gray-700",children:["Area in which Tree loss was identified since Dec 2020:",p.jsxs("ul",{className:"list-disc list-inside text-gray-700 mt-2",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Zero:"})," Plot/Farm is fully compliant with EUDR Law."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Non-Zero:"})," Plot/Farm likely non compliant with EUDR Law."]})]})]})]}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"3. Forest Cover (EUDR, Article 2):"}),p.jsxs("div",{className:"text-gray-700",children:["EU joint Research Centre Geostore for checking existence or not of forest cover as of 2020",p.jsxs("ul",{className:"list-disc list-inside text-gray-700 mt-2",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"None detected:"})," Plot/Farm is fully compliant with EUDR Law."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Forest detected:"})," Farm requires careful assessment for EUDR compliance."]})]})]})]}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"4. Tree Cover Extent (EUDR, Article 2):"}),p.jsxs("p",{className:"text-gray-700",children:["Analysis of tree cover, expressed in deciles (ranging from ",p.jsx("strong",{children:"0-100"}),"), to evaluate forest coverage."]})]}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"5. Tree Cover Loss Drivers (EUDR Article 10):"}),p.jsx("p",{children:"Identifies the primary causes of deforestation or degradation."})]}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"6. Protected Area (EUDR Article 10):"}),p.jsx("p",{children:"Indicates if the plot is located in a gazetted protected area (national park, wetland, etc.)."})]}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"7. indigenous and community lands (EUDR Article 10):"}),p.jsx("p",{children:"Determines whether the land overlaps with recognized indigenous or community land."})]}),p.jsx("div",{className:"html2pdf__page-break"}),p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[p.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"Summary Compliance Table"}),Gve({geoData:V,areaInSquareMeters:C,areaInHectares:S,resultStatus:m,coverExtentDecileData:u,tscDriverDriver:j,isJrcGlobalForestCover:F,treeCoverLossArea:te,wriTropicalTreeCoverAvg:oe,raddAlertsArea:de,complianceStatus:J})]}),p.jsx("div",{className:"html2pdf__page-break"}),Fe&&be.length>0&&p.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-4",children:[p.jsx("h2",{className:"text-2xl font-bold text-green-800",children:"Risk Assessment Breakdown"}),p.jsx("p",{children:"Analysis shows:"}),p.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[p.jsxs("li",{children:["Area: ",S==null?void 0:S.toFixed(2)," hectares"]}),p.jsxs("li",{children:["Tree cover loss: ",te," hectares"]}),p.jsxs("li",{children:["Average tree cover: ",oe.toFixed(1),"%"]}),p.jsxs("li",{children:["Primary deforestation driver: ",(j==null?void 0:j.mostCommonValue)||"Unknown"]}),p.jsxs("li",{children:["RADD alerts: ",de," hectares"]}),p.jsx("li",{children:p.jsxs("strong",{children:["Compliance Status: ",J.status]})})]}),p.jsx("img",{src:Zq(Fe),alt:"Map",className:"report-map w-full rounded-lg shadow-md"})]})]}),p.jsx("div",{className:"html2pdf__page-break"}),p.jsxs("div",{className:"my-6",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Static Map Export"}),p.jsx($ve,{treeCoverData:be,mapboxToken:He,title:"Tree Cover Analysis",subtitle:`${be.length} data points`})]})]}),p.jsx("div",{className:"report-footer border-t-2 border-gray-300 px-8 pt-6 text-xs text-gray-500 text-center mt-10",children:" 2025 Agriyields. Contact: nkusu@agriyields.com"})]})};var Jq={exports:{}};const qve="modulepreload",Wve=function(t){return"/"+t},U7={},w1=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(r.map(u=>{if(u=Wve(u),u in U7)return;U7[u]=!0;const i=u.endsWith(".css"),m=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const g=document.createElement("link");if(g.rel=i?"stylesheet":qve,i||(g.as="script",g.crossOrigin=""),g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),i)return new Promise((C,B)=>{g.addEventListener("load",C),g.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${u}`)))})}))}return s.then(()=>e()).catch(o=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o})};function ba(t){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(t)}var Yu=Uint8Array,hh=Uint16Array,CF=Int32Array,zC=new Yu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),QC=new Yu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tL=new Yu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),eW=function(t,e){for(var r=new hh(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new CF(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)s[o]=o-r[n]<<5|n;return{b:r,r:s}},tW=eW(zC,2),rW=tW.b,rL=tW.r;rW[28]=258,rL[258]=28;var nW=eW(QC,0),Kve=nW.b,z7=nW.r,nL=new hh(32768);for(var fl=0;fl<32768;++fl){var $A=(fl&43690)>>1|(fl&21845)<<1;$A=($A&52428)>>2|($A&13107)<<2,$A=($A&61680)>>4|($A&3855)<<4,nL[fl]=(($A&65280)>>8|($A&255)<<8)>>1}var Cp=function(t,e,r){for(var n=t.length,s=0,o=new hh(e);s<n;++s)t[s]&&++o[t[s]-1];var c=new hh(e);for(s=1;s<e;++s)c[s]=c[s-1]+o[s-1]<<1;var u;if(r){u=new hh(1<<e);var i=15-e;for(s=0;s<n;++s)if(t[s])for(var m=s<<4|t[s],g=e-t[s],C=c[t[s]-1]++<<g,B=C|(1<<g)-1;C<=B;++C)u[nL[C]>>i]=m}else for(u=new hh(n),s=0;s<n;++s)t[s]&&(u[s]=nL[c[t[s]-1]++]>>15-t[s]);return u},Km=new Yu(288);for(var fl=0;fl<144;++fl)Km[fl]=8;for(var fl=144;fl<256;++fl)Km[fl]=9;for(var fl=256;fl<280;++fl)Km[fl]=7;for(var fl=280;fl<288;++fl)Km[fl]=8;var U_=new Yu(32);for(var fl=0;fl<32;++fl)U_[fl]=5;var Xve=Cp(Km,9,0),Yve=Cp(Km,9,1),Zve=Cp(U_,5,0),Jve=Cp(U_,5,1),v3=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},bf=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},x3=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},SF=function(t){return(t+7)/8|0},iW=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Yu(t.subarray(e,r))},exe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],If=function(t,e,r){var n=new Error(e||exe[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,If),!r)throw n;return n},txe=function(t,e,r,n){var s=t.length,o=0;if(!s||e.f&&!e.l)return r||new Yu(0);var c=!r,u=c||e.i!=2,i=e.i;c&&(r=new Yu(s*3));var m=function(De){var Mt=r.length;if(De>Mt){var ir=new Yu(Math.max(Mt*2,De));ir.set(r),r=ir}},g=e.f||0,C=e.p||0,B=e.b||0,S=e.l,P=e.d,j=e.m,D=e.n,F=s*8;do{if(!S){g=bf(t,C,1);var R=bf(t,C+1,3);if(C+=3,R)if(R==1)S=Yve,P=Jve,j=9,D=5;else if(R==2){var se=bf(t,C,31)+257,oe=bf(t,C+10,15)+4,K=se+bf(t,C+5,31)+1;C+=14;for(var de=new Yu(K),we=new Yu(19),J=0;J<oe;++J)we[tL[J]]=bf(t,C+J*3,7);C+=oe*3;for(var Z=v3(we),Ie=(1<<Z)-1,be=Cp(we,Z,1),J=0;J<K;){var He=be[bf(t,C,Ie)];C+=He&15;var V=He>>4;if(V<16)de[J++]=V;else{var Fe=0,ve=0;for(V==16?(ve=3+bf(t,C,3),C+=2,Fe=de[J-1]):V==17?(ve=3+bf(t,C,7),C+=3):V==18&&(ve=11+bf(t,C,127),C+=7);ve--;)de[J++]=Fe}}var _e=de.subarray(0,se),ze=de.subarray(se);j=v3(_e),D=v3(ze),S=Cp(_e,j,1),P=Cp(ze,D,1)}else If(1);else{var V=SF(C)+4,Y=t[V-4]|t[V-3]<<8,te=V+Y;if(te>s){i&&If(0);break}u&&m(B+Y),r.set(t.subarray(V,te),B),e.b=B+=Y,e.p=C=te*8,e.f=g;continue}if(C>F){i&&If(0);break}}u&&m(B+131072);for(var Ne=(1<<j)-1,st=(1<<D)-1,ie=C;;ie=C){var Fe=S[x3(t,C)&Ne],le=Fe>>4;if(C+=Fe&15,C>F){i&&If(0);break}if(Fe||If(2),le<256)r[B++]=le;else if(le==256){ie=C,S=null;break}else{var pe=le-254;if(le>264){var J=le-257,fe=zC[J];pe=bf(t,C,(1<<fe)-1)+rW[J],C+=fe}var Qe=P[x3(t,C)&st],Ke=Qe>>4;Qe||If(3),C+=Qe&15;var ze=Kve[Ke];if(Ke>3){var fe=QC[Ke];ze+=x3(t,C)&(1<<fe)-1,C+=fe}if(C>F){i&&If(0);break}u&&m(B+131072);var et=B+pe;if(B<ze){var tt=o-ze,bt=Math.min(ze,et);for(tt+B<0&&If(3);B<bt;++B)r[B]=n[tt+B]}for(;B<et;++B)r[B]=r[B-ze]}}e.l=S,e.p=ie,e.b=B,e.f=g,S&&(g=1,e.m=j,e.d=P,e.n=D)}while(!g);return B!=r.length&&c?iW(r,0,B):r.subarray(0,B)},Hp=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Hv=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},_3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,o=r.slice();if(!s)return{t:oW,l:0};if(s==1){var c=new Yu(r[0].s+1);return c[r[0].s]=1,{t:c,l:1}}r.sort(function(te,se){return te.f-se.f}),r.push({s:-1,f:25001});var u=r[0],i=r[1],m=0,g=1,C=2;for(r[0]={s:-1,f:u.f+i.f,l:u,r:i};g!=s-1;)u=r[r[m].f<r[C].f?m++:C++],i=r[m!=g&&r[m].f<r[C].f?m++:C++],r[g++]={s:-1,f:u.f+i.f,l:u,r:i};for(var B=o[0].s,n=1;n<s;++n)o[n].s>B&&(B=o[n].s);var S=new hh(B+1),P=iL(r[g-1],S,0);if(P>e){var n=0,j=0,D=P-e,F=1<<D;for(o.sort(function(se,oe){return S[oe.s]-S[se.s]||se.f-oe.f});n<s;++n){var R=o[n].s;if(S[R]>e)j+=F-(1<<P-S[R]),S[R]=e;else break}for(j>>=D;j>0;){var V=o[n].s;S[V]<e?j-=1<<e-S[V]++-1:++n}for(;n>=0&&j;--n){var Y=o[n].s;S[Y]==e&&(--S[Y],++j)}P=e}return{t:new Yu(S),l:P}},iL=function(t,e,r){return t.s==-1?Math.max(iL(t.l,e,r+1),iL(t.r,e,r+1)):e[t.s]=r},Q7=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new hh(++e),n=0,s=t[0],o=1,c=function(i){r[n++]=i},u=1;u<=e;++u)if(t[u]==s&&u!=e)++o;else{if(!s&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(s),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(s);o=1,s=t[u]}return{c:r.subarray(0,n),n:e}},Vv=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},sW=function(t,e,r){var n=r.length,s=SF(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var o=0;o<n;++o)t[s+o+4]=r[o];return(s+4+n)*8},H7=function(t,e,r,n,s,o,c,u,i,m,g){Hp(e,g++,r),++s[256];for(var C=_3(s,15),B=C.t,S=C.l,P=_3(o,15),j=P.t,D=P.l,F=Q7(B),R=F.c,V=F.n,Y=Q7(j),te=Y.c,se=Y.n,oe=new hh(19),K=0;K<R.length;++K)++oe[R[K]&31];for(var K=0;K<te.length;++K)++oe[te[K]&31];for(var de=_3(oe,7),we=de.t,J=de.l,Z=19;Z>4&&!we[tL[Z-1]];--Z);var Ie=m+5<<3,be=Vv(s,Km)+Vv(o,U_)+c,He=Vv(s,B)+Vv(o,j)+c+14+3*Z+Vv(oe,we)+2*oe[16]+3*oe[17]+7*oe[18];if(i>=0&&Ie<=be&&Ie<=He)return sW(e,g,t.subarray(i,i+m));var Fe,ve,_e,ze;if(Hp(e,g,1+(He<be)),g+=2,He<be){Fe=Cp(B,S,0),ve=B,_e=Cp(j,D,0),ze=j;var Ne=Cp(we,J,0);Hp(e,g,V-257),Hp(e,g+5,se-1),Hp(e,g+10,Z-4),g+=14;for(var K=0;K<Z;++K)Hp(e,g+3*K,we[tL[K]]);g+=3*Z;for(var st=[R,te],ie=0;ie<2;++ie)for(var le=st[ie],K=0;K<le.length;++K){var pe=le[K]&31;Hp(e,g,Ne[pe]),g+=we[pe],pe>15&&(Hp(e,g,le[K]>>5&127),g+=le[K]>>12)}}else Fe=Xve,ve=Km,_e=Zve,ze=U_;for(var K=0;K<u;++K){var fe=n[K];if(fe>255){var pe=fe>>18&31;Hv(e,g,Fe[pe+257]),g+=ve[pe+257],pe>7&&(Hp(e,g,fe>>23&31),g+=zC[pe]);var Qe=fe&31;Hv(e,g,_e[Qe]),g+=ze[Qe],Qe>3&&(Hv(e,g,fe>>5&8191),g+=QC[Qe])}else Hv(e,g,Fe[fe]),g+=ve[fe]}return Hv(e,g,Fe[256]),g+ve[256]},rxe=new CF([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oW=new Yu(0),nxe=function(t,e,r,n,s,o){var c=o.z||t.length,u=new Yu(n+c+5*(1+Math.ceil(c/7e3))+s),i=u.subarray(n,u.length-s),m=o.l,g=(o.r||0)&7;if(e){g&&(i[0]=o.r>>3);for(var C=rxe[e-1],B=C>>13,S=C&8191,P=(1<<r)-1,j=o.p||new hh(32768),D=o.h||new hh(P+1),F=Math.ceil(r/3),R=2*F,V=function(Ar){return(t[Ar]^t[Ar+1]<<F^t[Ar+2]<<R)&P},Y=new CF(25e3),te=new hh(288),se=new hh(32),oe=0,K=0,de=o.i||0,we=0,J=o.w||0,Z=0;de+2<c;++de){var Ie=V(de),be=de&32767,He=D[Ie];if(j[be]=He,D[Ie]=be,J<=de){var Fe=c-de;if((oe>7e3||we>24576)&&(Fe>423||!m)){g=H7(t,i,0,Y,te,se,K,we,Z,de-Z,g),we=oe=K=0,Z=de;for(var ve=0;ve<286;++ve)te[ve]=0;for(var ve=0;ve<30;++ve)se[ve]=0}var _e=2,ze=0,Ne=S,st=be-He&32767;if(Fe>2&&Ie==V(de-st))for(var ie=Math.min(B,Fe)-1,le=Math.min(32767,de),pe=Math.min(258,Fe);st<=le&&--Ne&&be!=He;){if(t[de+_e]==t[de+_e-st]){for(var fe=0;fe<pe&&t[de+fe]==t[de+fe-st];++fe);if(fe>_e){if(_e=fe,ze=st,fe>ie)break;for(var Qe=Math.min(st,fe-2),Ke=0,ve=0;ve<Qe;++ve){var et=de-st+ve&32767,tt=j[et],bt=et-tt&32767;bt>Ke&&(Ke=bt,He=et)}}}be=He,He=j[be],st+=be-He&32767}if(ze){Y[we++]=268435456|rL[_e]<<18|z7[ze];var De=rL[_e]&31,Mt=z7[ze]&31;K+=zC[De]+QC[Mt],++te[257+De],++se[Mt],J=de+_e,++oe}else Y[we++]=t[de],++te[t[de]]}}for(de=Math.max(de,J);de<c;++de)Y[we++]=t[de],++te[t[de]];g=H7(t,i,m,Y,te,se,K,we,Z,de-Z,g),m||(o.r=g&7|i[g/8|0]<<3,g-=7,o.h=D,o.p=j,o.i=de,o.w=J)}else{for(var de=o.w||0;de<c+m;de+=65535){var ir=de+65535;ir>=c&&(i[g/8|0]=m,ir=c),g=sW(i,g+1,t.subarray(de,ir))}o.i=c}return iW(u,0,n+SF(g)+s)},aW=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,o=r.length|0,c=0;c!=o;){for(var u=Math.min(c+2655,o);c<u;++c)s+=n+=r[c];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},ixe=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),c=new Yu(o.length+t.length);c.set(o),c.set(t,o.length),t=c,s.w=o.length}return nxe(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},lW=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},sxe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=aW();s.p(e.dictionary),lW(t,2,s.d())}},oxe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&If(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&If(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function sL(t,e){e||(e={});var r=aW();r.p(t);var n=ixe(t,e,e.dictionary?6:2,4);return sxe(n,e),lW(n,n.length-4,r.d()),n}function axe(t,e){return txe(t.subarray(oxe(t,e),-4),{i:2},e,e)}var lxe=typeof TextDecoder<"u"&&new TextDecoder,cxe=0;try{lxe.decode(oW,{stream:!0}),cxe=1}catch{}var ls=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function b3(){ls.console&&typeof ls.console.log=="function"&&ls.console.log.apply(ls.console,arguments)}var Ra={log:b3,warn:function(t){ls.console&&(typeof ls.console.warn=="function"?ls.console.warn.apply(ls.console,arguments):b3.call(null,arguments))},error:function(t){ls.console&&(typeof ls.console.error=="function"?ls.console.error.apply(ls.console,arguments):b3(t))}};function w3(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Og(n.response,e,r)},n.onerror=function(){Ra.error("could not download file")},n.send()}function V7(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function f2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gx,oL,Og=ls.saveAs||((typeof window>"u"?"undefined":ba(window))!=="object"||window!==ls?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=ls.URL||ls.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?V7(s.href)?w3(t,e,r):f2(s,s.target="_blank"):f2(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){f2(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(V7(t))w3(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){f2(n)})}else navigator.msSaveOrOpenBlob(function(s,o){return o===void 0?o={autoBom:!1}:ba(o)!=="object"&&(Ra.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return w3(t,e,r);var s=t.type==="application/octet-stream",o=/constructor/i.test(ls.HTMLElement)||ls.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&o)&&(typeof FileReader>"u"?"undefined":ba(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(t)}else{var i=ls.URL||ls.webkitURL,m=i.createObjectURL(t);n?n.location=m:location.href=m,n=null,setTimeout(function(){i.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cW(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,o=r[n].process,c=s.exec(t);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),i=this.g.toString(16),m=this.b.toString(16);return u.length==1&&(u="0"+u),i.length==1&&(i="0"+i),m.length==1&&(m="0"+m),"#"+u+i+m}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function C3(t,e){var r=t[0],n=t[1],s=t[2],o=t[3];r=ku(r,n,s,o,e[0],7,-680876936),o=ku(o,r,n,s,e[1],12,-389564586),s=ku(s,o,r,n,e[2],17,606105819),n=ku(n,s,o,r,e[3],22,-1044525330),r=ku(r,n,s,o,e[4],7,-176418897),o=ku(o,r,n,s,e[5],12,1200080426),s=ku(s,o,r,n,e[6],17,-1473231341),n=ku(n,s,o,r,e[7],22,-45705983),r=ku(r,n,s,o,e[8],7,1770035416),o=ku(o,r,n,s,e[9],12,-1958414417),s=ku(s,o,r,n,e[10],17,-42063),n=ku(n,s,o,r,e[11],22,-1990404162),r=ku(r,n,s,o,e[12],7,1804603682),o=ku(o,r,n,s,e[13],12,-40341101),s=ku(s,o,r,n,e[14],17,-1502002290),r=Du(r,n=ku(n,s,o,r,e[15],22,1236535329),s,o,e[1],5,-165796510),o=Du(o,r,n,s,e[6],9,-1069501632),s=Du(s,o,r,n,e[11],14,643717713),n=Du(n,s,o,r,e[0],20,-373897302),r=Du(r,n,s,o,e[5],5,-701558691),o=Du(o,r,n,s,e[10],9,38016083),s=Du(s,o,r,n,e[15],14,-660478335),n=Du(n,s,o,r,e[4],20,-405537848),r=Du(r,n,s,o,e[9],5,568446438),o=Du(o,r,n,s,e[14],9,-1019803690),s=Du(s,o,r,n,e[3],14,-187363961),n=Du(n,s,o,r,e[8],20,1163531501),r=Du(r,n,s,o,e[13],5,-1444681467),o=Du(o,r,n,s,e[2],9,-51403784),s=Du(s,o,r,n,e[7],14,1735328473),r=Ou(r,n=Du(n,s,o,r,e[12],20,-1926607734),s,o,e[5],4,-378558),o=Ou(o,r,n,s,e[8],11,-2022574463),s=Ou(s,o,r,n,e[11],16,1839030562),n=Ou(n,s,o,r,e[14],23,-35309556),r=Ou(r,n,s,o,e[1],4,-1530992060),o=Ou(o,r,n,s,e[4],11,1272893353),s=Ou(s,o,r,n,e[7],16,-155497632),n=Ou(n,s,o,r,e[10],23,-1094730640),r=Ou(r,n,s,o,e[13],4,681279174),o=Ou(o,r,n,s,e[0],11,-358537222),s=Ou(s,o,r,n,e[3],16,-722521979),n=Ou(n,s,o,r,e[6],23,76029189),r=Ou(r,n,s,o,e[9],4,-640364487),o=Ou(o,r,n,s,e[12],11,-421815835),s=Ou(s,o,r,n,e[15],16,530742520),r=Ru(r,n=Ou(n,s,o,r,e[2],23,-995338651),s,o,e[0],6,-198630844),o=Ru(o,r,n,s,e[7],10,1126891415),s=Ru(s,o,r,n,e[14],15,-1416354905),n=Ru(n,s,o,r,e[5],21,-57434055),r=Ru(r,n,s,o,e[12],6,1700485571),o=Ru(o,r,n,s,e[3],10,-1894986606),s=Ru(s,o,r,n,e[10],15,-1051523),n=Ru(n,s,o,r,e[1],21,-2054922799),r=Ru(r,n,s,o,e[8],6,1873313359),o=Ru(o,r,n,s,e[15],10,-30611744),s=Ru(s,o,r,n,e[6],15,-1560198380),n=Ru(n,s,o,r,e[13],21,1309151649),r=Ru(r,n,s,o,e[4],6,-145523070),o=Ru(o,r,n,s,e[11],10,-1120210379),s=Ru(s,o,r,n,e[2],15,718787259),n=Ru(n,s,o,r,e[9],21,-343485551),t[0]=gm(r,t[0]),t[1]=gm(n,t[1]),t[2]=gm(s,t[2]),t[3]=gm(o,t[3])}function HC(t,e,r,n,s,o){return e=gm(gm(e,t),gm(n,o)),gm(e<<s|e>>>32-s,r)}function ku(t,e,r,n,s,o,c){return HC(e&r|~e&n,t,e,s,o,c)}function Du(t,e,r,n,s,o,c){return HC(e&n|r&~n,t,e,s,o,c)}function Ou(t,e,r,n,s,o,c){return HC(e^r^n,t,e,s,o,c)}function Ru(t,e,r,n,s,o,c){return HC(r^(e|~n),t,e,s,o,c)}function uW(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)C3(n,uxe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(C3(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,C3(n,s),n}function uxe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Gx=ls.atob.bind(ls),oL=ls.btoa.bind(ls);var G7="0123456789abcdef".split("");function dxe(t){for(var e="",r=0;r<4;r++)e+=G7[t>>8*r+4&15]+G7[t>>8*r&15];return e}function hxe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function aL(t){return uW(t).map(hxe).join("")}var fxe=function(t){for(var e=0;e<t.length;e++)t[e]=dxe(t[e]);return t.join("")}(uW("hello"))!="5d41402abc4b2a76b9719d911017c592";function gm(t,e){if(fxe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function lL(t,e){var r,n,s,o;if(t!==r){for(var c=(s=t,o=1+(256/t.length>>0),new Array(o+1).join(s)),u=[],i=0;i<256;i++)u[i]=i;var m=0;for(i=0;i<256;i++){var g=u[i];m=(m+g+c.charCodeAt(i))%256,u[i]=u[m],u[m]=g}r=t,n=u}else u=n;var C=e.length,B=0,S=0,P="";for(i=0;i<C;i++)S=(S+(g=u[B=(B+1)%256]))%256,u[B]=u[S],u[S]=g,c=u[(u[B]+u[S])%256],P+=String.fromCharCode(e.charCodeAt(i)^c);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $7={print:4,modify:8,copy:16,"annot-forms":32};function my(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(u){if($7.perm!==void 0)throw new Error("Invalid permission: "+u);s+=$7[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^s)),this.encryptionKey=aL(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=lL(this.encryptionKey,this.padding)}function gy(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function q7(t){if(ba(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!s],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var o in e[r]){var c=e[r][o];try{c[0].apply(t,n)}catch(u){ls.console&&Ra.error("jsPDF PubSub Error",u.message,u)}c[1]&&s.push(o)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function z_(t){if(!(this instanceof z_))return new z_(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function dW(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function am(t,e,r,n,s){if(!(this instanceof am))return new am(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,dW.call(this,n,s)}function Xg(t,e,r,n,s){if(!(this instanceof Xg))return new Xg(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,dW.call(this,n,s)}function is(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],o=arguments[3],c=[],u=1,i=16,m="S",g=null;ba(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,o=t.compress||t.compressPdf||o,(g=t.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(i=t.floatPrecision),m=t.defaultPathOperation||"S"),c=t.filters||(o===!0?["FlateEncode"]:c),n=n||"mm",r=(""+(r||"P")).toLowerCase();var C=t.putOnlyUsedFonts||!1,B={},S={internal:{},__private__:{}};S.__private__.PubSub=q7;var P="1.3",j=S.__private__.getPdfVersion=function(){return P};S.__private__.setPdfVersion=function(k){P=k};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};S.__private__.getPageFormats=function(){return D};var F=S.__private__.getPageFormat=function(k){return D[k]};s=s||"a4";var R={COMPAT:"compat",ADVANCED:"advanced"},V=R.COMPAT;function Y(){this.saveGraphicsState(),Ue(new qe(Yt,0,0,-Yt,0,_o()*Yt).toString()+" cm"),this.setFontSize(this.getFontSize()/Yt),m="n",V=R.ADVANCED}function te(){this.restoreGraphicsState(),m="S",V=R.COMPAT}var se=S.__private__.combineFontStyleAndFontWeight=function(k,me){if(k=="bold"&&me=="normal"||k=="bold"&&me==400||k=="normal"&&me=="italic"||k=="bold"&&me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return me&&(k=me==400||me==="normal"?k==="italic"?"italic":"normal":me!=700&&me!=="bold"||k!=="normal"?(me==700?"bold":me)+""+k:"bold"),k};S.advancedAPI=function(k){var me=V===R.COMPAT;return me&&Y.call(this),typeof k!="function"||(k(this),me&&te.call(this)),this},S.compatAPI=function(k){var me=V===R.ADVANCED;return me&&te.call(this),typeof k!="function"||(k(this),me&&Y.call(this)),this},S.isAdvancedAPI=function(){return V===R.ADVANCED};var oe,K=function(k){if(V!==R.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},de=S.roundToPrecision=S.__private__.roundToPrecision=function(k,me){var Xe=e||me;if(isNaN(k)||isNaN(Xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Xe).replace(/0+$/,"")};oe=S.hpf=S.__private__.hpf=typeof i=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return de(k,i)}:i==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return de(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return de(k,16)};var we=S.f2=S.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return de(k,2)},J=S.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return de(k,3)},Z=S.scale=S.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return V===R.COMPAT?k*Yt:V===R.ADVANCED?k:void 0},Ie=function(k){return V===R.COMPAT?_o()-k:V===R.ADVANCED?k:void 0},be=function(k){return Z(Ie(k))};S.__private__.setPrecision=S.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var He,Fe="00000000000000000000000000000000",ve=S.__private__.getFileId=function(){return Fe},_e=S.__private__.setFileId=function(k){return Fe=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():Fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Gn=new my(g.userPermissions,g.userPassword,g.ownerPassword,Fe)),Fe};S.setFileId=function(k){return _e(k),this},S.getFileId=function(){return ve()};var ze=S.__private__.convertDateToPDFDate=function(k){var me=k.getTimezoneOffset(),Xe=me<0?"+":"-",ot=Math.floor(Math.abs(me/60)),St=Math.abs(me%60),qt=[Xe,pe(ot),"'",pe(St),"'"].join("");return["D:",k.getFullYear(),pe(k.getMonth()+1),pe(k.getDate()),pe(k.getHours()),pe(k.getMinutes()),pe(k.getSeconds()),qt].join("")},Ne=S.__private__.convertPDFDateToDate=function(k){var me=parseInt(k.substr(2,4),10),Xe=parseInt(k.substr(6,2),10)-1,ot=parseInt(k.substr(8,2),10),St=parseInt(k.substr(10,2),10),qt=parseInt(k.substr(12,2),10),gr=parseInt(k.substr(14,2),10);return new Date(me,Xe,ot,St,qt,gr,0)},st=S.__private__.setCreationDate=function(k){var me;if(k===void 0&&(k=new Date),k instanceof Date)me=ze(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");me=k}return He=me},ie=S.__private__.getCreationDate=function(k){var me=He;return k==="jsDate"&&(me=Ne(He)),me};S.setCreationDate=function(k){return st(k),this},S.getCreationDate=function(k){return ie(k)};var le,pe=S.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},fe=S.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},Qe=0,Ke=[],et=[],tt=0,bt=[],De=[],Mt=!1,ir=et,Ar=function(){Qe=0,tt=0,et=[],Ke=[],bt=[],xr=Wt(),pr=Wt()};S.__private__.setCustomOutputDestination=function(k){Mt=!0,ir=k};var Ze=function(k){Mt||(ir=k)};S.__private__.resetCustomOutputDestination=function(){Mt=!1,ir=et};var Ue=S.__private__.out=function(k){return k=k.toString(),tt+=k.length+1,ir.push(k),ir},hr=S.__private__.write=function(k){return Ue(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Dt=S.__private__.getArrayBuffer=function(k){for(var me=k.length,Xe=new ArrayBuffer(me),ot=new Uint8Array(Xe);me--;)ot[me]=k.charCodeAt(me);return Xe},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];S.__private__.getStandardFonts=function(){return vt};var Kt=t.fontSize||16;S.__private__.setFontSize=S.setFontSize=function(k){return Kt=V===R.ADVANCED?k/Yt:k,this};var rr,nr=S.__private__.getFontSize=S.getFontSize=function(){return V===R.COMPAT?Kt:Kt*Yt},Nr=t.R2L||!1;S.__private__.setR2L=S.setR2L=function(k){return Nr=k,this},S.__private__.getR2L=S.getR2L=function(){return Nr};var on,Ir=S.__private__.setZoomMode=function(k){var me=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))rr=k;else if(isNaN(k)){if(me.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');rr=k}else rr=parseInt(k,10)};S.__private__.getZoomMode=function(){return rr};var cn,Sn=S.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');on=k};S.__private__.getPageMode=function(){return on};var Ln=S.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');cn=k};S.__private__.getLayoutMode=function(){return cn},S.__private__.setDisplayMode=S.setDisplayMode=function(k,me,Xe){return Ir(k),Ln(me),Sn(Xe),this};var ln={title:"",subject:"",author:"",keywords:"",creator:""};S.__private__.getDocumentProperty=function(k){if(Object.keys(ln).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ln[k]},S.__private__.getDocumentProperties=function(){return ln},S.__private__.setDocumentProperties=S.setProperties=S.setDocumentProperties=function(k){for(var me in ln)ln.hasOwnProperty(me)&&k[me]&&(ln[me]=k[me]);return this},S.__private__.setDocumentProperty=function(k,me){if(Object.keys(ln).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ln[k]=me};var ar,Yt,Gr,Wr,On,mn={},Hn={},Vi=[],Bn={},jn={},Dn={},Gi={},Rn=null,Zr=0,Pr=[],un=new q7(S),Ii=t.hotfixes||[],ri={},ur={},We=[],qe=function k(me,Xe,ot,St,qt,gr){if(!(this instanceof k))return new k(me,Xe,ot,St,qt,gr);isNaN(me)&&(me=1),isNaN(Xe)&&(Xe=0),isNaN(ot)&&(ot=0),isNaN(St)&&(St=1),isNaN(qt)&&(qt=0),isNaN(gr)&&(gr=0),this._matrix=[me,Xe,ot,St,qt,gr]};Object.defineProperty(qe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qe.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(oe).join(k)},qe.prototype.multiply=function(k){var me=k.sx*this.sx+k.shy*this.shx,Xe=k.sx*this.shy+k.shy*this.sy,ot=k.shx*this.sx+k.sy*this.shx,St=k.shx*this.shy+k.sy*this.sy,qt=k.tx*this.sx+k.ty*this.shx+this.tx,gr=k.tx*this.shy+k.ty*this.sy+this.ty;return new qe(me,Xe,ot,St,qt,gr)},qe.prototype.decompose=function(){var k=this.sx,me=this.shy,Xe=this.shx,ot=this.sy,St=this.tx,qt=this.ty,gr=Math.sqrt(k*k+me*me),$r=(k/=gr)*Xe+(me/=gr)*ot;Xe-=k*$r,ot-=me*$r;var An=Math.sqrt(Xe*Xe+ot*ot);return $r/=An,k*(ot/=An)<me*(Xe/=An)&&(k=-k,me=-me,$r=-$r,gr=-gr),{scale:new qe(gr,0,0,An,0,0),translate:new qe(1,0,0,1,St,qt),rotate:new qe(k,me,-me,k,0,0),skew:new qe(1,0,$r,1,0,0)}},qe.prototype.toString=function(k){return this.join(" ")},qe.prototype.inversed=function(){var k=this.sx,me=this.shy,Xe=this.shx,ot=this.sy,St=this.tx,qt=this.ty,gr=1/(k*ot-me*Xe),$r=ot*gr,An=-me*gr,En=-Xe*gr,qr=k*gr;return new qe($r,An,En,qr,-$r*St-En*qt,-An*St-qr*qt)},qe.prototype.applyToPoint=function(k){var me=k.x*this.sx+k.y*this.shx+this.tx,Xe=k.x*this.shy+k.y*this.sy+this.ty;return new Uo(me,Xe)},qe.prototype.applyToRectangle=function(k){var me=this.applyToPoint(k),Xe=this.applyToPoint(new Uo(k.x+k.w,k.y+k.h));return new Va(me.x,me.y,Xe.x-me.x,Xe.y-me.y)},qe.prototype.clone=function(){var k=this.sx,me=this.shy,Xe=this.shx,ot=this.sy,St=this.tx,qt=this.ty;return new qe(k,me,Xe,ot,St,qt)},S.Matrix=qe;var pt=S.matrixMult=function(k,me){return me.multiply(k)},Lt=new qe(1,0,0,1,0,0);S.unitMatrix=S.identityMatrix=Lt;var Ct=function(k,me){if(!jn[k]){var Xe=(me instanceof am?"Sh":"P")+(Object.keys(Bn).length+1).toString(10);me.id=Xe,jn[k]=Xe,Bn[Xe]=me,un.publish("addPattern",me)}};S.ShadingPattern=am,S.TilingPattern=Xg,S.addShadingPattern=function(k,me){return K("addShadingPattern()"),Ct(k,me),this},S.beginTilingPattern=function(k){K("beginTilingPattern()"),Wo(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},S.endTilingPattern=function(k,me){K("endTilingPattern()"),me.stream=De[le].join(`
`),Ct(k,me),un.publish("endTilingPattern",me),We.pop().restore()};var kt=S.__private__.newObject=function(){var k=Wt();return Rt(k,!0),k},Wt=S.__private__.newObjectDeferred=function(){return Qe++,Ke[Qe]=function(){return tt},Qe},Rt=function(k,me){return me=typeof me=="boolean"&&me,Ke[k]=tt,me&&Ue(k+" 0 obj"),k},fr=S.__private__.newAdditionalObject=function(){var k={objId:Wt(),content:""};return bt.push(k),k},xr=Wt(),pr=Wt(),Lr=S.__private__.decodeColorString=function(k){var me=k.split(" ");if(me.length!==2||me[1]!=="g"&&me[1]!=="G")me.length===5&&(me[4]==="k"||me[4]==="K")&&(me=[(1-me[0])*(1-me[3]),(1-me[1])*(1-me[3]),(1-me[2])*(1-me[3]),"r"]);else{var Xe=parseFloat(me[0]);me=[Xe,Xe,Xe,"r"]}for(var ot="#",St=0;St<3;St++)ot+=("0"+Math.floor(255*parseFloat(me[St])).toString(16)).slice(-2);return ot},rn=S.__private__.encodeColorString=function(k){var me;typeof k=="string"&&(k={ch1:k});var Xe=k.ch1,ot=k.ch2,St=k.ch3,qt=k.ch4,gr=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Xe=="string"&&Xe.charAt(0)!=="#"){var $r=new cW(Xe);if($r.ok)Xe=$r.toHex();else if(!/^\d*\.?\d*$/.test(Xe))throw new Error('Invalid color "'+Xe+'" passed to jsPDF.encodeColorString.')}if(typeof Xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Xe)&&(Xe="#"+Xe[1]+Xe[1]+Xe[2]+Xe[2]+Xe[3]+Xe[3]),typeof Xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Xe)){var An=parseInt(Xe.substr(1),16);Xe=An>>16&255,ot=An>>8&255,St=255&An}if(ot===void 0||qt===void 0&&Xe===ot&&ot===St)if(typeof Xe=="string")me=Xe+" "+gr[0];else switch(k.precision){case 2:me=we(Xe/255)+" "+gr[0];break;case 3:default:me=J(Xe/255)+" "+gr[0]}else if(qt===void 0||ba(qt)==="object"){if(qt&&!isNaN(qt.a)&&qt.a===0)return me=["1.","1.","1.",gr[1]].join(" ");if(typeof Xe=="string")me=[Xe,ot,St,gr[1]].join(" ");else switch(k.precision){case 2:me=[we(Xe/255),we(ot/255),we(St/255),gr[1]].join(" ");break;default:case 3:me=[J(Xe/255),J(ot/255),J(St/255),gr[1]].join(" ")}}else if(typeof Xe=="string")me=[Xe,ot,St,qt,gr[2]].join(" ");else switch(k.precision){case 2:me=[we(Xe),we(ot),we(St),we(qt),gr[2]].join(" ");break;case 3:default:me=[J(Xe),J(ot),J(St),J(qt),gr[2]].join(" ")}return me},sn=S.__private__.getFilters=function(){return c},_n=S.__private__.putStream=function(k){var me=(k=k||{}).data||"",Xe=k.filters||sn(),ot=k.alreadyAppliedFilters||[],St=k.addLength1||!1,qt=me.length,gr=k.objectId,$r=function(bs){return bs};if(g!==null&&gr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&($r=Gn.encryptor(gr,0));var An={};Xe===!0&&(Xe=["FlateEncode"]);var En=k.additionalKeyValues||[],qr=(An=is.API.processDataByFilters!==void 0?is.API.processDataByFilters(me,Xe):{data:me,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(An.data.length!==0&&(En.push({key:"Length",value:An.data.length}),St===!0&&En.push({key:"Length1",value:qt})),qr.length!=0)if(qr.split("/").length-1==1)En.push({key:"Filter",value:qr});else{En.push({key:"Filter",value:"["+qr+"]"});for(var Dr=0;Dr<En.length;Dr+=1)if(En[Dr].key==="DecodeParms"){for(var bi=[],gn=0;gn<An.reverseChain.split("/").length-1;gn+=1)bi.push("null");bi.push(En[Dr].value),En[Dr].value="["+bi.join(" ")+"]"}}Ue("<<");for(var Fi=0;Fi<En.length;Fi++)Ue("/"+En[Fi].key+" "+En[Fi].value);Ue(">>"),An.data.length!==0&&(Ue("stream"),Ue($r(An.data)),Ue("endstream"))},Un=S.__private__.putPage=function(k){var me=k.number,Xe=k.data,ot=k.objId,St=k.contentsObjId;Rt(ot,!0),Ue("<</Type /Page"),Ue("/Parent "+k.rootDictionaryObjId+" 0 R"),Ue("/Resources "+k.resourceDictionaryObjId+" 0 R"),Ue("/MediaBox ["+parseFloat(oe(k.mediaBox.bottomLeftX))+" "+parseFloat(oe(k.mediaBox.bottomLeftY))+" "+oe(k.mediaBox.topRightX)+" "+oe(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&Ue("/CropBox ["+oe(k.cropBox.bottomLeftX)+" "+oe(k.cropBox.bottomLeftY)+" "+oe(k.cropBox.topRightX)+" "+oe(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&Ue("/BleedBox ["+oe(k.bleedBox.bottomLeftX)+" "+oe(k.bleedBox.bottomLeftY)+" "+oe(k.bleedBox.topRightX)+" "+oe(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&Ue("/TrimBox ["+oe(k.trimBox.bottomLeftX)+" "+oe(k.trimBox.bottomLeftY)+" "+oe(k.trimBox.topRightX)+" "+oe(k.trimBox.topRightY)+"]"),k.artBox!==null&&Ue("/ArtBox ["+oe(k.artBox.bottomLeftX)+" "+oe(k.artBox.bottomLeftY)+" "+oe(k.artBox.topRightX)+" "+oe(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&Ue("/UserUnit "+k.userUnit),un.publish("putPage",{objId:ot,pageContext:Pr[me],pageNumber:me,page:Xe}),Ue("/Contents "+St+" 0 R"),Ue(">>"),Ue("endobj");var qt=Xe.join(`
`);return V===R.ADVANCED&&(qt+=`
Q`),Rt(St,!0),_n({data:qt,filters:sn(),objectId:St}),Ue("endobj"),ot},qn=S.__private__.putPages=function(){var k,me,Xe=[];for(k=1;k<=Zr;k++)Pr[k].objId=Wt(),Pr[k].contentsObjId=Wt();for(k=1;k<=Zr;k++)Xe.push(Un({number:k,data:De[k],objId:Pr[k].objId,contentsObjId:Pr[k].contentsObjId,mediaBox:Pr[k].mediaBox,cropBox:Pr[k].cropBox,bleedBox:Pr[k].bleedBox,trimBox:Pr[k].trimBox,artBox:Pr[k].artBox,userUnit:Pr[k].userUnit,rootDictionaryObjId:xr,resourceDictionaryObjId:pr}));Rt(xr,!0),Ue("<</Type /Pages");var ot="/Kids [";for(me=0;me<Zr;me++)ot+=Xe[me]+" 0 R ";Ue(ot+"]"),Ue("/Count "+Zr),Ue(">>"),Ue("endobj"),un.publish("postPutPages")},Wn=function(k){un.publish("putFont",{font:k,out:Ue,newObject:kt,putStream:_n}),k.isAlreadyPutted!==!0&&(k.objectNumber=kt(),Ue("<<"),Ue("/Type /Font"),Ue("/BaseFont /"+gy(k.postScriptName)),Ue("/Subtype /Type1"),typeof k.encoding=="string"&&Ue("/Encoding /"+k.encoding),Ue("/FirstChar 32"),Ue("/LastChar 255"),Ue(">>"),Ue("endobj"))},Pi=function(){for(var k in mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&Wn(mn[k])},$i=function(k){k.objectNumber=kt();var me=[];me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Form"}),me.push({key:"BBox",value:"["+[oe(k.x),oe(k.y),oe(k.x+k.width),oe(k.y+k.height)].join(" ")+"]"}),me.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Xe=k.pages[1].join(`
`);_n({data:Xe,additionalKeyValues:me,objectId:k.objectNumber}),Ue("endobj")},Kn=function(){for(var k in ri)ri.hasOwnProperty(k)&&$i(ri[k])},Yi=function(k,me){var Xe,ot=[],St=1/(me-1);for(Xe=0;Xe<1;Xe+=St)ot.push(Xe);if(ot.push(1),k[0].offset!=0){var qt={offset:0,color:k[0].color};k.unshift(qt)}if(k[k.length-1].offset!=1){var gr={offset:1,color:k[k.length-1].color};k.push(gr)}for(var $r="",An=0,En=0;En<ot.length;En++){for(Xe=ot[En];Xe>k[An+1].offset;)An++;var qr=k[An].offset,Dr=(Xe-qr)/(k[An+1].offset-qr),bi=k[An].color,gn=k[An+1].color;$r+=fe(Math.round((1-Dr)*bi[0]+Dr*gn[0]).toString(16))+fe(Math.round((1-Dr)*bi[1]+Dr*gn[1]).toString(16))+fe(Math.round((1-Dr)*bi[2]+Dr*gn[2]).toString(16))}return $r.trim()},Ss=function(k,me){me||(me=21);var Xe=kt(),ot=Yi(k.colors,me),St=[];St.push({key:"FunctionType",value:"0"}),St.push({key:"Domain",value:"[0.0 1.0]"}),St.push({key:"Size",value:"["+me+"]"}),St.push({key:"BitsPerSample",value:"8"}),St.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_n({data:ot,additionalKeyValues:St,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Xe}),Ue("endobj"),k.objectNumber=kt(),Ue("<< /ShadingType "+k.type),Ue("/ColorSpace /DeviceRGB");var qt="/Coords ["+oe(parseFloat(k.coords[0]))+" "+oe(parseFloat(k.coords[1]))+" ";k.type===2?qt+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3])):qt+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3]))+" "+oe(parseFloat(k.coords[4]))+" "+oe(parseFloat(k.coords[5])),Ue(qt+="]"),k.matrix&&Ue("/Matrix ["+k.matrix.toString()+"]"),Ue("/Function "+Xe+" 0 R"),Ue("/Extend [true true]"),Ue(">>"),Ue("endobj")},no=function(k,me){var Xe=Wt(),ot=kt();me.push({resourcesOid:Xe,objectOid:ot}),k.objectNumber=ot;var St=[];St.push({key:"Type",value:"/Pattern"}),St.push({key:"PatternType",value:"1"}),St.push({key:"PaintType",value:"1"}),St.push({key:"TilingType",value:"1"}),St.push({key:"BBox",value:"["+k.boundingBox.map(oe).join(" ")+"]"}),St.push({key:"XStep",value:oe(k.xStep)}),St.push({key:"YStep",value:oe(k.yStep)}),St.push({key:"Resources",value:Xe+" 0 R"}),k.matrix&&St.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),_n({data:k.stream,additionalKeyValues:St,objectId:k.objectNumber}),Ue("endobj")},Fs=function(k){var me;for(me in Bn)Bn.hasOwnProperty(me)&&(Bn[me]instanceof am?Ss(Bn[me]):Bn[me]instanceof Xg&&no(Bn[me],k))},rs=function(k){for(var me in k.objectNumber=kt(),Ue("<<"),k)switch(me){case"opacity":Ue("/ca "+we(k[me]));break;case"stroke-opacity":Ue("/CA "+we(k[me]))}Ue(">>"),Ue("endobj")},Sa=function(){var k;for(k in Dn)Dn.hasOwnProperty(k)&&rs(Dn[k])},Ba=function(){for(var k in Ue("/XObject <<"),ri)ri.hasOwnProperty(k)&&ri[k].objectNumber>=0&&Ue("/"+k+" "+ri[k].objectNumber+" 0 R");un.publish("putXobjectDict"),Ue(">>")},tl=function(){Gn.oid=kt(),Ue("<<"),Ue("/Filter /Standard"),Ue("/V "+Gn.v),Ue("/R "+Gn.r),Ue("/U <"+Gn.toHexString(Gn.U)+">"),Ue("/O <"+Gn.toHexString(Gn.O)+">"),Ue("/P "+Gn.P),Ue(">>"),Ue("endobj")},go=function(){for(var k in Ue("/Font <<"),mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&Ue("/"+k+" "+mn[k].objectNumber+" 0 R");Ue(">>")},Sl=function(){if(Object.keys(Bn).length>0){for(var k in Ue("/Shading <<"),Bn)Bn.hasOwnProperty(k)&&Bn[k]instanceof am&&Bn[k].objectNumber>=0&&Ue("/"+k+" "+Bn[k].objectNumber+" 0 R");un.publish("putShadingPatternDict"),Ue(">>")}},sa=function(k){if(Object.keys(Bn).length>0){for(var me in Ue("/Pattern <<"),Bn)Bn.hasOwnProperty(me)&&Bn[me]instanceof S.TilingPattern&&Bn[me].objectNumber>=0&&Bn[me].objectNumber<k&&Ue("/"+me+" "+Bn[me].objectNumber+" 0 R");un.publish("putTilingPatternDict"),Ue(">>")}},Ha=function(){if(Object.keys(Dn).length>0){var k;for(k in Ue("/ExtGState <<"),Dn)Dn.hasOwnProperty(k)&&Dn[k].objectNumber>=0&&Ue("/"+k+" "+Dn[k].objectNumber+" 0 R");un.publish("putGStateDict"),Ue(">>")}},qi=function(k){Rt(k.resourcesOid,!0),Ue("<<"),Ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),go(),Sl(),sa(k.objectOid),Ha(),Ba(),Ue(">>"),Ue("endobj")},Nc=function(){var k=[];Pi(),Sa(),Kn(),Fs(k),un.publish("putResources"),k.forEach(qi),qi({resourcesOid:pr,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources")},nc=function(){un.publish("putAdditionalObjects");for(var k=0;k<bt.length;k++){var me=bt[k];Rt(me.objId,!0),Ue(me.content),Ue("endobj")}un.publish("postPutAdditionalObjects")},Ul=function(k){Hn[k.fontName]=Hn[k.fontName]||{},Hn[k.fontName][k.fontStyle]=k.id},Xo=function(k,me,Xe,ot,St){var qt={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:k,fontName:me,fontStyle:Xe,encoding:ot,isStandardFont:St||!1,metadata:{}};return un.publish("addFont",{font:qt,instance:this}),mn[qt.id]=qt,Ul(qt),qt.id},Pa=function(k){for(var me=0,Xe=vt.length;me<Xe;me++){var ot=Xo.call(this,k[me][0],k[me][1],k[me][2],vt[me][3],!0);C===!1&&(B[ot]=!0);var St=k[me][0].split("-");Ul({id:ot,fontName:St[0],fontStyle:St[1]||""})}un.publish("addFonts",{fonts:mn,dictionary:Hn})},Ai=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(ot){var me=ot.stack||"";~me.indexOf(" at ")&&(me=me.split(" at ")[1]);var Xe="Error in function "+me.split(`
`)[0].split("<")[0]+": "+ot.message;if(!ls.console)throw new Error(Xe);ls.console.error(Xe,ot),ls.alert&&alert(Xe)}},k.foo.bar=k,k.foo},So=function(k,me){var Xe,ot,St,qt,gr,$r,An,En,qr;if(St=(me=me||{}).sourceEncoding||"Unicode",gr=me.outputEncoding,(me.autoencode||gr)&&mn[ar].metadata&&mn[ar].metadata[St]&&mn[ar].metadata[St].encoding&&(qt=mn[ar].metadata[St].encoding,!gr&&mn[ar].encoding&&(gr=mn[ar].encoding),!gr&&qt.codePages&&(gr=qt.codePages[0]),typeof gr=="string"&&(gr=qt[gr]),gr)){for(An=!1,$r=[],Xe=0,ot=k.length;Xe<ot;Xe++)(En=gr[k.charCodeAt(Xe)])?$r.push(String.fromCharCode(En)):$r.push(k[Xe]),$r[Xe].charCodeAt(0)>>8&&(An=!0);k=$r.join("")}for(Xe=k.length;An===void 0&&Xe!==0;)k.charCodeAt(Xe-1)>>8&&(An=!0),Xe--;if(!An)return k;for($r=me.noBOM?[]:[254,255],Xe=0,ot=k.length;Xe<ot;Xe++){if((qr=(En=k.charCodeAt(Xe))>>8)>>8)throw new Error("Character at position "+Xe+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$r.push(qr),$r.push(En-(qr<<8))}return String.fromCharCode.apply(void 0,$r)},xs=S.__private__.pdfEscape=S.pdfEscape=function(k,me){return So(k,me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bl=S.__private__.beginPage=function(k){De[++Zr]=[],Pr[Zr]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},ce(Zr),Ze(De[le])},Fc=function(k,me){var Xe,ot,St;switch(r=me||r,typeof k=="string"&&(Xe=F(k.toLowerCase()),Array.isArray(Xe)&&(ot=Xe[0],St=Xe[1])),Array.isArray(k)&&(ot=k[0]*Yt,St=k[1]*Yt),isNaN(ot)&&(ot=s[0],St=s[1]),(ot>14400||St>14400)&&(Ra.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),St=Math.min(14400,St)),s=[ot,St],r.substr(0,1)){case"l":St>ot&&(s=[St,ot]);break;case"p":ot>St&&(s=[St,ot])}Bl(s),Wc(yo),Ue(vo),ic!==0&&Ue(ic+" J"),aa!==0&&Ue(aa+" j"),un.publish("addPage",{pageNumber:Zr})},Cc=function(k){k>0&&k<=Zr&&(De.splice(k,1),Pr.splice(k,1),Zr--,le>Zr&&(le=Zr),this.setPage(le))},ce=function(k){k>0&&k<=Zr&&(le=k)},Re=S.__private__.getNumberOfPages=S.getNumberOfPages=function(){return De.length-1},At=function(k,me,Xe){var ot,St=void 0;return Xe=Xe||{},k=k!==void 0?k:mn[ar].fontName,me=me!==void 0?me:mn[ar].fontStyle,ot=k.toLowerCase(),Hn[ot]!==void 0&&Hn[ot][me]!==void 0?St=Hn[ot][me]:Hn[k]!==void 0&&Hn[k][me]!==void 0?St=Hn[k][me]:Xe.disableWarning===!1&&Ra.warn("Unable to look up font label for font '"+k+"', '"+me+"'. Refer to getFontList() for available fonts."),St||Xe.noFallback||(St=Hn.times[me])==null&&(St=Hn.times.normal),St},Ht=S.__private__.putInfo=function(){var k=kt(),me=function(ot){return ot};for(var Xe in g!==null&&(me=Gn.encryptor(k,0)),Ue("<<"),Ue("/Producer ("+xs(me("jsPDF "+is.version))+")"),ln)ln.hasOwnProperty(Xe)&&ln[Xe]&&Ue("/"+Xe.substr(0,1).toUpperCase()+Xe.substr(1)+" ("+xs(me(ln[Xe]))+")");Ue("/CreationDate ("+xs(me(He))+")"),Ue(">>"),Ue("endobj")},Jt=S.__private__.putCatalog=function(k){var me=(k=k||{}).rootDictionaryObjId||xr;switch(kt(),Ue("<<"),Ue("/Type /Catalog"),Ue("/Pages "+me+" 0 R"),rr||(rr="fullwidth"),rr){case"fullwidth":Ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ue("/OpenAction [3 0 R /Fit]");break;case"original":Ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Xe=""+rr;Xe.substr(Xe.length-1)==="%"&&(rr=parseInt(rr)/100),typeof rr=="number"&&Ue("/OpenAction [3 0 R /XYZ null null "+we(rr)+"]")}switch(cn||(cn="continuous"),cn){case"continuous":Ue("/PageLayout /OneColumn");break;case"single":Ue("/PageLayout /SinglePage");break;case"two":case"twoleft":Ue("/PageLayout /TwoColumnLeft");break;case"tworight":Ue("/PageLayout /TwoColumnRight")}on&&Ue("/PageMode /"+on),un.publish("putCatalog"),Ue(">>"),Ue("endobj")},er=S.__private__.putTrailer=function(){Ue("trailer"),Ue("<<"),Ue("/Size "+(Qe+1)),Ue("/Root "+Qe+" 0 R"),Ue("/Info "+(Qe-1)+" 0 R"),g!==null&&Ue("/Encrypt "+Gn.oid+" 0 R"),Ue("/ID [ <"+Fe+"> <"+Fe+"> ]"),Ue(">>")},_r=S.__private__.putHeader=function(){Ue("%PDF-"+P),Ue("%")},fn=S.__private__.putXRef=function(){var k="0000000000";Ue("xref"),Ue("0 "+(Qe+1)),Ue("0000000000 65535 f ");for(var me=1;me<=Qe;me++)typeof Ke[me]=="function"?Ue((k+Ke[me]()).slice(-10)+" 00000 n "):Ke[me]!==void 0?Ue((k+Ke[me]).slice(-10)+" 00000 n "):Ue("0000000000 00000 n ")},pn=S.__private__.buildDocument=function(){Ar(),Ze(et),un.publish("buildDocument"),_r(),qn(),nc(),Nc(),g!==null&&tl(),Ht(),Jt();var k=tt;return fn(),er(),Ue("startxref"),Ue(""+k),Ue("%%EOF"),Ze(De[le]),et.join(`
`)},Fn=S.__private__.getBlob=function(k){return new Blob([Dt(k)],{type:"application/pdf"})},Mn=S.output=S.__private__.output=Ai(function(k,me){switch(typeof(me=me||{})=="string"?me={filename:me}:me.filename=me.filename||"generated.pdf",k){case void 0:return pn();case"save":S.save(me.filename);break;case"arraybuffer":return Dt(pn());case"blob":return Fn(pn());case"bloburi":case"bloburl":if(ls.URL!==void 0&&typeof ls.URL.createObjectURL=="function")return ls.URL&&ls.URL.createObjectURL(Fn(pn()))||void 0;Ra.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Xe="",ot=pn();try{Xe=oL(ot)}catch{Xe=oL(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+me.filename+";base64,"+Xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ls)==="[object Window]"){var St="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';me.pdfObjectUrl&&(St=me.pdfObjectUrl,qt="");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+St+'"'+qt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(me)+");<\/script></body></html>",$r=ls.open();return $r!==null&&$r.document.write(gr),$r}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ls)==="[object Window]"){var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+me.filename+'" width="500px" height="400px" /></body></html>',En=ls.open();if(En!==null){En.document.write(An);var qr=this;En.document.documentElement.querySelector("#pdfViewer").onload=function(){En.document.title=me.filename,En.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qr.output("bloburl"))}}return En}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ls)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",me)+'"></iframe></body></html>',bi=ls.open();if(bi!==null&&(bi.document.write(Dr),bi.document.title=me.filename),bi||typeof safari>"u")return bi;break;case"datauri":case"dataurl":return ls.document.location.href=this.output("datauristring",me);default:return null}}),Kr=function(k){return Array.isArray(Ii)===!0&&Ii.indexOf(k)>-1};switch(n){case"pt":Yt=1;break;case"mm":Yt=72/25.4;break;case"cm":Yt=72/2.54;break;case"in":Yt=72;break;case"px":Yt=Kr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Yt=12;break;case"ex":Yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Yt=n}var Gn=null;st(),_e();var si=function(k){return g!==null?Gn.encryptor(k,0):function(me){return me}},ji=S.__private__.getPageInfo=S.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pr[k].objId,pageNumber:k,pageContext:Pr[k]}},Sr=S.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var me in Pr)if(Pr[me].objId===k)break;return ji(me)},an=S.__private__.getCurrentPageInfo=S.getCurrentPageInfo=function(){return{objId:Pr[le].objId,pageNumber:le,pageContext:Pr[le]}};S.addPage=function(){return Fc.apply(this,arguments),this},S.setPage=function(){return ce.apply(this,arguments),Ze.call(this,De[le]),this},S.insertPage=function(k){return this.addPage(),this.movePage(le,k),this},S.movePage=function(k,me){var Xe,ot;if(k>me){Xe=De[k],ot=Pr[k];for(var St=k;St>me;St--)De[St]=De[St-1],Pr[St]=Pr[St-1];De[me]=Xe,Pr[me]=ot,this.setPage(me)}else if(k<me){Xe=De[k],ot=Pr[k];for(var qt=k;qt<me;qt++)De[qt]=De[qt+1],Pr[qt]=Pr[qt+1];De[me]=Xe,Pr[me]=ot,this.setPage(me)}return this},S.deletePage=function(){return Cc.apply(this,arguments),this},S.__private__.text=S.text=function(k,me,Xe,ot,St){var qt,gr,$r,An,En,qr,Dr,bi,gn,Fi=(ot=ot||{}).scope||this;if(typeof k=="number"&&typeof me=="number"&&(typeof Xe=="string"||Array.isArray(Xe))){var bs=Xe;Xe=me,me=k,k=bs}if(arguments[3]instanceof qe?(K("The transform parameter of text() with a Matrix value"),gn=St):($r=arguments[4],An=arguments[5],ba(Dr=arguments[3])==="object"&&Dr!==null||(typeof $r=="string"&&(An=$r,$r=null),typeof Dr=="string"&&(An=Dr,Dr=null),typeof Dr=="number"&&($r=Dr,Dr=null),ot={flags:Dr,angle:$r,align:An})),isNaN(me)||isNaN(Xe)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Fi;var vn="",lo=!1,Js=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:oa,Yo=Fi.internal.scaleFactor;function nl(Cs){return Cs=Cs.split("	").join(Array(ot.TabLen||9).join(" ")),xs(Cs,Dr)}function il(Cs){for(var Ji,oi=Cs.concat(),qs=[],sl=oi.length;sl--;)typeof(Ji=oi.shift())=="string"?qs.push(Ji):Array.isArray(Cs)&&(Ji.length===1||Ji[1]===void 0&&Ji[2]===void 0)?qs.push(Ji[0]):qs.push([Ji[0],Ji[1],Ji[2]]);return qs}function so(Cs,Ji){var oi;if(typeof Cs=="string")oi=Ji(Cs)[0];else if(Array.isArray(Cs)){for(var qs,sl,ac=Cs.concat(),ol=[],$a=ac.length;$a--;)typeof(qs=ac.shift())=="string"?ol.push(Ji(qs)[0]):Array.isArray(qs)&&typeof qs[0]=="string"&&(sl=Ji(qs[0],qs[1],qs[2]),ol.push([sl[0],sl[1],sl[2]]));oi=ol}return oi}var Ga=!1,Ea=!0;if(typeof k=="string")Ga=!0;else if(Array.isArray(k)){var Zo=k.concat();gr=[];for(var Ma,Ki=Zo.length;Ki--;)(typeof(Ma=Zo.shift())!="string"||Array.isArray(Ma)&&typeof Ma[0]!="string")&&(Ea=!1);Ga=Ea}if(Ga===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var us=Kt/Fi.internal.scaleFactor,la=us*(Js-1);switch(ot.baseline){case"bottom":Xe-=la;break;case"top":Xe+=us-la;break;case"hanging":Xe+=us-2*la;break;case"middle":Xe+=us/2-la}if((qr=ot.maxWidth||0)>0&&(typeof k=="string"?k=Fi.splitTextToSize(k,qr):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(Cs,Ji){return Cs.concat(Fi.splitTextToSize(Ji,qr))},[]))),qt={text:k,x:me,y:Xe,options:ot,mutex:{pdfEscape:xs,activeFontKey:ar,fonts:mn,activeFontSize:Kt}},un.publish("preProcessText",qt),k=qt.text,$r=(ot=qt.options).angle,!(gn instanceof qe)&&$r&&typeof $r=="number"){$r*=Math.PI/180,ot.rotationDirection===0&&($r=-$r),V===R.ADVANCED&&($r=-$r);var Yr=Math.cos($r),sc=Math.sin($r);gn=new qe(Yr,sc,-sc,Yr,0,0)}else $r&&$r instanceof qe&&(gn=$r);V!==R.ADVANCED||gn||(gn=Lt),(En=ot.charSpace||qo)!==void 0&&(vn+=oe(Z(En))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(bi=ot.horizontalScale)!==void 0&&(vn+=oe(100*bi)+` Tz
`),ot.lang;var ws=-1,oc=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,yl=Fi.internal.getCurrentPageInfo().pageContext;switch(oc){case 0:case!1:case"fill":ws=0;break;case 1:case!0:case"stroke":ws=1;break;case 2:case"fillThenStroke":ws=2;break;case 3:case"invisible":ws=3;break;case 4:case"fillAndAddForClipping":ws=4;break;case 5:case"strokeAndAddPathForClipping":ws=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ws=6;break;case 7:case"addToPathForClipping":ws=7}var ql=yl.usedRenderingMode!==void 0?yl.usedRenderingMode:-1;ws!==-1?vn+=ws+` Tr
`:ql!==-1&&(vn+=`0 Tr
`),ws!==-1&&(yl.usedRenderingMode=ws),An=ot.align||"left";var ks,Jo=Kt*Js,Aa=Fi.internal.pageSize.getWidth(),Pc=mn[ar];En=ot.charSpace||qo,qr=ot.maxWidth||0,Dr=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var yr=[],Mr=function(Cs){return Fi.getStringUnitWidth(Cs,{font:Pc,charSpace:En,fontSize:Kt,doKerning:!1})*Kt/Yo};if(Object.prototype.toString.call(k)==="[object Array]"){var xn;gr=il(k),An!=="left"&&(ks=gr.map(Mr));var kn,ns=0;if(An==="right"){me-=ks[0],k=[],Ki=gr.length;for(var xi=0;xi<Ki;xi++)xi===0?(kn=$o(me),xn=Ys(Xe)):(kn=Z(ns-ks[xi]),xn=-Jo),k.push([gr[xi],kn,xn]),ns=ks[xi]}else if(An==="center"){me-=ks[0]/2,k=[],Ki=gr.length;for(var ms=0;ms<Ki;ms++)ms===0?(kn=$o(me),xn=Ys(Xe)):(kn=Z((ns-ks[ms])/2),xn=-Jo),k.push([gr[ms],kn,xn]),ns=ks[ms]}else if(An==="left"){k=[],Ki=gr.length;for(var ds=0;ds<Ki;ds++)k.push(gr[ds])}else if(An==="justify"&&Pc.encoding==="Identity-H"){k=[],Ki=gr.length,qr=qr!==0?qr:Aa;for(var bo=0,Zi=0;Zi<Ki;Zi++)if(xn=Zi===0?Ys(Xe):-Jo,kn=Zi===0?$o(me):bo,Zi<Ki-1){var Ds=Z((qr-ks[Zi])/(gr[Zi].split(" ").length-1)),Bs=gr[Zi].split(" ");k.push([Bs[0]+" ",kn,xn]),bo=0;for(var zs=1;zs<Bs.length;zs++){var eo=(Mr(Bs[zs-1]+" "+Bs[zs])-Mr(Bs[zs]))*Yo+Ds;zs==Bs.length-1?k.push([Bs[zs],eo,0]):k.push([Bs[zs]+" ",eo,0]),bo-=eo}}else k.push([gr[Zi],kn,xn]);k.push(["",bo,0])}else{if(An!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Ki=gr.length,qr=qr!==0?qr:Aa,Zi=0;Zi<Ki;Zi++)xn=Zi===0?Ys(Xe):-Jo,kn=Zi===0?$o(me):0,Zi<Ki-1?yr.push(oe(Z((qr-ks[Zi])/(gr[Zi].split(" ").length-1)))):yr.push(0),k.push([gr[Zi],kn,xn])}}var ea=typeof ot.R2L=="boolean"?ot.R2L:Nr;ea===!0&&(k=so(k,function(Cs,Ji,oi){return[Cs.split("").reverse().join(""),Ji,oi]})),qt={text:k,x:me,y:Xe,options:ot,mutex:{pdfEscape:xs,activeFontKey:ar,fonts:mn,activeFontSize:Kt}},un.publish("postProcessText",qt),k=qt.text,lo=qt.mutex.isHex||!1;var ma=mn[ar].encoding;ma!=="WinAnsiEncoding"&&ma!=="StandardEncoding"||(k=so(k,function(Cs,Ji,oi){return[nl(Cs),Ji,oi]})),gr=il(k),k=[];for(var ta,ra,$s,ga=0,hs=1,os=Array.isArray(gr[0])?hs:ga,Tn="",mi=function(Cs,Ji,oi){var qs="";return oi instanceof qe?(oi=typeof ot.angle=="number"?pt(oi,new qe(1,0,0,1,Cs,Ji)):pt(new qe(1,0,0,1,Cs,Ji),oi),V===R.ADVANCED&&(oi=pt(new qe(1,0,0,-1,0,0),oi)),qs=oi.join(" ")+` Tm
`):qs=oe(Cs)+" "+oe(Ji)+` Td
`,qs},co=0;co<gr.length;co++){switch(Tn="",os){case hs:$s=(lo?"<":"(")+gr[co][0]+(lo?">":")"),ta=parseFloat(gr[co][1]),ra=parseFloat(gr[co][2]);break;case ga:$s=(lo?"<":"(")+gr[co]+(lo?">":")"),ta=$o(me),ra=Ys(Xe)}yr!==void 0&&yr[co]!==void 0&&(Tn=yr[co]+` Tw
`),co===0?k.push(Tn+mi(ta,ra,gn)+$s):os===ga?k.push(Tn+$s):os===hs&&k.push(Tn+mi(ta,ra,gn)+$s)}k=os===ga?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var to=`BT
/`;return to+=ar+" "+Kt+` Tf
`,to+=oe(Kt*Js)+` TL
`,to+=_s+`
`,to+=vn,to+=k,Ue(to+="ET"),B[ar]=!0,Fi};var ei=S.__private__.clip=S.clip=function(k){return Ue(k==="evenodd"?"W*":"W"),this};S.clipEvenOdd=function(){return ei("evenodd")},S.__private__.discardPath=S.discardPath=function(){return Ue("n"),this};var Ci=S.__private__.isValidStyle=function(k){var me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(me=!0),me};S.__private__.setDefaultPathOperation=S.setDefaultPathOperation=function(k){return Ci(k)&&(m=k),this};var Ps=S.__private__.getStyle=S.getStyle=function(k){var me=m;switch(k){case"D":case"S":me="S";break;case"F":me="f";break;case"FD":case"DF":me="B";break;case"f":case"f*":case"B":case"B*":me=k}return me},Xs=S.close=function(){return Ue("h"),this};S.stroke=function(){return Ue("S"),this},S.fill=function(k){return Ro("f",k),this},S.fillEvenOdd=function(k){return Ro("f*",k),this},S.fillStroke=function(k){return Ro("B",k),this},S.fillStrokeEvenOdd=function(k){return Ro("B*",k),this};var Ro=function(k,me){ba(me)==="object"?Ni(me,k):Ue(k)},yn=function(k){k===null||V===R.ADVANCED&&k===void 0||(k=Ps(k),Ue(k))};function Zn(k,me,Xe,ot,St){var qt=new Xg(me||this.boundingBox,Xe||this.xStep,ot||this.yStep,this.gState,St||this.matrix);qt.stream=this.stream;var gr=k+"$$"+this.cloneIndex+++"$$";return Ct(gr,qt),qt}var Ni=function(k,me){var Xe=jn[k.key],ot=Bn[Xe];if(ot instanceof am)Ue("q"),Ue(ha(me)),ot.gState&&S.setGState(ot.gState),Ue(k.matrix.toString()+" cm"),Ue("/"+Xe+" sh"),Ue("Q");else if(ot instanceof Xg){var St=new qe(1,0,0,-1,0,_o());k.matrix&&(St=St.multiply(k.matrix||Lt),Xe=Zn.call(ot,k.key,k.boundingBox,k.xStep,k.yStep,St).id),Ue("q"),Ue("/Pattern cs"),Ue("/"+Xe+" scn"),ot.gState&&S.setGState(ot.gState),Ue(me),Ue("Q")}},ha=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ms=S.moveTo=function(k,me){return Ue(oe(Z(k))+" "+oe(be(me))+" m"),this},hi=S.lineTo=function(k,me){return Ue(oe(Z(k))+" "+oe(be(me))+" l"),this},jo=S.curveTo=function(k,me,Xe,ot,St,qt){return Ue([oe(Z(k)),oe(be(me)),oe(Z(Xe)),oe(be(ot)),oe(Z(St)),oe(be(qt)),"c"].join(" ")),this};S.__private__.line=S.line=function(k,me,Xe,ot,St){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||!Ci(St))throw new Error("Invalid arguments passed to jsPDF.line");return V===R.COMPAT?this.lines([[Xe-k,ot-me]],k,me,[1,1],St||"S"):this.lines([[Xe-k,ot-me]],k,me,[1,1]).stroke()},S.__private__.lines=S.lines=function(k,me,Xe,ot,St,qt){var gr,$r,An,En,qr,Dr,bi,gn,Fi,bs,vn,lo;if(typeof k=="number"&&(lo=Xe,Xe=me,me=k,k=lo),ot=ot||[1,1],qt=qt||!1,isNaN(me)||isNaN(Xe)||!Array.isArray(k)||!Array.isArray(ot)||!Ci(St)||typeof qt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ms(me,Xe),gr=ot[0],$r=ot[1],En=k.length,bs=me,vn=Xe,An=0;An<En;An++)(qr=k[An]).length===2?(bs=qr[0]*gr+bs,vn=qr[1]*$r+vn,hi(bs,vn)):(Dr=qr[0]*gr+bs,bi=qr[1]*$r+vn,gn=qr[2]*gr+bs,Fi=qr[3]*$r+vn,bs=qr[4]*gr+bs,vn=qr[5]*$r+vn,jo(Dr,bi,gn,Fi,bs,vn));return qt&&Xs(),yn(St),this},S.path=function(k){for(var me=0;me<k.length;me++){var Xe=k[me],ot=Xe.c;switch(Xe.op){case"m":Ms(ot[0],ot[1]);break;case"l":hi(ot[0],ot[1]);break;case"c":jo.apply(this,ot);break;case"h":Xs()}}return this},S.__private__.rect=S.rect=function(k,me,Xe,ot,St){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||!Ci(St))throw new Error("Invalid arguments passed to jsPDF.rect");return V===R.COMPAT&&(ot=-ot),Ue([oe(Z(k)),oe(be(me)),oe(Z(Xe)),oe(Z(ot)),"re"].join(" ")),yn(St),this},S.__private__.triangle=S.triangle=function(k,me,Xe,ot,St,qt,gr){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||isNaN(St)||isNaN(qt)||!Ci(gr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Xe-k,ot-me],[St-Xe,qt-ot],[k-St,me-qt]],k,me,[1,1],gr,!0),this},S.__private__.roundedRect=S.roundedRect=function(k,me,Xe,ot,St,qt,gr){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||isNaN(St)||isNaN(qt)||!Ci(gr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $r=4/3*(Math.SQRT2-1);return St=Math.min(St,.5*Xe),qt=Math.min(qt,.5*ot),this.lines([[Xe-2*St,0],[St*$r,0,St,qt-qt*$r,St,qt],[0,ot-2*qt],[0,qt*$r,-St*$r,qt,-St,qt],[2*St-Xe,0],[-St*$r,0,-St,-qt*$r,-St,-qt],[0,2*qt-ot],[0,-qt*$r,St*$r,-qt,St,-qt]],k+St,me,[1,1],gr,!0),this},S.__private__.ellipse=S.ellipse=function(k,me,Xe,ot,St){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||!Ci(St))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qt=4/3*(Math.SQRT2-1)*Xe,gr=4/3*(Math.SQRT2-1)*ot;return Ms(k+Xe,me),jo(k+Xe,me-gr,k+qt,me-ot,k,me-ot),jo(k-qt,me-ot,k-Xe,me-gr,k-Xe,me),jo(k-Xe,me+gr,k-qt,me+ot,k,me+ot),jo(k+qt,me+ot,k+Xe,me+gr,k+Xe,me),yn(St),this},S.__private__.circle=S.circle=function(k,me,Xe,ot){if(isNaN(k)||isNaN(me)||isNaN(Xe)||!Ci(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,me,Xe,Xe,ot)},S.setFont=function(k,me,Xe){return Xe&&(me=se(me,Xe)),ar=At(k,me,{disableWarning:!1}),this};var zl=S.__private__.getFont=S.getFont=function(){return mn[At.apply(S,arguments)]};S.__private__.getFontList=S.getFontList=function(){var k,me,Xe={};for(k in Hn)if(Hn.hasOwnProperty(k))for(me in Xe[k]=[],Hn[k])Hn[k].hasOwnProperty(me)&&Xe[k].push(me);return Xe},S.addFont=function(k,me,Xe,ot,St){var qt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qt.indexOf(arguments[3])!==-1?St=arguments[3]:arguments[3]&&qt.indexOf(arguments[3])==-1&&(Xe=se(Xe,ot)),St=St||"Identity-H",Xo.call(this,k,me,Xe,St)};var oa,yo=t.lineWidth||.200025,As=S.__private__.getLineWidth=S.getLineWidth=function(){return yo},Wc=S.__private__.setLineWidth=S.setLineWidth=function(k){return yo=k,Ue(oe(Z(k))+" w"),this};S.__private__.setLineDash=is.API.setLineDash=is.API.setLineDashPattern=function(k,me){if(k=k||[],me=me||0,isNaN(me)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Xe){return oe(Z(Xe))}).join(" "),me=oe(Z(me)),Ue("["+k+"] "+me+" d"),this};var Ql=S.__private__.getLineHeight=S.getLineHeight=function(){return Kt*oa};S.__private__.getLineHeight=S.getLineHeight=function(){return Kt*oa};var Hl=S.__private__.setLineHeightFactor=S.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(oa=k),this},ja=S.__private__.getLineHeightFactor=S.getLineHeightFactor=function(){return oa};Hl(t.lineHeight);var $o=S.__private__.getHorizontalCoordinate=function(k){return Z(k)},Ys=S.__private__.getVerticalCoordinate=function(k){return V===R.ADVANCED?k:Pr[le].mediaBox.topRightY-Pr[le].mediaBox.bottomLeftY-Z(k)},Bo=S.__private__.getHorizontalCoordinateString=S.getHorizontalCoordinateString=function(k){return oe($o(k))},Zs=S.__private__.getVerticalCoordinateString=S.getVerticalCoordinateString=function(k){return oe(Ys(k))},vo=t.strokeColor||"0 G";S.__private__.getStrokeColor=S.getDrawColor=function(){return Lr(vo)},S.__private__.setStrokeColor=S.setDrawColor=function(k,me,Xe,ot){return vo=rn({ch1:k,ch2:me,ch3:Xe,ch4:ot,pdfColorType:"draw",precision:2}),Ue(vo),this};var fa=t.fillColor||"0 g";S.__private__.getFillColor=S.getFillColor=function(){return Lr(fa)},S.__private__.setFillColor=S.setFillColor=function(k,me,Xe,ot){return fa=rn({ch1:k,ch2:me,ch3:Xe,ch4:ot,pdfColorType:"fill",precision:2}),Ue(fa),this};var _s=t.textColor||"0 g",io=S.__private__.getTextColor=S.getTextColor=function(){return Lr(_s)};S.__private__.setTextColor=S.setTextColor=function(k,me,Xe,ot){return _s=rn({ch1:k,ch2:me,ch3:Xe,ch4:ot,pdfColorType:"text",precision:3}),this};var qo=t.charSpace,Eo=S.__private__.getCharSpace=S.getCharSpace=function(){return parseFloat(qo||0)};S.__private__.setCharSpace=S.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qo=k,this};var ic=0;S.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},S.__private__.setLineCap=S.setLineCap=function(k){var me=S.CapJoinStyles[k];if(me===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ic=me,Ue(me+" J"),this};var aa=0;S.__private__.setLineJoin=S.setLineJoin=function(k){var me=S.CapJoinStyles[k];if(me===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return aa=me,Ue(me+" j"),this},S.__private__.setLineMiterLimit=S.__private__.setMiterLimit=S.setLineMiterLimit=S.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ue(oe(Z(k))+" M"),this},S.GState=z_,S.setGState=function(k){(k=typeof k=="string"?Dn[Gi[k]]:rl(null,k)).equals(Rn)||(Ue("/"+k.id+" gs"),Rn=k)};var rl=function(k,me){if(!k||!Gi[k]){var Xe=!1;for(var ot in Dn)if(Dn.hasOwnProperty(ot)&&Dn[ot].equals(me)){Xe=!0;break}if(Xe)me=Dn[ot];else{var St="GS"+(Object.keys(Dn).length+1).toString(10);Dn[St]=me,me.id=St}return k&&(Gi[k]=me.id),un.publish("addGState",me),me}};S.addGState=function(k,me){return rl(k,me),this},S.saveGraphicsState=function(){return Ue("q"),Vi.push({key:ar,size:Kt,color:_s}),this},S.restoreGraphicsState=function(){Ue("Q");var k=Vi.pop();return ar=k.key,Kt=k.size,_s=k.color,Rn=null,this},S.setCurrentTransformationMatrix=function(k){return Ue(k.toString()+" cm"),this},S.comment=function(k){return Ue("#"+k),this};var Uo=function(k,me){var Xe=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Xe},set:function(qt){isNaN(qt)||(Xe=parseFloat(qt))}});var ot=me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function(qt){isNaN(qt)||(ot=parseFloat(qt))}});var St="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return St},set:function(qt){St=qt.toString()}}),this},Va=function(k,me,Xe,ot){Uo.call(this,k,me),this.type="rect";var St=Xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return St},set:function(gr){isNaN(gr)||(St=parseFloat(gr))}});var qt=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qt},set:function(gr){isNaN(gr)||(qt=parseFloat(gr))}}),this},Vl=function(){this.page=Zr,this.currentPage=le,this.pages=De.slice(0),this.pagesContext=Pr.slice(0),this.x=Gr,this.y=Wr,this.matrix=On,this.width=xo(le),this.height=_o(le),this.outputDestination=ir,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){Zr=this.page,le=this.currentPage,Pr=this.pagesContext,De=this.pages,Gr=this.x,Wr=this.y,On=this.matrix,Gl(le,this.width),$l(le,this.height),ir=this.outputDestination};var Wo=function(k,me,Xe,ot,St){We.push(new Vl),Zr=le=0,De=[],Gr=k,Wr=me,On=St,Bl([Xe,ot])},xu=function(k){if(ur[k])We.pop().restore();else{var me=new Vl,Xe="Xo"+(Object.keys(ri).length+1).toString(10);me.id=Xe,ur[k]=Xe,ri[Xe]=me,un.publish("addFormObject",me),We.pop().restore()}};for(var pa in S.beginFormObject=function(k,me,Xe,ot,St){return Wo(k,me,Xe,ot,St),this},S.endFormObject=function(k){return xu(k),this},S.doFormObject=function(k,me){var Xe=ri[ur[k]];return Ue("q"),Ue(me.toString()+" cm"),Ue("/"+Xe.id+" Do"),Ue("Q"),this},S.getFormObject=function(k){var me=ri[ur[k]];return{x:me.x,y:me.y,width:me.width,height:me.height,matrix:me.matrix}},S.save=function(k,me){return k=k||"generated.pdf",(me=me||{}).returnPromise=me.returnPromise||!1,me.returnPromise===!1?(Og(Fn(pn()),k),typeof Og.unload=="function"&&ls.setTimeout&&setTimeout(Og.unload,911),this):new Promise(function(Xe,ot){try{var St=Og(Fn(pn()),k);typeof Og.unload=="function"&&ls.setTimeout&&setTimeout(Og.unload,911),Xe(St)}catch(qt){ot(qt.message)}})},is.API)is.API.hasOwnProperty(pa)&&(pa==="events"&&is.API.events.length?function(k,me){var Xe,ot,St;for(St=me.length-1;St!==-1;St--)Xe=me[St][0],ot=me[St][1],k.subscribe.apply(k,[Xe].concat(typeof ot=="function"?[ot]:ot))}(un,is.API.events):S[pa]=is.API[pa]);var xo=S.getPageWidth=function(k){return(Pr[k=k||le].mediaBox.topRightX-Pr[k].mediaBox.bottomLeftX)/Yt},Gl=S.setPageWidth=function(k,me){Pr[k].mediaBox.topRightX=me*Yt+Pr[k].mediaBox.bottomLeftX},_o=S.getPageHeight=function(k){return(Pr[k=k||le].mediaBox.topRightY-Pr[k].mediaBox.bottomLeftY)/Yt},$l=S.setPageHeight=function(k,me){Pr[k].mediaBox.topRightY=me*Yt+Pr[k].mediaBox.bottomLeftY};return S.internal={pdfEscape:xs,getStyle:Ps,getFont:zl,getFontSize:nr,getCharSpace:Eo,getTextColor:io,getLineHeight:Ql,getLineHeightFactor:ja,getLineWidth:As,write:hr,getHorizontalCoordinate:$o,getVerticalCoordinate:Ys,getCoordinateString:Bo,getVerticalCoordinateString:Zs,collections:{},newObject:kt,newAdditionalObject:fr,newObjectDeferred:Wt,newObjectDeferredBegin:Rt,getFilters:sn,putStream:_n,events:un,scaleFactor:Yt,pageSize:{getWidth:function(){return xo(le)},setWidth:function(k){Gl(le,k)},getHeight:function(){return _o(le)},setHeight:function(k){$l(le,k)}},encryptionOptions:g,encryption:Gn,getEncryptor:si,output:Mn,getNumberOfPages:Re,pages:De,out:Ue,f2:we,f3:J,getPageInfo:ji,getPageInfoByObjId:Sr,getCurrentPageInfo:an,getPDFVersion:j,Point:Uo,Rectangle:Va,Matrix:qe,hasHotfix:Kr},Object.defineProperty(S.internal.pageSize,"width",{get:function(){return xo(le)},set:function(k){Gl(le,k)},enumerable:!0,configurable:!0}),Object.defineProperty(S.internal.pageSize,"height",{get:function(){return _o(le)},set:function(k){$l(le,k)},enumerable:!0,configurable:!0}),Pa.call(S,vt),ar="F1",Fc(s,r),un.publish("initialized"),S}my.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},my.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},my.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},my.prototype.processOwnerPassword=function(t,e){return lL(aL(e).substr(0,5),t)},my.prototype.encryptor=function(t,e){var r=aL(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return lL(r,n)}},z_.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||ba(t)!==ba(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},is.API={events:[]},is.version="3.0.1";var Yl=is.API,BF=1,F0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oy=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Is=function(t){return t.toFixed(2)},qA=function(t){return t.toFixed(5)};Yl.__acroform__={};var Yd=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},W7=function(t){return t*BF},lp=function(t){var e=new fW,r=vi.internal.getHeight(t)||0,n=vi.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Is(n)),Number(Is(r))],e},pxe=Yl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Axe=Yl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},mxe=Yl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},gc=Yl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return mxe(t,e-1)},yc=Yl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pxe(t,e-1)},vc=Yl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Axe(t,e-1)},gxe=Yl.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],o=t[1],c=t[2],u=t[3],i={};return i.lowerLeft_X=r(s)||0,i.lowerLeft_Y=n(o+u)||0,i.upperRight_X=r(s+c)||0,i.upperRight_Y=n(o)||0,[Number(Is(i.lowerLeft_X)),Number(Is(i.lowerLeft_Y)),Number(Is(i.upperRight_X)),Number(Is(i.upperRight_Y))]},yxe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=cL(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Is(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=lp(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},cL=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(J){return J.split(`
`)}):s.map(function(J){return[J]});var o=r,c=vi.internal.getHeight(t)||0;c=c<0?-c:c;var u=vi.internal.getWidth(t)||0;u=u<0?-u:u;var i=function(J,Z,Ie){if(J+1<s.length){var be=Z+" "+s[J+1][0];return p2(be,t,Ie).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var m,g,C=p2("3",t,o).height,B=t.multiline?c-o:(c-C)/2,S=B+=2,P=0,j=0,D=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+p2(e,t,o=12).width+", FieldWidth:"+u+`
`;break}for(var F="",R=0,V=0;V<s.length;V++)if(s.hasOwnProperty(V)){var Y=!1;if(s[V].length!==1&&D!==s[V].length-1){if((C+2)*(R+2)+2>c)continue e;F+=s[V][D],Y=!0,j=V,V--}else{F=(F+=s[V][D]+" ").substr(F.length-1)==" "?F.substr(0,F.length-1):F;var te=parseInt(V),se=i(te,F,o),oe=V>=s.length-1;if(se&&!oe){F+=" ",D=0;continue}if(se||oe){if(oe)j=te;else if(t.multiline&&(C+2)*(R+2)+2>c)continue e}else{if(!t.multiline||(C+2)*(R+2)+2>c)continue e;j=te}}for(var K="",de=P;de<=j;de++){var we=s[de];if(t.multiline){if(de===j){K+=we[D]+" ",D=(D+1)%we.length;continue}if(de===P){K+=we[we.length-1]+" ";continue}}K+=we[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,g=p2(K,t,o).width,t.textAlign){case"right":m=u-g-2;break;case"center":m=(u-g)/2;break;case"left":default:m=2}e+=Is(m)+" "+Is(S)+` Td
`,e+="("+F0(K)+`) Tj
`,e+=-Is(m)+` 0 Td
`,S=-(o+2),g=0,P=Y?j:j+1,R++,F=""}break}return n.text=e,n.fontSize=o,n},p2=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},vxe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},xxe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},_xe=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),ba(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},bxe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Qf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(vxe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");BF=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new pW,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var o=n[s];o.objId=void 0,o.hasAnnotation&&xxe(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var o=!n;for(var c in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],i=[],m=u.Rect;if(u.Rect&&(u.Rect=gxe(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=vi.createDefaultAppearanceStream(u),ba(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(i=u.getKeyValueListForStream()),u.Rect=m,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=yxe(u);i.push({key:"AP",value:"<</N "+g+">>"}),s.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var C="";for(var B in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(B)){var S=u.appearanceStreamContent[B];if(C+="/"+B+" ",C+="<<",Object.keys(S).length>=1||Array.isArray(S)){for(var c in S)if(S.hasOwnProperty(c)){var P=S[c];typeof P=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P+" ",s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P)}}else typeof(P=S)=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P,s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P);C+=">>"}i.push({key:"AP",value:`<<
`+C+">>"})}s.internal.putStream({additionalKeyValues:i,objectId:u.objId}),s.internal.out("endobj")}o&&_xe(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},hW=Yl.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(c){return c};if(Array.isArray(t)){for(var s="[",o=0;o<t.length;o++)switch(o!==0&&(s+=" "),ba(t[o])){case"boolean":case"number":case"object":s+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+F0(n(t[o].toString()))+")"):s+=t[o].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},S3=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+F0(n(t))+")"},Ap=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ap.prototype.toString=function(){return this.objId+" 0 R"},Ap.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ap.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:hW(s,this.objId,this.scope)}):s instanceof Ap?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var fW=function(){Ap.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Yd(fW,Ap);var pW=function(){Ap.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+F0(r(t))+")"}},set:function(r){t=r}})};Yd(pW,Ap);var Qf=function t(){Ap.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute F supplied.');e=F}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!gc(e,3)},set:function(F){F?this.F=yc(e,3):this.F=vc(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute Ff supplied.');r=F}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(F){n=F!==void 0?F:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(F){n[0]=F}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(F){n[1]=F}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(F){n[2]=F}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(F){n[3]=F}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(F){switch(F){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=F;break;default:throw new Error('Invalid value "'+F+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof E4)return;o="FieldObject"+t.FieldNum++}var F=function(R){return R};return this.scope&&(F=this.scope.internal.getEncryptor(this.objId)),"("+F0(F(o))+")"},set:function(F){o=F.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(F){o=F}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(F){c=F}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(F){u=F}});var i=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return i},set:function(F){i=F}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/BF:m},set:function(F){m=F}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(F){g=F}});var C="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!C||this instanceof E4||this instanceof km))return S3(C,this.objId,this.scope)},set:function(F){F=F.toString(),C=F}});var B=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(B)return this instanceof Vc?B:S3(B,this.objId,this.scope)},set:function(F){F=F.toString(),B=this instanceof Vc?F:F.substr(0,1)==="("?oy(F.substr(1,F.length-2)):oy(F)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vc?oy(B.substr(1,B.length-1)):B},set:function(F){F=F.toString(),B=this instanceof Vc?"/"+F:F}});var S=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(S)return S},set:function(F){this.V=F}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Vc?S:S3(S,this.objId,this.scope)},set:function(F){F=F.toString(),S=this instanceof Vc?F:F.substr(0,1)==="("?oy(F.substr(1,F.length-2)):oy(F)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vc?oy(S.substr(1,S.length-1)):S},set:function(F){F=F.toString(),S=this instanceof Vc?"/"+F:F}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(F){F=!!F,j=F}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(F){P=F}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,1)},set:function(F){F?this.Ff=yc(this.Ff,1):this.Ff=vc(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,2)},set:function(F){F?this.Ff=yc(this.Ff,2):this.Ff=vc(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,3)},set:function(F){F?this.Ff=yc(this.Ff,3):this.Ff=vc(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(F){if([0,1,2].indexOf(F)===-1)throw new Error('Invalid value "'+F+'" for attribute Q supplied.');D=F}}),Object.defineProperty(this,"textAlign",{get:function(){var F;switch(D){case 0:default:F="left";break;case 1:F="center";break;case 2:F="right"}return F},configurable:!0,enumerable:!0,set:function(F){switch(F){case"right":case 2:D=2;break;case"center":case 1:D=1;break;case"left":case 0:default:D=0}}})};Yd(Qf,Ap);var o0=function(){Qf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return hW(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(o,c,u){u||(u=1);for(var i,m=[];i=c.exec(o);)m.push(i[u]);return m}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,18)},set:function(r){r?this.Ff=yc(this.Ff,18):this.Ff=vc(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=yc(this.Ff,19):this.Ff=vc(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,20)},set:function(r){r?(this.Ff=yc(this.Ff,20),e.sort()):this.Ff=vc(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,22)},set:function(r){r?this.Ff=yc(this.Ff,22):this.Ff=vc(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,23)},set:function(r){r?this.Ff=yc(this.Ff,23):this.Ff=vc(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,27)},set:function(r){r?this.Ff=yc(this.Ff,27):this.Ff=vc(this.Ff,27)}}),this.hasAppearanceStream=!1};Yd(o0,Qf);var a0=function(){o0.call(this),this.fontName="helvetica",this.combo=!1};Yd(a0,o0);var l0=function(){a0.call(this),this.combo=!0};Yd(l0,a0);var $x=function(){l0.call(this),this.edit=!0};Yd($x,l0);var Vc=function(){Qf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,15)},set:function(r){r?this.Ff=yc(this.Ff,15):this.Ff=vc(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,16)},set:function(r){r?this.Ff=yc(this.Ff,16):this.Ff=vc(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,17)},set:function(r){r?this.Ff=yc(this.Ff,17):this.Ff=vc(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,26)},set:function(r){r?this.Ff=yc(this.Ff,26):this.Ff=vc(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+F0(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){ba(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Yd(Vc,Qf);var qx=function(){Vc.call(this),this.pushButton=!0};Yd(qx,Vc);var c0=function(){Vc.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Yd(c0,Vc);var E4=function(){var t,e;Qf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),n)c.push("/"+o+" ("+F0(s(n[o]))+")");return c.push(">>"),c.join(`
`)},set:function(s){ba(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vi.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yd(E4,Qf),c0.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},c0.prototype.createOption=function(t){var e=new E4;return e.Parent=this,e.optionName=t,this.Kids.push(e),wxe.call(this.scope,e),e};var Wx=function(){Vc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vi.CheckBox.createAppearanceStream()};Yd(Wx,Vc);var km=function(){Qf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,13)},set:function(e){e?this.Ff=yc(this.Ff,13):this.Ff=vc(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,21)},set:function(e){e?this.Ff=yc(this.Ff,21):this.Ff=vc(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,23)},set:function(e){e?this.Ff=yc(this.Ff,23):this.Ff=vc(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,24)},set:function(e){e?this.Ff=yc(this.Ff,24):this.Ff=vc(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,25)},set:function(e){e?this.Ff=yc(this.Ff,25):this.Ff=vc(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,26)},set:function(e){e?this.Ff=yc(this.Ff,26):this.Ff=vc(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yd(km,Qf);var Kx=function(){km.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,14)},set:function(t){t?this.Ff=yc(this.Ff,14):this.Ff=vc(this.Ff,14)}}),this.password=!0};Yd(Kx,km);var vi={CheckBox:{createAppearanceStream:function(){return{N:{On:vi.CheckBox.YesNormal},D:{On:vi.CheckBox.YesPushDown,Off:vi.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),o=cL(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Is(vi.internal.getWidth(t))+" "+Is(vi.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Is(o.fontSize)+" Tf "+s),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=lp(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],o=vi.internal.getHeight(t),c=vi.internal.getWidth(t),u=cL(t,t.caption);return s.push("1 g"),s.push("0 0 "+Is(c)+" "+Is(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Is(c-1)+" "+Is(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Is(u.fontSize)+" Tf "+n),s.push(u.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Is(vi.internal.getWidth(t))+" "+Is(vi.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:vi.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=vi.RadioButton.Circle.YesNormal,e.D[t]=vi.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=vi.internal.getWidth(t)<=vi.internal.getHeight(t)?vi.internal.getWidth(t)/4:vi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=vi.internal.Bezier_C,o=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+qA(vi.internal.getWidth(t)/2)+" "+qA(vi.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=vi.internal.getWidth(t)<=vi.internal.getHeight(t)?vi.internal.getWidth(t)/4:vi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*vi.internal.Bezier_C).toFixed(5)),c=Number((n*vi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+qA(vi.internal.getWidth(t)/2)+" "+qA(vi.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+qA(vi.internal.getWidth(t)/2)+" "+qA(vi.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),r.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),r.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),r.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=vi.internal.getWidth(t)<=vi.internal.getHeight(t)?vi.internal.getWidth(t)/4:vi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*vi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+qA(vi.internal.getWidth(t)/2)+" "+qA(vi.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:vi.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=vi.RadioButton.Cross.YesNormal,e.D[t]=vi.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=vi.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Is(vi.internal.getWidth(t)-2)+" "+Is(vi.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Is(n.x1.x)+" "+Is(n.x1.y)+" m"),r.push(Is(n.x2.x)+" "+Is(n.x2.y)+" l"),r.push(Is(n.x4.x)+" "+Is(n.x4.y)+" m"),r.push(Is(n.x3.x)+" "+Is(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=vi.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Is(vi.internal.getWidth(t))+" "+Is(vi.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Is(vi.internal.getWidth(t)-2)+" "+Is(vi.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Is(r.x1.x)+" "+Is(r.x1.y)+" m"),n.push(Is(r.x2.x)+" "+Is(r.x2.y)+" l"),n.push(Is(r.x4.x)+" "+Is(r.x4.y)+" m"),n.push(Is(r.x3.x)+" "+Is(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Is(vi.internal.getWidth(t))+" "+Is(vi.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};vi.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=vi.internal.getWidth(t),r=vi.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},vi.internal.getWidth=function(t){var e=0;return ba(t)==="object"&&(e=W7(t.Rect[2])),e},vi.internal.getHeight=function(t){var e=0;return ba(t)==="object"&&(e=W7(t.Rect[3])),e};var wxe=Yl.addField=function(t){if(bxe(this,t),!(t instanceof Qf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Yl.AcroFormChoiceField=o0,Yl.AcroFormListBox=a0,Yl.AcroFormComboBox=l0,Yl.AcroFormEditBox=$x,Yl.AcroFormButton=Vc,Yl.AcroFormPushButton=qx,Yl.AcroFormRadioButton=c0,Yl.AcroFormCheckBox=Wx,Yl.AcroFormTextField=km,Yl.AcroFormPasswordField=Kx,Yl.AcroFormAppearance=vi,Yl.AcroForm={ChoiceField:o0,ListBox:a0,ComboBox:l0,EditBox:$x,Button:Vc,PushButton:qx,RadioButton:c0,CheckBox:Wx,TextField:km,PasswordField:Kx,Appearance:vi},is.AcroForm={ChoiceField:o0,ListBox:a0,ComboBox:l0,EditBox:$x,Button:Vc,PushButton:qx,RadioButton:c0,CheckBox:Wx,TextField:km,PasswordField:Kx,Appearance:vi};var Cxe=is.AcroForm;function AW(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(J,Z){var Ie,be,He,Fe,ve,_e=e;if((Z=Z||e)==="RGBA"||J.data!==void 0&&J.data instanceof Uint8ClampedArray&&"height"in J&&"width"in J)return"RGBA";if(se(J))for(ve in r)for(He=r[ve],Ie=0;Ie<He.length;Ie+=1){for(Fe=!0,be=0;be<He[Ie].length;be+=1)if(He[Ie][be]!==void 0&&He[Ie][be]!==J[be]){Fe=!1;break}if(Fe===!0){_e=ve;break}}else for(ve in r)for(He=r[ve],Ie=0;Ie<He.length;Ie+=1){for(Fe=!0,be=0;be<He[Ie].length;be+=1)if(He[Ie][be]!==void 0&&He[Ie][be]!==J.charCodeAt(be)){Fe=!1;break}if(Fe===!0){_e=ve;break}}return _e===e&&Z!==e&&(_e=Z),_e},s=function J(Z){for(var Ie=this.internal.write,be=this.internal.putStream,He=(0,this.internal.getFilters)();He.indexOf("FlateEncode")!==-1;)He.splice(He.indexOf("FlateEncode"),1);Z.objectId=this.internal.newObject();var Fe=[];if(Fe.push({key:"Type",value:"/XObject"}),Fe.push({key:"Subtype",value:"/Image"}),Fe.push({key:"Width",value:Z.width}),Fe.push({key:"Height",value:Z.height}),Z.colorSpace===D.INDEXED?Fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Z.palette.length/3-1)+" "+("sMask"in Z&&Z.sMask!==void 0?Z.objectId+2:Z.objectId+1)+" 0 R]"}):(Fe.push({key:"ColorSpace",value:"/"+Z.colorSpace}),Z.colorSpace===D.DEVICE_CMYK&&Fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Fe.push({key:"BitsPerComponent",value:Z.bitsPerComponent}),"decodeParameters"in Z&&Z.decodeParameters!==void 0&&Fe.push({key:"DecodeParms",value:"<<"+Z.decodeParameters+">>"}),"transparency"in Z&&Array.isArray(Z.transparency)){for(var ve="",_e=0,ze=Z.transparency.length;_e<ze;_e++)ve+=Z.transparency[_e]+" "+Z.transparency[_e]+" ";Fe.push({key:"Mask",value:"["+ve+"]"})}Z.sMask!==void 0&&Fe.push({key:"SMask",value:Z.objectId+1+" 0 R"});var Ne=Z.filter!==void 0?["/"+Z.filter]:void 0;if(be({data:Z.data,additionalKeyValues:Fe,alreadyAppliedFilters:Ne,objectId:Z.objectId}),Ie("endobj"),"sMask"in Z&&Z.sMask!==void 0){var st="/Predictor "+Z.predictor+" /Colors 1 /BitsPerComponent "+Z.bitsPerComponent+" /Columns "+Z.width,ie={width:Z.width,height:Z.height,colorSpace:"DeviceGray",bitsPerComponent:Z.bitsPerComponent,decodeParameters:st,data:Z.sMask};"filter"in Z&&(ie.filter=Z.filter),J.call(this,ie)}if(Z.colorSpace===D.INDEXED){var le=this.internal.newObject();be({data:K(new Uint8Array(Z.palette)),objectId:le}),Ie("endobj")}},o=function(){var J=this.internal.collections.addImage_images;for(var Z in J)s.call(this,J[Z])},c=function(){var J,Z=this.internal.collections.addImage_images,Ie=this.internal.write;for(var be in Z)Ie("/I"+(J=Z[be]).index,J.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},i=function(){var J=this.internal.collections.addImage_images;return u.call(this),J},m=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(J){return typeof t["process"+J.toUpperCase()]=="function"},C=function(J){return ba(J)==="object"&&J.nodeType===1},B=function(J,Z){if(J.nodeName==="IMG"&&J.hasAttribute("src")){var Ie=""+J.getAttribute("src");if(Ie.indexOf("data:image/")===0)return Gx(unescape(Ie).split("base64,").pop());var be=t.loadFile(Ie,!0);if(be!==void 0)return be}if(J.nodeName==="CANVAS"){if(J.width===0||J.height===0)throw new Error("Given canvas must have data. Canvas width: "+J.width+", height: "+J.height);var He;switch(Z){case"PNG":He="image/png";break;case"WEBP":He="image/webp";break;case"JPEG":case"JPG":default:He="image/jpeg"}return Gx(J.toDataURL(He,1).split("base64,").pop())}},S=function(J){var Z=this.internal.collections.addImage_images;if(Z){for(var Ie in Z)if(J===Z[Ie].alias)return Z[Ie]}},P=function(J,Z,Ie){return J||Z||(J=-96,Z=-96),J<0&&(J=-1*Ie.width*72/J/this.internal.scaleFactor),Z<0&&(Z=-1*Ie.height*72/Z/this.internal.scaleFactor),J===0&&(J=Z*Ie.width/Ie.height),Z===0&&(Z=J*Ie.height/Ie.width),[J,Z]},j=function(J,Z,Ie,be,He,Fe){var ve=P.call(this,Ie,be,He),_e=this.internal.getCoordinateString,ze=this.internal.getVerticalCoordinateString,Ne=i.call(this);if(Ie=ve[0],be=ve[1],Ne[He.index]=He,Fe){Fe*=Math.PI/180;var st=Math.cos(Fe),ie=Math.sin(Fe),le=function(fe){return fe.toFixed(4)},pe=[le(st),le(ie),le(-1*ie),le(st),0,0,"cm"]}this.internal.write("q"),Fe?(this.internal.write([1,"0","0",1,_e(J),ze(Z+be),"cm"].join(" ")),this.internal.write(pe.join(" ")),this.internal.write([_e(Ie),"0","0",_e(be),"0","0","cm"].join(" "))):this.internal.write([_e(Ie),"0","0",_e(be),_e(J),ze(Z+be),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+He.index+" Do"),this.internal.write("Q")},D=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=t.__addimage__.sHashCode=function(J){var Z,Ie,be=0;if(typeof J=="string")for(Ie=J.length,Z=0;Z<Ie;Z++)be=(be<<5)-be+J.charCodeAt(Z),be|=0;else if(se(J))for(Ie=J.byteLength/2,Z=0;Z<Ie;Z++)be=(be<<5)-be+J[Z],be|=0;return be},V=t.__addimage__.validateStringAsBase64=function(J){(J=J||"").toString().trim();var Z=!0;return J.length===0&&(Z=!1),J.length%4!=0&&(Z=!1),/^[A-Za-z0-9+/]+$/.test(J.substr(0,J.length-2))===!1&&(Z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(J.substr(-2))===!1&&(Z=!1),Z},Y=t.__addimage__.extractImageFromDataUrl=function(J){if(J==null||!(J=J.trim()).startsWith("data:"))return null;var Z=J.indexOf(",");return Z<0?null:J.substring(0,Z).trim().endsWith("base64")?J.substring(Z+1):null},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(J){return te()&&J instanceof ArrayBuffer};var se=t.__addimage__.isArrayBufferView=function(J){return te()&&typeof Uint32Array<"u"&&(J instanceof Int8Array||J instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&J instanceof Uint8ClampedArray||J instanceof Int16Array||J instanceof Uint16Array||J instanceof Int32Array||J instanceof Uint32Array||J instanceof Float32Array||J instanceof Float64Array)},oe=t.__addimage__.binaryStringToUint8Array=function(J){for(var Z=J.length,Ie=new Uint8Array(Z),be=0;be<Z;be++)Ie[be]=J.charCodeAt(be);return Ie},K=t.__addimage__.arrayBufferToBinaryString=function(J){for(var Z="",Ie=se(J)?J:new Uint8Array(J),be=0;be<Ie.length;be+=8192)Z+=String.fromCharCode.apply(null,Ie.subarray(be,be+8192));return Z};t.addImage=function(){var J,Z,Ie,be,He,Fe,ve,_e,ze;if(typeof arguments[1]=="number"?(Z=e,Ie=arguments[1],be=arguments[2],He=arguments[3],Fe=arguments[4],ve=arguments[5],_e=arguments[6],ze=arguments[7]):(Z=arguments[1],Ie=arguments[2],be=arguments[3],He=arguments[4],Fe=arguments[5],ve=arguments[6],_e=arguments[7],ze=arguments[8]),ba(J=arguments[0])==="object"&&!C(J)&&"imageData"in J){var Ne=J;J=Ne.imageData,Z=Ne.format||Z||e,Ie=Ne.x||Ie||0,be=Ne.y||be||0,He=Ne.w||Ne.width||He,Fe=Ne.h||Ne.height||Fe,ve=Ne.alias||ve,_e=Ne.compression||_e,ze=Ne.rotation||Ne.angle||ze}var st=this.internal.getFilters();if(_e===void 0&&st.indexOf("FlateEncode")!==-1&&(_e="SLOW"),isNaN(Ie)||isNaN(be))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var ie=de.call(this,J,Z,ve,_e);return j.call(this,Ie,be,He,Fe,ie,ze),this};var de=function(J,Z,Ie,be){var He,Fe,ve;if(typeof J=="string"&&n(J)===e){J=unescape(J);var _e=we(J,!1);(_e!==""||(_e=t.loadFile(J,!0))!==void 0)&&(J=_e)}if(C(J)&&(J=B(J,Z)),Z=n(J,Z),!g(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(((ve=Ie)==null||ve.length===0)&&(Ie=function(ze){return typeof ze=="string"||se(ze)?R(ze):se(ze.data)?R(ze.data):null}(J)),(He=S.call(this,Ie))||(te()&&(J instanceof Uint8Array||Z==="RGBA"||(Fe=J,J=oe(J))),He=this["process"+Z.toUpperCase()](J,m.call(this),Ie,function(ze){return ze&&typeof ze=="string"&&(ze=ze.toUpperCase()),ze in t.image_compression?ze:F.NONE}(be),Fe)),!He)throw new Error("An unknown error occurred whilst processing the image.");return He},we=t.__addimage__.convertBase64ToBinaryString=function(J,Z){Z=typeof Z!="boolean"||Z;var Ie,be="";if(typeof J=="string"){var He;Ie=(He=Y(J))!==null&&He!==void 0?He:J;try{be=Gx(Ie)}catch(Fe){if(Z)throw V(Ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return be};t.getImageProperties=function(J){var Z,Ie,be="";if(C(J)&&(J=B(J)),typeof J=="string"&&n(J)===e&&((be=we(J,!1))===""&&(be=t.loadFile(J)||""),J=be),Ie=n(J),!g(Ie))throw new Error("addImage does not support files of type '"+Ie+"', please ensure that a plugin for '"+Ie+"' support is added.");if(!te()||J instanceof Uint8Array||(J=oe(J)),!(Z=this["process"+Ie.toUpperCase()](J)))throw new Error("An unknown error occurred whilst processing the image");return Z.fileType=Ie,Z}})(is.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};is.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,o,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,i=this.internal.getPageInfoByObjId(r.objId),m=r.pageContext.annotations,g=!1,C=0;C<m.length&&!g;C++)switch((n=m[C]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var B=0;B<m.length;B++){n=m[B];var S=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),F=this.internal.getEncryptor(j.objId),R=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+S(F(n.contents))+")",o+=" /Popup "+D.objId+" 0 R",o+=" /P "+i.objId+" 0 R",o+=" /T ("+S(F(R))+") >>",j.content=o;var V=j.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+V,n.open&&(o+=" /Open true"),o+=" >>",D.content=o,this.internal.write(j.objId,"0 R",D.objId,"0 R");break;case"freetext":s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var Y=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+S(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var te=this.annotations._nameMap[n.options.name];n.options.pageNumber=te.page,n.options.top=te.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+S(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var se=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+se+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,o,c){var u=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:i(r),y:m(n),w:i(r+s),h:m(n+o)},options:c,type:"link"})},t.textWithLink=function(r,n,s,o){var c,u,i=this.getTextWidth(r),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(r,u).length;c=Math.ceil(m*g)}else u=i,c=m;return this.text(r,n,s,o),s+=.2*m,o.align==="center"&&(n-=i/2),o.align==="right"&&(n-=i),this.link(n,s-m,u,c,o),i},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(is.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},u=t.__arabicParser__.isArabicEndLetter=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length<=2},i=t.__arabicParser__.isArabicAlfLetter=function(j){return c(j)&&s.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=1};var m=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=3};var g=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length==4},C=t.__arabicParser__.resolveLigatures=function(j){var D=0,F=r,R="",V=0;for(D=0;D<j.length;D+=1)F[j.charCodeAt(D)]!==void 0?(V++,typeof(F=F[j.charCodeAt(D)])=="number"&&(R+=String.fromCharCode(F),F=r,V=0),D===j.length-1&&(F=r,R+=j.charAt(D-(V-1)),D-=V-1,V=0)):(F=r,R+=j.charAt(D-V),D-=V,V=0);return R};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var B=t.__arabicParser__.getCorrectForm=function(j,D,F){return c(j)?o(j)===!1?-1:!m(j)||!c(D)&&!c(F)||!c(F)&&u(D)||u(j)&&!c(D)||u(j)&&i(D)||u(j)&&u(D)?0:g(j)&&c(D)&&!u(D)&&c(F)&&m(F)?3:u(j)||!c(F)?1:2:-1},S=function(j){var D=0,F=0,R=0,V="",Y="",te="",se=(j=j||"").split("\\s+"),oe=[];for(D=0;D<se.length;D+=1){for(oe.push(""),F=0;F<se[D].length;F+=1)V=se[D][F],Y=se[D][F-1],te=se[D][F+1],c(V)?(R=B(V,Y,te),oe[D]+=R!==-1?String.fromCharCode(e[V.charCodeAt(0)][R]):V):oe[D]+=V;oe[D]=C(oe[D])}return oe.join(" ")},P=t.__arabicParser__.processArabic=t.processArabic=function(){var j,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,F=[];if(Array.isArray(D)){var R=0;for(F=[],R=0;R<D.length;R+=1)Array.isArray(D[R])?F.push([S(D[R][0]),D[R][1],D[R][2]]):F.push([S(D[R])]);j=F}else j=S(D);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",P])}(is.API),is.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(is.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var i=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(j){i=j}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var C=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return C},set:function(j){C=j}});var B=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return B},set:function(j){B=j}});var S=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return S},set:function(j){S=j}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(j){P=j}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(i){return n.call(this),this.internal.__cell__.headerFunction=typeof i=="function"?i:void 0,this},t.getTextDimensions=function(i,m){n.call(this);var g=(m=m||{}).fontSize||this.getFontSize(),C=m.font||this.getFont(),B=m.scaleFactor||this.internal.scaleFactor,S=0,P=0,j=0,D=this;if(!Array.isArray(i)&&typeof i!="string"){if(typeof i!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");i=String(i)}var F=m.maxWidth;F>0?typeof i=="string"?i=this.splitTextToSize(i,F):Object.prototype.toString.call(i)==="[object Array]"&&(i=i.reduce(function(V,Y){return V.concat(D.splitTextToSize(Y,F))},[])):i=Array.isArray(i)?i:[i];for(var R=0;R<i.length;R++)S<(j=this.getStringUnitWidth(i[R],{font:C})*g)&&(S=j);return S!==0&&(P=i.length),{w:S/=B,h:Math.max((P*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/B,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var i=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(i.left,i.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var i;i=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var m=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,C=this.internal.__cell__.margins||e,B=this.internal.__cell__.tableHeaderRow,S=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===i.lineNumber?(i.x=(m.x||0)+(m.width||0),i.y=m.y||0):m.y+m.height+i.height+C.bottom>this.getPageHeight()?(this.cellAddPage(),i.y=C.top,S&&B&&(this.printHeaderRow(i.lineNumber,!0),i.y+=B[0].height)):i.y=m.y+m.height||i.y),i.text[0]!==void 0&&(this.rect(i.x,i.y,i.width,i.height,r===!0?"FD":void 0),i.align==="right"?this.text(i.text,i.x+i.width-g,i.y+g,{align:"right",baseline:"top"}):i.align==="center"?this.text(i.text,i.x+i.width/2,i.y+g,{align:"center",baseline:"top",maxWidth:i.width-g-g}):this.text(i.text,i.x+g,i.y+g,{align:"left",baseline:"top",maxWidth:i.width-g-g})),this.internal.__cell__.lastCell=i,this};t.table=function(i,m,g,C,B){if(n.call(this),!g)throw new Error("No data for PDF table.");var S,P,j,D,F=[],R=[],V=[],Y={},te={},se=[],oe=[],K=(B=B||{}).autoSize||!1,de=B.printHeaders!==!1,we=B.css&&B.css["font-size"]!==void 0?16*B.css["font-size"]:B.fontSize||12,J=B.margins||Object.assign({width:this.getPageWidth()},e),Z=typeof B.padding=="number"?B.padding:3,Ie=B.headerBackgroundColor||"#c8c8c8",be=B.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=de,this.internal.__cell__.margins=J,this.internal.__cell__.table_font_size=we,this.internal.__cell__.padding=Z,this.internal.__cell__.headerBackgroundColor=Ie,this.internal.__cell__.headerTextColor=be,this.setFontSize(we),C==null)R=F=Object.keys(g[0]),V=F.map(function(){return"left"});else if(Array.isArray(C)&&ba(C[0])==="object")for(F=C.map(function(Ne){return Ne.name}),R=C.map(function(Ne){return Ne.prompt||Ne.name||""}),V=C.map(function(Ne){return Ne.align||"left"}),S=0;S<C.length;S+=1)te[C[S].name]=C[S].width*(19.049976/25.4);else Array.isArray(C)&&typeof C[0]=="string"&&(R=F=C,V=F.map(function(){return"left"}));if(K||Array.isArray(C)&&typeof C[0]=="string")for(S=0;S<F.length;S+=1){for(Y[D=F[S]]=g.map(function(Ne){return Ne[D]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(R[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=Y[D],this.setFont(void 0,"normal"),j=0;j<P.length;j+=1)se.push(this.getTextDimensions(P[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[D]=Math.max.apply(null,se)+Z+Z,se=[]}if(de){var He={};for(S=0;S<F.length;S+=1)He[F[S]]={},He[F[S]].text=R[S],He[F[S]].align=V[S];var Fe=u.call(this,He,te);oe=F.map(function(Ne){return new o(i,m,te[Ne],Fe,He[Ne].text,void 0,He[Ne].align)}),this.setTableHeaderRow(oe),this.printHeaderRow(1,!1)}var ve=C.reduce(function(Ne,st){return Ne[st.name]=st.align,Ne},{});for(S=0;S<g.length;S+=1){"rowStart"in B&&B.rowStart instanceof Function&&B.rowStart({row:S,data:g[S]},this);var _e=u.call(this,g[S],te);for(j=0;j<F.length;j+=1){var ze=g[S][F[j]];"cellStart"in B&&B.cellStart instanceof Function&&B.cellStart({row:S,col:j,data:ze},this),c.call(this,new o(i,m,te[F[j]],_e,ze,S+2,ve[F[j]]))}}return this.internal.__cell__.table_x=i,this.internal.__cell__.table_y=m,this};var u=function(i,m){var g=this.internal.__cell__.padding,C=this.internal.__cell__.table_font_size,B=this.internal.scaleFactor;return Object.keys(i).map(function(S){var P=i[S];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,m[S]-g-g)},this).map(function(S){return this.getLineHeightFactor()*S.length*C/B+g+g},this).reduce(function(S,P){return Math.max(S,P)},0)};t.setTableHeaderRow=function(i){n.call(this),this.internal.__cell__.tableHeaderRow=i},t.printHeaderRow=function(i,m){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var C=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(C[0],C[1],C[2],C[3],void 0,-1)}this.setFont(void 0,"bold");for(var B=[],S=0;S<this.internal.__cell__.tableHeaderRow.length;S+=1){g=this.internal.__cell__.tableHeaderRow[S].clone(),m&&(g.y=this.internal.__cell__.margins.top||0,B.push(g)),g.lineNumber=i;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(P)}B.length>0&&this.setTableHeaderRow(B),this.setFont(void 0,"normal"),r=!1}}(is.API);var mW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},gW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],uL=AW(gW),yW=[100,200,300,400,500,600,700,800,900],Sxe=AW(yW);function dL(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return mW[o=o||"normal"]?o:"normal"}(t.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(o){return typeof uL[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function K7(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Bxe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},X7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Y7(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Exe(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Bxe,r.genericFontFamilies||{}),o=null,c=null,u=0;u<e.length;++u)if(s[(o=dL(e[u])).family]&&(o.family=s[o.family]),t.hasOwnProperty(o.family)){c=t[o.family];break}if(!(c=c||t[n]))throw new Error("Could not find a font-family for the rule '"+Y7(o)+"' and default family '"+n+"'.");if(c=function(i,m){if(m[i])return m[i];var g=uL[i],C=g<=uL.normal?-1:1,B=K7(m,gW,g,C);if(!B)throw new Error("Could not find a matching font-stretch value for "+i);return B}(o.stretch,c),c=function(i,m){if(m[i])return m[i];for(var g=mW[i],C=0;C<g.length;++C)if(m[g[C]])return m[g[C]];throw new Error("Could not find a matching font-style for "+i)}(o.style,c),!(c=function(i,m){if(m[i])return m[i];if(i===400&&m[500])return m[500];if(i===500&&m[400])return m[400];var g=Sxe[i],C=K7(m,yW,g,i<400?-1:1);if(!C)throw new Error("Could not find a matching font-weight for value "+i);return C}(o.weight,c)))throw new Error("Failed to resolve a font for the rule '"+Y7(o)+"'.");return c}function Z7(t){return t.trimLeft()}function Txe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Lxe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var A2,J7,eU,B3=["times"];(function(t){var e,r,n,s,o,c,u,i,m,g=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new i,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new c,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new c,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new C(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,i=this.internal.Matrix,m=new g}]);var C=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var le=ie;Object.defineProperty(this,"pdf",{get:function(){return le}});var pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return pe},set:function(Ze){pe=!!Ze}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(Ze){fe=!!Ze}});var Qe=0;Object.defineProperty(this,"posX",{get:function(){return Qe},set:function(Ze){isNaN(Ze)||(Qe=Ze)}});var Ke=0;Object.defineProperty(this,"posY",{get:function(){return Ke},set:function(Ze){isNaN(Ze)||(Ke=Ze)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Ze){var Ue;typeof Ze=="number"?Ue=[Ze,Ze,Ze,Ze]:((Ue=new Array(4))[0]=Ze[0],Ue[1]=Ze.length>=2?Ze[1]:Ue[0],Ue[2]=Ze.length>=3?Ze[2]:Ue[0],Ue[3]=Ze.length>=4?Ze[3]:Ue[1]),m.margin=Ue}});var et=!1;Object.defineProperty(this,"autoPaging",{get:function(){return et},set:function(Ze){et=Ze}});var tt=0;Object.defineProperty(this,"lastBreak",{get:function(){return tt},set:function(Ze){tt=Ze}});var bt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return bt},set:function(Ze){bt=Ze}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Ze){Ze instanceof g&&(m=Ze)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Ze){m.path=Ze}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Ze){De=Ze}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ze){var Ue;Ue=B(Ze),this.ctx.fillStyle=Ue.style,this.ctx.isFillTransparent=Ue.a===0,this.ctx.fillOpacity=Ue.a,this.pdf.setFillColor(Ue.r,Ue.g,Ue.b,{a:Ue.a}),this.pdf.setTextColor(Ue.r,Ue.g,Ue.b,{a:Ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ze){var Ue=B(Ze);this.ctx.strokeStyle=Ue.style,this.ctx.isStrokeTransparent=Ue.a===0,this.ctx.strokeOpacity=Ue.a,Ue.a===0?this.pdf.setDrawColor(255,255,255):(Ue.a,this.pdf.setDrawColor(Ue.r,Ue.g,Ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ze){["butt","round","square"].indexOf(Ze)!==-1&&(this.ctx.lineCap=Ze,this.pdf.setLineCap(Ze))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ze){isNaN(Ze)||(this.ctx.lineWidth=Ze,this.pdf.setLineWidth(Ze))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ze){["bevel","round","miter"].indexOf(Ze)!==-1&&(this.ctx.lineJoin=Ze,this.pdf.setLineJoin(Ze))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ze){isNaN(Ze)||(this.ctx.miterLimit=Ze,this.pdf.setMiterLimit(Ze))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ze){this.ctx.textBaseline=Ze}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ze){["right","end","center","left","start"].indexOf(Ze)!==-1&&(this.ctx.textAlign=Ze)}});var Mt=null;function ir(Ze,Ue){if(Mt===null){var hr=function(Dt){var vt=[];return Object.keys(Dt).forEach(function(Kt){Dt[Kt].forEach(function(rr){var nr=null;switch(rr){case"bold":nr={family:Kt,weight:"bold"};break;case"italic":nr={family:Kt,style:"italic"};break;case"bolditalic":nr={family:Kt,weight:"bold",style:"italic"};break;case"":case"normal":nr={family:Kt}}nr!==null&&(nr.ref={name:Kt,style:rr},vt.push(nr))})}),vt}(Ze.getFontList());Mt=function(Dt){for(var vt={},Kt=0;Kt<Dt.length;++Kt){var rr=dL(Dt[Kt]),nr=rr.family,Nr=rr.stretch,on=rr.style,Ir=rr.weight;vt[nr]=vt[nr]||{},vt[nr][Nr]=vt[nr][Nr]||{},vt[nr][Nr][on]=vt[nr][Nr][on]||{},vt[nr][Nr][on][Ir]=rr}return vt}(hr.concat(Ue))}return Mt}var Ar=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ar},set:function(Ze){Mt=null,Ar=Ze}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ze){var Ue;if(this.ctx.font=Ze,(Ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ze))!==null){var hr=Ue[1];Ue[2];var Dt=Ue[3],vt=Ue[4];Ue[5];var Kt=Ue[6],rr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vt)[2];vt=Math.floor(rr==="px"?parseFloat(vt)*this.pdf.internal.scaleFactor:rr==="em"?parseFloat(vt)*this.pdf.getFontSize():parseFloat(vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vt);var nr=function(ln){var ar,Yt,Gr=[],Wr=ln.trim();if(Wr==="")return B3;if(Wr in X7)return[X7[Wr]];for(;Wr!=="";){switch(Yt=null,ar=(Wr=Z7(Wr)).charAt(0)){case'"':case"'":Yt=Txe(Wr.substring(1),ar);break;default:Yt=Lxe(Wr)}if(Yt===null||(Gr.push(Yt[0]),(Wr=Z7(Yt[1]))!==""&&Wr.charAt(0)!==","))return B3;Wr=Wr.replace(/^,/,"")}return Gr}(Kt);if(this.fontFaces){var Nr=Exe(ir(this.pdf,this.fontFaces),nr.map(function(ln){return{family:ln,stretch:"normal",weight:Dt,style:hr}}));this.pdf.setFont(Nr.ref.name,Nr.ref.style)}else{var on="";(Dt==="bold"||parseInt(Dt,10)>=700||hr==="bold")&&(on="bold"),hr==="italic"&&(on+="italic"),on.length===0&&(on="normal");for(var Ir="",cn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Sn=0;Sn<nr.length;Sn++){if(this.pdf.internal.getFont(nr[Sn],on,{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn];break}if(on==="bolditalic"&&this.pdf.internal.getFont(nr[Sn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ir=nr[Sn],on="bold";else if(this.pdf.internal.getFont(nr[Sn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn],on="normal";break}}if(Ir===""){for(var Ln=0;Ln<nr.length;Ln++)if(cn[nr[Ln]]){Ir=cn[nr[Ln]];break}}Ir=Ir===""?"Times":Ir,this.pdf.setFont(Ir,on)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ze){this.ctx.globalCompositeOperation=Ze}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ze){this.ctx.globalAlpha=Ze}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ze){this.ctx.lineDashOffset=Ze,st.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ze){this.ctx.lineDash=Ze,st.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ze){this.ctx.ignoreClearRect=!!Ze}})};C.prototype.setLineDash=function(ie){this.lineDash=ie},C.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},C.prototype.fill=function(){Y.call(this,"fill",!1)},C.prototype.stroke=function(){Y.call(this,"stroke",!1)},C.prototype.beginPath=function(){this.path=[{type:"begin"}]},C.prototype.moveTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var pe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"mt",x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(ie,le)},C.prototype.closePath=function(){var ie=new c(0,0),le=0;for(le=this.path.length-1;le!==-1;le--)if(this.path[le].type==="begin"&&ba(this.path[le+1])==="object"&&typeof this.path[le+1].x=="number"){ie=new c(this.path[le+1].x,this.path[le+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(ie.x,ie.y)},C.prototype.lineTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var pe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"lt",x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(pe.x,pe.y)},C.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},C.prototype.quadraticCurveTo=function(ie,le,pe,fe){if(isNaN(pe)||isNaN(fe)||isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Qe=this.ctx.transform.applyToPoint(new c(pe,fe)),Ke=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"qct",x1:Ke.x,y1:Ke.y,x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new c(Qe.x,Qe.y)},C.prototype.bezierCurveTo=function(ie,le,pe,fe,Qe,Ke){if(isNaN(Qe)||isNaN(Ke)||isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ra.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var et=this.ctx.transform.applyToPoint(new c(Qe,Ke)),tt=this.ctx.transform.applyToPoint(new c(ie,le)),bt=this.ctx.transform.applyToPoint(new c(pe,fe));this.path.push({type:"bct",x1:tt.x,y1:tt.y,x2:bt.x,y2:bt.y,x:et.x,y:et.y}),this.ctx.lastPoint=new c(et.x,et.y)},C.prototype.arc=function(ie,le,pe,fe,Qe,Ke){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe)||isNaN(Qe))throw Ra.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ke=!!Ke,!this.ctx.transform.isIdentity){var et=this.ctx.transform.applyToPoint(new c(ie,le));ie=et.x,le=et.y;var tt=this.ctx.transform.applyToPoint(new c(0,pe)),bt=this.ctx.transform.applyToPoint(new c(0,0));pe=Math.sqrt(Math.pow(tt.x-bt.x,2)+Math.pow(tt.y-bt.y,2))}Math.abs(Qe-fe)>=2*Math.PI&&(fe=0,Qe=2*Math.PI),this.path.push({type:"arc",x:ie,y:le,radius:pe,startAngle:fe,endAngle:Qe,counterclockwise:Ke})},C.prototype.arcTo=function(ie,le,pe,fe,Qe){throw new Error("arcTo not implemented.")},C.prototype.rect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ra.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,le),this.lineTo(ie+pe,le),this.lineTo(ie+pe,le+fe),this.lineTo(ie,le+fe),this.lineTo(ie,le),this.lineTo(ie+pe,le),this.lineTo(ie,le)},C.prototype.fillRect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ra.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!S.call(this)){var Qe={};this.lineCap!=="butt"&&(Qe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Qe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,le,pe,fe),this.fill(),Qe.hasOwnProperty("lineCap")&&(this.lineCap=Qe.lineCap),Qe.hasOwnProperty("lineJoin")&&(this.lineJoin=Qe.lineJoin)}},C.prototype.strokeRect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ra.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(ie,le,pe,fe),this.stroke())},C.prototype.clearRect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ra.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,le,pe,fe))},C.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,pe=0;pe<this.pdf.internal.getNumberOfPages();pe++)this.pdf.setPage(pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(le),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},C.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,pe=0;pe<this.pdf.internal.getNumberOfPages();pe++)this.pdf.setPage(pe+1),this.pdf.internal.out("Q");this.pdf.setPage(le),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},C.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var B=function(ie){var le,pe,fe,Qe;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))le=0,pe=0,fe=0,Qe=0;else{var Ke=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(Ke!==null)le=parseInt(Ke[1]),pe=parseInt(Ke[2]),fe=parseInt(Ke[3]),Qe=1;else if((Ke=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)le=parseInt(Ke[1]),pe=parseInt(Ke[2]),fe=parseInt(Ke[3]),Qe=parseFloat(Ke[4]);else{if(Qe=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var et=new cW(ie);ie=et.ok?et.toHex():"#000000"}ie.length===4?(le=ie.substring(1,2),le+=le,pe=ie.substring(2,3),pe+=pe,fe=ie.substring(3,4),fe+=fe):(le=ie.substring(1,3),pe=ie.substring(3,5),fe=ie.substring(5,7)),le=parseInt(le,16),pe=parseInt(pe,16),fe=parseInt(fe,16)}}return{r:le,g:pe,b:fe,a:Qe,style:ie}},S=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};C.prototype.fillText=function(ie,le,pe,fe){if(isNaN(le)||isNaN(pe)||typeof ie!="string")throw Ra.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!S.call(this)){var Qe=_e(this.ctx.transform.rotation),Ke=this.ctx.transform.scaleX;Z.call(this,{text:ie,x:le,y:pe,scale:Ke,angle:Qe,align:this.textAlign,maxWidth:fe})}},C.prototype.strokeText=function(ie,le,pe,fe){if(isNaN(le)||isNaN(pe)||typeof ie!="string")throw Ra.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){fe=isNaN(fe)?void 0:fe;var Qe=_e(this.ctx.transform.rotation),Ke=this.ctx.transform.scaleX;Z.call(this,{text:ie,x:le,y:pe,scale:Ke,renderingMode:"stroke",angle:Qe,align:this.textAlign,maxWidth:fe})}},C.prototype.measureText=function(ie){if(typeof ie!="string")throw Ra.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var le=this.pdf,pe=this.pdf.internal.scaleFactor,fe=le.internal.getFontSize(),Qe=le.getStringUnitWidth(ie)*fe/le.internal.scaleFactor,Ke=function(et){var tt=(et=et||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return tt}}),this};return new Ke({width:Qe*=Math.round(96*pe/72*1e4)/1e4})},C.prototype.scale=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var pe=new i(ie,0,0,le,0,0);this.ctx.transform=this.ctx.transform.multiply(pe)},C.prototype.rotate=function(ie){if(isNaN(ie))throw Ra.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var le=new i(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(le)},C.prototype.translate=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var pe=new i(1,0,0,1,ie,le);this.ctx.transform=this.ctx.transform.multiply(pe)},C.prototype.transform=function(ie,le,pe,fe,Qe,Ke){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe)||isNaN(Qe)||isNaN(Ke))throw Ra.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var et=new i(ie,le,pe,fe,Qe,Ke);this.ctx.transform=this.ctx.transform.multiply(et)},C.prototype.setTransform=function(ie,le,pe,fe,Qe,Ke){ie=isNaN(ie)?1:ie,le=isNaN(le)?0:le,pe=isNaN(pe)?0:pe,fe=isNaN(fe)?1:fe,Qe=isNaN(Qe)?0:Qe,Ke=isNaN(Ke)?0:Ke,this.ctx.transform=new i(ie,le,pe,fe,Qe,Ke)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};C.prototype.drawImage=function(ie,le,pe,fe,Qe,Ke,et,tt,bt){var De=this.pdf.getImageProperties(ie),Mt=1,ir=1,Ar=1,Ze=1;fe!==void 0&&tt!==void 0&&(Ar=tt/fe,Ze=bt/Qe,Mt=De.width/fe*tt/fe,ir=De.height/Qe*bt/Qe),Ke===void 0&&(Ke=le,et=pe,le=0,pe=0),fe!==void 0&&tt===void 0&&(tt=fe,bt=Qe),fe===void 0&&tt===void 0&&(tt=De.width,bt=De.height);for(var Ue,hr=this.ctx.transform.decompose(),Dt=_e(hr.rotate.shx),vt=new i,Kt=(vt=(vt=(vt=vt.multiply(hr.translate)).multiply(hr.skew)).multiply(hr.scale)).applyToRectangle(new u(Ke-le*Ar,et-pe*Ze,fe*Mt,Qe*ir)),rr=D.call(this,Kt),nr=[],Nr=0;Nr<rr.length;Nr+=1)nr.indexOf(rr[Nr])===-1&&nr.push(rr[Nr]);if(V(nr),this.autoPaging)for(var on=nr[0],Ir=nr[nr.length-1],cn=on;cn<Ir+1;cn++){this.pdf.setPage(cn);var Sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ln=cn===1?this.posY+this.margin[0]:this.margin[0],ln=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ar=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=cn===1?0:ln+(cn-2)*ar;if(this.ctx.clip_path.length!==0){var Gr=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Ue,this.posX+this.margin[3],-Yt+Ln+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Gr}var Wr=JSON.parse(JSON.stringify(Kt));Wr=R([Wr],this.posX+this.margin[3],-Yt+Ln+this.ctx.prevPageLastElemOffset)[0];var On=(cn>on||cn<Ir)&&j.call(this);On&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sn,ar,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",Wr.x,Wr.y,Wr.w,Wr.h,null,null,Dt),On&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,Dt)};var D=function(ie,le,pe){var fe=[];le=le||this.pdf.internal.pageSize.width,pe=pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Qe=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":fe.push(Math.floor((ie.y+Qe)/pe)+1);break;case"arc":fe.push(Math.floor((ie.y+Qe-ie.radius)/pe)+1),fe.push(Math.floor((ie.y+Qe+ie.radius)/pe)+1);break;case"qct":var Ke=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);fe.push(Math.floor((Ke.y+Qe)/pe)+1),fe.push(Math.floor((Ke.y+Ke.h+Qe)/pe)+1);break;case"bct":var et=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);fe.push(Math.floor((et.y+Qe)/pe)+1),fe.push(Math.floor((et.y+et.h+Qe)/pe)+1);break;case"rect":fe.push(Math.floor((ie.y+Qe)/pe)+1),fe.push(Math.floor((ie.y+ie.h+Qe)/pe)+1)}for(var tt=0;tt<fe.length;tt+=1)for(;this.pdf.internal.getNumberOfPages()<fe[tt];)F.call(this);return fe},F=function(){var ie=this.fillStyle,le=this.strokeStyle,pe=this.font,fe=this.lineCap,Qe=this.lineWidth,Ke=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=le,this.font=pe,this.lineCap=fe,this.lineWidth=Qe,this.lineJoin=Ke},R=function(ie,le,pe){for(var fe=0;fe<ie.length;fe++)switch(ie[fe].type){case"bct":ie[fe].x2+=le,ie[fe].y2+=pe;case"qct":ie[fe].x1+=le,ie[fe].y1+=pe;case"mt":case"lt":case"arc":default:ie[fe].x+=le,ie[fe].y+=pe}return ie},V=function(ie){return ie.sort(function(le,pe){return le-pe})},Y=function(ie,le){for(var pe,fe,Qe=this.fillStyle,Ke=this.strokeStyle,et=this.lineCap,tt=this.lineWidth,bt=Math.abs(tt*this.ctx.transform.scaleX),De=this.lineJoin,Mt=JSON.parse(JSON.stringify(this.path)),ir=JSON.parse(JSON.stringify(this.path)),Ar=[],Ze=0;Ze<ir.length;Ze++)if(ir[Ze].x!==void 0)for(var Ue=D.call(this,ir[Ze]),hr=0;hr<Ue.length;hr+=1)Ar.indexOf(Ue[hr])===-1&&Ar.push(Ue[hr]);for(var Dt=0;Dt<Ar.length;Dt++)for(;this.pdf.internal.getNumberOfPages()<Ar[Dt];)F.call(this);if(V(Ar),this.autoPaging)for(var vt=Ar[0],Kt=Ar[Ar.length-1],rr=vt;rr<Kt+1;rr++){this.pdf.setPage(rr),this.fillStyle=Qe,this.strokeStyle=Ke,this.lineCap=et,this.lineWidth=bt,this.lineJoin=De;var nr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nr=rr===1?this.posY+this.margin[0]:this.margin[0],on=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],cn=rr===1?0:on+(rr-2)*Ir;if(this.ctx.clip_path.length!==0){var Sn=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(pe,this.posX+this.margin[3],-cn+Nr+this.ctx.prevPageLastElemOffset),te.call(this,ie,!0),this.path=Sn}if(fe=JSON.parse(JSON.stringify(Mt)),this.path=R(fe,this.posX+this.margin[3],-cn+Nr+this.ctx.prevPageLastElemOffset),le===!1||rr===0){var Ln=(rr>vt||rr<Kt)&&j.call(this);Ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nr,Ir,null).clip().discardPath()),te.call(this,ie,le),Ln&&this.pdf.restoreGraphicsState()}this.lineWidth=tt}else this.lineWidth=bt,te.call(this,ie,le),this.lineWidth=tt;this.path=Mt},te=function(ie,le){if((ie!=="stroke"||le||!P.call(this))&&(ie==="stroke"||le||!S.call(this))){for(var pe,fe,Qe=[],Ke=this.path,et=0;et<Ke.length;et++){var tt=Ke[et];switch(tt.type){case"begin":Qe.push({begin:!0});break;case"close":Qe.push({close:!0});break;case"mt":Qe.push({start:tt,deltas:[],abs:[]});break;case"lt":var bt=Qe.length;if(Ke[et-1]&&!isNaN(Ke[et-1].x)&&(pe=[tt.x-Ke[et-1].x,tt.y-Ke[et-1].y],bt>0)){for(;bt>=0;bt--)if(Qe[bt-1].close!==!0&&Qe[bt-1].begin!==!0){Qe[bt-1].deltas.push(pe),Qe[bt-1].abs.push(tt);break}}break;case"bct":pe=[tt.x1-Ke[et-1].x,tt.y1-Ke[et-1].y,tt.x2-Ke[et-1].x,tt.y2-Ke[et-1].y,tt.x-Ke[et-1].x,tt.y-Ke[et-1].y],Qe[Qe.length-1].deltas.push(pe);break;case"qct":var De=Ke[et-1].x+2/3*(tt.x1-Ke[et-1].x),Mt=Ke[et-1].y+2/3*(tt.y1-Ke[et-1].y),ir=tt.x+2/3*(tt.x1-tt.x),Ar=tt.y+2/3*(tt.y1-tt.y),Ze=tt.x,Ue=tt.y;pe=[De-Ke[et-1].x,Mt-Ke[et-1].y,ir-Ke[et-1].x,Ar-Ke[et-1].y,Ze-Ke[et-1].x,Ue-Ke[et-1].y],Qe[Qe.length-1].deltas.push(pe);break;case"arc":Qe.push({deltas:[],abs:[],arc:!0}),Array.isArray(Qe[Qe.length-1].abs)&&Qe[Qe.length-1].abs.push(tt)}}fe=le?null:ie==="stroke"?"stroke":"fill";for(var hr=!1,Dt=0;Dt<Qe.length;Dt++)if(Qe[Dt].arc)for(var vt=Qe[Dt].abs,Kt=0;Kt<vt.length;Kt++){var rr=vt[Kt];rr.type==="arc"?K.call(this,rr.x,rr.y,rr.radius,rr.startAngle,rr.endAngle,rr.counterclockwise,void 0,le,!hr):Ie.call(this,rr.x,rr.y),hr=!0}else if(Qe[Dt].close===!0)this.pdf.internal.out("h"),hr=!1;else if(Qe[Dt].begin!==!0){var nr=Qe[Dt].start.x,Nr=Qe[Dt].start.y;be.call(this,Qe[Dt].deltas,nr,Nr),hr=!0}fe&&de.call(this,fe),le&&we.call(this)}},se=function(ie){var le=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,pe=le*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-pe;case"top":return ie+le-pe;case"hanging":return ie+le-2*pe;case"middle":return ie+le/2-pe;case"ideographic":return ie;case"alphabetic":default:return ie}},oe=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};C.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(le,pe){this.colorStops.push([le,pe])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},C.prototype.createPattern=function(){return this.createLinearGradient()},C.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(ie,le,pe,fe,Qe,Ke,et,tt,bt){for(var De=Fe.call(this,pe,fe,Qe,Ke),Mt=0;Mt<De.length;Mt++){var ir=De[Mt];Mt===0&&(bt?J.call(this,ir.x1+ie,ir.y1+le):Ie.call(this,ir.x1+ie,ir.y1+le)),He.call(this,ie,le,ir.x2,ir.y2,ir.x3,ir.y3,ir.x4,ir.y4)}tt?we.call(this):de.call(this,et)},de=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},we=function(){this.pdf.clip(),this.pdf.discardPath()},J=function(ie,le){this.pdf.internal.out(r(ie)+" "+n(le)+" m")},Z=function(ie){var le;switch(ie.align){case"right":case"end":le="right";break;case"center":le="center";break;case"left":case"start":default:le="left"}var pe=this.pdf.getTextDimensions(ie.text),fe=se.call(this,ie.y),Qe=oe.call(this,fe)-pe.h,Ke=this.ctx.transform.applyToPoint(new c(ie.x,fe)),et=this.ctx.transform.decompose(),tt=new i;tt=(tt=(tt=tt.multiply(et.translate)).multiply(et.skew)).multiply(et.scale);for(var bt,De,Mt,ir=this.ctx.transform.applyToRectangle(new u(ie.x,fe,pe.w,pe.h)),Ar=tt.applyToRectangle(new u(ie.x,Qe,pe.w,pe.h)),Ze=D.call(this,Ar),Ue=[],hr=0;hr<Ze.length;hr+=1)Ue.indexOf(Ze[hr])===-1&&Ue.push(Ze[hr]);if(V(Ue),this.autoPaging)for(var Dt=Ue[0],vt=Ue[Ue.length-1],Kt=Dt;Kt<vt+1;Kt++){this.pdf.setPage(Kt);var rr=Kt===1?this.posY+this.margin[0]:this.margin[0],nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nr=this.pdf.internal.pageSize.height-this.margin[2],on=Nr-this.margin[0],Ir=this.pdf.internal.pageSize.width-this.margin[1],cn=Ir-this.margin[3],Sn=Kt===1?0:nr+(Kt-2)*on;if(this.ctx.clip_path.length!==0){var Ln=this.path;bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(bt,this.posX+this.margin[3],-1*Sn+rr),te.call(this,"fill",!0),this.path=Ln}var ln=R([JSON.parse(JSON.stringify(Ar))],this.posX+this.margin[3],-Sn+rr+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*ie.scale),Mt=this.lineWidth,this.lineWidth=Mt*ie.scale);var ar=this.autoPaging!=="text";if(ar||ln.y+ln.h<=Nr){if(ar||ln.y>=rr&&ln.x<=Ir){var Yt=ar?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||Ir-ln.x)[0],Gr=R([JSON.parse(JSON.stringify(ir))],this.posX+this.margin[3],-Sn+rr+this.ctx.prevPageLastElemOffset)[0],Wr=ar&&(Kt>Dt||Kt<vt)&&j.call(this);Wr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,on,null).clip().discardPath()),this.pdf.text(Yt,Gr.x,Gr.y,{angle:ie.angle,align:le,renderingMode:ie.renderingMode}),Wr&&this.pdf.restoreGraphicsState()}}else ln.y<Nr&&(this.ctx.prevPageLastElemOffset+=Nr-ln.y);ie.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Mt)}else ie.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*ie.scale),Mt=this.lineWidth,this.lineWidth=Mt*ie.scale),this.pdf.text(ie.text,Ke.x+this.posX,Ke.y+this.posY,{angle:ie.angle,align:le,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Mt)},Ie=function(ie,le,pe,fe){pe=pe||0,fe=fe||0,this.pdf.internal.out(r(ie+pe)+" "+n(le+fe)+" l")},be=function(ie,le,pe){return this.pdf.lines(ie,le,pe,null,null)},He=function(ie,le,pe,fe,Qe,Ke,et,tt){this.pdf.internal.out([e(s(pe+ie)),e(o(fe+le)),e(s(Qe+ie)),e(o(Ke+le)),e(s(et+ie)),e(o(tt+le)),"c"].join(" "))},Fe=function(ie,le,pe,fe){for(var Qe=2*Math.PI,Ke=Math.PI/2;le>pe;)le-=Qe;var et=Math.abs(pe-le);et<Qe&&fe&&(et=Qe-et);for(var tt=[],bt=fe?-1:1,De=le;et>1e-5;){var Mt=De+bt*Math.min(et,Ke);tt.push(ve.call(this,ie,De,Mt)),et-=Math.abs(Mt-De),De=Mt}return tt},ve=function(ie,le,pe){var fe=(pe-le)/2,Qe=ie*Math.cos(fe),Ke=ie*Math.sin(fe),et=Qe,tt=-Ke,bt=et*et+tt*tt,De=bt+et*Qe+tt*Ke,Mt=4/3*(Math.sqrt(2*bt*De)-De)/(et*Ke-tt*Qe),ir=et-Mt*tt,Ar=tt+Mt*et,Ze=ir,Ue=-Ar,hr=fe+le,Dt=Math.cos(hr),vt=Math.sin(hr);return{x1:ie*Math.cos(le),y1:ie*Math.sin(le),x2:ir*Dt-Ar*vt,y2:ir*vt+Ar*Dt,x3:Ze*Dt-Ue*vt,y3:Ze*vt+Ue*Dt,x4:ie*Math.cos(pe),y4:ie*Math.sin(pe)}},_e=function(ie){return 180*ie/Math.PI},ze=function(ie,le,pe,fe,Qe,Ke){var et=ie+.5*(pe-ie),tt=le+.5*(fe-le),bt=Qe+.5*(pe-Qe),De=Ke+.5*(fe-Ke),Mt=Math.min(ie,Qe,et,bt),ir=Math.max(ie,Qe,et,bt),Ar=Math.min(le,Ke,tt,De),Ze=Math.max(le,Ke,tt,De);return new u(Mt,Ar,ir-Mt,Ze-Ar)},Ne=function(ie,le,pe,fe,Qe,Ke,et,tt){var bt,De,Mt,ir,Ar,Ze,Ue,hr,Dt,vt,Kt,rr,nr,Nr,on=pe-ie,Ir=fe-le,cn=Qe-pe,Sn=Ke-fe,Ln=et-Qe,ln=tt-Ke;for(De=0;De<41;De++)Dt=(Ue=(Mt=ie+(bt=De/40)*on)+bt*((Ar=pe+bt*cn)-Mt))+bt*(Ar+bt*(Qe+bt*Ln-Ar)-Ue),vt=(hr=(ir=le+bt*Ir)+bt*((Ze=fe+bt*Sn)-ir))+bt*(Ze+bt*(Ke+bt*ln-Ze)-hr),De==0?(Kt=Dt,rr=vt,nr=Dt,Nr=vt):(Kt=Math.min(Kt,Dt),rr=Math.min(rr,vt),nr=Math.max(nr,Dt),Nr=Math.max(Nr,vt));return new u(Math.round(Kt),Math.round(rr),Math.round(nr-Kt),Math.round(Nr-rr))},st=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,le,pe=(ie=this.ctx.lineDash,le=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:le}));this.prevLineDash!==pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=pe)}}})(is.API),function(t){var e=function(o){var c,u,i,m,g,C,B,S,P,j;for(u=[],i=0,m=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;m>i;i+=4)(g=(o.charCodeAt(i)<<24)+(o.charCodeAt(i+1)<<16)+(o.charCodeAt(i+2)<<8)+o.charCodeAt(i+3))!==0?(C=(g=((g=((g=((g=(g-(j=g%85))/85)-(P=g%85))/85)-(S=g%85))/85)-(B=g%85))/85)%85,u.push(C+33,B+33,S+33,P+33,j+33)):u.push(122);return function(D,F){for(var R=F;R>0;R--)D.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var c,u,i,m,g,C=String,B="length",S=255,P="charCodeAt",j="slice",D="replace";for(o[j](-2),o=o[j](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),i=[],m=0,g=(o+=c="uuuuu"[j](o[B]%5||5))[B];g>m;m+=5)u=52200625*(o[P](m)-33)+614125*(o[P](m+1)-33)+7225*(o[P](m+2)-33)+85*(o[P](m+3)-33)+(o[P](m+4)-33),i.push(S&u>>24,S&u>>16,S&u>>8,S&u);return function(F,R){for(var V=R;V>0;V--)F.pop()}(i,c[B]),C.fromCharCode.apply(C,i)},n=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",i=0;i<o.length;i+=2)u+=String.fromCharCode("0x"+(o[i]+o[i+1]));return u},s=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return o=(c=sL(c)).reduce(function(i,m){return i+String.fromCharCode(m)},"")};t.processDataByFilters=function(o,c){var u=0,i=o||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":i=r(i),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=e(i),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=n(i),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=i.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=s(i),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:i,reverseChain:m.reverse().join(" ")}}}(is.API),function(t){t.loadFile=function(e,r,n){return function(s,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=function(i,m,g){var C=new XMLHttpRequest,B=0,S=function(P){var j=P.length,D=[],F=String.fromCharCode;for(B=0;B<j;B+=1)D.push(F(255&P.charCodeAt(B)));return D.join("")};if(C.open("GET",i,!m),C.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(C.onload=function(){C.status===200?g(S(this.responseText)):g(void 0)}),C.send(null),m&&C.status===200)return S(C.responseText)}(s,o,c)}catch{}return u}(e,r,n)},t.loadImageFile=t.loadFile}(is.API),function(t){function e(){return(ls.html2canvas?Promise.resolve(ls.html2canvas):w1(()=>Promise.resolve().then(()=>MF),void 0)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(ls.DOMPurify?Promise.resolve(ls.DOMPurify):w1(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=ba(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(c,u){var i=document.createElement(c);for(var m in u.className&&(i.className=u.className),u.innerHTML&&u.dompurify&&(i.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)i.style[m]=u.style[m];return i},o=function c(u){var i=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),i);return m=(m=m.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(i){switch(n(i)){case"string":return"string";case"element":return i.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(i){return this.set({src:s("div",{innerHTML:c,dompurify:i})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function i(m,g){for(var C=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),B=m.firstChild;B;B=B.nextSibling)g!==!0&&B.nodeType===1&&B.nodeName==="SCRIPT"||C.appendChild(i(B,g));return m.nodeType===1&&(m.nodeName==="CANVAS"?(C.width=m.width,C.height=m.height,C.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(C.value=m.value),C.addEventListener("load",function(){C.scrollTop=m.scrollTop,C.scrollLeft=m.scrollLeft},!0)),C}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=Object.assign({},this.opt.html2canvas);return delete i.onrendered,u(this.prop.container,i)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=this.opt.jsPDF,m=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,i.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,i.context2d.posX=this.opt.x,i.context2d.posY=this.opt.y,i.context2d.margin=this.opt.margin,i.context2d.fontFaces=m,m)for(var B=0;B<m.length;++B){var S=m[B],P=S.src.find(function(j){return j.format==="truetype"});P&&i.addFont(P.url,S.ref.name,S.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,i.context2d.save(!0),u(this.prop.container,C)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,i){return(i=i||"pdf").toLowerCase()==="img"||i.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(i){if(i in o.template.prop)return function(){this.prop[i]=c[i]};switch(i){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[i]=c[i]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var i=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(i):i})},o.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(i,m){return Math.floor(i*m/72*96)}return this.then(function(){(c=c||is.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,i,m){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),i!=null&&(this.progress.n=i),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,i,m){return this.setProgress(c?this.progress.val+c:null,u||null,i?this.progress.n+i:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(c,u){var i=this;return this.thenCore(c,u,function(m,g){return i.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(C){return i.updateProgress(null,m),C}).then(m,g).then(function(C){return i.updateProgress(1),C})})},o.prototype.thenCore=function(c,u,i){i=i||Promise.prototype.then,c&&(c=c.bind(this)),u&&(u=u.bind(this));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),g=i.call(m,c,u);return o.convert(g,this.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(i){u=u.thenCore(i)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,is.getPageSize=function(c,u,i){if(ba(c)==="object"){var m=c;c=m.orientation,u=m.unit||u,i=m.format||i}u=u||"mm",i=i||"a4",c=(""+(c||"P")).toLowerCase();var g,C=(""+i).toLowerCase(),B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var S,P=0,j=0;if(B.hasOwnProperty(C))P=B[C][1]/g,j=B[C][0]/g;else try{P=i[1],j=i[0]}catch{throw new Error("Invalid format: "+i)}if(c==="p"||c==="portrait")c="p",j>P&&(S=j,j=P,P=S);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",P>j&&(S=j,j=P,P=S)}return{width:j,height:P,unit:u,k:g,orientation:c}},t.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(dL):null;var i=new o(u);return u.worker?i:i.from(c).doCallback()}}(is.API),is.API.addJS=function(t){return eU=t,this.internal.events.subscribe("postPutResources",function(){A2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(A2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),J7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+eU+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){A2!==void 0&&J7!==void 0&&this.internal.out("/Names <</JavaScript "+A2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),o=0;o<s.length;o++){var c=s[o],u=n.exec(c);if(u!=null){var i=u[1];r.internal.newObjectDeferredBegin(i,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,g=[];for(o=0;o<m;o++){var C=r.internal.newObject();g.push(C);var B=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+B.objId+" 0 R /XYZ null null null]>> endobj")}var S=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<g.length;o++)r.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+S+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,o){var c={title:s,options:o,children:[]};return n==null&&(n=this.root),n.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var c=n.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var i=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var m=0;m<n.children.length;m++)this.renderItems(n.children[m])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var o=0;o<s.children.length;o++)n.count++,this.count_r(n,s.children[o]);return n.count}}])}(is.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,o,c,u){var i,m=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(i=function(C){for(var B,S=256*C.charCodeAt(4)+C.charCodeAt(5),P=C.length,j={width:0,height:0,numcomponents:1},D=4;D<P;D+=2){if(D+=S,e.indexOf(C.charCodeAt(D+1))!==-1){B=256*C.charCodeAt(D+5)+C.charCodeAt(D+6),j={width:256*C.charCodeAt(D+7)+C.charCodeAt(D+8),height:B,numcomponents:C.charCodeAt(D+9)};break}S=256*C.charCodeAt(D+2)+C.charCodeAt(D+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:r,width:i.width,height:i.height,colorSpace:u,bitsPerComponent:8,filter:m,index:n,alias:s}}return g}}(is.API);var ay,m2,tU,rU,nU,Ixe=function(){var t,e,r;function n(o){var c,u,i,m,g,C,B,S,P,j,D,F,R,V;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C=null;;){switch(c=this.readUInt32(),P=(function(){var Y,te;for(te=[],Y=0;Y<4;++Y)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":C&&this.animation.frames.push(C),this.pos+=4,C={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),m=this.readUInt16()||100,C.delay=1e3*g/m,C.disposeOp=this.data[this.pos++],C.blendOp=this.data[this.pos++],C.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,c-=4),o=(C!=null?C.data:void 0)||this.imgData,F=0;0<=c?F<c:F>c;0<=c?++F:--F)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((j=i-this.transparency.indexed.length)>0)for(R=0;0<=j?R<j:R>j;0<=j?++R:--R)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":B=(D=this.read(c)).indexOf(0),S=String.fromCharCode.apply(String,D.slice(0,B)),this.text[S]=String.fromCharCode.apply(String,D.slice(B+1));break;case"IEND":return C&&this.animation.frames.push(C),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var c,u;for(u=[],c=0;0<=o?c<o:c>o;0<=o?++c:--c)u.push(this.data[this.pos++]);return u},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var c=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*c),i=0,m=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function g(C,B,S,P){var j,D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne=Math.ceil((m.width-C)/S),st=Math.ceil((m.height-B)/P),ie=m.width==Ne&&m.height==st;for(Z=c*Ne,we=ie?u:new Uint8Array(Z*st),Y=o.length,J=0,D=0;J<st&&i<Y;){switch(o[i++]){case 0:for(R=He=0;He<Z;R=He+=1)we[D++]=o[i++];break;case 1:for(R=Fe=0;Fe<Z;R=Fe+=1)j=o[i++],V=R<c?0:we[D-c],we[D++]=(j+V)%256;break;case 2:for(R=ve=0;ve<Z;R=ve+=1)j=o[i++],F=(R-R%c)/c,Ie=J&&we[(J-1)*Z+F*c+R%c],we[D++]=(Ie+j)%256;break;case 3:for(R=_e=0;_e<Z;R=_e+=1)j=o[i++],F=(R-R%c)/c,V=R<c?0:we[D-c],Ie=J&&we[(J-1)*Z+F*c+R%c],we[D++]=(j+Math.floor((V+Ie)/2))%256;break;case 4:for(R=ze=0;ze<Z;R=ze+=1)j=o[i++],F=(R-R%c)/c,V=R<c?0:we[D-c],J===0?Ie=be=0:(Ie=we[(J-1)*Z+F*c+R%c],be=F&&we[(J-1)*Z+(F-1)*c+R%c]),te=V+Ie-be,se=Math.abs(te-V),K=Math.abs(te-Ie),de=Math.abs(te-be),oe=se<=K&&se<=de?V:K<=de?Ie:be,we[D++]=(j+oe)%256;break;default:throw new Error("Invalid filter algorithm: "+o[i-1])}if(!ie){var le=((B+J*P)*m.width+C)*c,pe=J*Z;for(R=0;R<Ne;R+=1){for(var fe=0;fe<c;fe+=1)u[le++]=we[pe++];le+=(S-1)*c}}J++}}return o=axe(o),m.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},n.prototype.decodePalette=function(){var o,c,u,i,m,g,C,B,S;for(u=this.palette,g=this.transparency.indexed||[],m=new Uint8Array((g.length||0)+u.length),i=0,o=0,c=C=0,B=u.length;C<B;c=C+=3)m[i++]=u[c],m[i++]=u[c+1],m[i++]=u[c+2],m[i++]=(S=g[o++])!=null?S:255;return m},n.prototype.copyToImageData=function(o,c){var u,i,m,g,C,B,S,P,j,D,F;if(i=this.colors,j=null,u=this.hasAlphaChannel,this.palette.length&&(j=(F=this._decodedPalette)!=null?F:this._decodedPalette=this.decodePalette(),i=4,u=!0),P=(m=o.data||o).length,C=j||c,g=B=0,i===1)for(;g<P;)S=j?4*c[g/4]:B,D=C[S++],m[g++]=D,m[g++]=D,m[g++]=D,m[g++]=u?C[S++]:255,B=S;else for(;g<P;)S=j?4*c[g/4]:B,m[g++]=C[S++],m[g++]=C[S++],m[g++]=C[S++],m[g++]=u?C[S++]:255,B=S},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var s=function(){if(Object.prototype.toString.call(ls)==="[object Window]"){try{e=ls.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(o){var c;if(s()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var c,u,i,m,g,C,B,S;if(this.animation){for(S=[],u=g=0,C=(B=this.animation.frames).length;g<C;u=++g)c=B[u],i=o.createImageData(c.width,c.height),m=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(i,m),c.imageData=i,S.push(c.image=t(i));return S}},n.prototype.renderFrame=function(o,c){var u,i,m;return u=(i=this.animation.frames)[c],m=i[c-1],c===0&&o.clearRect(0,0,this.width,this.height),(m!=null?m.disposeOp:void 0)===1?o.clearRect(m.xOffset,m.yOffset,m.width,m.height):(m!=null?m.disposeOp:void 0)===2&&o.putImageData(m.imageData,m.xOffset,m.yOffset),u.blendOp===0&&o.clearRect(u.xOffset,u.yOffset,u.width,u.height),o.drawImage(u.image,u.xOffset,u.yOffset)},n.prototype.animate=function(o){var c,u,i,m,g,C,B=this;return u=0,C=this.animation,m=C.numFrames,i=C.frames,g=C.numPlays,(c=function(){var S,P;if(S=u++%m,P=i[S],B.renderFrame(o,S),m>1&&u/m<g)return B.animation._timeout=setTimeout(c,P.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var c,u;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,c=o.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Nxe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],o=s>>7,c=1<<(7&s)+1;t[e++],t[e++];var u=null,i=null;o&&(u=e,i=c,e+=3*c);var m=!0,g=[],C=0,B=null,S=0,P=null;for(this.width=r,this.height=n;m&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,P=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[e++];C=t[e++]|t[e++]<<8,B=t[e++],!(1&j)&&(B=null),S=j>>2&7,e++;break;case 254:for(;;){if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var D=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,V=t[e++]|t[e++]<<8,Y=t[e++],te=Y>>6&1,se=1<<(7&Y)+1,oe=u,K=i,de=!1;Y>>7&&(de=!0,oe=e,K=se,e+=3*se);var we=e;for(e++;;){var J;if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}g.push({x:D,y:F,width:R,height:V,has_local_palette:de,palette_offset:oe,palette_size:K,data_offset:we,data_length:e-we,transparent_index:B,interlaced:!!te,delay:C,disposal:S});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return P},this.frameInfo=function(Z){if(Z<0||Z>=g.length)throw new Error("Frame index out of range.");return g[Z]},this.decodeAndBlitFrameBGRA=function(Z,Ie){var be=this.frameInfo(Z),He=be.width*be.height,Fe=new Uint8Array(He);iU(t,be.data_offset,Fe,He);var ve=be.palette_offset,_e=be.transparent_index;_e===null&&(_e=256);var ze=be.width,Ne=r-ze,st=ze,ie=4*(be.y*r+be.x),le=4*((be.y+be.height)*r+be.x),pe=ie,fe=4*Ne;be.interlaced===!0&&(fe+=4*r*7);for(var Qe=8,Ke=0,et=Fe.length;Ke<et;++Ke){var tt=Fe[Ke];if(st===0&&(st=ze,(pe+=fe)>=le&&(fe=4*Ne+4*r*(Qe-1),pe=ie+(ze+Ne)*(Qe<<1),Qe>>=1)),tt===_e)pe+=4;else{var bt=t[ve+3*tt],De=t[ve+3*tt+1],Mt=t[ve+3*tt+2];Ie[pe++]=Mt,Ie[pe++]=De,Ie[pe++]=bt,Ie[pe++]=255}--st}},this.decodeAndBlitFrameRGBA=function(Z,Ie){var be=this.frameInfo(Z),He=be.width*be.height,Fe=new Uint8Array(He);iU(t,be.data_offset,Fe,He);var ve=be.palette_offset,_e=be.transparent_index;_e===null&&(_e=256);var ze=be.width,Ne=r-ze,st=ze,ie=4*(be.y*r+be.x),le=4*((be.y+be.height)*r+be.x),pe=ie,fe=4*Ne;be.interlaced===!0&&(fe+=4*r*7);for(var Qe=8,Ke=0,et=Fe.length;Ke<et;++Ke){var tt=Fe[Ke];if(st===0&&(st=ze,(pe+=fe)>=le&&(fe=4*Ne+4*r*(Qe-1),pe=ie+(ze+Ne)*(Qe<<1),Qe>>=1)),tt===_e)pe+=4;else{var bt=t[ve+3*tt],De=t[ve+3*tt+1],Mt=t[ve+3*tt+2];Ie[pe++]=bt,Ie[pe++]=De,Ie[pe++]=Mt,Ie[pe++]=255}--st}}}function iU(t,e,r,n){for(var s=t[e++],o=1<<s,c=o+1,u=c+1,i=s+1,m=(1<<i)-1,g=0,C=0,B=0,S=t[e++],P=new Int32Array(4096),j=null;;){for(;g<16&&S!==0;)C|=t[e++]<<g,g+=8,S===1?S=t[e++]:--S;if(g<i)break;var D=C&m;if(C>>=i,g-=i,D!==o){if(D===c)break;for(var F=D<u?D:j,R=0,V=F;V>o;)V=P[V]>>8,++R;var Y=V;if(B+R+(F!==D?1:0)>n)return void Ra.log("Warning, gif stream longer than expected.");r[B++]=Y;var te=B+=R;for(F!==D&&(r[B++]=Y),V=F;R--;)V=P[V],r[--te]=255&V,V>>=8;j!==null&&u<4096&&(P[u++]=j<<8|Y,u>=m+1&&i<12&&(++i,m=m<<1|1)),j=D}else u=c+1,m=(1<<(i=s+1))-1,j=null}return B!==n&&Ra.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function E3(t){var e,r,n,s,o,c=Math.floor,u=new Array(64),i=new Array(64),m=new Array(64),g=new Array(64),C=new Array(65535),B=new Array(65535),S=new Array(64),P=new Array(64),j=[],D=0,F=7,R=new Array(64),V=new Array(64),Y=new Array(64),te=new Array(256),se=new Array(2048),oe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],de=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],J=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ie=[0,1,2,3,4,5,6,7,8,9,10,11],be=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],He=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Fe(ie,le){for(var pe=0,fe=0,Qe=new Array,Ke=1;Ke<=16;Ke++){for(var et=1;et<=ie[Ke];et++)Qe[le[fe]]=[],Qe[le[fe]][0]=pe,Qe[le[fe]][1]=Ke,fe++,pe++;pe*=2}return Qe}function ve(ie){for(var le=ie[0],pe=ie[1]-1;pe>=0;)le&1<<pe&&(D|=1<<F),pe--,--F<0&&(D==255?(_e(255),_e(0)):_e(D),F=7,D=0)}function _e(ie){j.push(ie)}function ze(ie){_e(ie>>8&255),_e(255&ie)}function Ne(ie,le,pe,fe,Qe){for(var Ke,et=Qe[0],tt=Qe[240],bt=function(vt,Kt){var rr,nr,Nr,on,Ir,cn,Sn,Ln,ln,ar,Yt=0;for(ln=0;ln<8;++ln){rr=vt[Yt],nr=vt[Yt+1],Nr=vt[Yt+2],on=vt[Yt+3],Ir=vt[Yt+4],cn=vt[Yt+5],Sn=vt[Yt+6];var Gr=rr+(Ln=vt[Yt+7]),Wr=rr-Ln,On=nr+Sn,mn=nr-Sn,Hn=Nr+cn,Vi=Nr-cn,Bn=on+Ir,jn=on-Ir,Dn=Gr+Bn,Gi=Gr-Bn,Rn=On+Hn,Zr=On-Hn;vt[Yt]=Dn+Rn,vt[Yt+4]=Dn-Rn;var Pr=.707106781*(Zr+Gi);vt[Yt+2]=Gi+Pr,vt[Yt+6]=Gi-Pr;var un=.382683433*((Dn=jn+Vi)-(Zr=mn+Wr)),Ii=.5411961*Dn+un,ri=1.306562965*Zr+un,ur=.707106781*(Rn=Vi+mn),We=Wr+ur,qe=Wr-ur;vt[Yt+5]=qe+Ii,vt[Yt+3]=qe-Ii,vt[Yt+1]=We+ri,vt[Yt+7]=We-ri,Yt+=8}for(Yt=0,ln=0;ln<8;++ln){rr=vt[Yt],nr=vt[Yt+8],Nr=vt[Yt+16],on=vt[Yt+24],Ir=vt[Yt+32],cn=vt[Yt+40],Sn=vt[Yt+48];var pt=rr+(Ln=vt[Yt+56]),Lt=rr-Ln,Ct=nr+Sn,kt=nr-Sn,Wt=Nr+cn,Rt=Nr-cn,fr=on+Ir,xr=on-Ir,pr=pt+fr,Lr=pt-fr,rn=Ct+Wt,sn=Ct-Wt;vt[Yt]=pr+rn,vt[Yt+32]=pr-rn;var _n=.707106781*(sn+Lr);vt[Yt+16]=Lr+_n,vt[Yt+48]=Lr-_n;var Un=.382683433*((pr=xr+Rt)-(sn=kt+Lt)),qn=.5411961*pr+Un,Wn=1.306562965*sn+Un,Pi=.707106781*(rn=Rt+kt),$i=Lt+Pi,Kn=Lt-Pi;vt[Yt+40]=Kn+qn,vt[Yt+24]=Kn-qn,vt[Yt+8]=$i+Wn,vt[Yt+56]=$i-Wn,Yt++}for(ln=0;ln<64;++ln)ar=vt[ln]*Kt[ln],S[ln]=ar>0?ar+.5|0:ar-.5|0;return S}(ie,le),De=0;De<64;++De)P[oe[De]]=bt[De];var Mt=P[0]-pe;pe=P[0],Mt==0?ve(fe[0]):(ve(fe[B[Ke=32767+Mt]]),ve(C[Ke]));for(var ir=63;ir>0&&P[ir]==0;)ir--;if(ir==0)return ve(et),pe;for(var Ar,Ze=1;Ze<=ir;){for(var Ue=Ze;P[Ze]==0&&Ze<=ir;)++Ze;var hr=Ze-Ue;if(hr>=16){Ar=hr>>4;for(var Dt=1;Dt<=Ar;++Dt)ve(tt);hr&=15}Ke=32767+P[Ze],ve(Qe[(hr<<4)+B[Ke]]),ve(C[Ke]),Ze++}return ir!=63&&ve(et),pe}function st(ie){ie=Math.min(Math.max(ie,1),100),o!=ie&&(function(le){for(var pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var Qe=c((pe[fe]*le+50)/100);Qe=Math.min(Math.max(Qe,1),255),u[oe[fe]]=Qe}for(var Ke=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],et=0;et<64;et++){var tt=c((Ke[et]*le+50)/100);tt=Math.min(Math.max(tt,1),255),i[oe[et]]=tt}for(var bt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,Mt=0;Mt<8;Mt++)for(var ir=0;ir<8;ir++)m[De]=1/(u[oe[De]]*bt[Mt]*bt[ir]*8),g[De]=1/(i[oe[De]]*bt[Mt]*bt[ir]*8),De++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),o=ie)}this.encode=function(ie,le){le&&st(le),j=new Array,D=0,F=7,ze(65496),ze(65504),ze(16),_e(74),_e(70),_e(73),_e(70),_e(0),_e(1),_e(1),_e(0),ze(1),ze(1),_e(0),_e(0),function(){ze(65499),ze(132),_e(0);for(var nr=0;nr<64;nr++)_e(u[nr]);_e(1);for(var Nr=0;Nr<64;Nr++)_e(i[Nr])}(),function(nr,Nr){ze(65472),ze(17),_e(8),ze(Nr),ze(nr),_e(3),_e(1),_e(17),_e(0),_e(2),_e(17),_e(1),_e(3),_e(17),_e(1)}(ie.width,ie.height),function(){ze(65476),ze(418),_e(0);for(var nr=0;nr<16;nr++)_e(K[nr+1]);for(var Nr=0;Nr<=11;Nr++)_e(de[Nr]);_e(16);for(var on=0;on<16;on++)_e(we[on+1]);for(var Ir=0;Ir<=161;Ir++)_e(J[Ir]);_e(1);for(var cn=0;cn<16;cn++)_e(Z[cn+1]);for(var Sn=0;Sn<=11;Sn++)_e(Ie[Sn]);_e(17);for(var Ln=0;Ln<16;Ln++)_e(be[Ln+1]);for(var ln=0;ln<=161;ln++)_e(He[ln])}(),ze(65498),ze(12),_e(3),_e(1),_e(0),_e(2),_e(17),_e(3),_e(17),_e(0),_e(63),_e(0);var pe=0,fe=0,Qe=0;D=0,F=7,this.encode.displayName="_encode_";for(var Ke,et,tt,bt,De,Mt,ir,Ar,Ze,Ue=ie.data,hr=ie.width,Dt=ie.height,vt=4*hr,Kt=0;Kt<Dt;){for(Ke=0;Ke<vt;){for(De=vt*Kt+Ke,ir=-1,Ar=0,Ze=0;Ze<64;Ze++)Mt=De+(Ar=Ze>>3)*vt+(ir=4*(7&Ze)),Kt+Ar>=Dt&&(Mt-=vt*(Kt+1+Ar-Dt)),Ke+ir>=vt&&(Mt-=Ke+ir-vt+4),et=Ue[Mt++],tt=Ue[Mt++],bt=Ue[Mt++],R[Ze]=(se[et]+se[tt+256>>0]+se[bt+512>>0]>>16)-128,V[Ze]=(se[et+768>>0]+se[tt+1024>>0]+se[bt+1280>>0]>>16)-128,Y[Ze]=(se[et+1280>>0]+se[tt+1536>>0]+se[bt+1792>>0]>>16)-128;pe=Ne(R,m,pe,e,n),fe=Ne(V,g,fe,r,s),Qe=Ne(Y,g,Qe,r,s),Ke+=32}Kt+=8}if(F>=0){var rr=[];rr[1]=F+1,rr[0]=(1<<F+1)-1,ve(rr)}return ze(65497),new Uint8Array(j)},t=t||50,function(){for(var ie=String.fromCharCode,le=0;le<256;le++)te[le]=ie(le)}(),e=Fe(K,de),r=Fe(Z,Ie),n=Fe(we,J),s=Fe(be,He),function(){for(var ie=1,le=2,pe=1;pe<=15;pe++){for(var fe=ie;fe<le;fe++)B[32767+fe]=pe,C[32767+fe]=[],C[32767+fe][1]=pe,C[32767+fe][0]=fe;for(var Qe=-(le-1);Qe<=-ie;Qe++)B[32767+Qe]=pe,C[32767+Qe]=[],C[32767+Qe][1]=pe,C[32767+Qe][0]=le-1+Qe;ie<<=1,le<<=1}}(),function(){for(var ie=0;ie<256;ie++)se[ie]=19595*ie,se[ie+256>>0]=38470*ie,se[ie+512>>0]=7471*ie+32768,se[ie+768>>0]=-11059*ie,se[ie+1024>>0]=-21709*ie,se[ie+1280>>0]=32768*ie+8421375,se[ie+1536>>0]=-27439*ie,se[ie+1792>>0]=-5329*ie}(),st(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wf(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function sU(t){function e(K){if(!K)throw Error("assert :P")}function r(K,de,we){for(var J=0;4>J;J++)if(K[de+J]!=we.charCodeAt(J))return!0;return!1}function n(K,de,we,J,Z){for(var Ie=0;Ie<Z;Ie++)K[de+Ie]=we[J+Ie]}function s(K,de,we,J){for(var Z=0;Z<J;Z++)K[de+Z]=we}function o(K){return new Int32Array(K)}function c(K,de){for(var we=[],J=0;J<K;J++)we.push(new de);return we}function u(K,de){var we=[];return function J(Z,Ie,be){for(var He=be[Ie],Fe=0;Fe<He&&(Z.push(be.length>Ie+1?[]:new de),!(be.length<Ie+1));Fe++)J(Z[Fe],Ie+1,be)}(we,0,K),we}var i=function(){var K=this;function de(w,I){for(var $=1<<I-1>>>0;w&$;)$>>>=1;return $?(w&$-1)+$:w}function we(w,I,$,ee,ge){e(!(ee%$));do w[I+(ee-=$)]=ge;while(0<ee)}function J(w,I,$,ee,ge){if(e(2328>=ge),512>=ge)var Se=o(512);else if((Se=o(ge))==null)return 0;return function(Le,Pe,Me,je,lt,It){var Bt,xt,Ft=Pe,Qt=1<<Me,ct=o(16),mt=o(16);for(e(lt!=0),e(je!=null),e(Le!=null),e(0<Me),xt=0;xt<lt;++xt){if(15<je[xt])return 0;++ct[je[xt]]}if(ct[0]==lt)return 0;for(mt[1]=0,Bt=1;15>Bt;++Bt){if(ct[Bt]>1<<Bt)return 0;mt[Bt+1]=mt[Bt]+ct[Bt]}for(xt=0;xt<lt;++xt)Bt=je[xt],0<je[xt]&&(It[mt[Bt]++]=xt);if(mt[15]==1)return(je=new Z).g=0,je.value=It[0],we(Le,Ft,1,Qt,je),Qt;var lr,mr=-1,dr=Qt-1,Xr=0,Or=1,bn=1,zr=1<<Me;for(xt=0,Bt=1,lt=2;Bt<=Me;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt])(je=new Z).g=Bt,je.value=It[xt++],we(Le,Ft+Xr,lt,zr,je),Xr=de(Xr,Bt)}for(Bt=Me+1,lt=2;15>=Bt;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt]){if(je=new Z,(Xr&dr)!=mr){for(Ft+=zr,lr=1<<(mr=Bt)-Me;15>mr&&!(0>=(lr-=ct[mr]));)++mr,lr<<=1;Qt+=zr=1<<(lr=mr-Me),Le[Pe+(mr=Xr&dr)].g=lr+Me,Le[Pe+mr].value=Ft-Pe-mr}je.g=Bt-Me,je.value=It[xt++],we(Le,Ft+(Xr>>Me),lt,zr,je),Xr=de(Xr,Bt)}}return Or!=2*mt[15]-1?0:Qt}(w,I,$,ee,ge,Se)}function Z(){this.value=this.g=0}function Ie(){this.value=this.g=0}function be(){this.G=c(5,Z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ki,Ie)}function He(w,I,$,ee){e(w!=null),e(I!=null),e(2147483648>ee),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=I,w.pa=$,w.Jd=I,w.Yc=$+ee,w.Zc=4<=ee?$+ee-4+1:$,Ke(w)}function Fe(w,I){for(var $=0;0<I--;)$|=tt(w,128)<<I;return $}function ve(w,I){var $=Fe(w,I);return et(w)?-$:$}function _e(w,I,$,ee){var ge,Se=0;for(e(w!=null),e(I!=null),e(4294967288>ee),w.Sb=ee,w.Ra=0,w.u=0,w.h=0,4<ee&&(ee=4),ge=0;ge<ee;++ge)Se+=I[$+ge]<<8*ge;w.Ra=Se,w.bb=ee,w.oa=I,w.pa=$}function ze(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Yr-8>>>0,++w.bb,w.u-=8;pe(w)&&(w.h=1,w.u=0)}function Ne(w,I){if(e(0<=I),!w.h&&I<=la){var $=le(w)&us[I];return w.u+=I,ze(w),$}return w.h=1,w.u=0}function st(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function le(w){return w.Ra>>>(w.u&Yr-1)>>>0}function pe(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Yr}function fe(w,I){w.u=I,w.h=pe(w)}function Qe(w){w.u>=sc&&(e(w.u>=sc),ze(w))}function Ke(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function et(w){return Fe(w,1)}function tt(w,I){var $=w.Ca;0>w.b&&Ke(w);var ee=w.b,ge=$*I>>>8,Se=(w.I>>>ee>ge)+0;for(Se?($-=ge,w.I-=ge+1<<ee>>>0):$=ge+1,ee=$,ge=0;256<=ee;)ge+=8,ee>>=8;return ee=7^ge+ws[ee],w.b-=ee,w.Ca=($<<ee)-1,Se}function bt(w,I,$){w[I+0]=$>>24&255,w[I+1]=$>>16&255,w[I+2]=$>>8&255,w[I+3]=$>>0&255}function De(w,I){return w[I+0]<<0|w[I+1]<<8}function Mt(w,I){return De(w,I)|w[I+2]<<16}function ir(w,I){return De(w,I)|De(w,I+2)<<16}function Ar(w,I){var $=1<<I;return e(w!=null),e(0<I),w.X=o($),w.X==null?0:(w.Mb=32-I,w.Xa=I,1)}function Ze(w,I){e(w!=null),e(I!=null),e(w.Xa==I.Xa),n(I.X,0,w.X,0,1<<I.Xa)}function Ue(){this.X=[],this.Xa=this.Mb=0}function hr(w,I,$,ee){e($!=null),e(ee!=null);var ge=$[0],Se=ee[0];return ge==0&&(ge=(w*Se+I/2)/I),Se==0&&(Se=(I*ge+w/2)/w),0>=ge||0>=Se?0:($[0]=ge,ee[0]=Se,1)}function Dt(w,I){return w+(1<<I)-1>>>I}function vt(w,I){return((4278255360&w)+(4278255360&I)>>>0&4278255360)+((16711935&w)+(16711935&I)>>>0&16711935)>>>0}function Kt(w,I){K[I]=function($,ee,ge,Se,Le,Pe,Me){var je;for(je=0;je<Le;++je){var lt=K[w](Pe[Me+je-1],ge,Se+je);Pe[Me+je]=vt($[ee+je],lt)}}}function rr(){this.ud=this.hd=this.jd=0}function nr(w,I){return((4278124286&(w^I))>>>1)+(w&I)>>>0}function Nr(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function on(w,I){return Nr(w+(w-I+.5>>1))}function Ir(w,I,$){return Math.abs(I-$)-Math.abs(w-$)}function cn(w,I,$,ee,ge,Se,Le){for(ee=Se[Le-1],$=0;$<ge;++$)Se[Le+$]=ee=vt(w[I+$],ee)}function Sn(w,I,$,ee,ge){var Se;for(Se=0;Se<$;++Se){var Le=w[I+Se],Pe=Le>>8&255,Me=16711935&(Me=(Me=16711935&Le)+((Pe<<16)+Pe));ee[ge+Se]=(4278255360&Le)+Me>>>0}}function Ln(w,I){I.jd=w>>0&255,I.hd=w>>8&255,I.ud=w>>16&255}function ln(w,I,$,ee,ge,Se){var Le;for(Le=0;Le<ee;++Le){var Pe=I[$+Le],Me=Pe>>>8,je=Pe,lt=255&(lt=(lt=Pe>>>16)+((w.jd<<24>>24)*(Me<<24>>24)>>>5));je=255&(je=(je=je+((w.hd<<24>>24)*(Me<<24>>24)>>>5))+((w.ud<<24>>24)*(lt<<24>>24)>>>5)),ge[Se+Le]=(4278255360&Pe)+(lt<<16)+je}}function ar(w,I,$,ee,ge){K[I]=function(Se,Le,Pe,Me,je,lt,It,Bt,xt){for(Me=It;Me<Bt;++Me)for(It=0;It<xt;++It)je[lt++]=ge(Pe[ee(Se[Le++])])},K[w]=function(Se,Le,Pe,Me,je,lt,It){var Bt=8>>Se.b,xt=Se.Ea,Ft=Se.K[0],Qt=Se.w;if(8>Bt)for(Se=(1<<Se.b)-1,Qt=(1<<Bt)-1;Le<Pe;++Le){var ct,mt=0;for(ct=0;ct<xt;++ct)ct&Se||(mt=ee(Me[je++])),lt[It++]=ge(Ft[mt&Qt]),mt>>=Bt}else K["VP8LMapColor"+$](Me,je,Ft,Qt,lt,It,Le,Pe,xt)}}function Yt(w,I,$,ee,ge){for($=I+$;I<$;){var Se=w[I++];ee[ge++]=Se>>16&255,ee[ge++]=Se>>8&255,ee[ge++]=Se>>0&255}}function Gr(w,I,$,ee,ge){for($=I+$;I<$;){var Se=w[I++];ee[ge++]=Se>>16&255,ee[ge++]=Se>>8&255,ee[ge++]=Se>>0&255,ee[ge++]=Se>>24&255}}function Wr(w,I,$,ee,ge){for($=I+$;I<$;){var Se=(Le=w[I++])>>16&240|Le>>12&15,Le=Le>>0&240|Le>>28&15;ee[ge++]=Se,ee[ge++]=Le}}function On(w,I,$,ee,ge){for($=I+$;I<$;){var Se=(Le=w[I++])>>16&248|Le>>13&7,Le=Le>>5&224|Le>>3&31;ee[ge++]=Se,ee[ge++]=Le}}function mn(w,I,$,ee,ge){for($=I+$;I<$;){var Se=w[I++];ee[ge++]=Se>>0&255,ee[ge++]=Se>>8&255,ee[ge++]=Se>>16&255}}function Hn(w,I,$,ee,ge,Se){if(Se==0)for($=I+$;I<$;)bt(ee,((Se=w[I++])[0]>>24|Se[1]>>8&65280|Se[2]<<8&16711680|Se[3]<<24)>>>0),ge+=32;else n(ee,ge,w,I,$)}function Vi(w,I){K[I][0]=K[w+"0"],K[I][1]=K[w+"1"],K[I][2]=K[w+"2"],K[I][3]=K[w+"3"],K[I][4]=K[w+"4"],K[I][5]=K[w+"5"],K[I][6]=K[w+"6"],K[I][7]=K[w+"7"],K[I][8]=K[w+"8"],K[I][9]=K[w+"9"],K[I][10]=K[w+"10"],K[I][11]=K[w+"11"],K[I][12]=K[w+"12"],K[I][13]=K[w+"13"],K[I][14]=K[w+"0"],K[I][15]=K[w+"0"]}function Bn(w){return w==sd||w==Cd||w==bu||w==th}function jn(){this.eb=[],this.size=this.A=this.fb=0}function Dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Gi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jn,this.f.kb=new Dn,this.sd=null}function Rn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function un(w,I){var $=w.T,ee=I.ba.f.RGBA,ge=ee.eb,Se=ee.fb+w.ka*ee.A,Le=uo[I.ba.S],Pe=w.y,Me=w.O,je=w.f,lt=w.N,It=w.ea,Bt=w.W,xt=I.cc,Ft=I.dc,Qt=I.Mc,ct=I.Nc,mt=w.ka,lr=w.ka+w.T,mr=w.U,dr=mr+1>>1;for(mt==0?Le(Pe,Me,null,null,je,lt,It,Bt,je,lt,It,Bt,ge,Se,null,null,mr):(Le(I.ec,I.fc,Pe,Me,xt,Ft,Qt,ct,je,lt,It,Bt,ge,Se-ee.A,ge,Se,mr),++$);mt+2<lr;mt+=2)xt=je,Ft=lt,Qt=It,ct=Bt,lt+=w.Rc,Bt+=w.Rc,Se+=2*ee.A,Le(Pe,(Me+=2*w.fa)-w.fa,Pe,Me,xt,Ft,Qt,ct,je,lt,It,Bt,ge,Se-ee.A,ge,Se,mr);return Me+=w.fa,w.j+lr<w.o?(n(I.ec,I.fc,Pe,Me,mr),n(I.cc,I.dc,je,lt,dr),n(I.Mc,I.Nc,It,Bt,dr),$--):1&lr||Le(Pe,Me,null,null,je,lt,It,Bt,je,lt,It,Bt,ge,Se+ee.A,null,null,mr),$}function Ii(w,I,$){var ee=w.F,ge=[w.J];if(ee!=null){var Se=w.U,Le=I.ba.S,Pe=Le==iu||Le==bu;I=I.ba.f.RGBA;var Me=[0],je=w.ka;Me[0]=w.T,w.Kb&&(je==0?--Me[0]:(--je,ge[0]-=w.width),w.j+w.ka+w.T==w.o&&(Me[0]=w.o-w.j-je));var lt=I.eb;je=I.fb+je*I.A,w=Ji(ee,ge[0],w.width,Se,Me,lt,je+(Pe?0:3),I.A),e($==Me),w&&Bn(Le)&&to(lt,je,Pe,Se,Me,I.A)}return 0}function ri(w){var I=w.ma,$=I.ba.S,ee=11>$,ge=$==Mc||$==Sc||$==iu||$==id||$==12||Bn($);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!Ea(I.Oa,w,ge?11:12))return 0;if(ge&&Bn($)&&gr(),w.da)alert("todo:use_scaling");else{if(ee){if(I.Ib=Pr,w.Kb){if($=w.U+1>>1,I.memory=o(w.U+2*$),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+w.U,I.Mc=I.cc,I.Nc=I.dc+$,I.Ib=un,gr()}}else alert("todo:EmitYUV");ge&&(I.Jb=Ii,ee&&St())}if(ee&&!wh){for(w=0;256>w;++w)bA[w]=89858*(w-128)+Di>>Si,cg[w]=-22014*(w-128)+Di,of[w]=-45773*(w-128),wA[w]=113618*(w-128)+Di>>Si;for(w=Hs;w<Oc;++w)I=76283*(w-16)+Di>>Si,CA[w-Hs]=Js(I,255),SA[w-Hs]=Js(I+8>>4,15);wh=1}return 1}function ur(w){var I=w.ma,$=w.U,ee=w.T;return e(!(1&w.ka)),0>=$||0>=ee?0:($=I.Ib(w,I),I.Jb!=null&&I.Jb(w,I,$),I.Dc+=$,1)}function We(w){w.ma.memory=null}function qe(w,I,$,ee){return Ne(w,8)!=47?0:(I[0]=Ne(w,14)+1,$[0]=Ne(w,14)+1,ee[0]=Ne(w,1),Ne(w,3)!=0?0:!w.h)}function pt(w,I){if(4>w)return w+1;var $=w-2>>1;return(2+(1&w)<<$)+Ne(I,$)+1}function Lt(w,I){return 120<I?I-120:1<=($=(($=xh[I-1])>>4)*w+(8-(15&$)))?$:1;var $}function Ct(w,I,$){var ee=le($),ge=w[I+=255&ee].g-8;return 0<ge&&(fe($,$.u+8),ee=le($),I+=w[I].value,I+=ee&(1<<ge)-1),fe($,$.u+w[I].g),w[I].value}function kt(w,I,$){return $.g+=w.g,$.value+=w.value<<I>>>0,e(8>=$.g),w.g}function Wt(w,I,$){var ee=w.xc;return e((I=ee==0?0:w.vc[w.md*($>>ee)+(I>>ee)])<w.Wb),w.Ya[I]}function Rt(w,I,$,ee){var ge=w.ab,Se=w.c*I,Le=w.C;I=Le+I;var Pe=$,Me=ee;for(ee=w.Ta,$=w.Ua;0<ge--;){var je=w.gc[ge],lt=Le,It=I,Bt=Pe,xt=Me,Ft=(Me=ee,Pe=$,je.Ea);switch(e(lt<It),e(It<=je.nc),je.hc){case 2:ql(Bt,xt,(It-lt)*Ft,Me,Pe);break;case 0:var Qt=lt,ct=It,mt=Me,lr=Pe,mr=(zr=je).Ea;Qt==0&&(oc(Bt,xt,null,null,1,mt,lr),cn(Bt,xt+1,0,0,mr-1,mt,lr+1),xt+=mr,lr+=mr,++Qt);for(var dr=1<<zr.b,Xr=dr-1,Or=Dt(mr,zr.b),bn=zr.K,zr=zr.w+(Qt>>zr.b)*Or;Qt<ct;){var ci=bn,fi=zr,$n=1;for(yl(Bt,xt,mt,lr-mr,1,mt,lr);$n<mr;){var ti=($n&~Xr)+dr;ti>mr&&(ti=mr),(0,yr[ci[fi++]>>8&15])(Bt,xt+ +$n,mt,lr+$n-mr,ti-$n,mt,lr+$n),$n=ti}xt+=mr,lr+=mr,++Qt&Xr||(zr+=Or)}It!=je.nc&&n(Me,Pe-Ft,Me,Pe+(It-lt-1)*Ft,Ft);break;case 1:for(Ft=Bt,ct=xt,mr=(Bt=je.Ea)-(lr=Bt&~(mt=(xt=1<<je.b)-1)),Qt=Dt(Bt,je.b),dr=je.K,je=je.w+(lt>>je.b)*Qt;lt<It;){for(Xr=dr,Or=je,bn=new rr,zr=ct+lr,ci=ct+Bt;ct<zr;)Ln(Xr[Or++],bn),Mr(bn,Ft,ct,xt,Me,Pe),ct+=xt,Pe+=xt;ct<ci&&(Ln(Xr[Or++],bn),Mr(bn,Ft,ct,mr,Me,Pe),ct+=mr,Pe+=mr),++lt&mt||(je+=Qt)}break;case 3:if(Bt==Me&&xt==Pe&&0<je.b){for(ct=Me,Bt=Ft=Pe+(It-lt)*Ft-(lr=(It-lt)*Dt(je.Ea,je.b)),xt=Me,mt=Pe,Qt=[],lr=(mr=lr)-1;0<=lr;--lr)Qt[lr]=xt[mt+lr];for(lr=mr-1;0<=lr;--lr)ct[Bt+lr]=Qt[lr];ks(je,lt,It,Me,Ft,Me,Pe)}else ks(je,lt,It,Bt,xt,Me,Pe)}Pe=ee,Me=$}Me!=$&&n(ee,$,Pe,Me,Se)}function fr(w,I){var $=w.V,ee=w.Ba+w.c*w.C,ge=I-w.C;if(e(I<=w.l.o),e(16>=ge),0<ge){var Se=w.l,Le=w.Ta,Pe=w.Ua,Me=Se.width;if(Rt(w,ge,$,ee),ge=Pe=[Pe],e(($=w.C)<(ee=I)),e(Se.v<Se.va),ee>Se.o&&(ee=Se.o),$<Se.j){var je=Se.j-$;$=Se.j,ge[0]+=je*Me}if($>=ee?$=0:(ge[0]+=4*Se.v,Se.ka=$-Se.j,Se.U=Se.va-Se.v,Se.T=ee-$,$=1),$){if(Pe=Pe[0],11>($=w.ca).S){var lt=$.f.RGBA,It=(ee=$.S,ge=Se.U,Se=Se.T,je=lt.eb,lt.A),Bt=Se;for(lt=lt.fb+w.Ma*lt.A;0<Bt--;){var xt=Le,Ft=Pe,Qt=ge,ct=je,mt=lt;switch(ee){case cc:xn(xt,Ft,Qt,ct,mt);break;case Mc:kn(xt,Ft,Qt,ct,mt);break;case sd:kn(xt,Ft,Qt,ct,mt),to(ct,mt,0,Qt,1,0);break;case _u:ms(xt,Ft,Qt,ct,mt);break;case Sc:Hn(xt,Ft,Qt,ct,mt,1);break;case Cd:Hn(xt,Ft,Qt,ct,mt,1),to(ct,mt,0,Qt,1,0);break;case iu:Hn(xt,Ft,Qt,ct,mt,0);break;case bu:Hn(xt,Ft,Qt,ct,mt,0),to(ct,mt,1,Qt,1,0);break;case id:ns(xt,Ft,Qt,ct,mt);break;case th:ns(xt,Ft,Qt,ct,mt),Cs(ct,mt,Qt,1,0);break;case eh:xi(xt,Ft,Qt,ct,mt);break;default:e(0)}Pe+=Me,lt+=It}w.Ma+=Se}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=$.height)}}w.C=I,e(w.C<=w.i)}function xr(w){var I;if(0<w.ua)return 0;for(I=0;I<w.Wb;++I){var $=w.Ya[I].G,ee=w.Ya[I].H;if(0<$[1][ee[1]+0].g||0<$[2][ee[2]+0].g||0<$[3][ee[3]+0].g)return 0}return 1}function pr(w,I,$,ee,ge,Se){if(w.Z!=0){var Le=w.qd,Pe=w.rd;for(e(Ta[w.Z]!=null);I<$;++I)Ta[w.Z](Le,Pe,ee,ge,ee,ge,Se),Le=ee,Pe=ge,ge+=Se;w.qd=Le,w.rd=Pe}}function Lr(w,I){var $=w.l.ma,ee=$.Z==0||$.Z==1?w.l.j:w.C;if(ee=w.C<ee?ee:w.C,e(I<=w.l.o),I>ee){var ge=w.l.width,Se=$.ca,Le=$.tb+ge*ee,Pe=w.V,Me=w.Ba+w.c*ee,je=w.gc;e(w.ab==1),e(je[0].hc==3),Aa(je[0],ee,I,Pe,Me,Se,Le),pr($,ee,I,Se,Le,ge)}w.C=w.Ma=I}function rn(w,I,$,ee,ge,Se,Le){var Pe=w.$/ee,Me=w.$%ee,je=w.m,lt=w.s,It=$+w.$,Bt=It;ge=$+ee*ge;var xt=$+ee*Se,Ft=280+lt.ua,Qt=w.Pb?Pe:16777216,ct=0<lt.ua?lt.Wa:null,mt=lt.wc,lr=It<xt?Wt(lt,Me,Pe):null;e(w.C<Se),e(xt<=ge);var mr=!1;e:for(;;){for(;mr||It<xt;){var dr=0;if(Pe>=Qt){var Xr=It-$;e((Qt=w).Pb),Qt.wd=Qt.m,Qt.xd=Xr,0<Qt.s.ua&&Ze(Qt.s.Wa,Qt.s.vb),Qt=Pe+bh}if(Me&mt||(lr=Wt(lt,Me,Pe)),e(lr!=null),lr.Qb&&(I[It]=lr.qb,mr=!0),!mr)if(Qe(je),lr.jc){dr=je,Xr=I;var Or=It,bn=lr.pd[le(dr)&Ki-1];e(lr.jc),256>bn.g?(fe(dr,dr.u+bn.g),Xr[Or]=bn.value,dr=0):(fe(dr,dr.u+bn.g-256),e(256<=bn.value),dr=bn.value),dr==0&&(mr=!0)}else dr=Ct(lr.G[0],lr.H[0],je);if(je.h)break;if(mr||256>dr){if(!mr)if(lr.nd)I[It]=(lr.qb|dr<<8)>>>0;else{if(Qe(je),mr=Ct(lr.G[1],lr.H[1],je),Qe(je),Xr=Ct(lr.G[2],lr.H[2],je),Or=Ct(lr.G[3],lr.H[3],je),je.h)break;I[It]=(Or<<24|mr<<16|dr<<8|Xr)>>>0}if(mr=!1,++It,++Me>=ee&&(Me=0,++Pe,Le!=null&&Pe<=Se&&!(Pe%16)&&Le(w,Pe),ct!=null))for(;Bt<It;)dr=I[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else if(280>dr){if(dr=pt(dr-256,je),Xr=Ct(lr.G[4],lr.H[4],je),Qe(je),Xr=Lt(ee,Xr=pt(Xr,je)),je.h)break;if(It-$<Xr||ge-It<dr)break e;for(Or=0;Or<dr;++Or)I[It+Or]=I[It+Or-Xr];for(It+=dr,Me+=dr;Me>=ee;)Me-=ee,++Pe,Le!=null&&Pe<=Se&&!(Pe%16)&&Le(w,Pe);if(e(It<=ge),Me&mt&&(lr=Wt(lt,Me,Pe)),ct!=null)for(;Bt<It;)dr=I[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else{if(!(dr<Ft))break e;for(mr=dr-280,e(ct!=null);Bt<It;)dr=I[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr;dr=It,e(!(mr>>>(Xr=ct).Xa)),I[dr]=Xr.X[mr],mr=!0}mr||e(je.h==pe(je))}if(w.Pb&&je.h&&It<ge)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Ze(w.s.vb,w.s.Wa);else{if(je.h)break e;Le!=null&&Le(w,Pe>Se?Se:Pe),w.a=0,w.$=It-$}return 1}return w.a=3,0}function sn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var I=w.Wa;I!=null&&(I.X=null),w.vb=null,e(w!=null)}function _n(){var w=new xu;return w==null?null:(w.a=0,w.xb=Ed,Vi("Predictor","VP8LPredictors"),Vi("Predictor","VP8LPredictors_C"),Vi("PredictorAdd","VP8LPredictorsAdd"),Vi("PredictorAdd","VP8LPredictorsAdd_C"),ql=Sn,Mr=ln,xn=Yt,kn=Gr,ns=Wr,xi=On,ms=mn,K.VP8LMapColor32b=Jo,K.VP8LMapColor8b=Pc,w)}function Un(w,I,$,ee,ge){var Se=1,Le=[w],Pe=[I],Me=ee.m,je=ee.s,lt=null,It=0;e:for(;;){if($)for(;Se&&Ne(Me,1);){var Bt=Le,xt=Pe,Ft=ee,Qt=1,ct=Ft.m,mt=Ft.gc[Ft.ab],lr=Ne(ct,2);if(Ft.Oc&1<<lr)Se=0;else{switch(Ft.Oc|=1<<lr,mt.hc=lr,mt.Ea=Bt[0],mt.nc=xt[0],mt.K=[null],++Ft.ab,e(4>=Ft.ab),lr){case 0:case 1:mt.b=Ne(ct,3)+2,Qt=Un(Dt(mt.Ea,mt.b),Dt(mt.nc,mt.b),0,Ft,mt.K),mt.K=mt.K[0];break;case 3:var mr,dr=Ne(ct,8)+1,Xr=16<dr?0:4<dr?1:2<dr?2:3;if(Bt[0]=Dt(mt.Ea,Xr),mt.b=Xr,mr=Qt=Un(dr,1,0,Ft,mt.K)){var Or,bn=dr,zr=mt,ci=1<<(8>>zr.b),fi=o(ci);if(fi==null)mr=0;else{var $n=zr.K[0],ti=zr.w;for(fi[0]=zr.K[0][0],Or=1;Or<1*bn;++Or)fi[Or]=vt($n[ti+Or],fi[Or-1]);for(;Or<4*ci;++Or)fi[Or]=0;zr.K[0]=null,zr.K[0]=fi,mr=1}}Qt=mr;break;case 2:break;default:e(0)}Se=Qt}}if(Le=Le[0],Pe=Pe[0],Se&&Ne(Me,1)&&!(Se=1<=(It=Ne(Me,4))&&11>=It)){ee.a=3;break e}var Mi;if(Mi=Se)t:{var wi,Vn,gs,To=ee,zi=Le,Qi=Pe,gi=It,Qo=$,Ko=To.m,Os=To.s,Ws=[null],Lo=1,ko=0,ca=_h[gi];r:for(;;){if(Qo&&Ne(Ko,1)){var jr=Ne(Ko,3)+2,In=Dt(zi,jr),ya=Dt(Qi,jr),Es=In*ya;if(!Un(In,ya,0,To,Ws))break r;for(Ws=Ws[0],Os.xc=jr,wi=0;wi<Es;++wi){var cr=Ws[wi]>>8&65535;Ws[wi]=cr,cr>=Lo&&(Lo=cr+1)}}if(Ko.h)break r;for(Vn=0;5>Vn;++Vn){var es=vh[Vn];!Vn&&0<gi&&(es+=1<<gi),ko<es&&(ko=es)}var Td=c(Lo*ca,Z),cf=Lo,Rc=c(cf,be);if(Rc==null)var ld=null;else e(65536>=cf),ld=Rc;var uc=o(ko);if(ld==null||uc==null||Td==null){To.a=1;break r}var Kc=Td;for(wi=gs=0;wi<Lo;++wi){var ka=ld[wi],su=ka.G,Xc=ka.H,Ch=0,Su=1,Sh=0;for(Vn=0;5>Vn;++Vn){es=vh[Vn],su[Vn]=Kc,Xc[Vn]=gs,!Vn&&0<gi&&(es+=1<<gi);i:{var ou,cd=es,Yc=To,Bu=uc,au=Kc,ug=gs,Wa=0,dc=Yc.m,uf=Ne(dc,1);if(s(Bu,0,0,cd),uf){var ho=Ne(dc,1)+1,as=Ne(dc,1),Zf=Ne(dc,as==0?1:8);Bu[Zf]=1,ho==2&&(Bu[Zf=Ne(dc,8)]=1);var Bc=1}else{var Bh=o(19),Eu=Ne(dc,4)+4;if(19<Eu){Yc.a=3;var Tu=0;break i}for(ou=0;ou<Eu;++ou)Bh[sf[ou]]=Ne(dc,3);var rh=void 0,El=void 0,Lu=Yc,ud=Bh,Uc=cd,Eh=Bu,nh=0,Tl=Lu.m,df=8,Iu=c(128,Z);n:for(;J(Iu,0,7,ud,19);){if(Ne(Tl,1)){var Th=2+2*Ne(Tl,3);if((rh=2+Ne(Tl,Th))>Uc)break n}else rh=Uc;for(El=0;El<Uc&&rh--;){Qe(Tl);var dd=Iu[0+(127&le(Tl))];fe(Tl,Tl.u+dd.g);var na=dd.value;if(16>na)Eh[El++]=na,na!=0&&(df=na);else{var Lh=na==16,Ka=na-16,kp=Sd[Ka],hf=Ne(Tl,kc[Ka])+kp;if(El+hf>Uc)break n;for(var Ih=Lh?df:0;0<hf--;)Eh[El++]=Ih}}nh=1;break n}nh||(Lu.a=3),Bc=nh}(Bc=Bc&&!dc.h)&&(Wa=J(au,ug,8,Bu,cd)),Bc&&Wa!=0?Tu=Wa:(Yc.a=3,Tu=0)}if(Tu==0)break r;if(Su&&Wl[Vn]==1&&(Su=Kc[gs].g==0),Ch+=Kc[gs].g,gs+=Tu,3>=Vn){var Ll,ih=uc[0];for(Ll=1;Ll<es;++Ll)uc[Ll]>ih&&(ih=uc[Ll]);Sh+=ih}}if(ka.nd=Su,ka.Qb=0,Su&&(ka.qb=(su[3][Xc[3]+0].value<<24|su[1][Xc[1]+0].value<<16|su[2][Xc[2]+0].value)>>>0,Ch==0&&256>su[0][Xc[0]+0].value&&(ka.Qb=1,ka.qb+=su[0][Xc[0]+0].value<<8)),ka.jc=!ka.Qb&&6>Sh,ka.jc){var lu,al=ka;for(lu=0;lu<Ki;++lu){var ll=lu,cl=al.pd[ll],Nu=al.G[0][al.H[0]+ll];256<=Nu.value?(cl.g=Nu.g+256,cl.value=Nu.value):(cl.g=0,cl.value=0,ll>>=kt(Nu,8,cl),ll>>=kt(al.G[1][al.H[1]+ll],16,cl),ll>>=kt(al.G[2][al.H[2]+ll],0,cl),kt(al.G[3][al.H[3]+ll],24,cl))}}}Os.vc=Ws,Os.Wb=Lo,Os.Ya=ld,Os.yc=Td,Mi=1;break t}Mi=0}if(!(Se=Mi)){ee.a=3;break e}if(0<It){if(je.ua=1<<It,!Ar(je.Wa,It)){ee.a=1,Se=0;break e}}else je.ua=0;var Ld=ee,Nh=Le,BA=Pe,Id=Ld.s,hd=Id.xc;if(Ld.c=Nh,Ld.i=BA,Id.md=Dt(Nh,hd),Id.wc=hd==0?-1:(1<<hd)-1,$){ee.xb=Kf;break e}if((lt=o(Le*Pe))==null){ee.a=1,Se=0;break e}Se=(Se=rn(ee,lt,0,Le,Pe,Pe,null))&&!Me.h;break e}return Se?(ge!=null?ge[0]=lt:(e(lt==null),e($)),ee.$=0,$||sn(je)):sn(je),Se}function qn(w,I){var $=w.c*w.i,ee=$+I+16*I;return e(w.c<=I),w.V=o(ee),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+$+I,1)}function Wn(w,I){var $=w.C,ee=I-$,ge=w.V,Se=w.Ba+w.c*$;for(e(I<=w.l.o);0<ee;){var Le=16<ee?16:ee,Pe=w.l.ma,Me=w.l.width,je=Me*Le,lt=Pe.ca,It=Pe.tb+Me*$,Bt=w.Ta,xt=w.Ua;Rt(w,Le,ge,Se),oi(Bt,xt,lt,It,je),pr(Pe,$,$+Le,lt,It,Me),ee-=Le,ge+=Le*w.c,$+=Le}e($==I),w.C=w.Ma=I}function Pi(){this.ub=this.yd=this.td=this.Rb=0}function $i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Kn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Yi(){this.Yb=function(){var w=[];return function I($,ee,ge){for(var Se=ge[ee],Le=0;Le<Se&&($.push(ge.length>ee+1?[]:0),!(ge.length<ee+1));Le++)I($[Le],ee+1,ge)}(w,0,[3,11]),w}()}function Ss(){this.jb=o(3),this.Wc=u([4,8],Yi),this.Xc=u([4,17],Yi)}function no(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Fs(){this.ld=this.La=this.dd=this.tc=0}function rs(){this.Na=this.la=0}function Sa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ba(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fs),this.Y=0,this.ya=Array(new Ba),this.aa=0,this.l=new sa}function go(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Sl(){this.cb=this.a=0,this.sc="",this.m=new st,this.Od=new Pi,this.Kc=new $i,this.ed=new no,this.Qa=new Kn,this.Ic=this.$c=this.Aa=0,this.D=new tl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,st),this.ia=0,this.pb=c(4,Sa),this.Pa=new Ss,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new go),this.Hd=0,this.rb=Array(new rs),this.sb=0,this.wa=Array(new Fs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ba),this.L=this.aa=0,this.gd=u([4,2],Fs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ha(){var w=new Sl;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Dc||(Dc=Ul)),w}function qi(w,I,$){return w.a==0&&(w.a=I,w.sc=$,w.cb=0),0}function Nc(w,I,$){return 3<=$&&w[I+0]==157&&w[I+1]==1&&w[I+2]==42}function nc(w,I){if(w==null)return 0;if(w.a=0,w.sc="OK",I==null)return qi(w,2,"null VP8Io passed to VP8GetHeaders()");var $=I.data,ee=I.w,ge=I.ha;if(4>ge)return qi(w,7,"Truncated header.");var Se=$[ee+0]|$[ee+1]<<8|$[ee+2]<<16,Le=w.Od;if(Le.Rb=!(1&Se),Le.td=Se>>1&7,Le.yd=Se>>4&1,Le.ub=Se>>5,3<Le.td)return qi(w,3,"Incorrect keyframe parameters.");if(!Le.yd)return qi(w,4,"Frame not displayable.");ee+=3,ge-=3;var Pe=w.Kc;if(Le.Rb){if(7>ge)return qi(w,7,"cannot parse picture header");if(!Nc($,ee,ge))return qi(w,3,"Bad code word");Pe.c=16383&($[ee+4]<<8|$[ee+3]),Pe.Td=$[ee+4]>>6,Pe.i=16383&($[ee+6]<<8|$[ee+5]),Pe.Ud=$[ee+6]>>6,ee+=7,ge-=7,w.za=Pe.c+15>>4,w.Ub=Pe.i+15>>4,I.width=Pe.c,I.height=Pe.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,s((Se=w.Pa).jb,0,255,Se.jb.length),e((Se=w.Qa)!=null),Se.Cb=0,Se.Bb=0,Se.Fb=1,s(Se.Zb,0,0,Se.Zb.length),s(Se.Lb,0,0,Se.Lb)}if(Le.ub>ge)return qi(w,7,"bad partition length");He(Se=w.m,$,ee,Le.ub),ee+=Le.ub,ge-=Le.ub,Le.Rb&&(Pe.Ld=et(Se),Pe.Kd=et(Se)),Pe=w.Qa;var Me,je=w.Pa;if(e(Se!=null),e(Pe!=null),Pe.Cb=et(Se),Pe.Cb){if(Pe.Bb=et(Se),et(Se)){for(Pe.Fb=et(Se),Me=0;4>Me;++Me)Pe.Zb[Me]=et(Se)?ve(Se,7):0;for(Me=0;4>Me;++Me)Pe.Lb[Me]=et(Se)?ve(Se,6):0}if(Pe.Bb)for(Me=0;3>Me;++Me)je.jb[Me]=et(Se)?Fe(Se,8):255}else Pe.Bb=0;if(Se.Ka)return qi(w,3,"cannot parse segment header");if((Pe=w.ed).zd=et(Se),Pe.Tb=Fe(Se,6),Pe.wb=Fe(Se,3),Pe.Pc=et(Se),Pe.Pc&&et(Se)){for(je=0;4>je;++je)et(Se)&&(Pe.vd[je]=ve(Se,6));for(je=0;4>je;++je)et(Se)&&(Pe.od[je]=ve(Se,6))}if(w.L=Pe.Tb==0?0:Pe.zd?1:2,Se.Ka)return qi(w,3,"cannot parse filter header");var lt=ge;if(ge=Me=ee,ee=Me+lt,Pe=lt,w.Xb=(1<<Fe(w.m,2))-1,lt<3*(je=w.Xb))$=7;else{for(Me+=3*je,Pe-=3*je,lt=0;lt<je;++lt){var It=$[ge+0]|$[ge+1]<<8|$[ge+2]<<16;It>Pe&&(It=Pe),He(w.Jc[+lt],$,Me,It),Me+=It,Pe-=It,ge+=3}He(w.Jc[+je],$,Me,Pe),$=Me<ee?0:5}if($!=0)return qi(w,$,"cannot parse partitions");for($=Fe(Me=w.m,7),ge=et(Me)?ve(Me,4):0,ee=et(Me)?ve(Me,4):0,Pe=et(Me)?ve(Me,4):0,je=et(Me)?ve(Me,4):0,Me=et(Me)?ve(Me,4):0,lt=w.Qa,It=0;4>It;++It){if(lt.Cb){var Bt=lt.Zb[It];lt.Fb||(Bt+=$)}else{if(0<It){w.pb[It]=w.pb[0];continue}Bt=$}var xt=w.pb[It];xt.Sc[0]=od[Js(Bt+ge,127)],xt.Sc[1]=wu[Js(Bt+0,127)],xt.Eb[0]=2*od[Js(Bt+ee,127)],xt.Eb[1]=101581*wu[Js(Bt+Pe,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=od[Js(Bt+je,117)],xt.Qc[1]=wu[Js(Bt+Me,127)],xt.lc=Bt+Me}if(!Le.Rb)return qi(w,4,"Not a key frame.");for(et(Se),Le=w.Pa,$=0;4>$;++$){for(ge=0;8>ge;++ge)for(ee=0;3>ee;++ee)for(Pe=0;11>Pe;++Pe)je=tt(Se,Pp[$][ge][ee][Pe])?Fe(Se,8):qf[$][ge][ee][Pe],Le.Wc[$][ge].Yb[ee][Pe]=je;for(ge=0;17>ge;++ge)Le.Xc[$][ge]=Le.Wc[$][Wf[ge]]}return w.kc=et(Se),w.kc&&(w.Bd=Fe(Se,8)),w.cb=1}function Ul(w,I,$,ee,ge,Se,Le){var Pe=I[ge].Yb[$];for($=0;16>ge;++ge){if(!tt(w,Pe[$+0]))return ge;for(;!tt(w,Pe[$+1]);)if(Pe=I[++ge].Yb[0],$=0,ge==16)return 16;var Me=I[ge+1].Yb;if(tt(w,Pe[$+2])){var je=w,lt=0;if(tt(je,(Bt=Pe)[(It=$)+3]))if(tt(je,Bt[It+6])){for(Pe=0,It=2*(lt=tt(je,Bt[It+8]))+(Bt=tt(je,Bt[It+9+lt])),lt=0,Bt=Kl[It];Bt[Pe];++Pe)lt+=lt+tt(je,Bt[Pe]);lt+=3+(8<<It)}else tt(je,Bt[It+7])?(lt=7+2*tt(je,165),lt+=tt(je,145)):lt=5+tt(je,159);else lt=tt(je,Bt[It+4])?3+tt(je,Bt[It+5]):2;Pe=Me[2]}else lt=1,Pe=Me[1];Me=Le+ad[ge],0>(je=w).b&&Ke(je);var It,Bt=je.b,xt=(It=je.Ca>>1)-(je.I>>Bt)>>31;--je.b,je.Ca+=xt,je.Ca|=1,je.I-=(It+1&xt)<<Bt,Se[Me]=((lt^xt)-xt)*ee[(0<ge)+0]}return 16}function Xo(w){var I=w.rb[w.sb-1];I.la=0,I.Na=0,s(w.zc,0,0,w.zc.length),w.ja=0}function Pa(w,I){if(w==null)return 0;if(I==null)return qi(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!nc(w,I))return 0;if(e(w.cb),I.ac==null||I.ac(I)){I.ob&&(w.L=0);var $=Cu[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=I.v-$>>4,w.zb=I.j-$>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=I.o+15+$>>4,w.Hb=I.va+15+$>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ee=w.ed;for($=0;4>$;++$){var ge;if(w.Qa.Cb){var Se=w.Qa.Lb[$];w.Qa.Fb||(Se+=ee.Tb)}else Se=ee.Tb;for(ge=0;1>=ge;++ge){var Le=w.gd[$][ge],Pe=Se;if(ee.Pc&&(Pe+=ee.vd[0],ge&&(Pe+=ee.od[0])),0<(Pe=0>Pe?0:63<Pe?63:Pe)){var Me=Pe;0<ee.wb&&(Me=4<ee.wb?Me>>2:Me>>1)>9-ee.wb&&(Me=9-ee.wb),1>Me&&(Me=1),Le.dd=Me,Le.tc=2*Pe+Me,Le.ld=40<=Pe?2:15<=Pe?1:0}else Le.tc=0;Le.La=ge}}}$=0}else qi(w,6,"Frame setup failed"),$=w.a;if($=$==0){if($){w.$c=0,0<w.Aa||(w.Ic=af);e:{$=w.Ic,ee=4*(Me=w.za);var je=32*Me,lt=Me+1,It=0<w.L?Me*(0<w.Aa?2:1):0,Bt=(w.Aa==2?2:1)*Me;if((Le=ee+832+(ge=3*(16*$+Cu[w.L])/2*je)+(Se=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Le)$=0;else{if(Le>w.Vb){if(w.Vb=0,w.Ec=o(Le),w.Fc=0,w.Ec==null){$=qi(w,1,"no memory during frame initialization.");break e}w.Vb=Le}Le=w.Ec,Pe=w.Fc,w.Ac=Le,w.Bc=Pe,Pe+=ee,w.Gd=c(je,go),w.Hd=0,w.rb=c(lt+1,rs),w.sb=1,w.wa=It?c(It,Fs):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Me),e(!0),w.oc=Le,w.pc=Pe,Pe+=832,w.ya=c(Bt,Ba),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Me),w.R=16*Me,w.B=8*Me,Me=(je=Cu[w.L])*w.R,je=je/2*w.B,w.sa=Le,w.ta=Pe+Me,w.qa=w.sa,w.ra=w.ta+16*$*w.R+je,w.Ha=w.qa,w.Ia=w.ra+8*$*w.B+je,w.$c=0,Pe+=ge,w.mb=Se?Le:null,w.nb=Se?Pe:null,e(Pe+Se<=w.Fc+w.Vb),Xo(w),s(w.Ac,w.Bc,0,ee),$=1}}if($){if(I.ka=0,I.y=w.sa,I.O=w.ta,I.f=w.qa,I.N=w.ra,I.ea=w.Ha,I.Vd=w.Ia,I.fa=w.R,I.Rc=w.B,I.F=null,I.J=0,!$a){for($=-255;255>=$;++$)qs[255+$]=0>$?-$:$;for($=-1020;1020>=$;++$)sl[1020+$]=-128>$?-128:127<$?127:$;for($=-112;112>=$;++$)ac[112+$]=-16>$?-16:15<$?15:$;for($=-255;510>=$;++$)ol[255+$]=0>$?0:255<$?255:$;$a=1}ds=Ht,bo=Cc,Ds=ce,Bs=Re,zs=At,Zi=Fc,eo=fa,ea=_s,ma=Eo,ta=ic,ra=io,$s=qo,ga=aa,hs=rl,os=ja,Tn=$o,mi=Ys,co=Bo,Mo[0]=Ci,Mo[1]=er,Mo[2]=an,Mo[3]=ei,Mo[4]=Ps,Mo[5]=Ro,Mo[6]=Xs,Mo[7]=yn,Mo[8]=Ni,Mo[9]=Zn,vl[0]=Kr,vl[1]=fn,vl[2]=pn,vl[3]=Fn,vl[4]=Gn,vl[5]=si,vl[6]=ji,qa[0]=jo,qa[1]=_r,qa[2]=ha,qa[3]=Ms,qa[4]=oa,qa[5]=zl,qa[6]=yo,$=1}else $=0}$&&($=function(xt,Ft){for(xt.M=0;xt.M<xt.Va;++xt.M){var Qt,ct=xt.Jc[xt.M&xt.Xb],mt=xt.m,lr=xt;for(Qt=0;Qt<lr.za;++Qt){var mr=mt,dr=lr,Xr=dr.Ac,Or=dr.Bc+4*Qt,bn=dr.zc,zr=dr.ya[dr.aa+Qt];if(dr.Qa.Bb?zr.$b=tt(mr,dr.Pa.jb[0])?2+tt(mr,dr.Pa.jb[2]):tt(mr,dr.Pa.jb[1]):zr.$b=0,dr.kc&&(zr.Ad=tt(mr,dr.Bd)),zr.Za=!tt(mr,145)+0,zr.Za){var ci=zr.Ob,fi=0;for(dr=0;4>dr;++dr){var $n,ti=bn[0+dr];for($n=0;4>$n;++$n){ti=Bd[Xr[Or+$n]][ti];for(var Mi=zo[tt(mr,ti[0])];0<Mi;)Mi=zo[2*Mi+tt(mr,ti[Mi])];ti=-Mi,Xr[Or+$n]=ti}n(ci,fi,Xr,Or,4),fi+=4,bn[0+dr]=ti}}else ti=tt(mr,156)?tt(mr,128)?1:3:tt(mr,163)?2:0,zr.Ob[0]=ti,s(Xr,Or,ti,4),s(bn,0,ti,4);zr.Dd=tt(mr,142)?tt(mr,114)?tt(mr,183)?1:3:2:0}if(lr.m.Ka)return qi(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(lr=ct,mr=(mt=xt).rb[mt.sb-1],Xr=mt.rb[mt.sb+mt.ja],Qt=mt.ya[mt.aa+mt.ja],Or=mt.kc?Qt.Ad:0)mr.la=Xr.la=0,Qt.Za||(mr.Na=Xr.Na=0),Qt.Hc=0,Qt.Gc=0,Qt.ia=0;else{var wi,Vn;if(mr=Xr,Xr=lr,Or=mt.Pa.Xc,bn=mt.ya[mt.aa+mt.ja],zr=mt.pb[bn.$b],dr=bn.ad,ci=0,fi=mt.rb[mt.sb-1],ti=$n=0,s(dr,ci,0,384),bn.Za)var gs=0,To=Or[3];else{Mi=o(16);var zi=mr.Na+fi.Na;if(zi=Dc(Xr,Or[1],zi,zr.Eb,0,Mi,0),mr.Na=fi.Na=(0<zi)+0,1<zi)ds(Mi,0,dr,ci);else{var Qi=Mi[0]+3>>3;for(Mi=0;256>Mi;Mi+=16)dr[ci+Mi]=Qi}gs=1,To=Or[0]}var gi=15&mr.la,Qo=15&fi.la;for(Mi=0;4>Mi;++Mi){var Ko=1&Qo;for(Qi=Vn=0;4>Qi;++Qi)gi=gi>>1|(Ko=(zi=Dc(Xr,To,zi=Ko+(1&gi),zr.Sc,gs,dr,ci))>gs)<<7,Vn=Vn<<2|(3<zi?3:1<zi?2:dr[ci+0]!=0),ci+=16;gi>>=4,Qo=Qo>>1|Ko<<7,$n=($n<<8|Vn)>>>0}for(To=gi,gs=Qo>>4,wi=0;4>wi;wi+=2){for(Vn=0,gi=mr.la>>4+wi,Qo=fi.la>>4+wi,Mi=0;2>Mi;++Mi){for(Ko=1&Qo,Qi=0;2>Qi;++Qi)zi=Ko+(1&gi),gi=gi>>1|(Ko=0<(zi=Dc(Xr,Or[2],zi,zr.Qc,0,dr,ci)))<<3,Vn=Vn<<2|(3<zi?3:1<zi?2:dr[ci+0]!=0),ci+=16;gi>>=2,Qo=Qo>>1|Ko<<5}ti|=Vn<<4*wi,To|=gi<<4<<wi,gs|=(240&Qo)<<wi}mr.la=To,fi.la=gs,bn.Hc=$n,bn.Gc=ti,bn.ia=43690&ti?0:zr.ia,Or=!($n|ti)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[Qt.$b][Qt.Za],mt.wa[mt.Y+mt.ja].La|=!Or),lr.Ka)return qi(xt,7,"Premature end-of-file encountered.")}if(Xo(xt),mt=Ft,lr=1,Qt=(ct=xt).D,mr=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(Qt.M=ct.M,Qt.uc=mr,so(ct,Qt),lr=1,Qt=(Vn=ct.D).Nb,mr=(ti=Cu[ct.L])*ct.R,Xr=ti/2*ct.B,Mi=16*Qt*ct.R,Qi=8*Qt*ct.B,Or=ct.sa,bn=ct.ta-mr+Mi,zr=ct.qa,dr=ct.ra-Xr+Qi,ci=ct.Ha,fi=ct.Ia-Xr+Qi,Qo=(gi=Vn.M)==0,$n=gi>=ct.Va-1,ct.Aa==2&&so(ct,Vn),Vn.uc)for(Ko=(zi=ct).D.M,e(zi.D.uc),Vn=zi.yb;Vn<zi.Hb;++Vn){gs=Vn,To=Ko;var Os=(Ws=(es=zi).D).Nb;wi=es.R;var Ws=Ws.wa[Ws.Y+gs],Lo=es.sa,ko=es.ta+16*Os*wi+16*gs,ca=Ws.dd,jr=Ws.tc;if(jr!=0)if(e(3<=jr),es.L==1)0<gs&&Tn(Lo,ko,wi,jr+4),Ws.La&&co(Lo,ko,wi,jr),0<To&&os(Lo,ko,wi,jr+4),Ws.La&&mi(Lo,ko,wi,jr);else{var In=es.B,ya=es.qa,Es=es.ra+8*Os*In+8*gs,cr=es.Ha,es=es.Ia+8*Os*In+8*gs;Os=Ws.ld,0<gs&&(ea(Lo,ko,wi,jr+4,ca,Os),ta(ya,Es,cr,es,In,jr+4,ca,Os)),Ws.La&&($s(Lo,ko,wi,jr,ca,Os),hs(ya,Es,cr,es,In,jr,ca,Os)),0<To&&(eo(Lo,ko,wi,jr+4,ca,Os),ma(ya,Es,cr,es,In,jr+4,ca,Os)),Ws.La&&(ra(Lo,ko,wi,jr,ca,Os),ga(ya,Es,cr,es,In,jr,ca,Os))}}if(ct.ia&&alert("todo:DitherRow"),mt.put!=null){if(Vn=16*gi,gi=16*(gi+1),Qo?(mt.y=ct.sa,mt.O=ct.ta+Mi,mt.f=ct.qa,mt.N=ct.ra+Qi,mt.ea=ct.Ha,mt.W=ct.Ia+Qi):(Vn-=ti,mt.y=Or,mt.O=bn,mt.f=zr,mt.N=dr,mt.ea=ci,mt.W=fi),$n||(gi-=ti),gi>mt.o&&(gi=mt.o),mt.F=null,mt.J=null,ct.Fa!=null&&0<ct.Fa.length&&Vn<gi&&(mt.J=$l(ct,mt,Vn,gi-Vn),mt.F=ct.mb,mt.F==null&&mt.F.length==0)){lr=qi(ct,3,"Could not decode alpha data.");break e}Vn<mt.j&&(ti=mt.j-Vn,Vn=mt.j,e(!(1&ti)),mt.O+=ct.R*ti,mt.N+=ct.B*(ti>>1),mt.W+=ct.B*(ti>>1),mt.F!=null&&(mt.J+=mt.width*ti)),Vn<gi&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=Vn-mt.j,mt.U=mt.va-mt.v,mt.T=gi-Vn,lr=mt.put(mt))}Qt+1!=ct.Ic||$n||(n(ct.sa,ct.ta-mr,Or,bn+16*ct.R,mr),n(ct.qa,ct.ra-Xr,zr,dr+8*ct.B,Xr),n(ct.Ha,ct.Ia-Xr,ci,fi+8*ct.B,Xr))}if(!lr)return qi(xt,6,"Output aborted.")}return 1}(w,I)),I.bc!=null&&I.bc(I),$&=1}return $?(w.cb=0,$):0}function Ai(w,I,$,ee,ge){ge=w[I+$+32*ee]+(ge>>3),w[I+$+32*ee]=-256&ge?0>ge?0:255:ge}function So(w,I,$,ee,ge,Se){Ai(w,I,0,$,ee+ge),Ai(w,I,1,$,ee+Se),Ai(w,I,2,$,ee-Se),Ai(w,I,3,$,ee-ge)}function xs(w){return(20091*w>>16)+w}function Bl(w,I,$,ee){var ge,Se=0,Le=o(16);for(ge=0;4>ge;++ge){var Pe=w[I+0]+w[I+8],Me=w[I+0]-w[I+8],je=(35468*w[I+4]>>16)-xs(w[I+12]),lt=xs(w[I+4])+(35468*w[I+12]>>16);Le[Se+0]=Pe+lt,Le[Se+1]=Me+je,Le[Se+2]=Me-je,Le[Se+3]=Pe-lt,Se+=4,I++}for(ge=Se=0;4>ge;++ge)Pe=(w=Le[Se+0]+4)+Le[Se+8],Me=w-Le[Se+8],je=(35468*Le[Se+4]>>16)-xs(Le[Se+12]),Ai($,ee,0,0,Pe+(lt=xs(Le[Se+4])+(35468*Le[Se+12]>>16))),Ai($,ee,1,0,Me+je),Ai($,ee,2,0,Me-je),Ai($,ee,3,0,Pe-lt),Se++,ee+=32}function Fc(w,I,$,ee){var ge=w[I+0]+4,Se=35468*w[I+4]>>16,Le=xs(w[I+4]),Pe=35468*w[I+1]>>16;So($,ee,0,ge+Le,w=xs(w[I+1]),Pe),So($,ee,1,ge+Se,w,Pe),So($,ee,2,ge-Se,w,Pe),So($,ee,3,ge-Le,w,Pe)}function Cc(w,I,$,ee,ge){Bl(w,I,$,ee),ge&&Bl(w,I+16,$,ee+4)}function ce(w,I,$,ee){bo(w,I+0,$,ee,1),bo(w,I+32,$,ee+128,1)}function Re(w,I,$,ee){var ge;for(w=w[I+0]+4,ge=0;4>ge;++ge)for(I=0;4>I;++I)Ai($,ee,I,ge,w)}function At(w,I,$,ee){w[I+0]&&Bs(w,I+0,$,ee),w[I+16]&&Bs(w,I+16,$,ee+4),w[I+32]&&Bs(w,I+32,$,ee+128),w[I+48]&&Bs(w,I+48,$,ee+128+4)}function Ht(w,I,$,ee){var ge,Se=o(16);for(ge=0;4>ge;++ge){var Le=w[I+0+ge]+w[I+12+ge],Pe=w[I+4+ge]+w[I+8+ge],Me=w[I+4+ge]-w[I+8+ge],je=w[I+0+ge]-w[I+12+ge];Se[0+ge]=Le+Pe,Se[8+ge]=Le-Pe,Se[4+ge]=je+Me,Se[12+ge]=je-Me}for(ge=0;4>ge;++ge)Le=(w=Se[0+4*ge]+3)+Se[3+4*ge],Pe=Se[1+4*ge]+Se[2+4*ge],Me=Se[1+4*ge]-Se[2+4*ge],je=w-Se[3+4*ge],$[ee+0]=Le+Pe>>3,$[ee+16]=je+Me>>3,$[ee+32]=Le-Pe>>3,$[ee+48]=je-Me>>3,ee+=64}function Jt(w,I,$){var ee,ge=I-32,Se=oo,Le=255-w[ge-1];for(ee=0;ee<$;++ee){var Pe,Me=Se,je=Le+w[I-1];for(Pe=0;Pe<$;++Pe)w[I+Pe]=Me[je+w[ge+Pe]];I+=32}}function er(w,I){Jt(w,I,4)}function _r(w,I){Jt(w,I,8)}function fn(w,I){Jt(w,I,16)}function pn(w,I){var $;for($=0;16>$;++$)n(w,I+32*$,w,I-32,16)}function Fn(w,I){var $;for($=16;0<$;--$)s(w,I,w[I-1],16),I+=32}function Mn(w,I,$){var ee;for(ee=0;16>ee;++ee)s(I,$+32*ee,w,16)}function Kr(w,I){var $,ee=16;for($=0;16>$;++$)ee+=w[I-1+32*$]+w[I+$-32];Mn(ee>>5,w,I)}function Gn(w,I){var $,ee=8;for($=0;16>$;++$)ee+=w[I-1+32*$];Mn(ee>>4,w,I)}function si(w,I){var $,ee=8;for($=0;16>$;++$)ee+=w[I+$-32];Mn(ee>>4,w,I)}function ji(w,I){Mn(128,w,I)}function Sr(w,I,$){return w+2*I+$+2>>2}function an(w,I){var $,ee=I-32;for(ee=new Uint8Array([Sr(w[ee-1],w[ee+0],w[ee+1]),Sr(w[ee+0],w[ee+1],w[ee+2]),Sr(w[ee+1],w[ee+2],w[ee+3]),Sr(w[ee+2],w[ee+3],w[ee+4])]),$=0;4>$;++$)n(w,I+32*$,ee,0,ee.length)}function ei(w,I){var $=w[I-1],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1+96];bt(w,I+0,16843009*Sr(w[I-1-32],$,ee)),bt(w,I+32,16843009*Sr($,ee,ge)),bt(w,I+64,16843009*Sr(ee,ge,Se)),bt(w,I+96,16843009*Sr(ge,Se,Se))}function Ci(w,I){var $,ee=4;for($=0;4>$;++$)ee+=w[I+$-32]+w[I-1+32*$];for(ee>>=3,$=0;4>$;++$)s(w,I+32*$,ee,4)}function Ps(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1-32],Le=w[I+0-32],Pe=w[I+1-32],Me=w[I+2-32],je=w[I+3-32];w[I+0+96]=Sr(ee,ge,w[I-1+96]),w[I+1+96]=w[I+0+64]=Sr($,ee,ge),w[I+2+96]=w[I+1+64]=w[I+0+32]=Sr(Se,$,ee),w[I+3+96]=w[I+2+64]=w[I+1+32]=w[I+0+0]=Sr(Le,Se,$),w[I+3+64]=w[I+2+32]=w[I+1+0]=Sr(Pe,Le,Se),w[I+3+32]=w[I+2+0]=Sr(Me,Pe,Le),w[I+3+0]=Sr(je,Me,Pe)}function Xs(w,I){var $=w[I+1-32],ee=w[I+2-32],ge=w[I+3-32],Se=w[I+4-32],Le=w[I+5-32],Pe=w[I+6-32],Me=w[I+7-32];w[I+0+0]=Sr(w[I+0-32],$,ee),w[I+1+0]=w[I+0+32]=Sr($,ee,ge),w[I+2+0]=w[I+1+32]=w[I+0+64]=Sr(ee,ge,Se),w[I+3+0]=w[I+2+32]=w[I+1+64]=w[I+0+96]=Sr(ge,Se,Le),w[I+3+32]=w[I+2+64]=w[I+1+96]=Sr(Se,Le,Pe),w[I+3+64]=w[I+2+96]=Sr(Le,Pe,Me),w[I+3+96]=Sr(Pe,Me,Me)}function Ro(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1-32],Le=w[I+0-32],Pe=w[I+1-32],Me=w[I+2-32],je=w[I+3-32];w[I+0+0]=w[I+1+64]=Se+Le+1>>1,w[I+1+0]=w[I+2+64]=Le+Pe+1>>1,w[I+2+0]=w[I+3+64]=Pe+Me+1>>1,w[I+3+0]=Me+je+1>>1,w[I+0+96]=Sr(ge,ee,$),w[I+0+64]=Sr(ee,$,Se),w[I+0+32]=w[I+1+96]=Sr($,Se,Le),w[I+1+32]=w[I+2+96]=Sr(Se,Le,Pe),w[I+2+32]=w[I+3+96]=Sr(Le,Pe,Me),w[I+3+32]=Sr(Pe,Me,je)}function yn(w,I){var $=w[I+0-32],ee=w[I+1-32],ge=w[I+2-32],Se=w[I+3-32],Le=w[I+4-32],Pe=w[I+5-32],Me=w[I+6-32],je=w[I+7-32];w[I+0+0]=$+ee+1>>1,w[I+1+0]=w[I+0+64]=ee+ge+1>>1,w[I+2+0]=w[I+1+64]=ge+Se+1>>1,w[I+3+0]=w[I+2+64]=Se+Le+1>>1,w[I+0+32]=Sr($,ee,ge),w[I+1+32]=w[I+0+96]=Sr(ee,ge,Se),w[I+2+32]=w[I+1+96]=Sr(ge,Se,Le),w[I+3+32]=w[I+2+96]=Sr(Se,Le,Pe),w[I+3+64]=Sr(Le,Pe,Me),w[I+3+96]=Sr(Pe,Me,je)}function Zn(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1+96];w[I+0+0]=$+ee+1>>1,w[I+2+0]=w[I+0+32]=ee+ge+1>>1,w[I+2+32]=w[I+0+64]=ge+Se+1>>1,w[I+1+0]=Sr($,ee,ge),w[I+3+0]=w[I+1+32]=Sr(ee,ge,Se),w[I+3+32]=w[I+1+64]=Sr(ge,Se,Se),w[I+3+64]=w[I+2+64]=w[I+0+96]=w[I+1+96]=w[I+2+96]=w[I+3+96]=Se}function Ni(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1+96],Le=w[I-1-32],Pe=w[I+0-32],Me=w[I+1-32],je=w[I+2-32];w[I+0+0]=w[I+2+32]=$+Le+1>>1,w[I+0+32]=w[I+2+64]=ee+$+1>>1,w[I+0+64]=w[I+2+96]=ge+ee+1>>1,w[I+0+96]=Se+ge+1>>1,w[I+3+0]=Sr(Pe,Me,je),w[I+2+0]=Sr(Le,Pe,Me),w[I+1+0]=w[I+3+32]=Sr($,Le,Pe),w[I+1+32]=w[I+3+64]=Sr(ee,$,Le),w[I+1+64]=w[I+3+96]=Sr(ge,ee,$),w[I+1+96]=Sr(Se,ge,ee)}function ha(w,I){var $;for($=0;8>$;++$)n(w,I+32*$,w,I-32,8)}function Ms(w,I){var $;for($=0;8>$;++$)s(w,I,w[I-1],8),I+=32}function hi(w,I,$){var ee;for(ee=0;8>ee;++ee)s(I,$+32*ee,w,8)}function jo(w,I){var $,ee=8;for($=0;8>$;++$)ee+=w[I+$-32]+w[I-1+32*$];hi(ee>>4,w,I)}function zl(w,I){var $,ee=4;for($=0;8>$;++$)ee+=w[I+$-32];hi(ee>>3,w,I)}function oa(w,I){var $,ee=4;for($=0;8>$;++$)ee+=w[I-1+32*$];hi(ee>>3,w,I)}function yo(w,I){hi(128,w,I)}function As(w,I,$){var ee=w[I-$],ge=w[I+0],Se=3*(ge-ee)+jc[1020+w[I-2*$]-w[I+$]],Le=lc[112+(Se+4>>3)];w[I-$]=oo[255+ee+lc[112+(Se+3>>3)]],w[I+0]=oo[255+ge-Le]}function Wc(w,I,$,ee){var ge=w[I+0],Se=w[I+$];return Qs[255+w[I-2*$]-w[I-$]]>ee||Qs[255+Se-ge]>ee}function Ql(w,I,$,ee){return 4*Qs[255+w[I-$]-w[I+0]]+Qs[255+w[I-2*$]-w[I+$]]<=ee}function Hl(w,I,$,ee,ge){var Se=w[I-3*$],Le=w[I-2*$],Pe=w[I-$],Me=w[I+0],je=w[I+$],lt=w[I+2*$],It=w[I+3*$];return 4*Qs[255+Pe-Me]+Qs[255+Le-je]>ee?0:Qs[255+w[I-4*$]-Se]<=ge&&Qs[255+Se-Le]<=ge&&Qs[255+Le-Pe]<=ge&&Qs[255+It-lt]<=ge&&Qs[255+lt-je]<=ge&&Qs[255+je-Me]<=ge}function ja(w,I,$,ee){var ge=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,I+ee,$,ge)&&As(w,I+ee,$)}function $o(w,I,$,ee){var ge=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,I+ee*$,1,ge)&&As(w,I+ee*$,1)}function Ys(w,I,$,ee){var ge;for(ge=3;0<ge;--ge)ja(w,I+=4*$,$,ee)}function Bo(w,I,$,ee){var ge;for(ge=3;0<ge;--ge)$o(w,I+=4,$,ee)}function Zs(w,I,$,ee,ge,Se,Le,Pe){for(Se=2*Se+1;0<ge--;){if(Hl(w,I,$,Se,Le))if(Wc(w,I,$,Pe))As(w,I,$);else{var Me=w,je=I,lt=$,It=Me[je-2*lt],Bt=Me[je-lt],xt=Me[je+0],Ft=Me[je+lt],Qt=Me[je+2*lt],ct=27*(lr=jc[1020+3*(xt-Bt)+jc[1020+It-Ft]])+63>>7,mt=18*lr+63>>7,lr=9*lr+63>>7;Me[je-3*lt]=oo[255+Me[je-3*lt]+lr],Me[je-2*lt]=oo[255+It+mt],Me[je-lt]=oo[255+Bt+ct],Me[je+0]=oo[255+xt-ct],Me[je+lt]=oo[255+Ft-mt],Me[je+2*lt]=oo[255+Qt-lr]}I+=ee}}function vo(w,I,$,ee,ge,Se,Le,Pe){for(Se=2*Se+1;0<ge--;){if(Hl(w,I,$,Se,Le))if(Wc(w,I,$,Pe))As(w,I,$);else{var Me=w,je=I,lt=$,It=Me[je-lt],Bt=Me[je+0],xt=Me[je+lt],Ft=lc[112+((Qt=3*(Bt-It))+4>>3)],Qt=lc[112+(Qt+3>>3)],ct=Ft+1>>1;Me[je-2*lt]=oo[255+Me[je-2*lt]+ct],Me[je-lt]=oo[255+It+Qt],Me[je+0]=oo[255+Bt-Ft],Me[je+lt]=oo[255+xt-ct]}I+=ee}}function fa(w,I,$,ee,ge,Se){Zs(w,I,$,1,16,ee,ge,Se)}function _s(w,I,$,ee,ge,Se){Zs(w,I,1,$,16,ee,ge,Se)}function io(w,I,$,ee,ge,Se){var Le;for(Le=3;0<Le;--Le)vo(w,I+=4*$,$,1,16,ee,ge,Se)}function qo(w,I,$,ee,ge,Se){var Le;for(Le=3;0<Le;--Le)vo(w,I+=4,1,$,16,ee,ge,Se)}function Eo(w,I,$,ee,ge,Se,Le,Pe){Zs(w,I,ge,1,8,Se,Le,Pe),Zs($,ee,ge,1,8,Se,Le,Pe)}function ic(w,I,$,ee,ge,Se,Le,Pe){Zs(w,I,1,ge,8,Se,Le,Pe),Zs($,ee,1,ge,8,Se,Le,Pe)}function aa(w,I,$,ee,ge,Se,Le,Pe){vo(w,I+4*ge,ge,1,8,Se,Le,Pe),vo($,ee+4*ge,ge,1,8,Se,Le,Pe)}function rl(w,I,$,ee,ge,Se,Le,Pe){vo(w,I+4,1,ge,8,Se,Le,Pe),vo($,ee+4,1,ge,8,Se,Le,Pe)}function Uo(){this.ba=new Gi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Va(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wo(){this.ua=0,this.Wa=new Ue,this.vb=new Ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new Z}function xu(){this.xb=this.a=0,this.l=new sa,this.ca=new Gi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wo,this.ab=0,this.gc=c(4,Vl),this.Oc=0}function pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xo(w,I,$,ee,ge,Se,Le){for(w=w==null?0:w[I+0],I=0;I<Le;++I)ge[Se+I]=w+$[ee+I]&255,w=ge[Se+I]}function Gl(w,I,$,ee,ge,Se,Le){var Pe;if(w==null)xo(null,null,$,ee,ge,Se,Le);else for(Pe=0;Pe<Le;++Pe)ge[Se+Pe]=w[I+Pe]+$[ee+Pe]&255}function _o(w,I,$,ee,ge,Se,Le){if(w==null)xo(null,null,$,ee,ge,Se,Le);else{var Pe,Me=w[I+0],je=Me,lt=Me;for(Pe=0;Pe<Le;++Pe)je=lt+(Me=w[I+Pe])-je,lt=$[ee+Pe]+(-256&je?0>je?0:255:je)&255,je=Me,ge[Se+Pe]=lt}}function $l(w,I,$,ee){var ge=I.width,Se=I.o;if(e(w!=null&&I!=null),0>$||0>=ee||$+ee>Se)return null;if(!w.Cc){if(w.ga==null){var Le;if(w.ga=new pa,(Le=w.ga==null)||(Le=I.width*I.o,e(w.Gb.length==0),w.Gb=o(Le),w.Uc=0,w.Gb==null?Le=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Le=1),Le=!Le),!Le){Le=w.ga;var Pe=w.Fa,Me=w.P,je=w.qc,lt=w.mb,It=w.nb,Bt=Me+1,xt=je-1,Ft=Le.l;if(e(Pe!=null&&lt!=null&&I!=null),Ta[0]=null,Ta[1]=xo,Ta[2]=Gl,Ta[3]=_o,Le.ca=lt,Le.tb=It,Le.c=I.width,Le.i=I.height,e(0<Le.c&&0<Le.i),1>=je)I=0;else if(Le.$a=Pe[Me+0]>>0&3,Le.Z=Pe[Me+0]>>2&3,Le.Lc=Pe[Me+0]>>4&3,Me=Pe[Me+0]>>6&3,0>Le.$a||1<Le.$a||4<=Le.Z||1<Le.Lc||Me)I=0;else if(Ft.put=ur,Ft.ac=ri,Ft.bc=We,Ft.ma=Le,Ft.width=I.width,Ft.height=I.height,Ft.Da=I.Da,Ft.v=I.v,Ft.va=I.va,Ft.j=I.j,Ft.o=I.o,Le.$a)e:{e(Le.$a==1),I=_n();t:for(;;){if(I==null){I=0;break e}if(e(Le!=null),Le.mc=I,I.c=Le.c,I.i=Le.i,I.l=Le.l,I.l.ma=Le,I.l.width=Le.c,I.l.height=Le.i,I.a=0,_e(I.m,Pe,Bt,xt),!Un(Le.c,Le.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&xr(I.s)?(Le.ic=1,Pe=I.c*I.i,I.Ta=null,I.Ua=0,I.V=o(Pe),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(Le.ic=0,I=qn(I,Le.c)),!I))break t;I=1;break e}Le.mc=null,I=0}else I=xt>=Le.c*Le.i;Le=!I}if(Le)return null;w.ga.Lc!=1?w.Ga=0:ee=Se-$}e(w.ga!=null),e($+ee<=Se);e:{if(I=(Pe=w.ga).c,Se=Pe.l.o,Pe.$a==0){if(Bt=w.rc,xt=w.Vc,Ft=w.Fa,Me=w.P+1+$*I,je=w.mb,lt=w.nb+$*I,e(Me<=w.P+w.qc),Pe.Z!=0)for(e(Ta[Pe.Z]!=null),Le=0;Le<ee;++Le)Ta[Pe.Z](Bt,xt,Ft,Me,je,lt,I),Bt=je,xt=lt,lt+=I,Me+=I;else for(Le=0;Le<ee;++Le)n(je,lt,Ft,Me,I),Bt=je,xt=lt,lt+=I,Me+=I;w.rc=Bt,w.Vc=xt}else{if(e(Pe.mc!=null),I=$+ee,e((Le=Pe.mc)!=null),e(I<=Le.i),Le.C>=I)I=1;else if(Pe.ic||St(),Pe.ic){Pe=Le.V,Bt=Le.Ba,xt=Le.c;var Qt=Le.i,ct=(Ft=1,Me=Le.$/xt,je=Le.$%xt,lt=Le.m,It=Le.s,Le.$),mt=xt*Qt,lr=xt*I,mr=It.wc,dr=ct<lr?Wt(It,je,Me):null;e(ct<=mt),e(I<=Qt),e(xr(It));t:for(;;){for(;!lt.h&&ct<lr;){if(je&mr||(dr=Wt(It,je,Me)),e(dr!=null),Qe(lt),256>(Qt=Ct(dr.G[0],dr.H[0],lt)))Pe[Bt+ct]=Qt,++ct,++je>=xt&&(je=0,++Me<=I&&!(Me%16)&&Lr(Le,Me));else{if(!(280>Qt)){Ft=0;break t}Qt=pt(Qt-256,lt);var Xr,Or=Ct(dr.G[4],dr.H[4],lt);if(Qe(lt),!(ct>=(Or=Lt(xt,Or=pt(Or,lt)))&&mt-ct>=Qt)){Ft=0;break t}for(Xr=0;Xr<Qt;++Xr)Pe[Bt+ct+Xr]=Pe[Bt+ct+Xr-Or];for(ct+=Qt,je+=Qt;je>=xt;)je-=xt,++Me<=I&&!(Me%16)&&Lr(Le,Me);ct<lr&&je&mr&&(dr=Wt(It,je,Me))}e(lt.h==pe(lt))}Lr(Le,Me>I?I:Me);break t}!Ft||lt.h&&ct<mt?(Ft=0,Le.a=lt.h?5:3):Le.$=ct,I=Ft}else I=rn(Le,Le.V,Le.Ba,Le.c,Le.i,I,Wn);if(!I){ee=0;break e}}$+ee>=Se&&(w.Cc=1),ee=1}if(!ee)return null;if(w.Cc&&((ee=w.ga)!=null&&(ee.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+$*ge}function k(w,I,$,ee,ge,Se){for(;0<ge--;){var Le,Pe=w,Me=I+($?1:0),je=w,lt=I+($?0:3);for(Le=0;Le<ee;++Le){var It=je[lt+4*Le];It!=255&&(It*=32897,Pe[Me+4*Le+0]=Pe[Me+4*Le+0]*It>>23,Pe[Me+4*Le+1]=Pe[Me+4*Le+1]*It>>23,Pe[Me+4*Le+2]=Pe[Me+4*Le+2]*It>>23)}I+=Se}}function me(w,I,$,ee,ge){for(;0<ee--;){var Se;for(Se=0;Se<$;++Se){var Le=w[I+2*Se+0],Pe=15&(je=w[I+2*Se+1]),Me=4369*Pe,je=(240&je|je>>4)*Me>>16;w[I+2*Se+0]=(240&Le|Le>>4)*Me>>16&240|(15&Le|Le<<4)*Me>>16>>4&15,w[I+2*Se+1]=240&je|Pe}I+=ge}}function Xe(w,I,$,ee,ge,Se,Le,Pe){var Me,je,lt=255;for(je=0;je<ge;++je){for(Me=0;Me<ee;++Me){var It=w[I+Me];Se[Le+4*Me]=It,lt&=It}I+=$,Le+=Pe}return lt!=255}function ot(w,I,$,ee,ge){var Se;for(Se=0;Se<ge;++Se)$[ee+Se]=w[I+Se]>>8}function St(){to=k,Cs=me,Ji=Xe,oi=ot}function qt(w,I,$){K[w]=function(ee,ge,Se,Le,Pe,Me,je,lt,It,Bt,xt,Ft,Qt,ct,mt,lr,mr){var dr,Xr=mr-1>>1,Or=Pe[Me+0]|je[lt+0]<<16,bn=It[Bt+0]|xt[Ft+0]<<16;e(ee!=null);var zr=3*Or+bn+131074>>2;for(I(ee[ge+0],255&zr,zr>>16,Qt,ct),Se!=null&&(zr=3*bn+Or+131074>>2,I(Se[Le+0],255&zr,zr>>16,mt,lr)),dr=1;dr<=Xr;++dr){var ci=Pe[Me+dr]|je[lt+dr]<<16,fi=It[Bt+dr]|xt[Ft+dr]<<16,$n=Or+ci+bn+fi+524296,ti=$n+2*(ci+bn)>>3;zr=ti+Or>>1,Or=($n=$n+2*(Or+fi)>>3)+ci>>1,I(ee[ge+2*dr-1],255&zr,zr>>16,Qt,ct+(2*dr-1)*$),I(ee[ge+2*dr-0],255&Or,Or>>16,Qt,ct+(2*dr-0)*$),Se!=null&&(zr=$n+bn>>1,Or=ti+fi>>1,I(Se[Le+2*dr-1],255&zr,zr>>16,mt,lr+(2*dr-1)*$),I(Se[Le+2*dr+0],255&Or,Or>>16,mt,lr+(2*dr+0)*$)),Or=ci,bn=fi}1&mr||(zr=3*Or+bn+131074>>2,I(ee[ge+mr-1],255&zr,zr>>16,Qt,ct+(mr-1)*$),Se!=null&&(zr=3*bn+Or+131074>>2,I(Se[Le+mr-1],255&zr,zr>>16,mt,lr+(mr-1)*$)))}}function gr(){uo[cc]=it,uo[Mc]=Oe,uo[_u]=ye,uo[Sc]=nt,uo[iu]=Xt,uo[id]=Qr,uo[eh]=Xn,uo[sd]=Oe,uo[Cd]=nt,uo[bu]=Xt,uo[th]=Qr}function $r(w){return w&~jp?0>w?0:255:w>>Xf}function An(w,I){return $r((19077*w>>8)+(26149*I>>8)-14234)}function En(w,I,$){return $r((19077*w>>8)-(6419*I>>8)-(13320*$>>8)+8708)}function qr(w,I){return $r((19077*w>>8)+(33050*I>>8)-17685)}function Dr(w,I,$,ee,ge){ee[ge+0]=An(w,$),ee[ge+1]=En(w,I,$),ee[ge+2]=qr(w,I)}function bi(w,I,$,ee,ge){ee[ge+0]=qr(w,I),ee[ge+1]=En(w,I,$),ee[ge+2]=An(w,$)}function gn(w,I,$,ee,ge){var Se=En(w,I,$);I=Se<<3&224|qr(w,I)>>3,ee[ge+0]=248&An(w,$)|Se>>5,ee[ge+1]=I}function Fi(w,I,$,ee,ge){var Se=240&qr(w,I)|15;ee[ge+0]=240&An(w,$)|En(w,I,$)>>4,ee[ge+1]=Se}function bs(w,I,$,ee,ge){ee[ge+0]=255,Dr(w,I,$,ee,ge+1)}function vn(w,I,$,ee,ge){bi(w,I,$,ee,ge),ee[ge+3]=255}function lo(w,I,$,ee,ge){Dr(w,I,$,ee,ge),ee[ge+3]=255}function Js(w,I){return 0>w?0:w>I?I:w}function Yo(w,I,$){K[w]=function(ee,ge,Se,Le,Pe,Me,je,lt,It){for(var Bt=lt+(-2&It)*$;lt!=Bt;)I(ee[ge+0],Se[Le+0],Pe[Me+0],je,lt),I(ee[ge+1],Se[Le+0],Pe[Me+0],je,lt+$),ge+=2,++Le,++Me,lt+=2*$;1&It&&I(ee[ge+0],Se[Le+0],Pe[Me+0],je,lt)}}function nl(w,I,$){return $==0?w==0?I==0?6:5:I==0?4:0:$}function il(w,I,$,ee,ge){switch(w>>>30){case 3:bo(I,$,ee,ge,0);break;case 2:Zi(I,$,ee,ge);break;case 1:Bs(I,$,ee,ge)}}function so(w,I){var $,ee,ge=I.M,Se=I.Nb,Le=w.oc,Pe=w.pc+40,Me=w.oc,je=w.pc+584,lt=w.oc,It=w.pc+600;for($=0;16>$;++$)Le[Pe+32*$-1]=129;for($=0;8>$;++$)Me[je+32*$-1]=129,lt[It+32*$-1]=129;for(0<ge?Le[Pe-1-32]=Me[je-1-32]=lt[It-1-32]=129:(s(Le,Pe-32-1,127,21),s(Me,je-32-1,127,9),s(lt,It-32-1,127,9)),ee=0;ee<w.za;++ee){var Bt=I.ya[I.aa+ee];if(0<ee){for($=-1;16>$;++$)n(Le,Pe+32*$-4,Le,Pe+32*$+12,4);for($=-1;8>$;++$)n(Me,je+32*$-4,Me,je+32*$+4,4),n(lt,It+32*$-4,lt,It+32*$+4,4)}var xt=w.Gd,Ft=w.Hd+ee,Qt=Bt.ad,ct=Bt.Hc;if(0<ge&&(n(Le,Pe-32,xt[Ft].y,0,16),n(Me,je-32,xt[Ft].f,0,8),n(lt,It-32,xt[Ft].ea,0,8)),Bt.Za){var mt=Le,lr=Pe-32+16;for(0<ge&&(ee>=w.za-1?s(mt,lr,xt[Ft].y[15],4):n(mt,lr,xt[Ft+1].y,0,4)),$=0;4>$;$++)mt[lr+128+$]=mt[lr+256+$]=mt[lr+384+$]=mt[lr+0+$];for($=0;16>$;++$,ct<<=2)mt=Le,lr=Pe+Mp[$],Mo[Bt.Ob[$]](mt,lr),il(ct,Qt,16*+$,mt,lr)}else if(mt=nl(ee,ge,Bt.Ob[0]),vl[mt](Le,Pe),ct!=0)for($=0;16>$;++$,ct<<=2)il(ct,Qt,16*+$,Le,Pe+Mp[$]);for($=Bt.Gc,mt=nl(ee,ge,Bt.Dd),qa[mt](Me,je),qa[mt](lt,It),ct=Qt,mt=Me,lr=je,255&(Bt=$>>0)&&(170&Bt?Ds(ct,256,mt,lr):zs(ct,256,mt,lr)),Bt=lt,ct=It,255&($>>=8)&&(170&$?Ds(Qt,320,Bt,ct):zs(Qt,320,Bt,ct)),ge<w.Ub-1&&(n(xt[Ft].y,0,Le,Pe+480,16),n(xt[Ft].f,0,Me,je+224,8),n(xt[Ft].ea,0,lt,It+224,8)),$=8*Se*w.B,xt=w.sa,Ft=w.ta+16*ee+16*Se*w.R,Qt=w.qa,Bt=w.ra+8*ee+$,ct=w.Ha,mt=w.Ia+8*ee+$,$=0;16>$;++$)n(xt,Ft+$*w.R,Le,Pe+32*$,16);for($=0;8>$;++$)n(Qt,Bt+$*w.B,Me,je+32*$,8),n(ct,mt+$*w.B,lt,It+32*$,8)}}function Ga(w,I,$,ee,ge,Se,Le,Pe,Me){var je=[0],lt=[0],It=0,Bt=Me!=null?Me.kd:0,xt=Me??new Va;if(w==null||12>$)return 7;xt.data=w,xt.w=I,xt.ha=$,I=[I],$=[$],xt.gb=[xt.gb];e:{var Ft=I,Qt=$,ct=xt.gb;if(e(w!=null),e(Qt!=null),e(ct!=null),ct[0]=0,12<=Qt[0]&&!r(w,Ft[0],"RIFF")){if(r(w,Ft[0]+8,"WEBP")){ct=3;break e}var mt=ir(w,Ft[0]+4);if(12>mt||4294967286<mt){ct=3;break e}if(Bt&&mt>Qt[0]-8){ct=7;break e}ct[0]=mt,Ft[0]+=12,Qt[0]-=12}ct=0}if(ct!=0)return ct;for(mt=0<xt.gb[0],$=$[0];;){e:{var lr=w;Qt=I,ct=$;var mr=je,dr=lt,Xr=Ft=[0];if((zr=It=[It])[0]=0,8>ct[0])ct=7;else{if(!r(lr,Qt[0],"VP8X")){if(ir(lr,Qt[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var Or=ir(lr,Qt[0]+8),bn=1+Mt(lr,Qt[0]+12);if(2147483648<=bn*(lr=1+Mt(lr,Qt[0]+15))){ct=3;break e}Xr!=null&&(Xr[0]=Or),mr!=null&&(mr[0]=bn),dr!=null&&(dr[0]=lr),Qt[0]+=18,ct[0]-=18,zr[0]=1}ct=0}}if(It=It[0],Ft=Ft[0],ct!=0)return ct;if(Qt=!!(2&Ft),!mt&&It)return 3;if(Se!=null&&(Se[0]=!!(16&Ft)),Le!=null&&(Le[0]=Qt),Pe!=null&&(Pe[0]=0),Le=je[0],Ft=lt[0],It&&Qt&&Me==null){ct=0;break}if(4>$){ct=7;break}if(mt&&It||!mt&&!It&&!r(w,I[0],"ALPH")){$=[$],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Or=w,ct=I,mt=$;var zr=xt.gb;mr=xt.na,dr=xt.P,Xr=xt.Sa,bn=22,e(Or!=null),e(mt!=null),lr=ct[0];var ci=mt[0];for(e(mr!=null),e(Xr!=null),mr[0]=null,dr[0]=null,Xr[0]=0;;){if(ct[0]=lr,mt[0]=ci,8>ci){ct=7;break e}var fi=ir(Or,lr+4);if(4294967286<fi){ct=3;break e}var $n=8+fi+1&-2;if(bn+=$n,0<zr&&bn>zr){ct=3;break e}if(!r(Or,lr,"VP8 ")||!r(Or,lr,"VP8L")){ct=0;break e}if(ci[0]<$n){ct=7;break e}r(Or,lr,"ALPH")||(mr[0]=Or,dr[0]=lr+8,Xr[0]=fi),lr+=$n,ci-=$n}}if($=$[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],ct!=0)break}$=[$],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(zr=w,ct=I,mt=$,mr=xt.gb[0],dr=xt.Ja,Xr=xt.xa,Or=ct[0],lr=!r(zr,Or,"VP8 "),bn=!r(zr,Or,"VP8L"),e(zr!=null),e(mt!=null),e(dr!=null),e(Xr!=null),8>mt[0])ct=7;else{if(lr||bn){if(zr=ir(zr,Or+4),12<=mr&&zr>mr-12){ct=3;break e}if(Bt&&zr>mt[0]-8){ct=7;break e}dr[0]=zr,ct[0]+=8,mt[0]-=8,Xr[0]=bn}else Xr[0]=5<=mt[0]&&zr[Or+0]==47&&!(zr[Or+4]>>5),dr[0]=mt[0];ct=0}if($=$[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],I=I[0],ct!=0)break;if(4294967286<xt.Ja)return 3;if(Pe==null||Qt||(Pe[0]=xt.xa?2:1),Le=[Le],Ft=[Ft],xt.xa){if(5>$){ct=7;break}Pe=Le,Bt=Ft,Qt=Se,w==null||5>$?w=0:5<=$&&w[I+0]==47&&!(w[I+4]>>5)?(mt=[0],zr=[0],mr=[0],_e(dr=new ie,w,I,$),qe(dr,mt,zr,mr)?(Pe!=null&&(Pe[0]=mt[0]),Bt!=null&&(Bt[0]=zr[0]),Qt!=null&&(Qt[0]=mr[0]),w=1):w=0):w=0}else{if(10>$){ct=7;break}Pe=Ft,w==null||10>$||!Nc(w,I+3,$-3)?w=0:(Bt=w[I+0]|w[I+1]<<8|w[I+2]<<16,Qt=16383&(w[I+7]<<8|w[I+6]),w=16383&(w[I+9]<<8|w[I+8]),1&Bt||3<(Bt>>1&7)||!(Bt>>4&1)||Bt>>5>=xt.Ja||!Qt||!w?w=0:(Le&&(Le[0]=Qt),Pe&&(Pe[0]=w),w=1))}if(!w||(Le=Le[0],Ft=Ft[0],It&&(je[0]!=Le||lt[0]!=Ft)))return 3;Me!=null&&(Me[0]=xt,Me.offset=I-Me.w,e(4294967286>I-Me.w),e(Me.offset==Me.ha-$));break}return ct==0||ct==7&&It&&Me==null?(Se!=null&&(Se[0]|=xt.na!=null&&0<xt.na.length),ee!=null&&(ee[0]=Le),ge!=null&&(ge[0]=Ft),0):ct}function Ea(w,I,$){var ee=I.width,ge=I.height,Se=0,Le=0,Pe=ee,Me=ge;if(I.Da=w!=null&&0<w.Da,I.Da&&(Pe=w.cd,Me=w.bd,Se=w.v,Le=w.j,11>$||(Se&=-2,Le&=-2),0>Se||0>Le||0>=Pe||0>=Me||Se+Pe>ee||Le+Me>ge))return 0;if(I.v=Se,I.j=Le,I.va=Se+Pe,I.o=Le+Me,I.U=Pe,I.T=Me,I.da=w!=null&&0<w.da,I.da){if(!hr(Pe,Me,$=[w.ib],Se=[w.hb]))return 0;I.ib=$[0],I.hb=Se[0]}return I.ob=w!=null&&w.ob,I.Kb=w==null||!w.Sd,I.da&&(I.ob=I.ib<3*ee/4&&I.hb<3*ge/4,I.Kb=0),1}function Zo(w){if(w==null)return 2;if(11>w.S){var I=w.f.RGBA;I.fb+=(w.height-1)*I.A,I.A=-I.A}else I=w.f.kb,w=w.height,I.O+=(w-1)*I.fa,I.fa=-I.fa,I.N+=(w-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(w-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(w-1)*I.lb,I.lb=-I.lb);return 0}function Ma(w,I,$,ee){if(ee==null||0>=w||0>=I)return 2;if($!=null){if($.Da){var ge=$.cd,Se=$.bd,Le=-2&$.v,Pe=-2&$.j;if(0>Le||0>Pe||0>=ge||0>=Se||Le+ge>w||Pe+Se>I)return 2;w=ge,I=Se}if($.da){if(!hr(w,I,ge=[$.ib],Se=[$.hb]))return 2;w=ge[0],I=Se[0]}}ee.width=w,ee.height=I;e:{var Me=ee.width,je=ee.height;if(w=ee.S,0>=Me||0>=je||!(w>=cc&&13>w))w=2;else{if(0>=ee.Rd&&ee.sd==null){Le=Se=ge=I=0;var lt=(Pe=Me*lf[w])*je;if(11>w||(Se=(je+1)/2*(I=(Me+1)/2),w==12&&(Le=(ge=Me)*je)),(je=o(lt+2*Se+Le))==null){w=1;break e}ee.sd=je,11>w?((Me=ee.f.RGBA).eb=je,Me.fb=0,Me.A=Pe,Me.size=lt):((Me=ee.f.kb).y=je,Me.O=0,Me.fa=Pe,Me.Fd=lt,Me.f=je,Me.N=0+lt,Me.Ab=I,Me.Cd=Se,Me.ea=je,Me.W=0+lt+Se,Me.Db=I,Me.Ed=Se,w==12&&(Me.F=je,Me.J=0+lt+2*Se),Me.Tc=Le,Me.lb=ge)}if(I=1,ge=ee.S,Se=ee.width,Le=ee.height,ge>=cc&&13>ge)if(11>ge)w=ee.f.RGBA,I&=(Pe=Math.abs(w.A))*(Le-1)+Se<=w.size,I&=Pe>=Se*lf[ge],I&=w.eb!=null;else{w=ee.f.kb,Pe=(Se+1)/2,lt=(Le+1)/2,Me=Math.abs(w.fa),je=Math.abs(w.Ab);var It=Math.abs(w.Db),Bt=Math.abs(w.lb),xt=Bt*(Le-1)+Se;I&=Me*(Le-1)+Se<=w.Fd,I&=je*(lt-1)+Pe<=w.Cd,I=(I&=It*(lt-1)+Pe<=w.Ed)&Me>=Se&je>=Pe&It>=Pe,I&=w.y!=null,I&=w.f!=null,I&=w.ea!=null,ge==12&&(I&=Bt>=Se,I&=xt<=w.Tc,I&=w.F!=null)}else I=0;w=I?0:2}}return w!=0||$!=null&&$.fd&&(w=Zo(ee)),w}var Ki=64,us=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],la=24,Yr=32,sc=8,ws=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Kt("Predictor0","PredictorAdd0"),K.Predictor0=function(){return 4278190080},K.Predictor1=function(w){return w},K.Predictor2=function(w,I,$){return I[$+0]},K.Predictor3=function(w,I,$){return I[$+1]},K.Predictor4=function(w,I,$){return I[$-1]},K.Predictor5=function(w,I,$){return nr(nr(w,I[$+1]),I[$+0])},K.Predictor6=function(w,I,$){return nr(w,I[$-1])},K.Predictor7=function(w,I,$){return nr(w,I[$+0])},K.Predictor8=function(w,I,$){return nr(I[$-1],I[$+0])},K.Predictor9=function(w,I,$){return nr(I[$+0],I[$+1])},K.Predictor10=function(w,I,$){return nr(nr(w,I[$-1]),nr(I[$+0],I[$+1]))},K.Predictor11=function(w,I,$){var ee=I[$+0];return 0>=Ir(ee>>24&255,w>>24&255,(I=I[$-1])>>24&255)+Ir(ee>>16&255,w>>16&255,I>>16&255)+Ir(ee>>8&255,w>>8&255,I>>8&255)+Ir(255&ee,255&w,255&I)?ee:w},K.Predictor12=function(w,I,$){var ee=I[$+0];return(Nr((w>>24&255)+(ee>>24&255)-((I=I[$-1])>>24&255))<<24|Nr((w>>16&255)+(ee>>16&255)-(I>>16&255))<<16|Nr((w>>8&255)+(ee>>8&255)-(I>>8&255))<<8|Nr((255&w)+(255&ee)-(255&I)))>>>0},K.Predictor13=function(w,I,$){var ee=I[$-1];return(on((w=nr(w,I[$+0]))>>24&255,ee>>24&255)<<24|on(w>>16&255,ee>>16&255)<<16|on(w>>8&255,ee>>8&255)<<8|on(w>>0&255,ee>>0&255))>>>0};var oc=K.PredictorAdd0;K.PredictorAdd1=cn,Kt("Predictor2","PredictorAdd2"),Kt("Predictor3","PredictorAdd3"),Kt("Predictor4","PredictorAdd4"),Kt("Predictor5","PredictorAdd5"),Kt("Predictor6","PredictorAdd6"),Kt("Predictor7","PredictorAdd7"),Kt("Predictor8","PredictorAdd8"),Kt("Predictor9","PredictorAdd9"),Kt("Predictor10","PredictorAdd10"),Kt("Predictor11","PredictorAdd11"),Kt("Predictor12","PredictorAdd12"),Kt("Predictor13","PredictorAdd13");var yl=K.PredictorAdd2;ar("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ar("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var ql,ks=K.ColorIndexInverseTransform,Jo=K.MapARGB,Aa=K.VP8LColorIndexInverseTransformAlpha,Pc=K.MapAlpha,yr=K.VP8LPredictorsAdd=[];yr.length=16,(K.VP8LPredictors=[]).length=16,(K.VP8LPredictorsAdd_C=[]).length=16,(K.VP8LPredictors_C=[]).length=16;var Mr,xn,kn,ns,xi,ms,ds,bo,Zi,Ds,Bs,zs,eo,ea,ma,ta,ra,$s,ga,hs,os,Tn,mi,co,to,Cs,Ji,oi,qs=o(511),sl=o(2041),ac=o(225),ol=o(767),$a=0,jc=sl,lc=ac,oo=ol,Qs=qs,cc=0,Mc=1,_u=2,Sc=3,iu=4,id=5,eh=6,sd=7,Cd=8,bu=9,th=10,kc=[2,3,7],Sd=[3,3,11],vh=[280,256,256,256,40],Wl=[0,1,1,1,0],sf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_h=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bh=8,od=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Dc=null,Kl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ad=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Pp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vl=[],Mo=[],qa=[],Kf=1,Ed=2,Ta=[],uo=[];qt("UpsampleRgbLinePair",Dr,3),qt("UpsampleBgrLinePair",bi,3),qt("UpsampleRgbaLinePair",lo,4),qt("UpsampleBgraLinePair",vn,4),qt("UpsampleArgbLinePair",bs,4),qt("UpsampleRgba4444LinePair",Fi,2),qt("UpsampleRgb565LinePair",gn,2);var it=K.UpsampleRgbLinePair,ye=K.UpsampleBgrLinePair,Oe=K.UpsampleRgbaLinePair,nt=K.UpsampleBgraLinePair,Xt=K.UpsampleArgbLinePair,Qr=K.UpsampleRgba4444LinePair,Xn=K.UpsampleRgb565LinePair,Si=16,Di=1<<Si-1,Hs=-227,Oc=482,Xf=6,jp=(256<<Xf)-1,wh=0,bA=o(256),wA=o(256),of=o(256),cg=o(256),CA=o(Oc-Hs),SA=o(Oc-Hs);Yo("YuvToRgbRow",Dr,3),Yo("YuvToBgrRow",bi,3),Yo("YuvToRgbaRow",lo,4),Yo("YuvToBgraRow",vn,4),Yo("YuvToArgbRow",bs,4),Yo("YuvToRgba4444Row",Fi,2),Yo("YuvToRgb565Row",gn,2);var Mp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cu=[0,2,8],Yf=[8,7,6,4,4,2,2,2,1,1,1,1],af=1;this.WebPDecodeRGBA=function(w,I,$,ee,ge){var Se=Mc,Le=new Uo,Pe=new Gi;Le.ba=Pe,Pe.S=Se,Pe.width=[Pe.width],Pe.height=[Pe.height];var Me=Pe.width,je=Pe.height,lt=new Rn;if(lt==null||w==null)var It=2;else e(lt!=null),It=Ga(w,I,$,lt.width,lt.height,lt.Pd,lt.Qd,lt.format,null);if(It!=0?Me=0:(Me!=null&&(Me[0]=lt.width[0]),je!=null&&(je[0]=lt.height[0]),Me=1),Me){Pe.width=Pe.width[0],Pe.height=Pe.height[0],ee!=null&&(ee[0]=Pe.width),ge!=null&&(ge[0]=Pe.height);e:{if(ee=new sa,(ge=new Va).data=w,ge.w=I,ge.ha=$,ge.kd=1,I=[0],e(ge!=null),((w=Ga(ge.data,ge.w,ge.ha,null,null,null,I,null,ge))==0||w==7)&&I[0]&&(w=4),(I=w)==0){if(e(Le!=null),ee.data=ge.data,ee.w=ge.w+ge.offset,ee.ha=ge.ha-ge.offset,ee.put=ur,ee.ac=ri,ee.bc=We,ee.ma=Le,ge.xa){if((w=_n())==null){Le=1;break e}if(function(Bt,xt){var Ft=[0],Qt=[0],ct=[0];t:for(;;){if(Bt==null)return 0;if(xt==null)return Bt.a=2,0;if(Bt.l=xt,Bt.a=0,_e(Bt.m,xt.data,xt.w,xt.ha),!qe(Bt.m,Ft,Qt,ct)){Bt.a=3;break t}if(Bt.xb=Ed,xt.width=Ft[0],xt.height=Qt[0],!Un(Ft[0],Qt[0],1,Bt,null))break t;return 1}return e(Bt.a!=0),0}(w,ee)){if(ee=(I=Ma(ee.width,ee.height,Le.Oa,Le.ba))==0){t:{ee=w;r:for(;;){if(ee==null){ee=0;break t}if(e(ee.s.yc!=null),e(ee.s.Ya!=null),e(0<ee.s.Wb),e(($=ee.l)!=null),e((ge=$.ma)!=null),ee.xb!=0){if(ee.ca=ge.ba,ee.tb=ge.tb,e(ee.ca!=null),!Ea(ge.Oa,$,Sc)){ee.a=2;break r}if(!qn(ee,$.width)||$.da)break r;if(($.da||Bn(ee.ca.S))&&St(),11>ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ee.ca.f.kb.F!=null&&St()),ee.Pb&&0<ee.s.ua&&ee.s.vb.X==null&&!Ar(ee.s.vb,ee.s.Wa.Xa)){ee.a=1;break r}ee.xb=0}if(!rn(ee,ee.V,ee.Ba,ee.c,ee.i,$.o,fr))break r;ge.Dc=ee.Ma,ee=1;break t}e(ee.a!=0),ee=0}ee=!ee}ee&&(I=w.a)}else I=w.a}else{if((w=new Ha)==null){Le=1;break e}if(w.Fa=ge.na,w.P=ge.P,w.qc=ge.Sa,nc(w,ee)){if((I=Ma(ee.width,ee.height,Le.Oa,Le.ba))==0){if(w.Aa=0,$=Le.Oa,e((ge=w)!=null),$!=null){if(0<(Me=0>(Me=$.Md)?0:100<Me?255:255*Me/100)){for(je=lt=0;4>je;++je)12>(It=ge.pb[je]).lc&&(It.ia=Me*Yf[0>It.lc?0:It.lc]>>3),lt|=It.ia;lt&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=$.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}Pa(w,ee)||(I=w.a)}}else I=w.a}I==0&&Le.Oa!=null&&Le.Oa.fd&&(I=Zo(Le.ba))}Le=I}Se=Le!=0?null:11>Se?Pe.f.RGBA.eb:Pe.f.kb.y}else Se=null;return Se};var lf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(K,de){for(var we="",J=0;J<4;J++)we+=String.fromCharCode(K[de++]);return we}function g(K,de){return(K[de+0]<<0|K[de+1]<<8|K[de+2]<<16)>>>0}function C(K,de){return(K[de+0]<<0|K[de+1]<<8|K[de+2]<<16|K[de+3]<<24)>>>0}new i;var B=[0],S=[0],P=[],j=new i,D=t,F=function(K,de){var we={},J=0,Z=!1,Ie=0,be=0;if(we.frames=[],!function(le,pe,fe,Qe){for(var Ke=0;Ke<Qe;Ke++)if(le[pe+Ke]!=fe.charCodeAt(Ke))return!0;return!1}(K,de,"RIFF",4)){for(C(K,de+=4),de+=8;de<K.length;){var He=m(K,de),Fe=C(K,de+=4);de+=4;var ve=Fe+(1&Fe);switch(He){case"VP8 ":case"VP8L":we.frames[J]===void 0&&(we.frames[J]={}),(Ne=we.frames[J]).src_off=Z?be:de-8,Ne.src_size=Ie+Fe+8,J++,Z&&(Z=!1,Ie=0,be=0);break;case"VP8X":(Ne=we.header={}).feature_flags=K[de];var _e=de+4;Ne.canvas_width=1+g(K,_e),_e+=3,Ne.canvas_height=1+g(K,_e),_e+=3;break;case"ALPH":Z=!0,Ie=ve+8,be=de-8;break;case"ANIM":(Ne=we.header).bgcolor=C(K,de),_e=de+4,Ne.loop_count=(st=K)[(ie=_e)+0]<<0|st[ie+1]<<8,_e+=2;break;case"ANMF":var ze,Ne;(Ne=we.frames[J]={}).offset_x=2*g(K,de),de+=3,Ne.offset_y=2*g(K,de),de+=3,Ne.width=1+g(K,de),de+=3,Ne.height=1+g(K,de),de+=3,Ne.duration=g(K,de),de+=3,ze=K[de++],Ne.dispose=1&ze,Ne.blend=ze>>1&1}He!="ANMF"&&(de+=ve)}var st,ie;return we}}(D,0);F.response=D,F.rgbaoutput=!0,F.dataurl=!1;var R=F.header?F.header:null,V=F.frames?F.frames:null;if(R){R.loop_counter=R.loop_count,B=[R.canvas_height],S=[R.canvas_width];for(var Y=0;Y<V.length&&V[Y].blend!=0;Y++);}var te=V[0],se=j.WebPDecodeRGBA(D,te.src_off,te.src_size,S,B);te.rgba=se,te.imgwidth=S[0],te.imgheight=B[0];for(var oe=0;oe<S[0]*B[0]*4;oe++)P[oe]=se[oe];return this.width=S,this.height=B,this.data=P,this}(function(t){var e=function(){return typeof sL=="function"},r=function(B,S,P,j){var D=4,F=c;switch(j){case t.image_compression.FAST:D=1,F=o;break;case t.image_compression.MEDIUM:D=6,F=u;break;case t.image_compression.SLOW:D=9,F=i}B=n(B,S,P,F);var R=sL(B,{level:D});return t.__addimage__.arrayBufferToBinaryString(R)},n=function(B,S,P,j){for(var D,F,R,V=B.length/S,Y=new Uint8Array(B.length+V),te=g(),se=0;se<V;se+=1){if(R=se*S,D=B.subarray(R,R+S),j)Y.set(j(D,P,F),R+se);else{for(var oe,K=te.length,de=[];oe<K;oe+=1)de[oe]=te[oe](D,P,F);var we=C(de.concat());Y.set(de[we],R+se)}F=D}return Y},s=function(B){var S=Array.apply([],B);return S.unshift(0),S},o=function(B,S){var P,j=[],D=B.length;j[0]=1;for(var F=0;F<D;F+=1)P=B[F-S]||0,j[F+1]=B[F]-P+256&255;return j},c=function(B,S,P){var j,D=[],F=B.length;D[0]=2;for(var R=0;R<F;R+=1)j=P&&P[R]||0,D[R+1]=B[R]-j+256&255;return D},u=function(B,S,P){var j,D,F=[],R=B.length;F[0]=3;for(var V=0;V<R;V+=1)j=B[V-S]||0,D=P&&P[V]||0,F[V+1]=B[V]+256-(j+D>>>1)&255;return F},i=function(B,S,P){var j,D,F,R,V=[],Y=B.length;V[0]=4;for(var te=0;te<Y;te+=1)j=B[te-S]||0,D=P&&P[te]||0,F=P&&P[te-S]||0,R=m(j,D,F),V[te+1]=B[te]-R+256&255;return V},m=function(B,S,P){if(B===S&&S===P)return B;var j=Math.abs(S-P),D=Math.abs(B-P),F=Math.abs(B+S-P-P);return j<=D&&j<=F?B:D<=F?S:P},g=function(){return[s,o,c,u,i]},C=function(B){var S=B.map(function(P){return P.reduce(function(j,D){return j+Math.abs(D)},0)});return S.indexOf(Math.min.apply(null,S))};t.processPNG=function(B,S,P,j){var D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He=this.decode.FLATE_DECODE,Fe="";if(this.__addimage__.isArrayBuffer(B)&&(B=new Uint8Array(B)),this.__addimage__.isArrayBufferView(B)){if(B=(R=new Ixe(B)).imgData,F=R.bits,D=R.colorSpace,Y=R.colors,[4,6].indexOf(R.colorType)!==-1){if(R.bits===8){K=(oe=R.pixelBitlength==32?new Uint32Array(R.decodePixels().buffer):R.pixelBitlength==16?new Uint16Array(R.decodePixels().buffer):new Uint8Array(R.decodePixels().buffer)).length,we=new Uint8Array(K*R.colors),de=new Uint8Array(K);var ve,_e=R.pixelBitlength-R.bits;for(Ie=0,be=0;Ie<K;Ie++){for(Z=oe[Ie],ve=0;ve<_e;)we[be++]=Z>>>ve&255,ve+=R.bits;de[Ie]=Z>>>ve&255}}if(R.bits===16){K=(oe=new Uint32Array(R.decodePixels().buffer)).length,we=new Uint8Array(K*(32/R.pixelBitlength)*R.colors),de=new Uint8Array(K*(32/R.pixelBitlength)),J=R.colors>1,Ie=0,be=0;for(var ze=0;Ie<K;)Z=oe[Ie++],we[be++]=Z>>>0&255,J&&(we[be++]=Z>>>16&255,Z=oe[Ie++],we[be++]=Z>>>0&255),de[ze++]=Z>>>16&255;F=8}j!==t.image_compression.NONE&&e()?(B=r(we,R.width*R.colors,R.colors,j),se=r(de,R.width,1,j)):(B=we,se=de,He=void 0)}if(R.colorType===3&&(D=this.color_spaces.INDEXED,te=R.palette,R.transparency.indexed)){var Ne=R.transparency.indexed,st=0;for(Ie=0,K=Ne.length;Ie<K;++Ie)st+=Ne[Ie];if((st/=255)===K-1&&Ne.indexOf(0)!==-1)V=[Ne.indexOf(0)];else if(st!==K){for(oe=R.decodePixels(),de=new Uint8Array(oe.length),Ie=0,K=oe.length;Ie<K;Ie++)de[Ie]=Ne[oe[Ie]];se=r(de,R.width,1)}}var ie=function(le){var pe;switch(le){case t.image_compression.FAST:pe=11;break;case t.image_compression.MEDIUM:pe=13;break;case t.image_compression.SLOW:pe=14;break;default:pe=12}return pe}(j);return He===this.decode.FLATE_DECODE&&(Fe="/Predictor "+ie+" "),Fe+="/Colors "+Y+" /BitsPerComponent "+F+" /Columns "+R.width,(this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),(se&&this.__addimage__.isArrayBuffer(se)||this.__addimage__.isArrayBufferView(se))&&(se=this.__addimage__.arrayBufferToBinaryString(se)),{alias:P,data:B,index:S,filter:He,decodeParameters:Fe,transparency:V,palette:te,sMask:se,predictor:ie,width:R.width,height:R.height,bitsPerComponent:F,colorSpace:D}}}})(is.API),function(t){t.processGIF89A=function(e,r,n,s){var o=new Nxe(e),c=o.width,u=o.height,i=[];o.decodeAndBlitFrameRGBA(0,i);var m={data:i,width:c,height:u},g=new E3(100).encode(m,100);return t.processJPEG.call(this,g,r,n,s)},t.processGIF87A=t.processGIF89A}(is.API),wf.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wf.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ra.log("bit decode error:"+r)}},wf.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var i=this.palette[o>>7-u&1];this.data[c+4*u]=i.blue,this.data[c+4*u+1]=i.green,this.data[c+4*u+2]=i.red,this.data[c+4*u+3]=255}r!==0&&(this.pos+=4-r)}},wf.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*s*4,u=o>>4,i=15&o,m=this.palette[u];if(this.data[c]=m.blue,this.data[c+1]=m.green,this.data[c+2]=m.red,this.data[c+3]=255,2*s+1>=this.width)break;m=this.palette[i],this.data[c+4]=m.blue,this.data[c+4+1]=m.green,this.data[c+4+2]=m.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},wf.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(s<this.palette.length){var c=this.palette[s];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},wf.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,i=(o>>10&e)/e*255|0,m=o>>15?255:0,g=n*this.width*4+4*s;this.data[g]=i,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=m}this.pos+=t}},wf.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,i=(c>>5&r)/r*255|0,m=(c>>11)/e*255|0,g=s*this.width*4+4*o;this.data[g]=m,this.data[g+1]=i,this.data[g+2]=u,this.data[g+3]=255}this.pos+=t}},wf.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=o,this.data[c+1]=s,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},wf.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*r;this.data[u]=o,this.data[u+1]=s,this.data[u+2]=n,this.data[u+3]=c}},wf.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var o=new wf(e,!1),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},m=new E3(100).encode(i,100);return t.processJPEG.call(this,m,r,n,s)}}(is.API),sU.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var o=new sU(e),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},m=new E3(100).encode(i,100);return t.processJPEG.call(this,m,r,n,s)}}(is.API),is.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,o=new Uint8Array(s/4*3),c=new Uint8Array(s/4),u=0,i=0,m=0;m<s;m+=4){var g=n[m],C=n[m+1],B=n[m+2],S=n[m+3];o[u++]=g,o[u++]=C,o[u++]=B,c[i++]=S}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:P,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},is.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ay=is.API,m2=ay.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:s.metadata.Unicode.widths,i=u.fof?u.fof:1,m=e.kerning?e.kerning:s.metadata.Unicode.kerning,g=m.fof?m.fof:1,C=e.doKerning!==!1,B=0,S=t.length,P=0,j=u[0]||i,D=[];for(r=0;r<S;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?D.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+c*(1e3/o)||0)/1e3):(B=C&&ba(m[n])==="object"&&!isNaN(parseInt(m[n][P],10))?m[n][P]/g:0,D.push((u[n]||j)/i+B)),P=n;return D},tU=ay.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return ay.processArabic&&(t=ay.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:m2.apply(this,arguments).reduce(function(o,c){return o+c},0)},rU=function(t,e,r,n){for(var s=[],o=0,c=t.length,u=0;o!==c&&u+e[o]<r;)u+=e[o],o++;s.push(t.slice(0,o));var i=o;for(u=0;o!==c;)u+e[o]>n&&(s.push(t.slice(i,o)),u=0,i=o),u+=e[o],o++;return i!==o&&s.push(t.slice(i,o)),s},nU=function(t,e,r){r||(r={});var n,s,o,c,u,i,m,g=[],C=[g],B=r.textIndent||0,S=0,P=0,j=t.split(" "),D=m2.apply(this,[" ",r])[0];if(i=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var F=Array(i).join(" "),R=[];j.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?R=R.concat(Y.map(function(te,se){return(se&&te.length?`
`:"")+te})):R.push(Y[0])}),j=R,i=tU.apply(this,[F,r])}for(o=0,c=j.length;o<c;o++){var V=0;if(n=j[o],i&&n[0]==`
`&&(n=n.substr(1),V=1),B+S+(P=(s=m2.apply(this,[n,r])).reduce(function(Y,te){return Y+te},0))>e||V){if(P>e){for(u=rU.apply(this,[n,s,e-(B+S),e]),g.push(u.shift()),g=[u.pop()];u.length;)C.push([u.shift()]);P=s.slice(n.length-(g[0]?g[0].length:0)).reduce(function(Y,te){return Y+te},0)}else g=[n];C.push(g),B=P+i,S=D}else g.push(n),B+=S+P,S=D}return m=i?function(Y,te){return(te?F:"")+Y.join(" ")}:function(Y){return Y.join(" ")},C.map(m)},ay.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var C=this.internal.getFont(g.fontName,g.fontStyle);return C.metadata.Unicode?{widths:C.metadata.Unicode.widths||{0:1},kerning:C.metadata.Unicode.kerning||{}}:{font:C.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/s;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,o.lineIndent=r.lineIndent;var u,i,m=[];for(u=0,i=n.length;u<i;u++)m=m.concat(nU.apply(this,[n[u],c,o]));return m},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var o=function(C){return"0x"+parseInt(C,10).toString(16)},c=t.__fontmetrics__.compress=function(C){var B,S,P,j,D=["{"];for(var F in C){if(B=C[F],isNaN(parseInt(F,10))?S="'"+F+"'":(F=parseInt(F,10),S=(S=o(F).slice(2)).slice(0,-1)+n[S.slice(-1)]),typeof B=="number")B<0?(P=o(B).slice(3),j="-"):(P=o(B).slice(2),j=""),P=j+P.slice(0,-1)+n[P.slice(-1)];else{if(ba(B)!=="object")throw new Error("Don't know what to do with value type "+ba(B)+".");P=c(B)}D.push(S+P)}return D.push("}"),D.join("")},u=t.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var B,S,P,j,D={},F=1,R=D,V=[],Y="",te="",se=C.length-1,oe=1;oe<se;oe+=1)(j=C[oe])=="'"?B?(P=B.join(""),B=void 0):B=[]:B?B.push(j):j=="{"?(V.push([R,P]),R={},P=void 0):j=="}"?((S=V.pop())[0][S[1]]=R,P=void 0,R=S[0]):j=="-"?F=-1:P===void 0?r.hasOwnProperty(j)?(Y+=r[j],P=parseInt(Y,16)*F,F=1,Y=""):Y+=j:r.hasOwnProperty(j)?(te+=r[j],R[P]=parseInt(te,16)*F,F=1,P=void 0,te=""):te+=j;return D},i={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:i,"Courier-Bold":i,"Courier-BoldOblique":i,"Courier-Oblique":i,Helvetica:i,"Helvetica-Bold":i,"Helvetica-BoldOblique":i,"Helvetica-Oblique":i,"Times-Roman":i,"Times-Bold":i,"Times-BoldItalic":i,"Times-Italic":i}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(C){var B=C.font,S=g.Unicode[B.postScriptName];S&&(B.metadata.Unicode={},B.metadata.Unicode.widths=S.widths,B.metadata.Unicode.kerning=S.kerning);var P=m.Unicode[B.postScriptName];P&&(B.metadata.Unicode.encoding=P,B.encoding=P.codePages[0])}])}(is.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),o=0;o<n;o++)s[o]=r.charCodeAt(o);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,o=r.instance;if(!s.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=o.existsFileInVFS(s.postScriptName)===!1?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Gx(u)),c.metadata=t.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(s,n)}}])}(is),function(t){function e(){return(ls.canvg?Promise.resolve(ls.canvg):w1(()=>import("./index.es-B9Swlk47.js"),__vite__mapDeps([0,1]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}is.API.addSvgAsImage=function(r,n,s,o,c,u,i,m){if(isNaN(n)||isNaN(s))throw Ra.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(c))throw Ra.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=o,g.height=c;var C=g.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,g.width,g.height);var B={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},S=this;return e().then(function(P){return P.fromString(C,r,B)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(B)}).then(function(){S.addImage(g.toDataURL("image/jpeg",1),n,s,o,c,i,m)})}}(),is.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},is.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),i=[],m=0,g=0,C=0;function B(P,j){var D,F=!1;for(D=0;D<P.length;D+=1)P[D]===j&&(F=!0);return F}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var S=u.length;for(C=0;C<S;C+=1)r[u[C]].value=r[u[C]].defaultValue,r[u[C]].explicitSet=!1}if(ba(t)==="object"){for(s in t)if(o=t[s],B(u,s)&&o!==void 0){if(r[s].type==="boolean"&&typeof o=="boolean")r[s].value=o;else if(r[s].type==="name"&&B(r[s].valueSet,o))r[s].value=o;else if(r[s].type==="integer"&&Number.isInteger(o))r[s].value=o;else if(r[s].type==="array"){for(m=0;m<o.length;m+=1)if(n=!0,o[m].length===1&&typeof o[m][0]=="number")i.push(String(o[m]-1));else if(o[m].length>1){for(g=0;g<o[m].length;g+=1)typeof o[m][g]!="number"&&(n=!1);n===!0&&i.push([o[m][0]-1,o[m][1]-1].join(" "))}r[s].value="["+i.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,j=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?j.push("/"+P+" /"+r[P].value):j.push("/"+P+" "+r[P].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),m=o.length+c.length+u.length+s.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(s+o+c+u+i),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(is.API),function(t){var e=t.API,r=e.pdfEscape16=function(o,c){for(var u,i=c.metadata.Unicode.widths,m=["","0","00","000","0000"],g=[""],C=0,B=o.length;C<B;++C){if(u=c.metadata.characterToGlyph(o.charCodeAt(C)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=o.charCodeAt(C),i.indexOf(u)==-1&&(i.push(u),i.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(m[4-u.length],u)}return g.join("")},n=function(o){var c,u,i,m,g,C,B;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,i=[],C=0,B=(u=Object.keys(o).sort(function(S,P){return S-P})).length;C<B;C++)c=u[C],i.length>=100&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar`,i=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(m=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),i.push("<"+c+"><"+m+">"));return i.length&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,m=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var C=u.metadata.Unicode.widths,B=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),S="",P=0;P<B.length;P++)S+=String.fromCharCode(B[P]);var j=m();g({data:S,addLength1:!0,objectId:j}),i("endobj");var D=m();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:D}),i("endobj");var F=m();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+gy(u.fontName)),i("/FontFile2 "+j+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/Flags "+u.metadata.flags),i("/StemV "+u.metadata.stemV),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i(">>"),i("endobj");var R=m();i("<<"),i("/Type /Font"),i("/BaseFont /"+gy(u.fontName)),i("/FontDescriptor "+F+" 0 R"),i("/W "+t.API.PDFObject.convert(C)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+u.encoding+")"),i(">>"),i(">>"),i("endobj"),u.objectNumber=m(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+D+" 0 R"),i("/BaseFont /"+gy(u.fontName)),i("/Encoding /"+u.encoding),i("/DescendantFonts ["+R+" 0 R]"),i(">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,m=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var C=u.metadata.rawData,B="",S=0;S<C.length;S++)B+=String.fromCharCode(C[S]);var P=m();g({data:B,addLength1:!0,objectId:P}),i("endobj");var j=m();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:j}),i("endobj");var D=m();i("<<"),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i("/StemV "+u.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+P+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/FontName /"+gy(u.fontName)),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i(">>"),i("endobj"),u.objectNumber=m();for(var F=0;F<u.metadata.hmtx.widths.length;F++)u.metadata.hmtx.widths[F]=parseInt(u.metadata.hmtx.widths[F]*(1e3/u.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+gy(u.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]);var s=function(o){var c,u=o.text||"",i=o.x,m=o.y,g=o.options||{},C=o.mutex||{},B=C.pdfEscape,S=C.activeFontKey,P=C.fonts,j=S,D="",F=0,R="",V=P[j].encoding;if(P[j].encoding!=="Identity-H")return{text:u,x:i,y:m,options:g,mutex:C};for(R=u,j=S,Array.isArray(u)&&(R=u[0]),F=0;F<R.length;F+=1)P[j].metadata.hasOwnProperty("cmap")&&(c=P[j].metadata.cmap.unicode.codeMap[R[F].charCodeAt(0)]),c||R[F].charCodeAt(0)<256&&P[j].metadata.hasOwnProperty("Unicode")?D+=R[F]:D+="";var Y="";return parseInt(j.slice(1))<14||V==="WinAnsiEncoding"?Y=B(D,j).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(Y=r(D,P[j])),C.isHex=!0,{text:Y,x:i,y:m,options:g,mutex:C}};e.events.push(["postProcessText",function(o){var c=o.text||"",u=[],i={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var m=0;for(m=0;m<c.length;m+=1)Array.isArray(c[m])&&c[m].length===3?u.push([s(Object.assign({},i,{text:c[m][0]})).text,c[m][1],c[m][2]]):u.push(s(Object.assign({},i,{text:c[m]})).text);o.text=u}else o.text=s(Object.assign({},i,{text:c})).text}])}(is),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(is.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,o,c,u,i,m,g,C=e,B=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],S=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],F=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,V=0;this.__bidiEngine__={};var Y=function(J){var Z=J.charCodeAt(),Ie=Z>>8,be=j[Ie];return be!==void 0?C[256*be+(255&Z)]:Ie===252||Ie===253?"AL":F.test(Ie)?"L":Ie===8?"R":"N"},te=function(J){for(var Z,Ie=0;Ie<J.length;Ie++){if((Z=Y(J.charAt(Ie)))==="L")return!1;if(Z==="R")return!0}return!1},se=function(J,Z,Ie,be){var He,Fe,ve,_e,ze=Z[be];switch(ze){case"L":case"R":R=!1;break;case"N":case"AN":break;case"EN":R&&(ze="AN");break;case"AL":R=!0,ze="R";break;case"WS":ze="N";break;case"CS":be<1||be+1>=Z.length||(He=Ie[be-1])!=="EN"&&He!=="AN"||(Fe=Z[be+1])!=="EN"&&Fe!=="AN"?ze="N":R&&(Fe="AN"),ze=Fe===He?Fe:"N";break;case"ES":ze=(He=be>0?Ie[be-1]:"B")==="EN"&&be+1<Z.length&&Z[be+1]==="EN"?"EN":"N";break;case"ET":if(be>0&&Ie[be-1]==="EN"){ze="EN";break}if(R){ze="N";break}for(ve=be+1,_e=Z.length;ve<_e&&Z[ve]==="ET";)ve++;ze=ve<_e&&Z[ve]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(_e=Z.length,ve=be+1;ve<_e&&Z[ve]==="NSM";)ve++;if(ve<_e){var Ne=J[be],st=Ne>=1425&&Ne<=2303||Ne===64286;if(He=Z[ve],st&&(He==="R"||He==="AL")){ze="R";break}}}ze=be<1||(He=Z[be-1])==="B"?"N":Ie[be-1];break;case"B":R=!1,s=!0,ze=V;break;case"S":o=!0,ze="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"BN":ze="N"}return ze},oe=function(J,Z,Ie){var be=J.split("");return Ie&&K(be,Ie,{hiLevel:V}),be.reverse(),Z&&Z.reverse(),be.join("")},K=function(J,Z,Ie){var be,He,Fe,ve,_e,ze=-1,Ne=J.length,st=0,ie=[],le=V?S:B,pe=[];for(R=!1,s=!1,o=!1,He=0;He<Ne;He++)pe[He]=Y(J[He]);for(Fe=0;Fe<Ne;Fe++){if(_e=st,ie[Fe]=se(J,pe,ie,Fe),be=240&(st=le[_e][P[ie[Fe]]]),st&=15,Z[Fe]=ve=le[st][5],be>0)if(be===16){for(He=ze;He<Fe;He++)Z[He]=1;ze=-1}else ze=-1;if(le[st][6])ze===-1&&(ze=Fe);else if(ze>-1){for(He=ze;He<Fe;He++)Z[He]=ve;ze=-1}pe[Fe]==="B"&&(Z[Fe]=0),Ie.hiLevel|=ve}o&&function(fe,Qe,Ke){for(var et=0;et<Ke;et++)if(fe[et]==="S"){Qe[et]=V;for(var tt=et-1;tt>=0&&fe[tt]==="WS";tt--)Qe[tt]=V}}(pe,Z,Ne)},de=function(J,Z,Ie,be,He){if(!(He.hiLevel<J)){if(J===1&&V===1&&!s)return Z.reverse(),void(Ie&&Ie.reverse());for(var Fe,ve,_e,ze,Ne=Z.length,st=0;st<Ne;){if(be[st]>=J){for(_e=st+1;_e<Ne&&be[_e]>=J;)_e++;for(ze=st,ve=_e-1;ze<ve;ze++,ve--)Fe=Z[ze],Z[ze]=Z[ve],Z[ve]=Fe,Ie&&(Fe=Ie[ze],Ie[ze]=Ie[ve],Ie[ve]=Fe);st=_e}st++}}},we=function(J,Z,Ie){var be=J.split(""),He={hiLevel:V};return Ie||(Ie=[]),K(be,Ie,He),function(Fe,ve,_e){if(_e.hiLevel!==0&&g)for(var ze,Ne=0;Ne<Fe.length;Ne++)ve[Ne]===1&&(ze=D.indexOf(Fe[Ne]))>=0&&(Fe[Ne]=D[ze+1])}(be,Ie,He),de(2,be,Z,Ie,He),de(1,be,Z,Ie,He),be.join("")};return this.__bidiEngine__.doBidiReorder=function(J,Z,Ie){if(function(He,Fe){if(Fe)for(var ve=0;ve<He.length;ve++)Fe[ve]=ve;u===void 0&&(u=te(He)),m===void 0&&(m=te(He))}(J,Z),c||!i||m)if(c&&i&&u^m)V=u?1:0,J=oe(J,Z,Ie);else if(!c&&i&&m)V=u?1:0,J=we(J,Z,Ie),J=oe(J,Z);else if(!c||u||i||m){if(c&&!i&&u^m)J=oe(J,Z),u?(V=0,J=we(J,Z,Ie)):(V=1,J=we(J,Z,Ie),J=oe(J,Z));else if(c&&u&&!i&&m)V=1,J=we(J,Z,Ie),J=oe(J,Z);else if(!c&&!i&&u^m){var be=g;u?(V=1,J=we(J,Z,Ie),V=0,g=!1,J=we(J,Z,Ie),g=be):(V=0,J=we(J,Z,Ie),J=oe(J,Z),V=1,g=!1,J=we(J,Z,Ie),g=be,J=oe(J,Z))}}else V=0,J=we(J,Z,Ie);else V=u?1:0,J=we(J,Z,Ie);return J},this.__bidiEngine__.setOptions=function(J){J&&(c=J.isInputVisual,i=J.isOutputVisual,u=J.isInputRtl,m=J.isOutputRtl,g=J.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(c=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?c.push([r.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):c.push([r.doBidiReorder(s[u])]);n.text=c}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(is),is.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Xm(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new $xe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Fxe(this.contents),this.head=new jxe(this),this.name=new Rxe(this),this.cmap=new vW(this),this.toUnicode={},this.hhea=new Mxe(this),this.maxp=new Uxe(this),this.hmtx=new zxe(this),this.post=new Dxe(this),this.os2=new kxe(this),this.loca=new Gxe(this),this.glyf=new Qxe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,i,m;for(m=[],c=0,u=(i=this.bbox).length;c<u;c++)e=i[c],m.push(Math.round(e*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,o,c,u;for(c=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)s=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return c*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Hf,Xm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,o,c,u,i;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),i=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^o)+65536*(255^c)+256*(255^u)+(255^i)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*o+65536*c+256*u+i},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,o;for(o=[],n=0,s=e.length;n<s;n++)r=e[n],o.push(this.writeByte(r));return o},t}(),Fxe=function(){var t;function e(r){var n,s,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,o=this.tableCount;0<=o?s<o:s>o;s=0<=o?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,o,c,u,i,m,g,C,B,S,P,j;for(j in S=Object.keys(r).length,i=Math.log(2),C=16*Math.floor(Math.log(S)/i),c=Math.floor(C/i),g=16*S-C,(s=new Xm).writeInt(this.scalarType),s.writeShort(S),s.writeShort(C),s.writeShort(c),s.writeShort(g),o=16*S,m=s.pos+o,u=null,P=[],r)for(B=r[j],s.writeString(j),s.writeInt(t(B)),s.writeInt(m),s.writeInt(B.length),P=P.concat(B),j==="head"&&(u=m),m+=B.length;m%4;)P.push(0),m++;return s.write(P),n=2981146554-t(s.data),s.pos=u+8,s.writeUInt32(n),s.data},t=function(r){var n,s,o,c;for(r=xW.call(r);r.length%4;)r.push(0);for(o=new Xm(r),s=0,n=0,c=r.length;n<c;n=n+=4)s+=o.readUInt32();return 4294967295&s},e}(),Pxe={}.hasOwnProperty,Tp=function(t,e){for(var r in e)Pxe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Hf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var jxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Xm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),oU=function(){function t(e,r){var n,s,o,c,u,i,m,g,C,B,S,P,j,D,F,R,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),C=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(i=0;i<256;++i)this.codeMap[i]=e.readByte();break;case 4:for(S=e.readUInt16(),B=S/2,e.pos+=6,o=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),e.pos+=2,j=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),m=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),g=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),s=(this.length-e.pos+this.offset)/2,u=function(){var Y,te;for(te=[],i=Y=0;0<=s?Y<s:Y>s;i=0<=s?++Y:--Y)te.push(e.readUInt16());return te}(),i=F=0,V=o.length;F<V;i=++F)for(D=o[i],n=R=P=j[i];P<=D?R<=D:R>=D;n=P<=D?++R:--R)g[i]===0?c=n+m[i]:(c=u[g[i]/2+(n-P)-(B-i)]||0)!==0&&(c+=m[i]),this.codeMap[n]=65535&c}e.pos=C}return t.encode=function(e,r){var n,s,o,c,u,i,m,g,C,B,S,P,j,D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne,st,ie,le,pe,fe,Qe,Ke,et,tt,bt,De,Mt;switch(be=new Xm,c=Object.keys(e).sort(function(ir,Ar){return ir-Ar}),r){case"macroman":for(j=0,D=function(){var ir=[];for(P=0;P<256;++P)ir.push(0);return ir}(),R={0:0},o={},He=0,ze=c.length;He<ze;He++)R[tt=e[s=c[He]]]==null&&(R[tt]=++j),o[s]={old:e[s],new:R[e[s]]},D[s]=R[e[s]];return be.writeUInt16(1),be.writeUInt16(0),be.writeUInt32(12),be.writeUInt16(0),be.writeUInt16(262),be.writeUInt16(0),be.write(D),{charMap:o,subtable:be.data,maxGlyphID:j+1};case"unicode":for(Z=[],C=[],V=0,R={},n={},F=m=null,Fe=0,Ne=c.length;Fe<Ne;Fe++)R[te=e[s=c[Fe]]]==null&&(R[te]=++V),n[s]={old:te,new:R[te]},u=R[te]-s,F!=null&&u===m||(F&&C.push(F),Z.push(s),m=u),F=s;for(F&&C.push(F),C.push(65535),Z.push(65535),we=2*(de=Z.length),K=2*Math.pow(Math.log(de)/Math.LN2,2),B=Math.log(K/2)/Math.LN2,oe=2*de-K,i=[],se=[],S=[],P=ve=0,st=Z.length;ve<st;P=++ve){if(J=Z[P],g=C[P],J===65535){i.push(0),se.push(0);break}if(J-(Ie=n[J].new)>=32768)for(i.push(0),se.push(2*(S.length+de-P)),s=_e=J;J<=g?_e<=g:_e>=g;s=J<=g?++_e:--_e)S.push(n[s].new);else i.push(Ie-J),se.push(0)}for(be.writeUInt16(3),be.writeUInt16(1),be.writeUInt32(12),be.writeUInt16(4),be.writeUInt16(16+8*de+2*S.length),be.writeUInt16(0),be.writeUInt16(we),be.writeUInt16(K),be.writeUInt16(B),be.writeUInt16(oe),Ke=0,ie=C.length;Ke<ie;Ke++)s=C[Ke],be.writeUInt16(s);for(be.writeUInt16(0),et=0,le=Z.length;et<le;et++)s=Z[et],be.writeUInt16(s);for(bt=0,pe=i.length;bt<pe;bt++)u=i[bt],be.writeUInt16(u);for(De=0,fe=se.length;De<fe;De++)Y=se[De],be.writeUInt16(Y);for(Mt=0,Qe=S.length;Mt<Qe;Mt++)j=S[Mt],be.writeUInt16(j);return{charMap:n,subtable:be.data,maxGlyphID:V+1}}},t}(),vW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)n=new oU(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,o;return n==null&&(n="macroman"),s=oU.encode(r,n),(o=new Xm).writeUInt16(0),o.writeUInt16(1),s.table=o.data.concat(s.subtable),s},e}(),Mxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),kxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Dxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(s=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=s?c<s:c>s;c=0<=s?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var u,i,m;for(m=[],c=u=0,i=this.file.maxp.numGlyphs;0<=i?u<i:u>i;c=0<=i?++u:--u)m.push(r.readUInt32());return m}).call(this)}},e}(),Oxe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Rxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,o,c,u,i,m,g,C,B,S;for(r.pos=this.offset,r.readShort(),n=r.readShort(),i=r.readShort(),s=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+i+r.readShort()});for(m={},c=C=0,B=s.length;C<B;c=++C)o=s[c],r.pos=o.offset,g=r.readString(o.length),u=new Oxe(g,o),m[S=o.nameID]==null&&(m[S]=[]),m[o.nameID].push(u);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},e}(),Uxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),zxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,o,c,u,i,m;for(r.pos=this.offset,this.metrics=[],n=0,i=this.file.hhea.numberOfMetrics;0<=i?n<i:n>i;n=0<=i?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,C;for(C=[],n=g=0;0<=o?g<o:g>o;n=0<=o?++g:--g)C.push(r.readInt16());return C}(),this.widths=(function(){var g,C,B,S;for(S=[],g=0,C=(B=this.metrics).length;g<C;g++)c=B[g],S.push(c.advance);return S}).call(this),s=this.widths[this.widths.length-1],m=[],n=u=0;0<=o?u<o:u>o;n=0<=o?++u:--u)m.push(this.widths.push(s));return m},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),xW=[].slice,Qxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,o,c,u,i,m,g,C,B;return r in this.cache?this.cache[r]:(c=this.file.loca,n=this.file.contents,s=c.indexOf(r),(o=c.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,u=(i=new Xm(n.read(o))).readShort(),g=i.readShort(),B=i.readShort(),m=i.readShort(),C=i.readShort(),this.cache[r]=u===-1?new Vxe(i,g,B,m,C):new Hxe(i,u,g,B,m,C),this.cache[r]))},e.prototype.encode=function(r,n,s){var o,c,u,i,m;for(u=[],c=[],i=0,m=n.length;i<m;i++)o=r[n[i]],c.push(u.length),o&&(u=u.concat(o.encode(s)));return c.push(u.length),{table:u,offsets:c}},e}(),Hxe=function(){function t(e,r,n,s,o,c){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=o,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Vxe=function(){function t(e,r,n,s,o){var c,u;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Xm(xW.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Gxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Tp(e,Hf),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=2)c.push(2*r.readUInt16());return c}).call(this):(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=4)c.push(r.readUInt32());return c}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),o=0,c=0,u=0;u<s.length;++u)if(s[u]=o,c<n.length&&n[c]==u){++c,s[u]=o;var i=this.offsets[u],m=this.offsets[u+1]-i;m>0&&(o+=m)}for(var g=new Array(4*s.length),C=0;C<s.length;++C)g[4*C+3]=255&s[C],g[4*C+2]=(65280&s[C])>>8,g[4*C+1]=(16711680&s[C])>>16,g[4*C]=(4278190080&s[C])>>24;return g},e}(),$xe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,o;for(r in s=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,o,c,u,i;for(s={},c=0,u=e.length;c<u;c++)s[o=e[c]]=this.font.glyf.glyphFor(o);for(o in r=[],s)(n=s[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in i=this.glyphsFor(r))n=i[o],s[o]=n;return s},t.prototype.encode=function(e,r){var n,s,o,c,u,i,m,g,C,B,S,P,j,D,F;for(s in n=vW.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),S={0:0},F=n.charMap)S[(i=F[s]).old]=i.new;for(P in B=n.maxGlyphID,c)P in S||(S[P]=B++);return g=function(R){var V,Y;for(V in Y={},R)Y[R[V]]=V;return Y}(S),C=Object.keys(g).sort(function(R,V){return R-V}),j=function(){var R,V,Y;for(Y=[],R=0,V=C.length;R<V;R++)u=C[R],Y.push(g[u]);return Y}(),o=this.font.glyf.encode(c,j,S),m=this.font.loca.encode(o.offsets,j),D={cmap:this.font.cmap.raw(),glyf:o.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},t}();is.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,o,c;if(Array.isArray(r))return"["+function(){var u,i,m;for(m=[],u=0,i=r.length;u<i;u++)n=r[u],m.push(e.convert(n));return m}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in o=["<<"],r)c=r[s],o.push("/"+s+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+r},e}();const qxe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Cxe,AcroFormAppearance:vi,AcroFormButton:Vc,AcroFormCheckBox:Wx,AcroFormChoiceField:o0,AcroFormComboBox:l0,AcroFormEditBox:$x,AcroFormListBox:a0,AcroFormPasswordField:Kx,AcroFormPushButton:qx,AcroFormRadioButton:c0,AcroFormTextField:km,GState:z_,ShadingPattern:am,TilingPattern:Xg,default:is,jsPDF:is},Symbol.toStringTag,{value:"Module"})),Wxe=$4(qxe);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hL=function(t,e){return hL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},hL(t,e)};function Vf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hL(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fL=function(){return fL=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},fL.apply(this,arguments)};function gd(t,e,r,n){function s(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(g){try{m(n.next(g))}catch(C){c(C)}}function i(g){try{m(n.throw(g))}catch(C){c(C)}}function m(g){g.done?o(g.value):s(g.value).then(u,i)}m((n=n.apply(t,[])).next())})}function $u(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(m){return function(g){return i([m,g])}}function i(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(o=m[0]&2?s.return:m[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,m[1])).done)return o;switch(s=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,s=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){r.label=m[1];break}if(m[0]===6&&r.label<o[1]){r.label=o[1],o=m;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(m);break}o[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(g){m=[6,g],s=0}finally{n=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function g2(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||e)}var gA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),VC=function(t,e){return gA.fromClientRect(t,e.getBoundingClientRect())},Kxe=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new gA(0,0,n,s)},GC=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var o=t.charCodeAt(r++);(o&64512)===56320?e.push(((s&1023)<<10)+(o&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Ac=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,o="";++s<r;){var c=t[s];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(s+1===r||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},aU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xxe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var y2=0;y2<aU.length;y2++)Xxe[aU.charCodeAt(y2)]=y2;var lU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ux=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var v2=0;v2<lU.length;v2++)ux[lU.charCodeAt(v2)]=v2;var Yxe=function(t){var e=t.length*.75,r=t.length,n,s=0,o,c,u,i;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(m)?m:new Uint8Array(m);for(n=0;n<r;n+=4)o=ux[t.charCodeAt(n)],c=ux[t.charCodeAt(n+1)],u=ux[t.charCodeAt(n+2)],i=ux[t.charCodeAt(n+3)],g[s++]=o<<2|c>>4,g[s++]=(c&15)<<4|u>>2,g[s++]=(u&3)<<6|i&63;return m},Zxe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Jxe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},u0=5,EF=11,T3=2,e_e=EF-u0,_W=65536>>u0,t_e=1<<u0,L3=t_e-1,r_e=1024>>u0,n_e=_W+r_e,i_e=n_e,s_e=32,o_e=i_e+s_e,a_e=65536>>EF,l_e=1<<e_e,c_e=l_e-1,cU=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},u_e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},d_e=function(t,e){var r=Yxe(t),n=Array.isArray(r)?Jxe(r):new Uint32Array(r),s=Array.isArray(r)?Zxe(r):new Uint16Array(r),o=24,c=cU(s,o/2,n[4]/2),u=n[5]===2?cU(s,(o+n[4])/2):u_e(n,Math.ceil((o+n[4])/4));return new h_e(n[0],n[1],n[2],n[3],c,u)},h_e=function(){function t(e,r,n,s,o,c){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=o,this.data=c}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>u0],r=(r<<T3)+(e&L3),this.data[r];if(e<=65535)return r=this.index[_W+(e-55296>>u0)],r=(r<<T3)+(e&L3),this.data[r];if(e<this.highStart)return r=o_e-a_e+(e>>EF),r=this.index[r],r+=e>>u0&c_e,r=this.index[r],r=(r<<T3)+(e&L3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),uU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var x2=0;x2<uU.length;x2++)f_e[uU.charCodeAt(x2)]=x2;var p_e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",dU=50,A_e=1,bW=2,wW=3,m_e=4,g_e=5,hU=7,CW=8,fU=9,ym=10,pL=11,pU=12,AL=13,y_e=14,dx=15,mL=16,_2=17,Gv=18,v_e=19,AU=20,gL=21,$v=22,I3=23,ly=24,ah=25,hx=26,fx=27,cy=28,x_e=29,zg=30,__e=31,b2=32,w2=33,yL=34,vL=35,xL=36,Q_=37,_L=38,y5=39,v5=40,N3=41,SW=42,b_e=43,w_e=[9001,65288],BW="!",wo="",C2="",bL=d_e(p_e),Vp=[zg,xL],wL=[A_e,bW,wW,g_e],EW=[ym,CW],mU=[fx,hx],C_e=wL.concat(EW),gU=[_L,y5,v5,yL,vL],S_e=[dx,AL],B_e=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(o,c){var u=bL.get(o);if(u>dU?(s.push(!0),u-=dU):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(o)!==-1)return n.push(c),r.push(mL);if(u===m_e||u===pL){if(c===0)return n.push(c),r.push(zg);var i=r[c-1];return C_e.indexOf(i)===-1?(n.push(n[c-1]),r.push(i)):(n.push(c),r.push(zg))}if(n.push(c),u===__e)return r.push(e==="strict"?gL:Q_);if(u===SW||u===x_e)return r.push(zg);if(u===b_e)return o>=131072&&o<=196605||o>=196608&&o<=262141?r.push(Q_):r.push(zg);r.push(u)}),[n,r,s]},F3=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var o=r;o<=n.length;){o++;var c=n[o];if(c===e)return!0;if(c!==ym)break}if(s===ym)for(var o=r;o>0;){o--;var u=n[o];if(Array.isArray(t)?t.indexOf(u)!==-1:t===u)for(var i=r;i<=n.length;){i++;var c=n[i];if(c===e)return!0;if(c!==ym)break}if(u!==ym)break}return!1},yU=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===ym)r--;else return n}return 0},E_e=function(t,e,r,n,s){if(r[n]===0)return wo;var o=n-1;if(Array.isArray(s)&&s[o]===!0)return wo;var c=o-1,u=o+1,i=e[o],m=c>=0?e[c]:0,g=e[u];if(i===bW&&g===wW)return wo;if(wL.indexOf(i)!==-1)return BW;if(wL.indexOf(g)!==-1||EW.indexOf(g)!==-1)return wo;if(yU(o,e)===CW)return C2;if(bL.get(t[o])===pL||(i===b2||i===w2)&&bL.get(t[u])===pL||i===hU||g===hU||i===fU||[ym,AL,dx].indexOf(i)===-1&&g===fU||[_2,Gv,v_e,ly,cy].indexOf(g)!==-1||yU(o,e)===$v||F3(I3,$v,o,e)||F3([_2,Gv],gL,o,e)||F3(pU,pU,o,e))return wo;if(i===ym)return C2;if(i===I3||g===I3)return wo;if(g===mL||i===mL)return C2;if([AL,dx,gL].indexOf(g)!==-1||i===y_e||m===xL&&S_e.indexOf(i)!==-1||i===cy&&g===xL||g===AU||Vp.indexOf(g)!==-1&&i===ah||Vp.indexOf(i)!==-1&&g===ah||i===fx&&[Q_,b2,w2].indexOf(g)!==-1||[Q_,b2,w2].indexOf(i)!==-1&&g===hx||Vp.indexOf(i)!==-1&&mU.indexOf(g)!==-1||mU.indexOf(i)!==-1&&Vp.indexOf(g)!==-1||[fx,hx].indexOf(i)!==-1&&(g===ah||[$v,dx].indexOf(g)!==-1&&e[u+1]===ah)||[$v,dx].indexOf(i)!==-1&&g===ah||i===ah&&[ah,cy,ly].indexOf(g)!==-1)return wo;if([ah,cy,ly,_2,Gv].indexOf(g)!==-1)for(var C=o;C>=0;){var B=e[C];if(B===ah)return wo;if([cy,ly].indexOf(B)!==-1)C--;else break}if([fx,hx].indexOf(g)!==-1)for(var C=[_2,Gv].indexOf(i)!==-1?c:o;C>=0;){var B=e[C];if(B===ah)return wo;if([cy,ly].indexOf(B)!==-1)C--;else break}if(_L===i&&[_L,y5,yL,vL].indexOf(g)!==-1||[y5,yL].indexOf(i)!==-1&&[y5,v5].indexOf(g)!==-1||[v5,vL].indexOf(i)!==-1&&g===v5||gU.indexOf(i)!==-1&&[AU,hx].indexOf(g)!==-1||gU.indexOf(g)!==-1&&i===fx||Vp.indexOf(i)!==-1&&Vp.indexOf(g)!==-1||i===ly&&Vp.indexOf(g)!==-1||Vp.concat(ah).indexOf(i)!==-1&&g===$v&&w_e.indexOf(t[u])===-1||Vp.concat(ah).indexOf(g)!==-1&&i===Gv)return wo;if(i===N3&&g===N3){for(var S=r[o],P=1;S>0&&(S--,e[S]===N3);)P++;if(P%2!==0)return wo}return i===b2&&g===w2?wo:C2},T_e=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=B_e(t,e.lineBreak),n=r[0],s=r[1],o=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(u){return[ah,zg,SW].indexOf(u)!==-1?Q_:u}));var c=e.wordBreak==="keep-all"?o.map(function(u,i){return u&&t[i]>=19968&&t[i]<=40959}):void 0;return[n,s,c]},L_e=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===BW,this.start=n,this.end=s}return t.prototype.slice=function(){return Ac.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),I_e=function(t,e){var r=GC(t),n=T_e(r,e),s=n[0],o=n[1],c=n[2],u=r.length,i=0,m=0;return{next:function(){if(m>=u)return{done:!0,value:null};for(var g=wo;m<u&&(g=E_e(r,o,s,++m,c))===wo;);if(g!==wo||m===u){var C=new L_e(r,g,i,m);return i=m,{value:C,done:!1}}return{done:!0,value:null}}}},N_e=1,F_e=2,xb=4,vU=8,T4=10,xU=47,Xx=92,P_e=9,j_e=32,S2=34,qv=61,M_e=35,k_e=36,D_e=37,B2=39,E2=40,Wv=41,O_e=95,Od=45,R_e=33,U_e=60,z_e=62,Q_e=64,H_e=91,V_e=93,G_e=61,$_e=123,T2=63,q_e=125,_U=124,W_e=126,K_e=128,bU=65533,P3=42,Yg=43,X_e=44,Y_e=58,Z_e=59,H_=46,J_e=0,ebe=8,tbe=11,rbe=14,nbe=31,ibe=127,sp=-1,TW=48,LW=97,IW=101,sbe=102,obe=117,abe=122,NW=65,FW=69,PW=70,lbe=85,cbe=90,Ku=function(t){return t>=TW&&t<=57},ube=function(t){return t>=55296&&t<=57343},uy=function(t){return Ku(t)||t>=NW&&t<=PW||t>=LW&&t<=sbe},dbe=function(t){return t>=LW&&t<=abe},hbe=function(t){return t>=NW&&t<=cbe},fbe=function(t){return dbe(t)||hbe(t)},pbe=function(t){return t>=K_e},L2=function(t){return t===T4||t===P_e||t===j_e},L4=function(t){return fbe(t)||pbe(t)||t===O_e},wU=function(t){return L4(t)||Ku(t)||t===Od},Abe=function(t){return t>=J_e&&t<=ebe||t===tbe||t>=rbe&&t<=nbe||t===ibe},nm=function(t,e){return t!==Xx?!1:e!==T4},I2=function(t,e,r){return t===Od?L4(e)||nm(e,r):L4(t)?!0:!!(t===Xx&&nm(t,e))},j3=function(t,e,r){return t===Yg||t===Od?Ku(e)?!0:e===H_&&Ku(r):Ku(t===H_?e:t)},mbe=function(t){var e=0,r=1;(t[e]===Yg||t[e]===Od)&&(t[e]===Od&&(r=-1),e++);for(var n=[];Ku(t[e]);)n.push(t[e++]);var s=n.length?parseInt(Ac.apply(void 0,n),10):0;t[e]===H_&&e++;for(var o=[];Ku(t[e]);)o.push(t[e++]);var c=o.length,u=c?parseInt(Ac.apply(void 0,o),10):0;(t[e]===FW||t[e]===IW)&&e++;var i=1;(t[e]===Yg||t[e]===Od)&&(t[e]===Od&&(i=-1),e++);for(var m=[];Ku(t[e]);)m.push(t[e++]);var g=m.length?parseInt(Ac.apply(void 0,m),10):0;return r*(s+u*Math.pow(10,-c))*Math.pow(10,i*g)},gbe={type:2},ybe={type:3},vbe={type:4},xbe={type:13},_be={type:8},bbe={type:21},wbe={type:9},Cbe={type:10},Sbe={type:11},Bbe={type:12},Ebe={type:14},N2={type:23},Tbe={type:1},Lbe={type:25},Ibe={type:24},Nbe={type:26},Fbe={type:27},Pbe={type:28},jbe={type:29},Mbe={type:31},CL={type:32},jW=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(GC(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==CL;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case S2:return this.consumeStringToken(S2);case M_e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(wU(r)||nm(n,s)){var o=I2(r,n,s)?F_e:N_e,c=this.consumeName();return{type:5,value:c,flags:o}}break;case k_e:if(this.peekCodePoint(0)===qv)return this.consumeCodePoint(),xbe;break;case B2:return this.consumeStringToken(B2);case E2:return gbe;case Wv:return ybe;case P3:if(this.peekCodePoint(0)===qv)return this.consumeCodePoint(),Ebe;break;case Yg:if(j3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case X_e:return vbe;case Od:var u=e,i=this.peekCodePoint(0),m=this.peekCodePoint(1);if(j3(u,i,m))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(I2(u,i,m))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===Od&&m===z_e)return this.consumeCodePoint(),this.consumeCodePoint(),Ibe;break;case H_:if(j3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case xU:if(this.peekCodePoint(0)===P3)for(this.consumeCodePoint();;){var g=this.consumeCodePoint();if(g===P3&&(g=this.consumeCodePoint(),g===xU))return this.consumeToken();if(g===sp)return this.consumeToken()}break;case Y_e:return Nbe;case Z_e:return Fbe;case U_e:if(this.peekCodePoint(0)===R_e&&this.peekCodePoint(1)===Od&&this.peekCodePoint(2)===Od)return this.consumeCodePoint(),this.consumeCodePoint(),Lbe;break;case Q_e:var C=this.peekCodePoint(0),B=this.peekCodePoint(1),S=this.peekCodePoint(2);if(I2(C,B,S)){var c=this.consumeName();return{type:7,value:c}}break;case H_e:return Pbe;case Xx:if(nm(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case V_e:return jbe;case G_e:if(this.peekCodePoint(0)===qv)return this.consumeCodePoint(),_be;break;case $_e:return Sbe;case q_e:return Bbe;case obe:case lbe:var P=this.peekCodePoint(0),j=this.peekCodePoint(1);return P===Yg&&(uy(j)||j===T2)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case _U:if(this.peekCodePoint(0)===qv)return this.consumeCodePoint(),wbe;if(this.peekCodePoint(0)===_U)return this.consumeCodePoint(),bbe;break;case W_e:if(this.peekCodePoint(0)===qv)return this.consumeCodePoint(),Cbe;break;case sp:return CL}return L2(e)?(this.consumeWhiteSpace(),Mbe):Ku(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):L4(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ac(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();uy(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===T2&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(Ac.apply(void 0,e.map(function(i){return i===T2?TW:i})),16),o=parseInt(Ac.apply(void 0,e.map(function(i){return i===T2?PW:i})),16);return{type:30,start:s,end:o}}var c=parseInt(Ac.apply(void 0,e),16);if(this.peekCodePoint(0)===Od&&uy(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var u=[];uy(r)&&u.length<6;)u.push(r),r=this.consumeCodePoint();var o=parseInt(Ac.apply(void 0,u),16);return{type:30,start:c,end:o}}else return{type:30,start:c,end:c}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===E2?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===E2?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===sp)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===B2||r===S2){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===sp||this.peekCodePoint(0)===Wv)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),N2)}for(;;){var s=this.consumeCodePoint();if(s===sp||s===Wv)return{type:22,value:Ac.apply(void 0,e)};if(L2(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===sp||this.peekCodePoint(0)===Wv?(this.consumeCodePoint(),{type:22,value:Ac.apply(void 0,e)}):(this.consumeBadUrlRemnants(),N2);if(s===S2||s===B2||s===E2||Abe(s))return this.consumeBadUrlRemnants(),N2;if(s===Xx)if(nm(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),N2;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;L2(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Wv||e===sp)return;nm(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=Ac.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===sp||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===T4)return this._value.splice(0,n),Tbe;if(s===Xx){var o=this._value[n+1];o!==sp&&o!==void 0&&(o===T4?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):nm(s,o)&&(r+=this.consumeStringSlice(n),r+=Ac(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=xb,n=this.peekCodePoint(0);for((n===Yg||n===Od)&&e.push(this.consumeCodePoint());Ku(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===H_&&Ku(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=vU;Ku(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((n===FW||n===IW)&&((s===Yg||s===Od)&&Ku(o)||Ku(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=vU;Ku(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[mbe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),o=this.peekCodePoint(1),c=this.peekCodePoint(2);if(I2(s,o,c)){var u=this.consumeName();return{type:15,number:r,flags:n,unit:u}}return s===D_e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(uy(e)){for(var r=Ac(e);uy(this.peekCodePoint(0))&&r.length<6;)r+=Ac(this.consumeCodePoint());L2(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||ube(n)||n>1114111?bU:n}return e===sp?bU:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(wU(r))e+=Ac(r);else if(nm(r,this.peekCodePoint(0)))e+=Ac(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),MW=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new jW;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Dbe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?CL:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),_b=function(t){return t.type===15},R1=function(t){return t.type===17},Na=function(t){return t.type===20},kbe=function(t){return t.type===0},SL=function(t,e){return Na(t)&&t.value===e},kW=function(t){return t.type!==31},C1=function(t){return t.type!==31&&t.type!==4},Lp=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},Dbe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ym=function(t){return t.type===17||t.type===15},Ec=function(t){return t.type===16||Ym(t)},DW=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},mu={type:17,number:0,flags:xb},TF={type:16,number:50,flags:xb},vm={type:16,number:100,flags:xb},px=function(t,e,r){var n=t[0],s=t[1];return[Za(n,e),Za(typeof s<"u"?s:n,r)]},Za=function(t,e){if(t.type===16)return t.number/100*e;if(_b(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},OW="deg",RW="grad",UW="rad",zW="turn",$C={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case OW:return Math.PI*e.number/180;case RW:return Math.PI/200*e.number;case UW:return e.number;case zW:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},QW=function(t){return t.type===15&&(t.unit===OW||t.unit===RW||t.unit===UW||t.unit===zW)},HW=function(t){var e=t.filter(Na).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[mu,mu];case"to top":case"bottom":return Xh(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[mu,vm];case"to right":case"left":return Xh(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[vm,vm];case"to bottom":case"top":return Xh(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[vm,mu];case"to left":case"right":return Xh(270)}return 0},Xh=function(t){return Math.PI*t/180},Dm={name:"color",parse:function(t,e){if(e.type===18){var r=Obe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),o=e.value.substring(2,3);return xm(parseInt(n+n,16),parseInt(s+s,16),parseInt(o+o,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),o=e.value.substring(2,3),c=e.value.substring(3,4);return xm(parseInt(n+n,16),parseInt(s+s,16),parseInt(o+o,16),parseInt(c+c,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),o=e.value.substring(4,6);return xm(parseInt(n,16),parseInt(s,16),parseInt(o,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),o=e.value.substring(4,6),c=e.value.substring(6,8);return xm(parseInt(n,16),parseInt(s,16),parseInt(o,16),parseInt(c,16)/255)}}if(e.type===20){var u=aA[e.value.toUpperCase()];if(typeof u<"u")return u}return aA.TRANSPARENT}},Om=function(t){return(255&t)===0},Jc=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},xm=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},CU=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},SU=function(t,e){var r=e.filter(C1);if(r.length===3){var n=r.map(CU),s=n[0],o=n[1],c=n[2];return xm(s,o,c,1)}if(r.length===4){var u=r.map(CU),s=u[0],o=u[1],c=u[2],i=u[3];return xm(s,o,c,i)}return 0};function M3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var BU=function(t,e){var r=e.filter(C1),n=r[0],s=r[1],o=r[2],c=r[3],u=(n.type===17?Xh(n.number):$C.parse(t,n))/(Math.PI*2),i=Ec(s)?s.number/100:0,m=Ec(o)?o.number/100:0,g=typeof c<"u"&&Ec(c)?Za(c,1):1;if(i===0)return xm(m*255,m*255,m*255,1);var C=m<=.5?m*(i+1):m+i-m*i,B=m*2-C,S=M3(B,C,u+1/3),P=M3(B,C,u),j=M3(B,C,u-1/3);return xm(S*255,P*255,j*255,g)},Obe={hsl:BU,hsla:BU,rgb:SU,rgba:SU},Yx=function(t,e){return Dm.parse(t,MW.create(e).parseComponentValue())},aA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Rbe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Na(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ube={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qC=function(t,e){var r=Dm.parse(t,e[0]),n=e[1];return n&&Ec(n)?{color:r,stop:n}:{color:r,stop:null}},EU=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=mu),n.stop===null&&(n.stop=vm);for(var s=[],o=0,c=0;c<t.length;c++){var u=t[c].stop;if(u!==null){var i=Za(u,e);i>o?s.push(i):s.push(o),o=i}else s.push(null)}for(var m=null,c=0;c<s.length;c++){var g=s[c];if(g===null)m===null&&(m=c);else if(m!==null){for(var C=c-m,B=s[m-1],S=(g-B)/(C+1),P=1;P<=C;P++)s[m+P-1]=S*P;m=null}}return t.map(function(j,D){var F=j.color;return{color:F,stop:Math.max(Math.min(1,s[D]/e),0)}})},zbe=function(t,e,r){var n=e/2,s=r/2,o=Za(t[0],e)-n,c=s-Za(t[1],r);return(Math.atan2(c,o)+Math.PI*2)%(Math.PI*2)},Qbe=function(t,e,r){var n=typeof t=="number"?t:zbe(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),o=e/2,c=r/2,u=s/2,i=Math.sin(n-Math.PI/2)*u,m=Math.cos(n-Math.PI/2)*u;return[s,o-m,o+m,c-i,c+i]},Bf=function(t,e){return Math.sqrt(t*t+e*e)},TU=function(t,e,r,n,s){var o=[[0,0],[0,e],[t,0],[t,e]];return o.reduce(function(c,u){var i=u[0],m=u[1],g=Bf(r-i,n-m);return(s?g<c.optimumDistance:g>c.optimumDistance)?{optimumCorner:u,optimumDistance:g}:c},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Hbe=function(t,e,r,n,s){var o=0,c=0;switch(t.size){case 0:t.shape===0?o=c=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(o=Math.min(Math.abs(e),Math.abs(e-n)),c=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)o=c=Math.min(Bf(e,r),Bf(e,r-s),Bf(e-n,r),Bf(e-n,r-s));else if(t.shape===1){var u=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),i=TU(n,s,e,r,!0),m=i[0],g=i[1];o=Bf(m-e,(g-r)/u),c=u*o}break;case 1:t.shape===0?o=c=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(o=Math.max(Math.abs(e),Math.abs(e-n)),c=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)o=c=Math.max(Bf(e,r),Bf(e,r-s),Bf(e-n,r),Bf(e-n,r-s));else if(t.shape===1){var u=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),C=TU(n,s,e,r,!1),m=C[0],g=C[1];o=Bf(m-e,(g-r)/u),c=u*o}break}return Array.isArray(t.size)&&(o=Za(t.size[0],n),c=t.size.length===2?Za(t.size[1],s):o),[o,c]},Vbe=function(t,e){var r=Xh(180),n=[];return Lp(e).forEach(function(s,o){if(o===0){var c=s[0];if(c.type===20&&c.value==="to"){r=HW(s);return}else if(QW(c)){r=$C.parse(t,c);return}}var u=qC(t,s);n.push(u)}),{angle:r,stops:n,type:1}},F2=function(t,e){var r=Xh(180),n=[];return Lp(e).forEach(function(s,o){if(o===0){var c=s[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){r=HW(s);return}else if(QW(c)){r=($C.parse(t,c)+Xh(270))%Xh(360);return}}var u=qC(t,s);n.push(u)}),{angle:r,stops:n,type:1}},Gbe=function(t,e){var r=Xh(180),n=[],s=1,o=0,c=3,u=[];return Lp(e).forEach(function(i,m){var g=i[0];if(m===0){if(Na(g)&&g.value==="linear"){s=1;return}else if(Na(g)&&g.value==="radial"){s=2;return}}if(g.type===18){if(g.name==="from"){var C=Dm.parse(t,g.values[0]);n.push({stop:mu,color:C})}else if(g.name==="to"){var C=Dm.parse(t,g.values[0]);n.push({stop:vm,color:C})}else if(g.name==="color-stop"){var B=g.values.filter(C1);if(B.length===2){var C=Dm.parse(t,B[1]),S=B[0];R1(S)&&n.push({stop:{type:16,number:S.number*100,flags:S.flags},color:C})}}}}),s===1?{angle:(r+Xh(180))%Xh(360),stops:n,type:s}:{size:c,shape:o,stops:n,position:u,type:s}},VW="closest-side",GW="farthest-side",$W="closest-corner",qW="farthest-corner",WW="circle",KW="ellipse",XW="cover",YW="contain",$be=function(t,e){var r=0,n=3,s=[],o=[];return Lp(e).forEach(function(c,u){var i=!0;if(u===0){var m=!1;i=c.reduce(function(C,B){if(m)if(Na(B))switch(B.value){case"center":return o.push(TF),C;case"top":case"left":return o.push(mu),C;case"right":case"bottom":return o.push(vm),C}else(Ec(B)||Ym(B))&&o.push(B);else if(Na(B))switch(B.value){case WW:return r=0,!1;case KW:return r=1,!1;case"at":return m=!0,!1;case VW:return n=0,!1;case XW:case GW:return n=1,!1;case YW:case $W:return n=2,!1;case qW:return n=3,!1}else if(Ym(B)||Ec(B))return Array.isArray(n)||(n=[]),n.push(B),!1;return C},i)}if(i){var g=qC(t,c);s.push(g)}}),{size:n,shape:r,stops:s,position:o,type:2}},P2=function(t,e){var r=0,n=3,s=[],o=[];return Lp(e).forEach(function(c,u){var i=!0;if(u===0?i=c.reduce(function(g,C){if(Na(C))switch(C.value){case"center":return o.push(TF),!1;case"top":case"left":return o.push(mu),!1;case"right":case"bottom":return o.push(vm),!1}else if(Ec(C)||Ym(C))return o.push(C),!1;return g},i):u===1&&(i=c.reduce(function(g,C){if(Na(C))switch(C.value){case WW:return r=0,!1;case KW:return r=1,!1;case YW:case VW:return n=0,!1;case GW:return n=1,!1;case $W:return n=2,!1;case XW:case qW:return n=3,!1}else if(Ym(C)||Ec(C))return Array.isArray(n)||(n=[]),n.push(C),!1;return g},i)),i){var m=qC(t,c);s.push(m)}}),{size:n,shape:r,stops:s,position:o,type:2}},qbe=function(t){return t.type===1},Wbe=function(t){return t.type===2},LF={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=ZW[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Kbe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!ZW[t.name])}var ZW={"linear-gradient":Vbe,"-moz-linear-gradient":F2,"-ms-linear-gradient":F2,"-o-linear-gradient":F2,"-webkit-linear-gradient":F2,"radial-gradient":$be,"-moz-radial-gradient":P2,"-ms-radial-gradient":P2,"-o-radial-gradient":P2,"-webkit-radial-gradient":P2,"-webkit-gradient":Gbe},Xbe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return C1(n)&&Kbe(n)}).map(function(n){return LF.parse(t,n)})}},Ybe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Na(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Zbe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Lp(e).map(function(r){return r.filter(Ec)}).map(DW)}},Jbe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Lp(e).map(function(r){return r.filter(Na).map(function(n){return n.value}).join(" ")}).map(ewe)}},ewe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},t1;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(t1||(t1={}));var twe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Lp(e).map(function(r){return r.filter(rwe)})}},rwe=function(t){return Na(t)||Ec(t)},WC=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},nwe=WC("top"),iwe=WC("right"),swe=WC("bottom"),owe=WC("left"),KC=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return DW(r.filter(Ec))}}},awe=KC("top-left"),lwe=KC("top-right"),cwe=KC("bottom-right"),uwe=KC("bottom-left"),XC=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},dwe=XC("top"),hwe=XC("right"),fwe=XC("bottom"),pwe=XC("left"),YC=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return _b(r)?r.number:0}}},Awe=YC("top"),mwe=YC("right"),gwe=YC("bottom"),ywe=YC("left"),vwe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xwe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},_we={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Na).reduce(function(r,n){return r|bwe(n.value)},0)}},bwe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},wwe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Cwe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},I4;(function(t){t.NORMAL="normal",t.STRICT="strict"})(I4||(I4={}));var Swe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return I4.STRICT;case"normal":default:return I4.NORMAL}}},Bwe={name:"line-height",initialValue:"normal",prefix:!1,type:4},LU=function(t,e){return Na(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ec(t)?Za(t,e):e},Ewe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:LF.parse(t,e)}},Twe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},BL={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},ZC=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Lwe=ZC("top"),Iwe=ZC("right"),Nwe=ZC("bottom"),Fwe=ZC("left"),Pwe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Na).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},jwe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},JC=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Mwe=JC("top"),kwe=JC("right"),Dwe=JC("bottom"),Owe=JC("left"),Rwe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Uwe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},zwe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&SL(e[0],"none")?[]:Lp(e).map(function(r){for(var n={color:aA.TRANSPARENT,offsetX:mu,offsetY:mu,blur:mu},s=0,o=0;o<r.length;o++){var c=r[o];Ym(c)?(s===0?n.offsetX=c:s===1?n.offsetY=c:n.blur=c,s++):n.color=Dm.parse(t,c)}return n})}},Qwe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Hwe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=$we[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Vwe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Gwe=function(t){var e=t.filter(function(i){return i.type===17}).map(function(i){return i.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var c=e[12],u=e[13];return e[14],e[15],e.length===16?[r,n,s,o,c,u]:null},$we={matrix:Vwe,matrix3d:Gwe},IU={type:16,number:50,flags:xb},qwe=[IU,IU],Wwe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ec);return r.length!==2?qwe:[r[0],r[1]]}},Kwe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Zx;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Zx||(Zx={}));var Xwe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Zx.BREAK_ALL;case"keep-all":return Zx.KEEP_ALL;case"normal":default:return Zx.NORMAL}}},Ywe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(R1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},JW={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Zwe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return R1(e)?e.number:1}},Jwe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},e2e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Na).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},t2e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},r2e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},n2e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(R1(e))return e.number;if(Na(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},i2e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Na).map(function(r){return r.value})}},s2e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Gc=function(t,e){return(t&e)!==0},o2e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},a2e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(kW),o=0;o<s.length;o++){var c=s[o],u=s[o+1];if(c.type===20){var i=u&&R1(u)?u.number:1;n.push({counter:c.value,increment:i})}}return n}},l2e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(kW),s=0;s<n.length;s++){var o=n[s],c=n[s+1];if(Na(o)&&o.value!=="none"){var u=c&&R1(c)?c.number:0;r.push({counter:o.value,reset:u})}}return r}},c2e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(_b).map(function(r){return JW.parse(t,r)})}},u2e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(kbe);if(s.length%2!==0)return null;for(var o=0;o<s.length;o+=2){var c=s[o].value,u=s[o+1].value;n.push({open:c,close:u})}return n}},NU=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},d2e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&SL(e[0],"none")?[]:Lp(e).map(function(r){for(var n={color:255,offsetX:mu,offsetY:mu,blur:mu,spread:mu,inset:!1},s=0,o=0;o<r.length;o++){var c=r[o];SL(c,"inset")?n.inset=!0:Ym(c)?(s===0?n.offsetX=c:s===1?n.offsetY=c:s===2?n.blur=c:n.spread=c,s++):n.color=Dm.parse(t,c)}return n})}},h2e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Na).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},f2e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},p2e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return _b(e)?e.number:0}},A2e=function(){function t(e,r){var n,s;this.animationDuration=di(e,c2e,r.animationDuration),this.backgroundClip=di(e,Rbe,r.backgroundClip),this.backgroundColor=di(e,Ube,r.backgroundColor),this.backgroundImage=di(e,Xbe,r.backgroundImage),this.backgroundOrigin=di(e,Ybe,r.backgroundOrigin),this.backgroundPosition=di(e,Zbe,r.backgroundPosition),this.backgroundRepeat=di(e,Jbe,r.backgroundRepeat),this.backgroundSize=di(e,twe,r.backgroundSize),this.borderTopColor=di(e,nwe,r.borderTopColor),this.borderRightColor=di(e,iwe,r.borderRightColor),this.borderBottomColor=di(e,swe,r.borderBottomColor),this.borderLeftColor=di(e,owe,r.borderLeftColor),this.borderTopLeftRadius=di(e,awe,r.borderTopLeftRadius),this.borderTopRightRadius=di(e,lwe,r.borderTopRightRadius),this.borderBottomRightRadius=di(e,cwe,r.borderBottomRightRadius),this.borderBottomLeftRadius=di(e,uwe,r.borderBottomLeftRadius),this.borderTopStyle=di(e,dwe,r.borderTopStyle),this.borderRightStyle=di(e,hwe,r.borderRightStyle),this.borderBottomStyle=di(e,fwe,r.borderBottomStyle),this.borderLeftStyle=di(e,pwe,r.borderLeftStyle),this.borderTopWidth=di(e,Awe,r.borderTopWidth),this.borderRightWidth=di(e,mwe,r.borderRightWidth),this.borderBottomWidth=di(e,gwe,r.borderBottomWidth),this.borderLeftWidth=di(e,ywe,r.borderLeftWidth),this.boxShadow=di(e,d2e,r.boxShadow),this.color=di(e,vwe,r.color),this.direction=di(e,xwe,r.direction),this.display=di(e,_we,r.display),this.float=di(e,wwe,r.cssFloat),this.fontFamily=di(e,t2e,r.fontFamily),this.fontSize=di(e,r2e,r.fontSize),this.fontStyle=di(e,s2e,r.fontStyle),this.fontVariant=di(e,i2e,r.fontVariant),this.fontWeight=di(e,n2e,r.fontWeight),this.letterSpacing=di(e,Cwe,r.letterSpacing),this.lineBreak=di(e,Swe,r.lineBreak),this.lineHeight=di(e,Bwe,r.lineHeight),this.listStyleImage=di(e,Ewe,r.listStyleImage),this.listStylePosition=di(e,Twe,r.listStylePosition),this.listStyleType=di(e,BL,r.listStyleType),this.marginTop=di(e,Lwe,r.marginTop),this.marginRight=di(e,Iwe,r.marginRight),this.marginBottom=di(e,Nwe,r.marginBottom),this.marginLeft=di(e,Fwe,r.marginLeft),this.opacity=di(e,Zwe,r.opacity);var o=di(e,Pwe,r.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=di(e,jwe,r.overflowWrap),this.paddingTop=di(e,Mwe,r.paddingTop),this.paddingRight=di(e,kwe,r.paddingRight),this.paddingBottom=di(e,Dwe,r.paddingBottom),this.paddingLeft=di(e,Owe,r.paddingLeft),this.paintOrder=di(e,h2e,r.paintOrder),this.position=di(e,Uwe,r.position),this.textAlign=di(e,Rwe,r.textAlign),this.textDecorationColor=di(e,Jwe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=di(e,e2e,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=di(e,zwe,r.textShadow),this.textTransform=di(e,Qwe,r.textTransform),this.transform=di(e,Hwe,r.transform),this.transformOrigin=di(e,Wwe,r.transformOrigin),this.visibility=di(e,Kwe,r.visibility),this.webkitTextStrokeColor=di(e,f2e,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=di(e,p2e,r.webkitTextStrokeWidth),this.wordBreak=di(e,Xwe,r.wordBreak),this.zIndex=di(e,Ywe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Om(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Gc(this.display,4)||Gc(this.display,33554432)||Gc(this.display,268435456)||Gc(this.display,536870912)||Gc(this.display,67108864)||Gc(this.display,134217728)},t}(),m2e=function(){function t(e,r){this.content=di(e,o2e,r.content),this.quotes=di(e,u2e,r.quotes)}return t}(),FU=function(){function t(e,r){this.counterIncrement=di(e,a2e,r.counterIncrement),this.counterReset=di(e,l2e,r.counterReset)}return t}(),di=function(t,e,r){var n=new jW,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var o=new MW(n.read());switch(e.type){case 2:var c=o.parseComponentValue();return e.parse(t,Na(c)?c.value:e.initialValue);case 0:return e.parse(t,o.parseComponentValue());case 1:return e.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return $C.parse(t,o.parseComponentValue());case"color":return Dm.parse(t,o.parseComponentValue());case"image":return LF.parse(t,o.parseComponentValue());case"length":var u=o.parseComponentValue();return Ym(u)?u:mu;case"length-percentage":var i=o.parseComponentValue();return Ec(i)?i:mu;case"time":return JW.parse(t,o.parseComponentValue())}break}},g2e="data-html2canvas-debug",y2e=function(t){var e=t.getAttribute(g2e);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},EL=function(t,e){var r=y2e(t);return r===1||e===r},Ip=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,EL(r,3))debugger;this.styles=new A2e(e,window.getComputedStyle(r,null)),IL(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=VC(this.context,r),EL(r,4)&&(this.flags|=16)}return t}(),v2e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ax=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var j2=0;j2<PU.length;j2++)Ax[PU.charCodeAt(j2)]=j2;var x2e=function(t){var e=t.length*.75,r=t.length,n,s=0,o,c,u,i;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var m=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(m)?m:new Uint8Array(m);for(n=0;n<r;n+=4)o=Ax[t.charCodeAt(n)],c=Ax[t.charCodeAt(n+1)],u=Ax[t.charCodeAt(n+2)],i=Ax[t.charCodeAt(n+3)],g[s++]=o<<2|c>>4,g[s++]=(c&15)<<4|u>>2,g[s++]=(u&3)<<6|i&63;return m},_2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},b2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},d0=5,IF=11,k3=2,w2e=IF-d0,eK=65536>>d0,C2e=1<<d0,D3=C2e-1,S2e=1024>>d0,B2e=eK+S2e,E2e=B2e,T2e=32,L2e=E2e+T2e,I2e=65536>>IF,N2e=1<<w2e,F2e=N2e-1,jU=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},P2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},j2e=function(t,e){var r=x2e(t),n=Array.isArray(r)?b2e(r):new Uint32Array(r),s=Array.isArray(r)?_2e(r):new Uint16Array(r),o=24,c=jU(s,o/2,n[4]/2),u=n[5]===2?jU(s,(o+n[4])/2):P2e(n,Math.ceil((o+n[4])/4));return new M2e(n[0],n[1],n[2],n[3],c,u)},M2e=function(){function t(e,r,n,s,o,c){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=o,this.data=c}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>d0],r=(r<<k3)+(e&D3),this.data[r];if(e<=65535)return r=this.index[eK+(e-55296>>d0)],r=(r<<k3)+(e&D3),this.data[r];if(e<this.highStart)return r=L2e-I2e+(e>>IF),r=this.index[r],r+=e>>d0&F2e,r=this.index[r],r=(r<<k3)+(e&D3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),MU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var M2=0;M2<MU.length;M2++)k2e[MU.charCodeAt(M2)]=M2;var D2e=1,O3=2,R3=3,kU=4,DU=5,O2e=7,OU=8,U3=9,z3=10,RU=11,UU=12,zU=13,QU=14,Q3=15,R2e=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var o=t.charCodeAt(r++);(o&64512)===56320?e.push(((s&1023)<<10)+(o&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},U2e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,o="";++s<r;){var c=t[s];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(s+1===r||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},z2e=j2e(v2e),Hh="",H3="",Q2e=function(t){return z2e.get(t)},H2e=function(t,e,r){var n=r-2,s=e[n],o=e[r-1],c=e[r];if(o===O3&&c===R3)return Hh;if(o===O3||o===R3||o===kU||c===O3||c===R3||c===kU)return H3;if(o===OU&&[OU,U3,RU,UU].indexOf(c)!==-1||(o===RU||o===U3)&&(c===U3||c===z3)||(o===UU||o===z3)&&c===z3||c===zU||c===DU||c===O2e||o===D2e)return Hh;if(o===zU&&c===QU){for(;s===DU;)s=e[--n];if(s===QU)return Hh}if(o===Q3&&c===Q3){for(var u=0;s===Q3;)u++,s=e[--n];if(u%2===0)return Hh}return H3},V2e=function(t){var e=R2e(t),r=e.length,n=0,s=0,o=e.map(Q2e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var c=Hh;n<r&&(c=H2e(e,o,++n))===Hh;);if(c!==Hh||n===r){var u=U2e.apply(null,e.slice(s,n));return s=n,{value:u,done:!1}}return{done:!0,value:null}}}},G2e=function(t){for(var e=V2e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},$2e=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),o=Math.round(s.height);if(t.body.removeChild(n),o===e)return!0}}return!1},q2e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=GC(n.data).map(function(i){return Ac(i)}),o=0,c={},u=s.every(function(i,m){r.setStart(n,o),r.setEnd(n,o+i.length);var g=r.getBoundingClientRect();o+=i.length;var C=g.x>c.x||g.y>c.y;return c=g,m===0?!0:C});return t.body.removeChild(e),u},W2e=function(){return typeof new Image().crossOrigin<"u"},K2e=function(){return typeof new XMLHttpRequest().responseType=="string"},X2e=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},HU=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},Y2e=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,o=e.toDataURL();s.src=o;var c=TL(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),VU(c).then(function(u){n.drawImage(u,0,0);var i=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var m=t.createElement("div");return m.style.backgroundImage="url("+o+")",m.style.height=r+"px",HU(i)?VU(TL(r,r,0,0,m)):Promise.reject(!1)}).then(function(u){return n.drawImage(u,0,0),HU(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},TL=function(t,e,r,n,s){var o="http://www.w3.org/2000/svg",c=document.createElementNS(o,"svg"),u=document.createElementNS(o,"foreignObject");return c.setAttributeNS(null,"width",t.toString()),c.setAttributeNS(null,"height",e.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",n.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(u),u.appendChild(s),c},VU=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Au={get SUPPORT_RANGE_BOUNDS(){var t=$2e(document);return Object.defineProperty(Au,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Au.SUPPORT_RANGE_BOUNDS&&q2e(document);return Object.defineProperty(Au,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=X2e(document);return Object.defineProperty(Au,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?Y2e(document):Promise.resolve(!1);return Object.defineProperty(Au,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=W2e();return Object.defineProperty(Au,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=K2e();return Object.defineProperty(Au,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Au,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Au,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Jx=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Z2e=function(t,e,r,n){var s=t5e(e,r),o=[],c=0;return s.forEach(function(u){if(r.textDecorationLine.length||u.trim().length>0)if(Au.SUPPORT_RANGE_BOUNDS){var i=GU(n,c,u.length).getClientRects();if(i.length>1){var m=NF(u),g=0;m.forEach(function(B){o.push(new Jx(B,gA.fromDOMRectList(t,GU(n,g+c,B.length).getClientRects()))),g+=B.length})}else o.push(new Jx(u,gA.fromDOMRectList(t,i)))}else{var C=n.splitText(u.length);o.push(new Jx(u,J2e(t,n))),n=C}else Au.SUPPORT_RANGE_BOUNDS||(n=n.splitText(u.length));c+=u.length}),o},J2e=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var o=VC(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),o}}return gA.EMPTY},GU=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},NF=function(t){if(Au.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return G2e(t)},e5e=function(t,e){if(Au.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return n5e(t,e)},t5e=function(t,e){return e.letterSpacing!==0?NF(t):e5e(t,e)},r5e=[32,160,4961,65792,65793,4153,4241],n5e=function(t,e){for(var r=I_e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,o=function(){if(s.value){var c=s.value.slice(),u=GC(c),i="";u.forEach(function(m){r5e.indexOf(m)===-1?i+=Ac(m):(i.length&&n.push(i),n.push(Ac(m)),i="")}),i.length&&n.push(i)}};!(s=r.next()).done;)o();return n},i5e=function(){function t(e,r,n){this.text=s5e(r.data,n.textTransform),this.textBounds=Z2e(e,this.text,n,r)}return t}(),s5e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(o5e,a5e);case 2:return t.toUpperCase();default:return t}},o5e=/(^|\s|:|-|\(|\))([a-z])/g,a5e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},tK=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ip),rK=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ip),nK=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this,o=new XMLSerializer,c=VC(r,n);return n.setAttribute("width",c.width+"px"),n.setAttribute("height",c.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ip),iK=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ip),LL=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ip),l5e=[{type:15,flags:0,unit:"px",number:3}],c5e=[{type:16,flags:0,number:50}],u5e=function(t){return t.width>t.height?new gA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new gA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},d5e=function(t){var e=t.type===h5e?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},N4="checkbox",F4="radio",h5e="password",$U=707406591,FF=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=d5e(n),(s.type===N4||s.type===F4)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=u5e(s.bounds)),s.type){case N4:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=l5e;break;case F4:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=c5e;break}return s}return e}(Ip),sK=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this,o=n.options[n.selectedIndex||0];return s.value=o&&o.text||"",s}return e}(Ip),oK=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ip),aK=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=cK(r,n.contentWindow.document.documentElement);var o=n.contentWindow.document.documentElement?Yx(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):aA.TRANSPARENT,c=n.contentWindow.document.body?Yx(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):aA.TRANSPARENT;s.backgroundColor=Om(o)?Om(c)?s.styles.backgroundColor:c:o}}catch{}return s}return e}(Ip),f5e=["OL","UL","MENU"],x5=function(t,e,r,n){for(var s=e.firstChild,o=void 0;s;s=o)if(o=s.nextSibling,uK(s)&&s.data.trim().length>0)r.textNodes.push(new i5e(t,s,r.styles));else if(Qy(s))if(pK(s)&&s.assignedNodes)s.assignedNodes().forEach(function(u){return x5(t,u,r,n)});else{var c=lK(t,s);c.styles.isVisible()&&(p5e(s,c,n)?c.flags|=4:A5e(c.styles)&&(c.flags|=2),f5e.indexOf(s.tagName)!==-1&&(c.flags|=8),r.elements.push(c),s.slot,s.shadowRoot?x5(t,s.shadowRoot,c,n):!P4(s)&&!dK(s)&&!j4(s)&&x5(t,s,c,n))}},lK=function(t,e){return NL(e)?new tK(t,e):hK(e)?new rK(t,e):dK(e)?new nK(t,e):m5e(e)?new iK(t,e):g5e(e)?new LL(t,e):y5e(e)?new FF(t,e):j4(e)?new sK(t,e):P4(e)?new oK(t,e):fK(e)?new aK(t,e):new Ip(t,e)},cK=function(t,e){var r=lK(t,e);return r.flags|=4,x5(t,e,r,r),r},p5e=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||PF(t)&&r.styles.isTransparent()},A5e=function(t){return t.isPositioned()||t.isFloating()},uK=function(t){return t.nodeType===Node.TEXT_NODE},Qy=function(t){return t.nodeType===Node.ELEMENT_NODE},IL=function(t){return Qy(t)&&typeof t.style<"u"&&!_5(t)},_5=function(t){return typeof t.className=="object"},m5e=function(t){return t.tagName==="LI"},g5e=function(t){return t.tagName==="OL"},y5e=function(t){return t.tagName==="INPUT"},v5e=function(t){return t.tagName==="HTML"},dK=function(t){return t.tagName==="svg"},PF=function(t){return t.tagName==="BODY"},hK=function(t){return t.tagName==="CANVAS"},qU=function(t){return t.tagName==="VIDEO"},NL=function(t){return t.tagName==="IMG"},fK=function(t){return t.tagName==="IFRAME"},WU=function(t){return t.tagName==="STYLE"},x5e=function(t){return t.tagName==="SCRIPT"},P4=function(t){return t.tagName==="TEXTAREA"},j4=function(t){return t.tagName==="SELECT"},pK=function(t){return t.tagName==="SLOT"},KU=function(t){return t.tagName.indexOf("-")>0},_5e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,o=!0;n!==null&&n.forEach(function(u){var i=r.counters[u.counter];i&&u.increment!==0&&(o=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=u.increment)});var c=[];return o&&s.forEach(function(u){var i=r.counters[u.counter];c.push(u.counter),i||(i=r.counters[u.counter]=[]),i.push(u.reset)}),c},t}(),XU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},YU={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},b5e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},w5e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},dy=function(t,e,r,n,s,o){return t<e||t>r?V_(t,s,o.length>0):n.integers.reduce(function(c,u,i){for(;t>=u;)t-=u,c+=n.values[i];return c},"")+o},AK=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},fc=function(t,e,r,n,s){var o=r-e+1;return(t<0?"-":"")+(AK(Math.abs(t),o,n,function(c){return Ac(Math.floor(c%o)+e)})+s)},Ig=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return AK(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},yy=1,ZA=2,JA=4,mx=8,Gp=function(t,e,r,n,s,o){if(t<-9999||t>9999)return V_(t,4,s.length>0);var c=Math.abs(t),u=s;if(c===0)return e[0]+u;for(var i=0;c>0&&i<=4;i++){var m=c%10;m===0&&Gc(o,yy)&&u!==""?u=e[m]+u:m>1||m===1&&i===0||m===1&&i===1&&Gc(o,ZA)||m===1&&i===1&&Gc(o,JA)&&t>100||m===1&&i>1&&Gc(o,mx)?u=e[m]+(i>0?r[i-1]:"")+u:m===1&&i>0&&(u=r[i-1]+u),c=Math.floor(c/10)}return(t<0?n:"")+u},ZU="",JU="",ez="",V3="",V_=function(t,e,r){var n=r?". ":"",s=r?"":"",o=r?", ":"",c=r?" ":"";switch(e){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var u=fc(t,48,57,!0,n);return u.length<4?"0"+u:u;case 4:return Ig(t,"",s);case 6:return dy(t,1,3999,XU,3,n).toLowerCase();case 7:return dy(t,1,3999,XU,3,n);case 8:return fc(t,945,969,!1,n);case 9:return fc(t,97,122,!1,n);case 10:return fc(t,65,90,!1,n);case 11:return fc(t,1632,1641,!0,n);case 12:case 49:return dy(t,1,9999,YU,3,n);case 35:return dy(t,1,9999,YU,3,n).toLowerCase();case 13:return fc(t,2534,2543,!0,n);case 14:case 30:return fc(t,6112,6121,!0,n);case 15:return Ig(t,"",s);case 16:return Ig(t,"",s);case 17:case 48:return Gp(t,"",ZU,"",s,ZA|JA|mx);case 47:return Gp(t,"",JU,"",s,yy|ZA|JA|mx);case 42:return Gp(t,"",ZU,"",s,ZA|JA|mx);case 41:return Gp(t,"",JU,"",s,yy|ZA|JA|mx);case 26:return Gp(t,"","",ez,s,0);case 25:return Gp(t,"","",ez,s,yy|ZA|JA);case 31:return Gp(t,"","",V3,o,yy|ZA|JA);case 33:return Gp(t,"","",V3,o,0);case 32:return Gp(t,"","",V3,o,yy|ZA|JA);case 18:return fc(t,2406,2415,!0,n);case 20:return dy(t,1,19999,w5e,3,n);case 21:return fc(t,2790,2799,!0,n);case 22:return fc(t,2662,2671,!0,n);case 22:return dy(t,1,10999,b5e,3,n);case 23:return Ig(t,"");case 24:return Ig(t,"");case 27:return fc(t,3302,3311,!0,n);case 28:return Ig(t,"",s);case 29:return Ig(t,"",s);case 34:return fc(t,3792,3801,!0,n);case 37:return fc(t,6160,6169,!0,n);case 38:return fc(t,4160,4169,!0,n);case 39:return fc(t,2918,2927,!0,n);case 40:return fc(t,1776,1785,!0,n);case 43:return fc(t,3046,3055,!0,n);case 44:return fc(t,3174,3183,!0,n);case 45:return fc(t,3664,3673,!0,n);case 46:return fc(t,3872,3881,!0,n);case 3:default:return fc(t,48,57,!0,n)}},mK="data-html2canvas-ignore",tz=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new _5e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=C5e(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var o=e.defaultView.pageXOffset,c=e.defaultView.pageYOffset,u=s.contentWindow,i=u.document,m=E5e(s).then(function(){return gd(n,void 0,void 0,function(){var g,C;return $u(this,function(B){switch(B.label){case 0:return this.scrolledElements.forEach(N5e),u&&(u.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==r.top||u.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-r.left,u.scrollY-r.top,0,0))),g=this.options.onclone,C=this.clonedReferenceElement,typeof C>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:i.fonts&&i.fonts.ready?[4,i.fonts.ready]:[3,2];case 1:B.sent(),B.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,B5e(i)]:[3,4];case 3:B.sent(),B.label=4;case 4:return typeof g=="function"?[2,Promise.resolve().then(function(){return g(i,C)}).then(function(){return s})]:[2,s]}})})});return i.open(),i.write(L5e(document.doctype)+"<html></html>"),I5e(this.referenceElement.ownerDocument,o,c),i.replaceChild(i.adoptNode(this.documentElement),i.documentElement),i.close(),m},t.prototype.createElementClone=function(e){if(EL(e,2))debugger;if(hK(e))return this.createCanvasClone(e);if(qU(e))return this.createVideoClone(e);if(WU(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return NL(r)&&(NL(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),KU(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return G3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(o,c){return c&&typeof c.cssText=="string"?o+c.cssText:o},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),o.name!=="SecurityError")throw o}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var o=e.getContext("2d"),c=s.getContext("2d");if(c)if(!this.options.allowTaint&&o)c.putImageData(o.getImageData(0,0,e.width,e.height),0,0);else{var u=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(u){var i=u.getContextAttributes();(i==null?void 0:i.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}c.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!Qy(r)||!x5e(r)&&!r.hasAttribute(mK)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Qy(r)||!WU(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,o=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;o;o=o.nextSibling)if(Qy(o)&&pK(o)&&typeof o.assignedNodes=="function"){var c=o.assignedNodes();c.length&&c.forEach(function(u){return s.appendChildNode(r,u,n)})}else this.appendChildNode(r,o,n)},t.prototype.cloneNode=function(e,r){if(uK(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Qy(e)&&(IL(e)||_5(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var o=n.getComputedStyle(e),c=n.getComputedStyle(e,":before"),u=n.getComputedStyle(e,":after");this.referenceElement===e&&IL(s)&&(this.clonedReferenceElement=s),PF(s)&&j5e(s);var i=this.counters.parse(new FU(this.context,o)),m=this.resolvePseudoContent(e,s,c,e_.BEFORE);KU(e)&&(r=!0),qU(e)||this.cloneChildNodes(e,s,r),m&&s.insertBefore(m,s.firstChild);var g=this.resolvePseudoContent(e,s,u,e_.AFTER);return g&&s.appendChild(g),this.counters.pop(i),(o&&(this.options.copyStyles||_5(e))&&!fK(e)||r)&&G3(o,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(P4(e)||j4(e))&&(P4(s)||j4(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var o=this;if(n){var c=n.content,u=r.ownerDocument;if(!(!u||!c||c==="none"||c==="-moz-alt-content"||n.display==="none")){this.counters.parse(new FU(this.context,n));var i=new m2e(this.context,n),m=u.createElement("html2canvaspseudoelement");G3(n,m),i.content.forEach(function(C){if(C.type===0)m.appendChild(u.createTextNode(C.value));else if(C.type===22){var B=u.createElement("img");B.src=C.value,B.style.opacity="1",m.appendChild(B)}else if(C.type===18){if(C.name==="attr"){var S=C.values.filter(Na);S.length&&m.appendChild(u.createTextNode(e.getAttribute(S[0].value)||""))}else if(C.name==="counter"){var P=C.values.filter(C1),j=P[0],D=P[1];if(j&&Na(j)){var F=o.counters.getCounterValue(j.value),R=D&&Na(D)?BL.parse(o.context,D.value):3;m.appendChild(u.createTextNode(V_(F,R,!1)))}}else if(C.name==="counters"){var V=C.values.filter(C1),j=V[0],Y=V[1],D=V[2];if(j&&Na(j)){var te=o.counters.getCounterValues(j.value),se=D&&Na(D)?BL.parse(o.context,D.value):3,oe=Y&&Y.type===0?Y.value:"",K=te.map(function(J){return V_(J,se,!1)}).join(oe);m.appendChild(u.createTextNode(K))}}}else if(C.type===20)switch(C.value){case"open-quote":m.appendChild(u.createTextNode(NU(i.quotes,o.quoteDepth++,!0)));break;case"close-quote":m.appendChild(u.createTextNode(NU(i.quotes,--o.quoteDepth,!1)));break;default:m.appendChild(u.createTextNode(C.value))}}),m.className=FL+" "+PL;var g=s===e_.BEFORE?" "+FL:" "+PL;return _5(r)?r.className.baseValue+=g:r.className+=g,m}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),e_;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(e_||(e_={}));var C5e=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(mK,"true"),t.body.appendChild(r),r},S5e=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},B5e=function(t){return Promise.all([].slice.call(t.images,0).map(S5e))},E5e=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var o=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(o),e(t))},50)}})},T5e=["all","d","content"],G3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);T5e.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},L5e=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},I5e=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},N5e=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},F5e=":before",P5e=":after",FL="___html2canvas___pseudoelement_before",PL="___html2canvas___pseudoelement_after",rz=`{
    content: "" !important;
    display: none !important;
}`,j5e=function(t){M5e(t,"."+FL+F5e+rz+`
         .`+PL+P5e+rz)},M5e=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},gK=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),k5e=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(q3(e)||U5e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return gd(this,void 0,void 0,function(){var r,n,s,o,c=this;return $u(this,function(u){switch(u.label){case 0:return r=gK.isSameOrigin(e),n=!$3(e)&&this._options.useCORS===!0&&Au.SUPPORT_CORS_IMAGES&&!r,s=!$3(e)&&!r&&!q3(e)&&typeof this._options.proxy=="string"&&Au.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!$3(e)&&!q3(e)&&!s&&!n?[2]:(o=e,s?[4,this.proxy(o)]:[3,2]);case 1:o=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(i,m){var g=new Image;g.onload=function(){return i(g)},g.onerror=m,(z5e(o)||n)&&(g.crossOrigin="anonymous"),g.src=o,g.complete===!0&&setTimeout(function(){return i(g)},500),c._options.imageTimeout>0&&setTimeout(function(){return m("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(o,c){var u=Au.SUPPORT_RESPONSE_TYPE?"blob":"text",i=new XMLHttpRequest;i.onload=function(){if(i.status===200)if(u==="text")o(i.response);else{var C=new FileReader;C.addEventListener("load",function(){return o(C.result)},!1),C.addEventListener("error",function(B){return c(B)},!1),C.readAsDataURL(i.response)}else c("Failed to proxy resource "+s+" with status code "+i.status)},i.onerror=c;var m=n.indexOf("?")>-1?"&":"?";if(i.open("GET",""+n+m+"url="+encodeURIComponent(e)+"&responseType="+u),u!=="text"&&i instanceof XMLHttpRequest&&(i.responseType=u),r._options.imageTimeout){var g=r._options.imageTimeout;i.timeout=g,i.ontimeout=function(){return c("Timed out ("+g+"ms) proxying "+s)}}i.send()})},t}(),D5e=/^data:image\/svg\+xml/i,O5e=/^data:image\/.*;base64,/i,R5e=/^data:image\/.*/i,U5e=function(t){return Au.SUPPORT_SVG_DRAWING||!Q5e(t)},$3=function(t){return R5e.test(t)},z5e=function(t){return O5e.test(t)},q3=function(t){return t.substr(0,4)==="blob"},Q5e=function(t){return t.substr(-3).toLowerCase()==="svg"||D5e.test(t)},li=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),hy=function(t,e,r){return new li(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},k2=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=hy(this.start,this.startControl,e),s=hy(this.startControl,this.endControl,e),o=hy(this.endControl,this.end,e),c=hy(n,s,e),u=hy(s,o,e),i=hy(c,u,e);return r?new t(this.start,n,c,i):new t(i,u,o,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Wh=function(t){return t.type===1},H5e=function(){function t(e){var r=e.styles,n=e.bounds,s=px(r.borderTopLeftRadius,n.width,n.height),o=s[0],c=s[1],u=px(r.borderTopRightRadius,n.width,n.height),i=u[0],m=u[1],g=px(r.borderBottomRightRadius,n.width,n.height),C=g[0],B=g[1],S=px(r.borderBottomLeftRadius,n.width,n.height),P=S[0],j=S[1],D=[];D.push((o+i)/n.width),D.push((P+C)/n.width),D.push((c+j)/n.height),D.push((m+B)/n.height);var F=Math.max.apply(Math,D);F>1&&(o/=F,c/=F,i/=F,m/=F,C/=F,B/=F,P/=F,j/=F);var R=n.width-i,V=n.height-B,Y=n.width-C,te=n.height-j,se=r.borderTopWidth,oe=r.borderRightWidth,K=r.borderBottomWidth,de=r.borderLeftWidth,we=Za(r.paddingTop,e.bounds.width),J=Za(r.paddingRight,e.bounds.width),Z=Za(r.paddingBottom,e.bounds.width),Ie=Za(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||c>0?bl(n.left+de/3,n.top+se/3,o-de/3,c-se/3,ua.TOP_LEFT):new li(n.left+de/3,n.top+se/3),this.topRightBorderDoubleOuterBox=o>0||c>0?bl(n.left+R,n.top+se/3,i-oe/3,m-se/3,ua.TOP_RIGHT):new li(n.left+n.width-oe/3,n.top+se/3),this.bottomRightBorderDoubleOuterBox=C>0||B>0?bl(n.left+Y,n.top+V,C-oe/3,B-K/3,ua.BOTTOM_RIGHT):new li(n.left+n.width-oe/3,n.top+n.height-K/3),this.bottomLeftBorderDoubleOuterBox=P>0||j>0?bl(n.left+de/3,n.top+te,P-de/3,j-K/3,ua.BOTTOM_LEFT):new li(n.left+de/3,n.top+n.height-K/3),this.topLeftBorderDoubleInnerBox=o>0||c>0?bl(n.left+de*2/3,n.top+se*2/3,o-de*2/3,c-se*2/3,ua.TOP_LEFT):new li(n.left+de*2/3,n.top+se*2/3),this.topRightBorderDoubleInnerBox=o>0||c>0?bl(n.left+R,n.top+se*2/3,i-oe*2/3,m-se*2/3,ua.TOP_RIGHT):new li(n.left+n.width-oe*2/3,n.top+se*2/3),this.bottomRightBorderDoubleInnerBox=C>0||B>0?bl(n.left+Y,n.top+V,C-oe*2/3,B-K*2/3,ua.BOTTOM_RIGHT):new li(n.left+n.width-oe*2/3,n.top+n.height-K*2/3),this.bottomLeftBorderDoubleInnerBox=P>0||j>0?bl(n.left+de*2/3,n.top+te,P-de*2/3,j-K*2/3,ua.BOTTOM_LEFT):new li(n.left+de*2/3,n.top+n.height-K*2/3),this.topLeftBorderStroke=o>0||c>0?bl(n.left+de/2,n.top+se/2,o-de/2,c-se/2,ua.TOP_LEFT):new li(n.left+de/2,n.top+se/2),this.topRightBorderStroke=o>0||c>0?bl(n.left+R,n.top+se/2,i-oe/2,m-se/2,ua.TOP_RIGHT):new li(n.left+n.width-oe/2,n.top+se/2),this.bottomRightBorderStroke=C>0||B>0?bl(n.left+Y,n.top+V,C-oe/2,B-K/2,ua.BOTTOM_RIGHT):new li(n.left+n.width-oe/2,n.top+n.height-K/2),this.bottomLeftBorderStroke=P>0||j>0?bl(n.left+de/2,n.top+te,P-de/2,j-K/2,ua.BOTTOM_LEFT):new li(n.left+de/2,n.top+n.height-K/2),this.topLeftBorderBox=o>0||c>0?bl(n.left,n.top,o,c,ua.TOP_LEFT):new li(n.left,n.top),this.topRightBorderBox=i>0||m>0?bl(n.left+R,n.top,i,m,ua.TOP_RIGHT):new li(n.left+n.width,n.top),this.bottomRightBorderBox=C>0||B>0?bl(n.left+Y,n.top+V,C,B,ua.BOTTOM_RIGHT):new li(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=P>0||j>0?bl(n.left,n.top+te,P,j,ua.BOTTOM_LEFT):new li(n.left,n.top+n.height),this.topLeftPaddingBox=o>0||c>0?bl(n.left+de,n.top+se,Math.max(0,o-de),Math.max(0,c-se),ua.TOP_LEFT):new li(n.left+de,n.top+se),this.topRightPaddingBox=i>0||m>0?bl(n.left+Math.min(R,n.width-oe),n.top+se,R>n.width+oe?0:Math.max(0,i-oe),Math.max(0,m-se),ua.TOP_RIGHT):new li(n.left+n.width-oe,n.top+se),this.bottomRightPaddingBox=C>0||B>0?bl(n.left+Math.min(Y,n.width-de),n.top+Math.min(V,n.height-K),Math.max(0,C-oe),Math.max(0,B-K),ua.BOTTOM_RIGHT):new li(n.left+n.width-oe,n.top+n.height-K),this.bottomLeftPaddingBox=P>0||j>0?bl(n.left+de,n.top+Math.min(te,n.height-K),Math.max(0,P-de),Math.max(0,j-K),ua.BOTTOM_LEFT):new li(n.left+de,n.top+n.height-K),this.topLeftContentBox=o>0||c>0?bl(n.left+de+Ie,n.top+se+we,Math.max(0,o-(de+Ie)),Math.max(0,c-(se+we)),ua.TOP_LEFT):new li(n.left+de+Ie,n.top+se+we),this.topRightContentBox=i>0||m>0?bl(n.left+Math.min(R,n.width+de+Ie),n.top+se+we,R>n.width+de+Ie?0:i-de+Ie,m-(se+we),ua.TOP_RIGHT):new li(n.left+n.width-(oe+J),n.top+se+we),this.bottomRightContentBox=C>0||B>0?bl(n.left+Math.min(Y,n.width-(de+Ie)),n.top+Math.min(V,n.height+se+we),Math.max(0,C-(oe+J)),B-(K+Z),ua.BOTTOM_RIGHT):new li(n.left+n.width-(oe+J),n.top+n.height-(K+Z)),this.bottomLeftContentBox=P>0||j>0?bl(n.left+de+Ie,n.top+te,Math.max(0,P-(de+Ie)),j-(K+Z),ua.BOTTOM_LEFT):new li(n.left+de+Ie,n.top+n.height-(K+Z))}return t}(),ua;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ua||(ua={}));var bl=function(t,e,r,n,s){var o=4*((Math.sqrt(2)-1)/3),c=r*o,u=n*o,i=t+r,m=e+n;switch(s){case ua.TOP_LEFT:return new k2(new li(t,m),new li(t,m-u),new li(i-c,e),new li(i,e));case ua.TOP_RIGHT:return new k2(new li(t,e),new li(t+c,e),new li(i,m-u),new li(i,m));case ua.BOTTOM_RIGHT:return new k2(new li(i,e),new li(i,e+u),new li(t+c,m),new li(t,m));case ua.BOTTOM_LEFT:default:return new k2(new li(i,m),new li(i-c,m),new li(t,e+u),new li(t,e))}},M4=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},V5e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},k4=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},G5e=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),D2=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),$5e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),q5e=function(t){return t.type===0},yK=function(t){return t.type===1},W5e=function(t){return t.type===2},nz=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},K5e=function(t,e,r,n,s){return t.map(function(o,c){switch(c){case 0:return o.add(e,r);case 1:return o.add(e+n,r);case 2:return o.add(e+n,r+s);case 3:return o.add(e,r+s)}return o})},vK=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),xK=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new H5e(this.container),this.container.styles.opacity<1&&this.effects.push(new $5e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new G5e(n,s,o))}if(this.container.styles.overflowX!==0){var c=M4(this.curves),u=k4(this.curves);nz(c,u)?this.effects.push(new D2(c,6)):(this.effects.push(new D2(c,2)),this.effects.push(new D2(u,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var o=n.effects.filter(function(i){return!yK(i)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,o),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var c=M4(n.curves),u=k4(n.curves);nz(c,u)||s.unshift(new D2(u,6))}}else s.unshift.apply(s,o);n=n.parent}return s.filter(function(i){return Gc(i.target,e)})},t}(),jL=function(t,e,r,n){t.container.elements.forEach(function(s){var o=Gc(s.flags,4),c=Gc(s.flags,2),u=new xK(s,t);Gc(s.styles.display,2048)&&n.push(u);var i=Gc(s.flags,8)?[]:n;if(o||c){var m=o||s.styles.isPositioned()?r:e,g=new vK(u);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var C=s.styles.zIndex.order;if(C<0){var B=0;m.negativeZIndex.some(function(P,j){return C>P.element.container.styles.zIndex.order?(B=j,!1):B>0}),m.negativeZIndex.splice(B,0,g)}else if(C>0){var S=0;m.positiveZIndex.some(function(P,j){return C>=P.element.container.styles.zIndex.order?(S=j+1,!1):S>0}),m.positiveZIndex.splice(S,0,g)}else m.zeroOrAutoZIndexOrTransformedOrOpacity.push(g)}else s.styles.isFloating()?m.nonPositionedFloats.push(g):m.nonPositionedInlineLevel.push(g);jL(u,g,o?g:r,i)}else s.styles.isInlineLevel()?e.inlineLevel.push(u):e.nonInlineLevel.push(u),jL(u,e,r,i);Gc(s.flags,8)&&_K(s,i)})},_K=function(t,e){for(var r=t instanceof LL?t.start:1,n=t instanceof LL?t.reversed:!1,s=0;s<e.length;s++){var o=e[s];o.container instanceof iK&&typeof o.container.value=="number"&&o.container.value!==0&&(r=o.container.value),o.listValue=V_(r,o.container.styles.listStyleType,!0),r+=n?-1:1}},X5e=function(t){var e=new xK(t,null),r=new vK(e),n=[];return jL(e,r,r,n),_K(e.container,n),r},iz=function(t,e){switch(e){case 0:return Yh(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Yh(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Yh(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Yh(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Y5e=function(t,e){switch(e){case 0:return Yh(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Yh(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Yh(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Yh(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Z5e=function(t,e){switch(e){case 0:return Yh(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Yh(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Yh(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Yh(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},J5e=function(t,e){switch(e){case 0:return O2(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return O2(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return O2(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return O2(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},O2=function(t,e){var r=[];return Wh(t)?r.push(t.subdivide(.5,!1)):r.push(t),Wh(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Yh=function(t,e,r,n){var s=[];return Wh(t)?s.push(t.subdivide(.5,!1)):s.push(t),Wh(r)?s.push(r.subdivide(.5,!0)):s.push(r),Wh(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Wh(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},bK=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},D4=function(t){var e=t.styles,r=t.bounds,n=Za(e.paddingLeft,r.width),s=Za(e.paddingRight,r.width),o=Za(e.paddingTop,r.width),c=Za(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+o+c))},e4e=function(t,e){return t===0?e.bounds:t===2?D4(e):bK(e)},t4e=function(t,e){return t===0?e.bounds:t===2?D4(e):bK(e)},W3=function(t,e,r){var n=e4e(vy(t.styles.backgroundOrigin,e),t),s=t4e(vy(t.styles.backgroundClip,e),t),o=r4e(vy(t.styles.backgroundSize,e),r,n),c=o[0],u=o[1],i=px(vy(t.styles.backgroundPosition,e),n.width-c,n.height-u),m=n4e(vy(t.styles.backgroundRepeat,e),i,o,n,s),g=Math.round(n.left+i[0]),C=Math.round(n.top+i[1]);return[m,g,C,c,u]},fy=function(t){return Na(t)&&t.value===t1.AUTO},R2=function(t){return typeof t=="number"},r4e=function(t,e,r){var n=e[0],s=e[1],o=e[2],c=t[0],u=t[1];if(!c)return[0,0];if(Ec(c)&&u&&Ec(u))return[Za(c,r.width),Za(u,r.height)];var i=R2(o);if(Na(c)&&(c.value===t1.CONTAIN||c.value===t1.COVER)){if(R2(o)){var m=r.width/r.height;return m<o!=(c.value===t1.COVER)?[r.width,r.width/o]:[r.height*o,r.height]}return[r.width,r.height]}var g=R2(n),C=R2(s),B=g||C;if(fy(c)&&(!u||fy(u))){if(g&&C)return[n,s];if(!i&&!B)return[r.width,r.height];if(B&&i){var S=g?n:s*o,P=C?s:n/o;return[S,P]}var j=g?n:r.width,D=C?s:r.height;return[j,D]}if(i){var F=0,R=0;return Ec(c)?F=Za(c,r.width):Ec(u)&&(R=Za(u,r.height)),fy(c)?F=R*o:(!u||fy(u))&&(R=F/o),[F,R]}var V=null,Y=null;if(Ec(c)?V=Za(c,r.width):u&&Ec(u)&&(Y=Za(u,r.height)),V!==null&&(!u||fy(u))&&(Y=g&&C?V/n*s:r.height),Y!==null&&fy(c)&&(V=g&&C?Y/s*n:r.width),V!==null&&Y!==null)return[V,Y];throw new Error("Unable to calculate background-size for element")},vy=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},n4e=function(t,e,r,n,s){var o=e[0],c=e[1],u=r[0],i=r[1];switch(t){case 2:return[new li(Math.round(n.left),Math.round(n.top+c)),new li(Math.round(n.left+n.width),Math.round(n.top+c)),new li(Math.round(n.left+n.width),Math.round(i+n.top+c)),new li(Math.round(n.left),Math.round(i+n.top+c))];case 3:return[new li(Math.round(n.left+o),Math.round(n.top)),new li(Math.round(n.left+o+u),Math.round(n.top)),new li(Math.round(n.left+o+u),Math.round(n.height+n.top)),new li(Math.round(n.left+o),Math.round(n.height+n.top))];case 1:return[new li(Math.round(n.left+o),Math.round(n.top+c)),new li(Math.round(n.left+o+u),Math.round(n.top+c)),new li(Math.round(n.left+o+u),Math.round(n.top+c+i)),new li(Math.round(n.left+o),Math.round(n.top+c+i))];default:return[new li(Math.round(s.left),Math.round(s.top)),new li(Math.round(s.left+s.width),Math.round(s.top)),new li(Math.round(s.left+s.width),Math.round(s.height+s.top)),new li(Math.round(s.left),Math.round(s.height+s.top))]}},i4e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",sz="Hidden Text",s4e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),o=this._document.createElement("span"),c=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",c.appendChild(n),s.src=i4e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",o.style.fontFamily=e,o.style.fontSize=r,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(sz)),n.appendChild(o),n.appendChild(s);var u=s.offsetTop-o.offsetTop+2;n.removeChild(o),n.appendChild(this._document.createTextNode(sz)),n.style.lineHeight="normal",s.style.verticalAlign="super";var i=s.offsetTop-n.offsetTop+2;return c.removeChild(n),{baseline:u,middle:i}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),wK=function(){function t(e,r){this.context=e,this.options=r}return t}(),o4e=1e4,a4e=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new s4e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),W5e(r)&&(this.ctx.globalAlpha=r.opacity),q5e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),yK(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return gd(this,void 0,void 0,function(){var n;return $u(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return gd(this,void 0,void 0,function(){return $u(this,function(n){switch(n.label){case 0:if(Gc(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var o=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var c=NF(r.text);c.reduce(function(u,i){return o.ctx.fillText(i,u,r.bounds.top+s),u+o.ctx.measureText(i).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),s=h4e(r.fontFamily).join(", "),o=_b(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,o,s].join(" "),s,o]},e.prototype.renderTextNode=function(r,n){return gd(this,void 0,void 0,function(){var s,o,c,u,i,m,g,C,B=this;return $u(this,function(S){return s=this.createFontStyle(n),o=s[0],c=s[1],u=s[2],this.ctx.font=o,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",i=this.fontMetrics.getMetrics(c,u),m=i.baseline,g=i.middle,C=n.paintOrder,r.textBounds.forEach(function(P){C.forEach(function(j){switch(j){case 0:B.ctx.fillStyle=Jc(n.color),B.renderTextWithLetterSpacing(P,n.letterSpacing,m);var D=n.textShadow;D.length&&P.text.trim().length&&(D.slice(0).reverse().forEach(function(F){B.ctx.shadowColor=Jc(F.color),B.ctx.shadowOffsetX=F.offsetX.number*B.options.scale,B.ctx.shadowOffsetY=F.offsetY.number*B.options.scale,B.ctx.shadowBlur=F.blur.number,B.renderTextWithLetterSpacing(P,n.letterSpacing,m)}),B.ctx.shadowColor="",B.ctx.shadowOffsetX=0,B.ctx.shadowOffsetY=0,B.ctx.shadowBlur=0),n.textDecorationLine.length&&(B.ctx.fillStyle=Jc(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(F){switch(F){case 1:B.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top+m),P.bounds.width,1);break;case 2:B.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top),P.bounds.width,1);break;case 3:B.ctx.fillRect(P.bounds.left,Math.ceil(P.bounds.top+g),P.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&P.text.trim().length&&(B.ctx.strokeStyle=Jc(n.webkitTextStrokeColor),B.ctx.lineWidth=n.webkitTextStrokeWidth,B.ctx.lineJoin=window.chrome?"miter":"round",B.ctx.strokeText(P.text,P.bounds.left,P.bounds.top+m)),B.ctx.strokeStyle="",B.ctx.lineWidth=0,B.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var o=D4(r),c=k4(n);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,o.left,o.top,o.width,o.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return gd(this,void 0,void 0,function(){var n,s,o,c,u,i,R,R,m,g,C,B,Y,S,P,te,j,D,F,R,V,Y,te;return $u(this,function(se){switch(se.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,o=n.styles,c=0,u=n.textNodes,se.label=1;case 1:return c<u.length?(i=u[c],[4,this.renderTextNode(i,o)]):[3,4];case 2:se.sent(),se.label=3;case 3:return c++,[3,1];case 4:if(!(n instanceof tK))return[3,8];se.label=5;case 5:return se.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return R=se.sent(),this.renderReplacedElement(n,s,R),[3,8];case 7:return se.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof rK&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof nK))return[3,12];se.label=9;case 9:return se.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return R=se.sent(),this.renderReplacedElement(n,s,R),[3,12];case 11:return se.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof aK&&n.tree?(m=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,m.render(n.tree)]):[3,14];case 13:g=se.sent(),n.width&&n.height&&this.ctx.drawImage(g,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),se.label=14;case 14:if(n instanceof FF&&(C=Math.min(n.bounds.width,n.bounds.height),n.type===N4?n.checked&&(this.ctx.save(),this.path([new li(n.bounds.left+C*.39363,n.bounds.top+C*.79),new li(n.bounds.left+C*.16,n.bounds.top+C*.5549),new li(n.bounds.left+C*.27347,n.bounds.top+C*.44071),new li(n.bounds.left+C*.39694,n.bounds.top+C*.5649),new li(n.bounds.left+C*.72983,n.bounds.top+C*.23),new li(n.bounds.left+C*.84,n.bounds.top+C*.34085),new li(n.bounds.left+C*.39363,n.bounds.top+C*.79)]),this.ctx.fillStyle=Jc($U),this.ctx.fill(),this.ctx.restore()):n.type===F4&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+C/2,n.bounds.top+C/2,C/4,0,Math.PI*2,!0),this.ctx.fillStyle=Jc($U),this.ctx.fill(),this.ctx.restore())),l4e(n)&&n.value.length){switch(B=this.createFontStyle(o),Y=B[0],S=B[1],P=this.fontMetrics.getMetrics(Y,S).baseline,this.ctx.font=Y,this.ctx.fillStyle=Jc(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=u4e(n.styles.textAlign),te=D4(n),j=0,n.styles.textAlign){case 1:j+=te.width/2;break;case 2:j+=te.width;break}D=te.add(j,0,0,-te.height/2+1),this.ctx.save(),this.path([new li(te.left,te.top),new li(te.left+te.width,te.top),new li(te.left+te.width,te.top+te.height),new li(te.left,te.top+te.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jx(n.value,D),o.letterSpacing,P),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Gc(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(F=n.styles.listStyleImage,F.type!==0)return[3,18];R=void 0,V=F.url,se.label=15;case 15:return se.trys.push([15,17,,18]),[4,this.context.cache.match(V)];case 16:return R=se.sent(),this.ctx.drawImage(R,n.bounds.left-(R.width+10),n.bounds.top),[3,18];case 17:return se.sent(),this.context.logger.error("Error loading list-style-image "+V),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(Y=this.createFontStyle(o)[0],this.ctx.font=Y,this.ctx.fillStyle=Jc(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",te=new gA(n.bounds.left,n.bounds.top+Za(n.styles.paddingTop,n.bounds.width),n.bounds.width,LU(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jx(r.listValue,te),o.letterSpacing,LU(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),se.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return gd(this,void 0,void 0,function(){var n,s,F,o,c,F,u,i,F,m,g,F,C,B,F,S,P,F,j,D,F;return $u(this,function(R){switch(R.label){case 0:if(Gc(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:R.sent(),n=0,s=r.negativeZIndex,R.label=2;case 2:return n<s.length?(F=s[n],[4,this.renderStack(F)]):[3,5];case 3:R.sent(),R.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:R.sent(),o=0,c=r.nonInlineLevel,R.label=7;case 7:return o<c.length?(F=c[o],[4,this.renderNode(F)]):[3,10];case 8:R.sent(),R.label=9;case 9:return o++,[3,7];case 10:u=0,i=r.nonPositionedFloats,R.label=11;case 11:return u<i.length?(F=i[u],[4,this.renderStack(F)]):[3,14];case 12:R.sent(),R.label=13;case 13:return u++,[3,11];case 14:m=0,g=r.nonPositionedInlineLevel,R.label=15;case 15:return m<g.length?(F=g[m],[4,this.renderStack(F)]):[3,18];case 16:R.sent(),R.label=17;case 17:return m++,[3,15];case 18:C=0,B=r.inlineLevel,R.label=19;case 19:return C<B.length?(F=B[C],[4,this.renderNode(F)]):[3,22];case 20:R.sent(),R.label=21;case 21:return C++,[3,19];case 22:S=0,P=r.zeroOrAutoZIndexOrTransformedOrOpacity,R.label=23;case 23:return S<P.length?(F=P[S],[4,this.renderStack(F)]):[3,26];case 24:R.sent(),R.label=25;case 25:return S++,[3,23];case 26:j=0,D=r.positiveZIndex,R.label=27;case 27:return j<D.length?(F=D[j],[4,this.renderStack(F)]):[3,30];case 28:R.sent(),R.label=29;case 29:return j++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,o){var c=Wh(s)?s.start:s;o===0?n.ctx.moveTo(c.x,c.y):n.ctx.lineTo(c.x,c.y),Wh(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,o){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,o),this.ctx.fill(),this.ctx.translate(-s,-o)},e.prototype.resizeImage=function(r,n,s){var o;if(r.width===n&&r.height===s)return r;var c=(o=this.canvas.ownerDocument)!==null&&o!==void 0?o:document,u=c.createElement("canvas");u.width=Math.max(1,n),u.height=Math.max(1,s);var i=u.getContext("2d");return i.drawImage(r,0,0,r.width,r.height,0,0,n,s),u},e.prototype.renderBackgroundImage=function(r){return gd(this,void 0,void 0,function(){var n,s,o,c,u,i;return $u(this,function(m){switch(m.label){case 0:n=r.styles.backgroundImage.length-1,s=function(g){var C,B,S,we,Fe,ve,Ie,be,K,P,we,Fe,ve,Ie,be,j,D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne,st,ie,le,pe,fe;return $u(this,function(Qe){switch(Qe.label){case 0:if(g.type!==0)return[3,5];C=void 0,B=g.url,Qe.label=1;case 1:return Qe.trys.push([1,3,,4]),[4,o.context.cache.match(B)];case 2:return C=Qe.sent(),[3,4];case 3:return Qe.sent(),o.context.logger.error("Error loading background-image "+B),[3,4];case 4:return C&&(S=W3(r,n,[C.width,C.height,C.width/C.height]),we=S[0],Fe=S[1],ve=S[2],Ie=S[3],be=S[4],K=o.ctx.createPattern(o.resizeImage(C,Ie,be),"repeat"),o.renderRepeat(we,K,Fe,ve)),[3,6];case 5:qbe(g)?(P=W3(r,n,[null,null,null]),we=P[0],Fe=P[1],ve=P[2],Ie=P[3],be=P[4],j=Qbe(g.angle,Ie,be),D=j[0],F=j[1],R=j[2],V=j[3],Y=j[4],te=document.createElement("canvas"),te.width=Ie,te.height=be,se=te.getContext("2d"),oe=se.createLinearGradient(F,V,R,Y),EU(g.stops,D).forEach(function(Ke){return oe.addColorStop(Ke.stop,Jc(Ke.color))}),se.fillStyle=oe,se.fillRect(0,0,Ie,be),Ie>0&&be>0&&(K=o.ctx.createPattern(te,"repeat"),o.renderRepeat(we,K,Fe,ve))):Wbe(g)&&(de=W3(r,n,[null,null,null]),we=de[0],J=de[1],Z=de[2],Ie=de[3],be=de[4],He=g.position.length===0?[TF]:g.position,Fe=Za(He[0],Ie),ve=Za(He[He.length-1],be),_e=Hbe(g,Fe,ve,Ie,be),ze=_e[0],Ne=_e[1],ze>0&&Ne>0&&(st=o.ctx.createRadialGradient(J+Fe,Z+ve,0,J+Fe,Z+ve,ze),EU(g.stops,ze*2).forEach(function(Ke){return st.addColorStop(Ke.stop,Jc(Ke.color))}),o.path(we),o.ctx.fillStyle=st,ze!==Ne?(ie=r.bounds.left+.5*r.bounds.width,le=r.bounds.top+.5*r.bounds.height,pe=Ne/ze,fe=1/pe,o.ctx.save(),o.ctx.translate(ie,le),o.ctx.transform(1,0,0,pe,0,0),o.ctx.translate(-ie,-le),o.ctx.fillRect(J,fe*(Z-le)+le,Ie,be*fe),o.ctx.restore()):o.ctx.fill())),Qe.label=6;case 6:return n--,[2]}})},o=this,c=0,u=r.styles.backgroundImage.slice(0).reverse(),m.label=1;case 1:return c<u.length?(i=u[c],[5,s(i)]):[3,4];case 2:m.sent(),m.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return gd(this,void 0,void 0,function(){return $u(this,function(o){return this.path(iz(s,n)),this.ctx.fillStyle=Jc(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,o){return gd(this,void 0,void 0,function(){var c,u;return $u(this,function(i){switch(i.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,o)]:[3,2];case 1:return i.sent(),[2];case 2:return c=Y5e(o,s),this.path(c),this.ctx.fillStyle=Jc(r),this.ctx.fill(),u=Z5e(o,s),this.path(u),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return gd(this,void 0,void 0,function(){var n,s,o,c,u,i,m,g,C=this;return $u(this,function(B){switch(B.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!Om(n.backgroundColor)||n.backgroundImage.length,o=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],c=c4e(vy(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),Om(n.backgroundColor)||(this.ctx.fillStyle=Jc(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:B.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(S){C.ctx.save();var P=M4(r.curves),j=S.inset?0:o4e,D=K5e(P,-j+(S.inset?1:-1)*S.spread.number,(S.inset?1:-1)*S.spread.number,S.spread.number*(S.inset?-2:2),S.spread.number*(S.inset?-2:2));S.inset?(C.path(P),C.ctx.clip(),C.mask(D)):(C.mask(P),C.ctx.clip(),C.path(D)),C.ctx.shadowOffsetX=S.offsetX.number+j,C.ctx.shadowOffsetY=S.offsetY.number,C.ctx.shadowColor=Jc(S.color),C.ctx.shadowBlur=S.blur.number,C.ctx.fillStyle=S.inset?Jc(S.color):"rgba(0,0,0,1)",C.ctx.fill(),C.ctx.restore()}),B.label=2;case 2:u=0,i=0,m=o,B.label=3;case 3:return i<m.length?(g=m[i],g.style!==0&&!Om(g.color)&&g.width>0?g.style!==2?[3,5]:[4,this.renderDashedDottedBorder(g.color,g.width,u,r.curves,2)]:[3,11]):[3,13];case 4:return B.sent(),[3,11];case 5:return g.style!==3?[3,7]:[4,this.renderDashedDottedBorder(g.color,g.width,u,r.curves,3)];case 6:return B.sent(),[3,11];case 7:return g.style!==4?[3,9]:[4,this.renderDoubleBorder(g.color,g.width,u,r.curves)];case 8:return B.sent(),[3,11];case 9:return[4,this.renderSolidBorder(g.color,u,r.curves)];case 10:B.sent(),B.label=11;case 11:u++,B.label=12;case 12:return i++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,o,c){return gd(this,void 0,void 0,function(){var u,i,m,g,C,B,S,P,j,D,F,R,V,Y,te,se,te,se;return $u(this,function(oe){return this.ctx.save(),u=J5e(o,s),i=iz(o,s),c===2&&(this.path(i),this.ctx.clip()),Wh(i[0])?(m=i[0].start.x,g=i[0].start.y):(m=i[0].x,g=i[0].y),Wh(i[1])?(C=i[1].end.x,B=i[1].end.y):(C=i[1].x,B=i[1].y),s===0||s===2?S=Math.abs(m-C):S=Math.abs(g-B),this.ctx.beginPath(),c===3?this.formatPath(u):this.formatPath(i.slice(0,2)),P=n<3?n*3:n*2,j=n<3?n*2:n,c===3&&(P=n,j=n),D=!0,S<=P*2?D=!1:S<=P*2+j?(F=S/(2*P+j),P*=F,j*=F):(R=Math.floor((S+j)/(P+j)),V=(S-R*P)/(R-1),Y=(S-(R+1)*P)/R,j=Y<=0||Math.abs(j-V)<Math.abs(j-Y)?V:Y),D&&(c===3?this.ctx.setLineDash([0,P+j]):this.ctx.setLineDash([P,j])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Jc(r),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(Wh(i[0])&&(te=i[3],se=i[0],this.ctx.beginPath(),this.formatPath([new li(te.end.x,te.end.y),new li(se.start.x,se.start.y)]),this.ctx.stroke()),Wh(i[1])&&(te=i[1],se=i[2],this.ctx.beginPath(),this.formatPath([new li(te.end.x,te.end.y),new li(se.start.x,se.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return gd(this,void 0,void 0,function(){var n;return $u(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Jc(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=X5e(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(wK),l4e=function(t){return t instanceof oK||t instanceof sK?!0:t instanceof FF&&t.type!==F4&&t.type!==N4},c4e=function(t,e){switch(t){case 0:return M4(e);case 2:return V5e(e);case 1:default:return k4(e)}},u4e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},d4e=["-apple-system","system-ui"],h4e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return d4e.indexOf(e)===-1}):t},f4e=function(t){Vf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return gd(this,void 0,void 0,function(){var n,s;return $u(this,function(o){switch(o.label){case 0:return n=TL(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,p4e(n)];case 1:return s=o.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Jc(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(wK),p4e=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},A4e=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,g2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,g2([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,g2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,g2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),m4e=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new A4e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new k5e(this,e)}return t.instanceCount=1,t}(),jF=function(t,e){return e===void 0&&(e={}),g4e(t,e)};typeof window<"u"&&gK.setContext(window);var g4e=function(t,e){return gd(void 0,void 0,void 0,function(){var r,n,s,o,c,u,i,m,g,C,B,S,P,j,D,F,R,V,Y,te,oe,se,oe,K,de,we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne,st,ie,le,pe;return $u(this,function(fe){switch(fe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(K=e.allowTaint)!==null&&K!==void 0?K:!1,imageTimeout:(de=e.imageTimeout)!==null&&de!==void 0?de:15e3,proxy:e.proxy,useCORS:(we=e.useCORS)!==null&&we!==void 0?we:!1},o=fL({logging:(J=e.logging)!==null&&J!==void 0?J:!0,cache:e.cache},s),c={windowWidth:(Z=e.windowWidth)!==null&&Z!==void 0?Z:n.innerWidth,windowHeight:(Ie=e.windowHeight)!==null&&Ie!==void 0?Ie:n.innerHeight,scrollX:(be=e.scrollX)!==null&&be!==void 0?be:n.pageXOffset,scrollY:(He=e.scrollY)!==null&&He!==void 0?He:n.pageYOffset},u=new gA(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),i=new m4e(o,u),m=(Fe=e.foreignObjectRendering)!==null&&Fe!==void 0?Fe:!1,g={allowTaint:(ve=e.allowTaint)!==null&&ve!==void 0?ve:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:m,copyStyles:m},i.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),C=new tz(i,t,g),B=C.clonedReferenceElement,B?[4,C.toIFrame(r,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return S=fe.sent(),P=PF(B)||v5e(B)?Kxe(B.ownerDocument):VC(i,B),j=P.width,D=P.height,F=P.left,R=P.top,V=y4e(i,B,e.backgroundColor),Y={canvas:e.canvas,backgroundColor:V,scale:(ze=(_e=e.scale)!==null&&_e!==void 0?_e:n.devicePixelRatio)!==null&&ze!==void 0?ze:1,x:((Ne=e.x)!==null&&Ne!==void 0?Ne:0)+F,y:((st=e.y)!==null&&st!==void 0?st:0)+R,width:(ie=e.width)!==null&&ie!==void 0?ie:Math.ceil(j),height:(le=e.height)!==null&&le!==void 0?le:Math.ceil(D)},m?(i.logger.debug("Document cloned, using foreign object rendering"),oe=new f4e(i,Y),[4,oe.render(B)]):[3,3];case 2:return te=fe.sent(),[3,5];case 3:return i.logger.debug("Document cloned, element located at "+F+","+R+" with size "+j+"x"+D+" using computed rendering"),i.logger.debug("Starting DOM parsing"),se=cK(i,B),V===se.styles.backgroundColor&&(se.styles.backgroundColor=aA.TRANSPARENT),i.logger.debug("Starting renderer for element at "+Y.x+","+Y.y+" with size "+Y.width+"x"+Y.height),oe=new a4e(i,Y),[4,oe.render(se)];case 4:te=fe.sent(),fe.label=5;case 5:return(!((pe=e.removeContainer)!==null&&pe!==void 0)||pe)&&(tz.destroy(S)||i.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),i.logger.debug("Finished rendering"),[2,te]}})})},y4e=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Yx(t,getComputedStyle(n.documentElement).backgroundColor):aA.TRANSPARENT,o=n.body?Yx(t,getComputedStyle(n.body).backgroundColor):aA.TRANSPARENT,c=typeof r=="string"?Yx(t,r):r===null?aA.TRANSPARENT:4294967295;return e===n.documentElement?Om(s)?Om(o)?c:o:s:c};const MF=Object.freeze(Object.defineProperty({__proto__:null,default:jF},Symbol.toStringTag,{value:"Module"})),v4e=$4(MF);/*!
 * html2pdf.js v0.10.3
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */(function(t,e){(function(n,s){t.exports=s(Wxe,v4e)})(self,function(r,n){return function(){var s={"./src/plugin/hyperlinks.js":function(i,m,g){g.r(m),g("./node_modules/core-js/modules/web.dom-collections.for-each.js"),g("./node_modules/core-js/modules/es.string.link.js");var C=g("./src/worker.js"),B=g("./src/utils.js"),S=[],P={toContainer:C.default.prototype.toContainer,toPdf:C.default.prototype.toPdf};C.default.prototype.toContainer=function(){return P.toContainer.call(this).then(function(){if(this.opt.enableLinks){var F=this.prop.container,R=F.querySelectorAll("a"),V=(0,B.unitConvert)(F.getBoundingClientRect(),this.prop.pageSize.k);S=[],Array.prototype.forEach.call(R,function(Y){for(var te=Y.getClientRects(),se=0;se<te.length;se++){var oe=(0,B.unitConvert)(te[se],this.prop.pageSize.k);oe.left-=V.left,oe.top-=V.top;var K=Math.floor(oe.top/this.prop.pageSize.inner.height)+1,de=this.opt.margin[0]+oe.top%this.prop.pageSize.inner.height,we=this.opt.margin[1]+oe.left;S.push({page:K,top:de,left:we,clientRect:oe,link:Y})}},this)}})},C.default.prototype.toPdf=function(){return P.toPdf.call(this).then(function(){if(this.opt.enableLinks){S.forEach(function(R){this.prop.pdf.setPage(R.page),this.prop.pdf.link(R.left,R.top,R.clientRect.width,R.clientRect.height,{url:R.link.href})},this);var F=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(F)}})}},"./src/plugin/jspdf-plugin.js":function(i,m,g){g.r(m),g("./node_modules/core-js/modules/es.symbol.js"),g("./node_modules/core-js/modules/es.symbol.description.js"),g("./node_modules/core-js/modules/es.object.to-string.js"),g("./node_modules/core-js/modules/es.symbol.iterator.js"),g("./node_modules/core-js/modules/es.array.iterator.js"),g("./node_modules/core-js/modules/es.string.iterator.js"),g("./node_modules/core-js/modules/web.dom-collections.iterator.js");var C=g("jspdf");function B(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(j){return typeof j}:B=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},B(S)}C.jsPDF.getPageSize=function(S,P,j){if(B(S)==="object"){var D=S;S=D.orientation,P=D.unit||P,j=D.format||j}P=P||"mm",j=j||"a4",S=(""+(S||"P")).toLowerCase();var F=(""+j).toLowerCase(),R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(P){case"pt":var V=1;break;case"mm":var V=72/25.4;break;case"cm":var V=72/2.54;break;case"in":var V=72;break;case"px":var V=72/96;break;case"pc":var V=12;break;case"em":var V=12;break;case"ex":var V=6;break;default:throw"Invalid unit: "+P}if(R.hasOwnProperty(F))var Y=R[F][1]/V,te=R[F][0]/V;else try{var Y=j[1],te=j[0]}catch{throw new Error("Invalid format: "+j)}if(S==="p"||S==="portrait"){if(S="p",te>Y){var se=te;te=Y,Y=se}}else if(S==="l"||S==="landscape"){if(S="l",Y>te){var se=te;te=Y,Y=se}}else throw"Invalid orientation: "+S;var oe={width:te,height:Y,unit:P,k:V};return oe},m.default=C.jsPDF},"./src/plugin/pagebreaks.js":function(i,m,g){g.r(m),g("./node_modules/core-js/modules/es.array.concat.js"),g("./node_modules/core-js/modules/es.array.slice.js"),g("./node_modules/core-js/modules/es.array.join.js"),g("./node_modules/core-js/modules/web.dom-collections.for-each.js"),g("./node_modules/core-js/modules/es.object.keys.js");var C=g("./src/worker.js"),B=g("./src/utils.js"),S={toContainer:C.default.prototype.toContainer};C.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},C.default.prototype.toContainer=function(){return S.toContainer.call(this).then(function(){var D=this.prop.container,F=this.prop.pageSize.inner.px.height,R=[].concat(this.opt.pagebreak.mode),V={avoidAll:R.indexOf("avoid-all")!==-1,css:R.indexOf("css")!==-1,legacy:R.indexOf("legacy")!==-1},Y={},te=this;["before","after","avoid"].forEach(function(K){var de=V.avoidAll&&K==="avoid";Y[K]=de?[]:[].concat(te.opt.pagebreak[K]||[]),Y[K].length>0&&(Y[K]=Array.prototype.slice.call(D.querySelectorAll(Y[K].join(", "))))});var se=D.querySelectorAll(".html2pdf__page-break");se=Array.prototype.slice.call(se);var oe=D.querySelectorAll("*");Array.prototype.forEach.call(oe,function(de){var we={before:!1,after:V.legacy&&se.indexOf(de)!==-1,avoid:V.avoidAll};if(V.css){var J=window.getComputedStyle(de),Z=["always","page","left","right"],Ie=["avoid","avoid-page"];we={before:we.before||Z.indexOf(J.breakBefore||J.pageBreakBefore)!==-1,after:we.after||Z.indexOf(J.breakAfter||J.pageBreakAfter)!==-1,avoid:we.avoid||Ie.indexOf(J.breakInside||J.pageBreakInside)!==-1}}Object.keys(we).forEach(function(ze){we[ze]=we[ze]||Y[ze].indexOf(de)!==-1});var be=de.getBoundingClientRect();if(we.avoid&&!we.before){var He=Math.floor(be.top/F),Fe=Math.floor(be.bottom/F),ve=Math.abs(be.bottom-be.top)/F;Fe!==He&&ve<=1&&(we.before=!0)}if(we.before){var _e=(0,B.createElement)("div",{style:{display:"block",height:F-be.top%F+"px"}});de.parentNode.insertBefore(_e,de)}if(we.after){var _e=(0,B.createElement)("div",{style:{display:"block",height:F-be.bottom%F+"px"}});de.parentNode.insertBefore(_e,de.nextSibling)}})})}},"./src/utils.js":function(i,m,g){g.r(m),g.d(m,{objType:function(){return B},createElement:function(){return S},cloneNode:function(){return P},unitConvert:function(){return j},toPx:function(){return D}}),g("./node_modules/core-js/modules/es.number.constructor.js"),g("./node_modules/core-js/modules/es.symbol.js"),g("./node_modules/core-js/modules/es.symbol.description.js"),g("./node_modules/core-js/modules/es.object.to-string.js"),g("./node_modules/core-js/modules/es.symbol.iterator.js"),g("./node_modules/core-js/modules/es.array.iterator.js"),g("./node_modules/core-js/modules/es.string.iterator.js"),g("./node_modules/core-js/modules/web.dom-collections.iterator.js");function C(F){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(V){return typeof V}:C=function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},C(F)}var B=function(R){var V=C(R);return V==="undefined"?"undefined":V==="string"||R instanceof String?"string":V==="number"||R instanceof Number?"number":V==="function"||R instanceof Function?"function":R&&R.constructor===Array?"array":R&&R.nodeType===1?"element":V==="object"?"object":"unknown"},S=function(R,V){var Y=document.createElement(R);if(V.className&&(Y.className=V.className),V.innerHTML){Y.innerHTML=V.innerHTML;for(var te=Y.getElementsByTagName("script"),se=te.length;se-- >0;null)te[se].parentNode.removeChild(te[se])}for(var oe in V.style)Y.style[oe]=V.style[oe];return Y},P=function F(R,V){for(var Y=R.nodeType===3?document.createTextNode(R.nodeValue):R.cloneNode(!1),te=R.firstChild;te;te=te.nextSibling)(V===!0||te.nodeType!==1||te.nodeName!=="SCRIPT")&&Y.appendChild(F(te,V));return R.nodeType===1&&(R.nodeName==="CANVAS"?(Y.width=R.width,Y.height=R.height,Y.getContext("2d").drawImage(R,0,0)):(R.nodeName==="TEXTAREA"||R.nodeName==="SELECT")&&(Y.value=R.value),Y.addEventListener("load",function(){Y.scrollTop=R.scrollTop,Y.scrollLeft=R.scrollLeft},!0)),Y},j=function(R,V){if(B(R)==="number")return R*72/96/V;var Y={};for(var te in R)Y[te]=R[te]*72/96/V;return Y},D=function(R,V){return Math.floor(R*V/72*96)}},"./src/worker.js":function(i,m,g){g.r(m),g("./node_modules/core-js/modules/es.object.assign.js"),g("./node_modules/core-js/modules/es.array.map.js"),g("./node_modules/core-js/modules/es.object.keys.js"),g("./node_modules/core-js/modules/es.array.concat.js"),g("./node_modules/core-js/modules/es.object.to-string.js"),g("./node_modules/core-js/modules/es.regexp.to-string.js"),g("./node_modules/core-js/modules/es.function.name.js"),g("./node_modules/core-js/modules/web.dom-collections.for-each.js");var C=g("jspdf"),B=g("html2canvas"),S=g("./src/utils.js"),P=g("./node_modules/es6-promise/dist/es6-promise.js"),j=g.n(P),D=j().Promise,F=function R(V){var Y=Object.assign(R.convert(D.resolve()),JSON.parse(JSON.stringify(R.template))),te=R.convert(D.resolve(),Y);return te=te.setProgress(1,R,1,[R]),te=te.set(V),te};F.prototype=Object.create(D.prototype),F.prototype.constructor=F,F.convert=function(V,Y){return V.__proto__=Y||F.prototype,V},F.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},F.prototype.from=function(V,Y){function te(se){switch((0,S.objType)(se)){case"string":return"string";case"element":return se.nodeName.toLowerCase&&se.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(Y=Y||te(V),Y){case"string":return this.set({src:(0,S.createElement)("div",{innerHTML:V})});case"element":return this.set({src:V});case"canvas":return this.set({canvas:V});case"img":return this.set({img:V});default:return this.error("Unknown source type.")}})},F.prototype.to=function(V){switch(V){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},F.prototype.toContainer=function(){var V=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(V).then(function(){var te={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},se={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};te.opacity=0;var oe=(0,S.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,S.createElement)("div",{className:"html2pdf__overlay",style:te}),this.prop.container=(0,S.createElement)("div",{className:"html2pdf__container",style:se}),this.prop.container.appendChild(oe),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},F.prototype.toCanvas=function(){var V=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(V).then(function(){var te=Object.assign({},this.opt.html2canvas);return delete te.onrendered,B(this.prop.container,te)}).then(function(te){var se=this.opt.html2canvas.onrendered||function(){};se(te),this.prop.canvas=te,document.body.removeChild(this.prop.overlay)})},F.prototype.toImg=function(){var V=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(V).then(function(){var te=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=te})},F.prototype.toPdf=function(){var V=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(V).then(function(){var te=this.prop.canvas,se=this.opt,oe=te.height,K=Math.floor(te.width*this.prop.pageSize.inner.ratio),de=Math.ceil(oe/K),we=this.prop.pageSize.inner.height,J=document.createElement("canvas"),Z=J.getContext("2d");J.width=te.width,J.height=K,this.prop.pdf=this.prop.pdf||new C.jsPDF(se.jsPDF);for(var Ie=0;Ie<de;Ie++){Ie===de-1&&oe%K!==0&&(J.height=oe%K,we=J.height*this.prop.pageSize.inner.width/J.width);var be=J.width,He=J.height;Z.fillStyle="white",Z.fillRect(0,0,be,He),Z.drawImage(te,0,Ie*K,be,He,0,0,be,He),Ie&&this.prop.pdf.addPage();var Fe=J.toDataURL("image/"+se.image.type,se.image.quality);this.prop.pdf.addImage(Fe,se.image.type,se.margin[1],se.margin[0],this.prop.pageSize.inner.width,we)}})},F.prototype.output=function(V,Y,te){return te=te||"pdf",te.toLowerCase()==="img"||te.toLowerCase()==="image"?this.outputImg(V,Y):this.outputPdf(V,Y)},F.prototype.outputPdf=function(V,Y){var te=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(te).then(function(){return this.prop.pdf.output(V,Y)})},F.prototype.outputImg=function(V,Y){var te=[function(){return this.prop.img||this.toImg()}];return this.thenList(te).then(function(){switch(V){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+V+'" is not supported.'}})},F.prototype.save=function(V){var Y=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(Y).set(V?{filename:V}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},F.prototype.set=function(V){if((0,S.objType)(V)!=="object")return this;var Y=Object.keys(V||{}).map(function(te){switch(te){case"margin":return this.setMargin.bind(this,V.margin);case"jsPDF":return function(){return this.opt.jsPDF=V.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,V.pageSize);default:return te in F.template.prop?function(){this.prop[te]=V[te]}:function(){this.opt[te]=V[te]}}},this);return this.then(function(){return this.thenList(Y)})},F.prototype.get=function(V,Y){return this.then(function(){var se=V in F.template.prop?this.prop[V]:this.opt[V];return Y?Y(se):se})},F.prototype.setMargin=function(V){return this.then(function(){switch((0,S.objType)(V)){case"number":V=[V,V,V,V];case"array":if(V.length===2&&(V=[V[0],V[1],V[0],V[1]]),V.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=V}).then(this.setPageSize)},F.prototype.setPageSize=function(V){return this.then(function(){V=V||C.jsPDF.getPageSize(this.opt.jsPDF),V.hasOwnProperty("inner")||(V.inner={width:V.width-this.opt.margin[1]-this.opt.margin[3],height:V.height-this.opt.margin[0]-this.opt.margin[2]},V.inner.px={width:(0,S.toPx)(V.inner.width,V.k),height:(0,S.toPx)(V.inner.height,V.k)},V.inner.ratio=V.inner.height/V.inner.width),this.prop.pageSize=V})},F.prototype.setProgress=function(V,Y,te,se){return V!=null&&(this.progress.val=V),Y!=null&&(this.progress.state=Y),te!=null&&(this.progress.n=te),se!=null&&(this.progress.stack=se),this.progress.ratio=this.progress.val/this.progress.state,this},F.prototype.updateProgress=function(V,Y,te,se){return this.setProgress(V?this.progress.val+V:null,Y||null,te?this.progress.n+te:null,se?this.progress.stack.concat(se):null)},F.prototype.then=function(V,Y){var te=this;return this.thenCore(V,Y,function(oe,K){return te.updateProgress(null,null,1,[oe]),D.prototype.then.call(this,function(we){return te.updateProgress(null,oe),we}).then(oe,K).then(function(we){return te.updateProgress(1),we})})},F.prototype.thenCore=function(V,Y,te){te=te||D.prototype.then;var se=this;V&&(V=V.bind(se)),Y&&(Y=Y.bind(se));var oe=D.toString().indexOf("[native code]")!==-1&&D.name==="Promise",K=oe?se:F.convert(Object.assign({},se),D.prototype),de=te.call(K,V,Y);return F.convert(de,se.__proto__)},F.prototype.thenExternal=function(V,Y){return D.prototype.then.call(this,V,Y)},F.prototype.thenList=function(V){var Y=this;return V.forEach(function(se){Y=Y.thenCore(se)}),Y},F.prototype.catch=function(R){R&&(R=R.bind(this));var V=D.prototype.catch.call(this,R);return F.convert(V,this)},F.prototype.catchExternal=function(V){return D.prototype.catch.call(this,V)},F.prototype.error=function(V){return this.then(function(){throw new Error(V)})},F.prototype.using=F.prototype.set,F.prototype.saveAs=F.prototype.save,F.prototype.export=F.prototype.output,F.prototype.run=F.prototype.then,m.default=F},"./node_modules/core-js/internals/a-function.js":function(i){i.exports=function(m){if(typeof m!="function")throw TypeError(String(m)+" is not a function");return m}},"./node_modules/core-js/internals/a-possible-prototype.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-object.js");i.exports=function(B){if(!C(B)&&B!==null)throw TypeError("Can't set "+String(B)+" as a prototype");return B}},"./node_modules/core-js/internals/add-to-unscopables.js":function(i,m,g){var C=g("./node_modules/core-js/internals/well-known-symbol.js"),B=g("./node_modules/core-js/internals/object-create.js"),S=g("./node_modules/core-js/internals/object-define-property.js"),P=C("unscopables"),j=Array.prototype;j[P]==null&&S.f(j,P,{configurable:!0,value:B(null)}),i.exports=function(D){j[P][D]=!0}},"./node_modules/core-js/internals/an-object.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-object.js");i.exports=function(B){if(!C(B))throw TypeError(String(B)+" is not an object");return B}},"./node_modules/core-js/internals/array-for-each.js":function(i,m,g){var C=g("./node_modules/core-js/internals/array-iteration.js").forEach,B=g("./node_modules/core-js/internals/array-method-is-strict.js"),S=B("forEach");i.exports=S?[].forEach:function(j){return C(this,j,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-indexed-object.js"),B=g("./node_modules/core-js/internals/to-length.js"),S=g("./node_modules/core-js/internals/to-absolute-index.js"),P=function(j){return function(D,F,R){var V=C(D),Y=B(V.length),te=S(R,Y),se;if(j&&F!=F){for(;Y>te;)if(se=V[te++],se!=se)return!0}else for(;Y>te;te++)if((j||te in V)&&V[te]===F)return j||te||0;return!j&&-1}};i.exports={includes:P(!0),indexOf:P(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(i,m,g){var C=g("./node_modules/core-js/internals/function-bind-context.js"),B=g("./node_modules/core-js/internals/indexed-object.js"),S=g("./node_modules/core-js/internals/to-object.js"),P=g("./node_modules/core-js/internals/to-length.js"),j=g("./node_modules/core-js/internals/array-species-create.js"),D=[].push,F=function(R){var V=R==1,Y=R==2,te=R==3,se=R==4,oe=R==6,K=R==7,de=R==5||oe;return function(we,J,Z,Ie){for(var be=S(we),He=B(be),Fe=C(J,Z,3),ve=P(He.length),_e=0,ze=Ie||j,Ne=V?ze(we,ve):Y||K?ze(we,0):void 0,st,ie;ve>_e;_e++)if((de||_e in He)&&(st=He[_e],ie=Fe(st,_e,be),R))if(V)Ne[_e]=ie;else if(ie)switch(R){case 3:return!0;case 5:return st;case 6:return _e;case 2:D.call(Ne,st)}else switch(R){case 4:return!1;case 7:D.call(Ne,st)}return oe?-1:te||se?se:Ne}};i.exports={forEach:F(0),map:F(1),filter:F(2),some:F(3),every:F(4),find:F(5),findIndex:F(6),filterReject:F(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js"),B=g("./node_modules/core-js/internals/well-known-symbol.js"),S=g("./node_modules/core-js/internals/engine-v8-version.js"),P=B("species");i.exports=function(j){return S>=51||!C(function(){var D=[],F=D.constructor={};return F[P]=function(){return{foo:1}},D[j](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=function(B,S){var P=[][B];return!!P&&C(function(){P.call(null,S||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-object.js"),B=g("./node_modules/core-js/internals/is-array.js"),S=g("./node_modules/core-js/internals/well-known-symbol.js"),P=S("species");i.exports=function(j){var D;return B(j)&&(D=j.constructor,typeof D=="function"&&(D===Array||B(D.prototype))?D=void 0:C(D)&&(D=D[P],D===null&&(D=void 0))),D===void 0?Array:D}},"./node_modules/core-js/internals/array-species-create.js":function(i,m,g){var C=g("./node_modules/core-js/internals/array-species-constructor.js");i.exports=function(B,S){return new(C(B))(S===0?0:S)}},"./node_modules/core-js/internals/classof-raw.js":function(i){var m={}.toString;i.exports=function(g){return m.call(g).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-string-tag-support.js"),B=g("./node_modules/core-js/internals/classof-raw.js"),S=g("./node_modules/core-js/internals/well-known-symbol.js"),P=S("toStringTag"),j=B(function(){return arguments}())=="Arguments",D=function(F,R){try{return F[R]}catch{}};i.exports=C?B:function(F){var R,V,Y;return F===void 0?"Undefined":F===null?"Null":typeof(V=D(R=Object(F),P))=="string"?V:j?B(R):(Y=B(R))=="Object"&&typeof R.callee=="function"?"Arguments":Y}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(i,m,g){var C=g("./node_modules/core-js/internals/has.js"),B=g("./node_modules/core-js/internals/own-keys.js"),S=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),P=g("./node_modules/core-js/internals/object-define-property.js");i.exports=function(j,D){for(var F=B(D),R=P.f,V=S.f,Y=0;Y<F.length;Y++){var te=F[Y];C(j,te)||R(j,te,V(D,te))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=!C(function(){function B(){}return B.prototype.constructor=null,Object.getPrototypeOf(new B)!==B.prototype})},"./node_modules/core-js/internals/create-html.js":function(i,m,g){var C=g("./node_modules/core-js/internals/require-object-coercible.js"),B=g("./node_modules/core-js/internals/to-string.js"),S=/"/g;i.exports=function(P,j,D,F){var R=B(C(P)),V="<"+j;return D!==""&&(V+=" "+D+'="'+B(F).replace(S,"&quot;")+'"'),V+">"+R+"</"+j+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(i,m,g){var C=g("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,B=g("./node_modules/core-js/internals/object-create.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js"),P=g("./node_modules/core-js/internals/set-to-string-tag.js"),j=g("./node_modules/core-js/internals/iterators.js"),D=function(){return this};i.exports=function(F,R,V){var Y=R+" Iterator";return F.prototype=B(C,{next:S(1,V)}),P(F,Y,!1,!0),j[Y]=D,F}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-define-property.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=C?function(P,j,D){return B.f(P,j,S(1,D))}:function(P,j,D){return P[j]=D,P}},"./node_modules/core-js/internals/create-property-descriptor.js":function(i){i.exports=function(m,g){return{enumerable:!(m&1),configurable:!(m&2),writable:!(m&4),value:g}}},"./node_modules/core-js/internals/create-property.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-property-key.js"),B=g("./node_modules/core-js/internals/object-define-property.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=function(P,j,D){var F=C(j);F in P?B.f(P,F,S(0,D)):P[F]=D}},"./node_modules/core-js/internals/define-iterator.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/create-iterator-constructor.js"),S=g("./node_modules/core-js/internals/object-get-prototype-of.js"),P=g("./node_modules/core-js/internals/object-set-prototype-of.js"),j=g("./node_modules/core-js/internals/set-to-string-tag.js"),D=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),F=g("./node_modules/core-js/internals/redefine.js"),R=g("./node_modules/core-js/internals/well-known-symbol.js"),V=g("./node_modules/core-js/internals/is-pure.js"),Y=g("./node_modules/core-js/internals/iterators.js"),te=g("./node_modules/core-js/internals/iterators-core.js"),se=te.IteratorPrototype,oe=te.BUGGY_SAFARI_ITERATORS,K=R("iterator"),de="keys",we="values",J="entries",Z=function(){return this};i.exports=function(Ie,be,He,Fe,ve,_e,ze){B(He,be,Fe);var Ne=function(bt){if(bt===ve&&fe)return fe;if(!oe&&bt in le)return le[bt];switch(bt){case de:return function(){return new He(this,bt)};case we:return function(){return new He(this,bt)};case J:return function(){return new He(this,bt)}}return function(){return new He(this)}},st=be+" Iterator",ie=!1,le=Ie.prototype,pe=le[K]||le["@@iterator"]||ve&&le[ve],fe=!oe&&pe||Ne(ve),Qe=be=="Array"&&le.entries||pe,Ke,et,tt;if(Qe&&(Ke=S(Qe.call(new Ie)),se!==Object.prototype&&Ke.next&&(!V&&S(Ke)!==se&&(P?P(Ke,se):typeof Ke[K]!="function"&&D(Ke,K,Z)),j(Ke,st,!0,!0),V&&(Y[st]=Z))),ve==we&&pe&&pe.name!==we&&(ie=!0,fe=function(){return pe.call(this)}),(!V||ze)&&le[K]!==fe&&D(le,K,fe),Y[be]=fe,ve)if(et={values:Ne(we),keys:_e?fe:Ne(de),entries:Ne(J)},ze)for(tt in et)(oe||ie||!(tt in le))&&F(le,tt,et[tt]);else C({target:be,proto:!0,forced:oe||ie},et);return et}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(i,m,g){var C=g("./node_modules/core-js/internals/path.js"),B=g("./node_modules/core-js/internals/has.js"),S=g("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),P=g("./node_modules/core-js/internals/object-define-property.js").f;i.exports=function(j){var D=C.Symbol||(C.Symbol={});B(D,j)||P(D,j,{value:S.f(j)})}},"./node_modules/core-js/internals/descriptors.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=!C(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/is-object.js"),S=C.document,P=B(S)&&B(S.createElement);i.exports=function(j){return P?S.createElement(j):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(i){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(i,m,g){var C=g("./node_modules/core-js/internals/get-built-in.js");i.exports=C("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/engine-user-agent.js"),S=C.process,P=C.Deno,j=S&&S.versions||P&&P.version,D=j&&j.v8,F,R;D?(F=D.split("."),R=F[0]<4?1:F[0]+F[1]):B&&(F=B.match(/Edge\/(\d+)/),(!F||F[1]>=74)&&(F=B.match(/Chrome\/(\d+)/),F&&(R=F[1]))),i.exports=R&&+R},"./node_modules/core-js/internals/enum-bug-keys.js":function(i){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,S=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),P=g("./node_modules/core-js/internals/redefine.js"),j=g("./node_modules/core-js/internals/set-global.js"),D=g("./node_modules/core-js/internals/copy-constructor-properties.js"),F=g("./node_modules/core-js/internals/is-forced.js");i.exports=function(R,V){var Y=R.target,te=R.global,se=R.stat,oe,K,de,we,J,Z;if(te?K=C:se?K=C[Y]||j(Y,{}):K=(C[Y]||{}).prototype,K)for(de in V){if(J=V[de],R.noTargetGet?(Z=B(K,de),we=Z&&Z.value):we=K[de],oe=F(te?de:Y+(se?".":"#")+de,R.forced),!oe&&we!==void 0){if(typeof J==typeof we)continue;D(J,we)}(R.sham||we&&we.sham)&&S(J,"sham",!0),P(K,de,J,R)}}},"./node_modules/core-js/internals/fails.js":function(i){i.exports=function(m){try{return!!m()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(i,m,g){var C=g("./node_modules/core-js/internals/a-function.js");i.exports=function(B,S,P){if(C(B),S===void 0)return B;switch(P){case 0:return function(){return B.call(S)};case 1:return function(j){return B.call(S,j)};case 2:return function(j,D){return B.call(S,j,D)};case 3:return function(j,D,F){return B.call(S,j,D,F)}}return function(){return B.apply(S,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=function(S){return typeof S=="function"?S:void 0};i.exports=function(S,P){return arguments.length<2?B(C[S]):C[S]&&C[S][P]}},"./node_modules/core-js/internals/global.js":function(i){var m=function(g){return g&&g.Math==Math&&g};i.exports=m(typeof globalThis=="object"&&globalThis)||m(typeof window=="object"&&window)||m(typeof self=="object"&&self)||m(typeof Ho=="object"&&Ho)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-object.js"),B={}.hasOwnProperty;i.exports=Object.hasOwn||function(P,j){return B.call(C(P),j)}},"./node_modules/core-js/internals/hidden-keys.js":function(i){i.exports={}},"./node_modules/core-js/internals/html.js":function(i,m,g){var C=g("./node_modules/core-js/internals/get-built-in.js");i.exports=C("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/fails.js"),S=g("./node_modules/core-js/internals/document-create-element.js");i.exports=!C&&!B(function(){return Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js"),B=g("./node_modules/core-js/internals/classof-raw.js"),S="".split;i.exports=C(function(){return!Object("z").propertyIsEnumerable(0)})?function(P){return B(P)=="String"?S.call(P,""):Object(P)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-object.js"),B=g("./node_modules/core-js/internals/object-set-prototype-of.js");i.exports=function(S,P,j){var D,F;return B&&typeof(D=P.constructor)=="function"&&D!==j&&C(F=D.prototype)&&F!==j.prototype&&B(S,F),S}},"./node_modules/core-js/internals/inspect-source.js":function(i,m,g){var C=g("./node_modules/core-js/internals/shared-store.js"),B=Function.toString;typeof C.inspectSource!="function"&&(C.inspectSource=function(S){return B.call(S)}),i.exports=C.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(i,m,g){var C=g("./node_modules/core-js/internals/native-weak-map.js"),B=g("./node_modules/core-js/internals/global.js"),S=g("./node_modules/core-js/internals/is-object.js"),P=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=g("./node_modules/core-js/internals/has.js"),D=g("./node_modules/core-js/internals/shared-store.js"),F=g("./node_modules/core-js/internals/shared-key.js"),R=g("./node_modules/core-js/internals/hidden-keys.js"),V="Object already initialized",Y=B.WeakMap,te,se,oe,K=function(He){return oe(He)?se(He):te(He,{})},de=function(He){return function(Fe){var ve;if(!S(Fe)||(ve=se(Fe)).type!==He)throw TypeError("Incompatible receiver, "+He+" required");return ve}};if(C||D.state){var we=D.state||(D.state=new Y),J=we.get,Z=we.has,Ie=we.set;te=function(He,Fe){if(Z.call(we,He))throw new TypeError(V);return Fe.facade=He,Ie.call(we,He,Fe),Fe},se=function(He){return J.call(we,He)||{}},oe=function(He){return Z.call(we,He)}}else{var be=F("state");R[be]=!0,te=function(He,Fe){if(j(He,be))throw new TypeError(V);return Fe.facade=He,P(He,be,Fe),Fe},se=function(He){return j(He,be)?He[be]:{}},oe=function(He){return j(He,be)}}i.exports={set:te,get:se,has:oe,enforce:K,getterFor:de}},"./node_modules/core-js/internals/is-array.js":function(i,m,g){var C=g("./node_modules/core-js/internals/classof-raw.js");i.exports=Array.isArray||function(S){return C(S)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js"),B=/#|\.prototype\./,S=function(R,V){var Y=j[P(R)];return Y==F?!0:Y==D?!1:typeof V=="function"?C(V):!!V},P=S.normalize=function(R){return String(R).replace(B,".").toLowerCase()},j=S.data={},D=S.NATIVE="N",F=S.POLYFILL="P";i.exports=S},"./node_modules/core-js/internals/is-object.js":function(i){i.exports=function(m){return typeof m=="object"?m!==null:typeof m=="function"}},"./node_modules/core-js/internals/is-pure.js":function(i){i.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(i,m,g){var C=g("./node_modules/core-js/internals/get-built-in.js"),B=g("./node_modules/core-js/internals/use-symbol-as-uid.js");i.exports=B?function(S){return typeof S=="symbol"}:function(S){var P=C("Symbol");return typeof P=="function"&&Object(S)instanceof P}},"./node_modules/core-js/internals/iterators-core.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js"),B=g("./node_modules/core-js/internals/object-get-prototype-of.js"),S=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),P=g("./node_modules/core-js/internals/has.js"),j=g("./node_modules/core-js/internals/well-known-symbol.js"),D=g("./node_modules/core-js/internals/is-pure.js"),F=j("iterator"),R=!1,V=function(){return this},Y,te,se;[].keys&&(se=[].keys(),"next"in se?(te=B(B(se)),te!==Object.prototype&&(Y=te)):R=!0);var oe=Y==null||C(function(){var K={};return Y[F].call(K)!==K});oe&&(Y={}),(!D||oe)&&!P(Y,F)&&S(Y,F,V),i.exports={IteratorPrototype:Y,BUGGY_SAFARI_ITERATORS:R}},"./node_modules/core-js/internals/iterators.js":function(i){i.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(i,m,g){var C=g("./node_modules/core-js/internals/engine-v8-version.js"),B=g("./node_modules/core-js/internals/fails.js");i.exports=!!Object.getOwnPropertySymbols&&!B(function(){var S=Symbol();return!String(S)||!(Object(S)instanceof Symbol)||!Symbol.sham&&C&&C<41})},"./node_modules/core-js/internals/native-weak-map.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/inspect-source.js"),S=C.WeakMap;i.exports=typeof S=="function"&&/native code/.test(B(S))},"./node_modules/core-js/internals/object-assign.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/fails.js"),S=g("./node_modules/core-js/internals/object-keys.js"),P=g("./node_modules/core-js/internals/object-get-own-property-symbols.js"),j=g("./node_modules/core-js/internals/object-property-is-enumerable.js"),D=g("./node_modules/core-js/internals/to-object.js"),F=g("./node_modules/core-js/internals/indexed-object.js"),R=Object.assign,V=Object.defineProperty;i.exports=!R||B(function(){if(C&&R({b:1},R(V({},"a",{enumerable:!0,get:function(){V(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var Y={},te={},se=Symbol(),oe="abcdefghijklmnopqrst";return Y[se]=7,oe.split("").forEach(function(K){te[K]=K}),R({},Y)[se]!=7||S(R({},te)).join("")!=oe})?function(te,se){for(var oe=D(te),K=arguments.length,de=1,we=P.f,J=j.f;K>de;)for(var Z=F(arguments[de++]),Ie=we?S(Z).concat(we(Z)):S(Z),be=Ie.length,He=0,Fe;be>He;)Fe=Ie[He++],(!C||J.call(Z,Fe))&&(oe[Fe]=Z[Fe]);return oe}:R},"./node_modules/core-js/internals/object-create.js":function(i,m,g){var C=g("./node_modules/core-js/internals/an-object.js"),B=g("./node_modules/core-js/internals/object-define-properties.js"),S=g("./node_modules/core-js/internals/enum-bug-keys.js"),P=g("./node_modules/core-js/internals/hidden-keys.js"),j=g("./node_modules/core-js/internals/html.js"),D=g("./node_modules/core-js/internals/document-create-element.js"),F=g("./node_modules/core-js/internals/shared-key.js"),R=">",V="<",Y="prototype",te="script",se=F("IE_PROTO"),oe=function(){},K=function(Ie){return V+te+R+Ie+V+"/"+te+R},de=function(Ie){Ie.write(K("")),Ie.close();var be=Ie.parentWindow.Object;return Ie=null,be},we=function(){var Ie=D("iframe"),be="java"+te+":",He;if(Ie.style)return Ie.style.display="none",j.appendChild(Ie),Ie.src=String(be),He=Ie.contentWindow.document,He.open(),He.write(K("document.F=Object")),He.close(),He.F},J,Z=function(){try{J=new ActiveXObject("htmlfile")}catch{}Z=document.domain&&J?de(J):we()||de(J);for(var Ie=S.length;Ie--;)delete Z[Y][S[Ie]];return Z()};P[se]=!0,i.exports=Object.create||function(be,He){var Fe;return be!==null?(oe[Y]=C(be),Fe=new oe,oe[Y]=null,Fe[se]=be):Fe=Z(),He===void 0?Fe:B(Fe,He)}},"./node_modules/core-js/internals/object-define-properties.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-define-property.js"),S=g("./node_modules/core-js/internals/an-object.js"),P=g("./node_modules/core-js/internals/object-keys.js");i.exports=C?Object.defineProperties:function(D,F){S(D);for(var R=P(F),V=R.length,Y=0,te;V>Y;)B.f(D,te=R[Y++],F[te]);return D}},"./node_modules/core-js/internals/object-define-property.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/ie8-dom-define.js"),S=g("./node_modules/core-js/internals/an-object.js"),P=g("./node_modules/core-js/internals/to-property-key.js"),j=Object.defineProperty;m.f=C?j:function(F,R,V){if(S(F),R=P(R),S(V),B)try{return j(F,R,V)}catch{}if("get"in V||"set"in V)throw TypeError("Accessors not supported");return"value"in V&&(F[R]=V.value),F}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-property-is-enumerable.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js"),P=g("./node_modules/core-js/internals/to-indexed-object.js"),j=g("./node_modules/core-js/internals/to-property-key.js"),D=g("./node_modules/core-js/internals/has.js"),F=g("./node_modules/core-js/internals/ie8-dom-define.js"),R=Object.getOwnPropertyDescriptor;m.f=C?R:function(Y,te){if(Y=P(Y),te=j(te),F)try{return R(Y,te)}catch{}if(D(Y,te))return S(!B.f.call(Y,te),Y[te])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-indexed-object.js"),B=g("./node_modules/core-js/internals/object-get-own-property-names.js").f,S={}.toString,P=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],j=function(D){try{return B(D)}catch{return P.slice()}};i.exports.f=function(F){return P&&S.call(F)=="[object Window]"?j(F):B(C(F))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(i,m,g){var C=g("./node_modules/core-js/internals/object-keys-internal.js"),B=g("./node_modules/core-js/internals/enum-bug-keys.js"),S=B.concat("length","prototype");m.f=Object.getOwnPropertyNames||function(j){return C(j,S)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(i,m){m.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(i,m,g){var C=g("./node_modules/core-js/internals/has.js"),B=g("./node_modules/core-js/internals/to-object.js"),S=g("./node_modules/core-js/internals/shared-key.js"),P=g("./node_modules/core-js/internals/correct-prototype-getter.js"),j=S("IE_PROTO"),D=Object.prototype;i.exports=P?Object.getPrototypeOf:function(F){return F=B(F),C(F,j)?F[j]:typeof F.constructor=="function"&&F instanceof F.constructor?F.constructor.prototype:F instanceof Object?D:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(i,m,g){var C=g("./node_modules/core-js/internals/has.js"),B=g("./node_modules/core-js/internals/to-indexed-object.js"),S=g("./node_modules/core-js/internals/array-includes.js").indexOf,P=g("./node_modules/core-js/internals/hidden-keys.js");i.exports=function(j,D){var F=B(j),R=0,V=[],Y;for(Y in F)!C(P,Y)&&C(F,Y)&&V.push(Y);for(;D.length>R;)C(F,Y=D[R++])&&(~S(V,Y)||V.push(Y));return V}},"./node_modules/core-js/internals/object-keys.js":function(i,m,g){var C=g("./node_modules/core-js/internals/object-keys-internal.js"),B=g("./node_modules/core-js/internals/enum-bug-keys.js");i.exports=Object.keys||function(P){return C(P,B)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(i,m){var g={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,B=C&&!g.call({1:2},1);m.f=B?function(P){var j=C(this,P);return!!j&&j.enumerable}:g},"./node_modules/core-js/internals/object-set-prototype-of.js":function(i,m,g){var C=g("./node_modules/core-js/internals/an-object.js"),B=g("./node_modules/core-js/internals/a-possible-prototype.js");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var S=!1,P={},j;try{j=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,j.call(P,[]),S=P instanceof Array}catch{}return function(F,R){return C(F),B(R),S?j.call(F,R):F.__proto__=R,F}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-string-tag-support.js"),B=g("./node_modules/core-js/internals/classof.js");i.exports=C?{}.toString:function(){return"[object "+B(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-object.js");i.exports=function(B,S){var P,j;if(S==="string"&&typeof(P=B.toString)=="function"&&!C(j=P.call(B))||typeof(P=B.valueOf)=="function"&&!C(j=P.call(B))||S!=="string"&&typeof(P=B.toString)=="function"&&!C(j=P.call(B)))return j;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(i,m,g){var C=g("./node_modules/core-js/internals/get-built-in.js"),B=g("./node_modules/core-js/internals/object-get-own-property-names.js"),S=g("./node_modules/core-js/internals/object-get-own-property-symbols.js"),P=g("./node_modules/core-js/internals/an-object.js");i.exports=C("Reflect","ownKeys")||function(D){var F=B.f(P(D)),R=S.f;return R?F.concat(R(D)):F}},"./node_modules/core-js/internals/path.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js");i.exports=C},"./node_modules/core-js/internals/redefine.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),S=g("./node_modules/core-js/internals/has.js"),P=g("./node_modules/core-js/internals/set-global.js"),j=g("./node_modules/core-js/internals/inspect-source.js"),D=g("./node_modules/core-js/internals/internal-state.js"),F=D.get,R=D.enforce,V=String(String).split("String");(i.exports=function(Y,te,se,oe){var K=oe?!!oe.unsafe:!1,de=oe?!!oe.enumerable:!1,we=oe?!!oe.noTargetGet:!1,J;if(typeof se=="function"&&(typeof te=="string"&&!S(se,"name")&&B(se,"name",te),J=R(se),J.source||(J.source=V.join(typeof te=="string"?te:""))),Y===C){de?Y[te]=se:P(te,se);return}else K?!we&&Y[te]&&(de=!0):delete Y[te];de?Y[te]=se:B(Y,te,se)})(Function.prototype,"toString",function(){return typeof this=="function"&&F(this).source||j(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(i,m,g){var C=g("./node_modules/core-js/internals/an-object.js");i.exports=function(){var B=C(this),S="";return B.global&&(S+="g"),B.ignoreCase&&(S+="i"),B.multiline&&(S+="m"),B.dotAll&&(S+="s"),B.unicode&&(S+="u"),B.sticky&&(S+="y"),S}},"./node_modules/core-js/internals/require-object-coercible.js":function(i){i.exports=function(m){if(m==null)throw TypeError("Can't call method on "+m);return m}},"./node_modules/core-js/internals/set-global.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js");i.exports=function(B,S){try{Object.defineProperty(C,B,{value:S,configurable:!0,writable:!0})}catch{C[B]=S}return S}},"./node_modules/core-js/internals/set-to-string-tag.js":function(i,m,g){var C=g("./node_modules/core-js/internals/object-define-property.js").f,B=g("./node_modules/core-js/internals/has.js"),S=g("./node_modules/core-js/internals/well-known-symbol.js"),P=S("toStringTag");i.exports=function(j,D,F){j&&!B(j=F?j:j.prototype,P)&&C(j,P,{configurable:!0,value:D})}},"./node_modules/core-js/internals/shared-key.js":function(i,m,g){var C=g("./node_modules/core-js/internals/shared.js"),B=g("./node_modules/core-js/internals/uid.js"),S=C("keys");i.exports=function(P){return S[P]||(S[P]=B(P))}},"./node_modules/core-js/internals/shared-store.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/set-global.js"),S="__core-js_shared__",P=C[S]||B(S,{});i.exports=P},"./node_modules/core-js/internals/shared.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-pure.js"),B=g("./node_modules/core-js/internals/shared-store.js");(i.exports=function(S,P){return B[S]||(B[S]=P!==void 0?P:{})})("versions",[]).push({version:"3.16.0",mode:C?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(i,m,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=function(B){return C(function(){var S=""[B]('"');return S!==S.toLowerCase()||S.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-integer.js"),B=g("./node_modules/core-js/internals/to-string.js"),S=g("./node_modules/core-js/internals/require-object-coercible.js"),P=function(j){return function(D,F){var R=B(S(D)),V=C(F),Y=R.length,te,se;return V<0||V>=Y?j?"":void 0:(te=R.charCodeAt(V),te<55296||te>56319||V+1===Y||(se=R.charCodeAt(V+1))<56320||se>57343?j?R.charAt(V):te:j?R.slice(V,V+2):(te-55296<<10)+(se-56320)+65536)}};i.exports={codeAt:P(!1),charAt:P(!0)}},"./node_modules/core-js/internals/string-trim.js":function(i,m,g){var C=g("./node_modules/core-js/internals/require-object-coercible.js"),B=g("./node_modules/core-js/internals/to-string.js"),S=g("./node_modules/core-js/internals/whitespaces.js"),P="["+S+"]",j=RegExp("^"+P+P+"*"),D=RegExp(P+P+"*$"),F=function(R){return function(V){var Y=B(C(V));return R&1&&(Y=Y.replace(j,"")),R&2&&(Y=Y.replace(D,"")),Y}};i.exports={start:F(1),end:F(2),trim:F(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-integer.js"),B=Math.max,S=Math.min;i.exports=function(P,j){var D=C(P);return D<0?B(D+j,0):S(D,j)}},"./node_modules/core-js/internals/to-indexed-object.js":function(i,m,g){var C=g("./node_modules/core-js/internals/indexed-object.js"),B=g("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(S){return C(B(S))}},"./node_modules/core-js/internals/to-integer.js":function(i){var m=Math.ceil,g=Math.floor;i.exports=function(C){return isNaN(C=+C)?0:(C>0?g:m)(C)}},"./node_modules/core-js/internals/to-length.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-integer.js"),B=Math.min;i.exports=function(S){return S>0?B(C(S),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(i,m,g){var C=g("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(B){return Object(C(B))}},"./node_modules/core-js/internals/to-primitive.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-object.js"),B=g("./node_modules/core-js/internals/is-symbol.js"),S=g("./node_modules/core-js/internals/ordinary-to-primitive.js"),P=g("./node_modules/core-js/internals/well-known-symbol.js"),j=P("toPrimitive");i.exports=function(D,F){if(!C(D)||B(D))return D;var R=D[j],V;if(R!==void 0){if(F===void 0&&(F="default"),V=R.call(D,F),!C(V)||B(V))return V;throw TypeError("Can't convert object to primitive value")}return F===void 0&&(F="number"),S(D,F)}},"./node_modules/core-js/internals/to-property-key.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-primitive.js"),B=g("./node_modules/core-js/internals/is-symbol.js");i.exports=function(S){var P=C(S,"string");return B(P)?P:String(P)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(i,m,g){var C=g("./node_modules/core-js/internals/well-known-symbol.js"),B=C("toStringTag"),S={};S[B]="z",i.exports=String(S)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(i,m,g){var C=g("./node_modules/core-js/internals/is-symbol.js");i.exports=function(B){if(C(B))throw TypeError("Cannot convert a Symbol value to a string");return String(B)}},"./node_modules/core-js/internals/uid.js":function(i){var m=0,g=Math.random();i.exports=function(C){return"Symbol("+String(C===void 0?"":C)+")_"+(++m+g).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(i,m,g){var C=g("./node_modules/core-js/internals/native-symbol.js");i.exports=C&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(i,m,g){var C=g("./node_modules/core-js/internals/well-known-symbol.js");m.f=C},"./node_modules/core-js/internals/well-known-symbol.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/shared.js"),S=g("./node_modules/core-js/internals/has.js"),P=g("./node_modules/core-js/internals/uid.js"),j=g("./node_modules/core-js/internals/native-symbol.js"),D=g("./node_modules/core-js/internals/use-symbol-as-uid.js"),F=B("wks"),R=C.Symbol,V=D?R:R&&R.withoutSetter||P;i.exports=function(Y){return(!S(F,Y)||!(j||typeof F[Y]=="string"))&&(j&&S(R,Y)?F[Y]=R[Y]:F[Y]=V("Symbol."+Y)),F[Y]}},"./node_modules/core-js/internals/whitespaces.js":function(i){i.exports=`	
\v\f\r \u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/fails.js"),S=g("./node_modules/core-js/internals/is-array.js"),P=g("./node_modules/core-js/internals/is-object.js"),j=g("./node_modules/core-js/internals/to-object.js"),D=g("./node_modules/core-js/internals/to-length.js"),F=g("./node_modules/core-js/internals/create-property.js"),R=g("./node_modules/core-js/internals/array-species-create.js"),V=g("./node_modules/core-js/internals/array-method-has-species-support.js"),Y=g("./node_modules/core-js/internals/well-known-symbol.js"),te=g("./node_modules/core-js/internals/engine-v8-version.js"),se=Y("isConcatSpreadable"),oe=9007199254740991,K="Maximum allowed index exceeded",de=te>=51||!B(function(){var Ie=[];return Ie[se]=!1,Ie.concat()[0]!==Ie}),we=V("concat"),J=function(Ie){if(!P(Ie))return!1;var be=Ie[se];return be!==void 0?!!be:S(Ie)},Z=!de||!we;C({target:"Array",proto:!0,forced:Z},{concat:function(be){var He=j(this),Fe=R(He,0),ve=0,_e,ze,Ne,st,ie;for(_e=-1,Ne=arguments.length;_e<Ne;_e++)if(ie=_e===-1?He:arguments[_e],J(ie)){if(st=D(ie.length),ve+st>oe)throw TypeError(K);for(ze=0;ze<st;ze++,ve++)ze in ie&&F(Fe,ve,ie[ze])}else{if(ve>=oe)throw TypeError(K);F(Fe,ve++,ie)}return Fe.length=ve,Fe}})},"./node_modules/core-js/modules/es.array.iterator.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-indexed-object.js"),B=g("./node_modules/core-js/internals/add-to-unscopables.js"),S=g("./node_modules/core-js/internals/iterators.js"),P=g("./node_modules/core-js/internals/internal-state.js"),j=g("./node_modules/core-js/internals/define-iterator.js"),D="Array Iterator",F=P.set,R=P.getterFor(D);i.exports=j(Array,"Array",function(V,Y){F(this,{type:D,target:C(V),index:0,kind:Y})},function(){var V=R(this),Y=V.target,te=V.kind,se=V.index++;return!Y||se>=Y.length?(V.target=void 0,{value:void 0,done:!0}):te=="keys"?{value:se,done:!1}:te=="values"?{value:Y[se],done:!1}:{value:[se,Y[se]],done:!1}},"values"),S.Arguments=S.Array,B("keys"),B("values"),B("entries")},"./node_modules/core-js/modules/es.array.join.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/indexed-object.js"),S=g("./node_modules/core-js/internals/to-indexed-object.js"),P=g("./node_modules/core-js/internals/array-method-is-strict.js"),j=[].join,D=B!=Object,F=P("join",",");C({target:"Array",proto:!0,forced:D||!F},{join:function(V){return j.call(S(this),V===void 0?",":V)}})},"./node_modules/core-js/modules/es.array.map.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/array-iteration.js").map,S=g("./node_modules/core-js/internals/array-method-has-species-support.js"),P=S("map");C({target:"Array",proto:!0,forced:!P},{map:function(D){return B(this,D,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/is-object.js"),S=g("./node_modules/core-js/internals/is-array.js"),P=g("./node_modules/core-js/internals/to-absolute-index.js"),j=g("./node_modules/core-js/internals/to-length.js"),D=g("./node_modules/core-js/internals/to-indexed-object.js"),F=g("./node_modules/core-js/internals/create-property.js"),R=g("./node_modules/core-js/internals/well-known-symbol.js"),V=g("./node_modules/core-js/internals/array-method-has-species-support.js"),Y=V("slice"),te=R("species"),se=[].slice,oe=Math.max;C({target:"Array",proto:!0,forced:!Y},{slice:function(de,we){var J=D(this),Z=j(J.length),Ie=P(de,Z),be=P(we===void 0?Z:we,Z),He,Fe,ve;if(S(J)&&(He=J.constructor,typeof He=="function"&&(He===Array||S(He.prototype))?He=void 0:B(He)&&(He=He[te],He===null&&(He=void 0)),He===Array||He===void 0))return se.call(J,Ie,be);for(Fe=new(He===void 0?Array:He)(oe(be-Ie,0)),ve=0;Ie<be;Ie++,ve++)Ie in J&&F(Fe,ve,J[Ie]);return Fe.length=ve,Fe}})},"./node_modules/core-js/modules/es.function.name.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-define-property.js").f,S=Function.prototype,P=S.toString,j=/^\s*function ([^ (]*)/,D="name";C&&!(D in S)&&B(S,D,{configurable:!0,get:function(){try{return P.call(this).match(j)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(i,m,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/global.js"),S=g("./node_modules/core-js/internals/is-forced.js"),P=g("./node_modules/core-js/internals/redefine.js"),j=g("./node_modules/core-js/internals/has.js"),D=g("./node_modules/core-js/internals/classof-raw.js"),F=g("./node_modules/core-js/internals/inherit-if-required.js"),R=g("./node_modules/core-js/internals/is-symbol.js"),V=g("./node_modules/core-js/internals/to-primitive.js"),Y=g("./node_modules/core-js/internals/fails.js"),te=g("./node_modules/core-js/internals/object-create.js"),se=g("./node_modules/core-js/internals/object-get-own-property-names.js").f,oe=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,K=g("./node_modules/core-js/internals/object-define-property.js").f,de=g("./node_modules/core-js/internals/string-trim.js").trim,we="Number",J=B[we],Z=J.prototype,Ie=D(te(Z))==we,be=function(ze){if(R(ze))throw TypeError("Cannot convert a Symbol value to a number");var Ne=V(ze,"number"),st,ie,le,pe,fe,Qe,Ke,et;if(typeof Ne=="string"&&Ne.length>2){if(Ne=de(Ne),st=Ne.charCodeAt(0),st===43||st===45){if(ie=Ne.charCodeAt(2),ie===88||ie===120)return NaN}else if(st===48){switch(Ne.charCodeAt(1)){case 66:case 98:le=2,pe=49;break;case 79:case 111:le=8,pe=55;break;default:return+Ne}for(fe=Ne.slice(2),Qe=fe.length,Ke=0;Ke<Qe;Ke++)if(et=fe.charCodeAt(Ke),et<48||et>pe)return NaN;return parseInt(fe,le)}}return+Ne};if(S(we,!J(" 0o1")||!J("0b1")||J("+0x1"))){for(var He=function(Ne){var st=arguments.length<1?0:Ne,ie=this;return ie instanceof He&&(Ie?Y(function(){Z.valueOf.call(ie)}):D(ie)!=we)?F(new J(be(st)),ie,He):be(st)},Fe=C?se(J):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),ve=0,_e;Fe.length>ve;ve++)j(J,_e=Fe[ve])&&!j(He,_e)&&K(He,_e,oe(J,_e));He.prototype=Z,Z.constructor=He,P(B,we,He)}},"./node_modules/core-js/modules/es.object.assign.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/object-assign.js");C({target:"Object",stat:!0,forced:Object.assign!==B},{assign:B})},"./node_modules/core-js/modules/es.object.keys.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/to-object.js"),S=g("./node_modules/core-js/internals/object-keys.js"),P=g("./node_modules/core-js/internals/fails.js"),j=P(function(){S(1)});C({target:"Object",stat:!0,forced:j},{keys:function(F){return S(B(F))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(i,m,g){var C=g("./node_modules/core-js/internals/to-string-tag-support.js"),B=g("./node_modules/core-js/internals/redefine.js"),S=g("./node_modules/core-js/internals/object-to-string.js");C||B(Object.prototype,"toString",S,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(i,m,g){var C=g("./node_modules/core-js/internals/redefine.js"),B=g("./node_modules/core-js/internals/an-object.js"),S=g("./node_modules/core-js/internals/to-string.js"),P=g("./node_modules/core-js/internals/fails.js"),j=g("./node_modules/core-js/internals/regexp-flags.js"),D="toString",F=RegExp.prototype,R=F[D],V=P(function(){return R.call({source:"a",flags:"b"})!="/a/b"}),Y=R.name!=D;(V||Y)&&C(RegExp.prototype,D,function(){var se=B(this),oe=S(se.source),K=se.flags,de=S(K===void 0&&se instanceof RegExp&&!("flags"in F)?j.call(se):K);return"/"+oe+"/"+de},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(i,m,g){var C=g("./node_modules/core-js/internals/string-multibyte.js").charAt,B=g("./node_modules/core-js/internals/to-string.js"),S=g("./node_modules/core-js/internals/internal-state.js"),P=g("./node_modules/core-js/internals/define-iterator.js"),j="String Iterator",D=S.set,F=S.getterFor(j);P(String,"String",function(R){D(this,{type:j,string:B(R),index:0})},function(){var V=F(this),Y=V.string,te=V.index,se;return te>=Y.length?{value:void 0,done:!0}:(se=C(Y,te),V.index+=se.length,{value:se,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/create-html.js"),S=g("./node_modules/core-js/internals/string-html-forced.js");C({target:"String",proto:!0,forced:S("link")},{link:function(j){return B(this,"a","href",j)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/descriptors.js"),S=g("./node_modules/core-js/internals/global.js"),P=g("./node_modules/core-js/internals/has.js"),j=g("./node_modules/core-js/internals/is-object.js"),D=g("./node_modules/core-js/internals/object-define-property.js").f,F=g("./node_modules/core-js/internals/copy-constructor-properties.js"),R=S.Symbol;if(B&&typeof R=="function"&&(!("description"in R.prototype)||R().description!==void 0)){var V={},Y=function(){var we=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),J=this instanceof Y?new R(we):we===void 0?R():R(we);return we===""&&(V[J]=!0),J};F(Y,R);var te=Y.prototype=R.prototype;te.constructor=Y;var se=te.toString,oe=String(R("test"))=="Symbol(test)",K=/^Symbol\((.*)\)[^)]+$/;D(te,"description",{configurable:!0,get:function(){var we=j(this)?this.valueOf():this,J=se.call(we);if(P(V,we))return"";var Z=oe?J.slice(7,-1):J.replace(K,"$1");return Z===""?void 0:Z}}),C({global:!0,forced:!0},{Symbol:Y})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(i,m,g){var C=g("./node_modules/core-js/internals/define-well-known-symbol.js");C("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(i,m,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/global.js"),S=g("./node_modules/core-js/internals/get-built-in.js"),P=g("./node_modules/core-js/internals/is-pure.js"),j=g("./node_modules/core-js/internals/descriptors.js"),D=g("./node_modules/core-js/internals/native-symbol.js"),F=g("./node_modules/core-js/internals/fails.js"),R=g("./node_modules/core-js/internals/has.js"),V=g("./node_modules/core-js/internals/is-array.js"),Y=g("./node_modules/core-js/internals/is-object.js"),te=g("./node_modules/core-js/internals/is-symbol.js"),se=g("./node_modules/core-js/internals/an-object.js"),oe=g("./node_modules/core-js/internals/to-object.js"),K=g("./node_modules/core-js/internals/to-indexed-object.js"),de=g("./node_modules/core-js/internals/to-property-key.js"),we=g("./node_modules/core-js/internals/to-string.js"),J=g("./node_modules/core-js/internals/create-property-descriptor.js"),Z=g("./node_modules/core-js/internals/object-create.js"),Ie=g("./node_modules/core-js/internals/object-keys.js"),be=g("./node_modules/core-js/internals/object-get-own-property-names.js"),He=g("./node_modules/core-js/internals/object-get-own-property-names-external.js"),Fe=g("./node_modules/core-js/internals/object-get-own-property-symbols.js"),ve=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),_e=g("./node_modules/core-js/internals/object-define-property.js"),ze=g("./node_modules/core-js/internals/object-property-is-enumerable.js"),Ne=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),st=g("./node_modules/core-js/internals/redefine.js"),ie=g("./node_modules/core-js/internals/shared.js"),le=g("./node_modules/core-js/internals/shared-key.js"),pe=g("./node_modules/core-js/internals/hidden-keys.js"),fe=g("./node_modules/core-js/internals/uid.js"),Qe=g("./node_modules/core-js/internals/well-known-symbol.js"),Ke=g("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),et=g("./node_modules/core-js/internals/define-well-known-symbol.js"),tt=g("./node_modules/core-js/internals/set-to-string-tag.js"),bt=g("./node_modules/core-js/internals/internal-state.js"),De=g("./node_modules/core-js/internals/array-iteration.js").forEach,Mt=le("hidden"),ir="Symbol",Ar="prototype",Ze=Qe("toPrimitive"),Ue=bt.set,hr=bt.getterFor(ir),Dt=Object[Ar],vt=B.Symbol,Kt=S("JSON","stringify"),rr=ve.f,nr=_e.f,Nr=He.f,on=ze.f,Ir=ie("symbols"),cn=ie("op-symbols"),Sn=ie("string-to-symbol-registry"),Ln=ie("symbol-to-string-registry"),ln=ie("wks"),ar=B.QObject,Yt=!ar||!ar[Ar]||!ar[Ar].findChild,Gr=j&&F(function(){return Z(nr({},"a",{get:function(){return nr(this,"a",{value:7}).a}})).a!=7})?function(Rn,Zr,Pr){var un=rr(Dt,Zr);un&&delete Dt[Zr],nr(Rn,Zr,Pr),un&&Rn!==Dt&&nr(Dt,Zr,un)}:nr,Wr=function(Rn,Zr){var Pr=Ir[Rn]=Z(vt[Ar]);return Ue(Pr,{type:ir,tag:Rn,description:Zr}),j||(Pr.description=Zr),Pr},On=function(Zr,Pr,un){Zr===Dt&&On(cn,Pr,un),se(Zr);var Ii=de(Pr);return se(un),R(Ir,Ii)?(un.enumerable?(R(Zr,Mt)&&Zr[Mt][Ii]&&(Zr[Mt][Ii]=!1),un=Z(un,{enumerable:J(0,!1)})):(R(Zr,Mt)||nr(Zr,Mt,J(1,{})),Zr[Mt][Ii]=!0),Gr(Zr,Ii,un)):nr(Zr,Ii,un)},mn=function(Zr,Pr){se(Zr);var un=K(Pr),Ii=Ie(un).concat(Dn(un));return De(Ii,function(ri){(!j||Vi.call(un,ri))&&On(Zr,ri,un[ri])}),Zr},Hn=function(Zr,Pr){return Pr===void 0?Z(Zr):mn(Z(Zr),Pr)},Vi=function(Zr){var Pr=de(Zr),un=on.call(this,Pr);return this===Dt&&R(Ir,Pr)&&!R(cn,Pr)?!1:un||!R(this,Pr)||!R(Ir,Pr)||R(this,Mt)&&this[Mt][Pr]?un:!0},Bn=function(Zr,Pr){var un=K(Zr),Ii=de(Pr);if(!(un===Dt&&R(Ir,Ii)&&!R(cn,Ii))){var ri=rr(un,Ii);return ri&&R(Ir,Ii)&&!(R(un,Mt)&&un[Mt][Ii])&&(ri.enumerable=!0),ri}},jn=function(Zr){var Pr=Nr(K(Zr)),un=[];return De(Pr,function(Ii){!R(Ir,Ii)&&!R(pe,Ii)&&un.push(Ii)}),un},Dn=function(Zr){var Pr=Zr===Dt,un=Nr(Pr?cn:K(Zr)),Ii=[];return De(un,function(ri){R(Ir,ri)&&(!Pr||R(Dt,ri))&&Ii.push(Ir[ri])}),Ii};if(D||(vt=function(){if(this instanceof vt)throw TypeError("Symbol is not a constructor");var Zr=!arguments.length||arguments[0]===void 0?void 0:we(arguments[0]),Pr=fe(Zr),un=function(Ii){this===Dt&&un.call(cn,Ii),R(this,Mt)&&R(this[Mt],Pr)&&(this[Mt][Pr]=!1),Gr(this,Pr,J(1,Ii))};return j&&Yt&&Gr(Dt,Pr,{configurable:!0,set:un}),Wr(Pr,Zr)},st(vt[Ar],"toString",function(){return hr(this).tag}),st(vt,"withoutSetter",function(Rn){return Wr(fe(Rn),Rn)}),ze.f=Vi,_e.f=On,ve.f=Bn,be.f=He.f=jn,Fe.f=Dn,Ke.f=function(Rn){return Wr(Qe(Rn),Rn)},j&&(nr(vt[Ar],"description",{configurable:!0,get:function(){return hr(this).description}}),P||st(Dt,"propertyIsEnumerable",Vi,{unsafe:!0}))),C({global:!0,wrap:!0,forced:!D,sham:!D},{Symbol:vt}),De(Ie(ln),function(Rn){et(Rn)}),C({target:ir,stat:!0,forced:!D},{for:function(Rn){var Zr=we(Rn);if(R(Sn,Zr))return Sn[Zr];var Pr=vt(Zr);return Sn[Zr]=Pr,Ln[Pr]=Zr,Pr},keyFor:function(Zr){if(!te(Zr))throw TypeError(Zr+" is not a symbol");if(R(Ln,Zr))return Ln[Zr]},useSetter:function(){Yt=!0},useSimple:function(){Yt=!1}}),C({target:"Object",stat:!0,forced:!D,sham:!j},{create:Hn,defineProperty:On,defineProperties:mn,getOwnPropertyDescriptor:Bn}),C({target:"Object",stat:!0,forced:!D},{getOwnPropertyNames:jn,getOwnPropertySymbols:Dn}),C({target:"Object",stat:!0,forced:F(function(){Fe.f(1)})},{getOwnPropertySymbols:function(Zr){return Fe.f(oe(Zr))}}),Kt){var Gi=!D||F(function(){var Rn=vt();return Kt([Rn])!="[null]"||Kt({a:Rn})!="{}"||Kt(Object(Rn))!="{}"});C({target:"JSON",stat:!0,forced:Gi},{stringify:function(Zr,Pr,un){for(var Ii=[Zr],ri=1,ur;arguments.length>ri;)Ii.push(arguments[ri++]);if(ur=Pr,!(!Y(Pr)&&Zr===void 0||te(Zr)))return V(Pr)||(Pr=function(We,qe){if(typeof ur=="function"&&(qe=ur.call(this,We,qe)),!te(qe))return qe}),Ii[1]=Pr,Kt.apply(null,Ii)}})}vt[Ar][Ze]||Ne(vt[Ar],Ze,vt[Ar].valueOf),tt(vt,ir),pe[Mt]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/dom-iterables.js"),S=g("./node_modules/core-js/internals/array-for-each.js"),P=g("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var j in B){var D=C[j],F=D&&D.prototype;if(F&&F.forEach!==S)try{P(F,"forEach",S)}catch{F.forEach=S}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(i,m,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/dom-iterables.js"),S=g("./node_modules/core-js/modules/es.array.iterator.js"),P=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=g("./node_modules/core-js/internals/well-known-symbol.js"),D=j("iterator"),F=j("toStringTag"),R=S.values;for(var V in B){var Y=C[V],te=Y&&Y.prototype;if(te){if(te[D]!==R)try{P(te,D,R)}catch{te[D]=R}if(te[F]||P(te,F,V),B[V]){for(var se in S)if(te[se]!==S[se])try{P(te,se,S[se])}catch{te[se]=S[se]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(i){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(m,g){i.exports=g()})(this,function(){function m(ar){var Yt=typeof ar;return ar!==null&&(Yt==="object"||Yt==="function")}function g(ar){return typeof ar=="function"}var C=void 0;Array.isArray?C=Array.isArray:C=function(ar){return Object.prototype.toString.call(ar)==="[object Array]"};var B=C,S=0,P=void 0,j=void 0,D=function(Yt,Gr){Ie[S]=Yt,Ie[S+1]=Gr,S+=2,S===2&&(j?j(be):Fe())};function F(ar){j=ar}function R(ar){D=ar}var V=typeof window<"u"?window:void 0,Y=V||{},te=Y.MutationObserver||Y.WebKitMutationObserver,se=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",oe=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function K(){return function(){return process.nextTick(be)}}function de(){return typeof P<"u"?function(){P(be)}:Z()}function we(){var ar=0,Yt=new te(be),Gr=document.createTextNode("");return Yt.observe(Gr,{characterData:!0}),function(){Gr.data=ar=++ar%2}}function J(){var ar=new MessageChannel;return ar.port1.onmessage=be,function(){return ar.port2.postMessage(0)}}function Z(){var ar=setTimeout;return function(){return ar(be,1)}}var Ie=new Array(1e3);function be(){for(var ar=0;ar<S;ar+=2){var Yt=Ie[ar],Gr=Ie[ar+1];Yt(Gr),Ie[ar]=void 0,Ie[ar+1]=void 0}S=0}function He(){try{var ar=Function("return this")().require("vertx");return P=ar.runOnLoop||ar.runOnContext,de()}catch{return Z()}}var Fe=void 0;se?Fe=K():te?Fe=we():oe?Fe=J():V===void 0?Fe=He():Fe=Z();function ve(ar,Yt){var Gr=this,Wr=new this.constructor(Ne);Wr[ze]===void 0&&Kt(Wr);var On=Gr._state;if(On){var mn=arguments[On-1];D(function(){return Ue(On,Wr,mn,Gr._result)})}else Ar(Gr,Wr,ar,Yt);return Wr}function _e(ar){var Yt=this;if(ar&&typeof ar=="object"&&ar.constructor===Yt)return ar;var Gr=new Yt(Ne);return bt(Gr,ar),Gr}var ze=Math.random().toString(36).substring(2);function Ne(){}var st=void 0,ie=1,le=2;function pe(){return new TypeError("You cannot resolve a promise with itself")}function fe(){return new TypeError("A promises callback cannot return that same promise.")}function Qe(ar,Yt,Gr,Wr){try{ar.call(Yt,Gr,Wr)}catch(On){return On}}function Ke(ar,Yt,Gr){D(function(Wr){var On=!1,mn=Qe(Gr,Yt,function(Hn){On||(On=!0,Yt!==Hn?bt(Wr,Hn):Mt(Wr,Hn))},function(Hn){On||(On=!0,ir(Wr,Hn))},"Settle: "+(Wr._label||" unknown promise"));!On&&mn&&(On=!0,ir(Wr,mn))},ar)}function et(ar,Yt){Yt._state===ie?Mt(ar,Yt._result):Yt._state===le?ir(ar,Yt._result):Ar(Yt,void 0,function(Gr){return bt(ar,Gr)},function(Gr){return ir(ar,Gr)})}function tt(ar,Yt,Gr){Yt.constructor===ar.constructor&&Gr===ve&&Yt.constructor.resolve===_e?et(ar,Yt):Gr===void 0?Mt(ar,Yt):g(Gr)?Ke(ar,Yt,Gr):Mt(ar,Yt)}function bt(ar,Yt){if(ar===Yt)ir(ar,pe());else if(m(Yt)){var Gr=void 0;try{Gr=Yt.then}catch(Wr){ir(ar,Wr);return}tt(ar,Yt,Gr)}else Mt(ar,Yt)}function De(ar){ar._onerror&&ar._onerror(ar._result),Ze(ar)}function Mt(ar,Yt){ar._state===st&&(ar._result=Yt,ar._state=ie,ar._subscribers.length!==0&&D(Ze,ar))}function ir(ar,Yt){ar._state===st&&(ar._state=le,ar._result=Yt,D(De,ar))}function Ar(ar,Yt,Gr,Wr){var On=ar._subscribers,mn=On.length;ar._onerror=null,On[mn]=Yt,On[mn+ie]=Gr,On[mn+le]=Wr,mn===0&&ar._state&&D(Ze,ar)}function Ze(ar){var Yt=ar._subscribers,Gr=ar._state;if(Yt.length!==0){for(var Wr=void 0,On=void 0,mn=ar._result,Hn=0;Hn<Yt.length;Hn+=3)Wr=Yt[Hn],On=Yt[Hn+Gr],Wr?Ue(Gr,Wr,On,mn):On(mn);ar._subscribers.length=0}}function Ue(ar,Yt,Gr,Wr){var On=g(Gr),mn=void 0,Hn=void 0,Vi=!0;if(On){try{mn=Gr(Wr)}catch(Bn){Vi=!1,Hn=Bn}if(Yt===mn){ir(Yt,fe());return}}else mn=Wr;Yt._state!==st||(On&&Vi?bt(Yt,mn):Vi===!1?ir(Yt,Hn):ar===ie?Mt(Yt,mn):ar===le&&ir(Yt,mn))}function hr(ar,Yt){try{Yt(function(Wr){bt(ar,Wr)},function(Wr){ir(ar,Wr)})}catch(Gr){ir(ar,Gr)}}var Dt=0;function vt(){return Dt++}function Kt(ar){ar[ze]=Dt++,ar._state=void 0,ar._result=void 0,ar._subscribers=[]}function rr(){return new Error("Array Methods must be provided an Array")}var nr=function(){function ar(Yt,Gr){this._instanceConstructor=Yt,this.promise=new Yt(Ne),this.promise[ze]||Kt(this.promise),B(Gr)?(this.length=Gr.length,this._remaining=Gr.length,this._result=new Array(this.length),this.length===0?Mt(this.promise,this._result):(this.length=this.length||0,this._enumerate(Gr),this._remaining===0&&Mt(this.promise,this._result))):ir(this.promise,rr())}return ar.prototype._enumerate=function(Gr){for(var Wr=0;this._state===st&&Wr<Gr.length;Wr++)this._eachEntry(Gr[Wr],Wr)},ar.prototype._eachEntry=function(Gr,Wr){var On=this._instanceConstructor,mn=On.resolve;if(mn===_e){var Hn=void 0,Vi=void 0,Bn=!1;try{Hn=Gr.then}catch(Dn){Bn=!0,Vi=Dn}if(Hn===ve&&Gr._state!==st)this._settledAt(Gr._state,Wr,Gr._result);else if(typeof Hn!="function")this._remaining--,this._result[Wr]=Gr;else if(On===Ln){var jn=new On(Ne);Bn?ir(jn,Vi):tt(jn,Gr,Hn),this._willSettleAt(jn,Wr)}else this._willSettleAt(new On(function(Dn){return Dn(Gr)}),Wr)}else this._willSettleAt(mn(Gr),Wr)},ar.prototype._settledAt=function(Gr,Wr,On){var mn=this.promise;mn._state===st&&(this._remaining--,Gr===le?ir(mn,On):this._result[Wr]=On),this._remaining===0&&Mt(mn,this._result)},ar.prototype._willSettleAt=function(Gr,Wr){var On=this;Ar(Gr,void 0,function(mn){return On._settledAt(ie,Wr,mn)},function(mn){return On._settledAt(le,Wr,mn)})},ar}();function Nr(ar){return new nr(this,ar).promise}function on(ar){var Yt=this;return B(ar)?new Yt(function(Gr,Wr){for(var On=ar.length,mn=0;mn<On;mn++)Yt.resolve(ar[mn]).then(Gr,Wr)}):new Yt(function(Gr,Wr){return Wr(new TypeError("You must pass an array to race."))})}function Ir(ar){var Yt=this,Gr=new Yt(Ne);return ir(Gr,ar),Gr}function cn(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Sn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Ln=function(){function ar(Yt){this[ze]=vt(),this._result=this._state=void 0,this._subscribers=[],Ne!==Yt&&(typeof Yt!="function"&&cn(),this instanceof ar?hr(this,Yt):Sn())}return ar.prototype.catch=function(Gr){return this.then(null,Gr)},ar.prototype.finally=function(Gr){var Wr=this,On=Wr.constructor;return g(Gr)?Wr.then(function(mn){return On.resolve(Gr()).then(function(){return mn})},function(mn){return On.resolve(Gr()).then(function(){throw mn})}):Wr.then(Gr,Gr)},ar}();Ln.prototype.then=ve,Ln.all=Nr,Ln.race=on,Ln.resolve=_e,Ln.reject=Ir,Ln._setScheduler=F,Ln._setAsap=R,Ln._asap=D;function ln(){var ar=void 0;if(typeof Ho<"u")ar=Ho;else if(typeof self<"u")ar=self;else try{ar=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Yt=ar.Promise;if(Yt){var Gr=null;try{Gr=Object.prototype.toString.call(Yt.resolve())}catch{}if(Gr==="[object Promise]"&&!Yt.cast)return}ar.Promise=Ln}return Ln.polyfill=ln,Ln.Promise=Ln,Ln})},html2canvas:function(i){i.exports=n},jspdf:function(i){i.exports=r}},o={};function c(i){var m=o[i];if(m!==void 0)return m.exports;var g=o[i]={exports:{}};return s[i].call(g.exports,g,g.exports,c),g.exports}(function(){c.n=function(i){var m=i&&i.__esModule?function(){return i.default}:function(){return i};return c.d(m,{a:m}),m}})(),function(){c.d=function(i,m){for(var g in m)c.o(m,g)&&!c.o(i,g)&&Object.defineProperty(i,g,{enumerable:!0,get:m[g]})}}(),function(){c.o=function(i,m){return Object.prototype.hasOwnProperty.call(i,m)}}(),function(){c.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})}}();var u={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/c.r(u);var i=c("./src/worker.js");c("./src/plugin/jspdf-plugin.js"),c("./src/plugin/pagebreaks.js"),c("./src/plugin/hyperlinks.js");var m=function g(C,B){var S=new g.Worker(B);return C?S.from(C).save():S};m.Worker=i.default,u.default=m}(),u=u.default,u}()})})(Jq);var x4e=Jq.exports;const CK=Bp(x4e),_4e=(t,e=60,r=500)=>new Promise((n,s)=>{let o=0;const c=()=>{t!=null&&t.current?n(t.current):(o++,o<e?setTimeout(c,r):s(new Error(" L'lment HTML du rapport n'est toujours pas prt aprs 30 secondes.")))};c()}),O4=async(t,e)=>{console.log(" lment DOM utilis pour PDF :",t.current);try{const r=await _4e(t),n=await CK().set({margin:0,filename:`${e}_report.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(r).outputPdf("blob");return console.log(` PDF gnr pour ${e}`),n}catch(r){return console.error(` Erreur lors de la gnration du PDF pour ${e}:`,r.message),alert(r.message),null}},SK=async t=>{const e=t==null?void 0:t.current;if(!e){alert(" lment HTML introuvable");return}const n=`
  <html>
    <head>
      <meta charset="utf-8" />
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
      <style>
        @page {
          margin: 15mm; /*  diminue ici (par dfaut WeasyPrint met 20mm) */
        }

        body {
          font-family: Arial, sans-serif;
        }

        .html2pdf__page-break {
          page-break-after: always;
        }
      </style>
    </head>
    <body>
      ${e.outerHTML}
    </body>
  </html>
`;try{const s=await Tr.post("/api/gfw/generate-pdf",{html:n},{responseType:"blob"}),o=window.URL.createObjectURL(new Blob([s.data],{type:"application/pdf"})),c=document.createElement("a");c.href=o,c.setAttribute("download","eudr_report.pdf"),document.body.appendChild(c),c.click(),c.remove(),console.log(" PDF tlcharg avec succs")}catch(s){console.error(" Erreur lors du tlchargement du PDF :",s),alert("Une erreur est survenue lors de la gnration du PDF.")}},b4e=()=>{var te;const[t,e]=Ae.useState(null),[r,n]=Ae.useState(null),[s,o]=Ae.useState(!0),[c,u]=Ae.useState(null),[i,m]=Ae.useState(!1),[g,C]=Ae.useState(!1),[B,S]=Ae.useState(!1),[P,j]=Ae.useState(null),F=((te=vu().state)==null?void 0:te.farmId)||"WAK0001",R=Ae.useRef(),V=async se=>{var oe,K,de,we,J,Z,Ie,be,He;if(console.log(" saveReportToDatabase called from FarmReport"),console.log(" farmInfo:",t),console.log(" farmInfo.farm_id:",t==null?void 0:t.farm_id),!(t!=null&&t.farm_id)){console.error(" Farm ID is missing, cannot save report"),j("Farm ID is missing");return}C(!0),S(!1),j(null);try{console.log(" Saving report to database..."),console.log(" Report data received:",se);const Fe={farm_id:t.farm_id,project_area:`${((oe=se.areaInHectares)==null?void 0:oe.toFixed(2))||0} ha`,country_deforestation_risk_level:se.deforestationRiskLevel||"STANDARD",radd_alert:`${((K=se.raddAlertsArea)==null?void 0:K.toFixed(2))||0} ha`,tree_cover_loss:`${((de=se.treeCoverLossArea)==null?void 0:de.toFixed(2))||0} ha`,forest_cover_2020:se.isJrcGlobalForestCover||"No data",eudr_compliance_assessment:((we=se.complianceStatus)==null?void 0:we.status)||"Assessment Pending",protected_area_status:JSON.stringify(se.protectedStatus||{}),tree_cover_drivers:((J=se.tscDriverDriver)==null?void 0:J.mostCommonValue)||"Unknown",cover_extent_area:`${((Z=se.wriTropicalTreeCoverAvg)==null?void 0:Z.toFixed(2))||0}%`,cover_extent_summary:JSON.stringify(se.coverExtentDecileData||{})};console.log(" Payload prepared:",Fe),console.log(" Sending POST request to /api/farmreport/create");const ve=await Tr.post("/api/farmreport/create",Fe);console.log(" Report saved successfully!"),console.log(" Server response:",ve.data),S(!0),setTimeout(()=>S(!1),5e3)}catch(Fe){console.error(" Error saving report:",Fe),console.error(" Error response:",(Ie=Fe.response)==null?void 0:Ie.data),console.error(" Error message:",Fe.message);const ve=((He=(be=Fe.response)==null?void 0:be.data)==null?void 0:He.msg)||Fe.message||"Failed to save report";j(ve),setTimeout(()=>j(null),8e3)}finally{C(!1)}};Ae.useEffect(()=>{(async()=>{var oe;console.log("Fetching farm report for farmId:",F);try{const K=await Tr.get(`/api/gfw/farm/${F}/report`);K.data.error?u(K.data.error):(e(K.data.farm_info),n(K.data.report||{}),console.log(" Farm info loaded:",K.data.farm_info),console.log(" Geo data loaded:",K.data.report))}catch(K){u("Failed to fetch farm report."),console.error("Error fetching farm report:",((oe=K.response)==null?void 0:oe.data)||K.message)}finally{o(!1)}})()},[F]);const Y=async()=>{m(!0);try{await new Promise(se=>setTimeout(se,6e3)),await SK(R)}catch(se){console.error("PDF generation failed:",se)}finally{m(!1)}};return s?p.jsx(RC,{}):c==="No polygon found. Please create a polygon for this forest."?p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),p.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"It seems that no polygon data is available for this farm. You can create a polygon by clicking the link below:"}),p.jsx(Po,{to:"/create-polygon",className:"px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600",children:"Create Polygon"})]}):c?p.jsx("p",{className:"text-red-600",children:c}):p.jsxs("div",{className:"flex flex-col items-center text-xl relative",children:[g&&p.jsxs("div",{className:"fixed top-4 right-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[p.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Saving report to database..."]}),B&&p.jsxs("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[p.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Report saved successfully!"]}),P&&p.jsxs("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[p.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),P]}),p.jsx("div",{ref:R,children:p.jsx(UC,{results:r,reportRef:R,farmInfo:t,onReportCalculated:V})}),p.jsxs("button",{onClick:Y,disabled:i,className:`mt-6 flex items-center gap-2 px-6 py-3 rounded-lg shadow-md text-white font-semibold transition 
          ${i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[i&&p.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),i?"Generating PDF...":"Download PDF"]})]})},w4e=()=>{var j;const[t,e]=Ae.useState(null),[r,n]=Ae.useState(null),[s,o]=Ae.useState(!0),[c,u]=Ae.useState(null),[i,m]=Ae.useState(!1),C=((j=vu().state)==null?void 0:j.forestId)||1,B=Ae.useRef();Ae.useEffect(()=>{(async()=>{var F;console.log(" Fetching forest report for forestId:",C);try{const R=await Tr.get(`/api/gfw/forests/${C}/report`);R.data.error?(console.error(" Error in API response:",R.data.error),u(R.data.error)):(console.log(" API Response:",R.data),e(R.data.forest_info),console.log(" Report Data (object format):",R.data.report),n(R.data.report))}catch(R){u("Failed to fetch forest report."),console.error(" Error fetching forest report:",((F=R.response)==null?void 0:F.data)||R.message)}finally{o(!1)}})()},[C]);const S=async D=>{var F,R,V,Y,te,se,oe,K,de,we,J,Z;if(!(t!=null&&t.farm_id)){console.warn(" No forest ID available, skipping database save");return}try{console.log(" Saving forest report to database...",D);const Ie={forest_id:t.farm_id,project_area:`${((F=D.areaInSquareMeters)==null?void 0:F.toFixed(2))||0} m / ${((R=D.areaInHectares)==null?void 0:R.toFixed(2))||0} ha`,country_deforestation_risk_level:`STANDARD, Percentage: ${((V=D.treeCoverLossPercentage)==null?void 0:V.toFixed(2))||0}%`,radd_alert:`${((Y=D.raddAlertsArea)==null?void 0:Y.toFixed(2))||0} ha`,tree_cover_loss:`${((te=D.treeCoverLossArea)==null?void 0:te.toFixed(2))||0} ha`,forest_cover_2020:D.isJrcGlobalForestCover||"No data",eudr_compliance_assessment:((se=D.complianceStatus)==null?void 0:se.status)||"Assessment Pending",protected_area_status:JSON.stringify(((oe=D.protectedStatus)==null?void 0:oe.percentages)||{}),cover_extent_summary:JSON.stringify({nonZeroCount:((K=D.coverExtentDecileData)==null?void 0:K.nonZeroCount)||0,percentageCoverExtent:((de=D.coverExtentDecileData)==null?void 0:de.percentageCoverExtent)||0,valueCountArray:((we=D.coverExtentDecileData)==null?void 0:we.valueCountArray)||[]}),tree_cover_drivers:((J=D.tscDriverDriver)==null?void 0:J.mostCommonValue)||"Unknown",cover_extent_area:`${D.wriTropicalTreeCoverAvg||0}% / ${D.wriTropicalTreeCoverArea||0} ha`},be=await Tr.post("/api/forestreport/create",Ie);console.log(" Forest report saved successfully:",be.data)}catch(Ie){console.error(" Error saving forest report to database:",((Z=Ie.response)==null?void 0:Z.data)||Ie.message)}},P=async()=>{m(!0);try{await new Promise(D=>setTimeout(D,6e3)),await SK(B)}catch(D){console.error(" PDF generation failed:",D)}finally{m(!1)}};return s?p.jsx(RC,{}):c==="No polygon found. Please create a polygon for this forest."?p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),p.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"It seems that no polygon data is available for this forest. You can create a polygon by clicking the link below:"}),p.jsx(Po,{to:"/create-polygon",className:"px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600",children:"Create Polygon"})]}):c?p.jsx("p",{className:"text-red-600",children:c}):p.jsxs("div",{className:"flex flex-col items-center text-xl",children:[p.jsx("div",{ref:B,children:p.jsx(UC,{results:r,reportRef:B,farmInfo:t,reportType:"forest",onReportCalculated:S})}),p.jsxs("button",{onClick:P,disabled:i,className:`mt-6 flex items-center gap-2 px-6 py-3 rounded-lg shadow-md text-white font-semibold transition 
          ${i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[i&&p.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),i?"Generating PDF...":"Download PDF"]})]})},C4e=()=>{const[t,e]=Ae.useState({username:"",email:"",phonenumber:"",user_type:"farmer",id_start:"",is_admin:!1,password:""}),r=s=>{const{name:o,value:c,type:u,checked:i}=s.target;e(m=>({...m,[o]:u==="checkbox"?i:c}))},n=s=>{s.preventDefault(),console.log(t)};return p.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center",children:p.jsxs("div",{className:"bg-white w-full max-w-lg p-4 rounded-lg shadow-lg",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Create User"}),p.jsxs("form",{onSubmit:n,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"username",className:"block text-gray-700",children:"Username:"}),p.jsx("input",{type:"text",id:"username",name:"username",value:t.username,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-gray-700",children:"Email:"}),p.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"phonenumber",className:"block text-gray-700",children:"Phone number:"}),p.jsx("input",{type:"text",id:"phonenumber",name:"phonenumber",value:t.phonenumber,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"user_type",className:"block text-gray-700",children:"User Type:"}),p.jsxs("select",{id:"user_type",name:"user_type",value:t.user_type,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0,children:[p.jsx("option",{value:"farmer",children:"Farmer"}),p.jsx("option",{value:"forest",children:"Forest"}),p.jsx("option",{value:"admin",children:"Admin"})]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"id_start",className:"block text-gray-700",children:"ID Start:"}),p.jsx("input",{type:"text",id:"id_start",name:"id_start",value:t.id_start,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),p.jsxs("div",{className:"col-span-2 flex items-center",children:[p.jsx("input",{type:"checkbox",id:"is_admin",name:"is_admin",checked:t.is_admin,onChange:r,className:"mr-2"}),p.jsx("label",{htmlFor:"is_admin",className:"text-gray-700",children:"Admin"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-gray-700",children:"Password:"}),p.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),p.jsxs("div",{className:"col-span-2 flex justify-end mt-4",children:[p.jsx("button",{type:"reset",className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),p.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Create User"})]})]})]})})},S4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState(!0),[c,u]=Ae.useState(""),[i,m]=Ae.useState(""),[g,C]=Ae.useState(null),[B,S]=Ae.useState(""),[P,j]=Ae.useState(""),[D,F]=Ae.useState("");Ae.useState("");const R="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",V=async(we,J)=>{const Z=`https://api.mapbox.com/geocoding/v5/mapbox.places/${J},${we}.json?access_token=${R}&language=EN`;try{const be=await(await fetch(Z)).json(),He=be.features.find(_e=>_e.place_type.includes("place")),Fe=be.features.find(_e=>_e.place_type.includes("region")),ve=be.features.find(_e=>_e.place_type.includes("country"));S(He?He.text:"Ville inconnue"),j(Fe?Fe.text:"Province inconnue"),F(ve?ve.text:"Pays inconnu")}catch(Ie){console.error("Erreur lors de la rcupration du nom de la ville, province et pays:",Ie),S("Ville inconnue"),j("Province inconnue"),F("Pays inconnu")}},Y=async(we,J)=>{const Z=`https://api.open-meteo.com/v1/forecast?latitude=${we}&longitude=${J}&daily=temperature_2m_max,temperature_2m_min&timezone=auto`;console.log("Fetching URL:",Z);try{const Ie=await fetch(Z);if(!Ie.ok)throw new Error(`HTTP error! status: ${Ie.status}`);const be=await Ie.json();if(console.log("Data received from API:",be),be.daily){if(be.daily.temperature_2m_max&&be.daily.temperature_2m_min&&be.daily.time){const He=be.daily.temperature_2m_max.map((ve,_e)=>({max:ve,min:be.daily.temperature_2m_min[_e]}));n(be.daily.time),e(He);const Fe=He.reduce((ve,_e)=>{const ze=(_e.max+_e.min)/2;return ve+ze},0)/He.length;C(Fe)}}else console.error("Invalid data format from API")}catch(Ie){console.error("Failed to fetch weather data:",Ie)}finally{o(!1)}};Ae.useEffect(()=>{c&&i&&(V(c,i),Y(c,i))},[c,i]);const te=()=>{if(g===null)return{hdd:[],cdd:[],gdd:[]};const we=t.map(Ie=>{const be=(Ie.max+Ie.min)/2;return g-be}),J=t.map(Ie=>(Ie.max+Ie.min)/2-g),Z=t.map(Ie=>(Ie.max+Ie.min)/2-g);return{hdd:we,cdd:J,gdd:Z}},{hdd:se,cdd:oe,gdd:K}=te(),de={labels:r,datasets:[{label:"Heating Degree Days (HDD)",data:se,backgroundColor:"rgba(75,192,192,0.5)",borderColor:"rgba(75,192,192,1)",borderWidth:1,tension:.4,fill:!0},{label:"Cooling Degree Days (CDD)",data:oe,backgroundColor:"rgba(153,102,255,0.5)",borderColor:"rgba(153,102,255,1)",borderWidth:1,tension:.4,fill:!0},{label:"Growing Degree Days (GDD)",data:K,backgroundColor:"rgba(255, 179, 71, 0.5)",borderColor:"rgba(255, 179, 71, 1)",borderWidth:1,tension:.4}]};return p.jsxs("div",{className:"text-center max-w-6xl mx-auto mt-10",children:[p.jsx("h3",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Heating, Cooling, and Growing Degree Days"}),p.jsxs("div",{className:"mb-4",children:[p.jsx("input",{type:"number",value:c,onChange:we=>u(parseFloat(we.target.value)),placeholder:"Latitude",className:"mr-2 p-2 border rounded"}),p.jsx("input",{type:"number",value:i,onChange:we=>m(parseFloat(we.target.value)),placeholder:"Longitude",className:"mr-2 p-2 border rounded"})]}),p.jsxs("div",{className:"bg-white shadow-md rounded-lg p-2",children:[p.jsxs("h4",{className:"text-lg font-medium text-gray-700",children:["Location: ",B,", ",P,", ",D]})," ",p.jsx(I_,{data:de})]})]})},oz=({children:t,adminOnly:e=!1})=>{var n;const r=localStorage.getItem("token");if(!r)return p.jsx(qg,{to:"/login",replace:!0});try{const s=gb(r),o=Date.now()/1e3;return s.exp<o?(localStorage.removeItem("token"),p.jsx(qg,{to:"/login",replace:!0})):e&&((n=s.sub)==null?void 0:n.user_type)!=="admin"?p.jsx(qg,{to:"/login",replace:!0}):t}catch{return localStorage.removeItem("token"),p.jsx(qg,{to:"/login",replace:!0})}},B4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState(""),[s,o]=Ae.useState(""),[c,u]=Ae.useState(null),[i,m]=Ae.useState(""),[g,C]=Ae.useState(""),[B,S]=Ae.useState(!1),P=async()=>{try{const V=await Tr.get("/api/farmergroup/");e(V.data)}catch(V){console.error("Error fetching farmer groups:",V)}},j=async V=>{V.preventDefault();try{const Y=await Tr.post("/api/farmergroup/create",{name:r,description:s});e([...t,Y.data.farmer_group]),n(""),o(""),S(!1),Ti.fire({title:"Success!",text:"Farmer group created successfully!",icon:"success",confirmButtonText:"OK"})}catch(Y){console.error("Error creating farmer group:",Y)}},D=async V=>{try{const Y=await Tr.put(`/api/farmergroup/${V}`,{name:i,description:g});e(t.map(te=>te.id===V?Y.data.farmer_group:te)),u(null),Ti.fire({title:"Success!",text:"Farmer group updated successfully!",icon:"success",confirmButtonText:"OK"})}catch(Y){console.error("Error updating farmer group:",Y)}},F=async V=>{if((await Ti.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"})).isConfirmed)try{await Tr.delete(`/api/farmergroup/${V}`),e(t.filter(te=>te.id!==V)),Ti.fire({title:"Deleted!",text:"Farmer group deleted successfully!",icon:"success",confirmButtonText:"OK"})}catch(te){console.error("Error deleting farmer group:",te)}},R=V=>{u(V.id),m(V.name),C(V.description)};return Ae.useEffect(()=>{P()},[]),p.jsxs("div",{className:"container mx-auto mt-8 p-6 bg-white shadow-lg rounded-lg",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green-600",children:"Farmer Groups"}),p.jsx("button",{onClick:()=>S(!0),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300",children:"Create Cooperative"}),B&&p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[p.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create Farmer Group"}),p.jsxs("form",{onSubmit:j,children:[p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",placeholder:"Name",value:r,onChange:V=>n(V.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400",required:!0})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",placeholder:"Description",value:s,onChange:V=>o(V.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400",required:!0})}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("button",{type:"submit",className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300",children:"Create"}),p.jsx("button",{type:"button",onClick:()=>S(!1),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-300",children:"Cancel"})]})]})]})}),p.jsx("ul",{className:"space-y-4 mt-6",children:t.map(V=>p.jsx("li",{className:"border border-gray-200 p-4 rounded-lg shadow-sm",children:c===V.id?p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",value:i,onChange:Y=>m(Y.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400"})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",value:g,onChange:Y=>C(Y.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400"})}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("button",{onClick:()=>D(V.id),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300",children:"Save"}),p.jsx("button",{onClick:()=>u(null),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-300",children:"Cancel"})]})]}):p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("strong",{className:"text-lg font-semibold text-green-600",children:V.name}),p.jsx("p",{children:V.description})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:()=>R(V),className:"bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-600 transition duration-300",children:"Edit"}),p.jsx("button",{onClick:()=>F(V.id),className:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600 transition duration-300",children:"Delete"})]})]})},V.id))})]})};var BK={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Ho,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,o=!n.document&&!!n.postMessage,c=n.IS_PAPA_WORKER||!1,u={},i=0,m={};function g(K){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(de){var we=te(de);we.chunkSize=parseInt(we.chunkSize),de.step||de.chunk||(we.chunkSize=null),this._handle=new j(we),(this._handle.streamer=this)._config=we}).call(this,K),this.parseChunk=function(de,we){var J=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<J){let Ie=this._config.newline;Ie||(Z=this._config.quoteChar||'"',Ie=this._handle.guessLineEndings(de,Z)),de=[...de.split(Ie).slice(J)].join(Ie)}this.isFirstChunk&&oe(this._config.beforeFirstChunk)&&(Z=this._config.beforeFirstChunk(de))!==void 0&&(de=Z),this.isFirstChunk=!1,this._halted=!1;var J=this._partialLine+de,Z=(this._partialLine="",this._handle.parse(J,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(de=Z.meta.cursor,J=(this._finished||(this._partialLine=J.substring(de-this._baseIndex),this._baseIndex=de),Z&&Z.data&&(this._rowCount+=Z.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)n.postMessage({results:Z,workerId:m.WORKER_ID,finished:J});else if(oe(this._config.chunk)&&!we){if(this._config.chunk(Z,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Z=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Z.data),this._completeResults.errors=this._completeResults.errors.concat(Z.errors),this._completeResults.meta=Z.meta),this._completed||!J||!oe(this._config.complete)||Z&&Z.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),J||Z&&Z.meta.paused||this._nextChunk(),Z}this._halted=!0},this._sendError=function(de){oe(this._config.error)?this._config.error(de):c&&this._config.error&&n.postMessage({workerId:m.WORKER_ID,error:de,finished:!1})}}function C(K){var de;(K=K||{}).chunkSize||(K.chunkSize=m.RemoteChunkSize),g.call(this,K),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(we){this._input=we,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(de=new XMLHttpRequest,this._config.withCredentials&&(de.withCredentials=this._config.withCredentials),o||(de.onload=se(this._chunkLoaded,this),de.onerror=se(this._chunkError,this)),de.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var we,J=this._config.downloadRequestHeaders;for(we in J)de.setRequestHeader(we,J[we])}var Z;this._config.chunkSize&&(Z=this._start+this._config.chunkSize-1,de.setRequestHeader("Range","bytes="+this._start+"-"+Z));try{de.send(this._config.downloadRequestBody)}catch(Ie){this._chunkError(Ie.message)}o&&de.status===0&&this._chunkError()}},this._chunkLoaded=function(){de.readyState===4&&(de.status<200||400<=de.status?this._chunkError():(this._start+=this._config.chunkSize||de.responseText.length,this._finished=!this._config.chunkSize||this._start>=(we=>(we=we.getResponseHeader("Content-Range"))!==null?parseInt(we.substring(we.lastIndexOf("/")+1)):-1)(de),this.parseChunk(de.responseText)))},this._chunkError=function(we){we=de.statusText||we,this._sendError(new Error(we))}}function B(K){(K=K||{}).chunkSize||(K.chunkSize=m.LocalChunkSize),g.call(this,K);var de,we,J=typeof FileReader<"u";this.stream=function(Z){this._input=Z,we=Z.slice||Z.webkitSlice||Z.mozSlice,J?((de=new FileReader).onload=se(this._chunkLoaded,this),de.onerror=se(this._chunkError,this)):de=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Z=this._input,Ie=(this._config.chunkSize&&(Ie=Math.min(this._start+this._config.chunkSize,this._input.size),Z=we.call(Z,this._start,Ie)),de.readAsText(Z,this._config.encoding));J||this._chunkLoaded({target:{result:Ie}})},this._chunkLoaded=function(Z){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Z.target.result)},this._chunkError=function(){this._sendError(de.error)}}function S(K){var de;g.call(this,K=K||{}),this.stream=function(we){return de=we,this._nextChunk()},this._nextChunk=function(){var we,J;if(!this._finished)return we=this._config.chunkSize,de=we?(J=de.substring(0,we),de.substring(we)):(J=de,""),this._finished=!de,this.parseChunk(J)}}function P(K){g.call(this,K=K||{});var de=[],we=!0,J=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Z){this._input=Z,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){J&&de.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),de.length?this.parseChunk(de.shift()):we=!0},this._streamData=se(function(Z){try{de.push(typeof Z=="string"?Z:Z.toString(this._config.encoding)),we&&(we=!1,this._checkIsFinished(),this.parseChunk(de.shift()))}catch(Ie){this._streamError(Ie)}},this),this._streamError=se(function(Z){this._streamCleanUp(),this._sendError(Z)},this),this._streamEnd=se(function(){this._streamCleanUp(),J=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(K){var de,we,J,Z,Ie=Math.pow(2,53),be=-Ie,He=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Fe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ve=this,_e=0,ze=0,Ne=!1,st=!1,ie=[],le={data:[],errors:[],meta:{}};function pe(et){return K.skipEmptyLines==="greedy"?et.join("").trim()==="":et.length===1&&et[0].length===0}function fe(){if(le&&J&&(Ke("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),J=!1),K.skipEmptyLines&&(le.data=le.data.filter(function(De){return!pe(De)})),Qe()){let De=function(Mt,ir){oe(K.transformHeader)&&(Mt=K.transformHeader(Mt,ir)),ie.push(Mt)};if(le)if(Array.isArray(le.data[0])){for(var et=0;Qe()&&et<le.data.length;et++)le.data[et].forEach(De);le.data.splice(0,1)}else le.data.forEach(De)}function tt(De,Mt){for(var ir=K.header?{}:[],Ar=0;Ar<De.length;Ar++){var Ze=Ar,Ue=De[Ar],Ue=((hr,Dt)=>(vt=>(K.dynamicTypingFunction&&K.dynamicTyping[vt]===void 0&&(K.dynamicTyping[vt]=K.dynamicTypingFunction(vt)),(K.dynamicTyping[vt]||K.dynamicTyping)===!0))(hr)?Dt==="true"||Dt==="TRUE"||Dt!=="false"&&Dt!=="FALSE"&&((vt=>{if(He.test(vt)&&(vt=parseFloat(vt),be<vt&&vt<Ie))return 1})(Dt)?parseFloat(Dt):Fe.test(Dt)?new Date(Dt):Dt===""?null:Dt):Dt)(Ze=K.header?Ar>=ie.length?"__parsed_extra":ie[Ar]:Ze,Ue=K.transform?K.transform(Ue,Ze):Ue);Ze==="__parsed_extra"?(ir[Ze]=ir[Ze]||[],ir[Ze].push(Ue)):ir[Ze]=Ue}return K.header&&(Ar>ie.length?Ke("FieldMismatch","TooManyFields","Too many fields: expected "+ie.length+" fields but parsed "+Ar,ze+Mt):Ar<ie.length&&Ke("FieldMismatch","TooFewFields","Too few fields: expected "+ie.length+" fields but parsed "+Ar,ze+Mt)),ir}var bt;le&&(K.header||K.dynamicTyping||K.transform)&&(bt=1,!le.data.length||Array.isArray(le.data[0])?(le.data=le.data.map(tt),bt=le.data.length):le.data=tt(le.data,0),K.header&&le.meta&&(le.meta.fields=ie),ze+=bt)}function Qe(){return K.header&&ie.length===0}function Ke(et,tt,bt,De){et={type:et,code:tt,message:bt},De!==void 0&&(et.row=De),le.errors.push(et)}oe(K.step)&&(Z=K.step,K.step=function(et){le=et,Qe()?fe():(fe(),le.data.length!==0&&(_e+=et.data.length,K.preview&&_e>K.preview?we.abort():(le.data=le.data[0],Z(le,ve))))}),this.parse=function(et,tt,bt){var De=K.quoteChar||'"',De=(K.newline||(K.newline=this.guessLineEndings(et,De)),J=!1,K.delimiter?oe(K.delimiter)&&(K.delimiter=K.delimiter(et),le.meta.delimiter=K.delimiter):((De=((Mt,ir,Ar,Ze,Ue)=>{var hr,Dt,vt,Kt;Ue=Ue||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var rr=0;rr<Ue.length;rr++){for(var nr,Nr=Ue[rr],on=0,Ir=0,cn=0,Sn=(vt=void 0,new F({comments:Ze,delimiter:Nr,newline:ir,preview:10}).parse(Mt)),Ln=0;Ln<Sn.data.length;Ln++)Ar&&pe(Sn.data[Ln])?cn++:(nr=Sn.data[Ln].length,Ir+=nr,vt===void 0?vt=nr:0<nr&&(on+=Math.abs(nr-vt),vt=nr));0<Sn.data.length&&(Ir/=Sn.data.length-cn),(Dt===void 0||on<=Dt)&&(Kt===void 0||Kt<Ir)&&1.99<Ir&&(Dt=on,hr=Nr,Kt=Ir)}return{successful:!!(K.delimiter=hr),bestDelimiter:hr}})(et,K.newline,K.skipEmptyLines,K.comments,K.delimitersToGuess)).successful?K.delimiter=De.bestDelimiter:(J=!0,K.delimiter=m.DefaultDelimiter),le.meta.delimiter=K.delimiter),te(K));return K.preview&&K.header&&De.preview++,de=et,we=new F(De),le=we.parse(de,tt,bt),fe(),Ne?{meta:{paused:!0}}:le||{meta:{paused:!1}}},this.paused=function(){return Ne},this.pause=function(){Ne=!0,we.abort(),de=oe(K.chunk)?"":de.substring(we.getCharIndex())},this.resume=function(){ve.streamer._halted?(Ne=!1,ve.streamer.parseChunk(de,!0)):setTimeout(ve.resume,3)},this.aborted=function(){return st},this.abort=function(){st=!0,we.abort(),le.meta.aborted=!0,oe(K.complete)&&K.complete(le),de=""},this.guessLineEndings=function(Mt,De){Mt=Mt.substring(0,1048576);var De=new RegExp(D(De)+"([^]*?)"+D(De),"gm"),bt=(Mt=Mt.replace(De,"")).split("\r"),De=Mt.split(`
`),Mt=1<De.length&&De[0].length<bt[0].length;if(bt.length===1||Mt)return`
`;for(var ir=0,Ar=0;Ar<bt.length;Ar++)bt[Ar][0]===`
`&&ir++;return ir>=bt.length/2?`\r
`:"\r"}}function D(K){return K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F(K){var de=(K=K||{}).delimiter,we=K.newline,J=K.comments,Z=K.step,Ie=K.preview,be=K.fastMode,He=null,Fe=!1,ve=K.quoteChar==null?'"':K.quoteChar,_e=ve;if(K.escapeChar!==void 0&&(_e=K.escapeChar),(typeof de!="string"||-1<m.BAD_DELIMITERS.indexOf(de))&&(de=","),J===de)throw new Error("Comment character same as delimiter");J===!0?J="#":(typeof J!="string"||-1<m.BAD_DELIMITERS.indexOf(J))&&(J=!1),we!==`
`&&we!=="\r"&&we!==`\r
`&&(we=`
`);var ze=0,Ne=!1;this.parse=function(st,ie,le){if(typeof st!="string")throw new Error("Input must be a string");var pe=st.length,fe=de.length,Qe=we.length,Ke=J.length,et=oe(Z),tt=[],bt=[],De=[],Mt=ze=0;if(!st)return on();if(be||be!==!1&&st.indexOf(ve)===-1){for(var ir=st.split(we),Ar=0;Ar<ir.length;Ar++){if(De=ir[Ar],ze+=De.length,Ar!==ir.length-1)ze+=we.length;else if(le)return on();if(!J||De.substring(0,Ke)!==J){if(et){if(tt=[],Kt(De.split(de)),Ir(),Ne)return on()}else Kt(De.split(de));if(Ie&&Ie<=Ar)return tt=tt.slice(0,Ie),on(!0)}}return on()}for(var Ze=st.indexOf(de,ze),Ue=st.indexOf(we,ze),hr=new RegExp(D(_e)+D(ve),"g"),Dt=st.indexOf(ve,ze);;)if(st[ze]===ve)for(Dt=ze,ze++;;){if((Dt=st.indexOf(ve,Dt+1))===-1)return le||bt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:tt.length,index:ze}),nr();if(Dt===pe-1)return nr(st.substring(ze,Dt).replace(hr,ve));if(ve===_e&&st[Dt+1]===_e)Dt++;else if(ve===_e||Dt===0||st[Dt-1]!==_e){Ze!==-1&&Ze<Dt+1&&(Ze=st.indexOf(de,Dt+1));var vt=rr((Ue=Ue!==-1&&Ue<Dt+1?st.indexOf(we,Dt+1):Ue)===-1?Ze:Math.min(Ze,Ue));if(st.substr(Dt+1+vt,fe)===de){De.push(st.substring(ze,Dt).replace(hr,ve)),st[ze=Dt+1+vt+fe]!==ve&&(Dt=st.indexOf(ve,ze)),Ze=st.indexOf(de,ze),Ue=st.indexOf(we,ze);break}if(vt=rr(Ue),st.substring(Dt+1+vt,Dt+1+vt+Qe)===we){if(De.push(st.substring(ze,Dt).replace(hr,ve)),Nr(Dt+1+vt+Qe),Ze=st.indexOf(de,ze),Dt=st.indexOf(ve,ze),et&&(Ir(),Ne))return on();if(Ie&&tt.length>=Ie)return on(!0);break}bt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:tt.length,index:ze}),Dt++}}else if(J&&De.length===0&&st.substring(ze,ze+Ke)===J){if(Ue===-1)return on();ze=Ue+Qe,Ue=st.indexOf(we,ze),Ze=st.indexOf(de,ze)}else if(Ze!==-1&&(Ze<Ue||Ue===-1))De.push(st.substring(ze,Ze)),ze=Ze+fe,Ze=st.indexOf(de,ze);else{if(Ue===-1)break;if(De.push(st.substring(ze,Ue)),Nr(Ue+Qe),et&&(Ir(),Ne))return on();if(Ie&&tt.length>=Ie)return on(!0)}return nr();function Kt(cn){tt.push(cn),Mt=ze}function rr(cn){var Sn=0;return Sn=cn!==-1&&(cn=st.substring(Dt+1,cn))&&cn.trim()===""?cn.length:Sn}function nr(cn){return le||(cn===void 0&&(cn=st.substring(ze)),De.push(cn),ze=pe,Kt(De),et&&Ir()),on()}function Nr(cn){ze=cn,Kt(De),De=[],Ue=st.indexOf(we,ze)}function on(cn){if(K.header&&!ie&&tt.length&&!Fe){var Sn=tt[0],Ln={},ln=new Set(Sn);let ar=!1;for(let Yt=0;Yt<Sn.length;Yt++){let Gr=Sn[Yt];if(Ln[Gr=oe(K.transformHeader)?K.transformHeader(Gr,Yt):Gr]){let Wr,On=Ln[Gr];for(;Wr=Gr+"_"+On,On++,ln.has(Wr););ln.add(Wr),Sn[Yt]=Wr,Ln[Gr]++,ar=!0,(He=He===null?{}:He)[Wr]=Gr}else Ln[Gr]=1,Sn[Yt]=Gr;ln.add(Gr)}ar&&console.warn("Duplicate headers found and renamed."),Fe=!0}return{data:tt,errors:bt,meta:{delimiter:de,linebreak:we,aborted:Ne,truncated:!!cn,cursor:Mt+(ie||0),renamedHeaders:He}}}function Ir(){Z(on()),tt=[],bt=[]}},this.abort=function(){Ne=!0},this.getCharIndex=function(){return ze}}function R(K){var de=K.data,we=u[de.workerId],J=!1;if(de.error)we.userError(de.error,de.file);else if(de.results&&de.results.data){var Z={abort:function(){J=!0,V(de.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(oe(we.userStep)){for(var Ie=0;Ie<de.results.data.length&&(we.userStep({data:de.results.data[Ie],errors:de.results.errors,meta:de.results.meta},Z),!J);Ie++);delete de.results}else oe(we.userChunk)&&(we.userChunk(de.results,Z,de.file),delete de.results)}de.finished&&!J&&V(de.workerId,de.results)}function V(K,de){var we=u[K];oe(we.userComplete)&&we.userComplete(de),we.terminate(),delete u[K]}function Y(){throw new Error("Not implemented.")}function te(K){if(typeof K!="object"||K===null)return K;var de,we=Array.isArray(K)?[]:{};for(de in K)we[de]=te(K[de]);return we}function se(K,de){return function(){K.apply(de,arguments)}}function oe(K){return typeof K=="function"}return m.parse=function(K,de){var we=(de=de||{}).dynamicTyping||!1;if(oe(we)&&(de.dynamicTypingFunction=we,we={}),de.dynamicTyping=we,de.transform=!!oe(de.transform)&&de.transform,!de.worker||!m.WORKERS_SUPPORTED)return we=null,m.NODE_STREAM_INPUT,typeof K=="string"?(K=(J=>J.charCodeAt(0)!==65279?J:J.slice(1))(K),we=new(de.download?C:S)(de)):K.readable===!0&&oe(K.read)&&oe(K.on)?we=new P(de):(n.File&&K instanceof File||K instanceof Object)&&(we=new B(de)),we.stream(K);(we=(()=>{var J;return!!m.WORKERS_SUPPORTED&&(J=(()=>{var Z=n.URL||n.webkitURL||null,Ie=r.toString();return m.BLOB_URL||(m.BLOB_URL=Z.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Ie,")();"],{type:"text/javascript"})))})(),(J=new n.Worker(J)).onmessage=R,J.id=i++,u[J.id]=J)})()).userStep=de.step,we.userChunk=de.chunk,we.userComplete=de.complete,we.userError=de.error,de.step=oe(de.step),de.chunk=oe(de.chunk),de.complete=oe(de.complete),de.error=oe(de.error),delete de.worker,we.postMessage({input:K,config:de,workerId:we.id})},m.unparse=function(K,de){var we=!1,J=!0,Z=",",Ie=`\r
`,be='"',He=be+be,Fe=!1,ve=null,_e=!1,ze=((()=>{if(typeof de=="object"){if(typeof de.delimiter!="string"||m.BAD_DELIMITERS.filter(function(ie){return de.delimiter.indexOf(ie)!==-1}).length||(Z=de.delimiter),typeof de.quotes!="boolean"&&typeof de.quotes!="function"&&!Array.isArray(de.quotes)||(we=de.quotes),typeof de.skipEmptyLines!="boolean"&&typeof de.skipEmptyLines!="string"||(Fe=de.skipEmptyLines),typeof de.newline=="string"&&(Ie=de.newline),typeof de.quoteChar=="string"&&(be=de.quoteChar),typeof de.header=="boolean"&&(J=de.header),Array.isArray(de.columns)){if(de.columns.length===0)throw new Error("Option columns is empty");ve=de.columns}de.escapeChar!==void 0&&(He=de.escapeChar+be),de.escapeFormulae instanceof RegExp?_e=de.escapeFormulae:typeof de.escapeFormulae=="boolean"&&de.escapeFormulae&&(_e=/^[=+\-@\t\r].*$/)}})(),new RegExp(D(be),"g"));if(typeof K=="string"&&(K=JSON.parse(K)),Array.isArray(K)){if(!K.length||Array.isArray(K[0]))return Ne(null,K,Fe);if(typeof K[0]=="object")return Ne(ve||Object.keys(K[0]),K,Fe)}else if(typeof K=="object")return typeof K.data=="string"&&(K.data=JSON.parse(K.data)),Array.isArray(K.data)&&(K.fields||(K.fields=K.meta&&K.meta.fields||ve),K.fields||(K.fields=Array.isArray(K.data[0])?K.fields:typeof K.data[0]=="object"?Object.keys(K.data[0]):[]),Array.isArray(K.data[0])||typeof K.data[0]=="object"||(K.data=[K.data])),Ne(K.fields||[],K.data||[],Fe);throw new Error("Unable to serialize unrecognized input");function Ne(ie,le,pe){var fe="",Qe=(typeof ie=="string"&&(ie=JSON.parse(ie)),typeof le=="string"&&(le=JSON.parse(le)),Array.isArray(ie)&&0<ie.length),Ke=!Array.isArray(le[0]);if(Qe&&J){for(var et=0;et<ie.length;et++)0<et&&(fe+=Z),fe+=st(ie[et],et);0<le.length&&(fe+=Ie)}for(var tt=0;tt<le.length;tt++){var bt=(Qe?ie:le[tt]).length,De=!1,Mt=Qe?Object.keys(le[tt]).length===0:le[tt].length===0;if(pe&&!Qe&&(De=pe==="greedy"?le[tt].join("").trim()==="":le[tt].length===1&&le[tt][0].length===0),pe==="greedy"&&Qe){for(var ir=[],Ar=0;Ar<bt;Ar++){var Ze=Ke?ie[Ar]:Ar;ir.push(le[tt][Ze])}De=ir.join("").trim()===""}if(!De){for(var Ue=0;Ue<bt;Ue++){0<Ue&&!Mt&&(fe+=Z);var hr=Qe&&Ke?ie[Ue]:Ue;fe+=st(le[tt][hr],Ue)}tt<le.length-1&&(!pe||0<bt&&!Mt)&&(fe+=Ie)}}return fe}function st(ie,le){var pe,fe;return ie==null?"":ie.constructor===Date?JSON.stringify(ie).slice(1,25):(fe=!1,_e&&typeof ie=="string"&&_e.test(ie)&&(ie="'"+ie,fe=!0),pe=ie.toString().replace(ze,He),(fe=fe||we===!0||typeof we=="function"&&we(ie,le)||Array.isArray(we)&&we[le]||((Qe,Ke)=>{for(var et=0;et<Ke.length;et++)if(-1<Qe.indexOf(Ke[et]))return!0;return!1})(pe,m.BAD_DELIMITERS)||-1<pe.indexOf(Z)||pe.charAt(0)===" "||pe.charAt(pe.length-1)===" ")?be+pe+be:pe)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!o&&!!n.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=F,m.ParserHandle=j,m.NetworkStreamer=C,m.FileStreamer=B,m.StringStreamer=S,m.ReadableStreamStreamer=P,n.jQuery&&((s=n.jQuery).fn.parse=function(K){var de=K.config||{},we=[];return this.each(function(Ie){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var be=0;be<this.files.length;be++)we.push({file:this.files[be],inputElem:this,instanceConfig:s.extend({},de)})}),J(),this;function J(){if(we.length===0)oe(K.complete)&&K.complete();else{var Ie,be,He,Fe,ve=we[0];if(oe(K.before)){var _e=K.before(ve.file,ve.inputElem);if(typeof _e=="object"){if(_e.action==="abort")return Ie="AbortError",be=ve.file,He=ve.inputElem,Fe=_e.reason,void(oe(K.error)&&K.error({name:Ie},be,He,Fe));if(_e.action==="skip")return void Z();typeof _e.config=="object"&&(ve.instanceConfig=s.extend(ve.instanceConfig,_e.config))}else if(_e==="skip")return void Z()}var ze=ve.instanceConfig.complete;ve.instanceConfig.complete=function(Ne){oe(ze)&&ze(Ne,ve.file,ve.inputElem),Z()},m.parse(ve.file,ve.instanceConfig)}}function Z(){we.splice(0,1),J()}}),c&&(n.onmessage=function(K){K=K.data,m.WORKER_ID===void 0&&K&&(m.WORKER_ID=K.workerId),typeof K.input=="string"?n.postMessage({workerId:m.WORKER_ID,results:m.parse(K.input,K.config),finished:!0}):(n.File&&K.input instanceof File||K.input instanceof Object)&&(K=m.parse(K.input,K.config))&&n.postMessage({workerId:m.WORKER_ID,results:K,finished:!0})}),(C.prototype=Object.create(g.prototype)).constructor=C,(B.prototype=Object.create(g.prototype)).constructor=B,(S.prototype=Object.create(S.prototype)).constructor=S,(P.prototype=Object.create(g.prototype)).constructor=P,m})})(BK);var E4e=BK.exports;const T4e=Bp(E4e),L4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState({name:"",subcounty:"",district_id:"",parishe:"",village:"",farmergroup_id:"",geolocation:"",phonenumber1:"",phonenumber2:"",gender:"",cin:""}),[c,u]=Ae.useState(null),[i,m]=Ae.useState(1),[g,C]=Ae.useState(1),[B,S]=Ae.useState([]),[P,j]=Ae.useState([]),[D,F]=Ae.useState(!1),[R,V]=Ae.useState(""),[Y,te]=Ae.useState(null);Ae.useEffect(()=>{K(i),de(),we(),ve()},[i]);const se=_e=>{te(_e.target.files[0])},oe=async()=>{if(!Y){Ti.fire("Error!","Please select a CSV file.","error");return}T4e.parse(Y,{header:!0,skipEmptyLines:!0,complete:async _e=>{var ze,Ne;if(console.log(_e.data),_e.errors.length>0){Ti.fire("Error!","Invalid CSV format.","error");return}try{await Tr.post("/api/farm/bulk_create",_e.data),Ti.fire("Success!","Farmers uploaded successfully.","success"),K(i)}catch(st){console.error("Error uploading farmers:",st);const ie=((Ne=(ze=st.response)==null?void 0:ze.data)==null?void 0:Ne.message)||"An error occurred while uploading farmers.";Ti.fire("Error!",ie,"error")}}})},K=async _e=>{try{const ze=await Tr.get(`/api/farm/?page=${_e}`);e(ze.data.farms),C(ze.data.total_pages)}catch(ze){console.error("Error fetching farms:",ze),V("Error fetching farms.")}},de=async()=>{try{const _e=await Tr.get("/api/district/");S(_e.data.districts)}catch(_e){console.error("Error fetching districts:",_e),V("Error fetching districts.")}},we=async()=>{try{const _e=await Tr.get("/api/farmergroup/");j(_e.data)}catch(_e){console.error("Error fetching farmer groups:",_e),V("Error fetching farmer groups.")}},J=_e=>{o({...s,[_e.target.name]:_e.target.value})},Z=async _e=>{_e.preventDefault();try{c?await Tr.post(`/api/farm/${c}/update`,s):await Tr.post("/api/farm/create",s),K(i),He(),F(!1),Ti.fire("Success!","Farm has been saved.","success")}catch(ze){console.error("Error saving farm:",ze),Ti.fire("Error!","An error occurred while saving the farm.","error")}},Ie=_e=>{o({name:_e.name,subcounty:_e.subcounty,parishe:_e.parishe,village:_e.village,district_id:_e.district_id,farmergroup_id:_e.farmergroup_id,geolocation:_e.geolocation,phonenumber1:_e.phonenumber1,phonenumber2:_e.phonenumber2,gender:_e.gender,cin:_e.cin}),u(_e.id),F(!0)},be=async _e=>{if((await Ti.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await Tr.post(`/api/farm/${_e}/delete`),Ti.fire("Deleted!","Farm has been deleted.","success"),K(i)}catch(Ne){console.error("Error deleting farm:",Ne),V("An error occurred while deleting the farm.")}},He=()=>{o({name:"",subcounty:"",district_id:"",parishe:"",village:"",farmergroup_id:"",geolocation:"",phonenumber:"",phonenumber2:"",gender:"",cin:""}),u(null)},Fe=_e=>{_e>0&&_e<=g&&m(_e)},ve=async()=>{try{const _e=await Tr.get("/api/pays/");n(_e.data.pays)}catch(_e){console.error("Error fetching country data:",_e)}};return p.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg",children:[p.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Farm Management"}),R&&p.jsx("p",{className:"text-red-500",children:R}),p.jsxs("div",{className:"mb-6 flex flex-wrap gap-3",children:[p.jsxs(Po,{to:"/mapviewall",state:{owner_type:"farmer"},className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"View All Farms"]}),p.jsxs("button",{onClick:()=>F(!0),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Farm"]}),p.jsx(Po,{to:"/stats-certificate",state:{certificateType:"all"},className:"bg-blue-500 text-white px-3 py-2 rounded",children:"All"}),p.jsx(Po,{to:"/stats-certificate",state:{certificateType:"compliant"},className:"bg-green-500 text-white px-3 py-2 rounded",children:"Compliant"}),p.jsx(Po,{to:"/stats-certificate",state:{certificateType:"likely_compliant"},className:"bg-yellow-500 text-white px-3 py-2 rounded",children:"Likely"}),p.jsx(Po,{to:"/stats-certificate",state:{certificateType:"not_compliant"},className:"bg-red-500 text-white px-3 py-2 rounded",children:"Not Compliant"})]}),p.jsxs("div",{className:"mb-4 flex items-center gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[p.jsx("input",{type:"file",accept:".csv",onChange:se,className:"flex-1 border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),p.jsxs("button",{onClick:oe,className:"bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600 transition duration-300 flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload CSV"]})]}),D&&p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 overflow-y-auto",children:p.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-4xl my-8",children:[p.jsx("h3",{className:"text-2xl font-bold mb-6 text-green-600",children:c?"Update Farm":"Create Farm"}),p.jsxs("form",{onSubmit:Z,className:"grid grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"name",className:"block text-gray-600 font-medium mb-2",children:"Farm Name"}),p.jsx("input",{id:"name",type:"text",name:"name",placeholder:"Enter Farm Name",value:s.name,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"subcounty",className:"block text-gray-600 font-medium mb-2",children:"Destination Country"}),p.jsxs("select",{name:"subcounty",value:s.subcounty,onChange:J,className:"w-full p-2 border border-green-400 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[p.jsx("option",{value:"",children:"Select Country"}),r.map(_e=>p.jsxs("option",{value:_e.nom_en_gb,children:[_e.nom_en_gb," / ",_e.nom_fr_fr]},_e.nom_en_gb))]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"parishe",className:"block text-gray-600 font-medium mb-2",children:"Parish"}),p.jsx("input",{id:"parishe",type:"text",name:"parishe",placeholder:"Enter Parish",value:s.parishe,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"district_id",className:"block text-gray-600 font-medium mb-2",children:"District"}),p.jsxs("select",{id:"district_id",name:"district_id",value:s.district_id,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",children:[p.jsx("option",{value:"",children:"Select District"}),B.map(_e=>p.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"geolocation",className:"block text-gray-600 font-medium mb-2",children:"Geolocation (lat, long)"}),p.jsx("input",{id:"geolocation",type:"text",name:"geolocation",placeholder:"Enter Geolocation",value:s.geolocation,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"farmergroup_id",className:"block text-gray-600 font-medium mb-2",children:"Farmer Group"}),p.jsxs("select",{id:"farmergroup_id",name:"farmergroup_id",value:s.farmergroup_id,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[p.jsx("option",{value:"",children:"Select Farmer Group"}),P.map(_e=>p.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"village",className:"block text-gray-600 font-medium mb-2",children:"Village"}),p.jsx("input",{id:"village",type:"text",name:"village",placeholder:"Enter Village",value:s.village,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"phonenumber1",className:"block text-gray-600 font-medium mb-2",children:"Phone Number 1"}),p.jsx("input",{id:"phonenumber1",type:"text",name:"phonenumber1",placeholder:"Enter Phone Number 1",value:s.phonenumber1,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"phonenumber2",className:"block text-gray-600 font-medium mb-2",children:"Phone Number 2"}),p.jsx("input",{id:"phonenumber2",type:"text",name:"phonenumber2",placeholder:"Enter Phone Number 2",value:s.phonenumber2,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"gender",className:"block text-gray-600 font-medium mb-2",children:"Gender"}),p.jsxs("select",{id:"gender",name:"gender",value:s.gender,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",children:[p.jsx("option",{value:"",children:"Select Gender"}),p.jsx("option",{value:"Male",children:"Male"}),p.jsx("option",{value:"Female",children:"Female"})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{htmlFor:"cin",className:"block text-gray-600 font-medium mb-2",children:"National ID"}),p.jsx("input",{id:"cin",type:"text",name:"cin",placeholder:"Enter National ID",value:s.cin,onChange:J,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),p.jsxs("div",{className:"col-span-2 flex justify-between mt-6",children:[p.jsx("button",{type:"submit",className:"bg-green-500 text-white py-2 px-6 rounded hover:bg-green-600 transition duration-300",children:c?"Update Farm":"Create Farm"}),p.jsx("button",{type:"button",onClick:()=>{He(),F(!1)},className:"bg-red-500 text-white py-2 px-6 rounded hover:bg-red-600 transition duration-300",children:"Cancel"})]})]})]})}),p.jsx("ul",{className:"space-y-4 mt-6",children:t.map(_e=>p.jsx("li",{className:"border border-gray-200 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("strong",{className:"text-lg font-semibold text-green-600",children:_e.name}),p.jsx("p",{className:"text-gray-600",children:_e.subcounty})]}),p.jsxs("div",{className:"flex gap-2 flex-wrap",children:[p.jsx("button",{onClick:()=>Ie(_e),className:"bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-600 transition duration-300",children:"Edit"}),p.jsx("button",{onClick:()=>be(_e.id),className:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600 transition duration-300",children:"Delete"}),p.jsx(Po,{to:"/mapview",state:{owner_id:_e.id,owner_type:"farmer",geolocation:_e.geolocation},className:"bg-blue-200 text-blue-800 py-1 px-3 rounded hover:bg-blue-300 transition duration-300",children:"View"}),p.jsx(Po,{to:"/farmdatamanager",state:{farmId:_e.id},className:"bg-green-200 text-green-800 py-1 px-3 rounded hover:bg-green-300 transition duration-300",children:"Add FD"}),p.jsx(Po,{to:"/mapbox",state:{owner_id:_e.id,owner_type:"farmer",geolocation:_e.geolocation},className:"bg-purple-200 text-purple-800 py-1 px-3 rounded hover:bg-purple-300 transition duration-300",children:"Create Maps"}),p.jsx(Po,{to:"/reportfarmer",state:{farmId:_e.id},className:"bg-red-200 text-red-800 py-1 px-3 rounded hover:bg-red-300 transition duration-300",children:"Farmer Report"}),p.jsx(Po,{to:"/reportcarbon",state:{farmId:_e.id},className:"bg-red-200 text-red-800 py-1 px-3 rounded hover:bg-red-300 transition duration-300",children:"Carbon Report"})]})]})},_e.id))}),p.jsxs("div",{className:"flex justify-between mt-4",children:[p.jsx("button",{onClick:()=>Fe(i-1),disabled:i===1,className:"bg-gray-300 p-2 rounded disabled:opacity-50 hover:bg-gray-400 transition-colors",children:"Previous"}),p.jsxs("span",{className:"flex items-center",children:["Page ",i," of ",g]}),p.jsx("button",{onClick:()=>Fe(i+1),disabled:i===g,className:"bg-gray-300 p-2 rounded disabled:opacity-50 hover:bg-gray-400 transition-colors",children:"Next"})]})]})},I4e=()=>{var de;const e=((de=vu().state)==null?void 0:de.farmId)||"WAK0001",[r,n]=Ae.useState([]),[s,o]=Ae.useState([]),[c,u]=Ae.useState([]),[i,m]=Ae.useState([]),[g,C]=Ae.useState({farm_id:"",crop_id:"",land_type:"",tilled_land_size:"",planting_date:"",season:"",quality:"",quantity:"",harvest_date:"",expected_yield:"",actual_yield:"",number_of_tree:"",channel_partner:"",destination_country:"",customer_name:"",hs_code:""}),[B,S]=Ae.useState(null);Ae.useEffect(()=>{e&&(C(we=>({...we,farm_id:e})),j(e)),D(),F(),P()},[e]);const P=async()=>{try{const we=await Tr.get("/api/pays/");m(we.data.pays)}catch(we){console.error("Error fetching country data:",we)}},j=async we=>{try{const J=await Tr.get(`/api/farmdata/?farm_id=${we}`);n(J.data.farmdata_list)}catch(J){console.error("Error fetching farm data:",J)}},D=async()=>{try{const we=await Tr.get("/api/farm/all");o(we.data.farms)}catch(we){console.error("Error fetching farms list:",we)}},F=async()=>{try{const we=await Tr.get("/api/crop/");u(we.data.crops)}catch(we){console.error("Error fetching crops list:",we)}},R=we=>{const{name:J,value:Z}=we.target;C({...g,[J]:Z})},V=we=>{C({...g,farm_id:we.target.value})},Y=we=>{C({...g,crop_id:we.target.value})},te=we=>{C({...g,destination_country:we.target.value})},se=async we=>{we.preventDefault();try{B?(await Tr.put(`/api/farmdata/${B}/edit`,g),Ti.fire("Success","Farm Data updated successfully!","success")):(await Tr.post("/api/farmdata/create",g),Ti.fire("Success","Farm Data created successfully!","success")),j(e),C({farm_id:e,crop_id:"",land_type:"",tilled_land_size:"",planting_date:"",season:"",quality:"",quantity:"",harvest_date:"",expected_yield:"",actual_yield:"",channel_partner:"",destination_country:"",customer_name:"",number_of_tree:"",hs_code:""}),S(null)}catch(J){console.error("Error submitting farm data:",J),Ti.fire("Error","Failed to submit farm data.","error")}},oe=we=>{C(we),S(we.id)},K=async we=>{if((await Ti.fire({title:"Are you sure?",text:"You wont be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await Tr.delete(`/api/farmdata/${we}/delete`),Ti.fire("Deleted!","Farm data has been deleted.","success"),j(e)}catch(Z){console.error("Error deleting farm:",Z),Ti.fire("Error","Failed to delete farm data.","error")}};return p.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Farm Data Manager"}),p.jsxs("form",{onSubmit:se,className:"space-y-4",children:[!e&&p.jsxs("div",{children:[p.jsx("label",{htmlFor:"farm_id",className:"block mb-2 text-sm font-medium",children:"Farm ID:"}),p.jsxs("select",{name:"farm_id",value:g.farm_id,onChange:V,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[p.jsx("option",{value:"",children:"Select a Farm"}),s.map(we=>p.jsx("option",{value:we.id,children:we.name},we.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),p.jsxs("select",{name:"crop_id",value:g.crop_id,onChange:Y,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[p.jsx("option",{value:"",children:"Select a Crop"}),c.map(we=>p.jsx("option",{value:we.id,children:we.name},we.id))]})]}),["land_type","season","quality","quantity","channel_partner","customer_name"].map(we=>p.jsx("div",{children:p.jsx("input",{type:"text",name:we,value:g[we],onChange:R,placeholder:we.replace("_"," ").replace(/\b\w/g,J=>J.toUpperCase()),className:"w-full p-2 border rounded-md shadow-sm"})},we)),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"destination_country",children:"Destination Country:"}),p.jsxs("select",{name:"destination_country",value:g.destination_country,onChange:te,className:"w-full p-2 border rounded-md shadow-sm",children:[p.jsx("option",{value:"",children:"Select Country"}),i.map(we=>p.jsxs("option",{value:we.nom_en_gb,children:[we.nom_en_gb," / ",we.nom_fr_fr]},we.nom_en_gb))]})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("input",{type:"text",name:"tilled_land_size",value:g.tilled_land_size,placeholder:"Tilled Land Size",onChange:R,className:"w-full p-2 border rounded-md shadow-sm"}),p.jsx("input",{type:"number",name:"number_of_tree",value:g.number_of_tree,placeholder:"Number of Trees",onChange:R,className:"w-full p-2 border rounded-md shadow-sm"})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("input",{type:"date",name:"planting_date",value:g.planting_date,onChange:R,className:"w-full p-2 border rounded-md shadow-sm"}),p.jsx("input",{type:"date",name:"harvest_date",value:g.harvest_date,onChange:R,className:"w-full p-2 border rounded-md shadow-sm"})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("input",{type:"number",name:"expected_yield",value:g.expected_yield,onChange:R,placeholder:"Expected Yield",className:"w-full p-2 border rounded-md shadow-sm"}),p.jsx("input",{type:"number",name:"actual_yield",value:g.actual_yield,onChange:R,placeholder:"Actual Yield",className:"w-full p-2 border rounded-md shadow-sm"})]}),p.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600",children:B?"Update Farm Data":"Create Farm Data"})]}),p.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Farm Data List"}),p.jsx("div",{className:"overflow-x-auto mt-4",children:p.jsxs("table",{className:"min-w-full text-left text-sm text-gray-500",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-2",children:"Farm ID"}),p.jsx("th",{className:"px-4 py-2",children:"Crop ID"}),p.jsx("th",{className:"px-4 py-2",children:"Land Type"}),p.jsx("th",{className:"px-4 py-2",children:"Tilled Land Size"}),p.jsx("th",{className:"px-4 py-2",children:"Planting Date"}),p.jsx("th",{className:"px-4 py-2",children:"Harvest Date"}),p.jsx("th",{className:"px-4 py-2",children:"Quality"}),p.jsx("th",{className:"px-4 py-2",children:"Quantity"}),p.jsx("th",{className:"px-4 py-2",children:"Expected Yield"}),p.jsx("th",{className:"px-4 py-2",children:"Actual Yield"}),p.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),p.jsx("tbody",{children:r.map(we=>p.jsxs("tr",{className:"border-t",children:[p.jsx("td",{className:"px-4 py-2",children:we.farm_id}),p.jsx("td",{className:"px-4 py-2",children:we.crop_id}),p.jsx("td",{className:"px-4 py-2",children:we.land_type}),p.jsx("td",{className:"px-4 py-2",children:we.tilled_land_size}),p.jsx("td",{className:"px-4 py-2",children:we.planting_date?new Date(we.planting_date).toLocaleDateString():""}),p.jsx("td",{className:"px-4 py-2",children:we.harvest_date?new Date(we.harvest_date).toLocaleDateString():""}),p.jsx("td",{className:"px-4 py-2",children:we.quality}),p.jsx("td",{className:"px-4 py-2",children:we.quantity}),p.jsx("td",{className:"px-4 py-2",children:we.expected_yield}),p.jsx("td",{className:"px-4 py-2",children:we.actual_yield}),p.jsxs("td",{className:"px-4 py-2",children:[p.jsx("button",{onClick:()=>oe(we),className:"text-blue-500 hover:underline mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>K(we.id),className:"text-red-500 hover:underline",children:"Delete"})]})]},we.id))})]})})]})},N4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState({username:"",email:"",password:"",phonenumber:"",company_name:"",user_type:"",is_admin:!1}),[s,o]=Ae.useState(!1),[c,u]=Ae.useState(null),[i,m]=Ae.useState(!1),g=async()=>{try{const F=await Tr.get("/api/users/");e(F.data)}catch(F){console.error("Error fetching users:",F)}},C=F=>{const{name:R,value:V}=F.target;n(Y=>({...Y,[R]:V}))},B=F=>{n(R=>({...R,is_admin:F.target.checked}))},S=async F=>{F.preventDefault();try{if(s){const R=await Tr.put(`/api/users/${c}/edit`,r);e(t.map(V=>V.id===c?R.data.user:V)),o(!1),u(null)}else await Tr.post("/api/users/create",r);n({username:"",email:"",password:"",phonenumber:"",company_name:"",user_type:"",is_admin:!1}),m(!1),Ti.fire({title:"Success!",text:s?"User updated successfully!":"User created successfully!",icon:"success",confirmButtonText:"OK"}),g()}catch(R){console.error("Error creating/updating user:",R)}},P=async F=>{if((await Ti.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"})).isConfirmed)try{await Tr.delete(`/api/users/${F}/delete`),e(t.filter(V=>V.id!==F)),Ti.fire({title:"Deleted!",text:"User deleted successfully!",icon:"success",confirmButtonText:"OK"})}catch(V){console.error("Error deleting user:",V)}},j=F=>{o(!0),u(F.id),n({username:F.username,email:F.email,password:"",phonenumber:F.phonenumber,company_name:F.company_name||"",user_type:F.user_type,is_admin:F.is_admin}),m(!0)},D=()=>{o(!1),n({username:"",email:"",password:"",phonenumber:"",company_name:"",user_type:"",is_admin:!1}),m(!1)};return Ae.useEffect(()=>{g()},[]),p.jsxs("div",{className:"container mx-auto mt-8 p-6 bg-white shadow-lg rounded-lg",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-blue-600",children:"User Management"}),p.jsx("button",{onClick:()=>m(!0),className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300",children:"Create User"}),i&&p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96 max-h-[90vh] overflow-y-auto",children:[p.jsx("h3",{className:"text-lg font-bold mb-4",children:s?"Edit User":"Create User"}),p.jsxs("form",{onSubmit:S,children:[p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",name:"username",placeholder:"Username",value:r.username,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"email",name:"email",placeholder:"Email",value:r.email,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!s})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",name:"phonenumber",placeholder:"Phone Number",value:r.phonenumber,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",name:"company_name",placeholder:"Company Name",value:r.company_name,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400"})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"text",name:"user_type",placeholder:"User Type",value:r.user_type,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),p.jsxs("label",{className:"flex items-center mb-4",children:[p.jsx("input",{type:"checkbox",name:"is_admin",checked:r.is_admin,onChange:B,className:"mr-2"}),"Admin"]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("button",{type:"button",onClick:D,className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-300",children:s?"Cancel Edit":"Cancel Create"}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300",children:s?"Update User":"Create User"})]})]})]})}),p.jsx("ul",{className:"space-y-4 mt-6",children:t&&t.map(F=>F?p.jsx("li",{className:"border border-gray-200 p-4 rounded-lg shadow-sm",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("strong",{className:"text-lg font-semibold text-blue-600",children:F.username||"Unknown"}),p.jsx("p",{className:"text-sm text-gray-600",children:F.email||"No email provided"}),F.company_name&&p.jsx("p",{className:"text-sm text-gray-500 italic",children:F.company_name})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:()=>j(F),className:"bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-600 transition duration-300",children:"Edit"}),p.jsx("button",{onClick:()=>P(F.id),className:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600 transition duration-300",children:"Delete"})]})]})},F.id):null)})]})},F4e=()=>{const[t,e]=Ae.useState(""),[r,n]=Ae.useState(""),[s,o]=Ae.useState(""),[c,u]=Ae.useState(""),[i,m]=Ae.useState(null),[g,C]=Ae.useState(null),[B,S]=Ae.useState(!1),[P,j]=Ae.useState(!1),D=async R=>{R.preventDefault(),S(!0);try{const V=await Tr.get("/getWeather",{params:{lat:t||"0.358261",lon:r||"32.654738",start:s,end:c}});m(V.data.response)}catch(V){console.error("Error fetching weather data:",V)}finally{S(!1)}},F=async R=>{R.preventDefault(),j(!0);try{const V=await Tr.get("/getSolar",{params:{lat:t||"0.358261",lon:r||"32.654738",start:s,end:c}});C(V.data.response)}catch(V){console.error("Error fetching solar data:",V)}finally{j(!1)}};return p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Weather and Solar Data"}),p.jsxs("form",{className:"mb-6 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-semibold",children:"Latitude"}),p.jsx("input",{type:"text",value:t,onChange:R=>e(R.target.value),placeholder:"Enter latitude",className:"border px-4 py-2 rounded w-full"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-semibold",children:"Longitude"}),p.jsx("input",{type:"text",value:r,onChange:R=>n(R.target.value),placeholder:"Enter longitude",className:"border px-4 py-2 rounded w-full"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-semibold",children:"Start Date"}),p.jsx("input",{type:"date",value:s,onChange:R=>o(R.target.value),className:"border px-4 py-2 rounded w-full"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-semibold",children:"End Date"}),p.jsx("input",{type:"date",value:c,onChange:R=>u(R.target.value),className:"border px-4 py-2 rounded w-full"})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("button",{onClick:D,className:"bg-blue-500 text-white px-4 py-2 rounded",disabled:B,children:B?"Loading Weather...":"Get Weather Data"}),p.jsx("button",{onClick:F,className:"bg-yellow-500 text-white px-4 py-2 rounded",disabled:P,children:P?"Loading Solar...":"Get Solar Data"})]})]}),i&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Weather Data:"}),p.jsx("pre",{className:"bg-gray-100 p-4 rounded",children:JSON.stringify(i,null,2)})]}),g&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Solar Data:"}),p.jsx("pre",{className:"bg-gray-100 p-4 rounded",children:JSON.stringify(g,null,2)})]})]})},P4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState({name:"",weight:"",category_id:""}),[c,u]=Ae.useState(null);Ae.useEffect(()=>{i(),m()},[]);const i=async()=>{try{const P=await Tr.get("/api/crop/");e(P.data.crops)}catch(P){console.error("Error fetching crops:",P)}},m=async()=>{try{const P=await Tr.get("/api/crop/");n(P.data.categories)}catch(P){console.error("Error fetching categories:",P)}},g=P=>{const{name:j,value:D}=P.target;o(F=>({...F,[j]:D}))},C=async P=>{P.preventDefault();try{c?await Tr.put(`/api/crop/${c}/edit`,s):await Tr.post("/api/crop/create",s),o({name:"",weight:"",category_id:""}),u(null),i()}catch(j){console.error("Error saving crop:",j)}},B=P=>{o({name:P.name,weight:P.weight,category_id:P.category_id}),u(P.id)},S=async P=>{try{await Tr.delete(`/api/crop/${P}/delete`),i()}catch(j){console.error("Error deleting crop:",j)}};return p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl mb-4",children:"Crop Manager"}),p.jsxs("form",{onSubmit:C,className:"mb-4",children:[p.jsx("input",{type:"text",name:"name",value:s.name,onChange:g,placeholder:"Crop Name",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"number",name:"weight",value:s.weight,onChange:g,placeholder:"Weight",className:"border p-2 rounded mr-2",required:!0}),p.jsxs("select",{name:"category_id",value:s.category_id,onChange:g,className:"border p-2 rounded mr-2",required:!0,children:[p.jsx("option",{value:"",children:"Select Category"}),r.map(P=>p.jsx("option",{value:P.id,children:P.name},P.id))]}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:c?"Update Crop":"Add Crop"})]}),p.jsx("ul",{children:t.map(P=>p.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[p.jsxs("span",{children:[P.name," (Weight: ",P.weight,")"]}),p.jsxs("div",{children:[p.jsx("button",{onClick:()=>B(P),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>S(P.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},P.id))})]})},j4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState({crop_id:"",farm_id:"",irrigation_date:"",water_applied:"",method:""}),[s,o]=Ae.useState(null),[c,u]=Ae.useState([]);Ae.useEffect(()=>{i(),g(),m()},[]);const i=async()=>{try{const D=await Tr.get("/api/irrigation/");e(D.data.irrigation)}catch(D){console.error("Error fetching irrigation records:",D)}},m=async()=>{try{const D=await Tr.get("/api/crop/");u(D.data.crops)}catch(D){console.error("Error fetching crops list:",D)}},g=async()=>{try{const D=await Tr.get("/api/crops/");u(D.data.crops)}catch(D){console.error("Error fetching crops:",D)}},C=D=>{n({...r,crop_id:D.target.value})},B=D=>{const{name:F,value:R}=D.target;n(V=>({...V,[F]:R}))},S=async D=>{D.preventDefault();try{s?await Tr.put(`/api/irrigation/${s}/edit`,r):await Tr.post("/api/irrigation/create",r),n({crop_id:"",farm_id:"",irrigation_date:"",water_applied:"",method:""}),o(null),i()}catch(F){console.error("Error saving irrigation record:",F)}},P=D=>{n({crop_id:D.crop_id,farm_id:D.farm_id,irrigation_date:D.irrigation_date,water_applied:D.water_applied,method:D.method}),o(D.id)},j=async D=>{try{await Tr.delete(`/api/irrigation/${D}/delete`),i()}catch(F){console.error("Error deleting irrigation record:",F)}};return p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl mb-4",children:"Irrigation Manager"}),p.jsxs("form",{onSubmit:S,className:"mb-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),p.jsxs("select",{name:"crop_id",value:r.crop_id,onChange:C,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[p.jsx("option",{value:"",children:"Select a Crop"}),c.map(D=>p.jsx("option",{value:D.id,children:D.name},D.id))]})]}),p.jsx("input",{type:"text",name:"farm_id",value:r.farm_id,onChange:B,placeholder:"Farm ID",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"date",name:"irrigation_date",value:r.irrigation_date,onChange:B,className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"number",name:"water_applied",value:r.water_applied,onChange:B,placeholder:"Water Applied (L)",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"text",name:"method",value:r.method,onChange:B,placeholder:"Irrigation Method",className:"border p-2 rounded mr-2",required:!0}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:s?"Update Irrigation":"Add Irrigation"})]}),p.jsx("ul",{children:t.map(D=>p.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[p.jsxs("span",{children:["Crop ID: ",D.crop_id," | Farm ID: ",D.farm_id," | Water Applied: ",D.water_applied,"L"]}),p.jsxs("div",{children:[p.jsx("button",{onClick:()=>P(D),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>j(D.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},D.id))})]})},M4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState({crop_id:"",stage:"",kc_value:""}),[s,o]=Ae.useState(null),[c,u]=Ae.useState([]);Ae.useEffect(()=>{i(),m(),g()},[]);const i=async()=>{try{const D=await Tr.get("/api/kc/");e(D.data.coefficients)}catch(D){console.error("Error fetching crop coefficients:",D)}},m=async()=>{try{const D=await Tr.get("/api/crops/");u(D.data.crops)}catch(D){console.error("Error fetching crops:",D)}},g=async()=>{try{const D=await Tr.get("/api/crop/");u(D.data.crops)}catch(D){console.error("Error fetching crops list:",D)}},C=D=>{n({...r,crop_id:D.target.value})},B=D=>{const{name:F,value:R}=D.target;n(V=>({...V,[F]:R}))},S=async D=>{D.preventDefault();try{s?await Tr.put(`/api/kc/${s}/edit`,r):await Tr.post("/api/kc/create",r),n({crop_id:"",stage:"",kc_value:""}),o(null),i()}catch(F){console.error("Error saving crop coefficient:",F)}},P=D=>{n({crop_id:D.crop_id,stage:D.stage,kc_value:D.kc_value}),o(D.id)},j=async D=>{try{await Tr.delete(`/api/kc/${D}/delete`),i()}catch(F){console.error("Error deleting crop coefficient:",F)}};return p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl mb-4",children:"Crop Coefficient Manager"}),p.jsxs("form",{onSubmit:S,className:"mb-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),p.jsxs("select",{name:"crop_id",value:r.crop_id,onChange:C,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[p.jsx("option",{value:"",children:"Select a Crop"}),c.map(D=>p.jsx("option",{value:D.id,children:D.name},D.id))]})]}),p.jsx("input",{type:"text",name:"stage",value:r.stage,onChange:B,placeholder:"Stage",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"number",name:"kc_value",value:r.kc_value,onChange:B,placeholder:"Kc Value",className:"border p-2 rounded mr-2",required:!0}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:s?"Update Coefficient":"Add Coefficient"})]}),p.jsx("ul",{children:t.map(D=>p.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[p.jsxs("span",{children:["Crop ID: ",D.crop_id," | Stage: ",D.stage," | Kc Value: ",D.kc_value]}),p.jsxs("div",{children:[p.jsx("button",{onClick:()=>P(D),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>j(D.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},D.id))})]})},k4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState({crop_id:"",grade_value:"",description:""}),[s,o]=Ae.useState(null),[c,u]=Ae.useState([]);Ae.useEffect(()=>{i(),m(),g()},[]);const i=async()=>{try{const D=await Tr.get("/api/grade/");e(D.data.grades)}catch(D){console.error("Error fetching grades:",D)}},m=async()=>{try{const D=await Tr.get("/api/crop/");u(D.data.crops)}catch(D){console.error("Error fetching crops list:",D)}},g=async()=>{try{const D=await Tr.get("/api/crops/");u(D.data.crops)}catch(D){console.error("Error fetching crops:",D)}},C=D=>{n({...r,crop_id:D.target.value})},B=D=>{const{name:F,value:R}=D.target;n(V=>({...V,[F]:R}))},S=async D=>{D.preventDefault();try{s?await Tr.put(`/api/grade/${s}/edit`,r):await Tr.post("/api/grade/create",r),n({crop_id:"",grade_value:"",description:""}),o(null),i()}catch(F){console.error("Error saving grade:",F)}},P=D=>{n({crop_id:D.crop_id,grade_value:D.grade_value,description:D.description}),o(D.id)},j=async D=>{try{await Tr.delete(`/api/grade/${D}/delete`),i()}catch(F){console.error("Error deleting grade:",F)}};return p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl mb-4",children:"Grade Manager"}),p.jsxs("form",{onSubmit:S,className:"mb-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),p.jsxs("select",{name:"crop_id",value:r.crop_id,onChange:C,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[p.jsx("option",{value:"",children:"Select a Crop"}),c.map(D=>p.jsx("option",{value:D.id,children:D.name},D.id))]})]}),p.jsx("input",{type:"text",name:"grade_value",value:r.grade_value,onChange:B,placeholder:"Grade Value",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"text",name:"description",value:r.description,onChange:B,placeholder:"Description",className:"border p-2 rounded mr-2"}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:s?"Update Grade":"Add Grade"})]}),p.jsx("ul",{children:t.map(D=>p.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[p.jsxs("span",{children:["Crop ID: ",D.crop_id," | Grade Value: ",D.grade_value," | Description: ",D.description]}),p.jsxs("div",{children:[p.jsx("button",{onClick:()=>P(D),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>j(D.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},D.id))})]})},G_={_origin:"https://api.emailjs.com"},D4e=(t,e="https://api.emailjs.com")=>{G_._userID=t,G_._origin=e},EK=(t,e,r)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class az{constructor(e){this.status=e.status,this.text=e.responseText}}const TK=(t,e,r={})=>new Promise((n,s)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:c})=>{const u=new az(c);u.status===200||u.text==="OK"?n(u):s(u)}),o.addEventListener("error",({target:c})=>{s(new az(c))}),o.open("POST",G_._origin+t,!0),Object.keys(r).forEach(c=>{o.setRequestHeader(c,r[c])}),o.send(e)}),O4e=(t,e,r,n)=>{const s=n||G_._userID;return EK(s,t,e),TK("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:t,template_id:e,template_params:r}),{"Content-type":"application/json"})},R4e=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},U4e=(t,e,r,n)=>{const s=n||G_._userID,o=R4e(r);EK(s,t,e);const c=new FormData(o);return c.append("lib_version","3.2.0"),c.append("service_id",t),c.append("template_id",e),c.append("user_id",s),TK("/api/v1.0/email/send-form",c)},kF={init:D4e,send:O4e,sendForm:U4e},z4e=()=>{const[t,e]=Ae.useState({phone:"",email:"",message:""}),r=s=>{e({...t,[s.target.name]:s.target.value})},n=s=>{s.preventDefault(),kF.send("service_3xq2aks","template_waiira7",{phone:t.phone,email:t.email,message:t.message},"Pt5g2EHR_AEyDF5NC").then(o=>{console.log("Email successfully sent!",o.text),Ti.fire({icon:"success",title:"Email Sent!",text:"Your message has been sent successfully.",confirmButtonText:"OK"})}).catch(o=>{console.error("Failed to send email. Error: ",o),Ti.fire({icon:"error",title:"Error!",text:`Failed to send email: ${o.text||"Unknown error"}`,confirmButtonText:"OK"})}),e({phone:"",email:"",message:""})};return p.jsx("section",{className:"bg-gradient-to-r from-teal-50 via-green-50 to-yellow-50 min-h-screen flex justify-center items-center p-6 font-sans",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-6xl font-extrabold mb-8 text-teal-800",children:"Contact Us"}),p.jsx("p",{className:"text-gray-700 text-xl mb-4",children:"We'd love to hear from you! Reach out via phone or email."})]}),p.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center space-y-6 md:space-y-0 md:space-x-12 my-10",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(t4,{className:"text-green-600 text-3xl"}),p.jsx("a",{href:"tel:+256783130358",className:"text-xl text-gray-700 font-semibold hover:underline",children:"+256783130358"})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(f1,{className:"text-blue-600 text-3xl"}),p.jsx("a",{href:"mailto:nkusu@agriyields.com",className:"text-xl text-gray-700 font-semibold hover:underline",children:"nkusu@agriyields.com"})]})]}),p.jsx("div",{className:"mt-12 flex justify-center",children:p.jsx("div",{className:"w-full max-w-lg",children:p.jsxs("form",{className:"bg-white shadow-2xl rounded-3xl px-10 pt-8 pb-10 mb-4 transition duration-300 transform hover:scale-105",onSubmit:n,children:[p.jsxs("div",{className:"mb-6",children:[p.jsxs("label",{className:"block text-gray-700 text-sm font-semibold mb-3 flex items-center",htmlFor:"phone",children:[p.jsx(t4,{className:"text-green-500 mr-3"})," Phone Number"]}),p.jsx("input",{className:"shadow appearance-none border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-green-300 transition duration-300",id:"phone",name:"phone",type:"text",placeholder:"Your phone number",value:t.phone,onChange:r,required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("label",{className:"block text-gray-700 text-sm font-semibold mb-3 flex items-center",htmlFor:"email",children:[p.jsx(f1,{className:"text-blue-500 mr-3"})," Email"]}),p.jsx("input",{className:"shadow appearance-none border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300",id:"email",name:"email",type:"email",placeholder:"Your email address",value:t.email,onChange:r,required:!0})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("label",{className:"block text-gray-700 text-sm font-semibold mb-3 flex items-center",htmlFor:"message",children:"Message"}),p.jsx("textarea",{className:"shadow appearance-none border border-gray-300 rounded-xl w-full py-4 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300",id:"message",name:"message",rows:"5",placeholder:"Write your message here...",value:t.message,onChange:r,required:!0})]}),p.jsx("div",{className:"flex items-center justify-center",children:p.jsx("button",{className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 transform hover:scale-110",type:"submit",children:"Send Message"})})]})})})]})})},Q4e=()=>{const[t,e]=Ae.useState({phone:"",message:"",organization:"",company:""}),r=s=>{e({...t,[s.target.name]:s.target.value})},n=s=>{s.preventDefault(),kF.send("service_3xq2aks","template_irqm3l1",{phone:t.phone,message:t.message,organization:t.organization,company:t.company},"Pt5g2EHR_AEyDF5NC").then(o=>{Ti.fire({icon:"success",title:"Sign Up Successful!",text:"Your information has been submitted and a notification email was sent.",confirmButtonText:"OK"}),e({phone:"",message:"",organization:"",company:""})}).catch(o=>{console.error("Error sending email:",o),Ti.fire({icon:"error",title:"Error!",text:"Could not send the email, please try again later.",confirmButtonText:"OK"})})};return p.jsx("section",{className:"bg-gradient-to-r from-teal-50 via-green-50 to-yellow-50 min-h-screen flex justify-center items-center p-6 font-sans",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-10",children:[p.jsx("h2",{className:"text-6xl font-extrabold mb-4 text-teal-800",children:"Sign Up"}),p.jsx("p",{className:"text-gray-700 text-xl mb-6",children:"-----------------Join us by filling in your details below!-----------------"})]}),p.jsx("div",{className:"mt-12 flex justify-center",children:p.jsx("div",{className:"w-full max-w-4xl",children:p.jsxs("form",{className:"bg-white shadow-2xl rounded-3xl px-10 pt-8 pb-10 mb-4",onSubmit:n,children:[p.jsxs("div",{className:"flex flex-col space-y-6",children:[p.jsxs("div",{className:"flex flex-col mb-4",children:[p.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-2 flex items-center",htmlFor:"phone",children:[p.jsx(t4,{className:"text-green-500 mr-3"})," Phone Number"]}),p.jsx("input",{className:"shadow-md border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-green-300",id:"phone",name:"phone",type:"text",placeholder:"Your phone number",value:t.phone,onChange:r,required:!0})]}),p.jsxs("div",{className:"flex flex-col mb-4",children:[p.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-2 flex items-center",htmlFor:"organization",children:[p.jsx(kD,{className:"text-blue-500 mr-3"})," Organization"]}),p.jsx("input",{className:"shadow-md border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-blue-300",id:"organization",name:"organization",type:"text",placeholder:"Your organization",value:t.organization,onChange:r,required:!0})]}),p.jsxs("div",{className:"flex flex-col mb-6",children:[p.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-2 flex items-center",htmlFor:"company",children:[p.jsx(kD,{className:"text-purple-500 mr-3"})," Company"]}),p.jsx("input",{className:"shadow-md border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-purple-300",id:"company",name:"company",type:"text",placeholder:"Your company name",value:t.company,onChange:r,required:!0})]}),p.jsxs("div",{className:"flex flex-col mb-8",children:[p.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-3 flex items-center",children:[p.jsx(dne,{className:"text-orange-500 mr-3"})," Message"]}),p.jsx("textarea",{className:"shadow-md border border-gray-300 rounded-xl w-full py-4 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-orange-300",id:"message",name:"message",rows:"5",placeholder:"Write your message here...",value:t.message,onChange:r,required:!0})]})]}),p.jsx("br",{}),p.jsx("div",{className:"flex items-center justify-center",children:p.jsx("button",{className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-10 rounded-full shadow-lg",type:"submit",children:"Sign Up"})})]})})})]})})},H4e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState(""),[s,o]=Ae.useState(null),[c,u]=Ae.useState(!1),[i,m]=Ae.useState("");Ae.useEffect(()=>{g()},[]);const g=async()=>{u(!0);try{const P=await Tr.get("/api/producecategory/");e(P.data.categories),u(!1)}catch{m("Failed to load categories"),u(!1)}},C=async()=>{try{const P=await Tr.post("/api/producecategory/create",{name:r,created_by:"admin"});alert(P.data.msg),n(""),g()}catch{alert("Failed to create category")}},B=async P=>{try{const j=await Tr.put(`/api/producecategory/${P}/edit`,{name:s.name,modified_by:"admin"});alert(j.data.msg),o(null),g()}catch{alert("Failed to update category")}},S=async P=>{if(window.confirm("Are you sure you want to delete this category?"))try{const j=await Tr.delete(`/api/producecategory/${P}/delete`);alert(j.data.msg),g()}catch{alert("Failed to delete category")}};return p.jsxs("div",{children:[p.jsx("h1",{children:"Category Manager"}),p.jsx("div",{children:c?p.jsx("p",{children:"Loading categories..."}):i?p.jsx("p",{children:i}):p.jsx("ul",{children:t.map(P=>p.jsx("li",{children:s&&s.id===P.id?p.jsxs("div",{children:[p.jsx("input",{type:"text",value:s.name,onChange:j=>o({...s,name:j.target.value})}),p.jsx("button",{onClick:()=>B(P.id),children:"Save"}),p.jsx("button",{onClick:()=>o(null),children:"Cancel"})]}):p.jsxs("div",{children:[P.name," (Created on ",new Date(P.date_created).toLocaleDateString(),")",p.jsx("button",{onClick:()=>o(P),children:"Edit"}),p.jsx("button",{onClick:()=>S(P.id),children:"Delete"})]})},P.id))})}),p.jsxs("div",{children:[p.jsx("h2",{children:"Create New Category"}),p.jsx("input",{type:"text",value:r,onChange:P=>n(P.target.value),placeholder:"New category name"}),p.jsx("button",{onClick:C,children:"Create Category"})]})]})};ph.register(fA,pA,xp,Qd,N1,L0,T0);const LK=({temperature:t,humidity:e,precipitation:r})=>{const s={labels:Array.from({length:24},(c,u)=>`${u}:00`),datasets:[{label:"Temperature (C)",data:t.length?t:new Array(24).fill(null),backgroundColor:"rgba(75,192,192,0.5)",borderColor:"rgba(75,192,192,1)",borderWidth:1},{label:"Humidity (%)",data:e.length?e:new Array(24).fill(null),backgroundColor:"rgba(153,102,255,0.5)",borderColor:"rgba(153,102,255,1)",borderWidth:1},{label:"Precipitation (mm)",data:r.length?r:new Array(24).fill(null),backgroundColor:"rgba(255,159,64,0.5)",borderColor:"rgba(255,159,64,1)",borderWidth:1}]},o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Daily Weather Data"}},scales:{x:{title:{display:!0,text:"Hours"}},y:{title:{display:!0,text:"Values"}}}};return p.jsx("div",{className:"relative h-[400px] w-full",children:p.jsx(I_,{data:s,options:o})})},V4e=()=>{const t=Ae.useRef(null),e=Ae.useRef(null),r=Ae.useRef(null),[n,s]=Ae.useState(null),[o,c]=Ae.useState(""),[u,i]=Ae.useState(null),[m,g]=Ae.useState(null),[C,B]=Ae.useState(null),[S,P]=Ae.useState(null),[j,D]=Ae.useState(null),[F,R]=Ae.useState(null),[V,Y]=Ae.useState(null),[te,se]=Ae.useState({temperature:[],humidity:[],precipitation:[]}),[oe,K]=Ae.useState([]),[de,we]=Ae.useState(""),[J,Z]=Ae.useState(null);Ae.useState(""),Ae.useState(0),Ae.useState(0);const[Ie,be]=Ae.useState([]);Ae.useState("");const[He,Fe]=Ae.useState("");let ve=0;const _e=le=>le<1?"No rain expected; manual or irrigation watering may be necessary for your crops.":le>=1&&le<=2?"Light rain expected, providing minimal moisture, which might not meet crop needs.":le>=3&&le<=10?"Moderate rain expected, ideal for maintaining soil moisture and supporting crop growth.":le>=11&&le<=20?"Abundant rain expected, offering favorable conditions for crops sensitive to moisture.":le>=21&&le<=50?"Heavy rain expected, beneficial for crops, but monitor drainage to prevent waterlogging.":"Torrential rain expected, with a risk of flooding that may damage crops. Preventive measures are advised.";Ae.useEffect(()=>{(async()=>{try{const{data:pe}=await Tr.get("/api/farm/all");be(pe.farms||[])}catch(pe){console.error("Error fetching farms:",pe)}})()},[]);const ze=async()=>{try{const le=await Tr.get("/api/crop/");K(le.data.crops)}catch(le){console.error("Error fetching crops list:",le)}},Ne=async()=>{try{const le=await Tr.get(`/api/kc/getbycrop/${de}`);console.log(le.data.kc_value[0].kc_value),Z(le.data.kc_value[0].kc_value)}catch(le){console.error("Error fetching kc value:",le)}},st=(le,pe)=>le===null?null:le*pe;Ae.useEffect(()=>{de&&Ne(),J&&S&&(ve=st(S,J),D(ve))},[de,J,S]),Ae.useEffect(()=>{ze()},[]);const ie=le=>{console.log("Selected crop ID:",le.target.value),we(le.target.value)};return Ae.useEffect(()=>{Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current=new Li.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:[-79.4512,43.6568],zoom:8});const le=Qe=>{const Ke=Qe.match(/^[ ]*(?:Lat: )?(-?\d+\.?\d*)[, ]+(?:Lng: )?(-?\d+\.?\d*)[ ]*$/i);if(!Ke)return null;const et=Number(Ke[1]),tt=Number(Ke[2]);return et<-90||et>90||tt<-180||tt>180?null:[{center:[tt,et],geometry:{type:"Point",coordinates:[tt,et]},place_name:`Lat: ${et}, Lng: ${tt}`,place_type:["coordinate"],properties:{},type:"Feature"}]},pe=new wC({accessToken:Li.accessToken,mapboxgl:Li,placeholder:"Search for places...",localGeocoder:le});e.current.addControl(pe),pe.on("result",async Qe=>{const{place_name:Ke,geometry:et}=Qe.result;c(Ke),s({type:"success",message:`Location found: ${Ke}`}),e.current.flyTo({center:et.coordinates,zoom:15});const tt=et.coordinates[1],bt=et.coordinates[0],De=await fe(tt,bt);i(De.temperature),g(De.humidity),B(De.precipitation),P(De.et0_fao_evapotranspiration),R(De.shortwave_radiation),Y(De.windSpeed1000hPa),se({temperature:De.temperatureHourly,humidity:De.humidityHourly,precipitation:De.precipitationHourly})});const fe=async(Qe,Ke)=>{const et=`https://api.open-meteo.com/v1/forecast?latitude=${Qe}&longitude=${Ke}&hourly=temperature_2m,relative_humidity_2m,precipitation,et0_fao_evapotranspiration,shortwave_radiation,wind_speed_1000hPa`;try{const bt=await(await fetch(et)).json(),De=new Date().toISOString().slice(0,13)+":00",Mt=bt.hourly.time.indexOf(De),ir=Mt!==-1?bt.hourly.temperature_2m[Mt]:null,Ar=Mt!==-1?bt.hourly.relative_humidity_2m[Mt]:null,Ze=Mt!==-1?bt.hourly.precipitation[Mt]:null,Ue=Mt!==-1?bt.hourly.et0_fao_evapotranspiration[Mt]:null,hr=Mt!==-1?bt.hourly.shortwave_radiation[Mt]:null,Dt=Mt!==-1?bt.hourly.wind_speed_1000hPa[Mt]:null,vt=bt.hourly.temperature_2m,Kt=bt.hourly.relative_humidity_2m,rr=bt.hourly.precipitation;return{temperature:ir,humidity:Ar,precipitation:Ze,et0_fao_evapotranspiration:Ue,shortwave_radiation:hr,windSpeed1000hPa:Dt,temperatureHourly:vt,humidityHourly:Kt,precipitationHourly:rr}}catch(tt){return console.error("Failed to fetch weather data:",tt),{temperature:null,humidity:null,precipitation:null,et0_fao_evapotranspiration:null,shortwave_radiation:null,windSpeed1000hPa:null,temperatureHourly:[],humidityHourly:[],precipitationHourly:[]}}};return e.current.on("click",async Qe=>{var tt;const{lng:Ke,lat:et}=Qe.lngLat;try{const bt=`https://api.mapbox.com/geocoding/v5/mapbox.places/${Ke},${et}.json?access_token=${Li.accessToken}`,ir=((tt=(await(await fetch(bt)).json()).features[0])==null?void 0:tt.place_name)||"Unknown location";c(ir);const Ar=await fe(et,Ke);i(Ar.temperature),g(Ar.humidity),B(Ar.precipitation),P(Ar.et0_fao_evapotranspiration),R(Ar.shortwave_radiation),Y(Ar.windSpeed1000hPa),r.current&&r.current.remove(),r.current=new Li.Popup().setLngLat([Ke,et]).setHTML(`<p><strong>Coordinates:</strong></p>
             <p>Lng: ${Ke.toFixed(4)}, Lat: ${et.toFixed(4)}</p>
             <p><strong>City:</strong> ${ir}</p>
             <p><strong>Temperature:</strong> ${Ar.temperature!==null?`${Ar.temperature}C`:"N/A"}</p>
             <p><strong>Humidity:</strong> ${Ar.humidity!==null?`${Ar.humidity}%`:"N/A"}</p>
             <p><strong>Precipitation:</strong> ${Ar.precipitation!==null?`${Ar.precipitation} mm`:"N/A"}</p>
             <p><strong>~</strong> ${Ar.precipitation!==null?`${_e(Ar.precipitation)}`:"N/A"}</p>
             <p><strong>Shortwave Radiation:</strong> ${Ar.shortwave_radiation!==null?`${Ar.shortwave_radiation} W/m`:"N/A"}</p>
             <p><strong>Wind Speed (1000hPa):</strong> ${Ar.windSpeed1000hPa!==null?`${Ar.windSpeed1000hPa} m/s`:"N/A"}</p>`).addTo(e.current)}catch(bt){console.error("Error fetching data or creating popup:",bt),s({type:"error",message:"Failed to fetch weather data."})}}),()=>{e.current.remove()}},[]),p.jsxs("div",{className:"relative h-full",children:[n&&p.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg ${n.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.message}),p.jsx("p",{className:"text-xl text-gray-600 italic",children:"Explore real-time weather data and forecasts for any location."}),p.jsx("div",{className:"relative h-[600px]",children:p.jsx("div",{ref:t,className:"w-full h-full"})}),p.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-4 mt-8",children:[p.jsxs("div",{className:"relative w-full md:w-1/3 bg-white p-6 rounded-lg shadow-lg transition-all hover:shadow-xl hover:bg-white-50",children:[p.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[p.jsx(f4,{className:"mr-2 text-yellow-500",size:24}),"Weather Information"]}),p.jsxs("div",{className:"space-y-6 bg-white p-6 rounded-lg shadow-md",children:[p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(GV,{className:"text-red-500",size:24}),p.jsx("span",{className:"font-semibold text-lg",children:"Location:"}),p.jsx("span",{className:"text-gray-600",children:o})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(f4,{className:"text-orange-400",size:24}),p.jsx("span",{className:"font-semibold",children:"Temperature:"}),p.jsx("span",{children:u!==null?`${u}C`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(vC,{className:"text-blue-500",size:24}),p.jsx("span",{className:"font-semibold",children:"Humidity:"}),p.jsx("span",{children:m!==null?`${m}%`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(xC,{className:"text-blue-500",size:24}),p.jsx("span",{className:"font-semibold",children:"Precipitation:"}),p.jsx("span",{children:C!==null?`${C} mm`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(Yy,{className:"text-gray-500",size:24}),p.jsx("span",{className:"font-semibold",children:"ET:"}),p.jsx("span",{children:S!==null?`${S} mm/day`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx($V,{className:"text-yellow-600",size:24}),p.jsx("span",{className:"font-semibold",children:"Shortwave Radiation:"}),p.jsx("span",{children:F!==null?`${F} W/m`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(XV,{className:"text-green-500",size:24}),p.jsx("span",{className:"font-semibold",children:"Wind Speed:"}),p.jsx("span",{children:V!==null?`${V} m/s`:"N/A"})]})]}),p.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 space-y-4",children:[p.jsx("p",{className:"text-sm text-gray-600",children:"Please select a crop and enter your land surface area to calculate ETc."}),p.jsxs("select",{name:"crop_id",onChange:ie,required:!0,className:"w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-300",children:[p.jsx("option",{value:"",children:"Select a crop"}),oe.map(le=>p.jsx("option",{value:le.id,children:le.name},le.id))]}),p.jsxs("div",{children:[p.jsx("label",{className:"font-medium text-gray-700",children:"Land Surface (sqm):"}),p.jsx("input",{type:"number",value:He,onChange:le=>Fe(le.target.value),className:"w-full p-3 border rounded-lg shadow-sm mt-2 focus:outline-none focus:ring-2 focus:ring-green-300",placeholder:"Enter your land surface area in sqm"})]}),de&&j!==null&&He>0&&p.jsxs("div",{className:"p-3 mt-4 bg-green-50 border-l-4 border-green-400 rounded-md",children:[p.jsxs("div",{className:"flex items-center text-gray-700",children:[p.jsx(Yy,{className:"text-gray-500 mr-2",size:24}),p.jsx("span",{className:"font-semibold",children:"ETc (mm/day):"}),p.jsxs("span",{className:"ml-2",children:[j," mm/day"]})]}),p.jsxs("div",{className:"flex items-center text-gray-700 mt-2",children:[p.jsx(Yy,{className:"text-gray-500 mr-2",size:24}),p.jsx("span",{className:"font-semibold",children:"ETc (litres/day):"}),p.jsxs("span",{className:"ml-2",children:[j*parseFloat(He)," litres/day"]})]})]})]})]})]}),p.jsx("div",{className:"w-full md:w-2/3 bg-white p-4 rounded-md shadow-lg",children:p.jsx(LK,{temperature:te.temperature,humidity:te.humidity,precipitation:te.precipitation})})]})]})},G4e=()=>{const t=Ae.useRef(null),e=Ae.useRef(null),r=Ae.useRef(null),[n,s]=Ae.useState(null),[o,c]=Ae.useState(""),[u,i]=Ae.useState(null),[m,g]=Ae.useState(null),[C,B]=Ae.useState(null),[S,P]=Ae.useState(null),[j,D]=Ae.useState(null),[F,R]=Ae.useState(null),[V,Y]=Ae.useState(null),[te,se]=Ae.useState({temperature:[],humidity:[],precipitation:[]}),[oe,K]=Ae.useState([]),[de,we]=Ae.useState(""),[J,Z]=Ae.useState(null),[Ie,be]=Ae.useState(0),[He,Fe]=Ae.useState(0),[ve,_e]=Ae.useState([]),[ze,Ne]=Ae.useState(""),[st,ie]=Ae.useState(1800),le=1.2,pe=async(De,Mt)=>{const ir=`https://api.open-meteo.com/v1/forecast?latitude=${De}&longitude=${Mt}&hourly=temperature_2m,relative_humidity_2m,precipitation,et0_fao_evapotranspiration,shortwave_radiation,wind_speed_1000hPa`;try{const Ze=await(await fetch(ir)).json(),Ue=new Date().toISOString().slice(0,13)+":00",hr=Ze.hourly.time.indexOf(Ue);return{temperature:hr!==-1?Ze.hourly.temperature_2m[hr]:null,humidity:hr!==-1?Ze.hourly.relative_humidity_2m[hr]:null,precipitation:hr!==-1?Ze.hourly.precipitation[hr]:null,et0_fao_evapotranspiration:hr!==-1?Ze.hourly.et0_fao_evapotranspiration[hr]:null,shortwave_radiation:hr!==-1?Ze.hourly.shortwave_radiation[hr]:null,windSpeed1000hPa:hr!==-1?Ze.hourly.wind_speed_1000hPa[hr]:null,temperatureHourly:Ze.hourly.temperature_2m,humidityHourly:Ze.hourly.relative_humidity_2m,precipitationHourly:Ze.hourly.precipitation}}catch(Ar){return console.error("Failed to fetch weather data:",Ar),{temperature:null,humidity:null,precipitation:null,et0_fao_evapotranspiration:null,shortwave_radiation:null,windSpeed1000hPa:null,temperatureHourly:[],humidityHourly:[],precipitationHourly:[]}}},fe=De=>De<1?"No rain expected; manual or irrigation watering may be necessary.":De<=2?"Light rain expected, minimal moisture.":De<=10?"Moderate rain expected, ideal for soil moisture.":De<=20?"Abundant rain expected, favorable for crops.":De<=50?"Heavy rain expected, monitor drainage.":"Torrential rain expected, risk of flooding.";Ae.useEffect(()=>{(async()=>{try{const{data:Mt}=await Tr.get("/api/farm/all");_e(Mt.farms||[])}catch(Mt){console.error("Error fetching farms:",Mt)}})()},[]);const Qe=async De=>{const Mt=De.target.value;if(Ne(Mt),Mt)try{const ir=await Tr.get(`/api/farm/${Mt}`);if(ir.data.status==="success"){const Ar=ir.data.data.geolocation;if(Ar&&Ar.includes(",")){const[Ze,Ue]=Ar.split(","),hr=parseFloat(Ze),Dt=parseFloat(Ue);be(hr),Fe(Dt),ie(1800),e.current&&(e.current.flyTo({center:[Dt,hr],zoom:15}),new Li.Marker({color:"red"}).setLngLat([Dt,hr]).setPopup(new Li.Popup().setHTML(`<strong>${ir.data.data.name}</strong>`)).addTo(e.current));const vt=await pe(hr,Dt);i(vt.temperature),g(vt.humidity),B(vt.precipitation),P(vt.et0_fao_evapotranspiration),R(vt.shortwave_radiation),Y(vt.windSpeed1000hPa),se({temperature:vt.temperatureHourly,humidity:vt.humidityHourly,precipitation:vt.precipitationHourly})}}}catch(ir){console.error("Error fetching farm properties:",ir)}},Ke=async()=>{try{const De=await Tr.get("/api/crop/");K(De.data.crops)}catch(De){console.error("Error fetching crops list:",De)}},et=async()=>{try{const De=await Tr.get(`/api/kc/getbycrop/${de}`);Z(De.data.kc_value[0].kc_value)}catch(De){console.error("Error fetching kc value:",De)}},tt=(De,Mt)=>De===null?null:De*Mt;Ae.useEffect(()=>{if(S!==null){const Mt=tt(S,J||le);D(Mt)}},[S,J]),Ae.useEffect(()=>{Ke()},[]);const bt=De=>{we(De.target.value),et()};return Ae.useEffect(()=>{Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current=new Li.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:[-79.4512,43.6568],zoom:8});const De=ir=>{const Ar=ir.match(/^[ ]*(?:Lat: )?(-?\d+\.?\d*)[, ]+(?:Lng: )?(-?\d+\.?\d*)[ ]*$/i);if(!Ar)return null;const Ze=Number(Ar[1]),Ue=Number(Ar[2]);return Ze<-90||Ze>90||Ue<-180||Ue>180?null:[{center:[Ue,Ze],geometry:{type:"Point",coordinates:[Ue,Ze]},place_name:`Lat: ${Ze}, Lng: ${Ue}`,place_type:["coordinate"],properties:{},type:"Feature"}]},Mt=new wC({accessToken:Li.accessToken,mapboxgl:Li,placeholder:"Search for places...",localGeocoder:De});return e.current.addControl(Mt),Mt.on("result",async ir=>{const{place_name:Ar,geometry:Ze}=ir.result;c(Ar),s({type:"success",message:`Location found: ${Ar}`}),e.current.flyTo({center:Ze.coordinates,zoom:15});const Ue=Ze.coordinates[1],hr=Ze.coordinates[0],Dt=await pe(Ue,hr);i(Dt.temperature),g(Dt.humidity),B(Dt.precipitation),P(Dt.et0_fao_evapotranspiration),R(Dt.shortwave_radiation),Y(Dt.windSpeed1000hPa),se({temperature:Dt.temperatureHourly,humidity:Dt.humidityHourly,precipitation:Dt.precipitationHourly})}),e.current.on("click",async ir=>{var Ue;const{lng:Ar,lat:Ze}=ir.lngLat;try{const hr=`https://api.mapbox.com/geocoding/v5/mapbox.places/${Ar},${Ze}.json?access_token=${Li.accessToken}`,Kt=((Ue=(await(await fetch(hr)).json()).features[0])==null?void 0:Ue.place_name)||"Unknown location";c(Kt);const rr=await pe(Ze,Ar);i(rr.temperature),g(rr.humidity),B(rr.precipitation),P(rr.et0_fao_evapotranspiration),R(rr.shortwave_radiation),Y(rr.windSpeed1000hPa),r.current&&r.current.remove(),r.current=new Li.Popup().setLngLat([Ar,Ze]).setHTML(`<p><strong>Coordinates:</strong> Lng: ${Ar.toFixed(4)}, Lat: ${Ze.toFixed(4)}</p>
             <p><strong>City:</strong> ${Kt}</p>
             <p><strong>Temperature:</strong> ${rr.temperature??"N/A"}C</p>
             <p><strong>Humidity:</strong> ${rr.humidity??"N/A"}%</p>
             <p><strong>Precipitation:</strong> ${rr.precipitation??"N/A"} mm</p>
             <p><strong>~</strong> ${rr.precipitation!==null?fe(rr.precipitation):"N/A"}</p>
             <p><strong>Shortwave Radiation:</strong> ${rr.shortwave_radiation??"N/A"} W/m</p>
             <p><strong>Wind Speed (1000hPa):</strong> ${rr.windSpeed1000hPa??"N/A"} m/s</p>`).addTo(e.current)}catch(hr){console.error("Error fetching data or creating popup:",hr),s({type:"error",message:"Failed to fetch weather data."})}}),()=>e.current.remove()},[]),p.jsxs("div",{className:"relative h-full",children:[n&&p.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg ${n.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.message}),p.jsx("p",{className:"text-xl text-gray-600 italic",children:"Explore real-time weather data and forecasts for any location."}),p.jsx("div",{className:"relative h-[600px]",children:p.jsx("div",{ref:t,className:"w-full h-full"})}),p.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-4 mt-8",children:[p.jsxs("div",{className:"relative w-full md:w-1/3 bg-white p-6 rounded-lg shadow-lg",children:[p.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[p.jsx(f4,{className:"mr-2 text-yellow-500",size:24}),"Weather Information"]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(GV,{className:"text-red-500",size:24}),p.jsx("span",{className:"font-semibold text-lg",children:"Location:"}),p.jsx("span",{className:"text-gray-600",children:o})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(f4,{className:"text-orange-400",size:24}),p.jsx("span",{children:"Temperature:"}),p.jsx("span",{children:u!==null?`${u}C`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(vC,{className:"text-blue-500",size:24}),p.jsx("span",{children:"Humidity:"}),p.jsx("span",{children:m!==null?`${m}%`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(xC,{className:"text-blue-500",size:24}),p.jsx("span",{children:"Precipitation:"}),p.jsx("span",{children:C!==null?`${C} mm`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(Yy,{className:"text-gray-500",size:24}),p.jsx("span",{children:"ET:"}),p.jsx("span",{children:S!==null?`${S} mm/day`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx($V,{className:"text-yellow-600",size:24}),p.jsx("span",{children:"Radiation:"}),p.jsx("span",{children:F!==null?`${F} W/m`:"N/A"})]}),p.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[p.jsx(XV,{className:"text-green-500",size:24}),p.jsx("span",{children:"Wind Speed:"}),p.jsx("span",{children:V!==null?`${V} m/s`:"N/A"})]})]}),p.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 space-y-4",children:[p.jsx("div",{children:p.jsxs("select",{value:ze,onChange:Qe,className:"w-full p-3 border rounded-lg",children:[p.jsx("option",{value:"",children:"Select a farm"}),ve.map(De=>p.jsxs("option",{value:De.id,children:[De.name," - ",De.subcounty]},De.id))]})}),p.jsxs("select",{name:"crop_id",onChange:bt,className:"w-full p-3 border rounded-lg",children:[p.jsx("option",{value:"",children:"Select a crop"}),oe.map(De=>p.jsx("option",{value:De.id,children:De.name},De.id))]}),p.jsxs("div",{children:[p.jsx("label",{children:"Land Surface (sqm):"}),p.jsx("input",{type:"number",value:st,onChange:De=>ie(De.target.value),className:"w-full p-3 border rounded-lg mt-2"})]}),de&&j!==null&&st>0&&p.jsxs("div",{className:"p-3 mt-4 bg-green-50 border-l-4 border-green-400 rounded-md",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(Yy,{className:"text-gray-500 mr-2"}),p.jsx("span",{children:"ETc (mm/day):"}),p.jsxs("span",{className:"ml-2",children:[j.toFixed(2)," mm/day"]})]}),p.jsxs("div",{className:"flex items-center mt-2",children:[p.jsx(Yy,{className:"text-gray-500 mr-2"}),p.jsx("span",{children:"ETc (litres/day):"}),p.jsxs("span",{className:"ml-2",children:[(j*parseFloat(st)).toFixed(2)," litres/day"]})]})]})]})]})]}),p.jsx("div",{className:"w-full md:w-2/3 bg-white p-4 rounded-md shadow-lg",children:p.jsx(LK,{temperature:te.temperature,humidity:te.humidity,precipitation:te.precipitation})})]})]})};function $4e(){const[t,e]=Ae.useState(""),[r,n]=Ae.useState(""),[s,o]=Ae.useState([]),[c,u]=Ae.useState([]),[i,m]=Ae.useState(""),[g,C]=Ae.useState(""),[B,S]=Ae.useState(""),[P,j]=Ae.useState(""),[D,F]=Ae.useState("10");Ae.useEffect(()=>{(async()=>{try{const{data:we}=await Tr.get("/api/farm/all");u(we.farms||[])}catch(we){console.error("Error fetching farms:",we)}})()},[]);const R=async de=>{const we=de.target.value;if(m(we),we)try{const J=await Tr.get(`/api/farm/${we}`);if(J.data.status==="success"){const Z=J.data.data.geolocation;if(Z&&Z.includes(",")){const[Ie,be]=Z.split(",");e(parseFloat(Ie)),n(parseFloat(be))}}}catch(J){console.error("Error fetching farm details:",J)}},V=async()=>{try{let de="";if(D==="10"){de=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&hourly=temperature_2m,relative_humidity_2m,precipitation,wind_speed_1000hPa&forecast_days=10&timezone=auto`;const J=(await Pm.get(de)).data.hourly,Z=Array.from({length:10}).map((Ie,be)=>{const He=be*24,Fe=(be+1)*24;return{date:new Date(Date.now()+be*24*60*60*1e3),temperature:J.temperature_2m.slice(He,Fe).reduce((ve,_e)=>ve+_e,0)/24,humidity:J.relative_humidity_2m.slice(He,Fe).reduce((ve,_e)=>ve+_e,0)/24,windSpeed:J.wind_speed_1000hPa.slice(He,Fe).reduce((ve,_e)=>ve+_e,0)/24,precipitation:J.precipitation.slice(He,Fe).reduce((ve,_e)=>ve+_e,0)}});o(Z)}else{de=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&daily=temperature_2m_mean,relative_humidity_2m_mean,windspeed_10m_max,precipitation_sum&timezone=auto&past_days=75&forecast_days=15`;const J=(await Pm.get(de)).data.daily,Z=J.time.map((Ie,be)=>({date:new Date(Ie),temperature:J.temperature_2m_mean[be],humidity:J.relative_humidity_2m_mean[be],windSpeed:J.windspeed_10m_max[be],precipitation:J.precipitation_sum[be]}));o(Z)}console.log("Fetched:",de)}catch(de){console.error("Error fetching weather data:",de)}},Y=async()=>{var de,we;try{const Z=`https://api.mapbox.com/geocoding/v5/mapbox.places/${r},${t}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,be=(await Pm.get(Z)).data.features[0];be&&(C(be.text),S(((de=be.context.find(He=>He.id.includes("country")))==null?void 0:de.text)||""),j(((we=be.context.find(He=>He.id.includes("region")))==null?void 0:we.text)||""))}catch(J){console.error("Error fetching location data:",J)}},te=()=>{V(),Y()},oe={labels:s.map(de=>de.date.toLocaleDateString("en-US")),datasets:[{label:"Temperature (C)",data:s.map(de=>de.temperature),borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.4},{label:"Humidity (%)",data:s.map(de=>de.humidity),borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",tension:.4},{label:"Wind Speed (km/h)",data:s.map(de=>de.windSpeed),borderColor:"rgba(255, 206, 86, 1)",backgroundColor:"rgba(255, 206, 86, 0.2)",tension:.4},{label:"Precipitation (mm)",data:s.map(de=>de.precipitation),borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",tension:.4}]},K={responsive:!0,plugins:{legend:{position:"bottom"}}};return p.jsx("div",{className:"bg-white-100 min-h-screen p-6",children:p.jsx("div",{className:"container mx-auto",children:p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-500",children:"Weather History for 90 Days"}),p.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Enter latitude & longitude or select a farm, then choose forecast period."}),p.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Select a Farm"}),p.jsxs("select",{value:i,onChange:R,className:"p-2 border rounded",children:[p.jsx("option",{value:"",children:"-- Choose Farm --"}),c.map(de=>p.jsxs("option",{value:de.id,children:[de.name," - ",de.subcounty]},de.id))]})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Latitude"}),p.jsx("input",{type:"text",value:t,onChange:de=>e(de.target.value),className:"p-2 border rounded"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Longitude"}),p.jsx("input",{type:"text",value:r,onChange:de=>n(de.target.value),className:"p-2 border rounded"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Forecast Period"}),p.jsxs("select",{value:D,onChange:de=>F(de.target.value),className:"p-2 border rounded",children:[p.jsx("option",{value:"10",children:"10 Days"}),p.jsx("option",{value:"90",children:"90 Days"})]})]}),p.jsx("button",{onClick:te,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 self-center mt-4 md:mt-0",children:"Search"})]}),p.jsx("div",{className:"mb-6",children:p.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",g,", ",P,", ",B]})}),p.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:p.jsx(I0,{data:oe,options:K})})]})})})}ph.register(fA,pA,xp,Qd,N1,L0,T0);const q4e=()=>{const[t,e]=Ae.useState({lat:0,lon:0}),[r,n]=Ae.useState(null),[s,o]=Ae.useState(null),[c,u]=Ae.useState(null),[i,m]=Ae.useState([]),[g,C]=Ae.useState(""),[B,S]=Ae.useState([]);Ae.useState("");const[P,j]=Ae.useState(3);Ae.useEffect(()=>{(async()=>{try{const{data:K}=await Tr.get("/api/farm/all");m(K.farms||[])}catch(K){console.error("Error fetching farms:",K)}})()},[]);const D=async oe=>{const K=oe.target.value;if(C(K),K)try{const de=await Tr.get(`/api/farm/${K}`);if(de.data.status==="success"){const we=de.data.data.geolocation;if(we&&we.includes(",")){const[J,Z]=we.split(",");e({lat:parseFloat(Z),lon:parseFloat(J)})}}}catch(de){console.error("Error fetching farm properties:",de)}};Ae.useEffect(()=>{t.lat&&t.lon&&(F(t.lat,t.lon),R(t.lat,t.lon),s&&(s.flyTo({center:[t.lat,t.lon],zoom:10,essential:!0}),new Li.Marker().setLngLat([t.lat,t.lon]).addTo(s)))},[t,s,P]);const F=(oe,K)=>{fetch(`https://api.open-meteo.com/v1/forecast?latitude=${K}&longitude=${oe}&hourly=temperature_2m,relative_humidity_2m,precipitation,shortwave_radiation,wind_speed_1000hPa&forecast_days=${P}`).then(de=>de.json()).then(de=>{n(de)})},R=(oe,K)=>{fetch(`https://api.open-meteo.com/v1/forecast?latitude=${K}&longitude=${oe}&hourly=temperature_2m,relative_humidity_2m,precipitation,shortwave_radiation,wind_speed_1000hPa&forecast_days=${P}`).then(de=>de.json()).then(de=>{V(de),Y(de)})},V=oe=>{if(!oe||!oe.hourly||!oe.hourly.time){S([]);return}const K=[];for(let de=0;de<P;de++){const we=new Date;we.setDate(we.getDate()+de);const J=we.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long"});let Z=[],Ie=[],be=[],He=[];if(oe.hourly.time.forEach((le,pe)=>{new Date(le).getDate()===we.getDate()&&(Z.push(oe.hourly.temperature_2m[pe]),Ie.push(oe.hourly.relative_humidity_2m[pe]),be.push(oe.hourly.precipitation[pe]),He.push(oe.hourly.wind_speed_1000hPa[pe]))}),Z.length===0)continue;const Fe=(Z.reduce((le,pe)=>le+pe,0)/Z.length).toFixed(1),ve=Math.min(...Z).toFixed(1),_e=Math.max(...Z).toFixed(1),ze=(Ie.reduce((le,pe)=>le+pe,0)/Ie.length).toFixed(1),Ne=be.reduce((le,pe)=>le+pe,0).toFixed(1),st=(He.reduce((le,pe)=>le+pe,0)/He.length).toFixed(1);let ie="";Ne>10?ie="Heavy rain expected, don't forget your umbrella!":Fe>30?ie="Hot day ahead, stay hydrated.":Fe<10?ie="Cold weather, dress warmly.":ie="Pleasant weather with stable conditions.",K.push({day:J,avgTemp:Fe,minTemp:ve,maxTemp:_e,avgHumidity:ze,totalPrecipitation:Ne,avgWind:st,forecastComment:ie})}S(K)},Y=oe=>{if(!oe||!oe.hourly||!oe.hourly.time)return;let Ie=[];if(oe.hourly.time.forEach((be,He)=>{const Fe=new Date(be),ve=oe.hourly.temperature_2m[He],_e=oe.hourly.relative_humidity_2m[He],ze=oe.hourly.precipitation[He],Ne=oe.hourly.wind_speed_1000hPa[He];let st=[];if(ve<10?st.push(`low temperature (${ve.toFixed(1)}C)`):ve>30&&st.push(`high temperature (${ve.toFixed(1)}C)`),_e<30&&st.push(`dry conditions (humidity ${_e.toFixed(1)}%)`),ze>5&&st.push(`heavy rain (${ze.toFixed(1)} mm)`),Ne>20&&st.push(`strong wind (${Ne.toFixed(1)} km/h)`),st.length>0){const ie=Fe.toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});Ie.push(`At ${ie} on ${Fe.toLocaleDateString("en-US")}: ${st.join(", ")}`)}}),Ie.length>0){const be=` Alert: Anomalies detected:
${Ie.join(`
`)}`;u(be),te(be)}else u(null)},te=oe=>{const K=i.find(J=>J.id===g),de=K&&K.email?K.email:"default@example.com",we={to_name:K?K.name:"Farmer",farmer_email:de,message:oe};kF.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",we,"YOUR_USER_ID").then(J=>{console.log("Email sent successfully!",J.status,J.text)}).catch(J=>{console.error("Failed to send email:",J)})};Ae.useEffect(()=>{Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q";const oe=new Li.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[0,0],zoom:2});return oe.on("click",K=>{e({lat:K.lngLat.lat,lon:K.lngLat.lng})}),o(oe),()=>oe.remove()},[]);const se={labels:["8 AM","10 AM","12 PM","2 PM","4 PM","6 PM"],datasets:[{label:"Temperature (C)",data:r?r.hourly.temperature_2m.slice(0,6):[0,0,0,0,0,0],borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)"},{label:"Humidity (%)",data:r?r.hourly.relative_humidity_2m.slice(0,6):[0,0,0,0,0,0],borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.2)"}]};return p.jsx("div",{className:"min-h-screen bg-white-50 p-6",children:p.jsxs("div",{className:"container mx-auto",children:[p.jsx("header",{className:"mb-8",children:p.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Anomaly Alert Detection"})}),p.jsx("section",{className:"mb-8",children:p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsx("label",{className:"block text-gray-700 mb-2",htmlFor:"farm_id",children:"Farm ID:"}),p.jsxs("select",{id:"farm_id",name:"farm_id",value:g,onChange:D,className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,children:[p.jsx("option",{value:"",children:"Select Farm"}),i.map(oe=>p.jsxs("option",{value:oe.id,children:[oe.name," - ",oe.subcounty]},oe.id))]})]})}),p.jsx("section",{className:"mb-8",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex items-center space-x-4",children:[p.jsx("label",{htmlFor:"forecastRange",className:"text-lg font-semibold text-gray-700",children:"Forecast Range:"}),p.jsxs("select",{id:"forecastRange",value:P,onChange:oe=>j(parseInt(oe.target.value)),className:"block w-full max-w-xs py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-150 ease-in-out",children:[p.jsx("option",{value:3,children:"3-Day Forecast"}),p.jsx("option",{value:10,children:"10-Day Forecast"})]})]})}),p.jsxs("section",{className:"mb-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsx("div",{className:"lg:col-span-2 rounded-lg shadow overflow-hidden",children:p.jsx("div",{id:"map",className:"h-96"})}),p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[P,"-Day Forecast"]}),B.length>0?p.jsx("div",{className:"space-y-4",children:B.map((oe,K)=>p.jsxs("div",{className:"p-4 border rounded hover:shadow-lg transition-shadow duration-200",children:[p.jsx("h3",{className:"text-xl font-semibold mb-2",children:oe.day}),p.jsxs("div",{className:"text-gray-700 space-y-2",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(KV,{className:"text-blue-500 w-5 h-5 mr-2"}),p.jsxs("p",{children:["Avg Temp: ",oe.avgTemp,"C"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(WV,{className:"text-orange-500 w-5 h-5 mr-2"}),p.jsxs("p",{children:["Min: ",oe.minTemp,"C, Max: ",oe.maxTemp,"C"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(vC,{className:"text-teal-500 w-5 h-5 mr-2"}),p.jsxs("p",{children:["Humidity: ",oe.avgHumidity,"%"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(qV,{className:"text-gray-500 w-5 h-5 mr-2"}),p.jsxs("p",{children:["Wind: ",oe.avgWind," km/h"]})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(xC,{className:"text-blue-700 w-5 h-5 mr-2"}),p.jsxs("p",{children:["Precipitation: ",oe.totalPrecipitation," mm"]})]})]}),p.jsx("p",{className:"mt-2 text-blue-600 font-medium",children:oe.forecastComment})]},K))}):p.jsx("p",{className:"text-gray-600",children:"No forecast available."})]})]}),p.jsx("section",{className:"mb-8",children:p.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Weather Chart"}),p.jsx(I0,{data:se})]})}),c&&p.jsx("section",{className:"mb-8",children:p.jsxs("div",{className:"flex items-start bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-md",children:[p.jsx("svg",{className:"w-6 h-6 text-red-500 mr-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.675-1.36 3.44 0l6.518 11.59c.75 1.334-.213 3.011-1.72 3.011H3.459c-1.507 0-2.47-1.677-1.72-3.011l6.518-11.59zM11 13a1 1 0 10-2 0 1 1 0 002 0zm-1-2a.75.75 0 01-.75-.75V7a.75.75 0 011.5 0v3.25A.75.75 0 0110 11z",clipRule:"evenodd"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-xl text-red-600 mb-1",children:"Alert"}),p.jsx("p",{className:"text-red-700 text-sm whitespace-pre-wrap",children:c})]})]})})]})})},W4e=({children:t})=>{const[e,r]=Ae.useState(null);Ae.useEffect(()=>{var i;const u=localStorage.getItem("token");if(u){const g=((i=gb(u).sub)==null?void 0:i.user_type)||"";console.log(g),r(g)}},[]);const[n,s]=Ae.useState({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1}),o=u=>{s(i=>({...i,[u]:!i[u]}))},c=()=>{localStorage.removeItem("token"),window.location.href="/login"};return Ae.useEffect(()=>{const u=i=>{!i.target.closest(".dropdown")&&!i.target.closest(".dropdown-btn")&&s({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1})};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]),p.jsxs("div",{className:"bg-gradient-to-br from-green-300 via-teal-100 to-blue-200 min-h-screen font-poppins text-gray-800",children:[p.jsxs("header",{className:"bg-gradient-to-r from-teal-700 to-blue-800 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90",children:[p.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[p.jsx("span",{className:"bg-white text-teal-700 p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:p.jsx(Dd,{})}),p.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),p.jsxs("nav",{className:"hidden md:flex space-x-8 text-lg font-medium",children:[p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>o("forestDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Forest"}),n.forestDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsx("ul",{className:"text-gray-700",children:p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/forest",className:"block w-full h-full",children:"Forest Data"})})})})]}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>o("farmDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Farm"}),n.farmDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsxs("ul",{className:"text-gray-700",children:[p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/farmmanager",className:"block w-full h-full",children:"Farmer Manager"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/crop",className:"block w-full h-full",children:"Crop"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/district",className:"block w-full h-full",children:"District"})})]})})]}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>o("digitalTraceDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Digital Trace"}),n.digitalTraceDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsxs("ul",{className:"text-gray-700",children:[p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/producestamps",className:"block w-full h-full",children:"Produce Stamps"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/export",className:"block w-full h-full",children:"Export Stamps"})})]})})]}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>o("weatherDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Weather"}),n.weatherDropdown&&p.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:p.jsxs("ul",{className:"text-gray-700",children:[p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/weather2",className:"block w-full h-full",children:"Map Weather"})}),p.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:p.jsx("a",{href:"/weather3",className:"block w-full h-full",children:"Weather Data"})})]})})]})]}),p.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-400 text-white font-semibold px-4 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Log Out"}),p.jsx("a",{href:"/login",className:"hidden md:inline-block bg-teal-500 hover:bg-teal-300 text-white font-semibold px-6 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Get Started"})]}),p.jsx("div",{className:"mt-12 px-6",children:t})]})};function wa(t){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}var Vd=Uint8Array,xd=Uint16Array,$_=Uint32Array,eS=new Vd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tS=new Vd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ML=new Vd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),IK=function(t,e){for(var r=new xd(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new $_(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)s[o]=o-r[n]<<5|n;return[r,s]},NK=IK(eS,2),FK=NK[0],kL=NK[1];FK[28]=258,kL[258]=28;var PK=IK(tS,0),K4e=PK[0],lz=PK[1],DL=new xd(32768);for(var pl=0;pl<32768;++pl){var WA=(pl&43690)>>>1|(pl&21845)<<1;WA=(WA&52428)>>>2|(WA&13107)<<2,WA=(WA&61680)>>>4|(WA&3855)<<4,DL[pl]=((WA&65280)>>>8|(WA&255)<<8)>>>1}var Sp=function(t,e,r){for(var n=t.length,s=0,o=new xd(e);s<n;++s)++o[t[s]-1];var c=new xd(e);for(s=0;s<e;++s)c[s]=c[s-1]+o[s-1]<<1;var u;if(r){u=new xd(1<<e);var i=15-e;for(s=0;s<n;++s)if(t[s])for(var m=s<<4|t[s],g=e-t[s],C=c[t[s]-1]++<<g,B=C|(1<<g)-1;C<=B;++C)u[DL[C]>>>i]=m}else for(u=new xd(n),s=0;s<n;++s)u[s]=DL[c[t[s]-1]++]>>>15-t[s];return u},Zm=new Vd(288);for(var pl=0;pl<144;++pl)Zm[pl]=8;for(var pl=144;pl<256;++pl)Zm[pl]=9;for(var pl=256;pl<280;++pl)Zm[pl]=7;for(var pl=280;pl<288;++pl)Zm[pl]=8;var q_=new Vd(32);for(var pl=0;pl<32;++pl)q_[pl]=5;var X4e=Sp(Zm,9,0),Y4e=Sp(Zm,9,1),Z4e=Sp(q_,5,0),J4e=Sp(q_,5,1),K3=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Cf=function(t,e,r){var n=e/8>>0;return(t[n]|t[n+1]<<8)>>>(e&7)&r},X3=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(e&7)},DF=function(t){return(t/8>>0)+(t&7&&1)},jK=function(t,e,r){(r==null||r>t.length)&&(r=t.length);var n=new(t instanceof xd?xd:t instanceof $_?$_:Vd)(r-e);return n.set(t.subarray(e,r)),n},eCe=function(t,e,r){var n=t.length,s=!e||r,o=!r||r.i;r||(r={}),e||(e=new Vd(n*3));var c=function(Qe){var Ke=e.length;if(Qe>Ke){var et=new Vd(Math.max(Ke*2,Qe));et.set(e),e=et}},u=r.f||0,i=r.p||0,m=r.b||0,g=r.l,C=r.d,B=r.m,S=r.n,P=n*8;do{if(!g){r.f=u=Cf(t,i,1);var j=Cf(t,i+1,3);if(i+=3,j)if(j==1)g=Y4e,C=J4e,B=9,S=5;else if(j==2){var V=Cf(t,i,31)+257,Y=Cf(t,i+10,15)+4,te=V+Cf(t,i+5,31)+1;i+=14;for(var se=new Vd(te),oe=new Vd(19),K=0;K<Y;++K)oe[ML[K]]=Cf(t,i+K*3,7);i+=Y*3;var de=K3(oe),we=(1<<de)-1;if(!o&&i+te*(de+7)>P)break;for(var J=Sp(oe,de,1),K=0;K<te;){var Z=J[Cf(t,i,we)];i+=Z&15;var D=Z>>>4;if(D<16)se[K++]=D;else{var Ie=0,be=0;for(D==16?(be=3+Cf(t,i,3),i+=2,Ie=se[K-1]):D==17?(be=3+Cf(t,i,7),i+=3):D==18&&(be=11+Cf(t,i,127),i+=7);be--;)se[K++]=Ie}}var He=se.subarray(0,V),Fe=se.subarray(V);B=K3(He),S=K3(Fe),g=Sp(He,B,1),C=Sp(Fe,S,1)}else throw"invalid block type";else{var D=DF(i)+4,F=t[D-4]|t[D-3]<<8,R=D+F;if(R>n){if(o)throw"unexpected EOF";break}s&&c(m+F),e.set(t.subarray(D,R),m),r.b=m+=F,r.p=i=R*8;continue}if(i>P)throw"unexpected EOF"}s&&c(m+131072);for(var ve=(1<<B)-1,_e=(1<<S)-1,ze=B+S+18;o||i+ze<P;){var Ie=g[X3(t,i)&ve],Ne=Ie>>>4;if(i+=Ie&15,i>P)throw"unexpected EOF";if(!Ie)throw"invalid length/literal";if(Ne<256)e[m++]=Ne;else if(Ne==256){g=null;break}else{var st=Ne-254;if(Ne>264){var K=Ne-257,ie=eS[K];st=Cf(t,i,(1<<ie)-1)+FK[K],i+=ie}var le=C[X3(t,i)&_e],pe=le>>>4;if(!le)throw"invalid distance";i+=le&15;var Fe=K4e[pe];if(pe>3){var ie=tS[pe];Fe+=X3(t,i)&(1<<ie)-1,i+=ie}if(i>P)throw"unexpected EOF";s&&c(m+131072);for(var fe=m+st;m<fe;m+=4)e[m]=e[m-Fe],e[m+1]=e[m+1-Fe],e[m+2]=e[m+2-Fe],e[m+3]=e[m+3-Fe];m=fe}}r.l=g,r.p=i,r.b=m,g&&(u=1,r.m=B,r.d=C,r.n=S)}while(!u);return m==e.length?e:jK(e,0,m)},$p=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8},Kv=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},Y3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,o=r.slice();if(!s)return[new Vd(0),0];if(s==1){var c=new Vd(r[0].s+1);return c[r[0].s]=1,[c,1]}r.sort(function(te,se){return te.f-se.f}),r.push({s:-1,f:25001});var u=r[0],i=r[1],m=0,g=1,C=2;for(r[0]={s:-1,f:u.f+i.f,l:u,r:i};g!=s-1;)u=r[r[m].f<r[C].f?m++:C++],i=r[m!=g&&r[m].f<r[C].f?m++:C++],r[g++]={s:-1,f:u.f+i.f,l:u,r:i};for(var B=o[0].s,n=1;n<s;++n)o[n].s>B&&(B=o[n].s);var S=new xd(B+1),P=OL(r[g-1],S,0);if(P>e){var n=0,j=0,D=P-e,F=1<<D;for(o.sort(function(se,oe){return S[oe.s]-S[se.s]||se.f-oe.f});n<s;++n){var R=o[n].s;if(S[R]>e)j+=F-(1<<P-S[R]),S[R]=e;else break}for(j>>>=D;j>0;){var V=o[n].s;S[V]<e?j-=1<<e-S[V]++-1:++n}for(;n>=0&&j;--n){var Y=o[n].s;S[Y]==e&&(--S[Y],++j)}P=e}return[new Vd(S),P]},OL=function(t,e,r){return t.s==-1?Math.max(OL(t.l,e,r+1),OL(t.r,e,r+1)):e[t.s]=r},cz=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new xd(++e),n=0,s=t[0],o=1,c=function(i){r[n++]=i},u=1;u<=e;++u)if(t[u]==s&&u!=e)++o;else{if(!s&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(s),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(s);o=1,s=t[u]}return[r.subarray(0,n),e]},Xv=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},RL=function(t,e,r){var n=r.length,s=DF(e+2);t[s]=n&255,t[s+1]=n>>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var o=0;o<n;++o)t[s+o+4]=r[o];return(s+4+n)*8},uz=function(t,e,r,n,s,o,c,u,i,m,g){$p(e,g++,r),++s[256];for(var C=Y3(s,15),B=C[0],S=C[1],P=Y3(o,15),j=P[0],D=P[1],F=cz(B),R=F[0],V=F[1],Y=cz(j),te=Y[0],se=Y[1],oe=new xd(19),K=0;K<R.length;++K)oe[R[K]&31]++;for(var K=0;K<te.length;++K)oe[te[K]&31]++;for(var de=Y3(oe,7),we=de[0],J=de[1],Z=19;Z>4&&!we[ML[Z-1]];--Z);var Ie=m+5<<3,be=Xv(s,Zm)+Xv(o,q_)+c,He=Xv(s,B)+Xv(o,j)+c+14+3*Z+Xv(oe,we)+(2*oe[16]+3*oe[17]+7*oe[18]);if(Ie<=be&&Ie<=He)return RL(e,g,t.subarray(i,i+m));var Fe,ve,_e,ze;if($p(e,g,1+(He<be)),g+=2,He<be){Fe=Sp(B,S,0),ve=B,_e=Sp(j,D,0),ze=j;var Ne=Sp(we,J,0);$p(e,g,V-257),$p(e,g+5,se-1),$p(e,g+10,Z-4),g+=14;for(var K=0;K<Z;++K)$p(e,g+3*K,we[ML[K]]);g+=3*Z;for(var st=[R,te],ie=0;ie<2;++ie)for(var le=st[ie],K=0;K<le.length;++K){var pe=le[K]&31;$p(e,g,Ne[pe]),g+=we[pe],pe>15&&($p(e,g,le[K]>>>5&127),g+=le[K]>>>12)}}else Fe=X4e,ve=Zm,_e=Z4e,ze=q_;for(var K=0;K<u;++K)if(n[K]>255){var pe=n[K]>>>18&31;Kv(e,g,Fe[pe+257]),g+=ve[pe+257],pe>7&&($p(e,g,n[K]>>>23&31),g+=eS[pe]);var fe=n[K]&31;Kv(e,g,_e[fe]),g+=ze[fe],fe>3&&(Kv(e,g,n[K]>>>5&8191),g+=tS[fe])}else Kv(e,g,Fe[n[K]]),g+=ve[n[K]];return Kv(e,g,Fe[256]),g+ve[256]},tCe=new $_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rCe=function(t,e,r,n,s,o){var c=t.length,u=new Vd(n+c+5*(1+Math.floor(c/7e3))+s),i=u.subarray(n,u.length-s),m=0;if(!e||c<8)for(var g=0;g<=c;g+=65535){var C=g+65535;C<c?m=RL(i,m,t.subarray(g,C)):(i[g]=o,m=RL(i,m,t.subarray(g,c)))}else{for(var B=tCe[e-1],S=B>>>13,P=B&8191,j=(1<<r)-1,D=new xd(32768),F=new xd(j+1),R=Math.ceil(r/3),V=2*R,Y=function(Ar){return(t[Ar]^t[Ar+1]<<R^t[Ar+2]<<V)&j},te=new $_(25e3),se=new xd(288),oe=new xd(32),K=0,de=0,g=0,we=0,J=0,Z=0;g<c;++g){var Ie=Y(g),be=g&32767,He=F[Ie];if(D[be]=He,F[Ie]=be,J<=g){var Fe=c-g;if((K>7e3||we>24576)&&Fe>423){m=uz(t,i,0,te,se,oe,de,we,Z,g-Z,m),we=K=de=0,Z=g;for(var ve=0;ve<286;++ve)se[ve]=0;for(var ve=0;ve<30;++ve)oe[ve]=0}var _e=2,ze=0,Ne=P,st=be-He&32767;if(Fe>2&&Ie==Y(g-st))for(var ie=Math.min(S,Fe)-1,le=Math.min(32767,g),pe=Math.min(258,Fe);st<=le&&--Ne&&be!=He;){if(t[g+_e]==t[g+_e-st]){for(var fe=0;fe<pe&&t[g+fe]==t[g+fe-st];++fe);if(fe>_e){if(_e=fe,ze=st,fe>ie)break;for(var Qe=Math.min(st,fe-2),Ke=0,ve=0;ve<Qe;++ve){var et=g-st+ve+32768&32767,tt=D[et],bt=et-tt+32768&32767;bt>Ke&&(Ke=bt,He=et)}}}be=He,He=D[be],st+=be-He+32768&32767}if(ze){te[we++]=268435456|kL[_e]<<18|lz[ze];var De=kL[_e]&31,Mt=lz[ze]&31;de+=eS[De]+tS[Mt],++se[257+De],++oe[Mt],J=g+_e,++K}else te[we++]=t[g],++se[t[g]]}}m=uz(t,i,o,te,se,oe,de,we,Z,g-Z,m)}return jK(u,0,n+DF(m)+s)},nCe=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,o=r.length,c=0;c!=o;){for(var u=Math.min(c+5552,o);c<u;++c)n+=r[c],s+=n;n%=65521,s%=65521}t=n,e=s},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},iCe=function(t,e,r,n,s){return rCe(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,n,!s)},sCe=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},oCe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)},aCe=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function UL(t,e){e===void 0&&(e={});var r=nCe();r.p(t);var n=iCe(t,e,2,4);return oCe(n,e),sCe(n,n.length-4,r.d()),n}function lCe(t,e){return eCe((aCe(t),t.subarray(2,-4)),e)}var cs=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Z3(){cs.console&&typeof cs.console.log=="function"&&cs.console.log.apply(cs.console,arguments)}var Ua={log:Z3,warn:function(t){cs.console&&(typeof cs.console.warn=="function"?cs.console.warn.apply(cs.console,arguments):Z3.call(null,arguments))},error:function(t){cs.console&&(typeof cs.console.error=="function"?cs.console.error.apply(cs.console,arguments):Z3(t))}};function J3(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Rg(n.response,e,r)},n.onerror=function(){Ua.error("could not download file")},n.send()}function dz(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function U2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var t_,zL,Rg=cs.saveAs||((typeof window>"u"?"undefined":wa(window))!=="object"||window!==cs?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=cs.URL||cs.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?dz(s.href)?J3(t,e,r):U2(s,s.target="_blank"):U2(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){U2(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(dz(t))J3(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){U2(n)})}else navigator.msSaveOrOpenBlob(function(s,o){return o===void 0?o={autoBom:!1}:wa(o)!=="object"&&(Ua.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return J3(t,e,r);var s=t.type==="application/octet-stream",o=/constructor/i.test(cs.HTMLElement)||cs.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&o)&&(typeof FileReader>"u"?"undefined":wa(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(t)}else{var i=cs.URL||cs.webkitURL,m=i.createObjectURL(t);n?n.location=m:location.href=m,n=null,setTimeout(function(){i.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function MK(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,o=r[n].process,c=s.exec(t);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),i=this.g.toString(16),m=this.b.toString(16);return u.length==1&&(u="0"+u),i.length==1&&(i="0"+i),m.length==1&&(m="0"+m),"#"+u+i+m}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function eT(t,e){var r=t[0],n=t[1],s=t[2],o=t[3];r=Uu(r,n,s,o,e[0],7,-680876936),o=Uu(o,r,n,s,e[1],12,-389564586),s=Uu(s,o,r,n,e[2],17,606105819),n=Uu(n,s,o,r,e[3],22,-1044525330),r=Uu(r,n,s,o,e[4],7,-176418897),o=Uu(o,r,n,s,e[5],12,1200080426),s=Uu(s,o,r,n,e[6],17,-1473231341),n=Uu(n,s,o,r,e[7],22,-45705983),r=Uu(r,n,s,o,e[8],7,1770035416),o=Uu(o,r,n,s,e[9],12,-1958414417),s=Uu(s,o,r,n,e[10],17,-42063),n=Uu(n,s,o,r,e[11],22,-1990404162),r=Uu(r,n,s,o,e[12],7,1804603682),o=Uu(o,r,n,s,e[13],12,-40341101),s=Uu(s,o,r,n,e[14],17,-1502002290),r=zu(r,n=Uu(n,s,o,r,e[15],22,1236535329),s,o,e[1],5,-165796510),o=zu(o,r,n,s,e[6],9,-1069501632),s=zu(s,o,r,n,e[11],14,643717713),n=zu(n,s,o,r,e[0],20,-373897302),r=zu(r,n,s,o,e[5],5,-701558691),o=zu(o,r,n,s,e[10],9,38016083),s=zu(s,o,r,n,e[15],14,-660478335),n=zu(n,s,o,r,e[4],20,-405537848),r=zu(r,n,s,o,e[9],5,568446438),o=zu(o,r,n,s,e[14],9,-1019803690),s=zu(s,o,r,n,e[3],14,-187363961),n=zu(n,s,o,r,e[8],20,1163531501),r=zu(r,n,s,o,e[13],5,-1444681467),o=zu(o,r,n,s,e[2],9,-51403784),s=zu(s,o,r,n,e[7],14,1735328473),r=Qu(r,n=zu(n,s,o,r,e[12],20,-1926607734),s,o,e[5],4,-378558),o=Qu(o,r,n,s,e[8],11,-2022574463),s=Qu(s,o,r,n,e[11],16,1839030562),n=Qu(n,s,o,r,e[14],23,-35309556),r=Qu(r,n,s,o,e[1],4,-1530992060),o=Qu(o,r,n,s,e[4],11,1272893353),s=Qu(s,o,r,n,e[7],16,-155497632),n=Qu(n,s,o,r,e[10],23,-1094730640),r=Qu(r,n,s,o,e[13],4,681279174),o=Qu(o,r,n,s,e[0],11,-358537222),s=Qu(s,o,r,n,e[3],16,-722521979),n=Qu(n,s,o,r,e[6],23,76029189),r=Qu(r,n,s,o,e[9],4,-640364487),o=Qu(o,r,n,s,e[12],11,-421815835),s=Qu(s,o,r,n,e[15],16,530742520),r=Hu(r,n=Qu(n,s,o,r,e[2],23,-995338651),s,o,e[0],6,-198630844),o=Hu(o,r,n,s,e[7],10,1126891415),s=Hu(s,o,r,n,e[14],15,-1416354905),n=Hu(n,s,o,r,e[5],21,-57434055),r=Hu(r,n,s,o,e[12],6,1700485571),o=Hu(o,r,n,s,e[3],10,-1894986606),s=Hu(s,o,r,n,e[10],15,-1051523),n=Hu(n,s,o,r,e[1],21,-2054922799),r=Hu(r,n,s,o,e[8],6,1873313359),o=Hu(o,r,n,s,e[15],10,-30611744),s=Hu(s,o,r,n,e[6],15,-1560198380),n=Hu(n,s,o,r,e[13],21,1309151649),r=Hu(r,n,s,o,e[4],6,-145523070),o=Hu(o,r,n,s,e[11],10,-1120210379),s=Hu(s,o,r,n,e[2],15,718787259),n=Hu(n,s,o,r,e[9],21,-343485551),t[0]=_m(r,t[0]),t[1]=_m(n,t[1]),t[2]=_m(s,t[2]),t[3]=_m(o,t[3])}function rS(t,e,r,n,s,o){return e=_m(_m(e,t),_m(n,o)),_m(e<<s|e>>>32-s,r)}function Uu(t,e,r,n,s,o,c){return rS(e&r|~e&n,t,e,s,o,c)}function zu(t,e,r,n,s,o,c){return rS(e&n|r&~n,t,e,s,o,c)}function Qu(t,e,r,n,s,o,c){return rS(e^r^n,t,e,s,o,c)}function Hu(t,e,r,n,s,o,c){return rS(r^(e|~n),t,e,s,o,c)}function kK(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)eT(n,cCe(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(eT(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,eT(n,s),n}function cCe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}t_=cs.atob.bind(cs),zL=cs.btoa.bind(cs);var hz="0123456789abcdef".split("");function uCe(t){for(var e="",r=0;r<4;r++)e+=hz[t>>8*r+4&15]+hz[t>>8*r&15];return e}function dCe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function QL(t){return kK(t).map(dCe).join("")}var hCe=function(t){for(var e=0;e<t.length;e++)t[e]=uCe(t[e]);return t.join("")}(kK("hello"))!="5d41402abc4b2a76b9719d911017c592";function _m(t,e){if(hCe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function HL(t,e){var r,n,s,o;if(t!==r){for(var c=(s=t,o=1+(256/t.length>>0),new Array(o+1).join(s)),u=[],i=0;i<256;i++)u[i]=i;var m=0;for(i=0;i<256;i++){var g=u[i];m=(m+g+c.charCodeAt(i))%256,u[i]=u[m],u[m]=g}r=t,n=u}else u=n;var C=e.length,B=0,S=0,P="";for(i=0;i<C;i++)S=(S+(g=u[B=(B+1)%256]))%256,u[B]=u[S],u[S]=g,c=u[(u[B]+u[S])%256],P+=String.fromCharCode(e.charCodeAt(i)^c);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var fz={print:4,modify:8,copy:16,"annot-forms":32};function xy(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(u){if(fz.perm!==void 0)throw new Error("Invalid permission: "+u);s+=fz[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^s)),this.encryptionKey=QL(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=HL(this.encryptionKey,this.padding)}function _y(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function pz(t){if(wa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!s],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var o in e[r]){var c=e[r][o];try{c[0].apply(t,n)}catch(u){cs.console&&Ua.error("jsPDF PubSub Error",u.message,u)}c[1]&&s.push(o)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function R4(t){if(!(this instanceof R4))return new R4(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function DK(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Qg(t,e,r,n,s){if(!(this instanceof Qg))return new Qg(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,DK.call(this,n,s)}function Hy(t,e,r,n,s){if(!(this instanceof Hy))return new Hy(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,DK.call(this,n,s)}function ss(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],o=arguments[3],c=[],u=1,i=16,m="S",g=null;wa(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,o=t.compress||t.compressPdf||o,(g=t.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(i=t.floatPrecision),m=t.defaultPathOperation||"S"),c=t.filters||(o===!0?["FlateEncode"]:c),n=n||"mm",r=(""+(r||"P")).toLowerCase();var C=t.putOnlyUsedFonts||!1,B={},S={internal:{},__private__:{}};S.__private__.PubSub=pz;var P="1.3",j=S.__private__.getPdfVersion=function(){return P};S.__private__.setPdfVersion=function(k){P=k};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};S.__private__.getPageFormats=function(){return D};var F=S.__private__.getPageFormat=function(k){return D[k]};s=s||"a4";var R={COMPAT:"compat",ADVANCED:"advanced"},V=R.COMPAT;function Y(){this.saveGraphicsState(),Ue(new qe(Yt,0,0,-Yt,0,_o()*Yt).toString()+" cm"),this.setFontSize(this.getFontSize()/Yt),m="n",V=R.ADVANCED}function te(){this.restoreGraphicsState(),m="S",V=R.COMPAT}var se=S.__private__.combineFontStyleAndFontWeight=function(k,me){if(k=="bold"&&me=="normal"||k=="bold"&&me==400||k=="normal"&&me=="italic"||k=="bold"&&me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return me&&(k=me==400||me==="normal"?k==="italic"?"italic":"normal":me!=700&&me!=="bold"||k!=="normal"?(me==700?"bold":me)+""+k:"bold"),k};S.advancedAPI=function(k){var me=V===R.COMPAT;return me&&Y.call(this),typeof k!="function"||(k(this),me&&te.call(this)),this},S.compatAPI=function(k){var me=V===R.ADVANCED;return me&&te.call(this),typeof k!="function"||(k(this),me&&Y.call(this)),this},S.isAdvancedAPI=function(){return V===R.ADVANCED};var oe,K=function(k){if(V!==R.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},de=S.roundToPrecision=S.__private__.roundToPrecision=function(k,me){var Xe=e||me;if(isNaN(k)||isNaN(Xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Xe).replace(/0+$/,"")};oe=S.hpf=S.__private__.hpf=typeof i=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return de(k,i)}:i==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return de(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return de(k,16)};var we=S.f2=S.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return de(k,2)},J=S.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return de(k,3)},Z=S.scale=S.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return V===R.COMPAT?k*Yt:V===R.ADVANCED?k:void 0},Ie=function(k){return V===R.COMPAT?_o()-k:V===R.ADVANCED?k:void 0},be=function(k){return Z(Ie(k))};S.__private__.setPrecision=S.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var He,Fe="00000000000000000000000000000000",ve=S.__private__.getFileId=function(){return Fe},_e=S.__private__.setFileId=function(k){return Fe=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():Fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Gn=new xy(g.userPermissions,g.userPassword,g.ownerPassword,Fe)),Fe};S.setFileId=function(k){return _e(k),this},S.getFileId=function(){return ve()};var ze=S.__private__.convertDateToPDFDate=function(k){var me=k.getTimezoneOffset(),Xe=me<0?"+":"-",ot=Math.floor(Math.abs(me/60)),St=Math.abs(me%60),qt=[Xe,pe(ot),"'",pe(St),"'"].join("");return["D:",k.getFullYear(),pe(k.getMonth()+1),pe(k.getDate()),pe(k.getHours()),pe(k.getMinutes()),pe(k.getSeconds()),qt].join("")},Ne=S.__private__.convertPDFDateToDate=function(k){var me=parseInt(k.substr(2,4),10),Xe=parseInt(k.substr(6,2),10)-1,ot=parseInt(k.substr(8,2),10),St=parseInt(k.substr(10,2),10),qt=parseInt(k.substr(12,2),10),gr=parseInt(k.substr(14,2),10);return new Date(me,Xe,ot,St,qt,gr,0)},st=S.__private__.setCreationDate=function(k){var me;if(k===void 0&&(k=new Date),k instanceof Date)me=ze(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");me=k}return He=me},ie=S.__private__.getCreationDate=function(k){var me=He;return k==="jsDate"&&(me=Ne(He)),me};S.setCreationDate=function(k){return st(k),this},S.getCreationDate=function(k){return ie(k)};var le,pe=S.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},fe=S.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},Qe=0,Ke=[],et=[],tt=0,bt=[],De=[],Mt=!1,ir=et,Ar=function(){Qe=0,tt=0,et=[],Ke=[],bt=[],xr=Wt(),pr=Wt()};S.__private__.setCustomOutputDestination=function(k){Mt=!0,ir=k};var Ze=function(k){Mt||(ir=k)};S.__private__.resetCustomOutputDestination=function(){Mt=!1,ir=et};var Ue=S.__private__.out=function(k){return k=k.toString(),tt+=k.length+1,ir.push(k),ir},hr=S.__private__.write=function(k){return Ue(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Dt=S.__private__.getArrayBuffer=function(k){for(var me=k.length,Xe=new ArrayBuffer(me),ot=new Uint8Array(Xe);me--;)ot[me]=k.charCodeAt(me);return Xe},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];S.__private__.getStandardFonts=function(){return vt};var Kt=t.fontSize||16;S.__private__.setFontSize=S.setFontSize=function(k){return Kt=V===R.ADVANCED?k/Yt:k,this};var rr,nr=S.__private__.getFontSize=S.getFontSize=function(){return V===R.COMPAT?Kt:Kt*Yt},Nr=t.R2L||!1;S.__private__.setR2L=S.setR2L=function(k){return Nr=k,this},S.__private__.getR2L=S.getR2L=function(){return Nr};var on,Ir=S.__private__.setZoomMode=function(k){var me=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))rr=k;else if(isNaN(k)){if(me.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');rr=k}else rr=parseInt(k,10)};S.__private__.getZoomMode=function(){return rr};var cn,Sn=S.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');on=k};S.__private__.getPageMode=function(){return on};var Ln=S.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');cn=k};S.__private__.getLayoutMode=function(){return cn},S.__private__.setDisplayMode=S.setDisplayMode=function(k,me,Xe){return Ir(k),Ln(me),Sn(Xe),this};var ln={title:"",subject:"",author:"",keywords:"",creator:""};S.__private__.getDocumentProperty=function(k){if(Object.keys(ln).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ln[k]},S.__private__.getDocumentProperties=function(){return ln},S.__private__.setDocumentProperties=S.setProperties=S.setDocumentProperties=function(k){for(var me in ln)ln.hasOwnProperty(me)&&k[me]&&(ln[me]=k[me]);return this},S.__private__.setDocumentProperty=function(k,me){if(Object.keys(ln).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ln[k]=me};var ar,Yt,Gr,Wr,On,mn={},Hn={},Vi=[],Bn={},jn={},Dn={},Gi={},Rn=null,Zr=0,Pr=[],un=new pz(S),Ii=t.hotfixes||[],ri={},ur={},We=[],qe=function k(me,Xe,ot,St,qt,gr){if(!(this instanceof k))return new k(me,Xe,ot,St,qt,gr);isNaN(me)&&(me=1),isNaN(Xe)&&(Xe=0),isNaN(ot)&&(ot=0),isNaN(St)&&(St=1),isNaN(qt)&&(qt=0),isNaN(gr)&&(gr=0),this._matrix=[me,Xe,ot,St,qt,gr]};Object.defineProperty(qe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qe.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(oe).join(k)},qe.prototype.multiply=function(k){var me=k.sx*this.sx+k.shy*this.shx,Xe=k.sx*this.shy+k.shy*this.sy,ot=k.shx*this.sx+k.sy*this.shx,St=k.shx*this.shy+k.sy*this.sy,qt=k.tx*this.sx+k.ty*this.shx+this.tx,gr=k.tx*this.shy+k.ty*this.sy+this.ty;return new qe(me,Xe,ot,St,qt,gr)},qe.prototype.decompose=function(){var k=this.sx,me=this.shy,Xe=this.shx,ot=this.sy,St=this.tx,qt=this.ty,gr=Math.sqrt(k*k+me*me),$r=(k/=gr)*Xe+(me/=gr)*ot;Xe-=k*$r,ot-=me*$r;var An=Math.sqrt(Xe*Xe+ot*ot);return $r/=An,k*(ot/=An)<me*(Xe/=An)&&(k=-k,me=-me,$r=-$r,gr=-gr),{scale:new qe(gr,0,0,An,0,0),translate:new qe(1,0,0,1,St,qt),rotate:new qe(k,me,-me,k,0,0),skew:new qe(1,0,$r,1,0,0)}},qe.prototype.toString=function(k){return this.join(" ")},qe.prototype.inversed=function(){var k=this.sx,me=this.shy,Xe=this.shx,ot=this.sy,St=this.tx,qt=this.ty,gr=1/(k*ot-me*Xe),$r=ot*gr,An=-me*gr,En=-Xe*gr,qr=k*gr;return new qe($r,An,En,qr,-$r*St-En*qt,-An*St-qr*qt)},qe.prototype.applyToPoint=function(k){var me=k.x*this.sx+k.y*this.shx+this.tx,Xe=k.x*this.shy+k.y*this.sy+this.ty;return new Uo(me,Xe)},qe.prototype.applyToRectangle=function(k){var me=this.applyToPoint(k),Xe=this.applyToPoint(new Uo(k.x+k.w,k.y+k.h));return new Va(me.x,me.y,Xe.x-me.x,Xe.y-me.y)},qe.prototype.clone=function(){var k=this.sx,me=this.shy,Xe=this.shx,ot=this.sy,St=this.tx,qt=this.ty;return new qe(k,me,Xe,ot,St,qt)},S.Matrix=qe;var pt=S.matrixMult=function(k,me){return me.multiply(k)},Lt=new qe(1,0,0,1,0,0);S.unitMatrix=S.identityMatrix=Lt;var Ct=function(k,me){if(!jn[k]){var Xe=(me instanceof Qg?"Sh":"P")+(Object.keys(Bn).length+1).toString(10);me.id=Xe,jn[k]=Xe,Bn[Xe]=me,un.publish("addPattern",me)}};S.ShadingPattern=Qg,S.TilingPattern=Hy,S.addShadingPattern=function(k,me){return K("addShadingPattern()"),Ct(k,me),this},S.beginTilingPattern=function(k){K("beginTilingPattern()"),Wo(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},S.endTilingPattern=function(k,me){K("endTilingPattern()"),me.stream=De[le].join(`
`),Ct(k,me),un.publish("endTilingPattern",me),We.pop().restore()};var kt=S.__private__.newObject=function(){var k=Wt();return Rt(k,!0),k},Wt=S.__private__.newObjectDeferred=function(){return Qe++,Ke[Qe]=function(){return tt},Qe},Rt=function(k,me){return me=typeof me=="boolean"&&me,Ke[k]=tt,me&&Ue(k+" 0 obj"),k},fr=S.__private__.newAdditionalObject=function(){var k={objId:Wt(),content:""};return bt.push(k),k},xr=Wt(),pr=Wt(),Lr=S.__private__.decodeColorString=function(k){var me=k.split(" ");if(me.length!==2||me[1]!=="g"&&me[1]!=="G")me.length===5&&(me[4]==="k"||me[4]==="K")&&(me=[(1-me[0])*(1-me[3]),(1-me[1])*(1-me[3]),(1-me[2])*(1-me[3]),"r"]);else{var Xe=parseFloat(me[0]);me=[Xe,Xe,Xe,"r"]}for(var ot="#",St=0;St<3;St++)ot+=("0"+Math.floor(255*parseFloat(me[St])).toString(16)).slice(-2);return ot},rn=S.__private__.encodeColorString=function(k){var me;typeof k=="string"&&(k={ch1:k});var Xe=k.ch1,ot=k.ch2,St=k.ch3,qt=k.ch4,gr=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Xe=="string"&&Xe.charAt(0)!=="#"){var $r=new MK(Xe);if($r.ok)Xe=$r.toHex();else if(!/^\d*\.?\d*$/.test(Xe))throw new Error('Invalid color "'+Xe+'" passed to jsPDF.encodeColorString.')}if(typeof Xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Xe)&&(Xe="#"+Xe[1]+Xe[1]+Xe[2]+Xe[2]+Xe[3]+Xe[3]),typeof Xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Xe)){var An=parseInt(Xe.substr(1),16);Xe=An>>16&255,ot=An>>8&255,St=255&An}if(ot===void 0||qt===void 0&&Xe===ot&&ot===St)if(typeof Xe=="string")me=Xe+" "+gr[0];else switch(k.precision){case 2:me=we(Xe/255)+" "+gr[0];break;case 3:default:me=J(Xe/255)+" "+gr[0]}else if(qt===void 0||wa(qt)==="object"){if(qt&&!isNaN(qt.a)&&qt.a===0)return me=["1.","1.","1.",gr[1]].join(" ");if(typeof Xe=="string")me=[Xe,ot,St,gr[1]].join(" ");else switch(k.precision){case 2:me=[we(Xe/255),we(ot/255),we(St/255),gr[1]].join(" ");break;default:case 3:me=[J(Xe/255),J(ot/255),J(St/255),gr[1]].join(" ")}}else if(typeof Xe=="string")me=[Xe,ot,St,qt,gr[2]].join(" ");else switch(k.precision){case 2:me=[we(Xe),we(ot),we(St),we(qt),gr[2]].join(" ");break;case 3:default:me=[J(Xe),J(ot),J(St),J(qt),gr[2]].join(" ")}return me},sn=S.__private__.getFilters=function(){return c},_n=S.__private__.putStream=function(k){var me=(k=k||{}).data||"",Xe=k.filters||sn(),ot=k.alreadyAppliedFilters||[],St=k.addLength1||!1,qt=me.length,gr=k.objectId,$r=function(bs){return bs};if(g!==null&&gr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&($r=Gn.encryptor(gr,0));var An={};Xe===!0&&(Xe=["FlateEncode"]);var En=k.additionalKeyValues||[],qr=(An=ss.API.processDataByFilters!==void 0?ss.API.processDataByFilters(me,Xe):{data:me,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(An.data.length!==0&&(En.push({key:"Length",value:An.data.length}),St===!0&&En.push({key:"Length1",value:qt})),qr.length!=0)if(qr.split("/").length-1==1)En.push({key:"Filter",value:qr});else{En.push({key:"Filter",value:"["+qr+"]"});for(var Dr=0;Dr<En.length;Dr+=1)if(En[Dr].key==="DecodeParms"){for(var bi=[],gn=0;gn<An.reverseChain.split("/").length-1;gn+=1)bi.push("null");bi.push(En[Dr].value),En[Dr].value="["+bi.join(" ")+"]"}}Ue("<<");for(var Fi=0;Fi<En.length;Fi++)Ue("/"+En[Fi].key+" "+En[Fi].value);Ue(">>"),An.data.length!==0&&(Ue("stream"),Ue($r(An.data)),Ue("endstream"))},Un=S.__private__.putPage=function(k){var me=k.number,Xe=k.data,ot=k.objId,St=k.contentsObjId;Rt(ot,!0),Ue("<</Type /Page"),Ue("/Parent "+k.rootDictionaryObjId+" 0 R"),Ue("/Resources "+k.resourceDictionaryObjId+" 0 R"),Ue("/MediaBox ["+parseFloat(oe(k.mediaBox.bottomLeftX))+" "+parseFloat(oe(k.mediaBox.bottomLeftY))+" "+oe(k.mediaBox.topRightX)+" "+oe(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&Ue("/CropBox ["+oe(k.cropBox.bottomLeftX)+" "+oe(k.cropBox.bottomLeftY)+" "+oe(k.cropBox.topRightX)+" "+oe(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&Ue("/BleedBox ["+oe(k.bleedBox.bottomLeftX)+" "+oe(k.bleedBox.bottomLeftY)+" "+oe(k.bleedBox.topRightX)+" "+oe(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&Ue("/TrimBox ["+oe(k.trimBox.bottomLeftX)+" "+oe(k.trimBox.bottomLeftY)+" "+oe(k.trimBox.topRightX)+" "+oe(k.trimBox.topRightY)+"]"),k.artBox!==null&&Ue("/ArtBox ["+oe(k.artBox.bottomLeftX)+" "+oe(k.artBox.bottomLeftY)+" "+oe(k.artBox.topRightX)+" "+oe(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&Ue("/UserUnit "+k.userUnit),un.publish("putPage",{objId:ot,pageContext:Pr[me],pageNumber:me,page:Xe}),Ue("/Contents "+St+" 0 R"),Ue(">>"),Ue("endobj");var qt=Xe.join(`
`);return V===R.ADVANCED&&(qt+=`
Q`),Rt(St,!0),_n({data:qt,filters:sn(),objectId:St}),Ue("endobj"),ot},qn=S.__private__.putPages=function(){var k,me,Xe=[];for(k=1;k<=Zr;k++)Pr[k].objId=Wt(),Pr[k].contentsObjId=Wt();for(k=1;k<=Zr;k++)Xe.push(Un({number:k,data:De[k],objId:Pr[k].objId,contentsObjId:Pr[k].contentsObjId,mediaBox:Pr[k].mediaBox,cropBox:Pr[k].cropBox,bleedBox:Pr[k].bleedBox,trimBox:Pr[k].trimBox,artBox:Pr[k].artBox,userUnit:Pr[k].userUnit,rootDictionaryObjId:xr,resourceDictionaryObjId:pr}));Rt(xr,!0),Ue("<</Type /Pages");var ot="/Kids [";for(me=0;me<Zr;me++)ot+=Xe[me]+" 0 R ";Ue(ot+"]"),Ue("/Count "+Zr),Ue(">>"),Ue("endobj"),un.publish("postPutPages")},Wn=function(k){un.publish("putFont",{font:k,out:Ue,newObject:kt,putStream:_n}),k.isAlreadyPutted!==!0&&(k.objectNumber=kt(),Ue("<<"),Ue("/Type /Font"),Ue("/BaseFont /"+_y(k.postScriptName)),Ue("/Subtype /Type1"),typeof k.encoding=="string"&&Ue("/Encoding /"+k.encoding),Ue("/FirstChar 32"),Ue("/LastChar 255"),Ue(">>"),Ue("endobj"))},Pi=function(){for(var k in mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&Wn(mn[k])},$i=function(k){k.objectNumber=kt();var me=[];me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Form"}),me.push({key:"BBox",value:"["+[oe(k.x),oe(k.y),oe(k.x+k.width),oe(k.y+k.height)].join(" ")+"]"}),me.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Xe=k.pages[1].join(`
`);_n({data:Xe,additionalKeyValues:me,objectId:k.objectNumber}),Ue("endobj")},Kn=function(){for(var k in ri)ri.hasOwnProperty(k)&&$i(ri[k])},Yi=function(k,me){var Xe,ot=[],St=1/(me-1);for(Xe=0;Xe<1;Xe+=St)ot.push(Xe);if(ot.push(1),k[0].offset!=0){var qt={offset:0,color:k[0].color};k.unshift(qt)}if(k[k.length-1].offset!=1){var gr={offset:1,color:k[k.length-1].color};k.push(gr)}for(var $r="",An=0,En=0;En<ot.length;En++){for(Xe=ot[En];Xe>k[An+1].offset;)An++;var qr=k[An].offset,Dr=(Xe-qr)/(k[An+1].offset-qr),bi=k[An].color,gn=k[An+1].color;$r+=fe(Math.round((1-Dr)*bi[0]+Dr*gn[0]).toString(16))+fe(Math.round((1-Dr)*bi[1]+Dr*gn[1]).toString(16))+fe(Math.round((1-Dr)*bi[2]+Dr*gn[2]).toString(16))}return $r.trim()},Ss=function(k,me){me||(me=21);var Xe=kt(),ot=Yi(k.colors,me),St=[];St.push({key:"FunctionType",value:"0"}),St.push({key:"Domain",value:"[0.0 1.0]"}),St.push({key:"Size",value:"["+me+"]"}),St.push({key:"BitsPerSample",value:"8"}),St.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_n({data:ot,additionalKeyValues:St,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Xe}),Ue("endobj"),k.objectNumber=kt(),Ue("<< /ShadingType "+k.type),Ue("/ColorSpace /DeviceRGB");var qt="/Coords ["+oe(parseFloat(k.coords[0]))+" "+oe(parseFloat(k.coords[1]))+" ";k.type===2?qt+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3])):qt+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3]))+" "+oe(parseFloat(k.coords[4]))+" "+oe(parseFloat(k.coords[5])),Ue(qt+="]"),k.matrix&&Ue("/Matrix ["+k.matrix.toString()+"]"),Ue("/Function "+Xe+" 0 R"),Ue("/Extend [true true]"),Ue(">>"),Ue("endobj")},no=function(k,me){var Xe=Wt(),ot=kt();me.push({resourcesOid:Xe,objectOid:ot}),k.objectNumber=ot;var St=[];St.push({key:"Type",value:"/Pattern"}),St.push({key:"PatternType",value:"1"}),St.push({key:"PaintType",value:"1"}),St.push({key:"TilingType",value:"1"}),St.push({key:"BBox",value:"["+k.boundingBox.map(oe).join(" ")+"]"}),St.push({key:"XStep",value:oe(k.xStep)}),St.push({key:"YStep",value:oe(k.yStep)}),St.push({key:"Resources",value:Xe+" 0 R"}),k.matrix&&St.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),_n({data:k.stream,additionalKeyValues:St,objectId:k.objectNumber}),Ue("endobj")},Fs=function(k){var me;for(me in Bn)Bn.hasOwnProperty(me)&&(Bn[me]instanceof Qg?Ss(Bn[me]):Bn[me]instanceof Hy&&no(Bn[me],k))},rs=function(k){for(var me in k.objectNumber=kt(),Ue("<<"),k)switch(me){case"opacity":Ue("/ca "+we(k[me]));break;case"stroke-opacity":Ue("/CA "+we(k[me]))}Ue(">>"),Ue("endobj")},Sa=function(){var k;for(k in Dn)Dn.hasOwnProperty(k)&&rs(Dn[k])},Ba=function(){for(var k in Ue("/XObject <<"),ri)ri.hasOwnProperty(k)&&ri[k].objectNumber>=0&&Ue("/"+k+" "+ri[k].objectNumber+" 0 R");un.publish("putXobjectDict"),Ue(">>")},tl=function(){Gn.oid=kt(),Ue("<<"),Ue("/Filter /Standard"),Ue("/V "+Gn.v),Ue("/R "+Gn.r),Ue("/U <"+Gn.toHexString(Gn.U)+">"),Ue("/O <"+Gn.toHexString(Gn.O)+">"),Ue("/P "+Gn.P),Ue(">>"),Ue("endobj")},go=function(){for(var k in Ue("/Font <<"),mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&Ue("/"+k+" "+mn[k].objectNumber+" 0 R");Ue(">>")},Sl=function(){if(Object.keys(Bn).length>0){for(var k in Ue("/Shading <<"),Bn)Bn.hasOwnProperty(k)&&Bn[k]instanceof Qg&&Bn[k].objectNumber>=0&&Ue("/"+k+" "+Bn[k].objectNumber+" 0 R");un.publish("putShadingPatternDict"),Ue(">>")}},sa=function(k){if(Object.keys(Bn).length>0){for(var me in Ue("/Pattern <<"),Bn)Bn.hasOwnProperty(me)&&Bn[me]instanceof S.TilingPattern&&Bn[me].objectNumber>=0&&Bn[me].objectNumber<k&&Ue("/"+me+" "+Bn[me].objectNumber+" 0 R");un.publish("putTilingPatternDict"),Ue(">>")}},Ha=function(){if(Object.keys(Dn).length>0){var k;for(k in Ue("/ExtGState <<"),Dn)Dn.hasOwnProperty(k)&&Dn[k].objectNumber>=0&&Ue("/"+k+" "+Dn[k].objectNumber+" 0 R");un.publish("putGStateDict"),Ue(">>")}},qi=function(k){Rt(k.resourcesOid,!0),Ue("<<"),Ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),go(),Sl(),sa(k.objectOid),Ha(),Ba(),Ue(">>"),Ue("endobj")},Nc=function(){var k=[];Pi(),Sa(),Kn(),Fs(k),un.publish("putResources"),k.forEach(qi),qi({resourcesOid:pr,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources")},nc=function(){un.publish("putAdditionalObjects");for(var k=0;k<bt.length;k++){var me=bt[k];Rt(me.objId,!0),Ue(me.content),Ue("endobj")}un.publish("postPutAdditionalObjects")},Ul=function(k){Hn[k.fontName]=Hn[k.fontName]||{},Hn[k.fontName][k.fontStyle]=k.id},Xo=function(k,me,Xe,ot,St){var qt={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:k,fontName:me,fontStyle:Xe,encoding:ot,isStandardFont:St||!1,metadata:{}};return un.publish("addFont",{font:qt,instance:this}),mn[qt.id]=qt,Ul(qt),qt.id},Pa=function(k){for(var me=0,Xe=vt.length;me<Xe;me++){var ot=Xo.call(this,k[me][0],k[me][1],k[me][2],vt[me][3],!0);C===!1&&(B[ot]=!0);var St=k[me][0].split("-");Ul({id:ot,fontName:St[0],fontStyle:St[1]||""})}un.publish("addFonts",{fonts:mn,dictionary:Hn})},Ai=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(ot){var me=ot.stack||"";~me.indexOf(" at ")&&(me=me.split(" at ")[1]);var Xe="Error in function "+me.split(`
`)[0].split("<")[0]+": "+ot.message;if(!cs.console)throw new Error(Xe);cs.console.error(Xe,ot),cs.alert&&alert(Xe)}},k.foo.bar=k,k.foo},So=function(k,me){var Xe,ot,St,qt,gr,$r,An,En,qr;if(St=(me=me||{}).sourceEncoding||"Unicode",gr=me.outputEncoding,(me.autoencode||gr)&&mn[ar].metadata&&mn[ar].metadata[St]&&mn[ar].metadata[St].encoding&&(qt=mn[ar].metadata[St].encoding,!gr&&mn[ar].encoding&&(gr=mn[ar].encoding),!gr&&qt.codePages&&(gr=qt.codePages[0]),typeof gr=="string"&&(gr=qt[gr]),gr)){for(An=!1,$r=[],Xe=0,ot=k.length;Xe<ot;Xe++)(En=gr[k.charCodeAt(Xe)])?$r.push(String.fromCharCode(En)):$r.push(k[Xe]),$r[Xe].charCodeAt(0)>>8&&(An=!0);k=$r.join("")}for(Xe=k.length;An===void 0&&Xe!==0;)k.charCodeAt(Xe-1)>>8&&(An=!0),Xe--;if(!An)return k;for($r=me.noBOM?[]:[254,255],Xe=0,ot=k.length;Xe<ot;Xe++){if((qr=(En=k.charCodeAt(Xe))>>8)>>8)throw new Error("Character at position "+Xe+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$r.push(qr),$r.push(En-(qr<<8))}return String.fromCharCode.apply(void 0,$r)},xs=S.__private__.pdfEscape=S.pdfEscape=function(k,me){return So(k,me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bl=S.__private__.beginPage=function(k){De[++Zr]=[],Pr[Zr]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},ce(Zr),Ze(De[le])},Fc=function(k,me){var Xe,ot,St;switch(r=me||r,typeof k=="string"&&(Xe=F(k.toLowerCase()),Array.isArray(Xe)&&(ot=Xe[0],St=Xe[1])),Array.isArray(k)&&(ot=k[0]*Yt,St=k[1]*Yt),isNaN(ot)&&(ot=s[0],St=s[1]),(ot>14400||St>14400)&&(Ua.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),St=Math.min(14400,St)),s=[ot,St],r.substr(0,1)){case"l":St>ot&&(s=[St,ot]);break;case"p":ot>St&&(s=[St,ot])}Bl(s),Wc(yo),Ue(vo),ic!==0&&Ue(ic+" J"),aa!==0&&Ue(aa+" j"),un.publish("addPage",{pageNumber:Zr})},Cc=function(k){k>0&&k<=Zr&&(De.splice(k,1),Pr.splice(k,1),Zr--,le>Zr&&(le=Zr),this.setPage(le))},ce=function(k){k>0&&k<=Zr&&(le=k)},Re=S.__private__.getNumberOfPages=S.getNumberOfPages=function(){return De.length-1},At=function(k,me,Xe){var ot,St=void 0;return Xe=Xe||{},k=k!==void 0?k:mn[ar].fontName,me=me!==void 0?me:mn[ar].fontStyle,ot=k.toLowerCase(),Hn[ot]!==void 0&&Hn[ot][me]!==void 0?St=Hn[ot][me]:Hn[k]!==void 0&&Hn[k][me]!==void 0?St=Hn[k][me]:Xe.disableWarning===!1&&Ua.warn("Unable to look up font label for font '"+k+"', '"+me+"'. Refer to getFontList() for available fonts."),St||Xe.noFallback||(St=Hn.times[me])==null&&(St=Hn.times.normal),St},Ht=S.__private__.putInfo=function(){var k=kt(),me=function(ot){return ot};for(var Xe in g!==null&&(me=Gn.encryptor(k,0)),Ue("<<"),Ue("/Producer ("+xs(me("jsPDF "+ss.version))+")"),ln)ln.hasOwnProperty(Xe)&&ln[Xe]&&Ue("/"+Xe.substr(0,1).toUpperCase()+Xe.substr(1)+" ("+xs(me(ln[Xe]))+")");Ue("/CreationDate ("+xs(me(He))+")"),Ue(">>"),Ue("endobj")},Jt=S.__private__.putCatalog=function(k){var me=(k=k||{}).rootDictionaryObjId||xr;switch(kt(),Ue("<<"),Ue("/Type /Catalog"),Ue("/Pages "+me+" 0 R"),rr||(rr="fullwidth"),rr){case"fullwidth":Ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ue("/OpenAction [3 0 R /Fit]");break;case"original":Ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Xe=""+rr;Xe.substr(Xe.length-1)==="%"&&(rr=parseInt(rr)/100),typeof rr=="number"&&Ue("/OpenAction [3 0 R /XYZ null null "+we(rr)+"]")}switch(cn||(cn="continuous"),cn){case"continuous":Ue("/PageLayout /OneColumn");break;case"single":Ue("/PageLayout /SinglePage");break;case"two":case"twoleft":Ue("/PageLayout /TwoColumnLeft");break;case"tworight":Ue("/PageLayout /TwoColumnRight")}on&&Ue("/PageMode /"+on),un.publish("putCatalog"),Ue(">>"),Ue("endobj")},er=S.__private__.putTrailer=function(){Ue("trailer"),Ue("<<"),Ue("/Size "+(Qe+1)),Ue("/Root "+Qe+" 0 R"),Ue("/Info "+(Qe-1)+" 0 R"),g!==null&&Ue("/Encrypt "+Gn.oid+" 0 R"),Ue("/ID [ <"+Fe+"> <"+Fe+"> ]"),Ue(">>")},_r=S.__private__.putHeader=function(){Ue("%PDF-"+P),Ue("%")},fn=S.__private__.putXRef=function(){var k="0000000000";Ue("xref"),Ue("0 "+(Qe+1)),Ue("0000000000 65535 f ");for(var me=1;me<=Qe;me++)typeof Ke[me]=="function"?Ue((k+Ke[me]()).slice(-10)+" 00000 n "):Ke[me]!==void 0?Ue((k+Ke[me]).slice(-10)+" 00000 n "):Ue("0000000000 00000 n ")},pn=S.__private__.buildDocument=function(){Ar(),Ze(et),un.publish("buildDocument"),_r(),qn(),nc(),Nc(),g!==null&&tl(),Ht(),Jt();var k=tt;return fn(),er(),Ue("startxref"),Ue(""+k),Ue("%%EOF"),Ze(De[le]),et.join(`
`)},Fn=S.__private__.getBlob=function(k){return new Blob([Dt(k)],{type:"application/pdf"})},Mn=S.output=S.__private__.output=Ai(function(k,me){switch(typeof(me=me||{})=="string"?me={filename:me}:me.filename=me.filename||"generated.pdf",k){case void 0:return pn();case"save":S.save(me.filename);break;case"arraybuffer":return Dt(pn());case"blob":return Fn(pn());case"bloburi":case"bloburl":if(cs.URL!==void 0&&typeof cs.URL.createObjectURL=="function")return cs.URL&&cs.URL.createObjectURL(Fn(pn()))||void 0;Ua.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Xe="",ot=pn();try{Xe=zL(ot)}catch{Xe=zL(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+me.filename+";base64,"+Xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(cs)==="[object Window]"){var St="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';me.pdfObjectUrl&&(St=me.pdfObjectUrl,qt="");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+St+'"'+qt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(me)+");<\/script></body></html>",$r=cs.open();return $r!==null&&$r.document.write(gr),$r}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(cs)==="[object Window]"){var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+me.filename+'" width="500px" height="400px" /></body></html>',En=cs.open();if(En!==null){En.document.write(An);var qr=this;En.document.documentElement.querySelector("#pdfViewer").onload=function(){En.document.title=me.filename,En.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qr.output("bloburl"))}}return En}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(cs)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",me)+'"></iframe></body></html>',bi=cs.open();if(bi!==null&&(bi.document.write(Dr),bi.document.title=me.filename),bi||typeof safari>"u")return bi;break;case"datauri":case"dataurl":return cs.document.location.href=this.output("datauristring",me);default:return null}}),Kr=function(k){return Array.isArray(Ii)===!0&&Ii.indexOf(k)>-1};switch(n){case"pt":Yt=1;break;case"mm":Yt=72/25.4;break;case"cm":Yt=72/2.54;break;case"in":Yt=72;break;case"px":Yt=Kr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Yt=12;break;case"ex":Yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Yt=n}var Gn=null;st(),_e();var si=function(k){return g!==null?Gn.encryptor(k,0):function(me){return me}},ji=S.__private__.getPageInfo=S.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pr[k].objId,pageNumber:k,pageContext:Pr[k]}},Sr=S.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var me in Pr)if(Pr[me].objId===k)break;return ji(me)},an=S.__private__.getCurrentPageInfo=S.getCurrentPageInfo=function(){return{objId:Pr[le].objId,pageNumber:le,pageContext:Pr[le]}};S.addPage=function(){return Fc.apply(this,arguments),this},S.setPage=function(){return ce.apply(this,arguments),Ze.call(this,De[le]),this},S.insertPage=function(k){return this.addPage(),this.movePage(le,k),this},S.movePage=function(k,me){var Xe,ot;if(k>me){Xe=De[k],ot=Pr[k];for(var St=k;St>me;St--)De[St]=De[St-1],Pr[St]=Pr[St-1];De[me]=Xe,Pr[me]=ot,this.setPage(me)}else if(k<me){Xe=De[k],ot=Pr[k];for(var qt=k;qt<me;qt++)De[qt]=De[qt+1],Pr[qt]=Pr[qt+1];De[me]=Xe,Pr[me]=ot,this.setPage(me)}return this},S.deletePage=function(){return Cc.apply(this,arguments),this},S.__private__.text=S.text=function(k,me,Xe,ot,St){var qt,gr,$r,An,En,qr,Dr,bi,gn,Fi=(ot=ot||{}).scope||this;if(typeof k=="number"&&typeof me=="number"&&(typeof Xe=="string"||Array.isArray(Xe))){var bs=Xe;Xe=me,me=k,k=bs}if(arguments[3]instanceof qe?(K("The transform parameter of text() with a Matrix value"),gn=St):($r=arguments[4],An=arguments[5],wa(Dr=arguments[3])==="object"&&Dr!==null||(typeof $r=="string"&&(An=$r,$r=null),typeof Dr=="string"&&(An=Dr,Dr=null),typeof Dr=="number"&&($r=Dr,Dr=null),ot={flags:Dr,angle:$r,align:An})),isNaN(me)||isNaN(Xe)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Fi;var vn="",lo=!1,Js=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:oa,Yo=Fi.internal.scaleFactor;function nl(hs){return hs=hs.split("	").join(Array(ot.TabLen||9).join(" ")),xs(hs,Dr)}function il(hs){for(var os,Tn=hs.concat(),mi=[],co=Tn.length;co--;)typeof(os=Tn.shift())=="string"?mi.push(os):Array.isArray(hs)&&(os.length===1||os[1]===void 0&&os[2]===void 0)?mi.push(os[0]):mi.push([os[0],os[1],os[2]]);return mi}function so(hs,os){var Tn;if(typeof hs=="string")Tn=os(hs)[0];else if(Array.isArray(hs)){for(var mi,co,to=hs.concat(),Cs=[],Ji=to.length;Ji--;)typeof(mi=to.shift())=="string"?Cs.push(os(mi)[0]):Array.isArray(mi)&&typeof mi[0]=="string"&&(co=os(mi[0],mi[1],mi[2]),Cs.push([co[0],co[1],co[2]]));Tn=Cs}return Tn}var Ga=!1,Ea=!0;if(typeof k=="string")Ga=!0;else if(Array.isArray(k)){var Zo=k.concat();gr=[];for(var Ma,Ki=Zo.length;Ki--;)(typeof(Ma=Zo.shift())!="string"||Array.isArray(Ma)&&typeof Ma[0]!="string")&&(Ea=!1);Ga=Ea}if(Ga===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var us=Kt/Fi.internal.scaleFactor,la=us*(Js-1);switch(ot.baseline){case"bottom":Xe-=la;break;case"top":Xe+=us-la;break;case"hanging":Xe+=us-2*la;break;case"middle":Xe+=us/2-la}if((qr=ot.maxWidth||0)>0&&(typeof k=="string"?k=Fi.splitTextToSize(k,qr):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(hs,os){return hs.concat(Fi.splitTextToSize(os,qr))},[]))),qt={text:k,x:me,y:Xe,options:ot,mutex:{pdfEscape:xs,activeFontKey:ar,fonts:mn,activeFontSize:Kt}},un.publish("preProcessText",qt),k=qt.text,$r=(ot=qt.options).angle,!(gn instanceof qe)&&$r&&typeof $r=="number"){$r*=Math.PI/180,ot.rotationDirection===0&&($r=-$r),V===R.ADVANCED&&($r=-$r);var Yr=Math.cos($r),sc=Math.sin($r);gn=new qe(Yr,sc,-sc,Yr,0,0)}else $r&&$r instanceof qe&&(gn=$r);V!==R.ADVANCED||gn||(gn=Lt),(En=ot.charSpace||qo)!==void 0&&(vn+=oe(Z(En))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(bi=ot.horizontalScale)!==void 0&&(vn+=oe(100*bi)+` Tz
`),ot.lang;var ws=-1,oc=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,yl=Fi.internal.getCurrentPageInfo().pageContext;switch(oc){case 0:case!1:case"fill":ws=0;break;case 1:case!0:case"stroke":ws=1;break;case 2:case"fillThenStroke":ws=2;break;case 3:case"invisible":ws=3;break;case 4:case"fillAndAddForClipping":ws=4;break;case 5:case"strokeAndAddPathForClipping":ws=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ws=6;break;case 7:case"addToPathForClipping":ws=7}var ql=yl.usedRenderingMode!==void 0?yl.usedRenderingMode:-1;ws!==-1?vn+=ws+` Tr
`:ql!==-1&&(vn+=`0 Tr
`),ws!==-1&&(yl.usedRenderingMode=ws),An=ot.align||"left";var ks,Jo=Kt*Js,Aa=Fi.internal.pageSize.getWidth(),Pc=mn[ar];En=ot.charSpace||qo,qr=ot.maxWidth||0,Dr=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var yr=[];if(Object.prototype.toString.call(k)==="[object Array]"){var Mr;gr=il(k),An!=="left"&&(ks=gr.map(function(hs){return Fi.getStringUnitWidth(hs,{font:Pc,charSpace:En,fontSize:Kt,doKerning:!1})*Kt/Yo}));var xn,kn=0;if(An==="right"){me-=ks[0],k=[],Ki=gr.length;for(var ns=0;ns<Ki;ns++)ns===0?(xn=$o(me),Mr=Ys(Xe)):(xn=Z(kn-ks[ns]),Mr=-Jo),k.push([gr[ns],xn,Mr]),kn=ks[ns]}else if(An==="center"){me-=ks[0]/2,k=[],Ki=gr.length;for(var xi=0;xi<Ki;xi++)xi===0?(xn=$o(me),Mr=Ys(Xe)):(xn=Z((kn-ks[xi])/2),Mr=-Jo),k.push([gr[xi],xn,Mr]),kn=ks[xi]}else if(An==="left"){k=[],Ki=gr.length;for(var ms=0;ms<Ki;ms++)k.push(gr[ms])}else{if(An!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');k=[],Ki=gr.length,qr=qr!==0?qr:Aa;for(var ds=0;ds<Ki;ds++)Mr=ds===0?Ys(Xe):-Jo,xn=ds===0?$o(me):0,ds<Ki-1?yr.push(oe(Z((qr-ks[ds])/(gr[ds].split(" ").length-1)))):yr.push(0),k.push([gr[ds],xn,Mr])}}var bo=typeof ot.R2L=="boolean"?ot.R2L:Nr;bo===!0&&(k=so(k,function(hs,os,Tn){return[hs.split("").reverse().join(""),os,Tn]})),qt={text:k,x:me,y:Xe,options:ot,mutex:{pdfEscape:xs,activeFontKey:ar,fonts:mn,activeFontSize:Kt}},un.publish("postProcessText",qt),k=qt.text,lo=qt.mutex.isHex||!1;var Zi=mn[ar].encoding;Zi!=="WinAnsiEncoding"&&Zi!=="StandardEncoding"||(k=so(k,function(hs,os,Tn){return[nl(hs),os,Tn]})),gr=il(k),k=[];for(var Ds,Bs,zs,eo=0,ea=1,ma=Array.isArray(gr[0])?ea:eo,ta="",ra=function(hs,os,Tn){var mi="";return Tn instanceof qe?(Tn=typeof ot.angle=="number"?pt(Tn,new qe(1,0,0,1,hs,os)):pt(new qe(1,0,0,1,hs,os),Tn),V===R.ADVANCED&&(Tn=pt(new qe(1,0,0,-1,0,0),Tn)),mi=Tn.join(" ")+` Tm
`):mi=oe(hs)+" "+oe(os)+` Td
`,mi},$s=0;$s<gr.length;$s++){switch(ta="",ma){case ea:zs=(lo?"<":"(")+gr[$s][0]+(lo?">":")"),Ds=parseFloat(gr[$s][1]),Bs=parseFloat(gr[$s][2]);break;case eo:zs=(lo?"<":"(")+gr[$s]+(lo?">":")"),Ds=$o(me),Bs=Ys(Xe)}yr!==void 0&&yr[$s]!==void 0&&(ta=yr[$s]+` Tw
`),$s===0?k.push(ta+ra(Ds,Bs,gn)+zs):ma===eo?k.push(ta+zs):ma===ea&&k.push(ta+ra(Ds,Bs,gn)+zs)}k=ma===eo?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var ga=`BT
/`;return ga+=ar+" "+Kt+` Tf
`,ga+=oe(Kt*Js)+` TL
`,ga+=_s+`
`,ga+=vn,ga+=k,Ue(ga+="ET"),B[ar]=!0,Fi};var ei=S.__private__.clip=S.clip=function(k){return Ue(k==="evenodd"?"W*":"W"),this};S.clipEvenOdd=function(){return ei("evenodd")},S.__private__.discardPath=S.discardPath=function(){return Ue("n"),this};var Ci=S.__private__.isValidStyle=function(k){var me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(me=!0),me};S.__private__.setDefaultPathOperation=S.setDefaultPathOperation=function(k){return Ci(k)&&(m=k),this};var Ps=S.__private__.getStyle=S.getStyle=function(k){var me=m;switch(k){case"D":case"S":me="S";break;case"F":me="f";break;case"FD":case"DF":me="B";break;case"f":case"f*":case"B":case"B*":me=k}return me},Xs=S.close=function(){return Ue("h"),this};S.stroke=function(){return Ue("S"),this},S.fill=function(k){return Ro("f",k),this},S.fillEvenOdd=function(k){return Ro("f*",k),this},S.fillStroke=function(k){return Ro("B",k),this},S.fillStrokeEvenOdd=function(k){return Ro("B*",k),this};var Ro=function(k,me){wa(me)==="object"?Ni(me,k):Ue(k)},yn=function(k){k===null||V===R.ADVANCED&&k===void 0||(k=Ps(k),Ue(k))};function Zn(k,me,Xe,ot,St){var qt=new Hy(me||this.boundingBox,Xe||this.xStep,ot||this.yStep,this.gState,St||this.matrix);qt.stream=this.stream;var gr=k+"$$"+this.cloneIndex+++"$$";return Ct(gr,qt),qt}var Ni=function(k,me){var Xe=jn[k.key],ot=Bn[Xe];if(ot instanceof Qg)Ue("q"),Ue(ha(me)),ot.gState&&S.setGState(ot.gState),Ue(k.matrix.toString()+" cm"),Ue("/"+Xe+" sh"),Ue("Q");else if(ot instanceof Hy){var St=new qe(1,0,0,-1,0,_o());k.matrix&&(St=St.multiply(k.matrix||Lt),Xe=Zn.call(ot,k.key,k.boundingBox,k.xStep,k.yStep,St).id),Ue("q"),Ue("/Pattern cs"),Ue("/"+Xe+" scn"),ot.gState&&S.setGState(ot.gState),Ue(me),Ue("Q")}},ha=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ms=S.moveTo=function(k,me){return Ue(oe(Z(k))+" "+oe(be(me))+" m"),this},hi=S.lineTo=function(k,me){return Ue(oe(Z(k))+" "+oe(be(me))+" l"),this},jo=S.curveTo=function(k,me,Xe,ot,St,qt){return Ue([oe(Z(k)),oe(be(me)),oe(Z(Xe)),oe(be(ot)),oe(Z(St)),oe(be(qt)),"c"].join(" ")),this};S.__private__.line=S.line=function(k,me,Xe,ot,St){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||!Ci(St))throw new Error("Invalid arguments passed to jsPDF.line");return V===R.COMPAT?this.lines([[Xe-k,ot-me]],k,me,[1,1],St||"S"):this.lines([[Xe-k,ot-me]],k,me,[1,1]).stroke()},S.__private__.lines=S.lines=function(k,me,Xe,ot,St,qt){var gr,$r,An,En,qr,Dr,bi,gn,Fi,bs,vn,lo;if(typeof k=="number"&&(lo=Xe,Xe=me,me=k,k=lo),ot=ot||[1,1],qt=qt||!1,isNaN(me)||isNaN(Xe)||!Array.isArray(k)||!Array.isArray(ot)||!Ci(St)||typeof qt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ms(me,Xe),gr=ot[0],$r=ot[1],En=k.length,bs=me,vn=Xe,An=0;An<En;An++)(qr=k[An]).length===2?(bs=qr[0]*gr+bs,vn=qr[1]*$r+vn,hi(bs,vn)):(Dr=qr[0]*gr+bs,bi=qr[1]*$r+vn,gn=qr[2]*gr+bs,Fi=qr[3]*$r+vn,bs=qr[4]*gr+bs,vn=qr[5]*$r+vn,jo(Dr,bi,gn,Fi,bs,vn));return qt&&Xs(),yn(St),this},S.path=function(k){for(var me=0;me<k.length;me++){var Xe=k[me],ot=Xe.c;switch(Xe.op){case"m":Ms(ot[0],ot[1]);break;case"l":hi(ot[0],ot[1]);break;case"c":jo.apply(this,ot);break;case"h":Xs()}}return this},S.__private__.rect=S.rect=function(k,me,Xe,ot,St){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||!Ci(St))throw new Error("Invalid arguments passed to jsPDF.rect");return V===R.COMPAT&&(ot=-ot),Ue([oe(Z(k)),oe(be(me)),oe(Z(Xe)),oe(Z(ot)),"re"].join(" ")),yn(St),this},S.__private__.triangle=S.triangle=function(k,me,Xe,ot,St,qt,gr){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||isNaN(St)||isNaN(qt)||!Ci(gr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Xe-k,ot-me],[St-Xe,qt-ot],[k-St,me-qt]],k,me,[1,1],gr,!0),this},S.__private__.roundedRect=S.roundedRect=function(k,me,Xe,ot,St,qt,gr){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||isNaN(St)||isNaN(qt)||!Ci(gr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $r=4/3*(Math.SQRT2-1);return St=Math.min(St,.5*Xe),qt=Math.min(qt,.5*ot),this.lines([[Xe-2*St,0],[St*$r,0,St,qt-qt*$r,St,qt],[0,ot-2*qt],[0,qt*$r,-St*$r,qt,-St,qt],[2*St-Xe,0],[-St*$r,0,-St,-qt*$r,-St,-qt],[0,2*qt-ot],[0,-qt*$r,St*$r,-qt,St,-qt]],k+St,me,[1,1],gr,!0),this},S.__private__.ellipse=S.ellipse=function(k,me,Xe,ot,St){if(isNaN(k)||isNaN(me)||isNaN(Xe)||isNaN(ot)||!Ci(St))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qt=4/3*(Math.SQRT2-1)*Xe,gr=4/3*(Math.SQRT2-1)*ot;return Ms(k+Xe,me),jo(k+Xe,me-gr,k+qt,me-ot,k,me-ot),jo(k-qt,me-ot,k-Xe,me-gr,k-Xe,me),jo(k-Xe,me+gr,k-qt,me+ot,k,me+ot),jo(k+qt,me+ot,k+Xe,me+gr,k+Xe,me),yn(St),this},S.__private__.circle=S.circle=function(k,me,Xe,ot){if(isNaN(k)||isNaN(me)||isNaN(Xe)||!Ci(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,me,Xe,Xe,ot)},S.setFont=function(k,me,Xe){return Xe&&(me=se(me,Xe)),ar=At(k,me,{disableWarning:!1}),this};var zl=S.__private__.getFont=S.getFont=function(){return mn[At.apply(S,arguments)]};S.__private__.getFontList=S.getFontList=function(){var k,me,Xe={};for(k in Hn)if(Hn.hasOwnProperty(k))for(me in Xe[k]=[],Hn[k])Hn[k].hasOwnProperty(me)&&Xe[k].push(me);return Xe},S.addFont=function(k,me,Xe,ot,St){var qt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qt.indexOf(arguments[3])!==-1?St=arguments[3]:arguments[3]&&qt.indexOf(arguments[3])==-1&&(Xe=se(Xe,ot)),St=St||"Identity-H",Xo.call(this,k,me,Xe,St)};var oa,yo=t.lineWidth||.200025,As=S.__private__.getLineWidth=S.getLineWidth=function(){return yo},Wc=S.__private__.setLineWidth=S.setLineWidth=function(k){return yo=k,Ue(oe(Z(k))+" w"),this};S.__private__.setLineDash=ss.API.setLineDash=ss.API.setLineDashPattern=function(k,me){if(k=k||[],me=me||0,isNaN(me)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Xe){return oe(Z(Xe))}).join(" "),me=oe(Z(me)),Ue("["+k+"] "+me+" d"),this};var Ql=S.__private__.getLineHeight=S.getLineHeight=function(){return Kt*oa};S.__private__.getLineHeight=S.getLineHeight=function(){return Kt*oa};var Hl=S.__private__.setLineHeightFactor=S.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(oa=k),this},ja=S.__private__.getLineHeightFactor=S.getLineHeightFactor=function(){return oa};Hl(t.lineHeight);var $o=S.__private__.getHorizontalCoordinate=function(k){return Z(k)},Ys=S.__private__.getVerticalCoordinate=function(k){return V===R.ADVANCED?k:Pr[le].mediaBox.topRightY-Pr[le].mediaBox.bottomLeftY-Z(k)},Bo=S.__private__.getHorizontalCoordinateString=S.getHorizontalCoordinateString=function(k){return oe($o(k))},Zs=S.__private__.getVerticalCoordinateString=S.getVerticalCoordinateString=function(k){return oe(Ys(k))},vo=t.strokeColor||"0 G";S.__private__.getStrokeColor=S.getDrawColor=function(){return Lr(vo)},S.__private__.setStrokeColor=S.setDrawColor=function(k,me,Xe,ot){return vo=rn({ch1:k,ch2:me,ch3:Xe,ch4:ot,pdfColorType:"draw",precision:2}),Ue(vo),this};var fa=t.fillColor||"0 g";S.__private__.getFillColor=S.getFillColor=function(){return Lr(fa)},S.__private__.setFillColor=S.setFillColor=function(k,me,Xe,ot){return fa=rn({ch1:k,ch2:me,ch3:Xe,ch4:ot,pdfColorType:"fill",precision:2}),Ue(fa),this};var _s=t.textColor||"0 g",io=S.__private__.getTextColor=S.getTextColor=function(){return Lr(_s)};S.__private__.setTextColor=S.setTextColor=function(k,me,Xe,ot){return _s=rn({ch1:k,ch2:me,ch3:Xe,ch4:ot,pdfColorType:"text",precision:3}),this};var qo=t.charSpace,Eo=S.__private__.getCharSpace=S.getCharSpace=function(){return parseFloat(qo||0)};S.__private__.setCharSpace=S.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qo=k,this};var ic=0;S.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},S.__private__.setLineCap=S.setLineCap=function(k){var me=S.CapJoinStyles[k];if(me===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ic=me,Ue(me+" J"),this};var aa=0;S.__private__.setLineJoin=S.setLineJoin=function(k){var me=S.CapJoinStyles[k];if(me===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return aa=me,Ue(me+" j"),this},S.__private__.setLineMiterLimit=S.__private__.setMiterLimit=S.setLineMiterLimit=S.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ue(oe(Z(k))+" M"),this},S.GState=R4,S.setGState=function(k){(k=typeof k=="string"?Dn[Gi[k]]:rl(null,k)).equals(Rn)||(Ue("/"+k.id+" gs"),Rn=k)};var rl=function(k,me){if(!k||!Gi[k]){var Xe=!1;for(var ot in Dn)if(Dn.hasOwnProperty(ot)&&Dn[ot].equals(me)){Xe=!0;break}if(Xe)me=Dn[ot];else{var St="GS"+(Object.keys(Dn).length+1).toString(10);Dn[St]=me,me.id=St}return k&&(Gi[k]=me.id),un.publish("addGState",me),me}};S.addGState=function(k,me){return rl(k,me),this},S.saveGraphicsState=function(){return Ue("q"),Vi.push({key:ar,size:Kt,color:_s}),this},S.restoreGraphicsState=function(){Ue("Q");var k=Vi.pop();return ar=k.key,Kt=k.size,_s=k.color,Rn=null,this},S.setCurrentTransformationMatrix=function(k){return Ue(k.toString()+" cm"),this},S.comment=function(k){return Ue("#"+k),this};var Uo=function(k,me){var Xe=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Xe},set:function(qt){isNaN(qt)||(Xe=parseFloat(qt))}});var ot=me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function(qt){isNaN(qt)||(ot=parseFloat(qt))}});var St="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return St},set:function(qt){St=qt.toString()}}),this},Va=function(k,me,Xe,ot){Uo.call(this,k,me),this.type="rect";var St=Xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return St},set:function(gr){isNaN(gr)||(St=parseFloat(gr))}});var qt=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qt},set:function(gr){isNaN(gr)||(qt=parseFloat(gr))}}),this},Vl=function(){this.page=Zr,this.currentPage=le,this.pages=De.slice(0),this.pagesContext=Pr.slice(0),this.x=Gr,this.y=Wr,this.matrix=On,this.width=xo(le),this.height=_o(le),this.outputDestination=ir,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){Zr=this.page,le=this.currentPage,Pr=this.pagesContext,De=this.pages,Gr=this.x,Wr=this.y,On=this.matrix,Gl(le,this.width),$l(le,this.height),ir=this.outputDestination};var Wo=function(k,me,Xe,ot,St){We.push(new Vl),Zr=le=0,De=[],Gr=k,Wr=me,On=St,Bl([Xe,ot])},xu=function(k){if(ur[k])We.pop().restore();else{var me=new Vl,Xe="Xo"+(Object.keys(ri).length+1).toString(10);me.id=Xe,ur[k]=Xe,ri[Xe]=me,un.publish("addFormObject",me),We.pop().restore()}};for(var pa in S.beginFormObject=function(k,me,Xe,ot,St){return Wo(k,me,Xe,ot,St),this},S.endFormObject=function(k){return xu(k),this},S.doFormObject=function(k,me){var Xe=ri[ur[k]];return Ue("q"),Ue(me.toString()+" cm"),Ue("/"+Xe.id+" Do"),Ue("Q"),this},S.getFormObject=function(k){var me=ri[ur[k]];return{x:me.x,y:me.y,width:me.width,height:me.height,matrix:me.matrix}},S.save=function(k,me){return k=k||"generated.pdf",(me=me||{}).returnPromise=me.returnPromise||!1,me.returnPromise===!1?(Rg(Fn(pn()),k),typeof Rg.unload=="function"&&cs.setTimeout&&setTimeout(Rg.unload,911),this):new Promise(function(Xe,ot){try{var St=Rg(Fn(pn()),k);typeof Rg.unload=="function"&&cs.setTimeout&&setTimeout(Rg.unload,911),Xe(St)}catch(qt){ot(qt.message)}})},ss.API)ss.API.hasOwnProperty(pa)&&(pa==="events"&&ss.API.events.length?function(k,me){var Xe,ot,St;for(St=me.length-1;St!==-1;St--)Xe=me[St][0],ot=me[St][1],k.subscribe.apply(k,[Xe].concat(typeof ot=="function"?[ot]:ot))}(un,ss.API.events):S[pa]=ss.API[pa]);var xo=S.getPageWidth=function(k){return(Pr[k=k||le].mediaBox.topRightX-Pr[k].mediaBox.bottomLeftX)/Yt},Gl=S.setPageWidth=function(k,me){Pr[k].mediaBox.topRightX=me*Yt+Pr[k].mediaBox.bottomLeftX},_o=S.getPageHeight=function(k){return(Pr[k=k||le].mediaBox.topRightY-Pr[k].mediaBox.bottomLeftY)/Yt},$l=S.setPageHeight=function(k,me){Pr[k].mediaBox.topRightY=me*Yt+Pr[k].mediaBox.bottomLeftY};return S.internal={pdfEscape:xs,getStyle:Ps,getFont:zl,getFontSize:nr,getCharSpace:Eo,getTextColor:io,getLineHeight:Ql,getLineHeightFactor:ja,getLineWidth:As,write:hr,getHorizontalCoordinate:$o,getVerticalCoordinate:Ys,getCoordinateString:Bo,getVerticalCoordinateString:Zs,collections:{},newObject:kt,newAdditionalObject:fr,newObjectDeferred:Wt,newObjectDeferredBegin:Rt,getFilters:sn,putStream:_n,events:un,scaleFactor:Yt,pageSize:{getWidth:function(){return xo(le)},setWidth:function(k){Gl(le,k)},getHeight:function(){return _o(le)},setHeight:function(k){$l(le,k)}},encryptionOptions:g,encryption:Gn,getEncryptor:si,output:Mn,getNumberOfPages:Re,pages:De,out:Ue,f2:we,f3:J,getPageInfo:ji,getPageInfoByObjId:Sr,getCurrentPageInfo:an,getPDFVersion:j,Point:Uo,Rectangle:Va,Matrix:qe,hasHotfix:Kr},Object.defineProperty(S.internal.pageSize,"width",{get:function(){return xo(le)},set:function(k){Gl(le,k)},enumerable:!0,configurable:!0}),Object.defineProperty(S.internal.pageSize,"height",{get:function(){return _o(le)},set:function(k){$l(le,k)},enumerable:!0,configurable:!0}),Pa.call(S,vt),ar="F1",Fc(s,r),un.publish("initialized"),S}xy.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},xy.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},xy.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},xy.prototype.processOwnerPassword=function(t,e){return HL(QL(e).substr(0,5),t)},xy.prototype.encryptor=function(t,e){var r=QL(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return HL(r,n)}},R4.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||wa(t)!==wa(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ss.API={events:[]},ss.version="2.5.1";var Zl=ss.API,OF=1,P0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},py=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ns=function(t){return t.toFixed(2)},KA=function(t){return t.toFixed(5)};Zl.__acroform__={};var Zd=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Az=function(t){return t*OF},cp=function(t){var e=new RK,r=_i.internal.getHeight(t)||0,n=_i.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ns(n)),Number(Ns(r))],e},fCe=Zl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},pCe=Zl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},ACe=Zl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},xc=Zl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ACe(t,e-1)},_c=Zl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return fCe(t,e-1)},bc=Zl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return pCe(t,e-1)},mCe=Zl.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],o=t[1],c=t[2],u=t[3],i={};return i.lowerLeft_X=r(s)||0,i.lowerLeft_Y=n(o+u)||0,i.upperRight_X=r(s+c)||0,i.upperRight_Y=n(o)||0,[Number(Ns(i.lowerLeft_X)),Number(Ns(i.lowerLeft_Y)),Number(Ns(i.upperRight_X)),Number(Ns(i.upperRight_Y))]},gCe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=VL(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Ns(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=cp(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},VL=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(J){return J.split(`
`)}):s.map(function(J){return[J]});var o=r,c=_i.internal.getHeight(t)||0;c=c<0?-c:c;var u=_i.internal.getWidth(t)||0;u=u<0?-u:u;var i=function(J,Z,Ie){if(J+1<s.length){var be=Z+" "+s[J+1][0];return z2(be,t,Ie).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var m,g,C=z2("3",t,o).height,B=t.multiline?c-o:(c-C)/2,S=B+=2,P=0,j=0,D=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+z2(e,t,o=12).width+", FieldWidth:"+u+`
`;break}for(var F="",R=0,V=0;V<s.length;V++)if(s.hasOwnProperty(V)){var Y=!1;if(s[V].length!==1&&D!==s[V].length-1){if((C+2)*(R+2)+2>c)continue e;F+=s[V][D],Y=!0,j=V,V--}else{F=(F+=s[V][D]+" ").substr(F.length-1)==" "?F.substr(0,F.length-1):F;var te=parseInt(V),se=i(te,F,o),oe=V>=s.length-1;if(se&&!oe){F+=" ",D=0;continue}if(se||oe){if(oe)j=te;else if(t.multiline&&(C+2)*(R+2)+2>c)continue e}else{if(!t.multiline||(C+2)*(R+2)+2>c)continue e;j=te}}for(var K="",de=P;de<=j;de++){var we=s[de];if(t.multiline){if(de===j){K+=we[D]+" ",D=(D+1)%we.length;continue}if(de===P){K+=we[we.length-1]+" ";continue}}K+=we[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,g=z2(K,t,o).width,t.textAlign){case"right":m=u-g-2;break;case"center":m=(u-g)/2;break;case"left":default:m=2}e+=Ns(m)+" "+Ns(S)+` Td
`,e+="("+P0(K)+`) Tj
`,e+=-Ns(m)+` 0 Td
`,S=-(o+2),g=0,P=Y?j:j+1,R++,F=""}break}return n.text=e,n.fontSize=o,n},z2=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},yCe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vCe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},xCe=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),wa(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},_Ce=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Gf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(yCe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");OF=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new UK,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var o=n[s];o.objId=void 0,o.hasAnnotation&&vCe(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var o=!n;for(var c in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],i=[],m=u.Rect;if(u.Rect&&(u.Rect=mCe(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=_i.createDefaultAppearanceStream(u),wa(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(i=u.getKeyValueListForStream()),u.Rect=m,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=gCe(u);i.push({key:"AP",value:"<</N "+g+">>"}),s.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var C="";for(var B in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(B)){var S=u.appearanceStreamContent[B];if(C+="/"+B+" ",C+="<<",Object.keys(S).length>=1||Array.isArray(S)){for(var c in S)if(S.hasOwnProperty(c)){var P=S[c];typeof P=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P+" ",s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P)}}else typeof(P=S)=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P,s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P);C+=">>"}i.push({key:"AP",value:`<<
`+C+">>"})}s.internal.putStream({additionalKeyValues:i,objectId:u.objId}),s.internal.out("endobj")}o&&xCe(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},OK=Zl.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(c){return c};if(Array.isArray(t)){for(var s="[",o=0;o<t.length;o++)switch(o!==0&&(s+=" "),wa(t[o])){case"boolean":case"number":case"object":s+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+P0(n(t[o].toString()))+")"):s+=t[o].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},tT=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+P0(n(t))+")"},mp=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};mp.prototype.toString=function(){return this.objId+" 0 R"},mp.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},mp.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:OK(s,this.objId,this.scope)}):s instanceof mp?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var RK=function(){mp.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Zd(RK,mp);var UK=function(){mp.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+P0(r(t))+")"}},set:function(r){t=r}})};Zd(UK,mp);var Gf=function t(){mp.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute F supplied.');e=F}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!xc(e,3)},set:function(F){F?this.F=_c(e,3):this.F=bc(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute Ff supplied.');r=F}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(F){n=F!==void 0?F:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(F){n[0]=F}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(F){n[1]=F}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(F){n[2]=F}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(F){n[3]=F}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(F){switch(F){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=F;break;default:throw new Error('Invalid value "'+F+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof U4)return;o="FieldObject"+t.FieldNum++}var F=function(R){return R};return this.scope&&(F=this.scope.internal.getEncryptor(this.objId)),"("+P0(F(o))+")"},set:function(F){o=F.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(F){o=F}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(F){c=F}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(F){u=F}});var i=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return i},set:function(F){i=F}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/OF:m},set:function(F){m=F}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(F){g=F}});var C="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!C||this instanceof U4||this instanceof h0))return tT(C,this.objId,this.scope)},set:function(F){F=F.toString(),C=F}});var B=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(B)return this instanceof tu?B:tT(B,this.objId,this.scope)},set:function(F){F=F.toString(),B=this instanceof tu?F:F.substr(0,1)==="("?py(F.substr(1,F.length-2)):py(F)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tu?py(B.substr(1,B.length-1)):B},set:function(F){F=F.toString(),B=this instanceof tu?"/"+F:F}});var S=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(S)return S},set:function(F){this.V=F}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof tu?S:tT(S,this.objId,this.scope)},set:function(F){F=F.toString(),S=this instanceof tu?F:F.substr(0,1)==="("?py(F.substr(1,F.length-2)):py(F)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tu?py(S.substr(1,S.length-1)):S},set:function(F){F=F.toString(),S=this instanceof tu?"/"+F:F}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(F){F=!!F,j=F}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(F){P=F}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,1)},set:function(F){F?this.Ff=_c(this.Ff,1):this.Ff=bc(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,2)},set:function(F){F?this.Ff=_c(this.Ff,2):this.Ff=bc(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,3)},set:function(F){F?this.Ff=_c(this.Ff,3):this.Ff=bc(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(F){if([0,1,2].indexOf(F)===-1)throw new Error('Invalid value "'+F+'" for attribute Q supplied.');D=F}}),Object.defineProperty(this,"textAlign",{get:function(){var F;switch(D){case 0:default:F="left";break;case 1:F="center";break;case 2:F="right"}return F},configurable:!0,enumerable:!0,set:function(F){switch(F){case"right":case 2:D=2;break;case"center":case 1:D=1;break;case"left":case 0:default:D=0}}})};Zd(Gf,mp);var r1=function(){Gf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return OK(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(o,c,u){u||(u=1);for(var i,m=[];i=c.exec(o);)m.push(i[u]);return m}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,18)},set:function(r){r?this.Ff=_c(this.Ff,18):this.Ff=bc(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=_c(this.Ff,19):this.Ff=bc(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,20)},set:function(r){r?(this.Ff=_c(this.Ff,20),e.sort()):this.Ff=bc(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,22)},set:function(r){r?this.Ff=_c(this.Ff,22):this.Ff=bc(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,23)},set:function(r){r?this.Ff=_c(this.Ff,23):this.Ff=bc(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,27)},set:function(r){r?this.Ff=_c(this.Ff,27):this.Ff=bc(this.Ff,27)}}),this.hasAppearanceStream=!1};Zd(r1,Gf);var n1=function(){r1.call(this),this.fontName="helvetica",this.combo=!1};Zd(n1,r1);var i1=function(){n1.call(this),this.combo=!0};Zd(i1,n1);var b5=function(){i1.call(this),this.edit=!0};Zd(b5,i1);var tu=function(){Gf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,15)},set:function(r){r?this.Ff=_c(this.Ff,15):this.Ff=bc(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,16)},set:function(r){r?this.Ff=_c(this.Ff,16):this.Ff=bc(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,17)},set:function(r){r?this.Ff=_c(this.Ff,17):this.Ff=bc(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,26)},set:function(r){r?this.Ff=_c(this.Ff,26):this.Ff=bc(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+P0(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){wa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Zd(tu,Gf);var w5=function(){tu.call(this),this.pushButton=!0};Zd(w5,tu);var s1=function(){tu.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Zd(s1,tu);var U4=function(){var t,e;Gf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),n)c.push("/"+o+" ("+P0(s(n[o]))+")");return c.push(">>"),c.join(`
`)},set:function(s){wa(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_i.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zd(U4,Gf),s1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},s1.prototype.createOption=function(t){var e=new U4;return e.Parent=this,e.optionName=t,this.Kids.push(e),bCe.call(this.scope,e),e};var C5=function(){tu.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_i.CheckBox.createAppearanceStream()};Zd(C5,tu);var h0=function(){Gf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,13)},set:function(e){e?this.Ff=_c(this.Ff,13):this.Ff=bc(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,21)},set:function(e){e?this.Ff=_c(this.Ff,21):this.Ff=bc(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,23)},set:function(e){e?this.Ff=_c(this.Ff,23):this.Ff=bc(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,24)},set:function(e){e?this.Ff=_c(this.Ff,24):this.Ff=bc(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,25)},set:function(e){e?this.Ff=_c(this.Ff,25):this.Ff=bc(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,26)},set:function(e){e?this.Ff=_c(this.Ff,26):this.Ff=bc(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zd(h0,Gf);var S5=function(){h0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,14)},set:function(t){t?this.Ff=_c(this.Ff,14):this.Ff=bc(this.Ff,14)}}),this.password=!0};Zd(S5,h0);var _i={CheckBox:{createAppearanceStream:function(){return{N:{On:_i.CheckBox.YesNormal},D:{On:_i.CheckBox.YesPushDown,Off:_i.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=cp(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),o=VL(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Ns(_i.internal.getWidth(t))+" "+Ns(_i.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ns(o.fontSize)+" Tf "+s),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=cp(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],o=_i.internal.getHeight(t),c=_i.internal.getWidth(t),u=VL(t,t.caption);return s.push("1 g"),s.push("0 0 "+Ns(c)+" "+Ns(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Ns(c-1)+" "+Ns(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Ns(u.fontSize)+" Tf "+n),s.push(u.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=cp(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ns(_i.internal.getWidth(t))+" "+Ns(_i.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:_i.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=_i.RadioButton.Circle.YesNormal,e.D[t]=_i.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=cp(t);e.scope=t.scope;var r=[],n=_i.internal.getWidth(t)<=_i.internal.getHeight(t)?_i.internal.getWidth(t)/4:_i.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=_i.internal.Bezier_C,o=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+KA(_i.internal.getWidth(t)/2)+" "+KA(_i.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=cp(t);e.scope=t.scope;var r=[],n=_i.internal.getWidth(t)<=_i.internal.getHeight(t)?_i.internal.getWidth(t)/4:_i.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*_i.internal.Bezier_C).toFixed(5)),c=Number((n*_i.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+KA(_i.internal.getWidth(t)/2)+" "+KA(_i.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+KA(_i.internal.getWidth(t)/2)+" "+KA(_i.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),r.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),r.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),r.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=cp(t);e.scope=t.scope;var r=[],n=_i.internal.getWidth(t)<=_i.internal.getHeight(t)?_i.internal.getWidth(t)/4:_i.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*_i.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+KA(_i.internal.getWidth(t)/2)+" "+KA(_i.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:_i.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=_i.RadioButton.Cross.YesNormal,e.D[t]=_i.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=cp(t);e.scope=t.scope;var r=[],n=_i.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Ns(_i.internal.getWidth(t)-2)+" "+Ns(_i.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ns(n.x1.x)+" "+Ns(n.x1.y)+" m"),r.push(Ns(n.x2.x)+" "+Ns(n.x2.y)+" l"),r.push(Ns(n.x4.x)+" "+Ns(n.x4.y)+" m"),r.push(Ns(n.x3.x)+" "+Ns(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=cp(t);e.scope=t.scope;var r=_i.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ns(_i.internal.getWidth(t))+" "+Ns(_i.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ns(_i.internal.getWidth(t)-2)+" "+Ns(_i.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ns(r.x1.x)+" "+Ns(r.x1.y)+" m"),n.push(Ns(r.x2.x)+" "+Ns(r.x2.y)+" l"),n.push(Ns(r.x4.x)+" "+Ns(r.x4.y)+" m"),n.push(Ns(r.x3.x)+" "+Ns(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=cp(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ns(_i.internal.getWidth(t))+" "+Ns(_i.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};_i.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=_i.internal.getWidth(t),r=_i.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},_i.internal.getWidth=function(t){var e=0;return wa(t)==="object"&&(e=Az(t.Rect[2])),e},_i.internal.getHeight=function(t){var e=0;return wa(t)==="object"&&(e=Az(t.Rect[3])),e};var bCe=Zl.addField=function(t){if(_Ce(this,t),!(t instanceof Gf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Zl.AcroFormChoiceField=r1,Zl.AcroFormListBox=n1,Zl.AcroFormComboBox=i1,Zl.AcroFormEditBox=b5,Zl.AcroFormButton=tu,Zl.AcroFormPushButton=w5,Zl.AcroFormRadioButton=s1,Zl.AcroFormCheckBox=C5,Zl.AcroFormTextField=h0,Zl.AcroFormPasswordField=S5,Zl.AcroFormAppearance=_i,Zl.AcroForm={ChoiceField:r1,ListBox:n1,ComboBox:i1,EditBox:b5,Button:tu,PushButton:w5,RadioButton:s1,CheckBox:C5,TextField:h0,PasswordField:S5,Appearance:_i},ss.AcroForm={ChoiceField:r1,ListBox:n1,ComboBox:i1,EditBox:b5,Button:tu,PushButton:w5,RadioButton:s1,CheckBox:C5,TextField:h0,PasswordField:S5,Appearance:_i};function zK(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(J,Z){var Ie,be,He,Fe,ve,_e=e;if((Z=Z||e)==="RGBA"||J.data!==void 0&&J.data instanceof Uint8ClampedArray&&"height"in J&&"width"in J)return"RGBA";if(se(J))for(ve in r)for(He=r[ve],Ie=0;Ie<He.length;Ie+=1){for(Fe=!0,be=0;be<He[Ie].length;be+=1)if(He[Ie][be]!==void 0&&He[Ie][be]!==J[be]){Fe=!1;break}if(Fe===!0){_e=ve;break}}else for(ve in r)for(He=r[ve],Ie=0;Ie<He.length;Ie+=1){for(Fe=!0,be=0;be<He[Ie].length;be+=1)if(He[Ie][be]!==void 0&&He[Ie][be]!==J.charCodeAt(be)){Fe=!1;break}if(Fe===!0){_e=ve;break}}return _e===e&&Z!==e&&(_e=Z),_e},s=function J(Z){for(var Ie=this.internal.write,be=this.internal.putStream,He=(0,this.internal.getFilters)();He.indexOf("FlateEncode")!==-1;)He.splice(He.indexOf("FlateEncode"),1);Z.objectId=this.internal.newObject();var Fe=[];if(Fe.push({key:"Type",value:"/XObject"}),Fe.push({key:"Subtype",value:"/Image"}),Fe.push({key:"Width",value:Z.width}),Fe.push({key:"Height",value:Z.height}),Z.colorSpace===D.INDEXED?Fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Z.palette.length/3-1)+" "+("sMask"in Z&&Z.sMask!==void 0?Z.objectId+2:Z.objectId+1)+" 0 R]"}):(Fe.push({key:"ColorSpace",value:"/"+Z.colorSpace}),Z.colorSpace===D.DEVICE_CMYK&&Fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Fe.push({key:"BitsPerComponent",value:Z.bitsPerComponent}),"decodeParameters"in Z&&Z.decodeParameters!==void 0&&Fe.push({key:"DecodeParms",value:"<<"+Z.decodeParameters+">>"}),"transparency"in Z&&Array.isArray(Z.transparency)){for(var ve="",_e=0,ze=Z.transparency.length;_e<ze;_e++)ve+=Z.transparency[_e]+" "+Z.transparency[_e]+" ";Fe.push({key:"Mask",value:"["+ve+"]"})}Z.sMask!==void 0&&Fe.push({key:"SMask",value:Z.objectId+1+" 0 R"});var Ne=Z.filter!==void 0?["/"+Z.filter]:void 0;if(be({data:Z.data,additionalKeyValues:Fe,alreadyAppliedFilters:Ne,objectId:Z.objectId}),Ie("endobj"),"sMask"in Z&&Z.sMask!==void 0){var st="/Predictor "+Z.predictor+" /Colors 1 /BitsPerComponent "+Z.bitsPerComponent+" /Columns "+Z.width,ie={width:Z.width,height:Z.height,colorSpace:"DeviceGray",bitsPerComponent:Z.bitsPerComponent,decodeParameters:st,data:Z.sMask};"filter"in Z&&(ie.filter=Z.filter),J.call(this,ie)}if(Z.colorSpace===D.INDEXED){var le=this.internal.newObject();be({data:K(new Uint8Array(Z.palette)),objectId:le}),Ie("endobj")}},o=function(){var J=this.internal.collections.addImage_images;for(var Z in J)s.call(this,J[Z])},c=function(){var J,Z=this.internal.collections.addImage_images,Ie=this.internal.write;for(var be in Z)Ie("/I"+(J=Z[be]).index,J.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},i=function(){var J=this.internal.collections.addImage_images;return u.call(this),J},m=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(J){return typeof t["process"+J.toUpperCase()]=="function"},C=function(J){return wa(J)==="object"&&J.nodeType===1},B=function(J,Z){if(J.nodeName==="IMG"&&J.hasAttribute("src")){var Ie=""+J.getAttribute("src");if(Ie.indexOf("data:image/")===0)return t_(unescape(Ie).split("base64,").pop());var be=t.loadFile(Ie,!0);if(be!==void 0)return be}if(J.nodeName==="CANVAS"){if(J.width===0||J.height===0)throw new Error("Given canvas must have data. Canvas width: "+J.width+", height: "+J.height);var He;switch(Z){case"PNG":He="image/png";break;case"WEBP":He="image/webp";break;case"JPEG":case"JPG":default:He="image/jpeg"}return t_(J.toDataURL(He,1).split("base64,").pop())}},S=function(J){var Z=this.internal.collections.addImage_images;if(Z){for(var Ie in Z)if(J===Z[Ie].alias)return Z[Ie]}},P=function(J,Z,Ie){return J||Z||(J=-96,Z=-96),J<0&&(J=-1*Ie.width*72/J/this.internal.scaleFactor),Z<0&&(Z=-1*Ie.height*72/Z/this.internal.scaleFactor),J===0&&(J=Z*Ie.width/Ie.height),Z===0&&(Z=J*Ie.height/Ie.width),[J,Z]},j=function(J,Z,Ie,be,He,Fe){var ve=P.call(this,Ie,be,He),_e=this.internal.getCoordinateString,ze=this.internal.getVerticalCoordinateString,Ne=i.call(this);if(Ie=ve[0],be=ve[1],Ne[He.index]=He,Fe){Fe*=Math.PI/180;var st=Math.cos(Fe),ie=Math.sin(Fe),le=function(fe){return fe.toFixed(4)},pe=[le(st),le(ie),le(-1*ie),le(st),0,0,"cm"]}this.internal.write("q"),Fe?(this.internal.write([1,"0","0",1,_e(J),ze(Z+be),"cm"].join(" ")),this.internal.write(pe.join(" ")),this.internal.write([_e(Ie),"0","0",_e(be),"0","0","cm"].join(" "))):this.internal.write([_e(Ie),"0","0",_e(be),_e(J),ze(Z+be),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+He.index+" Do"),this.internal.write("Q")},D=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=t.__addimage__.sHashCode=function(J){var Z,Ie,be=0;if(typeof J=="string")for(Ie=J.length,Z=0;Z<Ie;Z++)be=(be<<5)-be+J.charCodeAt(Z),be|=0;else if(se(J))for(Ie=J.byteLength/2,Z=0;Z<Ie;Z++)be=(be<<5)-be+J[Z],be|=0;return be},V=t.__addimage__.validateStringAsBase64=function(J){(J=J||"").toString().trim();var Z=!0;return J.length===0&&(Z=!1),J.length%4!=0&&(Z=!1),/^[A-Za-z0-9+/]+$/.test(J.substr(0,J.length-2))===!1&&(Z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(J.substr(-2))===!1&&(Z=!1),Z},Y=t.__addimage__.extractImageFromDataUrl=function(J){var Z=(J=J||"").split("base64,"),Ie=null;if(Z.length===2){var be=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Z[0]);Array.isArray(be)&&(Ie={mimeType:be[1],charset:be[2],data:Z[1]})}return Ie},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(J){return te()&&J instanceof ArrayBuffer};var se=t.__addimage__.isArrayBufferView=function(J){return te()&&typeof Uint32Array<"u"&&(J instanceof Int8Array||J instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&J instanceof Uint8ClampedArray||J instanceof Int16Array||J instanceof Uint16Array||J instanceof Int32Array||J instanceof Uint32Array||J instanceof Float32Array||J instanceof Float64Array)},oe=t.__addimage__.binaryStringToUint8Array=function(J){for(var Z=J.length,Ie=new Uint8Array(Z),be=0;be<Z;be++)Ie[be]=J.charCodeAt(be);return Ie},K=t.__addimage__.arrayBufferToBinaryString=function(J){for(var Z="",Ie=se(J)?J:new Uint8Array(J),be=0;be<Ie.length;be+=8192)Z+=String.fromCharCode.apply(null,Ie.subarray(be,be+8192));return Z};t.addImage=function(){var J,Z,Ie,be,He,Fe,ve,_e,ze;if(typeof arguments[1]=="number"?(Z=e,Ie=arguments[1],be=arguments[2],He=arguments[3],Fe=arguments[4],ve=arguments[5],_e=arguments[6],ze=arguments[7]):(Z=arguments[1],Ie=arguments[2],be=arguments[3],He=arguments[4],Fe=arguments[5],ve=arguments[6],_e=arguments[7],ze=arguments[8]),wa(J=arguments[0])==="object"&&!C(J)&&"imageData"in J){var Ne=J;J=Ne.imageData,Z=Ne.format||Z||e,Ie=Ne.x||Ie||0,be=Ne.y||be||0,He=Ne.w||Ne.width||He,Fe=Ne.h||Ne.height||Fe,ve=Ne.alias||ve,_e=Ne.compression||_e,ze=Ne.rotation||Ne.angle||ze}var st=this.internal.getFilters();if(_e===void 0&&st.indexOf("FlateEncode")!==-1&&(_e="SLOW"),isNaN(Ie)||isNaN(be))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var ie=de.call(this,J,Z,ve,_e);return j.call(this,Ie,be,He,Fe,ie,ze),this};var de=function(J,Z,Ie,be){var He,Fe,ve;if(typeof J=="string"&&n(J)===e){J=unescape(J);var _e=we(J,!1);(_e!==""||(_e=t.loadFile(J,!0))!==void 0)&&(J=_e)}if(C(J)&&(J=B(J,Z)),Z=n(J,Z),!g(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(((ve=Ie)==null||ve.length===0)&&(Ie=function(ze){return typeof ze=="string"||se(ze)?R(ze):se(ze.data)?R(ze.data):null}(J)),(He=S.call(this,Ie))||(te()&&(J instanceof Uint8Array||Z==="RGBA"||(Fe=J,J=oe(J))),He=this["process"+Z.toUpperCase()](J,m.call(this),Ie,function(ze){return ze&&typeof ze=="string"&&(ze=ze.toUpperCase()),ze in t.image_compression?ze:F.NONE}(be),Fe)),!He)throw new Error("An unknown error occurred whilst processing the image.");return He},we=t.__addimage__.convertBase64ToBinaryString=function(J,Z){var Ie;Z=typeof Z!="boolean"||Z;var be,He="";if(typeof J=="string"){be=(Ie=Y(J))!==null?Ie.data:J;try{He=t_(be)}catch(Fe){if(Z)throw V(be)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return He};t.getImageProperties=function(J){var Z,Ie,be="";if(C(J)&&(J=B(J)),typeof J=="string"&&n(J)===e&&((be=we(J,!1))===""&&(be=t.loadFile(J)||""),J=be),Ie=n(J),!g(Ie))throw new Error("addImage does not support files of type '"+Ie+"', please ensure that a plugin for '"+Ie+"' support is added.");if(!te()||J instanceof Uint8Array||(J=oe(J)),!(Z=this["process"+Ie.toUpperCase()](J)))throw new Error("An unknown error occurred whilst processing the image");return Z.fileType=Ie,Z}})(ss.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ss.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,o,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,i=this.internal.getPageInfoByObjId(r.objId),m=r.pageContext.annotations,g=!1,C=0;C<m.length&&!g;C++)switch((n=m[C]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var B=0;B<m.length;B++){n=m[B];var S=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),F=this.internal.getEncryptor(j.objId),R=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+S(F(n.contents))+")",o+=" /Popup "+D.objId+" 0 R",o+=" /P "+i.objId+" 0 R",o+=" /T ("+S(F(R))+") >>",j.content=o;var V=j.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+V,n.open&&(o+=" /Open true"),o+=" >>",D.content=o,this.internal.write(j.objId,"0 R",D.objId,"0 R");break;case"freetext":s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var Y=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+S(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var te=this.annotations._nameMap[n.options.name];n.options.pageNumber=te.page,n.options.top=te.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+S(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var se=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+se+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,o,c){var u=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:i(r),y:m(n),w:i(r+s),h:m(n+o)},options:c,type:"link"})},t.textWithLink=function(r,n,s,o){var c,u,i=this.getTextWidth(r),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(r,u).length;c=Math.ceil(m*g)}else u=i,c=m;return this.text(r,n,s,o),s+=.2*m,o.align==="center"&&(n-=i/2),o.align==="right"&&(n-=i),this.link(n,s-m,u,c,o),i},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ss.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},u=t.__arabicParser__.isArabicEndLetter=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length<=2},i=t.__arabicParser__.isArabicAlfLetter=function(j){return c(j)&&s.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=1};var m=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=3};var g=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length==4},C=t.__arabicParser__.resolveLigatures=function(j){var D=0,F=r,R="",V=0;for(D=0;D<j.length;D+=1)F[j.charCodeAt(D)]!==void 0?(V++,typeof(F=F[j.charCodeAt(D)])=="number"&&(R+=String.fromCharCode(F),F=r,V=0),D===j.length-1&&(F=r,R+=j.charAt(D-(V-1)),D-=V-1,V=0)):(F=r,R+=j.charAt(D-V),D-=V,V=0);return R};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var B=t.__arabicParser__.getCorrectForm=function(j,D,F){return c(j)?o(j)===!1?-1:!m(j)||!c(D)&&!c(F)||!c(F)&&u(D)||u(j)&&!c(D)||u(j)&&i(D)||u(j)&&u(D)?0:g(j)&&c(D)&&!u(D)&&c(F)&&m(F)?3:u(j)||!c(F)?1:2:-1},S=function(j){var D=0,F=0,R=0,V="",Y="",te="",se=(j=j||"").split("\\s+"),oe=[];for(D=0;D<se.length;D+=1){for(oe.push(""),F=0;F<se[D].length;F+=1)V=se[D][F],Y=se[D][F-1],te=se[D][F+1],c(V)?(R=B(V,Y,te),oe[D]+=R!==-1?String.fromCharCode(e[V.charCodeAt(0)][R]):V):oe[D]+=V;oe[D]=C(oe[D])}return oe.join(" ")},P=t.__arabicParser__.processArabic=t.processArabic=function(){var j,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,F=[];if(Array.isArray(D)){var R=0;for(F=[],R=0;R<D.length;R+=1)Array.isArray(D[R])?F.push([S(D[R][0]),D[R][1],D[R][2]]):F.push([S(D[R])]);j=F}else j=S(D);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",P])}(ss.API),ss.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ss.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var i=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(j){i=j}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(j){m=j}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var C=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return C},set:function(j){C=j}});var B=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return B},set:function(j){B=j}});var S=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return S},set:function(j){S=j}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(j){P=j}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(i){return n.call(this),this.internal.__cell__.headerFunction=typeof i=="function"?i:void 0,this},t.getTextDimensions=function(i,m){n.call(this);var g=(m=m||{}).fontSize||this.getFontSize(),C=m.font||this.getFont(),B=m.scaleFactor||this.internal.scaleFactor,S=0,P=0,j=0,D=this;if(!Array.isArray(i)&&typeof i!="string"){if(typeof i!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");i=String(i)}var F=m.maxWidth;F>0?typeof i=="string"?i=this.splitTextToSize(i,F):Object.prototype.toString.call(i)==="[object Array]"&&(i=i.reduce(function(V,Y){return V.concat(D.splitTextToSize(Y,F))},[])):i=Array.isArray(i)?i:[i];for(var R=0;R<i.length;R++)S<(j=this.getStringUnitWidth(i[R],{font:C})*g)&&(S=j);return S!==0&&(P=i.length),{w:S/=B,h:Math.max((P*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/B,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var i=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(i.left,i.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var i;i=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var m=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,C=this.internal.__cell__.margins||e,B=this.internal.__cell__.tableHeaderRow,S=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===i.lineNumber?(i.x=(m.x||0)+(m.width||0),i.y=m.y||0):m.y+m.height+i.height+C.bottom>this.getPageHeight()?(this.cellAddPage(),i.y=C.top,S&&B&&(this.printHeaderRow(i.lineNumber,!0),i.y+=B[0].height)):i.y=m.y+m.height||i.y),i.text[0]!==void 0&&(this.rect(i.x,i.y,i.width,i.height,r===!0?"FD":void 0),i.align==="right"?this.text(i.text,i.x+i.width-g,i.y+g,{align:"right",baseline:"top"}):i.align==="center"?this.text(i.text,i.x+i.width/2,i.y+g,{align:"center",baseline:"top",maxWidth:i.width-g-g}):this.text(i.text,i.x+g,i.y+g,{align:"left",baseline:"top",maxWidth:i.width-g-g})),this.internal.__cell__.lastCell=i,this};t.table=function(i,m,g,C,B){if(n.call(this),!g)throw new Error("No data for PDF table.");var S,P,j,D,F=[],R=[],V=[],Y={},te={},se=[],oe=[],K=(B=B||{}).autoSize||!1,de=B.printHeaders!==!1,we=B.css&&B.css["font-size"]!==void 0?16*B.css["font-size"]:B.fontSize||12,J=B.margins||Object.assign({width:this.getPageWidth()},e),Z=typeof B.padding=="number"?B.padding:3,Ie=B.headerBackgroundColor||"#c8c8c8",be=B.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=de,this.internal.__cell__.margins=J,this.internal.__cell__.table_font_size=we,this.internal.__cell__.padding=Z,this.internal.__cell__.headerBackgroundColor=Ie,this.internal.__cell__.headerTextColor=be,this.setFontSize(we),C==null)R=F=Object.keys(g[0]),V=F.map(function(){return"left"});else if(Array.isArray(C)&&wa(C[0])==="object")for(F=C.map(function(Ne){return Ne.name}),R=C.map(function(Ne){return Ne.prompt||Ne.name||""}),V=C.map(function(Ne){return Ne.align||"left"}),S=0;S<C.length;S+=1)te[C[S].name]=C[S].width*(19.049976/25.4);else Array.isArray(C)&&typeof C[0]=="string"&&(R=F=C,V=F.map(function(){return"left"}));if(K||Array.isArray(C)&&typeof C[0]=="string")for(S=0;S<F.length;S+=1){for(Y[D=F[S]]=g.map(function(Ne){return Ne[D]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(R[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=Y[D],this.setFont(void 0,"normal"),j=0;j<P.length;j+=1)se.push(this.getTextDimensions(P[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[D]=Math.max.apply(null,se)+Z+Z,se=[]}if(de){var He={};for(S=0;S<F.length;S+=1)He[F[S]]={},He[F[S]].text=R[S],He[F[S]].align=V[S];var Fe=u.call(this,He,te);oe=F.map(function(Ne){return new o(i,m,te[Ne],Fe,He[Ne].text,void 0,He[Ne].align)}),this.setTableHeaderRow(oe),this.printHeaderRow(1,!1)}var ve=C.reduce(function(Ne,st){return Ne[st.name]=st.align,Ne},{});for(S=0;S<g.length;S+=1){"rowStart"in B&&B.rowStart instanceof Function&&B.rowStart({row:S,data:g[S]},this);var _e=u.call(this,g[S],te);for(j=0;j<F.length;j+=1){var ze=g[S][F[j]];"cellStart"in B&&B.cellStart instanceof Function&&B.cellStart({row:S,col:j,data:ze},this),c.call(this,new o(i,m,te[F[j]],_e,ze,S+2,ve[F[j]]))}}return this.internal.__cell__.table_x=i,this.internal.__cell__.table_y=m,this};var u=function(i,m){var g=this.internal.__cell__.padding,C=this.internal.__cell__.table_font_size,B=this.internal.scaleFactor;return Object.keys(i).map(function(S){var P=i[S];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,m[S]-g-g)},this).map(function(S){return this.getLineHeightFactor()*S.length*C/B+g+g},this).reduce(function(S,P){return Math.max(S,P)},0)};t.setTableHeaderRow=function(i){n.call(this),this.internal.__cell__.tableHeaderRow=i},t.printHeaderRow=function(i,m){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var C=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(C[0],C[1],C[2],C[3],void 0,-1)}this.setFont(void 0,"bold");for(var B=[],S=0;S<this.internal.__cell__.tableHeaderRow.length;S+=1){g=this.internal.__cell__.tableHeaderRow[S].clone(),m&&(g.y=this.internal.__cell__.margins.top||0,B.push(g)),g.lineNumber=i;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(P)}B.length>0&&this.setTableHeaderRow(B),this.setFont(void 0,"normal"),r=!1}}(ss.API);var QK={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},HK=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],GL=zK(HK),VK=[100,200,300,400,500,600,700,800,900],wCe=zK(VK);function $L(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return QK[o=o||"normal"]?o:"normal"}(t.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(o){return typeof GL[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function mz(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var CCe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},gz={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yz(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function SCe(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},CCe,r.genericFontFamilies||{}),o=null,c=null,u=0;u<e.length;++u)if(s[(o=$L(e[u])).family]&&(o.family=s[o.family]),t.hasOwnProperty(o.family)){c=t[o.family];break}if(!(c=c||t[n]))throw new Error("Could not find a font-family for the rule '"+yz(o)+"' and default family '"+n+"'.");if(c=function(i,m){if(m[i])return m[i];var g=GL[i],C=g<=GL.normal?-1:1,B=mz(m,HK,g,C);if(!B)throw new Error("Could not find a matching font-stretch value for "+i);return B}(o.stretch,c),c=function(i,m){if(m[i])return m[i];for(var g=QK[i],C=0;C<g.length;++C)if(m[g[C]])return m[g[C]];throw new Error("Could not find a matching font-style for "+i)}(o.style,c),!(c=function(i,m){if(m[i])return m[i];if(i===400&&m[500])return m[500];if(i===500&&m[400])return m[400];var g=wCe[i],C=mz(m,VK,g,i<400?-1:1);if(!C)throw new Error("Could not find a matching font-weight for value "+i);return C}(o.weight,c)))throw new Error("Failed to resolve a font for the rule '"+yz(o)+"'.");return c}function vz(t){return t.trimLeft()}function BCe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function ECe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Q2,xz,_z,rT=["times"];(function(t){var e,r,n,s,o,c,u,i,m,g=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new i,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new c,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new c,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new C(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,i=this.internal.Matrix,m=new g}]);var C=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var le=ie;Object.defineProperty(this,"pdf",{get:function(){return le}});var pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return pe},set:function(Ze){pe=!!Ze}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(Ze){fe=!!Ze}});var Qe=0;Object.defineProperty(this,"posX",{get:function(){return Qe},set:function(Ze){isNaN(Ze)||(Qe=Ze)}});var Ke=0;Object.defineProperty(this,"posY",{get:function(){return Ke},set:function(Ze){isNaN(Ze)||(Ke=Ze)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Ze){var Ue;typeof Ze=="number"?Ue=[Ze,Ze,Ze,Ze]:((Ue=new Array(4))[0]=Ze[0],Ue[1]=Ze.length>=2?Ze[1]:Ue[0],Ue[2]=Ze.length>=3?Ze[2]:Ue[0],Ue[3]=Ze.length>=4?Ze[3]:Ue[1]),m.margin=Ue}});var et=!1;Object.defineProperty(this,"autoPaging",{get:function(){return et},set:function(Ze){et=Ze}});var tt=0;Object.defineProperty(this,"lastBreak",{get:function(){return tt},set:function(Ze){tt=Ze}});var bt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return bt},set:function(Ze){bt=Ze}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Ze){Ze instanceof g&&(m=Ze)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Ze){m.path=Ze}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Ze){De=Ze}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ze){var Ue;Ue=B(Ze),this.ctx.fillStyle=Ue.style,this.ctx.isFillTransparent=Ue.a===0,this.ctx.fillOpacity=Ue.a,this.pdf.setFillColor(Ue.r,Ue.g,Ue.b,{a:Ue.a}),this.pdf.setTextColor(Ue.r,Ue.g,Ue.b,{a:Ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ze){var Ue=B(Ze);this.ctx.strokeStyle=Ue.style,this.ctx.isStrokeTransparent=Ue.a===0,this.ctx.strokeOpacity=Ue.a,Ue.a===0?this.pdf.setDrawColor(255,255,255):(Ue.a,this.pdf.setDrawColor(Ue.r,Ue.g,Ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ze){["butt","round","square"].indexOf(Ze)!==-1&&(this.ctx.lineCap=Ze,this.pdf.setLineCap(Ze))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ze){isNaN(Ze)||(this.ctx.lineWidth=Ze,this.pdf.setLineWidth(Ze))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ze){["bevel","round","miter"].indexOf(Ze)!==-1&&(this.ctx.lineJoin=Ze,this.pdf.setLineJoin(Ze))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ze){isNaN(Ze)||(this.ctx.miterLimit=Ze,this.pdf.setMiterLimit(Ze))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ze){this.ctx.textBaseline=Ze}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ze){["right","end","center","left","start"].indexOf(Ze)!==-1&&(this.ctx.textAlign=Ze)}});var Mt=null;function ir(Ze,Ue){if(Mt===null){var hr=function(Dt){var vt=[];return Object.keys(Dt).forEach(function(Kt){Dt[Kt].forEach(function(rr){var nr=null;switch(rr){case"bold":nr={family:Kt,weight:"bold"};break;case"italic":nr={family:Kt,style:"italic"};break;case"bolditalic":nr={family:Kt,weight:"bold",style:"italic"};break;case"":case"normal":nr={family:Kt}}nr!==null&&(nr.ref={name:Kt,style:rr},vt.push(nr))})}),vt}(Ze.getFontList());Mt=function(Dt){for(var vt={},Kt=0;Kt<Dt.length;++Kt){var rr=$L(Dt[Kt]),nr=rr.family,Nr=rr.stretch,on=rr.style,Ir=rr.weight;vt[nr]=vt[nr]||{},vt[nr][Nr]=vt[nr][Nr]||{},vt[nr][Nr][on]=vt[nr][Nr][on]||{},vt[nr][Nr][on][Ir]=rr}return vt}(hr.concat(Ue))}return Mt}var Ar=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ar},set:function(Ze){Mt=null,Ar=Ze}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ze){var Ue;if(this.ctx.font=Ze,(Ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ze))!==null){var hr=Ue[1],Dt=(Ue[2],Ue[3]),vt=Ue[4],Kt=(Ue[5],Ue[6]),rr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vt)[2];vt=Math.floor(rr==="px"?parseFloat(vt)*this.pdf.internal.scaleFactor:rr==="em"?parseFloat(vt)*this.pdf.getFontSize():parseFloat(vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vt);var nr=function(ln){var ar,Yt,Gr=[],Wr=ln.trim();if(Wr==="")return rT;if(Wr in gz)return[gz[Wr]];for(;Wr!=="";){switch(Yt=null,ar=(Wr=vz(Wr)).charAt(0)){case'"':case"'":Yt=BCe(Wr.substring(1),ar);break;default:Yt=ECe(Wr)}if(Yt===null||(Gr.push(Yt[0]),(Wr=vz(Yt[1]))!==""&&Wr.charAt(0)!==","))return rT;Wr=Wr.replace(/^,/,"")}return Gr}(Kt);if(this.fontFaces){var Nr=SCe(ir(this.pdf,this.fontFaces),nr.map(function(ln){return{family:ln,stretch:"normal",weight:Dt,style:hr}}));this.pdf.setFont(Nr.ref.name,Nr.ref.style)}else{var on="";(Dt==="bold"||parseInt(Dt,10)>=700||hr==="bold")&&(on="bold"),hr==="italic"&&(on+="italic"),on.length===0&&(on="normal");for(var Ir="",cn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Sn=0;Sn<nr.length;Sn++){if(this.pdf.internal.getFont(nr[Sn],on,{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn];break}if(on==="bolditalic"&&this.pdf.internal.getFont(nr[Sn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ir=nr[Sn],on="bold";else if(this.pdf.internal.getFont(nr[Sn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn],on="normal";break}}if(Ir===""){for(var Ln=0;Ln<nr.length;Ln++)if(cn[nr[Ln]]){Ir=cn[nr[Ln]];break}}Ir=Ir===""?"Times":Ir,this.pdf.setFont(Ir,on)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ze){this.ctx.globalCompositeOperation=Ze}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ze){this.ctx.globalAlpha=Ze}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ze){this.ctx.lineDashOffset=Ze,st.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ze){this.ctx.lineDash=Ze,st.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ze){this.ctx.ignoreClearRect=!!Ze}})};C.prototype.setLineDash=function(ie){this.lineDash=ie},C.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},C.prototype.fill=function(){Y.call(this,"fill",!1)},C.prototype.stroke=function(){Y.call(this,"stroke",!1)},C.prototype.beginPath=function(){this.path=[{type:"begin"}]},C.prototype.moveTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var pe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"mt",x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(ie,le)},C.prototype.closePath=function(){var ie=new c(0,0),le=0;for(le=this.path.length-1;le!==-1;le--)if(this.path[le].type==="begin"&&wa(this.path[le+1])==="object"&&typeof this.path[le+1].x=="number"){ie=new c(this.path[le+1].x,this.path[le+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(ie.x,ie.y)},C.prototype.lineTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var pe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"lt",x:pe.x,y:pe.y}),this.ctx.lastPoint=new c(pe.x,pe.y)},C.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},C.prototype.quadraticCurveTo=function(ie,le,pe,fe){if(isNaN(pe)||isNaN(fe)||isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Qe=this.ctx.transform.applyToPoint(new c(pe,fe)),Ke=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"qct",x1:Ke.x,y1:Ke.y,x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new c(Qe.x,Qe.y)},C.prototype.bezierCurveTo=function(ie,le,pe,fe,Qe,Ke){if(isNaN(Qe)||isNaN(Ke)||isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ua.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var et=this.ctx.transform.applyToPoint(new c(Qe,Ke)),tt=this.ctx.transform.applyToPoint(new c(ie,le)),bt=this.ctx.transform.applyToPoint(new c(pe,fe));this.path.push({type:"bct",x1:tt.x,y1:tt.y,x2:bt.x,y2:bt.y,x:et.x,y:et.y}),this.ctx.lastPoint=new c(et.x,et.y)},C.prototype.arc=function(ie,le,pe,fe,Qe,Ke){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe)||isNaN(Qe))throw Ua.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ke=!!Ke,!this.ctx.transform.isIdentity){var et=this.ctx.transform.applyToPoint(new c(ie,le));ie=et.x,le=et.y;var tt=this.ctx.transform.applyToPoint(new c(0,pe)),bt=this.ctx.transform.applyToPoint(new c(0,0));pe=Math.sqrt(Math.pow(tt.x-bt.x,2)+Math.pow(tt.y-bt.y,2))}Math.abs(Qe-fe)>=2*Math.PI&&(fe=0,Qe=2*Math.PI),this.path.push({type:"arc",x:ie,y:le,radius:pe,startAngle:fe,endAngle:Qe,counterclockwise:Ke})},C.prototype.arcTo=function(ie,le,pe,fe,Qe){throw new Error("arcTo not implemented.")},C.prototype.rect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ua.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,le),this.lineTo(ie+pe,le),this.lineTo(ie+pe,le+fe),this.lineTo(ie,le+fe),this.lineTo(ie,le),this.lineTo(ie+pe,le),this.lineTo(ie,le)},C.prototype.fillRect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ua.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!S.call(this)){var Qe={};this.lineCap!=="butt"&&(Qe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Qe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,le,pe,fe),this.fill(),Qe.hasOwnProperty("lineCap")&&(this.lineCap=Qe.lineCap),Qe.hasOwnProperty("lineJoin")&&(this.lineJoin=Qe.lineJoin)}},C.prototype.strokeRect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ua.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(ie,le,pe,fe),this.stroke())},C.prototype.clearRect=function(ie,le,pe,fe){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe))throw Ua.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,le,pe,fe))},C.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,pe=0;pe<this.pdf.internal.getNumberOfPages();pe++)this.pdf.setPage(pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(le),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},C.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,pe=0;pe<this.pdf.internal.getNumberOfPages();pe++)this.pdf.setPage(pe+1),this.pdf.internal.out("Q");this.pdf.setPage(le),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},C.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var B=function(ie){var le,pe,fe,Qe;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))le=0,pe=0,fe=0,Qe=0;else{var Ke=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(Ke!==null)le=parseInt(Ke[1]),pe=parseInt(Ke[2]),fe=parseInt(Ke[3]),Qe=1;else if((Ke=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)le=parseInt(Ke[1]),pe=parseInt(Ke[2]),fe=parseInt(Ke[3]),Qe=parseFloat(Ke[4]);else{if(Qe=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var et=new MK(ie);ie=et.ok?et.toHex():"#000000"}ie.length===4?(le=ie.substring(1,2),le+=le,pe=ie.substring(2,3),pe+=pe,fe=ie.substring(3,4),fe+=fe):(le=ie.substring(1,3),pe=ie.substring(3,5),fe=ie.substring(5,7)),le=parseInt(le,16),pe=parseInt(pe,16),fe=parseInt(fe,16)}}return{r:le,g:pe,b:fe,a:Qe,style:ie}},S=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};C.prototype.fillText=function(ie,le,pe,fe){if(isNaN(le)||isNaN(pe)||typeof ie!="string")throw Ua.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!S.call(this)){var Qe=_e(this.ctx.transform.rotation),Ke=this.ctx.transform.scaleX;Z.call(this,{text:ie,x:le,y:pe,scale:Ke,angle:Qe,align:this.textAlign,maxWidth:fe})}},C.prototype.strokeText=function(ie,le,pe,fe){if(isNaN(le)||isNaN(pe)||typeof ie!="string")throw Ua.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){fe=isNaN(fe)?void 0:fe;var Qe=_e(this.ctx.transform.rotation),Ke=this.ctx.transform.scaleX;Z.call(this,{text:ie,x:le,y:pe,scale:Ke,renderingMode:"stroke",angle:Qe,align:this.textAlign,maxWidth:fe})}},C.prototype.measureText=function(ie){if(typeof ie!="string")throw Ua.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var le=this.pdf,pe=this.pdf.internal.scaleFactor,fe=le.internal.getFontSize(),Qe=le.getStringUnitWidth(ie)*fe/le.internal.scaleFactor,Ke=function(et){var tt=(et=et||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return tt}}),this};return new Ke({width:Qe*=Math.round(96*pe/72*1e4)/1e4})},C.prototype.scale=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var pe=new i(ie,0,0,le,0,0);this.ctx.transform=this.ctx.transform.multiply(pe)},C.prototype.rotate=function(ie){if(isNaN(ie))throw Ua.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var le=new i(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(le)},C.prototype.translate=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var pe=new i(1,0,0,1,ie,le);this.ctx.transform=this.ctx.transform.multiply(pe)},C.prototype.transform=function(ie,le,pe,fe,Qe,Ke){if(isNaN(ie)||isNaN(le)||isNaN(pe)||isNaN(fe)||isNaN(Qe)||isNaN(Ke))throw Ua.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var et=new i(ie,le,pe,fe,Qe,Ke);this.ctx.transform=this.ctx.transform.multiply(et)},C.prototype.setTransform=function(ie,le,pe,fe,Qe,Ke){ie=isNaN(ie)?1:ie,le=isNaN(le)?0:le,pe=isNaN(pe)?0:pe,fe=isNaN(fe)?1:fe,Qe=isNaN(Qe)?0:Qe,Ke=isNaN(Ke)?0:Ke,this.ctx.transform=new i(ie,le,pe,fe,Qe,Ke)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};C.prototype.drawImage=function(ie,le,pe,fe,Qe,Ke,et,tt,bt){var De=this.pdf.getImageProperties(ie),Mt=1,ir=1,Ar=1,Ze=1;fe!==void 0&&tt!==void 0&&(Ar=tt/fe,Ze=bt/Qe,Mt=De.width/fe*tt/fe,ir=De.height/Qe*bt/Qe),Ke===void 0&&(Ke=le,et=pe,le=0,pe=0),fe!==void 0&&tt===void 0&&(tt=fe,bt=Qe),fe===void 0&&tt===void 0&&(tt=De.width,bt=De.height);for(var Ue,hr=this.ctx.transform.decompose(),Dt=_e(hr.rotate.shx),vt=new i,Kt=(vt=(vt=(vt=vt.multiply(hr.translate)).multiply(hr.skew)).multiply(hr.scale)).applyToRectangle(new u(Ke-le*Ar,et-pe*Ze,fe*Mt,Qe*ir)),rr=D.call(this,Kt),nr=[],Nr=0;Nr<rr.length;Nr+=1)nr.indexOf(rr[Nr])===-1&&nr.push(rr[Nr]);if(V(nr),this.autoPaging)for(var on=nr[0],Ir=nr[nr.length-1],cn=on;cn<Ir+1;cn++){this.pdf.setPage(cn);var Sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ln=cn===1?this.posY+this.margin[0]:this.margin[0],ln=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ar=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Yt=cn===1?0:ln+(cn-2)*ar;if(this.ctx.clip_path.length!==0){var Gr=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Ue,this.posX+this.margin[3],-Yt+Ln+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Gr}var Wr=JSON.parse(JSON.stringify(Kt));Wr=R([Wr],this.posX+this.margin[3],-Yt+Ln+this.ctx.prevPageLastElemOffset)[0];var On=(cn>on||cn<Ir)&&j.call(this);On&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sn,ar,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",Wr.x,Wr.y,Wr.w,Wr.h,null,null,Dt),On&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,Dt)};var D=function(ie,le,pe){var fe=[];le=le||this.pdf.internal.pageSize.width,pe=pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Qe=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":fe.push(Math.floor((ie.y+Qe)/pe)+1);break;case"arc":fe.push(Math.floor((ie.y+Qe-ie.radius)/pe)+1),fe.push(Math.floor((ie.y+Qe+ie.radius)/pe)+1);break;case"qct":var Ke=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);fe.push(Math.floor((Ke.y+Qe)/pe)+1),fe.push(Math.floor((Ke.y+Ke.h+Qe)/pe)+1);break;case"bct":var et=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);fe.push(Math.floor((et.y+Qe)/pe)+1),fe.push(Math.floor((et.y+et.h+Qe)/pe)+1);break;case"rect":fe.push(Math.floor((ie.y+Qe)/pe)+1),fe.push(Math.floor((ie.y+ie.h+Qe)/pe)+1)}for(var tt=0;tt<fe.length;tt+=1)for(;this.pdf.internal.getNumberOfPages()<fe[tt];)F.call(this);return fe},F=function(){var ie=this.fillStyle,le=this.strokeStyle,pe=this.font,fe=this.lineCap,Qe=this.lineWidth,Ke=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=le,this.font=pe,this.lineCap=fe,this.lineWidth=Qe,this.lineJoin=Ke},R=function(ie,le,pe){for(var fe=0;fe<ie.length;fe++)switch(ie[fe].type){case"bct":ie[fe].x2+=le,ie[fe].y2+=pe;case"qct":ie[fe].x1+=le,ie[fe].y1+=pe;case"mt":case"lt":case"arc":default:ie[fe].x+=le,ie[fe].y+=pe}return ie},V=function(ie){return ie.sort(function(le,pe){return le-pe})},Y=function(ie,le){for(var pe,fe,Qe=this.fillStyle,Ke=this.strokeStyle,et=this.lineCap,tt=this.lineWidth,bt=Math.abs(tt*this.ctx.transform.scaleX),De=this.lineJoin,Mt=JSON.parse(JSON.stringify(this.path)),ir=JSON.parse(JSON.stringify(this.path)),Ar=[],Ze=0;Ze<ir.length;Ze++)if(ir[Ze].x!==void 0)for(var Ue=D.call(this,ir[Ze]),hr=0;hr<Ue.length;hr+=1)Ar.indexOf(Ue[hr])===-1&&Ar.push(Ue[hr]);for(var Dt=0;Dt<Ar.length;Dt++)for(;this.pdf.internal.getNumberOfPages()<Ar[Dt];)F.call(this);if(V(Ar),this.autoPaging)for(var vt=Ar[0],Kt=Ar[Ar.length-1],rr=vt;rr<Kt+1;rr++){this.pdf.setPage(rr),this.fillStyle=Qe,this.strokeStyle=Ke,this.lineCap=et,this.lineWidth=bt,this.lineJoin=De;var nr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Nr=rr===1?this.posY+this.margin[0]:this.margin[0],on=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],cn=rr===1?0:on+(rr-2)*Ir;if(this.ctx.clip_path.length!==0){var Sn=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(pe,this.posX+this.margin[3],-cn+Nr+this.ctx.prevPageLastElemOffset),te.call(this,ie,!0),this.path=Sn}if(fe=JSON.parse(JSON.stringify(Mt)),this.path=R(fe,this.posX+this.margin[3],-cn+Nr+this.ctx.prevPageLastElemOffset),le===!1||rr===0){var Ln=(rr>vt||rr<Kt)&&j.call(this);Ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nr,Ir,null).clip().discardPath()),te.call(this,ie,le),Ln&&this.pdf.restoreGraphicsState()}this.lineWidth=tt}else this.lineWidth=bt,te.call(this,ie,le),this.lineWidth=tt;this.path=Mt},te=function(ie,le){if((ie!=="stroke"||le||!P.call(this))&&(ie==="stroke"||le||!S.call(this))){for(var pe,fe,Qe=[],Ke=this.path,et=0;et<Ke.length;et++){var tt=Ke[et];switch(tt.type){case"begin":Qe.push({begin:!0});break;case"close":Qe.push({close:!0});break;case"mt":Qe.push({start:tt,deltas:[],abs:[]});break;case"lt":var bt=Qe.length;if(Ke[et-1]&&!isNaN(Ke[et-1].x)&&(pe=[tt.x-Ke[et-1].x,tt.y-Ke[et-1].y],bt>0)){for(;bt>=0;bt--)if(Qe[bt-1].close!==!0&&Qe[bt-1].begin!==!0){Qe[bt-1].deltas.push(pe),Qe[bt-1].abs.push(tt);break}}break;case"bct":pe=[tt.x1-Ke[et-1].x,tt.y1-Ke[et-1].y,tt.x2-Ke[et-1].x,tt.y2-Ke[et-1].y,tt.x-Ke[et-1].x,tt.y-Ke[et-1].y],Qe[Qe.length-1].deltas.push(pe);break;case"qct":var De=Ke[et-1].x+2/3*(tt.x1-Ke[et-1].x),Mt=Ke[et-1].y+2/3*(tt.y1-Ke[et-1].y),ir=tt.x+2/3*(tt.x1-tt.x),Ar=tt.y+2/3*(tt.y1-tt.y),Ze=tt.x,Ue=tt.y;pe=[De-Ke[et-1].x,Mt-Ke[et-1].y,ir-Ke[et-1].x,Ar-Ke[et-1].y,Ze-Ke[et-1].x,Ue-Ke[et-1].y],Qe[Qe.length-1].deltas.push(pe);break;case"arc":Qe.push({deltas:[],abs:[],arc:!0}),Array.isArray(Qe[Qe.length-1].abs)&&Qe[Qe.length-1].abs.push(tt)}}fe=le?null:ie==="stroke"?"stroke":"fill";for(var hr=!1,Dt=0;Dt<Qe.length;Dt++)if(Qe[Dt].arc)for(var vt=Qe[Dt].abs,Kt=0;Kt<vt.length;Kt++){var rr=vt[Kt];rr.type==="arc"?K.call(this,rr.x,rr.y,rr.radius,rr.startAngle,rr.endAngle,rr.counterclockwise,void 0,le,!hr):Ie.call(this,rr.x,rr.y),hr=!0}else if(Qe[Dt].close===!0)this.pdf.internal.out("h"),hr=!1;else if(Qe[Dt].begin!==!0){var nr=Qe[Dt].start.x,Nr=Qe[Dt].start.y;be.call(this,Qe[Dt].deltas,nr,Nr),hr=!0}fe&&de.call(this,fe),le&&we.call(this)}},se=function(ie){var le=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,pe=le*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-pe;case"top":return ie+le-pe;case"hanging":return ie+le-2*pe;case"middle":return ie+le/2-pe;case"ideographic":return ie;case"alphabetic":default:return ie}},oe=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};C.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(le,pe){this.colorStops.push([le,pe])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},C.prototype.createPattern=function(){return this.createLinearGradient()},C.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(ie,le,pe,fe,Qe,Ke,et,tt,bt){for(var De=Fe.call(this,pe,fe,Qe,Ke),Mt=0;Mt<De.length;Mt++){var ir=De[Mt];Mt===0&&(bt?J.call(this,ir.x1+ie,ir.y1+le):Ie.call(this,ir.x1+ie,ir.y1+le)),He.call(this,ie,le,ir.x2,ir.y2,ir.x3,ir.y3,ir.x4,ir.y4)}tt?we.call(this):de.call(this,et)},de=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},we=function(){this.pdf.clip(),this.pdf.discardPath()},J=function(ie,le){this.pdf.internal.out(r(ie)+" "+n(le)+" m")},Z=function(ie){var le;switch(ie.align){case"right":case"end":le="right";break;case"center":le="center";break;case"left":case"start":default:le="left"}var pe=this.pdf.getTextDimensions(ie.text),fe=se.call(this,ie.y),Qe=oe.call(this,fe)-pe.h,Ke=this.ctx.transform.applyToPoint(new c(ie.x,fe)),et=this.ctx.transform.decompose(),tt=new i;tt=(tt=(tt=tt.multiply(et.translate)).multiply(et.skew)).multiply(et.scale);for(var bt,De,Mt,ir=this.ctx.transform.applyToRectangle(new u(ie.x,fe,pe.w,pe.h)),Ar=tt.applyToRectangle(new u(ie.x,Qe,pe.w,pe.h)),Ze=D.call(this,Ar),Ue=[],hr=0;hr<Ze.length;hr+=1)Ue.indexOf(Ze[hr])===-1&&Ue.push(Ze[hr]);if(V(Ue),this.autoPaging)for(var Dt=Ue[0],vt=Ue[Ue.length-1],Kt=Dt;Kt<vt+1;Kt++){this.pdf.setPage(Kt);var rr=Kt===1?this.posY+this.margin[0]:this.margin[0],nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Nr=this.pdf.internal.pageSize.height-this.margin[2],on=Nr-this.margin[0],Ir=this.pdf.internal.pageSize.width-this.margin[1],cn=Ir-this.margin[3],Sn=Kt===1?0:nr+(Kt-2)*on;if(this.ctx.clip_path.length!==0){var Ln=this.path;bt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(bt,this.posX+this.margin[3],-1*Sn+rr),te.call(this,"fill",!0),this.path=Ln}var ln=R([JSON.parse(JSON.stringify(Ar))],this.posX+this.margin[3],-Sn+rr+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*ie.scale),Mt=this.lineWidth,this.lineWidth=Mt*ie.scale);var ar=this.autoPaging!=="text";if(ar||ln.y+ln.h<=Nr){if(ar||ln.y>=rr&&ln.x<=Ir){var Yt=ar?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||Ir-ln.x)[0],Gr=R([JSON.parse(JSON.stringify(ir))],this.posX+this.margin[3],-Sn+rr+this.ctx.prevPageLastElemOffset)[0],Wr=ar&&(Kt>Dt||Kt<vt)&&j.call(this);Wr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,on,null).clip().discardPath()),this.pdf.text(Yt,Gr.x,Gr.y,{angle:ie.angle,align:le,renderingMode:ie.renderingMode}),Wr&&this.pdf.restoreGraphicsState()}}else ln.y<Nr&&(this.ctx.prevPageLastElemOffset+=Nr-ln.y);ie.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Mt)}else ie.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*ie.scale),Mt=this.lineWidth,this.lineWidth=Mt*ie.scale),this.pdf.text(ie.text,Ke.x+this.posX,Ke.y+this.posY,{angle:ie.angle,align:le,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Mt)},Ie=function(ie,le,pe,fe){pe=pe||0,fe=fe||0,this.pdf.internal.out(r(ie+pe)+" "+n(le+fe)+" l")},be=function(ie,le,pe){return this.pdf.lines(ie,le,pe,null,null)},He=function(ie,le,pe,fe,Qe,Ke,et,tt){this.pdf.internal.out([e(s(pe+ie)),e(o(fe+le)),e(s(Qe+ie)),e(o(Ke+le)),e(s(et+ie)),e(o(tt+le)),"c"].join(" "))},Fe=function(ie,le,pe,fe){for(var Qe=2*Math.PI,Ke=Math.PI/2;le>pe;)le-=Qe;var et=Math.abs(pe-le);et<Qe&&fe&&(et=Qe-et);for(var tt=[],bt=fe?-1:1,De=le;et>1e-5;){var Mt=De+bt*Math.min(et,Ke);tt.push(ve.call(this,ie,De,Mt)),et-=Math.abs(Mt-De),De=Mt}return tt},ve=function(ie,le,pe){var fe=(pe-le)/2,Qe=ie*Math.cos(fe),Ke=ie*Math.sin(fe),et=Qe,tt=-Ke,bt=et*et+tt*tt,De=bt+et*Qe+tt*Ke,Mt=4/3*(Math.sqrt(2*bt*De)-De)/(et*Ke-tt*Qe),ir=et-Mt*tt,Ar=tt+Mt*et,Ze=ir,Ue=-Ar,hr=fe+le,Dt=Math.cos(hr),vt=Math.sin(hr);return{x1:ie*Math.cos(le),y1:ie*Math.sin(le),x2:ir*Dt-Ar*vt,y2:ir*vt+Ar*Dt,x3:Ze*Dt-Ue*vt,y3:Ze*vt+Ue*Dt,x4:ie*Math.cos(pe),y4:ie*Math.sin(pe)}},_e=function(ie){return 180*ie/Math.PI},ze=function(ie,le,pe,fe,Qe,Ke){var et=ie+.5*(pe-ie),tt=le+.5*(fe-le),bt=Qe+.5*(pe-Qe),De=Ke+.5*(fe-Ke),Mt=Math.min(ie,Qe,et,bt),ir=Math.max(ie,Qe,et,bt),Ar=Math.min(le,Ke,tt,De),Ze=Math.max(le,Ke,tt,De);return new u(Mt,Ar,ir-Mt,Ze-Ar)},Ne=function(ie,le,pe,fe,Qe,Ke,et,tt){var bt,De,Mt,ir,Ar,Ze,Ue,hr,Dt,vt,Kt,rr,nr,Nr,on=pe-ie,Ir=fe-le,cn=Qe-pe,Sn=Ke-fe,Ln=et-Qe,ln=tt-Ke;for(De=0;De<41;De++)Dt=(Ue=(Mt=ie+(bt=De/40)*on)+bt*((Ar=pe+bt*cn)-Mt))+bt*(Ar+bt*(Qe+bt*Ln-Ar)-Ue),vt=(hr=(ir=le+bt*Ir)+bt*((Ze=fe+bt*Sn)-ir))+bt*(Ze+bt*(Ke+bt*ln-Ze)-hr),De==0?(Kt=Dt,rr=vt,nr=Dt,Nr=vt):(Kt=Math.min(Kt,Dt),rr=Math.min(rr,vt),nr=Math.max(nr,Dt),Nr=Math.max(Nr,vt));return new u(Math.round(Kt),Math.round(rr),Math.round(nr-Kt),Math.round(Nr-rr))},st=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,le,pe=(ie=this.ctx.lineDash,le=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:le}));this.prevLineDash!==pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=pe)}}})(ss.API),function(t){var e=function(o){var c,u,i,m,g,C,B,S,P,j;for(u=[],i=0,m=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;m>i;i+=4)(g=(o.charCodeAt(i)<<24)+(o.charCodeAt(i+1)<<16)+(o.charCodeAt(i+2)<<8)+o.charCodeAt(i+3))!==0?(C=(g=((g=((g=((g=(g-(j=g%85))/85)-(P=g%85))/85)-(S=g%85))/85)-(B=g%85))/85)%85,u.push(C+33,B+33,S+33,P+33,j+33)):u.push(122);return function(D,F){for(var R=F;R>0;R--)D.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var c,u,i,m,g,C=String,B="length",S=255,P="charCodeAt",j="slice",D="replace";for(o[j](-2),o=o[j](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),i=[],m=0,g=(o+=c="uuuuu"[j](o[B]%5||5))[B];g>m;m+=5)u=52200625*(o[P](m)-33)+614125*(o[P](m+1)-33)+7225*(o[P](m+2)-33)+85*(o[P](m+3)-33)+(o[P](m+4)-33),i.push(S&u>>24,S&u>>16,S&u>>8,S&u);return function(F,R){for(var V=R;V>0;V--)F.pop()}(i,c[B]),C.fromCharCode.apply(C,i)},n=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",i=0;i<o.length;i+=2)u+=String.fromCharCode("0x"+(o[i]+o[i+1]));return u},s=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return o=(c=UL(c)).reduce(function(i,m){return i+String.fromCharCode(m)},"")};t.processDataByFilters=function(o,c){var u=0,i=o||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":i=r(i),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=e(i),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=n(i),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=i.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=s(i),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:i,reverseChain:m.reverse().join(" ")}}}(ss.API),function(t){t.loadFile=function(e,r,n){return function(s,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=function(i,m,g){var C=new XMLHttpRequest,B=0,S=function(P){var j=P.length,D=[],F=String.fromCharCode;for(B=0;B<j;B+=1)D.push(F(255&P.charCodeAt(B)));return D.join("")};if(C.open("GET",i,!m),C.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(C.onload=function(){C.status===200?g(S(this.responseText)):g(void 0)}),C.send(null),m&&C.status===200)return S(C.responseText)}(s,o,c)}catch{}return u}(e,r,n)},t.loadImageFile=t.loadFile}(ss.API),function(t){function e(){return(cs.html2canvas?Promise.resolve(cs.html2canvas):w1(()=>Promise.resolve().then(()=>MF),void 0)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(cs.DOMPurify?Promise.resolve(cs.DOMPurify):w1(()=>import("./purify.es-DGIRlouP.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=wa(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(c,u){var i=document.createElement(c);for(var m in u.className&&(i.className=u.className),u.innerHTML&&u.dompurify&&(i.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)i.style[m]=u.style[m];return i},o=function c(u){var i=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),i);return m=(m=m.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(i){switch(n(i)){case"string":return"string";case"element":return i.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(i){return this.set({src:s("div",{innerHTML:c,dompurify:i})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function i(m,g){for(var C=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),B=m.firstChild;B;B=B.nextSibling)g!==!0&&B.nodeType===1&&B.nodeName==="SCRIPT"||C.appendChild(i(B,g));return m.nodeType===1&&(m.nodeName==="CANVAS"?(C.width=m.width,C.height=m.height,C.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(C.value=m.value),C.addEventListener("load",function(){C.scrollTop=m.scrollTop,C.scrollLeft=m.scrollLeft},!0)),C}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=Object.assign({},this.opt.html2canvas);return delete i.onrendered,u(this.prop.container,i)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=this.opt.jsPDF,m=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,i.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,i.context2d.posX=this.opt.x,i.context2d.posY=this.opt.y,i.context2d.margin=this.opt.margin,i.context2d.fontFaces=m,m)for(var B=0;B<m.length;++B){var S=m[B],P=S.src.find(function(j){return j.format==="truetype"});P&&i.addFont(P.url,S.ref.name,S.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,i.context2d.save(!0),u(this.prop.container,C)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,i){return(i=i||"pdf").toLowerCase()==="img"||i.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(i){if(i in o.template.prop)return function(){this.prop[i]=c[i]};switch(i){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[i]=c[i]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var i=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(i):i})},o.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(i,m){return Math.floor(i*m/72*96)}return this.then(function(){(c=c||ss.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,i,m){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),i!=null&&(this.progress.n=i),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,i,m){return this.setProgress(c?this.progress.val+c:null,u||null,i?this.progress.n+i:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(c,u){var i=this;return this.thenCore(c,u,function(m,g){return i.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(C){return i.updateProgress(null,m),C}).then(m,g).then(function(C){return i.updateProgress(1),C})})},o.prototype.thenCore=function(c,u,i){i=i||Promise.prototype.then,c&&(c=c.bind(this)),u&&(u=u.bind(this));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),g=i.call(m,c,u);return o.convert(g,this.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(i){u=u.thenCore(i)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ss.getPageSize=function(c,u,i){if(wa(c)==="object"){var m=c;c=m.orientation,u=m.unit||u,i=m.format||i}u=u||"mm",i=i||"a4",c=(""+(c||"P")).toLowerCase();var g,C=(""+i).toLowerCase(),B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var S,P=0,j=0;if(B.hasOwnProperty(C))P=B[C][1]/g,j=B[C][0]/g;else try{P=i[1],j=i[0]}catch{throw new Error("Invalid format: "+i)}if(c==="p"||c==="portrait")c="p",j>P&&(S=j,j=P,P=S);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",P>j&&(S=j,j=P,P=S)}return{width:j,height:P,unit:u,k:g,orientation:c}},t.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map($L):null;var i=new o(u);return u.worker?i:i.from(c).doCallback()}}(ss.API),ss.API.addJS=function(t){return _z=t,this.internal.events.subscribe("postPutResources",function(){Q2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Q2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xz=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_z+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Q2!==void 0&&xz!==void 0&&this.internal.out("/Names <</JavaScript "+Q2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),o=0;o<s.length;o++){var c=s[o],u=n.exec(c);if(u!=null){var i=u[1];r.internal.newObjectDeferredBegin(i,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,g=[];for(o=0;o<m;o++){var C=r.internal.newObject();g.push(C);var B=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+B.objId+" 0 R /XYZ null null null]>> endobj")}var S=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<g.length;o++)r.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+S+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,o){var c={title:s,options:o,children:[]};return n==null&&(n=this.root),n.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var c=n.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var i=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var m=0;m<n.children.length;m++)this.renderItems(n.children[m])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var o=0;o<s.children.length;o++)n.count++,this.count_r(n,s.children[o]);return n.count}}])}(ss.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,o,c,u){var i,m=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(i=function(C){for(var B,S=256*C.charCodeAt(4)+C.charCodeAt(5),P=C.length,j={width:0,height:0,numcomponents:1},D=4;D<P;D+=2){if(D+=S,e.indexOf(C.charCodeAt(D+1))!==-1){B=256*C.charCodeAt(D+5)+C.charCodeAt(D+6),j={width:256*C.charCodeAt(D+7)+C.charCodeAt(D+8),height:B,numcomponents:C.charCodeAt(D+9)};break}S=256*C.charCodeAt(D+2)+C.charCodeAt(D+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:r,width:i.width,height:i.height,colorSpace:u,bitsPerComponent:8,filter:m,index:n,alias:s}}return g}}(ss.API);var Ay,H2,bz,wz,Cz,TCe=function(){var t,e,r;function n(o){var c,u,i,m,g,C,B,S,P,j,D,F,R,V;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C=null;;){switch(c=this.readUInt32(),P=(function(){var Y,te;for(te=[],Y=0;Y<4;++Y)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":C&&this.animation.frames.push(C),this.pos+=4,C={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),m=this.readUInt16()||100,C.delay=1e3*g/m,C.disposeOp=this.data[this.pos++],C.blendOp=this.data[this.pos++],C.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,c-=4),o=(C!=null?C.data:void 0)||this.imgData,F=0;0<=c?F<c:F>c;0<=c?++F:--F)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((j=i-this.transparency.indexed.length)>0)for(R=0;0<=j?R<j:R>j;0<=j?++R:--R)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":B=(D=this.read(c)).indexOf(0),S=String.fromCharCode.apply(String,D.slice(0,B)),this.text[S]=String.fromCharCode.apply(String,D.slice(B+1));break;case"IEND":return C&&this.animation.frames.push(C),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var c,u;for(u=[],c=0;0<=o?c<o:c>o;0<=o?++c:--c)u.push(this.data[this.pos++]);return u},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var c=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*c),i=0,m=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function g(C,B,S,P){var j,D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne=Math.ceil((m.width-C)/S),st=Math.ceil((m.height-B)/P),ie=m.width==Ne&&m.height==st;for(Z=c*Ne,we=ie?u:new Uint8Array(Z*st),Y=o.length,J=0,D=0;J<st&&i<Y;){switch(o[i++]){case 0:for(R=He=0;He<Z;R=He+=1)we[D++]=o[i++];break;case 1:for(R=Fe=0;Fe<Z;R=Fe+=1)j=o[i++],V=R<c?0:we[D-c],we[D++]=(j+V)%256;break;case 2:for(R=ve=0;ve<Z;R=ve+=1)j=o[i++],F=(R-R%c)/c,Ie=J&&we[(J-1)*Z+F*c+R%c],we[D++]=(Ie+j)%256;break;case 3:for(R=_e=0;_e<Z;R=_e+=1)j=o[i++],F=(R-R%c)/c,V=R<c?0:we[D-c],Ie=J&&we[(J-1)*Z+F*c+R%c],we[D++]=(j+Math.floor((V+Ie)/2))%256;break;case 4:for(R=ze=0;ze<Z;R=ze+=1)j=o[i++],F=(R-R%c)/c,V=R<c?0:we[D-c],J===0?Ie=be=0:(Ie=we[(J-1)*Z+F*c+R%c],be=F&&we[(J-1)*Z+(F-1)*c+R%c]),te=V+Ie-be,se=Math.abs(te-V),K=Math.abs(te-Ie),de=Math.abs(te-be),oe=se<=K&&se<=de?V:K<=de?Ie:be,we[D++]=(j+oe)%256;break;default:throw new Error("Invalid filter algorithm: "+o[i-1])}if(!ie){var le=((B+J*P)*m.width+C)*c,pe=J*Z;for(R=0;R<Ne;R+=1){for(var fe=0;fe<c;fe+=1)u[le++]=we[pe++];le+=(S-1)*c}}J++}}return o=lCe(o),m.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},n.prototype.decodePalette=function(){var o,c,u,i,m,g,C,B,S;for(u=this.palette,g=this.transparency.indexed||[],m=new Uint8Array((g.length||0)+u.length),i=0,o=0,c=C=0,B=u.length;C<B;c=C+=3)m[i++]=u[c],m[i++]=u[c+1],m[i++]=u[c+2],m[i++]=(S=g[o++])!=null?S:255;return m},n.prototype.copyToImageData=function(o,c){var u,i,m,g,C,B,S,P,j,D,F;if(i=this.colors,j=null,u=this.hasAlphaChannel,this.palette.length&&(j=(F=this._decodedPalette)!=null?F:this._decodedPalette=this.decodePalette(),i=4,u=!0),P=(m=o.data||o).length,C=j||c,g=B=0,i===1)for(;g<P;)S=j?4*c[g/4]:B,D=C[S++],m[g++]=D,m[g++]=D,m[g++]=D,m[g++]=u?C[S++]:255,B=S;else for(;g<P;)S=j?4*c[g/4]:B,m[g++]=C[S++],m[g++]=C[S++],m[g++]=C[S++],m[g++]=u?C[S++]:255,B=S},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var s=function(){if(Object.prototype.toString.call(cs)==="[object Window]"){try{e=cs.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(o){var c;if(s()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var c,u,i,m,g,C,B,S;if(this.animation){for(S=[],u=g=0,C=(B=this.animation.frames).length;g<C;u=++g)c=B[u],i=o.createImageData(c.width,c.height),m=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(i,m),c.imageData=i,S.push(c.image=t(i));return S}},n.prototype.renderFrame=function(o,c){var u,i,m;return u=(i=this.animation.frames)[c],m=i[c-1],c===0&&o.clearRect(0,0,this.width,this.height),(m!=null?m.disposeOp:void 0)===1?o.clearRect(m.xOffset,m.yOffset,m.width,m.height):(m!=null?m.disposeOp:void 0)===2&&o.putImageData(m.imageData,m.xOffset,m.yOffset),u.blendOp===0&&o.clearRect(u.xOffset,u.yOffset,u.width,u.height),o.drawImage(u.image,u.xOffset,u.yOffset)},n.prototype.animate=function(o){var c,u,i,m,g,C,B=this;return u=0,C=this.animation,m=C.numFrames,i=C.frames,g=C.numPlays,(c=function(){var S,P;if(S=u++%m,P=i[S],B.renderFrame(o,S),m>1&&u/m<g)return B.animation._timeout=setTimeout(c,P.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var c,u;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,c=o.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function LCe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],o=s>>7,c=1<<(7&s)+1;t[e++],t[e++];var u=null,i=null;o&&(u=e,i=c,e+=3*c);var m=!0,g=[],C=0,B=null,S=0,P=null;for(this.width=r,this.height=n;m&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,P=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[e++];C=t[e++]|t[e++]<<8,B=t[e++],!(1&j)&&(B=null),S=j>>2&7,e++;break;case 254:for(;;){if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var D=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,R=t[e++]|t[e++]<<8,V=t[e++]|t[e++]<<8,Y=t[e++],te=Y>>6&1,se=1<<(7&Y)+1,oe=u,K=i,de=!1;Y>>7&&(de=!0,oe=e,K=se,e+=3*se);var we=e;for(e++;;){var J;if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}g.push({x:D,y:F,width:R,height:V,has_local_palette:de,palette_offset:oe,palette_size:K,data_offset:we,data_length:e-we,transparent_index:B,interlaced:!!te,delay:C,disposal:S});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return P},this.frameInfo=function(Z){if(Z<0||Z>=g.length)throw new Error("Frame index out of range.");return g[Z]},this.decodeAndBlitFrameBGRA=function(Z,Ie){var be=this.frameInfo(Z),He=be.width*be.height,Fe=new Uint8Array(He);Sz(t,be.data_offset,Fe,He);var ve=be.palette_offset,_e=be.transparent_index;_e===null&&(_e=256);var ze=be.width,Ne=r-ze,st=ze,ie=4*(be.y*r+be.x),le=4*((be.y+be.height)*r+be.x),pe=ie,fe=4*Ne;be.interlaced===!0&&(fe+=4*r*7);for(var Qe=8,Ke=0,et=Fe.length;Ke<et;++Ke){var tt=Fe[Ke];if(st===0&&(st=ze,(pe+=fe)>=le&&(fe=4*Ne+4*r*(Qe-1),pe=ie+(ze+Ne)*(Qe<<1),Qe>>=1)),tt===_e)pe+=4;else{var bt=t[ve+3*tt],De=t[ve+3*tt+1],Mt=t[ve+3*tt+2];Ie[pe++]=Mt,Ie[pe++]=De,Ie[pe++]=bt,Ie[pe++]=255}--st}},this.decodeAndBlitFrameRGBA=function(Z,Ie){var be=this.frameInfo(Z),He=be.width*be.height,Fe=new Uint8Array(He);Sz(t,be.data_offset,Fe,He);var ve=be.palette_offset,_e=be.transparent_index;_e===null&&(_e=256);var ze=be.width,Ne=r-ze,st=ze,ie=4*(be.y*r+be.x),le=4*((be.y+be.height)*r+be.x),pe=ie,fe=4*Ne;be.interlaced===!0&&(fe+=4*r*7);for(var Qe=8,Ke=0,et=Fe.length;Ke<et;++Ke){var tt=Fe[Ke];if(st===0&&(st=ze,(pe+=fe)>=le&&(fe=4*Ne+4*r*(Qe-1),pe=ie+(ze+Ne)*(Qe<<1),Qe>>=1)),tt===_e)pe+=4;else{var bt=t[ve+3*tt],De=t[ve+3*tt+1],Mt=t[ve+3*tt+2];Ie[pe++]=bt,Ie[pe++]=De,Ie[pe++]=Mt,Ie[pe++]=255}--st}}}function Sz(t,e,r,n){for(var s=t[e++],o=1<<s,c=o+1,u=c+1,i=s+1,m=(1<<i)-1,g=0,C=0,B=0,S=t[e++],P=new Int32Array(4096),j=null;;){for(;g<16&&S!==0;)C|=t[e++]<<g,g+=8,S===1?S=t[e++]:--S;if(g<i)break;var D=C&m;if(C>>=i,g-=i,D!==o){if(D===c)break;for(var F=D<u?D:j,R=0,V=F;V>o;)V=P[V]>>8,++R;var Y=V;if(B+R+(F!==D?1:0)>n)return void Ua.log("Warning, gif stream longer than expected.");r[B++]=Y;var te=B+=R;for(F!==D&&(r[B++]=Y),V=F;R--;)V=P[V],r[--te]=255&V,V>>=8;j!==null&&u<4096&&(P[u++]=j<<8|Y,u>=m+1&&i<12&&(++i,m=m<<1|1)),j=D}else u=c+1,m=(1<<(i=s+1))-1,j=null}return B!==n&&Ua.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function nT(t){var e,r,n,s,o,c=Math.floor,u=new Array(64),i=new Array(64),m=new Array(64),g=new Array(64),C=new Array(65535),B=new Array(65535),S=new Array(64),P=new Array(64),j=[],D=0,F=7,R=new Array(64),V=new Array(64),Y=new Array(64),te=new Array(256),se=new Array(2048),oe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],de=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],J=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ie=[0,1,2,3,4,5,6,7,8,9,10,11],be=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],He=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Fe(ie,le){for(var pe=0,fe=0,Qe=new Array,Ke=1;Ke<=16;Ke++){for(var et=1;et<=ie[Ke];et++)Qe[le[fe]]=[],Qe[le[fe]][0]=pe,Qe[le[fe]][1]=Ke,fe++,pe++;pe*=2}return Qe}function ve(ie){for(var le=ie[0],pe=ie[1]-1;pe>=0;)le&1<<pe&&(D|=1<<F),pe--,--F<0&&(D==255?(_e(255),_e(0)):_e(D),F=7,D=0)}function _e(ie){j.push(ie)}function ze(ie){_e(ie>>8&255),_e(255&ie)}function Ne(ie,le,pe,fe,Qe){for(var Ke,et=Qe[0],tt=Qe[240],bt=function(vt,Kt){var rr,nr,Nr,on,Ir,cn,Sn,Ln,ln,ar,Yt=0;for(ln=0;ln<8;++ln){rr=vt[Yt],nr=vt[Yt+1],Nr=vt[Yt+2],on=vt[Yt+3],Ir=vt[Yt+4],cn=vt[Yt+5],Sn=vt[Yt+6];var Gr=rr+(Ln=vt[Yt+7]),Wr=rr-Ln,On=nr+Sn,mn=nr-Sn,Hn=Nr+cn,Vi=Nr-cn,Bn=on+Ir,jn=on-Ir,Dn=Gr+Bn,Gi=Gr-Bn,Rn=On+Hn,Zr=On-Hn;vt[Yt]=Dn+Rn,vt[Yt+4]=Dn-Rn;var Pr=.707106781*(Zr+Gi);vt[Yt+2]=Gi+Pr,vt[Yt+6]=Gi-Pr;var un=.382683433*((Dn=jn+Vi)-(Zr=mn+Wr)),Ii=.5411961*Dn+un,ri=1.306562965*Zr+un,ur=.707106781*(Rn=Vi+mn),We=Wr+ur,qe=Wr-ur;vt[Yt+5]=qe+Ii,vt[Yt+3]=qe-Ii,vt[Yt+1]=We+ri,vt[Yt+7]=We-ri,Yt+=8}for(Yt=0,ln=0;ln<8;++ln){rr=vt[Yt],nr=vt[Yt+8],Nr=vt[Yt+16],on=vt[Yt+24],Ir=vt[Yt+32],cn=vt[Yt+40],Sn=vt[Yt+48];var pt=rr+(Ln=vt[Yt+56]),Lt=rr-Ln,Ct=nr+Sn,kt=nr-Sn,Wt=Nr+cn,Rt=Nr-cn,fr=on+Ir,xr=on-Ir,pr=pt+fr,Lr=pt-fr,rn=Ct+Wt,sn=Ct-Wt;vt[Yt]=pr+rn,vt[Yt+32]=pr-rn;var _n=.707106781*(sn+Lr);vt[Yt+16]=Lr+_n,vt[Yt+48]=Lr-_n;var Un=.382683433*((pr=xr+Rt)-(sn=kt+Lt)),qn=.5411961*pr+Un,Wn=1.306562965*sn+Un,Pi=.707106781*(rn=Rt+kt),$i=Lt+Pi,Kn=Lt-Pi;vt[Yt+40]=Kn+qn,vt[Yt+24]=Kn-qn,vt[Yt+8]=$i+Wn,vt[Yt+56]=$i-Wn,Yt++}for(ln=0;ln<64;++ln)ar=vt[ln]*Kt[ln],S[ln]=ar>0?ar+.5|0:ar-.5|0;return S}(ie,le),De=0;De<64;++De)P[oe[De]]=bt[De];var Mt=P[0]-pe;pe=P[0],Mt==0?ve(fe[0]):(ve(fe[B[Ke=32767+Mt]]),ve(C[Ke]));for(var ir=63;ir>0&&P[ir]==0;)ir--;if(ir==0)return ve(et),pe;for(var Ar,Ze=1;Ze<=ir;){for(var Ue=Ze;P[Ze]==0&&Ze<=ir;)++Ze;var hr=Ze-Ue;if(hr>=16){Ar=hr>>4;for(var Dt=1;Dt<=Ar;++Dt)ve(tt);hr&=15}Ke=32767+P[Ze],ve(Qe[(hr<<4)+B[Ke]]),ve(C[Ke]),Ze++}return ir!=63&&ve(et),pe}function st(ie){ie=Math.min(Math.max(ie,1),100),o!=ie&&(function(le){for(var pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var Qe=c((pe[fe]*le+50)/100);Qe=Math.min(Math.max(Qe,1),255),u[oe[fe]]=Qe}for(var Ke=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],et=0;et<64;et++){var tt=c((Ke[et]*le+50)/100);tt=Math.min(Math.max(tt,1),255),i[oe[et]]=tt}for(var bt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,Mt=0;Mt<8;Mt++)for(var ir=0;ir<8;ir++)m[De]=1/(u[oe[De]]*bt[Mt]*bt[ir]*8),g[De]=1/(i[oe[De]]*bt[Mt]*bt[ir]*8),De++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),o=ie)}this.encode=function(ie,le){le&&st(le),j=new Array,D=0,F=7,ze(65496),ze(65504),ze(16),_e(74),_e(70),_e(73),_e(70),_e(0),_e(1),_e(1),_e(0),ze(1),ze(1),_e(0),_e(0),function(){ze(65499),ze(132),_e(0);for(var nr=0;nr<64;nr++)_e(u[nr]);_e(1);for(var Nr=0;Nr<64;Nr++)_e(i[Nr])}(),function(nr,Nr){ze(65472),ze(17),_e(8),ze(Nr),ze(nr),_e(3),_e(1),_e(17),_e(0),_e(2),_e(17),_e(1),_e(3),_e(17),_e(1)}(ie.width,ie.height),function(){ze(65476),ze(418),_e(0);for(var nr=0;nr<16;nr++)_e(K[nr+1]);for(var Nr=0;Nr<=11;Nr++)_e(de[Nr]);_e(16);for(var on=0;on<16;on++)_e(we[on+1]);for(var Ir=0;Ir<=161;Ir++)_e(J[Ir]);_e(1);for(var cn=0;cn<16;cn++)_e(Z[cn+1]);for(var Sn=0;Sn<=11;Sn++)_e(Ie[Sn]);_e(17);for(var Ln=0;Ln<16;Ln++)_e(be[Ln+1]);for(var ln=0;ln<=161;ln++)_e(He[ln])}(),ze(65498),ze(12),_e(3),_e(1),_e(0),_e(2),_e(17),_e(3),_e(17),_e(0),_e(63),_e(0);var pe=0,fe=0,Qe=0;D=0,F=7,this.encode.displayName="_encode_";for(var Ke,et,tt,bt,De,Mt,ir,Ar,Ze,Ue=ie.data,hr=ie.width,Dt=ie.height,vt=4*hr,Kt=0;Kt<Dt;){for(Ke=0;Ke<vt;){for(De=vt*Kt+Ke,ir=-1,Ar=0,Ze=0;Ze<64;Ze++)Mt=De+(Ar=Ze>>3)*vt+(ir=4*(7&Ze)),Kt+Ar>=Dt&&(Mt-=vt*(Kt+1+Ar-Dt)),Ke+ir>=vt&&(Mt-=Ke+ir-vt+4),et=Ue[Mt++],tt=Ue[Mt++],bt=Ue[Mt++],R[Ze]=(se[et]+se[tt+256>>0]+se[bt+512>>0]>>16)-128,V[Ze]=(se[et+768>>0]+se[tt+1024>>0]+se[bt+1280>>0]>>16)-128,Y[Ze]=(se[et+1280>>0]+se[tt+1536>>0]+se[bt+1792>>0]>>16)-128;pe=Ne(R,m,pe,e,n),fe=Ne(V,g,fe,r,s),Qe=Ne(Y,g,Qe,r,s),Ke+=32}Kt+=8}if(F>=0){var rr=[];rr[1]=F+1,rr[0]=(1<<F+1)-1,ve(rr)}return ze(65497),new Uint8Array(j)},t=t||50,function(){for(var ie=String.fromCharCode,le=0;le<256;le++)te[le]=ie(le)}(),e=Fe(K,de),r=Fe(Z,Ie),n=Fe(we,J),s=Fe(be,He),function(){for(var ie=1,le=2,pe=1;pe<=15;pe++){for(var fe=ie;fe<le;fe++)B[32767+fe]=pe,C[32767+fe]=[],C[32767+fe][1]=pe,C[32767+fe][0]=fe;for(var Qe=-(le-1);Qe<=-ie;Qe++)B[32767+Qe]=pe,C[32767+Qe]=[],C[32767+Qe][1]=pe,C[32767+Qe][0]=le-1+Qe;ie<<=1,le<<=1}}(),function(){for(var ie=0;ie<256;ie++)se[ie]=19595*ie,se[ie+256>>0]=38470*ie,se[ie+512>>0]=7471*ie+32768,se[ie+768>>0]=-11059*ie,se[ie+1024>>0]=-21709*ie,se[ie+1280>>0]=32768*ie+8421375,se[ie+1536>>0]=-27439*ie,se[ie+1792>>0]=-5329*ie}(),st(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Sf(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Bz(t){function e(K){if(!K)throw Error("assert :P")}function r(K,de,we){for(var J=0;4>J;J++)if(K[de+J]!=we.charCodeAt(J))return!0;return!1}function n(K,de,we,J,Z){for(var Ie=0;Ie<Z;Ie++)K[de+Ie]=we[J+Ie]}function s(K,de,we,J){for(var Z=0;Z<J;Z++)K[de+Z]=we}function o(K){return new Int32Array(K)}function c(K,de){for(var we=[],J=0;J<K;J++)we.push(new de);return we}function u(K,de){var we=[];return function J(Z,Ie,be){for(var He=be[Ie],Fe=0;Fe<He&&(Z.push(be.length>Ie+1?[]:new de),!(be.length<Ie+1));Fe++)J(Z[Fe],Ie+1,be)}(we,0,K),we}var i=function(){var K=this;function de(w,I){for(var $=1<<I-1>>>0;w&$;)$>>>=1;return $?(w&$-1)+$:w}function we(w,I,$,ee,ge){e(!(ee%$));do w[I+(ee-=$)]=ge;while(0<ee)}function J(w,I,$,ee,ge){if(e(2328>=ge),512>=ge)var Se=o(512);else if((Se=o(ge))==null)return 0;return function(Le,Pe,Me,je,lt,It){var Bt,xt,Ft=Pe,Qt=1<<Me,ct=o(16),mt=o(16);for(e(lt!=0),e(je!=null),e(Le!=null),e(0<Me),xt=0;xt<lt;++xt){if(15<je[xt])return 0;++ct[je[xt]]}if(ct[0]==lt)return 0;for(mt[1]=0,Bt=1;15>Bt;++Bt){if(ct[Bt]>1<<Bt)return 0;mt[Bt+1]=mt[Bt]+ct[Bt]}for(xt=0;xt<lt;++xt)Bt=je[xt],0<je[xt]&&(It[mt[Bt]++]=xt);if(mt[15]==1)return(je=new Z).g=0,je.value=It[0],we(Le,Ft,1,Qt,je),Qt;var lr,mr=-1,dr=Qt-1,Xr=0,Or=1,bn=1,zr=1<<Me;for(xt=0,Bt=1,lt=2;Bt<=Me;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt])(je=new Z).g=Bt,je.value=It[xt++],we(Le,Ft+Xr,lt,zr,je),Xr=de(Xr,Bt)}for(Bt=Me+1,lt=2;15>=Bt;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt]){if(je=new Z,(Xr&dr)!=mr){for(Ft+=zr,lr=1<<(mr=Bt)-Me;15>mr&&!(0>=(lr-=ct[mr]));)++mr,lr<<=1;Qt+=zr=1<<(lr=mr-Me),Le[Pe+(mr=Xr&dr)].g=lr+Me,Le[Pe+mr].value=Ft-Pe-mr}je.g=Bt-Me,je.value=It[xt++],we(Le,Ft+(Xr>>Me),lt,zr,je),Xr=de(Xr,Bt)}}return Or!=2*mt[15]-1?0:Qt}(w,I,$,ee,ge,Se)}function Z(){this.value=this.g=0}function Ie(){this.value=this.g=0}function be(){this.G=c(5,Z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(Ki,Ie)}function He(w,I,$,ee){e(w!=null),e(I!=null),e(2147483648>ee),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=I,w.pa=$,w.Jd=I,w.Yc=$+ee,w.Zc=4<=ee?$+ee-4+1:$,Ke(w)}function Fe(w,I){for(var $=0;0<I--;)$|=tt(w,128)<<I;return $}function ve(w,I){var $=Fe(w,I);return et(w)?-$:$}function _e(w,I,$,ee){var ge,Se=0;for(e(w!=null),e(I!=null),e(4294967288>ee),w.Sb=ee,w.Ra=0,w.u=0,w.h=0,4<ee&&(ee=4),ge=0;ge<ee;++ge)Se+=I[$+ge]<<8*ge;w.Ra=Se,w.bb=ee,w.oa=I,w.pa=$}function ze(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Yr-8>>>0,++w.bb,w.u-=8;pe(w)&&(w.h=1,w.u=0)}function Ne(w,I){if(e(0<=I),!w.h&&I<=la){var $=le(w)&us[I];return w.u+=I,ze(w),$}return w.h=1,w.u=0}function st(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function le(w){return w.Ra>>>(w.u&Yr-1)>>>0}function pe(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Yr}function fe(w,I){w.u=I,w.h=pe(w)}function Qe(w){w.u>=sc&&(e(w.u>=sc),ze(w))}function Ke(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function et(w){return Fe(w,1)}function tt(w,I){var $=w.Ca;0>w.b&&Ke(w);var ee=w.b,ge=$*I>>>8,Se=(w.I>>>ee>ge)+0;for(Se?($-=ge,w.I-=ge+1<<ee>>>0):$=ge+1,ee=$,ge=0;256<=ee;)ge+=8,ee>>=8;return ee=7^ge+ws[ee],w.b-=ee,w.Ca=($<<ee)-1,Se}function bt(w,I,$){w[I+0]=$>>24&255,w[I+1]=$>>16&255,w[I+2]=$>>8&255,w[I+3]=$>>0&255}function De(w,I){return w[I+0]<<0|w[I+1]<<8}function Mt(w,I){return De(w,I)|w[I+2]<<16}function ir(w,I){return De(w,I)|De(w,I+2)<<16}function Ar(w,I){var $=1<<I;return e(w!=null),e(0<I),w.X=o($),w.X==null?0:(w.Mb=32-I,w.Xa=I,1)}function Ze(w,I){e(w!=null),e(I!=null),e(w.Xa==I.Xa),n(I.X,0,w.X,0,1<<I.Xa)}function Ue(){this.X=[],this.Xa=this.Mb=0}function hr(w,I,$,ee){e($!=null),e(ee!=null);var ge=$[0],Se=ee[0];return ge==0&&(ge=(w*Se+I/2)/I),Se==0&&(Se=(I*ge+w/2)/w),0>=ge||0>=Se?0:($[0]=ge,ee[0]=Se,1)}function Dt(w,I){return w+(1<<I)-1>>>I}function vt(w,I){return((4278255360&w)+(4278255360&I)>>>0&4278255360)+((16711935&w)+(16711935&I)>>>0&16711935)>>>0}function Kt(w,I){K[I]=function($,ee,ge,Se,Le,Pe,Me){var je;for(je=0;je<Le;++je){var lt=K[w](Pe[Me+je-1],ge,Se+je);Pe[Me+je]=vt($[ee+je],lt)}}}function rr(){this.ud=this.hd=this.jd=0}function nr(w,I){return((4278124286&(w^I))>>>1)+(w&I)>>>0}function Nr(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function on(w,I){return Nr(w+(w-I+.5>>1))}function Ir(w,I,$){return Math.abs(I-$)-Math.abs(w-$)}function cn(w,I,$,ee,ge,Se,Le){for(ee=Se[Le-1],$=0;$<ge;++$)Se[Le+$]=ee=vt(w[I+$],ee)}function Sn(w,I,$,ee,ge){var Se;for(Se=0;Se<$;++Se){var Le=w[I+Se],Pe=Le>>8&255,Me=16711935&(Me=(Me=16711935&Le)+((Pe<<16)+Pe));ee[ge+Se]=(4278255360&Le)+Me>>>0}}function Ln(w,I){I.jd=w>>0&255,I.hd=w>>8&255,I.ud=w>>16&255}function ln(w,I,$,ee,ge,Se){var Le;for(Le=0;Le<ee;++Le){var Pe=I[$+Le],Me=Pe>>>8,je=Pe,lt=255&(lt=(lt=Pe>>>16)+((w.jd<<24>>24)*(Me<<24>>24)>>>5));je=255&(je=(je=je+((w.hd<<24>>24)*(Me<<24>>24)>>>5))+((w.ud<<24>>24)*(lt<<24>>24)>>>5)),ge[Se+Le]=(4278255360&Pe)+(lt<<16)+je}}function ar(w,I,$,ee,ge){K[I]=function(Se,Le,Pe,Me,je,lt,It,Bt,xt){for(Me=It;Me<Bt;++Me)for(It=0;It<xt;++It)je[lt++]=ge(Pe[ee(Se[Le++])])},K[w]=function(Se,Le,Pe,Me,je,lt,It){var Bt=8>>Se.b,xt=Se.Ea,Ft=Se.K[0],Qt=Se.w;if(8>Bt)for(Se=(1<<Se.b)-1,Qt=(1<<Bt)-1;Le<Pe;++Le){var ct,mt=0;for(ct=0;ct<xt;++ct)ct&Se||(mt=ee(Me[je++])),lt[It++]=ge(Ft[mt&Qt]),mt>>=Bt}else K["VP8LMapColor"+$](Me,je,Ft,Qt,lt,It,Le,Pe,xt)}}function Yt(w,I,$,ee,ge){for($=I+$;I<$;){var Se=w[I++];ee[ge++]=Se>>16&255,ee[ge++]=Se>>8&255,ee[ge++]=Se>>0&255}}function Gr(w,I,$,ee,ge){for($=I+$;I<$;){var Se=w[I++];ee[ge++]=Se>>16&255,ee[ge++]=Se>>8&255,ee[ge++]=Se>>0&255,ee[ge++]=Se>>24&255}}function Wr(w,I,$,ee,ge){for($=I+$;I<$;){var Se=(Le=w[I++])>>16&240|Le>>12&15,Le=Le>>0&240|Le>>28&15;ee[ge++]=Se,ee[ge++]=Le}}function On(w,I,$,ee,ge){for($=I+$;I<$;){var Se=(Le=w[I++])>>16&248|Le>>13&7,Le=Le>>5&224|Le>>3&31;ee[ge++]=Se,ee[ge++]=Le}}function mn(w,I,$,ee,ge){for($=I+$;I<$;){var Se=w[I++];ee[ge++]=Se>>0&255,ee[ge++]=Se>>8&255,ee[ge++]=Se>>16&255}}function Hn(w,I,$,ee,ge,Se){if(Se==0)for($=I+$;I<$;)bt(ee,((Se=w[I++])[0]>>24|Se[1]>>8&65280|Se[2]<<8&16711680|Se[3]<<24)>>>0),ge+=32;else n(ee,ge,w,I,$)}function Vi(w,I){K[I][0]=K[w+"0"],K[I][1]=K[w+"1"],K[I][2]=K[w+"2"],K[I][3]=K[w+"3"],K[I][4]=K[w+"4"],K[I][5]=K[w+"5"],K[I][6]=K[w+"6"],K[I][7]=K[w+"7"],K[I][8]=K[w+"8"],K[I][9]=K[w+"9"],K[I][10]=K[w+"10"],K[I][11]=K[w+"11"],K[I][12]=K[w+"12"],K[I][13]=K[w+"13"],K[I][14]=K[w+"0"],K[I][15]=K[w+"0"]}function Bn(w){return w==sd||w==Cd||w==bu||w==th}function jn(){this.eb=[],this.size=this.A=this.fb=0}function Dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Gi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jn,this.f.kb=new Dn,this.sd=null}function Rn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function un(w,I){var $=w.T,ee=I.ba.f.RGBA,ge=ee.eb,Se=ee.fb+w.ka*ee.A,Le=uo[I.ba.S],Pe=w.y,Me=w.O,je=w.f,lt=w.N,It=w.ea,Bt=w.W,xt=I.cc,Ft=I.dc,Qt=I.Mc,ct=I.Nc,mt=w.ka,lr=w.ka+w.T,mr=w.U,dr=mr+1>>1;for(mt==0?Le(Pe,Me,null,null,je,lt,It,Bt,je,lt,It,Bt,ge,Se,null,null,mr):(Le(I.ec,I.fc,Pe,Me,xt,Ft,Qt,ct,je,lt,It,Bt,ge,Se-ee.A,ge,Se,mr),++$);mt+2<lr;mt+=2)xt=je,Ft=lt,Qt=It,ct=Bt,lt+=w.Rc,Bt+=w.Rc,Se+=2*ee.A,Le(Pe,(Me+=2*w.fa)-w.fa,Pe,Me,xt,Ft,Qt,ct,je,lt,It,Bt,ge,Se-ee.A,ge,Se,mr);return Me+=w.fa,w.j+lr<w.o?(n(I.ec,I.fc,Pe,Me,mr),n(I.cc,I.dc,je,lt,dr),n(I.Mc,I.Nc,It,Bt,dr),$--):1&lr||Le(Pe,Me,null,null,je,lt,It,Bt,je,lt,It,Bt,ge,Se+ee.A,null,null,mr),$}function Ii(w,I,$){var ee=w.F,ge=[w.J];if(ee!=null){var Se=w.U,Le=I.ba.S,Pe=Le==iu||Le==bu;I=I.ba.f.RGBA;var Me=[0],je=w.ka;Me[0]=w.T,w.Kb&&(je==0?--Me[0]:(--je,ge[0]-=w.width),w.j+w.ka+w.T==w.o&&(Me[0]=w.o-w.j-je));var lt=I.eb;je=I.fb+je*I.A,w=Ji(ee,ge[0],w.width,Se,Me,lt,je+(Pe?0:3),I.A),e($==Me),w&&Bn(Le)&&to(lt,je,Pe,Se,Me,I.A)}return 0}function ri(w){var I=w.ma,$=I.ba.S,ee=11>$,ge=$==Mc||$==Sc||$==iu||$==id||$==12||Bn($);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!Ea(I.Oa,w,ge?11:12))return 0;if(ge&&Bn($)&&gr(),w.da)alert("todo:use_scaling");else{if(ee){if(I.Ib=Pr,w.Kb){if($=w.U+1>>1,I.memory=o(w.U+2*$),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+w.U,I.Mc=I.cc,I.Nc=I.dc+$,I.Ib=un,gr()}}else alert("todo:EmitYUV");ge&&(I.Jb=Ii,ee&&St())}if(ee&&!wh){for(w=0;256>w;++w)bA[w]=89858*(w-128)+Di>>Si,cg[w]=-22014*(w-128)+Di,of[w]=-45773*(w-128),wA[w]=113618*(w-128)+Di>>Si;for(w=Hs;w<Oc;++w)I=76283*(w-16)+Di>>Si,CA[w-Hs]=Js(I,255),SA[w-Hs]=Js(I+8>>4,15);wh=1}return 1}function ur(w){var I=w.ma,$=w.U,ee=w.T;return e(!(1&w.ka)),0>=$||0>=ee?0:($=I.Ib(w,I),I.Jb!=null&&I.Jb(w,I,$),I.Dc+=$,1)}function We(w){w.ma.memory=null}function qe(w,I,$,ee){return Ne(w,8)!=47?0:(I[0]=Ne(w,14)+1,$[0]=Ne(w,14)+1,ee[0]=Ne(w,1),Ne(w,3)!=0?0:!w.h)}function pt(w,I){if(4>w)return w+1;var $=w-2>>1;return(2+(1&w)<<$)+Ne(I,$)+1}function Lt(w,I){return 120<I?I-120:1<=($=(($=xh[I-1])>>4)*w+(8-(15&$)))?$:1;var $}function Ct(w,I,$){var ee=le($),ge=w[I+=255&ee].g-8;return 0<ge&&(fe($,$.u+8),ee=le($),I+=w[I].value,I+=ee&(1<<ge)-1),fe($,$.u+w[I].g),w[I].value}function kt(w,I,$){return $.g+=w.g,$.value+=w.value<<I>>>0,e(8>=$.g),w.g}function Wt(w,I,$){var ee=w.xc;return e((I=ee==0?0:w.vc[w.md*($>>ee)+(I>>ee)])<w.Wb),w.Ya[I]}function Rt(w,I,$,ee){var ge=w.ab,Se=w.c*I,Le=w.C;I=Le+I;var Pe=$,Me=ee;for(ee=w.Ta,$=w.Ua;0<ge--;){var je=w.gc[ge],lt=Le,It=I,Bt=Pe,xt=Me,Ft=(Me=ee,Pe=$,je.Ea);switch(e(lt<It),e(It<=je.nc),je.hc){case 2:ql(Bt,xt,(It-lt)*Ft,Me,Pe);break;case 0:var Qt=lt,ct=It,mt=Me,lr=Pe,mr=(zr=je).Ea;Qt==0&&(oc(Bt,xt,null,null,1,mt,lr),cn(Bt,xt+1,0,0,mr-1,mt,lr+1),xt+=mr,lr+=mr,++Qt);for(var dr=1<<zr.b,Xr=dr-1,Or=Dt(mr,zr.b),bn=zr.K,zr=zr.w+(Qt>>zr.b)*Or;Qt<ct;){var ci=bn,fi=zr,$n=1;for(yl(Bt,xt,mt,lr-mr,1,mt,lr);$n<mr;){var ti=($n&~Xr)+dr;ti>mr&&(ti=mr),(0,yr[ci[fi++]>>8&15])(Bt,xt+ +$n,mt,lr+$n-mr,ti-$n,mt,lr+$n),$n=ti}xt+=mr,lr+=mr,++Qt&Xr||(zr+=Or)}It!=je.nc&&n(Me,Pe-Ft,Me,Pe+(It-lt-1)*Ft,Ft);break;case 1:for(Ft=Bt,ct=xt,mr=(Bt=je.Ea)-(lr=Bt&~(mt=(xt=1<<je.b)-1)),Qt=Dt(Bt,je.b),dr=je.K,je=je.w+(lt>>je.b)*Qt;lt<It;){for(Xr=dr,Or=je,bn=new rr,zr=ct+lr,ci=ct+Bt;ct<zr;)Ln(Xr[Or++],bn),Mr(bn,Ft,ct,xt,Me,Pe),ct+=xt,Pe+=xt;ct<ci&&(Ln(Xr[Or++],bn),Mr(bn,Ft,ct,mr,Me,Pe),ct+=mr,Pe+=mr),++lt&mt||(je+=Qt)}break;case 3:if(Bt==Me&&xt==Pe&&0<je.b){for(ct=Me,Bt=Ft=Pe+(It-lt)*Ft-(lr=(It-lt)*Dt(je.Ea,je.b)),xt=Me,mt=Pe,Qt=[],lr=(mr=lr)-1;0<=lr;--lr)Qt[lr]=xt[mt+lr];for(lr=mr-1;0<=lr;--lr)ct[Bt+lr]=Qt[lr];ks(je,lt,It,Me,Ft,Me,Pe)}else ks(je,lt,It,Bt,xt,Me,Pe)}Pe=ee,Me=$}Me!=$&&n(ee,$,Pe,Me,Se)}function fr(w,I){var $=w.V,ee=w.Ba+w.c*w.C,ge=I-w.C;if(e(I<=w.l.o),e(16>=ge),0<ge){var Se=w.l,Le=w.Ta,Pe=w.Ua,Me=Se.width;if(Rt(w,ge,$,ee),ge=Pe=[Pe],e(($=w.C)<(ee=I)),e(Se.v<Se.va),ee>Se.o&&(ee=Se.o),$<Se.j){var je=Se.j-$;$=Se.j,ge[0]+=je*Me}if($>=ee?$=0:(ge[0]+=4*Se.v,Se.ka=$-Se.j,Se.U=Se.va-Se.v,Se.T=ee-$,$=1),$){if(Pe=Pe[0],11>($=w.ca).S){var lt=$.f.RGBA,It=(ee=$.S,ge=Se.U,Se=Se.T,je=lt.eb,lt.A),Bt=Se;for(lt=lt.fb+w.Ma*lt.A;0<Bt--;){var xt=Le,Ft=Pe,Qt=ge,ct=je,mt=lt;switch(ee){case cc:xn(xt,Ft,Qt,ct,mt);break;case Mc:kn(xt,Ft,Qt,ct,mt);break;case sd:kn(xt,Ft,Qt,ct,mt),to(ct,mt,0,Qt,1,0);break;case _u:ms(xt,Ft,Qt,ct,mt);break;case Sc:Hn(xt,Ft,Qt,ct,mt,1);break;case Cd:Hn(xt,Ft,Qt,ct,mt,1),to(ct,mt,0,Qt,1,0);break;case iu:Hn(xt,Ft,Qt,ct,mt,0);break;case bu:Hn(xt,Ft,Qt,ct,mt,0),to(ct,mt,1,Qt,1,0);break;case id:ns(xt,Ft,Qt,ct,mt);break;case th:ns(xt,Ft,Qt,ct,mt),Cs(ct,mt,Qt,1,0);break;case eh:xi(xt,Ft,Qt,ct,mt);break;default:e(0)}Pe+=Me,lt+=It}w.Ma+=Se}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=$.height)}}w.C=I,e(w.C<=w.i)}function xr(w){var I;if(0<w.ua)return 0;for(I=0;I<w.Wb;++I){var $=w.Ya[I].G,ee=w.Ya[I].H;if(0<$[1][ee[1]+0].g||0<$[2][ee[2]+0].g||0<$[3][ee[3]+0].g)return 0}return 1}function pr(w,I,$,ee,ge,Se){if(w.Z!=0){var Le=w.qd,Pe=w.rd;for(e(Ta[w.Z]!=null);I<$;++I)Ta[w.Z](Le,Pe,ee,ge,ee,ge,Se),Le=ee,Pe=ge,ge+=Se;w.qd=Le,w.rd=Pe}}function Lr(w,I){var $=w.l.ma,ee=$.Z==0||$.Z==1?w.l.j:w.C;if(ee=w.C<ee?ee:w.C,e(I<=w.l.o),I>ee){var ge=w.l.width,Se=$.ca,Le=$.tb+ge*ee,Pe=w.V,Me=w.Ba+w.c*ee,je=w.gc;e(w.ab==1),e(je[0].hc==3),Aa(je[0],ee,I,Pe,Me,Se,Le),pr($,ee,I,Se,Le,ge)}w.C=w.Ma=I}function rn(w,I,$,ee,ge,Se,Le){var Pe=w.$/ee,Me=w.$%ee,je=w.m,lt=w.s,It=$+w.$,Bt=It;ge=$+ee*ge;var xt=$+ee*Se,Ft=280+lt.ua,Qt=w.Pb?Pe:16777216,ct=0<lt.ua?lt.Wa:null,mt=lt.wc,lr=It<xt?Wt(lt,Me,Pe):null;e(w.C<Se),e(xt<=ge);var mr=!1;e:for(;;){for(;mr||It<xt;){var dr=0;if(Pe>=Qt){var Xr=It-$;e((Qt=w).Pb),Qt.wd=Qt.m,Qt.xd=Xr,0<Qt.s.ua&&Ze(Qt.s.Wa,Qt.s.vb),Qt=Pe+bh}if(Me&mt||(lr=Wt(lt,Me,Pe)),e(lr!=null),lr.Qb&&(I[It]=lr.qb,mr=!0),!mr)if(Qe(je),lr.jc){dr=je,Xr=I;var Or=It,bn=lr.pd[le(dr)&Ki-1];e(lr.jc),256>bn.g?(fe(dr,dr.u+bn.g),Xr[Or]=bn.value,dr=0):(fe(dr,dr.u+bn.g-256),e(256<=bn.value),dr=bn.value),dr==0&&(mr=!0)}else dr=Ct(lr.G[0],lr.H[0],je);if(je.h)break;if(mr||256>dr){if(!mr)if(lr.nd)I[It]=(lr.qb|dr<<8)>>>0;else{if(Qe(je),mr=Ct(lr.G[1],lr.H[1],je),Qe(je),Xr=Ct(lr.G[2],lr.H[2],je),Or=Ct(lr.G[3],lr.H[3],je),je.h)break;I[It]=(Or<<24|mr<<16|dr<<8|Xr)>>>0}if(mr=!1,++It,++Me>=ee&&(Me=0,++Pe,Le!=null&&Pe<=Se&&!(Pe%16)&&Le(w,Pe),ct!=null))for(;Bt<It;)dr=I[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else if(280>dr){if(dr=pt(dr-256,je),Xr=Ct(lr.G[4],lr.H[4],je),Qe(je),Xr=Lt(ee,Xr=pt(Xr,je)),je.h)break;if(It-$<Xr||ge-It<dr)break e;for(Or=0;Or<dr;++Or)I[It+Or]=I[It+Or-Xr];for(It+=dr,Me+=dr;Me>=ee;)Me-=ee,++Pe,Le!=null&&Pe<=Se&&!(Pe%16)&&Le(w,Pe);if(e(It<=ge),Me&mt&&(lr=Wt(lt,Me,Pe)),ct!=null)for(;Bt<It;)dr=I[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else{if(!(dr<Ft))break e;for(mr=dr-280,e(ct!=null);Bt<It;)dr=I[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr;dr=It,e(!(mr>>>(Xr=ct).Xa)),I[dr]=Xr.X[mr],mr=!0}mr||e(je.h==pe(je))}if(w.Pb&&je.h&&It<ge)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Ze(w.s.vb,w.s.Wa);else{if(je.h)break e;Le!=null&&Le(w,Pe>Se?Se:Pe),w.a=0,w.$=It-$}return 1}return w.a=3,0}function sn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var I=w.Wa;I!=null&&(I.X=null),w.vb=null,e(w!=null)}function _n(){var w=new xu;return w==null?null:(w.a=0,w.xb=Ed,Vi("Predictor","VP8LPredictors"),Vi("Predictor","VP8LPredictors_C"),Vi("PredictorAdd","VP8LPredictorsAdd"),Vi("PredictorAdd","VP8LPredictorsAdd_C"),ql=Sn,Mr=ln,xn=Yt,kn=Gr,ns=Wr,xi=On,ms=mn,K.VP8LMapColor32b=Jo,K.VP8LMapColor8b=Pc,w)}function Un(w,I,$,ee,ge){var Se=1,Le=[w],Pe=[I],Me=ee.m,je=ee.s,lt=null,It=0;e:for(;;){if($)for(;Se&&Ne(Me,1);){var Bt=Le,xt=Pe,Ft=ee,Qt=1,ct=Ft.m,mt=Ft.gc[Ft.ab],lr=Ne(ct,2);if(Ft.Oc&1<<lr)Se=0;else{switch(Ft.Oc|=1<<lr,mt.hc=lr,mt.Ea=Bt[0],mt.nc=xt[0],mt.K=[null],++Ft.ab,e(4>=Ft.ab),lr){case 0:case 1:mt.b=Ne(ct,3)+2,Qt=Un(Dt(mt.Ea,mt.b),Dt(mt.nc,mt.b),0,Ft,mt.K),mt.K=mt.K[0];break;case 3:var mr,dr=Ne(ct,8)+1,Xr=16<dr?0:4<dr?1:2<dr?2:3;if(Bt[0]=Dt(mt.Ea,Xr),mt.b=Xr,mr=Qt=Un(dr,1,0,Ft,mt.K)){var Or,bn=dr,zr=mt,ci=1<<(8>>zr.b),fi=o(ci);if(fi==null)mr=0;else{var $n=zr.K[0],ti=zr.w;for(fi[0]=zr.K[0][0],Or=1;Or<1*bn;++Or)fi[Or]=vt($n[ti+Or],fi[Or-1]);for(;Or<4*ci;++Or)fi[Or]=0;zr.K[0]=null,zr.K[0]=fi,mr=1}}Qt=mr;break;case 2:break;default:e(0)}Se=Qt}}if(Le=Le[0],Pe=Pe[0],Se&&Ne(Me,1)&&!(Se=1<=(It=Ne(Me,4))&&11>=It)){ee.a=3;break e}var Mi;if(Mi=Se)t:{var wi,Vn,gs,To=ee,zi=Le,Qi=Pe,gi=It,Qo=$,Ko=To.m,Os=To.s,Ws=[null],Lo=1,ko=0,ca=_h[gi];r:for(;;){if(Qo&&Ne(Ko,1)){var jr=Ne(Ko,3)+2,In=Dt(zi,jr),ya=Dt(Qi,jr),Es=In*ya;if(!Un(In,ya,0,To,Ws))break r;for(Ws=Ws[0],Os.xc=jr,wi=0;wi<Es;++wi){var cr=Ws[wi]>>8&65535;Ws[wi]=cr,cr>=Lo&&(Lo=cr+1)}}if(Ko.h)break r;for(Vn=0;5>Vn;++Vn){var es=vh[Vn];!Vn&&0<gi&&(es+=1<<gi),ko<es&&(ko=es)}var Td=c(Lo*ca,Z),cf=Lo,Rc=c(cf,be);if(Rc==null)var ld=null;else e(65536>=cf),ld=Rc;var uc=o(ko);if(ld==null||uc==null||Td==null){To.a=1;break r}var Kc=Td;for(wi=gs=0;wi<Lo;++wi){var ka=ld[wi],su=ka.G,Xc=ka.H,Ch=0,Su=1,Sh=0;for(Vn=0;5>Vn;++Vn){es=vh[Vn],su[Vn]=Kc,Xc[Vn]=gs,!Vn&&0<gi&&(es+=1<<gi);i:{var ou,cd=es,Yc=To,Bu=uc,au=Kc,ug=gs,Wa=0,dc=Yc.m,uf=Ne(dc,1);if(s(Bu,0,0,cd),uf){var ho=Ne(dc,1)+1,as=Ne(dc,1),Zf=Ne(dc,as==0?1:8);Bu[Zf]=1,ho==2&&(Bu[Zf=Ne(dc,8)]=1);var Bc=1}else{var Bh=o(19),Eu=Ne(dc,4)+4;if(19<Eu){Yc.a=3;var Tu=0;break i}for(ou=0;ou<Eu;++ou)Bh[sf[ou]]=Ne(dc,3);var rh=void 0,El=void 0,Lu=Yc,ud=Bh,Uc=cd,Eh=Bu,nh=0,Tl=Lu.m,df=8,Iu=c(128,Z);n:for(;J(Iu,0,7,ud,19);){if(Ne(Tl,1)){var Th=2+2*Ne(Tl,3);if((rh=2+Ne(Tl,Th))>Uc)break n}else rh=Uc;for(El=0;El<Uc&&rh--;){Qe(Tl);var dd=Iu[0+(127&le(Tl))];fe(Tl,Tl.u+dd.g);var na=dd.value;if(16>na)Eh[El++]=na,na!=0&&(df=na);else{var Lh=na==16,Ka=na-16,kp=Sd[Ka],hf=Ne(Tl,kc[Ka])+kp;if(El+hf>Uc)break n;for(var Ih=Lh?df:0;0<hf--;)Eh[El++]=Ih}}nh=1;break n}nh||(Lu.a=3),Bc=nh}(Bc=Bc&&!dc.h)&&(Wa=J(au,ug,8,Bu,cd)),Bc&&Wa!=0?Tu=Wa:(Yc.a=3,Tu=0)}if(Tu==0)break r;if(Su&&Wl[Vn]==1&&(Su=Kc[gs].g==0),Ch+=Kc[gs].g,gs+=Tu,3>=Vn){var Ll,ih=uc[0];for(Ll=1;Ll<es;++Ll)uc[Ll]>ih&&(ih=uc[Ll]);Sh+=ih}}if(ka.nd=Su,ka.Qb=0,Su&&(ka.qb=(su[3][Xc[3]+0].value<<24|su[1][Xc[1]+0].value<<16|su[2][Xc[2]+0].value)>>>0,Ch==0&&256>su[0][Xc[0]+0].value&&(ka.Qb=1,ka.qb+=su[0][Xc[0]+0].value<<8)),ka.jc=!ka.Qb&&6>Sh,ka.jc){var lu,al=ka;for(lu=0;lu<Ki;++lu){var ll=lu,cl=al.pd[ll],Nu=al.G[0][al.H[0]+ll];256<=Nu.value?(cl.g=Nu.g+256,cl.value=Nu.value):(cl.g=0,cl.value=0,ll>>=kt(Nu,8,cl),ll>>=kt(al.G[1][al.H[1]+ll],16,cl),ll>>=kt(al.G[2][al.H[2]+ll],0,cl),kt(al.G[3][al.H[3]+ll],24,cl))}}}Os.vc=Ws,Os.Wb=Lo,Os.Ya=ld,Os.yc=Td,Mi=1;break t}Mi=0}if(!(Se=Mi)){ee.a=3;break e}if(0<It){if(je.ua=1<<It,!Ar(je.Wa,It)){ee.a=1,Se=0;break e}}else je.ua=0;var Ld=ee,Nh=Le,BA=Pe,Id=Ld.s,hd=Id.xc;if(Ld.c=Nh,Ld.i=BA,Id.md=Dt(Nh,hd),Id.wc=hd==0?-1:(1<<hd)-1,$){ee.xb=Kf;break e}if((lt=o(Le*Pe))==null){ee.a=1,Se=0;break e}Se=(Se=rn(ee,lt,0,Le,Pe,Pe,null))&&!Me.h;break e}return Se?(ge!=null?ge[0]=lt:(e(lt==null),e($)),ee.$=0,$||sn(je)):sn(je),Se}function qn(w,I){var $=w.c*w.i,ee=$+I+16*I;return e(w.c<=I),w.V=o(ee),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+$+I,1)}function Wn(w,I){var $=w.C,ee=I-$,ge=w.V,Se=w.Ba+w.c*$;for(e(I<=w.l.o);0<ee;){var Le=16<ee?16:ee,Pe=w.l.ma,Me=w.l.width,je=Me*Le,lt=Pe.ca,It=Pe.tb+Me*$,Bt=w.Ta,xt=w.Ua;Rt(w,Le,ge,Se),oi(Bt,xt,lt,It,je),pr(Pe,$,$+Le,lt,It,Me),ee-=Le,ge+=Le*w.c,$+=Le}e($==I),w.C=w.Ma=I}function Pi(){this.ub=this.yd=this.td=this.Rb=0}function $i(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Kn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Yi(){this.Yb=function(){var w=[];return function I($,ee,ge){for(var Se=ge[ee],Le=0;Le<Se&&($.push(ge.length>ee+1?[]:0),!(ge.length<ee+1));Le++)I($[Le],ee+1,ge)}(w,0,[3,11]),w}()}function Ss(){this.jb=o(3),this.Wc=u([4,8],Yi),this.Xc=u([4,17],Yi)}function no(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Fs(){this.ld=this.La=this.dd=this.tc=0}function rs(){this.Na=this.la=0}function Sa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ba(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fs),this.Y=0,this.ya=Array(new Ba),this.aa=0,this.l=new sa}function go(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Sl(){this.cb=this.a=0,this.sc="",this.m=new st,this.Od=new Pi,this.Kc=new $i,this.ed=new no,this.Qa=new Kn,this.Ic=this.$c=this.Aa=0,this.D=new tl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,st),this.ia=0,this.pb=c(4,Sa),this.Pa=new Ss,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new go),this.Hd=0,this.rb=Array(new rs),this.sb=0,this.wa=Array(new Fs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ba),this.L=this.aa=0,this.gd=u([4,2],Fs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ha(){var w=new Sl;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Dc||(Dc=Ul)),w}function qi(w,I,$){return w.a==0&&(w.a=I,w.sc=$,w.cb=0),0}function Nc(w,I,$){return 3<=$&&w[I+0]==157&&w[I+1]==1&&w[I+2]==42}function nc(w,I){if(w==null)return 0;if(w.a=0,w.sc="OK",I==null)return qi(w,2,"null VP8Io passed to VP8GetHeaders()");var $=I.data,ee=I.w,ge=I.ha;if(4>ge)return qi(w,7,"Truncated header.");var Se=$[ee+0]|$[ee+1]<<8|$[ee+2]<<16,Le=w.Od;if(Le.Rb=!(1&Se),Le.td=Se>>1&7,Le.yd=Se>>4&1,Le.ub=Se>>5,3<Le.td)return qi(w,3,"Incorrect keyframe parameters.");if(!Le.yd)return qi(w,4,"Frame not displayable.");ee+=3,ge-=3;var Pe=w.Kc;if(Le.Rb){if(7>ge)return qi(w,7,"cannot parse picture header");if(!Nc($,ee,ge))return qi(w,3,"Bad code word");Pe.c=16383&($[ee+4]<<8|$[ee+3]),Pe.Td=$[ee+4]>>6,Pe.i=16383&($[ee+6]<<8|$[ee+5]),Pe.Ud=$[ee+6]>>6,ee+=7,ge-=7,w.za=Pe.c+15>>4,w.Ub=Pe.i+15>>4,I.width=Pe.c,I.height=Pe.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,s((Se=w.Pa).jb,0,255,Se.jb.length),e((Se=w.Qa)!=null),Se.Cb=0,Se.Bb=0,Se.Fb=1,s(Se.Zb,0,0,Se.Zb.length),s(Se.Lb,0,0,Se.Lb)}if(Le.ub>ge)return qi(w,7,"bad partition length");He(Se=w.m,$,ee,Le.ub),ee+=Le.ub,ge-=Le.ub,Le.Rb&&(Pe.Ld=et(Se),Pe.Kd=et(Se)),Pe=w.Qa;var Me,je=w.Pa;if(e(Se!=null),e(Pe!=null),Pe.Cb=et(Se),Pe.Cb){if(Pe.Bb=et(Se),et(Se)){for(Pe.Fb=et(Se),Me=0;4>Me;++Me)Pe.Zb[Me]=et(Se)?ve(Se,7):0;for(Me=0;4>Me;++Me)Pe.Lb[Me]=et(Se)?ve(Se,6):0}if(Pe.Bb)for(Me=0;3>Me;++Me)je.jb[Me]=et(Se)?Fe(Se,8):255}else Pe.Bb=0;if(Se.Ka)return qi(w,3,"cannot parse segment header");if((Pe=w.ed).zd=et(Se),Pe.Tb=Fe(Se,6),Pe.wb=Fe(Se,3),Pe.Pc=et(Se),Pe.Pc&&et(Se)){for(je=0;4>je;++je)et(Se)&&(Pe.vd[je]=ve(Se,6));for(je=0;4>je;++je)et(Se)&&(Pe.od[je]=ve(Se,6))}if(w.L=Pe.Tb==0?0:Pe.zd?1:2,Se.Ka)return qi(w,3,"cannot parse filter header");var lt=ge;if(ge=Me=ee,ee=Me+lt,Pe=lt,w.Xb=(1<<Fe(w.m,2))-1,lt<3*(je=w.Xb))$=7;else{for(Me+=3*je,Pe-=3*je,lt=0;lt<je;++lt){var It=$[ge+0]|$[ge+1]<<8|$[ge+2]<<16;It>Pe&&(It=Pe),He(w.Jc[+lt],$,Me,It),Me+=It,Pe-=It,ge+=3}He(w.Jc[+je],$,Me,Pe),$=Me<ee?0:5}if($!=0)return qi(w,$,"cannot parse partitions");for($=Fe(Me=w.m,7),ge=et(Me)?ve(Me,4):0,ee=et(Me)?ve(Me,4):0,Pe=et(Me)?ve(Me,4):0,je=et(Me)?ve(Me,4):0,Me=et(Me)?ve(Me,4):0,lt=w.Qa,It=0;4>It;++It){if(lt.Cb){var Bt=lt.Zb[It];lt.Fb||(Bt+=$)}else{if(0<It){w.pb[It]=w.pb[0];continue}Bt=$}var xt=w.pb[It];xt.Sc[0]=od[Js(Bt+ge,127)],xt.Sc[1]=wu[Js(Bt+0,127)],xt.Eb[0]=2*od[Js(Bt+ee,127)],xt.Eb[1]=101581*wu[Js(Bt+Pe,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=od[Js(Bt+je,117)],xt.Qc[1]=wu[Js(Bt+Me,127)],xt.lc=Bt+Me}if(!Le.Rb)return qi(w,4,"Not a key frame.");for(et(Se),Le=w.Pa,$=0;4>$;++$){for(ge=0;8>ge;++ge)for(ee=0;3>ee;++ee)for(Pe=0;11>Pe;++Pe)je=tt(Se,Pp[$][ge][ee][Pe])?Fe(Se,8):qf[$][ge][ee][Pe],Le.Wc[$][ge].Yb[ee][Pe]=je;for(ge=0;17>ge;++ge)Le.Xc[$][ge]=Le.Wc[$][Wf[ge]]}return w.kc=et(Se),w.kc&&(w.Bd=Fe(Se,8)),w.cb=1}function Ul(w,I,$,ee,ge,Se,Le){var Pe=I[ge].Yb[$];for($=0;16>ge;++ge){if(!tt(w,Pe[$+0]))return ge;for(;!tt(w,Pe[$+1]);)if(Pe=I[++ge].Yb[0],$=0,ge==16)return 16;var Me=I[ge+1].Yb;if(tt(w,Pe[$+2])){var je=w,lt=0;if(tt(je,(Bt=Pe)[(It=$)+3]))if(tt(je,Bt[It+6])){for(Pe=0,It=2*(lt=tt(je,Bt[It+8]))+(Bt=tt(je,Bt[It+9+lt])),lt=0,Bt=Kl[It];Bt[Pe];++Pe)lt+=lt+tt(je,Bt[Pe]);lt+=3+(8<<It)}else tt(je,Bt[It+7])?(lt=7+2*tt(je,165),lt+=tt(je,145)):lt=5+tt(je,159);else lt=tt(je,Bt[It+4])?3+tt(je,Bt[It+5]):2;Pe=Me[2]}else lt=1,Pe=Me[1];Me=Le+ad[ge],0>(je=w).b&&Ke(je);var It,Bt=je.b,xt=(It=je.Ca>>1)-(je.I>>Bt)>>31;--je.b,je.Ca+=xt,je.Ca|=1,je.I-=(It+1&xt)<<Bt,Se[Me]=((lt^xt)-xt)*ee[(0<ge)+0]}return 16}function Xo(w){var I=w.rb[w.sb-1];I.la=0,I.Na=0,s(w.zc,0,0,w.zc.length),w.ja=0}function Pa(w,I){if(w==null)return 0;if(I==null)return qi(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!nc(w,I))return 0;if(e(w.cb),I.ac==null||I.ac(I)){I.ob&&(w.L=0);var $=Cu[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=I.v-$>>4,w.zb=I.j-$>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=I.o+15+$>>4,w.Hb=I.va+15+$>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ee=w.ed;for($=0;4>$;++$){var ge;if(w.Qa.Cb){var Se=w.Qa.Lb[$];w.Qa.Fb||(Se+=ee.Tb)}else Se=ee.Tb;for(ge=0;1>=ge;++ge){var Le=w.gd[$][ge],Pe=Se;if(ee.Pc&&(Pe+=ee.vd[0],ge&&(Pe+=ee.od[0])),0<(Pe=0>Pe?0:63<Pe?63:Pe)){var Me=Pe;0<ee.wb&&(Me=4<ee.wb?Me>>2:Me>>1)>9-ee.wb&&(Me=9-ee.wb),1>Me&&(Me=1),Le.dd=Me,Le.tc=2*Pe+Me,Le.ld=40<=Pe?2:15<=Pe?1:0}else Le.tc=0;Le.La=ge}}}$=0}else qi(w,6,"Frame setup failed"),$=w.a;if($=$==0){if($){w.$c=0,0<w.Aa||(w.Ic=af);e:{$=w.Ic,ee=4*(Me=w.za);var je=32*Me,lt=Me+1,It=0<w.L?Me*(0<w.Aa?2:1):0,Bt=(w.Aa==2?2:1)*Me;if((Le=ee+832+(ge=3*(16*$+Cu[w.L])/2*je)+(Se=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Le)$=0;else{if(Le>w.Vb){if(w.Vb=0,w.Ec=o(Le),w.Fc=0,w.Ec==null){$=qi(w,1,"no memory during frame initialization.");break e}w.Vb=Le}Le=w.Ec,Pe=w.Fc,w.Ac=Le,w.Bc=Pe,Pe+=ee,w.Gd=c(je,go),w.Hd=0,w.rb=c(lt+1,rs),w.sb=1,w.wa=It?c(It,Fs):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Me),e(!0),w.oc=Le,w.pc=Pe,Pe+=832,w.ya=c(Bt,Ba),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Me),w.R=16*Me,w.B=8*Me,Me=(je=Cu[w.L])*w.R,je=je/2*w.B,w.sa=Le,w.ta=Pe+Me,w.qa=w.sa,w.ra=w.ta+16*$*w.R+je,w.Ha=w.qa,w.Ia=w.ra+8*$*w.B+je,w.$c=0,Pe+=ge,w.mb=Se?Le:null,w.nb=Se?Pe:null,e(Pe+Se<=w.Fc+w.Vb),Xo(w),s(w.Ac,w.Bc,0,ee),$=1}}if($){if(I.ka=0,I.y=w.sa,I.O=w.ta,I.f=w.qa,I.N=w.ra,I.ea=w.Ha,I.Vd=w.Ia,I.fa=w.R,I.Rc=w.B,I.F=null,I.J=0,!$a){for($=-255;255>=$;++$)qs[255+$]=0>$?-$:$;for($=-1020;1020>=$;++$)sl[1020+$]=-128>$?-128:127<$?127:$;for($=-112;112>=$;++$)ac[112+$]=-16>$?-16:15<$?15:$;for($=-255;510>=$;++$)ol[255+$]=0>$?0:255<$?255:$;$a=1}ds=Ht,bo=Cc,Ds=ce,Bs=Re,zs=At,Zi=Fc,eo=fa,ea=_s,ma=Eo,ta=ic,ra=io,$s=qo,ga=aa,hs=rl,os=ja,Tn=$o,mi=Ys,co=Bo,Mo[0]=Ci,Mo[1]=er,Mo[2]=an,Mo[3]=ei,Mo[4]=Ps,Mo[5]=Ro,Mo[6]=Xs,Mo[7]=yn,Mo[8]=Ni,Mo[9]=Zn,vl[0]=Kr,vl[1]=fn,vl[2]=pn,vl[3]=Fn,vl[4]=Gn,vl[5]=si,vl[6]=ji,qa[0]=jo,qa[1]=_r,qa[2]=ha,qa[3]=Ms,qa[4]=oa,qa[5]=zl,qa[6]=yo,$=1}else $=0}$&&($=function(xt,Ft){for(xt.M=0;xt.M<xt.Va;++xt.M){var Qt,ct=xt.Jc[xt.M&xt.Xb],mt=xt.m,lr=xt;for(Qt=0;Qt<lr.za;++Qt){var mr=mt,dr=lr,Xr=dr.Ac,Or=dr.Bc+4*Qt,bn=dr.zc,zr=dr.ya[dr.aa+Qt];if(dr.Qa.Bb?zr.$b=tt(mr,dr.Pa.jb[0])?2+tt(mr,dr.Pa.jb[2]):tt(mr,dr.Pa.jb[1]):zr.$b=0,dr.kc&&(zr.Ad=tt(mr,dr.Bd)),zr.Za=!tt(mr,145)+0,zr.Za){var ci=zr.Ob,fi=0;for(dr=0;4>dr;++dr){var $n,ti=bn[0+dr];for($n=0;4>$n;++$n){ti=Bd[Xr[Or+$n]][ti];for(var Mi=zo[tt(mr,ti[0])];0<Mi;)Mi=zo[2*Mi+tt(mr,ti[Mi])];ti=-Mi,Xr[Or+$n]=ti}n(ci,fi,Xr,Or,4),fi+=4,bn[0+dr]=ti}}else ti=tt(mr,156)?tt(mr,128)?1:3:tt(mr,163)?2:0,zr.Ob[0]=ti,s(Xr,Or,ti,4),s(bn,0,ti,4);zr.Dd=tt(mr,142)?tt(mr,114)?tt(mr,183)?1:3:2:0}if(lr.m.Ka)return qi(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(lr=ct,mr=(mt=xt).rb[mt.sb-1],Xr=mt.rb[mt.sb+mt.ja],Qt=mt.ya[mt.aa+mt.ja],Or=mt.kc?Qt.Ad:0)mr.la=Xr.la=0,Qt.Za||(mr.Na=Xr.Na=0),Qt.Hc=0,Qt.Gc=0,Qt.ia=0;else{var wi,Vn;if(mr=Xr,Xr=lr,Or=mt.Pa.Xc,bn=mt.ya[mt.aa+mt.ja],zr=mt.pb[bn.$b],dr=bn.ad,ci=0,fi=mt.rb[mt.sb-1],ti=$n=0,s(dr,ci,0,384),bn.Za)var gs=0,To=Or[3];else{Mi=o(16);var zi=mr.Na+fi.Na;if(zi=Dc(Xr,Or[1],zi,zr.Eb,0,Mi,0),mr.Na=fi.Na=(0<zi)+0,1<zi)ds(Mi,0,dr,ci);else{var Qi=Mi[0]+3>>3;for(Mi=0;256>Mi;Mi+=16)dr[ci+Mi]=Qi}gs=1,To=Or[0]}var gi=15&mr.la,Qo=15&fi.la;for(Mi=0;4>Mi;++Mi){var Ko=1&Qo;for(Qi=Vn=0;4>Qi;++Qi)gi=gi>>1|(Ko=(zi=Dc(Xr,To,zi=Ko+(1&gi),zr.Sc,gs,dr,ci))>gs)<<7,Vn=Vn<<2|(3<zi?3:1<zi?2:dr[ci+0]!=0),ci+=16;gi>>=4,Qo=Qo>>1|Ko<<7,$n=($n<<8|Vn)>>>0}for(To=gi,gs=Qo>>4,wi=0;4>wi;wi+=2){for(Vn=0,gi=mr.la>>4+wi,Qo=fi.la>>4+wi,Mi=0;2>Mi;++Mi){for(Ko=1&Qo,Qi=0;2>Qi;++Qi)zi=Ko+(1&gi),gi=gi>>1|(Ko=0<(zi=Dc(Xr,Or[2],zi,zr.Qc,0,dr,ci)))<<3,Vn=Vn<<2|(3<zi?3:1<zi?2:dr[ci+0]!=0),ci+=16;gi>>=2,Qo=Qo>>1|Ko<<5}ti|=Vn<<4*wi,To|=gi<<4<<wi,gs|=(240&Qo)<<wi}mr.la=To,fi.la=gs,bn.Hc=$n,bn.Gc=ti,bn.ia=43690&ti?0:zr.ia,Or=!($n|ti)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[Qt.$b][Qt.Za],mt.wa[mt.Y+mt.ja].La|=!Or),lr.Ka)return qi(xt,7,"Premature end-of-file encountered.")}if(Xo(xt),mt=Ft,lr=1,Qt=(ct=xt).D,mr=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(Qt.M=ct.M,Qt.uc=mr,so(ct,Qt),lr=1,Qt=(Vn=ct.D).Nb,mr=(ti=Cu[ct.L])*ct.R,Xr=ti/2*ct.B,Mi=16*Qt*ct.R,Qi=8*Qt*ct.B,Or=ct.sa,bn=ct.ta-mr+Mi,zr=ct.qa,dr=ct.ra-Xr+Qi,ci=ct.Ha,fi=ct.Ia-Xr+Qi,Qo=(gi=Vn.M)==0,$n=gi>=ct.Va-1,ct.Aa==2&&so(ct,Vn),Vn.uc)for(Ko=(zi=ct).D.M,e(zi.D.uc),Vn=zi.yb;Vn<zi.Hb;++Vn){gs=Vn,To=Ko;var Os=(Ws=(es=zi).D).Nb;wi=es.R;var Ws=Ws.wa[Ws.Y+gs],Lo=es.sa,ko=es.ta+16*Os*wi+16*gs,ca=Ws.dd,jr=Ws.tc;if(jr!=0)if(e(3<=jr),es.L==1)0<gs&&Tn(Lo,ko,wi,jr+4),Ws.La&&co(Lo,ko,wi,jr),0<To&&os(Lo,ko,wi,jr+4),Ws.La&&mi(Lo,ko,wi,jr);else{var In=es.B,ya=es.qa,Es=es.ra+8*Os*In+8*gs,cr=es.Ha,es=es.Ia+8*Os*In+8*gs;Os=Ws.ld,0<gs&&(ea(Lo,ko,wi,jr+4,ca,Os),ta(ya,Es,cr,es,In,jr+4,ca,Os)),Ws.La&&($s(Lo,ko,wi,jr,ca,Os),hs(ya,Es,cr,es,In,jr,ca,Os)),0<To&&(eo(Lo,ko,wi,jr+4,ca,Os),ma(ya,Es,cr,es,In,jr+4,ca,Os)),Ws.La&&(ra(Lo,ko,wi,jr,ca,Os),ga(ya,Es,cr,es,In,jr,ca,Os))}}if(ct.ia&&alert("todo:DitherRow"),mt.put!=null){if(Vn=16*gi,gi=16*(gi+1),Qo?(mt.y=ct.sa,mt.O=ct.ta+Mi,mt.f=ct.qa,mt.N=ct.ra+Qi,mt.ea=ct.Ha,mt.W=ct.Ia+Qi):(Vn-=ti,mt.y=Or,mt.O=bn,mt.f=zr,mt.N=dr,mt.ea=ci,mt.W=fi),$n||(gi-=ti),gi>mt.o&&(gi=mt.o),mt.F=null,mt.J=null,ct.Fa!=null&&0<ct.Fa.length&&Vn<gi&&(mt.J=$l(ct,mt,Vn,gi-Vn),mt.F=ct.mb,mt.F==null&&mt.F.length==0)){lr=qi(ct,3,"Could not decode alpha data.");break e}Vn<mt.j&&(ti=mt.j-Vn,Vn=mt.j,e(!(1&ti)),mt.O+=ct.R*ti,mt.N+=ct.B*(ti>>1),mt.W+=ct.B*(ti>>1),mt.F!=null&&(mt.J+=mt.width*ti)),Vn<gi&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=Vn-mt.j,mt.U=mt.va-mt.v,mt.T=gi-Vn,lr=mt.put(mt))}Qt+1!=ct.Ic||$n||(n(ct.sa,ct.ta-mr,Or,bn+16*ct.R,mr),n(ct.qa,ct.ra-Xr,zr,dr+8*ct.B,Xr),n(ct.Ha,ct.Ia-Xr,ci,fi+8*ct.B,Xr))}if(!lr)return qi(xt,6,"Output aborted.")}return 1}(w,I)),I.bc!=null&&I.bc(I),$&=1}return $?(w.cb=0,$):0}function Ai(w,I,$,ee,ge){ge=w[I+$+32*ee]+(ge>>3),w[I+$+32*ee]=-256&ge?0>ge?0:255:ge}function So(w,I,$,ee,ge,Se){Ai(w,I,0,$,ee+ge),Ai(w,I,1,$,ee+Se),Ai(w,I,2,$,ee-Se),Ai(w,I,3,$,ee-ge)}function xs(w){return(20091*w>>16)+w}function Bl(w,I,$,ee){var ge,Se=0,Le=o(16);for(ge=0;4>ge;++ge){var Pe=w[I+0]+w[I+8],Me=w[I+0]-w[I+8],je=(35468*w[I+4]>>16)-xs(w[I+12]),lt=xs(w[I+4])+(35468*w[I+12]>>16);Le[Se+0]=Pe+lt,Le[Se+1]=Me+je,Le[Se+2]=Me-je,Le[Se+3]=Pe-lt,Se+=4,I++}for(ge=Se=0;4>ge;++ge)Pe=(w=Le[Se+0]+4)+Le[Se+8],Me=w-Le[Se+8],je=(35468*Le[Se+4]>>16)-xs(Le[Se+12]),Ai($,ee,0,0,Pe+(lt=xs(Le[Se+4])+(35468*Le[Se+12]>>16))),Ai($,ee,1,0,Me+je),Ai($,ee,2,0,Me-je),Ai($,ee,3,0,Pe-lt),Se++,ee+=32}function Fc(w,I,$,ee){var ge=w[I+0]+4,Se=35468*w[I+4]>>16,Le=xs(w[I+4]),Pe=35468*w[I+1]>>16;So($,ee,0,ge+Le,w=xs(w[I+1]),Pe),So($,ee,1,ge+Se,w,Pe),So($,ee,2,ge-Se,w,Pe),So($,ee,3,ge-Le,w,Pe)}function Cc(w,I,$,ee,ge){Bl(w,I,$,ee),ge&&Bl(w,I+16,$,ee+4)}function ce(w,I,$,ee){bo(w,I+0,$,ee,1),bo(w,I+32,$,ee+128,1)}function Re(w,I,$,ee){var ge;for(w=w[I+0]+4,ge=0;4>ge;++ge)for(I=0;4>I;++I)Ai($,ee,I,ge,w)}function At(w,I,$,ee){w[I+0]&&Bs(w,I+0,$,ee),w[I+16]&&Bs(w,I+16,$,ee+4),w[I+32]&&Bs(w,I+32,$,ee+128),w[I+48]&&Bs(w,I+48,$,ee+128+4)}function Ht(w,I,$,ee){var ge,Se=o(16);for(ge=0;4>ge;++ge){var Le=w[I+0+ge]+w[I+12+ge],Pe=w[I+4+ge]+w[I+8+ge],Me=w[I+4+ge]-w[I+8+ge],je=w[I+0+ge]-w[I+12+ge];Se[0+ge]=Le+Pe,Se[8+ge]=Le-Pe,Se[4+ge]=je+Me,Se[12+ge]=je-Me}for(ge=0;4>ge;++ge)Le=(w=Se[0+4*ge]+3)+Se[3+4*ge],Pe=Se[1+4*ge]+Se[2+4*ge],Me=Se[1+4*ge]-Se[2+4*ge],je=w-Se[3+4*ge],$[ee+0]=Le+Pe>>3,$[ee+16]=je+Me>>3,$[ee+32]=Le-Pe>>3,$[ee+48]=je-Me>>3,ee+=64}function Jt(w,I,$){var ee,ge=I-32,Se=oo,Le=255-w[ge-1];for(ee=0;ee<$;++ee){var Pe,Me=Se,je=Le+w[I-1];for(Pe=0;Pe<$;++Pe)w[I+Pe]=Me[je+w[ge+Pe]];I+=32}}function er(w,I){Jt(w,I,4)}function _r(w,I){Jt(w,I,8)}function fn(w,I){Jt(w,I,16)}function pn(w,I){var $;for($=0;16>$;++$)n(w,I+32*$,w,I-32,16)}function Fn(w,I){var $;for($=16;0<$;--$)s(w,I,w[I-1],16),I+=32}function Mn(w,I,$){var ee;for(ee=0;16>ee;++ee)s(I,$+32*ee,w,16)}function Kr(w,I){var $,ee=16;for($=0;16>$;++$)ee+=w[I-1+32*$]+w[I+$-32];Mn(ee>>5,w,I)}function Gn(w,I){var $,ee=8;for($=0;16>$;++$)ee+=w[I-1+32*$];Mn(ee>>4,w,I)}function si(w,I){var $,ee=8;for($=0;16>$;++$)ee+=w[I+$-32];Mn(ee>>4,w,I)}function ji(w,I){Mn(128,w,I)}function Sr(w,I,$){return w+2*I+$+2>>2}function an(w,I){var $,ee=I-32;for(ee=new Uint8Array([Sr(w[ee-1],w[ee+0],w[ee+1]),Sr(w[ee+0],w[ee+1],w[ee+2]),Sr(w[ee+1],w[ee+2],w[ee+3]),Sr(w[ee+2],w[ee+3],w[ee+4])]),$=0;4>$;++$)n(w,I+32*$,ee,0,ee.length)}function ei(w,I){var $=w[I-1],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1+96];bt(w,I+0,16843009*Sr(w[I-1-32],$,ee)),bt(w,I+32,16843009*Sr($,ee,ge)),bt(w,I+64,16843009*Sr(ee,ge,Se)),bt(w,I+96,16843009*Sr(ge,Se,Se))}function Ci(w,I){var $,ee=4;for($=0;4>$;++$)ee+=w[I+$-32]+w[I-1+32*$];for(ee>>=3,$=0;4>$;++$)s(w,I+32*$,ee,4)}function Ps(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1-32],Le=w[I+0-32],Pe=w[I+1-32],Me=w[I+2-32],je=w[I+3-32];w[I+0+96]=Sr(ee,ge,w[I-1+96]),w[I+1+96]=w[I+0+64]=Sr($,ee,ge),w[I+2+96]=w[I+1+64]=w[I+0+32]=Sr(Se,$,ee),w[I+3+96]=w[I+2+64]=w[I+1+32]=w[I+0+0]=Sr(Le,Se,$),w[I+3+64]=w[I+2+32]=w[I+1+0]=Sr(Pe,Le,Se),w[I+3+32]=w[I+2+0]=Sr(Me,Pe,Le),w[I+3+0]=Sr(je,Me,Pe)}function Xs(w,I){var $=w[I+1-32],ee=w[I+2-32],ge=w[I+3-32],Se=w[I+4-32],Le=w[I+5-32],Pe=w[I+6-32],Me=w[I+7-32];w[I+0+0]=Sr(w[I+0-32],$,ee),w[I+1+0]=w[I+0+32]=Sr($,ee,ge),w[I+2+0]=w[I+1+32]=w[I+0+64]=Sr(ee,ge,Se),w[I+3+0]=w[I+2+32]=w[I+1+64]=w[I+0+96]=Sr(ge,Se,Le),w[I+3+32]=w[I+2+64]=w[I+1+96]=Sr(Se,Le,Pe),w[I+3+64]=w[I+2+96]=Sr(Le,Pe,Me),w[I+3+96]=Sr(Pe,Me,Me)}function Ro(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1-32],Le=w[I+0-32],Pe=w[I+1-32],Me=w[I+2-32],je=w[I+3-32];w[I+0+0]=w[I+1+64]=Se+Le+1>>1,w[I+1+0]=w[I+2+64]=Le+Pe+1>>1,w[I+2+0]=w[I+3+64]=Pe+Me+1>>1,w[I+3+0]=Me+je+1>>1,w[I+0+96]=Sr(ge,ee,$),w[I+0+64]=Sr(ee,$,Se),w[I+0+32]=w[I+1+96]=Sr($,Se,Le),w[I+1+32]=w[I+2+96]=Sr(Se,Le,Pe),w[I+2+32]=w[I+3+96]=Sr(Le,Pe,Me),w[I+3+32]=Sr(Pe,Me,je)}function yn(w,I){var $=w[I+0-32],ee=w[I+1-32],ge=w[I+2-32],Se=w[I+3-32],Le=w[I+4-32],Pe=w[I+5-32],Me=w[I+6-32],je=w[I+7-32];w[I+0+0]=$+ee+1>>1,w[I+1+0]=w[I+0+64]=ee+ge+1>>1,w[I+2+0]=w[I+1+64]=ge+Se+1>>1,w[I+3+0]=w[I+2+64]=Se+Le+1>>1,w[I+0+32]=Sr($,ee,ge),w[I+1+32]=w[I+0+96]=Sr(ee,ge,Se),w[I+2+32]=w[I+1+96]=Sr(ge,Se,Le),w[I+3+32]=w[I+2+96]=Sr(Se,Le,Pe),w[I+3+64]=Sr(Le,Pe,Me),w[I+3+96]=Sr(Pe,Me,je)}function Zn(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1+96];w[I+0+0]=$+ee+1>>1,w[I+2+0]=w[I+0+32]=ee+ge+1>>1,w[I+2+32]=w[I+0+64]=ge+Se+1>>1,w[I+1+0]=Sr($,ee,ge),w[I+3+0]=w[I+1+32]=Sr(ee,ge,Se),w[I+3+32]=w[I+1+64]=Sr(ge,Se,Se),w[I+3+64]=w[I+2+64]=w[I+0+96]=w[I+1+96]=w[I+2+96]=w[I+3+96]=Se}function Ni(w,I){var $=w[I-1+0],ee=w[I-1+32],ge=w[I-1+64],Se=w[I-1+96],Le=w[I-1-32],Pe=w[I+0-32],Me=w[I+1-32],je=w[I+2-32];w[I+0+0]=w[I+2+32]=$+Le+1>>1,w[I+0+32]=w[I+2+64]=ee+$+1>>1,w[I+0+64]=w[I+2+96]=ge+ee+1>>1,w[I+0+96]=Se+ge+1>>1,w[I+3+0]=Sr(Pe,Me,je),w[I+2+0]=Sr(Le,Pe,Me),w[I+1+0]=w[I+3+32]=Sr($,Le,Pe),w[I+1+32]=w[I+3+64]=Sr(ee,$,Le),w[I+1+64]=w[I+3+96]=Sr(ge,ee,$),w[I+1+96]=Sr(Se,ge,ee)}function ha(w,I){var $;for($=0;8>$;++$)n(w,I+32*$,w,I-32,8)}function Ms(w,I){var $;for($=0;8>$;++$)s(w,I,w[I-1],8),I+=32}function hi(w,I,$){var ee;for(ee=0;8>ee;++ee)s(I,$+32*ee,w,8)}function jo(w,I){var $,ee=8;for($=0;8>$;++$)ee+=w[I+$-32]+w[I-1+32*$];hi(ee>>4,w,I)}function zl(w,I){var $,ee=4;for($=0;8>$;++$)ee+=w[I+$-32];hi(ee>>3,w,I)}function oa(w,I){var $,ee=4;for($=0;8>$;++$)ee+=w[I-1+32*$];hi(ee>>3,w,I)}function yo(w,I){hi(128,w,I)}function As(w,I,$){var ee=w[I-$],ge=w[I+0],Se=3*(ge-ee)+jc[1020+w[I-2*$]-w[I+$]],Le=lc[112+(Se+4>>3)];w[I-$]=oo[255+ee+lc[112+(Se+3>>3)]],w[I+0]=oo[255+ge-Le]}function Wc(w,I,$,ee){var ge=w[I+0],Se=w[I+$];return Qs[255+w[I-2*$]-w[I-$]]>ee||Qs[255+Se-ge]>ee}function Ql(w,I,$,ee){return 4*Qs[255+w[I-$]-w[I+0]]+Qs[255+w[I-2*$]-w[I+$]]<=ee}function Hl(w,I,$,ee,ge){var Se=w[I-3*$],Le=w[I-2*$],Pe=w[I-$],Me=w[I+0],je=w[I+$],lt=w[I+2*$],It=w[I+3*$];return 4*Qs[255+Pe-Me]+Qs[255+Le-je]>ee?0:Qs[255+w[I-4*$]-Se]<=ge&&Qs[255+Se-Le]<=ge&&Qs[255+Le-Pe]<=ge&&Qs[255+It-lt]<=ge&&Qs[255+lt-je]<=ge&&Qs[255+je-Me]<=ge}function ja(w,I,$,ee){var ge=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,I+ee,$,ge)&&As(w,I+ee,$)}function $o(w,I,$,ee){var ge=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,I+ee*$,1,ge)&&As(w,I+ee*$,1)}function Ys(w,I,$,ee){var ge;for(ge=3;0<ge;--ge)ja(w,I+=4*$,$,ee)}function Bo(w,I,$,ee){var ge;for(ge=3;0<ge;--ge)$o(w,I+=4,$,ee)}function Zs(w,I,$,ee,ge,Se,Le,Pe){for(Se=2*Se+1;0<ge--;){if(Hl(w,I,$,Se,Le))if(Wc(w,I,$,Pe))As(w,I,$);else{var Me=w,je=I,lt=$,It=Me[je-2*lt],Bt=Me[je-lt],xt=Me[je+0],Ft=Me[je+lt],Qt=Me[je+2*lt],ct=27*(lr=jc[1020+3*(xt-Bt)+jc[1020+It-Ft]])+63>>7,mt=18*lr+63>>7,lr=9*lr+63>>7;Me[je-3*lt]=oo[255+Me[je-3*lt]+lr],Me[je-2*lt]=oo[255+It+mt],Me[je-lt]=oo[255+Bt+ct],Me[je+0]=oo[255+xt-ct],Me[je+lt]=oo[255+Ft-mt],Me[je+2*lt]=oo[255+Qt-lr]}I+=ee}}function vo(w,I,$,ee,ge,Se,Le,Pe){for(Se=2*Se+1;0<ge--;){if(Hl(w,I,$,Se,Le))if(Wc(w,I,$,Pe))As(w,I,$);else{var Me=w,je=I,lt=$,It=Me[je-lt],Bt=Me[je+0],xt=Me[je+lt],Ft=lc[112+((Qt=3*(Bt-It))+4>>3)],Qt=lc[112+(Qt+3>>3)],ct=Ft+1>>1;Me[je-2*lt]=oo[255+Me[je-2*lt]+ct],Me[je-lt]=oo[255+It+Qt],Me[je+0]=oo[255+Bt-Ft],Me[je+lt]=oo[255+xt-ct]}I+=ee}}function fa(w,I,$,ee,ge,Se){Zs(w,I,$,1,16,ee,ge,Se)}function _s(w,I,$,ee,ge,Se){Zs(w,I,1,$,16,ee,ge,Se)}function io(w,I,$,ee,ge,Se){var Le;for(Le=3;0<Le;--Le)vo(w,I+=4*$,$,1,16,ee,ge,Se)}function qo(w,I,$,ee,ge,Se){var Le;for(Le=3;0<Le;--Le)vo(w,I+=4,1,$,16,ee,ge,Se)}function Eo(w,I,$,ee,ge,Se,Le,Pe){Zs(w,I,ge,1,8,Se,Le,Pe),Zs($,ee,ge,1,8,Se,Le,Pe)}function ic(w,I,$,ee,ge,Se,Le,Pe){Zs(w,I,1,ge,8,Se,Le,Pe),Zs($,ee,1,ge,8,Se,Le,Pe)}function aa(w,I,$,ee,ge,Se,Le,Pe){vo(w,I+4*ge,ge,1,8,Se,Le,Pe),vo($,ee+4*ge,ge,1,8,Se,Le,Pe)}function rl(w,I,$,ee,ge,Se,Le,Pe){vo(w,I+4,1,ge,8,Se,Le,Pe),vo($,ee+4,1,ge,8,Se,Le,Pe)}function Uo(){this.ba=new Gi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Va(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wo(){this.ua=0,this.Wa=new Ue,this.vb=new Ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new be,this.yc=new Z}function xu(){this.xb=this.a=0,this.l=new sa,this.ca=new Gi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wo,this.ab=0,this.gc=c(4,Vl),this.Oc=0}function pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xo(w,I,$,ee,ge,Se,Le){for(w=w==null?0:w[I+0],I=0;I<Le;++I)ge[Se+I]=w+$[ee+I]&255,w=ge[Se+I]}function Gl(w,I,$,ee,ge,Se,Le){var Pe;if(w==null)xo(null,null,$,ee,ge,Se,Le);else for(Pe=0;Pe<Le;++Pe)ge[Se+Pe]=w[I+Pe]+$[ee+Pe]&255}function _o(w,I,$,ee,ge,Se,Le){if(w==null)xo(null,null,$,ee,ge,Se,Le);else{var Pe,Me=w[I+0],je=Me,lt=Me;for(Pe=0;Pe<Le;++Pe)je=lt+(Me=w[I+Pe])-je,lt=$[ee+Pe]+(-256&je?0>je?0:255:je)&255,je=Me,ge[Se+Pe]=lt}}function $l(w,I,$,ee){var ge=I.width,Se=I.o;if(e(w!=null&&I!=null),0>$||0>=ee||$+ee>Se)return null;if(!w.Cc){if(w.ga==null){var Le;if(w.ga=new pa,(Le=w.ga==null)||(Le=I.width*I.o,e(w.Gb.length==0),w.Gb=o(Le),w.Uc=0,w.Gb==null?Le=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Le=1),Le=!Le),!Le){Le=w.ga;var Pe=w.Fa,Me=w.P,je=w.qc,lt=w.mb,It=w.nb,Bt=Me+1,xt=je-1,Ft=Le.l;if(e(Pe!=null&&lt!=null&&I!=null),Ta[0]=null,Ta[1]=xo,Ta[2]=Gl,Ta[3]=_o,Le.ca=lt,Le.tb=It,Le.c=I.width,Le.i=I.height,e(0<Le.c&&0<Le.i),1>=je)I=0;else if(Le.$a=Pe[Me+0]>>0&3,Le.Z=Pe[Me+0]>>2&3,Le.Lc=Pe[Me+0]>>4&3,Me=Pe[Me+0]>>6&3,0>Le.$a||1<Le.$a||4<=Le.Z||1<Le.Lc||Me)I=0;else if(Ft.put=ur,Ft.ac=ri,Ft.bc=We,Ft.ma=Le,Ft.width=I.width,Ft.height=I.height,Ft.Da=I.Da,Ft.v=I.v,Ft.va=I.va,Ft.j=I.j,Ft.o=I.o,Le.$a)e:{e(Le.$a==1),I=_n();t:for(;;){if(I==null){I=0;break e}if(e(Le!=null),Le.mc=I,I.c=Le.c,I.i=Le.i,I.l=Le.l,I.l.ma=Le,I.l.width=Le.c,I.l.height=Le.i,I.a=0,_e(I.m,Pe,Bt,xt),!Un(Le.c,Le.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&xr(I.s)?(Le.ic=1,Pe=I.c*I.i,I.Ta=null,I.Ua=0,I.V=o(Pe),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(Le.ic=0,I=qn(I,Le.c)),!I))break t;I=1;break e}Le.mc=null,I=0}else I=xt>=Le.c*Le.i;Le=!I}if(Le)return null;w.ga.Lc!=1?w.Ga=0:ee=Se-$}e(w.ga!=null),e($+ee<=Se);e:{if(I=(Pe=w.ga).c,Se=Pe.l.o,Pe.$a==0){if(Bt=w.rc,xt=w.Vc,Ft=w.Fa,Me=w.P+1+$*I,je=w.mb,lt=w.nb+$*I,e(Me<=w.P+w.qc),Pe.Z!=0)for(e(Ta[Pe.Z]!=null),Le=0;Le<ee;++Le)Ta[Pe.Z](Bt,xt,Ft,Me,je,lt,I),Bt=je,xt=lt,lt+=I,Me+=I;else for(Le=0;Le<ee;++Le)n(je,lt,Ft,Me,I),Bt=je,xt=lt,lt+=I,Me+=I;w.rc=Bt,w.Vc=xt}else{if(e(Pe.mc!=null),I=$+ee,e((Le=Pe.mc)!=null),e(I<=Le.i),Le.C>=I)I=1;else if(Pe.ic||St(),Pe.ic){Pe=Le.V,Bt=Le.Ba,xt=Le.c;var Qt=Le.i,ct=(Ft=1,Me=Le.$/xt,je=Le.$%xt,lt=Le.m,It=Le.s,Le.$),mt=xt*Qt,lr=xt*I,mr=It.wc,dr=ct<lr?Wt(It,je,Me):null;e(ct<=mt),e(I<=Qt),e(xr(It));t:for(;;){for(;!lt.h&&ct<lr;){if(je&mr||(dr=Wt(It,je,Me)),e(dr!=null),Qe(lt),256>(Qt=Ct(dr.G[0],dr.H[0],lt)))Pe[Bt+ct]=Qt,++ct,++je>=xt&&(je=0,++Me<=I&&!(Me%16)&&Lr(Le,Me));else{if(!(280>Qt)){Ft=0;break t}Qt=pt(Qt-256,lt);var Xr,Or=Ct(dr.G[4],dr.H[4],lt);if(Qe(lt),!(ct>=(Or=Lt(xt,Or=pt(Or,lt)))&&mt-ct>=Qt)){Ft=0;break t}for(Xr=0;Xr<Qt;++Xr)Pe[Bt+ct+Xr]=Pe[Bt+ct+Xr-Or];for(ct+=Qt,je+=Qt;je>=xt;)je-=xt,++Me<=I&&!(Me%16)&&Lr(Le,Me);ct<lr&&je&mr&&(dr=Wt(It,je,Me))}e(lt.h==pe(lt))}Lr(Le,Me>I?I:Me);break t}!Ft||lt.h&&ct<mt?(Ft=0,Le.a=lt.h?5:3):Le.$=ct,I=Ft}else I=rn(Le,Le.V,Le.Ba,Le.c,Le.i,I,Wn);if(!I){ee=0;break e}}$+ee>=Se&&(w.Cc=1),ee=1}if(!ee)return null;if(w.Cc&&((ee=w.ga)!=null&&(ee.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+$*ge}function k(w,I,$,ee,ge,Se){for(;0<ge--;){var Le,Pe=w,Me=I+($?1:0),je=w,lt=I+($?0:3);for(Le=0;Le<ee;++Le){var It=je[lt+4*Le];It!=255&&(It*=32897,Pe[Me+4*Le+0]=Pe[Me+4*Le+0]*It>>23,Pe[Me+4*Le+1]=Pe[Me+4*Le+1]*It>>23,Pe[Me+4*Le+2]=Pe[Me+4*Le+2]*It>>23)}I+=Se}}function me(w,I,$,ee,ge){for(;0<ee--;){var Se;for(Se=0;Se<$;++Se){var Le=w[I+2*Se+0],Pe=15&(je=w[I+2*Se+1]),Me=4369*Pe,je=(240&je|je>>4)*Me>>16;w[I+2*Se+0]=(240&Le|Le>>4)*Me>>16&240|(15&Le|Le<<4)*Me>>16>>4&15,w[I+2*Se+1]=240&je|Pe}I+=ge}}function Xe(w,I,$,ee,ge,Se,Le,Pe){var Me,je,lt=255;for(je=0;je<ge;++je){for(Me=0;Me<ee;++Me){var It=w[I+Me];Se[Le+4*Me]=It,lt&=It}I+=$,Le+=Pe}return lt!=255}function ot(w,I,$,ee,ge){var Se;for(Se=0;Se<ge;++Se)$[ee+Se]=w[I+Se]>>8}function St(){to=k,Cs=me,Ji=Xe,oi=ot}function qt(w,I,$){K[w]=function(ee,ge,Se,Le,Pe,Me,je,lt,It,Bt,xt,Ft,Qt,ct,mt,lr,mr){var dr,Xr=mr-1>>1,Or=Pe[Me+0]|je[lt+0]<<16,bn=It[Bt+0]|xt[Ft+0]<<16;e(ee!=null);var zr=3*Or+bn+131074>>2;for(I(ee[ge+0],255&zr,zr>>16,Qt,ct),Se!=null&&(zr=3*bn+Or+131074>>2,I(Se[Le+0],255&zr,zr>>16,mt,lr)),dr=1;dr<=Xr;++dr){var ci=Pe[Me+dr]|je[lt+dr]<<16,fi=It[Bt+dr]|xt[Ft+dr]<<16,$n=Or+ci+bn+fi+524296,ti=$n+2*(ci+bn)>>3;zr=ti+Or>>1,Or=($n=$n+2*(Or+fi)>>3)+ci>>1,I(ee[ge+2*dr-1],255&zr,zr>>16,Qt,ct+(2*dr-1)*$),I(ee[ge+2*dr-0],255&Or,Or>>16,Qt,ct+(2*dr-0)*$),Se!=null&&(zr=$n+bn>>1,Or=ti+fi>>1,I(Se[Le+2*dr-1],255&zr,zr>>16,mt,lr+(2*dr-1)*$),I(Se[Le+2*dr+0],255&Or,Or>>16,mt,lr+(2*dr+0)*$)),Or=ci,bn=fi}1&mr||(zr=3*Or+bn+131074>>2,I(ee[ge+mr-1],255&zr,zr>>16,Qt,ct+(mr-1)*$),Se!=null&&(zr=3*bn+Or+131074>>2,I(Se[Le+mr-1],255&zr,zr>>16,mt,lr+(mr-1)*$)))}}function gr(){uo[cc]=it,uo[Mc]=Oe,uo[_u]=ye,uo[Sc]=nt,uo[iu]=Xt,uo[id]=Qr,uo[eh]=Xn,uo[sd]=Oe,uo[Cd]=nt,uo[bu]=Xt,uo[th]=Qr}function $r(w){return w&~jp?0>w?0:255:w>>Xf}function An(w,I){return $r((19077*w>>8)+(26149*I>>8)-14234)}function En(w,I,$){return $r((19077*w>>8)-(6419*I>>8)-(13320*$>>8)+8708)}function qr(w,I){return $r((19077*w>>8)+(33050*I>>8)-17685)}function Dr(w,I,$,ee,ge){ee[ge+0]=An(w,$),ee[ge+1]=En(w,I,$),ee[ge+2]=qr(w,I)}function bi(w,I,$,ee,ge){ee[ge+0]=qr(w,I),ee[ge+1]=En(w,I,$),ee[ge+2]=An(w,$)}function gn(w,I,$,ee,ge){var Se=En(w,I,$);I=Se<<3&224|qr(w,I)>>3,ee[ge+0]=248&An(w,$)|Se>>5,ee[ge+1]=I}function Fi(w,I,$,ee,ge){var Se=240&qr(w,I)|15;ee[ge+0]=240&An(w,$)|En(w,I,$)>>4,ee[ge+1]=Se}function bs(w,I,$,ee,ge){ee[ge+0]=255,Dr(w,I,$,ee,ge+1)}function vn(w,I,$,ee,ge){bi(w,I,$,ee,ge),ee[ge+3]=255}function lo(w,I,$,ee,ge){Dr(w,I,$,ee,ge),ee[ge+3]=255}function Js(w,I){return 0>w?0:w>I?I:w}function Yo(w,I,$){K[w]=function(ee,ge,Se,Le,Pe,Me,je,lt,It){for(var Bt=lt+(-2&It)*$;lt!=Bt;)I(ee[ge+0],Se[Le+0],Pe[Me+0],je,lt),I(ee[ge+1],Se[Le+0],Pe[Me+0],je,lt+$),ge+=2,++Le,++Me,lt+=2*$;1&It&&I(ee[ge+0],Se[Le+0],Pe[Me+0],je,lt)}}function nl(w,I,$){return $==0?w==0?I==0?6:5:I==0?4:0:$}function il(w,I,$,ee,ge){switch(w>>>30){case 3:bo(I,$,ee,ge,0);break;case 2:Zi(I,$,ee,ge);break;case 1:Bs(I,$,ee,ge)}}function so(w,I){var $,ee,ge=I.M,Se=I.Nb,Le=w.oc,Pe=w.pc+40,Me=w.oc,je=w.pc+584,lt=w.oc,It=w.pc+600;for($=0;16>$;++$)Le[Pe+32*$-1]=129;for($=0;8>$;++$)Me[je+32*$-1]=129,lt[It+32*$-1]=129;for(0<ge?Le[Pe-1-32]=Me[je-1-32]=lt[It-1-32]=129:(s(Le,Pe-32-1,127,21),s(Me,je-32-1,127,9),s(lt,It-32-1,127,9)),ee=0;ee<w.za;++ee){var Bt=I.ya[I.aa+ee];if(0<ee){for($=-1;16>$;++$)n(Le,Pe+32*$-4,Le,Pe+32*$+12,4);for($=-1;8>$;++$)n(Me,je+32*$-4,Me,je+32*$+4,4),n(lt,It+32*$-4,lt,It+32*$+4,4)}var xt=w.Gd,Ft=w.Hd+ee,Qt=Bt.ad,ct=Bt.Hc;if(0<ge&&(n(Le,Pe-32,xt[Ft].y,0,16),n(Me,je-32,xt[Ft].f,0,8),n(lt,It-32,xt[Ft].ea,0,8)),Bt.Za){var mt=Le,lr=Pe-32+16;for(0<ge&&(ee>=w.za-1?s(mt,lr,xt[Ft].y[15],4):n(mt,lr,xt[Ft+1].y,0,4)),$=0;4>$;$++)mt[lr+128+$]=mt[lr+256+$]=mt[lr+384+$]=mt[lr+0+$];for($=0;16>$;++$,ct<<=2)mt=Le,lr=Pe+Mp[$],Mo[Bt.Ob[$]](mt,lr),il(ct,Qt,16*+$,mt,lr)}else if(mt=nl(ee,ge,Bt.Ob[0]),vl[mt](Le,Pe),ct!=0)for($=0;16>$;++$,ct<<=2)il(ct,Qt,16*+$,Le,Pe+Mp[$]);for($=Bt.Gc,mt=nl(ee,ge,Bt.Dd),qa[mt](Me,je),qa[mt](lt,It),ct=Qt,mt=Me,lr=je,255&(Bt=$>>0)&&(170&Bt?Ds(ct,256,mt,lr):zs(ct,256,mt,lr)),Bt=lt,ct=It,255&($>>=8)&&(170&$?Ds(Qt,320,Bt,ct):zs(Qt,320,Bt,ct)),ge<w.Ub-1&&(n(xt[Ft].y,0,Le,Pe+480,16),n(xt[Ft].f,0,Me,je+224,8),n(xt[Ft].ea,0,lt,It+224,8)),$=8*Se*w.B,xt=w.sa,Ft=w.ta+16*ee+16*Se*w.R,Qt=w.qa,Bt=w.ra+8*ee+$,ct=w.Ha,mt=w.Ia+8*ee+$,$=0;16>$;++$)n(xt,Ft+$*w.R,Le,Pe+32*$,16);for($=0;8>$;++$)n(Qt,Bt+$*w.B,Me,je+32*$,8),n(ct,mt+$*w.B,lt,It+32*$,8)}}function Ga(w,I,$,ee,ge,Se,Le,Pe,Me){var je=[0],lt=[0],It=0,Bt=Me!=null?Me.kd:0,xt=Me??new Va;if(w==null||12>$)return 7;xt.data=w,xt.w=I,xt.ha=$,I=[I],$=[$],xt.gb=[xt.gb];e:{var Ft=I,Qt=$,ct=xt.gb;if(e(w!=null),e(Qt!=null),e(ct!=null),ct[0]=0,12<=Qt[0]&&!r(w,Ft[0],"RIFF")){if(r(w,Ft[0]+8,"WEBP")){ct=3;break e}var mt=ir(w,Ft[0]+4);if(12>mt||4294967286<mt){ct=3;break e}if(Bt&&mt>Qt[0]-8){ct=7;break e}ct[0]=mt,Ft[0]+=12,Qt[0]-=12}ct=0}if(ct!=0)return ct;for(mt=0<xt.gb[0],$=$[0];;){e:{var lr=w;Qt=I,ct=$;var mr=je,dr=lt,Xr=Ft=[0];if((zr=It=[It])[0]=0,8>ct[0])ct=7;else{if(!r(lr,Qt[0],"VP8X")){if(ir(lr,Qt[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var Or=ir(lr,Qt[0]+8),bn=1+Mt(lr,Qt[0]+12);if(2147483648<=bn*(lr=1+Mt(lr,Qt[0]+15))){ct=3;break e}Xr!=null&&(Xr[0]=Or),mr!=null&&(mr[0]=bn),dr!=null&&(dr[0]=lr),Qt[0]+=18,ct[0]-=18,zr[0]=1}ct=0}}if(It=It[0],Ft=Ft[0],ct!=0)return ct;if(Qt=!!(2&Ft),!mt&&It)return 3;if(Se!=null&&(Se[0]=!!(16&Ft)),Le!=null&&(Le[0]=Qt),Pe!=null&&(Pe[0]=0),Le=je[0],Ft=lt[0],It&&Qt&&Me==null){ct=0;break}if(4>$){ct=7;break}if(mt&&It||!mt&&!It&&!r(w,I[0],"ALPH")){$=[$],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Or=w,ct=I,mt=$;var zr=xt.gb;mr=xt.na,dr=xt.P,Xr=xt.Sa,bn=22,e(Or!=null),e(mt!=null),lr=ct[0];var ci=mt[0];for(e(mr!=null),e(Xr!=null),mr[0]=null,dr[0]=null,Xr[0]=0;;){if(ct[0]=lr,mt[0]=ci,8>ci){ct=7;break e}var fi=ir(Or,lr+4);if(4294967286<fi){ct=3;break e}var $n=8+fi+1&-2;if(bn+=$n,0<zr&&bn>zr){ct=3;break e}if(!r(Or,lr,"VP8 ")||!r(Or,lr,"VP8L")){ct=0;break e}if(ci[0]<$n){ct=7;break e}r(Or,lr,"ALPH")||(mr[0]=Or,dr[0]=lr+8,Xr[0]=fi),lr+=$n,ci-=$n}}if($=$[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],ct!=0)break}$=[$],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(zr=w,ct=I,mt=$,mr=xt.gb[0],dr=xt.Ja,Xr=xt.xa,Or=ct[0],lr=!r(zr,Or,"VP8 "),bn=!r(zr,Or,"VP8L"),e(zr!=null),e(mt!=null),e(dr!=null),e(Xr!=null),8>mt[0])ct=7;else{if(lr||bn){if(zr=ir(zr,Or+4),12<=mr&&zr>mr-12){ct=3;break e}if(Bt&&zr>mt[0]-8){ct=7;break e}dr[0]=zr,ct[0]+=8,mt[0]-=8,Xr[0]=bn}else Xr[0]=5<=mt[0]&&zr[Or+0]==47&&!(zr[Or+4]>>5),dr[0]=mt[0];ct=0}if($=$[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],I=I[0],ct!=0)break;if(4294967286<xt.Ja)return 3;if(Pe==null||Qt||(Pe[0]=xt.xa?2:1),Le=[Le],Ft=[Ft],xt.xa){if(5>$){ct=7;break}Pe=Le,Bt=Ft,Qt=Se,w==null||5>$?w=0:5<=$&&w[I+0]==47&&!(w[I+4]>>5)?(mt=[0],zr=[0],mr=[0],_e(dr=new ie,w,I,$),qe(dr,mt,zr,mr)?(Pe!=null&&(Pe[0]=mt[0]),Bt!=null&&(Bt[0]=zr[0]),Qt!=null&&(Qt[0]=mr[0]),w=1):w=0):w=0}else{if(10>$){ct=7;break}Pe=Ft,w==null||10>$||!Nc(w,I+3,$-3)?w=0:(Bt=w[I+0]|w[I+1]<<8|w[I+2]<<16,Qt=16383&(w[I+7]<<8|w[I+6]),w=16383&(w[I+9]<<8|w[I+8]),1&Bt||3<(Bt>>1&7)||!(Bt>>4&1)||Bt>>5>=xt.Ja||!Qt||!w?w=0:(Le&&(Le[0]=Qt),Pe&&(Pe[0]=w),w=1))}if(!w||(Le=Le[0],Ft=Ft[0],It&&(je[0]!=Le||lt[0]!=Ft)))return 3;Me!=null&&(Me[0]=xt,Me.offset=I-Me.w,e(4294967286>I-Me.w),e(Me.offset==Me.ha-$));break}return ct==0||ct==7&&It&&Me==null?(Se!=null&&(Se[0]|=xt.na!=null&&0<xt.na.length),ee!=null&&(ee[0]=Le),ge!=null&&(ge[0]=Ft),0):ct}function Ea(w,I,$){var ee=I.width,ge=I.height,Se=0,Le=0,Pe=ee,Me=ge;if(I.Da=w!=null&&0<w.Da,I.Da&&(Pe=w.cd,Me=w.bd,Se=w.v,Le=w.j,11>$||(Se&=-2,Le&=-2),0>Se||0>Le||0>=Pe||0>=Me||Se+Pe>ee||Le+Me>ge))return 0;if(I.v=Se,I.j=Le,I.va=Se+Pe,I.o=Le+Me,I.U=Pe,I.T=Me,I.da=w!=null&&0<w.da,I.da){if(!hr(Pe,Me,$=[w.ib],Se=[w.hb]))return 0;I.ib=$[0],I.hb=Se[0]}return I.ob=w!=null&&w.ob,I.Kb=w==null||!w.Sd,I.da&&(I.ob=I.ib<3*ee/4&&I.hb<3*ge/4,I.Kb=0),1}function Zo(w){if(w==null)return 2;if(11>w.S){var I=w.f.RGBA;I.fb+=(w.height-1)*I.A,I.A=-I.A}else I=w.f.kb,w=w.height,I.O+=(w-1)*I.fa,I.fa=-I.fa,I.N+=(w-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(w-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(w-1)*I.lb,I.lb=-I.lb);return 0}function Ma(w,I,$,ee){if(ee==null||0>=w||0>=I)return 2;if($!=null){if($.Da){var ge=$.cd,Se=$.bd,Le=-2&$.v,Pe=-2&$.j;if(0>Le||0>Pe||0>=ge||0>=Se||Le+ge>w||Pe+Se>I)return 2;w=ge,I=Se}if($.da){if(!hr(w,I,ge=[$.ib],Se=[$.hb]))return 2;w=ge[0],I=Se[0]}}ee.width=w,ee.height=I;e:{var Me=ee.width,je=ee.height;if(w=ee.S,0>=Me||0>=je||!(w>=cc&&13>w))w=2;else{if(0>=ee.Rd&&ee.sd==null){Le=Se=ge=I=0;var lt=(Pe=Me*lf[w])*je;if(11>w||(Se=(je+1)/2*(I=(Me+1)/2),w==12&&(Le=(ge=Me)*je)),(je=o(lt+2*Se+Le))==null){w=1;break e}ee.sd=je,11>w?((Me=ee.f.RGBA).eb=je,Me.fb=0,Me.A=Pe,Me.size=lt):((Me=ee.f.kb).y=je,Me.O=0,Me.fa=Pe,Me.Fd=lt,Me.f=je,Me.N=0+lt,Me.Ab=I,Me.Cd=Se,Me.ea=je,Me.W=0+lt+Se,Me.Db=I,Me.Ed=Se,w==12&&(Me.F=je,Me.J=0+lt+2*Se),Me.Tc=Le,Me.lb=ge)}if(I=1,ge=ee.S,Se=ee.width,Le=ee.height,ge>=cc&&13>ge)if(11>ge)w=ee.f.RGBA,I&=(Pe=Math.abs(w.A))*(Le-1)+Se<=w.size,I&=Pe>=Se*lf[ge],I&=w.eb!=null;else{w=ee.f.kb,Pe=(Se+1)/2,lt=(Le+1)/2,Me=Math.abs(w.fa),je=Math.abs(w.Ab);var It=Math.abs(w.Db),Bt=Math.abs(w.lb),xt=Bt*(Le-1)+Se;I&=Me*(Le-1)+Se<=w.Fd,I&=je*(lt-1)+Pe<=w.Cd,I=(I&=It*(lt-1)+Pe<=w.Ed)&Me>=Se&je>=Pe&It>=Pe,I&=w.y!=null,I&=w.f!=null,I&=w.ea!=null,ge==12&&(I&=Bt>=Se,I&=xt<=w.Tc,I&=w.F!=null)}else I=0;w=I?0:2}}return w!=0||$!=null&&$.fd&&(w=Zo(ee)),w}var Ki=64,us=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],la=24,Yr=32,sc=8,ws=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Kt("Predictor0","PredictorAdd0"),K.Predictor0=function(){return 4278190080},K.Predictor1=function(w){return w},K.Predictor2=function(w,I,$){return I[$+0]},K.Predictor3=function(w,I,$){return I[$+1]},K.Predictor4=function(w,I,$){return I[$-1]},K.Predictor5=function(w,I,$){return nr(nr(w,I[$+1]),I[$+0])},K.Predictor6=function(w,I,$){return nr(w,I[$-1])},K.Predictor7=function(w,I,$){return nr(w,I[$+0])},K.Predictor8=function(w,I,$){return nr(I[$-1],I[$+0])},K.Predictor9=function(w,I,$){return nr(I[$+0],I[$+1])},K.Predictor10=function(w,I,$){return nr(nr(w,I[$-1]),nr(I[$+0],I[$+1]))},K.Predictor11=function(w,I,$){var ee=I[$+0];return 0>=Ir(ee>>24&255,w>>24&255,(I=I[$-1])>>24&255)+Ir(ee>>16&255,w>>16&255,I>>16&255)+Ir(ee>>8&255,w>>8&255,I>>8&255)+Ir(255&ee,255&w,255&I)?ee:w},K.Predictor12=function(w,I,$){var ee=I[$+0];return(Nr((w>>24&255)+(ee>>24&255)-((I=I[$-1])>>24&255))<<24|Nr((w>>16&255)+(ee>>16&255)-(I>>16&255))<<16|Nr((w>>8&255)+(ee>>8&255)-(I>>8&255))<<8|Nr((255&w)+(255&ee)-(255&I)))>>>0},K.Predictor13=function(w,I,$){var ee=I[$-1];return(on((w=nr(w,I[$+0]))>>24&255,ee>>24&255)<<24|on(w>>16&255,ee>>16&255)<<16|on(w>>8&255,ee>>8&255)<<8|on(w>>0&255,ee>>0&255))>>>0};var oc=K.PredictorAdd0;K.PredictorAdd1=cn,Kt("Predictor2","PredictorAdd2"),Kt("Predictor3","PredictorAdd3"),Kt("Predictor4","PredictorAdd4"),Kt("Predictor5","PredictorAdd5"),Kt("Predictor6","PredictorAdd6"),Kt("Predictor7","PredictorAdd7"),Kt("Predictor8","PredictorAdd8"),Kt("Predictor9","PredictorAdd9"),Kt("Predictor10","PredictorAdd10"),Kt("Predictor11","PredictorAdd11"),Kt("Predictor12","PredictorAdd12"),Kt("Predictor13","PredictorAdd13");var yl=K.PredictorAdd2;ar("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ar("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var ql,ks=K.ColorIndexInverseTransform,Jo=K.MapARGB,Aa=K.VP8LColorIndexInverseTransformAlpha,Pc=K.MapAlpha,yr=K.VP8LPredictorsAdd=[];yr.length=16,(K.VP8LPredictors=[]).length=16,(K.VP8LPredictorsAdd_C=[]).length=16,(K.VP8LPredictors_C=[]).length=16;var Mr,xn,kn,ns,xi,ms,ds,bo,Zi,Ds,Bs,zs,eo,ea,ma,ta,ra,$s,ga,hs,os,Tn,mi,co,to,Cs,Ji,oi,qs=o(511),sl=o(2041),ac=o(225),ol=o(767),$a=0,jc=sl,lc=ac,oo=ol,Qs=qs,cc=0,Mc=1,_u=2,Sc=3,iu=4,id=5,eh=6,sd=7,Cd=8,bu=9,th=10,kc=[2,3,7],Sd=[3,3,11],vh=[280,256,256,256,40],Wl=[0,1,1,1,0],sf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_h=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bh=8,od=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Dc=null,Kl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ad=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Pp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wf=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vl=[],Mo=[],qa=[],Kf=1,Ed=2,Ta=[],uo=[];qt("UpsampleRgbLinePair",Dr,3),qt("UpsampleBgrLinePair",bi,3),qt("UpsampleRgbaLinePair",lo,4),qt("UpsampleBgraLinePair",vn,4),qt("UpsampleArgbLinePair",bs,4),qt("UpsampleRgba4444LinePair",Fi,2),qt("UpsampleRgb565LinePair",gn,2);var it=K.UpsampleRgbLinePair,ye=K.UpsampleBgrLinePair,Oe=K.UpsampleRgbaLinePair,nt=K.UpsampleBgraLinePair,Xt=K.UpsampleArgbLinePair,Qr=K.UpsampleRgba4444LinePair,Xn=K.UpsampleRgb565LinePair,Si=16,Di=1<<Si-1,Hs=-227,Oc=482,Xf=6,jp=(256<<Xf)-1,wh=0,bA=o(256),wA=o(256),of=o(256),cg=o(256),CA=o(Oc-Hs),SA=o(Oc-Hs);Yo("YuvToRgbRow",Dr,3),Yo("YuvToBgrRow",bi,3),Yo("YuvToRgbaRow",lo,4),Yo("YuvToBgraRow",vn,4),Yo("YuvToArgbRow",bs,4),Yo("YuvToRgba4444Row",Fi,2),Yo("YuvToRgb565Row",gn,2);var Mp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cu=[0,2,8],Yf=[8,7,6,4,4,2,2,2,1,1,1,1],af=1;this.WebPDecodeRGBA=function(w,I,$,ee,ge){var Se=Mc,Le=new Uo,Pe=new Gi;Le.ba=Pe,Pe.S=Se,Pe.width=[Pe.width],Pe.height=[Pe.height];var Me=Pe.width,je=Pe.height,lt=new Rn;if(lt==null||w==null)var It=2;else e(lt!=null),It=Ga(w,I,$,lt.width,lt.height,lt.Pd,lt.Qd,lt.format,null);if(It!=0?Me=0:(Me!=null&&(Me[0]=lt.width[0]),je!=null&&(je[0]=lt.height[0]),Me=1),Me){Pe.width=Pe.width[0],Pe.height=Pe.height[0],ee!=null&&(ee[0]=Pe.width),ge!=null&&(ge[0]=Pe.height);e:{if(ee=new sa,(ge=new Va).data=w,ge.w=I,ge.ha=$,ge.kd=1,I=[0],e(ge!=null),((w=Ga(ge.data,ge.w,ge.ha,null,null,null,I,null,ge))==0||w==7)&&I[0]&&(w=4),(I=w)==0){if(e(Le!=null),ee.data=ge.data,ee.w=ge.w+ge.offset,ee.ha=ge.ha-ge.offset,ee.put=ur,ee.ac=ri,ee.bc=We,ee.ma=Le,ge.xa){if((w=_n())==null){Le=1;break e}if(function(Bt,xt){var Ft=[0],Qt=[0],ct=[0];t:for(;;){if(Bt==null)return 0;if(xt==null)return Bt.a=2,0;if(Bt.l=xt,Bt.a=0,_e(Bt.m,xt.data,xt.w,xt.ha),!qe(Bt.m,Ft,Qt,ct)){Bt.a=3;break t}if(Bt.xb=Ed,xt.width=Ft[0],xt.height=Qt[0],!Un(Ft[0],Qt[0],1,Bt,null))break t;return 1}return e(Bt.a!=0),0}(w,ee)){if(ee=(I=Ma(ee.width,ee.height,Le.Oa,Le.ba))==0){t:{ee=w;r:for(;;){if(ee==null){ee=0;break t}if(e(ee.s.yc!=null),e(ee.s.Ya!=null),e(0<ee.s.Wb),e(($=ee.l)!=null),e((ge=$.ma)!=null),ee.xb!=0){if(ee.ca=ge.ba,ee.tb=ge.tb,e(ee.ca!=null),!Ea(ge.Oa,$,Sc)){ee.a=2;break r}if(!qn(ee,$.width)||$.da)break r;if(($.da||Bn(ee.ca.S))&&St(),11>ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ee.ca.f.kb.F!=null&&St()),ee.Pb&&0<ee.s.ua&&ee.s.vb.X==null&&!Ar(ee.s.vb,ee.s.Wa.Xa)){ee.a=1;break r}ee.xb=0}if(!rn(ee,ee.V,ee.Ba,ee.c,ee.i,$.o,fr))break r;ge.Dc=ee.Ma,ee=1;break t}e(ee.a!=0),ee=0}ee=!ee}ee&&(I=w.a)}else I=w.a}else{if((w=new Ha)==null){Le=1;break e}if(w.Fa=ge.na,w.P=ge.P,w.qc=ge.Sa,nc(w,ee)){if((I=Ma(ee.width,ee.height,Le.Oa,Le.ba))==0){if(w.Aa=0,$=Le.Oa,e((ge=w)!=null),$!=null){if(0<(Me=0>(Me=$.Md)?0:100<Me?255:255*Me/100)){for(je=lt=0;4>je;++je)12>(It=ge.pb[je]).lc&&(It.ia=Me*Yf[0>It.lc?0:It.lc]>>3),lt|=It.ia;lt&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=$.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}Pa(w,ee)||(I=w.a)}}else I=w.a}I==0&&Le.Oa!=null&&Le.Oa.fd&&(I=Zo(Le.ba))}Le=I}Se=Le!=0?null:11>Se?Pe.f.RGBA.eb:Pe.f.kb.y}else Se=null;return Se};var lf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(K,de){for(var we="",J=0;J<4;J++)we+=String.fromCharCode(K[de++]);return we}function g(K,de){return(K[de+0]<<0|K[de+1]<<8|K[de+2]<<16)>>>0}function C(K,de){return(K[de+0]<<0|K[de+1]<<8|K[de+2]<<16|K[de+3]<<24)>>>0}new i;var B=[0],S=[0],P=[],j=new i,D=t,F=function(K,de){var we={},J=0,Z=!1,Ie=0,be=0;if(we.frames=[],!function(le,pe,fe,Qe){for(var Ke=0;Ke<Qe;Ke++)if(le[pe+Ke]!=fe.charCodeAt(Ke))return!0;return!1}(K,de,"RIFF",4)){var He,Fe;for(C(K,de+=4),de+=8;de<K.length;){var ve=m(K,de),_e=C(K,de+=4);de+=4;var ze=_e+(1&_e);switch(ve){case"VP8 ":case"VP8L":we.frames[J]===void 0&&(we.frames[J]={}),(ie=we.frames[J]).src_off=Z?be:de-8,ie.src_size=Ie+_e+8,J++,Z&&(Z=!1,Ie=0,be=0);break;case"VP8X":(ie=we.header={}).feature_flags=K[de];var Ne=de+4;ie.canvas_width=1+g(K,Ne),Ne+=3,ie.canvas_height=1+g(K,Ne),Ne+=3;break;case"ALPH":Z=!0,Ie=ze+8,be=de-8;break;case"ANIM":(ie=we.header).bgcolor=C(K,de),Ne=de+4,ie.loop_count=(He=K)[(Fe=Ne)+0]<<0|He[Fe+1]<<8,Ne+=2;break;case"ANMF":var st,ie;(ie=we.frames[J]={}).offset_x=2*g(K,de),de+=3,ie.offset_y=2*g(K,de),de+=3,ie.width=1+g(K,de),de+=3,ie.height=1+g(K,de),de+=3,ie.duration=g(K,de),de+=3,st=K[de++],ie.dispose=1&st,ie.blend=st>>1&1}ve!="ANMF"&&(de+=ze)}return we}}(D,0);F.response=D,F.rgbaoutput=!0,F.dataurl=!1;var R=F.header?F.header:null,V=F.frames?F.frames:null;if(R){R.loop_counter=R.loop_count,B=[R.canvas_height],S=[R.canvas_width];for(var Y=0;Y<V.length&&V[Y].blend!=0;Y++);}var te=V[0],se=j.WebPDecodeRGBA(D,te.src_off,te.src_size,S,B);te.rgba=se,te.imgwidth=S[0],te.imgheight=B[0];for(var oe=0;oe<S[0]*B[0]*4;oe++)P[oe]=se[oe];return this.width=S,this.height=B,this.data=P,this}(function(t){var e=function(){return typeof UL=="function"},r=function(B,S,P,j){var D=4,F=c;switch(j){case t.image_compression.FAST:D=1,F=o;break;case t.image_compression.MEDIUM:D=6,F=u;break;case t.image_compression.SLOW:D=9,F=i}B=n(B,S,P,F);var R=UL(B,{level:D});return t.__addimage__.arrayBufferToBinaryString(R)},n=function(B,S,P,j){for(var D,F,R,V=B.length/S,Y=new Uint8Array(B.length+V),te=g(),se=0;se<V;se+=1){if(R=se*S,D=B.subarray(R,R+S),j)Y.set(j(D,P,F),R+se);else{for(var oe,K=te.length,de=[];oe<K;oe+=1)de[oe]=te[oe](D,P,F);var we=C(de.concat());Y.set(de[we],R+se)}F=D}return Y},s=function(B){var S=Array.apply([],B);return S.unshift(0),S},o=function(B,S){var P,j=[],D=B.length;j[0]=1;for(var F=0;F<D;F+=1)P=B[F-S]||0,j[F+1]=B[F]-P+256&255;return j},c=function(B,S,P){var j,D=[],F=B.length;D[0]=2;for(var R=0;R<F;R+=1)j=P&&P[R]||0,D[R+1]=B[R]-j+256&255;return D},u=function(B,S,P){var j,D,F=[],R=B.length;F[0]=3;for(var V=0;V<R;V+=1)j=B[V-S]||0,D=P&&P[V]||0,F[V+1]=B[V]+256-(j+D>>>1)&255;return F},i=function(B,S,P){var j,D,F,R,V=[],Y=B.length;V[0]=4;for(var te=0;te<Y;te+=1)j=B[te-S]||0,D=P&&P[te]||0,F=P&&P[te-S]||0,R=m(j,D,F),V[te+1]=B[te]-R+256&255;return V},m=function(B,S,P){if(B===S&&S===P)return B;var j=Math.abs(S-P),D=Math.abs(B-P),F=Math.abs(B+S-P-P);return j<=D&&j<=F?B:D<=F?S:P},g=function(){return[s,o,c,u,i]},C=function(B){var S=B.map(function(P){return P.reduce(function(j,D){return j+Math.abs(D)},0)});return S.indexOf(Math.min.apply(null,S))};t.processPNG=function(B,S,P,j){var D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He=this.decode.FLATE_DECODE,Fe="";if(this.__addimage__.isArrayBuffer(B)&&(B=new Uint8Array(B)),this.__addimage__.isArrayBufferView(B)){if(B=(R=new TCe(B)).imgData,F=R.bits,D=R.colorSpace,Y=R.colors,[4,6].indexOf(R.colorType)!==-1){if(R.bits===8){K=(oe=R.pixelBitlength==32?new Uint32Array(R.decodePixels().buffer):R.pixelBitlength==16?new Uint16Array(R.decodePixels().buffer):new Uint8Array(R.decodePixels().buffer)).length,we=new Uint8Array(K*R.colors),de=new Uint8Array(K);var ve,_e=R.pixelBitlength-R.bits;for(Ie=0,be=0;Ie<K;Ie++){for(Z=oe[Ie],ve=0;ve<_e;)we[be++]=Z>>>ve&255,ve+=R.bits;de[Ie]=Z>>>ve&255}}if(R.bits===16){K=(oe=new Uint32Array(R.decodePixels().buffer)).length,we=new Uint8Array(K*(32/R.pixelBitlength)*R.colors),de=new Uint8Array(K*(32/R.pixelBitlength)),J=R.colors>1,Ie=0,be=0;for(var ze=0;Ie<K;)Z=oe[Ie++],we[be++]=Z>>>0&255,J&&(we[be++]=Z>>>16&255,Z=oe[Ie++],we[be++]=Z>>>0&255),de[ze++]=Z>>>16&255;F=8}j!==t.image_compression.NONE&&e()?(B=r(we,R.width*R.colors,R.colors,j),se=r(de,R.width,1,j)):(B=we,se=de,He=void 0)}if(R.colorType===3&&(D=this.color_spaces.INDEXED,te=R.palette,R.transparency.indexed)){var Ne=R.transparency.indexed,st=0;for(Ie=0,K=Ne.length;Ie<K;++Ie)st+=Ne[Ie];if((st/=255)===K-1&&Ne.indexOf(0)!==-1)V=[Ne.indexOf(0)];else if(st!==K){for(oe=R.decodePixels(),de=new Uint8Array(oe.length),Ie=0,K=oe.length;Ie<K;Ie++)de[Ie]=Ne[oe[Ie]];se=r(de,R.width,1)}}var ie=function(le){var pe;switch(le){case t.image_compression.FAST:pe=11;break;case t.image_compression.MEDIUM:pe=13;break;case t.image_compression.SLOW:pe=14;break;default:pe=12}return pe}(j);return He===this.decode.FLATE_DECODE&&(Fe="/Predictor "+ie+" "),Fe+="/Colors "+Y+" /BitsPerComponent "+F+" /Columns "+R.width,(this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),(se&&this.__addimage__.isArrayBuffer(se)||this.__addimage__.isArrayBufferView(se))&&(se=this.__addimage__.arrayBufferToBinaryString(se)),{alias:P,data:B,index:S,filter:He,decodeParameters:Fe,transparency:V,palette:te,sMask:se,predictor:ie,width:R.width,height:R.height,bitsPerComponent:F,colorSpace:D}}}})(ss.API),function(t){t.processGIF89A=function(e,r,n,s){var o=new LCe(e),c=o.width,u=o.height,i=[];o.decodeAndBlitFrameRGBA(0,i);var m={data:i,width:c,height:u},g=new nT(100).encode(m,100);return t.processJPEG.call(this,g,r,n,s)},t.processGIF87A=t.processGIF89A}(ss.API),Sf.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Sf.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ua.log("bit decode error:"+r)}},Sf.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var i=this.palette[o>>7-u&1];this.data[c+4*u]=i.blue,this.data[c+4*u+1]=i.green,this.data[c+4*u+2]=i.red,this.data[c+4*u+3]=255}r!==0&&(this.pos+=4-r)}},Sf.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*s*4,u=o>>4,i=15&o,m=this.palette[u];if(this.data[c]=m.blue,this.data[c+1]=m.green,this.data[c+2]=m.red,this.data[c+3]=255,2*s+1>=this.width)break;m=this.palette[i],this.data[c+4]=m.blue,this.data[c+4+1]=m.green,this.data[c+4+2]=m.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Sf.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(s<this.palette.length){var c=this.palette[s];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Sf.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,i=(o>>10&e)/e*255|0,m=o>>15?255:0,g=n*this.width*4+4*s;this.data[g]=i,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=m}this.pos+=t}},Sf.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,i=(c>>5&r)/r*255|0,m=(c>>11)/e*255|0,g=s*this.width*4+4*o;this.data[g]=m,this.data[g+1]=i,this.data[g+2]=u,this.data[g+3]=255}this.pos+=t}},Sf.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=o,this.data[c+1]=s,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},Sf.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*r;this.data[u]=o,this.data[u+1]=s,this.data[u+2]=n,this.data[u+3]=c}},Sf.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var o=new Sf(e,!1),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},m=new nT(100).encode(i,100);return t.processJPEG.call(this,m,r,n,s)}}(ss.API),Bz.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var o=new Bz(e),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},m=new nT(100).encode(i,100);return t.processJPEG.call(this,m,r,n,s)}}(ss.API),ss.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,o=new Uint8Array(s/4*3),c=new Uint8Array(s/4),u=0,i=0,m=0;m<s;m+=4){var g=n[m],C=n[m+1],B=n[m+2],S=n[m+3];o[u++]=g,o[u++]=C,o[u++]=B,c[i++]=S}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:P,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ss.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ay=ss.API,H2=Ay.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:s.metadata.Unicode.widths,i=u.fof?u.fof:1,m=e.kerning?e.kerning:s.metadata.Unicode.kerning,g=m.fof?m.fof:1,C=e.doKerning!==!1,B=0,S=t.length,P=0,j=u[0]||i,D=[];for(r=0;r<S;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?D.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+c*(1e3/o)||0)/1e3):(B=C&&wa(m[n])==="object"&&!isNaN(parseInt(m[n][P],10))?m[n][P]/g:0,D.push((u[n]||j)/i+B)),P=n;return D},bz=Ay.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Ay.processArabic&&(t=Ay.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:H2.apply(this,arguments).reduce(function(o,c){return o+c},0)},wz=function(t,e,r,n){for(var s=[],o=0,c=t.length,u=0;o!==c&&u+e[o]<r;)u+=e[o],o++;s.push(t.slice(0,o));var i=o;for(u=0;o!==c;)u+e[o]>n&&(s.push(t.slice(i,o)),u=0,i=o),u+=e[o],o++;return i!==o&&s.push(t.slice(i,o)),s},Cz=function(t,e,r){r||(r={});var n,s,o,c,u,i,m,g=[],C=[g],B=r.textIndent||0,S=0,P=0,j=t.split(" "),D=H2.apply(this,[" ",r])[0];if(i=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var F=Array(i).join(" "),R=[];j.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?R=R.concat(Y.map(function(te,se){return(se&&te.length?`
`:"")+te})):R.push(Y[0])}),j=R,i=bz.apply(this,[F,r])}for(o=0,c=j.length;o<c;o++){var V=0;if(n=j[o],i&&n[0]==`
`&&(n=n.substr(1),V=1),B+S+(P=(s=H2.apply(this,[n,r])).reduce(function(Y,te){return Y+te},0))>e||V){if(P>e){for(u=wz.apply(this,[n,s,e-(B+S),e]),g.push(u.shift()),g=[u.pop()];u.length;)C.push([u.shift()]);P=s.slice(n.length-(g[0]?g[0].length:0)).reduce(function(Y,te){return Y+te},0)}else g=[n];C.push(g),B=P+i,S=D}else g.push(n),B+=S+P,S=D}return m=i?function(Y,te){return(te?F:"")+Y.join(" ")}:function(Y){return Y.join(" ")},C.map(m)},Ay.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var C=this.internal.getFont(g.fontName,g.fontStyle);return C.metadata.Unicode?{widths:C.metadata.Unicode.widths||{0:1},kerning:C.metadata.Unicode.kerning||{}}:{font:C.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/s;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,o.lineIndent=r.lineIndent;var u,i,m=[];for(u=0,i=n.length;u<i;u++)m=m.concat(Cz.apply(this,[n[u],c,o]));return m},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var o=function(C){return"0x"+parseInt(C,10).toString(16)},c=t.__fontmetrics__.compress=function(C){var B,S,P,j,D=["{"];for(var F in C){if(B=C[F],isNaN(parseInt(F,10))?S="'"+F+"'":(F=parseInt(F,10),S=(S=o(F).slice(2)).slice(0,-1)+n[S.slice(-1)]),typeof B=="number")B<0?(P=o(B).slice(3),j="-"):(P=o(B).slice(2),j=""),P=j+P.slice(0,-1)+n[P.slice(-1)];else{if(wa(B)!=="object")throw new Error("Don't know what to do with value type "+wa(B)+".");P=c(B)}D.push(S+P)}return D.push("}"),D.join("")},u=t.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var B,S,P,j,D={},F=1,R=D,V=[],Y="",te="",se=C.length-1,oe=1;oe<se;oe+=1)(j=C[oe])=="'"?B?(P=B.join(""),B=void 0):B=[]:B?B.push(j):j=="{"?(V.push([R,P]),R={},P=void 0):j=="}"?((S=V.pop())[0][S[1]]=R,P=void 0,R=S[0]):j=="-"?F=-1:P===void 0?r.hasOwnProperty(j)?(Y+=r[j],P=parseInt(Y,16)*F,F=1,Y=""):Y+=j:r.hasOwnProperty(j)?(te+=r[j],R[P]=parseInt(te,16)*F,F=1,P=void 0,te=""):te+=j;return D},i={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:i,"Courier-Bold":i,"Courier-BoldOblique":i,"Courier-Oblique":i,Helvetica:i,"Helvetica-Bold":i,"Helvetica-BoldOblique":i,"Helvetica-Oblique":i,"Times-Roman":i,"Times-Bold":i,"Times-BoldItalic":i,"Times-Italic":i}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(C){var B=C.font,S=g.Unicode[B.postScriptName];S&&(B.metadata.Unicode={},B.metadata.Unicode.widths=S.widths,B.metadata.Unicode.kerning=S.kerning);var P=m.Unicode[B.postScriptName];P&&(B.metadata.Unicode.encoding=P,B.encoding=P.codePages[0])}])}(ss.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),o=0;o<n;o++)s[o]=r.charCodeAt(o);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,o=r.instance;if(!s.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=o.existsFileInVFS(s.postScriptName)===!1?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(t_(u)),c.metadata=t.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(s,n)}}])}(ss),function(t){function e(){return(cs.canvg?Promise.resolve(cs.canvg):w1(()=>import("./index.es-CfjcQ3bK.js"),__vite__mapDeps([2,1]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ss.API.addSvgAsImage=function(r,n,s,o,c,u,i,m){if(isNaN(n)||isNaN(s))throw Ua.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(c))throw Ua.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=o,g.height=c;var C=g.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,g.width,g.height);var B={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},S=this;return e().then(function(P){return P.fromString(C,r,B)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(B)}).then(function(){S.addImage(g.toDataURL("image/jpeg",1),n,s,o,c,i,m)})}}(),ss.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},ss.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),i=[],m=0,g=0,C=0;function B(P,j){var D,F=!1;for(D=0;D<P.length;D+=1)P[D]===j&&(F=!0);return F}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var S=u.length;for(C=0;C<S;C+=1)r[u[C]].value=r[u[C]].defaultValue,r[u[C]].explicitSet=!1}if(wa(t)==="object"){for(s in t)if(o=t[s],B(u,s)&&o!==void 0){if(r[s].type==="boolean"&&typeof o=="boolean")r[s].value=o;else if(r[s].type==="name"&&B(r[s].valueSet,o))r[s].value=o;else if(r[s].type==="integer"&&Number.isInteger(o))r[s].value=o;else if(r[s].type==="array"){for(m=0;m<o.length;m+=1)if(n=!0,o[m].length===1&&typeof o[m][0]=="number")i.push(String(o[m]-1));else if(o[m].length>1){for(g=0;g<o[m].length;g+=1)typeof o[m][g]!="number"&&(n=!1);n===!0&&i.push([o[m][0]-1,o[m][1]-1].join(" "))}r[s].value="["+i.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,j=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?j.push("/"+P+" /"+r[P].value):j.push("/"+P+" "+r[P].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),m=o.length+c.length+u.length+s.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(s+o+c+u+i),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ss.API),function(t){var e=t.API,r=e.pdfEscape16=function(o,c){for(var u,i=c.metadata.Unicode.widths,m=["","0","00","000","0000"],g=[""],C=0,B=o.length;C<B;++C){if(u=c.metadata.characterToGlyph(o.charCodeAt(C)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=o.charCodeAt(C),i.indexOf(u)==-1&&(i.push(u),i.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(m[4-u.length],u)}return g.join("")},n=function(o){var c,u,i,m,g,C,B;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,i=[],C=0,B=(u=Object.keys(o).sort(function(S,P){return S-P})).length;C<B;C++)c=u[C],i.length>=100&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar`,i=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(m=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),i.push("<"+c+"><"+m+">"));return i.length&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,m=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var C=u.metadata.Unicode.widths,B=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),S="",P=0;P<B.length;P++)S+=String.fromCharCode(B[P]);var j=m();g({data:S,addLength1:!0,objectId:j}),i("endobj");var D=m();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:D}),i("endobj");var F=m();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+_y(u.fontName)),i("/FontFile2 "+j+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/Flags "+u.metadata.flags),i("/StemV "+u.metadata.stemV),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i(">>"),i("endobj");var R=m();i("<<"),i("/Type /Font"),i("/BaseFont /"+_y(u.fontName)),i("/FontDescriptor "+F+" 0 R"),i("/W "+t.API.PDFObject.convert(C)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+u.encoding+")"),i(">>"),i(">>"),i("endobj"),u.objectNumber=m(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+D+" 0 R"),i("/BaseFont /"+_y(u.fontName)),i("/Encoding /"+u.encoding),i("/DescendantFonts ["+R+" 0 R]"),i(">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,m=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var C=u.metadata.rawData,B="",S=0;S<C.length;S++)B+=String.fromCharCode(C[S]);var P=m();g({data:B,addLength1:!0,objectId:P}),i("endobj");var j=m();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:j}),i("endobj");var D=m();i("<<"),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i("/StemV "+u.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+P+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/FontName /"+_y(u.fontName)),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i(">>"),i("endobj"),u.objectNumber=m();for(var F=0;F<u.metadata.hmtx.widths.length;F++)u.metadata.hmtx.widths[F]=parseInt(u.metadata.hmtx.widths[F]*(1e3/u.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+_y(u.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]);var s=function(o){var c,u=o.text||"",i=o.x,m=o.y,g=o.options||{},C=o.mutex||{},B=C.pdfEscape,S=C.activeFontKey,P=C.fonts,j=S,D="",F=0,R="",V=P[j].encoding;if(P[j].encoding!=="Identity-H")return{text:u,x:i,y:m,options:g,mutex:C};for(R=u,j=S,Array.isArray(u)&&(R=u[0]),F=0;F<R.length;F+=1)P[j].metadata.hasOwnProperty("cmap")&&(c=P[j].metadata.cmap.unicode.codeMap[R[F].charCodeAt(0)]),c||R[F].charCodeAt(0)<256&&P[j].metadata.hasOwnProperty("Unicode")?D+=R[F]:D+="";var Y="";return parseInt(j.slice(1))<14||V==="WinAnsiEncoding"?Y=B(D,j).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(Y=r(D,P[j])),C.isHex=!0,{text:Y,x:i,y:m,options:g,mutex:C}};e.events.push(["postProcessText",function(o){var c=o.text||"",u=[],i={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var m=0;for(m=0;m<c.length;m+=1)Array.isArray(c[m])&&c[m].length===3?u.push([s(Object.assign({},i,{text:c[m][0]})).text,c[m][1],c[m][2]]):u.push(s(Object.assign({},i,{text:c[m]})).text);o.text=u}else o.text=s(Object.assign({},i,{text:c})).text}])}(ss),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ss.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,o,c,u,i,m,g,C=e,B=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],S=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],F=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,V=0;this.__bidiEngine__={};var Y=function(J){var Z=J.charCodeAt(),Ie=Z>>8,be=j[Ie];return be!==void 0?C[256*be+(255&Z)]:Ie===252||Ie===253?"AL":F.test(Ie)?"L":Ie===8?"R":"N"},te=function(J){for(var Z,Ie=0;Ie<J.length;Ie++){if((Z=Y(J.charAt(Ie)))==="L")return!1;if(Z==="R")return!0}return!1},se=function(J,Z,Ie,be){var He,Fe,ve,_e,ze=Z[be];switch(ze){case"L":case"R":R=!1;break;case"N":case"AN":break;case"EN":R&&(ze="AN");break;case"AL":R=!0,ze="R";break;case"WS":ze="N";break;case"CS":be<1||be+1>=Z.length||(He=Ie[be-1])!=="EN"&&He!=="AN"||(Fe=Z[be+1])!=="EN"&&Fe!=="AN"?ze="N":R&&(Fe="AN"),ze=Fe===He?Fe:"N";break;case"ES":ze=(He=be>0?Ie[be-1]:"B")==="EN"&&be+1<Z.length&&Z[be+1]==="EN"?"EN":"N";break;case"ET":if(be>0&&Ie[be-1]==="EN"){ze="EN";break}if(R){ze="N";break}for(ve=be+1,_e=Z.length;ve<_e&&Z[ve]==="ET";)ve++;ze=ve<_e&&Z[ve]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(_e=Z.length,ve=be+1;ve<_e&&Z[ve]==="NSM";)ve++;if(ve<_e){var Ne=J[be],st=Ne>=1425&&Ne<=2303||Ne===64286;if(He=Z[ve],st&&(He==="R"||He==="AL")){ze="R";break}}}ze=be<1||(He=Z[be-1])==="B"?"N":Ie[be-1];break;case"B":R=!1,s=!0,ze=V;break;case"S":o=!0,ze="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"BN":ze="N"}return ze},oe=function(J,Z,Ie){var be=J.split("");return Ie&&K(be,Ie,{hiLevel:V}),be.reverse(),Z&&Z.reverse(),be.join("")},K=function(J,Z,Ie){var be,He,Fe,ve,_e,ze=-1,Ne=J.length,st=0,ie=[],le=V?S:B,pe=[];for(R=!1,s=!1,o=!1,He=0;He<Ne;He++)pe[He]=Y(J[He]);for(Fe=0;Fe<Ne;Fe++){if(_e=st,ie[Fe]=se(J,pe,ie,Fe),be=240&(st=le[_e][P[ie[Fe]]]),st&=15,Z[Fe]=ve=le[st][5],be>0)if(be===16){for(He=ze;He<Fe;He++)Z[He]=1;ze=-1}else ze=-1;if(le[st][6])ze===-1&&(ze=Fe);else if(ze>-1){for(He=ze;He<Fe;He++)Z[He]=ve;ze=-1}pe[Fe]==="B"&&(Z[Fe]=0),Ie.hiLevel|=ve}o&&function(fe,Qe,Ke){for(var et=0;et<Ke;et++)if(fe[et]==="S"){Qe[et]=V;for(var tt=et-1;tt>=0&&fe[tt]==="WS";tt--)Qe[tt]=V}}(pe,Z,Ne)},de=function(J,Z,Ie,be,He){if(!(He.hiLevel<J)){if(J===1&&V===1&&!s)return Z.reverse(),void(Ie&&Ie.reverse());for(var Fe,ve,_e,ze,Ne=Z.length,st=0;st<Ne;){if(be[st]>=J){for(_e=st+1;_e<Ne&&be[_e]>=J;)_e++;for(ze=st,ve=_e-1;ze<ve;ze++,ve--)Fe=Z[ze],Z[ze]=Z[ve],Z[ve]=Fe,Ie&&(Fe=Ie[ze],Ie[ze]=Ie[ve],Ie[ve]=Fe);st=_e}st++}}},we=function(J,Z,Ie){var be=J.split(""),He={hiLevel:V};return Ie||(Ie=[]),K(be,Ie,He),function(Fe,ve,_e){if(_e.hiLevel!==0&&g)for(var ze,Ne=0;Ne<Fe.length;Ne++)ve[Ne]===1&&(ze=D.indexOf(Fe[Ne]))>=0&&(Fe[Ne]=D[ze+1])}(be,Ie,He),de(2,be,Z,Ie,He),de(1,be,Z,Ie,He),be.join("")};return this.__bidiEngine__.doBidiReorder=function(J,Z,Ie){if(function(He,Fe){if(Fe)for(var ve=0;ve<He.length;ve++)Fe[ve]=ve;u===void 0&&(u=te(He)),m===void 0&&(m=te(He))}(J,Z),c||!i||m)if(c&&i&&u^m)V=u?1:0,J=oe(J,Z,Ie);else if(!c&&i&&m)V=u?1:0,J=we(J,Z,Ie),J=oe(J,Z);else if(!c||u||i||m){if(c&&!i&&u^m)J=oe(J,Z),u?(V=0,J=we(J,Z,Ie)):(V=1,J=we(J,Z,Ie),J=oe(J,Z));else if(c&&u&&!i&&m)V=1,J=we(J,Z,Ie),J=oe(J,Z);else if(!c&&!i&&u^m){var be=g;u?(V=1,J=we(J,Z,Ie),V=0,g=!1,J=we(J,Z,Ie),g=be):(V=0,J=we(J,Z,Ie),J=oe(J,Z),V=1,g=!1,J=we(J,Z,Ie),g=be,J=oe(J,Z))}}else V=0,J=we(J,Z,Ie);else V=u?1:0,J=we(J,Z,Ie);return J},this.__bidiEngine__.setOptions=function(J){J&&(c=J.isInputVisual,i=J.isOutputVisual,u=J.isInputRtl,m=J.isOutputRtl,g=J.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text,o=(n.x,n.y,n.options||{}),c=(n.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(c=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?c.push([r.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):c.push([r.doBidiReorder(s[u])]);n.text=c}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(ss),ss.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Jm(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new VCe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ICe(this.contents),this.head=new FCe(this),this.name=new DCe(this),this.cmap=new GK(this),this.toUnicode={},this.hhea=new PCe(this),this.maxp=new OCe(this),this.hmtx=new RCe(this),this.post=new MCe(this),this.os2=new jCe(this),this.loca=new HCe(this),this.glyf=new UCe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,i,m;for(m=[],c=0,u=(i=this.bbox).length;c<u;c++)e=i[c],m.push(Math.round(e*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,o,c,u;for(c=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)s=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return c*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var $f,Jm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,o,c,u,i;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),i=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^o)+65536*(255^c)+256*(255^u)+(255^i)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*o+65536*c+256*u+i},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,o;for(o=[],n=0,s=e.length;n<s;n++)r=e[n],o.push(this.writeByte(r));return o},t}(),ICe=function(){var t;function e(r){var n,s,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,o=this.tableCount;0<=o?s<o:s>o;s=0<=o?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,o,c,u,i,m,g,C,B,S,P,j;for(j in S=Object.keys(r).length,i=Math.log(2),C=16*Math.floor(Math.log(S)/i),c=Math.floor(C/i),g=16*S-C,(s=new Jm).writeInt(this.scalarType),s.writeShort(S),s.writeShort(C),s.writeShort(c),s.writeShort(g),o=16*S,m=s.pos+o,u=null,P=[],r)for(B=r[j],s.writeString(j),s.writeInt(t(B)),s.writeInt(m),s.writeInt(B.length),P=P.concat(B),j==="head"&&(u=m),m+=B.length;m%4;)P.push(0),m++;return s.write(P),n=2981146554-t(s.data),s.pos=u+8,s.writeUInt32(n),s.data},t=function(r){var n,s,o,c;for(r=$K.call(r);r.length%4;)r.push(0);for(o=new Jm(r),s=0,n=0,c=r.length;n<c;n=n+=4)s+=o.readUInt32();return 4294967295&s},e}(),NCe={}.hasOwnProperty,Np=function(t,e){for(var r in e)NCe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};$f=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var FCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Jm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),Ez=function(){function t(e,r){var n,s,o,c,u,i,m,g,C,B,S,P,j,D,F,R,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),C=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(i=0;i<256;++i)this.codeMap[i]=e.readByte();break;case 4:for(S=e.readUInt16(),B=S/2,e.pos+=6,o=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),e.pos+=2,j=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),m=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),g=function(){var Y,te;for(te=[],i=Y=0;0<=B?Y<B:Y>B;i=0<=B?++Y:--Y)te.push(e.readUInt16());return te}(),s=(this.length-e.pos+this.offset)/2,u=function(){var Y,te;for(te=[],i=Y=0;0<=s?Y<s:Y>s;i=0<=s?++Y:--Y)te.push(e.readUInt16());return te}(),i=F=0,V=o.length;F<V;i=++F)for(D=o[i],n=R=P=j[i];P<=D?R<=D:R>=D;n=P<=D?++R:--R)g[i]===0?c=n+m[i]:(c=u[g[i]/2+(n-P)-(B-i)]||0)!==0&&(c+=m[i]),this.codeMap[n]=65535&c}e.pos=C}return t.encode=function(e,r){var n,s,o,c,u,i,m,g,C,B,S,P,j,D,F,R,V,Y,te,se,oe,K,de,we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne,st,ie,le,pe,fe,Qe,Ke,et,tt,bt,De,Mt;switch(be=new Jm,c=Object.keys(e).sort(function(ir,Ar){return ir-Ar}),r){case"macroman":for(j=0,D=function(){var ir=[];for(P=0;P<256;++P)ir.push(0);return ir}(),R={0:0},o={},He=0,ze=c.length;He<ze;He++)R[tt=e[s=c[He]]]==null&&(R[tt]=++j),o[s]={old:e[s],new:R[e[s]]},D[s]=R[e[s]];return be.writeUInt16(1),be.writeUInt16(0),be.writeUInt32(12),be.writeUInt16(0),be.writeUInt16(262),be.writeUInt16(0),be.write(D),{charMap:o,subtable:be.data,maxGlyphID:j+1};case"unicode":for(Z=[],C=[],V=0,R={},n={},F=m=null,Fe=0,Ne=c.length;Fe<Ne;Fe++)R[te=e[s=c[Fe]]]==null&&(R[te]=++V),n[s]={old:te,new:R[te]},u=R[te]-s,F!=null&&u===m||(F&&C.push(F),Z.push(s),m=u),F=s;for(F&&C.push(F),C.push(65535),Z.push(65535),we=2*(de=Z.length),K=2*Math.pow(Math.log(de)/Math.LN2,2),B=Math.log(K/2)/Math.LN2,oe=2*de-K,i=[],se=[],S=[],P=ve=0,st=Z.length;ve<st;P=++ve){if(J=Z[P],g=C[P],J===65535){i.push(0),se.push(0);break}if(J-(Ie=n[J].new)>=32768)for(i.push(0),se.push(2*(S.length+de-P)),s=_e=J;J<=g?_e<=g:_e>=g;s=J<=g?++_e:--_e)S.push(n[s].new);else i.push(Ie-J),se.push(0)}for(be.writeUInt16(3),be.writeUInt16(1),be.writeUInt32(12),be.writeUInt16(4),be.writeUInt16(16+8*de+2*S.length),be.writeUInt16(0),be.writeUInt16(we),be.writeUInt16(K),be.writeUInt16(B),be.writeUInt16(oe),Ke=0,ie=C.length;Ke<ie;Ke++)s=C[Ke],be.writeUInt16(s);for(be.writeUInt16(0),et=0,le=Z.length;et<le;et++)s=Z[et],be.writeUInt16(s);for(bt=0,pe=i.length;bt<pe;bt++)u=i[bt],be.writeUInt16(u);for(De=0,fe=se.length;De<fe;De++)Y=se[De],be.writeUInt16(Y);for(Mt=0,Qe=S.length;Mt<Qe;Mt++)j=S[Mt],be.writeUInt16(j);return{charMap:n,subtable:be.data,maxGlyphID:V+1}}},t}(),GK=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)n=new Ez(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,o;return n==null&&(n="macroman"),s=Ez.encode(r,n),(o=new Jm).writeUInt16(0),o.writeUInt16(1),s.table=o.data.concat(s.subtable),s},e}(),PCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),jCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),MCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(s=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=s?c<s:c>s;c=0<=s?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var u,i,m;for(m=[],c=u=0,i=this.file.maxp.numGlyphs;0<=i?u<i:u>i;c=0<=i?++u:--u)m.push(r.readUInt32());return m}).call(this)}},e}(),kCe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},DCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,o,c,u,i,m,g,C,B,S;for(r.pos=this.offset,r.readShort(),n=r.readShort(),i=r.readShort(),s=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+i+r.readShort()});for(m={},c=C=0,B=s.length;C<B;c=++C)o=s[c],r.pos=o.offset,g=r.readString(o.length),u=new kCe(g,o),m[S=o.nameID]==null&&(m[S]=[]),m[o.nameID].push(u);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},e}(),OCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),RCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,o,c,u,i,m;for(r.pos=this.offset,this.metrics=[],n=0,i=this.file.hhea.numberOfMetrics;0<=i?n<i:n>i;n=0<=i?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,C;for(C=[],n=g=0;0<=o?g<o:g>o;n=0<=o?++g:--g)C.push(r.readInt16());return C}(),this.widths=(function(){var g,C,B,S;for(S=[],g=0,C=(B=this.metrics).length;g<C;g++)c=B[g],S.push(c.advance);return S}).call(this),s=this.widths[this.widths.length-1],m=[],n=u=0;0<=o?u<o:u>o;n=0<=o?++u:--u)m.push(this.widths.push(s));return m},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),$K=[].slice,UCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,o,c,u,i,m,g,C,B;return r in this.cache?this.cache[r]:(c=this.file.loca,n=this.file.contents,s=c.indexOf(r),(o=c.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,u=(i=new Jm(n.read(o))).readShort(),g=i.readShort(),B=i.readShort(),m=i.readShort(),C=i.readShort(),this.cache[r]=u===-1?new QCe(i,g,B,m,C):new zCe(i,u,g,B,m,C),this.cache[r]))},e.prototype.encode=function(r,n,s){var o,c,u,i,m;for(u=[],c=[],i=0,m=n.length;i<m;i++)o=r[n[i]],c.push(u.length),o&&(u=u.concat(o.encode(s)));return c.push(u.length),{table:u,offsets:c}},e}(),zCe=function(){function t(e,r,n,s,o,c){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=o,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),QCe=function(){function t(e,r,n,s,o){var c,u;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Jm($K.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),HCe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Np(e,$f),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=2)c.push(2*r.readUInt16());return c}).call(this):(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=4)c.push(r.readUInt32());return c}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),o=0,c=0,u=0;u<s.length;++u)if(s[u]=o,c<n.length&&n[c]==u){++c,s[u]=o;var i=this.offsets[u],m=this.offsets[u+1]-i;m>0&&(o+=m)}for(var g=new Array(4*s.length),C=0;C<s.length;++C)g[4*C+3]=255&s[C],g[4*C+2]=(65280&s[C])>>8,g[4*C+1]=(16711680&s[C])>>16,g[4*C]=(4278190080&s[C])>>24;return g},e}(),VCe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,o;for(r in s=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,o,c,u,i;for(s={},c=0,u=e.length;c<u;c++)s[o=e[c]]=this.font.glyf.glyphFor(o);for(o in r=[],s)(n=s[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in i=this.glyphsFor(r))n=i[o],s[o]=n;return s},t.prototype.encode=function(e,r){var n,s,o,c,u,i,m,g,C,B,S,P,j,D,F;for(s in n=GK.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),S={0:0},F=n.charMap)S[(i=F[s]).old]=i.new;for(P in B=n.maxGlyphID,c)P in S||(S[P]=B++);return g=function(R){var V,Y;for(V in Y={},R)Y[R[V]]=V;return Y}(S),C=Object.keys(g).sort(function(R,V){return R-V}),j=function(){var R,V,Y;for(Y=[],R=0,V=C.length;R<V;R++)u=C[R],Y.push(g[u]);return Y}(),o=this.font.glyf.encode(c,j,S),m=this.font.loca.encode(o.offsets,j),D={cmap:this.font.cmap.raw(),glyf:o.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},t}();ss.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,o,c;if(Array.isArray(r))return"["+function(){var u,i,m;for(m=[],u=0,i=r.length;u<i;u++)n=r[u],m.push(e.convert(n));return m}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in o=["<<"],r)c=r[s],o.push("/"+s+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+r},e}();var GCe={exports:{}};/*! For license information please see bundle.js.LICENSE.txt */(function(t,e){(function(r,n){t.exports=n()})(self,function(){return(()=>{var r={418:c=>{var u=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function g(C){if(C==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(C)}c.exports=function(){try{if(!Object.assign)return!1;var C=new String("abc");if(C[5]="de",Object.getOwnPropertyNames(C)[0]==="5")return!1;for(var B={},S=0;S<10;S++)B["_"+String.fromCharCode(S)]=S;if(Object.getOwnPropertyNames(B).map(function(j){return B[j]}).join("")!=="0123456789")return!1;var P={};return"abcdefghijklmnopqrst".split("").forEach(function(j){P[j]=j}),Object.keys(Object.assign({},P)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(C,B){for(var S,P,j=g(C),D=1;D<arguments.length;D++){for(var F in S=Object(arguments[D]))i.call(S,F)&&(j[F]=S[F]);if(u){P=u(S);for(var R=0;R<P.length;R++)m.call(S,P[R])&&(j[P[R]]=S[P[R]])}}return j}},703:(c,u,i)=>{var m=i(414);function g(){}function C(){}C.resetWarningCache=g,c.exports=function(){function B(j,D,F,R,V,Y){if(Y!==m){var te=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw te.name="Invariant Violation",te}}function S(){return B}B.isRequired=B;var P={array:B,bool:B,func:B,number:B,object:B,string:B,symbol:B,any:B,arrayOf:S,element:B,elementType:B,instanceOf:S,node:B,objectOf:S,oneOf:S,oneOfType:S,shape:S,exact:S,checkPropTypes:C,resetWarningCache:g};return P.PropTypes=P,P}},697:(c,u,i)=>{c.exports=i(703)()},414:c=>{c.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:(c,u,i)=>{var m=i(418),g=60103,C=60106;u.Fragment=60107,u.StrictMode=60108,u.Profiler=60114;var B=60109,S=60110,P=60112;u.Suspense=60113;var j=60115,D=60116;if(typeof Symbol=="function"&&Symbol.for){var F=Symbol.for;g=F("react.element"),C=F("react.portal"),u.Fragment=F("react.fragment"),u.StrictMode=F("react.strict_mode"),u.Profiler=F("react.profiler"),B=F("react.provider"),S=F("react.context"),P=F("react.forward_ref"),u.Suspense=F("react.suspense"),j=F("react.memo"),D=F("react.lazy")}var R=typeof Symbol=="function"&&Symbol.iterator;function V(le){for(var pe="https://reactjs.org/docs/error-decoder.html?invariant="+le,fe=1;fe<arguments.length;fe++)pe+="&args[]="+encodeURIComponent(arguments[fe]);return"Minified React error #"+le+"; visit "+pe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te={};function se(le,pe,fe){this.props=le,this.context=pe,this.refs=te,this.updater=fe||Y}function oe(){}function K(le,pe,fe){this.props=le,this.context=pe,this.refs=te,this.updater=fe||Y}se.prototype.isReactComponent={},se.prototype.setState=function(le,pe){if(typeof le!="object"&&typeof le!="function"&&le!=null)throw Error(V(85));this.updater.enqueueSetState(this,le,pe,"setState")},se.prototype.forceUpdate=function(le){this.updater.enqueueForceUpdate(this,le,"forceUpdate")},oe.prototype=se.prototype;var de=K.prototype=new oe;de.constructor=K,m(de,se.prototype),de.isPureReactComponent=!0;var we={current:null},J=Object.prototype.hasOwnProperty,Z={key:!0,ref:!0,__self:!0,__source:!0};function Ie(le,pe,fe){var Qe,Ke={},et=null,tt=null;if(pe!=null)for(Qe in pe.ref!==void 0&&(tt=pe.ref),pe.key!==void 0&&(et=""+pe.key),pe)J.call(pe,Qe)&&!Z.hasOwnProperty(Qe)&&(Ke[Qe]=pe[Qe]);var bt=arguments.length-2;if(bt===1)Ke.children=fe;else if(1<bt){for(var De=Array(bt),Mt=0;Mt<bt;Mt++)De[Mt]=arguments[Mt+2];Ke.children=De}if(le&&le.defaultProps)for(Qe in bt=le.defaultProps)Ke[Qe]===void 0&&(Ke[Qe]=bt[Qe]);return{$$typeof:g,type:le,key:et,ref:tt,props:Ke,_owner:we.current}}function be(le){return typeof le=="object"&&le!==null&&le.$$typeof===g}var He=/\/+/g;function Fe(le,pe){return typeof le=="object"&&le!==null&&le.key!=null?function(fe){var Qe={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(Ke){return Qe[Ke]})}(""+le.key):pe.toString(36)}function ve(le,pe,fe,Qe,Ke){var et=typeof le;et!=="undefined"&&et!=="boolean"||(le=null);var tt=!1;if(le===null)tt=!0;else switch(et){case"string":case"number":tt=!0;break;case"object":switch(le.$$typeof){case g:case C:tt=!0}}if(tt)return Ke=Ke(tt=le),le=Qe===""?"."+Fe(tt,0):Qe,Array.isArray(Ke)?(fe="",le!=null&&(fe=le.replace(He,"$&/")+"/"),ve(Ke,pe,fe,"",function(Mt){return Mt})):Ke!=null&&(be(Ke)&&(Ke=function(Mt,ir){return{$$typeof:g,type:Mt.type,key:ir,ref:Mt.ref,props:Mt.props,_owner:Mt._owner}}(Ke,fe+(!Ke.key||tt&&tt.key===Ke.key?"":(""+Ke.key).replace(He,"$&/")+"/")+le)),pe.push(Ke)),1;if(tt=0,Qe=Qe===""?".":Qe+":",Array.isArray(le))for(var bt=0;bt<le.length;bt++){var De=Qe+Fe(et=le[bt],bt);tt+=ve(et,pe,fe,De,Ke)}else if(De=function(Mt){return Mt===null||typeof Mt!="object"?null:typeof(Mt=R&&Mt[R]||Mt["@@iterator"])=="function"?Mt:null}(le),typeof De=="function")for(le=De.call(le),bt=0;!(et=le.next()).done;)tt+=ve(et=et.value,pe,fe,De=Qe+Fe(et,bt++),Ke);else if(et==="object")throw pe=""+le,Error(V(31,pe==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":pe));return tt}function _e(le,pe,fe){if(le==null)return le;var Qe=[],Ke=0;return ve(le,Qe,"","",function(et){return pe.call(fe,et,Ke++)}),Qe}function ze(le){if(le._status===-1){var pe=le._result;pe=pe(),le._status=0,le._result=pe,pe.then(function(fe){le._status===0&&(fe=fe.default,le._status=1,le._result=fe)},function(fe){le._status===0&&(le._status=2,le._result=fe)})}if(le._status===1)return le._result;throw le._result}var Ne={current:null};function st(){var le=Ne.current;if(le===null)throw Error(V(321));return le}var ie={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:we,IsSomeRendererActing:{current:!1},assign:m};u.Children={map:_e,forEach:function(le,pe,fe){_e(le,function(){pe.apply(this,arguments)},fe)},count:function(le){var pe=0;return _e(le,function(){pe++}),pe},toArray:function(le){return _e(le,function(pe){return pe})||[]},only:function(le){if(!be(le))throw Error(V(143));return le}},u.Component=se,u.PureComponent=K,u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,u.cloneElement=function(le,pe,fe){if(le==null)throw Error(V(267,le));var Qe=m({},le.props),Ke=le.key,et=le.ref,tt=le._owner;if(pe!=null){if(pe.ref!==void 0&&(et=pe.ref,tt=we.current),pe.key!==void 0&&(Ke=""+pe.key),le.type&&le.type.defaultProps)var bt=le.type.defaultProps;for(De in pe)J.call(pe,De)&&!Z.hasOwnProperty(De)&&(Qe[De]=pe[De]===void 0&&bt!==void 0?bt[De]:pe[De])}var De=arguments.length-2;if(De===1)Qe.children=fe;else if(1<De){bt=Array(De);for(var Mt=0;Mt<De;Mt++)bt[Mt]=arguments[Mt+2];Qe.children=bt}return{$$typeof:g,type:le.type,key:Ke,ref:et,props:Qe,_owner:tt}},u.createContext=function(le,pe){return pe===void 0&&(pe=null),(le={$$typeof:S,_calculateChangedBits:pe,_currentValue:le,_currentValue2:le,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:B,_context:le},le.Consumer=le},u.createElement=Ie,u.createFactory=function(le){var pe=Ie.bind(null,le);return pe.type=le,pe},u.createRef=function(){return{current:null}},u.forwardRef=function(le){return{$$typeof:P,render:le}},u.isValidElement=be,u.lazy=function(le){return{$$typeof:D,_payload:{_status:-1,_result:le},_init:ze}},u.memo=function(le,pe){return{$$typeof:j,type:le,compare:pe===void 0?null:pe}},u.useCallback=function(le,pe){return st().useCallback(le,pe)},u.useContext=function(le,pe){return st().useContext(le,pe)},u.useDebugValue=function(){},u.useEffect=function(le,pe){return st().useEffect(le,pe)},u.useImperativeHandle=function(le,pe,fe){return st().useImperativeHandle(le,pe,fe)},u.useLayoutEffect=function(le,pe){return st().useLayoutEffect(le,pe)},u.useMemo=function(le,pe){return st().useMemo(le,pe)},u.useReducer=function(le,pe,fe){return st().useReducer(le,pe,fe)},u.useRef=function(le){return st().useRef(le)},u.useState=function(le){return st().useState(le)},u.version="17.0.2"},294:(c,u,i)=>{c.exports=i(408)}},n={};function s(c){var u=n[c];if(u!==void 0)return u.exports;var i=n[c]={exports:{}};return r[c](i,i.exports,s),i.exports}s.n=c=>{var u=c&&c.__esModule?()=>c.default:()=>c;return s.d(u,{a:u}),u},s.d=(c,u)=>{for(var i in u)s.o(u,i)&&!s.o(c,i)&&Object.defineProperty(c,i,{enumerable:!0,get:u[i]})},s.o=(c,u)=>Object.prototype.hasOwnProperty.call(c,u),s.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var o={};return(()=>{s.r(o),s.d(o,{default:()=>R});var c=s(294),u=s(697),i=s.n(u),m=function(V){var Y=V.children,te=V.width;return c.createElement("div",{id:"y-label",style:{flex:"0 0 ".concat(te,"px")}}," ",Y," ")};m.defaultProps={children:" "},m.propTypes={children:i().oneOfType([i().string,i().element]),width:i().number.isRequired};const g=m;function C(V){var Y=V.labels,te=V.width,se=V.labelsVisibility,oe=V.squares,K=V.height,de=V.yWidth;return c.createElement("div",{id:"x-labels-list",style:{display:"flex"}},c.createElement(g,{width:de}),Y.map(function(we,J){return c.createElement("div",{key:J,style:{flex:oe?"none":1,textAlign:"center",width:oe?"".concat(K+1,"px"):te,visibility:se&&!se[J]?"hidden":"visible"}},we)}))}C.propTypes={labels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,labelsVisibility:i().arrayOf(i().bool),width:i().number.isRequired,squares:i().bool,height:i().number},C.defaultProps={labelsVisibility:null,squares:!1,height:30};const B=C;function S(V){return function(Y){if(Array.isArray(Y))return P(Y)}(V)||function(Y){if(typeof Symbol<"u"&&Y[Symbol.iterator]!=null||Y["@@iterator"]!=null)return Array.from(Y)}(V)||function(Y,te){if(Y){if(typeof Y=="string")return P(Y,te);var se=Object.prototype.toString.call(Y).slice(8,-1);return se==="Object"&&Y.constructor&&(se=Y.constructor.name),se==="Map"||se==="Set"?Array.from(Y):se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se)?P(Y,te):void 0}}(V)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P(V,Y){(Y==null||Y>V.length)&&(Y=V.length);for(var te=0,se=new Array(Y);te<Y;te++)se[te]=V[te];return se}var j=function(V){var Y=V.xLabels,te=V.yLabels,se=V.data,oe=(V.xLabelWidth,V.yLabelWidth),K=V.background,de=V.height,we=V.yLabelTextAlign,J=V.unit,Z=V.displayYLabels,Ie=V.onClick,be=V.cursor,He=V.squares,Fe=V.cellRender,ve=V.cellStyle,_e=V.title,ze=se.reduce(function(ie,le){return[].concat(S(le),S(ie))},[]),Ne=Math.max.apply(Math,S(ze)),st=Math.min.apply(Math,S(ze));return c.createElement("div",null,te.map(function(ie,le){return c.createElement("div",{id:"heatmap-row",key:le,style:{display:"flex"}},c.createElement(g,{width:oe},c.createElement("div",{style:{position:"absolute",textAlign:we,paddingRight:"5px",paddingTop:"".concat(de/3.7,"px"),width:"".concat(oe,"px")}},Z&&ie)),Y.map(function(pe,fe){var Qe=se[le][fe],Ke=Object.assign({cursor:"".concat(be),margin:"1px 1px 0 0",height:de,width:He?"".concat(de,"px"):void 0,flex:He?"none":1,textAlign:"center"},ve(K,Qe,st,Ne,se,fe,le));return c.createElement("div",{id:"single-heatmap-cell",onClick:Ie.bind(void 0,fe,le),title:_e(Qe,J,fe,le),key:"".concat(fe,"_").concat(le),style:Ke},c.createElement("div",{style:{paddingTop:"".concat(de/3.7,"px")}},Fe(Qe,pe,ie)))}))}))};j.propTypes={xLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,yLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,data:i().arrayOf(i().array).isRequired,background:i().string.isRequired,height:i().number.isRequired,xLabelWidth:i().number.isRequired,yLabelWidth:i().number.isRequired,yLabelTextAlign:i().string.isRequired,unit:i().string.isRequired,displayYLabels:i().bool,onClick:i().func,cursor:i().string,squares:i().bool,cellRender:i().func.isRequired,cellStyle:i().func.isRequired,title:i().func},j.defaultProps={displayYLabels:!0,cursor:"",onClick:function(){},squares:!1,title:function(V,Y){return(V||V===0)&&"".concat(V," ").concat(Y)}};const D=j;function F(V){var Y=V.xLabels,te=V.yLabels,se=V.data,oe=V.background,K=V.height,de=V.xLabelWidth,we=V.yLabelWidth,J=V.xLabelsLocation,Z=V.yLabelTextAlign,Ie=V.xLabelsVisibility,be=V.unit,He=V.displayYLabels,Fe=V.onClick,ve=V.squares,_e=V.cellRender,ze=V.cellStyle,Ne=V.title,st="";Fe!==void 0&&(st="pointer");var ie=c.createElement(B,{labels:Y,width:de,labelsVisibility:Ie,height:K,squares:ve,yWidth:we});return c.createElement("div",{id:"outer-container"},J==="top"&&ie,c.createElement(D,{xLabels:Y,yLabels:te,data:se,background:oe,height:K,xLabelWidth:de,yLabelWidth:we,yLabelTextAlign:Z,unit:be,xLabelsLocation:J,displayYLabels:He,onClick:Fe,cursor:st,squares:ve,cellRender:_e,cellStyle:ze,title:Ne}),J==="bottom"&&ie)}F.propTypes={xLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,yLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,data:i().arrayOf(i().array).isRequired,background:i().string,height:i().number,xLabelWidth:i().number,yLabelWidth:i().number,xLabelsLocation:i().oneOf(["top","bottom"]),xLabelsVisibility:i().arrayOf(i().bool),yLabelTextAlign:i().string,displayYLabels:i().bool,unit:i().string,onClick:i().func,squares:i().bool,cellRender:i().func,cellStyle:i().func,title:i().func},F.defaultProps={background:"#329fff",height:30,xLabelWidth:60,yLabelWidth:40,yLabelTextAlign:"right",unit:"",xLabelsLocation:"top",xLabelsVisibility:null,displayYLabels:!0,onClick:void 0,squares:!1,cellRender:function(){return null},cellStyle:function(V,Y,te,se){return{background:V,opacity:(Y-te)/(se-te)||0}}};const R=F})(),o})()})})(GCe);const $Ce=()=>{var we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne,st,ie,le;const[t,e]=Ae.useState(null),[r,n]=Ae.useState(null),[s,o]=Ae.useState(!0),[c,u]=Ae.useState(null),m=((we=vu().state)==null?void 0:we.farmId)||"WAK0001",[g,C]=Ae.useState(null),[B,S]=Ae.useState(null),P=Ae.useRef(),[j,D]=Ae.useState({width:window.innerWidth,height:window.innerHeight}),F=Array.isArray(r)&&r.length>0&&((Z=(J=r[0])==null?void 0:J.data_fields)==null?void 0:Z.gfw_forest_carbon_gross_emissions__Mg_CO2e)||0,R=Array.isArray(r)&&r.length>1&&((be=(Ie=r[1])==null?void 0:Ie.data_fields)==null?void 0:be.gfw_forest_carbon_gross_removals__Mg_CO2e)||0,V=Array.isArray(r)&&r.length>2&&((Fe=(He=r[2])==null?void 0:He.data_fields)==null?void 0:Fe.gfw_forest_carbon_net_flux__Mg_CO2e)||0,Y=Array.isArray(r)&&r.length>3&&((_e=(ve=r[3])==null?void 0:ve.data_fields)==null?void 0:_e.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C)||0,te={labels:["Carbon Gross Emissions","Carbon Gross Removals","Carbon Net Flux","Carbon Sequestration"],datasets:[{data:[F,R,V,Y],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"]}]},se={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Carbon Emissions and Removals"}}};Ae.useEffect(()=>{const pe=()=>{D({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",pe),()=>{window.removeEventListener("resize",pe)}},[]),Ae.useEffect(()=>{var pe;Array.isArray(r)&&r.length>2&&(console.log("Updated geoData:",r),console.log("carbon driver:",(pe=r[0])==null?void 0:pe.data_fields.area__ha))},[r]);const oe=pe=>{const Qe=rf({type:"Feature",geometry:{type:"Polygon",coordinates:[pe]}}),Ke=Qe/1e4;return{areaInSquareMeters:Qe,areaInHectares:Ke}};Ae.useEffect(()=>{(async()=>{var fe,Qe,Ke;console.log("Fetching farm report for farmId:",m);try{const et=await Tr.get(`/api/gfw/farm/${m}/CarbonReport`);if(et.data.error)console.error("Error in API response:",et.data.error),u(et.data.error);else{console.log("API Response:",et.data),e(et.data.farm_info);const tt=et.data.report||[];if(console.log("Report Data:",tt),n(tt),tt.length>0&&((Qe=(fe=tt[0])==null?void 0:fe.coordinates)==null?void 0:Qe.length)>0){const bt=tt[0].coordinates[0];console.log("Coordinates:",bt);const{areaInSquareMeters:De,areaInHectares:Mt}=oe(bt);C(De),S(Mt),console.log("Area in m:",De,"Area in ha:",Mt)}else console.warn("No valid polygon data in report")}}catch(et){u("Failed to fetch farm report."),console.error("Error fetching farm report:",((Ke=et.response)==null?void 0:Ke.data)||et.message)}finally{o(!1)}})()},[m]);const K=pe=>{const fe={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[pe]},properties:{stroke:"#00FF00","stroke-width":4,"stroke-opacity":1,fill:"#00FF00","fill-opacity":.2}}]};console.log(JSON.stringify(fe));const Qe=encodeURIComponent(JSON.stringify(fe));console.log(j);const Ke=Math.min(j.width,1280);return`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/geojson(${Qe})/auto/${Ke}x500?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`},de=async()=>{const pe=P.current,fe=new ss("p","mm","a4"),Qe=pe.querySelectorAll(".page"),Ke="nkusu@agriyields.com";for(let et=0;et<Qe.length;et++){await new Promise(Ue=>{const hr=Qe[et].getElementsByTagName("img");let Dt=0;hr.length===0?Ue():Array.from(hr).forEach(vt=>{vt.onload=()=>{Dt+=1,Dt===hr.length&&Ue()},vt.src=vt.src})});const tt=await jF(Qe[et],{scale:2,useCORS:!0}),bt=tt.toDataURL("image/png"),De=fe.internal.pageSize.getWidth(),Mt=tt.height*De/tt.width;fe.addImage(bt,"PNG",0,0,De,Mt);const ir=10,Ar=De-fe.getTextWidth(Ke)-ir,Ze=fe.internal.pageSize.getHeight()-ir;fe.setFontSize(10),fe.text(Ke,Ar,Ze),et<Qe.length-1&&fe.addPage()}fe.save("EUDR_Report.pdf")};return s?p.jsx(RC,{}):c?p.jsx("p",{className:"text-red-600",children:c}):(r[1].data_fields.area__ha/B*100,c==="No polygon found. Please create a polygon for this forest."?p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),p.jsx("p",{className:"text-lg font-medium text-gray-700 mb-6",children:"It seems that no polygon data is available for this forest. You can create a polygon by clicking the link below:"}),p.jsx(Po,{to:"/create-polygon",className:"inline-block px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Create Polygon"})]}):p.jsxs("div",{className:"flex justify-center flex-col items-center text-xl",children:[p.jsx("div",{ref:P,children:p.jsxs("div",{className:"page bg-white p-6 shadow-md mb-4",children:[p.jsx("img",{src:"/logo.jpg",alt:"Description of image",style:{float:"right",width:"200px",height:"auto"}}),p.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"NKUSU/AGRIYIELDS REPORT"}),t&&p.jsxs("p",{className:"p-4",children:["Carbon report for Farm ID ",p.jsx("strong",{children:t.farm_id}),", owned by ",p.jsx("strong",{children:t.name}),"Located at ",p.jsx("strong",{children:t.geolocation}),","]}),p.jsxs("div",{className:"container mx-auto p-4",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Carbon Assessment summary"}),p.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Category"}),p.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Mg_CO2e"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross emissions"}),p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(ze=r[0])==null?void 0:ze.data_fields.gfw_forest_carbon_gross_emissions__Mg_CO2e})]}),p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross absorption"}),p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(Ne=r[1])==null?void 0:Ne.data_fields.gfw_forest_carbon_gross_removals__Mg_CO2e})]}),p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon net Emmisions"}),p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(st=r[2])==null?void 0:st.data_fields.gfw_forest_carbon_net_flux__Mg_CO2e})]}),p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon Sequestration potential"}),p.jsxs("td",{className:"py-2 px-4 border-b border-gray-300",children:[(ie=r[3])==null?void 0:ie.data_fields.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C," belowground",p.jsx("br",{}),(le=r[4])==null?void 0:le.data_fields.gfw_reforestable_extent_aboveground_carbon_potential_sequestration__Mg_C," aboveground"]})]})]})]})]}),p.jsx("div",{className:"w-full max-w-md mx-auto",children:p.jsx(IN,{data:te,options:se})}),p.jsx("div",{className:"items-center justify-center mt-6 mb-6",children:p.jsx("div",{className:"overflow-hidden",children:p.jsx("img",{src:K(r[0].coordinates[0]),alt:"Map for the forest",className:"object-cover w-full h-full"})})})]})}),p.jsx("button",{onClick:de,className:"bg-blue-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-blue-700 transition duration-300",children:"Generate PDF"})]}))},qCe=()=>{var we,J,Z,Ie,be,He,Fe,ve,_e,ze,Ne,st,ie,le;const[t,e]=Ae.useState(null),[r,n]=Ae.useState(null),[s,o]=Ae.useState(!0),[c,u]=Ae.useState(null),m=((we=vu().state)==null?void 0:we.forestId)||1,[g,C]=Ae.useState(null),[B,S]=Ae.useState(null),P=Ae.useRef(),[j,D]=Ae.useState({width:window.innerWidth,height:window.innerHeight}),F=Array.isArray(r)&&r.length>0&&((Z=(J=r[0])==null?void 0:J.data_fields)==null?void 0:Z.gfw_forest_carbon_gross_emissions__Mg_CO2e)||0,R=Array.isArray(r)&&r.length>1&&((be=(Ie=r[1])==null?void 0:Ie.data_fields)==null?void 0:be.gfw_forest_carbon_gross_removals__Mg_CO2e)||0,V=Array.isArray(r)&&r.length>2&&((Fe=(He=r[2])==null?void 0:He.data_fields)==null?void 0:Fe.gfw_forest_carbon_net_flux__Mg_CO2e)||0,Y=Array.isArray(r)&&r.length>3&&((_e=(ve=r[3])==null?void 0:ve.data_fields)==null?void 0:_e.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C)||0,te={labels:["Carbon Gross Emissions","Carbon Gross Removals","Carbon Net Flux","Carbon Sequestration"],datasets:[{data:[F,R,V,Y],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"]}]},se={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Carbon Emissions and Removals"}}};Ae.useEffect(()=>{const pe=()=>{D({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",pe),()=>{window.removeEventListener("resize",pe)}},[]),Ae.useEffect(()=>{var pe;Array.isArray(r)&&r.length>2&&(console.log("Updated geoData:",r),console.log("carbon driver:",(pe=r[0])==null?void 0:pe.data_fields.area__ha))},[r]);const oe=pe=>{const Qe=rf({type:"Feature",geometry:{type:"Polygon",coordinates:[pe]}}),Ke=Qe/1e4;return{areaInSquareMeters:Qe,areaInHectares:Ke}};Ae.useEffect(()=>{(async()=>{var fe,Qe,Ke;console.log("Fetching forest report for forestId:",m);try{const et=await Tr.get(`/api/gfw/forest/${m}/CarbonReport`);if(et.data.error)console.error("Error in API response:",et.data.error),u(et.data.error);else{console.log("API Response:",et.data),e(et.data.forest_info);const tt=et.data.report||[];if(console.log("Report Data:",tt),n(tt),tt.length>0&&((Qe=(fe=tt[0])==null?void 0:fe.coordinates)==null?void 0:Qe.length)>0){const bt=tt[0].coordinates[0];console.log("Coordinates:",bt);const{areaInSquareMeters:De,areaInHectares:Mt}=oe(bt);C(De),S(Mt),console.log("Area in m:",De,"Area in ha:",Mt)}else console.warn("No valid polygon data in report")}}catch(et){u("Failed to fetch farm report."),console.error("Error fetching farm report:",((Ke=et.response)==null?void 0:Ke.data)||et.message)}finally{o(!1)}})()},[m]);const K=pe=>{const Qe=encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[pe]},properties:{stroke:"#00FF00","stroke-width":4,"stroke-opacity":1,fill:"#00FF00","fill-opacity":.2}}]}));console.log(j);const Ke=Math.min(j.width,1280);return`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/geojson(${Qe})/auto/${Ke}x500?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`},de=async()=>{const pe=P.current,fe=new ss("p","mm","a4"),Qe=pe.querySelectorAll(".page"),Ke="nkusu@agriyields.com";for(let et=0;et<Qe.length;et++){await new Promise(Ue=>{const hr=Qe[et].getElementsByTagName("img");let Dt=0;hr.length===0?Ue():Array.from(hr).forEach(vt=>{vt.onload=()=>{Dt+=1,Dt===hr.length&&Ue()},vt.src=vt.src})});const tt=await jF(Qe[et],{scale:2,useCORS:!0}),bt=tt.toDataURL("image/png"),De=fe.internal.pageSize.getWidth(),Mt=tt.height*De/tt.width;fe.addImage(bt,"PNG",0,0,De,Mt);const ir=10,Ar=De-fe.getTextWidth(Ke)-ir,Ze=fe.internal.pageSize.getHeight()-ir;fe.setFontSize(10),fe.text(Ke,Ar,Ze),et<Qe.length-1&&fe.addPage()}fe.save("EUDR_Report.pdf")};return s?p.jsx(RC,{}):c?p.jsx("p",{className:"text-red-600",children:c}):(r[1].data_fields.area__ha/B*100,c==="No polygon found. Please create a polygon for this forest."?p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),p.jsx("p",{className:"text-lg font-medium text-gray-700 mb-6",children:"It seems that no polygon data is available for this forest. You can create a polygon by clicking the link below:"}),p.jsx(Po,{to:"/create-polygon",className:"inline-block px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Create Polygon"})]}):p.jsxs("div",{className:"flex justify-center flex-col items-center text-xl",children:[p.jsx("div",{ref:P,children:p.jsxs("div",{className:"page bg-white p-6 shadow-md mb-4",children:[p.jsx("img",{src:"/logo.jpg",alt:"Description of image",style:{float:"right",width:"200px",height:"auto"}}),p.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"NKUSU/AGRIYIELDS REPORT"}),t&&p.jsxs("p",{className:"p-4",children:["Carbon report for Forest ID ",p.jsx("strong",{children:t.farm_id}),", owned by ",p.jsx("strong",{children:t.name})]}),p.jsxs("div",{className:"container mx-auto p-4",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Carbon Assessment summary"}),p.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:[p.jsx("thead",{className:"bg-gray-100",children:p.jsxs("tr",{children:[p.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Category"}),p.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Mg_CO2e"})]})}),p.jsxs("tbody",{children:[p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross emissions"}),p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(ze=r[0])==null?void 0:ze.data_fields.gfw_forest_carbon_gross_emissions__Mg_CO2e})]}),p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross absorption"}),p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(Ne=r[1])==null?void 0:Ne.data_fields.gfw_forest_carbon_gross_removals__Mg_CO2e})]}),p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon net Emmisions"}),p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(st=r[2])==null?void 0:st.data_fields.gfw_forest_carbon_net_flux__Mg_CO2e})]}),p.jsxs("tr",{className:"hover:bg-gray-100",children:[p.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon Sequestration potential"}),p.jsxs("td",{className:"py-2 px-4 border-b border-gray-300",children:[(ie=r[3])==null?void 0:ie.data_fields.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C," belowground",p.jsx("br",{}),(le=r[4])==null?void 0:le.data_fields.gfw_reforestable_extent_aboveground_carbon_potential_sequestration__Mg_C," aboveground"]})]})]})]})]}),p.jsx("div",{className:"w-full max-w-md mx-auto",children:p.jsx(IN,{data:te,options:se})}),p.jsx("div",{className:"items-center justify-center mt-6 mb-6",children:p.jsx("div",{className:"overflow-hidden",children:p.jsx("img",{src:K(r[0].coordinates[0]),alt:"Map for the forest",className:"object-cover w-full h-full"})})})]})}),p.jsx("button",{onClick:de,className:"bg-blue-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-blue-700 transition duration-300",children:"Generate PDF"})]}))},WCe=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState({name:"",location:"",country:"",district:""}),[c,u]=Ae.useState({name:"",price:"",store_id:""}),[i,m]=Ae.useState(null),[g,C]=Ae.useState(null);Ae.useEffect(()=>{B(),S()},[]);const B=async()=>{try{const se=await Tr.get("/api/store/");e(se.data.stores)}catch(se){console.error("Error fetching stores:",se)}},S=async()=>{try{const se=await Tr.get("/api/product/");n(se.data.products)}catch(se){console.error("Error fetching products:",se)}},P=se=>{const{name:oe,value:K}=se.target;o(de=>({...de,[oe]:K}))},j=se=>{const{name:oe,value:K}=se.target;u(de=>({...de,[oe]:K}))},D=async se=>{se.preventDefault();try{i?await Tr.put(`/api/store/${i}/edit`,s):await Tr.post("/api/store/create",s),o({name:"",location:"",country:"",district:""}),m(null),B()}catch(oe){console.error("Error saving store:",oe)}},F=async se=>{se.preventDefault();try{g?await Tr.put(`/api/product/${g}/edit`,c):await Tr.post("/api/product/create",c),u({name:"",price:"",store_id:""}),C(null),S()}catch(oe){console.error("Error saving product:",oe)}},R=se=>{o({name:se.name,location:se.location,country:se.country,district:se.district}),m(se.id)},V=se=>{u({name:se.name,price:se.price,store_id:se.store_id}),C(se.id)},Y=async se=>{try{await Tr.delete(`/api/store/${se}/delete`),B()}catch(oe){console.error("Error deleting store:",oe)}},te=async se=>{try{await Tr.delete(`/api/product/${se}/delete`),S()}catch(oe){console.error("Error deleting product:",oe)}};return p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl mb-4",children:"Store & Product Manager"}),p.jsxs("form",{onSubmit:D,className:"mb-4",children:[p.jsx("input",{type:"text",name:"name",value:s.name,onChange:P,placeholder:"Store Name",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"text",name:"location",value:s.location,onChange:P,placeholder:"Location",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"text",name:"country",value:s.country,onChange:P,placeholder:"Country",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"text",name:"district",value:s.district,onChange:P,placeholder:"District",className:"border p-2 rounded mr-2",required:!0}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:i?"Update Store":"Add Store"})]}),p.jsxs("form",{onSubmit:F,className:"mb-4",children:[p.jsx("input",{type:"text",name:"name",value:c.name,onChange:j,placeholder:"Product Name",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"number",name:"price",value:c.price,onChange:j,placeholder:"Price",className:"border p-2 rounded mr-2",required:!0}),p.jsxs("select",{name:"store_id",value:c.store_id,onChange:j,className:"border p-2 rounded mr-2",required:!0,children:[p.jsx("option",{value:"",children:"Select Store"}),t.map(se=>p.jsx("option",{value:se.id,children:se.name},se.id))]}),p.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded",children:g?"Update Product":"Add Product"})]}),p.jsx("h3",{className:"text-xl mt-6",children:"Stores"}),p.jsx("ul",{children:t.map(se=>p.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[p.jsxs("span",{children:[se.name," - ",se.location," (",se.country,", ",se.district,")"]}),p.jsxs("div",{children:[p.jsx("button",{onClick:()=>R(se),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>Y(se.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},se.id))}),p.jsx("h3",{className:"text-xl mt-6",children:"Products"}),p.jsx("ul",{children:r.map(se=>p.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[p.jsxs("span",{children:[se.name," - $",se.price," (Store: ",se.store_id,")"]}),p.jsxs("div",{children:[p.jsx("button",{onClick:()=>V(se),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>te(se.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},se.id))})]})};ph.register(fA,pA,xp,Qd,N1,L0,T0);const KCe=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState([]),[c,u]=Ae.useState([]),[i,m]=Ae.useState([]),[g,C]=Ae.useState(0),[B,S]=Ae.useState(0),[P,j]=Ae.useState([]),[D,F]=Ae.useState(!1),[R,V]=Ae.useState(""),[Y,te]=Ae.useState(""),[se,oe]=Ae.useState([]),[K,de]=Ae.useState([]),[we,J]=Ae.useState(""),[Z,Ie]=Ae.useState(""),[be,He]=Ae.useState(""),[Fe,ve]=Ae.useState(""),[_e,ze]=Ae.useState("30"),Ne={Cocoa:250,"Coffee Robusta":300,"Coffee Arabica":280,"Oil Palm":350,"Soya Bean":200,Rubber:300,"Hass Avocado":250,Macadamia:280,Maize:200,Sunflower:180,"Sweet Potato":200,Potato:200,Tomato:220,Millet:180,Sorghum:200,Groundnut:200,Ginger:280,Pineapple:300};Ae.useEffect(()=>{(async()=>{try{const Ke=await Tr.get("/api/crop/");oe(Ke.data.crops)}catch(Ke){console.error("Error fetching crops:",Ke)}})()},[]),Ae.useEffect(()=>{(async()=>{try{const{data:Ke}=await Tr.get("/api/farm/all");de(Ke.farms||[])}catch(Ke){console.error("Error fetching farms:",Ke)}})()},[]);const st=async Qe=>{const Ke=Qe.target.value;if(J(Ke),Ke)try{const et=await Tr.get(`/api/farm/${Ke}`);if(et.data.status==="success"){const tt=et.data.data.geolocation;if(tt&&tt.includes(",")){const[bt,De]=tt.split(",");C(parseFloat(bt)),S(parseFloat(De))}}}catch(et){console.error("Error fetching farm properties:",et)}},ie=async(Qe,Ke)=>{const et=`https://api.open-meteo.com/v1/forecast?latitude=${Qe}&longitude=${Ke}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&past_days=${_e}`;try{const bt=await(await fetch(et)).json();if(bt.daily){const{temperature_2m_max:De,temperature_2m_min:Mt,time:ir}=bt.daily;n(ir);const Ar=18,Ze=10,Ue=De.map((rr,nr)=>({max:rr,min:Mt[nr],avg:(rr+Mt[nr])/2}));e(Ue);const hr=Ue.map(rr=>Math.max(0,Ar-rr.avg)),Dt=Ue.map(rr=>Math.max(0,rr.avg-Ar)),vt=Ue.map(rr=>Math.max(0,rr.avg-Ze));o(hr),u(Dt),m(vt);const Kt=vt.reduce((rr,nr)=>(rr.push((rr.length>0?rr[rr.length-1]:0)+nr),rr),[]);if(j(Kt),Y&&Ne[Y]){const rr=Ne[Y],nr=Kt.findIndex(Nr=>Nr>=rr);nr!==-1?(F(!0),V(ir[nr])):(F(!1),V(""))}}}catch(tt){console.error("Error fetching weather data:",tt)}},le=async()=>{try{const Ke=`https://api.mapbox.com/geocoding/v5/mapbox.places/${B},${g}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,tt=(await Pm.get(Ke)).data.features[0];if(tt&&(Ie(tt.text||""),tt.context&&tt.context.length>0)){const bt=tt.context.find(Mt=>Mt.id.includes("country")),De=tt.context.find(Mt=>Mt.id.includes("region"));ve(bt?bt.text:""),He(De?De.text:"")}}catch(Qe){console.error("Error fetching location data:",Qe)}};Ae.useEffect(()=>{g&&B&&(ie(g,B),le())},[g,B,_e]),Ae.useEffect(()=>{if(Y&&P.length>0){const Qe=Ne[Y],Ke=P.findIndex(et=>et>=Qe);Ke!==-1?(F(!0),V(r[Ke])):(F(!1),V(""))}},[Y,P,r]);const pe={labels:r,datasets:[{label:"HDD (Heating Degree Days)",data:s,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.4,fill:!0},{label:"CDD (Cooling Degree Days)",data:c,borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",tension:.4,fill:!0},{label:"GDD (Growing Degree Days)",data:i,borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",tension:.4,fill:!0}]},fe={responsive:!0,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{title:{display:!0,text:"Dates"}},y:{title:{display:!0,text:"Degree Days"}}}};return p.jsxs("div",{className:"max-w-4xl mx-auto mt-8",children:[p.jsxs("h1",{className:"text-2xl font-bold text-center mb-6",children:["HDD, CDD, GDD for the Past ",_e," Days"]}),p.jsxs("div",{className:"mb-4 flex items-center space-x-2",children:[p.jsxs("select",{value:we,onChange:st,className:"p-2 border rounded",children:[p.jsx("option",{value:"",children:"Select a farm"}),K.map(Qe=>p.jsxs("option",{value:Qe.id,children:[Qe.name," - ",Qe.subcounty]},Qe.id))]}),p.jsx("input",{type:"number",placeholder:"Latitude",value:g,onChange:Qe=>C(Qe.target.value),className:"p-2 border rounded"}),p.jsx("input",{type:"number",placeholder:"Longitude",value:B,onChange:Qe=>S(Qe.target.value),className:"p-2 border rounded"}),p.jsxs("select",{value:Y,onChange:Qe=>te(Qe.target.value),className:"p-2 border rounded",children:[p.jsx("option",{value:"",children:"Select a crop"}),se.map(Qe=>p.jsx("option",{value:Qe.name,children:Qe.name},Qe.id))]}),p.jsxs("select",{value:_e,onChange:Qe=>ze(Qe.target.value),className:"p-2 border rounded",children:[p.jsx("option",{value:"30",children:"1 Month"}),p.jsx("option",{value:"90",children:"3 Months"})]})]}),p.jsx("div",{className:"mb-6",children:p.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",Z,", ",be,", ",Fe]})}),p.jsx(I0,{data:pe,options:fe}),Y&&p.jsxs("div",{className:"mt-4 text-center",children:[p.jsxs("p",{className:"text-lg font-medium",children:["Cumulative GDD: ",P[P.length-1]||0]}),D?p.jsxs("p",{className:"text-lg font-medium",children:["Conditions are favorable for planting ",Y," starting from"," ",p.jsx("strong",{children:R}),"."]}):p.jsxs("p",{className:"text-lg font-medium",children:["Conditions are not yet favorable for planting ",Y,"."]})]})]})};/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Tz={modes:{point(t,e){return B5(t,e,{intersect:!0})},nearest(t,e,r){return ZCe(t,e,r)},x(t,e,r){return B5(t,e,{intersect:r.intersect,axis:"x"})},y(t,e,r){return B5(t,e,{intersect:r.intersect,axis:"y"})}}};function RF(t,e,r){return(Tz.modes[r.mode]||Tz.modes.nearest)(t,e,r)}function XCe(t,e,r){return r!=="x"&&r!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,r,!0)}function YCe(t,e,r){return r==="x"?{x:t.x,y:e.y}:r==="y"?{x:e.x,y:t.y}:e}function B5(t,e,r){return t.filter(n=>r.intersect?n.inRange(e.x,e.y):XCe(n,e,r.axis))}function ZCe(t,e,r){let n=Number.POSITIVE_INFINITY;return B5(t,e,r).reduce((s,o)=>{const c=o.getCenterPoint(),u=YCe(e,c,r.axis),i=p1(e,u);return i<n?(s=[o],n=i):i===n&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)}function j0(t,e,r){const n=Math.cos(r),s=Math.sin(r),o=e.x,c=e.y;return{x:o+n*(t.x-o)-s*(t.y-c),y:c+s*(t.x-o)+n*(t.y-c)}}const JCe=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Zg=.001,nS=(t,e,r)=>Math.min(r,Math.max(e,t)),qK=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function eSe(t,e,r){for(const n of Object.keys(t))t[n]=nS(t[n],e,r);return t}function tSe(t,e,r,n){return!t||!e||r<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(r+n,2)}function WK(t,{x:e,y:r,x2:n,y2:s},o,{borderWidth:c,hitTolerance:u}){const i=(c+u)/2,m=t.x>=e-i-Zg&&t.x<=n+i+Zg,g=t.y>=r-i-Zg&&t.y<=s+i+Zg;return o==="x"?m:(o==="y"||m)&&g}function KK(t,{rect:e,center:r},n,{rotation:s,borderWidth:o,hitTolerance:c}){const u=j0(t,r,Lc(-s));return WK(u,e,n,{borderWidth:o,hitTolerance:c})}function M0(t,e){const{centerX:r,centerY:n}=t.getProps(["centerX","centerY"],e);return{x:r,y:n}}function rSe(t,e,r,n=!0){const s=r.split(".");let o=0;for(const c of e.split(".")){const u=s[o++];if(parseInt(c,10)<parseInt(u,10))break;if(JCe(u,c)){if(n)throw new Error(`${t} v${r} is not supported. v${e} or newer is required.`);return!1}}return!0}const XK=t=>typeof t=="string"&&t.endsWith("%"),YK=t=>parseFloat(t)/100,ZK=t=>nS(YK(t),0,1),Yv=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),nSe={box:t=>Yv(t.centerX,t.centerY),doughnutLabel:t=>Yv(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Yv(t.centerX,t.centerY),line:t=>Yv(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Yv(t.centerX,t.centerY)};function UF(t,e){return e==="start"?0:e==="end"?t:XK(e)?ZK(e)*t:t/2}function eg(t,e,r=!0){return typeof e=="number"?e:XK(e)?(r?ZK(e):YK(e))*t:t}function iSe(t,e){const{x:r,width:n}=t,s=e.textAlign;return s==="center"?r+n/2:s==="end"||s==="right"?r+n:r}function JK(t,e,{borderWidth:r,position:n,xAdjust:s,yAdjust:o},c){const u=Us(c),i=e.width+(u?c.width:0)+r,m=e.height+(u?c.height:0)+r,g=zF(n),C=Lz(t.x,i,s,g.x),B=Lz(t.y,m,o,g.y);return{x:C,y:B,x2:C+i,y2:B+m,width:i,height:m,centerX:C+i/2,centerY:B+m/2}}function zF(t,e="center"){return Us(t)?{x:ys(t.x,e),y:ys(t.y,e)}:(t=ys(t,e),{x:t,y:t})}const eX=(t,e)=>t&&t.autoFit&&e<1;function tX(t,e){const r=t.font,n=da(r)?r:[r];return eX(t,e)?n.map(function(s){const o=rc(s);return o.size=Math.floor(s.size*e),o.lineHeight=s.lineHeight,rc(o)}):n.map(s=>rc(s))}function rX(t){return t&&(Kd(t.xValue)||Kd(t.yValue))}function Lz(t,e,r=0,n){return t-UF(e,n)+r}function U1(t,e,r){const n=r.init;if(n){if(n===!0)return iX(e,r)}else return;return sSe(t,e,r)}function nX(t,e,r){let n=!1;return e.forEach(s=>{Wd(t[s])?(n=!0,r[s]=t[s]):Kd(r[s])&&delete r[s]}),n}function iX(t,e){const r=e.type||"line";return nSe[r](t)}function sSe(t,e,r){const n=xa(r.init,[{chart:t,properties:e,options:r}]);if(n===!0)return iX(e,r);if(Us(n))return n}const iT=new Map,oSe=t=>isNaN(t)||t<=0,aSe=t=>t.reduce(function(e,r){return e+=r.string,e},"");function iS(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function sS(t,{x:e,y:r},n){n&&(t.translate(e,r),t.rotate(Lc(n)),t.translate(-e,-r))}function yA(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function z1(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function oS(t,e){const r=e.content;if(iS(r))return{width:eg(r.width,e.width),height:eg(r.height,e.height)};const n=tX(e),s=e.textStrokeWidth,o=da(r)?r:[r],c=o.join()+aSe(n)+s+(t._measureText?"-spriting":"");return iT.has(c)||iT.set(c,dSe(t,o,n,s)),iT.get(c)}function sX(t,e,r){const{x:n,y:s,width:o,height:c}=e;t.save(),z1(t,r);const u=yA(t,r);t.fillStyle=r.backgroundColor,t.beginPath(),A1(t,{x:n,y:s,w:o,h:c,radius:eSe(Mm(r.borderRadius),0,Math.min(o,c)/2)}),t.closePath(),t.fill(),u&&(t.shadowColor=r.borderShadowColor,t.stroke()),t.restore()}function oX(t,e,r,n){const s=r.content;if(iS(s)){t.save(),t.globalAlpha=pSe(r.opacity,s.style.opacity),t.drawImage(s,e.x,e.y,e.width,e.height),t.restore();return}const o=da(s)?s:[s],c=tX(r,n),u=r.color,i=da(u)?u:[u],m=iSe(e,r),g=e.y+r.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=r.textAlign,lSe(t,r)&&hSe(t,{x:m,y:g},o,c),fSe(t,{x:m,y:g},o,{fonts:c,colors:i}),t.restore()}function lSe(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function cSe(t,e,r,n){const{radius:s,options:o}=e,c=o.pointStyle,u=o.rotation;let i=(u||0)*mN;if(iS(c)){t.save(),t.translate(r,n),t.rotate(i),t.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),t.restore();return}oSe(s)||uSe(t,{x:r,y:n,radius:s,rotation:u,style:c,rad:i})}function uSe(t,{x:e,y:r,radius:n,rotation:s,style:o,rad:c}){let u,i,m,g;switch(t.beginPath(),o){default:t.arc(e,r,n,0,za),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(c)*n,r-Math.cos(c)*n),c+=s4,t.lineTo(e+Math.sin(c)*n,r-Math.cos(c)*n),c+=s4,t.lineTo(e+Math.sin(c)*n,r-Math.cos(c)*n),t.closePath();break;case"rectRounded":g=n*.516,m=n-g,u=Math.cos(c+Vh)*m,i=Math.sin(c+Vh)*m,t.arc(e-u,r-i,g,c-Co,c-ml),t.arc(e+i,r-u,g,c-ml,c),t.arc(e+u,r+i,g,c,c+ml),t.arc(e-i,r+u,g,c+ml,c+Co),t.closePath();break;case"rect":if(!s){m=Math.SQRT1_2*n,t.rect(e-m,r-m,2*m,2*m);break}c+=Vh;case"rectRot":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+i,r-u),t.lineTo(e+u,r+i),t.lineTo(e-i,r+u),t.closePath();break;case"crossRot":c+=Vh;case"cross":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i),t.moveTo(e+i,r-u),t.lineTo(e-i,r+u);break;case"star":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i),t.moveTo(e+i,r-u),t.lineTo(e-i,r+u),c+=Vh,u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i),t.moveTo(e+i,r-u),t.lineTo(e-i,r+u);break;case"line":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i);break;case"dash":t.moveTo(e,r),t.lineTo(e+Math.cos(c)*n,r+Math.sin(c)*n);break}t.fill()}function dSe(t,e,r,n){t.save();const s=e.length;let o=0,c=n;for(let u=0;u<s;u++){const i=r[Math.min(u,r.length-1)];t.font=i.string;const m=e[u];o=Math.max(o,t.measureText(m).width+n),c+=i.lineHeight}return t.restore(),{width:o,height:c}}function hSe(t,{x:e,y:r},n,s){t.beginPath();let o=0;n.forEach(function(c,u){const i=s[Math.min(u,s.length-1)],m=i.lineHeight;t.font=i.string,t.strokeText(c,e,r+m/2+o),o+=m}),t.stroke()}function fSe(t,{x:e,y:r},n,{fonts:s,colors:o}){let c=0;n.forEach(function(u,i){const m=o[Math.min(i,o.length-1)],g=s[Math.min(i,s.length-1)],C=g.lineHeight;t.beginPath(),t.font=g.string,t.fillStyle=m,t.fillText(u,e,r+C/2+c),c+=C,t.fill()})}function pSe(t,e){const r=Vm(t)?t:e;return Vm(r)?nS(r,0,1):1}const aX=["left","bottom","top","right"];function ASe(t,e){const{pointX:r,pointY:n,options:s}=e,o=s.callout,c=o&&o.display&&xSe(e,o);if(!c||bSe(e,o,c))return;if(t.save(),t.beginPath(),!yA(t,o))return t.restore();const{separatorStart:i,separatorEnd:m}=mSe(e,c),{sideStart:g,sideEnd:C}=ySe(e,c,i);(o.margin>0||s.borderWidth===0)&&(t.moveTo(i.x,i.y),t.lineTo(m.x,m.y)),t.moveTo(g.x,g.y),t.lineTo(C.x,C.y);const B=j0({x:r,y:n},e.getCenterPoint(),Lc(-e.rotation));t.lineTo(B.x,B.y),t.stroke(),t.restore()}function mSe(t,e){const{x:r,y:n,x2:s,y2:o}=t,c=gSe(t,e);let u,i;return e==="left"||e==="right"?(u={x:r+c,y:n},i={x:u.x,y:o}):(u={x:r,y:n+c},i={x:s,y:u.y}),{separatorStart:u,separatorEnd:i}}function gSe(t,e){const{width:r,height:n,options:s}=t,o=s.callout.margin+s.borderWidth/2;return e==="right"?r+o:e==="bottom"?n+o:-o}function ySe(t,e,r){const{y:n,width:s,height:o,options:c}=t,u=c.callout.start,i=vSe(e,c.callout);let m,g;return e==="left"||e==="right"?(m={x:r.x,y:n+eg(o,u)},g={x:m.x+i,y:m.y}):(m={x:r.x+eg(s,u),y:r.y},g={x:m.x,y:m.y+i}),{sideStart:m,sideEnd:g}}function vSe(t,e){const r=e.side;return t==="left"||t==="top"?-r:r}function xSe(t,e){const r=e.position;return aX.includes(r)?r:_Se(t,e)}function _Se(t,e){const{x:r,y:n,x2:s,y2:o,width:c,height:u,pointX:i,pointY:m,centerX:g,centerY:C,rotation:B}=t,S={x:g,y:C},P=e.start,j=eg(c,P),D=eg(u,P),F=[r,r+j,r+j,s],R=[n+D,o,n,o],V=[];for(let Y=0;Y<4;Y++){const te=j0({x:F[Y],y:R[Y]},S,Lc(B));V.push({position:aX[Y],distance:p1(te,{x:i,y:m})})}return V.sort((Y,te)=>Y.distance-te.distance)[0].position}function bSe(t,e,r){const{pointX:n,pointY:s}=t,o=e.margin;let c=n,u=s;return r==="left"?c+=o:r==="right"?c-=o:r==="top"?u+=o:r==="bottom"&&(u-=o),t.inRange(c,u)}const Iz={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function S1(t,e,r){return e=typeof e=="number"?e:t.parse(e),Cl(e)?t.getPixelForValue(e):r}function b0(t,e,r){const n=e[r];if(n||r==="scaleID")return n;const s=r.charAt(0),o=Object.values(t).filter(c=>c.axis&&c.axis===s);return o.length?o[0].id:s}function lX(t,e){if(t){const r=t.options.reverse,n=S1(t,e.min,r?e.end:e.start),s=S1(t,e.max,r?e.start:e.end);return{start:n,end:s}}}function cX(t,e){const{chartArea:r,scales:n}=t,s=n[b0(n,e,"xScaleID")],o=n[b0(n,e,"yScaleID")];let c=r.width/2,u=r.height/2;return s&&(c=S1(s,e.xValue,s.left+s.width/2)),o&&(u=S1(o,e.yValue,o.top+o.height/2)),{x:c,y:u}}function QF(t,e){const r=t.scales,n=r[b0(r,e,"xScaleID")],s=r[b0(r,e,"yScaleID")];if(!n&&!s)return{};let{left:o,right:c}=n||t.chartArea,{top:u,bottom:i}=s||t.chartArea;const m=Nz(n,{min:e.xMin,max:e.xMax,start:o,end:c});o=m.start,c=m.end;const g=Nz(s,{min:e.yMin,max:e.yMax,start:i,end:u});return u=g.start,i=g.end,{x:o,y:u,x2:c,y2:i,width:c-o,height:i-u,centerX:o+(c-o)/2,centerY:u+(i-u)/2}}function uX(t,e){if(!rX(e)){const r=QF(t,e);let n=e.radius;(!n||isNaN(n))&&(n=Math.min(r.width,r.height)/2,e.radius=n);const s=n*2,o=r.centerX+e.xAdjust,c=r.centerY+e.yAdjust;return{x:o-n,y:c-n,x2:o+n,y2:c+n,centerX:o,centerY:c,width:s,height:s,radius:n}}return CSe(t,e)}function wSe(t,e){const{scales:r,chartArea:n}=t,s=r[e.scaleID],o={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return s?SSe(s,o,e):BSe(r,o,e),o}function dX(t,e){const r=QF(t,e);return r.initProperties=U1(t,r,e),r.elements=[{type:"label",optionScope:"label",properties:LSe(t,r,e),initProperties:r.initProperties}],r}function CSe(t,e){const r=cX(t,e),n=e.radius*2;return{x:r.x-e.radius+e.xAdjust,y:r.y-e.radius+e.yAdjust,x2:r.x+e.radius+e.xAdjust,y2:r.y+e.radius+e.yAdjust,centerX:r.x+e.xAdjust,centerY:r.y+e.yAdjust,radius:e.radius,width:n,height:n}}function Nz(t,e){const r=lX(t,e)||e;return{start:Math.min(r.start,r.end),end:Math.max(r.start,r.end)}}function SSe(t,e,r){const n=S1(t,r.value,NaN),s=S1(t,r.endValue,n);t.isHorizontal()?(e.x=n,e.x2=s):(e.y=n,e.y2=s)}function BSe(t,e,r){for(const n of Object.keys(Iz)){const s=t[b0(t,r,n)];if(s){const{min:o,max:c,start:u,end:i,startProp:m,endProp:g}=Iz[n],C=lX(s,{min:r[o],max:r[c],start:s[u],end:s[i]});e[m]=C.start,e[g]=C.end}}}function ESe({properties:t,options:e},r,n,s){const{x:o,x2:c,width:u}=t;return hX({start:o,end:c,size:u,borderWidth:e.borderWidth},{position:n.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:r.width})}function TSe({properties:t,options:e},r,n,s){const{y:o,y2:c,height:u}=t;return hX({start:o,end:c,size:u,borderWidth:e.borderWidth},{position:n.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:r.height})}function hX(t,e){const{start:r,end:n,borderWidth:s}=t,{position:o,padding:{start:c,end:u},adjust:i}=e,m=n-s-r-c-u-e.size;return r+s/2+i+UF(m,o)}function LSe(t,e,r){const n=r.label;n.backgroundColor="transparent",n.callout.display=!1;const s=zF(n.position),o=Ic(n.padding),c=oS(t.ctx,n),u=ESe({properties:e,options:r},c,s,o),i=TSe({properties:e,options:r},c,s,o),m=c.width+o.width,g=c.height+o.height;return{x:u,y:i,x2:u+m,y2:i+g,width:m,height:g,centerX:u+m/2,centerY:i+g/2,rotation:n.rotation}}const qL=["enter","leave"],HF=qL.concat("click");function ISe(t,e,r){e.listened=nX(r,HF,e.listeners),e.moveListened=!1,qL.forEach(n=>{Wd(r[n])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(n=>{!e.listened&&Wd(n.click)&&(e.listened=!0),e.moveListened||qL.forEach(s=>{Wd(n[s])&&(e.listened=!0,e.moveListened=!0)})})}function NSe(t,e,r){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return FSe(t,e,r);case"click":return PSe(t,e,r)}}function FSe(t,e,r){if(!t.moveListened)return;let n;e.type==="mousemove"?n=RF(t.visibleElements,e,r.interaction):n=[];const s=t.hovered;t.hovered=n;const o={state:t,event:e};let c=Fz(o,"leave",s,n);return Fz(o,"enter",n,s)||c}function Fz({state:t,event:e},r,n,s){let o;for(const c of n)s.indexOf(c)<0&&(o=fX(c.options[r]||t.listeners[r],c,e)||o);return o}function PSe(t,e,r){const n=t.listeners,s=RF(t.visibleElements,e,r.interaction);let o;for(const c of s)o=fX(c.options.click||n.click,c,e)||o;return o}function fX(t,e,r){return xa(t,[e.$context,r])===!0}const z4=["afterDraw","beforeDraw"];function jSe(t,e,r){const n=e.visibleElements;e.hooked=nX(r,z4,e.hooks),e.hooked||n.forEach(s=>{e.hooked||z4.forEach(o=>{Wd(s.options[o])&&(e.hooked=!0)})})}function Pz(t,e,r){if(t.hooked){const n=e.options[r]||t.hooks[r];return xa(n,[e.$context])}}function MSe(t,e,r){const n=USe(t.scales,e,r);let s=jz(e,n,"min","suggestedMin");s=jz(e,n,"max","suggestedMax")||s,s&&Wd(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function kSe(t,e){for(const r of t)OSe(r,e)}function jz(t,e,r,n){if(Cl(e[r])&&!DSe(t.options,r,n)){const s=t[r]!==e[r];return t[r]=e[r],s}}function DSe(t,e,r){return Kd(t[e])||Kd(t[r])}function OSe(t,e){for(const r of["scaleID","xScaleID","yScaleID"]){const n=b0(e,t,r);n&&!e[n]&&RSe(t,r)&&console.warn(`No scale found with id '${n}' for annotation '${t.id}'`)}}function RSe(t,e){if(e==="scaleID")return!0;const r=e.charAt(0);for(const n of["Min","Max","Value"])if(Kd(t[r+n]))return!0;return!1}function USe(t,e,r){const n=e.axis,s=e.id,o=n+"ScaleID",c={min:ys(e.min,Number.NEGATIVE_INFINITY),max:ys(e.max,Number.POSITIVE_INFINITY)};for(const u of r)u.scaleID===s?Mz(u,e,["value","endValue"],c):b0(t,u,o)===s&&Mz(u,e,[n+"Min",n+"Max",n+"Value"],c);return c}function Mz(t,e,r,n){for(const s of r){const o=t[s];if(Kd(o)){const c=e.parse(o);n.min=Math.min(n.min,c),n.max=Math.max(n.max,c)}}}class Q1 extends rd{inRange(e,r,n,s){const{x:o,y:c}=j0({x:e,y:r},this.getCenterPoint(s),Lc(-this.options.rotation));return WK({x:o,y:c},this.getProps(["x","y","x2","y2"],s),n,this.options)}getCenterPoint(e){return M0(this,e)}draw(e){e.save(),sS(e,this.getCenterPoint(),this.options.rotation),sX(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return dX(e,r)}}Q1.id="boxAnnotation";Q1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Q1.defaultRoutes={borderColor:"color",backgroundColor:"color"};Q1.descriptors={label:{_fallback:!0}};class aS extends rd{inRange(e,r,n,s){return KK({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return M0(this,e)}draw(e){const r=this.options;!r.display||!r.content||($Se(e,this),e.save(),sS(e,this.getCenterPoint(),this.rotation),oX(e,this,r,this._fitRatio),e.restore())}resolveElementProperties(e,r){const n=zSe(e,r);if(!n)return{};const{controllerMeta:s,point:o,radius:c}=HSe(e,r,n);let u=oS(e.ctx,r);const i=VSe(u,c);eX(r,i)&&(u={width:u.width*i,height:u.height*i});const{position:m,xAdjust:g,yAdjust:C}=r,B=JK(o,u,{borderWidth:0,position:m,xAdjust:g,yAdjust:C});return{initProperties:U1(e,B,r),...B,...s,rotation:r.rotation,_fitRatio:i}}}aS.id="doughnutLabelAnnotation";aS.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};aS.defaultRoutes={};function zSe(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(r,n){const s=n.controller;return s instanceof iA&&QSe(t,e,n.data)&&(!r||s.innerRadius<r.controller.innerRadius)&&s.options.circumference>=90?n:r},void 0)}function QSe(t,e,r){if(!e.autoHide)return!0;for(let n=0;n<r.length;n++)if(!r[n].hidden&&t.getDataVisibility(n))return!0}function HSe({chartArea:t},e,r){const{left:n,top:s,right:o,bottom:c}=t,{innerRadius:u,offsetX:i,offsetY:m}=r.controller,g=(n+o)/2+i,C=(s+c)/2+m,B={left:Math.max(g-u,n),right:Math.min(g+u,o),top:Math.max(C-u,s),bottom:Math.min(C+u,c)},S={x:(B.left+B.right)/2,y:(B.top+B.bottom)/2},P=e.spacing+e.borderWidth/2,j=u-P,D=S.y>C,F=D?s+P:c-P,R=GSe(F,g,C,j);return{controllerMeta:{_centerX:g,_centerY:C,_radius:j,_counterclockwise:D,...R},point:S,radius:Math.min(u,Math.min(B.right-B.left,B.bottom-B.top)/2)}}function VSe({width:t,height:e},r){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return r*2/n}function GSe(t,e,r,n){const s=Math.pow(r-t,2),o=Math.pow(n,2),c=e*-2,u=Math.pow(e,2)+s-o,i=Math.pow(c,2)-4*u;if(i<=0)return{_startAngle:0,_endAngle:za};const m=(-c-Math.sqrt(i))/2,g=(-c+Math.sqrt(i))/2;return{_startAngle:o4({x:e,y:r},{x:m,y:t}).angle,_endAngle:o4({x:e,y:r},{x:g,y:t}).angle}}function $Se(t,e){const{_centerX:r,_centerY:n,_radius:s,_startAngle:o,_endAngle:c,_counterclockwise:u,options:i}=e;t.save();const m=yA(t,i);t.fillStyle=i.backgroundColor,t.beginPath(),t.arc(r,n,s,o,c,u),t.closePath(),t.fill(),m&&t.stroke(),t.restore()}class bb extends rd{inRange(e,r,n,s){return KK({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return M0(this,e)}draw(e){const r=this.options,n=!Kd(this._visible)||this._visible;!r.display||!r.content||!n||(e.save(),sS(e,this.getCenterPoint(),this.rotation),ASe(e,this),sX(e,this,r),oX(e,qSe(this),r),e.restore())}resolveElementProperties(e,r){let n;if(rX(r))n=cX(e,r);else{const{centerX:u,centerY:i}=QF(e,r);n={x:u,y:i}}const s=Ic(r.padding),o=oS(e.ctx,r),c=JK(n,o,r,s);return{initProperties:U1(e,c,r),pointX:n.x,pointY:n.y,...c,rotation:r.rotation}}}bb.id="labelAnnotation";bb.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};bb.defaultRoutes={borderColor:"color"};function qSe({x:t,y:e,width:r,height:n,options:s}){const o=s.borderWidth/2,c=Ic(s.padding);return{x:t+c.left+o,y:e+c.top+o,width:r-c.left-c.right-s.borderWidth,height:n-c.top-c.bottom-s.borderWidth}}const VF=(t,e,r)=>({x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}),WL=(t,e,r)=>VF(e,r,Math.abs((t-e.y)/(r.y-e.y))).x,kz=(t,e,r)=>VF(e,r,Math.abs((t-e.x)/(r.x-e.x))).y,gx=t=>t*t,WSe=(t,e,{x:r,y:n,x2:s,y2:o},c)=>c==="y"?{start:Math.min(n,o),end:Math.max(n,o),value:e}:{start:Math.min(r,s),end:Math.max(r,s),value:t},Dz=(t,e,r,n)=>(1-n)*(1-n)*t+2*(1-n)*n*e+n*n*r,KL=(t,e,r,n)=>({x:Dz(t.x,e.x,r.x,n),y:Dz(t.y,e.y,r.y,n)}),Oz=(t,e,r,n)=>2*(1-n)*(e-t)+2*n*(r-e),Rz=(t,e,r,n)=>-Math.atan2(Oz(t.x,e.x,r.x,n),Oz(t.y,e.y,r.y,n))+.5*Co;class wb extends rd{inRange(e,r,n,s){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y"){const c={mouseX:e,mouseY:r},{path:u,ctx:i}=this;if(u){yA(i,this.options),i.lineWidth+=this.options.hitTolerance;const{chart:g}=this.$context,C=e*g.currentDevicePixelRatio,B=r*g.currentDevicePixelRatio,S=i.isPointInStroke(u,C,B)||XL(this,c,s);return i.restore(),S}const m=gx(o);return ZSe(this,c,m,s)||XL(this,c,s)}return KSe(this,{mouseX:e,mouseY:r},n,{hitSize:o,useFinalPosition:s})}getCenterPoint(e){return M0(this,e)}draw(e){const{x:r,y:n,x2:s,y2:o,cp:c,options:u}=this;if(e.save(),!yA(e,u))return e.restore();z1(e,u);const i=Math.sqrt(Math.pow(s-r,2)+Math.pow(o-n,2));if(u.curve&&c)return oBe(e,this,c,i),e.restore();const{startOpts:m,endOpts:g,startAdjust:C,endAdjust:B}=pX(this),S=Math.atan2(o-n,s-r);e.translate(r,n),e.rotate(S),e.beginPath(),e.moveTo(0+C,0),e.lineTo(i-B,0),e.shadowColor=u.borderShadowColor,e.stroke(),YL(e,0,C,m),YL(e,i,-B,g),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){const n=wSe(e,r),{x:s,y:o,x2:c,y2:u}=n,i=XSe(n,e.chartArea),m=i?YSe({x:s,y:o},{x:c,y:u},e.chartArea):{x:s,y:o,x2:c,y2:u,width:Math.abs(c-s),height:Math.abs(u-o)};if(m.centerX=(c+s)/2,m.centerY=(u+o)/2,m.initProperties=U1(e,m,r),r.curve){const C={x:m.x,y:m.y},B={x:m.x2,y:m.y2};m.cp=sBe(m,r,p1(C,B))}const g=JSe(e,m,r.label);return g._visible=i,m.elements=[{type:"label",optionScope:"label",properties:g,initProperties:m.initProperties}],m}}wb.id="lineAnnotation";const Uz={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};wb.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Uz),fill:!1,length:12,start:Object.assign({},Uz),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},bb.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};wb.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};wb.defaultRoutes={borderColor:"color"};function KSe(t,{mouseX:e,mouseY:r},n,{hitSize:s,useFinalPosition:o}){const c=WSe(e,r,t.getProps(["x","y","x2","y2"],o),n);return qK(c,s)||XL(t,{mouseX:e,mouseY:r},o,n)}function XSe({x:t,y:e,x2:r,y2:n},{top:s,right:o,bottom:c,left:u}){return!(t<u&&r<u||t>o&&r>o||e<s&&n<s||e>c&&n>c)}function zz({x:t,y:e},r,{top:n,right:s,bottom:o,left:c}){return t<c&&(e=kz(c,{x:t,y:e},r),t=c),t>s&&(e=kz(s,{x:t,y:e},r),t=s),e<n&&(t=WL(n,{x:t,y:e},r),e=n),e>o&&(t=WL(o,{x:t,y:e},r),e=o),{x:t,y:e}}function YSe(t,e,r){const{x:n,y:s}=zz(t,e,r),{x:o,y:c}=zz(e,t,r);return{x:n,y:s,x2:o,y2:c,width:Math.abs(o-n),height:Math.abs(c-s)}}function ZSe(t,{mouseX:e,mouseY:r},n=Zg,s){const{x:o,y:c,x2:u,y2:i}=t.getProps(["x","y","x2","y2"],s),m=u-o,g=i-c,C=gx(m)+gx(g),B=C===0?-1:((e-o)*m+(r-c)*g)/C;let S,P;return B<0?(S=o,P=c):B>1?(S=u,P=i):(S=o+B*m,P=c+B*g),gx(e-S)+gx(r-P)<=n}function XL(t,{mouseX:e,mouseY:r},n,s){const o=t.label;return o.options.display&&o.inRange(e,r,s,n)}function JSe(t,e,r){const n=r.borderWidth,s=Ic(r.padding),o=oS(t.ctx,r),c=o.width+s.width+n,u=o.height+s.height+n;return tBe(e,r,{width:c,height:u,padding:s},t.chartArea)}function eBe(t){const{x:e,y:r,x2:n,y2:s}=t,o=Math.atan2(s-r,n-e);return o>Co/2?o-Co:o<Co/-2?o+Co:o}function tBe(t,e,r,n){const{width:s,height:o,padding:c}=r,{xAdjust:u,yAdjust:i}=e,m={x:t.x,y:t.y},g={x:t.x2,y:t.y2},C=e.rotation==="auto"?eBe(t):Lc(e.rotation),B=rBe(s,o,C),S=nBe(t,e,{labelSize:B,padding:c},n),P=t.cp?KL(m,t.cp,g,S):VF(m,g,S),j={size:B.w,min:n.left,max:n.right,padding:c.left},D={size:B.h,min:n.top,max:n.bottom,padding:c.top},F=Hz(P.x,j)+u,R=Hz(P.y,D)+i;return{x:F-s/2,y:R-o/2,x2:F+s/2,y2:R+o/2,centerX:F,centerY:R,pointX:P.x,pointY:P.y,width:s,height:o,rotation:pC(C)}}function rBe(t,e,r){const n=Math.cos(r),s=Math.sin(r);return{w:Math.abs(t*n)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*n)}}function nBe(t,e,r,n){let s;const o=iBe(t,n);return e.position==="start"?s=Qz({w:t.x2-t.x,h:t.y2-t.y},r,e,o):e.position==="end"?s=1-Qz({w:t.x-t.x2,h:t.y-t.y2},r,e,o):s=UF(1,e.position),s}function Qz(t,e,r,n){const{labelSize:s,padding:o}=e,c=t.w*n.dx,u=t.h*n.dy,i=c>0&&(s.w/2+o.left-n.x)/c,m=u>0&&(s.h/2+o.top-n.y)/u;return nS(Math.max(i,m),0,.25)}function iBe(t,e){const{x:r,x2:n,y:s,y2:o}=t,c=Math.min(s,o)-e.top,u=Math.min(r,n)-e.left,i=e.bottom-Math.max(s,o),m=e.right-Math.max(r,n);return{x:Math.min(u,m),y:Math.min(c,i),dx:u<=m?1:-1,dy:c<=i?1:-1}}function Hz(t,e){const{size:r,min:n,max:s,padding:o}=e,c=r/2;return r>s-n?(s+n)/2:(n>=t-o-c&&(t=n+o+c),s<=t+o+c&&(t=s-o-c),t)}function pX(t){const e=t.options,r=e.arrowHeads&&e.arrowHeads.start,n=e.arrowHeads&&e.arrowHeads.end;return{startOpts:r,endOpts:n,startAdjust:Vz(t,r),endAdjust:Vz(t,n)}}function Vz(t,e){if(!e||!e.display)return 0;const{length:r,width:n}=e,s=t.options.borderWidth/2,o={x:r,y:n+s};return Math.abs(WL(0,o,{x:0,y:s}))}function YL(t,e,r,n){if(!n||!n.display)return;const{length:s,width:o,fill:c,backgroundColor:u,borderColor:i}=n,m=Math.abs(e-s)+r;t.beginPath(),z1(t,n),yA(t,n),t.moveTo(m,-o),t.lineTo(e+r,0),t.lineTo(m,o),c===!0?(t.fillStyle=u||i,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=n.borderShadowColor,t.stroke()}function sBe(t,e,r){const{x:n,y:s,x2:o,y2:c,centerX:u,centerY:i}=t,m=Math.atan2(c-s,o-n),g=zF(e.controlPoint,0),C={x:u+eg(r,g.x,!1),y:i+eg(r,g.y,!1)};return j0(C,{x:u,y:i},m)}function Gz(t,{x:e,y:r},{angle:n,adjust:s},o){!o||!o.display||(t.save(),t.translate(e,r),t.rotate(n),YL(t,0,-s,o),t.restore())}function oBe(t,e,r,n){const{x:s,y:o,x2:c,y2:u,options:i}=e,{startOpts:m,endOpts:g,startAdjust:C,endAdjust:B}=pX(e),S={x:s,y:o},P={x:c,y:u},j=Rz(S,r,P,0),D=Rz(S,r,P,1)-Co,F=KL(S,r,P,C/n),R=KL(S,r,P,1-B/n),V=new Path2D;t.beginPath(),V.moveTo(F.x,F.y),V.quadraticCurveTo(r.x,r.y,R.x,R.y),t.shadowColor=i.borderShadowColor,t.stroke(V),e.path=V,e.ctx=t,Gz(t,F,{angle:j,adjust:C},m),Gz(t,R,{angle:D,adjust:B},g)}class Cb extends rd{inRange(e,r,n,s){const o=this.options.rotation,c=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y")return aBe({x:e,y:r},this.getProps(["width","height","centerX","centerY"],s),o,c);const{x:u,y:i,x2:m,y2:g}=this.getProps(["x","y","x2","y2"],s),C=n==="y"?{start:i,end:g}:{start:u,end:m},B=j0({x:e,y:r},this.getCenterPoint(s),Lc(-o));return B[n]>=C.start-c-Zg&&B[n]<=C.end+c+Zg}getCenterPoint(e){return M0(this,e)}draw(e){const{width:r,height:n,centerX:s,centerY:o,options:c}=this;e.save(),sS(e,this.getCenterPoint(),c.rotation),z1(e,this.options),e.beginPath(),e.fillStyle=c.backgroundColor;const u=yA(e,c);e.ellipse(s,o,n/2,r/2,Co/2,0,2*Co),e.fill(),u&&(e.shadowColor=c.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return dX(e,r)}}Cb.id="ellipseAnnotation";Cb.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Q1.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Cb.defaultRoutes={borderColor:"color",backgroundColor:"color"};Cb.descriptors={label:{_fallback:!0}};function aBe(t,e,r,n){const{width:s,height:o,centerX:c,centerY:u}=e,i=s/2,m=o/2;if(i<=0||m<=0)return!1;const g=Lc(r||0),C=Math.cos(g),B=Math.sin(g),S=Math.pow(C*(t.x-c)+B*(t.y-u),2),P=Math.pow(B*(t.x-c)-C*(t.y-u),2);return S/Math.pow(i+n,2)+P/Math.pow(m+n,2)<=1.0001}class lS extends rd{inRange(e,r,n,s){const{x:o,y:c,x2:u,y2:i,width:m}=this.getProps(["x","y","x2","y2","width"],s),g=(this.options.borderWidth+this.options.hitTolerance)/2;return n!=="x"&&n!=="y"?tSe({x:e,y:r},this.getCenterPoint(s),m/2,g):qK(n==="y"?{start:c,end:i,value:r}:{start:o,end:u,value:e},g)}getCenterPoint(e){return M0(this,e)}draw(e){const r=this.options,n=r.borderWidth;if(r.radius<.1)return;e.save(),e.fillStyle=r.backgroundColor,z1(e,r);const s=yA(e,r);cSe(e,this,this.centerX,this.centerY),s&&!iS(r.pointStyle)&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore(),r.borderWidth=n}resolveElementProperties(e,r){const n=uX(e,r);return n.initProperties=U1(e,n,r),n}}lS.id="pointAnnotation";lS.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};lS.defaultRoutes={borderColor:"color",backgroundColor:"color"};class cS extends rd{inRange(e,r,n,s){if(n!=="x"&&n!=="y")return this.options.radius>=.1&&this.elements.length>1&&cBe(this.elements,e,r,s);const o=j0({x:e,y:r},this.getCenterPoint(s),Lc(-this.options.rotation)),c=this.elements.map(m=>n==="y"?m.bY:m.bX),u=Math.min(...c),i=Math.max(...c);return o[n]>=u&&o[n]<=i}getCenterPoint(e){return M0(this,e)}draw(e){const{elements:r,options:n}=this;e.save(),e.beginPath(),e.fillStyle=n.backgroundColor,z1(e,n);const s=yA(e,n);let o=!0;for(const c of r)o?(e.moveTo(c.x,c.y),o=!1):e.lineTo(c.x,c.y);e.closePath(),e.fill(),s&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,r){const n=uX(e,r),{sides:s,rotation:o}=r,c=[],u=2*Co/s;let i=o*mN;for(let m=0;m<s;m++,i+=u){const g=lBe(n,r,i);g.initProperties=U1(e,n,r),c.push(g)}return n.elements=c,n}}cS.id="polygonAnnotation";cS.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};cS.defaultRoutes={borderColor:"color",backgroundColor:"color"};function lBe({centerX:t,centerY:e},{radius:r,borderWidth:n,hitTolerance:s},o){const c=(n+s)/2,u=Math.sin(o),i=Math.cos(o),m={x:t+u*r,y:e-i*r};return{type:"point",optionScope:"point",properties:{x:m.x,y:m.y,centerX:m.x,centerY:m.y,bX:t+u*(r+c),bY:e-i*(r+c)}}}function cBe(t,e,r,n){let s=!1,o=t[t.length-1].getProps(["bX","bY"],n);for(const c of t){const u=c.getProps(["bX","bY"],n);u.bY>r!=o.bY>r&&e<(o.bX-u.bX)*(r-u.bY)/(o.bY-u.bY)+u.bX&&(s=!s),o=u}return s}const Rm={box:Q1,doughnutLabel:aS,ellipse:Cb,label:bb,line:wb,point:lS,polygon:cS};Object.keys(Rm).forEach(t=>{gl.describe(`elements.${Rm[t].id}`,{_fallback:"plugins.annotation.common"})});const uBe={update:Object.assign},dBe=HF.concat(z4),$z=(t,e)=>Us(e)?JL(t,e):t,ZL=t=>t==="color"||t==="font";function GF(t="line"){return Rm[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function hBe(t,e,r,n){const s=pBe(t,r.animations,n),o=e.annotations,c=gBe(e.elements,o);for(let u=0;u<o.length;u++){const i=o[u],m=AX(c,u,i.type),g=i.setContext(mBe(t,m,c,i)),C=m.resolveElementProperties(t,g);C.skip=fBe(C),"elements"in C&&(ABe(m,C.elements,g,s),delete C.elements),Kd(m.x)||Object.assign(m,C),Object.assign(m,C.initProperties),C.options=mX(g),s.update(m,C)}}function fBe(t){return isNaN(t.x)||isNaN(t.y)}function pBe(t,e,r){return r==="reset"||r==="none"||r==="resize"?uBe:new BN(t,e)}function ABe(t,e,r,n){const s=t.elements||(t.elements=[]);s.length=e.length;for(let o=0;o<e.length;o++){const c=e[o],u=c.properties,i=AX(s,o,c.type,c.initProperties),m=r[c.optionScope].override(c);u.options=mX(m),n.update(i,u)}}function AX(t,e,r,n){const s=Rm[GF(r)];let o=t[e];return(!o||!(o instanceof s))&&(o=t[e]=new s,Object.assign(o,n)),o}function mX(t){const e=Rm[GF(t.type)],r={};r.id=t.id,r.type=t.type,r.drawTime=t.drawTime,Object.assign(r,JL(t,e.defaults),JL(t,e.defaultRoutes));for(const n of dBe)r[n]=t[n];return r}function JL(t,e){const r={};for(const n of Object.keys(e)){const s=e[n],o=t[n];ZL(n)&&da(o)?r[n]=o.map(c=>$z(c,s)):r[n]=$z(o,s)}return r}function mBe(t,e,r,n){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return r.filter(s=>s&&s.options)},id:n.id,type:"annotation"}))}function gBe(t,e){const r=e.length,n=t.length;if(n<r){const s=r-n;t.splice(n,0,...new Array(s))}else n>r&&t.splice(r,n-r);return t}var yBe="3.1.0";const em=new Map,qz=t=>t.type!=="doughnutLabel",vBe=HF.concat(z4);var xBe={id:"annotation",version:yBe,beforeRegister(){rSe("chart.js","4.0",ph.version)},afterRegister(){ph.register(Rm)},afterUnregister(){ph.unregister(Rm)},beforeInit(t){em.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,r){const n=em.get(t),s=n.annotations=[];let o=r.annotations;Us(o)?Object.keys(o).forEach(c=>{const u=o[c];Us(u)&&(u.id=c,s.push(u))}):da(o)&&s.push(...o),kSe(s.filter(qz),t.scales)},afterDataLimits(t,e){const r=em.get(t);MSe(t,e.scale,r.annotations.filter(qz).filter(n=>n.display&&n.adjustScaleRange))},afterUpdate(t,e,r){const n=em.get(t);ISe(t,n,r),hBe(t,n,r,e.mode),n.visibleElements=n.elements.filter(s=>!s.skip&&s.options.display),jSe(t,n,r)},beforeDatasetsDraw(t,e,r){Zv(t,"beforeDatasetsDraw",r.clip)},afterDatasetsDraw(t,e,r){Zv(t,"afterDatasetsDraw",r.clip)},beforeDatasetDraw(t,e,r){Zv(t,e.index,r.clip)},beforeDraw(t,e,r){Zv(t,"beforeDraw",r.clip)},afterDraw(t,e,r){Zv(t,"afterDraw",r.clip)},beforeEvent(t,e,r){const n=em.get(t);NSe(n,e.event,r)&&(e.changed=!0)},afterDestroy(t){em.delete(t)},getAnnotations(t){const e=em.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,r){return RF(t,e,r)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!vBe.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Rm[GF(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:ZL,_fallback:!0},_indexable:ZL}},additionalOptionScopes:[""]};function Zv(t,e,r){const{ctx:n,chartArea:s}=t,o=em.get(t);r&&nb(n,s);const c=_Be(o.visibleElements,e).sort((u,i)=>u.element.options.z-i.element.options.z);for(const u of c)bBe(n,s,o,u);r&&ib(n)}function _Be(t,e){const r=[];for(const n of t)if(n.options.drawTime===e&&r.push({element:n,main:!0}),n.elements&&n.elements.length)for(const s of n.elements)s.options.display&&s.options.drawTime===e&&r.push({element:s});return r}function bBe(t,e,r,n){const s=n.element;n.main?(Pz(r,s,"beforeDraw"),s.draw(t,e),Pz(r,s,"afterDraw")):s.draw(t,e)}ph.register(fA,pA,xp,Qd,N1,L0,T0,xBe);const wBe=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState([]),[c,u]=Ae.useState([]),[i,m]=Ae.useState([]),[g,C]=Ae.useState(0),[B,S]=Ae.useState(0),[P,j]=Ae.useState([]),[D,F]=Ae.useState([]),[R,V]=Ae.useState(""),[Y,te]=Ae.useState(""),[se,oe]=Ae.useState(""),[K,de]=Ae.useState(!1),[we,J]=Ae.useState(""),[Z,Ie]=Ae.useState(null),be=pe=>pe.toLowerCase().split(" ").map(fe=>fe[0].toUpperCase()+fe.slice(1)).join(" "),He={Cocoa:250,"Coffee Robusta":300,"Coffee Arabica":280,"Oil Palm":350,"Soya Bean":200,Rubber:300,"Hass Avocado":250,Macadamia:280,Maize:200,Sunflower:180,"Sweet Potato":200,Potato:200,Tomato:220,Millet:180,Sorghum:200,Groundnut:200,Ginger:280,Pineapple:300};Ae.useEffect(()=>{Tr.get("/api/crop/").then(pe=>j(pe.data.crops||[])).catch(console.error),Tr.get("/api/farm/all").then(pe=>F(pe.data.farms||[])).catch(console.error)},[]);const Fe=async pe=>{try{const{data:fe}=await Tr.get(`/api/farmdata/latest-planting-date/${pe}`);oe(fe.planting_date||""),V(fe.crop_name||""),de(!0)}catch{oe(""),de(!1)}},ve=async(pe,fe)=>{try{const Qe=`https://api.open-meteo.com/v1/forecast?latitude=${pe}&longitude=${fe}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&past_days=30`,et=await(await fetch(Qe)).json();et.daily&&et.daily.time&&e(et.daily.time)}catch(Qe){console.error("Erreur lors du fetch mto par dfaut:",Qe)}},_e=pe=>{const fe=pe.target.value;te(fe),de(!1),fe&&(Tr.get(`/api/farm/${fe}`).then(({data:Qe})=>{const Ke=Qe.data.geolocation;if(Ke&&Ke.includes(",")){const[et,tt]=Ke.split(","),bt=parseFloat(et),De=parseFloat(tt);C(bt),S(De),ve(bt,De)}}).catch(console.error),Fe(fe))},ze=pe=>{oe(pe.target.value),de(!1)},Ne=async()=>{if(!Y||!R||!se)return;const pe=P.find(fe=>fe.name.toLowerCase()===R.toLowerCase());if(pe)try{await Tr.get("/api/farmdata/save-planting-date",{params:{farm_id:Y,crop_id:pe.id,planting_date:se}}),de(!0),Fe(Y)}catch(fe){console.error(fe)}};Ae.useEffect(()=>{if(!g||!B||!se)return;(async()=>{try{const fe=new Date().toISOString().slice(0,10),Qe=new Date(se),Ke=new Date(fe);let et="";if(Qe<Ke){const Dt=new Date().toISOString().split("T")[0],vt=new Date(Qe).toISOString().split("T")[0];et=`https://archive-api.open-meteo.com/v1/archive?latitude=${g}&longitude=${B}&start_date=${vt}&end_date=${Dt}&daily=temperature_2m_max,temperature_2m_min&timezone=auto`,console.log("Archive URL:",et)}else{const Dt=new Date,vt=Dt.toISOString().split("T")[0],Kt=new Date;Kt.setDate(Dt.getDate()+15);const rr=Kt.toISOString().split("T")[0];et=`https://api.open-meteo.com/v1/forecast?latitude=${g}&longitude=${B}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&start_date=${vt}&end_date=${rr}`,console.log("Forecast URL:",et)}const bt=await(await fetch(et)).json();if(!bt.daily)return;const{temperature_2m_max:De,temperature_2m_min:Mt,time:ir}=bt.daily,Ar=De.map((Dt,vt)=>({max:Dt,min:Mt[vt],avg:(Dt+Mt[vt])/2})),Ze=18;e(ir),n(Ar.map(Dt=>Math.max(0,Ze-Dt.avg))),o(Ar.map(Dt=>Math.max(0,Dt.avg-Ze)));const Ue=Ar.map(Dt=>Math.max(0,Dt.avg-10));u(Ue);const hr=[];Ue.forEach((Dt,vt)=>hr.push((hr[vt-1]||0)+Dt)),m(hr)}catch(fe){console.error(fe)}})()},[g,B,se]),Ae.useEffect(()=>{if(!R||i.length===0)return;const pe=be(R),fe=He[pe];if(!fe){J(""),Ie(null);return}const Qe=i.findIndex(tt=>tt>=fe);if(Qe===-1){J(""),Ie(null);return}const Ke=t[Qe];let et=Ke;for(let tt=Qe;tt<t.length;tt++)i[tt]>=fe&&(et=t[tt]);J(Ke),Ie({start:Ke,end:et})},[R,i,t]);const st=Ae.useMemo(()=>{if(!se||!Z)return!1;const pe=new Date(se),fe=new Date(Z.start),Qe=new Date(Z.end);return pe>=fe&&pe<=Qe},[se,Z]),ie={labels:t.length>0?t:[""],datasets:[{label:"HDD",data:r.length>0?r:[0],borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"CDD",data:s.length>0?s:[0],borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"GDD",data:c.length>0?c:[0],borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",borderWidth:2,tension:.4,fill:!0}]},le={responsive:!0,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1},annotation:{annotations:se?{plantingLine:{type:"line",scaleID:"x",value:se,borderColor:"red",borderWidth:2,label:{content:"Planting Date",enabled:!0,position:"start",backgroundColor:"rgba(255, 0, 0, 0.1)",color:"red"}}}:{}}},scales:{x:{title:{display:!0,text:"Dates"},ticks:{maxRotation:45,minRotation:30}},y:{title:{display:!0,text:"Degree Days"}}}};return p.jsxs("div",{className:"max-w-5xl mx-auto mt-10 p-4",children:[p.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Planting Date"}),p.jsxs("div",{className:"mb-6 flex flex-wrap gap-2 items-center",children:[p.jsxs("select",{value:Y,onChange:_e,className:"p-2 border rounded",children:[p.jsx("option",{value:"",children:"Select a farm"}),D.map(pe=>p.jsxs("option",{value:pe.id,children:[pe.name,"  ",pe.subcounty]},pe.id))]}),p.jsxs("select",{value:R,onChange:pe=>{V(pe.target.value),de(!1)},className:"p-2 border rounded",children:[p.jsx("option",{value:"",children:"Select a crop"}),P.map(pe=>p.jsx("option",{value:pe.name,children:pe.name},pe.id))]}),p.jsx("input",{type:"date",value:se,onChange:ze,disabled:K,className:"p-2 border rounded"}),p.jsx("button",{onClick:Ne,disabled:!se||!R||K,className:`ml-2 px-6 py-2 rounded-lg font-medium text-white shadow-sm transition-colors
            ${K?"bg-green-500 opacity-75 cursor-default":"bg-indigo-500 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300"}`,children:K?"Saved ":"Save Date"})]}),se&&R&&p.jsx("p",{className:"mb-4 text-center text-lg font-medium text-gray-600",children:st?`${se} is ideal for planting ${R}.`:`${se} is not within the ideal planting window for ${R}.`}),we&&p.jsxs("p",{className:"mb-6 text-center text-lg font-medium text-gray-600",children:["Recommended planting date for ",p.jsx("span",{className:"underline decoration-gray-400",children:R}),": ",p.jsx("span",{className:"font-bold",children:we})]}),Z&&p.jsxs(p.Fragment,{children:[p.jsxs("p",{className:"mb-2 text-center text-gray-600",children:["You can plant ",R," between these dates:"]}),p.jsxs("div",{className:"mb-8 flex justify-center space-x-4",children:[p.jsx("div",{className:"px-4 py-2 bg-amber-50 border border-amber-200 rounded-full text-amber-700 font-medium",children:Z.start}),p.jsx("div",{className:"text-2xl font-bold text-gray-400",children:""}),p.jsx("div",{className:"px-4 py-2 bg-amber-50 border border-amber-200 rounded-full text-amber-700 font-medium",children:Z.end})]})]}),p.jsx(I0,{data:ie,options:le})]})};ph.register(fA,pA,xp,Qd,N1,L0,T0);const CBe=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState([]),[c,u]=Ae.useState([]),[i,m]=Ae.useState([]),[g,C]=Ae.useState(0),[B,S]=Ae.useState(0),[P,j]=Ae.useState([]),[D,F]=Ae.useState(!1),[R,V]=Ae.useState(""),[Y,te]=Ae.useState(""),[se,oe]=Ae.useState([]),[K,de]=Ae.useState([]),[we,J]=Ae.useState(""),[Z,Ie]=Ae.useState(""),[be,He]=Ae.useState(""),[Fe,ve]=Ae.useState(""),_e={Cocoa:250,"Coffee Robusta":300,"Coffee Arabica":280,"Oil Palm":350,"Soya Bean":200,Rubber:300,"Hass Avocado":250,Macadamia:280,Maize:200,Sunflower:180,"Sweet Potato":200,Potato:200,Tomato:220,Millet:180,Sorghum:200,Groundnut:200,Ginger:280,Pineapple:300};Ae.useEffect(()=>{(async()=>{try{const fe=await Tr.get("/api/crop/");oe(fe.data.crops)}catch(fe){console.error("Error fetching crops:",fe)}})()},[]),Ae.useEffect(()=>{(async()=>{try{const{data:fe}=await Tr.get("/api/farm/all");de(fe.farms||[])}catch(fe){console.error("Error fetching farms:",fe)}})()},[]);const ze=async pe=>{const fe=pe.target.value;if(J(fe),fe)try{const Qe=await Tr.get(`/api/farm/${fe}`);if(Qe.data.status==="success"){const Ke=Qe.data.data.geolocation;if(Ke&&Ke.includes(",")){const[et,tt]=Ke.split(",");C(parseFloat(et)),S(parseFloat(tt))}}}catch(Qe){console.error("Error fetching farm properties:",Qe)}},Ne=async(pe,fe)=>{const Qe=`https://api.open-meteo.com/v1/forecast?latitude=${pe}&longitude=${fe}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&past_days=90`;try{const et=await(await fetch(Qe)).json();if(et.daily){const{temperature_2m_max:tt,temperature_2m_min:bt,time:De}=et.daily;n(De);const Mt=18,ir=10,Ar=tt.map((vt,Kt)=>({max:vt,min:bt[Kt],avg:(vt+bt[Kt])/2}));e(Ar);const Ze=Ar.map(vt=>Math.max(0,Mt-vt.avg)),Ue=Ar.map(vt=>Math.max(0,vt.avg-Mt)),hr=Ar.map(vt=>Math.max(0,vt.avg-ir));o(Ze),u(Ue),m(hr);const Dt=hr.reduce((vt,Kt)=>(vt.push((vt.length>0?vt[vt.length-1]:0)+Kt),vt),[]);if(j(Dt),Y&&_e[Y]){const vt=_e[Y],Kt=Dt.findIndex(rr=>rr>=vt);Kt!==-1?(F(!0),V(De[Kt])):(F(!1),V(""))}}}catch(Ke){console.error("Error fetching weather data:",Ke)}},st=async()=>{try{const fe=`https://api.mapbox.com/geocoding/v5/mapbox.places/${B},${g}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,Ke=(await Pm.get(fe)).data.features[0];if(Ke&&(Ie(Ke.text||""),Ke.context&&Ke.context.length>0)){const et=Ke.context.find(bt=>bt.id.includes("country")),tt=Ke.context.find(bt=>bt.id.includes("region"));ve(et?et.text:""),He(tt?tt.text:"")}}catch(pe){console.error("Error fetching location data:",pe)}};Ae.useEffect(()=>{g&&B&&(Ne(g,B),st())},[g,B]),Ae.useEffect(()=>{if(Y&&P.length>0){const pe=_e[Y],fe=P.findIndex(Qe=>Qe>=pe);fe!==-1?(F(!0),V(r[fe])):(F(!1),V(""))}},[Y,P,r]);const ie={labels:r,datasets:[{label:"HDD (Heating Degree Days)",data:s,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"CDD (Cooling Degree Days)",data:c,borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"GDD (Growing Degree Days)",data:i,borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",borderWidth:2,tension:.4,fill:!0}]},le={responsive:!0,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{title:{display:!0,text:"Dates"}},y:{title:{display:!0,text:"Degree Days"}}}};return p.jsxs("div",{className:"max-w-4xl mx-auto mt-8",children:[p.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"HDD, CDD, GDD for the Past 90 Days"}),p.jsxs("div",{className:"mb-4 flex flex-wrap items-center",children:[p.jsxs("select",{value:we,onChange:ze,className:"p-2 border rounded mr-2",children:[p.jsx("option",{value:"",children:"Select a farm"}),K.map(pe=>p.jsxs("option",{value:pe.id,children:[pe.name," - ",pe.subcounty]},pe.id))]}),p.jsx("input",{type:"number",placeholder:"Latitude",value:g,onChange:pe=>C(pe.target.value),className:"p-2 border rounded mr-2"}),p.jsx("input",{type:"number",placeholder:"Longitude",value:B,onChange:pe=>S(pe.target.value),className:"p-2 border rounded"}),p.jsxs("select",{value:Y,onChange:pe=>te(pe.target.value),className:"p-2 border rounded ml-2",children:[p.jsx("option",{value:"",children:"Select a crop"}),se.map(pe=>p.jsx("option",{value:pe.name,children:pe.name},pe.id))]})]}),p.jsx("div",{className:"mb-6",children:p.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",Z,", ",be,", ",Fe]})}),p.jsx(I0,{data:ie,options:le}),Y&&p.jsxs("div",{className:"mt-4 text-center",children:[p.jsxs("p",{className:"text-lg font-medium",children:["Cumulative GDD: ",P[P.length-1]||0]}),D?p.jsxs("p",{className:"text-lg font-medium",children:["Conditions are favorable for planting ",Y," starting from"," ",p.jsx("strong",{children:R}),"."]}):p.jsxs("p",{className:"text-lg font-medium",children:["Conditions are not yet favorable for planting ",Y,"."]})]})]})},SBe=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState(!0),[c,u]=Ae.useState(""),[i,m]=Ae.useState(""),[g,C]=Ae.useState([]),[B,S]=Ae.useState(0),P=10,j=31,D=[{name:"Fall Armyworm (Spodoptera frugiperda)",gddThreshold:150,confirmed:!1},{name:"Corn Earworm (Helicoverpa zea)",gddThreshold:220,confirmed:!0},{name:"Black Cutworm (Agrotis ipsilon)",gddThreshold:300,confirmed:!0},{name:"Peach Twig Borer (Anarsia lineatella)",gddThreshold:50,confirmed:!0}],F=async(se,oe)=>{var de;const K=`https://api.open-meteo.com/v1/forecast?latitude=${se}&longitude=${oe}&daily=temperature_2m_max,temperature_2m_min&timezone=auto`;try{const J=await(await fetch(K)).json();if((de=J.daily)!=null&&de.temperature_2m_max&&J.daily.temperature_2m_min&&J.daily.time){const Z=J.daily.temperature_2m_max.map((Ie,be)=>({max:Ie,min:J.daily.temperature_2m_min[be]}));n(J.daily.time),e(Z)}}catch(we){console.error("Error fetching weather data:",we)}finally{o(!1)}};Ae.useEffect(()=>{c&&i&&F(c,i)},[c,i]);const R=()=>t.map(se=>{const oe=se.min<P?P:se.min,K=se.max>j?j:se.max,we=(oe+K)/2-P;return we>0?we:0});Ae.useEffect(()=>{if(t.length>0){const oe=R().reduce((de,we)=>de+we,0);S(oe);const K=D.filter(de=>oe>=de.gddThreshold).map(de=>`${de.name} has reached the threshold of ${de.gddThreshold} GDD.`);C(K)}},[t]);const V=R(),Y={labels:r,datasets:[{label:"Growing Degree Days (GDD)",data:V,backgroundColor:"rgba(255, 179, 71, 0.5)",borderColor:"rgba(255, 179, 71, 1)",borderWidth:2,tension:.3}]},te={responsive:!0,plugins:{legend:{position:"bottom"}},scales:{x:{ticks:{color:"#444"}},y:{ticks:{color:"#444"}}}};return p.jsxs("div",{className:"max-w-6xl mx-auto mt-10 px-4",children:[p.jsx("h3",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Heating, Cooling, and Growing Degree Days"}),p.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Enter your farm location to monitor pest activity using weather-based tracking."}),p.jsxs("div",{className:"bg-white border border-green-100 p-6 rounded-2xl shadow-lg mb-10",children:[p.jsx("h4",{className:"text-xl font-semibold mb-4 text-green-700",children:" Farm Location"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"mb-1 font-medium text-gray-700",children:"Latitude"}),p.jsx("input",{type:"number",value:c,onChange:se=>u(se.target.value),placeholder:"e.g., -1.9403",className:"p-3 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("label",{className:"mb-1 font-medium text-gray-700",children:"Longitude"}),p.jsx("input",{type:"number",value:i,onChange:se=>m(se.target.value),placeholder:"e.g., 29.8739",className:"p-3 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]})]}),g.length>0&&p.jsxs("div",{className:"bg-white-50 border border-yellow-300 text-yellow-800 p-5 rounded-xl shadow mb-8",children:[p.jsx("h4",{className:"text-lg font-bold mb-3",children:" Pest Alert(s)"}),D.map((se,oe)=>B>=se.gddThreshold?p.jsx("div",{className:"flex items-center justify-between bg-white border-l-4 border-amber-400 rounded-xl px-5 py-4 mb-4 shadow-md transition hover:shadow-lg",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"text-2xl",children:""}),p.jsxs("div",{children:[p.jsx("p",{className:"text-base font-semibold text-gray-800",children:se.name}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Threshold reached at ",p.jsxs("span",{className:"font-medium text-amber-600",children:[se.gddThreshold," GDD"]})]})]})]})},oe):null)]}),p.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-6",children:[p.jsxs("h4",{className:"text-lg font-semibold text-gray-700 mb-4",children:[" Total GDD Accumulated: ",B.toFixed(2)]}),s?p.jsx("p",{className:"text-gray-500",children:"Loading data..."}):p.jsx(I_,{data:Y,options:te})]})]})},BBe=({ownerType:t=null,showControls:e=!0,height:r="100%",styleType:n="dark"})=>{var te;const s=Ae.useRef(),o=Ae.useRef(),c=vu();Ae.useRef(new Li.Popup({closeButton:!1,closeOnClick:!1}));const u=t||((te=c.state)==null?void 0:te.owner_type)||"farmer",[i,m]=Ae.useState(null),[g,C]=Ae.useState({center:[-32.5825,.3476],zoom:5}),[B,S]=Ae.useState([]),[P,j]=Ae.useState(0),[D,F]=Ae.useState(0),R=()=>{switch(n){case"dark":return"mapbox://styles/mapbox/dark-v11";case"satellite":return"mapbox://styles/mapbox/satellite-v9";case"light":return"mapbox://styles/mapbox/light-v11";default:return"mapbox://styles/mapbox/dark-v11"}};Ae.useEffect(()=>(Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",o.current||(o.current=new Li.Map({container:s.current,style:R(),center:g.center,zoom:g.zoom}),o.current.on("move",()=>{const se=o.current.getCenter(),oe=o.current.getZoom();C({center:[se.lng,se.lat],zoom:oe.toFixed(2)})})),()=>{o.current&&(o.current.remove(),o.current=null)}),[n]),Ae.useEffect(()=>{(async()=>{try{const K=(await Tr.get(`/api/points/getallbyownertype/${u}`)).data;if(!K.polygons||K.polygons.length===0){e&&m({type:"info",message:"No polygons found."});return}m(null),S(K.polygons),F(K.polygons.length)}catch(oe){console.error("Error fetching polygons:",oe),e&&m({type:"error",message:"Error loading polygons."})}})()},[u,e]);const V=(se,oe)=>{const K=[];for(let de=0;de<6;de++){const we=de*60*Math.PI/180,J=se[0]+oe*Math.cos(we),Z=se[1]+oe*Math.sin(we);K.push([J,Z])}return K.push(K[0]),K},Y=se=>{const oe=["rgba(99,102,241,0.7)","rgba(168,85,247,0.7)","rgba(248,113,113,0.7)","rgba(251,191,36,0.7)"];return oe[se%oe.length]};return Ae.useEffect(()=>{const se=()=>{if(!o.current||B.length===0)return;const oe=B.map((J,Z)=>{const Ie=J.points.map(Ne=>[Ne.longitude,Ne.latitude]),be={type:"Feature",geometry:{type:"Polygon",coordinates:[Ie]}},He=kN(be),Fe=rf(be),ve=Math.sqrt(Fe)*1e-5,_e=V(He.geometry.coordinates,Math.max(ve,.001)),ze=document.createElement("div");return ze.className="hexagon-marker",ze.style.cssText=`
          width: 12px;
          height: 12px;
          background-color: ${Y(Z)};
          border-radius: 50%;
          box-shadow: 0 0 20px ${Y(Z)}, 0 0 40px ${Y(Z)};
          animation: pulse 2s infinite;
        `,new Li.Marker(ze).setLngLat(He.geometry.coordinates).addTo(o.current),{type:"Feature",geometry:{type:"Polygon",coordinates:[_e]},properties:{id:Z,owner_type:J.owner_type,owner_id:J.owner_id,area:Math.round(Fe*100)/100,color:Y(Z),originalCoords:Ie}}}),K=oe.reduce((J,Z)=>J+Z.properties.area,0);j(K);const de={type:"FeatureCollection",features:oe};o.current.getSource("hexagonPolygons")&&(o.current.removeLayer("hexagon-fill"),o.current.removeLayer("hexagon-outline"),o.current.removeLayer("hexagon-glow"),o.current.removeSource("hexagonPolygons")),o.current.addSource("hexagonPolygons",{type:"geojson",data:de}),o.current.addLayer({id:"hexagon-glow",type:"fill",source:"hexagonPolygons",paint:{"fill-color":["get","color"],"fill-opacity":.1}}),o.current.addLayer({id:"hexagon-fill",type:"fill",source:"hexagonPolygons",paint:{"fill-color":["get","color"],"fill-opacity":.3}}),o.current.addLayer({id:"hexagon-outline",type:"line",source:"hexagonPolygons",paint:{"line-color":["get","color"],"line-width":2,"line-opacity":.8}}),o.current.on("click","hexagon-fill",J=>{const{properties:Z}=J.features[0],Ie=e?`<div style="background: #1a1a1a; color: white; padding: 15px; border-radius: 8px; border: 1px solid ${Z.color};">
               <h3 style="color: ${Z.color}; margin: 0 0 10px 0;">Owner Type: ${Z.owner_type}</h3>
               <p style="margin: 5px 0; color: #ccc;
               ">Owner ID: ${Z.owner_id}</p>
               <p style="margin: 5px 0; color: #ccc;">Feature ID: ${Z.id}</p>
               <p style="margin: 5px 0; color: #ccc;">Area: ${Z.area} m</p>
               <button class="delete-btn" data-owner-id="${Z.owner_id}" 
                       style="margin-top: 10px; padding: 8px 16px; background: linear-gradient(45deg, #ff0040, #ff4081); 
                              color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">
                 Delete Polygon
               </button>
             </div>`:`<div style="background: #1a1a1a; color: white; padding: 15px; border-radius: 8px; border: 1px solid ${Z.color};">
               <h3 style="color: ${Z.color}; margin: 0 0 10px 0;">Owner Type: ${Z.owner_type}</h3>
               <p style="margin: 5px 0; color: #ccc;">Owner ID: ${Z.owner_id}</p>
               <p style="margin: 5px 0; color: #ccc;">Area: ${Z.area} m</p>
             </div>`;new Li.Popup({closeButton:!0,closeOnClick:!0,className:"dark-popup"}).setLngLat(J.lngLat).setHTML(Ie).addTo(o.current)}),o.current.on("mouseenter","hexagon-fill",()=>{o.current.getCanvas().style.cursor="pointer"}),o.current.on("mouseleave","hexagon-fill",()=>{o.current.getCanvas().style.cursor=""});const we=new Li.LngLatBounds;oe.forEach(J=>{J.geometry.coordinates[0].forEach(Z=>we.extend(Z))}),o.current.fitBounds(we,{padding:50})};o.current&&B.length>0&&(o.current.isStyleLoaded()?se():o.current.on("load",se))},[B,e]),Ae.useEffect(()=>{var oe;if(!e)return;const se=async K=>{if(K.target.classList.contains("delete-btn")){const de=K.target.getAttribute("data-owner-id");if(!window.confirm(`Are you sure you want to delete the polygon with owner ID: ${de}?`))return;try{if((await Tr.delete(`/api/points/owner/${de}`)).status===204){m({type:"info",message:`Polygon with owner ID: ${de} deleted successfully.`});const Ie=(await Tr.get(`/api/points/getallbyownertype/${u}`)).data;S(Ie.polygons),F(Ie.polygons.length)}else m({type:"error",message:`Failed to delete polygon with owner ID: ${de}.`})}catch(J){console.error("Error deleting polygon:",J),m({type:"error",message:`Error deleting polygon with owner ID: ${de}.`})}}};return(oe=s.current)==null||oe.addEventListener("click",se),()=>{var K;(K=s.current)==null||K.removeEventListener("click",se)}},[B,u,e]),p.jsxs("div",{className:"relative",style:{height:r},children:[p.jsx("style",{jsx:!0,children:`
        .mapboxgl-popup-content {
          background: transparent !important;
          padding: 0 !important;
          box-shadow: none !important;
        }
        
        .mapboxgl-popup-tip {
          display: none !important;
        }
      `}),i&&e&&p.jsx("div",{className:`absolute top-4 right-2 z-10 px-4 py-2 rounded-md shadow-lg transition-shadow duration-300 focus:outline-none ${i.type==="info"?"bg-cyan-500 text-black":"bg-red-500 text-white"}`,style:{boxShadow:i.type==="info"?"0 0 20px rgba(0, 255, 209, 0.5)":"0 0 20px rgba(255, 0, 0, 0.5)"},children:i.message}),p.jsx("div",{ref:s,style:{width:"100%",height:"100%"}}),e&&p.jsx("div",{className:"absolute bottom-4 left-4 rounded-lg p-4 shadow-lg",style:{background:"rgba(26, 26, 26, 0.9)",border:"1px solid #00FFD1",boxShadow:"0 0 20px rgba(0, 255, 209, 0.3)"},children:p.jsxs("div",{className:"text-sm text-white",children:[p.jsxs("p",{children:[p.jsx("strong",{style:{color:"#00FFD1"},children:"Polygons:"})," ",D]}),p.jsxs("p",{children:[p.jsx("strong",{style:{color:"#00FFD1"},children:"Total Area:"})," ",P.toFixed(2)," m"]})]})})]})};ph.register(fA,pA,xp,Qd,Dx,jy,My,L0,T0);const Wz=["rgba(99,102,241,0.7)","rgba(168,85,247,0.7)","rgba(248,113,113,0.7)","rgba(34,197,94,0.7)","rgba(251,191,36,0.7)","rgba(59,130,246,0.7)","rgba(236,72,153,0.7)"];function EBe(){const[t,e]=Ae.useState({usersByType:{},entities:{},loading:!0}),[r,n]=Ae.useState({totalArea:0,polygonCount:0,areaByOwnerType:{},loading:!0}),[s,o]=Ae.useState({totalFarmers:0,loading:!0}),[c,u]=Ae.useState({totalForests:0,loading:!0}),[i,m]=Ae.useState({totalTrees:0,avgHeight:0,avgDiameter:0,treesByForest:[],loading:!0}),[g,C]=Ae.useState({loading:!0,data:{}}),[B,S]=Ae.useState([]),[P,j]=Ae.useState([]),[D,F]=Ae.useState([]),[R,V]=Ae.useState({total:0,compliant:0,loading:!0});Ae.useEffect(()=>{(async()=>{try{const ve=await Tr.get("/api/farm/?page=1");let _e=0;if(ve.data.total)_e=ve.data.total;else if(ve.data.total_pages&&ve.data.farms){const ze=ve.data.total_pages;if(ze===1)_e=ve.data.farms.length;else{const Ne=[];for(let ie=1;ie<=ze;ie++)Ne.push(Tr.get(`/api/farm/?page=${ie}`));_e=(await Promise.all(Ne)).reduce((ie,le)=>ie+(le.data.farms?le.data.farms.length:0),0)}}else _e=ve.data.farms?ve.data.farms.length:0;o({totalFarmers:_e,loading:!1})}catch(ve){console.error("Error fetching farmer stats:",ve),o({totalFarmers:0,loading:!1})}})()},[]),Ae.useEffect(()=>{(async()=>{try{const ve=await Tr.get("/api/forest/?page=1");let _e=0;if(ve.data.total)_e=ve.data.total;else if(ve.data.total_pages&&ve.data.forests){const ze=ve.data.total_pages;if(ze===1)_e=ve.data.forests.length;else{const Ne=[];for(let ie=1;ie<=ze;ie++)Ne.push(Tr.get(`/api/forest/?page=${ie}`));_e=(await Promise.all(Ne)).reduce((ie,le)=>ie+(le.data.forests?le.data.forests.length:0),0)}}else _e=ve.data.forests?ve.data.forests.length:0;u({totalForests:_e,loading:!1})}catch(ve){console.error("Error fetching forest stats:",ve),u({totalForests:0,loading:!1})}})()},[]),Ae.useEffect(()=>{(async()=>{try{const ve=await Tr.get("/api/tree/stats");m({totalTrees:ve.data.total_trees||0,avgHeight:ve.data.avg_height||0,avgDiameter:ve.data.avg_diameter||0,treesByForest:ve.data.trees_by_forest||[],loading:!1})}catch(ve){console.error("Error fetching tree stats:",ve),m({totalTrees:0,avgHeight:0,avgDiameter:0,treesByForest:[],loading:!1})}})()},[]),Ae.useEffect(()=>{(async()=>{try{const ve=await Tr.get("/api/forestreport/stats/compliance");V({total:ve.data.stats.total||0,compliant:ve.data.stats.compliant_100||0,loading:!1})}catch(ve){console.error("Error fetching forest reports:",ve),V({total:0,compliant:0,loading:!1})}})()},[]);const Y=async()=>{try{const Fe=await Tr.get("/api/store/");F(Fe.data.stores)}catch(Fe){console.error("Error fetching stores:",Fe)}};if(Ae.useEffect(()=>{Y()},[]),Ae.useEffect(()=>{if(!s.loading&&!c.loading){const Fe={Admin:5,Farmer:s.totalFarmers,Forester:c.totalForests};C({loading:!1,data:Fe})}},[s.loading,c.loading,s.totalFarmers,c.totalForests]),Ae.useEffect(()=>{(async()=>{try{const[ve,_e]=await Promise.all([Tr.get("/api/dashboard/users/by-type"),Tr.get("/api/dashboard/entities/count")]);e({usersByType:ve.data,entities:_e.data,loading:!1})}catch(ve){console.error(ve)}})()},[]),Ae.useEffect(()=>{(async()=>{try{const[ve,_e]=await Promise.all([Tr.get("/api/crop/"),Tr.get("/api/grade/")]);S(ve.data.crops),j(_e.data.grades)}catch(ve){console.error("Error fetching crops or grades:",ve)}})()},[]),Ae.useEffect(()=>{(async()=>{try{const ve=["farmer","forest"],_e=ve.map(le=>Tr.get(`/api/points/getallbyownertype/${le}`)),ze=await Promise.all(_e);let Ne=0,st=0;const ie={};ze.forEach((le,pe)=>{const fe=le.data,Qe=ve[pe];if(fe.polygons&&fe.polygons.length>0){let Ke=0;fe.polygons.forEach(et=>{const tt=et.points.map(De=>[De.longitude,De.latitude]),bt=rf({type:"Feature",geometry:{type:"Polygon",coordinates:[tt]}});Ke+=bt}),ie[Qe]={area:Math.round(Ke*100)/100,count:fe.polygons.length},Ne+=Ke,st+=fe.polygons.length}}),n({totalArea:Math.round(Ne*100)/100,polygonCount:st,areaByOwnerType:ie,loading:!1})}catch(ve){console.error("Error fetching area stats:",ve),n(_e=>({..._e,loading:!1}))}})()},[]),t.loading||r.loading||s.loading||c.loading||g.loading||i.loading)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-500 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-400 text-lg",children:"Loading dashboard..."})]})});const te=Object.keys(g.data),se=Object.values(g.data),oe={labels:te,datasets:[{label:"Users by Type",data:se,backgroundColor:Wz.slice(0,te.length),borderRadius:12,barPercentage:.5}]},K={labels:i.treesByForest.map(Fe=>Fe.forest),datasets:[{label:"Trees per Forest",data:i.treesByForest.map(Fe=>Fe.count),backgroundColor:Wz,borderRadius:10}]},de={labels:["Compliant","Pending Assessment"],datasets:[{data:[R.compliant,R.total-R.compliant],backgroundColor:["rgba(34,197,94,0.8)","rgba(251,191,36,0.8)"],borderWidth:2,borderColor:"#fff"}]};B.map(Fe=>Fe.name),B.map(Fe=>Fe.weight),B.map(Fe=>P.filter(ve=>ve.crop_id===Fe.id).length);const we=[{name:"Cocoa",value:15},{name:"Coffee Robusta",value:28},{name:"Coffee Arabica",value:32},{name:"Oil Palm",value:45},{name:"Soya Bean",value:18},{name:"Rubber",value:38},{name:"Hass Avocado",value:22},{name:"Macademia",value:35},{name:"Maize",value:25},{name:"Sunflower",value:20},{name:"Sweet Potato",value:12},{name:"Potato",value:16},{name:"Tomato",value:30},{name:"Millet",value:8},{name:"Sorghum",value:14},{name:"Groundnut",value:26},{name:"Ginger",value:42},{name:"Pineapple",value:33}],J={labels:we.map(Fe=>Fe.name),datasets:[{label:"Crop Analytics",data:we.map(Fe=>Fe.value),borderColor:"#6366F1",backgroundColor:"rgba(99,102,241,0.2)",tension:.3,pointRadius:6,pointBackgroundColor:"#6366F1",pointBorderColor:"#fff",pointBorderWidth:2,fill:!0}]},Z=Fe=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(ve){return`${ve.dataset.label}: ${ve.parsed.y}`}}}},onClick:()=>window.location.href=Fe,scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:45}},y:{grid:{color:"#f0f0f0"},title:{display:!0,text:"Analytics Value"}}}}),Ie={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},be=({title:Fe,desc:ve,children:_e,className:ze=""})=>p.jsxs("div",{className:`bg-white rounded-2xl shadow-lg p-4 sm:p-6 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 cursor-pointer ${ze}`,children:[p.jsx("h3",{className:"text-sm sm:text-lg font-semibold mb-1 text-gray-800",children:Fe}),p.jsx("p",{className:"text-xs text-gray-500 mb-3",children:ve}),p.jsx("div",{className:"w-full",children:_e})]}),He=({title:Fe,value:ve,color:_e,icon:ze,onClick:Ne})=>p.jsx("div",{className:"rounded-2xl bg-white shadow-md p-4 sm:p-6 hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:scale-105 h-full",onClick:Ne,children:p.jsxs("div",{className:"flex items-center justify-between h-full",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"text-xs sm:text-sm text-gray-400 font-semibold truncate",children:Fe}),p.jsx("p",{className:`text-lg sm:text-2xl lg:text-3xl font-bold ${_e} transition-all duration-300 mt-1`,children:ve})]}),p.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl opacity-20 ml-2 flex-shrink-0",children:ze})]})});return p.jsx("div",{className:"min-h-screen bg-gray-50 p-2 sm:p-4 lg:p-6",children:p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 lg:gap-6 mb-6",children:[p.jsx(He,{title:"Total Users Assets",value:se.reduce((Fe,ve)=>Fe+ve,0),color:"text-indigo-500",icon:"",onClick:()=>window.location.href="/usermanager"}),p.jsx(He,{title:"Total Stores",value:D.length,color:"text-indigo-500",icon:"",onClick:()=>window.location.href="/storeProductManager"}),p.jsx(He,{title:"Total Farmers",value:s.totalFarmers,color:"text-emerald-500",icon:"",onClick:()=>window.location.href="/farmmanager"}),p.jsx(He,{title:"Total Forests",value:c.totalForests,color:"text-green-600",icon:"",onClick:()=>window.location.href="/forestpage"}),p.jsx(He,{title:"Total Trees",value:i.totalTrees,color:"text-green-500",icon:"",onClick:()=>window.location.href="/treemanager"}),p.jsx(He,{title:"Total Polygons",value:r.polygonCount,color:"text-pink-500",icon:"",onClick:()=>window.location.href="/mapviewall"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6",children:[p.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl shadow-lg p-6 border border-green-100",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h3",{className:"text-lg font-bold text-green-800",children:" Forest Health"}),p.jsxs("div",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold",children:[R.total>0?Math.round(R.compliant/R.total*100):0,"%"]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Total Reports"}),p.jsx("span",{className:"text-lg font-bold text-gray-800",children:R.total})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Compliant"}),p.jsx("span",{className:"text-lg font-bold text-green-600",children:R.compliant})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Pending"}),p.jsx("span",{className:"text-lg font-bold text-yellow-600",children:R.total-R.compliant})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg p-6 border border-blue-100",children:[p.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:" Tree Metrics"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Avg Height"}),p.jsxs("span",{className:"text-lg font-bold text-gray-800",children:[i.avgHeight.toFixed(1),"m"]})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Avg Diameter"}),p.jsxs("span",{className:"text-lg font-bold text-gray-800",children:[i.avgDiameter.toFixed(1),"cm"]})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Total Trees"}),p.jsx("span",{className:"text-lg font-bold text-blue-600",children:i.totalTrees})]})]})]}),p.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg p-6 border border-purple-100",children:[p.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:" Coverage"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Total Area"}),p.jsx("span",{className:"text-lg font-bold text-gray-800",children:r.totalArea>=1e4?`${(r.totalArea/1e4).toFixed(2)} ha`:`${r.totalArea.toFixed(2)} m`})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Farmer Area"}),p.jsx("span",{className:"text-lg font-bold text-emerald-600",children:r.areaByOwnerType.farmer?`${(r.areaByOwnerType.farmer.area/1e4).toFixed(2)} ha`:"0 ha"})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm text-gray-600",children:"Forest Area"}),p.jsx("span",{className:"text-lg font-bold text-green-600",children:r.areaByOwnerType.forest?`${(r.areaByOwnerType.forest.area/1e4).toFixed(2)} ha`:"0 ha"})]})]})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6 mb-6",children:[p.jsx("div",{className:"md:col-span-1",children:p.jsxs("div",{className:"rounded-2xl bg-white shadow-lg hover:shadow-xl p-4 sm:p-6 transition-all duration-300 cursor-pointer transform hover:scale-[1.02] border border-gray-100 overflow-hidden h-full",onClick:()=>window.location.href="/featuresManager",children:[p.jsx("div",{className:"absolute top-0 right-0 w-16 sm:w-24 h-16 sm:h-24 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-full -translate-y-8 translate-x-8 opacity-60"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-800 mb-1",children:"Smart Features"}),p.jsx("p",{className:"text-xs text-gray-500",children:"Advanced agricultural & forest tools"}),p.jsxs("div",{className:"flex items-center mt-2",children:[p.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),p.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Active & Running"})]})]}),p.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full p-2 sm:p-3 text-white text-lg sm:text-xl shadow-lg",children:""})]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{icon:"",text:"QR Codes",desc:"Track products"},{icon:"",text:"EUDR Reports",desc:"Compliance"},{icon:"",text:"Weather",desc:"Live alerts"},{icon:"",text:"Forest Track",desc:"Tree monitoring"}].map((Fe,ve)=>p.jsxs("div",{className:"flex flex-col space-y-1 p-2 sm:p-3 rounded-lg hover:bg-gradient-to-r hover:from-gray-50 hover:to-purple-50 transition-all duration-200 group",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx("span",{className:"text-sm sm:text-base group-hover:scale-110 transition-transform duration-200",children:Fe.icon}),p.jsx("span",{className:"text-xs font-semibold text-gray-800",children:Fe.text})]}),p.jsx("span",{className:"text-xs text-gray-500 ml-6",children:Fe.desc})]},ve))}),p.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-xs text-gray-400",children:"4 Tools Available"}),p.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(Fe=>p.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full opacity-60"},Fe))})]})})]})]})}),p.jsx("div",{className:"md:col-span-1",children:p.jsx(be,{title:"Users by Type",desc:"Dynamic user distribution",className:"h-full",children:p.jsx("div",{className:"h-64 sm:h-80",children:p.jsx(I_,{data:oe,options:Z("/usermanager")})})})}),p.jsx("div",{className:"md:col-span-1",children:p.jsx(be,{title:"Trees per Forest",desc:`Distribution across ${i.treesByForest.length} forests`,className:"h-full",children:p.jsx("div",{className:"h-64 sm:h-80",children:i.treesByForest.length>0?p.jsx(I_,{data:K,options:Z("/treemanager")}):p.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No tree data available"})})})})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6",children:[p.jsx(be,{title:"Forest EUDR Compliance",desc:`${R.total} total reports analyzed`,className:"h-full",children:p.jsx("div",{className:"h-64 sm:h-80",children:R.total>0?p.jsx(qce,{data:de,options:Ie}):p.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"No forest reports available"})})}),p.jsx(be,{title:"Crop Analytics Trend",desc:`Analytics for ${we.length} predefined crops`,className:"h-full",children:p.jsx("div",{className:"h-64 sm:h-80",children:p.jsx(I0,{data:J,options:Z("/cropmanager")})})})]}),p.jsx("div",{className:"relative",children:p.jsxs("div",{className:"rounded-2xl shadow-xl p-4 sm:p-6 hover:shadow-2xl transition-all duration-300 backdrop-blur-sm border border-white/20",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0.3) 100%)",backdropFilter:"blur(10px)"},children:[p.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-2",children:"Agricultural & Forest Plots Visualization"}),p.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4 font-medium",children:"Live visualization of farms and forests in hexagonal shapes"}),p.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gradient-to-r from-pink-300 to-purple-300 w-full h-[50vh] sm:h-[60vh] min-h-[300px] sm:min-h-[400px]",children:p.jsx(BBe,{ownerType:"farmer",showControls:!1,height:"100%",styleType:"light"})})]})})]})})}const TBe=({activity_type:t,border_cross_country:e,hs_heading:r,goods:n,Volume:s,net_weight:o,scientifi_name:c,common_name:u,s_unit:i,q_unit:m,verification_code:g,producer_name:C,producer_country:B,place:S,date:P,referenceNumber:j,country_of_activity:D,operator_country:F})=>p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
        table {
          width: 100%;
          border-collapse: collapse;
        }

        td, th {
          border: 1px solid black;
          padding: 10px;
          vertical-align: top;
        }

        .header {
          text-align: center;
          font-weight: bold;
        }

        .section-title {
          background-color: #f2f2f2;
          font-weight: bold;
          text-align: center;
        }

        .dds-declaration {
          border: 1px solid green;
          background-color: #f9fff9;
          padding: 6px;
        }

        .signature-space {
          height: 60px;
          padding-top: 20px;
        }

        .signature-line {
          border-top: 1px solid black;
          margin-top: 20px;
          display: inline-block;
          width: 100%;
          height: 20px;
        }

        .no-inner-borders td {
          border: none;
        }
      `}),p.jsx("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px",margin:"20px"},children:p.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:p.jsxs("tbody",{children:[p.jsxs("tr",{children:[p.jsx("td",{colSpan:"2",rowSpan:"2",children:p.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/4/4e/Flag_of_Uganda.svg",alt:"Uganda Flag",width:"150"})}),p.jsx("td",{colSpan:"3",className:"header",style:{textAlign:"center",fontWeight:"bold"},children:p.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},children:[p.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Coat_of_arms_of_Uganda.svg/250px-Coat_of_arms_of_Uganda.svg.png",alt:"Uganda Coat",width:"50"}),p.jsx("p",{style:{margin:0},children:"REPUBLIC OF UGANDA"})]})}),p.jsx("td",{colSpan:"2",rowSpan:"2",style:{textAlign:"right",verticalAlign:"top"},children:p.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/db/European_Commission_Logo.svg",alt:"EU Commission",width:"200"})})]}),p.jsx("tr",{children:p.jsx("td",{colSpan:"5"})}),p.jsxs("tr",{style:{backgroundColor:"#f2f2f2",fontWeight:"bold",textAlign:"center"},children:[p.jsx("td",{colSpan:"4",style:{height:"10px",padding:"20px"},children:"DUE DILIGENCE STATEMENT"}),p.jsxs("td",{colSpan:"3",style:{height:"10px",padding:"20px"},children:["REFERENCE NUMBER :  ",j]})]}),p.jsxs("tr",{style:{margin:"10px"},children:[p.jsx("td",{children:"ACTIVITY TYPE"}),p.jsx("td",{colSpan:"3",children:t}),p.jsx("td",{children:"BORDER CROSS COUNTRY"}),p.jsx("td",{colSpan:"2",children:e})]}),p.jsxs("tr",{style:{margin:"10px"},children:[p.jsx("td",{children:"HS HEADING(CODE)"}),p.jsx("td",{colSpan:"3",children:r}),p.jsx("td",{children:"GOODS DESCRIPTION"}),p.jsx("td",{colSpan:"2",children:n})]}),p.jsxs("tr",{style:{margin:"10px"},children:[p.jsx("td",{colSpan:"2",children:"COMMENTS(ADDITIONAL INFORMATION)"}),p.jsx("td",{children:"VOLUME"}),p.jsx("td",{children:s}),p.jsx("td",{children:"NET WEIGHT"}),p.jsx("td",{colSpan:"2",children:o})]}),p.jsxs("tr",{style:{margin:"10px"},children:[p.jsx("td",{children:"SCIENTIFIC NAME"}),p.jsx("td",{colSpan:"3",children:c}),p.jsx("td",{children:"COMMON NAME"}),p.jsx("td",{colSpan:"2",children:u})]}),p.jsxs("tr",{style:{margin:"10px"},children:[p.jsx("td",{children:"SUPPLEMENTARY UNIT"}),p.jsx("td",{children:i}),p.jsx("td",{children:"QUALIFIER UNIT"}),p.jsx("td",{children:m}),p.jsx("td",{children:"VERIFICATION CODE"}),p.jsx("td",{colSpan:"2",children:g})]}),p.jsxs("tr",{style:{margin:"10px"},children:[p.jsx("td",{children:"PRODUCER NAME"}),p.jsx("td",{colSpan:"3",children:C}),p.jsx("td",{children:"PRODUCER COUNTRY"}),p.jsx("td",{colSpan:"2",children:B})]}),p.jsx("tr",{style:{backgroundColor:"#f2f2f2",fontWeight:"bold",textAlign:"center"},children:p.jsx("td",{colSpan:"7",style:{height:"10px",padding:"20px"},children:"OPERATOR INFO"})}),p.jsxs("tr",{style:{margin:"20px"},children:[p.jsx("td",{children:"EORI"}),p.jsx("td",{colSpan:"2",children:"HRUG000004679"}),p.jsx("td",{children:"PHONE"}),p.jsx("td",{children:"256783130358"}),p.jsx("td",{children:"EMAIL"}),p.jsx("td",{children:p.jsx("a",{href:"mailto:jwetub@agrivields.com",children:"lwetutb@agrivields.com"})})]}),p.jsxs("tr",{children:[p.jsx("td",{children:"COUNTRY OF ACTIVITY"}),p.jsx("td",{colSpan:"2",children:F}),p.jsx("td",{children:"ADDRESS"}),p.jsx("td",{colSpan:"3",children:"T2 BUILDING PAPAYE RISE KIWATULE, KAMPALA"})]}),p.jsxs("tr",{children:[p.jsx("td",{colSpan:"2",style:{border:"1px solid green",backgroundColor:"#f9fff9",padding:"6px"},children:p.jsx("strong",{children:"DDS DECLARATION"})}),p.jsx("td",{colSpan:"5",children:"By submitting this due diligence statement the operator confirms that due diligence in accordance with Regulation (EU) 2023/1115 was carried out and that no or only a negligible risk was found that the relevant products do not comply with Article 3, point (a) or (b), of that Regulation."})]}),p.jsxs("tr",{children:[p.jsx("td",{colSpan:"2",rowSpan:"2",children:"Signed for and on behalf of:"}),p.jsx("td",{colSpan:"2"}),p.jsx("td",{children:"PLACE"}),p.jsx("td",{colSpan:"2",style:{height:"60px",paddingTop:"20px"},children:S})]}),p.jsx("tr",{style:{height:"60px"}}),p.jsxs("tr",{children:[p.jsx("td",{children:"DATE"}),p.jsx("td",{colSpan:"3",style:{height:"60px"},children:P}),p.jsx("td",{colSpan:"3",style:{height:"60px"}})]}),p.jsxs("tr",{children:[p.jsxs("td",{colSpan:"5",style:{height:"150px",paddingTop:"50px"},children:["Name and Function : ",p.jsx("br",{}),p.jsx("div",{style:{borderTop:"1px solid black",marginTop:"20px",height:"20px"}}),p.jsx("div",{style:{borderTop:"1px solid black",marginTop:"20px",height:"20px"}})]}),p.jsxs("td",{colSpan:"2",style:{height:"150px",paddingTop:"50px"},children:["SIGNATURE",p.jsx("br",{}),p.jsx("div",{style:{borderTop:"1px solid black",marginTop:"40px",height:"20px"}})]})]})]})})})]}),LBe=({data:t,referenceNumber:e,verificationCode:r,showPreview:n})=>{var i,m,g,C,B,S,P,j,D,F,R,V,Y,te,se,oe,K,de,we,J;const s=Ae.useRef(null);console.log("",t.statements);const o=async()=>{if(!s.current)return;const Z=await O4(s,`DDS_${e}`);if(Z){const Ie=URL.createObjectURL(Z),be=document.createElement("a");be.href=Ie,be.download=`DDS_${e}.pdf`,document.body.appendChild(be),be.click(),be.remove(),URL.revokeObjectURL(Ie)}};if(!t)return p.jsx("p",{className:"text-gray-500 italic",children:"Aucune donne affiche pour le moment."});if(t.error){const Z=typeof t.error=="string"?t.error:JSON.stringify(t.error,null,2);return p.jsx("div",{className:"text-red-600 font-semibold whitespace-pre-wrap",children:Z})}let c=null,u={};if((i=t==null?void 0:t.local_data)!=null&&i.producers_json)try{const Z=JSON.parse(t.local_data.producers_json);Array.isArray(Z)&&Z.length>0&&(c=Z[0])}catch(Z){console.error(" Erreur parsing producers_json:",Z)}return Array.isArray((m=t==null?void 0:t.remote_data)==null?void 0:m.commodities)&&(u=t.remote_data.commodities[0]||{}),p.jsxs("div",{className:"space-y-2 text-sm text-gray-800",children:[t.ddsIdentifier&&p.jsxs("div",{children:[p.jsx("strong",{children:"DDS Identifier:"})," ",t.ddsIdentifier]}),t.amendStatus&&p.jsxs("div",{className:"text-green-700 font-medium",children:[" Amendment successfully completed. ",p.jsx("br",{}),p.jsx("strong",{children:"Status:"})," ",t.amendStatus]}),t.referenceNumber&&p.jsxs("div",{children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Reference Number:"})," ",t.referenceNumber]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Activity Type:"})," ",t.activityType]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Status:"})," ",t.status]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Status Date:"})," ",new Date(t.statusDate).toLocaleString()]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Operator:"})," ",(g=t.operator)==null?void 0:g.name," (",(C=t.operator)==null?void 0:C.country,")"]})]}),Array.isArray((B=t==null?void 0:t.remote_data)==null?void 0:B.commodities)&&t.remote_data.commodities.length>0&&p.jsxs("div",{className:"border-t pt-2",children:[p.jsx("h4",{className:"font-semibold",children:"Commodity"}),p.jsxs("p",{children:[p.jsx("strong",{children:"Description of Goods:"})," ",u.descriptionOfGoods]}),p.jsxs("p",{children:[p.jsx("strong",{children:"HS Heading:"})," ",u.hsHeading]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Species:"})," ",(S=u.speciesInfo)==null?void 0:S.scientificName," (",(P=u.speciesInfo)==null?void 0:P.commonName,")"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Net Weight:"})," ",(j=u.goodsMeasure)==null?void 0:j.netWeight]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Volume:"})," ",(D=u.goodsMeasure)==null?void 0:D.volume]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Supplementary Unit:"})," ",(F=u.goodsMeasure)==null?void 0:F.supplementaryUnit]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Qualifier:"})," ",(R=u.goodsMeasure)==null?void 0:R.supplementaryUnitQualifier]}),Array.isArray(u.producers)&&u.producers.length>0&&p.jsxs("div",{children:[p.jsx("strong",{children:"Producers:"}),p.jsx("ul",{className:"list-disc pl-5",children:u.producers.map((Z,Ie)=>{var be;return p.jsxs("li",{children:[Z.country,"  GeoJSON: ",(be=Z.geometryGeojson)==null?void 0:be.slice(0,30),"..."]},Ie)})})]})]}),Array.isArray(t.statements)&&p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold",children:"Statements related to the Internal Reference"}),p.jsx("ul",{className:"divide-y divide-gray-200",children:t.statements.map((Z,Ie)=>p.jsxs("li",{className:"py-2",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Identifier:"})," ",Z.identifier]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Internal Ref:"})," ",Z.internalReferenceNumber]}),Z.referenceNumber&&p.jsxs("p",{children:[p.jsx("strong",{children:"Reference Number:"})," ",Z.referenceNumber]}),Z.verificationNumber&&p.jsxs("p",{children:[p.jsx("strong",{children:"Verification Code:"})," ",Z.verificationNumber]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Status:"})," ",Z.status]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Date:"})," ",new Date(Z.date).toLocaleString()]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Updated By:"})," ",Z.updatedBy]})]},Ie))})]}),n&&e&&r&&(t==null?void 0:t.remote_data)&&p.jsxs("div",{className:"mt-6 border rounded-lg p-4 bg-white shadow",children:[p.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Due Diligence Statement (preview)"}),p.jsx("div",{ref:s,children:p.jsx(TBe,{activity_type:t.remote_data.activityType||"",border_cross_country:((V=t.local_data)==null?void 0:V.border_cross_country)||"",hs_heading:u.hsHeading||"",goods:u.descriptionOfGoods||"",Volume:((Y=u.goodsMeasure)==null?void 0:Y.volume)||"",net_weight:((te=u.goodsMeasure)==null?void 0:te.netWeight)||"",scientifi_name:((se=u.speciesInfo)==null?void 0:se.scientificName)||"",common_name:((oe=u.speciesInfo)==null?void 0:oe.commonName)||"",s_unit:((K=u.goodsMeasure)==null?void 0:K.supplementaryUnit)||"",q_unit:((de=u.goodsMeasure)==null?void 0:de.supplementaryUnitQualifier)||"",verification_code:r,producer_name:(c==null?void 0:c.name)||"",producer_country:(c==null?void 0:c.country)||"",place:((we=t.remote_data.operator)==null?void 0:we.country)||"",date:new Date(t.remote_data.statusDate||Date.now()).toLocaleDateString(),referenceNumber:t.remote_data.referenceNumber||"",country_of_activity:t.remote_data.countryOfActivity||"",operator_country:((J=t.remote_data.operator)==null?void 0:J.country)||""})}),p.jsx("button",{onClick:o,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Download PDF"})]}),p.jsxs("details",{className:"mt-4",children:[p.jsx("summary",{className:"cursor-pointer text-blue-600 underline",children:"See JSON"}),p.jsx("pre",{className:"bg-white p-2 mt-2 rounded border text-xs overflow-x-auto",children:JSON.stringify(t,null,2)})]})]})};var IBe=Object.defineProperty,NBe=(t,e,r)=>e in t?IBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sT=(t,e,r)=>(NBe(t,typeof e!="symbol"?e+"":e,r),r);let FBe=class{constructor(){sT(this,"current",this.detect()),sT(this,"handoffState","pending"),sT(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},f0=new FBe;function uS(t){var e,r;return f0.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function dS(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function _A(){let t=[],e={addEventListener(r,n,s,o){return r.addEventListener(n,s,o),e.add(()=>r.removeEventListener(n,s,o))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return dS(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,s){let o=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:s}),this.add(()=>{Object.assign(r.style,{[n]:o})})},group(r){let n=_A();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let s of t.splice(n,1))s()}},dispose(){for(let r of t.splice(0))r()}};return e}function $F(){let[t]=Ae.useState(_A);return Ae.useEffect(()=>()=>t.dispose(),[t]),t}let ed=(t,e)=>{f0.isServer?Ae.useEffect(t,e):Ae.useLayoutEffect(t,e)};function k0(t){let e=Ae.useRef(t);return ed(()=>{e.current=t},[t]),e}let Qa=function(t){let e=k0(t);return Ui.useCallback((...r)=>e.current(...r),[e])},PBe=Ae.createContext(void 0);function jBe(){return Ae.useContext(PBe)}function eI(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function vA(t,e,...r){if(t in e){let s=e[t];return typeof s=="function"?s(...r):s}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,vA),n}var Q4=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Q4||{}),bm=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(bm||{});function nf(){let t=kBe();return Ae.useCallback(e=>MBe({mergeRefs:t,...e}),[t])}function MBe({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:s,visible:o=!0,name:c,mergeRefs:u}){u=u??DBe;let i=gX(e,t);if(o)return V2(i,r,n,c,u);let m=s??0;if(m&2){let{static:g=!1,...C}=i;if(g)return V2(C,r,n,c,u)}if(m&1){let{unmount:g=!0,...C}=i;return vA(g?0:1,{0(){return null},1(){return V2({...C,hidden:!0,style:{display:"none"}},r,n,c,u)}})}return V2(i,r,n,c,u)}function V2(t,e={},r,n,s){let{as:o=r,children:c,refName:u="ref",...i}=oT(t,["unmount","static"]),m=t.ref!==void 0?{[u]:t.ref}:{},g=typeof c=="function"?c(e):c;"className"in i&&i.className&&typeof i.className=="function"&&(i.className=i.className(e)),i["aria-labelledby"]&&i["aria-labelledby"]===i.id&&(i["aria-labelledby"]=void 0);let C={};if(e){let B=!1,S=[];for(let[P,j]of Object.entries(e))typeof j=="boolean"&&(B=!0),j===!0&&S.push(P.replace(/([A-Z])/g,D=>`-${D.toLowerCase()}`));if(B){C["data-headlessui-state"]=S.join(" ");for(let P of S)C[`data-${P}`]=""}}if(o===Ae.Fragment&&(Object.keys(Ug(i)).length>0||Object.keys(Ug(C)).length>0))if(!Ae.isValidElement(g)||Array.isArray(g)&&g.length>1){if(Object.keys(Ug(i)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ug(i)).concat(Object.keys(Ug(C))).map(B=>`  - ${B}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(B=>`  - ${B}`).join(`
`)].join(`
`))}else{let B=g.props,S=B==null?void 0:B.className,P=typeof S=="function"?(...F)=>eI(S(...F),i.className):eI(S,i.className),j=P?{className:P}:{},D=gX(g.props,Ug(oT(i,["ref"])));for(let F in C)F in D&&delete C[F];return Ae.cloneElement(g,Object.assign({},D,C,m,{ref:s(OBe(g),m.ref)},j))}return Ae.createElement(o,Object.assign({},oT(i,["ref"]),o!==Ae.Fragment&&m,o!==Ae.Fragment&&C),g)}function kBe(){let t=Ae.useRef([]),e=Ae.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function DBe(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function gX(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):e[s]=n[s];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[s=>{var o;return(o=s==null?void 0:s.preventDefault)==null?void 0:o.call(s)}]);for(let n in r)Object.assign(e,{[n](s,...o){let c=r[n];for(let u of c){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;u(s,...o)}}});return e}function Jd(t){var e;return Object.assign(Ae.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Ug(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function oT(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function OBe(t){return Ui.version.split(".")[0]>="19"?t.props.ref:t.ref}let RBe="span";var H4=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(H4||{});function UBe(t,e){var r;let{features:n=1,...s}=t,o={ref:e,"aria-hidden":(n&2)===2?!0:(r=s["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return nf()({ourProps:o,theirProps:s,slot:{},defaultTag:RBe,name:"Hidden"})}let tI=Jd(UBe);function yX(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function Um(t){return yX(t)&&"tagName"in t}function w0(t){return Um(t)&&"accessKey"in t}function wm(t){return Um(t)&&"tabIndex"in t}function zBe(t){return Um(t)&&"style"in t}function QBe(t){return w0(t)&&t.nodeName==="IFRAME"}function HBe(t){return w0(t)&&t.nodeName==="INPUT"}let vX=Symbol();function VBe(t,e=!0){return Object.assign(t,{[vX]:e})}function Fp(...t){let e=Ae.useRef(t);Ae.useEffect(()=>{e.current=t},[t]);let r=Qa(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return t.every(n=>n==null||(n==null?void 0:n[vX]))?void 0:r}let qF=Ae.createContext(null);qF.displayName="DescriptionContext";function xX(){let t=Ae.useContext(qF);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,xX),e}return t}function GBe(){let[t,e]=Ae.useState([]);return[t.length>0?t.join(" "):void 0,Ae.useMemo(()=>function(r){let n=Qa(o=>(e(c=>[...c,o]),()=>e(c=>{let u=c.slice(),i=u.indexOf(o);return i!==-1&&u.splice(i,1),u}))),s=Ae.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return Ui.createElement(qF.Provider,{value:s},r.children)},[e])]}let $Be="p";function qBe(t,e){let r=Ae.useId(),n=jBe(),{id:s=`headlessui-description-${r}`,...o}=t,c=xX(),u=Fp(e);ed(()=>c.register(s),[s,c.register]);let i=n||!1,m=Ae.useMemo(()=>({...c.slot,disabled:i}),[c.slot,i]),g={ref:u,...c.props,id:s};return nf()({ourProps:g,theirProps:o,slot:m,defaultTag:$Be,name:c.name||"Description"})}let WBe=Jd(qBe),KBe=Object.assign(WBe,{});var _X=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(_X||{});let XBe=Ae.createContext(()=>{});function YBe({value:t,children:e}){return Ui.createElement(XBe.Provider,{value:t},e)}let bX=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var ZBe=Object.defineProperty,JBe=(t,e,r)=>e in t?ZBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eEe=(t,e,r)=>(JBe(t,e+"",r),r),wX=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},zh=(t,e,r)=>(wX(t,e,"read from private field"),r?r.call(t):e.get(t)),aT=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Kz=(t,e,r,n)=>(wX(t,e,"write to private field"),e.set(t,r),r),up,yx,vx;let tEe=class{constructor(e){aT(this,up,{}),aT(this,yx,new bX(()=>new Set)),aT(this,vx,new Set),eEe(this,"disposables",_A()),Kz(this,up,e)}dispose(){this.disposables.dispose()}get state(){return zh(this,up)}subscribe(e,r){let n={selector:e,callback:r,current:e(zh(this,up))};return zh(this,vx).add(n),this.disposables.add(()=>{zh(this,vx).delete(n)})}on(e,r){return zh(this,yx).get(e).add(r),this.disposables.add(()=>{zh(this,yx).get(e).delete(r)})}send(e){let r=this.reduce(zh(this,up),e);if(r!==zh(this,up)){Kz(this,up,r);for(let n of zh(this,vx)){let s=n.selector(zh(this,up));CX(n.current,s)||(n.current=s,n.callback(s))}for(let n of zh(this,yx).get(e.type))n(zh(this,up),e)}}};up=new WeakMap,yx=new WeakMap,vx=new WeakMap;function CX(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:lT(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:lT(t.entries(),e.entries()):Xz(t)&&Xz(e)?lT(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function lT(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function Xz(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var rEe=Object.defineProperty,nEe=(t,e,r)=>e in t?rEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yz=(t,e,r)=>(nEe(t,typeof e!="symbol"?e+"":e,r),r),iEe=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(iEe||{});let sEe={0(t,e){let r=e.id,n=t.stack,s=t.stack.indexOf(r);if(s!==-1){let o=t.stack.slice();return o.splice(s,1),o.push(r),n=o,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let s=t.stack.slice();return s.splice(n,1),{...t,stack:s}}},oEe=class SX extends tEe{constructor(){super(...arguments),Yz(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),Yz(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new SX({stack:[]})}reduce(e,r){return vA(r.type,sEe,e,r)}};const BX=new bX(()=>oEe.new());var EX={exports:{}},TX={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sb=Ae;function aEe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lEe=typeof Object.is=="function"?Object.is:aEe,cEe=Sb.useSyncExternalStore,uEe=Sb.useRef,dEe=Sb.useEffect,hEe=Sb.useMemo,fEe=Sb.useDebugValue;TX.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var o=uEe(null);if(o.current===null){var c={hasValue:!1,value:null};o.current=c}else c=o.current;o=hEe(function(){function i(S){if(!m){if(m=!0,g=S,S=n(S),s!==void 0&&c.hasValue){var P=c.value;if(s(P,S))return C=P}return C=S}if(P=C,lEe(g,S))return P;var j=n(S);return s!==void 0&&s(P,j)?(g=S,P):(g=S,C=j)}var m=!1,g,C,B=r===void 0?null:r;return[function(){return i(e())},B===null?void 0:function(){return i(B())}]},[e,r,n,s]);var u=cEe(t,o[0],o[1]);return dEe(function(){c.hasValue=!0,c.value=u},[u]),fEe(u),u};EX.exports=TX;var pEe=EX.exports;function LX(t,e,r=CX){return pEe.useSyncExternalStoreWithSelector(Qa(n=>t.subscribe(AEe,n)),Qa(()=>t.state),Qa(()=>t.state),Qa(e),r)}function AEe(t){return t}function Bb(t,e){let r=Ae.useId(),n=BX.get(e),[s,o]=LX(n,Ae.useCallback(c=>[n.selectors.isTop(c,r),n.selectors.inStack(c,r)],[n,r]));return ed(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?o?s:!0:!1}let rI=new Map,r_=new Map;function Zz(t){var e;let r=(e=r_.get(t))!=null?e:0;return r_.set(t,r+1),r!==0?()=>Jz(t):(rI.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>Jz(t))}function Jz(t){var e;let r=(e=r_.get(t))!=null?e:1;if(r===1?r_.delete(t):r_.set(t,r-1),r!==1)return;let n=rI.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,rI.delete(t))}function mEe(t,{allowed:e,disallowed:r}={}){let n=Bb(t,"inert-others");ed(()=>{var s,o;if(!n)return;let c=_A();for(let i of(s=r==null?void 0:r())!=null?s:[])i&&c.add(Zz(i));let u=(o=e==null?void 0:e())!=null?o:[];for(let i of u){if(!i)continue;let m=uS(i);if(!m)continue;let g=i.parentElement;for(;g&&g!==m.body;){for(let C of g.children)u.some(B=>C.contains(B))||c.add(Zz(C));g=g.parentElement}}return c.dispose},[n,e,r])}function gEe(t,e,r){let n=k0(s=>{let o=s.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&r()});Ae.useEffect(()=>{if(!t)return;let s=e===null?null:w0(e)?e:e.current;if(!s)return;let o=_A();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>n.current(s));c.observe(s),o.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>n.current(s));c.observe(s),o.add(()=>c.disconnect())}return()=>o.dispose()},[e,n,t])}let V4=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),yEe=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Zp=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Zp||{}),nI=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(nI||{}),vEe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(vEe||{});function xEe(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(V4)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function _Ee(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(yEe)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var IX=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(IX||{});function bEe(t,e=0){var r;return t===((r=uS(t))==null?void 0:r.body)?!1:vA(e,{0(){return t.matches(V4)},1(){let n=t;for(;n!==null;){if(n.matches(V4))return!0;n=n.parentElement}return!1}})}var wEe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(wEe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function lA(t){t==null||t.focus({preventScroll:!0})}let CEe=["textarea","input"].join(",");function SEe(t){var e,r;return(r=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,CEe))!=null?r:!1}function BEe(t,e=r=>r){return t.slice().sort((r,n)=>{let s=e(r),o=e(n);if(s===null||o===null)return 0;let c=s.compareDocumentPosition(o);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function n_(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:s=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,c=Array.isArray(t)?r?BEe(t):t:e&64?_Ee(t):xEe(t);s.length>0&&c.length>1&&(c=c.filter(S=>!s.some(P=>P!=null&&"current"in P?(P==null?void 0:P.current)===S:P===S))),n=n??o.activeElement;let u=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,c.indexOf(n))-1;if(e&4)return Math.max(0,c.indexOf(n))+1;if(e&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=e&32?{preventScroll:!0}:{},g=0,C=c.length,B;do{if(g>=C||g+C<=0)return 0;let S=i+g;if(e&16)S=(S+C)%C;else{if(S<0)return 3;if(S>=C)return 1}B=c[S],B==null||B.focus(m),g+=u}while(B!==o.activeElement);return e&6&&SEe(B)&&B.select(),2}function NX(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function EEe(){return/Android/gi.test(window.navigator.userAgent)}function e9(){return NX()||EEe()}function G2(t,e,r,n){let s=k0(r);Ae.useEffect(()=>{if(!t)return;function o(c){s.current(c)}return document.addEventListener(e,o,n),()=>document.removeEventListener(e,o,n)},[t,e,n])}function FX(t,e,r,n){let s=k0(r);Ae.useEffect(()=>{if(!t)return;function o(c){s.current(c)}return window.addEventListener(e,o,n),()=>window.removeEventListener(e,o,n)},[t,e,n])}const t9=30;function TEe(t,e,r){let n=k0(r),s=Ae.useCallback(function(u,i){if(u.defaultPrevented)return;let m=i(u);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let g=function C(B){return typeof B=="function"?C(B()):Array.isArray(B)||B instanceof Set?B:[B]}(e);for(let C of g)if(C!==null&&(C.contains(m)||u.composed&&u.composedPath().includes(C)))return;return!bEe(m,IX.Loose)&&m.tabIndex!==-1&&u.preventDefault(),n.current(u,m)},[n,e]),o=Ae.useRef(null);G2(t,"pointerdown",u=>{var i,m;e9()||(o.current=((m=(i=u.composedPath)==null?void 0:i.call(u))==null?void 0:m[0])||u.target)},!0),G2(t,"pointerup",u=>{if(e9()||!o.current)return;let i=o.current;return o.current=null,s(u,()=>i)},!0);let c=Ae.useRef({x:0,y:0});G2(t,"touchstart",u=>{c.current.x=u.touches[0].clientX,c.current.y=u.touches[0].clientY},!0),G2(t,"touchend",u=>{let i={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(i.x-c.current.x)>=t9||Math.abs(i.y-c.current.y)>=t9))return s(u,()=>wm(u.target)?u.target:null)},!0),FX(t,"blur",u=>s(u,()=>QBe(window.document.activeElement)?window.document.activeElement:null),!0)}function hS(...t){return Ae.useMemo(()=>uS(...t),[...t])}function PX(t,e,r,n){let s=k0(r);Ae.useEffect(()=>{t=t??window;function o(c){s.current(c)}return t.addEventListener(e,o,n),()=>t.removeEventListener(e,o,n)},[t,e,n])}function LEe(t){return Ae.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function IEe(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(s){return n.add(s),()=>n.delete(s)},dispatch(s,...o){let c=e[s].call(r,...o);c&&(r=c,n.forEach(u=>u()))}}}function NEe(){let t;return{before({doc:e}){var r;let n=e.documentElement,s=(r=e.defaultView)!=null?r:window;t=Math.max(0,s.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,s=Math.max(0,n.clientWidth-n.offsetWidth),o=Math.max(0,t-s);r.style(n,"paddingRight",`${o}px`)}}}function FEe(){return NX()?{before({doc:t,d:e,meta:r}){function n(s){return r.containers.flatMap(o=>o()).some(o=>o.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let u=_A();u.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>u.dispose()))}let o=(s=window.scrollY)!=null?s:window.pageYOffset,c=null;e.addEventListener(t,"click",u=>{if(wm(u.target))try{let i=u.target.closest("a");if(!i)return;let{hash:m}=new URL(i.href),g=t.querySelector(m);wm(g)&&!n(g)&&(c=g)}catch{}},!0),e.addEventListener(t,"touchstart",u=>{if(wm(u.target)&&zBe(u.target))if(n(u.target)){let i=u.target;for(;i.parentElement&&n(i.parentElement);)i=i.parentElement;e.style(i,"overscrollBehavior","contain")}else e.style(u.target,"touchAction","none")}),e.addEventListener(t,"touchmove",u=>{if(wm(u.target)){if(HBe(u.target))return;if(n(u.target)){let i=u.target;for(;i.parentElement&&i.dataset.headlessuiPortal!==""&&!(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth);)i=i.parentElement;i.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),e.add(()=>{var u;let i=(u=window.scrollY)!=null?u:window.pageYOffset;o!==i&&window.scrollTo(0,o),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function PEe(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function jEe(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let Jg=IEe(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:_A(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:jEe(r)},s=[FEe(),NEe(),PEe()];s.forEach(({before:o})=>o==null?void 0:o(n)),s.forEach(({after:o})=>o==null?void 0:o(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Jg.subscribe(()=>{let t=Jg.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",s=r.count!==0;(s&&!n||!s&&n)&&Jg.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&Jg.dispatch("TEARDOWN",r)}});function MEe(t,e,r=()=>({containers:[]})){let n=LEe(Jg),s=e?n.get(e):void 0,o=s?s.count>0:!1;return ed(()=>{if(!(!e||!t))return Jg.dispatch("PUSH",e,r),()=>Jg.dispatch("POP",e,r)},[t,e]),o}function kEe(t,e,r=()=>[document.body]){let n=Bb(t,"scroll-lock");MEe(n,e,s=>{var o;return{containers:[...(o=s.containers)!=null?o:[],r]}})}function DEe(t=0){let[e,r]=Ae.useState(t),n=Ae.useCallback(i=>r(i),[e]),s=Ae.useCallback(i=>r(m=>m|i),[e]),o=Ae.useCallback(i=>(e&i)===i,[e]),c=Ae.useCallback(i=>r(m=>m&~i),[r]),u=Ae.useCallback(i=>r(m=>m^i),[r]);return{flags:e,setFlag:n,addFlag:s,hasFlag:o,removeFlag:c,toggleFlag:u}}var OEe={},r9,n9;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((r9=process==null?void 0:OEe)==null?void 0:r9.NODE_ENV)==="test"&&typeof((n9=Element==null?void 0:Element.prototype)==null?void 0:n9.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var REe=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(REe||{});function UEe(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function zEe(t,e,r,n){let[s,o]=Ae.useState(r),{hasFlag:c,addFlag:u,removeFlag:i}=DEe(t&&s?3:0),m=Ae.useRef(!1),g=Ae.useRef(!1),C=$F();return ed(()=>{var B;if(t){if(r&&o(!0),!e){r&&u(3);return}return(B=n==null?void 0:n.start)==null||B.call(n,r),QEe(e,{inFlight:m,prepare(){g.current?g.current=!1:g.current=m.current,m.current=!0,!g.current&&(r?(u(3),i(4)):(u(4),i(2)))},run(){g.current?r?(i(3),u(4)):(i(4),u(3)):r?i(1):u(1)},done(){var S;g.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(m.current=!1,i(7),r||o(!1),(S=n==null?void 0:n.end)==null||S.call(n,r))}})}},[t,r,e,C]),t?[s,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function QEe(t,{prepare:e,run:r,done:n,inFlight:s}){let o=_A();return VEe(t,{prepare:e,inFlight:s}),o.nextFrame(()=>{r(),o.requestAnimationFrame(()=>{o.add(HEe(t,n))})}),o.dispose}function HEe(t,e){var r,n;let s=_A();if(!t)return s.dispose;let o=!1;s.add(()=>{o=!0});let c=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(u=>u instanceof CSSTransition))!=null?n:[];return c.length===0?(e(),s.dispose):(Promise.allSettled(c.map(u=>u.finished)).then(()=>{o||e()}),s.dispose)}function VEe(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function WF(t,e){let r=Ae.useRef([]),n=Qa(t);Ae.useEffect(()=>{let s=[...r.current];for(let[o,c]of e.entries())if(r.current[o]!==c){let u=n(e,s);return r.current=e,u}},[n,...e])}let fS=Ae.createContext(null);fS.displayName="OpenClosedContext";var Pf=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Pf||{});function pS(){return Ae.useContext(fS)}function GEe({value:t,children:e}){return Ui.createElement(fS.Provider,{value:t},e)}function $Ee({children:t}){return Ui.createElement(fS.Provider,{value:null},t)}function qEe(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let lm=[];qEe(()=>{function t(e){if(!wm(e.target)||e.target===document.body||lm[0]===e.target)return;let r=e.target;r=r.closest(V4),lm.unshift(r??e.target),lm=lm.filter(n=>n!=null&&n.isConnected),lm.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function jX(t){let e=Qa(t),r=Ae.useRef(!1);Ae.useEffect(()=>(r.current=!1,()=>{r.current=!0,dS(()=>{r.current&&e()})}),[e])}function WEe(){let t=typeof document>"u";return"useSyncExternalStore"in uT?(e=>e.useSyncExternalStore)(uT)(()=>()=>{},()=>!1,()=>!t):!1}function Eb(){let t=WEe(),[e,r]=Ae.useState(f0.isHandoffComplete);return e&&f0.isHandoffComplete===!1&&r(!1),Ae.useEffect(()=>{e!==!0&&r(!0)},[e]),Ae.useEffect(()=>f0.handoff(),[]),t?!1:e}let MX=Ae.createContext(!1);function KEe(){return Ae.useContext(MX)}function i9(t){return Ui.createElement(MX.Provider,{value:t.force},t.children)}function XEe(t){let e=KEe(),r=Ae.useContext(DX),[n,s]=Ae.useState(()=>{var o;if(!e&&r!==null)return(o=r.current)!=null?o:null;if(f0.isServer)return null;let c=t==null?void 0:t.getElementById("headlessui-portal-root");if(c)return c;if(t===null)return null;let u=t.createElement("div");return u.setAttribute("id","headlessui-portal-root"),t.body.appendChild(u)});return Ae.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),Ae.useEffect(()=>{e||r!==null&&s(r.current)},[r,s,e]),n}let kX=Ae.Fragment,YEe=Jd(function(t,e){let{ownerDocument:r=null,...n}=t,s=Ae.useRef(null),o=Fp(VBe(S=>{s.current=S}),e),c=hS(s),u=r??c,i=XEe(u),[m]=Ae.useState(()=>{var S;return f0.isServer?null:(S=u==null?void 0:u.createElement("div"))!=null?S:null}),g=Ae.useContext(iI),C=Eb();ed(()=>{!i||!m||i.contains(m)||(m.setAttribute("data-headlessui-portal",""),i.appendChild(m))},[i,m]),ed(()=>{if(m&&g)return g.register(m)},[g,m]),jX(()=>{var S;!i||!m||(yX(m)&&i.contains(m)&&i.removeChild(m),i.childNodes.length<=0&&((S=i.parentElement)==null||S.removeChild(i)))});let B=nf();return C?!i||!m?null:cC.createPortal(B({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:kX,name:"Portal"}),m):null});function ZEe(t,e){let r=Fp(e),{enabled:n=!0,ownerDocument:s,...o}=t,c=nf();return n?Ui.createElement(YEe,{...o,ownerDocument:s,ref:r}):c({ourProps:{ref:r},theirProps:o,slot:{},defaultTag:kX,name:"Portal"})}let JEe=Ae.Fragment,DX=Ae.createContext(null);function e3e(t,e){let{target:r,...n}=t,s={ref:Fp(e)},o=nf();return Ui.createElement(DX.Provider,{value:r},o({ourProps:s,theirProps:n,defaultTag:JEe,name:"Popover.Group"}))}let iI=Ae.createContext(null);function t3e(){let t=Ae.useContext(iI),e=Ae.useRef([]),r=Qa(o=>(e.current.push(o),t&&t.register(o),()=>n(o))),n=Qa(o=>{let c=e.current.indexOf(o);c!==-1&&e.current.splice(c,1),t&&t.unregister(o)}),s=Ae.useMemo(()=>({register:r,unregister:n,portals:e}),[r,n,e]);return[e,Ae.useMemo(()=>function({children:o}){return Ui.createElement(iI.Provider,{value:s},o)},[s])]}let r3e=Jd(ZEe),OX=Jd(e3e),n3e=Object.assign(r3e,{Group:OX});function i3e(t,e=typeof document<"u"?document.defaultView:null,r){let n=Bb(t,"escape");PX(e,"keydown",s=>{n&&(s.defaultPrevented||s.key===_X.Escape&&r(s))})}function s3e(){var t;let[e]=Ae.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=Ae.useState((t=e==null?void 0:e.matches)!=null?t:!1);return ed(()=>{if(!e)return;function s(o){n(o.matches)}return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[e]),r}function o3e({defaultContainers:t=[],portals:e,mainTreeNode:r}={}){let n=hS(r),s=Qa(()=>{var o,c;let u=[];for(let i of t)i!==null&&(Um(i)?u.push(i):"current"in i&&Um(i.current)&&u.push(i.current));if(e!=null&&e.current)for(let i of e.current)u.push(i);for(let i of(o=n==null?void 0:n.querySelectorAll("html > *, body > *"))!=null?o:[])i!==document.body&&i!==document.head&&Um(i)&&i.id!=="headlessui-portal-root"&&(r&&(i.contains(r)||i.contains((c=r==null?void 0:r.getRootNode())==null?void 0:c.host))||u.some(m=>i.contains(m))||u.push(i));return u});return{resolveContainers:s,contains:Qa(o=>s().some(c=>c.contains(o)))}}let RX=Ae.createContext(null);function s9({children:t,node:e}){let[r,n]=Ae.useState(null),s=UX(e??r);return Ui.createElement(RX.Provider,{value:s},t,s===null&&Ui.createElement(tI,{features:H4.Hidden,ref:o=>{var c,u;if(o){for(let i of(u=(c=uS(o))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?u:[])if(i!==document.body&&i!==document.head&&Um(i)&&i!=null&&i.contains(o)){n(i);break}}}}))}function UX(t=null){var e;return(e=Ae.useContext(RX))!=null?e:t}function KF(){let t=Ae.useRef(!1);return ed(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var xx=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(xx||{});function a3e(){let t=Ae.useRef(0);return FX(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function zX(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let r of t.current)Um(r.current)&&e.add(r.current);return e}let l3e="div";var Hg=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(Hg||{});function c3e(t,e){let r=Ae.useRef(null),n=Fp(r,e),{initialFocus:s,initialFocusFallback:o,containers:c,features:u=15,...i}=t;Eb()||(u=0);let m=hS(r);f3e(u,{ownerDocument:m});let g=p3e(u,{ownerDocument:m,container:r,initialFocus:s,initialFocusFallback:o});A3e(u,{ownerDocument:m,container:r,containers:c,previousActiveElement:g});let C=a3e(),B=Qa(R=>{if(!w0(r.current))return;let V=r.current;(Y=>Y())(()=>{vA(C.current,{[xx.Forwards]:()=>{n_(V,Zp.First,{skipElements:[R.relatedTarget,o]})},[xx.Backwards]:()=>{n_(V,Zp.Last,{skipElements:[R.relatedTarget,o]})}})})}),S=Bb(!!(u&2),"focus-trap#tab-lock"),P=$F(),j=Ae.useRef(!1),D={ref:n,onKeyDown(R){R.key=="Tab"&&(j.current=!0,P.requestAnimationFrame(()=>{j.current=!1}))},onBlur(R){if(!(u&4))return;let V=zX(c);w0(r.current)&&V.add(r.current);let Y=R.relatedTarget;wm(Y)&&Y.dataset.headlessuiFocusGuard!=="true"&&(QX(V,Y)||(j.current?n_(r.current,vA(C.current,{[xx.Forwards]:()=>Zp.Next,[xx.Backwards]:()=>Zp.Previous})|Zp.WrapAround,{relativeTo:R.target}):wm(R.target)&&lA(R.target)))}},F=nf();return Ui.createElement(Ui.Fragment,null,S&&Ui.createElement(tI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:B,features:H4.Focusable}),F({ourProps:D,theirProps:i,defaultTag:l3e,name:"FocusTrap"}),S&&Ui.createElement(tI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:B,features:H4.Focusable}))}let u3e=Jd(c3e),d3e=Object.assign(u3e,{features:Hg});function h3e(t=!0){let e=Ae.useRef(lm.slice());return WF(([r],[n])=>{n===!0&&r===!1&&dS(()=>{e.current.splice(0)}),n===!1&&r===!0&&(e.current=lm.slice())},[t,lm,e]),Qa(()=>{var r;return(r=e.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function f3e(t,{ownerDocument:e}){let r=!!(t&8),n=h3e(r);WF(()=>{r||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&lA(n())},[r]),jX(()=>{r&&lA(n())})}function p3e(t,{ownerDocument:e,container:r,initialFocus:n,initialFocusFallback:s}){let o=Ae.useRef(null),c=Bb(!!(t&1),"focus-trap#initial-focus"),u=KF();return WF(()=>{if(t===0)return;if(!c){s!=null&&s.current&&lA(s.current);return}let i=r.current;i&&dS(()=>{if(!u.current)return;let m=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===m){o.current=m;return}}else if(i.contains(m)){o.current=m;return}if(n!=null&&n.current)lA(n.current);else{if(t&16){if(n_(i,Zp.First|Zp.AutoFocus)!==nI.Error)return}else if(n_(i,Zp.First)!==nI.Error)return;if(s!=null&&s.current&&(lA(s.current),(e==null?void 0:e.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=e==null?void 0:e.activeElement})},[s,c,t]),o}function A3e(t,{ownerDocument:e,container:r,containers:n,previousActiveElement:s}){let o=KF(),c=!!(t&4);PX(e==null?void 0:e.defaultView,"focus",u=>{if(!c||!o.current)return;let i=zX(n);w0(r.current)&&i.add(r.current);let m=s.current;if(!m)return;let g=u.target;w0(g)?QX(i,g)?(s.current=g,lA(g)):(u.preventDefault(),u.stopPropagation(),lA(m)):lA(s.current)},!0)}function QX(t,e){for(let r of t)if(r.contains(e))return!0;return!1}function HX(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:GX)!==Ae.Fragment||Ui.Children.count(t.children)===1}let AS=Ae.createContext(null);AS.displayName="TransitionContext";var m3e=(t=>(t.Visible="visible",t.Hidden="hidden",t))(m3e||{});function g3e(){let t=Ae.useContext(AS);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function y3e(){let t=Ae.useContext(mS);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let mS=Ae.createContext(null);mS.displayName="NestingContext";function gS(t){return"children"in t?gS(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function VX(t,e){let r=k0(t),n=Ae.useRef([]),s=KF(),o=$F(),c=Qa((S,P=bm.Hidden)=>{let j=n.current.findIndex(({el:D})=>D===S);j!==-1&&(vA(P,{[bm.Unmount](){n.current.splice(j,1)},[bm.Hidden](){n.current[j].state="hidden"}}),o.microTask(()=>{var D;!gS(n)&&s.current&&((D=r.current)==null||D.call(r))}))}),u=Qa(S=>{let P=n.current.find(({el:j})=>j===S);return P?P.state!=="visible"&&(P.state="visible"):n.current.push({el:S,state:"visible"}),()=>c(S,bm.Unmount)}),i=Ae.useRef([]),m=Ae.useRef(Promise.resolve()),g=Ae.useRef({enter:[],leave:[]}),C=Qa((S,P,j)=>{i.current.splice(0),e&&(e.chains.current[P]=e.chains.current[P].filter(([D])=>D!==S)),e==null||e.chains.current[P].push([S,new Promise(D=>{i.current.push(D)})]),e==null||e.chains.current[P].push([S,new Promise(D=>{Promise.all(g.current[P].map(([F,R])=>R)).then(()=>D())})]),P==="enter"?m.current=m.current.then(()=>e==null?void 0:e.wait.current).then(()=>j(P)):j(P)}),B=Qa((S,P,j)=>{Promise.all(g.current[P].splice(0).map(([D,F])=>F)).then(()=>{var D;(D=i.current.shift())==null||D()}).then(()=>j(P))});return Ae.useMemo(()=>({children:n,register:u,unregister:c,onStart:C,onStop:B,wait:m,chains:g}),[u,c,n,C,B,g,m])}let GX=Ae.Fragment,$X=Q4.RenderStrategy;function v3e(t,e){var r,n;let{transition:s=!0,beforeEnter:o,afterEnter:c,beforeLeave:u,afterLeave:i,enter:m,enterFrom:g,enterTo:C,entered:B,leave:S,leaveFrom:P,leaveTo:j,...D}=t,[F,R]=Ae.useState(null),V=Ae.useRef(null),Y=HX(t),te=Fp(...Y?[V,e,R]:e===null?[]:[e]),se=(r=D.unmount)==null||r?bm.Unmount:bm.Hidden,{show:oe,appear:K,initial:de}=g3e(),[we,J]=Ae.useState(oe?"visible":"hidden"),Z=y3e(),{register:Ie,unregister:be}=Z;ed(()=>Ie(V),[Ie,V]),ed(()=>{if(se===bm.Hidden&&V.current){if(oe&&we!=="visible"){J("visible");return}return vA(we,{hidden:()=>be(V),visible:()=>Ie(V)})}},[we,V,Ie,be,oe,se]);let He=Eb();ed(()=>{if(Y&&He&&we==="visible"&&V.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[V,we,He,Y]);let Fe=de&&!K,ve=K&&oe&&de,_e=Ae.useRef(!1),ze=VX(()=>{_e.current||(J("hidden"),be(V))},Z),Ne=Qa(Ke=>{_e.current=!0;let et=Ke?"enter":"leave";ze.onStart(V,et,tt=>{tt==="enter"?o==null||o():tt==="leave"&&(u==null||u())})}),st=Qa(Ke=>{let et=Ke?"enter":"leave";_e.current=!1,ze.onStop(V,et,tt=>{tt==="enter"?c==null||c():tt==="leave"&&(i==null||i())}),et==="leave"&&!gS(ze)&&(J("hidden"),be(V))});Ae.useEffect(()=>{Y&&s||(Ne(oe),st(oe))},[oe,Y,s]);let ie=!(!s||!Y||!He||Fe),[,le]=zEe(ie,F,oe,{start:Ne,end:st}),pe=Ug({ref:te,className:((n=eI(D.className,ve&&m,ve&&g,le.enter&&m,le.enter&&le.closed&&g,le.enter&&!le.closed&&C,le.leave&&S,le.leave&&!le.closed&&P,le.leave&&le.closed&&j,!le.transition&&oe&&B))==null?void 0:n.trim())||void 0,...UEe(le)}),fe=0;we==="visible"&&(fe|=Pf.Open),we==="hidden"&&(fe|=Pf.Closed),oe&&we==="hidden"&&(fe|=Pf.Opening),!oe&&we==="visible"&&(fe|=Pf.Closing);let Qe=nf();return Ui.createElement(mS.Provider,{value:ze},Ui.createElement(GEe,{value:fe},Qe({ourProps:pe,theirProps:D,defaultTag:GX,features:$X,visible:we==="visible",name:"Transition.Child"})))}function x3e(t,e){let{show:r,appear:n=!1,unmount:s=!0,...o}=t,c=Ae.useRef(null),u=HX(t),i=Fp(...u?[c,e]:e===null?[]:[e]);Eb();let m=pS();if(r===void 0&&m!==null&&(r=(m&Pf.Open)===Pf.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,C]=Ae.useState(r?"visible":"hidden"),B=VX(()=>{r||C("hidden")}),[S,P]=Ae.useState(!0),j=Ae.useRef([r]);ed(()=>{S!==!1&&j.current[j.current.length-1]!==r&&(j.current.push(r),P(!1))},[j,r]);let D=Ae.useMemo(()=>({show:r,appear:n,initial:S}),[r,n,S]);ed(()=>{r?C("visible"):!gS(B)&&c.current!==null&&C("hidden")},[r,B]);let F={unmount:s},R=Qa(()=>{var te;S&&P(!1),(te=t.beforeEnter)==null||te.call(t)}),V=Qa(()=>{var te;S&&P(!1),(te=t.beforeLeave)==null||te.call(t)}),Y=nf();return Ui.createElement(mS.Provider,{value:B},Ui.createElement(AS.Provider,{value:D},Y({ourProps:{...F,as:Ae.Fragment,children:Ui.createElement(qX,{ref:i,...F,...o,beforeEnter:R,beforeLeave:V})},theirProps:{},defaultTag:Ae.Fragment,features:$X,visible:g==="visible",name:"Transition"})))}function _3e(t,e){let r=Ae.useContext(AS)!==null,n=pS()!==null;return Ui.createElement(Ui.Fragment,null,!r&&n?Ui.createElement(sI,{ref:e,...t}):Ui.createElement(qX,{ref:e,...t}))}let sI=Jd(x3e),qX=Jd(v3e),XF=Jd(_3e),b3e=Object.assign(sI,{Child:XF,Root:sI});var w3e=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(w3e||{}),C3e=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(C3e||{});let S3e={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},YF=Ae.createContext(null);YF.displayName="DialogContext";function yS(t){let e=Ae.useContext(YF);if(e===null){let r=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,yS),r}return e}function B3e(t,e){return vA(e.type,S3e,t,e)}let o9=Jd(function(t,e){let r=Ae.useId(),{id:n=`headlessui-dialog-${r}`,open:s,onClose:o,initialFocus:c,role:u="dialog",autoFocus:i=!0,__demoMode:m=!1,unmount:g=!1,...C}=t,B=Ae.useRef(!1);u=function(){return u==="dialog"||u==="alertdialog"?u:(B.current||(B.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let S=pS();s===void 0&&S!==null&&(s=(S&Pf.Open)===Pf.Open);let P=Ae.useRef(null),j=Fp(P,e),D=hS(P),F=s?0:1,[R,V]=Ae.useReducer(B3e,{titleId:null,descriptionId:null,panelRef:Ae.createRef()}),Y=Qa(()=>o(!1)),te=Qa(le=>V({type:0,id:le})),se=Eb()?F===0:!1,[oe,K]=t3e(),de={get current(){var le;return(le=R.panelRef.current)!=null?le:P.current}},we=UX(),{resolveContainers:J}=o3e({mainTreeNode:we,portals:oe,defaultContainers:[de]}),Z=S!==null?(S&Pf.Closing)===Pf.Closing:!1;mEe(m||Z?!1:se,{allowed:Qa(()=>{var le,pe;return[(pe=(le=P.current)==null?void 0:le.closest("[data-headlessui-portal]"))!=null?pe:null]}),disallowed:Qa(()=>{var le;return[(le=we==null?void 0:we.closest("body > *:not(#headlessui-portal-root)"))!=null?le:null]})});let Ie=BX.get(null);ed(()=>{if(se)return Ie.actions.push(n),()=>Ie.actions.pop(n)},[Ie,n,se]);let be=LX(Ie,Ae.useCallback(le=>Ie.selectors.isTop(le,n),[Ie,n]));TEe(be,J,le=>{le.preventDefault(),Y()}),i3e(be,D==null?void 0:D.defaultView,le=>{le.preventDefault(),le.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),Y()}),kEe(m||Z?!1:se,D,J),gEe(se,P,Y);let[He,Fe]=GBe(),ve=Ae.useMemo(()=>[{dialogState:F,close:Y,setTitleId:te,unmount:g},R],[F,R,Y,te,g]),_e=Ae.useMemo(()=>({open:F===0}),[F]),ze={ref:j,id:n,role:u,tabIndex:-1,"aria-modal":m?void 0:F===0?!0:void 0,"aria-labelledby":R.titleId,"aria-describedby":He,unmount:g},Ne=!s3e(),st=Hg.None;se&&!m&&(st|=Hg.RestoreFocus,st|=Hg.TabLock,i&&(st|=Hg.AutoFocus),Ne&&(st|=Hg.InitialFocus));let ie=nf();return Ui.createElement($Ee,null,Ui.createElement(i9,{force:!0},Ui.createElement(n3e,null,Ui.createElement(YF.Provider,{value:ve},Ui.createElement(OX,{target:P},Ui.createElement(i9,{force:!1},Ui.createElement(Fe,{slot:_e},Ui.createElement(K,null,Ui.createElement(d3e,{initialFocus:c,initialFocusFallback:P,containers:J,features:st},Ui.createElement(YBe,{value:Y},ie({ourProps:ze,theirProps:C,slot:_e,defaultTag:E3e,features:T3e,visible:F===0,name:"Dialog"})))))))))))}),E3e="div",T3e=Q4.RenderStrategy|Q4.Static;function L3e(t,e){let{transition:r=!1,open:n,...s}=t,o=pS(),c=t.hasOwnProperty("open")||o!==null,u=t.hasOwnProperty("onClose");if(!c&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(n!==void 0||r)&&!s.static?Ui.createElement(s9,null,Ui.createElement(b3e,{show:n,transition:r,unmount:s.unmount},Ui.createElement(o9,{ref:e,...s}))):Ui.createElement(s9,null,Ui.createElement(o9,{ref:e,open:n,...s}))}let I3e="div";function N3e(t,e){let r=Ae.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:s=!1,...o}=t,[{dialogState:c,unmount:u},i]=yS("Dialog.Panel"),m=Fp(e,i.panelRef),g=Ae.useMemo(()=>({open:c===0}),[c]),C=Qa(D=>{D.stopPropagation()}),B={ref:m,id:n,onClick:C},S=s?XF:Ae.Fragment,P=s?{unmount:u}:{},j=nf();return Ui.createElement(S,{...P},j({ourProps:B,theirProps:o,slot:g,defaultTag:I3e,name:"Dialog.Panel"}))}let F3e="div";function P3e(t,e){let{transition:r=!1,...n}=t,[{dialogState:s,unmount:o}]=yS("Dialog.Backdrop"),c=Ae.useMemo(()=>({open:s===0}),[s]),u={ref:e,"aria-hidden":!0},i=r?XF:Ae.Fragment,m=r?{unmount:o}:{},g=nf();return Ui.createElement(i,{...m},g({ourProps:u,theirProps:n,slot:c,defaultTag:F3e,name:"Dialog.Backdrop"}))}let j3e="h2";function M3e(t,e){let r=Ae.useId(),{id:n=`headlessui-dialog-title-${r}`,...s}=t,[{dialogState:o,setTitleId:c}]=yS("Dialog.Title"),u=Fp(e);Ae.useEffect(()=>(c(n),()=>c(null)),[n,c]);let i=Ae.useMemo(()=>({open:o===0}),[o]),m={ref:u,id:n};return nf()({ourProps:m,theirProps:s,slot:i,defaultTag:j3e,name:"Dialog.Title"})}let k3e=Jd(L3e),D3e=Jd(N3e);Jd(P3e);let O3e=Jd(M3e),Jv=Object.assign(k3e,{Panel:D3e,Title:O3e,Description:KBe});function G4({isOpen:t,onClose:e,featureName:r,phone:n,email:s,agent_id:o,onPaymentSuccess:c}){const[u,i]=Ae.useState(null),[m,g]=Ae.useState((o||"1234")+Date.now()),[C,B]=Ae.useState(""),[S,P]=Ae.useState(!1),[j,D]=Ae.useState(!1),[F,R]=Ae.useState(""),[V,Y]=Ae.useState(null),[te,se]=Ae.useState("UGX"),[oe,K]=Ae.useState(s||""),de=og(),we=n||F;Ae.useEffect(()=>{t&&((async()=>{try{const _e=(await Tr.get("/api/feature/price/")).data.find(ze=>ze.feature_name===r);Y(_e)}catch(ve){console.error("Failed to fetch price info:",ve)}})(),i(null),B(""))},[t,r]);const J=async Fe=>{var ve,_e;Fe.preventDefault(),P(!0),B(""),n&&localStorage.removeItem("token");try{const ze=await Tr.post("/api/payments/initiate",{phone_number:we,feature_name:r,txn_id:m});B(ze.data.msg||"Payment initiated. Please confirm on your phone."),D(!0),Z(m,we)}catch(ze){B("Error: "+(((_e=(ve=ze.response)==null?void 0:ve.data)==null?void 0:_e.error)||ze.message)),P(!1)}},Z=(Fe,ve)=>{let _e=0;const ze=40,Ne=setInterval(async()=>{var st;_e++;try{const le=(st=(await Tr.get(`/api/payments/status/${Fe}`)).data.status)==null?void 0:st.toLowerCase();le.includes("success")||le.includes("confirmed")?(clearInterval(Ne),Ie(ve)):le.includes("failed")||le.includes("rejected")?(clearInterval(Ne),D(!1),B("Payment declined or failed."),P(!1)):_e>=ze&&(clearInterval(Ne),D(!1),B("No confirmation received. Please try again."),P(!1))}catch(ie){clearInterval(Ne),D(!1),B("Error during verification: "+ie.message),P(!1)}},3e3)},Ie=async Fe=>{try{(await Tr.get(`/api/payments/access/${r}`,{params:{phone_number:Fe}})).data.access?c?c():de(`/${r}`):B("Payment confirmed, but access not activated.")}catch{B("Error during access verification.")}finally{P(!1),D(!1)}},be=async Fe=>{var ve,_e;Fe.preventDefault(),P(!0),B(""),console.log(`
`+"=".repeat(60)),console.log(" FRONTEND: Initiating DPO Payment"),console.log("=".repeat(60));try{const ze=await Tr.post("/api/payments/dpo/initiate",{feature_name:r,phone_number:we,email:oe,currency:te});if(console.log(" FRONTEND: Response received!"),console.log("Response data:",ze.data),ze.data.success){console.log(" Opening DPO in popup and starting polling...");const Ne=window.open(ze.data.payment_url,"DPO Payment","width=800,height=600,scrollbars=yes,resizable=yes");D(!0),He(ze.data.trans_token,Ne)}else console.error(" FRONTEND: Success = false"),B("Error: "+ze.data.error),P(!1)}catch(ze){console.error(" FRONTEND: Exception caught!",ze),B("Error: "+(((_e=(ve=ze.response)==null?void 0:ve.data)==null?void 0:_e.error)||ze.message)),P(!1)}},He=(Fe,ve)=>{console.log(" Starting DPO polling for token:",Fe);let _e=0;const ze=6e3;B(" Payment window opened. Please complete your payment in the popup.");const Ne=setInterval(async()=>{if(_e++,console.log(` Polling attempt ${_e}/${ze}`),ve.closed){clearInterval(Ne),D(!1),P(!1),B(" Payment window was closed. If you completed payment, please wait a moment for confirmation.");return}try{const ie=(await Tr.get(`/api/payments/dpo/verify/${Fe}`)).data;if(console.log(" Verification result:",ie),ie.success&&ie.status==="verified")clearInterval(Ne),D(!1),console.log(" Payment verified! Closing popup and triggering success..."),ve&&!ve.closed&&ve.close(),B(" Payment confirmed! Generating your report..."),c?c():window.location.href=`/payment/success?TransactionToken=${Fe}`;else if(ie.status==="pending"){const le=Math.ceil((ze-_e)*3/60),pe=Math.floor(le/60),fe=le%60;pe>0?B(` Waiting for payment confirmation... (${pe}h ${fe}min remaining)`):B(` Waiting for payment confirmation... (${fe} minutes remaining)`),console.log(" Payment still pending, continuing...")}else ie.status==="failed"&&(clearInterval(Ne),D(!1),P(!1),B(" Payment was declined or cancelled."),ve&&!ve.closed&&ve.close())}catch(st){console.error(" Polling error:",st)}_e>=ze&&(clearInterval(Ne),D(!1),P(!1),B(" Payment verification timeout (5 hours). If you completed payment, it may take a few minutes to process. Please contact support if needed."),ve&&!ve.closed&&ve.close())},3e3)};return p.jsxs(Jv,{open:t,onClose:e,className:"relative z-50",children:[p.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:p.jsxs(Jv.Panel,{as:oA.div,initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-xl relative",children:[p.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),!u&&p.jsxs(p.Fragment,{children:[p.jsx(Jv.Title,{className:"text-2xl font-bold mb-2 text-gray-800",children:"Choose Payment Method"}),p.jsxs("p",{className:"text-gray-600 mb-6",children:["Select how you'd like to pay for ",p.jsx("span",{className:"font-semibold text-green-600",children:r})]}),V&&p.jsxs("div",{className:"mb-6 p-3 bg-green-50 rounded-lg border border-green-200",children:[p.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Amount to pay:"}),p.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:[V.price," UGX"]}),V.duration_days&&p.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Access duration: ",V.duration_days," days"]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("button",{onClick:()=>i("mobile"),className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-medium flex items-center justify-center",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Pay with Mobile Money"]}),p.jsxs("button",{onClick:()=>i("dpo"),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Pay with Card / Mobile Money (DPO)"]})]})]}),u==="mobile"&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>i(null),className:"mb-4 text-sm text-gray-600 hover:text-gray-800 flex items-center",children:[p.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to payment methods"]}),p.jsx(Jv.Title,{className:"text-xl font-bold mb-4",children:"Mobile Money Payment"}),V&&p.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[p.jsxs("p",{className:"font-medium text-gray-700",children:["Price: ",V.price," UGX"]}),V.duration_days&&p.jsxs("p",{className:"text-sm text-gray-600",children:["Access duration: ",V.duration_days," days"]})]}),p.jsxs("form",{onSubmit:J,className:"space-y-4",children:[!n&&p.jsx("input",{type:"tel",placeholder:"Your phone number (256XXXXXXXXX)",className:"w-full p-2.5 border rounded-lg",value:F,onChange:Fe=>R(Fe.target.value),required:!0,disabled:S||j}),we&&p.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: +",p.jsx("strong",{children:we})]}),p.jsx("input",{type:"text",placeholder:"Transaction ID",className:"w-full p-2.5 border rounded-lg bg-gray-100 text-gray-600 cursor-not-allowed",value:m,readOnly:!0}),p.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 font-medium disabled:bg-gray-400",disabled:S||j,children:S?"Sending...":j?"Waiting for confirmation...":"Send Payment"})]}),j&&p.jsx("div",{className:"flex justify-center mt-4",children:p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-green-500"})}),C&&p.jsx("p",{className:"mt-4 text-sm text-gray-600",children:C})]}),u==="dpo"&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>i(null),className:"mb-4 text-sm text-gray-600 hover:text-gray-800 flex items-center",children:[p.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to payment methods"]}),p.jsx(Jv.Title,{className:"text-xl font-bold mb-2",children:"Pay with Card or Mobile Money"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Secure payment via DPO Pay"}),p.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg space-y-2",children:[p.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[p.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Credit/Debit Cards (Visa, Mastercard)"]}),p.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[p.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Mobile Money (MTN, Airtel, Vodafone, Tigo)"]})]}),V&&p.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[p.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[V.price," ",te]}),V.duration_days&&p.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Access duration: ",V.duration_days," days"]})]}),p.jsxs("form",{onSubmit:be,className:"space-y-4",children:[!n&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Phone Number *"}),p.jsx("input",{type:"tel",placeholder:"+256XXXXXXXXX",className:"w-full p-2.5 border rounded-lg",value:F,onChange:Fe=>R(Fe.target.value),required:!0,disabled:S||j})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Email (optional)"}),p.jsx("input",{type:"email",placeholder:"your@email.com",className:"w-full p-2.5 border rounded-lg",value:oe,onChange:Fe=>K(Fe.target.value),disabled:S||j})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Currency *"}),p.jsxs("select",{className:"w-full p-2.5 border rounded-lg",value:te,onChange:Fe=>se(Fe.target.value),disabled:S||j,children:[p.jsx("option",{value:"UGX",children:" UGX - Ugandan Shilling"}),p.jsx("option",{value:"USD",children:" USD - US Dollar"}),p.jsx("option",{value:"KES",children:" KES - Kenyan Shilling"}),p.jsx("option",{value:"TZS",children:" TZS - Tanzanian Shilling"}),p.jsx("option",{value:"ZAR",children:" ZAR - South African Rand"})]})]}),p.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-medium disabled:bg-gray-400 flex items-center justify-center",disabled:S||j,children:S?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Opening Payment Window..."]}):j?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Waiting for payment confirmation..."]}):p.jsxs(p.Fragment,{children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Proceed to Secure Payment"]})})]}),j&&p.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Payment in progress"}),p.jsxs("p",{className:"text-xs text-blue-600",children:[" Complete your payment in the popup window",p.jsx("br",{})," Don't close this page - we're waiting for confirmation",p.jsx("br",{})," This usually takes 1-2 minutes"]})]})]})}),C&&!j&&p.jsx("div",{className:`mt-4 p-3 rounded-lg border ${C.includes("")?"bg-green-50 border-green-200":C.includes("")?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:p.jsx("p",{className:`text-sm ${C.includes("")?"text-green-700":C.includes("")?"text-blue-700":"text-red-700"}`,children:C})}),p.jsx("div",{className:"mt-4 pt-4 border-t",children:p.jsxs("p",{className:"text-xs text-gray-500 text-center flex items-center justify-center",children:[p.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Secure payment powered by DPO Pay"]})})]})]})})]})}const R3e=()=>{var ze;const[t,e]=Ae.useState(!1),[r,n]=Ae.useState(!1),[s,o]=Ae.useState({internalReferenceNumber:"",activityType:"",borderCrossCountry:"",comment:"",descriptionOfGoods:"",hsHeading:"",geoLocationConfidential:!1,goodsMeasure:{volume:"",netWeight:"",supplementaryUnit:"",supplementaryUnitQualifier:""},speciesInfo:{scientificName:"",commonName:""},producers:[{country:"",name:""}],operator:{identifierType:"",identifierValue:"",name:"",country:"",address:"",email:"",phone:""},countryOfActivity:""}),[c,u]=Ae.useState(""),[i,m]=Ae.useState(""),[g,C]=Ae.useState(""),[B,S]=Ae.useState(""),[P,j]=Ae.useState(!1),[D,F]=Ae.useState(null),R=["DOMESTIC","TRADE","IMPORT","EXPORT"],V=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK","XI"],Y=["ASV","ASVX","CCT","CEN","CTM","DAP","DHS","DTN","DTNE","DTNF","DTNG","DTNL","DTNM","DTNR","DTNS","DTNZ","ENP","EUR","GFI","GRM","GRT","HLT","HMT","KAC","KCC","KCL","KGM","KGMA","KGME","KGMG","KGMP","KGMS","KGMT","KLT","KMA","KMT","KNI","KNS","KPH","KPO","KPP","KSD","KSH","KUR","LPA","LTR","LTRA","MIL","MPR","MTK","MTQ","MTQC","MTR","MWH","NAR","NARB","NCL","NPR","TJO","TNE","TNEE","TNEI","TNEJ","TNEK","TNEM","TNER","TNEZ","WAT"],te=["eori","vat","cin","duns","comp_reg","comp_num","cbr","ship_man_comp_imo","ship_reg_owner_imo","remos","gln","tin"],[se,oe]=Ae.useState([]);Ae.useEffect(()=>{J()},[]);const[K,de]=Ae.useState(!1),[we]=Ae.useState("eudrsubmission"),J=async()=>{try{const Ne=await Tr.get("/api/pays/");oe(Ne.data.pays||[])}catch(Ne){console.error("Error fetching countries:",Ne)}},Z=Ne=>{const{name:st,value:ie}=Ne.target;if(st.startsWith("producers.")){const le=st.split(".")[1];o(pe=>{var fe;return{...pe,producers:[{...(fe=pe.producers)==null?void 0:fe[0],[le]:ie}]}})}else if(st.includes(".")){const[le,pe]=st.split(".");o(fe=>({...fe,[le]:{...fe[le],[pe]:ie}}))}else o(le=>({...le,[st]:ie}))},Ie=async()=>{var st;j(!1);let Ne;if(!c.trim()){F({error:"Please paste or import a GeoJSON."});return}try{Ne=JSON.parse(c)}catch{F({error:"GeoJSON is not valid JSON."});return}try{const ie=await Tr.post("/api/eudr/submit",{statement:s,geojson:Ne});F(ie.data)}catch(ie){F({error:((st=ie.response)==null?void 0:st.data)||ie.message})}console.log("Producers submitted:",s.producers),e(!0)},be=async()=>{var st;j(!1);let Ne;try{Ne=JSON.parse(c)}catch{F({error:"GeoJSON is not valid JSON."});return}try{const ie=await Tr.post("/api/eudr/amend",{statement:s,geojson:Ne,ddsIdentifier:i});F(ie.data)}catch(ie){F({error:((st=ie.response)==null?void 0:st.data)||ie.message})}e(!0)},He=async()=>{j(!1);const Ne=await Tr.delete(`/api/eudr/retract/${i}`);F(Ne.data),e(!0)},Fe=async()=>{j(!1);const Ne=await Tr.get(`/api/eudr/info/by-internal-ref/${s.internalReferenceNumber}`);F(Ne.data),e(!0)},ve=async()=>{var Ne;j(!1);try{const st=await Tr.get(`/api/eudr/info/by-dds-id/${i}`);F(st.data),e(!0)}catch(st){F({error:((Ne=st.response)==null?void 0:Ne.data)||st.message})}},_e=async()=>{j(!0);const Ne=await Tr.post("/api/eudr/info/by-ref-verification",{reference:g,verification:B});console.log(Ne.data.remote_data),F(Ne.data)};return p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full h-screen p-6",children:[p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow space-y-6 h-full overflow-auto",children:[p.jsx("h2",{className:"text-2xl font-bold",children:"Due Diligence Statements"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{className:"border p-2 rounded",name:"internalReferenceNumber",placeholder:"Internal Reference Number",onChange:Z,value:s.internalReferenceNumber}),p.jsxs("select",{className:"border p-2 rounded",name:"activityType",onChange:Z,children:[p.jsx("option",{value:"",children:"Select Activity Type"}),R.map(Ne=>p.jsx("option",{value:Ne,children:Ne},Ne))]}),p.jsxs("select",{className:"border p-2 rounded",name:"borderCrossCountry",onChange:Z,children:[p.jsx("option",{value:"",children:"Select Border Cross Country"}),V.map(Ne=>p.jsx("option",{value:Ne,children:Ne},Ne))]}),p.jsx("input",{className:"border p-2 rounded",name:"comment",placeholder:"Comment",onChange:Z}),p.jsx("input",{className:"border p-2 rounded",name:"descriptionOfGoods",placeholder:"Description of Goods",onChange:Z}),p.jsx("input",{type:"text",pattern:"[0-9]{2,8}",title:"Enter 2 to 8 digits",className:"border p-2 rounded",name:"hsHeading",placeholder:"HS Heading",onChange:Z}),p.jsx("input",{type:"number",step:"any",min:"0",className:"border p-2 rounded",name:"goodsMeasure.volume",placeholder:"Volume",onChange:Z}),p.jsx("input",{type:"number",step:"any",min:"0",className:"border p-2 rounded",name:"goodsMeasure.netWeight",placeholder:"Net Weight",onChange:Z}),p.jsx("input",{type:"number",step:"1",min:"0",className:"border p-2 rounded",name:"goodsMeasure.supplementaryUnit",placeholder:"Supplementary Unit",onChange:Z}),p.jsxs("select",{className:"border p-2 rounded",name:"goodsMeasure.supplementaryUnitQualifier",onChange:Z,children:[p.jsx("option",{value:"",children:"Select Qualifier"}),Y.map(Ne=>p.jsx("option",{value:Ne,children:Ne},Ne))]}),p.jsx("input",{className:"border p-2 rounded",name:"speciesInfo.scientificName",placeholder:"Scientific Name",onChange:Z}),p.jsx("input",{className:"border p-2 rounded",name:"speciesInfo.commonName",placeholder:"Common Name",onChange:Z}),p.jsxs("select",{className:"border p-2 rounded invalid:border-red-500",name:"producers.country",onChange:Z,required:!0,children:[p.jsx("option",{value:"",children:"Select producer Country"}),se.map(Ne=>p.jsx("option",{value:Ne.alpha2,children:Ne.nom_en_gb},Ne.id))]}),p.jsx("input",{className:"border p-2 rounded",name:"producers.name",placeholder:"Producer Name",onChange:Z})]}),p.jsx("h3",{className:"text-lg font-semibold",children:"Operator Info"}),p.jsxs("select",{className:"border p-2 rounded",name:"operator.identifierType",onChange:Z,value:s.operator.identifierType,children:[p.jsx("option",{value:"",children:"Select Identifier Type"}),te.map(Ne=>p.jsx("option",{value:Ne,children:Ne.toUpperCase()},Ne))]}),p.jsx("input",{className:"border p-2 rounded",name:"operator.identifierValue",placeholder:"Identifier Value",onChange:Z}),p.jsx("input",{className:"border p-2 rounded",name:"operator.name",placeholder:"Operator Name",onChange:Z}),p.jsxs("select",{className:"border p-2 rounded",name:"operator.country",onChange:Z,value:s.operator.country,children:[p.jsx("option",{value:"",children:"Select Country"}),se.map(Ne=>p.jsx("option",{value:Ne.alpha2,children:Ne.nom_en_gb},Ne.id))]}),p.jsx("input",{className:"border p-2 rounded",name:"operator.address",placeholder:"Operator Address",onChange:Z}),p.jsx("input",{className:"border p-2 rounded",name:"operator.email",placeholder:"Operator Email",type:"email",required:!0,onChange:Z,value:s.operator.email}),p.jsx("input",{className:"border p-2 rounded",name:"operator.phone",placeholder:"Phone Number",type:"tel",pattern:"(\\+\\d{1,3}\\s?)?(\\(\\d{3}\\)|\\d{3})[-\\s]?\\d{3}[-\\s]?\\d{4}",title:"Phone format: +123 123-456-7890 or (123) 456-7890",onChange:Z,value:s.operator.phone}),p.jsxs("select",{className:"border p-2 rounded",name:"countryOfActivity",onChange:Z,value:s.countryOfActivity,children:[p.jsx("option",{value:"",children:"Select Country of Activity"}),V.map(Ne=>p.jsx("option",{value:Ne,children:Ne},Ne))]}),p.jsx("textarea",{className:"w-full border p-2 rounded",rows:"4",placeholder:"GeoJSON",value:c,onChange:Ne=>u(Ne.target.value)}),p.jsx("label",{className:"block mb-2 font-semibold",children:"Import a GeoJSON (.json, .geojson) file"}),p.jsx("input",{type:"file",accept:".json, .geojson",className:"mb-4",onChange:Ne=>{const st=Ne.target.files[0];if(!st)return;const ie=new FileReader;ie.onload=le=>{try{const pe=JSON.parse(le.target.result);u(JSON.stringify(pe,null,2))}catch{alert("The JSON file is invalid.")}},ie.readAsText(st)}}),p.jsxs("label",{className:"flex items-center space-x-2",children:[p.jsx("input",{type:"checkbox",checked:s.geoLocationConfidential,onChange:()=>o(Ne=>({...Ne,geoLocationConfidential:!Ne.geoLocationConfidential}))}),p.jsx("span",{children:"Geo Location Confidential"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:Ie,children:"Submit"}),p.jsx("button",{className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700",onClick:be,children:"Amend"}),p.jsx("input",{className:"border p-2 rounded",placeholder:"DDS Identifier",value:i,onChange:Ne=>m(Ne.target.value)}),p.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",onClick:He,children:"Retract"}),p.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",onClick:Fe,children:"Get by Internal Ref"}),p.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",onClick:ve,children:"Get by DDS ID"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("input",{className:"border p-2 rounded",placeholder:"Reference",value:g,onChange:Ne=>C(Ne.target.value)}),p.jsx("input",{className:"border p-2 rounded",placeholder:"Verification Code",value:B,onChange:Ne=>S(Ne.target.value)}),p.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 col-span-2",onClick:()=>de(!0),children:"Verify"})]}),D&&p.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-x-auto",children:JSON.stringify(D,null,2)}),((ze=D==null?void 0:D.local_data)==null?void 0:ze.producers_json)&&p.jsxs("div",{className:"mt-4",children:[p.jsx("h4",{className:"text-lg font-bold",children:"Local Producers"}),p.jsx("ul",{className:"list-disc list-inside",children:JSON.parse(D.local_data.producers_json).map((Ne,st)=>p.jsxs("li",{children:[p.jsx("strong",{children:"Name:"})," ",Ne.name," - ",p.jsx("strong",{children:"Country:"})," ",Ne.country]},st))})]})]}),D&&(!P||P&&t)&&p.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl shadow space-y-4 h-full overflow-auto",children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Result"}),p.jsx(LBe,{data:D,referenceNumber:g,verificationCode:B,showPreview:r})]}),K&&p.jsx(G4,{isOpen:K,onClose:()=>de(!1),featureName:we,phone:s.operator.phone,onPaymentSuccess:()=>{de(!1),_e(),e(!0),n(!0)}})]})};function U3e(t,e=null){const[r,n]=Ae.useState(!1),[s,o]=Ae.useState(!0),[c,u]=Ae.useState(null);return console.log("ato amin use feature access hook ",t),Ae.useEffect(()=>{(async()=>{var m,g;try{let C=`/api/payments/access/${t}`;e&&(C+=`?phone_number=${encodeURIComponent(e)}`);const B=await Tr.get(C);n(B.data.access)}catch(C){n(!1),u(((g=(m=C.response)==null?void 0:m.data)==null?void 0:g.error)||"Error during access verification.")}finally{o(!1)}})()},[t,e]),{hasAccess:r,loading:s,error:c}}function z3e(t){Ae.useEffect(()=>{if(!t)return;const e=`used_${t}`,r=sessionStorage.getItem(e);if(r&&(Date.now()-parseInt(r,10))/6e4<2){console.log(" Accs rcent, pas besoin de reconsommer.");return}Tr.post(`/api/payments/consume/${t}`).then(()=>{console.log(" Usage consomm."),sessionStorage.setItem(e,Date.now().toString())}).catch(s=>{var o,c;console.error(" Erreur de consommation :",((c=(o=s.response)==null?void 0:o.data)==null?void 0:c.error)||s.message)})},[t])}function Q3e({feature:t,children:e}){const{hasAccess:r,loading:n}=U3e(t);return z3e(r?t:null),n?p.jsx("p",{className:"p-4",children:"Chargement des autorisations..."}):r?e:p.jsx(qg,{to:"/payment-required",state:{featureName:t},replace:!0})}function H3e(){var c;const t=og(),e=vu(),[r,n]=Ae.useState(!1),s=((c=e.state)==null?void 0:c.featureName)||"unknown-feature";console.log("ato amin payementrequired",s);const o=()=>{var u;t(((u=e.state)==null?void 0:u.from)||"/")};return p.jsxs("div",{className:"min-h-screen flex items-center justify-center flex-col text-center p-4",children:[p.jsx("h1",{className:"text-2xl font-semibold text-red-600 mb-4",children:"Restricted access"}),p.jsx("p",{className:"text-gray-700 mb-6",children:"This feature requires payment to access."}),p.jsxs("div",{className:"space-x-4",children:[p.jsx("button",{onClick:()=>t(-1),className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600",children:"Back"}),p.jsx("button",{onClick:()=>n(!0),className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Pay now"})]}),r&&p.jsx(G4,{isOpen:r,onClose:()=>n(!1),onSuccess:o,featureName:s})]})}const V3e=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState({feature_name:"",price:"",duration_days:"",usage_limit:""}),[c,u]=Ae.useState({user_id:"",guest_phone_number:"",feature_name:"",txn_id:"",payment_status:"pending",access_expires_at:"",usage_left:""}),[i,m]=Ae.useState(null),[g,C]=Ae.useState(null);Ae.useEffect(()=>{B(),S()},[]);const B=async()=>{try{const Y=await Tr.get("/api/feature/price/");e(Y.data)}catch(Y){console.error("Error fetching feature prices:",Y)}},S=async()=>{try{const Y=await Tr.get("/api/feature/access/");n(Y.data)}catch(Y){console.error("Error fetching access records:",Y)}},P=Y=>{const{name:te,value:se}=Y.target;o(oe=>({...oe,[te]:se}))},j=async Y=>{Y.preventDefault();try{i?await Tr.put(`/api/feature/price/${i}/edit`,s):await Tr.post("/api/feature/price/create",s),o({feature_name:"",price:""}),m(null),B()}catch(te){console.error("Error saving feature price:",te)}},D=Y=>{o({feature_name:Y.feature_name,price:Y.price,duration_days:Y.duration_days??"",usage_limit:Y.usage_limit??""}),m(Y.id)},F=Y=>{u({...Y}),C(Y.id)},R=async Y=>{try{await Tr.delete(`/api/feature/price/${Y}/delete`),B()}catch(te){console.error("Error deleting feature price:",te)}},V=async Y=>{try{await Tr.delete(`/api/feature/access/${Y}/delete`),S()}catch(te){console.error("Error deleting access:",te)}};return p.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl mb-4",children:"Feature Manager"}),p.jsxs("form",{onSubmit:j,className:"mb-4",children:[p.jsx("input",{type:"text",name:"feature_name",value:s.feature_name,onChange:P,placeholder:"Feature Name",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"number",name:"price",value:s.price,onChange:P,placeholder:"Price",className:"border p-2 rounded mr-2",required:!0}),p.jsx("input",{type:"number",name:"duration_days",value:s.duration_days,onChange:P,placeholder:"Duration in days",className:"border p-2 rounded mr-2"}),p.jsx("input",{type:"number",name:"usage_limit",value:s.usage_limit,onChange:P,placeholder:"Usage Limit",className:"border p-2 rounded mr-2"}),p.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:i?"Update Feature":"Add Feature"})]}),p.jsx("h3",{className:"text-xl mt-6",children:"Feature Prices"}),p.jsx("ul",{children:t.map(Y=>p.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[p.jsxs("span",{children:[Y.feature_name," - $",Y.price]}),p.jsxs("div",{children:[p.jsx("button",{onClick:()=>D(Y),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>R(Y.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},Y.id))}),p.jsx("h3",{className:"text-xl mt-6",children:"Access Records"}),p.jsx("ul",{children:r.map(Y=>p.jsxs("li",{className:"flex flex-col border-b py-2",children:[p.jsxs("span",{children:[p.jsx("strong",{children:"Feature:"})," ",Y.feature_name," | ",p.jsx("strong",{children:"Status:"})," ",Y.payment_status," | ",p.jsx("strong",{children:"Txn:"})," ",Y.txn_id]}),p.jsxs("div",{className:"mt-1",children:[p.jsx("button",{onClick:()=>F(Y),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),p.jsx("button",{onClick:()=>V(Y.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},Y.id))})]})},G3e=t=>new Promise(e=>setTimeout(e,t)),$3e=t=>{const[e,r]=Ae.useState({phone:"",email:"",agent_id:""}),[n,s]=Ae.useState(!1),o=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),c=()=>e.phone&&e.phone.trim()!==""&&e.email&&e.email.trim()!==""&&o(e.email);return{userInfo:e,setUserInfo:r,handleUserInfoSubmit:async i=>{i.preventDefault(),c()&&(s(!0),await G3e(2e3),localStorage.setItem("guest_phone",e.phone),localStorage.setItem("guest_email",e.email),e.agent_id&&localStorage.setItem("agent_id",e.agent_id),t(4),s(!1))},loading:n,isUserInfoValid:c}},q3e=()=>{const[t,e]=Ae.useState({eudr:null,carbon:null,geojson:null});return{files:t,handleFileChange:(n,s)=>{const o=s.target.files[0];e(c=>({...c,[n]:o}))}}},W3e=t=>new Promise(e=>setTimeout(e,t)),K3e=({files:t,geojson:e,userInfo:r,setStep:n,reportRefs:s})=>{const[o,c]=Ae.useState({eudr:null,carbon:null}),[u,i]=Ae.useState(!1),[m,g]=Ae.useState({eudr:!1,carbon:!1});return{reports:o,loading:u,showPaymentModal:m,setShowPaymentModal:g,handleReportReady:async B=>{var D;const S=B==="reporteudrguest"?"eudr":"carbon";let P=t[S]||t.geojson;if(!P&&e){console.log(" GeoJSON brut:",e);let F;e.type==="FeatureCollection"?F=e.features[0].geometry:e.type==="Feature"?F=e.geometry:F=e;const R={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:F}]};console.log(" GeoJSON format:",JSON.stringify(R,null,2));const V=new Blob([JSON.stringify(R,null,2)],{type:"application/json"});P=new File([V],"drawn-polygon.geojson",{type:"application/json"})}if(!P){console.error(" Aucun fichier ou geojson disponible");return}console.log(" Fichier  envoyer:",P.name,P.type);const j=new FormData;j.append("file",P),i(!0),await W3e(2e3);try{const R=(await Tr.post(`/api/gfw/Geojson/${B==="reportcarbonguest"?"CarbonReportFromFile":"ReportFromFile"}`,j,{headers:{"X-Guest-ID":localStorage.getItem("guest_id"),"X-Guest-Phone":r.phone}})).data.report;c(V=>({...V,[S]:R})),n(5)}catch(F){console.error(" Erreur lors de la gnration du rapport :",((D=F.response)==null?void 0:D.data)||F)}finally{i(!1)}}}},X3e=()=>{const[t,e]=Ae.useState(!1),[r,n]=Ae.useState(0),[s,o]=Ae.useState([]),[c,u]=Ae.useState(!0);return Ae.useEffect(()=>{localStorage.getItem("eudr_tutorial_completed")&&u(!1)},[]),{isActive:t,currentStep:r,completedSteps:s,showTutorial:c,startTutorial:()=>{e(!0),n(0)},nextStep:()=>{o(S=>[...new Set([...S,r])]),n(S=>S+1)},prevStep:()=>{n(S=>Math.max(0,S-1))},skipTutorial:()=>{e(!1),localStorage.setItem("eudr_tutorial_completed","true"),u(!1)},resetTutorial:()=>{n(0),o([]),localStorage.removeItem("eudr_tutorial_completed"),u(!0)}}},md=[{step:1,title:"Welcome! Let's Create Your EUDR Report",description:"This guide will walk you through creating your EUDR compliance report step by step. You'll define your farm location, choose your report type, and receive your complete analysis.",highlight:"welcome",targetStep:1,action:"Start",tips:["The process takes about 5 minutes","You can go back at any time","Your data is secure"]},{step:2,title:"Step 1: Locate Your Farm",description:"You have two options to define your area: upload an existing GeoJSON file OR create your polygon directly on the map.",highlight:"upload",targetStep:1,action:"Got it",tips:["Option A: Upload an existing .geojson file","Option B: Create your polygon with the interactive map below","Choose the method that's most convenient for you"]},{step:3,title:"Choose Your Creation Mode",description:"Before creating your polygon, you must choose your working mode. Two options are available:",highlight:"mode-toggle",targetStep:1,action:"Continue",tips:["Draw Mode: Draw directly on the map by clicking","Point Mode: Search for coordinates and add them point by point","The button is in the right panel"],detailedSteps:[{title:"Draw Mode (default)",description:"Click successively on the map to create the vertices of your polygon. Double-click to finish."},{title:"Point Mode (recommended for precise coordinates)",description:"Search for coordinates, then click 'Add Point' to add them to your polygon."}]},{step:4,title:"Search Your Location",description:"Use the search bar at the top of the map to find your location or enter precise coordinates.",highlight:"search-bar",targetStep:1,action:"Next",tips:["Place search: type 'Kampala' or your city name","Coordinate search: 'Lat: 0.3476, Lng: 32.5825'","Simplified format: '0.3476, 32.5825'","A red marker will appear on your search"]},{step:5,title:"Point Mode: Adding Points",description:"In Point Mode, after searching for a location, an 'Add Point' button appears on the marker. Click it to add this point to your polygon.",highlight:"point-mode-info",targetStep:1,action:"Understood",gifUrl:"/gifs/point-mode-demo.gif",tips:["Search for your first field corner","Click the red marker to see the 'Add Point' button","Repeat for each corner (minimum 3 points)","The polygon forms automatically after 3 points"]},{step:6,title:"Draw Mode: Drawing on the Map",description:"In Draw Mode, use the pencil tool to draw your polygon directly on the map.",highlight:"draw-controls",targetStep:1,action:"Next",gifUrl:"/gifs/draw-mode-demo.gif",tips:["Activate the pencil (polygon) tool at the top left of the map","Click on the map to create points","Double-click to close the polygon","Use the trash icon to delete and start over"]},{step:7,title:"Step 2: Choose Your Report Type",description:"Select the report(s) you need:",highlight:"report-type",targetStep:2,action:"Next",tips:["EUDR Report: European regulatory compliance analysis","Carbon Report: Carbon stock estimation","You can select both reports"]},{step:8,title:"Step 3: Your Information",description:"Enter your contact details to receive your report:",highlight:"user-info",targetStep:3,action:"Next",tips:["Phone: Required for mobile payment (format: 256XXXXXXXXX)","Email: To receive your report by email","Agent ID: Your unique identifier"]},{step:9,title:"Step 4: Payment",description:"Finalize your order by proceeding with secure payment:",highlight:"payment",targetStep:4,action:"Next",tips:["Secure payment via mobile money","Transparent pricing displayed","Instant confirmation"]},{step:10,title:"Step 5: Your Report",description:"View and download your analysis report:",highlight:"reports",targetStep:5,action:"Finish",tips:["Detailed report with mapping","Downloadable data in PDF","Stored in your client area"]}],Y3e=({initialCenter:t=[32.5825,.3476],zoom:e=8,onChange:r,highlightModeToggle:n="",highlightSearchBar:s="",highlightPointModeInfo:o="",highlightDrawControls:c=""})=>{const u=Ae.useRef(null),i=Ae.useRef(null),m=Ae.useRef(null),g=Ae.useRef(null),[C,B]=Ae.useState(null),[S,P]=Ae.useState(null),[j,D]=Ae.useState([]),[F,R]=Ae.useState(!1),[V,Y]=Ae.useState([]),[te,se]=Ae.useState(null),[oe,K]=Ae.useState([]),de=Ae.useRef(F);Ae.useEffect(()=>{de.current=F},[F]),Ae.useEffect(()=>{Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q";const Fe=new Li.Map({container:u.current,style:"mapbox://styles/mapbox/satellite-v9",center:t,zoom:e});i.current=Fe;const ve=new MG({displayControlsDefault:!1,controls:{polygon:!0,trash:!0}});Fe.addControl(ve),m.current=ve;const _e=st=>{const ie=st.match(/^[ ]*(?:Lat: )?(-?\d+\.?\d*)[, ]+(?:Lng: )?(-?\d+\.?\d*)[ ]*$/i);if(!ie)return null;const le=Number(ie[1]),pe=Number(ie[2]);return le<-90||le>90||pe<-180||pe>180?null:[{center:[pe,le],geometry:{type:"Point",coordinates:[pe,le]},place_name:`Lat: ${le}, Lng: ${pe}`,place_type:["coordinate"],properties:{},type:"Feature"}]},ze=new wC({accessToken:Li.accessToken,mapboxgl:Li,placeholder:"Search for places or coordinates (Lat: -12.34, Lng: 56.78)",localGeocoder:_e,reverseGeocode:!0});Fe.addControl(ze),g.current=ze,ze.on("result",st=>{const{geometry:ie,place_name:le}=st.result,[pe,fe]=ie.coordinates;te&&te.remove();const Qe=new Li.Marker({color:"#ff6b6b"}).setLngLat([pe,fe]).addTo(Fe),Ke=new Li.Popup({offset:25,maxWidth:"250px"}).setHTML(`
          <div style="text-align: center; padding: 5px; font-size: 12px;">
            <p style="margin: 0; color: #666;">
              ${pe.toFixed(4)}, ${fe.toFixed(4)}
            </p>
            ${de.current?`<button onclick="window.addPolygonPoint(${pe}, ${fe})" 
                      style="background: #4CAF50; color: white; border: none; 
                             padding: 6px 12px; border-radius: 4px; cursor: pointer; 
                             margin-top: 8px; font-size: 11px; font-weight: bold;">
                 Add Point
              </button>`:""}
          </div>
        `);Qe.setPopup(Ke),Ke.addTo(Fe),se(Qe)});const Ne=()=>{const st=ve.getAll();if(st.features.length>0){const ie=st.features[0],le=rf(ie);P(Math.round(le)),B(ie),r&&r(ie)}else P(null),B(null),r&&r(null)};return Fe.on("draw.create",Ne),Fe.on("draw.update",Ne),Fe.on("draw.delete",Ne),()=>{oe.forEach(st=>st.remove()),te&&te.remove(),Fe.remove()}},[]),Ae.useEffect(()=>(window.addPolygonPoint=(Fe,ve)=>{const _e=[...V,[Fe,ve]];Y(_e);const ze=new Li.Marker({color:"#4CAF50",scale:.8}).setLngLat([Fe,ve]).addTo(i.current);if(K(Ne=>[...Ne,ze]),te&&(te.remove(),se(null)),_e.length>=3){const Ne=[..._e,_e[0]],st={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Ne]}};m.current.deleteAll(),m.current.add(st);const ie=rf(st);P(Math.round(ie)),B(st),r&&r(st)}},()=>{delete window.addPolygonPoint}),[V,te,r]);const we=()=>{R(!F),F&&J()},J=()=>{Y([]),oe.forEach(Fe=>Fe.remove()),K([]),te&&(te.remove(),se(null)),m.current.deleteAll(),P(null),B(null),r&&r(null)},Z=()=>{D([...j,{name:"",value:""}])},Ie=(Fe,ve,_e)=>{const ze=[...j];ze[Fe][ve]=_e,D(ze),He(ze)},be=Fe=>{const ve=j.filter((_e,ze)=>ze!==Fe);D(ve),He(ve)},He=Fe=>{if(C){const ve={...C,properties:Object.fromEntries(Fe.map(_e=>[_e.name||"undefined",_e.value]))};B(ve),r&&r(ve)}};return p.jsxs("div",{className:"relative h-[500px] w-full flex",children:[p.jsx("div",{ref:u,className:`flex-1 rounded-xl shadow-md relative ${c}`}),s&&p.jsx("div",{className:`absolute top-0 left-0 w-full pointer-events-none z-[9999] ${s}`,children:p.jsx("div",{className:"h-12 mx-4 mt-4"})}),p.jsxs("div",{className:"w-80 bg-white border-l p-4 overflow-y-auto",children:[p.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Polygon Creator"}),p.jsxs("div",{className:`mb-4 p-3 bg-gray-50 rounded ${n}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-sm font-medium",children:"Construction Mode:"}),p.jsx("button",{onClick:we,className:`px-3 py-1 rounded text-sm font-medium transition-colors ${F?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:F?" Point Mode":" Draw Mode"})]}),F&&p.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[p.jsx("p",{children:" Search for coordinates"}),p.jsx("p",{children:' Click "Add Point" on markers'}),p.jsx("p",{children:" Need 3+ points to create polygon"}),p.jsxs("p",{className:"text-green-600 font-medium",children:["Points added: ",V.length]})]}),F&&V.length>0&&p.jsx("button",{onClick:J,className:"w-full mt-2 bg-red-500 text-white py-1 px-2 rounded text-sm hover:bg-red-600",children:" Reset Points"})]}),p.jsxs("div",{className:`mb-4 p-2 bg-blue-50 rounded text-sm text-blue-800 ${o}`,children:[p.jsx("strong",{children:"Search tips:"}),p.jsx("br",{}),' Place names: "Paris", "New York"',p.jsx("br",{}),' Coordinates: "Lat: -12.34, Lng: 56.78"',p.jsx("br",{}),' Or simply: "-12.34, 56.78"',F&&p.jsxs(p.Fragment,{children:[p.jsx("br",{}),p.jsx("br",{}),p.jsx("strong",{className:"text-green-700",children:"Point Mode Active:"}),p.jsx("br",{}),' Search will show "Add Point" button',p.jsx("br",{})," Click it to add each corner",p.jsx("br",{})," Polygon forms after 3+ points"]})]}),F&&V.length>0&&p.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded",children:[p.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Polygon Points:"}),p.jsx("div",{className:"max-h-32 overflow-y-auto",children:V.map((Fe,ve)=>p.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[ve+1,". Lng: ",Fe[0].toFixed(4),", Lat: ",Fe[1].toFixed(4)]},ve))})]}),p.jsxs("div",{className:"border-t pt-3",children:[p.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Properties:"}),j.map((Fe,ve)=>p.jsxs("div",{className:"mb-3 border-b pb-2",children:[p.jsx("input",{type:"text",placeholder:"Property Name",value:Fe.name,onChange:_e=>Ie(ve,"name",_e.target.value),className:"border p-2 rounded w-full mb-1 text-sm"}),p.jsx("input",{type:"text",placeholder:"Property Value",value:Fe.value,onChange:_e=>Ie(ve,"value",_e.target.value),className:"border p-2 rounded w-full mb-1 text-sm"}),p.jsx("button",{onClick:()=>be(ve),className:"text-red-600 text-sm hover:underline",children:" Remove"})]},ve)),p.jsx("button",{onClick:Z,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 mb-4",children:" Add property"})]}),S&&p.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded",children:[p.jsxs("div",{className:"text-sm text-gray-700",children:[p.jsx("strong",{children:"Area:"})," ",S.toLocaleString()," m"]}),p.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(",(S/1e4).toFixed(2)," hectares)"]})]}),C&&p.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:[p.jsx("div",{className:"text-sm text-gray-700 mb-2",children:p.jsx("strong",{children:"Polygon completed!"})}),p.jsxs("div",{className:"text-xs text-gray-500",children:["Vertices: ",C.geometry.coordinates[0].length-1," points"]})]})]})]})},Z3e=({title:t,onFileChange:e,onUpload:r,loading:n,inputName:s})=>p.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 transition-transform duration-300 transform hover:scale-[1.01]",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4",children:t}),p.jsx("input",{type:"file",accept:".geojson,application/geo+json",name:s,onChange:o=>e(s,o),className:"mb-4 block w-full border border-gray-300 rounded px-3 py-2 text-sm"}),p.jsx("button",{onClick:()=>r(s),className:`w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition duration-300 flex items-center justify-center gap-2 ${n?"opacity-70 cursor-not-allowed":""}`,disabled:n,children:n?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),p.jsx("span",{children:"Loading..."})]}):"Send and analyze"})]}),J3e=({files:t,onFileChange:e,geojson:r,setGeojson:n,onNext:s,canContinue:o=!1,highlightUpload:c="",highlightMap:u="",highlightModeToggle:i="",highlightSearchBar:m="",highlightPointModeInfo:g="",highlightDrawControls:C=""})=>{const B=S=>{n(S),localStorage.setItem("polygon_geojson",JSON.stringify(S))};return p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:c,children:p.jsx(Z3e,{inputName:"geojson",title:"Upload your farm GeoJSON file or create one.",onFileChange:e})}),p.jsx("div",{className:u,children:p.jsx(Y3e,{onChange:B,highlightModeToggle:i,highlightSearchBar:m,highlightPointModeInfo:g,highlightDrawControls:C})}),p.jsx("button",{onClick:s,disabled:!o,className:`px-4 py-2 rounded text-white transition-all ${o?"bg-green-600 hover:bg-green-700 cursor-pointer":"bg-gray-400 cursor-not-allowed opacity-60"}`,title:o?"":"Please upload a file or create a polygon first",children:"Next "})]})},eTe=({onSelect:t,highlightReportType:e=""})=>{const r=[{id:"reporteudrguest",title:"Farm (EUDR) Report",description:"Get a compliance report for your farm according to EUDR requirements.",color:"blue",icon:p.jsx(Dye,{className:"w-8 h-8 text-blue-600"})},{id:"reportcarbonguest",title:"Carbon Report",description:"Analyze your farm's carbon footprint and environmental impact.",color:"green",icon:p.jsx(Rye,{className:"w-8 h-8 text-green-600"})}];return p.jsxs("div",{className:"space-y-6 text-center",children:[p.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Choose your report type"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Select the type of report you would like to generate."}),p.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-4 ${e}`,children:r.map(n=>p.jsxs("button",{onClick:()=>t(n.id),className:"p-6 rounded-2xl shadow-md border border-gray-200 hover:shadow-lg hover:scale-[1.02] transform transition bg-white text-left",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-3 justify-center",children:[n.icon,p.jsx("h3",{className:`font-semibold text-${n.color}-700 text-lg`,children:n.title})]}),p.jsx("p",{className:"text-sm text-gray-600",children:n.description})]},n.id))})]})},tTe=({userInfo:t,setUserInfo:e,onSubmit:r,loading:n,isValid:s=!1,highlightUserInfo:o=""})=>{const c=t.phone&&t.phone.trim()!=="",u=t.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email);return p.jsxs("div",{className:"space-y-4",children:[p.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center",children:"Enter Your Contact Information"}),p.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Please provide your phone number (starting with 256) and email address."}),p.jsxs("form",{onSubmit:r,className:`bg-white p-6 rounded-2xl shadow-md max-w-md mx-auto space-y-4 ${o}`,children:[p.jsxs("div",{className:"text-left",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Agent ID ",p.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),p.jsx("input",{type:"text",value:t.agent_id,onChange:i=>e(m=>({...m,agent_id:i.target.value})),placeholder:"e.g. 123XXXXXXXXX",className:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),p.jsxs("div",{className:"text-left",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between",children:[p.jsxs("span",{children:["Phone Number ",p.jsx("span",{className:"text-red-500",children:"*"})]}),t.phone&&(c?p.jsx(I7,{className:"w-4 h-4 text-green-500"}):p.jsx(_1,{className:"w-4 h-4 text-red-500"}))]}),p.jsx("input",{type:"text",value:t.phone,onChange:i=>e(m=>({...m,phone:i.target.value})),placeholder:"e.g. 256XXXXXXXXX",className:`block w-full p-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors ${t.phone?c?"border-green-300 focus:ring-green-500 bg-green-50/30":"border-red-300 focus:ring-red-500 bg-red-50/30":"border-gray-300 focus:ring-blue-500"}`,required:!0}),t.phone&&!c&&p.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Phone number is required"})]}),p.jsxs("div",{className:"text-left",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between",children:[p.jsxs("span",{children:["Email Address ",p.jsx("span",{className:"text-red-500",children:"*"})]}),t.email&&(u?p.jsx(I7,{className:"w-4 h-4 text-green-500"}):p.jsx(_1,{className:"w-4 h-4 text-red-500"}))]}),p.jsx("input",{type:"email",value:t.email,onChange:i=>e(m=>({...m,email:i.target.value})),placeholder:"example@email.com",className:`block w-full p-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors ${t.email?u?"border-green-300 focus:ring-green-500 bg-green-50/30":"border-red-300 focus:ring-red-500 bg-red-50/30":"border-gray-300 focus:ring-blue-500"}`,required:!0}),t.email&&!u&&p.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid email address"})]}),p.jsx("button",{type:"submit",disabled:n||!s,className:`w-full py-2 px-4 rounded-lg text-white font-semibold transition-all ${n||!s?"bg-gray-400 cursor-not-allowed opacity-60":"bg-green-600 hover:bg-green-700"}`,title:s?"":"Please fill in all required fields correctly",children:n?"Processing...":"Continue to Payment "})]})]})},rTe=({selectedFeature:t,phone:e,setShowPaymentModal:r,loading:n,highlightPayment:s=""})=>{const c={reporteudrguest:{title:"Farm (EUDR) Report",description:"A compliance report for your farm according to EUDR requirements.",color:"blue"},reportcarbonguest:{title:"Carbon Report",description:"An analysis of your farm's carbon footprint and environmental impact.",color:"green"}}[t];return p.jsxs("div",{className:"space-y-4",children:[p.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center",children:"Unlock Your Report"}),p.jsxs("div",{className:`bg-white p-6 rounded-2xl shadow-md max-w-md mx-auto text-center space-y-4 ${s}`,children:[p.jsxs("p",{className:"text-sm text-gray-500",children:["You are about to purchase the ",p.jsx("span",{className:`font-semibold text-${c.color}-600`,children:c.title}),"."]}),p.jsx("p",{className:"text-gray-600 text-sm",children:c.description}),p.jsx("button",{disabled:n,onClick:()=>{t==="reporteudrguest"?r({eudr:!0,carbon:!1}):t==="reportcarbonguest"&&r({carbon:!0,eudr:!1})},className:`w-full py-2 px-4 rounded-lg text-white font-semibold ${n?"bg-gray-400 cursor-not-allowed":`bg-${c.color}-600 hover:bg-${c.color}-700`}`,children:n?"Processing...":"Pay Now"}),p.jsxs("p",{className:"text-xs text-gray-400",children:["Linked to phone number: ",p.jsx("span",{className:"font-medium",children:e})]})]})]})},WX=({results:t,reportRef:e})=>{var i,m,g,C,B,S,P,j,D,F,R;const r=((m=(i=t["forest carbon gross emissions"])==null?void 0:i[0])==null?void 0:m.data_fields)||{},n=((C=(g=t["forest carbon gross removals"])==null?void 0:g[0])==null?void 0:C.data_fields)||{},s=((S=(B=t["forest carbon net flux"])==null?void 0:B[0])==null?void 0:S.data_fields)||{};(j=(P=t["full extent aboveground carbon potential sequestration"])==null?void 0:P[0])!=null&&j.data_fields;const o={labels:["Carbon Gross Emissions","Carbon Gross Removals","Carbon Net Flux","Carbon Sequestration"],datasets:[{data:[r.gfw_forest_carbon_gross_emissions__Mg_CO2e||0,n.gfw_forest_carbon_gross_removals__Mg_CO2e||0,s.gfw_forest_carbon_net_flux__Mg_CO2e||0],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#8BC34A"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#8BC34A"]}]},c={...r,...n,...s},u=(R=(F=(D=t["forest carbon gross emissions"])==null?void 0:D[0])==null?void 0:F.coordinates)==null?void 0:R[0];return p.jsxs("div",{ref:e,className:"carbon-report-a4",children:[p.jsxs("div",{className:"report-header-wrapper",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("div",{style:{width:"120px",height:"120px",position:"relative",display:"flex",alignItems:"center"},children:p.jsx("div",{className:"bg-white rounded-full ",children:p.jsx("img",{src:PC,alt:"Parrot",className:"w-24 h-24 rounded-full object-cover"})})}),p.jsxs("div",{className:"report-header",style:{textAlign:"center"},children:[p.jsx("h2",{children:"Carbon Emissions Assessment Summary"}),p.jsx("p",{className:"subtitle"})]}),p.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"report-logo",style:{width:"120px",height:"120px",objectFit:"contain"}})]}),p.jsxs("div",{className:"report-body",children:[p.jsx("h3",{children:"Carbon Assessment Summary"}),Vve(c),p.jsxs("div",{className:"report-section",children:[p.jsx("h4",{children:"Carbon Emissions and Sequestration"}),p.jsx("div",{style:{width:"100%",maxWidth:"400px",height:"150px",margin:"0 auto"},children:p.jsx(IN,{data:o,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}}}})})]}),u&&p.jsxs("div",{className:"report-section",children:[p.jsx("h4",{children:"Plot Map"}),p.jsx("img",{src:Zq(u),alt:"Map",className:"report-map"})]})]}),p.jsx("div",{className:"report-footer",children:p.jsx("p",{children:"Generated by NKUSU | AGRIYIELDS"})})]})},nTe=({reports:t,reportRefs:e,highlightReports:r=""})=>p.jsxs("div",{className:"space-y-6",children:[p.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center",children:"Your Reports"}),p.jsxs("div",{className:`flex flex-col items-center fade-in space-y-8 ${r}`,children:[t.eudr&&p.jsxs("div",{className:"w-full",children:[p.jsx(UC,{results:t.eudr,reportRef:e.eudr}),p.jsx("button",{onClick:async()=>{const n=await O4(e.eudr,"eudr");if(n){const s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download="EUDR_Report.pdf",o.click()}},className:"bg-blue-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-blue-700 transition duration-300 w-full",children:" Download the EUDR PDF"})]}),t.carbon&&p.jsxs("div",{className:"w-full",children:[p.jsx(WX,{results:t.carbon,reportRef:e.carbon}),p.jsx("button",{onClick:async()=>{const n=await O4(e.carbon,"carbon");if(n){const s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download="Carbon_Report.pdf",o.click()}},className:"bg-green-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-green-700 transition duration-300 w-full",children:" Download the Carbon PDF"})]})]})]}),op=({step:t,onNext:e,onPrev:r,onSkip:n,isFirst:s,isLast:o,totalSteps:c,currentIndex:u,position:i="top"})=>{if(t.highlight==="welcome")return p.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[10000]",style:{animation:"fadeIn 0.3s ease-out"},children:[p.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg shadow-2xl p-6 text-white border-2 border-blue-400 max-w-xl mx-4",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-white text-blue-600 rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm",children:t.step}),p.jsx("h3",{className:"font-bold text-lg",children:t.title})]}),p.jsx("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors",children:p.jsx(Am,{className:"w-5 h-5"})})]}),p.jsx("p",{className:"text-white/95 mb-4 text-sm leading-relaxed",children:t.description}),t.gifUrl&&p.jsx("div",{className:"mb-4 rounded-lg overflow-hidden border-2 border-white/20 bg-white/5",children:p.jsx("img",{src:t.gifUrl,alt:`${t.title} demonstration`,className:"w-full h-auto",loading:"lazy"})}),t.tips&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-4 backdrop-blur",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(_1,{className:"w-4 h-4 text-yellow-300"}),p.jsx("span",{className:"font-semibold text-sm",children:"Practical tips:"})]}),p.jsx("ul",{className:"space-y-1.5",children:t.tips.map((C,B)=>p.jsxs("li",{className:"text-xs text-white/90 flex items-start gap-2",children:[p.jsx("span",{className:"text-yellow-300 mt-0.5",children:""}),p.jsx("span",{children:C})]},B))})]}),p.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[p.jsxs("button",{onClick:r,disabled:s,className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${s?"text-white/40 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:[p.jsx($6,{className:"w-4 h-4"}),"Previous"]}),p.jsxs("button",{onClick:e,className:"flex items-center gap-1 px-4 py-1.5 bg-white text-blue-600 rounded font-semibold text-sm hover:bg-blue-50 transition-colors",children:[t.action,p.jsx(q6,{className:"w-4 h-4"})]})]}),p.jsx("div",{className:"mt-4 flex items-center justify-center gap-1.5",children:Array.from({length:c}).map((C,B)=>p.jsx("div",{className:`h-1.5 rounded-full transition-all ${B<=u?"w-8 bg-white":"w-1.5 bg-white/30"}`},B))})]}),p.jsx("style",{children:`
          @keyframes fadeIn {
            from {
              opacity: 0;
            }
            to {
              opacity: 1;
            }
          }
        `})]});const g={top:"bottom-full mb-4",bottom:"top-full mt-4",left:"right-full mr-4",right:"left-full ml-4"};return p.jsxs("div",{className:`absolute ${g[i]} left-1/2 -translate-x-1/2 z-[10000] w-96`,style:{animation:"fadeIn 0.3s ease-out",pointerEvents:"auto"},children:[p.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg shadow-2xl p-6 text-white border-2 border-blue-400",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"bg-white text-blue-600 rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm",children:t.step}),p.jsx("h3",{className:"font-bold text-lg",children:t.title})]}),p.jsx("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors",children:p.jsx(Am,{className:"w-5 h-5"})})]}),p.jsx("p",{className:"text-white/95 mb-4 text-sm leading-relaxed",children:t.description}),t.gifUrl&&p.jsx("div",{className:"mb-4 rounded-lg overflow-hidden border-2 border-white/20 bg-white/5",children:p.jsx("img",{src:t.gifUrl,alt:`${t.title} demonstration`,className:"w-full h-auto",loading:"lazy"})}),t.detailedSteps&&p.jsx("div",{className:"mb-4 space-y-2",children:t.detailedSteps.map((C,B)=>p.jsxs("div",{className:"bg-white/10 rounded p-3 backdrop-blur",children:[p.jsx("p",{className:"font-semibold text-sm mb-1",children:C.title}),p.jsx("p",{className:"text-xs text-white/80",children:C.description})]},B))}),t.tips&&p.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-4 backdrop-blur",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx(_1,{className:"w-4 h-4 text-yellow-300"}),p.jsx("span",{className:"font-semibold text-sm",children:"Practical tips:"})]}),p.jsx("ul",{className:"space-y-1.5",children:t.tips.map((C,B)=>p.jsxs("li",{className:"text-xs text-white/90 flex items-start gap-2",children:[p.jsx("span",{className:"text-yellow-300 mt-0.5",children:""}),p.jsx("span",{children:C})]},B))})]}),p.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[p.jsxs("button",{onClick:r,disabled:s,className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${s?"text-white/40 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:[p.jsx($6,{className:"w-4 h-4"}),"Previous"]}),p.jsxs("button",{onClick:e,className:"flex items-center gap-1 px-4 py-1.5 bg-white text-blue-600 rounded font-semibold text-sm hover:bg-blue-50 transition-colors",children:[o?"Finish":t.action,!o&&p.jsx(q6,{className:"w-4 h-4"})]})]}),p.jsx("div",{className:"mt-4 flex items-center justify-center gap-1.5",children:Array.from({length:c}).map((C,B)=>p.jsx("div",{className:`h-1.5 rounded-full transition-all ${B<=u?"w-8 bg-white":"w-1.5 bg-white/30"}`},B))})]}),p.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 ${i==="bottom"?"-top-2":"-bottom-2"}`,children:p.jsx("div",{className:`w-4 h-4 bg-blue-600 rotate-45 border-blue-400 ${i==="bottom"?"border-t-2 border-l-2":"border-b-2 border-r-2"}`})}),p.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},iTe=({onStart:t,onDismiss:e})=>p.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-6 mb-6 shadow-lg",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"bg-blue-600 rounded-full p-3 flex-shrink-0",children:p.jsx(W6,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"First time here? Start with our interactive guide!"}),p.jsx("p",{className:"text-gray-700 mb-4",children:"Learn how to create your EUDR report in 5 minutes with our step-by-step tutorial. We'll guide you through each step of the process."}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-md",children:[p.jsx(W6,{className:"w-5 h-5"}),"Start Guide"]}),p.jsx("button",{onClick:e,className:"px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"I prefer to explore on my own"})]})]}),p.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:p.jsx(Am,{className:"w-5 h-5"})})]})}),sTe=({onClick:t})=>p.jsxs("button",{onClick:t,className:"fixed bottom-6 right-6 bg-blue-600 text-white rounded-full p-4 shadow-xl hover:bg-blue-700 transition-all hover:scale-110 z-50 group",title:"Restart tutorial",children:[p.jsx(W6,{className:"w-6 h-6"}),p.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Need help? Restart the guide"})]}),oTe=()=>{const[t,e]=Ae.useState(1),[r,n]=Ae.useState(null),[s,o]=Ae.useState(null),[c,u]=Ae.useState(null),i={eudr:Ae.useRef(),carbon:Ae.useRef()},{files:m,handleFileChange:g}=q3e(),{userInfo:C,setUserInfo:B,handleUserInfoSubmit:S,loading:P,isUserInfoValid:j}=$3e(e),{reports:D,loading:F,showPaymentModal:R,handleReportReady:V,setShowPaymentModal:Y}=K3e({files:m,geojson:s,userInfo:C,setStep:e,reportRefs:i}),{isActive:te,currentStep:se,showTutorial:oe,startTutorial:K,nextStep:de,prevStep:we,skipTutorial:J}=X3e(),Z=md[se],Ie=se===0,be=se===md.length-1,He=m.geojson||s;Ae.useEffect(()=>{c&&((Z==null?void 0:Z.highlight)==="report-type"&&He||(Z==null?void 0:Z.highlight)==="user-info"&&r||(Z==null?void 0:Z.highlight)==="payment"&&j())&&u(null)},[He,r,j,Z,c]),Ae.useEffect(()=>{if(te&&Z&&Z.targetStep!==t){const Ne=md.findIndex(st=>st.targetStep===t&&st.highlight!=="welcome");if(Ne!==-1&&Ne!==se)for(let st=se;st<Ne;st++)de()}},[t,te,Z,de,se]),Ae.useEffect(()=>{te&&t===1&&He&&(Z==null?void 0:Z.targetStep)===1&&(Z==null||Z.highlight)},[s,m.geojson,te,t,Z]);const Fe=()=>{const Ne=md[se+1];if(Ne){if(Ne.highlight==="report-type"&&!He){u(" Please upload a GeoJSON file or create a polygon on the map to continue.");return}if(Ne.highlight==="user-info"&&!r){u(" Please select a report type to continue.");return}if(Ne.highlight==="payment"&&!j()){u(" Please fill in all required fields with valid information (phone, email) to continue.");return}}u(null),be?J():(de(),Ne&&Ne.targetStep!==(Z==null?void 0:Z.targetStep)&&e(Ne.targetStep))},ve=()=>{t>1&&e(t-1)},_e=()=>{if(He&&(e(2),te&&(Z==null?void 0:Z.targetStep)===1)){const Ne=md.findIndex(st=>st.highlight==="report-type");if(Ne>se)for(let st=se;st<Ne;st++)de()}},ze=Ne=>!te||!Z?"":Z.highlight===Ne?"tutorial-highlight-active":"";return p.jsxs("div",{className:"p-6 max-w-3xl mx-auto space-y-6",children:[!te&&oe&&p.jsx(iTe,{onStart:K,onDismiss:J}),(F||P)&&p.jsx("div",{className:"text-center text-blue-600",children:" Processing..."}),t===1&&p.jsxs("div",{className:"relative",children:[p.jsx(J3e,{files:m,onFileChange:g,geojson:s,setGeojson:o,onNext:_e,canContinue:He,highlightUpload:ze("upload"),highlightMap:ze("map"),highlightModeToggle:ze("mode-toggle"),highlightSearchBar:ze("search-bar"),highlightPointModeInfo:ze("point-mode-info"),highlightDrawControls:ze("draw-controls")}),!He&&p.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:p.jsx("p",{className:"text-sm text-yellow-800",children:" Please upload a GeoJSON file or create a polygon on the map to continue."})}),c&&p.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:p.jsx("p",{className:"text-sm text-red-800",children:c})}),te&&(Z==null?void 0:Z.highlight)==="welcome"&&p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se}),te&&(Z==null?void 0:Z.highlight)==="upload"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 left-0 w-full z-[10000]",style:{marginTop:"20px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})}),te&&(Z==null?void 0:Z.highlight)==="mode-toggle"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 right-0 w-80 pointer-events-none z-[10000]",style:{marginTop:"80px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})}),te&&(Z==null?void 0:Z.highlight)==="search-bar"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"80px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})}),te&&(Z==null?void 0:Z.highlight)==="point-mode-info"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 right-0 w-80 pointer-events-none z-[10000]",style:{marginTop:"220px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})}),te&&(Z==null?void 0:Z.highlight)==="draw-controls"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 left-0 pointer-events-none z-[10000]",style:{marginTop:"80px",marginLeft:"20px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})})]}),t===2&&p.jsxs("div",{className:"relative",children:[p.jsx(eTe,{onSelect:Ne=>{n(Ne),e(3),te&&(Z==null?void 0:Z.highlight)==="report-type"&&de()},highlightReportType:ze("report-type")}),c&&p.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:p.jsx("p",{className:"text-sm text-red-800",children:c})}),te&&(Z==null?void 0:Z.highlight)==="report-type"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})})]}),t===3&&p.jsxs("div",{className:"relative",children:[p.jsx(tTe,{userInfo:C,setUserInfo:B,onSubmit:Ne=>{Ne.preventDefault(),j()&&(S(Ne),te&&(Z==null?void 0:Z.highlight)==="user-info"&&de())},loading:P,isValid:j(),highlightUserInfo:ze("user-info")}),!j()&&p.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:p.jsx("p",{className:"text-sm text-yellow-800",children:" Please fill in all required fields with valid information (phone, email)."})}),c&&p.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:p.jsx("p",{className:"text-sm text-red-800",children:c})}),te&&(Z==null?void 0:Z.highlight)==="user-info"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})})]}),t===4&&p.jsxs("div",{className:"relative",children:[p.jsx(rTe,{selectedFeature:r,phone:C.phone,setShowPaymentModal:Y,loading:F,highlightPayment:ze("payment")}),te&&(Z==null?void 0:Z.highlight)==="payment"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})})]}),t===5&&p.jsxs("div",{className:"relative",children:[p.jsx(nTe,{reports:D,reportRefs:i,highlightReports:ze("reports")}),te&&(Z==null?void 0:Z.highlight)==="reports"&&p.jsx("div",{className:"relative",children:p.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:p.jsx(op,{step:Z,onNext:Fe,onPrev:we,onSkip:J,isFirst:Ie,isLast:be,totalSteps:md.length,currentIndex:se,position:"bottom"})})})]}),t>1&&p.jsx("div",{className:"flex justify-start",children:p.jsx("button",{onClick:ve,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:" Back"})}),!te&&!oe&&p.jsx(sTe,{onClick:K}),R.eudr&&p.jsx(G4,{isOpen:R.eudr,onClose:()=>Y(Ne=>({...Ne,eudr:!1})),featureName:"reporteudrguest",phone:C.phone,agent_id:C.agent_id,onPaymentSuccess:()=>{V("reporteudrguest"),Y(Ne=>({...Ne,eudr:!1}))}}),R.carbon&&p.jsx(G4,{isOpen:R.carbon,onClose:()=>Y(Ne=>({...Ne,carbon:!1})),featureName:"reportcarbonguest",phone:C.phone,agent_id:C.agent_id,onPaymentSuccess:()=>{V("reportcarbonguest"),Y(Ne=>({...Ne,carbon:!1}))}}),p.jsx("style",{children:`
        .tutorial-highlight-active {
          position: relative;
          z-index: 9999;
        }
        
        .tutorial-highlight-active::before {
          content: '';
          position: absolute;
          inset: -4px;
          border: 4px solid rgb(59, 130, 246);
          border-radius: 8px;
          pointer-events: none;
          animation: tutorialPulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
          z-index: 9998;
        }
        
        @keyframes tutorialPulse {
          0%, 100% {
            opacity: 1;
            box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
          }
          50% {
            opacity: 0.7;
            box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
          }
        }
      `})]})},aTe=[{icon:p.jsx(PH,{className:"text-4xl mb-4 text-yellow-500"}),title:"Weather Forecasts",description:"Plan your agricultural tasks better with accurate and up-to-date weather data.",color:"bg-yellow-50"},{icon:p.jsx(J_,{className:"text-4xl mb-4 text-green-500"}),title:"Climate-Based Calculations",description:"Automated ET, ETc, GDD, and more based on your location and crops.",color:"bg-green-50"},{icon:p.jsx(Ane,{className:"text-4xl mb-4 text-blue-500"}),title:"Interactive Map",description:"Explore real-time weather and crop insights directly on the map.",color:"bg-blue-50"},{icon:p.jsx(iN,{className:"text-4xl mb-4 text-purple-500"}),title:"Crop Monitoring",description:"Track planting dates, harvests, and yields with visual reports.",color:"bg-purple-50"},{icon:p.jsx(cne,{className:"text-4xl mb-4 text-red-500"}),title:"Smart Alerts",description:"Receive timely notifications on pests and extreme weather events.",color:"bg-red-50"},{icon:p.jsx(bne,{className:"text-4xl mb-4 text-pink-500"}),title:"Secure Access",description:"Separate roles for admin and farmers to keep everything secure.",color:"bg-pink-50"}],lTe=()=>p.jsx("section",{className:"bg-gradient-to-r from-teal-50 via-emerald-50 to-lime-50 py-20 px-6 font-sans",id:"overview",children:p.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[p.jsx("h2",{className:"text-5xl font-extrabold mb-4 text-emerald-700",children:"Explore Nkusu's Tools"}),p.jsx("p",{className:"text-lg text-gray-600 mb-14 max-w-2xl mx-auto",children:"Nkusu provides modern tools that empower farmers to make climate-smart decisions, improve productivity, and protect their crops."}),p.jsx("div",{className:"grid gap-10 sm:grid-cols-2 lg:grid-cols-3",children:aTe.map((t,e)=>p.jsxs("div",{className:`${t.color} p-8 rounded-3xl border border-gray-200 shadow-md hover:shadow-lg hover:scale-105 transition duration-300`,children:[t.icon,p.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),p.jsx("p",{className:"text-gray-700 text-base",children:t.description})]},e))})]})}),cTe=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState(!1),[s,o]=Ae.useState({}),[c,u]=Ae.useState([]),[i,m]=Ae.useState(""),[g,C]=Ae.useState(!0),[B,S]=Ae.useState(!0),P=async()=>{var oe,K;try{console.log("[DEBUG] Tentative de rcupration des fermes...");const de=await Tr.get("/api/farm/");return console.log("[DEBUG] Rponse API fermes:",de),console.log("[DEBUG] Donnes fermes:",de.data),de.data}catch(de){return console.error("[ERREUR] Lors de la rcupration des fermes:",de),console.error("[ERREUR] Status:",(oe=de.response)==null?void 0:oe.status),console.error("[ERREUR] Data:",(K=de.response)==null?void 0:K.data),console.error("[ERREUR] Message:",de.message),[]}},j=async(oe,K)=>{try{const de=`https://api.open-meteo.com/v1/forecast?latitude=${oe}&longitude=${K}&hourly=temperature_2m,relative_humidity_2m,precipitation,wind_speed_10m&forecast_days=10`;return await(await fetch(de)).json()}catch(de){return console.error("Erreur rcupration mto:",de),null}},D=oe=>{const K=[],de=oe.hourly||{},we=de.time||[],J=de.temperature_2m||[],Z=de.relative_humidity_2m||[],Ie=de.precipitation||[],be=de.wind_speed_10m||[],He=15,Fe=30,ve=10,_e=20,ze=30;for(let Ne=0;Ne<we.length;Ne++){const st=[];Ie[Ne]>ve&&st.push("Heavy Rain"),J[Ne]>Fe&&st.push("Extreme Heat"),J[Ne]<He&&st.push("Extreme Cold"),be[Ne]>_e&&st.push("Strong Wind"),Z[Ne]<ze&&st.push("Dryness Alert"),st.length>0&&K.push({time:new Date(we[Ne]).toLocaleString(),alerts:st,temperature:J[Ne],humidity:Z[Ne],precipitation:Ie[Ne],wind_speed:be[Ne]})}return K},F=oe=>{const K=[],de=oe.hourly||{},we=de.time||[],J=de.temperature_2m||[],Z=10,Ie={"Fall Armyworm":140,Aphids:100,"Stem Borers":180,"Corn Earworm":220,"Black Cutworm":280,"Peach Twig Borer":350,"Coffee Berry Borer":120,"Coffee Leaf Miner":150};let be=0;const He=new Set;for(let Fe=0;Fe<we.length;Fe++){const ve=J[Fe];if(ve==null)continue;const _e=Math.max(0,ve-Z);be+=_e;const ze=[];for(const[Ne,st]of Object.entries(Ie))be>=st&&!He.has(Ne)&&(ze.push(Ne),He.add(Ne));ze.length>0&&K.push({time:new Date(we[Fe]).toLocaleString(),alerts:ze,gdd:Math.round(be*10)/10,temperature:ve})}return K},R=async()=>{console.log("[DEBUG] ===== DBUT FETCH ALERTS ====="),n(!0);try{console.log("[DEBUG] 1. Rcupration des fermes...");const oe=await P();console.log("[DEBUG] 2. Rponse fermes reue:",oe);let K=[];if(Array.isArray(oe)?K=oe:oe&&oe.farms?K=oe.farms:oe&&oe.data?K=oe.data:oe&&Array.isArray(oe.items)&&(K=oe.items),console.log("[DEBUG] 3. Fermes extraites:",K),console.log("[DEBUG] 4. Nombre de fermes:",K.length),K.length===0){console.log("[WARNING] Aucune ferme trouve!"),e([]);return}const de=[];for(let we=0;we<K.length;we++){const J=K[we];console.log(`[DEBUG] 5.${we+1}. Traitement ferme:`,J);try{if(!J.geolocation){console.log(`[WARNING] Pas de golocalisation pour ${J.name||"ferme inconnue"}`);continue}console.log(`[DEBUG] Golocalisation: ${J.geolocation}`);const[Z,Ie]=J.geolocation.split(",").map(ve=>parseFloat(ve.trim()));if(isNaN(Z)||isNaN(Ie)){console.log(`[ERROR] Coordonnes invalides: lat=${Z}, lon=${Ie}`);continue}console.log(`[DEBUG] Coordonnes valides: lat=${Z}, lon=${Ie}`),console.log(`[DEBUG] Rcupration mto pour ${J.name}...`);const be=await j(Z,Ie);if(!be){console.log(`[ERROR] Pas de donnes mto pour ${J.name}`);continue}console.log(`[DEBUG] Donnes mto reues pour ${J.name}:`,be.hourly?"OK":"VIDE"),console.log(`[DEBUG] Dtection alertes mto pour ${J.name}...`);const He=D(be);console.log(`[DEBUG] Alertes mto trouves: ${He.length}`,He),console.log(`[DEBUG] Dtection alertes parasitaires pour ${J.name}...`);const Fe=F(be);console.log(`[DEBUG] Alertes parasitaires trouves: ${Fe.length}`,Fe),He.length>0||Fe.length>0?(console.log(`[SUCCESS] Ferme ${J.name} a des alertes!`),de.push({farm:{id:J.id,name:J.name,geolocation:J.geolocation,phonenumber:J.phonenumber1||J.phonenumber,phonenumber2:J.phonenumber2},weather_alerts:He,pest_alerts:Fe})):console.log(`[INFO] Aucune alerte pour ${J.name}`)}catch(Z){console.error(`[ERROR] Erreur pour la ferme ${J.name}:`,Z)}}console.log(`[DEBUG] 6. Total rsultats: ${de.length}`,de),e(de),console.log("[DEBUG] ===== FIN FETCH ALERTS =====")}catch(oe){console.error("[ERROR] Erreur gnrale lors de la rcupration des alertes:",oe),alert("Erreur lors de la rcupration des alertes: "+oe.message)}finally{n(!1)}},V=async(oe,K)=>{try{const de=K.substring(0,160);return(await Tr.post("/api/notifications/sms",{phone:oe,message:de})).status===200}catch(de){return console.error("Erreur envoi SMS:",de),!1}},Y=async()=>{if(c.length===0){alert("Please select at least one alert to send");return}o({sending:!0});const oe="256783130358";let K=0,de=0;for(const we of c){const J=t[we];if(!J)continue;const Z=ve=>ve.replace(/[\u{1F600}-\u{1F64F}]/gu,"").replace(/[\u{1F300}-\u{1F5FF}]/gu,"").replace(/[\u{1F680}-\u{1F6FF}]/gu,"").replace(/[\u{1F700}-\u{1F77F}]/gu,"").replace(/[\u{1F780}-\u{1F7FF}]/gu,"").replace(/[\u{1F800}-\u{1F8FF}]/gu,"").replace(/[\u{1F900}-\u{1F9FF}]/gu,"").replace(/[\u{1FA00}-\u{1FA6F}]/gu,"").replace(/[\u{1FA70}-\u{1FAFF}]/gu,"").replace(/[\u{2600}-\u{26FF}]/gu,"").replace(/[\u{2700}-\u{27BF}]/gu,"").replace(/[^\x00-\x7F]/g,"").replace(/\s+/g," ").trim();let Ie="",be="";if(J.weather_alerts&&J.weather_alerts.length>0){const ve=J.weather_alerts.flatMap(ze=>ze.alerts),_e=Array.from(new Set(ve));Ie=Z(`WEATHER ALERT for ${J.farm.name}: ${_e.join(", ")}.`)}if(J.pest_alerts&&J.pest_alerts.length>0){const ve=J.pest_alerts.flatMap(ze=>ze.alerts),_e=Array.from(new Set(ve));be=Z(`PEST ALERT for ${J.farm.name}: ${_e.join(", ")}.`)}let He=[];Ie&&He.push(Ie),be&&He.push(be);const Fe=[];B&&Fe.push(oe),g&&J.farm.phonenumber&&Fe.push(J.farm.phonenumber);for(const ve of Fe)for(const _e of He)de++,await V(ve,_e)&&K++,await new Promise(Ne=>setTimeout(Ne,1e3))}o({sending:!1,completed:!0,success:K,total:de}),setTimeout(()=>{o({})},5e3)},te=oe=>{u(K=>K.includes(oe)?K.filter(de=>de!==oe):[...K,oe])},se=()=>{c.length===t.length?u([]):u(t.map((oe,K)=>K))};return Ae.useEffect(()=>{R();const oe=setInterval(R,5*60*1e3);return()=>clearInterval(oe)},[]),p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:p.jsxs("div",{className:"max-w-7xl mx-auto",children:[p.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4 sm:mb-0",children:"Agricultural Alert System"}),p.jsx("button",{onClick:R,disabled:r,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white px-6 py-2 rounded-lg font-medium transition duration-200 flex items-center",children:r?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):p.jsx(p.Fragment,{children:"Refresh"})})]})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Send Configuration"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"font-medium text-gray-700",children:"Recipients"}),p.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:B,onChange:oe=>S(oe.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),p.jsx("span",{className:"text-gray-700",children:"Send to administrator"})]}),p.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:g,onChange:oe=>C(oe.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),p.jsx("span",{className:"text-gray-700",children:"Send to farmers"})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"font-medium text-gray-700",children:"Custom Message (optional)"}),p.jsx("textarea",{value:i,onChange:oe=>m(oe.target.value),placeholder:"Add a custom message that will be sent with the alerts...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx("button",{onClick:se,disabled:t.length===0,className:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-300 text-white px-4 py-2 rounded-lg font-medium transition duration-200",children:c.length===t.length?"Deselect All":"Select All"}),p.jsxs("span",{className:"text-gray-600 font-medium",children:[c.length," / ",t.length," alerts selected"]})]}),p.jsx("button",{onClick:Y,disabled:c.length===0||s.sending||!B&&!g,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white px-6 py-2 rounded-lg font-medium transition duration-200 flex items-center",children:s.sending?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):p.jsxs(p.Fragment,{children:["Send (",c.length,")"]})})]})}),s.completed&&p.jsx("div",{className:`rounded-xl shadow-lg p-4 mb-6 ${s.success===s.total?"bg-green-100 border border-green-300":"bg-yellow-100 border border-yellow-300"}`,children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:"text-2xl mr-3",children:s.success===s.total?"":""}),p.jsxs("span",{className:`font-medium ${s.success===s.total?"text-green-800":"text-yellow-800"}`,children:["Send completed: ",s.success,"/",s.total," messages sent successfully"]})]})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Available Alerts"}),r?p.jsx("div",{className:"flex justify-center items-center py-12",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p.jsx("span",{className:"text-lg text-gray-600",children:"Loading alerts..."})]})}):t.length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx("div",{className:"text-6xl mb-4",children:""}),p.jsx("h4",{className:"text-xl font-medium text-gray-600 mb-2",children:"No active alerts currently"}),p.jsx("p",{className:"text-gray-500",children:"All your farms are safe!"})]}):p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map((oe,K)=>p.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition duration-200 ${c.includes(K)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>te(K),children:[p.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[p.jsx("input",{type:"checkbox",checked:c.includes(K),onChange:()=>te(K),onClick:de=>de.stopPropagation(),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[" ",oe.farm.name]}),p.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[" ",oe.farm.geolocation]}),oe.farm.phonenumber&&p.jsxs("p",{className:"text-sm text-gray-500 flex items-center mt-1",children:[" ",oe.farm.phonenumber]})]})]}),p.jsxs("div",{className:"space-y-4",children:[oe.weather_alerts&&oe.weather_alerts.length>0&&p.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[p.jsx("h5",{className:"font-medium text-gray-800 mb-2 flex items-center",children:"Weather Alerts"}),oe.weather_alerts.map((de,we)=>p.jsxs("div",{className:"mb-3 last:mb-0",children:[p.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[" ",de.time]}),p.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:de.alerts.map((J,Z)=>p.jsx("span",{className:"inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:J},Z))}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[p.jsxs("span",{children:[" ",de.temperature,"C"]}),p.jsxs("span",{children:[" ",de.humidity,"%"]}),p.jsxs("span",{children:[" ",de.precipitation,"mm"]}),p.jsxs("span",{children:[" ",de.wind_speed,"km/h"]})]})]},we))]}),oe.pest_alerts&&oe.pest_alerts.length>0&&p.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[p.jsx("h5",{className:"font-medium text-gray-800 mb-2 flex items-center",children:"Pest Alerts"}),oe.pest_alerts.map((de,we)=>p.jsxs("div",{className:"mb-3 last:mb-0",children:[p.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[" ",de.time]}),p.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-2",children:[p.jsxs("span",{children:[" GDD: ",de.gdd]}),p.jsxs("span",{children:[" Temp: ",de.temperature,"C"]})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:de.alerts.map((J,Z)=>p.jsxs("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full",children:[" ",J]},Z))})]},we))]})]})]},`${oe.farm.id}-${K}`))})]})]})})},cT=[],uTe=()=>{const t=Ae.useRef(null),e=Ae.useRef(null),[r,n]=Ae.useState("heatmap"),[s,o]=Ae.useState({total:0,avgCover:0});Ae.useEffect(()=>{const u=cT.length,i=Math.round(cT.reduce((m,g)=>m+g.wri_tropical_tree_cover_extent__decile,0)/u);o({total:u,avgCover:i})},[]);const c=u=>({type:"FeatureCollection",features:u.map(i=>({type:"Feature",properties:{value:i.wri_tropical_tree_cover_extent__decile,driver:i.tsc_tree_cover_loss_drivers__driver||"N/A"},geometry:{type:"Point",coordinates:[i.longitude,i.latitude]}}))});return Ae.useEffect(()=>{if(e.current)return;Li.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current=new Li.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[32.92,.198],zoom:14});const u=c(cT);e.current.on("load",()=>{e.current.addSource("tree-cover-data",{type:"geojson",data:u}),e.current.addLayer({id:"tree-heatmap",type:"heatmap",source:"tree-cover-data",paint:{"heatmap-weight":["interpolate",["linear"],["get","value"],0,0,100,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,20,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(247,252,245,0)",.2,"#c7e9c0",.4,"#74c476",.6,"#238b45",.8,"#006d2c",1,"#00441b"],"heatmap-radius":["interpolate",["linear"],["zoom"],10,5,20,30],"heatmap-opacity":.7}}),e.current.addLayer({id:"tree-points",type:"circle",source:"tree-cover-data",minzoom:13,layout:{visibility:"none"},paint:{"circle-radius":["interpolate",["linear"],["zoom"],13,3,20,10],"circle-color":["interpolate",["linear"],["get","value"],0,"#f7fcf5",20,"#c7e9c0",40,"#74c476",60,"#238b45",80,"#006d2c",100,"#00441b"],"circle-opacity":.8,"circle-stroke-width":1,"circle-stroke-color":"#ffffff"}});const i=new Li.Popup({closeButton:!1,closeOnClick:!1});e.current.on("mouseenter","tree-points",m=>{e.current.getCanvas().style.cursor="pointer";const g=m.features[0].geometry.coordinates.slice(),{value:C,driver:B}=m.features[0].properties;i.setLngLat(g).setHTML(`
            <div style="padding: 5px;">
              <strong>Couverture:</strong> ${C}%<br>
              <strong>Driver:</strong> ${B}
            </div>
          `).addTo(e.current)}),e.current.on("mouseleave","tree-points",()=>{e.current.getCanvas().style.cursor="",i.remove()}),e.current.addControl(new Li.NavigationControl,"top-right")})},[]),Ae.useEffect(()=>{if(!(!e.current||!e.current.getLayer("tree-heatmap")))switch(r){case"heatmap":e.current.setLayoutProperty("tree-heatmap","visibility","visible"),e.current.setLayoutProperty("tree-points","visibility","none");break;case"points":e.current.setLayoutProperty("tree-heatmap","visibility","none"),e.current.setLayoutProperty("tree-points","visibility","visible");break;case"both":e.current.setLayoutProperty("tree-heatmap","visibility","visible"),e.current.setLayoutProperty("tree-points","visibility","visible");break}},[r]),p.jsx(p.Fragment,{})},dTe=()=>{var ve,_e;const t=vu(),e=og(),r=((ve=t.state)==null?void 0:ve.userId)||null,n=((_e=t.state)==null?void 0:_e.certificateType)||"all",[s,o]=Ae.useState(null),[c,u]=Ae.useState([]),[i,m]=Ae.useState(!0),[g,C]=Ae.useState(null),[B,S]=Ae.useState(!1),[P,j]=Ae.useState(null);Ae.useEffect(()=>{(async()=>{try{const Ne=await Tr.get("/api/farm/area/by-compliance");Ne.data.status==="success"&&u(Ne.data.data)}catch(Ne){console.error("Error fetching area stats:",Ne)}})()},[]),Ae.useEffect(()=>{(async()=>{var Ne,st;try{m(!0);const ie=r?`/api/farm/stats/by-user/${r}`:"/api/farm/stats/by-user",le=await Tr.get(ie);if(le.data.status==="success"){const pe=Array.isArray(le.data.data)?le.data.data[0]:le.data.data;o(pe)}else C(le.data.message||"Failed to load statistics")}catch(ie){C(((st=(Ne=ie.response)==null?void 0:Ne.data)==null?void 0:st.message)||"Failed to load statistics")}finally{m(!1)}})()},[r]);const D=()=>{if(!c.length)return{compliant:0,likely:0,not:0};const ze=c.reduce((st,ie)=>st+(ie.total_area||0),0);if(ze===0)return{compliant:0,likely:0,not:0};const Ne=st=>{var ie;return((ie=c.find(le=>le.compliance_status===st))==null?void 0:ie.total_area)||0};return{compliant:(Ne("100% Compliant")/ze*100).toFixed(2),likely:(Ne("Likely Compliant")/ze*100).toFixed(2),not:(Ne("Not Compliant")/ze*100).toFixed(2)}},F=()=>{if(!c.length)return 0;const ze=st=>{var ie;return((ie=c.find(le=>le.compliance_status===st))==null?void 0:ie.total_area)||0};return{compliant:ze("100% Compliant"),likely_compliant:ze("Likely Compliant"),not_compliant:ze("Not Compliant")}[n]||c.reduce((st,ie)=>st+(ie.total_area||0),0)},R=()=>{if(!c.length)return 0;const ze=st=>{var ie;return((ie=c.find(le=>le.compliance_status===st))==null?void 0:ie.total_tree_cover_loss)||0};return{compliant:ze("100% Compliant"),likely_compliant:ze("Likely Compliant"),not_compliant:ze("Not Compliant")}[n]||c.reduce((st,ie)=>st+(ie.total_tree_cover_loss||0),0)},V=ze=>fetch(ze).then(Ne=>Ne.blob()).then(Ne=>new Promise((st,ie)=>{const le=new FileReader;le.onloadend=()=>st(le.result),le.onerror=ie,le.readAsDataURL(Ne)})),Y=async(ze,Ne)=>{try{const st=await Tr.post("/api/certificate/generate",{userId:ze.user_id,certificateType:Ne,stats:{total_farms:ze.total_farms,compliance_status:ze.compliance_status,compliance_percentages:ze.compliance_percentages}});return st.data.status==="success"?(j(st.data.data.certificate_id),st.data.data.id):null}catch(st){return console.error("Error saving certificate:",st),null}},te=async ze=>{try{await Tr.post(`/api/certificate/download/${ze}`)}catch(Ne){console.error("Error tracking download:",Ne)}},se=async()=>{try{S(!0);const ze=await Y(s,n),Ne=document.getElementById("certificate-content"),st=Ne.querySelectorAll("img"),ie=[];await Promise.all(Array.from(st).map(async(pe,fe)=>{try{if(ie[fe]=pe.src,pe.src.startsWith("http")){const Qe=await V(pe.src);pe.src=Qe,await new Promise(Ke=>{pe.complete?Ke():(pe.onload=Ke,pe.onerror=Ke)})}}catch(Qe){console.error("Error converting image:",Qe)}}));const le={margin:0,filename:`${s.username}_${n}_certificate.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!1,logging:!1,allowTaint:!0,onclone:pe=>{pe.querySelectorAll("header img").forEach(fe=>{fe.alt==="Parrot Logo"?Object.assign(fe.style,{width:"80px",height:"96px",objectFit:"contain",display:"block"}):Object.assign(fe.style,{width:"96px",height:"96px",objectFit:"contain",display:"block"})}),pe.querySelectorAll(".signature-img").forEach(fe=>{Object.assign(fe.style,{width:"150px",height:"auto",maxHeight:"60px",objectFit:"contain",display:"block"})})}},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};await CK().set(le).from(Ne).save(),st.forEach((pe,fe)=>{ie[fe]&&(pe.src=ie[fe])}),ze&&await te(ze),alert("Certificate downloaded and saved successfully!")}catch(ze){console.error("Error generating PDF:",ze),alert("Error generating PDF. Please try again.")}finally{S(!1)}};if(i)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),p.jsx("p",{className:"text-gray-600 text-lg",children:"Loading statistics..."})]})});if(g)return p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:p.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md text-center text-red-600",children:[p.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Statistics"}),p.jsx("p",{className:"text-gray-600 mb-4",children:g}),p.jsx("button",{onClick:()=>e(-1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Go Back"})]})});if(!s)return null;const oe=D(),K=F(),de=R(),we={compliant:{title:"EUDR CERTIFICATE OF FULL COMPLIANCE",farmsCount:s.compliance_status.compliant_100,percentage:oe.compliant,color:"text-green-700"},likely_compliant:{title:"EUDR CERTIFICATE OF LIKELY COMPLIANCE",farmsCount:s.compliance_status.likely_compliant,percentage:oe.likely,color:"text-yellow-700"},not_compliant:{title:"EUDR CERTIFICATE OF NON-COMPLIANCE",farmsCount:s.compliance_status.not_compliant,percentage:oe.not,color:"text-red-700"},all:{title:"EUDR COMPLIANCE CERTIFICATE",farmsCount:s.total_farms,percentage:(parseFloat(oe.compliant)+parseFloat(oe.likely)).toFixed(2),color:"text-blue-700"}},{title:J,farmsCount:Z,percentage:Ie,color:be}=we[n]||we.all,He=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),Fe=({label:ze,status:Ne,colorClass:st})=>{var Ke,et;const ie=((Ke=c.find(tt=>tt.compliance_status===Ne))==null?void 0:Ke.total_area)||0,le=((et=c.find(tt=>tt.compliance_status===Ne))==null?void 0:et.total_tree_cover_loss)||0,pe={"100% Compliant":"compliant_100","Likely Compliant":"likely_compliant","Not Compliant":"not_compliant","No Report":"no_report"},fe=s.compliance_status[pe[Ne]]||0,Qe=oe[Ne==="100% Compliant"?"compliant":Ne==="Likely Compliant"?"likely":"not"];return p.jsxs("li",{className:"space-y-1",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("span",{children:[ze,":"]}),p.jsxs("strong",{className:st,children:[fe," farms (",Qe,"%)"]})]}),p.jsxs("div",{className:"flex justify-between text-sm pl-4",children:[p.jsx("span",{children:"Project Area:"}),p.jsxs("span",{className:"font-medium",children:[ie.toFixed(2)," ha"]})]}),le>0&&p.jsxs("div",{className:"flex justify-between text-sm pl-4 text-red-600",children:[p.jsx("span",{children:"Tree Cover Loss:"}),p.jsxs("span",{className:"font-medium",children:[le.toFixed(2)," ha"]})]})]})};return p.jsxs("div",{className:"min-h-screen bg-gray-100 py-8 print:bg-white",children:[p.jsx("style",{children:`
            @page { size: A4 portrait; margin: 0; }
            @media print {
                body * { visibility: hidden !important; }
                #certificate-content, #certificate-content * { visibility: visible !important; }
                #certificate-content { position: absolute; left: 0; top: 0; width: 210mm; height: 297mm; overflow: hidden; }
                html, body { margin: 0 !important; padding: 0 !important; background: white !important; }
            }
            #certificate-content {
                width: 210mm !important;
                min-height: 297mm !important;
                margin: 0 auto !important;
                background: white !important;
            }
            #certificate-content header img {
                width: 96px !important; height: 96px !important; object-fit: contain !important;
                min-width: 96px !important; min-height: 96px !important;
                max-width: 96px !important; max-height: 96px !important; display: block !important;
            }
            #certificate-content header img[alt="Parrot Logo"] {
                width: 80px !important;
                min-width: 80px !important;
                max-width: 80px !important;
            }
            .signature-img {
                width: 150px !important;
                height: auto !important;
                max-height: 60px !important;
                object-fit: contain !important;
                display: block !important;
            }
        `}),p.jsxs("div",{className:"no-print max-w-4xl mx-auto mb-4 flex flex-wrap gap-3 justify-center",children:[p.jsx("button",{onClick:()=>e(-1),className:"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition",children:"Back"}),p.jsx("button",{onClick:()=>window.print(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Print"}),p.jsx("button",{onClick:se,disabled:B,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:B?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),p.jsx("span",{children:"Generating PDF..."})]}):"Download PDF"})]}),P&&p.jsx("div",{className:"no-print max-w-4xl mx-auto mb-4 text-center",children:p.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:[p.jsx("strong",{children:"Certificate ID:"})," ",P]})}),p.jsx("div",{id:"certificate-content",className:"page-wrap bg-white shadow-2xl p-[12mm] mx-auto",children:p.jsx("div",{className:"border-[12px] border-[#3b2418] p-2 h-full",children:p.jsxs("div",{className:"border-[6px] border-[#d0c7b8] h-full p-2 bg-gradient-to-b from-white to-[#fcfbf9] flex flex-col justify-between",children:[p.jsxs("header",{className:"flex items-center justify-between gap-5 mb-5",children:[p.jsx("div",{className:"flex-shrink-0",style:{width:"96px",height:"96px"},children:p.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-24 h-24 object-contain"})}),p.jsx("div",{className:"flex-1 text-center"}),p.jsx("div",{className:"flex-shrink-0",style:{width:"80px",height:"96px"},children:p.jsx("img",{src:"/parrotlogo.svg",alt:"Parrot Logo",className:"w-20 h-24 object-contain"})})]}),p.jsx("div",{className:"text-center my-4",children:p.jsx("h1",{className:`text-3xl font-bold tracking-[3px] ${be}`,children:J})}),p.jsxs("div",{className:"px-4 py-2 text-gray-700 text-sm flex-1",children:[p.jsx("p",{className:"text-center mb-3",children:"This certifies that"}),p.jsx("div",{className:"text-center text-2xl font-bold my-2",children:s.company_name.toUpperCase()}),p.jsxs("p",{className:"max-w-[900px] mx-auto text-justify leading-relaxed mb-4",children:["has been evaluated according to the European Union Deforestation Regulation (Based on EU Regulation (2023/1115) on deforestation-free products.) and shows a compliance rate across ",p.jsx("strong",{children:Z})," farms covering a total area of"," ",p.jsxs("strong",{children:[K.toFixed(2)," hectares"]}),de>0&&p.jsxs("span",{children:[" with a tree cover loss of ",p.jsxs("strong",{className:"text-red-600",children:[de.toFixed(2)," hectares"]})]}),". This certificate confirms the environmental compliance status indicated below."]}),p.jsxs("div",{className:"bg-[#f3efc8] border border-[#e4dda6] p-4 my-4 max-w-[900px] mx-auto shadow-inner",children:[p.jsx("div",{className:"font-bold mb-2",children:"Compliance Summary"}),n==="all"?p.jsxs("ul",{className:"space-y-3 text-sm",children:[p.jsx(Fe,{label:"100% Compliant",status:"100% Compliant",colorClass:"text-green-700"}),p.jsx(Fe,{label:"Likely Compliant",status:"Likely Compliant",colorClass:"text-yellow-700"}),p.jsx(Fe,{label:"Not Compliant",status:"Not Compliant",colorClass:"text-red-700"})]}):p.jsxs("div",{className:"text-center space-y-2",children:[p.jsxs("div",{className:"text-lg font-semibold",children:[Z," farms (",Ie,"%)"]}),p.jsxs("div",{className:"text-md font-medium text-gray-700",children:["Total Area: ",K.toFixed(2)," hectares"]}),de>0&&p.jsxs("div",{className:"text-md font-medium text-red-600",children:["Tree Cover Loss: ",de.toFixed(2)," hectares"]})]})]}),p.jsxs("div",{className:"flex justify-between items-center mt-4 gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=UserID:${s.user_id}|IdStart:${s.id_start}|Type:${n}|Area:${K.toFixed(2)}ha|TreeLoss:${de.toFixed(2)}ha`,alt:"QR code",className:"qr-code w-24 h-24 object-cover border border-gray-300 bg-white"}),p.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Certificate ID: ",s.user_id,"-",new Date().getFullYear()]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"font-bold text-sm",children:"Operator EORI : HRUG000004679"}),p.jsx("div",{className:"text-xs text-gray-600",children:"Environmental Compliance Officer"})]})]}),p.jsxs("div",{className:"flex justify-between mt-5 text-xs text-gray-600 items-end",children:[p.jsxs("div",{children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Date Issued:"})," ",He]}),p.jsxs("div",{children:[p.jsx("strong",{children:"User ID:"})," ",s.id_start]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Email:"})," nkusu@agriyields.com"]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Total Farms:"})," ",s.total_farms]}),p.jsxs("div",{children:[p.jsx("strong",{children:"User Type:"})," ",s.user_type]}),p.jsxs("div",{className:"mt-3 flex flex-col items-end",children:[p.jsx("img",{src:"/signature.jpg",alt:"Authorized Signature",className:"signature-img"}),p.jsx("div",{className:"text-xs text-gray-500 mt-1 border-t border-gray-300 pt-1",style:{width:"150px",textAlign:"center"},children:"Authorized Signature"})]})]})]})]}),p.jsx("footer",{className:"text-center text-gray-500 text-xs mt-6 border-t border-gray-200 pt-2",children:"This certificate is generated automatically by the EUDR Compliance System and reflects the current status of the user's farm assessments."})]})})})]})},a9="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",hTe=()=>{const[t,e]=Ae.useState([]),[r,n]=Ae.useState([]),[s,o]=Ae.useState("all"),[c,u]=Ae.useState("map"),[i,m]=Ae.useState(!1),[g,C]=Ae.useState(!1),[B,S]=Ae.useState(null),[P,j]=Ae.useState(null),[D,F]=Ae.useState(!1),[R,V]=Ae.useState(!1),[Y,te]=Ae.useState(""),[se,oe]=Ae.useState("coordinates"),[K,de]=Ae.useState({name:"",type:"",forest_id:"",height:"",diameter:"",date_planted:"",date_cut:"",latitude:"",longitude:""}),we=Ae.useRef(null),J=Ae.useRef(null),Z=Ae.useRef([]);Ae.useEffect(()=>{J.current||(Li.accessToken=a9,J.current=new Li.Map({container:we.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[47.5079,-18.8792],zoom:10}),J.current.addControl(new Li.NavigationControl,"top-right"))},[]),Ae.useEffect(()=>{if(!J.current)return;const fe=Qe=>{if(i){const{lng:Ke,lat:et}=Qe.lngLat;console.log("Map clicked:",Ke,et),de(tt=>({...tt,latitude:et.toFixed(6),longitude:Ke.toFixed(6)})),C(!0),m(!1),new Li.Marker({color:"#10b981"}).setLngLat([Ke,et]).addTo(J.current)}};return J.current.on("click",fe),()=>{J.current&&J.current.off("click",fe)}},[i]),Ae.useEffect(()=>{Ie(),be(),Fe()},[]),Ae.useEffect(()=>{J.current&&t.length>0&&ve()},[t,s]);const Ie=async()=>{try{const fe=await Tr.get("/api/forest/");n(fe.data.forests||[])}catch(fe){console.error("Error fetching forests:",fe)}},be=async()=>{try{const fe=await Tr.get("/api/tree/");e(fe.data.trees||[])}catch(fe){console.error("Error fetching trees:",fe),Ti.fire("Error","Failed to load trees","error")}},He=()=>{const fe=`name,type,forest_id,latitude,longitude,height,diameter,date_planted,date_cut
Example Tree 1,Oak,1,-18.8792,47.5079,15.5,45.2,2023-01-15,
Example Tree 2,Pine,1,-18.8800,47.5100,12.3,38.7,2023-02-20,2024-01-10
Example Tree 3,Eucalyptus,2,-18.8750,47.5050,18.2,52.1,2022-11-30,`,Qe=new Blob([fe],{type:"text/csv"}),Ke=window.URL.createObjectURL(Qe),et=document.createElement("a");et.href=Ke,et.download="tree_import_template.csv",et.click(),window.URL.revokeObjectURL(Ke)},Fe=async()=>{try{const fe=await Tr.get("/api/tree/stats");j(fe.data)}catch(fe){console.error("Error fetching stats:",fe)}},ve=()=>{Z.current.forEach(Qe=>Qe.remove()),Z.current=[];const fe=s==="all"?t:t.filter(Qe=>Qe.forest_id===parseInt(s));if(fe.forEach(Qe=>{if(Qe.point){const Ke=document.createElement("div");Ke.className="tree-marker",Ke.innerHTML=`
          <svg width="30" height="30" viewBox="0 0 24 24" fill="#10b981">
            <path d="M17,8C17,10.76 14.76,13 12,13C9.24,13 7,10.76 7,8C7,5.24 9.24,3 12,3C14.76,3 17,5.24 17,8M12,21L9,16H11V12H13V16H15L12,21Z"/>
          </svg>
        `,Ke.style.cursor="pointer";const et=document.createElement("div");et.style.padding="10px",et.innerHTML=`
          <h3 style="font-weight: bold; margin-bottom: 5px;">${Qe.name}</h3>
          <p style="margin: 3px 0;"><strong>Type:</strong> ${Qe.type||"N/A"}</p>
          <p style="margin: 3px 0;"><strong>Height:</strong> ${Qe.height}m</p>
          <p style="margin: 3px 0;"><strong>Diameter:</strong> ${Qe.diameter}cm</p>
          <p style="margin: 3px 0;"><strong>Forest:</strong> ${Qe.forest_name||"N/A"}</p>
          <p style="margin: 3px 0;"><strong>Planted:</strong> ${Qe.date_planted||"N/A"}</p>
          <div style="margin-top: 10px; display: flex; gap: 5px;">
            <button id="edit-tree-${Qe.id}" style="background: #3b82f6; color: white; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">
              Edit
            </button>
            <button id="delete-tree-${Qe.id}" style="background: #ef4444; color: white; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">
              Delete
            </button>
          </div>
        `;const tt=new Li.Popup({offset:25}).setDOMContent(et),bt=new Li.Marker(Ke).setLngLat([Qe.point.longitude,Qe.point.latitude]).setPopup(tt).addTo(J.current);tt.on("open",()=>{const De=document.getElementById(`edit-tree-${Qe.id}`),Mt=document.getElementById(`delete-tree-${Qe.id}`);De&&(De.onclick=()=>{tt.remove(),ze(Qe)}),Mt&&(Mt.onclick=()=>{tt.remove(),Ne(Qe.id)})}),Z.current.push(bt)}}),fe.length>0&&fe[0].point){const Qe=new Li.LngLatBounds;fe.forEach(Ke=>{Ke.point&&Qe.extend([Ke.point.longitude,Ke.point.latitude])}),J.current.fitBounds(Qe,{padding:50,maxZoom:15})}},_e=async fe=>{var Qe,Ke;if(fe.preventDefault(),!K.latitude||!K.longitude){Ti.fire("Error","Please click on the map to select a location","error");return}try{const et=B?`/api/tree/${B.id}`:"/api/tree/create";await Tr[B?"put":"post"](et,K),Ti.fire("Success",`Tree ${B?"updated":"created"} successfully`,"success"),C(!1),S(null),st(),be(),Fe()}catch(et){console.error("Error saving tree:",et),Ti.fire("Error",((Ke=(Qe=et.response)==null?void 0:Qe.data)==null?void 0:Ke.error)||"Failed to save tree","error")}},ze=fe=>{var Qe,Ke,et,tt;S(fe),de({name:fe.name,type:fe.type||"",forest_id:fe.forest_id,height:fe.height,diameter:fe.diameter,date_planted:((Qe=fe.date_planted)==null?void 0:Qe.split("T")[0])||"",date_cut:((Ke=fe.date_cut)==null?void 0:Ke.split("T")[0])||"",latitude:((et=fe.point)==null?void 0:et.latitude)||"",longitude:((tt=fe.point)==null?void 0:tt.longitude)||""}),C(!0)},Ne=async fe=>{if((await Ti.fire({title:"Are you sure?",text:"This will permanently delete the tree and its location",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await Tr.delete(`/api/tree/${fe}`),Ti.fire("Deleted!","Tree has been deleted.","success"),be(),Fe()}catch{Ti.fire("Error","Failed to delete tree","error")}},st=()=>{de({name:"",type:"",forest_id:"",height:"",diameter:"",date_planted:"",date_cut:"",latitude:"",longitude:""})},ie=async()=>{if(!Y.trim()){Ti.fire("Error","Please enter search criteria","error");return}if(se==="coordinates"){const fe=Y.split(",").map(bt=>parseFloat(bt.trim()));if(fe.length!==2||fe.some(isNaN)){Ti.fire("Error","Invalid coordinates format. Use: latitude,longitude","error");return}const[Qe,Ke]=fe,et=Math.abs(Qe)<=90?Qe:Ke,tt=Math.abs(Ke)<=180?Ke:Qe;J.current.flyTo({center:[tt,et],zoom:15,duration:2e3}),new Li.Marker({color:"#ef4444"}).setLngLat([tt,et]).setPopup(new Li.Popup().setHTML(`<p>Search Result<br/>${et}, ${tt}</p>`)).addTo(J.current).togglePopup()}else try{const Qe=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(Y)}.json?access_token=${a9}&limit=1`)).json();if(Qe.features&&Qe.features.length>0){const[Ke,et]=Qe.features[0].center,tt=Qe.features[0].place_name;J.current.flyTo({center:[Ke,et],zoom:15,duration:2e3}),new Li.Marker({color:"#ef4444"}).setLngLat([Ke,et]).setPopup(new Li.Popup().setHTML(`<p>${tt}</p>`)).addTo(J.current).togglePopup()}else Ti.fire("Not Found","Location not found","warning")}catch(fe){console.error("Geocoding error:",fe),Ti.fire("Error","Failed to search location","error")}te(""),V(!1)},le=async fe=>{const Qe=fe.target.files[0];if(!Qe)return;const Ke=new FileReader;Ke.onload=async et=>{var tt,bt;try{const Mt=et.target.result.split(`
`).filter(Dt=>Dt.trim()),ir=Mt[0].split(",").map(Dt=>Dt.trim().toLowerCase()),Ze=["name","forest_id","latitude","longitude","height","diameter","date_planted"].filter(Dt=>!ir.includes(Dt));if(Ze.length>0){Ti.fire("Error",`Missing required columns: ${Ze.join(", ")}`,"error");return}const Ue=[];for(let Dt=1;Dt<Mt.length;Dt++){const vt=Mt[Dt].split(",").map(rr=>rr.trim()),Kt={};ir.forEach((rr,nr)=>{Kt[rr]=vt[nr]}),Ue.push(Kt)}if((await Ti.fire({title:"Import Trees",text:`Found ${Ue.length} trees. Continue?`,icon:"question",showCancelButton:!0,confirmButtonText:"Yes, import!",confirmButtonColor:"#10b981"})).isConfirmed){let Dt=0,vt=0,Kt=0;const rr=[];Ti.fire({title:"Importing Trees...",html:`Progress: <b>0/${Ue.length}</b>`,allowOutsideClick:!1,didOpen:()=>{Ti.showLoading()}});for(let Nr=0;Nr<Ue.length;Nr++){try{const on=await Tr.post("/api/tree/create",Ue[Nr]);Dt++,rr.push({row:Nr+2,name:Ue[Nr].name,coordinates:`${Ue[Nr].latitude}, ${Ue[Nr].longitude}`,status:"created",tree_id:on.data.tree_id})}catch(on){const Ir=((bt=(tt=on.response)==null?void 0:tt.data)==null?void 0:bt.error)||on.message;Ir.includes("already exists")||Ir.includes("duplicate")?(Kt++,rr.push({row:Nr+2,name:Ue[Nr].name,status:"skipped",reason:Ir})):(vt++,rr.push({row:Nr+2,name:Ue[Nr].name,status:"error",error:Ir}))}Ti.update({html:`Progress: <b>${Nr+1}/${Ue.length}</b><br/>
                   <span style="color: #059669;">Success: ${Dt}</span> | 
                   <span style="color: #d97706;">Skipped: ${Kt}</span> | 
                   <span style="color: #dc2626;">Errors: ${vt}</span>`})}let nr='<div style="text-align: left; max-height: 400px; overflow-y: auto; padding: 10px;">';Dt>0&&(nr+='<div style="margin-bottom: 15px;"><h4 style="color: #059669; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;"><span style="font-size: 20px;"></span> Successfully Created:</h4>',rr.forEach(Nr=>{Nr.status==="created"&&(nr+=`<p style="color: #059669; margin: 5px 0; padding: 8px; background: #d1fae5; border-radius: 4px; border-left: 3px solid #059669;">
                <strong>Row ${Nr.row}:</strong> ${Nr.name} 
                <br><span style="font-size: 11px; color: #047857;">at ${Nr.coordinates}</span>
                - <span style="font-size: 11px; color: #065f46;">ID: ${Nr.tree_id}</span>
              </p>`)}),nr+="</div>"),Kt>0&&(nr+='<div style="margin-bottom: 15px;"><h4 style="color: #d97706; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;"><span style="font-size: 20px;"></span> Skipped (Already Exists):</h4>',rr.forEach(Nr=>{Nr.status==="skipped"&&(nr+=`<p style="color: #d97706; margin: 5px 0; padding: 8px; background: #fef3c7; border-radius: 4px; border-left: 3px solid #d97706;">
                <strong>Row ${Nr.row}:</strong> ${Nr.name}
                <br><span style="font-size: 12px; color: #92400e;">${Nr.reason}</span>
              </p>`)}),nr+="</div>"),vt>0&&(nr+='<div><h4 style="color: #dc2626; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;"><span style="font-size: 20px;"></span> Errors:</h4>',rr.forEach(Nr=>{Nr.status==="error"&&(nr+=`<p style="color: #dc2626; margin: 5px 0; padding: 8px; background: #fee2e2; border-radius: 4px; border-left: 3px solid #dc2626;">
                <strong>Row ${Nr.row}:</strong> ${Nr.name}
                <br><span style="font-size: 12px; color: #991b1b;">${Nr.error}</span>
              </p>`)}),nr+="</div>"),nr+="</div>",Ti.fire({title:"Import Complete!",html:`
            <div style="text-align: center; margin-bottom: 20px;">
              <div style="display: inline-block; margin: 0 15px;">
                <div style="font-size: 32px; color: #059669; font-weight: bold;">${Dt}</div>
                <div style="color: #6b7280; font-size: 13px;">Created</div>
              </div>
              <div style="display: inline-block; margin: 0 15px;">
                <div style="font-size: 32px; color: #d97706; font-weight: bold;">${Kt}</div>
                <div style="color: #6b7280; font-size: 13px;">Skipped</div>
              </div>
              <div style="display: inline-block; margin: 0 15px;">
                <div style="font-size: 32px; color: #dc2626; font-weight: bold;">${vt}</div>
                <div style="color: #6b7280; font-size: 13px;">Errors</div>
              </div>
            </div>
            <hr style="margin: 20px 0; border: none; border-top: 2px solid #e5e7eb;">
            ${nr}
          `,icon:Dt>0?"success":Kt>0?"info":"error",width:"750px",confirmButtonText:"OK",confirmButtonColor:"#10b981"}),be(),Fe(),F(!1)}}catch(De){console.error("CSV parsing error:",De),Ti.fire("Error","Failed to parse CSV file","error")}},Ke.readAsText(Qe),fe.target.value=null},pe=s==="all"?t:t.filter(fe=>fe.forest_id===parseInt(s));return p.jsxs("div",{className:"container mx-auto p-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsxs("h1",{className:"text-3xl font-bold text-green-800 flex items-center gap-2 mb-4",children:[p.jsx(t1e,{className:"w-8 h-8"}),"Tree Management System"]}),P&&p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[p.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[p.jsx("h3",{className:"text-sm text-gray-600",children:"Total Trees"}),p.jsx("p",{className:"text-2xl font-bold text-green-700",children:P.total_trees})]}),p.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[p.jsx("h3",{className:"text-sm text-gray-600",children:"Average Height"}),p.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[P.avg_height,"m"]})]}),p.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-200",children:[p.jsx("h3",{className:"text-sm text-gray-600",children:"Average Diameter"}),p.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:[P.avg_diameter,"cm"]})]})]}),p.jsxs("div",{className:"flex flex-wrap gap-3",children:[p.jsxs("button",{onClick:()=>m(!i),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition ${i?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:[i?p.jsx(Am,{className:"w-5 h-5"}):p.jsx(Xye,{className:"w-5 h-5"}),i?"Cancel Adding":"Add Tree"]}),p.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition",children:[p.jsx(e1,{className:"w-5 h-5"}),"Bulk Import"]}),p.jsxs("button",{onClick:()=>V(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-semibold transition",children:[p.jsx(N7,{className:"w-5 h-5"}),"Search Location"]}),p.jsxs("button",{onClick:()=>u(c==="map"?"list":"map"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition",children:[c==="map"?p.jsx(zye,{className:"w-5 h-5"}):p.jsx(Gye,{className:"w-5 h-5"}),c==="map"?"List View":"Map View"]}),p.jsxs("select",{value:s,onChange:fe=>o(fe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[p.jsx("option",{value:"all",children:"All Forests"}),r.map(fe=>p.jsx("option",{value:fe.id,children:fe.name},fe.id))]})]}),i&&p.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:p.jsx("p",{className:"text-blue-800 font-semibold",children:" Click on the map to place a tree"})})]}),c==="map"?p.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",style:{height:"600px"},children:p.jsx("div",{ref:we,className:"w-full h-full"})}):p.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-green-600 text-white",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-4 py-3 text-left",children:"Name"}),p.jsx("th",{className:"px-4 py-3 text-left",children:"Type"}),p.jsx("th",{className:"px-4 py-3 text-left",children:"Forest"}),p.jsx("th",{className:"px-4 py-3 text-left",children:"Height"}),p.jsx("th",{className:"px-4 py-3 text-left",children:"Diameter"}),p.jsx("th",{className:"px-4 py-3 text-left",children:"Planted"}),p.jsx("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),p.jsx("tbody",{children:pe.map((fe,Qe)=>p.jsxs("tr",{className:Qe%2===0?"bg-gray-50":"bg-white",children:[p.jsx("td",{className:"px-4 py-3",children:fe.name}),p.jsx("td",{className:"px-4 py-3",children:fe.type||"N/A"}),p.jsx("td",{className:"px-4 py-3",children:fe.forest_name||"N/A"}),p.jsxs("td",{className:"px-4 py-3",children:[fe.height,"m"]}),p.jsxs("td",{className:"px-4 py-3",children:[fe.diameter,"cm"]}),p.jsx("td",{className:"px-4 py-3",children:fe.date_planted||"N/A"}),p.jsx("td",{className:"px-4 py-3",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>ze(fe),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:p.jsx(qye,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>Ne(fe.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:p.jsx(Jye,{className:"w-4 h-4"})})]})})]},fe.id))})]})}),g&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-2xl font-bold text-green-800",children:B?"Edit Tree":"Add New Tree"}),p.jsx("button",{onClick:()=>{C(!1),S(null),st()},className:"text-gray-500 hover:text-gray-700",children:p.jsx(Am,{className:"w-6 h-6"})})]}),p.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Tree Name *"}),p.jsx("input",{type:"text",value:K.name,onChange:fe=>de({...K,name:fe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Tree Type"}),p.jsx("input",{type:"text",value:K.type,onChange:fe=>de({...K,type:fe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",placeholder:"e.g., Oak, Pine..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Forest *"}),p.jsxs("select",{value:K.forest_id,onChange:fe=>de({...K,forest_id:fe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0,children:[p.jsx("option",{value:"",children:"Select Forest"}),r.map(fe=>p.jsx("option",{value:fe.id,children:fe.name},fe.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Height (m) *"}),p.jsx("input",{type:"number",step:"0.1",value:K.height,onChange:fe=>de({...K,height:fe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Diameter (cm) *"}),p.jsx("input",{type:"number",step:"0.1",value:K.diameter,onChange:fe=>de({...K,diameter:fe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date Planted *"}),p.jsx("input",{type:"date",value:K.date_planted,onChange:fe=>de({...K,date_planted:fe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date Cut (optional)"}),p.jsx("input",{type:"date",value:K.date_cut,onChange:fe=>de({...K,date_cut:fe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Latitude *"}),p.jsx("input",{type:"text",value:K.latitude,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",placeholder:"Click on map",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Longitude *"}),p.jsx("input",{type:"text",value:K.longitude,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",placeholder:"Click on map",required:!0})]})]}),p.jsxs("div",{className:"flex gap-3 pt-4",children:[p.jsx("button",{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-3 rounded-lg transition",children:B?"Update Tree":"Create Tree"}),p.jsx("button",{type:"button",onClick:()=>{C(!1),S(null),st()},className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50 transition",children:"Cancel"})]})]})]})})}),R&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h2",{className:"text-2xl font-bold text-orange-800 flex items-center gap-2",children:[p.jsx(Hye,{className:"w-6 h-6"}),"Search Location"]}),p.jsx("button",{onClick:()=>V(!1),className:"text-gray-500 hover:text-gray-700",children:p.jsx(Am,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Search Type"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>oe("coordinates"),className:`flex-1 px-4 py-2 rounded-lg font-semibold transition ${se==="coordinates"?"bg-orange-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Coordinates"}),p.jsx("button",{onClick:()=>oe("address"),className:`flex-1 px-4 py-2 rounded-lg font-semibold transition ${se==="address"?"bg-orange-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Address"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:se==="coordinates"?"Enter Coordinates (lat,lng)":"Enter Address"}),p.jsx("input",{type:"text",value:Y,onChange:fe=>te(fe.target.value),onKeyPress:fe=>fe.key==="Enter"&&ie(),placeholder:se==="coordinates"?"-18.8792, 47.5079":"Antananarivo, Madagascar",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"}),p.jsx("p",{className:"text-xs text-gray-500 mt-1",children:se==="coordinates"?"Format: latitude, longitude (e.g., -18.8792, 47.5079)":"Enter city, address, or place name"})]}),p.jsxs("button",{onClick:ie,className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-semibold px-6 py-3 rounded-lg transition",children:[p.jsx(N7,{className:"w-5 h-5 inline mr-2"}),"Search"]})]})]})}),D&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsxs("h2",{className:"text-2xl font-bold text-purple-800 flex items-center gap-2",children:[p.jsx(e1,{className:"w-6 h-6"}),"Bulk Import Trees"]}),p.jsx("button",{onClick:()=>F(!1),className:"text-gray-500 hover:text-gray-700 transition",children:p.jsx(Am,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-amber-50 border border-amber-300 rounded-lg p-4 flex items-start gap-3",children:[p.jsx(_1,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"text-sm",children:[p.jsx("p",{className:"font-semibold text-amber-800 mb-1",children:"Smart Duplicate Detection"}),p.jsxs("p",{className:"text-amber-700 mb-2",children:["Trees with the same ",p.jsx("strong",{children:"name + forest + GPS location (within 10m)"})," will be automatically skipped."]}),p.jsxs("div",{className:"mt-2 bg-white rounded p-2 text-xs text-amber-900",children:[p.jsx("p",{className:"font-mono",children:' "Oak 1" at -18.8792, 47.5079 - New tree'}),p.jsx("p",{className:"font-mono",children:' "Oak 1" at -18.8792, 47.5079 - Duplicate, skipped'}),p.jsx("p",{className:"font-mono",children:' "Oak 1" at -18.9000, 47.5200 - Different location 10m, created'})]})]})]}),p.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[p.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"CSV Format Instructions"]}),p.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Your CSV file must include these columns:"}),p.jsxs("ul",{className:"text-sm text-gray-700 space-y-2 ml-4",children:[p.jsxs("li",{children:[" ",p.jsx("strong",{children:"name"})," - Tree name (required)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"type"})," - Tree type (optional)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"forest_id"})," - Forest ID number (required)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"latitude"})," - Latitude coordinate (required)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"longitude"})," - Longitude coordinate (required)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"height"})," - Height in meters (required)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"diameter"})," - Diameter in cm (required)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"date_planted"})," - Format: YYYY-MM-DD (required)"]}),p.jsxs("li",{children:[" ",p.jsx("strong",{children:"date_cut"})," - Format: YYYY-MM-DD (optional)"]})]})]}),p.jsxs("button",{onClick:He,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition flex items-center justify-center gap-2",children:[p.jsx(Rq,{className:"w-5 h-5"}),"Download CSV Template"]}),p.jsxs("div",{className:"border-2 border-dashed border-purple-300 rounded-lg p-8 text-center bg-purple-50 hover:bg-purple-100 transition",children:[p.jsx(e1,{className:"w-16 h-16 mx-auto text-purple-400 mb-4"}),p.jsx("p",{className:"text-gray-700 mb-2 font-semibold",children:"Choose your CSV file to upload"}),p.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Maximum file size: 5MB"}),p.jsx("input",{type:"file",accept:".csv",onChange:le,className:"hidden",id:"csv-upload-tree"}),p.jsx("label",{htmlFor:"csv-upload-tree",className:"inline-block bg-purple-600 hover:bg-purple-700 text-white font-semibold px-8 py-3 rounded-lg cursor-pointer transition shadow-md",children:"Select CSV File"})]}),p.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[p.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Example CSV Content:"}),p.jsx("pre",{className:"text-xs bg-white p-3 rounded border border-gray-300 overflow-x-auto",children:`name,type,forest_id,latitude,longitude,height,diameter,date_planted,date_cut
Oak Tree 1,Oak,1,-18.8792,47.5079,15.5,45.2,2023-01-15,
Pine Tree 1,Pine,1,-18.8800,47.5100,12.3,38.7,2023-02-20,
Eucalyptus 1,Eucalyptus,2,-18.8750,47.5050,18.2,52.1,2022-11-30,2024-01-10`}),p.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Note: GPS coordinates must be at least 10m apart to avoid duplicates"})]})]})]})})]})};function fTe(){const[t]=tne(),e=og(),[r,n]=Ae.useState(!0),[s,o]=Ae.useState(!1),[c,u]=Ae.useState(null),[i,m]=Ae.useState(null),[g,C]=Ae.useState(null),[B,S]=Ae.useState(null),P=Ae.useRef(),j=t.get("TransactionToken")||t.get("trans_token");Ae.useEffect(()=>{if(!j){C("Missing transaction token"),n(!1);return}const V=localStorage.getItem("dpo_payment_context");if(V){const Y=JSON.parse(V);S(Y),console.log(" Context recovered:",Y)}else console.warn(" No payment context found in localStorage");D()},[j]);const D=async()=>{var V,Y;try{console.log(" Verifying payment with token:",j);const te=await Tr.get(`/api/payments/dpo/verify/${j}`);console.log(" Verification response:",te.data),te.data.success&&te.data.status==="verified"?(u(te.data),n(!1),await F()):(C("Payment verification failed"),n(!1))}catch(te){console.error(" Payment verification error:",te),C(((Y=(V=te.response)==null?void 0:V.data)==null?void 0:Y.error)||"Verification failed"),n(!1)}},F=async()=>{var V,Y;if(!B){C("No payment context found. Please try again.");return}o(!0),console.log(" Generating report with context:",B);try{const te=B.geojson||localStorage.getItem("polygon_geojson");if(!te)throw new Error("No GeoJSON data found");const se=JSON.parse(te);console.log(" GeoJSON recovered:",se);let oe;se.type==="FeatureCollection"?oe=se.features[0].geometry:se.type==="Feature"?oe=se.geometry:oe=se;const K={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:oe}]},de=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),we=new File([de],"payment-polygon.geojson",{type:"application/json"}),J=new FormData;J.append("file",we);const Z=B.featureName==="reportcarbonguest"?"/api/gfw/Geojson/CarbonReportFromFile":"/api/gfw/Geojson/ReportFromFile";console.log(" Calling report API:",Z);const Ie=await Tr.post(Z,J,{headers:{"X-Guest-Phone":B.phone}});console.log(" Report generated:",Ie.data),m(Ie.data.report),localStorage.removeItem("dpo_payment_context")}catch(te){console.error(" Error generating report:",te),C("Failed to generate report: "+(((Y=(V=te.response)==null?void 0:V.data)==null?void 0:Y.error)||te.message))}finally{o(!1)}},R=async()=>{if(P.current)try{const V=B.featureName==="reportcarbonguest"?"carbon":"eudr",Y=await O4(P,V);if(Y){const te=URL.createObjectURL(Y),se=document.createElement("a");se.href=te,se.download=`${V}_report.pdf`,se.click()}}catch(V){console.error("Error downloading PDF:",V)}};return r?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50",children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-green-500 mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Verifying Payment..."}),p.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your transaction"})]})}):s?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50",children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500 mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Generating Your Report..."}),p.jsx("p",{className:"text-gray-600",children:"This may take a few moments"})]})}):g?p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50",children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:""}),p.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),p.jsx("p",{className:"text-gray-600 mb-6",children:g}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:()=>e("/EUDRSubmissionForGuest"),className:"w-full bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"Try Again"}),p.jsx("button",{onClick:()=>e("/home"),className:"w-full bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:"Return Home"})]})]})}):p.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4",children:p.jsxs("div",{className:"max-w-4xl mx-auto",children:[p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl mb-6 text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4",children:p.jsx("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),p.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Payment Successful!"}),p.jsx("p",{className:"text-gray-600",children:"Your transaction has been completed and your report is ready"}),c&&p.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4 space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-600",children:"Amount:"}),p.jsxs("span",{className:"font-semibold text-gray-800",children:[c.amount," ",c.currency]})]}),c.company_ref&&p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-600",children:"Reference:"}),p.jsx("span",{className:"font-mono text-xs text-gray-800",children:c.company_ref})]})]})]}),i&&B&&p.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl",children:[B.featureName==="reportcarbonguest"?p.jsx(WX,{results:i,reportRef:P}):p.jsx(UC,{results:i,reportRef:P}),p.jsxs("div",{className:"mt-6 space-y-3",children:[p.jsxs("button",{onClick:R,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition-colors font-medium flex items-center justify-center gap-2",children:[p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF Report"]}),p.jsx("button",{onClick:()=>e("/home"),className:"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Go to Dashboard"})]})]})]})})}function pTe(){const t=useNavigate(),[e]=useSearchParams(),r=e.get("trans_token");return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 to-orange-50 p-4",children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-yellow-100 rounded-full mb-4",children:p.jsx("svg",{className:"w-12 h-12 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Payment Cancelled"}),p.jsx("p",{className:"text-gray-600 mb-6",children:"You've cancelled the payment process. No charges were made to your account."}),r&&p.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:p.jsxs("p",{className:"text-xs text-gray-500",children:["Transaction: ",r.substring(0,20),"..."]})}),p.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:p.jsx("p",{className:"text-sm text-yellow-800",children:" You can try again anytime to access premium features"})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:()=>t("/EUDRSubmissionForGuest"),className:"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Try Again"}),p.jsx("button",{onClick:()=>t("/home"),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Return Home"})]})]})})}function ATe(){const t=useNavigate(),[e]=useSearchParams(),r=e.get("error")||"An unexpected error occurred";return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-50 p-4",children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-red-100 rounded-full mb-4",children:p.jsx("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),p.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"Payment Error"}),p.jsx("p",{className:"text-gray-600 mb-6",children:r}),p.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:p.jsx("p",{className:"text-sm text-red-800",children:" If the problem persists, please contact support"})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:()=>t("/EUDRSubmissionForGuest"),className:"w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Try Again"}),p.jsx("button",{onClick:()=>t("/home"),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Return Home"}),p.jsx("button",{onClick:()=>t("/contactus"),className:"w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Contact Support"})]})]})})}const mTe=({children:t,allowedRoles:e})=>{var n,s;const r=localStorage.getItem("token");if(!r)return p.jsx(qg,{to:"/login",replace:!0});try{const o=gb(r),c=((n=o.sub)==null?void 0:n.user_type)||"";return((s=o.sub)==null?void 0:s.is_admin)||!1||e.includes(c)?t:p.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:p.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md text-center",children:[p.jsx("div",{className:"text-6xl mb-4",children:""}),p.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Accs Rserv"}),p.jsxs("p",{className:"text-gray-600 mb-4",children:["Cette fonctionnalit est rserve aux utilisateurs de type ",p.jsx("strong",{children:e.join(", ")}),"."]}),p.jsx("div",{className:"bg-gray-50 p-4 rounded mb-6",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Votre type: ",p.jsx("strong",{className:"text-red-600 capitalize",children:c||"Non dfini"})]})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>window.history.back(),className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",children:"Retour"}),p.jsx("button",{onClick:()=>window.location.href="/home",className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Accueil"})]})]})})}catch{return localStorage.removeItem("token"),p.jsx(qg,{to:"/login",replace:!0})}};function gTe(){const t=[{path:"/weathermap",component:p.jsx(V4e,{}),adminOnly:!1,allowedRoles:["admin","weather"]},{path:"/weathermapfarm",component:p.jsx(G4e,{}),adminOnly:!1,allowedRoles:["admin","weather"]},{path:"/weatherhistory",component:p.jsx($4e,{}),adminOnly:!1,allowedRoles:["admin","weather"]},{path:"/weatherdas",component:p.jsx(q4e,{}),adminOnly:!1,allowedRoles:["admin","weather"]},{path:"/weatherandsolar",component:p.jsx(F4e,{}),adminOnly:!1,allowedRoles:["admin","weather"]},{path:"/farmmanager",component:p.jsx(L4e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/farmdatamanager",component:p.jsx(I4e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/createfarm",component:p.jsx(c1e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/farmdata",component:p.jsx(u1e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/farmergroup",component:p.jsx(B4e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/tabcrop",component:p.jsx(_ye,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/cropmanage",component:p.jsx(d1e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/cropmanager",component:p.jsx(P4e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/cropedit/:id",component:p.jsx(vve,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/irrigationmanager",component:p.jsx(j4e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/cropcoefficientmanager",component:p.jsx(M4e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/grademanager",component:p.jsx(k4e,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/storeProductManager",component:p.jsx(WCe,{}),adminOnly:!1,allowedRoles:["admin","farmer"]},{path:"/forestpage",component:p.jsx(i1e,{}),adminOnly:!1,allowedRoles:["admin","forest"]},{path:"/forestpoint",component:p.jsx(Sve,{}),adminOnly:!1,allowedRoles:["admin","forest"]},{path:"/foresttree",component:p.jsx(Eve,{}),adminOnly:!1,allowedRoles:["admin","forest"]},{path:"/treemanager",component:p.jsx(hTe,{}),adminOnly:!1,allowedRoles:["admin","forest"]},{path:"/reportforest",component:p.jsx(w4e,{}),adminOnly:!1,allowedRoles:["admin","forest"]},{path:"/reportcarbonforest",component:p.jsx(qCe,{}),adminOnly:!1,allowedRoles:["admin","forest"]},{path:"/graph",component:p.jsx(Xce,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/graphpest",component:p.jsx(SBe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/graphcgd",component:p.jsx(S4e,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/onemonth",component:p.jsx(KCe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/plantingdate",component:p.jsx(wBe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/threemonth",component:p.jsx(CBe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/card",component:p.jsx(Uie,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/cardex",component:p.jsx(xve,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/mapbox",component:p.jsx(bhe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/mapview",component:p.jsx(whe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/mapviewall",component:p.jsx(Che,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/district",component:p.jsx(bve,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/districts/:id/view",component:p.jsx(wve,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/districts",component:p.jsx(Xq,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/districts/:id/edit",component:p.jsx(Kq,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/qr",component:p.jsx(Tve,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/qrproduce",component:p.jsx(Fve,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/qrconservation",component:p.jsx(Mve,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/qrfertilizer",component:p.jsx(zve,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/qrexport",component:p.jsx(Ove,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/reportfarmer",component:p.jsx(b4e,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/reportcarbon",component:p.jsx($Ce,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/createUsers",component:p.jsx(C4e,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/usermanager",component:p.jsx(N4e,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/categorymanager",component:p.jsx(H4e,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/userDash",component:p.jsx(EBe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/alertmessage",component:p.jsx(cTe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/EUDRSubmission",component:p.jsx(R3e,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/stats-certificate",component:p.jsx(dTe,{}),adminOnly:!1,allowedRoles:["admin","weather","farmer","forest"]},{path:"/featuresManager",component:p.jsx(V3e,{}),adminOnly:!0,allowedRoles:["admin"]}];return p.jsx(Yre,{children:p.jsxs(Hre,{children:[p.jsx(Vu,{path:"/",element:p.jsx(fye,{})}),p.jsx(Vu,{path:"/landipage",element:p.jsx(age,{})}),p.jsx(Vu,{path:"/login",element:p.jsx(pye,{})}),p.jsx(Vu,{path:"/contactus",element:p.jsx(z4e,{})}),p.jsx(Vu,{path:"/signup",element:p.jsx(Q4e,{})}),p.jsx(Vu,{path:"/barnav",element:p.jsx(W4e,{})}),p.jsx(Vu,{path:"/payment-required",element:p.jsx(H3e,{})}),p.jsx(Vu,{path:"/EUDRSubmissionForGuest",element:p.jsx(oTe,{})}),p.jsx(Vu,{path:"/sectionfutur",element:p.jsx(lTe,{})}),p.jsx(Vu,{path:"/test",element:p.jsx(uTe,{})}),p.jsx(Vu,{path:"/payment/success",element:p.jsx(fTe,{})}),p.jsx(Vu,{path:"/payment/cancelled",element:p.jsx(pTe,{})}),p.jsx(Vu,{path:"/payment/error",element:p.jsx(ATe,{})}),p.jsx(Vu,{path:"/home",element:p.jsx(oz,{children:p.jsx(gye,{})})}),t.map(({path:e,component:r,adminOnly:n,feature:s,allowedRoles:o})=>p.jsx(Vu,{path:e,element:p.jsx(oz,{adminOnly:n,children:p.jsx(mTe,{allowedRoles:o,children:s?p.jsx(Q3e,{feature:s,children:p.jsx(T7,{children:r})}):p.jsx(T7,{children:r})})})},e))]})})}dT.createRoot(document.getElementById("root")).render(p.jsx(Ui.StrictMode,{children:p.jsx(gTe,{})}));export{Ho as c,Bp as g};
