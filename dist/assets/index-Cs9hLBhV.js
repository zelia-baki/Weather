const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-EclDAuke.js","assets/stackblur-es-BAaRapLP.js","assets/index.es-B4ap0tLG.js"])))=>i.map(i=>d[i]);
var _J=Object.defineProperty;var bJ=(t,e,r)=>e in t?_J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ni=(t,e,r)=>bJ(t,typeof e!="symbol"?e+"":e,r);function wJ(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function U4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var n9={exports:{}},z4={},i9={exports:{}},mo={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_=Symbol.for("react.element"),CJ=Symbol.for("react.portal"),SJ=Symbol.for("react.fragment"),BJ=Symbol.for("react.strict_mode"),EJ=Symbol.for("react.profiler"),TJ=Symbol.for("react.provider"),IJ=Symbol.for("react.context"),LJ=Symbol.for("react.forward_ref"),FJ=Symbol.for("react.suspense"),NJ=Symbol.for("react.memo"),PJ=Symbol.for("react.lazy"),pk=Symbol.iterator;function MJ(t){return t===null||typeof t!="object"?null:(t=pk&&t[pk]||t["@@iterator"],typeof t=="function"?t:null)}var s9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o9=Object.assign,a9={};function _1(t,e,r){this.props=t,this.context=e,this.refs=a9,this.updater=r||s9}_1.prototype.isReactComponent={};_1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l9(){}l9.prototype=_1.prototype;function nL(t,e,r){this.props=t,this.context=e,this.refs=a9,this.updater=r||s9}var iL=nL.prototype=new l9;iL.constructor=nL;o9(iL,_1.prototype);iL.isPureReactComponent=!0;var Ak=Array.isArray,c9=Object.prototype.hasOwnProperty,sL={current:null},u9={key:!0,ref:!0,__self:!0,__source:!0};function h9(t,e,r){var n,s={},o=null,c=null;if(e!=null)for(n in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)c9.call(e,n)&&!u9.hasOwnProperty(n)&&(s[n]=e[n]);var u=arguments.length-2;if(u===1)s.children=r;else if(1<u){for(var i=Array(u),A=0;A<u;A++)i[A]=arguments[A+2];s.children=i}if(t&&t.defaultProps)for(n in u=t.defaultProps,u)s[n]===void 0&&(s[n]=u[n]);return{$$typeof:H_,type:t,key:o,ref:c,props:s,_owner:sL.current}}function jJ(t,e){return{$$typeof:H_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oL(t){return typeof t=="object"&&t!==null&&t.$$typeof===H_}function kJ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var mk=/\/+/g;function kB(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kJ(""+t.key):e.toString(36)}function z2(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case H_:case CJ:c=!0}}if(c)return c=t,s=s(c),t=n===""?"."+kB(c,0):n,Ak(s)?(r="",t!=null&&(r=t.replace(mk,"$&/")+"/"),z2(s,e,r,"",function(A){return A})):s!=null&&(oL(s)&&(s=jJ(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(mk,"$&/")+"/")+t)),e.push(s)),1;if(c=0,n=n===""?".":n+":",Ak(t))for(var u=0;u<t.length;u++){o=t[u];var i=n+kB(o,u);c+=z2(o,e,r,i,s)}else if(i=MJ(t),typeof i=="function")for(t=i.call(t),u=0;!(o=t.next()).done;)o=o.value,i=n+kB(o,u++),c+=z2(o,e,r,i,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function vw(t,e,r){if(t==null)return t;var n=[],s=0;return z2(t,n,"","",function(o){return e.call(r,o,s++)}),n}function DJ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xh={current:null},Q2={transition:null},OJ={ReactCurrentDispatcher:xh,ReactCurrentBatchConfig:Q2,ReactCurrentOwner:sL};function d9(){throw Error("act(...) is not supported in production builds of React.")}mo.Children={map:vw,forEach:function(t,e,r){vw(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return vw(t,function(){e++}),e},toArray:function(t){return vw(t,function(e){return e})||[]},only:function(t){if(!oL(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mo.Component=_1;mo.Fragment=SJ;mo.Profiler=EJ;mo.PureComponent=nL;mo.StrictMode=BJ;mo.Suspense=FJ;mo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OJ;mo.act=d9;mo.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=o9({},t.props),s=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=sL.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(i in e)c9.call(e,i)&&!u9.hasOwnProperty(i)&&(n[i]=e[i]===void 0&&u!==void 0?u[i]:e[i])}var i=arguments.length-2;if(i===1)n.children=r;else if(1<i){u=Array(i);for(var A=0;A<i;A++)u[A]=arguments[A+2];n.children=u}return{$$typeof:H_,type:t.type,key:s,ref:o,props:n,_owner:c}};mo.createContext=function(t){return t={$$typeof:IJ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TJ,_context:t},t.Consumer=t};mo.createElement=h9;mo.createFactory=function(t){var e=h9.bind(null,t);return e.type=t,e};mo.createRef=function(){return{current:null}};mo.forwardRef=function(t){return{$$typeof:LJ,render:t}};mo.isValidElement=oL;mo.lazy=function(t){return{$$typeof:PJ,_payload:{_status:-1,_result:t},_init:DJ}};mo.memo=function(t,e){return{$$typeof:NJ,type:t,compare:e===void 0?null:e}};mo.startTransition=function(t){var e=Q2.transition;Q2.transition={};try{t()}finally{Q2.transition=e}};mo.unstable_act=d9;mo.useCallback=function(t,e){return xh.current.useCallback(t,e)};mo.useContext=function(t){return xh.current.useContext(t)};mo.useDebugValue=function(){};mo.useDeferredValue=function(t){return xh.current.useDeferredValue(t)};mo.useEffect=function(t,e){return xh.current.useEffect(t,e)};mo.useId=function(){return xh.current.useId()};mo.useImperativeHandle=function(t,e,r){return xh.current.useImperativeHandle(t,e,r)};mo.useInsertionEffect=function(t,e){return xh.current.useInsertionEffect(t,e)};mo.useLayoutEffect=function(t,e){return xh.current.useLayoutEffect(t,e)};mo.useMemo=function(t,e){return xh.current.useMemo(t,e)};mo.useReducer=function(t,e,r){return xh.current.useReducer(t,e,r)};mo.useRef=function(t){return xh.current.useRef(t)};mo.useState=function(t){return xh.current.useState(t)};mo.useSyncExternalStore=function(t,e,r){return xh.current.useSyncExternalStore(t,e,r)};mo.useTransition=function(){return xh.current.useTransition()};mo.version="18.3.1";i9.exports=mo;var ve=i9.exports;const Qi=Sp(ve),oT=wJ({__proto__:null,default:Qi},[ve]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RJ=ve,UJ=Symbol.for("react.element"),zJ=Symbol.for("react.fragment"),QJ=Object.prototype.hasOwnProperty,HJ=RJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VJ={key:!0,ref:!0,__self:!0,__source:!0};function f9(t,e,r){var n,s={},o=null,c=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(n in e)QJ.call(e,n)&&!VJ.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:UJ,type:t,key:o,ref:c,props:s,_owner:HJ.current}}z4.Fragment=zJ;z4.jsx=f9;z4.jsxs=f9;n9.exports=z4;var m=n9.exports,aT={},p9={exports:{}},md={},A9={exports:{}},m9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(xe,ze){var Fe=xe.length;xe.push(ze);e:for(;0<Fe;){var it=Fe-1>>>1,ie=xe[it];if(0<s(ie,ze))xe[it]=ze,xe[Fe]=ie,Fe=it;else break e}}function r(xe){return xe.length===0?null:xe[0]}function n(xe){if(xe.length===0)return null;var ze=xe[0],Fe=xe.pop();if(Fe!==ze){xe[0]=Fe;e:for(var it=0,ie=xe.length,le=ie>>>1;it<le;){var fe=2*(it+1)-1,be=xe[fe],He=fe+1,Je=xe[He];if(0>s(be,Fe))He<ie&&0>s(Je,be)?(xe[it]=Je,xe[He]=Fe,it=He):(xe[it]=be,xe[fe]=Fe,it=fe);else if(He<ie&&0>s(Je,Fe))xe[it]=Je,xe[He]=Fe,it=He;else break e}}return ze}function s(xe,ze){var Fe=xe.sortIndex-ze.sortIndex;return Fe!==0?Fe:xe.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var i=[],A=[],g=1,C=null,B=3,S=!1,P=!1,j=!1,R=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(xe){for(var ze=r(A);ze!==null;){if(ze.callback===null)n(A);else if(ze.startTime<=xe)n(A),ze.sortIndex=ze.expirationTime,e(i,ze);else break;ze=r(A)}}function J(xe){if(j=!1,$(xe),!P)if(r(i)!==null)P=!0,De(te);else{var ze=r(A);ze!==null&&Be(J,ze.startTime-xe)}}function te(xe,ze){P=!1,j&&(j=!1,N(K),K=-1),S=!0;var Fe=B;try{for($(ze),C=r(i);C!==null&&(!(C.expirationTime>ze)||xe&&!Z());){var it=C.callback;if(typeof it=="function"){C.callback=null,B=C.priorityLevel;var ie=it(C.expirationTime<=ze);ze=t.unstable_now(),typeof ie=="function"?C.callback=ie:C===r(i)&&n(i),$(ze)}else n(i);C=r(i)}if(C!==null)var le=!0;else{var fe=r(A);fe!==null&&Be(J,fe.startTime-ze),le=!1}return le}finally{C=null,B=Fe,S=!1}}var ue=!1,oe=null,K=-1,ce=5,me=-1;function Z(){return!(t.unstable_now()-me<ce)}function Y(){if(oe!==null){var xe=t.unstable_now();me=xe;var ze=!0;try{ze=oe(!0,xe)}finally{ze?Le():(ue=!1,oe=null)}}else ue=!1}var Le;if(typeof U=="function")Le=function(){U(Y)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,Qe=_e.port2;_e.port1.onmessage=Y,Le=function(){Qe.postMessage(null)}}else Le=function(){R(Y,0)};function De(xe){oe=xe,ue||(ue=!0,Le())}function Be(xe,ze){K=R(function(){xe(t.unstable_now())},ze)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(xe){xe.callback=null},t.unstable_continueExecution=function(){P||S||(P=!0,De(te))},t.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<xe?Math.floor(1e3/xe):5},t.unstable_getCurrentPriorityLevel=function(){return B},t.unstable_getFirstCallbackNode=function(){return r(i)},t.unstable_next=function(xe){switch(B){case 1:case 2:case 3:var ze=3;break;default:ze=B}var Fe=B;B=ze;try{return xe()}finally{B=Fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(xe,ze){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var Fe=B;B=xe;try{return ze()}finally{B=Fe}},t.unstable_scheduleCallback=function(xe,ze,Fe){var it=t.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?it+Fe:it):Fe=it,xe){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Fe+ie,xe={id:g++,callback:ze,priorityLevel:xe,startTime:Fe,expirationTime:ie,sortIndex:-1},Fe>it?(xe.sortIndex=Fe,e(A,xe),r(i)===null&&xe===r(A)&&(j?(N(K),K=-1):j=!0,Be(J,Fe-it))):(xe.sortIndex=ie,e(i,xe),P||S||(P=!0,De(te))),xe},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(xe){var ze=B;return function(){var Fe=B;B=ze;try{return xe.apply(this,arguments)}finally{B=Fe}}}})(m9);A9.exports=m9;var GJ=A9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qJ=ve,pd=GJ;function Rn(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g9=new Set,e_={};function _0(t,e){r1(t,e),r1(t+"Capture",e)}function r1(t,e){for(e_[t]=e,t=0;t<e.length;t++)g9.add(e[t])}var aA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lT=Object.prototype.hasOwnProperty,$J=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gk={},yk={};function WJ(t){return lT.call(yk,t)?!0:lT.call(gk,t)?!1:$J.test(t)?yk[t]=!0:(gk[t]=!0,!1)}function KJ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XJ(t,e,r,n){if(e===null||typeof e>"u"||KJ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _h(t,e,r,n,s,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var gu={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gu[t]=new _h(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gu[e]=new _h(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gu[t]=new _h(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gu[t]=new _h(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gu[t]=new _h(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gu[t]=new _h(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gu[t]=new _h(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gu[t]=new _h(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gu[t]=new _h(t,5,!1,t.toLowerCase(),null,!1,!1)});var aL=/[\-:]([a-z])/g;function lL(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(aL,lL);gu[e]=new _h(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(aL,lL);gu[e]=new _h(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(aL,lL);gu[e]=new _h(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gu[t]=new _h(t,1,!1,t.toLowerCase(),null,!1,!1)});gu.xlinkHref=new _h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gu[t]=new _h(t,1,!1,t.toLowerCase(),null,!0,!0)});function cL(t,e,r,n){var s=gu.hasOwnProperty(e)?gu[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XJ(e,r,s,n)&&(r=null),n||s===null?WJ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var yA=qJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xw=Symbol.for("react.element"),vy=Symbol.for("react.portal"),xy=Symbol.for("react.fragment"),uL=Symbol.for("react.strict_mode"),cT=Symbol.for("react.profiler"),y9=Symbol.for("react.provider"),v9=Symbol.for("react.context"),hL=Symbol.for("react.forward_ref"),uT=Symbol.for("react.suspense"),hT=Symbol.for("react.suspense_list"),dL=Symbol.for("react.memo"),em=Symbol.for("react.lazy"),x9=Symbol.for("react.offscreen"),vk=Symbol.iterator;function Sv(t){return t===null||typeof t!="object"?null:(t=vk&&t[vk]||t["@@iterator"],typeof t=="function"?t:null)}var Rl=Object.assign,DB;function Kv(t){if(DB===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);DB=e&&e[1]||""}return`
`+DB+t}var OB=!1;function RB(t,e){if(!t||OB)return"";OB=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(A){var n=A}Reflect.construct(t,[],e)}else{try{e.call()}catch(A){n=A}t.call(e.prototype)}else{try{throw Error()}catch(A){n=A}t()}}catch(A){if(A&&n&&typeof A.stack=="string"){for(var s=A.stack.split(`
`),o=n.stack.split(`
`),c=s.length-1,u=o.length-1;1<=c&&0<=u&&s[c]!==o[u];)u--;for(;1<=c&&0<=u;c--,u--)if(s[c]!==o[u]){if(c!==1||u!==1)do if(c--,u--,0>u||s[c]!==o[u]){var i=`
`+s[c].replace(" at new "," at ");return t.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",t.displayName)),i}while(1<=c&&0<=u);break}}}finally{OB=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Kv(t):""}function YJ(t){switch(t.tag){case 5:return Kv(t.type);case 16:return Kv("Lazy");case 13:return Kv("Suspense");case 19:return Kv("SuspenseList");case 0:case 2:case 15:return t=RB(t.type,!1),t;case 11:return t=RB(t.type.render,!1),t;case 1:return t=RB(t.type,!0),t;default:return""}}function dT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xy:return"Fragment";case vy:return"Portal";case cT:return"Profiler";case uL:return"StrictMode";case uT:return"Suspense";case hT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case v9:return(t.displayName||"Context")+".Consumer";case y9:return(t._context.displayName||"Context")+".Provider";case hL:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dL:return e=t.displayName||null,e!==null?e:dT(t.type)||"Memo";case em:e=t._payload,t=t._init;try{return dT(t(e))}catch{}}return null}function ZJ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dT(e);case 8:return e===uL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Um(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JJ(t){var e=_9(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(c){n=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _w(t){t._valueTracker||(t._valueTracker=JJ(t))}function b9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=_9(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function _5(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fT(t,e){var r=e.checked;return Rl({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function xk(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Um(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function w9(t,e){e=e.checked,e!=null&&cL(t,"checked",e,!1)}function pT(t,e){w9(t,e);var r=Um(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?AT(t,e.type,r):e.hasOwnProperty("defaultValue")&&AT(t,e.type,Um(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _k(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function AT(t,e,r){(e!=="number"||_5(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Xv=Array.isArray;function zy(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Um(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function mT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Rn(91));return Rl({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bk(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Rn(92));if(Xv(r)){if(1<r.length)throw Error(Rn(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Um(r)}}function C9(t,e){var r=Um(e.value),n=Um(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function wk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function S9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?S9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bw,B9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bw=bw||document.createElement("div"),bw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function t_(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var gx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eee=["Webkit","ms","Moz","O"];Object.keys(gx).forEach(function(t){eee.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gx[e]=gx[t]})});function E9(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||gx.hasOwnProperty(t)&&gx[t]?(""+e).trim():e+"px"}function T9(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=E9(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var tee=Rl({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yT(t,e){if(e){if(tee[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Rn(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Rn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Rn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Rn(62))}}function vT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xT=null;function fL(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _T=null,Qy=null,Hy=null;function Ck(t){if(t=q_(t)){if(typeof _T!="function")throw Error(Rn(280));var e=t.stateNode;e&&(e=q4(e),_T(t.stateNode,t.type,e))}}function I9(t){Qy?Hy?Hy.push(t):Hy=[t]:Qy=t}function L9(){if(Qy){var t=Qy,e=Hy;if(Hy=Qy=null,Ck(t),e)for(t=0;t<e.length;t++)Ck(e[t])}}function F9(t,e){return t(e)}function N9(){}var UB=!1;function P9(t,e,r){if(UB)return t(e,r);UB=!0;try{return F9(t,e,r)}finally{UB=!1,(Qy!==null||Hy!==null)&&(N9(),L9())}}function r_(t,e){var r=t.stateNode;if(r===null)return null;var n=q4(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Rn(231,e,typeof r));return r}var bT=!1;if(aA)try{var Bv={};Object.defineProperty(Bv,"passive",{get:function(){bT=!0}}),window.addEventListener("test",Bv,Bv),window.removeEventListener("test",Bv,Bv)}catch{bT=!1}function ree(t,e,r,n,s,o,c,u,i){var A=Array.prototype.slice.call(arguments,3);try{e.apply(r,A)}catch(g){this.onError(g)}}var yx=!1,b5=null,w5=!1,wT=null,nee={onError:function(t){yx=!0,b5=t}};function iee(t,e,r,n,s,o,c,u,i){yx=!1,b5=null,ree.apply(nee,arguments)}function see(t,e,r,n,s,o,c,u,i){if(iee.apply(this,arguments),yx){if(yx){var A=b5;yx=!1,b5=null}else throw Error(Rn(198));w5||(w5=!0,wT=A)}}function b0(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function M9(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sk(t){if(b0(t)!==t)throw Error(Rn(188))}function oee(t){var e=t.alternate;if(!e){if(e=b0(t),e===null)throw Error(Rn(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Sk(s),t;if(o===n)return Sk(s),e;o=o.sibling}throw Error(Rn(188))}if(r.return!==n.return)r=s,n=o;else{for(var c=!1,u=s.child;u;){if(u===r){c=!0,r=s,n=o;break}if(u===n){c=!0,n=s,r=o;break}u=u.sibling}if(!c){for(u=o.child;u;){if(u===r){c=!0,r=o,n=s;break}if(u===n){c=!0,n=o,r=s;break}u=u.sibling}if(!c)throw Error(Rn(189))}}if(r.alternate!==n)throw Error(Rn(190))}if(r.tag!==3)throw Error(Rn(188));return r.stateNode.current===r?t:e}function j9(t){return t=oee(t),t!==null?k9(t):null}function k9(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=k9(t);if(e!==null)return e;t=t.sibling}return null}var D9=pd.unstable_scheduleCallback,Bk=pd.unstable_cancelCallback,aee=pd.unstable_shouldYield,lee=pd.unstable_requestPaint,mc=pd.unstable_now,cee=pd.unstable_getCurrentPriorityLevel,pL=pd.unstable_ImmediatePriority,O9=pd.unstable_UserBlockingPriority,C5=pd.unstable_NormalPriority,uee=pd.unstable_LowPriority,R9=pd.unstable_IdlePriority,Q4=null,mp=null;function hee(t){if(mp&&typeof mp.onCommitFiberRoot=="function")try{mp.onCommitFiberRoot(Q4,t,void 0,(t.current.flags&128)===128)}catch{}}var Pf=Math.clz32?Math.clz32:pee,dee=Math.log,fee=Math.LN2;function pee(t){return t>>>=0,t===0?32:31-(dee(t)/fee|0)|0}var ww=64,Cw=4194304;function Yv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function S5(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,o=t.pingedLanes,c=r&268435455;if(c!==0){var u=c&~s;u!==0?n=Yv(u):(o&=c,o!==0&&(n=Yv(o)))}else c=r&~s,c!==0?n=Yv(c):o!==0&&(n=Yv(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Pf(e),s=1<<r,n|=t[r],e&=~s;return n}function Aee(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mee(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-Pf(o),u=1<<c,i=s[c];i===-1?(!(u&r)||u&n)&&(s[c]=Aee(u,e)):i<=e&&(t.expiredLanes|=u),o&=~u}}function CT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U9(){var t=ww;return ww<<=1,!(ww&4194240)&&(ww=64),t}function zB(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function V_(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pf(e),t[e]=r}function gee(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Pf(r),o=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~o}}function AL(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Pf(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ca=0;function z9(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Q9,mL,H9,V9,G9,ST=!1,Sw=[],wm=null,Cm=null,Sm=null,n_=new Map,i_=new Map,nm=[],yee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ek(t,e){switch(t){case"focusin":case"focusout":wm=null;break;case"dragenter":case"dragleave":Cm=null;break;case"mouseover":case"mouseout":Sm=null;break;case"pointerover":case"pointerout":n_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":i_.delete(e.pointerId)}}function Ev(t,e,r,n,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},e!==null&&(e=q_(e),e!==null&&mL(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vee(t,e,r,n,s){switch(e){case"focusin":return wm=Ev(wm,t,e,r,n,s),!0;case"dragenter":return Cm=Ev(Cm,t,e,r,n,s),!0;case"mouseover":return Sm=Ev(Sm,t,e,r,n,s),!0;case"pointerover":var o=s.pointerId;return n_.set(o,Ev(n_.get(o)||null,t,e,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,i_.set(o,Ev(i_.get(o)||null,t,e,r,n,s)),!0}return!1}function q9(t){var e=Qg(t.target);if(e!==null){var r=b0(e);if(r!==null){if(e=r.tag,e===13){if(e=M9(r),e!==null){t.blockedOn=e,G9(t.priority,function(){H9(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function H2(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=BT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);xT=n,r.target.dispatchEvent(n),xT=null}else return e=q_(r),e!==null&&mL(e),t.blockedOn=r,!1;e.shift()}return!0}function Tk(t,e,r){H2(t)&&r.delete(e)}function xee(){ST=!1,wm!==null&&H2(wm)&&(wm=null),Cm!==null&&H2(Cm)&&(Cm=null),Sm!==null&&H2(Sm)&&(Sm=null),n_.forEach(Tk),i_.forEach(Tk)}function Tv(t,e){t.blockedOn===e&&(t.blockedOn=null,ST||(ST=!0,pd.unstable_scheduleCallback(pd.unstable_NormalPriority,xee)))}function s_(t){function e(s){return Tv(s,t)}if(0<Sw.length){Tv(Sw[0],t);for(var r=1;r<Sw.length;r++){var n=Sw[r];n.blockedOn===t&&(n.blockedOn=null)}}for(wm!==null&&Tv(wm,t),Cm!==null&&Tv(Cm,t),Sm!==null&&Tv(Sm,t),n_.forEach(e),i_.forEach(e),r=0;r<nm.length;r++)n=nm[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<nm.length&&(r=nm[0],r.blockedOn===null);)q9(r),r.blockedOn===null&&nm.shift()}var Vy=yA.ReactCurrentBatchConfig,B5=!0;function _ee(t,e,r,n){var s=Ca,o=Vy.transition;Vy.transition=null;try{Ca=1,gL(t,e,r,n)}finally{Ca=s,Vy.transition=o}}function bee(t,e,r,n){var s=Ca,o=Vy.transition;Vy.transition=null;try{Ca=4,gL(t,e,r,n)}finally{Ca=s,Vy.transition=o}}function gL(t,e,r,n){if(B5){var s=BT(t,e,r,n);if(s===null)YB(t,e,n,E5,r),Ek(t,n);else if(vee(s,t,e,r,n))n.stopPropagation();else if(Ek(t,n),e&4&&-1<yee.indexOf(t)){for(;s!==null;){var o=q_(s);if(o!==null&&Q9(o),o=BT(t,e,r,n),o===null&&YB(t,e,n,E5,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else YB(t,e,n,null,r)}}var E5=null;function BT(t,e,r,n){if(E5=null,t=fL(n),t=Qg(t),t!==null)if(e=b0(t),e===null)t=null;else if(r=e.tag,r===13){if(t=M9(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return E5=t,null}function $9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cee()){case pL:return 1;case O9:return 4;case C5:case uee:return 16;case R9:return 536870912;default:return 16}default:return 16}}var lm=null,yL=null,V2=null;function W9(){if(V2)return V2;var t,e=yL,r=e.length,n,s="value"in lm?lm.value:lm.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var c=r-t;for(n=1;n<=c&&e[r-n]===s[o-n];n++);return V2=s.slice(t,1<n?1-n:void 0)}function G2(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bw(){return!0}function Ik(){return!1}function gd(t){function e(r,n,s,o,c){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(r=t[u],this[u]=r?r(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Bw:Ik,this.isPropagationStopped=Ik,this}return Rl(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bw)},persist:function(){},isPersistent:Bw}),e}var b1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vL=gd(b1),G_=Rl({},b1,{view:0,detail:0}),wee=gd(G_),QB,HB,Iv,H4=Rl({},G_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xL,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Iv&&(Iv&&t.type==="mousemove"?(QB=t.screenX-Iv.screenX,HB=t.screenY-Iv.screenY):HB=QB=0,Iv=t),QB)},movementY:function(t){return"movementY"in t?t.movementY:HB}}),Lk=gd(H4),Cee=Rl({},H4,{dataTransfer:0}),See=gd(Cee),Bee=Rl({},G_,{relatedTarget:0}),VB=gd(Bee),Eee=Rl({},b1,{animationName:0,elapsedTime:0,pseudoElement:0}),Tee=gd(Eee),Iee=Rl({},b1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lee=gd(Iee),Fee=Rl({},b1,{data:0}),Fk=gd(Fee),Nee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jee(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mee[t])?!!e[t]:!1}function xL(){return jee}var kee=Rl({},G_,{key:function(t){if(t.key){var e=Nee[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=G2(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pee[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xL,charCode:function(t){return t.type==="keypress"?G2(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?G2(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dee=gd(kee),Oee=Rl({},H4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nk=gd(Oee),Ree=Rl({},G_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xL}),Uee=gd(Ree),zee=Rl({},b1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qee=gd(zee),Hee=Rl({},H4,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vee=gd(Hee),Gee=[9,13,27,32],_L=aA&&"CompositionEvent"in window,vx=null;aA&&"documentMode"in document&&(vx=document.documentMode);var qee=aA&&"TextEvent"in window&&!vx,K9=aA&&(!_L||vx&&8<vx&&11>=vx),Pk=" ",Mk=!1;function X9(t,e){switch(t){case"keyup":return Gee.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y9(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _y=!1;function $ee(t,e){switch(t){case"compositionend":return Y9(e);case"keypress":return e.which!==32?null:(Mk=!0,Pk);case"textInput":return t=e.data,t===Pk&&Mk?null:t;default:return null}}function Wee(t,e){if(_y)return t==="compositionend"||!_L&&X9(t,e)?(t=W9(),V2=yL=lm=null,_y=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K9&&e.locale!=="ko"?null:e.data;default:return null}}var Kee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kee[t.type]:e==="textarea"}function Z9(t,e,r,n){I9(n),e=T5(e,"onChange"),0<e.length&&(r=new vL("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var xx=null,o_=null;function Xee(t){cQ(t,0)}function V4(t){var e=Cy(t);if(b9(e))return t}function Yee(t,e){if(t==="change")return e}var J9=!1;if(aA){var GB;if(aA){var qB="oninput"in document;if(!qB){var kk=document.createElement("div");kk.setAttribute("oninput","return;"),qB=typeof kk.oninput=="function"}GB=qB}else GB=!1;J9=GB&&(!document.documentMode||9<document.documentMode)}function Dk(){xx&&(xx.detachEvent("onpropertychange",eQ),o_=xx=null)}function eQ(t){if(t.propertyName==="value"&&V4(o_)){var e=[];Z9(e,o_,t,fL(t)),P9(Xee,e)}}function Zee(t,e,r){t==="focusin"?(Dk(),xx=e,o_=r,xx.attachEvent("onpropertychange",eQ)):t==="focusout"&&Dk()}function Jee(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return V4(o_)}function ete(t,e){if(t==="click")return V4(e)}function tte(t,e){if(t==="input"||t==="change")return V4(e)}function rte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Df=typeof Object.is=="function"?Object.is:rte;function a_(t,e){if(Df(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!lT.call(e,s)||!Df(t[s],e[s]))return!1}return!0}function Ok(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rk(t,e){var r=Ok(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ok(r)}}function tQ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tQ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rQ(){for(var t=window,e=_5();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=_5(t.document)}return e}function bL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nte(t){var e=rQ(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&tQ(r.ownerDocument.documentElement,r)){if(n!==null&&bL(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!t.extend&&o>n&&(s=n,n=o,o=s),s=Rk(r,o);var c=Rk(r,n);s&&c&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ite=aA&&"documentMode"in document&&11>=document.documentMode,by=null,ET=null,_x=null,TT=!1;function Uk(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;TT||by==null||by!==_5(n)||(n=by,"selectionStart"in n&&bL(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_x&&a_(_x,n)||(_x=n,n=T5(ET,"onSelect"),0<n.length&&(e=new vL("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=by)))}function Ew(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var wy={animationend:Ew("Animation","AnimationEnd"),animationiteration:Ew("Animation","AnimationIteration"),animationstart:Ew("Animation","AnimationStart"),transitionend:Ew("Transition","TransitionEnd")},$B={},nQ={};aA&&(nQ=document.createElement("div").style,"AnimationEvent"in window||(delete wy.animationend.animation,delete wy.animationiteration.animation,delete wy.animationstart.animation),"TransitionEvent"in window||delete wy.transitionend.transition);function G4(t){if($B[t])return $B[t];if(!wy[t])return t;var e=wy[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in nQ)return $B[t]=e[r];return t}var iQ=G4("animationend"),sQ=G4("animationiteration"),oQ=G4("animationstart"),aQ=G4("transitionend"),lQ=new Map,zk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eg(t,e){lQ.set(t,e),_0(e,[t])}for(var WB=0;WB<zk.length;WB++){var KB=zk[WB],ste=KB.toLowerCase(),ote=KB[0].toUpperCase()+KB.slice(1);eg(ste,"on"+ote)}eg(iQ,"onAnimationEnd");eg(sQ,"onAnimationIteration");eg(oQ,"onAnimationStart");eg("dblclick","onDoubleClick");eg("focusin","onFocus");eg("focusout","onBlur");eg(aQ,"onTransitionEnd");r1("onMouseEnter",["mouseout","mouseover"]);r1("onMouseLeave",["mouseout","mouseover"]);r1("onPointerEnter",["pointerout","pointerover"]);r1("onPointerLeave",["pointerout","pointerover"]);_0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_0("onBeforeInput",["compositionend","keypress","textInput","paste"]);_0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ate=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zv));function Qk(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,see(n,e,void 0,t),t.currentTarget=null}function cQ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var c=n.length-1;0<=c;c--){var u=n[c],i=u.instance,A=u.currentTarget;if(u=u.listener,i!==o&&s.isPropagationStopped())break e;Qk(s,u,A),o=i}else for(c=0;c<n.length;c++){if(u=n[c],i=u.instance,A=u.currentTarget,u=u.listener,i!==o&&s.isPropagationStopped())break e;Qk(s,u,A),o=i}}}if(w5)throw t=wT,w5=!1,wT=null,t}function dl(t,e){var r=e[PT];r===void 0&&(r=e[PT]=new Set);var n=t+"__bubble";r.has(n)||(uQ(e,t,2,!1),r.add(n))}function XB(t,e,r){var n=0;e&&(n|=4),uQ(r,t,n,e)}var Tw="_reactListening"+Math.random().toString(36).slice(2);function l_(t){if(!t[Tw]){t[Tw]=!0,g9.forEach(function(r){r!=="selectionchange"&&(ate.has(r)||XB(r,!1,t),XB(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tw]||(e[Tw]=!0,XB("selectionchange",!1,e))}}function uQ(t,e,r,n){switch($9(e)){case 1:var s=_ee;break;case 4:s=bee;break;default:s=gL}r=s.bind(null,e,r,t),s=void 0,!bT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function YB(t,e,r,n,s){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var u=n.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(c===4)for(c=n.return;c!==null;){var i=c.tag;if((i===3||i===4)&&(i=c.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;c=c.return}for(;u!==null;){if(c=Qg(u),c===null)return;if(i=c.tag,i===5||i===6){n=o=c;continue e}u=u.parentNode}}n=n.return}P9(function(){var A=o,g=fL(r),C=[];e:{var B=lQ.get(t);if(B!==void 0){var S=vL,P=t;switch(t){case"keypress":if(G2(r)===0)break e;case"keydown":case"keyup":S=Dee;break;case"focusin":P="focus",S=VB;break;case"focusout":P="blur",S=VB;break;case"beforeblur":case"afterblur":S=VB;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Lk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=See;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Uee;break;case iQ:case sQ:case oQ:S=Tee;break;case aQ:S=Qee;break;case"scroll":S=wee;break;case"wheel":S=Vee;break;case"copy":case"cut":case"paste":S=Lee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Nk}var j=(e&4)!==0,R=!j&&t==="scroll",N=j?B!==null?B+"Capture":null:B;j=[];for(var U=A,$;U!==null;){$=U;var J=$.stateNode;if($.tag===5&&J!==null&&($=J,N!==null&&(J=r_(U,N),J!=null&&j.push(c_(U,J,$)))),R)break;U=U.return}0<j.length&&(B=new S(B,P,null,r,g),C.push({event:B,listeners:j}))}}if(!(e&7)){e:{if(B=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",B&&r!==xT&&(P=r.relatedTarget||r.fromElement)&&(Qg(P)||P[lA]))break e;if((S||B)&&(B=g.window===g?g:(B=g.ownerDocument)?B.defaultView||B.parentWindow:window,S?(P=r.relatedTarget||r.toElement,S=A,P=P?Qg(P):null,P!==null&&(R=b0(P),P!==R||P.tag!==5&&P.tag!==6)&&(P=null)):(S=null,P=A),S!==P)){if(j=Lk,J="onMouseLeave",N="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(j=Nk,J="onPointerLeave",N="onPointerEnter",U="pointer"),R=S==null?B:Cy(S),$=P==null?B:Cy(P),B=new j(J,U+"leave",S,r,g),B.target=R,B.relatedTarget=$,J=null,Qg(g)===A&&(j=new j(N,U+"enter",P,r,g),j.target=$,j.relatedTarget=R,J=j),R=J,S&&P)t:{for(j=S,N=P,U=0,$=j;$;$=Z0($))U++;for($=0,J=N;J;J=Z0(J))$++;for(;0<U-$;)j=Z0(j),U--;for(;0<$-U;)N=Z0(N),$--;for(;U--;){if(j===N||N!==null&&j===N.alternate)break t;j=Z0(j),N=Z0(N)}j=null}else j=null;S!==null&&Hk(C,B,S,j,!1),P!==null&&R!==null&&Hk(C,R,P,j,!0)}}e:{if(B=A?Cy(A):window,S=B.nodeName&&B.nodeName.toLowerCase(),S==="select"||S==="input"&&B.type==="file")var te=Yee;else if(jk(B))if(J9)te=tte;else{te=Jee;var ue=Zee}else(S=B.nodeName)&&S.toLowerCase()==="input"&&(B.type==="checkbox"||B.type==="radio")&&(te=ete);if(te&&(te=te(t,A))){Z9(C,te,r,g);break e}ue&&ue(t,B,A),t==="focusout"&&(ue=B._wrapperState)&&ue.controlled&&B.type==="number"&&AT(B,"number",B.value)}switch(ue=A?Cy(A):window,t){case"focusin":(jk(ue)||ue.contentEditable==="true")&&(by=ue,ET=A,_x=null);break;case"focusout":_x=ET=by=null;break;case"mousedown":TT=!0;break;case"contextmenu":case"mouseup":case"dragend":TT=!1,Uk(C,r,g);break;case"selectionchange":if(ite)break;case"keydown":case"keyup":Uk(C,r,g)}var oe;if(_L)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else _y?X9(t,r)&&(K="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(K="onCompositionStart");K&&(K9&&r.locale!=="ko"&&(_y||K!=="onCompositionStart"?K==="onCompositionEnd"&&_y&&(oe=W9()):(lm=g,yL="value"in lm?lm.value:lm.textContent,_y=!0)),ue=T5(A,K),0<ue.length&&(K=new Fk(K,t,null,r,g),C.push({event:K,listeners:ue}),oe?K.data=oe:(oe=Y9(r),oe!==null&&(K.data=oe)))),(oe=qee?$ee(t,r):Wee(t,r))&&(A=T5(A,"onBeforeInput"),0<A.length&&(g=new Fk("onBeforeInput","beforeinput",null,r,g),C.push({event:g,listeners:A}),g.data=oe))}cQ(C,e)})}function c_(t,e,r){return{instance:t,listener:e,currentTarget:r}}function T5(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=r_(t,r),o!=null&&n.unshift(c_(t,o,s)),o=r_(t,e),o!=null&&n.push(c_(t,o,s))),t=t.return}return n}function Z0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hk(t,e,r,n,s){for(var o=e._reactName,c=[];r!==null&&r!==n;){var u=r,i=u.alternate,A=u.stateNode;if(i!==null&&i===n)break;u.tag===5&&A!==null&&(u=A,s?(i=r_(r,o),i!=null&&c.unshift(c_(r,i,u))):s||(i=r_(r,o),i!=null&&c.push(c_(r,i,u)))),r=r.return}c.length!==0&&t.push({event:e,listeners:c})}var lte=/\r\n?/g,cte=/\u0000|\uFFFD/g;function Vk(t){return(typeof t=="string"?t:""+t).replace(lte,`
`).replace(cte,"")}function Iw(t,e,r){if(e=Vk(e),Vk(t)!==e&&r)throw Error(Rn(425))}function I5(){}var IT=null,LT=null;function FT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var NT=typeof setTimeout=="function"?setTimeout:void 0,ute=typeof clearTimeout=="function"?clearTimeout:void 0,Gk=typeof Promise=="function"?Promise:void 0,hte=typeof queueMicrotask=="function"?queueMicrotask:typeof Gk<"u"?function(t){return Gk.resolve(null).then(t).catch(dte)}:NT;function dte(t){setTimeout(function(){throw t})}function ZB(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),s_(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);s_(e)}function Bm(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var w1=Math.random().toString(36).slice(2),fp="__reactFiber$"+w1,u_="__reactProps$"+w1,lA="__reactContainer$"+w1,PT="__reactEvents$"+w1,fte="__reactListeners$"+w1,pte="__reactHandles$"+w1;function Qg(t){var e=t[fp];if(e)return e;for(var r=t.parentNode;r;){if(e=r[lA]||r[fp]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=qk(t);t!==null;){if(r=t[fp])return r;t=qk(t)}return e}t=r,r=t.parentNode}return null}function q_(t){return t=t[fp]||t[lA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Rn(33))}function q4(t){return t[u_]||null}var MT=[],Sy=-1;function tg(t){return{current:t}}function Al(t){0>Sy||(t.current=MT[Sy],MT[Sy]=null,Sy--)}function Ja(t,e){Sy++,MT[Sy]=t.current,t.current=e}var zm={},Zu=tg(zm),Hh=tg(!1),h0=zm;function n1(t,e){var r=t.type.contextTypes;if(!r)return zm;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vh(t){return t=t.childContextTypes,t!=null}function L5(){Al(Hh),Al(Zu)}function $k(t,e,r){if(Zu.current!==zm)throw Error(Rn(168));Ja(Zu,e),Ja(Hh,r)}function hQ(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Rn(108,ZJ(t)||"Unknown",s));return Rl({},r,n)}function F5(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zm,h0=Zu.current,Ja(Zu,t),Ja(Hh,Hh.current),!0}function Wk(t,e,r){var n=t.stateNode;if(!n)throw Error(Rn(169));r?(t=hQ(t,e,h0),n.__reactInternalMemoizedMergedChildContext=t,Al(Hh),Al(Zu),Ja(Zu,t)):Al(Hh),Ja(Hh,r)}var Kp=null,$4=!1,JB=!1;function dQ(t){Kp===null?Kp=[t]:Kp.push(t)}function Ate(t){$4=!0,dQ(t)}function rg(){if(!JB&&Kp!==null){JB=!0;var t=0,e=Ca;try{var r=Kp;for(Ca=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Kp=null,$4=!1}catch(s){throw Kp!==null&&(Kp=Kp.slice(t+1)),D9(pL,rg),s}finally{Ca=e,JB=!1}}return null}var By=[],Ey=0,N5=null,P5=0,qd=[],$d=0,d0=null,Zp=1,Jp="";function Ig(t,e){By[Ey++]=P5,By[Ey++]=N5,N5=t,P5=e}function fQ(t,e,r){qd[$d++]=Zp,qd[$d++]=Jp,qd[$d++]=d0,d0=t;var n=Zp;t=Jp;var s=32-Pf(n)-1;n&=~(1<<s),r+=1;var o=32-Pf(e)+s;if(30<o){var c=s-s%5;o=(n&(1<<c)-1).toString(32),n>>=c,s-=c,Zp=1<<32-Pf(e)+s|r<<s|n,Jp=o+t}else Zp=1<<o|r<<s|n,Jp=t}function wL(t){t.return!==null&&(Ig(t,1),fQ(t,1,0))}function CL(t){for(;t===N5;)N5=By[--Ey],By[Ey]=null,P5=By[--Ey],By[Ey]=null;for(;t===d0;)d0=qd[--$d],qd[$d]=null,Jp=qd[--$d],qd[$d]=null,Zp=qd[--$d],qd[$d]=null}var dd=null,ud=null,wl=!1,Ff=null;function pQ(t,e){var r=Kd(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Kk(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dd=t,ud=Bm(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dd=t,ud=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=d0!==null?{id:Zp,overflow:Jp}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Kd(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,dd=t,ud=null,!0):!1;default:return!1}}function jT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kT(t){if(wl){var e=ud;if(e){var r=e;if(!Kk(t,e)){if(jT(t))throw Error(Rn(418));e=Bm(r.nextSibling);var n=dd;e&&Kk(t,e)?pQ(n,r):(t.flags=t.flags&-4097|2,wl=!1,dd=t)}}else{if(jT(t))throw Error(Rn(418));t.flags=t.flags&-4097|2,wl=!1,dd=t}}}function Xk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dd=t}function Lw(t){if(t!==dd)return!1;if(!wl)return Xk(t),wl=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!FT(t.type,t.memoizedProps)),e&&(e=ud)){if(jT(t))throw AQ(),Error(Rn(418));for(;e;)pQ(t,e),e=Bm(e.nextSibling)}if(Xk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Rn(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ud=Bm(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ud=null}}else ud=dd?Bm(t.stateNode.nextSibling):null;return!0}function AQ(){for(var t=ud;t;)t=Bm(t.nextSibling)}function i1(){ud=dd=null,wl=!1}function SL(t){Ff===null?Ff=[t]:Ff.push(t)}var mte=yA.ReactCurrentBatchConfig;function Lv(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Rn(309));var n=r.stateNode}if(!n)throw Error(Rn(147,t));var s=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var u=s.refs;c===null?delete u[o]:u[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(Rn(284));if(!r._owner)throw Error(Rn(290,t))}return t}function Fw(t,e){throw t=Object.prototype.toString.call(e),Error(Rn(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yk(t){var e=t._init;return e(t._payload)}function mQ(t){function e(N,U){if(t){var $=N.deletions;$===null?(N.deletions=[U],N.flags|=16):$.push(U)}}function r(N,U){if(!t)return null;for(;U!==null;)e(N,U),U=U.sibling;return null}function n(N,U){for(N=new Map;U!==null;)U.key!==null?N.set(U.key,U):N.set(U.index,U),U=U.sibling;return N}function s(N,U){return N=Lm(N,U),N.index=0,N.sibling=null,N}function o(N,U,$){return N.index=$,t?($=N.alternate,$!==null?($=$.index,$<U?(N.flags|=2,U):$):(N.flags|=2,U)):(N.flags|=1048576,U)}function c(N){return t&&N.alternate===null&&(N.flags|=2),N}function u(N,U,$,J){return U===null||U.tag!==6?(U=oE($,N.mode,J),U.return=N,U):(U=s(U,$),U.return=N,U)}function i(N,U,$,J){var te=$.type;return te===xy?g(N,U,$.props.children,J,$.key):U!==null&&(U.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===em&&Yk(te)===U.type)?(J=s(U,$.props),J.ref=Lv(N,U,$),J.return=N,J):(J=Z2($.type,$.key,$.props,null,N.mode,J),J.ref=Lv(N,U,$),J.return=N,J)}function A(N,U,$,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==$.containerInfo||U.stateNode.implementation!==$.implementation?(U=aE($,N.mode,J),U.return=N,U):(U=s(U,$.children||[]),U.return=N,U)}function g(N,U,$,J,te){return U===null||U.tag!==7?(U=Zg($,N.mode,J,te),U.return=N,U):(U=s(U,$),U.return=N,U)}function C(N,U,$){if(typeof U=="string"&&U!==""||typeof U=="number")return U=oE(""+U,N.mode,$),U.return=N,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case xw:return $=Z2(U.type,U.key,U.props,null,N.mode,$),$.ref=Lv(N,null,U),$.return=N,$;case vy:return U=aE(U,N.mode,$),U.return=N,U;case em:var J=U._init;return C(N,J(U._payload),$)}if(Xv(U)||Sv(U))return U=Zg(U,N.mode,$,null),U.return=N,U;Fw(N,U)}return null}function B(N,U,$,J){var te=U!==null?U.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return te!==null?null:u(N,U,""+$,J);if(typeof $=="object"&&$!==null){switch($.$$typeof){case xw:return $.key===te?i(N,U,$,J):null;case vy:return $.key===te?A(N,U,$,J):null;case em:return te=$._init,B(N,U,te($._payload),J)}if(Xv($)||Sv($))return te!==null?null:g(N,U,$,J,null);Fw(N,$)}return null}function S(N,U,$,J,te){if(typeof J=="string"&&J!==""||typeof J=="number")return N=N.get($)||null,u(U,N,""+J,te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case xw:return N=N.get(J.key===null?$:J.key)||null,i(U,N,J,te);case vy:return N=N.get(J.key===null?$:J.key)||null,A(U,N,J,te);case em:var ue=J._init;return S(N,U,$,ue(J._payload),te)}if(Xv(J)||Sv(J))return N=N.get($)||null,g(U,N,J,te,null);Fw(U,J)}return null}function P(N,U,$,J){for(var te=null,ue=null,oe=U,K=U=0,ce=null;oe!==null&&K<$.length;K++){oe.index>K?(ce=oe,oe=null):ce=oe.sibling;var me=B(N,oe,$[K],J);if(me===null){oe===null&&(oe=ce);break}t&&oe&&me.alternate===null&&e(N,oe),U=o(me,U,K),ue===null?te=me:ue.sibling=me,ue=me,oe=ce}if(K===$.length)return r(N,oe),wl&&Ig(N,K),te;if(oe===null){for(;K<$.length;K++)oe=C(N,$[K],J),oe!==null&&(U=o(oe,U,K),ue===null?te=oe:ue.sibling=oe,ue=oe);return wl&&Ig(N,K),te}for(oe=n(N,oe);K<$.length;K++)ce=S(oe,N,K,$[K],J),ce!==null&&(t&&ce.alternate!==null&&oe.delete(ce.key===null?K:ce.key),U=o(ce,U,K),ue===null?te=ce:ue.sibling=ce,ue=ce);return t&&oe.forEach(function(Z){return e(N,Z)}),wl&&Ig(N,K),te}function j(N,U,$,J){var te=Sv($);if(typeof te!="function")throw Error(Rn(150));if($=te.call($),$==null)throw Error(Rn(151));for(var ue=te=null,oe=U,K=U=0,ce=null,me=$.next();oe!==null&&!me.done;K++,me=$.next()){oe.index>K?(ce=oe,oe=null):ce=oe.sibling;var Z=B(N,oe,me.value,J);if(Z===null){oe===null&&(oe=ce);break}t&&oe&&Z.alternate===null&&e(N,oe),U=o(Z,U,K),ue===null?te=Z:ue.sibling=Z,ue=Z,oe=ce}if(me.done)return r(N,oe),wl&&Ig(N,K),te;if(oe===null){for(;!me.done;K++,me=$.next())me=C(N,me.value,J),me!==null&&(U=o(me,U,K),ue===null?te=me:ue.sibling=me,ue=me);return wl&&Ig(N,K),te}for(oe=n(N,oe);!me.done;K++,me=$.next())me=S(oe,N,K,me.value,J),me!==null&&(t&&me.alternate!==null&&oe.delete(me.key===null?K:me.key),U=o(me,U,K),ue===null?te=me:ue.sibling=me,ue=me);return t&&oe.forEach(function(Y){return e(N,Y)}),wl&&Ig(N,K),te}function R(N,U,$,J){if(typeof $=="object"&&$!==null&&$.type===xy&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case xw:e:{for(var te=$.key,ue=U;ue!==null;){if(ue.key===te){if(te=$.type,te===xy){if(ue.tag===7){r(N,ue.sibling),U=s(ue,$.props.children),U.return=N,N=U;break e}}else if(ue.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===em&&Yk(te)===ue.type){r(N,ue.sibling),U=s(ue,$.props),U.ref=Lv(N,ue,$),U.return=N,N=U;break e}r(N,ue);break}else e(N,ue);ue=ue.sibling}$.type===xy?(U=Zg($.props.children,N.mode,J,$.key),U.return=N,N=U):(J=Z2($.type,$.key,$.props,null,N.mode,J),J.ref=Lv(N,U,$),J.return=N,N=J)}return c(N);case vy:e:{for(ue=$.key;U!==null;){if(U.key===ue)if(U.tag===4&&U.stateNode.containerInfo===$.containerInfo&&U.stateNode.implementation===$.implementation){r(N,U.sibling),U=s(U,$.children||[]),U.return=N,N=U;break e}else{r(N,U);break}else e(N,U);U=U.sibling}U=aE($,N.mode,J),U.return=N,N=U}return c(N);case em:return ue=$._init,R(N,U,ue($._payload),J)}if(Xv($))return P(N,U,$,J);if(Sv($))return j(N,U,$,J);Fw(N,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,U!==null&&U.tag===6?(r(N,U.sibling),U=s(U,$),U.return=N,N=U):(r(N,U),U=oE($,N.mode,J),U.return=N,N=U),c(N)):r(N,U)}return R}var s1=mQ(!0),gQ=mQ(!1),M5=tg(null),j5=null,Ty=null,BL=null;function EL(){BL=Ty=j5=null}function TL(t){var e=M5.current;Al(M5),t._currentValue=e}function DT(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Gy(t,e){j5=t,BL=Ty=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rh=!0),t.firstContext=null)}function ef(t){var e=t._currentValue;if(BL!==t)if(t={context:t,memoizedValue:e,next:null},Ty===null){if(j5===null)throw Error(Rn(308));Ty=t,j5.dependencies={lanes:0,firstContext:t}}else Ty=Ty.next=t;return e}var Hg=null;function IL(t){Hg===null?Hg=[t]:Hg.push(t)}function yQ(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,IL(e)):(r.next=s.next,s.next=r),e.interleaved=r,cA(t,n)}function cA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var tm=!1;function LL(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vQ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Em(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Vo&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,cA(t,r)}return s=n.interleaved,s===null?(e.next=e,IL(n)):(e.next=s.next,s.next=e),n.interleaved=e,cA(t,r)}function q2(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,AL(t,r)}}function Zk(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var c={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=c:o=o.next=c,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function k5(t,e,r,n){var s=t.updateQueue;tm=!1;var o=s.firstBaseUpdate,c=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var i=u,A=i.next;i.next=null,c===null?o=A:c.next=A,c=i;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==c&&(u===null?g.firstBaseUpdate=A:u.next=A,g.lastBaseUpdate=i))}if(o!==null){var C=s.baseState;c=0,g=A=i=null,u=o;do{var B=u.lane,S=u.eventTime;if((n&B)===B){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,j=u;switch(B=e,S=r,j.tag){case 1:if(P=j.payload,typeof P=="function"){C=P.call(S,C,B);break e}C=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=j.payload,B=typeof P=="function"?P.call(S,C,B):P,B==null)break e;C=Rl({},C,B);break e;case 2:tm=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,B=s.effects,B===null?s.effects=[u]:B.push(u))}else S={eventTime:S,lane:B,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(A=g=S,i=C):g=g.next=S,c|=B;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;B=u,u=B.next,B.next=null,s.lastBaseUpdate=B,s.shared.pending=null}}while(!0);if(g===null&&(i=C),s.baseState=i,s.firstBaseUpdate=A,s.lastBaseUpdate=g,e=s.shared.interleaved,e!==null){s=e;do c|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);p0|=c,t.lanes=c,t.memoizedState=C}}function Jk(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Rn(191,s));s.call(n)}}}var $_={},gp=tg($_),h_=tg($_),d_=tg($_);function Vg(t){if(t===$_)throw Error(Rn(174));return t}function FL(t,e){switch(Ja(d_,e),Ja(h_,t),Ja(gp,$_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gT(e,t)}Al(gp),Ja(gp,e)}function o1(){Al(gp),Al(h_),Al(d_)}function xQ(t){Vg(d_.current);var e=Vg(gp.current),r=gT(e,t.type);e!==r&&(Ja(h_,t),Ja(gp,r))}function NL(t){h_.current===t&&(Al(gp),Al(h_))}var jl=tg(0);function D5(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eE=[];function PL(){for(var t=0;t<eE.length;t++)eE[t]._workInProgressVersionPrimary=null;eE.length=0}var $2=yA.ReactCurrentDispatcher,tE=yA.ReactCurrentBatchConfig,f0=0,Dl=null,Hc=null,Jc=null,O5=!1,bx=!1,f_=0,gte=0;function Fu(){throw Error(Rn(321))}function ML(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Df(t[r],e[r]))return!1;return!0}function jL(t,e,r,n,s,o){if(f0=o,Dl=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$2.current=t===null||t.memoizedState===null?_te:bte,t=r(n,s),bx){o=0;do{if(bx=!1,f_=0,25<=o)throw Error(Rn(301));o+=1,Jc=Hc=null,e.updateQueue=null,$2.current=wte,t=r(n,s)}while(bx)}if($2.current=R5,e=Hc!==null&&Hc.next!==null,f0=0,Jc=Hc=Dl=null,O5=!1,e)throw Error(Rn(300));return t}function kL(){var t=f_!==0;return f_=0,t}function up(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jc===null?Dl.memoizedState=Jc=t:Jc=Jc.next=t,Jc}function tf(){if(Hc===null){var t=Dl.alternate;t=t!==null?t.memoizedState:null}else t=Hc.next;var e=Jc===null?Dl.memoizedState:Jc.next;if(e!==null)Jc=e,Hc=t;else{if(t===null)throw Error(Rn(310));Hc=t,t={memoizedState:Hc.memoizedState,baseState:Hc.baseState,baseQueue:Hc.baseQueue,queue:Hc.queue,next:null},Jc===null?Dl.memoizedState=Jc=t:Jc=Jc.next=t}return Jc}function p_(t,e){return typeof e=="function"?e(t):e}function rE(t){var e=tf(),r=e.queue;if(r===null)throw Error(Rn(311));r.lastRenderedReducer=t;var n=Hc,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var c=s.next;s.next=o.next,o.next=c}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var u=c=null,i=null,A=o;do{var g=A.lane;if((f0&g)===g)i!==null&&(i=i.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),n=A.hasEagerState?A.eagerState:t(n,A.action);else{var C={lane:g,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};i===null?(u=i=C,c=n):i=i.next=C,Dl.lanes|=g,p0|=g}A=A.next}while(A!==null&&A!==o);i===null?c=n:i.next=u,Df(n,e.memoizedState)||(Rh=!0),e.memoizedState=n,e.baseState=c,e.baseQueue=i,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do o=s.lane,Dl.lanes|=o,p0|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function nE(t){var e=tf(),r=e.queue;if(r===null)throw Error(Rn(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var c=s=s.next;do o=t(o,c.action),c=c.next;while(c!==s);Df(o,e.memoizedState)||(Rh=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function _Q(){}function bQ(t,e){var r=Dl,n=tf(),s=e(),o=!Df(n.memoizedState,s);if(o&&(n.memoizedState=s,Rh=!0),n=n.queue,DL(SQ.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Jc!==null&&Jc.memoizedState.tag&1){if(r.flags|=2048,A_(9,CQ.bind(null,r,n,s,e),void 0,null),ru===null)throw Error(Rn(349));f0&30||wQ(r,e,s)}return s}function wQ(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Dl.updateQueue,e===null?(e={lastEffect:null,stores:null},Dl.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function CQ(t,e,r,n){e.value=r,e.getSnapshot=n,BQ(e)&&EQ(t)}function SQ(t,e,r){return r(function(){BQ(e)&&EQ(t)})}function BQ(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Df(t,r)}catch{return!0}}function EQ(t){var e=cA(t,1);e!==null&&Mf(e,t,1,-1)}function eD(t){var e=up();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p_,lastRenderedState:t},e.queue=t,t=t.dispatch=xte.bind(null,Dl,t),[e.memoizedState,t]}function A_(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Dl.updateQueue,e===null?(e={lastEffect:null,stores:null},Dl.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function TQ(){return tf().memoizedState}function W2(t,e,r,n){var s=up();Dl.flags|=t,s.memoizedState=A_(1|e,r,void 0,n===void 0?null:n)}function W4(t,e,r,n){var s=tf();n=n===void 0?null:n;var o=void 0;if(Hc!==null){var c=Hc.memoizedState;if(o=c.destroy,n!==null&&ML(n,c.deps)){s.memoizedState=A_(e,r,o,n);return}}Dl.flags|=t,s.memoizedState=A_(1|e,r,o,n)}function tD(t,e){return W2(8390656,8,t,e)}function DL(t,e){return W4(2048,8,t,e)}function IQ(t,e){return W4(4,2,t,e)}function LQ(t,e){return W4(4,4,t,e)}function FQ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NQ(t,e,r){return r=r!=null?r.concat([t]):null,W4(4,4,FQ.bind(null,e,t),r)}function OL(){}function PQ(t,e){var r=tf();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ML(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function MQ(t,e){var r=tf();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ML(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function jQ(t,e,r){return f0&21?(Df(r,e)||(r=U9(),Dl.lanes|=r,p0|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rh=!0),t.memoizedState=r)}function yte(t,e){var r=Ca;Ca=r!==0&&4>r?r:4,t(!0);var n=tE.transition;tE.transition={};try{t(!1),e()}finally{Ca=r,tE.transition=n}}function kQ(){return tf().memoizedState}function vte(t,e,r){var n=Im(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},DQ(t))OQ(e,r);else if(r=yQ(t,e,r,n),r!==null){var s=vh();Mf(r,t,n,s),RQ(r,e,n)}}function xte(t,e,r){var n=Im(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(DQ(t))OQ(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,u=o(c,r);if(s.hasEagerState=!0,s.eagerState=u,Df(u,c)){var i=e.interleaved;i===null?(s.next=s,IL(e)):(s.next=i.next,i.next=s),e.interleaved=s;return}}catch{}finally{}r=yQ(t,e,s,n),r!==null&&(s=vh(),Mf(r,t,n,s),RQ(r,e,n))}}function DQ(t){var e=t.alternate;return t===Dl||e!==null&&e===Dl}function OQ(t,e){bx=O5=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function RQ(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,AL(t,r)}}var R5={readContext:ef,useCallback:Fu,useContext:Fu,useEffect:Fu,useImperativeHandle:Fu,useInsertionEffect:Fu,useLayoutEffect:Fu,useMemo:Fu,useReducer:Fu,useRef:Fu,useState:Fu,useDebugValue:Fu,useDeferredValue:Fu,useTransition:Fu,useMutableSource:Fu,useSyncExternalStore:Fu,useId:Fu,unstable_isNewReconciler:!1},_te={readContext:ef,useCallback:function(t,e){return up().memoizedState=[t,e===void 0?null:e],t},useContext:ef,useEffect:tD,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,W2(4194308,4,FQ.bind(null,e,t),r)},useLayoutEffect:function(t,e){return W2(4194308,4,t,e)},useInsertionEffect:function(t,e){return W2(4,2,t,e)},useMemo:function(t,e){var r=up();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=up();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=vte.bind(null,Dl,t),[n.memoizedState,t]},useRef:function(t){var e=up();return t={current:t},e.memoizedState=t},useState:eD,useDebugValue:OL,useDeferredValue:function(t){return up().memoizedState=t},useTransition:function(){var t=eD(!1),e=t[0];return t=yte.bind(null,t[1]),up().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Dl,s=up();if(wl){if(r===void 0)throw Error(Rn(407));r=r()}else{if(r=e(),ru===null)throw Error(Rn(349));f0&30||wQ(n,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,tD(SQ.bind(null,n,o,t),[t]),n.flags|=2048,A_(9,CQ.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=up(),e=ru.identifierPrefix;if(wl){var r=Jp,n=Zp;r=(n&~(1<<32-Pf(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=f_++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=gte++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bte={readContext:ef,useCallback:PQ,useContext:ef,useEffect:DL,useImperativeHandle:NQ,useInsertionEffect:IQ,useLayoutEffect:LQ,useMemo:MQ,useReducer:rE,useRef:TQ,useState:function(){return rE(p_)},useDebugValue:OL,useDeferredValue:function(t){var e=tf();return jQ(e,Hc.memoizedState,t)},useTransition:function(){var t=rE(p_)[0],e=tf().memoizedState;return[t,e]},useMutableSource:_Q,useSyncExternalStore:bQ,useId:kQ,unstable_isNewReconciler:!1},wte={readContext:ef,useCallback:PQ,useContext:ef,useEffect:DL,useImperativeHandle:NQ,useInsertionEffect:IQ,useLayoutEffect:LQ,useMemo:MQ,useReducer:nE,useRef:TQ,useState:function(){return nE(p_)},useDebugValue:OL,useDeferredValue:function(t){var e=tf();return Hc===null?e.memoizedState=t:jQ(e,Hc.memoizedState,t)},useTransition:function(){var t=nE(p_)[0],e=tf().memoizedState;return[t,e]},useMutableSource:_Q,useSyncExternalStore:bQ,useId:kQ,unstable_isNewReconciler:!1};function Ef(t,e){if(t&&t.defaultProps){e=Rl({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function OT(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Rl({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var K4={isMounted:function(t){return(t=t._reactInternals)?b0(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=vh(),s=Im(t),o=nA(n,s);o.payload=e,r!=null&&(o.callback=r),e=Em(t,o,s),e!==null&&(Mf(e,t,s,n),q2(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=vh(),s=Im(t),o=nA(n,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Em(t,o,s),e!==null&&(Mf(e,t,s,n),q2(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=vh(),n=Im(t),s=nA(r,n);s.tag=2,e!=null&&(s.callback=e),e=Em(t,s,n),e!==null&&(Mf(e,t,n,r),q2(e,t,n))}};function rD(t,e,r,n,s,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,c):e.prototype&&e.prototype.isPureReactComponent?!a_(r,n)||!a_(s,o):!0}function UQ(t,e,r){var n=!1,s=zm,o=e.contextType;return typeof o=="object"&&o!==null?o=ef(o):(s=Vh(e)?h0:Zu.current,n=e.contextTypes,o=(n=n!=null)?n1(t,s):zm),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=K4,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function nD(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&K4.enqueueReplaceState(e,e.state,null)}function RT(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},LL(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=ef(o):(o=Vh(e)?h0:Zu.current,s.context=n1(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(OT(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&K4.enqueueReplaceState(s,s.state,null),k5(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function a1(t,e){try{var r="",n=e;do r+=YJ(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function iE(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function UT(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Cte=typeof WeakMap=="function"?WeakMap:Map;function zQ(t,e,r){r=nA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){z5||(z5=!0,XT=n),UT(t,e)},r}function QQ(t,e,r){r=nA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){UT(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){UT(t,e),typeof n!="function"&&(Tm===null?Tm=new Set([this]):Tm.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),r}function iD(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Cte;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Ote.bind(null,t,e,r),e.then(t,t))}function sD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oD(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=nA(-1,1),e.tag=2,Em(r,e,1))),r.lanes|=1),t)}var Ste=yA.ReactCurrentOwner,Rh=!1;function mh(t,e,r,n){e.child=t===null?gQ(e,null,r,n):s1(e,t.child,r,n)}function aD(t,e,r,n,s){r=r.render;var o=e.ref;return Gy(e,s),n=jL(t,e,r,n,o,s),r=kL(),t!==null&&!Rh?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,uA(t,e,s)):(wl&&r&&wL(e),e.flags|=1,mh(t,e,n,s),e.child)}function lD(t,e,r,n,s){if(t===null){var o=r.type;return typeof o=="function"&&!qL(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,HQ(t,e,o,n,s)):(t=Z2(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var c=o.memoizedProps;if(r=r.compare,r=r!==null?r:a_,r(c,n)&&t.ref===e.ref)return uA(t,e,s)}return e.flags|=1,t=Lm(o,n),t.ref=e.ref,t.return=e,e.child=t}function HQ(t,e,r,n,s){if(t!==null){var o=t.memoizedProps;if(a_(o,n)&&t.ref===e.ref)if(Rh=!1,e.pendingProps=n=o,(t.lanes&s)!==0)t.flags&131072&&(Rh=!0);else return e.lanes=t.lanes,uA(t,e,s)}return zT(t,e,r,n,s)}function VQ(t,e,r){var n=e.pendingProps,s=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ja(Ly,ld),ld|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ja(Ly,ld),ld|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ja(Ly,ld),ld|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ja(Ly,ld),ld|=n;return mh(t,e,s,r),e.child}function GQ(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zT(t,e,r,n,s){var o=Vh(r)?h0:Zu.current;return o=n1(e,o),Gy(e,s),r=jL(t,e,r,n,o,s),n=kL(),t!==null&&!Rh?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,uA(t,e,s)):(wl&&n&&wL(e),e.flags|=1,mh(t,e,r,s),e.child)}function cD(t,e,r,n,s){if(Vh(r)){var o=!0;F5(e)}else o=!1;if(Gy(e,s),e.stateNode===null)K2(t,e),UQ(e,r,n),RT(e,r,n,s),n=!0;else if(t===null){var c=e.stateNode,u=e.memoizedProps;c.props=u;var i=c.context,A=r.contextType;typeof A=="object"&&A!==null?A=ef(A):(A=Vh(r)?h0:Zu.current,A=n1(e,A));var g=r.getDerivedStateFromProps,C=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function";C||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==n||i!==A)&&nD(e,c,n,A),tm=!1;var B=e.memoizedState;c.state=B,k5(e,n,c,s),i=e.memoizedState,u!==n||B!==i||Hh.current||tm?(typeof g=="function"&&(OT(e,r,g,n),i=e.memoizedState),(u=tm||rD(e,r,u,n,B,i,A))?(C||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=i),c.props=n,c.state=i,c.context=A,n=u):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{c=e.stateNode,vQ(t,e),u=e.memoizedProps,A=e.type===e.elementType?u:Ef(e.type,u),c.props=A,C=e.pendingProps,B=c.context,i=r.contextType,typeof i=="object"&&i!==null?i=ef(i):(i=Vh(r)?h0:Zu.current,i=n1(e,i));var S=r.getDerivedStateFromProps;(g=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(u!==C||B!==i)&&nD(e,c,n,i),tm=!1,B=e.memoizedState,c.state=B,k5(e,n,c,s);var P=e.memoizedState;u!==C||B!==P||Hh.current||tm?(typeof S=="function"&&(OT(e,r,S,n),P=e.memoizedState),(A=tm||rD(e,r,A,n,B,P,i)||!1)?(g||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,P,i),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,P,i)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=P),c.props=n,c.state=P,c.context=i,n=A):(typeof c.componentDidUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&B===t.memoizedState||(e.flags|=1024),n=!1)}return QT(t,e,r,n,o,s)}function QT(t,e,r,n,s,o){GQ(t,e);var c=(e.flags&128)!==0;if(!n&&!c)return s&&Wk(e,r,!1),uA(t,e,o);n=e.stateNode,Ste.current=e;var u=c&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&c?(e.child=s1(e,t.child,null,o),e.child=s1(e,null,u,o)):mh(t,e,u,o),e.memoizedState=n.state,s&&Wk(e,r,!0),e.child}function qQ(t){var e=t.stateNode;e.pendingContext?$k(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$k(t,e.context,!1),FL(t,e.containerInfo)}function uD(t,e,r,n,s){return i1(),SL(s),e.flags|=256,mh(t,e,r,n),e.child}var HT={dehydrated:null,treeContext:null,retryLane:0};function VT(t){return{baseLanes:t,cachePool:null,transitions:null}}function $Q(t,e,r){var n=e.pendingProps,s=jl.current,o=!1,c=(e.flags&128)!==0,u;if((u=c)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ja(jl,s&1),t===null)return kT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=n.children,t=n.fallback,o?(n=e.mode,o=e.child,c={mode:"hidden",children:c},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=Z4(c,n,0,null),t=Zg(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=VT(r),e.memoizedState=HT,t):RL(e,c));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return Bte(t,e,c,n,u,s,r);if(o){o=n.fallback,c=e.mode,s=t.child,u=s.sibling;var i={mode:"hidden",children:n.children};return!(c&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=i,e.deletions=null):(n=Lm(s,i),n.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=Lm(u,o):(o=Zg(o,c,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,c=t.child.memoizedState,c=c===null?VT(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~r,e.memoizedState=HT,n}return o=t.child,t=o.sibling,n=Lm(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function RL(t,e){return e=Z4({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nw(t,e,r,n){return n!==null&&SL(n),s1(e,t.child,null,r),t=RL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bte(t,e,r,n,s,o,c){if(r)return e.flags&256?(e.flags&=-257,n=iE(Error(Rn(422))),Nw(t,e,c,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=Z4({mode:"visible",children:n.children},s,0,null),o=Zg(o,s,c,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&s1(e,t.child,null,c),e.child.memoizedState=VT(c),e.memoizedState=HT,o);if(!(e.mode&1))return Nw(t,e,c,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var u=n.dgst;return n=u,o=Error(Rn(419)),n=iE(o,n,void 0),Nw(t,e,c,n)}if(u=(c&t.childLanes)!==0,Rh||u){if(n=ru,n!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|c)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,cA(t,s),Mf(n,t,s,-1))}return GL(),n=iE(Error(Rn(421))),Nw(t,e,c,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Rte.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,ud=Bm(s.nextSibling),dd=e,wl=!0,Ff=null,t!==null&&(qd[$d++]=Zp,qd[$d++]=Jp,qd[$d++]=d0,Zp=t.id,Jp=t.overflow,d0=e),e=RL(e,n.children),e.flags|=4096,e)}function hD(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),DT(t.return,e,r)}function sE(t,e,r,n,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function WQ(t,e,r){var n=e.pendingProps,s=n.revealOrder,o=n.tail;if(mh(t,e,n.children,r),n=jl.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hD(t,r,e);else if(t.tag===19)hD(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ja(jl,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&D5(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),sE(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&D5(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}sE(e,!0,r,null,o);break;case"together":sE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function K2(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function uA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),p0|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Rn(153));if(e.child!==null){for(t=e.child,r=Lm(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Lm(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Ete(t,e,r){switch(e.tag){case 3:qQ(e),i1();break;case 5:xQ(e);break;case 1:Vh(e.type)&&F5(e);break;case 4:FL(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ja(M5,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ja(jl,jl.current&1),e.flags|=128,null):r&e.child.childLanes?$Q(t,e,r):(Ja(jl,jl.current&1),t=uA(t,e,r),t!==null?t.sibling:null);Ja(jl,jl.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return WQ(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ja(jl,jl.current),n)break;return null;case 22:case 23:return e.lanes=0,VQ(t,e,r)}return uA(t,e,r)}var KQ,GT,XQ,YQ;KQ=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};GT=function(){};XQ=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Vg(gp.current);var o=null;switch(r){case"input":s=fT(t,s),n=fT(t,n),o=[];break;case"select":s=Rl({},s,{value:void 0}),n=Rl({},n,{value:void 0}),o=[];break;case"textarea":s=mT(t,s),n=mT(t,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=I5)}yT(r,n);var c;r=null;for(A in s)if(!n.hasOwnProperty(A)&&s.hasOwnProperty(A)&&s[A]!=null)if(A==="style"){var u=s[A];for(c in u)u.hasOwnProperty(c)&&(r||(r={}),r[c]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(e_.hasOwnProperty(A)?o||(o=[]):(o=o||[]).push(A,null));for(A in n){var i=n[A];if(u=s!=null?s[A]:void 0,n.hasOwnProperty(A)&&i!==u&&(i!=null||u!=null))if(A==="style")if(u){for(c in u)!u.hasOwnProperty(c)||i&&i.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in i)i.hasOwnProperty(c)&&u[c]!==i[c]&&(r||(r={}),r[c]=i[c])}else r||(o||(o=[]),o.push(A,r)),r=i;else A==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,u=u?u.__html:void 0,i!=null&&u!==i&&(o=o||[]).push(A,i)):A==="children"?typeof i!="string"&&typeof i!="number"||(o=o||[]).push(A,""+i):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(e_.hasOwnProperty(A)?(i!=null&&A==="onScroll"&&dl("scroll",t),o||u===i||(o=[])):(o=o||[]).push(A,i))}r&&(o=o||[]).push("style",r);var A=o;(e.updateQueue=A)&&(e.flags|=4)}};YQ=function(t,e,r,n){r!==n&&(e.flags|=4)};function Fv(t,e){if(!wl)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Nu(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Tte(t,e,r){var n=e.pendingProps;switch(CL(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nu(e),null;case 1:return Vh(e.type)&&L5(),Nu(e),null;case 3:return n=e.stateNode,o1(),Al(Hh),Al(Zu),PL(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ff!==null&&(JT(Ff),Ff=null))),GT(t,e),Nu(e),null;case 5:NL(e);var s=Vg(d_.current);if(r=e.type,t!==null&&e.stateNode!=null)XQ(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Rn(166));return Nu(e),null}if(t=Vg(gp.current),Lw(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[fp]=e,n[u_]=o,t=(e.mode&1)!==0,r){case"dialog":dl("cancel",n),dl("close",n);break;case"iframe":case"object":case"embed":dl("load",n);break;case"video":case"audio":for(s=0;s<Zv.length;s++)dl(Zv[s],n);break;case"source":dl("error",n);break;case"img":case"image":case"link":dl("error",n),dl("load",n);break;case"details":dl("toggle",n);break;case"input":xk(n,o),dl("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},dl("invalid",n);break;case"textarea":bk(n,o),dl("invalid",n)}yT(r,o),s=null;for(var c in o)if(o.hasOwnProperty(c)){var u=o[c];c==="children"?typeof u=="string"?n.textContent!==u&&(o.suppressHydrationWarning!==!0&&Iw(n.textContent,u,t),s=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Iw(n.textContent,u,t),s=["children",""+u]):e_.hasOwnProperty(c)&&u!=null&&c==="onScroll"&&dl("scroll",n)}switch(r){case"input":_w(n),_k(n,o,!0);break;case"textarea":_w(n),wk(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=I5)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=S9(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=c.createElement(r,{is:n.is}):(t=c.createElement(r),r==="select"&&(c=t,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):t=c.createElementNS(t,r),t[fp]=e,t[u_]=n,KQ(t,e,!1,!1),e.stateNode=t;e:{switch(c=vT(r,n),r){case"dialog":dl("cancel",t),dl("close",t),s=n;break;case"iframe":case"object":case"embed":dl("load",t),s=n;break;case"video":case"audio":for(s=0;s<Zv.length;s++)dl(Zv[s],t);s=n;break;case"source":dl("error",t),s=n;break;case"img":case"image":case"link":dl("error",t),dl("load",t),s=n;break;case"details":dl("toggle",t),s=n;break;case"input":xk(t,n),s=fT(t,n),dl("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Rl({},n,{value:void 0}),dl("invalid",t);break;case"textarea":bk(t,n),s=mT(t,n),dl("invalid",t);break;default:s=n}yT(r,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var i=u[o];o==="style"?T9(t,i):o==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&B9(t,i)):o==="children"?typeof i=="string"?(r!=="textarea"||i!=="")&&t_(t,i):typeof i=="number"&&t_(t,""+i):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(e_.hasOwnProperty(o)?i!=null&&o==="onScroll"&&dl("scroll",t):i!=null&&cL(t,o,i,c))}switch(r){case"input":_w(t),_k(t,n,!1);break;case"textarea":_w(t),wk(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Um(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?zy(t,!!n.multiple,o,!1):n.defaultValue!=null&&zy(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=I5)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nu(e),null;case 6:if(t&&e.stateNode!=null)YQ(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Rn(166));if(r=Vg(d_.current),Vg(gp.current),Lw(e)){if(n=e.stateNode,r=e.memoizedProps,n[fp]=e,(o=n.nodeValue!==r)&&(t=dd,t!==null))switch(t.tag){case 3:Iw(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Iw(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[fp]=e,e.stateNode=n}return Nu(e),null;case 13:if(Al(jl),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wl&&ud!==null&&e.mode&1&&!(e.flags&128))AQ(),i1(),e.flags|=98560,o=!1;else if(o=Lw(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(Rn(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Rn(317));o[fp]=e}else i1(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nu(e),o=!1}else Ff!==null&&(JT(Ff),Ff=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||jl.current&1?qc===0&&(qc=3):GL())),e.updateQueue!==null&&(e.flags|=4),Nu(e),null);case 4:return o1(),GT(t,e),t===null&&l_(e.stateNode.containerInfo),Nu(e),null;case 10:return TL(e.type._context),Nu(e),null;case 17:return Vh(e.type)&&L5(),Nu(e),null;case 19:if(Al(jl),o=e.memoizedState,o===null)return Nu(e),null;if(n=(e.flags&128)!==0,c=o.rendering,c===null)if(n)Fv(o,!1);else{if(qc!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=D5(t),c!==null){for(e.flags|=128,Fv(o,!1),n=c.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ja(jl,jl.current&1|2),e.child}t=t.sibling}o.tail!==null&&mc()>l1&&(e.flags|=128,n=!0,Fv(o,!1),e.lanes=4194304)}else{if(!n)if(t=D5(c),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Fv(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!wl)return Nu(e),null}else 2*mc()-o.renderingStartTime>l1&&r!==1073741824&&(e.flags|=128,n=!0,Fv(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(r=o.last,r!==null?r.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=mc(),e.sibling=null,r=jl.current,Ja(jl,n?r&1|2:r&1),e):(Nu(e),null);case 22:case 23:return VL(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ld&1073741824&&(Nu(e),e.subtreeFlags&6&&(e.flags|=8192)):Nu(e),null;case 24:return null;case 25:return null}throw Error(Rn(156,e.tag))}function Ite(t,e){switch(CL(e),e.tag){case 1:return Vh(e.type)&&L5(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return o1(),Al(Hh),Al(Zu),PL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NL(e),null;case 13:if(Al(jl),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Rn(340));i1()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Al(jl),null;case 4:return o1(),null;case 10:return TL(e.type._context),null;case 22:case 23:return VL(),null;case 24:return null;default:return null}}var Pw=!1,$u=!1,Lte=typeof WeakSet=="function"?WeakSet:Set,vi=null;function Iy(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tc(t,e,n)}else r.current=null}function qT(t,e,r){try{r()}catch(n){tc(t,e,n)}}var dD=!1;function Fte(t,e){if(IT=B5,t=rQ(),bL(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var c=0,u=-1,i=-1,A=0,g=0,C=t,B=null;t:for(;;){for(var S;C!==r||s!==0&&C.nodeType!==3||(u=c+s),C!==o||n!==0&&C.nodeType!==3||(i=c+n),C.nodeType===3&&(c+=C.nodeValue.length),(S=C.firstChild)!==null;)B=C,C=S;for(;;){if(C===t)break t;if(B===r&&++A===s&&(u=c),B===o&&++g===n&&(i=c),(S=C.nextSibling)!==null)break;C=B,B=C.parentNode}C=S}r=u===-1||i===-1?null:{start:u,end:i}}else r=null}r=r||{start:0,end:0}}else r=null;for(LT={focusedElem:t,selectionRange:r},B5=!1,vi=e;vi!==null;)if(e=vi,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,vi=t;else for(;vi!==null;){e=vi;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var j=P.memoizedProps,R=P.memoizedState,N=e.stateNode,U=N.getSnapshotBeforeUpdate(e.elementType===e.type?j:Ef(e.type,j),R);N.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var $=e.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Rn(163))}}catch(J){tc(e,e.return,J)}if(t=e.sibling,t!==null){t.return=e.return,vi=t;break}vi=e.return}return P=dD,dD=!1,P}function wx(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&qT(e,r,o)}s=s.next}while(s!==n)}}function X4(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function $T(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ZQ(t){var e=t.alternate;e!==null&&(t.alternate=null,ZQ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fp],delete e[u_],delete e[PT],delete e[fte],delete e[pte])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JQ(t){return t.tag===5||t.tag===3||t.tag===4}function fD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JQ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function WT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=I5));else if(n!==4&&(t=t.child,t!==null))for(WT(t,e,r),t=t.sibling;t!==null;)WT(t,e,r),t=t.sibling}function KT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(KT(t,e,r),t=t.sibling;t!==null;)KT(t,e,r),t=t.sibling}var hu=null,Lf=!1;function zA(t,e,r){for(r=r.child;r!==null;)eH(t,e,r),r=r.sibling}function eH(t,e,r){if(mp&&typeof mp.onCommitFiberUnmount=="function")try{mp.onCommitFiberUnmount(Q4,r)}catch{}switch(r.tag){case 5:$u||Iy(r,e);case 6:var n=hu,s=Lf;hu=null,zA(t,e,r),hu=n,Lf=s,hu!==null&&(Lf?(t=hu,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):hu.removeChild(r.stateNode));break;case 18:hu!==null&&(Lf?(t=hu,r=r.stateNode,t.nodeType===8?ZB(t.parentNode,r):t.nodeType===1&&ZB(t,r),s_(t)):ZB(hu,r.stateNode));break;case 4:n=hu,s=Lf,hu=r.stateNode.containerInfo,Lf=!0,zA(t,e,r),hu=n,Lf=s;break;case 0:case 11:case 14:case 15:if(!$u&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&qT(r,e,c),s=s.next}while(s!==n)}zA(t,e,r);break;case 1:if(!$u&&(Iy(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(u){tc(r,e,u)}zA(t,e,r);break;case 21:zA(t,e,r);break;case 22:r.mode&1?($u=(n=$u)||r.memoizedState!==null,zA(t,e,r),$u=n):zA(t,e,r);break;default:zA(t,e,r)}}function pD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Lte),e.forEach(function(n){var s=Ute.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function xf(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=t,c=e,u=c;e:for(;u!==null;){switch(u.tag){case 5:hu=u.stateNode,Lf=!1;break e;case 3:hu=u.stateNode.containerInfo,Lf=!0;break e;case 4:hu=u.stateNode.containerInfo,Lf=!0;break e}u=u.return}if(hu===null)throw Error(Rn(160));eH(o,c,s),hu=null,Lf=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(A){tc(s,e,A)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tH(e,t),e=e.sibling}function tH(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xf(e,t),np(t),n&4){try{wx(3,t,t.return),X4(3,t)}catch(j){tc(t,t.return,j)}try{wx(5,t,t.return)}catch(j){tc(t,t.return,j)}}break;case 1:xf(e,t),np(t),n&512&&r!==null&&Iy(r,r.return);break;case 5:if(xf(e,t),np(t),n&512&&r!==null&&Iy(r,r.return),t.flags&32){var s=t.stateNode;try{t_(s,"")}catch(j){tc(t,t.return,j)}}if(n&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,c=r!==null?r.memoizedProps:o,u=t.type,i=t.updateQueue;if(t.updateQueue=null,i!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&w9(s,o),vT(u,c);var A=vT(u,o);for(c=0;c<i.length;c+=2){var g=i[c],C=i[c+1];g==="style"?T9(s,C):g==="dangerouslySetInnerHTML"?B9(s,C):g==="children"?t_(s,C):cL(s,g,C,A)}switch(u){case"input":pT(s,o);break;case"textarea":C9(s,o);break;case"select":var B=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?zy(s,!!o.multiple,S,!1):B!==!!o.multiple&&(o.defaultValue!=null?zy(s,!!o.multiple,o.defaultValue,!0):zy(s,!!o.multiple,o.multiple?[]:"",!1))}s[u_]=o}catch(j){tc(t,t.return,j)}}break;case 6:if(xf(e,t),np(t),n&4){if(t.stateNode===null)throw Error(Rn(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(j){tc(t,t.return,j)}}break;case 3:if(xf(e,t),np(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{s_(e.containerInfo)}catch(j){tc(t,t.return,j)}break;case 4:xf(e,t),np(t);break;case 13:xf(e,t),np(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(QL=mc())),n&4&&pD(t);break;case 22:if(g=r!==null&&r.memoizedState!==null,t.mode&1?($u=(A=$u)||g,xf(e,t),$u=A):xf(e,t),np(t),n&8192){if(A=t.memoizedState!==null,(t.stateNode.isHidden=A)&&!g&&t.mode&1)for(vi=t,g=t.child;g!==null;){for(C=vi=g;vi!==null;){switch(B=vi,S=B.child,B.tag){case 0:case 11:case 14:case 15:wx(4,B,B.return);break;case 1:Iy(B,B.return);var P=B.stateNode;if(typeof P.componentWillUnmount=="function"){n=B,r=B.return;try{e=n,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(j){tc(n,r,j)}}break;case 5:Iy(B,B.return);break;case 22:if(B.memoizedState!==null){mD(C);continue}}S!==null?(S.return=B,vi=S):mD(C)}g=g.sibling}e:for(g=null,C=t;;){if(C.tag===5){if(g===null){g=C;try{s=C.stateNode,A?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=C.stateNode,i=C.memoizedProps.style,c=i!=null&&i.hasOwnProperty("display")?i.display:null,u.style.display=E9("display",c))}catch(j){tc(t,t.return,j)}}}else if(C.tag===6){if(g===null)try{C.stateNode.nodeValue=A?"":C.memoizedProps}catch(j){tc(t,t.return,j)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===t)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;g===C&&(g=null),C=C.return}g===C&&(g=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:xf(e,t),np(t),n&4&&pD(t);break;case 21:break;default:xf(e,t),np(t)}}function np(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(JQ(r)){var n=r;break e}r=r.return}throw Error(Rn(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(t_(s,""),n.flags&=-33);var o=fD(t);KT(t,o,s);break;case 3:case 4:var c=n.stateNode.containerInfo,u=fD(t);WT(t,u,c);break;default:throw Error(Rn(161))}}catch(i){tc(t,t.return,i)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nte(t,e,r){vi=t,rH(t)}function rH(t,e,r){for(var n=(t.mode&1)!==0;vi!==null;){var s=vi,o=s.child;if(s.tag===22&&n){var c=s.memoizedState!==null||Pw;if(!c){var u=s.alternate,i=u!==null&&u.memoizedState!==null||$u;u=Pw;var A=$u;if(Pw=c,($u=i)&&!A)for(vi=s;vi!==null;)c=vi,i=c.child,c.tag===22&&c.memoizedState!==null?gD(s):i!==null?(i.return=c,vi=i):gD(s);for(;o!==null;)vi=o,rH(o),o=o.sibling;vi=s,Pw=u,$u=A}AD(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,vi=o):AD(t)}}function AD(t){for(;vi!==null;){var e=vi;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$u||X4(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!$u)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ef(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Jk(e,o,n);break;case 3:var c=e.updateQueue;if(c!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Jk(e,c,r)}break;case 5:var u=e.stateNode;if(r===null&&e.flags&4){r=u;var i=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break;case"img":i.src&&(r.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var A=e.alternate;if(A!==null){var g=A.memoizedState;if(g!==null){var C=g.dehydrated;C!==null&&s_(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Rn(163))}$u||e.flags&512&&$T(e)}catch(B){tc(e,e.return,B)}}if(e===t){vi=null;break}if(r=e.sibling,r!==null){r.return=e.return,vi=r;break}vi=e.return}}function mD(t){for(;vi!==null;){var e=vi;if(e===t){vi=null;break}var r=e.sibling;if(r!==null){r.return=e.return,vi=r;break}vi=e.return}}function gD(t){for(;vi!==null;){var e=vi;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{X4(4,e)}catch(i){tc(e,r,i)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(i){tc(e,s,i)}}var o=e.return;try{$T(e)}catch(i){tc(e,o,i)}break;case 5:var c=e.return;try{$T(e)}catch(i){tc(e,c,i)}}}catch(i){tc(e,e.return,i)}if(e===t){vi=null;break}var u=e.sibling;if(u!==null){u.return=e.return,vi=u;break}vi=e.return}}var Pte=Math.ceil,U5=yA.ReactCurrentDispatcher,UL=yA.ReactCurrentOwner,Zd=yA.ReactCurrentBatchConfig,Vo=0,ru=null,Tc=null,mu=0,ld=0,Ly=tg(0),qc=0,m_=null,p0=0,Y4=0,zL=0,Cx=null,Dh=null,QL=0,l1=1/0,Wp=null,z5=!1,XT=null,Tm=null,Mw=!1,cm=null,Q5=0,Sx=0,YT=null,X2=-1,Y2=0;function vh(){return Vo&6?mc():X2!==-1?X2:X2=mc()}function Im(t){return t.mode&1?Vo&2&&mu!==0?mu&-mu:mte.transition!==null?(Y2===0&&(Y2=U9()),Y2):(t=Ca,t!==0||(t=window.event,t=t===void 0?16:$9(t.type)),t):1}function Mf(t,e,r,n){if(50<Sx)throw Sx=0,YT=null,Error(Rn(185));V_(t,r,n),(!(Vo&2)||t!==ru)&&(t===ru&&(!(Vo&2)&&(Y4|=r),qc===4&&im(t,mu)),Gh(t,n),r===1&&Vo===0&&!(e.mode&1)&&(l1=mc()+500,$4&&rg()))}function Gh(t,e){var r=t.callbackNode;mee(t,e);var n=S5(t,t===ru?mu:0);if(n===0)r!==null&&Bk(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Bk(r),e===1)t.tag===0?Ate(yD.bind(null,t)):dQ(yD.bind(null,t)),hte(function(){!(Vo&6)&&rg()}),r=null;else{switch(z9(n)){case 1:r=pL;break;case 4:r=O9;break;case 16:r=C5;break;case 536870912:r=R9;break;default:r=C5}r=uH(r,nH.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function nH(t,e){if(X2=-1,Y2=0,Vo&6)throw Error(Rn(327));var r=t.callbackNode;if(qy()&&t.callbackNode!==r)return null;var n=S5(t,t===ru?mu:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=H5(t,n);else{e=n;var s=Vo;Vo|=2;var o=sH();(ru!==t||mu!==e)&&(Wp=null,l1=mc()+500,Yg(t,e));do try{kte();break}catch(u){iH(t,u)}while(!0);EL(),U5.current=o,Vo=s,Tc!==null?e=0:(ru=null,mu=0,e=qc)}if(e!==0){if(e===2&&(s=CT(t),s!==0&&(n=s,e=ZT(t,s))),e===1)throw r=m_,Yg(t,0),im(t,n),Gh(t,mc()),r;if(e===6)im(t,n);else{if(s=t.current.alternate,!(n&30)&&!Mte(s)&&(e=H5(t,n),e===2&&(o=CT(t),o!==0&&(n=o,e=ZT(t,o))),e===1))throw r=m_,Yg(t,0),im(t,n),Gh(t,mc()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Rn(345));case 2:Lg(t,Dh,Wp);break;case 3:if(im(t,n),(n&130023424)===n&&(e=QL+500-mc(),10<e)){if(S5(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){vh(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=NT(Lg.bind(null,t,Dh,Wp),e);break}Lg(t,Dh,Wp);break;case 4:if(im(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var c=31-Pf(n);o=1<<c,c=e[c],c>s&&(s=c),n&=~o}if(n=s,n=mc()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Pte(n/1960))-n,10<n){t.timeoutHandle=NT(Lg.bind(null,t,Dh,Wp),n);break}Lg(t,Dh,Wp);break;case 5:Lg(t,Dh,Wp);break;default:throw Error(Rn(329))}}}return Gh(t,mc()),t.callbackNode===r?nH.bind(null,t):null}function ZT(t,e){var r=Cx;return t.current.memoizedState.isDehydrated&&(Yg(t,e).flags|=256),t=H5(t,e),t!==2&&(e=Dh,Dh=r,e!==null&&JT(e)),t}function JT(t){Dh===null?Dh=t:Dh.push.apply(Dh,t)}function Mte(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Df(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function im(t,e){for(e&=~zL,e&=~Y4,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Pf(e),n=1<<r;t[r]=-1,e&=~n}}function yD(t){if(Vo&6)throw Error(Rn(327));qy();var e=S5(t,0);if(!(e&1))return Gh(t,mc()),null;var r=H5(t,e);if(t.tag!==0&&r===2){var n=CT(t);n!==0&&(e=n,r=ZT(t,n))}if(r===1)throw r=m_,Yg(t,0),im(t,e),Gh(t,mc()),r;if(r===6)throw Error(Rn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lg(t,Dh,Wp),Gh(t,mc()),null}function HL(t,e){var r=Vo;Vo|=1;try{return t(e)}finally{Vo=r,Vo===0&&(l1=mc()+500,$4&&rg())}}function A0(t){cm!==null&&cm.tag===0&&!(Vo&6)&&qy();var e=Vo;Vo|=1;var r=Zd.transition,n=Ca;try{if(Zd.transition=null,Ca=1,t)return t()}finally{Ca=n,Zd.transition=r,Vo=e,!(Vo&6)&&rg()}}function VL(){ld=Ly.current,Al(Ly)}function Yg(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ute(r)),Tc!==null)for(r=Tc.return;r!==null;){var n=r;switch(CL(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&L5();break;case 3:o1(),Al(Hh),Al(Zu),PL();break;case 5:NL(n);break;case 4:o1();break;case 13:Al(jl);break;case 19:Al(jl);break;case 10:TL(n.type._context);break;case 22:case 23:VL()}r=r.return}if(ru=t,Tc=t=Lm(t.current,null),mu=ld=e,qc=0,m_=null,zL=Y4=p0=0,Dh=Cx=null,Hg!==null){for(e=0;e<Hg.length;e++)if(r=Hg[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var c=o.next;o.next=s,n.next=c}r.pending=n}Hg=null}return t}function iH(t,e){do{var r=Tc;try{if(EL(),$2.current=R5,O5){for(var n=Dl.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}O5=!1}if(f0=0,Jc=Hc=Dl=null,bx=!1,f_=0,UL.current=null,r===null||r.return===null){qc=1,m_=e,Tc=null;break}e:{var o=t,c=r.return,u=r,i=e;if(e=mu,u.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var A=i,g=u,C=g.tag;if(!(g.mode&1)&&(C===0||C===11||C===15)){var B=g.alternate;B?(g.updateQueue=B.updateQueue,g.memoizedState=B.memoizedState,g.lanes=B.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=sD(c);if(S!==null){S.flags&=-257,oD(S,c,u,o,e),S.mode&1&&iD(o,A,e),e=S,i=A;var P=e.updateQueue;if(P===null){var j=new Set;j.add(i),e.updateQueue=j}else P.add(i);break e}else{if(!(e&1)){iD(o,A,e),GL();break e}i=Error(Rn(426))}}else if(wl&&u.mode&1){var R=sD(c);if(R!==null){!(R.flags&65536)&&(R.flags|=256),oD(R,c,u,o,e),SL(a1(i,u));break e}}o=i=a1(i,u),qc!==4&&(qc=2),Cx===null?Cx=[o]:Cx.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var N=zQ(o,i,e);Zk(o,N);break e;case 1:u=i;var U=o.type,$=o.stateNode;if(!(o.flags&128)&&(typeof U.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Tm===null||!Tm.has($)))){o.flags|=65536,e&=-e,o.lanes|=e;var J=QQ(o,u,e);Zk(o,J);break e}}o=o.return}while(o!==null)}aH(r)}catch(te){e=te,Tc===r&&r!==null&&(Tc=r=r.return);continue}break}while(!0)}function sH(){var t=U5.current;return U5.current=R5,t===null?R5:t}function GL(){(qc===0||qc===3||qc===2)&&(qc=4),ru===null||!(p0&268435455)&&!(Y4&268435455)||im(ru,mu)}function H5(t,e){var r=Vo;Vo|=2;var n=sH();(ru!==t||mu!==e)&&(Wp=null,Yg(t,e));do try{jte();break}catch(s){iH(t,s)}while(!0);if(EL(),Vo=r,U5.current=n,Tc!==null)throw Error(Rn(261));return ru=null,mu=0,qc}function jte(){for(;Tc!==null;)oH(Tc)}function kte(){for(;Tc!==null&&!aee();)oH(Tc)}function oH(t){var e=cH(t.alternate,t,ld);t.memoizedProps=t.pendingProps,e===null?aH(t):Tc=e,UL.current=null}function aH(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Ite(r,e),r!==null){r.flags&=32767,Tc=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qc=6,Tc=null;return}}else if(r=Tte(r,e,ld),r!==null){Tc=r;return}if(e=e.sibling,e!==null){Tc=e;return}Tc=e=t}while(e!==null);qc===0&&(qc=5)}function Lg(t,e,r){var n=Ca,s=Zd.transition;try{Zd.transition=null,Ca=1,Dte(t,e,r,n)}finally{Zd.transition=s,Ca=n}return null}function Dte(t,e,r,n){do qy();while(cm!==null);if(Vo&6)throw Error(Rn(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Rn(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(gee(t,o),t===ru&&(Tc=ru=null,mu=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mw||(Mw=!0,uH(C5,function(){return qy(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Zd.transition,Zd.transition=null;var c=Ca;Ca=1;var u=Vo;Vo|=4,UL.current=null,Fte(t,r),tH(r,t),nte(LT),B5=!!IT,LT=IT=null,t.current=r,Nte(r),lee(),Vo=u,Ca=c,Zd.transition=o}else t.current=r;if(Mw&&(Mw=!1,cm=t,Q5=s),o=t.pendingLanes,o===0&&(Tm=null),hee(r.stateNode),Gh(t,mc()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(z5)throw z5=!1,t=XT,XT=null,t;return Q5&1&&t.tag!==0&&qy(),o=t.pendingLanes,o&1?t===YT?Sx++:(Sx=0,YT=t):Sx=0,rg(),null}function qy(){if(cm!==null){var t=z9(Q5),e=Zd.transition,r=Ca;try{if(Zd.transition=null,Ca=16>t?16:t,cm===null)var n=!1;else{if(t=cm,cm=null,Q5=0,Vo&6)throw Error(Rn(331));var s=Vo;for(Vo|=4,vi=t.current;vi!==null;){var o=vi,c=o.child;if(vi.flags&16){var u=o.deletions;if(u!==null){for(var i=0;i<u.length;i++){var A=u[i];for(vi=A;vi!==null;){var g=vi;switch(g.tag){case 0:case 11:case 15:wx(8,g,o)}var C=g.child;if(C!==null)C.return=g,vi=C;else for(;vi!==null;){g=vi;var B=g.sibling,S=g.return;if(ZQ(g),g===A){vi=null;break}if(B!==null){B.return=S,vi=B;break}vi=S}}}var P=o.alternate;if(P!==null){var j=P.child;if(j!==null){P.child=null;do{var R=j.sibling;j.sibling=null,j=R}while(j!==null)}}vi=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,vi=c;else e:for(;vi!==null;){if(o=vi,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wx(9,o,o.return)}var N=o.sibling;if(N!==null){N.return=o.return,vi=N;break e}vi=o.return}}var U=t.current;for(vi=U;vi!==null;){c=vi;var $=c.child;if(c.subtreeFlags&2064&&$!==null)$.return=c,vi=$;else e:for(c=U;vi!==null;){if(u=vi,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:X4(9,u)}}catch(te){tc(u,u.return,te)}if(u===c){vi=null;break e}var J=u.sibling;if(J!==null){J.return=u.return,vi=J;break e}vi=u.return}}if(Vo=s,rg(),mp&&typeof mp.onPostCommitFiberRoot=="function")try{mp.onPostCommitFiberRoot(Q4,t)}catch{}n=!0}return n}finally{Ca=r,Zd.transition=e}}return!1}function vD(t,e,r){e=a1(r,e),e=zQ(t,e,1),t=Em(t,e,1),e=vh(),t!==null&&(V_(t,1,e),Gh(t,e))}function tc(t,e,r){if(t.tag===3)vD(t,t,r);else for(;e!==null;){if(e.tag===3){vD(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Tm===null||!Tm.has(n))){t=a1(r,t),t=QQ(e,t,1),e=Em(e,t,1),t=vh(),e!==null&&(V_(e,1,t),Gh(e,t));break}}e=e.return}}function Ote(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=vh(),t.pingedLanes|=t.suspendedLanes&r,ru===t&&(mu&r)===r&&(qc===4||qc===3&&(mu&130023424)===mu&&500>mc()-QL?Yg(t,0):zL|=r),Gh(t,e)}function lH(t,e){e===0&&(t.mode&1?(e=Cw,Cw<<=1,!(Cw&130023424)&&(Cw=4194304)):e=1);var r=vh();t=cA(t,e),t!==null&&(V_(t,e,r),Gh(t,r))}function Rte(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),lH(t,r)}function Ute(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Rn(314))}n!==null&&n.delete(e),lH(t,r)}var cH;cH=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hh.current)Rh=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Rh=!1,Ete(t,e,r);Rh=!!(t.flags&131072)}else Rh=!1,wl&&e.flags&1048576&&fQ(e,P5,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;K2(t,e),t=e.pendingProps;var s=n1(e,Zu.current);Gy(e,r),s=jL(null,e,n,t,s,r);var o=kL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vh(n)?(o=!0,F5(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,LL(e),s.updater=K4,e.stateNode=s,s._reactInternals=e,RT(e,n,t,r),e=QT(null,e,n,!0,o,r)):(e.tag=0,wl&&o&&wL(e),mh(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(K2(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=Qte(n),t=Ef(n,t),s){case 0:e=zT(null,e,n,t,r);break e;case 1:e=cD(null,e,n,t,r);break e;case 11:e=aD(null,e,n,t,r);break e;case 14:e=lD(null,e,n,Ef(n.type,t),r);break e}throw Error(Rn(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ef(n,s),zT(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ef(n,s),cD(t,e,n,s,r);case 3:e:{if(qQ(e),t===null)throw Error(Rn(387));n=e.pendingProps,o=e.memoizedState,s=o.element,vQ(t,e),k5(e,n,null,r);var c=e.memoizedState;if(n=c.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=a1(Error(Rn(423)),e),e=uD(t,e,n,r,s);break e}else if(n!==s){s=a1(Error(Rn(424)),e),e=uD(t,e,n,r,s);break e}else for(ud=Bm(e.stateNode.containerInfo.firstChild),dd=e,wl=!0,Ff=null,r=gQ(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(i1(),n===s){e=uA(t,e,r);break e}mh(t,e,n,r)}e=e.child}return e;case 5:return xQ(e),t===null&&kT(e),n=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,c=s.children,FT(n,s)?c=null:o!==null&&FT(n,o)&&(e.flags|=32),GQ(t,e),mh(t,e,c,r),e.child;case 6:return t===null&&kT(e),null;case 13:return $Q(t,e,r);case 4:return FL(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=s1(e,null,n,r):mh(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ef(n,s),aD(t,e,n,s,r);case 7:return mh(t,e,e.pendingProps,r),e.child;case 8:return mh(t,e,e.pendingProps.children,r),e.child;case 12:return mh(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,c=s.value,Ja(M5,n._currentValue),n._currentValue=c,o!==null)if(Df(o.value,c)){if(o.children===s.children&&!Hh.current){e=uA(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){c=o.child;for(var i=u.firstContext;i!==null;){if(i.context===n){if(o.tag===1){i=nA(-1,r&-r),i.tag=2;var A=o.updateQueue;if(A!==null){A=A.shared;var g=A.pending;g===null?i.next=i:(i.next=g.next,g.next=i),A.pending=i}}o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),DT(o.return,r,e),u.lanes|=r;break}i=i.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(Rn(341));c.lanes|=r,u=c.alternate,u!==null&&(u.lanes|=r),DT(c,r,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}mh(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Gy(e,r),s=ef(s),n=n(s),e.flags|=1,mh(t,e,n,r),e.child;case 14:return n=e.type,s=Ef(n,e.pendingProps),s=Ef(n.type,s),lD(t,e,n,s,r);case 15:return HQ(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ef(n,s),K2(t,e),e.tag=1,Vh(n)?(t=!0,F5(e)):t=!1,Gy(e,r),UQ(e,n,s),RT(e,n,s,r),QT(null,e,n,!0,t,r);case 19:return WQ(t,e,r);case 22:return VQ(t,e,r)}throw Error(Rn(156,e.tag))};function uH(t,e){return D9(t,e)}function zte(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kd(t,e,r,n){return new zte(t,e,r,n)}function qL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qte(t){if(typeof t=="function")return qL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hL)return 11;if(t===dL)return 14}return 2}function Lm(t,e){var r=t.alternate;return r===null?(r=Kd(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Z2(t,e,r,n,s,o){var c=2;if(n=t,typeof t=="function")qL(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case xy:return Zg(r.children,s,o,e);case uL:c=8,s|=8;break;case cT:return t=Kd(12,r,e,s|2),t.elementType=cT,t.lanes=o,t;case uT:return t=Kd(13,r,e,s),t.elementType=uT,t.lanes=o,t;case hT:return t=Kd(19,r,e,s),t.elementType=hT,t.lanes=o,t;case x9:return Z4(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y9:c=10;break e;case v9:c=9;break e;case hL:c=11;break e;case dL:c=14;break e;case em:c=16,n=null;break e}throw Error(Rn(130,t==null?t:typeof t,""))}return e=Kd(c,r,e,s),e.elementType=t,e.type=n,e.lanes=o,e}function Zg(t,e,r,n){return t=Kd(7,t,n,e),t.lanes=r,t}function Z4(t,e,r,n){return t=Kd(22,t,n,e),t.elementType=x9,t.lanes=r,t.stateNode={isHidden:!1},t}function oE(t,e,r){return t=Kd(6,t,null,e),t.lanes=r,t}function aE(t,e,r){return e=Kd(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hte(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zB(0),this.expirationTimes=zB(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zB(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $L(t,e,r,n,s,o,c,u,i){return t=new Hte(t,e,r,u,i),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Kd(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},LL(o),t}function Vte(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vy,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function hH(t){if(!t)return zm;t=t._reactInternals;e:{if(b0(t)!==t||t.tag!==1)throw Error(Rn(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vh(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Rn(171))}if(t.tag===1){var r=t.type;if(Vh(r))return hQ(t,r,e)}return e}function dH(t,e,r,n,s,o,c,u,i){return t=$L(r,n,!0,t,s,o,c,u,i),t.context=hH(null),r=t.current,n=vh(),s=Im(r),o=nA(n,s),o.callback=e??null,Em(r,o,s),t.current.lanes=s,V_(t,s,n),Gh(t,n),t}function J4(t,e,r,n){var s=e.current,o=vh(),c=Im(s);return r=hH(r),e.context===null?e.context=r:e.pendingContext=r,e=nA(o,c),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Em(s,e,c),t!==null&&(Mf(t,s,c,o),q2(t,s,c)),c}function V5(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function WL(t,e){xD(t,e),(t=t.alternate)&&xD(t,e)}function Gte(){return null}var fH=typeof reportError=="function"?reportError:function(t){console.error(t)};function KL(t){this._internalRoot=t}eC.prototype.render=KL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Rn(409));J4(t,e,null,null)};eC.prototype.unmount=KL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;A0(function(){J4(null,t,null,null)}),e[lA]=null}};function eC(t){this._internalRoot=t}eC.prototype.unstable_scheduleHydration=function(t){if(t){var e=V9();t={blockedOn:null,target:t,priority:e};for(var r=0;r<nm.length&&e!==0&&e<nm[r].priority;r++);nm.splice(r,0,t),r===0&&q9(t)}};function XL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _D(){}function qte(t,e,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var A=V5(c);o.call(A)}}var c=dH(e,n,t,0,null,!1,!1,"",_D);return t._reactRootContainer=c,t[lA]=c.current,l_(t.nodeType===8?t.parentNode:t),A0(),c}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var u=n;n=function(){var A=V5(i);u.call(A)}}var i=$L(t,0,!1,null,null,!1,!1,"",_D);return t._reactRootContainer=i,t[lA]=i.current,l_(t.nodeType===8?t.parentNode:t),A0(function(){J4(e,i,r,n)}),i}function rC(t,e,r,n,s){var o=r._reactRootContainer;if(o){var c=o;if(typeof s=="function"){var u=s;s=function(){var i=V5(c);u.call(i)}}J4(e,c,t,s)}else c=qte(r,e,t,s,n);return V5(c)}Q9=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Yv(e.pendingLanes);r!==0&&(AL(e,r|1),Gh(e,mc()),!(Vo&6)&&(l1=mc()+500,rg()))}break;case 13:A0(function(){var n=cA(t,1);if(n!==null){var s=vh();Mf(n,t,1,s)}}),WL(t,1)}};mL=function(t){if(t.tag===13){var e=cA(t,134217728);if(e!==null){var r=vh();Mf(e,t,134217728,r)}WL(t,134217728)}};H9=function(t){if(t.tag===13){var e=Im(t),r=cA(t,e);if(r!==null){var n=vh();Mf(r,t,e,n)}WL(t,e)}};V9=function(){return Ca};G9=function(t,e){var r=Ca;try{return Ca=t,e()}finally{Ca=r}};_T=function(t,e,r){switch(e){case"input":if(pT(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=q4(n);if(!s)throw Error(Rn(90));b9(n),pT(n,s)}}}break;case"textarea":C9(t,r);break;case"select":e=r.value,e!=null&&zy(t,!!r.multiple,e,!1)}};F9=HL;N9=A0;var $te={usingClientEntryPoint:!1,Events:[q_,Cy,q4,I9,L9,HL]},Nv={findFiberByHostInstance:Qg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wte={bundleType:Nv.bundleType,version:Nv.version,rendererPackageName:Nv.rendererPackageName,rendererConfig:Nv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=j9(t),t===null?null:t.stateNode},findFiberByHostInstance:Nv.findFiberByHostInstance||Gte,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jw.isDisabled&&jw.supportsFiber)try{Q4=jw.inject(Wte),mp=jw}catch{}}md.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$te;md.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XL(e))throw Error(Rn(200));return Vte(t,e,null,r)};md.createRoot=function(t,e){if(!XL(t))throw Error(Rn(299));var r=!1,n="",s=fH;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$L(t,1,!1,null,null,r,!1,n,s),t[lA]=e.current,l_(t.nodeType===8?t.parentNode:t),new KL(e)};md.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Rn(188)):(t=Object.keys(t).join(","),Error(Rn(268,t)));return t=j9(e),t=t===null?null:t.stateNode,t};md.flushSync=function(t){return A0(t)};md.hydrate=function(t,e,r){if(!tC(e))throw Error(Rn(200));return rC(null,t,e,!0,r)};md.hydrateRoot=function(t,e,r){if(!XL(t))throw Error(Rn(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",c=fH;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(c=r.onRecoverableError)),e=dH(e,null,t,1,r??null,s,!1,o,c),t[lA]=e.current,l_(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new eC(e)};md.render=function(t,e,r){if(!tC(e))throw Error(Rn(200));return rC(null,t,e,!1,r)};md.unmountComponentAtNode=function(t){if(!tC(t))throw Error(Rn(40));return t._reactRootContainer?(A0(function(){rC(null,null,t,!1,function(){t._reactRootContainer=null,t[lA]=null})}),!0):!1};md.unstable_batchedUpdates=HL;md.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!tC(r))throw Error(Rn(200));if(t==null||t._reactInternals===void 0)throw Error(Rn(38));return rC(t,e,r,!1,n)};md.version="18.3.1-next-f1338f8080-20240426";function pH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pH)}catch(t){console.error(t)}}pH(),p9.exports=md;var nC=p9.exports,AH,bD=nC;AH=aT.createRoot=bD.createRoot,aT.hydrateRoot=bD.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function g_(){return g_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},g_.apply(this,arguments)}var um;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(um||(um={}));const wD="popstate";function Kte(t){t===void 0&&(t={});function e(n,s){let{pathname:o,search:c,hash:u}=n.location;return e6("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:G5(s)}return Yte(e,r,null,t)}function wc(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mH(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xte(){return Math.random().toString(36).substr(2,8)}function CD(t,e){return{usr:t.state,key:t.key,idx:e}}function e6(t,e,r,n){return r===void 0&&(r=null),g_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?C1(e):e,{state:r,key:e&&e.key||n||Xte()})}function G5(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function C1(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Yte(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,c=s.history,u=um.Pop,i=null,A=g();A==null&&(A=0,c.replaceState(g_({},c.state,{idx:A}),""));function g(){return(c.state||{idx:null}).idx}function C(){u=um.Pop;let R=g(),N=R==null?null:R-A;A=R,i&&i({action:u,location:j.location,delta:N})}function B(R,N){u=um.Push;let U=e6(j.location,R,N);A=g()+1;let $=CD(U,A),J=j.createHref(U);try{c.pushState($,"",J)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;s.location.assign(J)}o&&i&&i({action:u,location:j.location,delta:1})}function S(R,N){u=um.Replace;let U=e6(j.location,R,N);A=g();let $=CD(U,A),J=j.createHref(U);c.replaceState($,"",J),o&&i&&i({action:u,location:j.location,delta:0})}function P(R){let N=s.location.origin!=="null"?s.location.origin:s.location.href,U=typeof R=="string"?R:G5(R);return U=U.replace(/ $/,"%20"),wc(N,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,N)}let j={get action(){return u},get location(){return t(s,c)},listen(R){if(i)throw new Error("A history only accepts one active listener");return s.addEventListener(wD,C),i=R,()=>{s.removeEventListener(wD,C),i=null}},createHref(R){return e(s,R)},createURL:P,encodeLocation(R){let N=P(R);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:B,replace:S,go(R){return c.go(R)}};return j}var SD;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(SD||(SD={}));function Zte(t,e,r){return r===void 0&&(r="/"),Jte(t,e,r,!1)}function Jte(t,e,r,n){let s=typeof e=="string"?C1(e):e,o=YL(s.pathname||"/",r);if(o==null)return null;let c=gH(t);ere(c);let u=null;for(let i=0;u==null&&i<c.length;++i){let A=hre(o);u=cre(c[i],A,n)}return u}function gH(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,c,u)=>{let i={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};i.relativePath.startsWith("/")&&(wc(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(n.length));let A=Fm([n,i.relativePath]),g=r.concat(i);o.children&&o.children.length>0&&(wc(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+A+'".')),gH(o.children,e,g,A)),!(o.path==null&&!o.index)&&e.push({path:A,score:are(A,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,c);else for(let i of yH(o.path))s(o,c,i)}),e}function yH(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let c=yH(n.join("/")),u=[];return u.push(...c.map(i=>i===""?o:[o,i].join("/"))),s&&u.push(...c),u.map(i=>t.startsWith("/")&&i===""?"/":i)}function ere(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:lre(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const tre=/^:[\w-]+$/,rre=3,nre=2,ire=1,sre=10,ore=-2,BD=t=>t==="*";function are(t,e){let r=t.split("/"),n=r.length;return r.some(BD)&&(n+=ore),e&&(n+=nre),r.filter(s=>!BD(s)).reduce((s,o)=>s+(tre.test(o)?rre:o===""?ire:sre),n)}function lre(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function cre(t,e,r){let{routesMeta:n}=t,s={},o="/",c=[];for(let u=0;u<n.length;++u){let i=n[u],A=u===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",C=ED({path:i.relativePath,caseSensitive:i.caseSensitive,end:A},g),B=i.route;if(!C&&A&&r&&!n[n.length-1].route.index&&(C=ED({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},g)),!C)return null;Object.assign(s,C.params),c.push({params:s,pathname:Fm([o,C.pathname]),pathnameBase:Are(Fm([o,C.pathnameBase])),route:B}),C.pathnameBase!=="/"&&(o=Fm([o,C.pathnameBase]))}return c}function ED(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=ure(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((A,g,C)=>{let{paramName:B,isOptional:S}=g;if(B==="*"){let j=u[C]||"";c=o.slice(0,o.length-j.length).replace(/(.)\/+$/,"$1")}const P=u[C];return S&&!P?A[B]=void 0:A[B]=(P||"").replace(/%2F/g,"/"),A},{}),pathname:o,pathnameBase:c,pattern:t}}function ure(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),mH(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,i)=>(n.push({paramName:u,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function hre(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mH(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function YL(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function dre(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?C1(t):t;return{pathname:r?r.startsWith("/")?r:fre(r,e):e,search:mre(n),hash:gre(s)}}function fre(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function lE(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pre(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ZL(t,e){let r=pre(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function JL(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=C1(t):(s=g_({},t),wc(!s.pathname||!s.pathname.includes("?"),lE("?","pathname","search",s)),wc(!s.pathname||!s.pathname.includes("#"),lE("#","pathname","hash",s)),wc(!s.search||!s.search.includes("#"),lE("#","search","hash",s)));let o=t===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=r;else{let C=e.length-1;if(!n&&c.startsWith("..")){let B=c.split("/");for(;B[0]==="..";)B.shift(),C-=1;s.pathname=B.join("/")}u=C>=0?e[C]:"/"}let i=dre(s,u),A=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&r.endsWith("/");return!i.pathname.endsWith("/")&&(A||g)&&(i.pathname+="/"),i}const Fm=t=>t.join("/").replace(/\/\/+/g,"/"),Are=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mre=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gre=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yre(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vH=["post","put","patch","delete"];new Set(vH);const vre=["get",...vH];new Set(vre);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function y_(){return y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y_.apply(this,arguments)}const eF=ve.createContext(null),xre=ve.createContext(null),ng=ve.createContext(null),iC=ve.createContext(null),ig=ve.createContext({outlet:null,matches:[],isDataRoute:!1}),xH=ve.createContext(null);function _re(t,e){let{relative:r}=e===void 0?{}:e;S1()||wc(!1);let{basename:n,navigator:s}=ve.useContext(ng),{hash:o,pathname:c,search:u}=bH(t,{relative:r}),i=c;return n!=="/"&&(i=c==="/"?n:Fm([n,c])),s.createHref({pathname:i,search:u,hash:o})}function S1(){return ve.useContext(iC)!=null}function Ju(){return S1()||wc(!1),ve.useContext(iC).location}function _H(t){ve.useContext(ng).static||ve.useLayoutEffect(t)}function B1(){let{isDataRoute:t}=ve.useContext(ig);return t?Mre():bre()}function bre(){S1()||wc(!1);let t=ve.useContext(eF),{basename:e,future:r,navigator:n}=ve.useContext(ng),{matches:s}=ve.useContext(ig),{pathname:o}=Ju(),c=JSON.stringify(ZL(s,r.v7_relativeSplatPath)),u=ve.useRef(!1);return _H(()=>{u.current=!0}),ve.useCallback(function(A,g){if(g===void 0&&(g={}),!u.current)return;if(typeof A=="number"){n.go(A);return}let C=JL(A,JSON.parse(c),o,g.relative==="path");t==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Fm([e,C.pathname])),(g.replace?n.replace:n.push)(C,g.state,g)},[e,n,c,o,t])}function bH(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=ve.useContext(ng),{matches:s}=ve.useContext(ig),{pathname:o}=Ju(),c=JSON.stringify(ZL(s,n.v7_relativeSplatPath));return ve.useMemo(()=>JL(t,JSON.parse(c),o,r==="path"),[t,c,o,r])}function wre(t,e){return Cre(t,e)}function Cre(t,e,r,n){S1()||wc(!1);let{navigator:s}=ve.useContext(ng),{matches:o}=ve.useContext(ig),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let i=c?c.pathnameBase:"/";c&&c.route;let A=Ju(),g;if(e){var C;let R=typeof e=="string"?C1(e):e;i==="/"||(C=R.pathname)!=null&&C.startsWith(i)||wc(!1),g=R}else g=A;let B=g.pathname||"/",S=B;if(i!=="/"){let R=i.replace(/^\//,"").split("/");S="/"+B.replace(/^\//,"").split("/").slice(R.length).join("/")}let P=Zte(t,{pathname:S}),j=Ire(P&&P.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Fm([i,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?i:Fm([i,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),o,r,n);return e&&j?ve.createElement(iC.Provider,{value:{location:y_({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:um.Pop}},j):j}function Sre(){let t=Pre(),e=yre(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ve.createElement(ve.Fragment,null,ve.createElement("h2",null,"Unexpected Application Error!"),ve.createElement("h3",{style:{fontStyle:"italic"}},e),r?ve.createElement("pre",{style:s},r):null,null)}const Bre=ve.createElement(Sre,null);class Ere extends ve.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?ve.createElement(ig.Provider,{value:this.props.routeContext},ve.createElement(xH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tre(t){let{routeContext:e,match:r,children:n}=t,s=ve.useContext(eF);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),ve.createElement(ig.Provider,{value:e},n)}function Ire(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let c=t,u=(s=r)==null?void 0:s.errors;if(u!=null){let g=c.findIndex(C=>C.route.id&&(u==null?void 0:u[C.route.id])!==void 0);g>=0||wc(!1),c=c.slice(0,Math.min(c.length,g+1))}let i=!1,A=-1;if(r&&n&&n.v7_partialHydration)for(let g=0;g<c.length;g++){let C=c[g];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(A=g),C.route.id){let{loaderData:B,errors:S}=r,P=C.route.loader&&B[C.route.id]===void 0&&(!S||S[C.route.id]===void 0);if(C.route.lazy||P){i=!0,A>=0?c=c.slice(0,A+1):c=[c[0]];break}}}return c.reduceRight((g,C,B)=>{let S,P=!1,j=null,R=null;r&&(S=u&&C.route.id?u[C.route.id]:void 0,j=C.route.errorElement||Bre,i&&(A<0&&B===0?(P=!0,R=null):A===B&&(P=!0,R=C.route.hydrateFallbackElement||null)));let N=e.concat(c.slice(0,B+1)),U=()=>{let $;return S?$=j:P?$=R:C.route.Component?$=ve.createElement(C.route.Component,null):C.route.element?$=C.route.element:$=g,ve.createElement(Tre,{match:C,routeContext:{outlet:g,matches:N,isDataRoute:r!=null},children:$})};return r&&(C.route.ErrorBoundary||C.route.errorElement||B===0)?ve.createElement(Ere,{location:r.location,revalidation:r.revalidation,component:j,error:S,children:U(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):U()},null)}var wH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wH||{}),q5=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(q5||{});function Lre(t){let e=ve.useContext(eF);return e||wc(!1),e}function Fre(t){let e=ve.useContext(xre);return e||wc(!1),e}function Nre(t){let e=ve.useContext(ig);return e||wc(!1),e}function CH(t){let e=Nre(),r=e.matches[e.matches.length-1];return r.route.id||wc(!1),r.route.id}function Pre(){var t;let e=ve.useContext(xH),r=Fre(q5.UseRouteError),n=CH(q5.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Mre(){let{router:t}=Lre(wH.UseNavigateStable),e=CH(q5.UseNavigateStable),r=ve.useRef(!1);return _H(()=>{r.current=!0}),ve.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,y_({fromRouteId:e},o)))},[t,e])}function Jv(t){let{to:e,replace:r,state:n,relative:s}=t;S1()||wc(!1);let{future:o,static:c}=ve.useContext(ng),{matches:u}=ve.useContext(ig),{pathname:i}=Ju(),A=B1(),g=JL(e,ZL(u,o.v7_relativeSplatPath),i,s==="path"),C=JSON.stringify(g);return ve.useEffect(()=>A(JSON.parse(C),{replace:r,state:n,relative:s}),[A,C,s,r,n]),null}function sd(t){wc(!1)}function jre(t){let{basename:e="/",children:r=null,location:n,navigationType:s=um.Pop,navigator:o,static:c=!1,future:u}=t;S1()&&wc(!1);let i=e.replace(/^\/*/,"/"),A=ve.useMemo(()=>({basename:i,navigator:o,static:c,future:y_({v7_relativeSplatPath:!1},u)}),[i,u,o,c]);typeof n=="string"&&(n=C1(n));let{pathname:g="/",search:C="",hash:B="",state:S=null,key:P="default"}=n,j=ve.useMemo(()=>{let R=YL(g,i);return R==null?null:{location:{pathname:R,search:C,hash:B,state:S,key:P},navigationType:s}},[i,g,C,B,S,P,s]);return j==null?null:ve.createElement(ng.Provider,{value:A},ve.createElement(iC.Provider,{children:r,value:j}))}function kre(t){let{children:e,location:r}=t;return wre(t6(e),r)}new Promise(()=>{});function t6(t,e){e===void 0&&(e=[]);let r=[];return ve.Children.forEach(t,(n,s)=>{if(!ve.isValidElement(n))return;let o=[...e,s];if(n.type===ve.Fragment){r.push.apply(r,t6(n.props.children,o));return}n.type!==sd&&wc(!1),!n.props.index||!n.props.children||wc(!1);let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=t6(n.props.children,o)),r.push(c)}),r}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function r6(){return r6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r6.apply(this,arguments)}function Dre(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Ore(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Rre(t,e){return t.button===0&&(!e||e==="_self")&&!Ore(t)}const Ure=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],zre="6";try{window.__reactRouterVersion=zre}catch{}const Qre="startTransition",TD=oT[Qre];function Hre(t){let{basename:e,children:r,future:n,window:s}=t,o=ve.useRef();o.current==null&&(o.current=Kte({window:s,v5Compat:!0}));let c=o.current,[u,i]=ve.useState({action:c.action,location:c.location}),{v7_startTransition:A}=n||{},g=ve.useCallback(C=>{A&&TD?TD(()=>i(C)):i(C)},[i,A]);return ve.useLayoutEffect(()=>c.listen(g),[c,g]),ve.createElement(jre,{basename:e,children:r,location:u.location,navigationType:u.action,navigator:c,future:n})}const Vre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oo=ve.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:o,replace:c,state:u,target:i,to:A,preventScrollReset:g,unstable_viewTransition:C}=e,B=Dre(e,Ure),{basename:S}=ve.useContext(ng),P,j=!1;if(typeof A=="string"&&Gre.test(A)&&(P=A,Vre))try{let $=new URL(window.location.href),J=A.startsWith("//")?new URL($.protocol+A):new URL(A),te=YL(J.pathname,S);J.origin===$.origin&&te!=null?A=te+J.search+J.hash:j=!0}catch{}let R=_re(A,{relative:s}),N=qre(A,{replace:c,state:u,target:i,preventScrollReset:g,relative:s,unstable_viewTransition:C});function U($){n&&n($),$.defaultPrevented||N($)}return ve.createElement("a",r6({},B,{href:P||R,onClick:j||o?n:U,ref:r,target:i}))});var ID;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ID||(ID={}));var LD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(LD||(LD={}));function qre(t,e){let{target:r,replace:n,state:s,preventScrollReset:o,relative:c,unstable_viewTransition:u}=e===void 0?{}:e,i=B1(),A=Ju(),g=bH(t,{relative:c});return ve.useCallback(C=>{if(Rre(C,r)){C.preventDefault();let B=n!==void 0?n:G5(A)===G5(g);i(t,{replace:B,state:s,preventScrollReset:o,relative:c,unstable_viewTransition:u})}},[A,i,g,n,s,r,t,o,c,u])}var SH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},FD=Qi.createContext&&Qi.createContext(SH),$re=["attr","size","title"];function Wre(t,e){if(t==null)return{};var r=Kre(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Kre(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $5(){return $5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$5.apply(this,arguments)}function ND(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function W5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ND(Object(r),!0).forEach(function(n){Xre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ND(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xre(t,e,r){return e=Yre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yre(t){var e=Zre(t,"string");return typeof e=="symbol"?e:e+""}function Zre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BH(t){return t&&t.map((e,r)=>Qi.createElement(e.tag,W5({key:r},e.attr),BH(e.child)))}function ys(t){return e=>Qi.createElement(Jre,$5({attr:W5({},t.attr)},e),BH(t.child))}function Jre(t){var e=r=>{var{attr:n,size:s,title:o}=t,c=Wre(t,$re),u=s||r.size||"1em",i;return r.className&&(i=r.className),t.className&&(i=(i?i+" ":"")+t.className),Qi.createElement("svg",$5({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,c,{className:i,style:W5(W5({color:t.color||r.color},r.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Qi.createElement("title",null,o),t.children)};return FD!==void 0?Qi.createElement(FD.Consumer,null,r=>e(r)):e(SH)}function ene(t){return ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function PD(t){return ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(t)}function tF(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function tne(t){return ys({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z"},child:[]}]})(t)}function EH(t){return ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M510.5 225.5c-6.9-37.2-39.3-65.5-78.5-65.5-12.3 0-23.9 3-34.3 8-17.4-24.1-45.6-40-77.7-40-53 0-96 43-96 96 0 .5.2 1.1.2 1.6C187.6 233 160 265.2 160 304c0 44.2 35.8 80 80 80h256c44.2 0 80-35.8 80-80 0-39.2-28.2-71.7-65.5-78.5zm-386.4 34.4c-37.4-37.4-37.4-98.3 0-135.8 34.6-34.6 89.1-36.8 126.7-7.4 20-12.9 43.6-20.7 69.2-20.7.7 0 1.3.2 2 .2l8.9-26.7c3.4-10.2-6.3-19.8-16.5-16.4l-75.3 25.1-35.5-71c-4.8-9.6-18.5-9.6-23.3 0l-35.5 71-75.3-25.1c-10.2-3.4-19.8 6.3-16.4 16.5l25.1 75.3-71 35.5c-9.6 4.8-9.6 18.5 0 23.3l71 35.5-25.1 75.3c-3.4 10.2 6.3 19.8 16.5 16.5l59.2-19.7c-.2-2.4-.7-4.7-.7-7.2 0-12.5 2.3-24.5 6.2-35.9-3.6-2.7-7.1-5.2-10.2-8.3zm69.8-58c4.3-24.5 15.8-46.4 31.9-64-9.8-6.2-21.4-9.9-33.8-9.9-35.3 0-64 28.7-64 64 0 18.7 8.2 35.4 21.1 47.1 11.3-15.9 26.6-28.9 44.8-37.2zm330.6 216.2c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8zm-96 0c-7.6-4.3-17.4-1.8-21.8 6l-36.6 64c-4.4 7.7-1.7 17.4 6 21.8 2.5 1.4 5.2 2.1 7.9 2.1 5.5 0 10.9-2.9 13.9-8.1l36.6-64c4.3-7.7 1.7-17.4-6-21.8z"},child:[]}]})(t)}function TH(t){return ys({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M575.2 325.7c.2-1.9.8-3.7.8-5.6 0-35.3-28.7-64-64-64-12.6 0-24.2 3.8-34.1 10-17.6-38.8-56.5-66-101.9-66-61.8 0-112 50.1-112 112 0 3 .7 5.8.9 8.7-49.6 3.7-88.9 44.7-88.9 95.3 0 53 43 96 96 96h272c53 0 96-43 96-96 0-42.1-27.2-77.4-64.8-90.4zm-430.4-22.6c-43.7-43.7-43.7-114.7 0-158.3 43.7-43.7 114.7-43.7 158.4 0 9.7 9.7 16.9 20.9 22.3 32.7 9.8-3.7 20.1-6 30.7-7.5L386 81.1c4-11.9-7.3-23.1-19.2-19.2L279 91.2 237.5 8.4C232-2.8 216-2.8 210.4 8.4L169 91.2 81.1 61.9C69.3 58 58 69.3 61.9 81.1l29.3 87.8-82.8 41.5c-11.2 5.6-11.2 21.5 0 27.1l82.8 41.4-29.3 87.8c-4 11.9 7.3 23.1 19.2 19.2l76.1-25.3c6.1-12.4 14-23.7 23.6-33.5-13.1-5.4-25.4-13.4-36-24zm-4.8-79.2c0 40.8 29.3 74.8 67.9 82.3 8-4.7 16.3-8.8 25.2-11.7 5.4-44.3 31-82.5 67.4-105C287.3 160.4 258 140 224 140c-46.3 0-84 37.6-84 83.9z"},child:[]}]})(t)}function rne(t){return ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function nne(t){return ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function c1(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function jh(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M467.14 44.84c-62.55-62.48-161.67-64.78-252.28 25.73-78.61 78.52-60.98 60.92-85.75 85.66-60.46 60.39-70.39 150.83-63.64 211.17l178.44-178.25c6.26-6.25 16.4-6.25 22.65 0s6.25 16.38 0 22.63L7.04 471.03c-9.38 9.37-9.38 24.57 0 33.94 9.38 9.37 24.6 9.37 33.98 0l66.1-66.03C159.42 454.65 279 457.11 353.95 384h-98.19l147.57-49.14c49.99-49.93 36.38-36.18 46.31-46.86h-97.78l131.54-43.8c45.44-74.46 34.31-148.84-16.26-199.36z"},child:[]}]})(t)}function ine(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function rF(t){return ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z"},child:[]}]})(t)}function sne(t){return ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function one(t){return ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function K5(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(t)}function MD(t){return ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function nF(t){return ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"},child:[]}]})(t)}function W_(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 96H0c0 123.7 100.3 224 224 224v144c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V320C288 196.3 187.7 96 64 96zm384-64c-84.2 0-157.4 46.5-195.7 115.2 27.7 30.2 48.2 66.9 59 107.6C424 243.1 512 147.9 512 32h-64z"},child:[]}]})(t)}function ane(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(t)}function lne(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(t)}function jD(t){return ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(t)}function cne(t){return ys({tag:"svg",attr:{viewBox:"0 0 256 512"},child:[{tag:"path",attr:{d:"M192 384c0 35.346-28.654 64-64 64s-64-28.654-64-64c0-23.685 12.876-44.349 32-55.417V224c0-17.673 14.327-32 32-32s32 14.327 32 32v104.583c19.124 11.068 32 31.732 32 55.417zm32-84.653c19.912 22.563 32 52.194 32 84.653 0 70.696-57.303 128-128 128-.299 0-.609-.001-.909-.003C56.789 511.509-.357 453.636.002 383.333.166 351.135 12.225 321.755 32 299.347V96c0-53.019 42.981-96 96-96s96 42.981 96 96v203.347zM208 384c0-34.339-19.37-52.19-32-66.502V96c0-26.467-21.533-48-48-48S80 69.533 80 96v221.498c-12.732 14.428-31.825 32.1-31.999 66.08-.224 43.876 35.563 80.116 79.423 80.42L128 464c44.112 0 80-35.888 80-80z"},child:[]}]})(t)}function kD(t){return ys({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M205.22 22.09c-7.94-28.78-49.44-30.12-58.44 0C100.01 179.85 0 222.72 0 333.91 0 432.35 78.72 512 176 512s176-79.65 176-178.09c0-111.75-99.79-153.34-146.78-311.82zM176 448c-61.75 0-112-50.25-112-112 0-8.84 7.16-16 16-16s16 7.16 16 16c0 44.11 35.89 80 80 80 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function une(t){return ys({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 336c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 112c-13.23 0-24-10.77-24-24s10.77-24 24-24 24 10.77 24 24-10.77 24-24 24zm80-288h-64v-40.2c0-14.12 4.7-27.76 13.15-38.84 4.42-5.8 3.55-14.06-1.32-19.49L534.2 37.3c-6.66-7.45-18.32-6.92-24.7.78C490.58 60.9 480 89.81 480 119.8V160H377.67L321.58 29.14A47.914 47.914 0 0 0 277.45 0H144c-26.47 0-48 21.53-48 48v146.52c-8.63-6.73-20.96-6.46-28.89 1.47L36 227.1c-8.59 8.59-8.59 22.52 0 31.11l5.06 5.06c-4.99 9.26-8.96 18.82-11.91 28.72H22c-12.15 0-22 9.85-22 22v44c0 12.15 9.85 22 22 22h7.14c2.96 9.91 6.92 19.46 11.91 28.73l-5.06 5.06c-8.59 8.59-8.59 22.52 0 31.11L67.1 476c8.59 8.59 22.52 8.59 31.11 0l5.06-5.06c9.26 4.99 18.82 8.96 28.72 11.91V490c0 12.15 9.85 22 22 22h44c12.15 0 22-9.85 22-22v-7.14c9.9-2.95 19.46-6.92 28.72-11.91l5.06 5.06c8.59 8.59 22.52 8.59 31.11 0l31.11-31.11c8.59-8.59 8.59-22.52 0-31.11l-5.06-5.06c4.99-9.26 8.96-18.82 11.91-28.72H330c12.15 0 22-9.85 22-22v-6h80.54c21.91-28.99 56.32-48 95.46-48 18.64 0 36.07 4.61 51.8 12.2l50.82-50.82c6-6 9.37-14.14 9.37-22.63V192c.01-17.67-14.32-32-31.99-32zM176 416c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm22-256h-38V64h106.89l41.15 96H198z"},child:[]}]})(t)}function hne(t){return ys({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function v_(t){return ys({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M378.31 378.49L298.42 288h30.63c9.01 0 16.98-5 20.78-13.06 3.8-8.04 2.55-17.26-3.28-24.05L268.42 160h28.89c9.1 0 17.3-5.35 20.86-13.61 3.52-8.13 1.86-17.59-4.24-24.08L203.66 4.83c-6.03-6.45-17.28-6.45-23.32 0L70.06 122.31c-6.1 6.49-7.75 15.95-4.24 24.08C69.38 154.65 77.59 160 86.69 160h28.89l-78.14 90.91c-5.81 6.78-7.06 15.99-3.27 24.04C37.97 283 45.93 288 54.95 288h30.63L5.69 378.49c-6 6.79-7.36 16.09-3.56 24.26 3.75 8.05 12 13.25 21.01 13.25H160v24.45l-30.29 48.4c-5.32 10.64 2.42 23.16 14.31 23.16h95.96c11.89 0 19.63-12.52 14.31-23.16L224 440.45V416h136.86c9.01 0 17.26-5.2 21.01-13.25 3.8-8.17 2.44-17.47-3.56-24.26z"},child:[]}]})(t)}function dne(t){return ys({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function fne(t){return ys({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(t)}function pne(t){return ys({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M562.1 383.9c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144C540.6 93.4 520 85.4 504.2 73 490.1 61.9 470 61.7 456 73c-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3z"},child:[]}]})(t)}function Ane(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M156.7 256H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h142.2c15.9 0 30.8 10.9 33.4 26.6 3.3 20-12.1 37.4-31.6 37.4-14.1 0-26.1-9.2-30.4-21.9-2.1-6.3-8.6-10.1-15.2-10.1H81.6c-9.8 0-17.7 8.8-15.9 18.4 8.6 44.1 47.6 77.6 94.2 77.6 57.1 0 102.7-50.1 95.2-108.6C249 291 205.4 256 156.7 256zM16 224h336c59.7 0 106.8-54.8 93.8-116.7-7.6-36.2-36.9-65.5-73.1-73.1-55.4-11.6-105.1 24.9-114.9 75.5-1.9 9.6 6.1 18.3 15.8 18.3h32.8c6.7 0 13.1-3.8 15.2-10.1C325.9 105.2 337.9 96 352 96c19.4 0 34.9 17.4 31.6 37.4-2.6 15.7-17.4 26.6-33.4 26.6H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16zm384 32H243.7c19.3 16.6 33.2 38.8 39.8 64H400c26.5 0 48 21.5 48 48s-21.5 48-48 48c-17.9 0-33.3-9.9-41.6-24.4-2.9-5-8.7-7.6-14.5-7.6h-33.8c-10.9 0-19 10.8-15.3 21.1 17.8 50.6 70.5 84.8 129.4 72.3 41.2-8.7 75.1-41.6 84.7-82.7C526 321.5 470.5 256 400 256z"},child:[]}]})(t)}var iF={exports:{}},IH=function(e,r){return function(){for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];return e.apply(r,s)}},mne=IH,w0=Object.prototype.toString;function sF(t){return w0.call(t)==="[object Array]"}function n6(t){return typeof t>"u"}function gne(t){return t!==null&&!n6(t)&&t.constructor!==null&&!n6(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function yne(t){return w0.call(t)==="[object ArrayBuffer]"}function vne(t){return typeof FormData<"u"&&t instanceof FormData}function xne(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function _ne(t){return typeof t=="string"}function bne(t){return typeof t=="number"}function LH(t){return t!==null&&typeof t=="object"}function J2(t){if(w0.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function wne(t){return w0.call(t)==="[object Date]"}function Cne(t){return w0.call(t)==="[object File]"}function Sne(t){return w0.call(t)==="[object Blob]"}function FH(t){return w0.call(t)==="[object Function]"}function Bne(t){return LH(t)&&FH(t.pipe)}function Ene(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function Tne(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Ine(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function oF(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),sF(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function i6(){var t={};function e(s,o){J2(t[o])&&J2(s)?t[o]=i6(t[o],s):J2(s)?t[o]=i6({},s):sF(s)?t[o]=s.slice():t[o]=s}for(var r=0,n=arguments.length;r<n;r++)oF(arguments[r],e);return t}function Lne(t,e,r){return oF(e,function(s,o){r&&typeof s=="function"?t[o]=mne(s,r):t[o]=s}),t}function Fne(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var yd={isArray:sF,isArrayBuffer:yne,isBuffer:gne,isFormData:vne,isArrayBufferView:xne,isString:_ne,isNumber:bne,isObject:LH,isPlainObject:J2,isUndefined:n6,isDate:wne,isFile:Cne,isBlob:Sne,isFunction:FH,isStream:Bne,isURLSearchParams:Ene,isStandardBrowserEnv:Ine,forEach:oF,merge:i6,extend:Lne,trim:Tne,stripBOM:Fne},J0=yd;function DD(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var NH=function(e,r,n){if(!r)return e;var s;if(n)s=n(r);else if(J0.isURLSearchParams(r))s=r.toString();else{var o=[];J0.forEach(r,function(i,A){i===null||typeof i>"u"||(J0.isArray(i)?A=A+"[]":i=[i],J0.forEach(i,function(C){J0.isDate(C)?C=C.toISOString():J0.isObject(C)&&(C=JSON.stringify(C)),o.push(DD(A)+"="+DD(C))}))}),s=o.join("&")}if(s){var c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},Nne=yd;function sC(){this.handlers=[]}sC.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};sC.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};sC.prototype.forEach=function(e){Nne.forEach(this.handlers,function(n){n!==null&&e(n)})};var Pne=sC,Mne=yd,jne=function(e,r){Mne.forEach(e,function(s,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=s,delete e[o])})},PH=function(e,r,n,s,o){return e.config=r,n&&(e.code=n),e.request=s,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},cE,OD;function MH(){if(OD)return cE;OD=1;var t=PH;return cE=function(r,n,s,o,c){var u=new Error(r);return t(u,n,s,o,c)},cE}var uE,RD;function kne(){if(RD)return uE;RD=1;var t=MH();return uE=function(r,n,s){var o=s.config.validateStatus;!s.status||!o||o(s.status)?r(s):n(t("Request failed with status code "+s.status,s.config,null,s.request,s))},uE}var hE,UD;function Dne(){if(UD)return hE;UD=1;var t=yd;return hE=t.isStandardBrowserEnv()?function(){return{write:function(n,s,o,c,u,i){var A=[];A.push(n+"="+encodeURIComponent(s)),t.isNumber(o)&&A.push("expires="+new Date(o).toGMTString()),t.isString(c)&&A.push("path="+c),t.isString(u)&&A.push("domain="+u),i===!0&&A.push("secure"),document.cookie=A.join("; ")},read:function(n){var s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),hE}var dE,zD;function One(){return zD||(zD=1,dE=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),dE}var fE,QD;function Rne(){return QD||(QD=1,fE=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),fE}var pE,HD;function Une(){if(HD)return pE;HD=1;var t=One(),e=Rne();return pE=function(n,s){return n&&!t(s)?e(n,s):s},pE}var AE,VD;function zne(){if(VD)return AE;VD=1;var t=yd,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return AE=function(n){var s={},o,c,u;return n&&t.forEach(n.split(`
`),function(A){if(u=A.indexOf(":"),o=t.trim(A.substr(0,u)).toLowerCase(),c=t.trim(A.substr(u+1)),o){if(s[o]&&e.indexOf(o)>=0)return;o==="set-cookie"?s[o]=(s[o]?s[o]:[]).concat([c]):s[o]=s[o]?s[o]+", "+c:c}}),s},AE}var mE,GD;function Qne(){if(GD)return mE;GD=1;var t=yd;return mE=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),s;function o(c){var u=c;return r&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=o(window.location.href),function(u){var i=t.isString(u)?o(u):u;return i.protocol===s.protocol&&i.host===s.host}}():function(){return function(){return!0}}(),mE}var gE,qD;function $D(){if(qD)return gE;qD=1;var t=yd,e=kne(),r=Dne(),n=NH,s=Une(),o=zne(),c=Qne(),u=MH();return gE=function(A){return new Promise(function(C,B){var S=A.data,P=A.headers,j=A.responseType;t.isFormData(S)&&delete P["Content-Type"];var R=new XMLHttpRequest;if(A.auth){var N=A.auth.username||"",U=A.auth.password?unescape(encodeURIComponent(A.auth.password)):"";P.Authorization="Basic "+btoa(N+":"+U)}var $=s(A.baseURL,A.url);R.open(A.method.toUpperCase(),n($,A.params,A.paramsSerializer),!0),R.timeout=A.timeout;function J(){if(R){var ue="getAllResponseHeaders"in R?o(R.getAllResponseHeaders()):null,oe=!j||j==="text"||j==="json"?R.responseText:R.response,K={data:oe,status:R.status,statusText:R.statusText,headers:ue,config:A,request:R};e(C,B,K),R=null}}if("onloadend"in R?R.onloadend=J:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(J)},R.onabort=function(){R&&(B(u("Request aborted",A,"ECONNABORTED",R)),R=null)},R.onerror=function(){B(u("Network Error",A,null,R)),R=null},R.ontimeout=function(){var oe="timeout of "+A.timeout+"ms exceeded";A.timeoutErrorMessage&&(oe=A.timeoutErrorMessage),B(u(oe,A,A.transitional&&A.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",R)),R=null},t.isStandardBrowserEnv()){var te=(A.withCredentials||c($))&&A.xsrfCookieName?r.read(A.xsrfCookieName):void 0;te&&(P[A.xsrfHeaderName]=te)}"setRequestHeader"in R&&t.forEach(P,function(oe,K){typeof S>"u"&&K.toLowerCase()==="content-type"?delete P[K]:R.setRequestHeader(K,oe)}),t.isUndefined(A.withCredentials)||(R.withCredentials=!!A.withCredentials),j&&j!=="json"&&(R.responseType=A.responseType),typeof A.onDownloadProgress=="function"&&R.addEventListener("progress",A.onDownloadProgress),typeof A.onUploadProgress=="function"&&R.upload&&R.upload.addEventListener("progress",A.onUploadProgress),A.cancelToken&&A.cancelToken.promise.then(function(oe){R&&(R.abort(),B(oe),R=null)}),S||(S=null),R.send(S)})},gE}var fu=yd,WD=jne,Hne=PH,Vne={"Content-Type":"application/x-www-form-urlencoded"};function KD(t,e){!fu.isUndefined(t)&&fu.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Gne(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=$D()),t}function qne(t,e,r){if(fu.isString(t))try{return(e||JSON.parse)(t),fu.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}var oC={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Gne(),transformRequest:[function(e,r){return WD(r,"Accept"),WD(r,"Content-Type"),fu.isFormData(e)||fu.isArrayBuffer(e)||fu.isBuffer(e)||fu.isStream(e)||fu.isFile(e)||fu.isBlob(e)?e:fu.isArrayBufferView(e)?e.buffer:fu.isURLSearchParams(e)?(KD(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):fu.isObject(e)||r&&r["Content-Type"]==="application/json"?(KD(r,"application/json"),qne(e)):e}],transformResponse:[function(e){var r=this.transitional,n=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||s&&fu.isString(e)&&e.length)try{return JSON.parse(e)}catch(c){if(o)throw c.name==="SyntaxError"?Hne(c,this,"E_JSON_PARSE"):c}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};oC.headers={common:{Accept:"application/json, text/plain, */*"}};fu.forEach(["delete","get","head"],function(e){oC.headers[e]={}});fu.forEach(["post","put","patch"],function(e){oC.headers[e]=fu.merge(Vne)});var aF=oC,$ne=yd,Wne=aF,Kne=function(e,r,n){var s=this||Wne;return $ne.forEach(n,function(c){e=c.call(s,e,r)}),e},yE,XD;function jH(){return XD||(XD=1,yE=function(e){return!!(e&&e.__CANCEL__)}),yE}var YD=yd,vE=Kne,Xne=jH(),Yne=aF;function xE(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Zne=function(e){xE(e),e.headers=e.headers||{},e.data=vE.call(e,e.data,e.headers,e.transformRequest),e.headers=YD.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),YD.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var r=e.adapter||Yne.adapter;return r(e).then(function(s){return xE(e),s.data=vE.call(e,s.data,s.headers,e.transformResponse),s},function(s){return Xne(s)||(xE(e),s&&s.response&&(s.response.data=vE.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},Pu=yd,kH=function(e,r){r=r||{};var n={},s=["url","method","data"],o=["headers","auth","proxy","params"],c=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function i(B,S){return Pu.isPlainObject(B)&&Pu.isPlainObject(S)?Pu.merge(B,S):Pu.isPlainObject(S)?Pu.merge({},S):Pu.isArray(S)?S.slice():S}function A(B){Pu.isUndefined(r[B])?Pu.isUndefined(e[B])||(n[B]=i(void 0,e[B])):n[B]=i(e[B],r[B])}Pu.forEach(s,function(S){Pu.isUndefined(r[S])||(n[S]=i(void 0,r[S]))}),Pu.forEach(o,A),Pu.forEach(c,function(S){Pu.isUndefined(r[S])?Pu.isUndefined(e[S])||(n[S]=i(void 0,e[S])):n[S]=i(void 0,r[S])}),Pu.forEach(u,function(S){S in r?n[S]=i(e[S],r[S]):S in e&&(n[S]=i(void 0,e[S]))});var g=s.concat(o).concat(c).concat(u),C=Object.keys(e).concat(Object.keys(r)).filter(function(S){return g.indexOf(S)===-1});return Pu.forEach(C,A),n};const Jne="axios",eie="0.21.4",tie="Promise based HTTP client for the browser and node.js",rie="index.js",nie={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},iie={type:"git",url:"https://github.com/axios/axios.git"},sie=["xhr","http","ajax","promise","node"],oie="Matt Zabriskie",aie="MIT",lie={url:"https://github.com/axios/axios/issues"},cie="https://axios-http.com",uie={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},hie={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},die="dist/axios.min.js",fie="dist/axios.min.js",pie="./index.d.ts",Aie={"follow-redirects":"^1.14.0"},mie=[{path:"./dist/axios.min.js",threshold:"5kB"}],gie={name:Jne,version:eie,description:tie,main:rie,scripts:nie,repository:iie,keywords:sie,author:oie,license:aie,bugs:lie,homepage:cie,devDependencies:uie,browser:hie,jsdelivr:die,unpkg:fie,typings:pie,dependencies:Aie,bundlesize:mie};var DH=gie,lF={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){lF[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var ZD={},yie=DH.version.split(".");function OH(t,e){for(var r=e?e.split("."):yie,n=t.split("."),s=0;s<3;s++){if(r[s]>n[s])return!0;if(r[s]<n[s])return!1}return!1}lF.transitional=function(e,r,n){var s=r&&OH(r);function o(c,u){return"[Axios v"+DH.version+"] Transitional option '"+c+"'"+u+(n?". "+n:"")}return function(c,u,i){if(e===!1)throw new Error(o(u," has been removed in "+r));return s&&!ZD[u]&&(ZD[u]=!0,console.warn(o(u," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(c,u,i):!0}};function vie(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),s=n.length;s-- >0;){var o=n[s],c=e[o];if(c){var u=t[o],i=u===void 0||c(u,o,t);if(i!==!0)throw new TypeError("option "+o+" must be "+i);continue}if(r!==!0)throw Error("Unknown option "+o)}}var xie={isOlderVersion:OH,assertOptions:vie,validators:lF},RH=yd,_ie=NH,JD=Pne,eO=Zne,aC=kH,UH=xie,ey=UH.validators;function K_(t){this.defaults=t,this.interceptors={request:new JD,response:new JD}}K_.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=aC(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&UH.assertOptions(r,{silentJSONParsing:ey.transitional(ey.boolean,"1.0.0"),forcedJSONParsing:ey.transitional(ey.boolean,"1.0.0"),clarifyTimeoutError:ey.transitional(ey.boolean,"1.0.0")},!1);var n=[],s=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(e)===!1||(s=s&&B.synchronous,n.unshift(B.fulfilled,B.rejected))});var o=[];this.interceptors.response.forEach(function(B){o.push(B.fulfilled,B.rejected)});var c;if(!s){var u=[eO,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(o),c=Promise.resolve(e);u.length;)c=c.then(u.shift(),u.shift());return c}for(var i=e;n.length;){var A=n.shift(),g=n.shift();try{i=A(i)}catch(C){g(C);break}}try{c=eO(i)}catch(C){return Promise.reject(C)}for(;o.length;)c=c.then(o.shift(),o.shift());return c};K_.prototype.getUri=function(e){return e=aC(this.defaults,e),_ie(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};RH.forEach(["delete","get","head","options"],function(e){K_.prototype[e]=function(r,n){return this.request(aC(n||{},{method:e,url:r,data:(n||{}).data}))}});RH.forEach(["post","put","patch"],function(e){K_.prototype[e]=function(r,n,s){return this.request(aC(s||{},{method:e,url:r,data:n}))}});var bie=K_,_E,tO;function zH(){if(tO)return _E;tO=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,_E=t,_E}var bE,rO;function wie(){if(rO)return bE;rO=1;var t=zH();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(c){n=c});var s=this;r(function(c){s.reason||(s.reason=new t(c),n(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var n,s=new e(function(c){n=c});return{token:s,cancel:n}},bE=e,bE}var wE,nO;function Cie(){return nO||(nO=1,wE=function(e){return function(n){return e.apply(null,n)}}),wE}var CE,iO;function Sie(){return iO||(iO=1,CE=function(e){return typeof e=="object"&&e.isAxiosError===!0}),CE}var sO=yd,Bie=IH,e5=bie,Eie=kH,Tie=aF;function QH(t){var e=new e5(t),r=Bie(e5.prototype.request,e);return sO.extend(r,e5.prototype,e),sO.extend(r,e),r}var Of=QH(Tie);Of.Axios=e5;Of.create=function(e){return QH(Eie(Of.defaults,e))};Of.Cancel=zH();Of.CancelToken=wie();Of.isCancel=jH();Of.all=function(e){return Promise.all(e)};Of.spread=Cie();Of.isAxiosError=Sie();iF.exports=Of;iF.exports.default=Of;var Iie=iF.exports,Lie=Iie;const Nm=Sp(Lie),Mr=Nm.create({baseURL:"/",headers:{"Content-Type":"application/json"}});Mr.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e?t.headers.Authorization=`Bearer ${e}`:delete t.headers.Authorization,t},t=>Promise.reject(t));const Fie=({initialRegion:t,initialCrop:e})=>{const[r,n]=ve.useState(t),[s,o]=ve.useState(e),[c,u]=ve.useState({}),[i,A]=ve.useState(new Date),[g,C]=ve.useState(""),[B,S]=ve.useState(""),[P,j]=ve.useState(!1),[R,N]=ve.useState(null);ve.useEffect(()=>{},[]);const U=async()=>{j(!0),N(null);try{const J=await Mr.get("/weather",{params:{region_id:r,crop_id:s,latitude:g,longitude:B,time:i.toISOString()}});console.log(J),u(J.data.data||{})}catch{N("Failed to fetch weather data")}finally{j(!1)}},$=()=>{U()};return m.jsx("div",{className:"w-full max-w-7xl mx-auto rounded-xl overflow-hidden shadow-2xl bg-gradient-to-r from-blue-50 via-blue-100 to-blue-50 border border-blue-300 mt-4 mb-8 p-8",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[m.jsxs("div",{className:"md:w-2/5 p-6 bg-white rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300",children:[m.jsx("h1",{className:"text-4xl font-extrabold text-blue-700 mb-4",children:r}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{htmlFor:"latitude",className:"text-gray-700 font-semibold w-1/3",children:"Latitude:"}),m.jsx("input",{id:"latitude",type:"text",value:g,onChange:J=>C(parseFloat(J.target.value)),placeholder:"Enter latitude",className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md text-lg bg-gradient-to-r from-white to-blue-50"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{htmlFor:"longitude",className:"text-gray-700 font-semibold w-1/3",children:"Longitude:"}),m.jsx("input",{id:"longitude",type:"text",value:B,onChange:J=>S(parseFloat(J.target.value)),placeholder:"Enter longitude",className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md text-lg bg-gradient-to-r from-white to-blue-50"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{htmlFor:"time",className:"text-gray-700 font-semibold w-1/3",children:"Time:"}),m.jsx("input",{type:"datetime-local",id:"time",name:"time",value:i.toISOString().slice(0,16),onChange:J=>A(new Date(J.target.value)),className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md text-lg bg-gradient-to-r from-white to-blue-50",required:!0})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("label",{htmlFor:"crop",className:"text-gray-700 font-semibold w-1/3",children:"Crop:"}),m.jsxs("select",{id:"crop",value:s,onChange:J=>o(J.target.value),className:"flex-1 p-3 border border-gray-300 rounded-lg shadow-md focus:border-blue-600 focus:ring focus:ring-blue-600 focus:ring-opacity-50 text-lg bg-gradient-to-r from-white to-blue-50",children:[m.jsx("option",{value:" ",children:"Select a Crop"}),m.jsx("option",{value:"Rice",children:"Rice"}),m.jsx("option",{value:"Coffee",children:"Coffee"}),m.jsx("option",{value:"Cocoa",children:"Cocoa"}),m.jsx("option",{value:"Maize",children:"Maize"}),m.jsx("option",{value:"Soybean",children:"Soybean"}),m.jsx("option",{value:"Sorghum",children:"Sorghum"}),m.jsx("option",{value:"Sunflower",children:"Sunflower"})]})]}),m.jsx("button",{onClick:$,className:"w-full py-2 bg-blue-700 text-white rounded-lg shadow-md hover:bg-blue-800 transition duration-300 mt-4 transform hover:translate-y-1 hover:shadow-xl",children:"Fetch Data"})]}),m.jsxs("div",{className:"text-gray-800 text-lg mt-4",children:[m.jsxs("p",{className:"mb-2",children:[m.jsx("strong",{className:"text-gray-600",children:"Crop:"})," ",s]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-gray-600",children:"Farm Name:"})," ",c.farmName||"Adhil Morgan"]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-gray-600",children:"Latitude:"})," ",c.latitude||"N/A"]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-gray-600",children:"Longitude:"})," ",c.longitude||"N/A"]}),m.jsxs("p",{children:[m.jsx("strong",{className:"text-gray-600",children:"Time:"})," ",c.timestamp||"N/A"]})]})]}),m.jsx("div",{className:"md:w-3/5 p-6 bg-white rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300",children:P?m.jsx("div",{className:"text-center text-gray-500",children:"Loading..."}):R?m.jsx("div",{className:"text-center text-red-500",children:R}):m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsx("img",{className:"w-full h-40 object-cover rounded-lg shadow-md mb-4",src:c.imageUrl||"/default-image.jpg",alt:`Photo of ${r}`}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(cne,{className:"text-red-500 mr-2 text-xl"}),m.jsx("div",{className:"font-semibold w-1/2",children:"Temperature:"}),m.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[" ",c.average_temperature?c.average_temperature.toFixed(2):"N/A"," C"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(kD,{className:"text-blue-500 mr-2 text-xl"}),m.jsx("div",{className:"font-semibold w-1/2",children:"Humidity:"}),m.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[c.humidity?c.humidity.toFixed(2):"N/A"," %"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(lne,{className:"text-yellow-500 mr-2 text-xl"}),m.jsx("div",{className:"font-semibold w-1/2",children:"Solar Radiation:"}),m.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[c.solarRadiation?c.solarRadiation.toFixed(2):"N/A"," W/m"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(Ane,{className:"text-gray-600 mr-2 text-xl"}),m.jsx("div",{className:"font-semibold w-1/2",children:"Wind Speed:"}),m.jsxs("div",{className:"text-gray-800 text-lg w-1/2 text-right",children:[c.windSpeed?c.windSpeed.toFixed(2):"N/A"," m/s"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(kD,{className:"text-green-500 mr-3 text-2xl"}),m.jsx("div",{className:"font-semibold w-1/2",children:"Precipitation:"}),m.jsxs("div",{className:"text-gray-800 text-xl w-1/2 text-right",children:[c.precipitation?c.precipitation.toFixed(2):"N/A"," Pa"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(jD,{className:"text-purple-500 mr-2 text-xl"}),m.jsx("div",{className:"font-semibold w-1/2",children:"ET0 :"}),m.jsxs("div",{className:"text-gray-800 text-xl w-1/2 text-right",children:[c.ET0?c.ET0.toFixed(2):"N/A"," mm/day"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(jD,{className:"text-purple-500 mr-2 text-xl"}),m.jsx("div",{className:"font-semibold w-1/2",children:"ETc :"}),m.jsxs("div",{className:"text-gray-800 text-xl w-1/2 text-right",children:[c.ETc?c.ETc.toFixed(2):"N/A"," mm/day"]})]})]})]})})]})})};/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function X_(t){return t+.5|0}const hm=(t,e,r)=>Math.max(Math.min(t,r),e);function ex(t){return hm(X_(t*2.55),0,255)}function Pm(t){return hm(X_(t*255),0,255)}function Xp(t){return hm(X_(t/2.55)/100,0,1)}function oO(t){return hm(X_(t*100),0,100)}const Rd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},s6=[..."0123456789ABCDEF"],Nie=t=>s6[t&15],Pie=t=>s6[(t&240)>>4]+s6[t&15],kw=t=>(t&240)>>4===(t&15),Mie=t=>kw(t.r)&&kw(t.g)&&kw(t.b)&&kw(t.a);function jie(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Rd[t[1]]*17,g:255&Rd[t[2]]*17,b:255&Rd[t[3]]*17,a:e===5?Rd[t[4]]*17:255}:(e===7||e===9)&&(r={r:Rd[t[1]]<<4|Rd[t[2]],g:Rd[t[3]]<<4|Rd[t[4]],b:Rd[t[5]]<<4|Rd[t[6]],a:e===9?Rd[t[7]]<<4|Rd[t[8]]:255})),r}const kie=(t,e)=>t<255?e(t):"";function Die(t){var e=Mie(t)?Nie:Pie;return t?"#"+e(t.r)+e(t.g)+e(t.b)+kie(t.a,e):void 0}const Oie=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function HH(t,e,r){const n=e*Math.min(r,1-r),s=(o,c=(o+t/30)%12)=>r-n*Math.max(Math.min(c-3,9-c,1),-1);return[s(0),s(8),s(4)]}function Rie(t,e,r){const n=(s,o=(s+t/60)%6)=>r-r*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Uie(t,e,r){const n=HH(t,1,.5);let s;for(e+r>1&&(s=1/(e+r),e*=s,r*=s),s=0;s<3;s++)n[s]*=1-e-r,n[s]+=e;return n}function zie(t,e,r,n,s){return t===s?(e-r)/n+(e<r?6:0):e===s?(r-t)/n+2:(t-e)/n+4}function cF(t){const r=t.r/255,n=t.g/255,s=t.b/255,o=Math.max(r,n,s),c=Math.min(r,n,s),u=(o+c)/2;let i,A,g;return o!==c&&(g=o-c,A=u>.5?g/(2-o-c):g/(o+c),i=zie(r,n,s,g,o),i=i*60+.5),[i|0,A||0,u]}function uF(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Pm)}function hF(t,e,r){return uF(HH,t,e,r)}function Qie(t,e,r){return uF(Uie,t,e,r)}function Hie(t,e,r){return uF(Rie,t,e,r)}function VH(t){return(t%360+360)%360}function Vie(t){const e=Oie.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?ex(+e[5]):Pm(+e[5]));const s=VH(+e[2]),o=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?n=Qie(s,o,c):e[1]==="hsv"?n=Hie(s,o,c):n=hF(s,o,c),{r:n[0],g:n[1],b:n[2],a:r}}function Gie(t,e){var r=cF(t);r[0]=VH(r[0]+e),r=hF(r),t.r=r[0],t.g=r[1],t.b=r[2]}function qie(t){if(!t)return;const e=cF(t),r=e[0],n=oO(e[1]),s=oO(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${s}%, ${Xp(t.a)})`:`hsl(${r}, ${n}%, ${s}%)`}const aO={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lO={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $ie(){const t={},e=Object.keys(lO),r=Object.keys(aO);let n,s,o,c,u;for(n=0;n<e.length;n++){for(c=u=e[n],s=0;s<r.length;s++)o=r[s],u=u.replace(o,aO[o]);o=parseInt(lO[c],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}let Dw;function Wie(t){Dw||(Dw=$ie(),Dw.transparent=[0,0,0,0]);const e=Dw[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Kie=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xie(t){const e=Kie.exec(t);let r=255,n,s,o;if(e){if(e[7]!==n){const c=+e[7];r=e[8]?ex(c):hm(c*255,0,255)}return n=+e[1],s=+e[3],o=+e[5],n=255&(e[2]?ex(n):hm(n,0,255)),s=255&(e[4]?ex(s):hm(s,0,255)),o=255&(e[6]?ex(o):hm(o,0,255)),{r:n,g:s,b:o,a:r}}}function Yie(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xp(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const SE=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ty=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Zie(t,e,r){const n=ty(Xp(t.r)),s=ty(Xp(t.g)),o=ty(Xp(t.b));return{r:Pm(SE(n+r*(ty(Xp(e.r))-n))),g:Pm(SE(s+r*(ty(Xp(e.g))-s))),b:Pm(SE(o+r*(ty(Xp(e.b))-o))),a:t.a+r*(e.a-t.a)}}function Ow(t,e,r){if(t){let n=cF(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=hF(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function GH(t,e){return t&&Object.assign(e||{},t)}function cO(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Pm(t[3]))):(e=GH(t,{r:0,g:0,b:0,a:1}),e.a=Pm(e.a)),e}function Jie(t){return t.charAt(0)==="r"?Xie(t):Vie(t)}class x_{constructor(e){if(e instanceof x_)return e;const r=typeof e;let n;r==="object"?n=cO(e):r==="string"&&(n=jie(e)||Wie(e)||Jie(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=GH(this._rgb);return e&&(e.a=Xp(e.a)),e}set rgb(e){this._rgb=cO(e)}rgbString(){return this._valid?Yie(this._rgb):void 0}hexString(){return this._valid?Die(this._rgb):void 0}hslString(){return this._valid?qie(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,s=e.rgb;let o;const c=r===o?.5:r,u=2*c-1,i=n.a-s.a,A=((u*i===-1?u:(u+i)/(1+u*i))+1)/2;o=1-A,n.r=255&A*n.r+o*s.r+.5,n.g=255&A*n.g+o*s.g+.5,n.b=255&A*n.b+o*s.b+.5,n.a=c*n.a+(1-c)*s.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=Zie(this._rgb,e._rgb,r)),this}clone(){return new x_(this.rgb)}alpha(e){return this._rgb.a=Pm(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=X_(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ow(this._rgb,2,e),this}darken(e){return Ow(this._rgb,2,-e),this}saturate(e){return Ow(this._rgb,1,e),this}desaturate(e){return Ow(this._rgb,1,-e),this}rotate(e){return Gie(this._rgb,e),this}}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function zp(){}const ese=(()=>{let t=0;return()=>t++})();function Go(t){return t===null||typeof t>"u"}function ha(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Rs(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Cl(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ad(t,e){return Cl(t)?t:e}function gs(t,e){return typeof t>"u"?e:t}const tse=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,qH=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function xa(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function _a(t,e,r,n){let s,o,c;if(ha(t))for(o=t.length,s=0;s<o;s++)e.call(r,t[s],s);else if(Rs(t))for(c=Object.keys(t),o=c.length,s=0;s<o;s++)e.call(r,t[c[s]],c[s])}function X5(t,e){let r,n,s,o;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(s=t[r],o=e[r],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Y5(t){if(ha(t))return t.map(Y5);if(Rs(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let s=0;for(;s<n;++s)e[r[s]]=Y5(t[r[s]]);return e}return t}function $H(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function rse(t,e,r,n){if(!$H(t))return;const s=e[t],o=r[t];Rs(s)&&Rs(o)?__(s,o,n):e[t]=Y5(o)}function __(t,e,r){const n=ha(e)?e:[e],s=n.length;if(!Rs(t))return t;r=r||{};const o=r.merger||rse;let c;for(let u=0;u<s;++u){if(c=n[u],!Rs(c))continue;const i=Object.keys(c);for(let A=0,g=i.length;A<g;++A)o(i[A],t,c,r)}return t}function Bx(t,e){return __(t,e,{merger:nse})}function nse(t,e,r){if(!$H(t))return;const n=e[t],s=r[t];Rs(n)&&Rs(s)?Bx(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Y5(s))}const uO={"":t=>t,x:t=>t.x,y:t=>t.y};function ise(t){const e=t.split("."),r=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function sse(t){const e=ise(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function Qm(t,e){return(uO[e]||(uO[e]=sse(e)))(t)}function dF(t){return t.charAt(0).toUpperCase()+t.slice(1)}const $h=t=>typeof t<"u",qh=t=>typeof t=="function",hO=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function ose(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Co=Math.PI,za=2*Co,ase=za+Co,Z5=Number.POSITIVE_INFINITY,fF=Co/180,ml=Co/2,Vd=Co/4,J5=Co*2/3,dm=Math.log10,yp=Math.sign;function Ex(t,e,r){return Math.abs(t-e)<r}function dO(t){const e=Math.round(t);t=Ex(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(dm(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function lse(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((s,o)=>s-o).pop(),e}function Hm(t){return!isNaN(parseFloat(t))&&isFinite(t)}function cse(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function WH(t,e,r){let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n][r],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Ic(t){return t*(Co/180)}function lC(t){return t*(180/Co)}function fO(t){if(!Cl(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function e4(t,e){const r=e.x-t.x,n=e.y-t.y,s=Math.sqrt(r*r+n*n);let o=Math.atan2(n,r);return o<-.5*Co&&(o+=za),{angle:o,distance:s}}function u1(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function use(t,e){return(t-e+ase)%za-Co}function cd(t){return(t%za+za)%za}function b_(t,e,r,n){const s=cd(t),o=cd(e),c=cd(r),u=cd(o-s),i=cd(c-s),A=cd(s-o),g=cd(s-c);return s===o||s===c||n&&o===c||u>i&&A<g}function tu(t,e,r){return Math.max(e,Math.min(r,t))}function hse(t){return tu(t,-32768,32767)}function eA(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function pF(t,e,r){r=r||(c=>t[c]<e);let n=t.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,r(o)?s=o:n=o;return{lo:s,hi:n}}const tA=(t,e,r,n)=>pF(t,r,n?s=>{const o=t[s][e];return o<r||o===r&&t[s+1][e]===r}:s=>t[s][e]<r),dse=(t,e,r)=>pF(t,r,n=>t[n][e]>=r);function fse(t,e,r){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>r;)s--;return n>0||s<t.length?t.slice(n,s):t}const KH=["push","pop","shift","splice","unshift"];function pse(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),KH.forEach(r=>{const n="_onData"+dF(r),s=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...o){const c=s.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[n]=="function"&&u[n](...o)}),c}})})}function pO(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(KH.forEach(o=>{delete t[o]}),delete t._chartjs)}function XH(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const YH=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ZH(t,e){let r=[],n=!1;return function(...s){r=s,n||(n=!0,YH.call(window,()=>{n=!1,t.apply(e,r)}))}}function Ase(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const AF=t=>t==="start"?"left":t==="end"?"right":"center",Vu=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,mse=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function JH(t,e,r){const n=e.length;let s=0,o=n;if(t._sorted){const{iScale:c,_parsed:u}=t,i=c.axis,{min:A,max:g,minDefined:C,maxDefined:B}=c.getUserBounds();C&&(s=tu(Math.min(tA(u,i,A).lo,r?n:tA(e,i,c.getPixelForValue(A)).lo),0,n-1)),B?o=tu(Math.max(tA(u,c.axis,g,!0).hi+1,r?0:tA(e,i,c.getPixelForValue(g),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function eV(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=s,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,s),o}const Rw=t=>t===0||t===1,AO=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*za/r)),mO=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*za/r)+1,Tx={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ml)+1,easeOutSine:t=>Math.sin(t*ml),easeInOutSine:t=>-.5*(Math.cos(Co*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Rw(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Rw(t)?t:AO(t,.075,.3),easeOutElastic:t=>Rw(t)?t:mO(t,.075,.3),easeInOutElastic(t){return Rw(t)?t:t<.5?.5*AO(t*2,.1125,.45):.5+.5*mO(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Tx.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Tx.easeInBounce(t*2)*.5:Tx.easeOutBounce(t*2-1)*.5+.5};function mF(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function gO(t){return mF(t)?t:new x_(t)}function BE(t){return mF(t)?t:new x_(t).saturate(.5).darken(.1).hexString()}const gse=["x","y","borderWidth","radius","tension"],yse=["color","borderColor","backgroundColor"];function vse(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:yse},numbers:{type:"number",properties:gse}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xse(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const yO=new Map;function _se(t,e){e=e||{};const r=t+JSON.stringify(e);let n=yO.get(r);return n||(n=new Intl.NumberFormat(t,e),yO.set(r,n)),n}function Y_(t,e,r){return _se(e,r).format(t)}const tV={values(t){return ha(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let s,o=t;if(r.length>1){const A=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(A<1e-4||A>1e15)&&(s="scientific"),o=bse(t,r)}const c=dm(Math.abs(o)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),i={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(i,this.options.ticks.format),Y_(t,n,i)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(dm(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?tV.numeric.call(this,t,e,r):""}};function bse(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var cC={formatters:tV};function wse(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cC.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const m0=Object.create(null),o6=Object.create(null);function Ix(t,e){if(!e)return t;const r=e.split(".");for(let n=0,s=r.length;n<s;++n){const o=r[n];t=t[o]||(t[o]=Object.create(null))}return t}function EE(t,e,r){return typeof e=="string"?__(Ix(t,e),r):__(Ix(t,""),e)}class Cse{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>BE(s.backgroundColor),this.hoverBorderColor=(n,s)=>BE(s.borderColor),this.hoverColor=(n,s)=>BE(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return EE(this,e,r)}get(e){return Ix(this,e)}describe(e,r){return EE(o6,e,r)}override(e,r){return EE(m0,e,r)}route(e,r,n,s){const o=Ix(this,e),c=Ix(this,n),u="_"+r;Object.defineProperties(o,{[u]:{value:o[r],writable:!0},[r]:{enumerable:!0,get(){const i=this[u],A=c[s];return Rs(i)?Object.assign({},A,i):gs(i,A)},set(i){this[u]=i}}})}apply(e){e.forEach(r=>r(this))}}var gl=new Cse({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[vse,xse,wse]);function Sse(t){return!t||Go(t.size)||Go(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function t4(t,e,r,n,s){let o=e[s];return o||(o=e[s]=t.measureText(s).width,r.push(s)),o>n&&(n=o),n}function Bse(t,e,r,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let c=0;const u=r.length;let i,A,g,C,B;for(i=0;i<u;i++)if(C=r[i],C!=null&&!ha(C))c=t4(t,s,o,c,C);else if(ha(C))for(A=0,g=C.length;A<g;A++)B=C[A],B!=null&&!ha(B)&&(c=t4(t,s,o,c,B));t.restore();const S=o.length/2;if(S>r.length){for(i=0;i<S;i++)delete s[o[i]];o.splice(0,S)}return c}function _g(t,e,r){const n=t.currentDevicePixelRatio,s=r!==0?Math.max(r/2,.5):0;return Math.round((e-s)*n)/n+s}function vO(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function a6(t,e,r,n){rV(t,e,r,n,null)}function rV(t,e,r,n,s){let o,c,u,i,A,g,C,B;const S=e.pointStyle,P=e.rotation,j=e.radius;let R=(P||0)*fF;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(R),t.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),t.restore();return}if(!(isNaN(j)||j<=0)){switch(t.beginPath(),S){default:s?t.ellipse(r,n,s/2,j,0,0,za):t.arc(r,n,j,0,za),t.closePath();break;case"triangle":g=s?s/2:j,t.moveTo(r+Math.sin(R)*g,n-Math.cos(R)*j),R+=J5,t.lineTo(r+Math.sin(R)*g,n-Math.cos(R)*j),R+=J5,t.lineTo(r+Math.sin(R)*g,n-Math.cos(R)*j),t.closePath();break;case"rectRounded":A=j*.516,i=j-A,c=Math.cos(R+Vd)*i,C=Math.cos(R+Vd)*(s?s/2-A:i),u=Math.sin(R+Vd)*i,B=Math.sin(R+Vd)*(s?s/2-A:i),t.arc(r-C,n-u,A,R-Co,R-ml),t.arc(r+B,n-c,A,R-ml,R),t.arc(r+C,n+u,A,R,R+ml),t.arc(r-B,n+c,A,R+ml,R+Co),t.closePath();break;case"rect":if(!P){i=Math.SQRT1_2*j,g=s?s/2:i,t.rect(r-g,n-i,2*g,2*i);break}R+=Vd;case"rectRot":C=Math.cos(R)*(s?s/2:j),c=Math.cos(R)*j,u=Math.sin(R)*j,B=Math.sin(R)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+B,n-c),t.lineTo(r+C,n+u),t.lineTo(r-B,n+c),t.closePath();break;case"crossRot":R+=Vd;case"cross":C=Math.cos(R)*(s?s/2:j),c=Math.cos(R)*j,u=Math.sin(R)*j,B=Math.sin(R)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+C,n+u),t.moveTo(r+B,n-c),t.lineTo(r-B,n+c);break;case"star":C=Math.cos(R)*(s?s/2:j),c=Math.cos(R)*j,u=Math.sin(R)*j,B=Math.sin(R)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+C,n+u),t.moveTo(r+B,n-c),t.lineTo(r-B,n+c),R+=Vd,C=Math.cos(R)*(s?s/2:j),c=Math.cos(R)*j,u=Math.sin(R)*j,B=Math.sin(R)*(s?s/2:j),t.moveTo(r-C,n-u),t.lineTo(r+C,n+u),t.moveTo(r+B,n-c),t.lineTo(r-B,n+c);break;case"line":c=s?s/2:Math.cos(R)*j,u=Math.sin(R)*j,t.moveTo(r-c,n-u),t.lineTo(r+c,n+u);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(R)*(s?s/2:j),n+Math.sin(R)*j);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function rA(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function Z_(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function J_(t){t.restore()}function Ese(t,e,r,n,s){if(!e)return t.lineTo(r.x,r.y);if(s==="middle"){const o=(e.x+r.x)/2;t.lineTo(o,e.y),t.lineTo(o,r.y)}else s==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function Tse(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function Ise(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Go(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Lse(t,e,r,n,s){if(s.strikethrough||s.underline){const o=t.measureText(n),c=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,i=r-o.actualBoundingBoxAscent,A=r+o.actualBoundingBoxDescent,g=s.strikethrough?(i+A)/2:A;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(c,g),t.lineTo(u,g),t.stroke()}}function Fse(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function g0(t,e,r,n,s,o={}){const c=ha(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let i,A;for(t.save(),t.font=s.string,Ise(t,o),i=0;i<c.length;++i)A=c[i],o.backdrop&&Fse(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Go(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(A,r,n,o.maxWidth)),t.fillText(A,r,n,o.maxWidth),Lse(t,r,n,A,o),n+=Number(s.lineHeight);t.restore()}function h1(t,e){const{x:r,y:n,w:s,h:o,radius:c}=e;t.arc(r+c.topLeft,n+c.topLeft,c.topLeft,1.5*Co,Co,!0),t.lineTo(r,n+o-c.bottomLeft),t.arc(r+c.bottomLeft,n+o-c.bottomLeft,c.bottomLeft,Co,ml,!0),t.lineTo(r+s-c.bottomRight,n+o),t.arc(r+s-c.bottomRight,n+o-c.bottomRight,c.bottomRight,ml,0,!0),t.lineTo(r+s,n+c.topRight),t.arc(r+s-c.topRight,n+c.topRight,c.topRight,0,-ml,!0),t.lineTo(r+c.topLeft,n)}const Nse=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Pse=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Mse(t,e){const r=(""+t).match(Nse);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const jse=t=>+t||0;function gF(t,e){const r={},n=Rs(e),s=n?Object.keys(e):e,o=Rs(t)?n?c=>gs(t[c],t[e[c]]):c=>t[c]:()=>t;for(const c of s)r[c]=jse(o(c));return r}function nV(t){return gF(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Mm(t){return gF(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Lc(t){const e=nV(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function rc(t,e){t=t||{},e=e||gl.font;let r=gs(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=gs(t.style,e.style);n&&!(""+n).match(Pse)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:gs(t.family,e.family),lineHeight:Mse(gs(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:gs(t.weight,e.weight),string:""};return s.string=Sse(s),s}function tx(t,e,r,n){let s,o,c;for(s=0,o=t.length;s<o;++s)if(c=t[s],c!==void 0&&c!==void 0)return c}function kse(t,e,r){const{min:n,max:s}=t,o=qH(e,(s-n)/2),c=(u,i)=>r&&u===0?0:u+i;return{min:c(n,-Math.abs(o)),max:c(s,o)}}function sg(t,e){return Object.assign(Object.create(t),e)}function yF(t,e=[""],r,n,s=()=>t[0]){const o=r||t;typeof n>"u"&&(n=aV("_fallback",t));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:s,override:u=>yF([u,...t],e,o,n)};return new Proxy(c,{deleteProperty(u,i){return delete u[i],delete u._keys,delete t[0][i],!0},get(u,i){return sV(u,i,()=>Vse(i,e,t,u))},getOwnPropertyDescriptor(u,i){return Reflect.getOwnPropertyDescriptor(u._scopes[0],i)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,i){return _O(u).includes(i)},ownKeys(u){return _O(u)},set(u,i,A){const g=u._storage||(u._storage=s());return u[i]=g[i]=A,delete u._keys,!0}})}function d1(t,e,r,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:iV(t,n),setContext:o=>d1(t,o,r,n),override:o=>d1(t.override(o),e,r,n)};return new Proxy(s,{deleteProperty(o,c){return delete o[c],delete t[c],!0},get(o,c,u){return sV(o,c,()=>Ose(o,c,u))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(t,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,c)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,c){return Reflect.has(t,c)},ownKeys(){return Reflect.ownKeys(t)},set(o,c,u){return t[c]=u,delete o[c],!0}})}function iV(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:r,indexable:n,isScriptable:qh(r)?r:()=>r,isIndexable:qh(n)?n:()=>n}}const Dse=(t,e)=>t?t+dF(e):e,vF=(t,e)=>Rs(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function sV(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function Ose(t,e,r){const{_proxy:n,_context:s,_subProxy:o,_descriptors:c}=t;let u=n[e];return qh(u)&&c.isScriptable(e)&&(u=Rse(e,u,t,r)),ha(u)&&u.length&&(u=Use(e,u,t,c.isIndexable)),vF(e,u)&&(u=d1(u,s,o&&o[e],c)),u}function Rse(t,e,r,n){const{_proxy:s,_context:o,_subProxy:c,_stack:u}=r;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let i=e(o,c||n);return u.delete(t),vF(t,i)&&(i=xF(s._scopes,s,t,i)),i}function Use(t,e,r,n){const{_proxy:s,_context:o,_subProxy:c,_descriptors:u}=r;if(typeof o.index<"u"&&n(t))return e[o.index%e.length];if(Rs(e[0])){const i=e,A=s._scopes.filter(g=>g!==i);e=[];for(const g of i){const C=xF(A,s,t,g);e.push(d1(C,o,c&&c[t],u))}}return e}function oV(t,e,r){return qh(t)?t(e,r):t}const zse=(t,e)=>t===!0?e:typeof t=="string"?Qm(e,t):void 0;function Qse(t,e,r,n,s){for(const o of e){const c=zse(r,o);if(c){t.add(c);const u=oV(c._fallback,r,s);if(typeof u<"u"&&u!==r&&u!==n)return u}else if(c===!1&&typeof n<"u"&&r!==n)return null}return!1}function xF(t,e,r,n){const s=e._rootScopes,o=oV(e._fallback,r,n),c=[...t,...s],u=new Set;u.add(n);let i=xO(u,c,r,o||r,n);return i===null||typeof o<"u"&&o!==r&&(i=xO(u,c,o,i,n),i===null)?!1:yF(Array.from(u),[""],s,o,()=>Hse(e,r,n))}function xO(t,e,r,n,s){for(;r;)r=Qse(t,e,r,n,s);return r}function Hse(t,e,r){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return ha(s)&&Rs(r)?r:s||{}}function Vse(t,e,r,n){let s;for(const o of e)if(s=aV(Dse(o,t),r),typeof s<"u")return vF(t,s)?xF(r,n,t,s):s}function aV(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function _O(t){let e=t._keys;return e||(e=t._keys=Gse(t._scopes)),e}function Gse(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function lV(t,e,r,n){const{iScale:s}=t,{key:o="r"}=this._parsing,c=new Array(n);let u,i,A,g;for(u=0,i=n;u<i;++u)A=u+r,g=e[A],c[u]={r:s.parse(Qm(g,o),A)};return c}const qse=Number.EPSILON||1e-14,f1=(t,e)=>e<t.length&&!t[e].skip&&t[e],cV=t=>t==="x"?"y":"x";function $se(t,e,r,n){const s=t.skip?e:t,o=e,c=r.skip?e:r,u=u1(o,s),i=u1(c,o);let A=u/(u+i),g=i/(u+i);A=isNaN(A)?0:A,g=isNaN(g)?0:g;const C=n*A,B=n*g;return{previous:{x:o.x-C*(c.x-s.x),y:o.y-C*(c.y-s.y)},next:{x:o.x+B*(c.x-s.x),y:o.y+B*(c.y-s.y)}}}function Wse(t,e,r){const n=t.length;let s,o,c,u,i,A=f1(t,0);for(let g=0;g<n-1;++g)if(i=A,A=f1(t,g+1),!(!i||!A)){if(Ex(e[g],0,qse)){r[g]=r[g+1]=0;continue}s=r[g]/e[g],o=r[g+1]/e[g],u=Math.pow(s,2)+Math.pow(o,2),!(u<=9)&&(c=3/Math.sqrt(u),r[g]=s*c*e[g],r[g+1]=o*c*e[g])}}function Kse(t,e,r="x"){const n=cV(r),s=t.length;let o,c,u,i=f1(t,0);for(let A=0;A<s;++A){if(c=u,u=i,i=f1(t,A+1),!u)continue;const g=u[r],C=u[n];c&&(o=(g-c[r])/3,u[`cp1${r}`]=g-o,u[`cp1${n}`]=C-o*e[A]),i&&(o=(i[r]-g)/3,u[`cp2${r}`]=g+o,u[`cp2${n}`]=C+o*e[A])}}function Xse(t,e="x"){const r=cV(e),n=t.length,s=Array(n).fill(0),o=Array(n);let c,u,i,A=f1(t,0);for(c=0;c<n;++c)if(u=i,i=A,A=f1(t,c+1),!!i){if(A){const g=A[e]-i[e];s[c]=g!==0?(A[r]-i[r])/g:0}o[c]=u?A?yp(s[c-1])!==yp(s[c])?0:(s[c-1]+s[c])/2:s[c-1]:s[c]}Wse(t,s,o),Kse(t,o,e)}function Uw(t,e,r){return Math.max(Math.min(t,r),e)}function Yse(t,e){let r,n,s,o,c,u=rA(t[0],e);for(r=0,n=t.length;r<n;++r)c=o,o=u,u=r<n-1&&rA(t[r+1],e),o&&(s=t[r],c&&(s.cp1x=Uw(s.cp1x,e.left,e.right),s.cp1y=Uw(s.cp1y,e.top,e.bottom)),u&&(s.cp2x=Uw(s.cp2x,e.left,e.right),s.cp2y=Uw(s.cp2y,e.top,e.bottom)))}function Zse(t,e,r,n,s){let o,c,u,i;if(e.spanGaps&&(t=t.filter(A=>!A.skip)),e.cubicInterpolationMode==="monotone")Xse(t,s);else{let A=n?t[t.length-1]:t[0];for(o=0,c=t.length;o<c;++o)u=t[o],i=$se(A,u,t[Math.min(o+1,c-(n?0:1))%c],e.tension),u.cp1x=i.previous.x,u.cp1y=i.previous.y,u.cp2x=i.next.x,u.cp2y=i.next.y,A=u}e.capBezierPoints&&Yse(t,r)}function _F(){return typeof window<"u"&&typeof document<"u"}function bF(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function r4(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const uC=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Jse(t,e){return uC(t).getPropertyValue(e)}const eoe=["top","right","bottom","left"];function Jg(t,e,r){const n={};r=r?"-"+r:"";for(let s=0;s<4;s++){const o=eoe[s];n[o]=parseFloat(t[e+"-"+o+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const toe=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function roe(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:s,offsetY:o}=n;let c=!1,u,i;if(toe(s,o,t.target))u=s,i=o;else{const A=e.getBoundingClientRect();u=n.clientX-A.left,i=n.clientY-A.top,c=!0}return{x:u,y:i,box:c}}function Fg(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,s=uC(r),o=s.boxSizing==="border-box",c=Jg(s,"padding"),u=Jg(s,"border","width"),{x:i,y:A,box:g}=roe(t,r),C=c.left+(g&&u.left),B=c.top+(g&&u.top);let{width:S,height:P}=e;return o&&(S-=c.width+u.width,P-=c.height+u.height),{x:Math.round((i-C)/S*r.width/n),y:Math.round((A-B)/P*r.height/n)}}function noe(t,e,r){let n,s;if(e===void 0||r===void 0){const o=t&&bF(t);if(!o)e=t.clientWidth,r=t.clientHeight;else{const c=o.getBoundingClientRect(),u=uC(o),i=Jg(u,"border","width"),A=Jg(u,"padding");e=c.width-A.width-i.width,r=c.height-A.height-i.height,n=r4(u.maxWidth,o,"clientWidth"),s=r4(u.maxHeight,o,"clientHeight")}}return{width:e,height:r,maxWidth:n||Z5,maxHeight:s||Z5}}const zw=t=>Math.round(t*10)/10;function ioe(t,e,r,n){const s=uC(t),o=Jg(s,"margin"),c=r4(s.maxWidth,t,"clientWidth")||Z5,u=r4(s.maxHeight,t,"clientHeight")||Z5,i=noe(t,e,r);let{width:A,height:g}=i;if(s.boxSizing==="content-box"){const B=Jg(s,"border","width"),S=Jg(s,"padding");A-=S.width+B.width,g-=S.height+B.height}return A=Math.max(0,A-o.width),g=Math.max(0,n?A/n:g-o.height),A=zw(Math.min(A,c,i.maxWidth)),g=zw(Math.min(g,u,i.maxHeight)),A&&!g&&(g=zw(A/2)),(e!==void 0||r!==void 0)&&n&&i.height&&g>i.height&&(g=i.height,A=zw(Math.floor(g*n))),{width:A,height:g}}function bO(t,e,r){const n=e||1,s=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const c=t.canvas;return c.style&&(r||!c.style.height&&!c.style.width)&&(c.style.height=`${t.height}px`,c.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||c.height!==s||c.width!==o?(t.currentDevicePixelRatio=n,c.height=s,c.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const soe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};_F()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function wO(t,e){const r=Jse(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ng(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function ooe(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function aoe(t,e,r,n){const s={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},c=Ng(t,s,r),u=Ng(s,o,r),i=Ng(o,e,r),A=Ng(c,u,r),g=Ng(u,i,r);return Ng(A,g,r)}const loe=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},coe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function $y(t,e,r){return t?loe(e,r):coe()}function uV(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function hV(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function dV(t){return t==="angle"?{between:b_,compare:use,normalize:cd}:{between:eA,compare:(e,r)=>e-r,normalize:e=>e}}function CO({start:t,end:e,count:r,loop:n,style:s}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:s}}function uoe(t,e,r){const{property:n,start:s,end:o}=r,{between:c,normalize:u}=dV(n),i=e.length;let{start:A,end:g,loop:C}=t,B,S;if(C){for(A+=i,g+=i,B=0,S=i;B<S&&c(u(e[A%i][n]),s,o);++B)A--,g--;A%=i,g%=i}return g<A&&(g+=i),{start:A,end:g,loop:C,style:t.style}}function fV(t,e,r){if(!r)return[t];const{property:n,start:s,end:o}=r,c=e.length,{compare:u,between:i,normalize:A}=dV(n),{start:g,end:C,loop:B,style:S}=uoe(t,e,r),P=[];let j=!1,R=null,N,U,$;const J=()=>i(s,$,N)&&u(s,$)!==0,te=()=>u(o,N)===0||i(o,$,N),ue=()=>j||J(),oe=()=>!j||te();for(let K=g,ce=g;K<=C;++K)U=e[K%c],!U.skip&&(N=A(U[n]),N!==$&&(j=i(N,s,o),R===null&&ue()&&(R=u(N,s)===0?K:ce),R!==null&&oe()&&(P.push(CO({start:R,end:K,loop:B,count:c,style:S})),R=null),ce=K,$=N));return R!==null&&P.push(CO({start:R,end:C,loop:B,count:c,style:S})),P}function pV(t,e){const r=[],n=t.segments;for(let s=0;s<n.length;s++){const o=fV(n[s],t.points,e);o.length&&r.push(...o)}return r}function hoe(t,e,r,n){let s=0,o=e-1;if(r&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,r&&(o+=s);o>s&&t[o%e].skip;)o--;return o%=e,{start:s,end:o}}function doe(t,e,r,n){const s=t.length,o=[];let c=e,u=t[e],i;for(i=e+1;i<=r;++i){const A=t[i%s];A.skip||A.stop?u.skip||(n=!1,o.push({start:e%s,end:(i-1)%s,loop:n}),e=c=A.stop?i:null):(c=i,u.skip&&(e=i)),u=A}return c!==null&&o.push({start:e%s,end:c%s,loop:n}),o}function foe(t,e){const r=t.points,n=t.options.spanGaps,s=r.length;if(!s)return[];const o=!!t._loop,{start:c,end:u}=hoe(r,s,o,n);if(n===!0)return SO(t,[{start:c,end:u,loop:o}],r,e);const i=u<c?u+s:u,A=!!t._fullLoop&&c===0&&u===s-1;return SO(t,doe(r,c,i,A),r,e)}function SO(t,e,r,n){return!n||!n.setContext||!r?e:poe(t,e,r,n)}function poe(t,e,r,n){const s=t._chart.getContext(),o=BO(t.options),{_datasetIndex:c,options:{spanGaps:u}}=t,i=r.length,A=[];let g=o,C=e[0].start,B=C;function S(P,j,R,N){const U=u?-1:1;if(P!==j){for(P+=i;r[P%i].skip;)P-=U;for(;r[j%i].skip;)j+=U;P%i!==j%i&&(A.push({start:P%i,end:j%i,loop:R,style:N}),g=N,C=j%i)}}for(const P of e){C=u?C:P.start;let j=r[C%i],R;for(B=C+1;B<=P.end;B++){const N=r[B%i];R=BO(n.setContext(sg(s,{type:"segment",p0:j,p1:N,p0DataIndex:(B-1)%i,p1DataIndex:B%i,datasetIndex:c}))),Aoe(R,g)&&S(C,B-1,P.loop,g),j=N,g=R}C<B-1&&S(C,B-1,P.loop,g)}return A}function BO(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Aoe(t,e){if(!e)return!1;const r=[],n=function(s,o){return mF(o)?(r.includes(o)||r.push(o),r.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(e,n)}/*!
 * Chart.js v4.4.6
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class moe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,s){const o=r.listeners[s],c=r.duration;o.forEach(u=>u({chart:e,initial:r.initial,numSteps:c,currentStep:Math.min(n-r.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=YH.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let c=o.length-1,u=!1,i;for(;c>=0;--c)i=o[c],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),u=!0):(o[c]=o[o.length-1],o.pop());u&&(s.draw(),this._notify(s,n,e,"progress")),o.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),r+=o.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qp=new moe;const EO="transparent",goe={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=gO(t||EO),s=n.valid&&gO(e||EO);return s&&s.valid?s.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class yoe{constructor(e,r,n,s){const o=r[n];s=tx([e.to,s,o,e.from]);const c=tx([e.from,o,s]);this._active=!0,this._fn=e.fn||goe[e.type||typeof c],this._easing=Tx[e.easing]||Tx.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=c,this._to=s,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,c=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=tx([e.to,r,s,e.from]),this._from=tx([e.from,s,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,s=this._prop,o=this._from,c=this._loop,u=this._to;let i;if(this._active=o!==u&&(c||r<n),!this._active){this._target[s]=u,this._notify(!0);return}if(r<0){this._target[s]=o;return}i=r/n%2,i=c&&i>1?2-i:i,i=this._easing(Math.min(1,Math.max(0,i))),this._target[s]=this._fn(o,u,i)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][r]()}}class wF{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Rs(e))return;const r=Object.keys(gl.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!Rs(o))return;const c={};for(const u of r)c[u]=o[u];(ha(o.properties)&&o.properties||[s]).forEach(u=>{(u===s||!n.has(u))&&n.set(u,c)})})}_animateOptions(e,r){const n=r.options,s=xoe(e,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&voe(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,r){const n=this._properties,s=[],o=e.$animations||(e.$animations={}),c=Object.keys(r),u=Date.now();let i;for(i=c.length-1;i>=0;--i){const A=c[i];if(A.charAt(0)==="$")continue;if(A==="options"){s.push(...this._animateOptions(e,r));continue}const g=r[A];let C=o[A];const B=n.get(A);if(C)if(B&&C.active()){C.update(B,g,u);continue}else C.cancel();if(!B||!B.duration){e[A]=g;continue}o[A]=C=new yoe(B,e,A,g),s.push(C)}return s}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return qp.add(this._chart,n),!0}}function voe(t,e){const r=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const o=t[n[s]];o&&o.active()&&r.push(o.wait())}return Promise.all(r)}function xoe(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function TO(t,e){const r=t&&t.options||{},n=r.reverse,s=r.min===void 0?e:0,o=r.max===void 0?e:0;return{start:n?o:s,end:n?s:o}}function _oe(t,e,r){if(r===!1)return!1;const n=TO(t,r),s=TO(e,r);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function boe(t){let e,r,n,s;return Rs(t)?(e=t.top,r=t.right,n=t.bottom,s=t.left):e=r=n=s=t,{top:e,right:r,bottom:n,left:s,disabled:t===!1}}function AV(t,e){const r=[],n=t._getSortedDatasetMetas(e);let s,o;for(s=0,o=n.length;s<o;++s)r.push(n[s].index);return r}function IO(t,e,r,n={}){const s=t.keys,o=n.mode==="single";let c,u,i,A;if(e===null)return;let g=!1;for(c=0,u=s.length;c<u;++c){if(i=+s[c],i===r){if(g=!0,n.all)continue;break}A=t.values[i],Cl(A)&&(o||e===0||yp(e)===yp(A))&&(e+=A)}return!g&&!n.all?0:e}function woe(t,e){const{iScale:r,vScale:n}=e,s=r.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",c=Object.keys(t),u=new Array(c.length);let i,A,g;for(i=0,A=c.length;i<A;++i)g=c[i],u[i]={[s]:g,[o]:t[g]};return u}function TE(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function Coe(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function Soe(t){const{min:e,max:r,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}function Boe(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function LO(t,e,r,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const o=t[s.index];if(r&&o>0||!r&&o<0)return s.index}return null}function FO(t,e){const{chart:r,_cachedMeta:n}=t,s=r._stacks||(r._stacks={}),{iScale:o,vScale:c,index:u}=n,i=o.axis,A=c.axis,g=Coe(o,c,n),C=e.length;let B;for(let S=0;S<C;++S){const P=e[S],{[i]:j,[A]:R}=P,N=P._stacks||(P._stacks={});B=N[A]=Boe(s,g,j),B[u]=R,B._top=LO(B,c,!0,n.type),B._bottom=LO(B,c,!1,n.type);const U=B._visualValues||(B._visualValues={});U[u]=R}}function IE(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function Eoe(t,e){return sg(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Toe(t,e,r){return sg(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Pv(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const o=s._stacks;if(!o||o[n]===void 0||o[n][r]===void 0)return;delete o[n][r],o[n]._visualValues!==void 0&&o[n]._visualValues[r]!==void 0&&delete o[n]._visualValues[r]}}}const LE=t=>t==="reset"||t==="none",NO=(t,e)=>e?t:Object.assign({},t),Ioe=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:AV(r,!0),values:null};class jf{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=TE(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Pv(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),s=(C,B,S,P)=>C==="x"?B:C==="r"?P:S,o=r.xAxisID=gs(n.xAxisID,IE(e,"x")),c=r.yAxisID=gs(n.yAxisID,IE(e,"y")),u=r.rAxisID=gs(n.rAxisID,IE(e,"r")),i=r.indexAxis,A=r.iAxisID=s(i,o,c,u),g=r.vAxisID=s(i,c,o,u);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(c),r.rScale=this.getScaleForId(u),r.iScale=this.getScaleForId(A),r.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pO(this._data,this),e._stacked&&Pv(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(Rs(r)){const s=this._cachedMeta;this._data=woe(r,s)}else if(n!==r){if(n){pO(n,this);const s=this._cachedMeta;Pv(s),s._parsed=[]}r&&Object.isExtensible(r)&&pse(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=r._stacked;r._stacked=TE(r.vScale,r),r.stack!==n.stack&&(s=!0,Pv(r),r.stack=n.stack),this._resyncElements(e),(s||o!==r._stacked)&&(FO(this,r._parsed),r._stacked=TE(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:c}=n,u=o.axis;let i=e===0&&r===s.length?!0:n._sorted,A=e>0&&n._parsed[e-1],g,C,B;if(this._parsing===!1)n._parsed=s,n._sorted=!0,B=s;else{ha(s[e])?B=this.parseArrayData(n,s,e,r):Rs(s[e])?B=this.parseObjectData(n,s,e,r):B=this.parsePrimitiveData(n,s,e,r);const S=()=>C[u]===null||A&&C[u]<A[u];for(g=0;g<r;++g)n._parsed[g+e]=C=B[g],i&&(S()&&(i=!1),A=C);n._sorted=i}c&&FO(this,B)}parsePrimitiveData(e,r,n,s){const{iScale:o,vScale:c}=e,u=o.axis,i=c.axis,A=o.getLabels(),g=o===c,C=new Array(s);let B,S,P;for(B=0,S=s;B<S;++B)P=B+n,C[B]={[u]:g||o.parse(A[P],P),[i]:c.parse(r[P],P)};return C}parseArrayData(e,r,n,s){const{xScale:o,yScale:c}=e,u=new Array(s);let i,A,g,C;for(i=0,A=s;i<A;++i)g=i+n,C=r[g],u[i]={x:o.parse(C[0],g),y:c.parse(C[1],g)};return u}parseObjectData(e,r,n,s){const{xScale:o,yScale:c}=e,{xAxisKey:u="x",yAxisKey:i="y"}=this._parsing,A=new Array(s);let g,C,B,S;for(g=0,C=s;g<C;++g)B=g+n,S=r[B],A[g]={x:o.parse(Qm(S,u),B),y:c.parse(Qm(S,i),B)};return A}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const s=this.chart,o=this._cachedMeta,c=r[e.axis],u={keys:AV(s,!0),values:r._stacks[e.axis]._visualValues};return IO(u,c,o.index,{mode:n})}updateRangeFromParsed(e,r,n,s){const o=n[r.axis];let c=o===null?NaN:o;const u=s&&n._stacks[r.axis];s&&u&&(s.values=u,c=IO(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,r){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&e===n.iScale,c=s.length,u=this._getOtherScale(e),i=Ioe(r,n,this.chart),A={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:C}=Soe(u);let B,S;function P(){S=s[B];const j=S[u.axis];return!Cl(S[e.axis])||g>j||C<j}for(B=0;B<c&&!(!P()&&(this.updateRangeFromParsed(A,e,S,i),o));++B);if(o){for(B=c-1;B>=0;--B)if(!P()){this.updateRangeFromParsed(A,e,S,i);break}}return A}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let s,o,c;for(s=0,o=r.length;s<o;++s)c=r[s][e.axis],Cl(c)&&n.push(c);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,s=r.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=boe(gs(this.options.clip,_oe(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,s=n.data||[],o=r.chartArea,c=[],u=this._drawStart||0,i=this._drawCount||s.length-u,A=this.options.drawActiveElementsOnTop;let g;for(n.dataset&&n.dataset.draw(e,o,u,i),g=u;g<u+i;++g){const C=s[g];C.hidden||(C.active&&A?c.push(C):C.draw(e,o))}for(g=0;g<c.length;++g)c[g].draw(e,o)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];o=c.$context||(c.$context=Toe(this.getContext(),e,c)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=Eoe(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const s=r==="active",o=this._cachedDataOpts,c=e+"-"+r,u=o[c],i=this.enableOptionSharing&&$h(n);if(u)return NO(u,i);const A=this.chart.config,g=A.datasetElementScopeKeys(this._type,e),C=s?[`${e}Hover`,"hover",e,""]:[e,""],B=A.getOptionScopes(this.getDataset(),g),S=Object.keys(gl.elements[e]),P=()=>this.getContext(n,s,r),j=A.resolveNamedOptions(B,S,P,C);return j.$shared&&(j.$shared=i,o[c]=Object.freeze(NO(j,i))),j}_resolveAnimations(e,r,n){const s=this.chart,o=this._cachedDataOpts,c=`animation-${r}`,u=o[c];if(u)return u;let i;if(s.options.animation!==!1){const g=this.chart.config,C=g.datasetAnimationScopeKeys(this._type,r),B=g.getOptionScopes(this.getDataset(),C);i=g.createResolver(B,this.getContext(e,n,r))}const A=new wF(s,i&&i.animations);return i&&i._cacheable&&(o[c]=Object.freeze(A)),A}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||LE(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),s=this._sharedOptions,o=this.getSharedOptions(n),c=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,n),{sharedOptions:o,includeOptions:c}}updateElement(e,r,n,s){LE(s)?Object.assign(e,n):this._resolveAnimations(r,s).update(e,n)}updateSharedOptions(e,r,n){e&&!LE(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,s){e.active=s;const o=this.getStyle(r,s);this._resolveAnimations(r,n,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[u,i,A]of this._syncList)this[u](i,A);this._syncList=[];const s=n.length,o=r.length,c=Math.min(o,s);c&&this.parse(0,c),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,r,n=!0){const s=this._cachedMeta,o=s.data,c=e+r;let u;const i=A=>{for(A.length+=r,u=A.length-1;u>=c;u--)A[u]=A[u-r]};for(i(o),u=e;u<c;++u)o[u]=new this.dataElementType;this._parsing&&i(s._parsed),this.parse(e,r),n&&this.updateElements(o,e,r,"reset")}updateElements(e,r,n,s){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,r);n._stacked&&Pv(n,s)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,s]=e;this[r](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ni(jf,"defaults",{}),ni(jf,"datasetElementType",null),ni(jf,"dataElementType",null);function Loe(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let s=0,o=r.length;s<o;s++)n=n.concat(r[s].controller.getAllParsedValues(t));t._cache.$bar=XH(n.sort((s,o)=>s-o))}return t._cache.$bar}function Foe(t){const e=t.iScale,r=Loe(e,t.type);let n=e._length,s,o,c,u;const i=()=>{c===32767||c===-32768||($h(u)&&(n=Math.min(n,Math.abs(c-u)||n)),u=c)};for(s=0,o=r.length;s<o;++s)c=e.getPixelForValue(r[s]),i();for(u=void 0,s=0,o=e.ticks.length;s<o;++s)c=e.getPixelForTick(s),i();return n}function Noe(t,e,r,n){const s=r.barThickness;let o,c;return Go(s)?(o=e.min*r.categoryPercentage,c=r.barPercentage):(o=s*n,c=1),{chunk:o/n,ratio:c,start:e.pixels[t]-o/2}}function Poe(t,e,r,n){const s=e.pixels,o=s[t];let c=t>0?s[t-1]:null,u=t<s.length-1?s[t+1]:null;const i=r.categoryPercentage;c===null&&(c=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-c);const A=o-(o-Math.min(c,u))/2*i;return{chunk:Math.abs(u-c)/2*i/n,ratio:r.barPercentage,start:A}}function Moe(t,e,r,n){const s=r.parse(t[0],n),o=r.parse(t[1],n),c=Math.min(s,o),u=Math.max(s,o);let i=c,A=u;Math.abs(c)>Math.abs(u)&&(i=u,A=c),e[r.axis]=A,e._custom={barStart:i,barEnd:A,start:s,end:o,min:c,max:u}}function mV(t,e,r,n){return ha(t)?Moe(t,e,r,n):e[r.axis]=r.parse(t,n),e}function PO(t,e,r,n){const s=t.iScale,o=t.vScale,c=s.getLabels(),u=s===o,i=[];let A,g,C,B;for(A=r,g=r+n;A<g;++A)B=e[A],C={},C[s.axis]=u||s.parse(c[A],A),i.push(mV(B,C,o,A));return i}function FE(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function joe(t,e,r){return t!==0?yp(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function koe(t){let e,r,n,s,o;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(s="end",o="start"):(s="start",o="end"),{start:r,end:n,reverse:e,top:s,bottom:o}}function Doe(t,e,r,n){let s=e.borderSkipped;const o={};if(!s){t.borderSkipped=o;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:i,top:A,bottom:g}=koe(t);s==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?s=A:(r._bottom||0)===n?s=g:(o[MO(g,c,u,i)]=!0,s=A)),o[MO(s,c,u,i)]=!0,t.borderSkipped=o}function MO(t,e,r,n){return n?(t=Ooe(t,e,r),t=jO(t,r,e)):t=jO(t,e,r),t}function Ooe(t,e,r){return t===e?r:t===r?e:t}function jO(t,e,r){return t==="start"?e:t==="end"?r:t}function Roe(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class Lx extends jf{parsePrimitiveData(e,r,n,s){return PO(e,r,n,s)}parseArrayData(e,r,n,s){return PO(e,r,n,s)}parseObjectData(e,r,n,s){const{iScale:o,vScale:c}=e,{xAxisKey:u="x",yAxisKey:i="y"}=this._parsing,A=o.axis==="x"?u:i,g=c.axis==="x"?u:i,C=[];let B,S,P,j;for(B=n,S=n+s;B<S;++B)j=r[B],P={},P[o.axis]=o.parse(Qm(j,A),B),C.push(mV(Qm(j,g),P,c,B));return C}updateRangeFromParsed(e,r,n,s){super.updateRangeFromParsed(e,r,n,s);const o=n._custom;o&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:s}=r,o=this.getParsed(e),c=o._custom,u=FE(c)?"["+c.start+", "+c.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,s){const o=s==="reset",{index:c,_cachedMeta:{vScale:u}}=this,i=u.getBasePixel(),A=u.isHorizontal(),g=this._getRuler(),{sharedOptions:C,includeOptions:B}=this._getSharedOptions(r,s);for(let S=r;S<r+n;S++){const P=this.getParsed(S),j=o||Go(P[u.axis])?{base:i,head:i}:this._calculateBarValuePixels(S),R=this._calculateBarIndexPixels(S,g),N=(P._stacks||{})[u.axis],U={horizontal:A,base:j.base,enableBorderRadius:!N||FE(P._custom)||c===N._top||c===N._bottom,x:A?j.head:R.center,y:A?R.center:j.head,height:A?R.size:Math.abs(j.size),width:A?Math.abs(j.size):R.size};B&&(U.options=C||this.resolveDataElementOptions(S,e[S].active?"active":s));const $=U.options||e[S].options;Doe(U,$,N,c),Roe(U,$,g.ratio),this.updateElement(e[S],S,U,s)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(g=>g.controller.options.grouped),o=n.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(r),i=u&&u[n.axis],A=g=>{const C=g._parsed.find(S=>S[n.axis]===i),B=C&&C[g.vScale.axis];if(Go(B)||isNaN(B))return!0};for(const g of s)if(!(r!==void 0&&A(g))&&((o===!1||c.indexOf(g.stack)===-1||o===void 0&&g.stack===void 0)&&c.push(g.stack),g.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,r,n){const s=this._getStacks(e,n),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,s=[];let o,c;for(o=0,c=r.data.length;o<c;++o)s.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const u=e.barThickness;return{min:u||Foe(r),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:s},options:{base:o,minBarLength:c}}=this,u=o||0,i=this.getParsed(e),A=i._custom,g=FE(A);let C=i[r.axis],B=0,S=n?this.applyStack(r,i,n):C,P,j;S!==C&&(B=S-C,S=C),g&&(C=A.barStart,S=A.barEnd-A.barStart,C!==0&&yp(C)!==yp(A.barEnd)&&(B=0),B+=C);const R=!Go(o)&&!g?o:B;let N=r.getPixelForValue(R);if(this.chart.getDataVisibility(e)?P=r.getPixelForValue(B+S):P=N,j=P-N,Math.abs(j)<c){j=joe(j,r,u)*c,C===u&&(N-=j/2);const U=r.getPixelForDecimal(0),$=r.getPixelForDecimal(1),J=Math.min(U,$),te=Math.max(U,$);N=Math.max(Math.min(N,te),J),P=N+j,n&&!g&&(i._stacks[r.axis]._visualValues[s]=r.getValueForPixel(P)-r.getValueForPixel(N))}if(N===r.getPixelForValue(u)){const U=yp(j)*r.getLineWidthForValue(u)/2;N+=U,j-=U}return{size:j,base:N,head:P,center:P+j/2}}_calculateBarIndexPixels(e,r){const n=r.scale,s=this.options,o=s.skipNull,c=gs(s.maxBarThickness,1/0);let u,i;if(r.grouped){const A=o?this._getStackCount(e):r.stackCount,g=s.barThickness==="flex"?Poe(e,r,s,A):Noe(e,r,s,A),C=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=g.start+g.chunk*C+g.chunk/2,i=Math.min(c,g.chunk*g.ratio)}else u=n.getPixelForValue(this.getParsed(e)[n.axis],e),i=Math.min(c,r.min*r.ratio);return{base:u-i/2,head:u+i/2,center:u,size:i}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,s=n.length;let o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}ni(Lx,"id","bar"),ni(Lx,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ni(Lx,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class t5 extends jf{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,s){const o=super.parsePrimitiveData(e,r,n,s);for(let c=0;c<o.length;c++)o[c]._custom=this.resolveDataElementOptions(c+n).radius;return o}parseArrayData(e,r,n,s){const o=super.parseArrayData(e,r,n,s);for(let c=0;c<o.length;c++){const u=r[n+c];o[c]._custom=gs(u[2],this.resolveDataElementOptions(c+n).radius)}return o}parseObjectData(e,r,n,s){const o=super.parseObjectData(e,r,n,s);for(let c=0;c<o.length;c++){const u=r[n+c];o[c]._custom=gs(u&&u.r&&+u.r,this.resolveDataElementOptions(c+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=r,c=this.getParsed(e),u=s.getLabelForValue(c.x),i=o.getLabelForValue(c.y),A=c._custom;return{label:n[e]||"",value:"("+u+", "+i+(A?", "+A:"")+")"}}update(e){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,s){const o=s==="reset",{iScale:c,vScale:u}=this._cachedMeta,{sharedOptions:i,includeOptions:A}=this._getSharedOptions(r,s),g=c.axis,C=u.axis;for(let B=r;B<r+n;B++){const S=e[B],P=!o&&this.getParsed(B),j={},R=j[g]=o?c.getPixelForDecimal(.5):c.getPixelForValue(P[g]),N=j[C]=o?u.getBasePixel():u.getPixelForValue(P[C]);j.skip=isNaN(R)||isNaN(N),A&&(j.options=i||this.resolveDataElementOptions(B,S.active?"active":s),o&&(j.options.radius=0)),this.updateElement(S,B,j,s)}}resolveDataElementOptions(e,r){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return r!=="active"&&(s.radius=0),s.radius+=gs(n&&n._custom,o),s}}ni(t5,"id","bubble"),ni(t5,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ni(t5,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Uoe(t,e,r){let n=1,s=1,o=0,c=0;if(e<za){const u=t,i=u+e,A=Math.cos(u),g=Math.sin(u),C=Math.cos(i),B=Math.sin(i),S=($,J,te)=>b_($,u,i,!0)?1:Math.max(J,J*r,te,te*r),P=($,J,te)=>b_($,u,i,!0)?-1:Math.min(J,J*r,te,te*r),j=S(0,A,C),R=S(ml,g,B),N=P(Co,A,C),U=P(Co+ml,g,B);n=(j-N)/2,s=(R-U)/2,o=-(j+N)/2,c=-(R+U)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:c}}class fm extends jf{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=i=>+n[i];if(Rs(n[e])){const{key:i="value"}=this._parsing;o=A=>+Qm(n[A],i)}let c,u;for(c=e,u=e+r;c<u;++c)s._parsed[c]=o(c)}}_getRotation(){return Ic(this.options.rotation-90)}_getCircumference(){return Ic(this.options.circumference)}_getRotationExtents(){let e=za,r=-za;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),c=s._getCircumference();e=Math.min(e,o),r=Math.max(r,o+c)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,s=this._cachedMeta,o=s.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(n.width,n.height)-c)/2,0),i=Math.min(tse(this.options.cutout,u),1),A=this._getRingWeight(this.index),{circumference:g,rotation:C}=this._getRotationExtents(),{ratioX:B,ratioY:S,offsetX:P,offsetY:j}=Uoe(C,g,i),R=(n.width-c)/B,N=(n.height-c)/S,U=Math.max(Math.min(R,N)/2,0),$=qH(this.options.radius,U),J=Math.max($*i,0),te=($-J)/this._getVisibleDatasetWeightTotal();this.offsetX=P*$,this.offsetY=j*$,s.total=this.calculateTotal(),this.outerRadius=$-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*A,0),this.updateElements(o,0,o.length,e)}_circumference(e,r){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/za)}updateElements(e,r,n,s){const o=s==="reset",c=this.chart,u=c.chartArea,A=c.options.animation,g=(u.left+u.right)/2,C=(u.top+u.bottom)/2,B=o&&A.animateScale,S=B?0:this.innerRadius,P=B?0:this.outerRadius,{sharedOptions:j,includeOptions:R}=this._getSharedOptions(r,s);let N=this._getRotation(),U;for(U=0;U<r;++U)N+=this._circumference(U,o);for(U=r;U<r+n;++U){const $=this._circumference(U,o),J=e[U],te={x:g+this.offsetX,y:C+this.offsetY,startAngle:N,endAngle:N+$,circumference:$,outerRadius:P,innerRadius:S};R&&(te.options=j||this.resolveDataElementOptions(U,J.active?"active":s)),N+=$,this.updateElement(J,U,te,s)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,s;for(s=0;s<r.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?za*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Y_(r._parsed[e],n.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let r=0;const n=this.chart;let s,o,c,u,i;if(!e){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){c=n.getDatasetMeta(s),e=c.data,u=c.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)i=u.resolveDataElementOptions(s),i.borderAlign!=="inner"&&(r=Math.max(r,i.borderWidth||0,i.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,s=e.length;n<s;++n){const o=this.resolveDataElementOptions(n);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(gs(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ni(fm,"id","doughnut"),ni(fm,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ni(fm,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ni(fm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return r.labels.map((o,c)=>{const i=e.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:s,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class Fx extends jf{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=r,c=this.chart._animationsDisabled;let{start:u,count:i}=JH(r,s,c);this._drawStart=u,this._drawCount=i,eV(r)&&(u=0,i=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const A=this.resolveDatasetElementOptions(e);this.options.showLine||(A.borderWidth=0),A.segment=this.options.segment,this.updateElement(n,void 0,{animated:!c,options:A},e),this.updateElements(s,u,i,e)}updateElements(e,r,n,s){const o=s==="reset",{iScale:c,vScale:u,_stacked:i,_dataset:A}=this._cachedMeta,{sharedOptions:g,includeOptions:C}=this._getSharedOptions(r,s),B=c.axis,S=u.axis,{spanGaps:P,segment:j}=this.options,R=Hm(P)?P:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||s==="none",U=r+n,$=e.length;let J=r>0&&this.getParsed(r-1);for(let te=0;te<$;++te){const ue=e[te],oe=N?ue:{};if(te<r||te>=U){oe.skip=!0;continue}const K=this.getParsed(te),ce=Go(K[S]),me=oe[B]=c.getPixelForValue(K[B],te),Z=oe[S]=o||ce?u.getBasePixel():u.getPixelForValue(i?this.applyStack(u,K,i):K[S],te);oe.skip=isNaN(me)||isNaN(Z)||ce,oe.stop=te>0&&Math.abs(K[B]-J[B])>R,j&&(oe.parsed=K,oe.raw=A.data[te]),C&&(oe.options=g||this.resolveDataElementOptions(te,ue.active?"active":s)),N||this.updateElement(ue,te,oe,s),J=K}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),c=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ni(Fx,"id","line"),ni(Fx,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ni(Fx,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Nx extends jf{constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=Y_(r._parsed[e].r,n.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,r,n,s){return lV.bind(this)(e,r,n,s)}update(e){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){const e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){const e=this.chart,r=e.chartArea,n=e.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),c=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),u=(o-c)/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,r,n,s){const o=s==="reset",c=this.chart,i=c.options.animation,A=this._cachedMeta.rScale,g=A.xCenter,C=A.yCenter,B=A.getIndexAngle(0)-.5*Co;let S=B,P;const j=360/this.countVisibleElements();for(P=0;P<r;++P)S+=this._computeAngle(P,s,j);for(P=r;P<r+n;P++){const R=e[P];let N=S,U=S+this._computeAngle(P,s,j),$=c.getDataVisibility(P)?A.getDistanceFromCenterForValue(this.getParsed(P).r):0;S=U,o&&(i.animateScale&&($=0),i.animateRotate&&(N=U=B));const J={x:g,y:C,innerRadius:0,outerRadius:$,startAngle:N,endAngle:U,options:this.resolveDataElementOptions(P,R.active?"active":s)};this.updateElement(R,P,J,s)}}countVisibleElements(){const e=this._cachedMeta;let r=0;return e.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?Ic(this.resolveDataElementOptions(e,r).angle||n):0}}ni(Nx,"id","polarArea"),ni(Nx,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ni(Nx,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return r.labels.map((o,c)=>{const i=e.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:s,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(c),index:c}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class n4 extends fm{}ni(n4,"id","pie"),ni(n4,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class r5 extends jf{getLabelAndValue(e){const r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,s){return lV.bind(this)(e,r,n,s)}update(e){const r=this._cachedMeta,n=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(n.points=s,e!=="resize"){const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===s.length,options:c};this.updateElement(n,void 0,u,e)}this.updateElements(s,0,s.length,e)}updateElements(e,r,n,s){const o=this._cachedMeta.rScale,c=s==="reset";for(let u=r;u<r+n;u++){const i=e[u],A=this.resolveDataElementOptions(u,i.active?"active":s),g=o.getPointPositionForValue(u,this.getParsed(u).r),C=c?o.xCenter:g.x,B=c?o.yCenter:g.y,S={x:C,y:B,angle:g.angle,skip:isNaN(C)||isNaN(B),options:A};this.updateElement(i,u,S,s)}}}ni(r5,"id","radar"),ni(r5,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ni(r5,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class n5 extends jf{getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:o}=r,c=this.getParsed(e),u=s.getLabelForValue(c.x),i=o.getLabelForValue(c.y);return{label:n[e]||"",value:"("+u+", "+i+")"}}update(e){const r=this._cachedMeta,{data:n=[]}=r,s=this.chart._animationsDisabled;let{start:o,count:c}=JH(r,n,s);if(this._drawStart=o,this._drawCount=c,eV(r)&&(o=0,c=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:i}=r;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!i._decimated,u.points=n;const A=this.resolveDatasetElementOptions(e);A.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:A},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,o,c,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,s){const o=s==="reset",{iScale:c,vScale:u,_stacked:i,_dataset:A}=this._cachedMeta,g=this.resolveDataElementOptions(r,s),C=this.getSharedOptions(g),B=this.includeOptions(s,C),S=c.axis,P=u.axis,{spanGaps:j,segment:R}=this.options,N=Hm(j)?j:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||o||s==="none";let $=r>0&&this.getParsed(r-1);for(let J=r;J<r+n;++J){const te=e[J],ue=this.getParsed(J),oe=U?te:{},K=Go(ue[P]),ce=oe[S]=c.getPixelForValue(ue[S],J),me=oe[P]=o||K?u.getBasePixel():u.getPixelForValue(i?this.applyStack(u,ue,i):ue[P],J);oe.skip=isNaN(ce)||isNaN(me)||K,oe.stop=J>0&&Math.abs(ue[S]-$[S])>N,R&&(oe.parsed=ue,oe.raw=A.data[J]),B&&(oe.options=C||this.resolveDataElementOptions(J,te.active?"active":s)),U||this.updateElement(te,J,oe,s),$=ue}this.updateSharedOptions(C,s,g)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let u=0;for(let i=r.length-1;i>=0;--i)u=Math.max(u,r[i].size(this.resolveDataElementOptions(i))/2);return u>0&&u}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!r.length)return s;const o=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,c)/2}}ni(n5,"id","scatter"),ni(n5,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ni(n5,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var zoe=Object.freeze({__proto__:null,BarController:Lx,BubbleController:t5,DoughnutController:fm,LineController:Fx,PieController:n4,PolarAreaController:Nx,RadarController:r5,ScatterController:n5});function bg(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class CF{constructor(e){ni(this,"options");this.options=e||{}}static override(e){Object.assign(CF.prototype,e)}init(){}formats(){return bg()}parse(){return bg()}format(){return bg()}add(){return bg()}diff(){return bg()}startOf(){return bg()}endOf(){return bg()}}var Qoe={_date:CF};function Hoe(t,e,r,n){const{controller:s,data:o,_sorted:c}=t,u=s._cachedMeta.iScale;if(u&&e===u.axis&&e!=="r"&&c&&o.length){const i=u._reversePixels?dse:tA;if(n){if(s._sharedOptions){const A=o[0],g=typeof A.getRange=="function"&&A.getRange(e);if(g){const C=i(o,e,r-g),B=i(o,e,r+g);return{lo:C.lo,hi:B.hi}}}}else return i(o,e,r)}return{lo:0,hi:o.length-1}}function eb(t,e,r,n,s){const o=t.getSortedVisibleDatasetMetas(),c=r[e];for(let u=0,i=o.length;u<i;++u){const{index:A,data:g}=o[u],{lo:C,hi:B}=Hoe(o[u],e,c,s);for(let S=C;S<=B;++S){const P=g[S];P.skip||n(P,A,S)}}}function Voe(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,s){const o=e?Math.abs(n.x-s.x):0,c=r?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function NE(t,e,r,n,s){const o=[];return!s&&!t.isPointInArea(e)||eb(t,r,e,function(u,i,A){!s&&!rA(u,t.chartArea,0)||u.inRange(e.x,e.y,n)&&o.push({element:u,datasetIndex:i,index:A})},!0),o}function Goe(t,e,r,n){let s=[];function o(c,u,i){const{startAngle:A,endAngle:g}=c.getProps(["startAngle","endAngle"],n),{angle:C}=e4(c,{x:e.x,y:e.y});b_(C,A,g)&&s.push({element:c,datasetIndex:u,index:i})}return eb(t,r,e,o),s}function qoe(t,e,r,n,s,o){let c=[];const u=Voe(r);let i=Number.POSITIVE_INFINITY;function A(g,C,B){const S=g.inRange(e.x,e.y,s);if(n&&!S)return;const P=g.getCenterPoint(s);if(!(!!o||t.isPointInArea(P))&&!S)return;const R=u(e,P);R<i?(c=[{element:g,datasetIndex:C,index:B}],i=R):R===i&&c.push({element:g,datasetIndex:C,index:B})}return eb(t,r,e,A),c}function PE(t,e,r,n,s,o){return!o&&!t.isPointInArea(e)?[]:r==="r"&&!n?Goe(t,e,r,s):qoe(t,e,r,n,s,o)}function kO(t,e,r,n,s){const o=[],c=r==="x"?"inXRange":"inYRange";let u=!1;return eb(t,r,e,(i,A,g)=>{i[c]&&i[c](e[r],s)&&(o.push({element:i,datasetIndex:A,index:g}),u=u||i.inRange(e.x,e.y,s))}),n&&!u?[]:o}var $oe={evaluateInteractionItems:eb,modes:{index(t,e,r,n){const s=Fg(e,t),o=r.axis||"x",c=r.includeInvisible||!1,u=r.intersect?NE(t,s,o,n,c):PE(t,s,o,!1,n,c),i=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(A=>{const g=u[0].index,C=A.data[g];C&&!C.skip&&i.push({element:C,datasetIndex:A.index,index:g})}),i):[]},dataset(t,e,r,n){const s=Fg(e,t),o=r.axis||"xy",c=r.includeInvisible||!1;let u=r.intersect?NE(t,s,o,n,c):PE(t,s,o,!1,n,c);if(u.length>0){const i=u[0].datasetIndex,A=t.getDatasetMeta(i).data;u=[];for(let g=0;g<A.length;++g)u.push({element:A[g],datasetIndex:i,index:g})}return u},point(t,e,r,n){const s=Fg(e,t),o=r.axis||"xy",c=r.includeInvisible||!1;return NE(t,s,o,n,c)},nearest(t,e,r,n){const s=Fg(e,t),o=r.axis||"xy",c=r.includeInvisible||!1;return PE(t,s,o,r.intersect,n,c)},x(t,e,r,n){const s=Fg(e,t);return kO(t,s,"x",r.intersect,n)},y(t,e,r,n){const s=Fg(e,t);return kO(t,s,"y",r.intersect,n)}}};const gV=["left","top","right","bottom"];function Mv(t,e){return t.filter(r=>r.pos===e)}function DO(t,e){return t.filter(r=>gV.indexOf(r.pos)===-1&&r.box.axis===e)}function jv(t,e){return t.sort((r,n)=>{const s=e?n:r,o=e?r:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Woe(t){const e=[];let r,n,s,o,c,u;for(r=0,n=(t||[]).length;r<n;++r)s=t[r],{position:o,options:{stack:c,stackWeight:u=1}}=s,e.push({index:r,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:c&&o+c,stackWeight:u});return e}function Koe(t){const e={};for(const r of t){const{stack:n,pos:s,stackWeight:o}=r;if(!n||!gV.includes(s))continue;const c=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return e}function Xoe(t,e){const r=Koe(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let o,c,u;for(o=0,c=t.length;o<c;++o){u=t[o];const{fullSize:i}=u.box,A=r[u.stack],g=A&&u.stackWeight/A.weight;u.horizontal?(u.width=g?g*n:i&&e.availableWidth,u.height=s):(u.width=n,u.height=g?g*s:i&&e.availableHeight)}return r}function Yoe(t){const e=Woe(t),r=jv(e.filter(A=>A.box.fullSize),!0),n=jv(Mv(e,"left"),!0),s=jv(Mv(e,"right")),o=jv(Mv(e,"top"),!0),c=jv(Mv(e,"bottom")),u=DO(e,"x"),i=DO(e,"y");return{fullSize:r,leftAndTop:n.concat(o),rightAndBottom:s.concat(i).concat(c).concat(u),chartArea:Mv(e,"chartArea"),vertical:n.concat(s).concat(i),horizontal:o.concat(c).concat(u)}}function OO(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function yV(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Zoe(t,e,r,n){const{pos:s,box:o}=r,c=t.maxPadding;if(!Rs(s)){r.size&&(t[s]-=r.size);const C=n[r.stack]||{size:0,count:1};C.size=Math.max(C.size,r.horizontal?o.height:o.width),r.size=C.size/C.count,t[s]+=r.size}o.getPadding&&yV(c,o.getPadding());const u=Math.max(0,e.outerWidth-OO(c,t,"left","right")),i=Math.max(0,e.outerHeight-OO(c,t,"top","bottom")),A=u!==t.w,g=i!==t.h;return t.w=u,t.h=i,r.horizontal?{same:A,other:g}:{same:g,other:A}}function Joe(t){const e=t.maxPadding;function r(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function eae(t,e){const r=e.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(c=>{o[c]=Math.max(e[c],r[c])}),o}return n(t?["left","right"]:["top","bottom"])}function rx(t,e,r,n){const s=[];let o,c,u,i,A,g;for(o=0,c=t.length,A=0;o<c;++o){u=t[o],i=u.box,i.update(u.width||e.w,u.height||e.h,eae(u.horizontal,e));const{same:C,other:B}=Zoe(e,r,u,n);A|=C&&s.length,g=g||B,i.fullSize||s.push(u)}return A&&rx(s,e,r,n)||g}function Qw(t,e,r,n,s){t.top=r,t.left=e,t.right=e+n,t.bottom=r+s,t.width=n,t.height=s}function RO(t,e,r,n){const s=r.padding;let{x:o,y:c}=e;for(const u of t){const i=u.box,A=n[u.stack]||{count:1,placed:0,weight:1},g=u.stackWeight/A.weight||1;if(u.horizontal){const C=e.w*g,B=A.size||i.height;$h(A.start)&&(c=A.start),i.fullSize?Qw(i,s.left,c,r.outerWidth-s.right-s.left,B):Qw(i,e.left+A.placed,c,C,B),A.start=c,A.placed+=C,c=i.bottom}else{const C=e.h*g,B=A.size||i.width;$h(A.start)&&(o=A.start),i.fullSize?Qw(i,o,s.top,B,r.outerHeight-s.bottom-s.top):Qw(i,o,e.top+A.placed,B,C),A.start=o,A.placed+=C,o=i.right}}e.x=o,e.y=c}var Ku={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const s=Lc(t.options.layout.padding),o=Math.max(e-s.width,0),c=Math.max(r-s.height,0),u=Yoe(t.boxes),i=u.vertical,A=u.horizontal;_a(t.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const g=i.reduce((j,R)=>R.box.options&&R.box.options.display===!1?j:j+1,0)||1,C=Object.freeze({outerWidth:e,outerHeight:r,padding:s,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/g,hBoxMaxHeight:c/2}),B=Object.assign({},s);yV(B,Lc(n));const S=Object.assign({maxPadding:B,w:o,h:c,x:s.left,y:s.top},s),P=Xoe(i.concat(A),C);rx(u.fullSize,S,C,P),rx(i,S,C,P),rx(A,S,C,P)&&rx(i,S,C,P),Joe(S),RO(u.leftAndTop,S,C,P),S.x+=S.w,S.y+=S.h,RO(u.rightAndBottom,S,C,P),t.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},_a(u.chartArea,j=>{const R=j.box;Object.assign(R,t.chartArea),R.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class vV{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,s){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,s?Math.floor(r/s):n)}}isAttached(e){return!0}updateConfig(e){}}class tae extends vV{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const i5="$chartjs",rae={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},UO=t=>t===null||t==="";function nae(t,e){const r=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[i5]={initial:{height:n,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",UO(s)){const o=wO(t,"width");o!==void 0&&(t.width=o)}if(UO(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=wO(t,"height");o!==void 0&&(t.height=o)}return t}const xV=soe?{passive:!0}:!1;function iae(t,e,r){t&&t.addEventListener(e,r,xV)}function sae(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,xV)}function oae(t,e){const r=rae[t.type]||t.type,{x:n,y:s}=Fg(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function i4(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function aae(t,e,r){const n=t.canvas,s=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||i4(u.addedNodes,n),c=c&&!i4(u.removedNodes,n);c&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}function lae(t,e,r){const n=t.canvas,s=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||i4(u.removedNodes,n),c=c&&!i4(u.addedNodes,n);c&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}const w_=new Map;let zO=0;function _V(){const t=window.devicePixelRatio;t!==zO&&(zO=t,w_.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function cae(t,e){w_.size||window.addEventListener("resize",_V),w_.set(t,e)}function uae(t){w_.delete(t),w_.size||window.removeEventListener("resize",_V)}function hae(t,e,r){const n=t.canvas,s=n&&bF(n);if(!s)return;const o=ZH((u,i)=>{const A=s.clientWidth;r(u,i),A<s.clientWidth&&r()},window),c=new ResizeObserver(u=>{const i=u[0],A=i.contentRect.width,g=i.contentRect.height;A===0&&g===0||o(A,g)});return c.observe(s),cae(t,o),c}function ME(t,e,r){r&&r.disconnect(),e==="resize"&&uae(t)}function dae(t,e,r){const n=t.canvas,s=ZH(o=>{t.ctx!==null&&r(oae(o,t))},t);return iae(n,e,s),s}class fae extends vV{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(nae(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[i5])return!1;const n=r[i5].initial;["height","width"].forEach(o=>{const c=n[o];Go(c)?r.removeAttribute(o):r.setAttribute(o,c)});const s=n.style||{};return Object.keys(s).forEach(o=>{r.style[o]=s[o]}),r.width=r.width,delete r[i5],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const s=e.$proxies||(e.$proxies={}),c={attach:aae,detach:lae,resize:hae}[r]||dae;s[r]=c(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),s=n[r];if(!s)return;({attach:ME,detach:ME,resize:ME}[r]||sae)(e,r,s),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,s){return ioe(e,r,n,s)}isAttached(e){const r=e&&bF(e);return!!(r&&r.isConnected)}}function pae(t){return!_F()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?tae:fae}var U2;let eh=(U2=class{constructor(){ni(this,"x");ni(this,"y");ni(this,"active",!1);ni(this,"options");ni(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Hm(this.x)&&Hm(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const s={};return e.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}},ni(U2,"defaults",{}),ni(U2,"defaultRoutes"),U2);function Aae(t,e){const r=t.options.ticks,n=mae(t),s=Math.min(r.maxTicksLimit||n,n),o=r.major.enabled?yae(e):[],c=o.length,u=o[0],i=o[c-1],A=[];if(c>s)return vae(e,A,o,c/s),A;const g=gae(o,e,s);if(c>0){let C,B;const S=c>1?Math.round((i-u)/(c-1)):null;for(Hw(e,A,g,Go(S)?0:u-S,u),C=0,B=c-1;C<B;C++)Hw(e,A,g,o[C],o[C+1]);return Hw(e,A,g,i,Go(S)?e.length:i+S),A}return Hw(e,A,g),A}function mae(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),s=t._maxLength/r;return Math.floor(Math.min(n,s))}function gae(t,e,r){const n=xae(t),s=e.length/r;if(!n)return Math.max(s,1);const o=lse(n);for(let c=0,u=o.length-1;c<u;c++){const i=o[c];if(i>s)return i}return Math.max(s,1)}function yae(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function vae(t,e,r,n){let s=0,o=r[0],c;for(n=Math.ceil(n),c=0;c<t.length;c++)c===o&&(e.push(t[c]),s++,o=r[s*n])}function Hw(t,e,r,n,s){const o=gs(n,0),c=Math.min(gs(s,t.length),t.length);let u=0,i,A,g;for(r=Math.ceil(r),s&&(i=s-n,r=i/Math.floor(i/r)),g=o;g<0;)u++,g=Math.round(o+u*r);for(A=Math.max(o,0);A<c;A++)A===g&&(e.push(t[A]),u++,g=Math.round(o+u*r))}function xae(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const _ae=t=>t==="left"?"right":t==="right"?"left":t,QO=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,HO=(t,e)=>Math.min(e||t,t);function VO(t,e){const r=[],n=t.length/e,s=t.length;let o=0;for(;o<s;o+=n)r.push(t[Math.floor(o)]);return r}function bae(t,e,r){const n=t.ticks.length,s=Math.min(e,n-1),o=t._startPixel,c=t._endPixel,u=1e-6;let i=t.getPixelForTick(s),A;if(!(r&&(n===1?A=Math.max(i-o,c-i):e===0?A=(t.getPixelForTick(1)-i)/2:A=(i-t.getPixelForTick(s-1))/2,i+=s<e?A:-A,i<o-u||i>c+u)))return i}function wae(t,e){_a(t,r=>{const n=r.gc,s=n.length/2;let o;if(s>e){for(o=0;o<s;++o)delete r.data[n[o]];n.splice(0,s)}})}function kv(t){return t.drawTicks?t.tickLength:0}function GO(t,e){if(!t.display)return 0;const r=rc(t.font,e),n=Lc(t.padding);return(ha(t.text)?t.text.length:1)*r.lineHeight+n.height}function Cae(t,e){return sg(t,{scale:e,type:"scale"})}function Sae(t,e,r){return sg(t,{tick:r,index:e,type:"tick"})}function Bae(t,e,r){let n=AF(t);return(r&&e!=="right"||!r&&e==="right")&&(n=_ae(n)),n}function Eae(t,e,r,n){const{top:s,left:o,bottom:c,right:u,chart:i}=t,{chartArea:A,scales:g}=i;let C=0,B,S,P;const j=c-s,R=u-o;if(t.isHorizontal()){if(S=Vu(n,o,u),Rs(r)){const N=Object.keys(r)[0],U=r[N];P=g[N].getPixelForValue(U)+j-e}else r==="center"?P=(A.bottom+A.top)/2+j-e:P=QO(t,r,e);B=u-o}else{if(Rs(r)){const N=Object.keys(r)[0],U=r[N];S=g[N].getPixelForValue(U)-R+e}else r==="center"?S=(A.left+A.right)/2-R+e:S=QO(t,r,e);P=Vu(n,c,s),C=r==="left"?-ml:ml}return{titleX:S,titleY:P,maxWidth:B,rotation:C}}class C0 extends eh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:s}=this;return e=ad(e,Number.POSITIVE_INFINITY),r=ad(r,Number.NEGATIVE_INFINITY),n=ad(n,Number.POSITIVE_INFINITY),s=ad(s,Number.NEGATIVE_INFINITY),{min:ad(e,n),max:ad(r,s),minDefined:Cl(e),maxDefined:Cl(r)}}getMinMax(e){let{min:r,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),c;if(s&&o)return{min:r,max:n};const u=this.getMatchingVisibleMetas();for(let i=0,A=u.length;i<A;++i)c=u[i].controller.getMinMax(this,e),s||(r=Math.min(r,c.min)),o||(n=Math.max(n,c.max));return r=o&&r>n?n:r,n=s&&r>n?r:n,{min:ad(r,ad(n,r)),max:ad(n,ad(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xa(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:s,grace:o,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=kse(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const i=u<this.ticks.length;this._convertTicksToLabels(i?VO(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=Aae(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),i&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xa(this.options.afterUpdate,[this])}beforeSetDimensions(){xa(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xa(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),xa(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xa(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,s,o;for(n=0,s=e.length;n<s;n++)o=e[n],o.label=xa(r.callback,[o.value,n,e],this)}afterTickToLabelConversion(){xa(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xa(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=HO(this.ticks.length,e.ticks.maxTicksLimit),s=r.minRotation||0,o=r.maxRotation;let c=s,u,i,A;if(!this._isVisible()||!r.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const g=this._getLabelSizes(),C=g.widest.width,B=g.highest.height,S=tu(this.chart.width-C,0,this.maxWidth);u=e.offset?this.maxWidth/n:S/(n-1),C+6>u&&(u=S/(n-(e.offset?.5:1)),i=this.maxHeight-kv(e.grid)-r.padding-GO(e.title,this.chart.options.font),A=Math.sqrt(C*C+B*B),c=lC(Math.min(Math.asin(tu((g.highest.height+6)/u,-1,1)),Math.asin(tu(i/A,-1,1))-Math.asin(tu(B/A,-1,1)))),c=Math.max(s,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){xa(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xa(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:s,grid:o}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const i=GO(s,r.options.font);if(u?(e.width=this.maxWidth,e.height=kv(o)+i):(e.height=this.maxHeight,e.width=kv(o)+i),n.display&&this.ticks.length){const{first:A,last:g,widest:C,highest:B}=this._getLabelSizes(),S=n.padding*2,P=Ic(this.labelRotation),j=Math.cos(P),R=Math.sin(P);if(u){const N=n.mirror?0:R*C.width+j*B.height;e.height=Math.min(this.maxHeight,e.height+N+S)}else{const N=n.mirror?0:j*C.width+R*B.height;e.width=Math.min(this.maxWidth,e.width+N+S)}this._calculatePadding(A,g,R,j)}}this._handleMargins(),u?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,s){const{ticks:{align:o,padding:c},position:u}=this.options,i=this.labelRotation!==0,A=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,C=this.right-this.getPixelForTick(this.ticks.length-1);let B=0,S=0;i?A?(B=s*e.width,S=n*r.height):(B=n*e.height,S=s*r.width):o==="start"?S=r.width:o==="end"?B=e.width:o!=="inner"&&(B=e.width/2,S=r.width/2),this.paddingLeft=Math.max((B-g+c)*this.width/(this.width-g),0),this.paddingRight=Math.max((S-C+c)*this.width/(this.width-C),0)}else{let g=r.height/2,C=e.height/2;o==="start"?(g=0,C=e.height):o==="end"&&(g=r.height,C=0),this.paddingTop=g+c,this.paddingBottom=C+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xa(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Go(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=VO(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:s,_longestTextCache:o}=this,c=[],u=[],i=Math.floor(r/HO(r,n));let A=0,g=0,C,B,S,P,j,R,N,U,$,J,te;for(C=0;C<r;C+=i){if(P=e[C].label,j=this._resolveTickFontOptions(C),s.font=R=j.string,N=o[R]=o[R]||{data:{},gc:[]},U=j.lineHeight,$=J=0,!Go(P)&&!ha(P))$=t4(s,N.data,N.gc,$,P),J=U;else if(ha(P))for(B=0,S=P.length;B<S;++B)te=P[B],!Go(te)&&!ha(te)&&($=t4(s,N.data,N.gc,$,te),J+=U);c.push($),u.push(J),A=Math.max($,A),g=Math.max(J,g)}wae(o,r);const ue=c.indexOf(A),oe=u.indexOf(g),K=ce=>({width:c[ce]||0,height:u[ce]||0});return{first:K(0),last:K(r-1),widest:K(ue),highest:K(oe),widths:c,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return hse(this._alignToPixels?_g(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=Sae(this.getContext(),e,n))}return this.$context||(this.$context=Cae(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Ic(this.labelRotation),n=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),o=this._getLabelSizes(),c=e.autoSkipPadding||0,u=o?o.widest.width+c:0,i=o?o.highest.height+c:0;return this.isHorizontal()?i*n>u*s?u/n:i/s:i*s<u*n?i/n:u/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,s=this.options,{grid:o,position:c,border:u}=s,i=o.offset,A=this.isHorizontal(),C=this.ticks.length+(i?1:0),B=kv(o),S=[],P=u.setContext(this.getContext()),j=P.display?P.width:0,R=j/2,N=function(De){return _g(n,De,j)};let U,$,J,te,ue,oe,K,ce,me,Z,Y,Le;if(c==="top")U=N(this.bottom),oe=this.bottom-B,ce=U-R,Z=N(e.top)+R,Le=e.bottom;else if(c==="bottom")U=N(this.top),Z=e.top,Le=N(e.bottom)-R,oe=U+R,ce=this.top+B;else if(c==="left")U=N(this.right),ue=this.right-B,K=U-R,me=N(e.left)+R,Y=e.right;else if(c==="right")U=N(this.left),me=e.left,Y=N(e.right)-R,ue=U+R,K=this.left+B;else if(r==="x"){if(c==="center")U=N((e.top+e.bottom)/2+.5);else if(Rs(c)){const De=Object.keys(c)[0],Be=c[De];U=N(this.chart.scales[De].getPixelForValue(Be))}Z=e.top,Le=e.bottom,oe=U+R,ce=oe+B}else if(r==="y"){if(c==="center")U=N((e.left+e.right)/2);else if(Rs(c)){const De=Object.keys(c)[0],Be=c[De];U=N(this.chart.scales[De].getPixelForValue(Be))}ue=U-R,K=ue-B,me=e.left,Y=e.right}const _e=gs(s.ticks.maxTicksLimit,C),Qe=Math.max(1,Math.ceil(C/_e));for($=0;$<C;$+=Qe){const De=this.getContext($),Be=o.setContext(De),xe=u.setContext(De),ze=Be.lineWidth,Fe=Be.color,it=xe.dash||[],ie=xe.dashOffset,le=Be.tickWidth,fe=Be.tickColor,be=Be.tickBorderDash||[],He=Be.tickBorderDashOffset;J=bae(this,$,i),J!==void 0&&(te=_g(n,J,ze),A?ue=K=me=Y=te:oe=ce=Z=Le=te,S.push({tx1:ue,ty1:oe,tx2:K,ty2:ce,x1:me,y1:Z,x2:Y,y2:Le,width:ze,color:Fe,borderDash:it,borderDashOffset:ie,tickWidth:le,tickColor:fe,tickBorderDash:be,tickBorderDashOffset:He}))}return this._ticksLength=C,this._borderValue=U,S}_computeLabelItems(e){const r=this.axis,n=this.options,{position:s,ticks:o}=n,c=this.isHorizontal(),u=this.ticks,{align:i,crossAlign:A,padding:g,mirror:C}=o,B=kv(n.grid),S=B+g,P=C?-g:S,j=-Ic(this.labelRotation),R=[];let N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le="middle";if(s==="top")ue=this.bottom-P,oe=this._getXAxisLabelAlignment();else if(s==="bottom")ue=this.top+P,oe=this._getXAxisLabelAlignment();else if(s==="left"){const Qe=this._getYAxisLabelAlignment(B);oe=Qe.textAlign,te=Qe.x}else if(s==="right"){const Qe=this._getYAxisLabelAlignment(B);oe=Qe.textAlign,te=Qe.x}else if(r==="x"){if(s==="center")ue=(e.top+e.bottom)/2+S;else if(Rs(s)){const Qe=Object.keys(s)[0],De=s[Qe];ue=this.chart.scales[Qe].getPixelForValue(De)+S}oe=this._getXAxisLabelAlignment()}else if(r==="y"){if(s==="center")te=(e.left+e.right)/2-S;else if(Rs(s)){const Qe=Object.keys(s)[0],De=s[Qe];te=this.chart.scales[Qe].getPixelForValue(De)}oe=this._getYAxisLabelAlignment(B).textAlign}r==="y"&&(i==="start"?Le="top":i==="end"&&(Le="bottom"));const _e=this._getLabelSizes();for(N=0,U=u.length;N<U;++N){$=u[N],J=$.label;const Qe=o.setContext(this.getContext(N));K=this.getPixelForTick(N)+o.labelOffset,ce=this._resolveTickFontOptions(N),me=ce.lineHeight,Z=ha(J)?J.length:1;const De=Z/2,Be=Qe.color,xe=Qe.textStrokeColor,ze=Qe.textStrokeWidth;let Fe=oe;c?(te=K,oe==="inner"&&(N===U-1?Fe=this.options.reverse?"left":"right":N===0?Fe=this.options.reverse?"right":"left":Fe="center"),s==="top"?A==="near"||j!==0?Y=-Z*me+me/2:A==="center"?Y=-_e.highest.height/2-De*me+me:Y=-_e.highest.height+me/2:A==="near"||j!==0?Y=me/2:A==="center"?Y=_e.highest.height/2-De*me:Y=_e.highest.height-Z*me,C&&(Y*=-1),j!==0&&!Qe.showLabelBackdrop&&(te+=me/2*Math.sin(j))):(ue=K,Y=(1-Z)*me/2);let it;if(Qe.showLabelBackdrop){const ie=Lc(Qe.backdropPadding),le=_e.heights[N],fe=_e.widths[N];let be=Y-ie.top,He=0-ie.left;switch(Le){case"middle":be-=le/2;break;case"bottom":be-=le;break}switch(oe){case"center":He-=fe/2;break;case"right":He-=fe;break;case"inner":N===U-1?He-=fe:N>0&&(He-=fe/2);break}it={left:He,top:be,width:fe+ie.width,height:le+ie.height,color:Qe.backdropColor}}R.push({label:J,font:ce,textOffset:Y,options:{rotation:j,color:Be,strokeColor:xe,strokeWidth:ze,textAlign:Fe,textBaseline:Le,translation:[te,ue],backdrop:it}})}return R}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Ic(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,c=this._getLabelSizes(),u=e+o,i=c.widest.width;let A,g;return r==="left"?s?(g=this.right+o,n==="near"?A="left":n==="center"?(A="center",g+=i/2):(A="right",g+=i)):(g=this.right-u,n==="near"?A="right":n==="center"?(A="center",g-=i/2):(A="left",g=this.left)):r==="right"?s?(g=this.left+o,n==="near"?A="right":n==="center"?(A="center",g-=i/2):(A="left",g-=i)):(g=this.left+u,n==="near"?A="left":n==="center"?(A="center",g+=i/2):(A="right",g=this.right)):A="right",{textAlign:A,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:s,width:o,height:c}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,s,o,c),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,c;const u=(i,A,g)=>{!g.width||!g.color||(n.save(),n.lineWidth=g.width,n.strokeStyle=g.color,n.setLineDash(g.borderDash||[]),n.lineDashOffset=g.borderDashOffset,n.beginPath(),n.moveTo(i.x,i.y),n.lineTo(A.x,A.y),n.stroke(),n.restore())};if(r.display)for(o=0,c=s.length;o<c;++o){const i=s[o];r.drawOnChartArea&&u({x:i.x1,y:i.y1},{x:i.x2,y:i.y2},i),r.drawTicks&&u({x:i.tx1,y:i.ty1},{x:i.tx2,y:i.ty2},{color:i.tickColor,width:i.tickWidth,borderDash:i.tickBorderDash,borderDashOffset:i.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),c=n.display?o.width:0;if(!c)return;const u=s.setContext(this.getContext(0)).lineWidth,i=this._borderValue;let A,g,C,B;this.isHorizontal()?(A=_g(e,this.left,c)-c/2,g=_g(e,this.right,u)+u/2,C=B=i):(C=_g(e,this.top,c)-c/2,B=_g(e,this.bottom,u)+u/2,A=g=i),r.save(),r.lineWidth=o.width,r.strokeStyle=o.color,r.beginPath(),r.moveTo(A,C),r.lineTo(g,B),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Z_(n,s);const o=this.getLabelItems(e);for(const c of o){const u=c.options,i=c.font,A=c.label,g=c.textOffset;g0(n,A,0,g,i,u)}s&&J_(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:s}}=this;if(!n.display)return;const o=rc(n.font),c=Lc(n.padding),u=n.align;let i=o.lineHeight/2;r==="bottom"||r==="center"||Rs(r)?(i+=c.bottom,ha(n.text)&&(i+=o.lineHeight*(n.text.length-1))):i+=c.top;const{titleX:A,titleY:g,maxWidth:C,rotation:B}=Eae(this,i,r,u);g0(e,n.text,0,0,o,{color:n.color,maxWidth:C,rotation:B,textAlign:Bae(u,r,s),textBaseline:"middle",translation:[A,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=gs(e.grid&&e.grid.z,-1),s=gs(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==C0.prototype.draw?[{z:r,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:r,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,c;for(o=0,c=r.length;o<c;++o){const u=r[o];u[n]===this.id&&(!e||u.type===e)&&s.push(u)}return s}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return rc(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vw{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;Lae(r)&&(n=this.register(r));const s=this.items,o=e.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,Tae(e,c,n),this.override&&gl.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,s=this.scope;n in r&&delete r[n],s&&n in gl[s]&&(delete gl[s][n],this.override&&delete m0[n])}}function Tae(t,e,r){const n=__(Object.create(null),[r?gl.get(r):{},gl.get(e),t.defaults]);gl.set(e,n),t.defaultRoutes&&Iae(e,t.defaultRoutes),t.descriptors&&gl.describe(e,t.descriptors)}function Iae(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),s=n.pop(),o=[t].concat(n).join("."),c=e[r].split("."),u=c.pop(),i=c.join(".");gl.route(o,s,i,u)})}function Lae(t){return"id"in t&&"defaults"in t}class Fae{constructor(){this.controllers=new Vw(jf,"datasets",!0),this.elements=new Vw(eh,"elements"),this.plugins=new Vw(Object,"plugins"),this.scales=new Vw(C0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):_a(s,c=>{const u=n||this._getRegistryForType(c);this._exec(e,u,c)})})}_exec(e,r,n){const s=dF(e);xa(n["before"+s],[],n),r[e](n),xa(n["after"+s],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const s=r.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var hp=new Fae;class Nae{constructor(){this._init=[]}notify(e,r,n,s){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=s?this._descriptors(e).filter(s):this._descriptors(e),c=this._notify(o,e,r,n);return r==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),c}_notify(e,r,n,s){s=s||{};for(const o of e){const c=o.plugin,u=c[n],i=[r,s,o.options];if(xa(u,i,c)===!1&&s.cancelable)return!1}return!0}invalidate(){Go(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,s=gs(n.options&&n.options.plugins,{}),o=Pae(n);return s===!1&&!r?[]:jae(e,o,s,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,s=(o,c)=>o.filter(u=>!c.some(i=>u.plugin.id===i.plugin.id));this._notify(s(r,n),e,"stop"),this._notify(s(n,r),e,"start")}}function Pae(t){const e={},r=[],n=Object.keys(hp.plugins.items);for(let o=0;o<n.length;o++)r.push(hp.getPlugin(n[o]));const s=t.plugins||[];for(let o=0;o<s.length;o++){const c=s[o];r.indexOf(c)===-1&&(r.push(c),e[c.id]=!0)}return{plugins:r,localIds:e}}function Mae(t,e){return!e&&t===!1?null:t===!0?{}:t}function jae(t,{plugins:e,localIds:r},n,s){const o=[],c=t.getContext();for(const u of e){const i=u.id,A=Mae(n[i],s);A!==null&&o.push({plugin:u,options:kae(t.config,{plugin:u,local:r[i]},A,c)})}return o}function kae(t,{plugin:e,local:r},n,s){const o=t.pluginScopeKeys(e),c=t.getOptionScopes(n,o);return r&&e.defaults&&c.push(e.defaults),t.createResolver(c,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function l6(t,e){const r=gl.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function Dae(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function Oae(t,e){return t===e?"_index_":"_value_"}function qO(t){if(t==="x"||t==="y"||t==="r")return t}function Rae(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function c6(t,...e){if(qO(t))return t;for(const r of e){const n=r.axis||Rae(r.position)||t.length>1&&qO(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function $O(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function Uae(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return $O(t,"x",r[0])||$O(t,"y",r[0])}return{}}function zae(t,e){const r=m0[t.type]||{scales:{}},n=e.scales||{},s=l6(t.type,e),o=Object.create(null);return Object.keys(n).forEach(c=>{const u=n[c];if(!Rs(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const i=c6(c,u,Uae(c,t),gl.scales[u.type]),A=Oae(i,s),g=r.scales||{};o[c]=Bx(Object.create(null),[{axis:i},u,g[i],g[A]])}),t.data.datasets.forEach(c=>{const u=c.type||t.type,i=c.indexAxis||l6(u,e),g=(m0[u]||{}).scales||{};Object.keys(g).forEach(C=>{const B=Dae(C,i),S=c[B+"AxisID"]||B;o[S]=o[S]||Object.create(null),Bx(o[S],[{axis:B},n[S],g[C]])})}),Object.keys(o).forEach(c=>{const u=o[c];Bx(u,[gl.scales[u.type],gl.scale])}),o}function bV(t){const e=t.options||(t.options={});e.plugins=gs(e.plugins,{}),e.scales=zae(t,e)}function wV(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Qae(t){return t=t||{},t.data=wV(t.data),bV(t),t}const WO=new Map,CV=new Set;function Gw(t,e){let r=WO.get(t);return r||(r=e(),WO.set(t,r),CV.add(r)),r}const Dv=(t,e,r)=>{const n=Qm(e,r);n!==void 0&&t.add(n)};class Hae{constructor(e){this._config=Qae(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=wV(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),bV(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Gw(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Gw(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Gw(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Gw(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let s=n.get(e);return(!s||r)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,r,n){const{options:s,type:o}=this,c=this._cachedScopes(e,n),u=c.get(r);if(u)return u;const i=new Set;r.forEach(g=>{e&&(i.add(e),g.forEach(C=>Dv(i,e,C))),g.forEach(C=>Dv(i,s,C)),g.forEach(C=>Dv(i,m0[o]||{},C)),g.forEach(C=>Dv(i,gl,C)),g.forEach(C=>Dv(i,o6,C))});const A=Array.from(i);return A.length===0&&A.push(Object.create(null)),CV.has(r)&&c.set(r,A),A}chartOptionScopes(){const{options:e,type:r}=this;return[e,m0[r]||{},gl.datasets[r]||{},{type:r},gl,o6]}resolveNamedOptions(e,r,n,s=[""]){const o={$shared:!0},{resolver:c,subPrefixes:u}=KO(this._resolverCache,e,s);let i=c;if(Gae(c,r)){o.$shared=!1,n=qh(n)?n():n;const A=this.createResolver(e,n,u);i=d1(c,n,A)}for(const A of r)o[A]=i[A];return o}createResolver(e,r,n=[""],s){const{resolver:o}=KO(this._resolverCache,e,n);return Rs(r)?d1(o,r,void 0,s):o}}function KO(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=r.join();let o=n.get(s);return o||(o={resolver:yF(e,r),subPrefixes:r.filter(u=>!u.toLowerCase().includes("hover"))},n.set(s,o)),o}const Vae=t=>Rs(t)&&Object.getOwnPropertyNames(t).some(e=>qh(t[e]));function Gae(t,e){const{isScriptable:r,isIndexable:n}=iV(t);for(const s of e){const o=r(s),c=n(s),u=(c||o)&&t[s];if(o&&(qh(u)||Vae(u))||c&&ha(u))return!0}return!1}var qae="4.4.6";const $ae=["top","bottom","left","right","chartArea"];function XO(t,e){return t==="top"||t==="bottom"||$ae.indexOf(t)===-1&&e==="x"}function YO(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function ZO(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),xa(r&&r.onComplete,[t],e)}function Wae(t){const e=t.chart,r=e.options.animation;xa(r&&r.onProgress,[t],e)}function SV(t){return _F()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const s5={},JO=t=>{const e=SV(t);return Object.values(s5).filter(r=>r.canvas===e).pop()};function Kae(t,e,r){const n=Object.keys(t);for(const s of n){const o=+s;if(o>=e){const c=t[s];delete t[s],(r>0||o>e)&&(t[o+r]=c)}}}function Xae(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}function qw(t,e,r){return t.options.clip?t[r]:e[r]}function Yae(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:qw(r,e,"left"),right:qw(r,e,"right"),top:qw(n,e,"top"),bottom:qw(n,e,"bottom")}:e}var KA;let fd=(KA=class{static register(...e){hp.add(...e),e8()}static unregister(...e){hp.remove(...e),e8()}constructor(e,r){const n=this.config=new Hae(r),s=SV(e),o=JO(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||pae(s)),this.platform.updateConfig(n);const u=this.platform.acquireContext(s,c.aspectRatio),i=u&&u.canvas,A=i&&i.height,g=i&&i.width;if(this.id=ese(),this.ctx=u,this.canvas=i,this.width=g,this.height=A,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Nae,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ase(C=>this.update(C),c.resizeDelay||0),this._dataChanges=[],s5[this.id]=this,!u||!i){console.error("Failed to create chart: can't acquire context from the given item");return}qp.listen(this,"complete",ZO),qp.listen(this,"progress",Wae),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:s,_aspectRatio:o}=this;return Go(e)?r&&o?o:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return hp}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bO(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vO(this.canvas,this.ctx),this}stop(){return qp.stop(this),this}resize(e,r){qp.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(s,e,r,o),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),i=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,bO(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),xa(n.onResize,[this,c],this),this.attached&&this._doResize(i)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};_a(r,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,s=Object.keys(n).reduce((c,u)=>(c[u]=!1,c),{});let o=[];r&&(o=o.concat(Object.keys(r).map(c=>{const u=r[c],i=c6(c,u),A=i==="r",g=i==="x";return{options:u,dposition:A?"chartArea":g?"bottom":"left",dtype:A?"radialLinear":g?"category":"linear"}}))),_a(o,c=>{const u=c.options,i=u.id,A=c6(i,u),g=gs(u.type,c.dtype);(u.position===void 0||XO(u.position,A)!==XO(c.dposition))&&(u.position=c.dposition),s[i]=!0;let C=null;if(i in n&&n[i].type===g)C=n[i];else{const B=hp.getScale(g);C=new B({id:i,type:g,ctx:this.ctx,chart:this}),n[C.id]=C}C.init(u,e)}),_a(s,(c,u)=>{c||delete n[u]}),_a(n,c=>{Ku.configure(this,c,c.options),Ku.addBox(this,c)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((s,o)=>s.index-o.index),n>r){for(let s=r;s<n;++s)this._destroyDatasetMeta(s);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(YO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,s)=>{r.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=r.length;n<s;n++){const o=r[n];let c=this.getDatasetMeta(n);const u=o.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(n),c=this.getDatasetMeta(n)),c.type=u,c.indexAxis=o.indexAxis||l6(u,this.options),c.order=o.order||0,c.index=n,c.label=""+o.label,c.visible=this.isDatasetVisible(n),c.controller)c.controller.updateIndex(n),c.controller.linkScales();else{const i=hp.getController(u),{datasetElementType:A,dataElementType:g}=gl.datasets[u];Object.assign(i,{dataElementType:hp.getElement(g),datasetElementType:A&&hp.getElement(A)}),c.controller=new i(this,n),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){_a(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let A=0,g=this.data.datasets.length;A<g;A++){const{controller:C}=this.getDatasetMeta(A),B=!s&&o.indexOf(C)===-1;C.buildOrUpdateElements(B),c=Math.max(+C.getMaxOverflow(),c)}c=this._minPadding=n.layout.autoPadding?c:0,this._updateLayout(c),s||_a(o,A=>{A.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(YO("z","_idx"));const{_active:u,_lastEvent:i}=this;i?this._eventHandler(i,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){_a(this.scales,e=>{Ku.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!hO(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of r){const c=n==="_removeElements"?-o:o;Kae(e,s,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=o=>new Set(e.filter(c=>c[0]===o).map((c,u)=>u+","+c.splice(1).join(","))),s=n(0);for(let o=1;o<r;o++)if(!hO(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ku.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],_a(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,qh(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qp.has(this)?this.attached&&!qp.running(this)&&qp.start(this):(this.draw(),ZO({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let s,o;for(s=0,o=r.length;s<o;++s){const c=r[s];(!e||c.visible)&&n.push(c)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n=e._clip,s=!n.disabled,o=Yae(e,this.chartArea),c={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",c)!==!1&&(s&&Z_(r,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),s&&J_(r),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(e){return rA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,s){const o=$oe.modes[r];return typeof o=="function"?o(this,e,n,s):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let s=n.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=sg(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const s=n?"show":"hide",o=this.getDatasetMeta(e),c=o.controller._resolveAnimations(void 0,s);$h(r)?(o.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),c.update(o,{visible:n}),this.update(u=>u.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),qp.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),vO(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete s5[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(o,c)=>{r.addEventListener(this,o,c),e[o]=c},s=(o,c,u)=>{o.offsetX=c,o.offsetY=u,this._eventHandler(o)};_a(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(i,A)=>{r.addEventListener(this,i,A),e[i]=A},s=(i,A)=>{e[i]&&(r.removeEventListener(this,i,A),delete e[i])},o=(i,A)=>{this.canvas&&this.resize(i,A)};let c;const u=()=>{s("attach",u),this.attached=!0,this.resize(),n("resize",o),n("detach",c)};c=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",u)},r.isAttached(this.canvas)?u():c()}unbindEvents(){_a(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},_a(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const s=n?"set":"remove";let o,c,u,i;for(r==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),u=0,i=e.length;u<i;++u){c=e[u];const A=c&&this.getDatasetMeta(c.datasetIndex).controller;A&&A[s+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:o,index:c})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[c],index:c}});!X5(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const s=this.options.hover,o=(i,A)=>i.filter(g=>!A.some(C=>g.datasetIndex===C.datasetIndex&&g.index===C.index)),c=o(r,e),u=n?e:o(e,r);c.length&&this.updateHoverStyle(c,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:s=[],options:o}=this,c=r,u=this._getActiveElements(e,s,n,c),i=ose(e),A=Xae(e,this._lastEvent,n,i);n&&(this._lastEvent=null,xa(o.onHover,[e,u,this],this),i&&xa(o.onClick,[e,u,this],this));const g=!X5(u,s);return(g||r)&&(this._active=u,this._updateHoverStyles(u,s,r)),this._lastEvent=A,g}_getActiveElements(e,r,n,s){if(e.type==="mouseout")return[];if(!n)return r;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}},ni(KA,"defaults",gl),ni(KA,"instances",s5),ni(KA,"overrides",m0),ni(KA,"registry",hp),ni(KA,"version",qae),ni(KA,"getChart",JO),KA);function e8(){return _a(fd.instances,t=>t._plugins.invalidate())}function Zae(t,e,r){const{startAngle:n,pixelMargin:s,x:o,y:c,outerRadius:u,innerRadius:i}=e;let A=s/u;t.beginPath(),t.arc(o,c,u,n-A,r+A),i>s?(A=s/i,t.arc(o,c,i,r+A,n-A,!0)):t.arc(o,c,s,r+ml,n-ml),t.closePath(),t.clip()}function Jae(t){return gF(t,["outerStart","outerEnd","innerStart","innerEnd"])}function ele(t,e,r,n){const s=Jae(t.options.borderRadius),o=(r-e)/2,c=Math.min(o,n*e/2),u=i=>{const A=(r-Math.min(o,i))*n/2;return tu(i,0,Math.min(o,A))};return{outerStart:u(s.outerStart),outerEnd:u(s.outerEnd),innerStart:tu(s.innerStart,0,c),innerEnd:tu(s.innerEnd,0,c)}}function ry(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function s4(t,e,r,n,s,o){const{x:c,y:u,startAngle:i,pixelMargin:A,innerRadius:g}=e,C=Math.max(e.outerRadius+n+r-A,0),B=g>0?g+n+r+A:0;let S=0;const P=s-i;if(n){const Qe=g>0?g-n:0,De=C>0?C-n:0,Be=(Qe+De)/2,xe=Be!==0?P*Be/(Be+n):P;S=(P-xe)/2}const j=Math.max(.001,P*C-r/Co)/C,R=(P-j)/2,N=i+R+S,U=s-R-S,{outerStart:$,outerEnd:J,innerStart:te,innerEnd:ue}=ele(e,B,C,U-N),oe=C-$,K=C-J,ce=N+$/oe,me=U-J/K,Z=B+te,Y=B+ue,Le=N+te/Z,_e=U-ue/Y;if(t.beginPath(),o){const Qe=(ce+me)/2;if(t.arc(c,u,C,ce,Qe),t.arc(c,u,C,Qe,me),J>0){const ze=ry(K,me,c,u);t.arc(ze.x,ze.y,J,me,U+ml)}const De=ry(Y,U,c,u);if(t.lineTo(De.x,De.y),ue>0){const ze=ry(Y,_e,c,u);t.arc(ze.x,ze.y,ue,U+ml,_e+Math.PI)}const Be=(U-ue/B+(N+te/B))/2;if(t.arc(c,u,B,U-ue/B,Be,!0),t.arc(c,u,B,Be,N+te/B,!0),te>0){const ze=ry(Z,Le,c,u);t.arc(ze.x,ze.y,te,Le+Math.PI,N-ml)}const xe=ry(oe,N,c,u);if(t.lineTo(xe.x,xe.y),$>0){const ze=ry(oe,ce,c,u);t.arc(ze.x,ze.y,$,N-ml,ce)}}else{t.moveTo(c,u);const Qe=Math.cos(ce)*C+c,De=Math.sin(ce)*C+u;t.lineTo(Qe,De);const Be=Math.cos(me)*C+c,xe=Math.sin(me)*C+u;t.lineTo(Be,xe)}t.closePath()}function tle(t,e,r,n,s){const{fullCircles:o,startAngle:c,circumference:u}=e;let i=e.endAngle;if(o){s4(t,e,r,n,i,s);for(let A=0;A<o;++A)t.fill();isNaN(u)||(i=c+(u%za||za))}return s4(t,e,r,n,i,s),t.fill(),i}function rle(t,e,r,n,s){const{fullCircles:o,startAngle:c,circumference:u,options:i}=e,{borderWidth:A,borderJoinStyle:g,borderDash:C,borderDashOffset:B}=i,S=i.borderAlign==="inner";if(!A)return;t.setLineDash(C||[]),t.lineDashOffset=B,S?(t.lineWidth=A*2,t.lineJoin=g||"round"):(t.lineWidth=A,t.lineJoin=g||"bevel");let P=e.endAngle;if(o){s4(t,e,r,n,P,s);for(let j=0;j<o;++j)t.stroke();isNaN(u)||(P=c+(u%za||za))}S&&Zae(t,e,P),o||(s4(t,e,r,n,P,s),t.stroke())}class Fy extends eh{constructor(r){super();ni(this,"circumference");ni(this,"endAngle");ni(this,"fullCircles");ni(this,"innerRadius");ni(this,"outerRadius");ni(this,"pixelMargin");ni(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,s){const o=this.getProps(["x","y"],s),{angle:c,distance:u}=e4(o,{x:r,y:n}),{startAngle:i,endAngle:A,innerRadius:g,outerRadius:C,circumference:B}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),S=(this.options.spacing+this.options.borderWidth)/2,P=gs(B,A-i),j=b_(c,i,A)&&i!==A,R=P>=za||j,N=eA(u,g+S,C+S);return R&&N}getCenterPoint(r){const{x:n,y:s,startAngle:o,endAngle:c,innerRadius:u,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:A,spacing:g}=this.options,C=(o+c)/2,B=(u+i+g+A)/2;return{x:n+Math.cos(C)*B,y:s+Math.sin(C)*B}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:s}=this,o=(n.offset||0)/4,c=(n.spacing||0)/2,u=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>za?Math.floor(s/za):0,s===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const i=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(i)*o,Math.sin(i)*o);const A=1-Math.sin(Math.min(Co,s||0)),g=o*A;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,tle(r,this,g,c,u),rle(r,this,g,c,u),r.restore()}}ni(Fy,"id","arc"),ni(Fy,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ni(Fy,"defaultRoutes",{backgroundColor:"backgroundColor"}),ni(Fy,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function BV(t,e,r=e){t.lineCap=gs(r.borderCapStyle,e.borderCapStyle),t.setLineDash(gs(r.borderDash,e.borderDash)),t.lineDashOffset=gs(r.borderDashOffset,e.borderDashOffset),t.lineJoin=gs(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=gs(r.borderWidth,e.borderWidth),t.strokeStyle=gs(r.borderColor,e.borderColor)}function nle(t,e,r){t.lineTo(r.x,r.y)}function ile(t){return t.stepped?Ese:t.tension||t.cubicInterpolationMode==="monotone"?Tse:nle}function EV(t,e,r={}){const n=t.length,{start:s=0,end:o=n-1}=r,{start:c,end:u}=e,i=Math.max(s,c),A=Math.min(o,u),g=s<c&&o<c||s>u&&o>u;return{count:n,start:i,loop:e.loop,ilen:A<i&&!g?n+A-i:A-i}}function sle(t,e,r,n){const{points:s,options:o}=e,{count:c,start:u,loop:i,ilen:A}=EV(s,r,n),g=ile(o);let{move:C=!0,reverse:B}=n||{},S,P,j;for(S=0;S<=A;++S)P=s[(u+(B?A-S:S))%c],!P.skip&&(C?(t.moveTo(P.x,P.y),C=!1):g(t,j,P,B,o.stepped),j=P);return i&&(P=s[(u+(B?A:0))%c],g(t,j,P,B,o.stepped)),!!i}function ole(t,e,r,n){const s=e.points,{count:o,start:c,ilen:u}=EV(s,r,n),{move:i=!0,reverse:A}=n||{};let g=0,C=0,B,S,P,j,R,N;const U=J=>(c+(A?u-J:J))%o,$=()=>{j!==R&&(t.lineTo(g,R),t.lineTo(g,j),t.lineTo(g,N))};for(i&&(S=s[U(0)],t.moveTo(S.x,S.y)),B=0;B<=u;++B){if(S=s[U(B)],S.skip)continue;const J=S.x,te=S.y,ue=J|0;ue===P?(te<j?j=te:te>R&&(R=te),g=(C*g+J)/++C):($(),t.lineTo(J,te),P=ue,C=0,j=R=te),N=te}$()}function u6(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?ole:sle}function ale(t){return t.stepped?ooe:t.tension||t.cubicInterpolationMode==="monotone"?aoe:Ng}function lle(t,e,r,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,r,n)&&s.closePath()),BV(t,e.options),t.stroke(s)}function cle(t,e,r,n){const{segments:s,options:o}=e,c=u6(e);for(const u of s)BV(t,o,u.style),t.beginPath(),c(t,e,u,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const ule=typeof Path2D=="function";function hle(t,e,r,n){ule&&!e.options.segment?lle(t,e,r,n):cle(t,e,r,n)}class Uh extends eh{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;Zse(this._points,n,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=foe(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,s=e[r],o=this.points,c=pV(this,{property:r,start:s,end:s});if(!c.length)return;const u=[],i=ale(n);let A,g;for(A=0,g=c.length;A<g;++A){const{start:C,end:B}=c[A],S=o[C],P=o[B];if(S===P){u.push(S);continue}const j=Math.abs((s-S[r])/(P[r]-S[r])),R=i(S,P,j,n.stepped);R[r]=e[r],u.push(R)}return u.length===1?u[0]:u}pathSegment(e,r,n){return u6(this)(e,this,r,n)}path(e,r,n){const s=this.segments,o=u6(this);let c=this._loop;r=r||0,n=n||this.points.length-r;for(const u of s)c&=o(e,this,u,{start:r,end:r+n-1});return!!c}draw(e,r,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),hle(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ni(Uh,"id","line"),ni(Uh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ni(Uh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ni(Uh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function t8(t,e,r,n){const s=t.options,{[r]:o}=t.getProps([r],n);return Math.abs(e-o)<s.radius+s.hitRadius}class vp extends eh{constructor(r){super();ni(this,"parsed");ni(this,"skip");ni(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,s){const o=this.options,{x:c,y:u}=this.getProps(["x","y"],s);return Math.pow(r-c,2)+Math.pow(n-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(r,n){return t8(this,r,"x",n)}inYRange(r,n){return t8(this,r,"y",n)}getCenterPoint(r){const{x:n,y:s}=this.getProps(["x","y"],r);return{x:n,y:s}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const s=n&&r.borderWidth||0;return(n+s)*2}draw(r,n){const s=this.options;this.skip||s.radius<.1||!rA(this,n,this.size(s)/2)||(r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.fillStyle=s.backgroundColor,a6(r,s,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}ni(vp,"id","point"),ni(vp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ni(vp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function TV(t,e){const{x:r,y:n,base:s,width:o,height:c}=t.getProps(["x","y","base","width","height"],e);let u,i,A,g,C;return t.horizontal?(C=c/2,u=Math.min(r,s),i=Math.max(r,s),A=n-C,g=n+C):(C=o/2,u=r-C,i=r+C,A=Math.min(n,s),g=Math.max(n,s)),{left:u,top:A,right:i,bottom:g}}function pm(t,e,r,n){return t?0:tu(e,r,n)}function dle(t,e,r){const n=t.options.borderWidth,s=t.borderSkipped,o=nV(n);return{t:pm(s.top,o.top,0,r),r:pm(s.right,o.right,0,e),b:pm(s.bottom,o.bottom,0,r),l:pm(s.left,o.left,0,e)}}function fle(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=Mm(s),c=Math.min(e,r),u=t.borderSkipped,i=n||Rs(s);return{topLeft:pm(!i||u.top||u.left,o.topLeft,0,c),topRight:pm(!i||u.top||u.right,o.topRight,0,c),bottomLeft:pm(!i||u.bottom||u.left,o.bottomLeft,0,c),bottomRight:pm(!i||u.bottom||u.right,o.bottomRight,0,c)}}function ple(t){const e=TV(t),r=e.right-e.left,n=e.bottom-e.top,s=dle(t,r/2,n/2),o=fle(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:r-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function jE(t,e,r,n){const s=e===null,o=r===null,u=t&&!(s&&o)&&TV(t,n);return u&&(s||eA(e,u.left,u.right))&&(o||eA(r,u.top,u.bottom))}function Ale(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function mle(t,e){t.rect(e.x,e.y,e.w,e.h)}function kE(t,e,r={}){const n=t.x!==r.x?-e:0,s=t.y!==r.y?-e:0,o=(t.x+t.w!==r.x+r.w?e:0)-n,c=(t.y+t.h!==r.y+r.h?e:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+o,h:t.h+c,radius:t.radius}}class Px extends eh{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:c}=ple(this),u=Ale(c.radius)?h1:mle;e.save(),(c.w!==o.w||c.h!==o.h)&&(e.beginPath(),u(e,kE(c,r,o)),e.clip(),u(e,kE(o,-r,c)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),u(e,kE(o,r)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,r,n){return jE(this,e,r,n)}inXRange(e,r){return jE(this,e,null,r)}inYRange(e,r){return jE(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(r+s)/2:r,y:o?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ni(Px,"id","bar"),ni(Px,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ni(Px,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var gle=Object.freeze({__proto__:null,ArcElement:Fy,BarElement:Px,LineElement:Uh,PointElement:vp});const h6=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],r8=h6.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function IV(t){return h6[t%h6.length]}function LV(t){return r8[t%r8.length]}function yle(t,e){return t.borderColor=IV(e),t.backgroundColor=LV(e),++e}function vle(t,e){return t.backgroundColor=t.data.map(()=>IV(e++)),e}function xle(t,e){return t.backgroundColor=t.data.map(()=>LV(e++)),e}function _le(t){let e=0;return(r,n)=>{const s=t.getDatasetMeta(n).controller;s instanceof fm?e=vle(r,e):s instanceof Nx?e=xle(r,e):s&&(e=yle(r,e))}}function n8(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function ble(t){return t&&(t.borderColor||t.backgroundColor)}function wle(){return gl.borderColor!=="rgba(0,0,0,0.1)"||gl.backgroundColor!=="rgba(0,0,0,0.1)"}var Cle={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:s}=t.config,{elements:o}=s,c=n8(n)||ble(s)||o&&n8(o)||wle();if(!r.forceOverride&&c)return;const u=_le(t);n.forEach(u)}};function Sle(t,e,r,n,s){const o=s.samples||n;if(o>=r)return t.slice(e,e+r);const c=[],u=(r-2)/(o-2);let i=0;const A=e+r-1;let g=e,C,B,S,P,j;for(c[i++]=t[g],C=0;C<o-2;C++){let R=0,N=0,U;const $=Math.floor((C+1)*u)+1+e,J=Math.min(Math.floor((C+2)*u)+1,r)+e,te=J-$;for(U=$;U<J;U++)R+=t[U].x,N+=t[U].y;R/=te,N/=te;const ue=Math.floor(C*u)+1+e,oe=Math.min(Math.floor((C+1)*u)+1,r)+e,{x:K,y:ce}=t[g];for(S=P=-1,U=ue;U<oe;U++)P=.5*Math.abs((K-R)*(t[U].y-ce)-(K-t[U].x)*(N-ce)),P>S&&(S=P,B=t[U],j=U);c[i++]=B,g=j}return c[i++]=t[A],c}function Ble(t,e,r,n){let s=0,o=0,c,u,i,A,g,C,B,S,P,j;const R=[],N=e+r-1,U=t[e].x,J=t[N].x-U;for(c=e;c<e+r;++c){u=t[c],i=(u.x-U)/J*n,A=u.y;const te=i|0;if(te===g)A<P?(P=A,C=c):A>j&&(j=A,B=c),s=(o*s+u.x)/++o;else{const ue=c-1;if(!Go(C)&&!Go(B)){const oe=Math.min(C,B),K=Math.max(C,B);oe!==S&&oe!==ue&&R.push({...t[oe],x:s}),K!==S&&K!==ue&&R.push({...t[K],x:s})}c>0&&ue!==S&&R.push(t[ue]),R.push(u),g=te,o=0,P=j=A,C=B=S=c}}return R}function FV(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function i8(t){t.data.datasets.forEach(e=>{FV(e)})}function Ele(t,e){const r=e.length;let n=0,s;const{iScale:o}=t,{min:c,max:u,minDefined:i,maxDefined:A}=o.getUserBounds();return i&&(n=tu(tA(e,o.axis,c).lo,0,r-1)),A?s=tu(tA(e,o.axis,u).hi+1,n,r)-n:s=r-n,{start:n,count:s}}var Tle={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){i8(t);return}const n=t.width;t.data.datasets.forEach((s,o)=>{const{_data:c,indexAxis:u}=s,i=t.getDatasetMeta(o),A=c||s.data;if(tx([u,t.options.indexAxis])==="y"||!i.controller.supportsDecimation)return;const g=t.scales[i.xAxisID];if(g.type!=="linear"&&g.type!=="time"||t.options.parsing)return;let{start:C,count:B}=Ele(i,A);const S=r.threshold||4*n;if(B<=S){FV(s);return}Go(c)&&(s._data=A,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(j){this._data=j}}));let P;switch(r.algorithm){case"lttb":P=Sle(A,C,B,n,r);break;case"min-max":P=Ble(A,C,B,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}s._decimated=P})},destroy(t){i8(t)}};function Ile(t,e,r){const n=t.segments,s=t.points,o=e.points,c=[];for(const u of n){let{start:i,end:A}=u;A=SF(i,A,s);const g=d6(r,s[i],s[A],u.loop);if(!e.segments){c.push({source:u,target:g,start:s[i],end:s[A]});continue}const C=pV(e,g);for(const B of C){const S=d6(r,o[B.start],o[B.end],B.loop),P=fV(u,s,S);for(const j of P)c.push({source:j,target:B,start:{[r]:s8(g,S,"start",Math.max)},end:{[r]:s8(g,S,"end",Math.min)}})}}return c}function d6(t,e,r,n){if(n)return;let s=e[t],o=r[t];return t==="angle"&&(s=cd(s),o=cd(o)),{property:t,start:s,end:o}}function Lle(t,e){const{x:r=null,y:n=null}=t||{},s=e.points,o=[];return e.segments.forEach(({start:c,end:u})=>{u=SF(c,u,s);const i=s[c],A=s[u];n!==null?(o.push({x:i.x,y:n}),o.push({x:A.x,y:n})):r!==null&&(o.push({x:r,y:i.y}),o.push({x:r,y:A.y}))}),o}function SF(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function s8(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function NV(t,e){let r=[],n=!1;return ha(t)?(n=!0,r=t):r=Lle(t,e),r.length?new Uh({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function o8(t){return t&&t.fill!==!1}function Fle(t,e,r){let s=t[e].fill;const o=[e];let c;if(!r)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!Cl(s))return s;if(c=t[s],!c)return!1;if(c.visible)return s;o.push(s),s=c.fill}return!1}function Nle(t,e,r){const n=kle(t);if(Rs(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return Cl(s)&&Math.floor(s)===s?Ple(n[0],e,s,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Ple(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function Mle(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Rs(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function jle(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:Rs(t)?n=t.value:n=e.getBaseValue(),n}function kle(t){const e=t.options,r=e.fill;let n=gs(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Dle(t){const{scale:e,index:r,line:n}=t,s=[],o=n.segments,c=n.points,u=Ole(e,r);u.push(NV({x:null,y:e.bottom},n));for(let i=0;i<o.length;i++){const A=o[i];for(let g=A.start;g<=A.end;g++)Rle(s,c[g],u)}return new Uh({points:s,options:{}})}function Ole(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const o=n[s];if(o.index===e)break;o.hidden||r.unshift(o.dataset)}return r}function Rle(t,e,r){const n=[];for(let s=0;s<r.length;s++){const o=r[s],{first:c,last:u,point:i}=Ule(o,e,"x");if(!(!i||c&&u)){if(c)n.unshift(i);else if(t.push(i),!u)break}}t.push(...n)}function Ule(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const s=n[r],o=t.segments,c=t.points;let u=!1,i=!1;for(let A=0;A<o.length;A++){const g=o[A],C=c[g.start][r],B=c[g.end][r];if(eA(s,C,B)){u=s===C,i=s===B;break}}return{first:u,last:i,point:n}}class PV{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:s,y:o,radius:c}=this;return r=r||{start:0,end:za},e.arc(s,o,c,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:s}=this,o=e.angle;return{x:r+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}}function zle(t){const{chart:e,fill:r,line:n}=t;if(Cl(r))return Qle(e,r);if(r==="stack")return Dle(t);if(r==="shape")return!0;const s=Hle(t);return s instanceof PV?s:NV(s,n)}function Qle(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function Hle(t){return(t.scale||{}).getPointPositionForValue?Gle(t):Vle(t)}function Vle(t){const{scale:e={},fill:r}=t,n=Mle(r,e);if(Cl(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function Gle(t){const{scale:e,fill:r}=t,n=e.options,s=e.getLabels().length,o=n.reverse?e.max:e.min,c=jle(r,e,o),u=[];if(n.grid.circular){const i=e.getPointPositionForValue(0,o);return new PV({x:i.x,y:i.y,radius:e.getDistanceFromCenterForValue(c)})}for(let i=0;i<s;++i)u.push(e.getPointPositionForValue(i,c));return u}function DE(t,e,r){const n=zle(e),{line:s,scale:o,axis:c}=e,u=s.options,i=u.fill,A=u.backgroundColor,{above:g=A,below:C=A}=i||{};n&&s.points.length&&(Z_(t,r),qle(t,{line:s,target:n,above:g,below:C,area:r,scale:o,axis:c}),J_(t))}function qle(t,e){const{line:r,target:n,above:s,below:o,area:c,scale:u}=e,i=r._loop?"angle":e.axis;t.save(),i==="x"&&o!==s&&(a8(t,n,c.top),l8(t,{line:r,target:n,color:s,scale:u,property:i}),t.restore(),t.save(),a8(t,n,c.bottom)),l8(t,{line:r,target:n,color:o,scale:u,property:i}),t.restore()}function a8(t,e,r){const{segments:n,points:s}=e;let o=!0,c=!1;t.beginPath();for(const u of n){const{start:i,end:A}=u,g=s[i],C=s[SF(i,A,s)];o?(t.moveTo(g.x,g.y),o=!1):(t.lineTo(g.x,r),t.lineTo(g.x,g.y)),c=!!e.pathSegment(t,u,{move:c}),c?t.closePath():t.lineTo(C.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function l8(t,e){const{line:r,target:n,property:s,color:o,scale:c}=e,u=Ile(r,n,s);for(const{source:i,target:A,start:g,end:C}of u){const{style:{backgroundColor:B=o}={}}=i,S=n!==!0;t.save(),t.fillStyle=B,$le(t,c,S&&d6(s,g,C)),t.beginPath();const P=!!r.pathSegment(t,i);let j;if(S){P?t.closePath():c8(t,n,C,s);const R=!!n.pathSegment(t,A,{move:P,reverse:!0});j=P&&R,j||c8(t,n,g,s)}t.closePath(),t.fill(j?"evenodd":"nonzero"),t.restore()}}function $le(t,e,r){const{top:n,bottom:s}=e.chart.chartArea,{property:o,start:c,end:u}=r||{};o==="x"&&(t.beginPath(),t.rect(c,n,u-c,s-n),t.clip())}function c8(t,e,r,n){const s=e.interpolate(r,n);s&&t.lineTo(s.x,s.y)}var Wle={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,s=[];let o,c,u,i;for(c=0;c<n;++c)o=t.getDatasetMeta(c),u=o.dataset,i=null,u&&u.options&&u instanceof Uh&&(i={visible:t.isDatasetVisible(c),index:c,fill:Nle(u,c,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=i,s.push(i);for(c=0;c<n;++c)i=s[c],!(!i||i.fill===!1)&&(i.fill=Fle(s,c,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let c=s.length-1;c>=0;--c){const u=s[c].$filler;u&&(u.line.updateControlPoints(o,u.axis),n&&u.fill&&DE(t.ctx,u,o))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const o=n[s].$filler;o8(o)&&DE(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!o8(n)||r.drawTime!=="beforeDatasetDraw"||DE(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const u8=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},Kle=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class h8 extends eh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=xa(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=rc(n.font),o=s.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:i}=u8(n,o);let A,g;r.font=s.string,this.isHorizontal()?(A=this.maxWidth,g=this._fitRows(c,o,u,i)+10):(g=this.maxHeight,A=this._fitCols(c,s,u,i)+10),this.width=Math.min(A,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,s){const{ctx:o,maxWidth:c,options:{labels:{padding:u}}}=this,i=this.legendHitBoxes=[],A=this.lineWidths=[0],g=s+u;let C=e;o.textAlign="left",o.textBaseline="middle";let B=-1,S=-g;return this.legendItems.forEach((P,j)=>{const R=n+r/2+o.measureText(P.text).width;(j===0||A[A.length-1]+R+2*u>c)&&(C+=g,A[A.length-(j>0?0:1)]=0,S+=g,B++),i[j]={left:0,top:S,row:B,width:R,height:s},A[A.length-1]+=R+u}),C}_fitCols(e,r,n,s){const{ctx:o,maxHeight:c,options:{labels:{padding:u}}}=this,i=this.legendHitBoxes=[],A=this.columnSizes=[],g=c-e;let C=u,B=0,S=0,P=0,j=0;return this.legendItems.forEach((R,N)=>{const{itemWidth:U,itemHeight:$}=Xle(n,r,o,R,s);N>0&&S+$+2*u>g&&(C+=B+u,A.push({width:B,height:S}),P+=B+u,j++,B=S=0),i[N]={left:P,top:S,col:j,width:U,height:$},B=Math.max(B,U),S+=$+u}),C+=B,A.push({width:B,height:S}),C}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:s},rtl:o}}=this,c=$y(o,this.left,this.width);if(this.isHorizontal()){let u=0,i=Vu(n,this.left+s,this.right-this.lineWidths[u]);for(const A of r)u!==A.row&&(u=A.row,i=Vu(n,this.left+s,this.right-this.lineWidths[u])),A.top+=this.top+e+s,A.left=c.leftForLtr(c.x(i),A.width),i+=A.width+s}else{let u=0,i=Vu(n,this.top+e+s,this.bottom-this.columnSizes[u].height);for(const A of r)A.col!==u&&(u=A.col,i=Vu(n,this.top+e+s,this.bottom-this.columnSizes[u].height)),A.top=i,A.left+=this.left+s,A.left=c.leftForLtr(c.x(A.left),A.width),i+=A.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Z_(e,this),this._draw(),J_(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:s}=this,{align:o,labels:c}=e,u=gl.color,i=$y(e.rtl,this.left,this.width),A=rc(c.font),{padding:g}=c,C=A.size,B=C/2;let S;this.drawTitle(),s.textAlign=i.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=A.string;const{boxWidth:P,boxHeight:j,itemHeight:R}=u8(c,C),N=function(ue,oe,K){if(isNaN(P)||P<=0||isNaN(j)||j<0)return;s.save();const ce=gs(K.lineWidth,1);if(s.fillStyle=gs(K.fillStyle,u),s.lineCap=gs(K.lineCap,"butt"),s.lineDashOffset=gs(K.lineDashOffset,0),s.lineJoin=gs(K.lineJoin,"miter"),s.lineWidth=ce,s.strokeStyle=gs(K.strokeStyle,u),s.setLineDash(gs(K.lineDash,[])),c.usePointStyle){const me={radius:j*Math.SQRT2/2,pointStyle:K.pointStyle,rotation:K.rotation,borderWidth:ce},Z=i.xPlus(ue,P/2),Y=oe+B;rV(s,me,Z,Y,c.pointStyleWidth&&P)}else{const me=oe+Math.max((C-j)/2,0),Z=i.leftForLtr(ue,P),Y=Mm(K.borderRadius);s.beginPath(),Object.values(Y).some(Le=>Le!==0)?h1(s,{x:Z,y:me,w:P,h:j,radius:Y}):s.rect(Z,me,P,j),s.fill(),ce!==0&&s.stroke()}s.restore()},U=function(ue,oe,K){g0(s,K.text,ue,oe+R/2,A,{strikethrough:K.hidden,textAlign:i.textAlign(K.textAlign)})},$=this.isHorizontal(),J=this._computeTitleHeight();$?S={x:Vu(o,this.left+g,this.right-n[0]),y:this.top+g+J,line:0}:S={x:this.left+g,y:Vu(o,this.top+J+g,this.bottom-r[0].height),line:0},uV(this.ctx,e.textDirection);const te=R+g;this.legendItems.forEach((ue,oe)=>{s.strokeStyle=ue.fontColor,s.fillStyle=ue.fontColor;const K=s.measureText(ue.text).width,ce=i.textAlign(ue.textAlign||(ue.textAlign=c.textAlign)),me=P+B+K;let Z=S.x,Y=S.y;i.setWidth(this.width),$?oe>0&&Z+me+g>this.right&&(Y=S.y+=te,S.line++,Z=S.x=Vu(o,this.left+g,this.right-n[S.line])):oe>0&&Y+te>this.bottom&&(Z=S.x=Z+r[S.line].width+g,S.line++,Y=S.y=Vu(o,this.top+J+g,this.bottom-r[S.line].height));const Le=i.x(Z);if(N(Le,Y,ue),Z=mse(ce,Z+P+B,$?Z+me:this.right,e.rtl),U(i.x(Z),Y,ue),$)S.x+=me+g;else if(typeof ue.text!="string"){const _e=A.lineHeight;S.y+=MV(ue,_e)+g}else S.y+=te}),hV(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=rc(r.font),s=Lc(r.padding);if(!r.display)return;const o=$y(e.rtl,this.left,this.width),c=this.ctx,u=r.position,i=n.size/2,A=s.top+i;let g,C=this.left,B=this.width;if(this.isHorizontal())B=Math.max(...this.lineWidths),g=this.top+A,C=Vu(e.align,C,this.right-B);else{const P=this.columnSizes.reduce((j,R)=>Math.max(j,R.height),0);g=A+Vu(e.align,this.top,this.bottom-P-e.labels.padding-this._computeTitleHeight())}const S=Vu(u,C,C+B);c.textAlign=o.textAlign(AF(u)),c.textBaseline="middle",c.strokeStyle=r.color,c.fillStyle=r.color,c.font=n.string,g0(c,r.text,S,g,n)}_computeTitleHeight(){const e=this.options.title,r=rc(e.font),n=Lc(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,s,o;if(eA(e,this.left,this.right)&&eA(r,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],eA(e,s.left,s.left+s.width)&&eA(r,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!Jle(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=Kle(s,n);s&&!o&&xa(r.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!o&&xa(r.onHover,[e,n,this],this)}else n&&xa(r.onClick,[e,n,this],this)}}function Xle(t,e,r,n,s){const o=Yle(n,t,e,r),c=Zle(s,n,e.lineHeight);return{itemWidth:o,itemHeight:c}}function Yle(t,e,r,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((o,c)=>o.length>c.length?o:c)),e+r.size/2+n.measureText(s).width}function Zle(t,e,r){let n=t;return typeof e.text!="string"&&(n=MV(e,r)),n}function MV(t,e){const r=t.text?t.text.length:0;return e*r}function Jle(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var S0={id:"legend",_element:h8,start(t,e,r){const n=t.legend=new h8({ctx:t.ctx,options:r,chart:t});Ku.configure(t,n,r),Ku.addBox(t,n)},stop(t){Ku.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Ku.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,s=r.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:s,color:o,useBorderRadius:c,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(i=>{const A=i.controller.getStyle(r?0:void 0),g=Lc(A.borderWidth);return{text:e[i.index].label,fillStyle:A.backgroundColor,fontColor:o,hidden:!i.visible,lineCap:A.borderCapStyle,lineDash:A.borderDash,lineDashOffset:A.borderDashOffset,lineJoin:A.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:A.borderColor,pointStyle:n||A.pointStyle,rotation:A.rotation,textAlign:s||A.textAlign,borderRadius:c&&(u||A.borderRadius),datasetIndex:i.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class BF extends eh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const s=ha(n.text)?n.text.length:1;this._padding=Lc(n.padding);const o=s*rc(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:s,right:o,options:c}=this,u=c.align;let i=0,A,g,C;return this.isHorizontal()?(g=Vu(u,n,o),C=r+e,A=o-n):(c.position==="left"?(g=n+e,C=Vu(u,s,r),i=Co*-.5):(g=o-e,C=Vu(u,r,s),i=Co*.5),A=s-r),{titleX:g,titleY:C,maxWidth:A,rotation:i}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=rc(r.font),o=n.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:i,rotation:A}=this._drawArgs(o);g0(e,r.text,0,0,n,{color:r.color,maxWidth:i,rotation:A,textAlign:AF(r.align),textBaseline:"middle",translation:[c,u]})}}function ece(t,e){const r=new BF({ctx:t.ctx,options:e,chart:t});Ku.configure(t,r,e),Ku.addBox(t,r),t.titleBlock=r}var E1={id:"title",_element:BF,start(t,e,r){ece(t,r)},stop(t){const e=t.titleBlock;Ku.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Ku.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $w=new WeakMap;var tce={id:"subtitle",start(t,e,r){const n=new BF({ctx:t.ctx,options:r,chart:t});Ku.configure(t,n,r),Ku.addBox(t,n),$w.set(t,n)},stop(t){Ku.removeBox(t,$w.get(t)),$w.delete(t)},beforeUpdate(t,e,r){const n=$w.get(t);Ku.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nx={average(t){if(!t.length)return!1;let e,r,n=new Set,s=0,o=0;for(e=0,r=t.length;e<r;++e){const u=t[e].element;if(u&&u.hasValue()){const i=u.tooltipPosition();n.add(i.x),s+=i.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((u,i)=>u+i)/n.size,y:s/o}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,s=Number.POSITIVE_INFINITY,o,c,u;for(o=0,c=t.length;o<c;++o){const i=t[o].element;if(i&&i.hasValue()){const A=i.getCenterPoint(),g=u1(e,A);g<s&&(s=g,u=i)}}if(u){const i=u.tooltipPosition();r=i.x,n=i.y}return{x:r,y:n}}};function op(t,e){return e&&(ha(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function $p(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function rce(t,e){const{element:r,datasetIndex:n,index:s}=e,o=t.getDatasetMeta(n).controller,{label:c,value:u}=o.getLabelAndValue(s);return{chart:t,label:c,parsed:o.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:u,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:r}}function d8(t,e){const r=t.chart.ctx,{body:n,footer:s,title:o}=t,{boxWidth:c,boxHeight:u}=e,i=rc(e.bodyFont),A=rc(e.titleFont),g=rc(e.footerFont),C=o.length,B=s.length,S=n.length,P=Lc(e.padding);let j=P.height,R=0,N=n.reduce((J,te)=>J+te.before.length+te.lines.length+te.after.length,0);if(N+=t.beforeBody.length+t.afterBody.length,C&&(j+=C*A.lineHeight+(C-1)*e.titleSpacing+e.titleMarginBottom),N){const J=e.displayColors?Math.max(u,i.lineHeight):i.lineHeight;j+=S*J+(N-S)*i.lineHeight+(N-1)*e.bodySpacing}B&&(j+=e.footerMarginTop+B*g.lineHeight+(B-1)*e.footerSpacing);let U=0;const $=function(J){R=Math.max(R,r.measureText(J).width+U)};return r.save(),r.font=A.string,_a(t.title,$),r.font=i.string,_a(t.beforeBody.concat(t.afterBody),$),U=e.displayColors?c+2+e.boxPadding:0,_a(n,J=>{_a(J.before,$),_a(J.lines,$),_a(J.after,$)}),U=0,r.font=g.string,_a(t.footer,$),r.restore(),R+=P.width,{width:R,height:j}}function nce(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function ice(t,e,r,n){const{x:s,width:o}=n,c=r.caretSize+r.caretPadding;if(t==="left"&&s+o+c>e.width||t==="right"&&s-o-c<0)return!0}function sce(t,e,r,n){const{x:s,width:o}=r,{width:c,chartArea:{left:u,right:i}}=t;let A="center";return n==="center"?A=s<=(u+i)/2?"left":"right":s<=o/2?A="left":s>=c-o/2&&(A="right"),ice(A,t,e,r)&&(A="center"),A}function f8(t,e,r){const n=r.yAlign||e.yAlign||nce(t,r);return{xAlign:r.xAlign||e.xAlign||sce(t,e,r,n),yAlign:n}}function oce(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function ace(t,e,r){let{y:n,height:s}=t;return e==="top"?n+=r:e==="bottom"?n-=s+r:n-=s/2,n}function p8(t,e,r,n){const{caretSize:s,caretPadding:o,cornerRadius:c}=t,{xAlign:u,yAlign:i}=r,A=s+o,{topLeft:g,topRight:C,bottomLeft:B,bottomRight:S}=Mm(c);let P=oce(e,u);const j=ace(e,i,A);return i==="center"?u==="left"?P+=A:u==="right"&&(P-=A):u==="left"?P-=Math.max(g,B)+s:u==="right"&&(P+=Math.max(C,S)+s),{x:tu(P,0,n.width-e.width),y:tu(j,0,n.height-e.height)}}function Ww(t,e,r){const n=Lc(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function A8(t){return op([],$p(t))}function lce(t,e,r){return sg(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function m8(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const jV={beforeTitle:zp,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:zp,beforeBody:zp,beforeLabel:zp,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Go(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:zp,afterBody:zp,beforeFooter:zp,footer:zp,afterFooter:zp};function Mh(t,e,r,n){const s=t[e].call(r,n);return typeof s>"u"?jV[e].call(r,n):s}class f6 extends eh{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&r.options.animation&&n.animations,o=new wF(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=lce(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,s=Mh(n,"beforeTitle",this,e),o=Mh(n,"title",this,e),c=Mh(n,"afterTitle",this,e);let u=[];return u=op(u,$p(s)),u=op(u,$p(o)),u=op(u,$p(c)),u}getBeforeBody(e,r){return A8(Mh(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,s=[];return _a(e,o=>{const c={before:[],lines:[],after:[]},u=m8(n,o);op(c.before,$p(Mh(u,"beforeLabel",this,o))),op(c.lines,Mh(u,"label",this,o)),op(c.after,$p(Mh(u,"afterLabel",this,o))),s.push(c)}),s}getAfterBody(e,r){return A8(Mh(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,s=Mh(n,"beforeFooter",this,e),o=Mh(n,"footer",this,e),c=Mh(n,"afterFooter",this,e);let u=[];return u=op(u,$p(s)),u=op(u,$p(o)),u=op(u,$p(c)),u}_createItems(e){const r=this._active,n=this.chart.data,s=[],o=[],c=[];let u=[],i,A;for(i=0,A=r.length;i<A;++i)u.push(rce(this.chart,r[i]));return e.filter&&(u=u.filter((g,C,B)=>e.filter(g,C,B,n))),e.itemSort&&(u=u.sort((g,C)=>e.itemSort(g,C,n))),_a(u,g=>{const C=m8(e.callbacks,g);s.push(Mh(C,"labelColor",this,g)),o.push(Mh(C,"labelPointStyle",this,g)),c.push(Mh(C,"labelTextColor",this,g))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=u,u}update(e,r){const n=this.options.setContext(this.getContext()),s=this._active;let o,c=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const u=nx[n.position].call(this,s,this._eventPosition);c=this._createItems(n),this.title=this.getTitle(c,n),this.beforeBody=this.getBeforeBody(c,n),this.body=this.getBody(c,n),this.afterBody=this.getAfterBody(c,n),this.footer=this.getFooter(c,n);const i=this._size=d8(this,n),A=Object.assign({},u,i),g=f8(this.chart,n,A),C=p8(n,A,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:C.x,y:C.y,width:i.width,height:i.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,s){const o=this.getCaretPosition(e,n,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(e,r,n){const{xAlign:s,yAlign:o}=this,{caretSize:c,cornerRadius:u}=n,{topLeft:i,topRight:A,bottomLeft:g,bottomRight:C}=Mm(u),{x:B,y:S}=e,{width:P,height:j}=r;let R,N,U,$,J,te;return o==="center"?(J=S+j/2,s==="left"?(R=B,N=R-c,$=J+c,te=J-c):(R=B+P,N=R+c,$=J-c,te=J+c),U=R):(s==="left"?N=B+Math.max(i,g)+c:s==="right"?N=B+P-Math.max(A,C)-c:N=this.caretX,o==="top"?($=S,J=$-c,R=N-c,U=N+c):($=S+j,J=$+c,R=N+c,U=N-c),te=$),{x1:R,x2:N,x3:U,y1:$,y2:J,y3:te}}drawTitle(e,r,n){const s=this.title,o=s.length;let c,u,i;if(o){const A=$y(n.rtl,this.x,this.width);for(e.x=Ww(this,n.titleAlign,n),r.textAlign=A.textAlign(n.titleAlign),r.textBaseline="middle",c=rc(n.titleFont),u=n.titleSpacing,r.fillStyle=n.titleColor,r.font=c.string,i=0;i<o;++i)r.fillText(s[i],A.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+u,i+1===o&&(e.y+=n.titleMarginBottom-u)}}_drawColorBox(e,r,n,s,o){const c=this.labelColors[n],u=this.labelPointStyles[n],{boxHeight:i,boxWidth:A}=o,g=rc(o.bodyFont),C=Ww(this,"left",o),B=s.x(C),S=i<g.lineHeight?(g.lineHeight-i)/2:0,P=r.y+S;if(o.usePointStyle){const j={radius:Math.min(A,i)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},R=s.leftForLtr(B,A)+A/2,N=P+i/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,a6(e,j,R,N),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,a6(e,j,R,N)}else{e.lineWidth=Rs(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const j=s.leftForLtr(B,A),R=s.leftForLtr(s.xPlus(B,1),A-2),N=Mm(c.borderRadius);Object.values(N).some(U=>U!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,h1(e,{x:j,y:P,w:A,h:i,radius:N}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),h1(e,{x:R,y:P+1,w:A-2,h:i-2,radius:N}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(j,P,A,i),e.strokeRect(j,P,A,i),e.fillStyle=c.backgroundColor,e.fillRect(R,P+1,A-2,i-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:s}=this,{bodySpacing:o,bodyAlign:c,displayColors:u,boxHeight:i,boxWidth:A,boxPadding:g}=n,C=rc(n.bodyFont);let B=C.lineHeight,S=0;const P=$y(n.rtl,this.x,this.width),j=function(K){r.fillText(K,P.x(e.x+S),e.y+B/2),e.y+=B+o},R=P.textAlign(c);let N,U,$,J,te,ue,oe;for(r.textAlign=c,r.textBaseline="middle",r.font=C.string,e.x=Ww(this,R,n),r.fillStyle=n.bodyColor,_a(this.beforeBody,j),S=u&&R!=="right"?c==="center"?A/2+g:A+2+g:0,J=0,ue=s.length;J<ue;++J){for(N=s[J],U=this.labelTextColors[J],r.fillStyle=U,_a(N.before,j),$=N.lines,u&&$.length&&(this._drawColorBox(r,e,J,P,n),B=Math.max(C.lineHeight,i)),te=0,oe=$.length;te<oe;++te)j($[te]),B=C.lineHeight;_a(N.after,j)}S=0,B=C.lineHeight,_a(this.afterBody,j),e.y-=o}drawFooter(e,r,n){const s=this.footer,o=s.length;let c,u;if(o){const i=$y(n.rtl,this.x,this.width);for(e.x=Ww(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=i.textAlign(n.footerAlign),r.textBaseline="middle",c=rc(n.footerFont),r.fillStyle=n.footerColor,r.font=c.string,u=0;u<o;++u)r.fillText(s[u],i.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+n.footerSpacing}}drawBackground(e,r,n,s){const{xAlign:o,yAlign:c}=this,{x:u,y:i}=e,{width:A,height:g}=n,{topLeft:C,topRight:B,bottomLeft:S,bottomRight:P}=Mm(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(u+C,i),c==="top"&&this.drawCaret(e,r,n,s),r.lineTo(u+A-B,i),r.quadraticCurveTo(u+A,i,u+A,i+B),c==="center"&&o==="right"&&this.drawCaret(e,r,n,s),r.lineTo(u+A,i+g-P),r.quadraticCurveTo(u+A,i+g,u+A-P,i+g),c==="bottom"&&this.drawCaret(e,r,n,s),r.lineTo(u+S,i+g),r.quadraticCurveTo(u,i+g,u,i+g-S),c==="center"&&o==="left"&&this.drawCaret(e,r,n,s),r.lineTo(u,i+C),r.quadraticCurveTo(u,i,u+C,i),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const c=nx[e.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=d8(this,e),i=Object.assign({},c,this._size),A=f8(r,e,i),g=p8(e,i,A,r);(s._to!==g.x||o._to!==g.y)&&(this.xAlign=A.xAlign,this.yAlign=A.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const c=Lc(r.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&u&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,s,r),uV(e,r.textDirection),o.y+=c.top,this.drawTitle(o,e,r),this.drawBody(o,e,r),this.drawFooter(o,e,r),hV(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,s=e.map(({datasetIndex:u,index:i})=>{const A=this.chart.getDatasetMeta(u);if(!A)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:A.data[i],index:i}}),o=!X5(n,s),c=this._positionChanged(s,r);(o||c)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],c=this._getActiveElements(e,o,r,n),u=this._positionChanged(c,e),i=r||!X5(c,o)||u;return i&&(this._active=c,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),i}_getActiveElements(e,r,n,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&c.reverse(),c}_positionChanged(e,r){const{caretX:n,caretY:s,options:o}=this,c=nx[o.position].call(this,e,r);return c!==!1&&(n!==c.x||s!==c.y)}}ni(f6,"positioners",nx);var B0={id:"tooltip",_element:f6,positioners:nx,afterInit(t,e,r){r&&(t.tooltip=new f6({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},cce=Object.freeze({__proto__:null,Colors:Cle,Decimation:Tle,Filler:Wle,Legend:S0,SubTitle:tce,Title:E1,Tooltip:B0});const uce=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function hce(t,e,r,n){const s=t.indexOf(e);if(s===-1)return uce(t,e,r,n);const o=t.lastIndexOf(e);return s!==o?r:s}const dce=(t,e)=>t===null?null:tu(Math.round(t),0,e);function g8(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class hA extends C0{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:s,label:o}of r)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Go(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:hce(n,e,gs(r,e),this._addedLabels),dce(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=e===0&&r===o.length-1?o:o.slice(e,r+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let c=e;c<=r;c++)s.push({value:c});return s}getLabelForValue(e){return g8.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ni(hA,"id","category"),ni(hA,"defaults",{ticks:{callback:g8}});function fce(t,e){const r=[],{bounds:s,step:o,min:c,max:u,precision:i,count:A,maxTicks:g,maxDigits:C,includeBounds:B}=t,S=o||1,P=g-1,{min:j,max:R}=e,N=!Go(c),U=!Go(u),$=!Go(A),J=(R-j)/(C+1);let te=dO((R-j)/P/S)*S,ue,oe,K,ce;if(te<1e-14&&!N&&!U)return[{value:j},{value:R}];ce=Math.ceil(R/te)-Math.floor(j/te),ce>P&&(te=dO(ce*te/P/S)*S),Go(i)||(ue=Math.pow(10,i),te=Math.ceil(te*ue)/ue),s==="ticks"?(oe=Math.floor(j/te)*te,K=Math.ceil(R/te)*te):(oe=j,K=R),N&&U&&o&&cse((u-c)/o,te/1e3)?(ce=Math.round(Math.min((u-c)/te,g)),te=(u-c)/ce,oe=c,K=u):$?(oe=N?c:oe,K=U?u:K,ce=A-1,te=(K-oe)/ce):(ce=(K-oe)/te,Ex(ce,Math.round(ce),te/1e3)?ce=Math.round(ce):ce=Math.ceil(ce));const me=Math.max(fO(te),fO(oe));ue=Math.pow(10,Go(i)?me:i),oe=Math.round(oe*ue)/ue,K=Math.round(K*ue)/ue;let Z=0;for(N&&(B&&oe!==c?(r.push({value:c}),oe<c&&Z++,Ex(Math.round((oe+Z*te)*ue)/ue,c,y8(c,J,t))&&Z++):oe<c&&Z++);Z<ce;++Z){const Y=Math.round((oe+Z*te)*ue)/ue;if(U&&Y>u)break;r.push({value:Y})}return U&&B&&K!==u?r.length&&Ex(r[r.length-1].value,u,y8(u,J,t))?r[r.length-1].value=u:r.push({value:u}):(!U||K===u)&&r.push({value:K}),r}function y8(t,e,{horizontal:r,minRotation:n}){const s=Ic(n),o=(r?Math.sin(s):Math.cos(s))||.001,c=.75*e*(""+t).length;return Math.min(e/o,c)}class o4 extends C0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Go(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const c=i=>s=r?s:i,u=i=>o=n?o:i;if(e){const i=yp(s),A=yp(o);i<0&&A<0?u(0):i>0&&A>0&&c(0)}if(s===o){let i=o===0?1:Math.abs(o*.05);u(o+i),e||c(s-i)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),r=r||11),r&&(s=Math.min(r,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},o=this._range||this,c=fce(s,o);return e.bounds==="ticks"&&WH(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-r)/Math.max(e.length-1,1)/2;r-=s,n+=s}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return Y_(e,this.chart.options.locale,this.options.ticks.format)}}class dA extends o4{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Cl(e)?e:0,this.max=Cl(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Ic(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ni(dA,"id","linear"),ni(dA,"defaults",{ticks:{callback:cC.formatters.numeric}});const C_=t=>Math.floor(dm(t)),wg=(t,e)=>Math.pow(10,C_(t)+e);function v8(t){return t/Math.pow(10,C_(t))===1}function x8(t,e,r){const n=Math.pow(10,r),s=Math.floor(t/n);return Math.ceil(e/n)-s}function pce(t,e){const r=e-t;let n=C_(r);for(;x8(t,e,n)>10;)n++;for(;x8(t,e,n)<10;)n--;return Math.min(n,C_(t))}function Ace(t,{min:e,max:r}){e=ad(t.min,e);const n=[],s=C_(e);let o=pce(e,r),c=o<0?Math.pow(10,Math.abs(o)):1;const u=Math.pow(10,o),i=s>o?Math.pow(10,s):0,A=Math.round((e-i)*c)/c,g=Math.floor((e-i)/u/10)*u*10;let C=Math.floor((A-g)/Math.pow(10,o)),B=ad(t.min,Math.round((i+g+C*Math.pow(10,o))*c)/c);for(;B<r;)n.push({value:B,major:v8(B),significand:C}),C>=10?C=C<15?15:20:C++,C>=20&&(o++,C=2,c=o>=0?1:c),B=Math.round((i+g+C*Math.pow(10,o))*c)/c;const S=ad(t.max,B);return n.push({value:S,major:v8(S),significand:C}),n}class p6 extends C0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=o4.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return Cl(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Cl(e)?Math.max(0,e):null,this.max=Cl(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Cl(this._userMin)&&(this.min=e===wg(this.min,0)?wg(this.min,-1):wg(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,s=this.max;const o=u=>n=e?n:u,c=u=>s=r?s:u;n===s&&(n<=0?(o(1),c(10)):(o(wg(n,-1)),c(wg(s,1)))),n<=0&&o(wg(s,-1)),s<=0&&c(wg(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=Ace(r,this);return e.bounds==="ticks"&&WH(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Y_(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=dm(e),this._valueRange=dm(this.max)-dm(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(dm(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}ni(p6,"id","logarithmic"),ni(p6,"defaults",{ticks:{callback:cC.formatters.logarithmic,major:{enabled:!0}}});function A6(t){const e=t.ticks;if(e.display&&t.display){const r=Lc(e.backdropPadding);return gs(e.font&&e.font.size,gl.font.size)+r.height}return 0}function mce(t,e,r){return r=ha(r)?r:[r],{w:Bse(t,e.string,r),h:r.length*e.lineHeight}}function _8(t,e,r,n,s){return t===n||t===s?{start:e-r/2,end:e+r/2}:t<n||t>s?{start:e-r,end:e}:{start:e,end:e+r}}function gce(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],s=[],o=t._pointLabels.length,c=t.options.pointLabels,u=c.centerPointLabels?Co/o:0;for(let i=0;i<o;i++){const A=c.setContext(t.getPointLabelContext(i));s[i]=A.padding;const g=t.getPointPosition(i,t.drawingArea+s[i],u),C=rc(A.font),B=mce(t.ctx,C,t._pointLabels[i]);n[i]=B;const S=cd(t.getIndexAngle(i)+u),P=Math.round(lC(S)),j=_8(P,g.x,B.w,0,180),R=_8(P,g.y,B.h,90,270);yce(r,e,S,j,R)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=_ce(t,n,s)}function yce(t,e,r,n,s){const o=Math.abs(Math.sin(r)),c=Math.abs(Math.cos(r));let u=0,i=0;n.start<e.l?(u=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-u)):n.end>e.r&&(u=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+u)),s.start<e.t?(i=(e.t-s.start)/c,t.t=Math.min(t.t,e.t-i)):s.end>e.b&&(i=(s.end-e.b)/c,t.b=Math.max(t.b,e.b+i))}function vce(t,e,r){const n=t.drawingArea,{extra:s,additionalAngle:o,padding:c,size:u}=r,i=t.getPointPosition(e,n+s+c,o),A=Math.round(lC(cd(i.angle+ml))),g=Cce(i.y,u.h,A),C=bce(A),B=wce(i.x,u.w,C);return{visible:!0,x:i.x,y:g,textAlign:C,left:B,top:g,right:B+u.w,bottom:g+u.h}}function xce(t,e){if(!e)return!0;const{left:r,top:n,right:s,bottom:o}=t;return!(rA({x:r,y:n},e)||rA({x:r,y:o},e)||rA({x:s,y:n},e)||rA({x:s,y:o},e))}function _ce(t,e,r){const n=[],s=t._pointLabels.length,o=t.options,{centerPointLabels:c,display:u}=o.pointLabels,i={extra:A6(o)/2,additionalAngle:c?Co/s:0};let A;for(let g=0;g<s;g++){i.padding=r[g],i.size=e[g];const C=vce(t,g,i);n.push(C),u==="auto"&&(C.visible=xce(C,A),C.visible&&(A=C))}return n}function bce(t){return t===0||t===180?"center":t<180?"left":"right"}function wce(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function Cce(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function Sce(t,e,r){const{left:n,top:s,right:o,bottom:c}=r,{backdropColor:u}=e;if(!Go(u)){const i=Mm(e.borderRadius),A=Lc(e.backdropPadding);t.fillStyle=u;const g=n-A.left,C=s-A.top,B=o-n+A.width,S=c-s+A.height;Object.values(i).some(P=>P!==0)?(t.beginPath(),h1(t,{x:g,y:C,w:B,h:S,radius:i}),t.fill()):t.fillRect(g,C,B,S)}}function Bce(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const o=t._pointLabelItems[s];if(!o.visible)continue;const c=n.setContext(t.getPointLabelContext(s));Sce(r,c,o);const u=rc(c.font),{x:i,y:A,textAlign:g}=o;g0(r,t._pointLabels[s],i,A+u.lineHeight/2,u,{color:c.color,textAlign:g,textBaseline:"middle"})}}function kV(t,e,r,n){const{ctx:s}=t;if(r)s.arc(t.xCenter,t.yCenter,e,0,za);else{let o=t.getPointPosition(0,e);s.moveTo(o.x,o.y);for(let c=1;c<n;c++)o=t.getPointPosition(c,e),s.lineTo(o.x,o.y)}}function Ece(t,e,r,n,s){const o=t.ctx,c=e.circular,{color:u,lineWidth:i}=e;!c&&!n||!u||!i||r<0||(o.save(),o.strokeStyle=u,o.lineWidth=i,o.setLineDash(s.dash||[]),o.lineDashOffset=s.dashOffset,o.beginPath(),kV(t,r,c,n),o.closePath(),o.stroke(),o.restore())}function Tce(t,e,r){return sg(t,{label:r,index:e,type:"pointLabel"})}class Ny extends o4{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Lc(A6(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=Cl(e)&&!isNaN(e)?e:0,this.max=Cl(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/A6(this.options))}generateTickLabels(e){o4.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const s=xa(this.options.pointLabels.callback,[r,n],this);return s||s===0?s:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?gce(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,s){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,s))}getIndexAngle(e){const r=za/(this._pointLabels.length||1),n=this.options.startAngle||0;return cd(e*r+Ic(n))}getDistanceFromCenterForValue(e){if(Go(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Go(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return Tce(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const s=this.getIndexAngle(e)-ml+n;return{x:Math.cos(s)*r+this.xCenter,y:Math.sin(s)*r+this.yCenter,angle:s}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:s,bottom:o}=this._pointLabelItems[e];return{left:r,top:n,right:s,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),kV(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:s,border:o}=r,c=this._pointLabels.length;let u,i,A;if(r.pointLabels.display&&Bce(this,c),s.display&&this.ticks.forEach((g,C)=>{if(C!==0||C===0&&this.min<0){i=this.getDistanceFromCenterForValue(g.value);const B=this.getContext(C),S=s.setContext(B),P=o.setContext(B);Ece(this,S,i,c,P)}}),n.display){for(e.save(),u=c-1;u>=0;u--){const g=n.setContext(this.getPointLabelContext(u)),{color:C,lineWidth:B}=g;!B||!C||(e.lineWidth=B,e.strokeStyle=C,e.setLineDash(g.borderDash),e.lineDashOffset=g.borderDashOffset,i=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),A=this.getPointPosition(u,i),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(A.x,A.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let o,c;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((u,i)=>{if(i===0&&this.min>=0&&!r.reverse)return;const A=n.setContext(this.getContext(i)),g=rc(A.font);if(o=this.getDistanceFromCenterForValue(this.ticks[i].value),A.showLabelBackdrop){e.font=g.string,c=e.measureText(u.label).width,e.fillStyle=A.backdropColor;const C=Lc(A.backdropPadding);e.fillRect(-c/2-C.left,-o-g.size/2-C.top,c+C.width,g.size+C.height)}g0(e,u.label,0,-o,g,{color:A.color,strokeColor:A.textStrokeColor,strokeWidth:A.textStrokeWidth})}),e.restore()}drawTitle(){}}ni(Ny,"id","radialLinear"),ni(Ny,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:cC.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ni(Ny,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ni(Ny,"descriptors",{angleLines:{_fallback:"grid"}});const hC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Oh=Object.keys(hC);function b8(t,e){return t-e}function w8(t,e){if(Go(e))return null;const r=t._adapter,{parser:n,round:s,isoWeekday:o}=t._parseOpts;let c=e;return typeof n=="function"&&(c=n(c)),Cl(c)||(c=typeof n=="string"?r.parse(c,n):r.parse(c)),c===null?null:(s&&(c=s==="week"&&(Hm(o)||o===!0)?r.startOf(c,"isoWeek",o):r.startOf(c,s)),+c)}function C8(t,e,r,n){const s=Oh.length;for(let o=Oh.indexOf(t);o<s-1;++o){const c=hC[Oh[o]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((r-e)/(u*c.size))<=n)return Oh[o]}return Oh[s-1]}function Ice(t,e,r,n,s){for(let o=Oh.length-1;o>=Oh.indexOf(r);o--){const c=Oh[o];if(hC[c].common&&t._adapter.diff(s,n,c)>=e-1)return c}return Oh[r?Oh.indexOf(r):0]}function Lce(t){for(let e=Oh.indexOf(t)+1,r=Oh.length;e<r;++e)if(hC[Oh[e]].common)return Oh[e]}function S8(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:s}=pF(r,e),o=r[n]>=e?r[n]:r[s];t[o]=!0}}function Fce(t,e,r,n){const s=t._adapter,o=+s.startOf(e[0].value,n),c=e[e.length-1].value;let u,i;for(u=o;u<=c;u=+s.add(u,1,n))i=r[u],i>=0&&(e[i].major=!0);return e}function B8(t,e,r){const n=[],s={},o=e.length;let c,u;for(c=0;c<o;++c)u=e[c],s[u]=c,n.push({value:u,major:!1});return o===0||!r?n:Fce(t,n,s,r)}class S_ extends C0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),s=this._adapter=new Qoe._date(e.adapters.date);s.init(r),Bx(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:w8(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:s,max:o,minDefined:c,maxDefined:u}=this.getUserBounds();function i(A){!c&&!isNaN(A.min)&&(s=Math.min(s,A.min)),!u&&!isNaN(A.max)&&(o=Math.max(o,A.max))}(!c||!u)&&(i(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&i(this.getMinMax(!1))),s=Cl(s)&&!isNaN(s)?s:+r.startOf(Date.now(),n),o=Cl(o)&&!isNaN(o)?o:+r.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,c=this.max,u=fse(s,o,c);return this._unit=r.unit||(n.autoSkip?C8(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):Ice(this,u.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Lce(this._unit),this.initOffsets(s),e.reverse&&u.reverse(),B8(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;r=tu(r,0,c),n=tu(n,0,c),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,s=this.options,o=s.time,c=o.unit||C8(o.minUnit,r,n,this._getLabelCapacity(r)),u=gs(s.ticks.stepSize,1),i=c==="week"?o.isoWeekday:!1,A=Hm(i)||i===!0,g={};let C=r,B,S;if(A&&(C=+e.startOf(C,"isoWeek",i)),C=+e.startOf(C,A?"day":c),e.diff(n,r,c)>1e5*u)throw new Error(r+" and "+n+" are too far apart with stepSize of "+u+" "+c);const P=s.ticks.source==="data"&&this.getDataTimestamps();for(B=C,S=0;B<n;B=+e.add(B,u,c),S++)S8(g,B,P);return(B===n||s.bounds==="ticks"||S===1)&&S8(g,B,P),Object.keys(g).sort(b8).map(j=>+j)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,o=this._unit,c=r||s[o];return this._adapter.format(e,c)}_tickFormatFunction(e,r,n,s){const o=this.options,c=o.ticks.callback;if(c)return xa(c,[e,r,n],this);const u=o.time.displayFormats,i=this._unit,A=this._majorUnit,g=i&&u[i],C=A&&u[A],B=n[r],S=A&&C&&B&&B.major;return this._adapter.format(e,s||(S?C:g))}generateTickLabels(e){let r,n,s;for(r=0,n=e.length;r<n;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,s=Ic(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),c=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:n*o+u*c,h:n*c+u*o}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,s=n[r.unit]||n.millisecond,o=this._tickFormatFunction(e,0,B8(this,[e],this._majorUnit),s),c=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,n=s.length;r<n;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const s=this.getLabels();for(r=0,n=s.length;r<n;++r)e.push(w8(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return XH(e.sort(b8))}}ni(S_,"id","time"),ni(S_,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Kw(t,e,r){let n=0,s=t.length-1,o,c,u,i;r?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=tA(t,"pos",e)),{pos:o,time:u}=t[n],{pos:c,time:i}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=tA(t,"time",e)),{time:o,pos:u}=t[n],{time:c,pos:i}=t[s]);const A=c-o;return A?u+(i-u)*(e-o)/A:u}class m6 extends S_{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Kw(r,this.min),this._tableRange=Kw(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,s=[],o=[];let c,u,i,A,g;for(c=0,u=e.length;c<u;++c)A=e[c],A>=r&&A<=n&&s.push(A);if(s.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(c=0,u=s.length;c<u;++c)g=s[c+1],i=s[c-1],A=s[c],Math.round((g+i)/2)!==A&&o.push({time:A,pos:c/(u-1)});return o}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Kw(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return Kw(this._table,n*this._tableRange+this._minPos,!0)}}ni(m6,"id","timeseries"),ni(m6,"defaults",S_.defaults);var Nce=Object.freeze({__proto__:null,CategoryScale:hA,LinearScale:dA,LogarithmicScale:p6,RadialLinearScale:Ny,TimeScale:S_,TimeSeriesScale:m6});const Pce=[zoe,gle,cce,Nce],DV="label";function E8(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Mce(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function OV(t,e){t.labels=e}function RV(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:DV;const n=[];t.datasets=e.map(s=>{const o=t.datasets.find(c=>c[r]===s[r]);return!o||!s.data||n.includes(o)?{...s}:(n.push(o),Object.assign(o,s),o)})}function jce(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DV;const r={labels:[],datasets:[]};return OV(r,t.labels),RV(r,t.datasets,e),r}function kce(t,e){const{height:r=150,width:n=300,redraw:s=!1,datasetIdKey:o,type:c,data:u,options:i,plugins:A=[],fallbackContent:g,updateMode:C,...B}=t,S=ve.useRef(null),P=ve.useRef(),j=()=>{S.current&&(P.current=new fd(S.current,{type:c,data:jce(u,o),options:i&&{...i},plugins:A}),E8(e,P.current))},R=()=>{E8(e,null),P.current&&(P.current.destroy(),P.current=null)};return ve.useEffect(()=>{!s&&P.current&&i&&Mce(P.current,i)},[s,i]),ve.useEffect(()=>{!s&&P.current&&OV(P.current.config.data,u.labels)},[s,u.labels]),ve.useEffect(()=>{!s&&P.current&&u.datasets&&RV(P.current.config.data,u.datasets,o)},[s,u.datasets]),ve.useEffect(()=>{P.current&&(s?(R(),setTimeout(j)):P.current.update(C))},[s,i,u.labels,u.datasets,C]),ve.useEffect(()=>{P.current&&(R(),setTimeout(j))},[c]),ve.useEffect(()=>(j(),()=>R()),[]),Qi.createElement("canvas",Object.assign({ref:S,role:"img",height:r,width:n},B),g)}const Dce=ve.forwardRef(kce);function EF(t,e){return fd.register(e),ve.forwardRef((r,n)=>Qi.createElement(Dce,Object.assign({},r,{ref:n,type:t})))}const E0=EF("line",Fx),dC=EF("bar",Lx),TF=EF("pie",n4);fd.register(...Pce);function Oce(t){return ys({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(t)}function Rce(t){return ys({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function UV(t){return ys({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(t)}function Wy(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.61,16.88c0-1.15,0.36-2.17,1.08-3.07c0.72-0.9,1.63-1.48,2.74-1.73c0.31-1.37,1.02-2.49,2.11-3.37s2.35-1.32,3.76-1.32
	c1.38,0,2.61,0.43,3.69,1.28s1.78,1.95,2.1,3.29h0.33c0.9,0,1.73,0.22,2.49,0.65s1.37,1.03,1.81,1.79c0.44,0.76,0.67,1.58,0.67,2.48
	c0,0.88-0.21,1.7-0.63,2.45s-1,1.35-1.73,1.8c-0.73,0.45-1.54,0.69-2.41,0.72H9.41c-1.34-0.06-2.47-0.57-3.4-1.53
	C5.08,19.37,4.61,18.22,4.61,16.88z M6.32,16.88c0,0.87,0.3,1.62,0.9,2.26s1.33,0.98,2.19,1.03h11.19c0.86-0.04,1.59-0.39,2.19-1.03
	c0.61-0.64,0.91-1.4,0.91-2.26c0-0.88-0.33-1.63-0.98-2.27c-0.65-0.64-1.42-0.96-2.32-0.96H18.8c-0.11,0-0.17-0.06-0.17-0.18
	l-0.07-0.57c-0.11-1.08-0.58-1.99-1.4-2.72c-0.82-0.73-1.77-1.1-2.86-1.1c-1.09,0-2.05,0.37-2.85,1.1
	c-0.81,0.73-1.27,1.64-1.37,2.72l-0.08,0.57c0,0.12-0.07,0.18-0.2,0.18H9.27c-0.84,0.1-1.54,0.46-2.1,1.07S6.32,16.05,6.32,16.88z`},child:[]}]})(t)}function a4(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.37,14.62c0-0.24,0.08-0.45,0.25-0.62c0.17-0.16,0.38-0.24,0.6-0.24h2.04c0.23,0,0.42,0.08,0.58,0.25
	c0.15,0.17,0.23,0.37,0.23,0.61S8,15.06,7.85,15.23c-0.15,0.17-0.35,0.25-0.58,0.25H5.23c-0.23,0-0.43-0.08-0.6-0.25
	C4.46,15.06,4.37,14.86,4.37,14.62z M7.23,21.55c0-0.23,0.08-0.43,0.23-0.61l1.47-1.43c0.15-0.16,0.35-0.23,0.59-0.23
	c0.24,0,0.44,0.08,0.6,0.23s0.24,0.34,0.24,0.57c0,0.24-0.08,0.46-0.24,0.64L8.7,22.14c-0.41,0.32-0.82,0.32-1.23,0
	C7.31,21.98,7.23,21.78,7.23,21.55z M7.23,7.71c0-0.23,0.08-0.43,0.23-0.61C7.66,6.93,7.87,6.85,8.1,6.85
	c0.22,0,0.42,0.08,0.59,0.24l1.43,1.47c0.16,0.15,0.24,0.35,0.24,0.59c0,0.24-0.08,0.44-0.24,0.6s-0.36,0.24-0.6,0.24
	c-0.24,0-0.44-0.08-0.59-0.24L7.47,8.32C7.31,8.16,7.23,7.95,7.23,7.71z M9.78,14.62c0-0.93,0.23-1.8,0.7-2.6s1.1-1.44,1.91-1.91
	s1.67-0.7,2.6-0.7c0.7,0,1.37,0.14,2.02,0.42c0.64,0.28,1.2,0.65,1.66,1.12c0.47,0.47,0.84,1.02,1.11,1.66
	c0.27,0.64,0.41,1.32,0.41,2.02c0,0.94-0.23,1.81-0.7,2.61c-0.47,0.8-1.1,1.43-1.9,1.9c-0.8,0.47-1.67,0.7-2.61,0.7
	s-1.81-0.23-2.61-0.7c-0.8-0.47-1.43-1.1-1.9-1.9C10.02,16.43,9.78,15.56,9.78,14.62z M11.48,14.62c0,0.98,0.34,1.81,1.03,2.5
	c0.68,0.69,1.51,1.04,2.49,1.04s1.81-0.35,2.5-1.04s1.04-1.52,1.04-2.5c0-0.96-0.35-1.78-1.04-2.47c-0.69-0.68-1.52-1.02-2.5-1.02
	c-0.97,0-1.8,0.34-2.48,1.02C11.82,12.84,11.48,13.66,11.48,14.62z M14.14,22.4c0-0.24,0.08-0.44,0.25-0.6s0.37-0.24,0.6-0.24
	c0.24,0,0.45,0.08,0.61,0.24s0.24,0.36,0.24,0.6v1.99c0,0.24-0.08,0.45-0.25,0.62c-0.17,0.17-0.37,0.25-0.6,0.25
	s-0.44-0.08-0.6-0.25c-0.17-0.17-0.25-0.38-0.25-0.62V22.4z M14.14,6.9V4.86c0-0.23,0.08-0.43,0.25-0.6C14.56,4.09,14.76,4,15,4
	s0.43,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6V6.9c0,0.23-0.08,0.42-0.25,0.58S15.23,7.71,15,7.71s-0.44-0.08-0.6-0.23
	S14.14,7.13,14.14,6.9z M19.66,20.08c0-0.23,0.08-0.42,0.23-0.56c0.15-0.16,0.34-0.23,0.56-0.23c0.24,0,0.44,0.08,0.6,0.23
	l1.46,1.43c0.16,0.17,0.24,0.38,0.24,0.61c0,0.23-0.08,0.43-0.24,0.59c-0.4,0.31-0.8,0.31-1.2,0l-1.42-1.42
	C19.74,20.55,19.66,20.34,19.66,20.08z M19.66,9.16c0-0.25,0.08-0.45,0.23-0.59l1.42-1.47c0.17-0.16,0.37-0.24,0.59-0.24
	c0.24,0,0.44,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6c0,0.25-0.08,0.46-0.24,0.62l-1.46,1.43c-0.18,0.16-0.38,0.24-0.6,0.24
	c-0.23,0-0.41-0.08-0.56-0.24S19.66,9.4,19.66,9.16z M21.92,14.62c0-0.24,0.08-0.44,0.24-0.62c0.16-0.16,0.35-0.24,0.57-0.24h2.02
	c0.23,0,0.43,0.09,0.6,0.26c0.17,0.17,0.26,0.37,0.26,0.6s-0.09,0.43-0.26,0.6c-0.17,0.17-0.37,0.25-0.6,0.25h-2.02
	c-0.23,0-0.43-0.08-0.58-0.25S21.92,14.86,21.92,14.62z`},child:[]}]})(t)}function fC(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M7.56,17.19c0-0.88,0.24-1.89,0.72-3.03s1.1-2.25,1.86-3.31c1.56-2.06,2.92-3.62,4.06-4.67l0.75-0.72
	c0.25,0.26,0.53,0.5,0.83,0.72c0.41,0.42,1.04,1.11,1.88,2.09s1.57,1.85,2.17,2.65c0.71,1.01,1.32,2.1,1.81,3.25
	s0.74,2.16,0.74,3.03c0,1-0.19,1.95-0.58,2.86c-0.39,0.91-0.91,1.7-1.57,2.36c-0.66,0.66-1.45,1.19-2.37,1.58
	c-0.92,0.39-1.89,0.59-2.91,0.59c-1,0-1.95-0.19-2.86-0.57c-0.91-0.38-1.7-0.89-2.36-1.55c-0.66-0.65-1.19-1.44-1.58-2.35
	S7.56,18.23,7.56,17.19z M9.82,14.26c0,0.83,0.17,1.49,0.52,1.99c0.35,0.49,0.88,0.74,1.59,0.74c0.72,0,1.25-0.25,1.61-0.74
	c0.35-0.49,0.53-1.15,0.54-1.99c-0.01-0.84-0.19-1.5-0.54-2c-0.35-0.49-0.89-0.74-1.61-0.74c-0.71,0-1.24,0.25-1.59,0.74
	C9.99,12.76,9.82,13.42,9.82,14.26z M11.39,14.26c0-0.15,0-0.27,0-0.35s0.01-0.19,0.02-0.33c0.01-0.14,0.02-0.25,0.05-0.32
	s0.05-0.16,0.09-0.24c0.04-0.08,0.09-0.15,0.15-0.18c0.07-0.04,0.14-0.06,0.23-0.06c0.14,0,0.25,0.04,0.33,0.12s0.14,0.21,0.17,0.38
	c0.03,0.18,0.05,0.32,0.06,0.45s0.01,0.3,0.01,0.52c0,0.23,0,0.4-0.01,0.52c-0.01,0.12-0.03,0.27-0.06,0.45
	c-0.03,0.17-0.09,0.3-0.17,0.38s-0.19,0.12-0.33,0.12c-0.09,0-0.16-0.02-0.23-0.06c-0.07-0.04-0.12-0.1-0.15-0.18
	c-0.04-0.08-0.07-0.17-0.09-0.24c-0.02-0.08-0.04-0.19-0.05-0.32c-0.01-0.14-0.02-0.25-0.02-0.32S11.39,14.41,11.39,14.26z
	 M11.98,22.01h1.32l4.99-10.74h-1.35L11.98,22.01z M16.28,19.02c0.01,0.84,0.2,1.5,0.55,2c0.35,0.49,0.89,0.74,1.6,0.74
	c0.72,0,1.25-0.25,1.6-0.74c0.35-0.49,0.52-1.16,0.53-2c-0.01-0.84-0.18-1.5-0.53-1.99c-0.35-0.49-0.88-0.74-1.6-0.74
	c-0.71,0-1.25,0.25-1.6,0.74C16.47,17.52,16.29,18.18,16.28,19.02z M17.85,19.02c0-0.23,0-0.4,0.01-0.52
	c0.01-0.12,0.03-0.27,0.06-0.45s0.09-0.3,0.17-0.38s0.19-0.12,0.33-0.12c0.09,0,0.17,0.02,0.24,0.06c0.07,0.04,0.12,0.1,0.16,0.19
	c0.04,0.09,0.07,0.17,0.1,0.24s0.04,0.18,0.05,0.32l0.01,0.32l0,0.34c0,0.16,0,0.28,0,0.35l-0.01,0.32l-0.05,0.32l-0.1,0.24
	l-0.16,0.19l-0.24,0.06c-0.14,0-0.25-0.04-0.33-0.12s-0.14-0.21-0.17-0.38c-0.03-0.18-0.05-0.33-0.06-0.45S17.85,19.25,17.85,19.02z
	`},child:[]}]})(t)}function pC(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.64,16.91c0-1.15,0.36-2.17,1.08-3.07c0.72-0.9,1.63-1.47,2.73-1.73c0.31-1.36,1.02-2.48,2.11-3.36s2.34-1.31,3.75-1.31
	c1.38,0,2.6,0.43,3.68,1.28c1.08,0.85,1.78,1.95,2.1,3.29h0.32c0.89,0,1.72,0.22,2.48,0.65s1.37,1.03,1.81,1.78
	c0.44,0.75,0.67,1.58,0.67,2.47c0,0.88-0.21,1.69-0.63,2.44c-0.42,0.75-1,1.35-1.73,1.8c-0.73,0.45-1.53,0.69-2.4,0.71
	c-0.13,0-0.2-0.06-0.2-0.17v-1.33c0-0.12,0.07-0.18,0.2-0.18c0.85-0.04,1.58-0.38,2.18-1.02s0.9-1.39,0.9-2.26s-0.33-1.62-0.98-2.26
	s-1.42-0.96-2.31-0.96h-1.61c-0.12,0-0.18-0.06-0.18-0.17l-0.08-0.58c-0.11-1.08-0.58-1.99-1.39-2.71
	c-0.82-0.73-1.76-1.09-2.85-1.09c-1.09,0-2.05,0.36-2.85,1.09c-0.81,0.73-1.26,1.63-1.36,2.71l-0.07,0.53c0,0.12-0.07,0.19-0.2,0.19
	l-0.53,0.03c-0.83,0.1-1.53,0.46-2.1,1.07s-0.85,1.33-0.85,2.16c0,0.87,0.3,1.62,0.9,2.26s1.33,0.98,2.18,1.02
	c0.11,0,0.17,0.06,0.17,0.18v1.33c0,0.11-0.06,0.17-0.17,0.17c-1.34-0.06-2.47-0.57-3.4-1.53S4.64,18.24,4.64,16.91z M9.99,23.6
	c0-0.04,0.01-0.11,0.04-0.2l1.63-5.77c0.06-0.19,0.17-0.34,0.32-0.44c0.15-0.1,0.31-0.15,0.46-0.15c0.07,0,0.15,0.01,0.24,0.03
	c0.24,0.04,0.42,0.17,0.54,0.37c0.12,0.2,0.15,0.42,0.08,0.67l-1.63,5.73c-0.12,0.43-0.4,0.64-0.82,0.64
	c-0.04,0-0.07-0.01-0.11-0.02c-0.06-0.02-0.09-0.03-0.1-0.03c-0.22-0.06-0.38-0.17-0.49-0.33C10.04,23.93,9.99,23.77,9.99,23.6z
	 M12.61,26.41l2.44-8.77c0.04-0.19,0.14-0.34,0.3-0.44c0.16-0.1,0.32-0.15,0.49-0.15c0.09,0,0.18,0.01,0.27,0.03
	c0.22,0.06,0.38,0.19,0.49,0.39c0.11,0.2,0.13,0.41,0.07,0.64l-2.43,8.78c-0.04,0.17-0.13,0.31-0.29,0.43
	c-0.16,0.12-0.32,0.18-0.51,0.18c-0.09,0-0.18-0.02-0.25-0.05c-0.2-0.05-0.37-0.18-0.52-0.39C12.56,26.88,12.54,26.67,12.61,26.41z
	 M16.74,23.62c0-0.04,0.01-0.11,0.04-0.23l1.63-5.77c0.06-0.19,0.16-0.34,0.3-0.44c0.15-0.1,0.3-0.15,0.46-0.15
	c0.08,0,0.17,0.01,0.26,0.03c0.21,0.06,0.36,0.16,0.46,0.31c0.1,0.15,0.15,0.31,0.15,0.47c0,0.03-0.01,0.08-0.02,0.14
	s-0.02,0.1-0.02,0.12l-1.63,5.73c-0.04,0.19-0.13,0.35-0.28,0.46s-0.32,0.17-0.51,0.17l-0.24-0.05c-0.2-0.06-0.35-0.16-0.46-0.32
	C16.79,23.94,16.74,23.78,16.74,23.62z`},child:[]}]})(t)}function zV(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.37,14.62c0-0.24,0.08-0.45,0.25-0.62c0.17-0.16,0.38-0.24,0.6-0.24h2.04c0.23,0,0.42,0.08,0.58,0.25
	c0.15,0.17,0.23,0.37,0.23,0.61S8,15.06,7.85,15.23c-0.15,0.17-0.35,0.25-0.58,0.25H5.23c-0.23,0-0.43-0.08-0.6-0.25
	C4.46,15.06,4.37,14.86,4.37,14.62z M7.23,21.55c0-0.23,0.08-0.43,0.23-0.61l1.47-1.43c0.15-0.16,0.35-0.23,0.59-0.23
	c0.24,0,0.44,0.08,0.6,0.23s0.24,0.34,0.24,0.57c0,0.24-0.08,0.46-0.24,0.64L8.7,22.14c-0.41,0.32-0.82,0.32-1.23,0
	C7.31,21.98,7.23,21.78,7.23,21.55z M7.23,7.71c0-0.23,0.08-0.43,0.23-0.61C7.66,6.93,7.87,6.85,8.1,6.85
	c0.22,0,0.42,0.08,0.59,0.24l1.43,1.47c0.16,0.15,0.24,0.35,0.24,0.59c0,0.24-0.08,0.44-0.24,0.6s-0.36,0.24-0.6,0.24
	c-0.24,0-0.44-0.08-0.59-0.24L7.47,8.32C7.31,8.16,7.23,7.95,7.23,7.71z M9.78,14.62c0-0.93,0.23-1.8,0.7-2.6s1.1-1.44,1.91-1.91
	s1.67-0.7,2.6-0.7c0.7,0,1.37,0.14,2.02,0.42c0.64,0.28,1.2,0.65,1.66,1.12c0.47,0.47,0.84,1.02,1.11,1.66
	c0.27,0.64,0.41,1.32,0.41,2.02c0,0.94-0.23,1.81-0.7,2.61c-0.47,0.8-1.1,1.43-1.9,1.9c-0.8,0.47-1.67,0.7-2.61,0.7
	s-1.81-0.23-2.61-0.7c-0.8-0.47-1.43-1.1-1.9-1.9C10.02,16.43,9.78,15.56,9.78,14.62z M14.14,22.4c0-0.24,0.08-0.44,0.25-0.6
	s0.37-0.24,0.6-0.24c0.24,0,0.45,0.08,0.61,0.24s0.24,0.36,0.24,0.6v1.99c0,0.24-0.08,0.45-0.25,0.62c-0.17,0.17-0.37,0.25-0.6,0.25
	s-0.44-0.08-0.6-0.25c-0.17-0.17-0.25-0.38-0.25-0.62V22.4z M14.14,6.9V4.86c0-0.23,0.08-0.43,0.25-0.6C14.56,4.09,14.76,4,15,4
	s0.43,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6V6.9c0,0.23-0.08,0.42-0.25,0.58S15.23,7.71,15,7.71s-0.44-0.08-0.6-0.23
	S14.14,7.13,14.14,6.9z M14.25,11.22c0.87,0.11,1.6,0.49,2.19,1.15c0.59,0.66,0.89,1.44,0.89,2.33c0,0.83-0.26,1.56-0.78,2.2
	c-0.52,0.63-1.18,1.04-1.98,1.21c0.2,0.02,0.35,0.04,0.44,0.04c0.97,0,1.81-0.35,2.5-1.04s1.04-1.52,1.04-2.5
	c0-0.96-0.35-1.78-1.04-2.47c-0.69-0.68-1.52-1.02-2.5-1.02C14.74,11.14,14.49,11.17,14.25,11.22z M19.66,20.08
	c0-0.23,0.08-0.42,0.23-0.56c0.15-0.16,0.34-0.23,0.56-0.23c0.24,0,0.44,0.08,0.6,0.23l1.46,1.43c0.16,0.17,0.24,0.38,0.24,0.61
	c0,0.23-0.08,0.43-0.24,0.59c-0.4,0.31-0.8,0.31-1.2,0l-1.42-1.42C19.74,20.55,19.66,20.34,19.66,20.08z M19.66,9.16
	c0-0.25,0.08-0.45,0.23-0.59l1.42-1.47c0.17-0.16,0.37-0.24,0.59-0.24c0.24,0,0.44,0.08,0.6,0.25c0.17,0.17,0.25,0.37,0.25,0.6
	c0,0.25-0.08,0.46-0.24,0.62l-1.46,1.43c-0.18,0.16-0.38,0.24-0.6,0.24c-0.23,0-0.41-0.08-0.56-0.24S19.66,9.4,19.66,9.16z
	 M21.92,14.62c0-0.24,0.08-0.44,0.24-0.62c0.16-0.16,0.35-0.24,0.57-0.24h2.02c0.23,0,0.43,0.09,0.6,0.26
	c0.17,0.17,0.26,0.37,0.26,0.6s-0.09,0.43-0.26,0.6c-0.17,0.17-0.37,0.25-0.6,0.25h-2.02c-0.23,0-0.43-0.08-0.58-0.25
	S21.92,14.86,21.92,14.62z`},child:[]}]})(t)}function QV(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M3.1,16.97c0,0.24,0.09,0.45,0.28,0.62c0.16,0.19,0.37,0.28,0.63,0.28H18.7c0.29,0,0.53,0.1,0.73,0.3
	c0.2,0.2,0.3,0.45,0.3,0.74c0,0.29-0.1,0.53-0.3,0.72c-0.2,0.19-0.44,0.29-0.74,0.29c-0.29,0-0.54-0.1-0.73-0.29
	c-0.16-0.18-0.36-0.26-0.6-0.26c-0.25,0-0.46,0.09-0.64,0.26s-0.27,0.38-0.27,0.61c0,0.25,0.09,0.46,0.28,0.63
	c0.56,0.55,1.22,0.83,1.96,0.83c0.78,0,1.45-0.27,2.01-0.81c0.56-0.54,0.83-1.19,0.83-1.97s-0.28-1.44-0.84-2
	c-0.56-0.56-1.23-0.84-2-0.84H4.01c-0.25,0-0.46,0.09-0.64,0.26C3.19,16.51,3.1,16.72,3.1,16.97z M3.1,13.69
	c0,0.23,0.09,0.43,0.28,0.61c0.17,0.18,0.38,0.26,0.63,0.26h20.04c0.78,0,1.45-0.27,2.01-0.82c0.56-0.54,0.84-1.2,0.84-1.97
	c0-0.77-0.28-1.44-0.84-1.99s-1.23-0.83-2.01-0.83c-0.77,0-1.42,0.27-1.95,0.8c-0.18,0.16-0.27,0.38-0.27,0.67
	c0,0.26,0.09,0.47,0.26,0.63c0.17,0.16,0.38,0.24,0.63,0.24c0.24,0,0.45-0.08,0.63-0.24c0.19-0.21,0.42-0.31,0.7-0.31
	c0.29,0,0.53,0.1,0.73,0.3c0.2,0.2,0.3,0.44,0.3,0.73c0,0.29-0.1,0.53-0.3,0.72c-0.2,0.19-0.44,0.29-0.73,0.29H4.01
	c-0.25,0-0.46,0.09-0.64,0.26C3.19,13.23,3.1,13.44,3.1,13.69z`},child:[]}]})(t)}function HV(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M9.91,19.56c0-0.85,0.2-1.64,0.59-2.38s0.94-1.35,1.65-1.84V5.42c0-0.8,0.27-1.48,0.82-2.03S14.2,2.55,15,2.55
	c0.81,0,1.49,0.28,2.04,0.83c0.55,0.56,0.83,1.23,0.83,2.03v9.92c0.71,0.49,1.25,1.11,1.64,1.84s0.58,1.53,0.58,2.38
	c0,0.92-0.23,1.78-0.68,2.56s-1.07,1.4-1.85,1.85s-1.63,0.68-2.56,0.68c-0.92,0-1.77-0.23-2.55-0.68s-1.4-1.07-1.86-1.85
	S9.91,20.48,9.91,19.56z M11.67,19.56c0,0.93,0.33,1.73,0.98,2.39c0.65,0.66,1.44,0.99,2.36,0.99c0.93,0,1.73-0.33,2.4-1
	s1.01-1.46,1.01-2.37c0-0.62-0.16-1.2-0.48-1.73c-0.32-0.53-0.76-0.94-1.32-1.23l-0.28-0.14c-0.1-0.04-0.15-0.14-0.15-0.29V5.42
	c0-0.32-0.11-0.59-0.34-0.81C15.62,4.4,15.34,4.29,15,4.29c-0.32,0-0.6,0.11-0.83,0.32c-0.23,0.21-0.34,0.48-0.34,0.81v10.74
	c0,0.15-0.05,0.25-0.14,0.29l-0.27,0.14c-0.55,0.29-0.98,0.7-1.29,1.23C11.82,18.35,11.67,18.92,11.67,19.56z`},child:[]}]})(t)}function VV(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M9.91,19.56c0-0.85,0.2-1.64,0.59-2.38s0.94-1.35,1.65-1.84V5.42c0-0.8,0.27-1.48,0.82-2.03S14.2,2.55,15,2.55
	c0.81,0,1.49,0.28,2.04,0.83c0.55,0.56,0.83,1.23,0.83,2.03v9.92c0.71,0.49,1.25,1.11,1.64,1.84s0.58,1.53,0.58,2.38
	c0,0.92-0.23,1.78-0.68,2.56s-1.07,1.4-1.85,1.85s-1.63,0.68-2.56,0.68c-0.92,0-1.77-0.23-2.55-0.68s-1.4-1.07-1.86-1.85
	S9.91,20.48,9.91,19.56z M11.67,19.56c0,0.93,0.33,1.73,0.98,2.39c0.65,0.66,1.44,0.99,2.36,0.99c0.93,0,1.73-0.33,2.4-1
	s1.01-1.46,1.01-2.37c0-0.62-0.16-1.2-0.48-1.73c-0.32-0.53-0.76-0.94-1.32-1.23l-0.28-0.14c-0.1-0.04-0.15-0.14-0.15-0.29V5.42
	c0-0.32-0.11-0.59-0.34-0.81C15.62,4.4,15.34,4.29,15,4.29c-0.32,0-0.6,0.11-0.83,0.32c-0.23,0.21-0.34,0.48-0.34,0.81v10.74
	c0,0.15-0.05,0.25-0.14,0.29l-0.27,0.14c-0.55,0.29-0.98,0.7-1.29,1.23C11.82,18.35,11.67,18.92,11.67,19.56z M12.45,19.56
	c0,0.71,0.24,1.32,0.73,1.82s1.07,0.75,1.76,0.75s1.28-0.25,1.79-0.75c0.51-0.5,0.76-1.11,0.76-1.81c0-0.63-0.22-1.19-0.65-1.67
	c-0.43-0.48-0.96-0.77-1.58-0.85V9.69c0-0.06-0.03-0.13-0.1-0.19c-0.07-0.07-0.14-0.1-0.22-0.1c-0.09,0-0.16,0.03-0.21,0.08
	c-0.05,0.06-0.08,0.12-0.08,0.21v7.34c-0.61,0.09-1.13,0.37-1.56,0.85C12.66,18.37,12.45,18.92,12.45,19.56z`},child:[]}]})(t)}function GV(t){return ys({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.65,15.5c0-0.22,0.08-0.41,0.23-0.56c0.16-0.15,0.35-0.22,0.57-0.22h12.08c0.22,0,0.4,0.07,0.54,0.22
	c0.14,0.15,0.22,0.34,0.22,0.57c0,0.22-0.07,0.4-0.22,0.54c-0.14,0.14-0.32,0.22-0.54,0.22H5.45c-0.22,0-0.42-0.07-0.57-0.22
	C4.72,15.9,4.65,15.72,4.65,15.5z M7.06,12.6c0-0.22,0.08-0.4,0.23-0.55c0.15-0.15,0.34-0.23,0.56-0.23h12.09
	c0.21,0,0.39,0.08,0.54,0.23c0.15,0.15,0.22,0.33,0.22,0.55c0,0.22-0.07,0.4-0.22,0.56c-0.15,0.15-0.33,0.23-0.54,0.23H7.86
	c-0.22,0-0.41-0.08-0.56-0.23S7.06,12.82,7.06,12.6z M8.68,18.34c0-0.21,0.08-0.39,0.24-0.54c0.14-0.14,0.32-0.22,0.54-0.22h12.1
	c0.22,0,0.41,0.07,0.56,0.22c0.15,0.14,0.22,0.32,0.22,0.54s-0.08,0.41-0.23,0.56s-0.34,0.23-0.56,0.23H9.46
	c-0.22,0-0.4-0.08-0.56-0.23S8.68,18.56,8.68,18.34z M19.26,15.5c0-0.23,0.07-0.42,0.22-0.57c0.15-0.15,0.34-0.22,0.57-0.22h4.52
	c0.23,0,0.42,0.07,0.57,0.22c0.15,0.15,0.22,0.34,0.22,0.56c0,0.22-0.07,0.4-0.22,0.54c-0.15,0.14-0.34,0.22-0.56,0.22h-4.52
	c-0.23,0-0.42-0.07-0.57-0.22C19.33,15.9,19.26,15.72,19.26,15.5z`},child:[]}]})(t)}function Uce(){const[t,e]=ve.useState(""),[r,n]=ve.useState(""),[s,o]=ve.useState([]),[c,u]=ve.useState(""),[i,A]=ve.useState(""),[g,C]=ve.useState(""),B=async()=>{try{const oe=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&hourly=temperature_2m,relative_humidity_2m,precipitation,et0_fao_evapotranspiration,shortwave_radiation,wind_speed_1000hPa&forecast_days=10`,K=await Nm.get(oe);console.log(oe);const ce=K.data.hourly,me=Array.from({length:10}).map((Z,Y)=>({date:new Date(Date.now()+Y*24*60*60*1e3),temperature:ce.temperature_2m.slice(Y*24,(Y+1)*24).reduce((Le,_e)=>Le+_e,0)/24,humidity:ce.relative_humidity_2m.slice(Y*24,(Y+1)*24).reduce((Le,_e)=>Le+_e,0)/24,windSpeed:ce.wind_speed_1000hPa.slice(Y*24,(Y+1)*24).reduce((Le,_e)=>Le+_e,0)/24,precipitation:ce.precipitation.slice(Y*24,(Y+1)*24).reduce((Le,_e)=>Le+_e,0)}));o(me)}catch(oe){console.error("Error fetching weather data:",oe)}},S=async()=>{try{const K=`https://api.mapbox.com/geocoding/v5/mapbox.places/${r},${t}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,me=(await Nm.get(K)).data.features[0];me&&(u(me.text),A(me.context.find(Z=>Z.id.includes("country")).text),C(me.context.find(Z=>Z.id.includes("region")).text))}catch(oe){console.error("Error fetching location data:",oe)}},P=()=>{B(),S()},j=s.map((oe,K)=>({day:oe.date.toLocaleDateString("en-US",{weekday:"long"}),date:oe.date,avgTemp:oe.temperature.toFixed(1),minTemp:(oe.temperature-5).toFixed(1),maxTemp:(oe.temperature+5).toFixed(1),avgHumidity:oe.humidity.toFixed(1),avgWind:oe.windSpeed.toFixed(1),totalPrecipitation:oe.precipitation.toFixed(1),forecastComment:`Expect ${oe.precipitation>5?"rain":"clear skies"}.`})),R=s.map(oe=>oe.date.toLocaleDateString("en-US")),N=s.map(oe=>oe.temperature),U=s.map(oe=>oe.humidity),$=s.map(oe=>oe.windSpeed),J=s.map(oe=>oe.precipitation),te={labels:R,datasets:[{label:"Temperature (C)",data:N,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:2,tension:.4},{label:"Humidity (%)",data:U,backgroundColor:"rgba(153, 102, 255, 0.2)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:2,tension:.4},{label:"Wind Speed (km/h)",data:$,backgroundColor:"rgba(255, 206, 86, 0.2)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:2,tension:.4},{label:"Precipitation (mm)",data:J,backgroundColor:"rgba(255, 159, 64, 0.2)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:2,tension:.4}]},ue={responsive:!0,plugins:{legend:{position:"bottom",labels:{color:"#333",font:{size:14}}},tooltip:{callbacks:{label:oe=>`Value: ${oe.raw}`}}},scales:{x:{ticks:{color:"#333",font:{size:12}}},y:{ticks:{color:"#333",font:{size:12}}}}};return m.jsx("div",{className:"bg-white-100 min-h-screen p-6",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-500",children:"10-Day Weather Forecast"}),m.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Enter the latitude and longitude coordinates to view a 10-day forecast, including temperature, humidity, wind speed, and precipitation."}),m.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Latitude"}),m.jsx("input",{type:"text",placeholder:"Enter Latitude",value:t,onChange:oe=>e(oe.target.value),className:"p-2 border rounded"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Longitude"}),m.jsx("input",{type:"text",placeholder:"Enter Longitude",value:r,onChange:oe=>n(oe.target.value),className:"p-2 border rounded"})]}),m.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 self-center mt-4 md:mt-0",children:"Search"})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",c,", ",g,", ",i," "]})}),m.jsxs("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-lg mb-6 flex items-start gap-2",children:[m.jsx(Oce,{className:"text-blue-500 text-xl mt-1"}),m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Note:"})," The horizontal axis (",m.jsx("span",{className:"font-semibold",children:"x-axis"}),") represents the date, while the vertical axis (",m.jsx("span",{className:"font-semibold",children:"y-axis"}),") shows the values for temperature, humidity, wind speed, and precipitation. This will help in analyzing weather trends over the 10-day period."]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-4 w-full md:w-1/3 overflow-y-auto max-h-[400px]",children:[m.jsx("h2",{className:"text-xl font-semibold mb-3",children:"10-Day Forecast"}),j.length>0?m.jsx("div",{className:"space-y-3",children:j.map((oe,K)=>m.jsxs("div",{className:"p-3 border rounded hover:shadow-md transition-shadow duration-200",children:[m.jsxs("h3",{className:"text-lg font-normal mb-1",children:[oe.day," - ",oe.date instanceof Date?oe.date.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"Invalid Date"]}),m.jsxs("div",{className:"text-gray-600 space-y-1",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(VV,{className:"text-blue-500 w-4 h-4 mr-2"}),m.jsxs("p",{className:"text-sm",children:["Avg Temp: ",oe.avgTemp,"C"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(HV,{className:"text-orange-500 w-4 h-4 mr-2"}),m.jsxs("p",{className:"text-sm",children:["Min: ",oe.minTemp,"C, Max: ",oe.maxTemp,"C"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(fC,{className:"text-teal-500 w-4 h-4 mr-2"}),m.jsxs("p",{className:"text-sm",children:["Humidity: ",oe.avgHumidity,"%"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(QV,{className:"text-gray-500 w-4 h-4 mr-2"}),m.jsxs("p",{className:"text-sm",children:["Wind: ",oe.avgWind," km/h"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(pC,{className:"text-blue-700 w-4 h-4 mr-2"}),m.jsxs("p",{className:"text-sm",children:["Precipitation: ",oe.totalPrecipitation," mm"]})]})]}),m.jsx("p",{className:"mt-1 text-blue-500 text-sm",children:oe.forecastComment})]},K))}):m.jsx("p",{className:"text-gray-500 text-sm",children:"No forecast available."})]}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6 w-full md:w-2/3",children:m.jsx(E0,{data:te,options:ue})})]})]})})})}var qV={exports:{}};(function(t,e){var r={};(function(n,s){t.exports=s()})(Ho,function(){var n,s,o;function c(i,A){if(!n)n=A;else if(!s)s=A;else{var g="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+s+")(sharedChunk); self.onerror = null;",C={};n(C),o=A(C),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(o.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}c(["exports"],function(i){function A(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g,C={},B={};function S(){if(g)return B;g=1,Object.defineProperty(B,"__esModule",{value:!0}),B.setMatrixArrayType=function(_){B.ARRAY_TYPE=a=_},B.toRadian=function(_){return _*p},B.equals=function(_,y){return Math.abs(_-y)<=f*Math.max(1,Math.abs(_),Math.abs(y))},B.RANDOM=B.ARRAY_TYPE=B.EPSILON=void 0;var f=1e-6;B.EPSILON=f;var a=typeof Float32Array<"u"?Float32Array:Array;B.ARRAY_TYPE=a;var h=Math.random;B.RANDOM=h;var p=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var _=0,y=arguments.length;y--;)_+=arguments[y]*arguments[y];return Math.sqrt(_)}),B}var P,j={};function R(){if(P)return j;function f(y){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(y)}P=1,Object.defineProperty(j,"__esModule",{value:!0}),j.create=function(){var y=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y},j.clone=function(y){var b=new a.ARRAY_TYPE(4);return b[0]=y[0],b[1]=y[1],b[2]=y[2],b[3]=y[3],b},j.copy=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y},j.identity=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=1,y},j.fromValues=function(y,b,F,z){var V=new a.ARRAY_TYPE(4);return V[0]=y,V[1]=b,V[2]=F,V[3]=z,V},j.set=function(y,b,F,z,V){return y[0]=b,y[1]=F,y[2]=z,y[3]=V,y},j.transpose=function(y,b){if(y===b){var F=b[1];y[1]=b[2],y[2]=F}else y[0]=b[0],y[1]=b[2],y[2]=b[1],y[3]=b[3];return y},j.invert=function(y,b){var F=b[0],z=b[1],V=b[2],T=b[3],D=F*T-V*z;return D?(y[0]=T*(D=1/D),y[1]=-z*D,y[2]=-V*D,y[3]=F*D,y):null},j.adjoint=function(y,b){var F=b[0];return y[0]=b[3],y[1]=-b[1],y[2]=-b[2],y[3]=F,y},j.determinant=function(y){return y[0]*y[3]-y[2]*y[1]},j.multiply=p,j.rotate=function(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=Math.sin(F),O=Math.cos(F);return y[0]=z*O+T*H,y[1]=V*O+D*H,y[2]=z*-H+T*O,y[3]=V*-H+D*O,y},j.scale=function(y,b,F){var z=b[1],V=b[2],T=b[3],D=F[0],H=F[1];return y[0]=b[0]*D,y[1]=z*D,y[2]=V*H,y[3]=T*H,y},j.fromRotation=function(y,b){var F=Math.sin(b),z=Math.cos(b);return y[0]=z,y[1]=F,y[2]=-F,y[3]=z,y},j.fromScaling=function(y,b){return y[0]=b[0],y[1]=0,y[2]=0,y[3]=b[1],y},j.str=function(y){return"mat2("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+")"},j.frob=function(y){return Math.hypot(y[0],y[1],y[2],y[3])},j.LDU=function(y,b,F,z){return y[2]=z[2]/z[0],F[0]=z[0],F[1]=z[1],F[3]=z[3]-y[2]*F[1],[y,b,F]},j.add=function(y,b,F){return y[0]=b[0]+F[0],y[1]=b[1]+F[1],y[2]=b[2]+F[2],y[3]=b[3]+F[3],y},j.subtract=_,j.exactEquals=function(y,b){return y[0]===b[0]&&y[1]===b[1]&&y[2]===b[2]&&y[3]===b[3]},j.equals=function(y,b){var F=y[0],z=y[1],V=y[2],T=y[3],D=b[0],H=b[1],O=b[2],Q=b[3];return Math.abs(F-D)<=a.EPSILON*Math.max(1,Math.abs(F),Math.abs(D))&&Math.abs(z-H)<=a.EPSILON*Math.max(1,Math.abs(z),Math.abs(H))&&Math.abs(V-O)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs(O))&&Math.abs(T-Q)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(Q))},j.multiplyScalar=function(y,b,F){return y[0]=b[0]*F,y[1]=b[1]*F,y[2]=b[2]*F,y[3]=b[3]*F,y},j.multiplyScalarAndAdd=function(y,b,F,z){return y[0]=b[0]+F[0]*z,y[1]=b[1]+F[1]*z,y[2]=b[2]+F[2]*z,y[3]=b[3]+F[3]*z,y},j.sub=j.mul=void 0;var a=function(y,b){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var F=h(void 0);if(F&&F.has(y))return F.get(y);var z={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in y)if(T!=="default"&&Object.prototype.hasOwnProperty.call(y,T)){var D=V?Object.getOwnPropertyDescriptor(y,T):null;D&&(D.get||D.set)?Object.defineProperty(z,T,D):z[T]=y[T]}return z.default=y,F&&F.set(y,z),z}(S());function h(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,F=new WeakMap;return(h=function(z){return z?F:b})(y)}function p(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=F[0],O=F[1],Q=F[2],W=F[3];return y[0]=z*H+T*O,y[1]=V*H+D*O,y[2]=z*Q+T*W,y[3]=V*Q+D*W,y}function _(y,b,F){return y[0]=b[0]-F[0],y[1]=b[1]-F[1],y[2]=b[2]-F[2],y[3]=b[3]-F[3],y}return j.mul=p,j.sub=_,j}var N,U={};function $(){if(N)return U;function f(y){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(y)}N=1,Object.defineProperty(U,"__esModule",{value:!0}),U.create=function(){var y=new a.ARRAY_TYPE(6);return a.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0,y[4]=0,y[5]=0),y[0]=1,y[3]=1,y},U.clone=function(y){var b=new a.ARRAY_TYPE(6);return b[0]=y[0],b[1]=y[1],b[2]=y[2],b[3]=y[3],b[4]=y[4],b[5]=y[5],b},U.copy=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y[4]=b[4],y[5]=b[5],y},U.identity=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=1,y[4]=0,y[5]=0,y},U.fromValues=function(y,b,F,z,V,T){var D=new a.ARRAY_TYPE(6);return D[0]=y,D[1]=b,D[2]=F,D[3]=z,D[4]=V,D[5]=T,D},U.set=function(y,b,F,z,V,T,D){return y[0]=b,y[1]=F,y[2]=z,y[3]=V,y[4]=T,y[5]=D,y},U.invert=function(y,b){var F=b[0],z=b[1],V=b[2],T=b[3],D=b[4],H=b[5],O=F*T-z*V;return O?(y[0]=T*(O=1/O),y[1]=-z*O,y[2]=-V*O,y[3]=F*O,y[4]=(V*H-T*D)*O,y[5]=(z*D-F*H)*O,y):null},U.determinant=function(y){return y[0]*y[3]-y[1]*y[2]},U.multiply=p,U.rotate=function(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=b[4],O=b[5],Q=Math.sin(F),W=Math.cos(F);return y[0]=z*W+T*Q,y[1]=V*W+D*Q,y[2]=z*-Q+T*W,y[3]=V*-Q+D*W,y[4]=H,y[5]=O,y},U.scale=function(y,b,F){var z=b[1],V=b[2],T=b[3],D=b[4],H=b[5],O=F[0],Q=F[1];return y[0]=b[0]*O,y[1]=z*O,y[2]=V*Q,y[3]=T*Q,y[4]=D,y[5]=H,y},U.translate=function(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=b[4],O=b[5],Q=F[0],W=F[1];return y[0]=z,y[1]=V,y[2]=T,y[3]=D,y[4]=z*Q+T*W+H,y[5]=V*Q+D*W+O,y},U.fromRotation=function(y,b){var F=Math.sin(b),z=Math.cos(b);return y[0]=z,y[1]=F,y[2]=-F,y[3]=z,y[4]=0,y[5]=0,y},U.fromScaling=function(y,b){return y[0]=b[0],y[1]=0,y[2]=0,y[3]=b[1],y[4]=0,y[5]=0,y},U.fromTranslation=function(y,b){return y[0]=1,y[1]=0,y[2]=0,y[3]=1,y[4]=b[0],y[5]=b[1],y},U.str=function(y){return"mat2d("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+")"},U.frob=function(y){return Math.hypot(y[0],y[1],y[2],y[3],y[4],y[5],1)},U.add=function(y,b,F){return y[0]=b[0]+F[0],y[1]=b[1]+F[1],y[2]=b[2]+F[2],y[3]=b[3]+F[3],y[4]=b[4]+F[4],y[5]=b[5]+F[5],y},U.subtract=_,U.multiplyScalar=function(y,b,F){return y[0]=b[0]*F,y[1]=b[1]*F,y[2]=b[2]*F,y[3]=b[3]*F,y[4]=b[4]*F,y[5]=b[5]*F,y},U.multiplyScalarAndAdd=function(y,b,F,z){return y[0]=b[0]+F[0]*z,y[1]=b[1]+F[1]*z,y[2]=b[2]+F[2]*z,y[3]=b[3]+F[3]*z,y[4]=b[4]+F[4]*z,y[5]=b[5]+F[5]*z,y},U.exactEquals=function(y,b){return y[0]===b[0]&&y[1]===b[1]&&y[2]===b[2]&&y[3]===b[3]&&y[4]===b[4]&&y[5]===b[5]},U.equals=function(y,b){var F=y[0],z=y[1],V=y[2],T=y[3],D=y[4],H=y[5],O=b[0],Q=b[1],W=b[2],re=b[3],he=b[4],Se=b[5];return Math.abs(F-O)<=a.EPSILON*Math.max(1,Math.abs(F),Math.abs(O))&&Math.abs(z-Q)<=a.EPSILON*Math.max(1,Math.abs(z),Math.abs(Q))&&Math.abs(V-W)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs(W))&&Math.abs(T-re)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(re))&&Math.abs(D-he)<=a.EPSILON*Math.max(1,Math.abs(D),Math.abs(he))&&Math.abs(H-Se)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(Se))},U.sub=U.mul=void 0;var a=function(y,b){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var F=h(void 0);if(F&&F.has(y))return F.get(y);var z={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in y)if(T!=="default"&&Object.prototype.hasOwnProperty.call(y,T)){var D=V?Object.getOwnPropertyDescriptor(y,T):null;D&&(D.get||D.set)?Object.defineProperty(z,T,D):z[T]=y[T]}return z.default=y,F&&F.set(y,z),z}(S());function h(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,F=new WeakMap;return(h=function(z){return z?F:b})(y)}function p(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=b[4],O=b[5],Q=F[0],W=F[1],re=F[2],he=F[3],Se=F[4],Te=F[5];return y[0]=z*Q+T*W,y[1]=V*Q+D*W,y[2]=z*re+T*he,y[3]=V*re+D*he,y[4]=z*Se+T*Te+H,y[5]=V*Se+D*Te+O,y}function _(y,b,F){return y[0]=b[0]-F[0],y[1]=b[1]-F[1],y[2]=b[2]-F[2],y[3]=b[3]-F[3],y[4]=b[4]-F[4],y[5]=b[5]-F[5],y}return U.mul=p,U.sub=_,U}var J,te={};function ue(){if(J)return te;function f(y){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(y)}J=1,Object.defineProperty(te,"__esModule",{value:!0}),te.create=function(){var y=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y},te.fromMat4=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[4],y[4]=b[5],y[5]=b[6],y[6]=b[8],y[7]=b[9],y[8]=b[10],y},te.clone=function(y){var b=new a.ARRAY_TYPE(9);return b[0]=y[0],b[1]=y[1],b[2]=y[2],b[3]=y[3],b[4]=y[4],b[5]=y[5],b[6]=y[6],b[7]=y[7],b[8]=y[8],b},te.copy=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=b[2],y[3]=b[3],y[4]=b[4],y[5]=b[5],y[6]=b[6],y[7]=b[7],y[8]=b[8],y},te.fromValues=function(y,b,F,z,V,T,D,H,O){var Q=new a.ARRAY_TYPE(9);return Q[0]=y,Q[1]=b,Q[2]=F,Q[3]=z,Q[4]=V,Q[5]=T,Q[6]=D,Q[7]=H,Q[8]=O,Q},te.set=function(y,b,F,z,V,T,D,H,O,Q){return y[0]=b,y[1]=F,y[2]=z,y[3]=V,y[4]=T,y[5]=D,y[6]=H,y[7]=O,y[8]=Q,y},te.identity=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=1,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},te.transpose=function(y,b){if(y===b){var F=b[1],z=b[2],V=b[5];y[1]=b[3],y[2]=b[6],y[3]=F,y[5]=b[7],y[6]=z,y[7]=V}else y[0]=b[0],y[1]=b[3],y[2]=b[6],y[3]=b[1],y[4]=b[4],y[5]=b[7],y[6]=b[2],y[7]=b[5],y[8]=b[8];return y},te.invert=function(y,b){var F=b[0],z=b[1],V=b[2],T=b[3],D=b[4],H=b[5],O=b[6],Q=b[7],W=b[8],re=W*D-H*Q,he=-W*T+H*O,Se=Q*T-D*O,Te=F*re+z*he+V*Se;return Te?(y[0]=re*(Te=1/Te),y[1]=(-W*z+V*Q)*Te,y[2]=(H*z-V*D)*Te,y[3]=he*Te,y[4]=(W*F-V*O)*Te,y[5]=(-H*F+V*T)*Te,y[6]=Se*Te,y[7]=(-Q*F+z*O)*Te,y[8]=(D*F-z*T)*Te,y):null},te.adjoint=function(y,b){var F=b[0],z=b[1],V=b[2],T=b[3],D=b[4],H=b[5],O=b[6],Q=b[7],W=b[8];return y[0]=D*W-H*Q,y[1]=V*Q-z*W,y[2]=z*H-V*D,y[3]=H*O-T*W,y[4]=F*W-V*O,y[5]=V*T-F*H,y[6]=T*Q-D*O,y[7]=z*O-F*Q,y[8]=F*D-z*T,y},te.determinant=function(y){var b=y[3],F=y[4],z=y[5],V=y[6],T=y[7],D=y[8];return y[0]*(D*F-z*T)+y[1]*(-D*b+z*V)+y[2]*(T*b-F*V)},te.multiply=p,te.translate=function(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=b[4],O=b[5],Q=b[6],W=b[7],re=b[8],he=F[0],Se=F[1];return y[0]=z,y[1]=V,y[2]=T,y[3]=D,y[4]=H,y[5]=O,y[6]=he*z+Se*D+Q,y[7]=he*V+Se*H+W,y[8]=he*T+Se*O+re,y},te.rotate=function(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=b[4],O=b[5],Q=b[6],W=b[7],re=b[8],he=Math.sin(F),Se=Math.cos(F);return y[0]=Se*z+he*D,y[1]=Se*V+he*H,y[2]=Se*T+he*O,y[3]=Se*D-he*z,y[4]=Se*H-he*V,y[5]=Se*O-he*T,y[6]=Q,y[7]=W,y[8]=re,y},te.scale=function(y,b,F){var z=F[0],V=F[1];return y[0]=z*b[0],y[1]=z*b[1],y[2]=z*b[2],y[3]=V*b[3],y[4]=V*b[4],y[5]=V*b[5],y[6]=b[6],y[7]=b[7],y[8]=b[8],y},te.fromTranslation=function(y,b){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=1,y[5]=0,y[6]=b[0],y[7]=b[1],y[8]=1,y},te.fromRotation=function(y,b){var F=Math.sin(b),z=Math.cos(b);return y[0]=z,y[1]=F,y[2]=0,y[3]=-F,y[4]=z,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},te.fromScaling=function(y,b){return y[0]=b[0],y[1]=0,y[2]=0,y[3]=0,y[4]=b[1],y[5]=0,y[6]=0,y[7]=0,y[8]=1,y},te.fromMat2d=function(y,b){return y[0]=b[0],y[1]=b[1],y[2]=0,y[3]=b[2],y[4]=b[3],y[5]=0,y[6]=b[4],y[7]=b[5],y[8]=1,y},te.fromQuat=function(y,b){var F=b[0],z=b[1],V=b[2],T=b[3],D=F+F,H=z+z,O=V+V,Q=F*D,W=z*D,re=z*H,he=V*D,Se=V*H,Te=V*O,de=T*D,je=T*H,Ve=T*O;return y[0]=1-re-Te,y[3]=W-Ve,y[6]=he+je,y[1]=W+Ve,y[4]=1-Q-Te,y[7]=Se-de,y[2]=he-je,y[5]=Se+de,y[8]=1-Q-re,y},te.normalFromMat4=function(y,b){var F=b[0],z=b[1],V=b[2],T=b[3],D=b[4],H=b[5],O=b[6],Q=b[7],W=b[8],re=b[9],he=b[10],Se=b[11],Te=b[12],de=b[13],je=b[14],Ve=b[15],et=F*H-z*D,dt=F*O-V*D,pt=F*Q-T*D,at=z*O-V*H,Et=z*Q-T*H,yt=V*Q-T*O,Nt=W*de-re*Te,zt=W*je-he*Te,Gt=W*Ve-Se*Te,qt=re*je-he*de,Jt=re*Ve-Se*de,vr=he*Ve-Se*je,rr=et*vr-dt*Jt+pt*qt+at*Gt-Et*zt+yt*Nt;return rr?(y[0]=(H*vr-O*Jt+Q*qt)*(rr=1/rr),y[1]=(O*Gt-D*vr-Q*zt)*rr,y[2]=(D*Jt-H*Gt+Q*Nt)*rr,y[3]=(V*Jt-z*vr-T*qt)*rr,y[4]=(F*vr-V*Gt+T*zt)*rr,y[5]=(z*Gt-F*Jt-T*Nt)*rr,y[6]=(de*yt-je*Et+Ve*at)*rr,y[7]=(je*pt-Te*yt-Ve*dt)*rr,y[8]=(Te*Et-de*pt+Ve*et)*rr,y):null},te.projection=function(y,b,F){return y[0]=2/b,y[1]=0,y[2]=0,y[3]=0,y[4]=-2/F,y[5]=0,y[6]=-1,y[7]=1,y[8]=1,y},te.str=function(y){return"mat3("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+")"},te.frob=function(y){return Math.hypot(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8])},te.add=function(y,b,F){return y[0]=b[0]+F[0],y[1]=b[1]+F[1],y[2]=b[2]+F[2],y[3]=b[3]+F[3],y[4]=b[4]+F[4],y[5]=b[5]+F[5],y[6]=b[6]+F[6],y[7]=b[7]+F[7],y[8]=b[8]+F[8],y},te.subtract=_,te.multiplyScalar=function(y,b,F){return y[0]=b[0]*F,y[1]=b[1]*F,y[2]=b[2]*F,y[3]=b[3]*F,y[4]=b[4]*F,y[5]=b[5]*F,y[6]=b[6]*F,y[7]=b[7]*F,y[8]=b[8]*F,y},te.multiplyScalarAndAdd=function(y,b,F,z){return y[0]=b[0]+F[0]*z,y[1]=b[1]+F[1]*z,y[2]=b[2]+F[2]*z,y[3]=b[3]+F[3]*z,y[4]=b[4]+F[4]*z,y[5]=b[5]+F[5]*z,y[6]=b[6]+F[6]*z,y[7]=b[7]+F[7]*z,y[8]=b[8]+F[8]*z,y},te.exactEquals=function(y,b){return y[0]===b[0]&&y[1]===b[1]&&y[2]===b[2]&&y[3]===b[3]&&y[4]===b[4]&&y[5]===b[5]&&y[6]===b[6]&&y[7]===b[7]&&y[8]===b[8]},te.equals=function(y,b){var F=y[0],z=y[1],V=y[2],T=y[3],D=y[4],H=y[5],O=y[6],Q=y[7],W=y[8],re=b[0],he=b[1],Se=b[2],Te=b[3],de=b[4],je=b[5],Ve=b[6],et=b[7],dt=b[8];return Math.abs(F-re)<=a.EPSILON*Math.max(1,Math.abs(F),Math.abs(re))&&Math.abs(z-he)<=a.EPSILON*Math.max(1,Math.abs(z),Math.abs(he))&&Math.abs(V-Se)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs(Se))&&Math.abs(T-Te)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(Te))&&Math.abs(D-de)<=a.EPSILON*Math.max(1,Math.abs(D),Math.abs(de))&&Math.abs(H-je)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(je))&&Math.abs(O-Ve)<=a.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ve))&&Math.abs(Q-et)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(et))&&Math.abs(W-dt)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(dt))},te.sub=te.mul=void 0;var a=function(y,b){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var F=h(void 0);if(F&&F.has(y))return F.get(y);var z={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in y)if(T!=="default"&&Object.prototype.hasOwnProperty.call(y,T)){var D=V?Object.getOwnPropertyDescriptor(y,T):null;D&&(D.get||D.set)?Object.defineProperty(z,T,D):z[T]=y[T]}return z.default=y,F&&F.set(y,z),z}(S());function h(y){if(typeof WeakMap!="function")return null;var b=new WeakMap,F=new WeakMap;return(h=function(z){return z?F:b})(y)}function p(y,b,F){var z=b[0],V=b[1],T=b[2],D=b[3],H=b[4],O=b[5],Q=b[6],W=b[7],re=b[8],he=F[0],Se=F[1],Te=F[2],de=F[3],je=F[4],Ve=F[5],et=F[6],dt=F[7],pt=F[8];return y[0]=he*z+Se*D+Te*Q,y[1]=he*V+Se*H+Te*W,y[2]=he*T+Se*O+Te*re,y[3]=de*z+je*D+Ve*Q,y[4]=de*V+je*H+Ve*W,y[5]=de*T+je*O+Ve*re,y[6]=et*z+dt*D+pt*Q,y[7]=et*V+dt*H+pt*W,y[8]=et*T+dt*O+pt*re,y}function _(y,b,F){return y[0]=b[0]-F[0],y[1]=b[1]-F[1],y[2]=b[2]-F[2],y[3]=b[3]-F[3],y[4]=b[4]-F[4],y[5]=b[5]-F[5],y[6]=b[6]-F[6],y[7]=b[7]-F[7],y[8]=b[8]-F[8],y}return te.mul=p,te.sub=_,te}var oe,K={};function ce(){if(oe)return K;function f(T){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},f(T)}oe=1,Object.defineProperty(K,"__esModule",{value:!0}),K.create=function(){var T=new a.ARRAY_TYPE(16);return a.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=0,T[12]=0,T[13]=0,T[14]=0),T[0]=1,T[5]=1,T[10]=1,T[15]=1,T},K.clone=function(T){var D=new a.ARRAY_TYPE(16);return D[0]=T[0],D[1]=T[1],D[2]=T[2],D[3]=T[3],D[4]=T[4],D[5]=T[5],D[6]=T[6],D[7]=T[7],D[8]=T[8],D[9]=T[9],D[10]=T[10],D[11]=T[11],D[12]=T[12],D[13]=T[13],D[14]=T[14],D[15]=T[15],D},K.copy=function(T,D){return T[0]=D[0],T[1]=D[1],T[2]=D[2],T[3]=D[3],T[4]=D[4],T[5]=D[5],T[6]=D[6],T[7]=D[7],T[8]=D[8],T[9]=D[9],T[10]=D[10],T[11]=D[11],T[12]=D[12],T[13]=D[13],T[14]=D[14],T[15]=D[15],T},K.fromValues=function(T,D,H,O,Q,W,re,he,Se,Te,de,je,Ve,et,dt,pt){var at=new a.ARRAY_TYPE(16);return at[0]=T,at[1]=D,at[2]=H,at[3]=O,at[4]=Q,at[5]=W,at[6]=re,at[7]=he,at[8]=Se,at[9]=Te,at[10]=de,at[11]=je,at[12]=Ve,at[13]=et,at[14]=dt,at[15]=pt,at},K.set=function(T,D,H,O,Q,W,re,he,Se,Te,de,je,Ve,et,dt,pt,at){return T[0]=D,T[1]=H,T[2]=O,T[3]=Q,T[4]=W,T[5]=re,T[6]=he,T[7]=Se,T[8]=Te,T[9]=de,T[10]=je,T[11]=Ve,T[12]=et,T[13]=dt,T[14]=pt,T[15]=at,T},K.identity=p,K.transpose=function(T,D){if(T===D){var H=D[1],O=D[2],Q=D[3],W=D[6],re=D[7],he=D[11];T[1]=D[4],T[2]=D[8],T[3]=D[12],T[4]=H,T[6]=D[9],T[7]=D[13],T[8]=O,T[9]=W,T[11]=D[14],T[12]=Q,T[13]=re,T[14]=he}else T[0]=D[0],T[1]=D[4],T[2]=D[8],T[3]=D[12],T[4]=D[1],T[5]=D[5],T[6]=D[9],T[7]=D[13],T[8]=D[2],T[9]=D[6],T[10]=D[10],T[11]=D[14],T[12]=D[3],T[13]=D[7],T[14]=D[11],T[15]=D[15];return T},K.invert=function(T,D){var H=D[0],O=D[1],Q=D[2],W=D[3],re=D[4],he=D[5],Se=D[6],Te=D[7],de=D[8],je=D[9],Ve=D[10],et=D[11],dt=D[12],pt=D[13],at=D[14],Et=D[15],yt=H*he-O*re,Nt=H*Se-Q*re,zt=H*Te-W*re,Gt=O*Se-Q*he,qt=O*Te-W*he,Jt=Q*Te-W*Se,vr=de*pt-je*dt,rr=de*at-Ve*dt,Br=de*Et-et*dt,Ur=je*at-Ve*pt,br=je*Et-et*pt,Cn=Ve*Et-et*at,dn=yt*Cn-Nt*br+zt*Ur+Gt*Br-qt*rr+Jt*vr;return dn?(T[0]=(he*Cn-Se*br+Te*Ur)*(dn=1/dn),T[1]=(Q*br-O*Cn-W*Ur)*dn,T[2]=(pt*Jt-at*qt+Et*Gt)*dn,T[3]=(Ve*qt-je*Jt-et*Gt)*dn,T[4]=(Se*Br-re*Cn-Te*rr)*dn,T[5]=(H*Cn-Q*Br+W*rr)*dn,T[6]=(at*zt-dt*Jt-Et*Nt)*dn,T[7]=(de*Jt-Ve*zt+et*Nt)*dn,T[8]=(re*br-he*Br+Te*vr)*dn,T[9]=(O*Br-H*br-W*vr)*dn,T[10]=(dt*qt-pt*zt+Et*yt)*dn,T[11]=(je*zt-de*qt-et*yt)*dn,T[12]=(he*rr-re*Ur-Se*vr)*dn,T[13]=(H*Ur-O*rr+Q*vr)*dn,T[14]=(pt*Nt-dt*Gt-at*yt)*dn,T[15]=(de*Gt-je*Nt+Ve*yt)*dn,T):null},K.adjoint=function(T,D){var H=D[0],O=D[1],Q=D[2],W=D[3],re=D[4],he=D[5],Se=D[6],Te=D[7],de=D[8],je=D[9],Ve=D[10],et=D[11],dt=D[12],pt=D[13],at=D[14],Et=D[15];return T[0]=he*(Ve*Et-et*at)-je*(Se*Et-Te*at)+pt*(Se*et-Te*Ve),T[1]=-(O*(Ve*Et-et*at)-je*(Q*Et-W*at)+pt*(Q*et-W*Ve)),T[2]=O*(Se*Et-Te*at)-he*(Q*Et-W*at)+pt*(Q*Te-W*Se),T[3]=-(O*(Se*et-Te*Ve)-he*(Q*et-W*Ve)+je*(Q*Te-W*Se)),T[4]=-(re*(Ve*Et-et*at)-de*(Se*Et-Te*at)+dt*(Se*et-Te*Ve)),T[5]=H*(Ve*Et-et*at)-de*(Q*Et-W*at)+dt*(Q*et-W*Ve),T[6]=-(H*(Se*Et-Te*at)-re*(Q*Et-W*at)+dt*(Q*Te-W*Se)),T[7]=H*(Se*et-Te*Ve)-re*(Q*et-W*Ve)+de*(Q*Te-W*Se),T[8]=re*(je*Et-et*pt)-de*(he*Et-Te*pt)+dt*(he*et-Te*je),T[9]=-(H*(je*Et-et*pt)-de*(O*Et-W*pt)+dt*(O*et-W*je)),T[10]=H*(he*Et-Te*pt)-re*(O*Et-W*pt)+dt*(O*Te-W*he),T[11]=-(H*(he*et-Te*je)-re*(O*et-W*je)+de*(O*Te-W*he)),T[12]=-(re*(je*at-Ve*pt)-de*(he*at-Se*pt)+dt*(he*Ve-Se*je)),T[13]=H*(je*at-Ve*pt)-de*(O*at-Q*pt)+dt*(O*Ve-Q*je),T[14]=-(H*(he*at-Se*pt)-re*(O*at-Q*pt)+dt*(O*Se-Q*he)),T[15]=H*(he*Ve-Se*je)-re*(O*Ve-Q*je)+de*(O*Se-Q*he),T},K.determinant=function(T){var D=T[0],H=T[1],O=T[2],Q=T[3],W=T[4],re=T[5],he=T[6],Se=T[7],Te=T[8],de=T[9],je=T[10],Ve=T[11],et=T[12],dt=T[13],pt=T[14],at=T[15];return(D*re-H*W)*(je*at-Ve*pt)-(D*he-O*W)*(de*at-Ve*dt)+(D*Se-Q*W)*(de*pt-je*dt)+(H*he-O*re)*(Te*at-Ve*et)-(H*Se-Q*re)*(Te*pt-je*et)+(O*Se-Q*he)*(Te*dt-de*et)},K.multiply=_,K.translate=function(T,D,H){var O,Q,W,re,he,Se,Te,de,je,Ve,et,dt,pt=H[0],at=H[1],Et=H[2];return D===T?(T[12]=D[0]*pt+D[4]*at+D[8]*Et+D[12],T[13]=D[1]*pt+D[5]*at+D[9]*Et+D[13],T[14]=D[2]*pt+D[6]*at+D[10]*Et+D[14],T[15]=D[3]*pt+D[7]*at+D[11]*Et+D[15]):(Q=D[1],W=D[2],re=D[3],he=D[4],Se=D[5],Te=D[6],de=D[7],je=D[8],Ve=D[9],et=D[10],dt=D[11],T[0]=O=D[0],T[1]=Q,T[2]=W,T[3]=re,T[4]=he,T[5]=Se,T[6]=Te,T[7]=de,T[8]=je,T[9]=Ve,T[10]=et,T[11]=dt,T[12]=O*pt+he*at+je*Et+D[12],T[13]=Q*pt+Se*at+Ve*Et+D[13],T[14]=W*pt+Te*at+et*Et+D[14],T[15]=re*pt+de*at+dt*Et+D[15]),T},K.scale=function(T,D,H){var O=H[0],Q=H[1],W=H[2];return T[0]=D[0]*O,T[1]=D[1]*O,T[2]=D[2]*O,T[3]=D[3]*O,T[4]=D[4]*Q,T[5]=D[5]*Q,T[6]=D[6]*Q,T[7]=D[7]*Q,T[8]=D[8]*W,T[9]=D[9]*W,T[10]=D[10]*W,T[11]=D[11]*W,T[12]=D[12],T[13]=D[13],T[14]=D[14],T[15]=D[15],T},K.rotate=function(T,D,H,O){var Q,W,re,he,Se,Te,de,je,Ve,et,dt,pt,at,Et,yt,Nt,zt,Gt,qt,Jt,vr,rr,Br,Ur,br=O[0],Cn=O[1],dn=O[2],rn=Math.hypot(br,Cn,dn);return rn<a.EPSILON?null:(br*=rn=1/rn,Cn*=rn,dn*=rn,Q=Math.sin(H),W=Math.cos(H),Se=D[1],Te=D[2],de=D[3],Ve=D[5],et=D[6],dt=D[7],at=D[9],Et=D[10],yt=D[11],Nt=br*br*(re=1-W)+W,qt=br*Cn*re-dn*Q,Jt=Cn*Cn*re+W,vr=dn*Cn*re+br*Q,rr=br*dn*re+Cn*Q,Br=Cn*dn*re-br*Q,Ur=dn*dn*re+W,T[0]=(he=D[0])*Nt+(je=D[4])*(zt=Cn*br*re+dn*Q)+(pt=D[8])*(Gt=dn*br*re-Cn*Q),T[1]=Se*Nt+Ve*zt+at*Gt,T[2]=Te*Nt+et*zt+Et*Gt,T[3]=de*Nt+dt*zt+yt*Gt,T[4]=he*qt+je*Jt+pt*vr,T[5]=Se*qt+Ve*Jt+at*vr,T[6]=Te*qt+et*Jt+Et*vr,T[7]=de*qt+dt*Jt+yt*vr,T[8]=he*rr+je*Br+pt*Ur,T[9]=Se*rr+Ve*Br+at*Ur,T[10]=Te*rr+et*Br+Et*Ur,T[11]=de*rr+dt*Br+yt*Ur,D!==T&&(T[12]=D[12],T[13]=D[13],T[14]=D[14],T[15]=D[15]),T)},K.rotateX=function(T,D,H){var O=Math.sin(H),Q=Math.cos(H),W=D[4],re=D[5],he=D[6],Se=D[7],Te=D[8],de=D[9],je=D[10],Ve=D[11];return D!==T&&(T[0]=D[0],T[1]=D[1],T[2]=D[2],T[3]=D[3],T[12]=D[12],T[13]=D[13],T[14]=D[14],T[15]=D[15]),T[4]=W*Q+Te*O,T[5]=re*Q+de*O,T[6]=he*Q+je*O,T[7]=Se*Q+Ve*O,T[8]=Te*Q-W*O,T[9]=de*Q-re*O,T[10]=je*Q-he*O,T[11]=Ve*Q-Se*O,T},K.rotateY=function(T,D,H){var O=Math.sin(H),Q=Math.cos(H),W=D[0],re=D[1],he=D[2],Se=D[3],Te=D[8],de=D[9],je=D[10],Ve=D[11];return D!==T&&(T[4]=D[4],T[5]=D[5],T[6]=D[6],T[7]=D[7],T[12]=D[12],T[13]=D[13],T[14]=D[14],T[15]=D[15]),T[0]=W*Q-Te*O,T[1]=re*Q-de*O,T[2]=he*Q-je*O,T[3]=Se*Q-Ve*O,T[8]=W*O+Te*Q,T[9]=re*O+de*Q,T[10]=he*O+je*Q,T[11]=Se*O+Ve*Q,T},K.rotateZ=function(T,D,H){var O=Math.sin(H),Q=Math.cos(H),W=D[0],re=D[1],he=D[2],Se=D[3],Te=D[4],de=D[5],je=D[6],Ve=D[7];return D!==T&&(T[8]=D[8],T[9]=D[9],T[10]=D[10],T[11]=D[11],T[12]=D[12],T[13]=D[13],T[14]=D[14],T[15]=D[15]),T[0]=W*Q+Te*O,T[1]=re*Q+de*O,T[2]=he*Q+je*O,T[3]=Se*Q+Ve*O,T[4]=Te*Q-W*O,T[5]=de*Q-re*O,T[6]=je*Q-he*O,T[7]=Ve*Q-Se*O,T},K.fromTranslation=function(T,D){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=D[0],T[13]=D[1],T[14]=D[2],T[15]=1,T},K.fromScaling=function(T,D){return T[0]=D[0],T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=D[1],T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=D[2],T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromRotation=function(T,D,H){var O,Q,W,re=H[0],he=H[1],Se=H[2],Te=Math.hypot(re,he,Se);return Te<a.EPSILON?null:(re*=Te=1/Te,he*=Te,Se*=Te,O=Math.sin(D),Q=Math.cos(D),T[0]=re*re*(W=1-Q)+Q,T[1]=he*re*W+Se*O,T[2]=Se*re*W-he*O,T[3]=0,T[4]=re*he*W-Se*O,T[5]=he*he*W+Q,T[6]=Se*he*W+re*O,T[7]=0,T[8]=re*Se*W+he*O,T[9]=he*Se*W-re*O,T[10]=Se*Se*W+Q,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T)},K.fromXRotation=function(T,D){var H=Math.sin(D),O=Math.cos(D);return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=O,T[6]=H,T[7]=0,T[8]=0,T[9]=-H,T[10]=O,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromYRotation=function(T,D){var H=Math.sin(D),O=Math.cos(D);return T[0]=O,T[1]=0,T[2]=-H,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=H,T[9]=0,T[10]=O,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromZRotation=function(T,D){var H=Math.sin(D),O=Math.cos(D);return T[0]=O,T[1]=H,T[2]=0,T[3]=0,T[4]=-H,T[5]=O,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.fromRotationTranslation=y,K.fromQuat2=function(T,D){var H=new a.ARRAY_TYPE(3),O=-D[0],Q=-D[1],W=-D[2],re=D[3],he=D[4],Se=D[5],Te=D[6],de=D[7],je=O*O+Q*Q+W*W+re*re;return je>0?(H[0]=2*(he*re+de*O+Se*W-Te*Q)/je,H[1]=2*(Se*re+de*Q+Te*O-he*W)/je,H[2]=2*(Te*re+de*W+he*Q-Se*O)/je):(H[0]=2*(he*re+de*O+Se*W-Te*Q),H[1]=2*(Se*re+de*Q+Te*O-he*W),H[2]=2*(Te*re+de*W+he*Q-Se*O)),y(T,D,H),T},K.getTranslation=function(T,D){return T[0]=D[12],T[1]=D[13],T[2]=D[14],T},K.getScaling=b,K.getRotation=function(T,D){var H=new a.ARRAY_TYPE(3);b(H,D);var O=1/H[0],Q=1/H[1],W=1/H[2],re=D[0]*O,he=D[1]*Q,Se=D[2]*W,Te=D[4]*O,de=D[5]*Q,je=D[6]*W,Ve=D[8]*O,et=D[9]*Q,dt=D[10]*W,pt=re+de+dt,at=0;return pt>0?(at=2*Math.sqrt(pt+1),T[3]=.25*at,T[0]=(je-et)/at,T[1]=(Ve-Se)/at,T[2]=(he-Te)/at):re>de&&re>dt?(at=2*Math.sqrt(1+re-de-dt),T[3]=(je-et)/at,T[0]=.25*at,T[1]=(he+Te)/at,T[2]=(Ve+Se)/at):de>dt?(at=2*Math.sqrt(1+de-re-dt),T[3]=(Ve-Se)/at,T[0]=(he+Te)/at,T[1]=.25*at,T[2]=(je+et)/at):(at=2*Math.sqrt(1+dt-re-de),T[3]=(he-Te)/at,T[0]=(Ve+Se)/at,T[1]=(je+et)/at,T[2]=.25*at),T},K.fromRotationTranslationScale=function(T,D,H,O){var Q=D[0],W=D[1],re=D[2],he=D[3],Se=Q+Q,Te=W+W,de=re+re,je=Q*Se,Ve=Q*Te,et=Q*de,dt=W*Te,pt=W*de,at=re*de,Et=he*Se,yt=he*Te,Nt=he*de,zt=O[0],Gt=O[1],qt=O[2];return T[0]=(1-(dt+at))*zt,T[1]=(Ve+Nt)*zt,T[2]=(et-yt)*zt,T[3]=0,T[4]=(Ve-Nt)*Gt,T[5]=(1-(je+at))*Gt,T[6]=(pt+Et)*Gt,T[7]=0,T[8]=(et+yt)*qt,T[9]=(pt-Et)*qt,T[10]=(1-(je+dt))*qt,T[11]=0,T[12]=H[0],T[13]=H[1],T[14]=H[2],T[15]=1,T},K.fromRotationTranslationScaleOrigin=function(T,D,H,O,Q){var W=D[0],re=D[1],he=D[2],Se=D[3],Te=W+W,de=re+re,je=he+he,Ve=W*Te,et=W*de,dt=W*je,pt=re*de,at=re*je,Et=he*je,yt=Se*Te,Nt=Se*de,zt=Se*je,Gt=O[0],qt=O[1],Jt=O[2],vr=Q[0],rr=Q[1],Br=Q[2],Ur=(1-(pt+Et))*Gt,br=(et+zt)*Gt,Cn=(dt-Nt)*Gt,dn=(et-zt)*qt,rn=(1-(Ve+Et))*qt,Vr=(at+yt)*qt,Zn=(dt+Nt)*Jt,wn=(at-yt)*Jt,Pn=(1-(Ve+pt))*Jt;return T[0]=Ur,T[1]=br,T[2]=Cn,T[3]=0,T[4]=dn,T[5]=rn,T[6]=Vr,T[7]=0,T[8]=Zn,T[9]=wn,T[10]=Pn,T[11]=0,T[12]=H[0]+vr-(Ur*vr+dn*rr+Zn*Br),T[13]=H[1]+rr-(br*vr+rn*rr+wn*Br),T[14]=H[2]+Br-(Cn*vr+Vr*rr+Pn*Br),T[15]=1,T},K.fromQuat=function(T,D){var H=D[0],O=D[1],Q=D[2],W=D[3],re=H+H,he=O+O,Se=Q+Q,Te=H*re,de=O*re,je=O*he,Ve=Q*re,et=Q*he,dt=Q*Se,pt=W*re,at=W*he,Et=W*Se;return T[0]=1-je-dt,T[1]=de+Et,T[2]=Ve-at,T[3]=0,T[4]=de-Et,T[5]=1-Te-dt,T[6]=et+pt,T[7]=0,T[8]=Ve+at,T[9]=et-pt,T[10]=1-Te-je,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},K.frustum=function(T,D,H,O,Q,W,re){var he=1/(H-D),Se=1/(Q-O),Te=1/(W-re);return T[0]=2*W*he,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=2*W*Se,T[6]=0,T[7]=0,T[8]=(H+D)*he,T[9]=(Q+O)*Se,T[10]=(re+W)*Te,T[11]=-1,T[12]=0,T[13]=0,T[14]=re*W*2*Te,T[15]=0,T},K.perspectiveNO=F,K.perspectiveZO=function(T,D,H,O,Q){var W,re=1/Math.tan(D/2);return T[0]=re/H,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=re,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,Q!=null&&Q!==1/0?(T[10]=Q*(W=1/(O-Q)),T[14]=Q*O*W):(T[10]=-1,T[14]=-O),T},K.perspectiveFromFieldOfView=function(T,D,H,O){var Q=Math.tan(D.upDegrees*Math.PI/180),W=Math.tan(D.downDegrees*Math.PI/180),re=Math.tan(D.leftDegrees*Math.PI/180),he=Math.tan(D.rightDegrees*Math.PI/180),Se=2/(re+he),Te=2/(Q+W);return T[0]=Se,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=Te,T[6]=0,T[7]=0,T[8]=-(re-he)*Se*.5,T[9]=(Q-W)*Te*.5,T[10]=O/(H-O),T[11]=-1,T[12]=0,T[13]=0,T[14]=O*H/(H-O),T[15]=0,T},K.orthoNO=z,K.orthoZO=function(T,D,H,O,Q,W,re){var he=1/(D-H),Se=1/(O-Q),Te=1/(W-re);return T[0]=-2*he,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*Se,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=Te,T[11]=0,T[12]=(D+H)*he,T[13]=(Q+O)*Se,T[14]=W*Te,T[15]=1,T},K.lookAt=function(T,D,H,O){var Q,W,re,he,Se,Te,de,je,Ve,et,dt=D[0],pt=D[1],at=D[2],Et=O[0],yt=O[1],Nt=O[2],zt=H[0],Gt=H[1],qt=H[2];return Math.abs(dt-zt)<a.EPSILON&&Math.abs(pt-Gt)<a.EPSILON&&Math.abs(at-qt)<a.EPSILON?p(T):(de=dt-zt,je=pt-Gt,Ve=at-qt,Q=yt*(Ve*=et=1/Math.hypot(de,je,Ve))-Nt*(je*=et),W=Nt*(de*=et)-Et*Ve,re=Et*je-yt*de,(et=Math.hypot(Q,W,re))?(Q*=et=1/et,W*=et,re*=et):(Q=0,W=0,re=0),he=je*re-Ve*W,Se=Ve*Q-de*re,Te=de*W-je*Q,(et=Math.hypot(he,Se,Te))?(he*=et=1/et,Se*=et,Te*=et):(he=0,Se=0,Te=0),T[0]=Q,T[1]=he,T[2]=de,T[3]=0,T[4]=W,T[5]=Se,T[6]=je,T[7]=0,T[8]=re,T[9]=Te,T[10]=Ve,T[11]=0,T[12]=-(Q*dt+W*pt+re*at),T[13]=-(he*dt+Se*pt+Te*at),T[14]=-(de*dt+je*pt+Ve*at),T[15]=1,T)},K.targetTo=function(T,D,H,O){var Q=D[0],W=D[1],re=D[2],he=O[0],Se=O[1],Te=O[2],de=Q-H[0],je=W-H[1],Ve=re-H[2],et=de*de+je*je+Ve*Ve;et>0&&(de*=et=1/Math.sqrt(et),je*=et,Ve*=et);var dt=Se*Ve-Te*je,pt=Te*de-he*Ve,at=he*je-Se*de;return(et=dt*dt+pt*pt+at*at)>0&&(dt*=et=1/Math.sqrt(et),pt*=et,at*=et),T[0]=dt,T[1]=pt,T[2]=at,T[3]=0,T[4]=je*at-Ve*pt,T[5]=Ve*dt-de*at,T[6]=de*pt-je*dt,T[7]=0,T[8]=de,T[9]=je,T[10]=Ve,T[11]=0,T[12]=Q,T[13]=W,T[14]=re,T[15]=1,T},K.str=function(T){return"mat4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+", "+T[4]+", "+T[5]+", "+T[6]+", "+T[7]+", "+T[8]+", "+T[9]+", "+T[10]+", "+T[11]+", "+T[12]+", "+T[13]+", "+T[14]+", "+T[15]+")"},K.frob=function(T){return Math.hypot(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15])},K.add=function(T,D,H){return T[0]=D[0]+H[0],T[1]=D[1]+H[1],T[2]=D[2]+H[2],T[3]=D[3]+H[3],T[4]=D[4]+H[4],T[5]=D[5]+H[5],T[6]=D[6]+H[6],T[7]=D[7]+H[7],T[8]=D[8]+H[8],T[9]=D[9]+H[9],T[10]=D[10]+H[10],T[11]=D[11]+H[11],T[12]=D[12]+H[12],T[13]=D[13]+H[13],T[14]=D[14]+H[14],T[15]=D[15]+H[15],T},K.subtract=V,K.multiplyScalar=function(T,D,H){return T[0]=D[0]*H,T[1]=D[1]*H,T[2]=D[2]*H,T[3]=D[3]*H,T[4]=D[4]*H,T[5]=D[5]*H,T[6]=D[6]*H,T[7]=D[7]*H,T[8]=D[8]*H,T[9]=D[9]*H,T[10]=D[10]*H,T[11]=D[11]*H,T[12]=D[12]*H,T[13]=D[13]*H,T[14]=D[14]*H,T[15]=D[15]*H,T},K.multiplyScalarAndAdd=function(T,D,H,O){return T[0]=D[0]+H[0]*O,T[1]=D[1]+H[1]*O,T[2]=D[2]+H[2]*O,T[3]=D[3]+H[3]*O,T[4]=D[4]+H[4]*O,T[5]=D[5]+H[5]*O,T[6]=D[6]+H[6]*O,T[7]=D[7]+H[7]*O,T[8]=D[8]+H[8]*O,T[9]=D[9]+H[9]*O,T[10]=D[10]+H[10]*O,T[11]=D[11]+H[11]*O,T[12]=D[12]+H[12]*O,T[13]=D[13]+H[13]*O,T[14]=D[14]+H[14]*O,T[15]=D[15]+H[15]*O,T},K.exactEquals=function(T,D){return T[0]===D[0]&&T[1]===D[1]&&T[2]===D[2]&&T[3]===D[3]&&T[4]===D[4]&&T[5]===D[5]&&T[6]===D[6]&&T[7]===D[7]&&T[8]===D[8]&&T[9]===D[9]&&T[10]===D[10]&&T[11]===D[11]&&T[12]===D[12]&&T[13]===D[13]&&T[14]===D[14]&&T[15]===D[15]},K.equals=function(T,D){var H=T[0],O=T[1],Q=T[2],W=T[3],re=T[4],he=T[5],Se=T[6],Te=T[7],de=T[8],je=T[9],Ve=T[10],et=T[11],dt=T[12],pt=T[13],at=T[14],Et=T[15],yt=D[0],Nt=D[1],zt=D[2],Gt=D[3],qt=D[4],Jt=D[5],vr=D[6],rr=D[7],Br=D[8],Ur=D[9],br=D[10],Cn=D[11],dn=D[12],rn=D[13],Vr=D[14],Zn=D[15];return Math.abs(H-yt)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(yt))&&Math.abs(O-Nt)<=a.EPSILON*Math.max(1,Math.abs(O),Math.abs(Nt))&&Math.abs(Q-zt)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(zt))&&Math.abs(W-Gt)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(Gt))&&Math.abs(re-qt)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(qt))&&Math.abs(he-Jt)<=a.EPSILON*Math.max(1,Math.abs(he),Math.abs(Jt))&&Math.abs(Se-vr)<=a.EPSILON*Math.max(1,Math.abs(Se),Math.abs(vr))&&Math.abs(Te-rr)<=a.EPSILON*Math.max(1,Math.abs(Te),Math.abs(rr))&&Math.abs(de-Br)<=a.EPSILON*Math.max(1,Math.abs(de),Math.abs(Br))&&Math.abs(je-Ur)<=a.EPSILON*Math.max(1,Math.abs(je),Math.abs(Ur))&&Math.abs(Ve-br)<=a.EPSILON*Math.max(1,Math.abs(Ve),Math.abs(br))&&Math.abs(et-Cn)<=a.EPSILON*Math.max(1,Math.abs(et),Math.abs(Cn))&&Math.abs(dt-dn)<=a.EPSILON*Math.max(1,Math.abs(dt),Math.abs(dn))&&Math.abs(pt-rn)<=a.EPSILON*Math.max(1,Math.abs(pt),Math.abs(rn))&&Math.abs(at-Vr)<=a.EPSILON*Math.max(1,Math.abs(at),Math.abs(Vr))&&Math.abs(Et-Zn)<=a.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Zn))},K.sub=K.mul=K.ortho=K.perspective=void 0;var a=function(T,D){if(T&&T.__esModule)return T;if(T===null||f(T)!=="object"&&typeof T!="function")return{default:T};var H=h(void 0);if(H&&H.has(T))return H.get(T);var O={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var W in T)if(W!=="default"&&Object.prototype.hasOwnProperty.call(T,W)){var re=Q?Object.getOwnPropertyDescriptor(T,W):null;re&&(re.get||re.set)?Object.defineProperty(O,W,re):O[W]=T[W]}return O.default=T,H&&H.set(T,O),O}(S());function h(T){if(typeof WeakMap!="function")return null;var D=new WeakMap,H=new WeakMap;return(h=function(O){return O?H:D})(T)}function p(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function _(T,D,H){var O=D[0],Q=D[1],W=D[2],re=D[3],he=D[4],Se=D[5],Te=D[6],de=D[7],je=D[8],Ve=D[9],et=D[10],dt=D[11],pt=D[12],at=D[13],Et=D[14],yt=D[15],Nt=H[0],zt=H[1],Gt=H[2],qt=H[3];return T[0]=Nt*O+zt*he+Gt*je+qt*pt,T[1]=Nt*Q+zt*Se+Gt*Ve+qt*at,T[2]=Nt*W+zt*Te+Gt*et+qt*Et,T[3]=Nt*re+zt*de+Gt*dt+qt*yt,T[4]=(Nt=H[4])*O+(zt=H[5])*he+(Gt=H[6])*je+(qt=H[7])*pt,T[5]=Nt*Q+zt*Se+Gt*Ve+qt*at,T[6]=Nt*W+zt*Te+Gt*et+qt*Et,T[7]=Nt*re+zt*de+Gt*dt+qt*yt,T[8]=(Nt=H[8])*O+(zt=H[9])*he+(Gt=H[10])*je+(qt=H[11])*pt,T[9]=Nt*Q+zt*Se+Gt*Ve+qt*at,T[10]=Nt*W+zt*Te+Gt*et+qt*Et,T[11]=Nt*re+zt*de+Gt*dt+qt*yt,T[12]=(Nt=H[12])*O+(zt=H[13])*he+(Gt=H[14])*je+(qt=H[15])*pt,T[13]=Nt*Q+zt*Se+Gt*Ve+qt*at,T[14]=Nt*W+zt*Te+Gt*et+qt*Et,T[15]=Nt*re+zt*de+Gt*dt+qt*yt,T}function y(T,D,H){var O=D[0],Q=D[1],W=D[2],re=D[3],he=O+O,Se=Q+Q,Te=W+W,de=O*he,je=O*Se,Ve=O*Te,et=Q*Se,dt=Q*Te,pt=W*Te,at=re*he,Et=re*Se,yt=re*Te;return T[0]=1-(et+pt),T[1]=je+yt,T[2]=Ve-Et,T[3]=0,T[4]=je-yt,T[5]=1-(de+pt),T[6]=dt+at,T[7]=0,T[8]=Ve+Et,T[9]=dt-at,T[10]=1-(de+et),T[11]=0,T[12]=H[0],T[13]=H[1],T[14]=H[2],T[15]=1,T}function b(T,D){var H=D[4],O=D[5],Q=D[6],W=D[8],re=D[9],he=D[10];return T[0]=Math.hypot(D[0],D[1],D[2]),T[1]=Math.hypot(H,O,Q),T[2]=Math.hypot(W,re,he),T}function F(T,D,H,O,Q){var W,re=1/Math.tan(D/2);return T[0]=re/H,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=re,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,Q!=null&&Q!==1/0?(T[10]=(Q+O)*(W=1/(O-Q)),T[14]=2*Q*O*W):(T[10]=-1,T[14]=-2*O),T}function z(T,D,H,O,Q,W,re){var he=1/(D-H),Se=1/(O-Q),Te=1/(W-re);return T[0]=-2*he,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*Se,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=2*Te,T[11]=0,T[12]=(D+H)*he,T[13]=(Q+O)*Se,T[14]=(re+W)*Te,T[15]=1,T}function V(T,D,H){return T[0]=D[0]-H[0],T[1]=D[1]-H[1],T[2]=D[2]-H[2],T[3]=D[3]-H[3],T[4]=D[4]-H[4],T[5]=D[5]-H[5],T[6]=D[6]-H[6],T[7]=D[7]-H[7],T[8]=D[8]-H[8],T[9]=D[9]-H[9],T[10]=D[10]-H[10],T[11]=D[11]-H[11],T[12]=D[12]-H[12],T[13]=D[13]-H[13],T[14]=D[14]-H[14],T[15]=D[15]-H[15],T}return K.perspective=F,K.ortho=z,K.mul=_,K.sub=V,K}var me,Z={},Y={};function Le(){if(me)return Y;function f(Q){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},f(Q)}me=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.create=p,Y.clone=function(Q){var W=new a.ARRAY_TYPE(3);return W[0]=Q[0],W[1]=Q[1],W[2]=Q[2],W},Y.length=_,Y.fromValues=function(Q,W,re){var he=new a.ARRAY_TYPE(3);return he[0]=Q,he[1]=W,he[2]=re,he},Y.copy=function(Q,W){return Q[0]=W[0],Q[1]=W[1],Q[2]=W[2],Q},Y.set=function(Q,W,re,he){return Q[0]=W,Q[1]=re,Q[2]=he,Q},Y.add=function(Q,W,re){return Q[0]=W[0]+re[0],Q[1]=W[1]+re[1],Q[2]=W[2]+re[2],Q},Y.subtract=y,Y.multiply=b,Y.divide=F,Y.ceil=function(Q,W){return Q[0]=Math.ceil(W[0]),Q[1]=Math.ceil(W[1]),Q[2]=Math.ceil(W[2]),Q},Y.floor=function(Q,W){return Q[0]=Math.floor(W[0]),Q[1]=Math.floor(W[1]),Q[2]=Math.floor(W[2]),Q},Y.min=function(Q,W,re){return Q[0]=Math.min(W[0],re[0]),Q[1]=Math.min(W[1],re[1]),Q[2]=Math.min(W[2],re[2]),Q},Y.max=function(Q,W,re){return Q[0]=Math.max(W[0],re[0]),Q[1]=Math.max(W[1],re[1]),Q[2]=Math.max(W[2],re[2]),Q},Y.round=function(Q,W){return Q[0]=Math.round(W[0]),Q[1]=Math.round(W[1]),Q[2]=Math.round(W[2]),Q},Y.scale=function(Q,W,re){return Q[0]=W[0]*re,Q[1]=W[1]*re,Q[2]=W[2]*re,Q},Y.scaleAndAdd=function(Q,W,re,he){return Q[0]=W[0]+re[0]*he,Q[1]=W[1]+re[1]*he,Q[2]=W[2]+re[2]*he,Q},Y.distance=z,Y.squaredDistance=V,Y.squaredLength=T,Y.negate=function(Q,W){return Q[0]=-W[0],Q[1]=-W[1],Q[2]=-W[2],Q},Y.inverse=function(Q,W){return Q[0]=1/W[0],Q[1]=1/W[1],Q[2]=1/W[2],Q},Y.normalize=function(Q,W){var re=W[0],he=W[1],Se=W[2],Te=re*re+he*he+Se*Se;return Te>0&&(Te=1/Math.sqrt(Te)),Q[0]=W[0]*Te,Q[1]=W[1]*Te,Q[2]=W[2]*Te,Q},Y.dot=D,Y.cross=function(Q,W,re){var he=W[0],Se=W[1],Te=W[2],de=re[0],je=re[1],Ve=re[2];return Q[0]=Se*Ve-Te*je,Q[1]=Te*de-he*Ve,Q[2]=he*je-Se*de,Q},Y.lerp=function(Q,W,re,he){var Se=W[0],Te=W[1],de=W[2];return Q[0]=Se+he*(re[0]-Se),Q[1]=Te+he*(re[1]-Te),Q[2]=de+he*(re[2]-de),Q},Y.hermite=function(Q,W,re,he,Se,Te){var de=Te*Te,je=de*(2*Te-3)+1,Ve=de*(Te-2)+Te,et=de*(Te-1),dt=de*(3-2*Te);return Q[0]=W[0]*je+re[0]*Ve+he[0]*et+Se[0]*dt,Q[1]=W[1]*je+re[1]*Ve+he[1]*et+Se[1]*dt,Q[2]=W[2]*je+re[2]*Ve+he[2]*et+Se[2]*dt,Q},Y.bezier=function(Q,W,re,he,Se,Te){var de=1-Te,je=de*de,Ve=Te*Te,et=je*de,dt=3*Te*je,pt=3*Ve*de,at=Ve*Te;return Q[0]=W[0]*et+re[0]*dt+he[0]*pt+Se[0]*at,Q[1]=W[1]*et+re[1]*dt+he[1]*pt+Se[1]*at,Q[2]=W[2]*et+re[2]*dt+he[2]*pt+Se[2]*at,Q},Y.random=function(Q,W){W=W||1;var re=2*a.RANDOM()*Math.PI,he=2*a.RANDOM()-1,Se=Math.sqrt(1-he*he)*W;return Q[0]=Math.cos(re)*Se,Q[1]=Math.sin(re)*Se,Q[2]=he*W,Q},Y.transformMat4=function(Q,W,re){var he=W[0],Se=W[1],Te=W[2],de=re[3]*he+re[7]*Se+re[11]*Te+re[15];return Q[0]=(re[0]*he+re[4]*Se+re[8]*Te+re[12])/(de=de||1),Q[1]=(re[1]*he+re[5]*Se+re[9]*Te+re[13])/de,Q[2]=(re[2]*he+re[6]*Se+re[10]*Te+re[14])/de,Q},Y.transformMat3=function(Q,W,re){var he=W[0],Se=W[1],Te=W[2];return Q[0]=he*re[0]+Se*re[3]+Te*re[6],Q[1]=he*re[1]+Se*re[4]+Te*re[7],Q[2]=he*re[2]+Se*re[5]+Te*re[8],Q},Y.transformQuat=function(Q,W,re){var he=re[0],Se=re[1],Te=re[2],de=W[0],je=W[1],Ve=W[2],et=Se*Ve-Te*je,dt=Te*de-he*Ve,pt=he*je-Se*de,at=Se*pt-Te*dt,Et=Te*et-he*pt,yt=he*dt-Se*et,Nt=2*re[3];return dt*=Nt,pt*=Nt,Et*=2,yt*=2,Q[0]=de+(et*=Nt)+(at*=2),Q[1]=je+dt+Et,Q[2]=Ve+pt+yt,Q},Y.rotateX=function(Q,W,re,he){var Se=[],Te=[];return Se[0]=W[0]-re[0],Se[1]=W[1]-re[1],Se[2]=W[2]-re[2],Te[0]=Se[0],Te[1]=Se[1]*Math.cos(he)-Se[2]*Math.sin(he),Te[2]=Se[1]*Math.sin(he)+Se[2]*Math.cos(he),Q[0]=Te[0]+re[0],Q[1]=Te[1]+re[1],Q[2]=Te[2]+re[2],Q},Y.rotateY=function(Q,W,re,he){var Se=[],Te=[];return Se[0]=W[0]-re[0],Se[1]=W[1]-re[1],Se[2]=W[2]-re[2],Te[0]=Se[2]*Math.sin(he)+Se[0]*Math.cos(he),Te[1]=Se[1],Te[2]=Se[2]*Math.cos(he)-Se[0]*Math.sin(he),Q[0]=Te[0]+re[0],Q[1]=Te[1]+re[1],Q[2]=Te[2]+re[2],Q},Y.rotateZ=function(Q,W,re,he){var Se=[],Te=[];return Se[0]=W[0]-re[0],Se[1]=W[1]-re[1],Se[2]=W[2]-re[2],Te[0]=Se[0]*Math.cos(he)-Se[1]*Math.sin(he),Te[1]=Se[0]*Math.sin(he)+Se[1]*Math.cos(he),Te[2]=Se[2],Q[0]=Te[0]+re[0],Q[1]=Te[1]+re[1],Q[2]=Te[2]+re[2],Q},Y.angle=function(Q,W){var re=Q[0],he=Q[1],Se=Q[2],Te=W[0],de=W[1],je=W[2],Ve=Math.sqrt(re*re+he*he+Se*Se)*Math.sqrt(Te*Te+de*de+je*je),et=Ve&&D(Q,W)/Ve;return Math.acos(Math.min(Math.max(et,-1),1))},Y.zero=function(Q){return Q[0]=0,Q[1]=0,Q[2]=0,Q},Y.str=function(Q){return"vec3("+Q[0]+", "+Q[1]+", "+Q[2]+")"},Y.exactEquals=function(Q,W){return Q[0]===W[0]&&Q[1]===W[1]&&Q[2]===W[2]},Y.equals=function(Q,W){var re=Q[0],he=Q[1],Se=Q[2],Te=W[0],de=W[1],je=W[2];return Math.abs(re-Te)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(Te))&&Math.abs(he-de)<=a.EPSILON*Math.max(1,Math.abs(he),Math.abs(de))&&Math.abs(Se-je)<=a.EPSILON*Math.max(1,Math.abs(Se),Math.abs(je))},Y.forEach=Y.sqrLen=Y.len=Y.sqrDist=Y.dist=Y.div=Y.mul=Y.sub=void 0;var a=function(Q,W){if(Q&&Q.__esModule)return Q;if(Q===null||f(Q)!=="object"&&typeof Q!="function")return{default:Q};var re=h(void 0);if(re&&re.has(Q))return re.get(Q);var he={},Se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Te in Q)if(Te!=="default"&&Object.prototype.hasOwnProperty.call(Q,Te)){var de=Se?Object.getOwnPropertyDescriptor(Q,Te):null;de&&(de.get||de.set)?Object.defineProperty(he,Te,de):he[Te]=Q[Te]}return he.default=Q,re&&re.set(Q,he),he}(S());function h(Q){if(typeof WeakMap!="function")return null;var W=new WeakMap,re=new WeakMap;return(h=function(he){return he?re:W})(Q)}function p(){var Q=new a.ARRAY_TYPE(3);return a.ARRAY_TYPE!=Float32Array&&(Q[0]=0,Q[1]=0,Q[2]=0),Q}function _(Q){return Math.hypot(Q[0],Q[1],Q[2])}function y(Q,W,re){return Q[0]=W[0]-re[0],Q[1]=W[1]-re[1],Q[2]=W[2]-re[2],Q}function b(Q,W,re){return Q[0]=W[0]*re[0],Q[1]=W[1]*re[1],Q[2]=W[2]*re[2],Q}function F(Q,W,re){return Q[0]=W[0]/re[0],Q[1]=W[1]/re[1],Q[2]=W[2]/re[2],Q}function z(Q,W){return Math.hypot(W[0]-Q[0],W[1]-Q[1],W[2]-Q[2])}function V(Q,W){var re=W[0]-Q[0],he=W[1]-Q[1],Se=W[2]-Q[2];return re*re+he*he+Se*Se}function T(Q){var W=Q[0],re=Q[1],he=Q[2];return W*W+re*re+he*he}function D(Q,W){return Q[0]*W[0]+Q[1]*W[1]+Q[2]*W[2]}Y.sub=y,Y.mul=b,Y.div=F,Y.dist=z,Y.sqrDist=V,Y.len=_,Y.sqrLen=T;var H,O=(H=p(),function(Q,W,re,he,Se,Te){var de,je;for(W||(W=3),re||(re=0),je=he?Math.min(he*W+re,Q.length):Q.length,de=re;de<je;de+=W)H[0]=Q[de],H[1]=Q[de+1],H[2]=Q[de+2],Se(H,H,Te),Q[de]=H[0],Q[de+1]=H[1],Q[de+2]=H[2];return Q});return Y.forEach=O,Y}var _e,Qe,De={};function Be(){if(_e)return De;function f(O){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},f(O)}_e=1,Object.defineProperty(De,"__esModule",{value:!0}),De.create=p,De.clone=function(O){var Q=new a.ARRAY_TYPE(4);return Q[0]=O[0],Q[1]=O[1],Q[2]=O[2],Q[3]=O[3],Q},De.fromValues=function(O,Q,W,re){var he=new a.ARRAY_TYPE(4);return he[0]=O,he[1]=Q,he[2]=W,he[3]=re,he},De.copy=function(O,Q){return O[0]=Q[0],O[1]=Q[1],O[2]=Q[2],O[3]=Q[3],O},De.set=function(O,Q,W,re,he){return O[0]=Q,O[1]=W,O[2]=re,O[3]=he,O},De.add=function(O,Q,W){return O[0]=Q[0]+W[0],O[1]=Q[1]+W[1],O[2]=Q[2]+W[2],O[3]=Q[3]+W[3],O},De.subtract=_,De.multiply=y,De.divide=b,De.ceil=function(O,Q){return O[0]=Math.ceil(Q[0]),O[1]=Math.ceil(Q[1]),O[2]=Math.ceil(Q[2]),O[3]=Math.ceil(Q[3]),O},De.floor=function(O,Q){return O[0]=Math.floor(Q[0]),O[1]=Math.floor(Q[1]),O[2]=Math.floor(Q[2]),O[3]=Math.floor(Q[3]),O},De.min=function(O,Q,W){return O[0]=Math.min(Q[0],W[0]),O[1]=Math.min(Q[1],W[1]),O[2]=Math.min(Q[2],W[2]),O[3]=Math.min(Q[3],W[3]),O},De.max=function(O,Q,W){return O[0]=Math.max(Q[0],W[0]),O[1]=Math.max(Q[1],W[1]),O[2]=Math.max(Q[2],W[2]),O[3]=Math.max(Q[3],W[3]),O},De.round=function(O,Q){return O[0]=Math.round(Q[0]),O[1]=Math.round(Q[1]),O[2]=Math.round(Q[2]),O[3]=Math.round(Q[3]),O},De.scale=function(O,Q,W){return O[0]=Q[0]*W,O[1]=Q[1]*W,O[2]=Q[2]*W,O[3]=Q[3]*W,O},De.scaleAndAdd=function(O,Q,W,re){return O[0]=Q[0]+W[0]*re,O[1]=Q[1]+W[1]*re,O[2]=Q[2]+W[2]*re,O[3]=Q[3]+W[3]*re,O},De.distance=F,De.squaredDistance=z,De.length=V,De.squaredLength=T,De.negate=function(O,Q){return O[0]=-Q[0],O[1]=-Q[1],O[2]=-Q[2],O[3]=-Q[3],O},De.inverse=function(O,Q){return O[0]=1/Q[0],O[1]=1/Q[1],O[2]=1/Q[2],O[3]=1/Q[3],O},De.normalize=function(O,Q){var W=Q[0],re=Q[1],he=Q[2],Se=Q[3],Te=W*W+re*re+he*he+Se*Se;return Te>0&&(Te=1/Math.sqrt(Te)),O[0]=W*Te,O[1]=re*Te,O[2]=he*Te,O[3]=Se*Te,O},De.dot=function(O,Q){return O[0]*Q[0]+O[1]*Q[1]+O[2]*Q[2]+O[3]*Q[3]},De.cross=function(O,Q,W,re){var he=W[0]*re[1]-W[1]*re[0],Se=W[0]*re[2]-W[2]*re[0],Te=W[0]*re[3]-W[3]*re[0],de=W[1]*re[2]-W[2]*re[1],je=W[1]*re[3]-W[3]*re[1],Ve=W[2]*re[3]-W[3]*re[2],et=Q[0],dt=Q[1],pt=Q[2],at=Q[3];return O[0]=dt*Ve-pt*je+at*de,O[1]=-et*Ve+pt*Te-at*Se,O[2]=et*je-dt*Te+at*he,O[3]=-et*de+dt*Se-pt*he,O},De.lerp=function(O,Q,W,re){var he=Q[0],Se=Q[1],Te=Q[2],de=Q[3];return O[0]=he+re*(W[0]-he),O[1]=Se+re*(W[1]-Se),O[2]=Te+re*(W[2]-Te),O[3]=de+re*(W[3]-de),O},De.random=function(O,Q){var W,re,he,Se,Te,de;Q=Q||1;do Te=(W=2*a.RANDOM()-1)*W+(re=2*a.RANDOM()-1)*re;while(Te>=1);do de=(he=2*a.RANDOM()-1)*he+(Se=2*a.RANDOM()-1)*Se;while(de>=1);var je=Math.sqrt((1-Te)/de);return O[0]=Q*W,O[1]=Q*re,O[2]=Q*he*je,O[3]=Q*Se*je,O},De.transformMat4=function(O,Q,W){var re=Q[0],he=Q[1],Se=Q[2],Te=Q[3];return O[0]=W[0]*re+W[4]*he+W[8]*Se+W[12]*Te,O[1]=W[1]*re+W[5]*he+W[9]*Se+W[13]*Te,O[2]=W[2]*re+W[6]*he+W[10]*Se+W[14]*Te,O[3]=W[3]*re+W[7]*he+W[11]*Se+W[15]*Te,O},De.transformQuat=function(O,Q,W){var re=Q[0],he=Q[1],Se=Q[2],Te=W[0],de=W[1],je=W[2],Ve=W[3],et=Ve*re+de*Se-je*he,dt=Ve*he+je*re-Te*Se,pt=Ve*Se+Te*he-de*re,at=-Te*re-de*he-je*Se;return O[0]=et*Ve+at*-Te+dt*-je-pt*-de,O[1]=dt*Ve+at*-de+pt*-Te-et*-je,O[2]=pt*Ve+at*-je+et*-de-dt*-Te,O[3]=Q[3],O},De.zero=function(O){return O[0]=0,O[1]=0,O[2]=0,O[3]=0,O},De.str=function(O){return"vec4("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+")"},De.exactEquals=function(O,Q){return O[0]===Q[0]&&O[1]===Q[1]&&O[2]===Q[2]&&O[3]===Q[3]},De.equals=function(O,Q){var W=O[0],re=O[1],he=O[2],Se=O[3],Te=Q[0],de=Q[1],je=Q[2],Ve=Q[3];return Math.abs(W-Te)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(Te))&&Math.abs(re-de)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(de))&&Math.abs(he-je)<=a.EPSILON*Math.max(1,Math.abs(he),Math.abs(je))&&Math.abs(Se-Ve)<=a.EPSILON*Math.max(1,Math.abs(Se),Math.abs(Ve))},De.forEach=De.sqrLen=De.len=De.sqrDist=De.dist=De.div=De.mul=De.sub=void 0;var a=function(O,Q){if(O&&O.__esModule)return O;if(O===null||f(O)!=="object"&&typeof O!="function")return{default:O};var W=h(void 0);if(W&&W.has(O))return W.get(O);var re={},he=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Se in O)if(Se!=="default"&&Object.prototype.hasOwnProperty.call(O,Se)){var Te=he?Object.getOwnPropertyDescriptor(O,Se):null;Te&&(Te.get||Te.set)?Object.defineProperty(re,Se,Te):re[Se]=O[Se]}return re.default=O,W&&W.set(O,re),re}(S());function h(O){if(typeof WeakMap!="function")return null;var Q=new WeakMap,W=new WeakMap;return(h=function(re){return re?W:Q})(O)}function p(){var O=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0,O[3]=0),O}function _(O,Q,W){return O[0]=Q[0]-W[0],O[1]=Q[1]-W[1],O[2]=Q[2]-W[2],O[3]=Q[3]-W[3],O}function y(O,Q,W){return O[0]=Q[0]*W[0],O[1]=Q[1]*W[1],O[2]=Q[2]*W[2],O[3]=Q[3]*W[3],O}function b(O,Q,W){return O[0]=Q[0]/W[0],O[1]=Q[1]/W[1],O[2]=Q[2]/W[2],O[3]=Q[3]/W[3],O}function F(O,Q){return Math.hypot(Q[0]-O[0],Q[1]-O[1],Q[2]-O[2],Q[3]-O[3])}function z(O,Q){var W=Q[0]-O[0],re=Q[1]-O[1],he=Q[2]-O[2],Se=Q[3]-O[3];return W*W+re*re+he*he+Se*Se}function V(O){return Math.hypot(O[0],O[1],O[2],O[3])}function T(O){var Q=O[0],W=O[1],re=O[2],he=O[3];return Q*Q+W*W+re*re+he*he}De.sub=_,De.mul=y,De.div=b,De.dist=F,De.sqrDist=z,De.len=V,De.sqrLen=T;var D,H=(D=p(),function(O,Q,W,re,he,Se){var Te,de;for(Q||(Q=4),W||(W=0),de=re?Math.min(re*Q+W,O.length):O.length,Te=W;Te<de;Te+=Q)D[0]=O[Te],D[1]=O[Te+1],D[2]=O[Te+2],D[3]=O[Te+3],he(D,D,Se),O[Te]=D[0],O[Te+1]=D[1],O[Te+2]=D[2],O[Te+3]=D[3];return O});return De.forEach=H,De}function xe(){if(Qe)return Z;function f(yt){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt},f(yt)}Qe=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.create=F,Z.identity=function(yt){return yt[0]=0,yt[1]=0,yt[2]=0,yt[3]=1,yt},Z.setAxisAngle=z,Z.getAxisAngle=function(yt,Nt){var zt=2*Math.acos(Nt[3]),Gt=Math.sin(zt/2);return Gt>a.EPSILON?(yt[0]=Nt[0]/Gt,yt[1]=Nt[1]/Gt,yt[2]=Nt[2]/Gt):(yt[0]=1,yt[1]=0,yt[2]=0),zt},Z.getAngle=function(yt,Nt){var zt=W(yt,Nt);return Math.acos(2*zt*zt-1)},Z.multiply=V,Z.rotateX=function(yt,Nt,zt){zt*=.5;var Gt=Nt[0],qt=Nt[1],Jt=Nt[2],vr=Nt[3],rr=Math.sin(zt),Br=Math.cos(zt);return yt[0]=Gt*Br+vr*rr,yt[1]=qt*Br+Jt*rr,yt[2]=Jt*Br-qt*rr,yt[3]=vr*Br-Gt*rr,yt},Z.rotateY=function(yt,Nt,zt){zt*=.5;var Gt=Nt[0],qt=Nt[1],Jt=Nt[2],vr=Nt[3],rr=Math.sin(zt),Br=Math.cos(zt);return yt[0]=Gt*Br-Jt*rr,yt[1]=qt*Br+vr*rr,yt[2]=Jt*Br+Gt*rr,yt[3]=vr*Br-qt*rr,yt},Z.rotateZ=function(yt,Nt,zt){zt*=.5;var Gt=Nt[0],qt=Nt[1],Jt=Nt[2],vr=Nt[3],rr=Math.sin(zt),Br=Math.cos(zt);return yt[0]=Gt*Br+qt*rr,yt[1]=qt*Br-Gt*rr,yt[2]=Jt*Br+vr*rr,yt[3]=vr*Br-Jt*rr,yt},Z.calculateW=function(yt,Nt){var zt=Nt[0],Gt=Nt[1],qt=Nt[2];return yt[0]=zt,yt[1]=Gt,yt[2]=qt,yt[3]=Math.sqrt(Math.abs(1-zt*zt-Gt*Gt-qt*qt)),yt},Z.exp=T,Z.ln=D,Z.pow=function(yt,Nt,zt){return D(yt,Nt),Q(yt,yt,zt),T(yt,yt),yt},Z.slerp=H,Z.random=function(yt){var Nt=a.RANDOM(),zt=a.RANDOM(),Gt=a.RANDOM(),qt=Math.sqrt(1-Nt),Jt=Math.sqrt(Nt);return yt[0]=qt*Math.sin(2*Math.PI*zt),yt[1]=qt*Math.cos(2*Math.PI*zt),yt[2]=Jt*Math.sin(2*Math.PI*Gt),yt[3]=Jt*Math.cos(2*Math.PI*Gt),yt},Z.invert=function(yt,Nt){var zt=Nt[0],Gt=Nt[1],qt=Nt[2],Jt=Nt[3],vr=zt*zt+Gt*Gt+qt*qt+Jt*Jt,rr=vr?1/vr:0;return yt[0]=-zt*rr,yt[1]=-Gt*rr,yt[2]=-qt*rr,yt[3]=Jt*rr,yt},Z.conjugate=function(yt,Nt){return yt[0]=-Nt[0],yt[1]=-Nt[1],yt[2]=-Nt[2],yt[3]=Nt[3],yt},Z.fromMat3=O,Z.fromEuler=function(yt,Nt,zt,Gt){var qt=.5*Math.PI/180;Nt*=qt,zt*=qt,Gt*=qt;var Jt=Math.sin(Nt),vr=Math.cos(Nt),rr=Math.sin(zt),Br=Math.cos(zt),Ur=Math.sin(Gt),br=Math.cos(Gt);return yt[0]=Jt*Br*br-vr*rr*Ur,yt[1]=vr*rr*br+Jt*Br*Ur,yt[2]=vr*Br*Ur-Jt*rr*br,yt[3]=vr*Br*br+Jt*rr*Ur,yt},Z.str=function(yt){return"quat("+yt[0]+", "+yt[1]+", "+yt[2]+", "+yt[3]+")"},Z.setAxes=Z.sqlerp=Z.rotationTo=Z.equals=Z.exactEquals=Z.normalize=Z.sqrLen=Z.squaredLength=Z.len=Z.length=Z.lerp=Z.dot=Z.scale=Z.mul=Z.add=Z.set=Z.copy=Z.fromValues=Z.clone=void 0;var a=b(S()),h=b(ue()),p=b(Le()),_=b(Be());function y(yt){if(typeof WeakMap!="function")return null;var Nt=new WeakMap,zt=new WeakMap;return(y=function(Gt){return Gt?zt:Nt})(yt)}function b(yt,Nt){if(yt&&yt.__esModule)return yt;if(yt===null||f(yt)!=="object"&&typeof yt!="function")return{default:yt};var zt=y(Nt);if(zt&&zt.has(yt))return zt.get(yt);var Gt={},qt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Jt in yt)if(Jt!=="default"&&Object.prototype.hasOwnProperty.call(yt,Jt)){var vr=qt?Object.getOwnPropertyDescriptor(yt,Jt):null;vr&&(vr.get||vr.set)?Object.defineProperty(Gt,Jt,vr):Gt[Jt]=yt[Jt]}return Gt.default=yt,zt&&zt.set(yt,Gt),Gt}function F(){var yt=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(yt[0]=0,yt[1]=0,yt[2]=0),yt[3]=1,yt}function z(yt,Nt,zt){zt*=.5;var Gt=Math.sin(zt);return yt[0]=Gt*Nt[0],yt[1]=Gt*Nt[1],yt[2]=Gt*Nt[2],yt[3]=Math.cos(zt),yt}function V(yt,Nt,zt){var Gt=Nt[0],qt=Nt[1],Jt=Nt[2],vr=Nt[3],rr=zt[0],Br=zt[1],Ur=zt[2],br=zt[3];return yt[0]=Gt*br+vr*rr+qt*Ur-Jt*Br,yt[1]=qt*br+vr*Br+Jt*rr-Gt*Ur,yt[2]=Jt*br+vr*Ur+Gt*Br-qt*rr,yt[3]=vr*br-Gt*rr-qt*Br-Jt*Ur,yt}function T(yt,Nt){var zt=Nt[0],Gt=Nt[1],qt=Nt[2],Jt=Nt[3],vr=Math.sqrt(zt*zt+Gt*Gt+qt*qt),rr=Math.exp(Jt),Br=vr>0?rr*Math.sin(vr)/vr:0;return yt[0]=zt*Br,yt[1]=Gt*Br,yt[2]=qt*Br,yt[3]=rr*Math.cos(vr),yt}function D(yt,Nt){var zt=Nt[0],Gt=Nt[1],qt=Nt[2],Jt=Nt[3],vr=Math.sqrt(zt*zt+Gt*Gt+qt*qt),rr=vr>0?Math.atan2(vr,Jt)/vr:0;return yt[0]=zt*rr,yt[1]=Gt*rr,yt[2]=qt*rr,yt[3]=.5*Math.log(zt*zt+Gt*Gt+qt*qt+Jt*Jt),yt}function H(yt,Nt,zt,Gt){var qt,Jt,vr,rr,Br,Ur=Nt[0],br=Nt[1],Cn=Nt[2],dn=Nt[3],rn=zt[0],Vr=zt[1],Zn=zt[2],wn=zt[3];return(Jt=Ur*rn+br*Vr+Cn*Zn+dn*wn)<0&&(Jt=-Jt,rn=-rn,Vr=-Vr,Zn=-Zn,wn=-wn),1-Jt>a.EPSILON?(qt=Math.acos(Jt),vr=Math.sin(qt),rr=Math.sin((1-Gt)*qt)/vr,Br=Math.sin(Gt*qt)/vr):(rr=1-Gt,Br=Gt),yt[0]=rr*Ur+Br*rn,yt[1]=rr*br+Br*Vr,yt[2]=rr*Cn+Br*Zn,yt[3]=rr*dn+Br*wn,yt}function O(yt,Nt){var zt,Gt=Nt[0]+Nt[4]+Nt[8];if(Gt>0)zt=Math.sqrt(Gt+1),yt[3]=.5*zt,yt[0]=(Nt[5]-Nt[7])*(zt=.5/zt),yt[1]=(Nt[6]-Nt[2])*zt,yt[2]=(Nt[1]-Nt[3])*zt;else{var qt=0;Nt[4]>Nt[0]&&(qt=1),Nt[8]>Nt[3*qt+qt]&&(qt=2);var Jt=(qt+1)%3,vr=(qt+2)%3;zt=Math.sqrt(Nt[3*qt+qt]-Nt[3*Jt+Jt]-Nt[3*vr+vr]+1),yt[qt]=.5*zt,yt[3]=(Nt[3*Jt+vr]-Nt[3*vr+Jt])*(zt=.5/zt),yt[Jt]=(Nt[3*Jt+qt]+Nt[3*qt+Jt])*zt,yt[vr]=(Nt[3*vr+qt]+Nt[3*qt+vr])*zt}return yt}Z.clone=_.clone,Z.fromValues=_.fromValues,Z.copy=_.copy,Z.set=_.set,Z.add=_.add,Z.mul=V;var Q=_.scale;Z.scale=Q;var W=_.dot;Z.dot=W,Z.lerp=_.lerp;var re=_.length;Z.length=re,Z.len=re;var he=_.squaredLength;Z.squaredLength=he,Z.sqrLen=he;var Se=_.normalize;Z.normalize=Se,Z.exactEquals=_.exactEquals,Z.equals=_.equals;var Te,de,je,Ve=(Te=p.create(),de=p.fromValues(1,0,0),je=p.fromValues(0,1,0),function(yt,Nt,zt){var Gt=p.dot(Nt,zt);return Gt<-.999999?(p.cross(Te,de,Nt),p.len(Te)<1e-6&&p.cross(Te,je,Nt),p.normalize(Te,Te),z(yt,Te,Math.PI),yt):Gt>.999999?(yt[0]=0,yt[1]=0,yt[2]=0,yt[3]=1,yt):(p.cross(Te,Nt,zt),yt[0]=Te[0],yt[1]=Te[1],yt[2]=Te[2],yt[3]=1+Gt,Se(yt,yt))});Z.rotationTo=Ve;var et,dt,pt=(et=F(),dt=F(),function(yt,Nt,zt,Gt,qt,Jt){return H(et,Nt,qt,Jt),H(dt,zt,Gt,Jt),H(yt,et,dt,2*Jt*(1-Jt)),yt});Z.sqlerp=pt;var at,Et=(at=h.create(),function(yt,Nt,zt,Gt){return at[0]=zt[0],at[3]=zt[1],at[6]=zt[2],at[1]=Gt[0],at[4]=Gt[1],at[7]=Gt[2],at[2]=-Nt[0],at[5]=-Nt[1],at[8]=-Nt[2],Se(yt,O(yt,at))});return Z.setAxes=Et,Z}var ze,Fe={};function it(){if(ze)return Fe;function f(H){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},f(H)}ze=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.create=function(){var H=new a.ARRAY_TYPE(8);return a.ARRAY_TYPE!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0,H[4]=0,H[5]=0,H[6]=0,H[7]=0),H[3]=1,H},Fe.clone=function(H){var O=new a.ARRAY_TYPE(8);return O[0]=H[0],O[1]=H[1],O[2]=H[2],O[3]=H[3],O[4]=H[4],O[5]=H[5],O[6]=H[6],O[7]=H[7],O},Fe.fromValues=function(H,O,Q,W,re,he,Se,Te){var de=new a.ARRAY_TYPE(8);return de[0]=H,de[1]=O,de[2]=Q,de[3]=W,de[4]=re,de[5]=he,de[6]=Se,de[7]=Te,de},Fe.fromRotationTranslationValues=function(H,O,Q,W,re,he,Se){var Te=new a.ARRAY_TYPE(8);Te[0]=H,Te[1]=O,Te[2]=Q,Te[3]=W;var de=.5*re,je=.5*he,Ve=.5*Se;return Te[4]=de*W+je*Q-Ve*O,Te[5]=je*W+Ve*H-de*Q,Te[6]=Ve*W+de*O-je*H,Te[7]=-de*H-je*O-Ve*Q,Te},Fe.fromRotationTranslation=b,Fe.fromTranslation=function(H,O){return H[0]=0,H[1]=0,H[2]=0,H[3]=1,H[4]=.5*O[0],H[5]=.5*O[1],H[6]=.5*O[2],H[7]=0,H},Fe.fromRotation=function(H,O){return H[0]=O[0],H[1]=O[1],H[2]=O[2],H[3]=O[3],H[4]=0,H[5]=0,H[6]=0,H[7]=0,H},Fe.fromMat4=function(H,O){var Q=h.create();p.getRotation(Q,O);var W=new a.ARRAY_TYPE(3);return p.getTranslation(W,O),b(H,Q,W),H},Fe.copy=F,Fe.identity=function(H){return H[0]=0,H[1]=0,H[2]=0,H[3]=1,H[4]=0,H[5]=0,H[6]=0,H[7]=0,H},Fe.set=function(H,O,Q,W,re,he,Se,Te,de){return H[0]=O,H[1]=Q,H[2]=W,H[3]=re,H[4]=he,H[5]=Se,H[6]=Te,H[7]=de,H},Fe.getDual=function(H,O){return H[0]=O[4],H[1]=O[5],H[2]=O[6],H[3]=O[7],H},Fe.setDual=function(H,O){return H[4]=O[0],H[5]=O[1],H[6]=O[2],H[7]=O[3],H},Fe.getTranslation=function(H,O){var Q=O[4],W=O[5],re=O[6],he=O[7],Se=-O[0],Te=-O[1],de=-O[2],je=O[3];return H[0]=2*(Q*je+he*Se+W*de-re*Te),H[1]=2*(W*je+he*Te+re*Se-Q*de),H[2]=2*(re*je+he*de+Q*Te-W*Se),H},Fe.translate=function(H,O,Q){var W=O[0],re=O[1],he=O[2],Se=O[3],Te=.5*Q[0],de=.5*Q[1],je=.5*Q[2],Ve=O[4],et=O[5],dt=O[6],pt=O[7];return H[0]=W,H[1]=re,H[2]=he,H[3]=Se,H[4]=Se*Te+re*je-he*de+Ve,H[5]=Se*de+he*Te-W*je+et,H[6]=Se*je+W*de-re*Te+dt,H[7]=-W*Te-re*de-he*je+pt,H},Fe.rotateX=function(H,O,Q){var W=-O[0],re=-O[1],he=-O[2],Se=O[3],Te=O[4],de=O[5],je=O[6],Ve=O[7],et=Te*Se+Ve*W+de*he-je*re,dt=de*Se+Ve*re+je*W-Te*he,pt=je*Se+Ve*he+Te*re-de*W,at=Ve*Se-Te*W-de*re-je*he;return h.rotateX(H,O,Q),H[4]=et*(Se=H[3])+at*(W=H[0])+dt*(he=H[2])-pt*(re=H[1]),H[5]=dt*Se+at*re+pt*W-et*he,H[6]=pt*Se+at*he+et*re-dt*W,H[7]=at*Se-et*W-dt*re-pt*he,H},Fe.rotateY=function(H,O,Q){var W=-O[0],re=-O[1],he=-O[2],Se=O[3],Te=O[4],de=O[5],je=O[6],Ve=O[7],et=Te*Se+Ve*W+de*he-je*re,dt=de*Se+Ve*re+je*W-Te*he,pt=je*Se+Ve*he+Te*re-de*W,at=Ve*Se-Te*W-de*re-je*he;return h.rotateY(H,O,Q),H[4]=et*(Se=H[3])+at*(W=H[0])+dt*(he=H[2])-pt*(re=H[1]),H[5]=dt*Se+at*re+pt*W-et*he,H[6]=pt*Se+at*he+et*re-dt*W,H[7]=at*Se-et*W-dt*re-pt*he,H},Fe.rotateZ=function(H,O,Q){var W=-O[0],re=-O[1],he=-O[2],Se=O[3],Te=O[4],de=O[5],je=O[6],Ve=O[7],et=Te*Se+Ve*W+de*he-je*re,dt=de*Se+Ve*re+je*W-Te*he,pt=je*Se+Ve*he+Te*re-de*W,at=Ve*Se-Te*W-de*re-je*he;return h.rotateZ(H,O,Q),H[4]=et*(Se=H[3])+at*(W=H[0])+dt*(he=H[2])-pt*(re=H[1]),H[5]=dt*Se+at*re+pt*W-et*he,H[6]=pt*Se+at*he+et*re-dt*W,H[7]=at*Se-et*W-dt*re-pt*he,H},Fe.rotateByQuatAppend=function(H,O,Q){var W=Q[0],re=Q[1],he=Q[2],Se=Q[3],Te=O[0],de=O[1],je=O[2],Ve=O[3];return H[0]=Te*Se+Ve*W+de*he-je*re,H[1]=de*Se+Ve*re+je*W-Te*he,H[2]=je*Se+Ve*he+Te*re-de*W,H[3]=Ve*Se-Te*W-de*re-je*he,H[4]=(Te=O[4])*Se+(Ve=O[7])*W+(de=O[5])*he-(je=O[6])*re,H[5]=de*Se+Ve*re+je*W-Te*he,H[6]=je*Se+Ve*he+Te*re-de*W,H[7]=Ve*Se-Te*W-de*re-je*he,H},Fe.rotateByQuatPrepend=function(H,O,Q){var W=O[0],re=O[1],he=O[2],Se=O[3],Te=Q[0],de=Q[1],je=Q[2],Ve=Q[3];return H[0]=W*Ve+Se*Te+re*je-he*de,H[1]=re*Ve+Se*de+he*Te-W*je,H[2]=he*Ve+Se*je+W*de-re*Te,H[3]=Se*Ve-W*Te-re*de-he*je,H[4]=W*(Ve=Q[7])+Se*(Te=Q[4])+re*(je=Q[6])-he*(de=Q[5]),H[5]=re*Ve+Se*de+he*Te-W*je,H[6]=he*Ve+Se*je+W*de-re*Te,H[7]=Se*Ve-W*Te-re*de-he*je,H},Fe.rotateAroundAxis=function(H,O,Q,W){if(Math.abs(W)<a.EPSILON)return F(H,O);var re=Math.hypot(Q[0],Q[1],Q[2]);W*=.5;var he=Math.sin(W),Se=he*Q[0]/re,Te=he*Q[1]/re,de=he*Q[2]/re,je=Math.cos(W),Ve=O[0],et=O[1],dt=O[2],pt=O[3];H[0]=Ve*je+pt*Se+et*de-dt*Te,H[1]=et*je+pt*Te+dt*Se-Ve*de,H[2]=dt*je+pt*de+Ve*Te-et*Se,H[3]=pt*je-Ve*Se-et*Te-dt*de;var at=O[4],Et=O[5],yt=O[6],Nt=O[7];return H[4]=at*je+Nt*Se+Et*de-yt*Te,H[5]=Et*je+Nt*Te+yt*Se-at*de,H[6]=yt*je+Nt*de+at*Te-Et*Se,H[7]=Nt*je-at*Se-Et*Te-yt*de,H},Fe.add=function(H,O,Q){return H[0]=O[0]+Q[0],H[1]=O[1]+Q[1],H[2]=O[2]+Q[2],H[3]=O[3]+Q[3],H[4]=O[4]+Q[4],H[5]=O[5]+Q[5],H[6]=O[6]+Q[6],H[7]=O[7]+Q[7],H},Fe.multiply=z,Fe.scale=function(H,O,Q){return H[0]=O[0]*Q,H[1]=O[1]*Q,H[2]=O[2]*Q,H[3]=O[3]*Q,H[4]=O[4]*Q,H[5]=O[5]*Q,H[6]=O[6]*Q,H[7]=O[7]*Q,H},Fe.lerp=function(H,O,Q,W){var re=1-W;return V(O,Q)<0&&(W=-W),H[0]=O[0]*re+Q[0]*W,H[1]=O[1]*re+Q[1]*W,H[2]=O[2]*re+Q[2]*W,H[3]=O[3]*re+Q[3]*W,H[4]=O[4]*re+Q[4]*W,H[5]=O[5]*re+Q[5]*W,H[6]=O[6]*re+Q[6]*W,H[7]=O[7]*re+Q[7]*W,H},Fe.invert=function(H,O){var Q=D(O);return H[0]=-O[0]/Q,H[1]=-O[1]/Q,H[2]=-O[2]/Q,H[3]=O[3]/Q,H[4]=-O[4]/Q,H[5]=-O[5]/Q,H[6]=-O[6]/Q,H[7]=O[7]/Q,H},Fe.conjugate=function(H,O){return H[0]=-O[0],H[1]=-O[1],H[2]=-O[2],H[3]=O[3],H[4]=-O[4],H[5]=-O[5],H[6]=-O[6],H[7]=O[7],H},Fe.normalize=function(H,O){var Q=D(O);if(Q>0){Q=Math.sqrt(Q);var W=O[0]/Q,re=O[1]/Q,he=O[2]/Q,Se=O[3]/Q,Te=O[4],de=O[5],je=O[6],Ve=O[7],et=W*Te+re*de+he*je+Se*Ve;H[0]=W,H[1]=re,H[2]=he,H[3]=Se,H[4]=(Te-W*et)/Q,H[5]=(de-re*et)/Q,H[6]=(je-he*et)/Q,H[7]=(Ve-Se*et)/Q}return H},Fe.str=function(H){return"quat2("+H[0]+", "+H[1]+", "+H[2]+", "+H[3]+", "+H[4]+", "+H[5]+", "+H[6]+", "+H[7]+")"},Fe.exactEquals=function(H,O){return H[0]===O[0]&&H[1]===O[1]&&H[2]===O[2]&&H[3]===O[3]&&H[4]===O[4]&&H[5]===O[5]&&H[6]===O[6]&&H[7]===O[7]},Fe.equals=function(H,O){var Q=H[0],W=H[1],re=H[2],he=H[3],Se=H[4],Te=H[5],de=H[6],je=H[7],Ve=O[0],et=O[1],dt=O[2],pt=O[3],at=O[4],Et=O[5],yt=O[6],Nt=O[7];return Math.abs(Q-Ve)<=a.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Ve))&&Math.abs(W-et)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(et))&&Math.abs(re-dt)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(dt))&&Math.abs(he-pt)<=a.EPSILON*Math.max(1,Math.abs(he),Math.abs(pt))&&Math.abs(Se-at)<=a.EPSILON*Math.max(1,Math.abs(Se),Math.abs(at))&&Math.abs(Te-Et)<=a.EPSILON*Math.max(1,Math.abs(Te),Math.abs(Et))&&Math.abs(de-yt)<=a.EPSILON*Math.max(1,Math.abs(de),Math.abs(yt))&&Math.abs(je-Nt)<=a.EPSILON*Math.max(1,Math.abs(je),Math.abs(Nt))},Fe.sqrLen=Fe.squaredLength=Fe.len=Fe.length=Fe.dot=Fe.mul=Fe.setReal=Fe.getReal=void 0;var a=y(S()),h=y(xe()),p=y(ce());function _(H){if(typeof WeakMap!="function")return null;var O=new WeakMap,Q=new WeakMap;return(_=function(W){return W?Q:O})(H)}function y(H,O){if(H&&H.__esModule)return H;if(H===null||f(H)!=="object"&&typeof H!="function")return{default:H};var Q=_(O);if(Q&&Q.has(H))return Q.get(H);var W={},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var he in H)if(he!=="default"&&Object.prototype.hasOwnProperty.call(H,he)){var Se=re?Object.getOwnPropertyDescriptor(H,he):null;Se&&(Se.get||Se.set)?Object.defineProperty(W,he,Se):W[he]=H[he]}return W.default=H,Q&&Q.set(H,W),W}function b(H,O,Q){var W=.5*Q[0],re=.5*Q[1],he=.5*Q[2],Se=O[0],Te=O[1],de=O[2],je=O[3];return H[0]=Se,H[1]=Te,H[2]=de,H[3]=je,H[4]=W*je+re*de-he*Te,H[5]=re*je+he*Se-W*de,H[6]=he*je+W*Te-re*Se,H[7]=-W*Se-re*Te-he*de,H}function F(H,O){return H[0]=O[0],H[1]=O[1],H[2]=O[2],H[3]=O[3],H[4]=O[4],H[5]=O[5],H[6]=O[6],H[7]=O[7],H}function z(H,O,Q){var W=O[0],re=O[1],he=O[2],Se=O[3],Te=Q[4],de=Q[5],je=Q[6],Ve=Q[7],et=O[4],dt=O[5],pt=O[6],at=O[7],Et=Q[0],yt=Q[1],Nt=Q[2],zt=Q[3];return H[0]=W*zt+Se*Et+re*Nt-he*yt,H[1]=re*zt+Se*yt+he*Et-W*Nt,H[2]=he*zt+Se*Nt+W*yt-re*Et,H[3]=Se*zt-W*Et-re*yt-he*Nt,H[4]=W*Ve+Se*Te+re*je-he*de+et*zt+at*Et+dt*Nt-pt*yt,H[5]=re*Ve+Se*de+he*Te-W*je+dt*zt+at*yt+pt*Et-et*Nt,H[6]=he*Ve+Se*je+W*de-re*Te+pt*zt+at*Nt+et*yt-dt*Et,H[7]=Se*Ve-W*Te-re*de-he*je+at*zt-et*Et-dt*yt-pt*Nt,H}Fe.getReal=h.copy,Fe.setReal=h.copy,Fe.mul=z;var V=h.dot;Fe.dot=V;var T=h.length;Fe.length=T,Fe.len=T;var D=h.squaredLength;return Fe.squaredLength=D,Fe.sqrLen=D,Fe}var ie,le,fe={};function be(){if(ie)return fe;function f(O){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},f(O)}ie=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.create=p,fe.clone=function(O){var Q=new a.ARRAY_TYPE(2);return Q[0]=O[0],Q[1]=O[1],Q},fe.fromValues=function(O,Q){var W=new a.ARRAY_TYPE(2);return W[0]=O,W[1]=Q,W},fe.copy=function(O,Q){return O[0]=Q[0],O[1]=Q[1],O},fe.set=function(O,Q,W){return O[0]=Q,O[1]=W,O},fe.add=function(O,Q,W){return O[0]=Q[0]+W[0],O[1]=Q[1]+W[1],O},fe.subtract=_,fe.multiply=y,fe.divide=b,fe.ceil=function(O,Q){return O[0]=Math.ceil(Q[0]),O[1]=Math.ceil(Q[1]),O},fe.floor=function(O,Q){return O[0]=Math.floor(Q[0]),O[1]=Math.floor(Q[1]),O},fe.min=function(O,Q,W){return O[0]=Math.min(Q[0],W[0]),O[1]=Math.min(Q[1],W[1]),O},fe.max=function(O,Q,W){return O[0]=Math.max(Q[0],W[0]),O[1]=Math.max(Q[1],W[1]),O},fe.round=function(O,Q){return O[0]=Math.round(Q[0]),O[1]=Math.round(Q[1]),O},fe.scale=function(O,Q,W){return O[0]=Q[0]*W,O[1]=Q[1]*W,O},fe.scaleAndAdd=function(O,Q,W,re){return O[0]=Q[0]+W[0]*re,O[1]=Q[1]+W[1]*re,O},fe.distance=F,fe.squaredDistance=z,fe.length=V,fe.squaredLength=T,fe.negate=function(O,Q){return O[0]=-Q[0],O[1]=-Q[1],O},fe.inverse=function(O,Q){return O[0]=1/Q[0],O[1]=1/Q[1],O},fe.normalize=function(O,Q){var W=Q[0],re=Q[1],he=W*W+re*re;return he>0&&(he=1/Math.sqrt(he)),O[0]=Q[0]*he,O[1]=Q[1]*he,O},fe.dot=function(O,Q){return O[0]*Q[0]+O[1]*Q[1]},fe.cross=function(O,Q,W){var re=Q[0]*W[1]-Q[1]*W[0];return O[0]=O[1]=0,O[2]=re,O},fe.lerp=function(O,Q,W,re){var he=Q[0],Se=Q[1];return O[0]=he+re*(W[0]-he),O[1]=Se+re*(W[1]-Se),O},fe.random=function(O,Q){Q=Q||1;var W=2*a.RANDOM()*Math.PI;return O[0]=Math.cos(W)*Q,O[1]=Math.sin(W)*Q,O},fe.transformMat2=function(O,Q,W){var re=Q[0],he=Q[1];return O[0]=W[0]*re+W[2]*he,O[1]=W[1]*re+W[3]*he,O},fe.transformMat2d=function(O,Q,W){var re=Q[0],he=Q[1];return O[0]=W[0]*re+W[2]*he+W[4],O[1]=W[1]*re+W[3]*he+W[5],O},fe.transformMat3=function(O,Q,W){var re=Q[0],he=Q[1];return O[0]=W[0]*re+W[3]*he+W[6],O[1]=W[1]*re+W[4]*he+W[7],O},fe.transformMat4=function(O,Q,W){var re=Q[0],he=Q[1];return O[0]=W[0]*re+W[4]*he+W[12],O[1]=W[1]*re+W[5]*he+W[13],O},fe.rotate=function(O,Q,W,re){var he=Q[0]-W[0],Se=Q[1]-W[1],Te=Math.sin(re),de=Math.cos(re);return O[0]=he*de-Se*Te+W[0],O[1]=he*Te+Se*de+W[1],O},fe.angle=function(O,Q){var W=O[0],re=O[1],he=Q[0],Se=Q[1],Te=Math.sqrt(W*W+re*re)*Math.sqrt(he*he+Se*Se);return Math.acos(Math.min(Math.max(Te&&(W*he+re*Se)/Te,-1),1))},fe.zero=function(O){return O[0]=0,O[1]=0,O},fe.str=function(O){return"vec2("+O[0]+", "+O[1]+")"},fe.exactEquals=function(O,Q){return O[0]===Q[0]&&O[1]===Q[1]},fe.equals=function(O,Q){var W=O[0],re=O[1],he=Q[0],Se=Q[1];return Math.abs(W-he)<=a.EPSILON*Math.max(1,Math.abs(W),Math.abs(he))&&Math.abs(re-Se)<=a.EPSILON*Math.max(1,Math.abs(re),Math.abs(Se))},fe.forEach=fe.sqrLen=fe.sqrDist=fe.dist=fe.div=fe.mul=fe.sub=fe.len=void 0;var a=function(O,Q){if(O&&O.__esModule)return O;if(O===null||f(O)!=="object"&&typeof O!="function")return{default:O};var W=h(void 0);if(W&&W.has(O))return W.get(O);var re={},he=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Se in O)if(Se!=="default"&&Object.prototype.hasOwnProperty.call(O,Se)){var Te=he?Object.getOwnPropertyDescriptor(O,Se):null;Te&&(Te.get||Te.set)?Object.defineProperty(re,Se,Te):re[Se]=O[Se]}return re.default=O,W&&W.set(O,re),re}(S());function h(O){if(typeof WeakMap!="function")return null;var Q=new WeakMap,W=new WeakMap;return(h=function(re){return re?W:Q})(O)}function p(){var O=new a.ARRAY_TYPE(2);return a.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0),O}function _(O,Q,W){return O[0]=Q[0]-W[0],O[1]=Q[1]-W[1],O}function y(O,Q,W){return O[0]=Q[0]*W[0],O[1]=Q[1]*W[1],O}function b(O,Q,W){return O[0]=Q[0]/W[0],O[1]=Q[1]/W[1],O}function F(O,Q){return Math.hypot(Q[0]-O[0],Q[1]-O[1])}function z(O,Q){var W=Q[0]-O[0],re=Q[1]-O[1];return W*W+re*re}function V(O){return Math.hypot(O[0],O[1])}function T(O){var Q=O[0],W=O[1];return Q*Q+W*W}fe.len=V,fe.sub=_,fe.mul=y,fe.div=b,fe.dist=F,fe.sqrDist=z,fe.sqrLen=T;var D,H=(D=p(),function(O,Q,W,re,he,Se){var Te,de;for(Q||(Q=2),W||(W=0),de=re?Math.min(re*Q+W,O.length):O.length,Te=W;Te<de;Te+=Q)D[0]=O[Te],D[1]=O[Te+1],he(D,D,Se),O[Te]=D[0],O[Te+1]=D[1];return O});return fe.forEach=H,fe}function He(){if(le)return C;function f(O){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},f(O)}le=1,Object.defineProperty(C,"__esModule",{value:!0}),C.vec4=C.vec3=C.vec2=C.quat2=C.quat=C.mat4=C.mat3=C.mat2d=C.mat2=C.glMatrix=void 0;var a=H(S());C.glMatrix=a;var h=H(R());C.mat2=h;var p=H($());C.mat2d=p;var _=H(ue());C.mat3=_;var y=H(ce());C.mat4=y;var b=H(xe());C.quat=b;var F=H(it());C.quat2=F;var z=H(be());C.vec2=z;var V=H(Le());C.vec3=V;var T=H(Be());function D(O){if(typeof WeakMap!="function")return null;var Q=new WeakMap,W=new WeakMap;return(D=function(re){return re?W:Q})(O)}function H(O,Q){if(O&&O.__esModule)return O;if(O===null||f(O)!=="object"&&typeof O!="function")return{default:O};var W=D(Q);if(W&&W.has(O))return W.get(O);var re={},he=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Se in O)if(Se!=="default"&&Object.prototype.hasOwnProperty.call(O,Se)){var Te=he?Object.getOwnPropertyDescriptor(O,Se):null;Te&&(Te.get||Te.set)?Object.defineProperty(re,Se,Te):re[Se]=O[Se]}return re.default=O,W&&W.set(O,re),re}return C.vec4=T,C}var Je,tt,st,Ct,Ue=He(),Ft=function(){if(tt)return Je;function f(a,h,p,_){this.cx=3*a,this.bx=3*(p-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*h,this.by=3*(_-h)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=h,this.p2x=p,this.p2y=_}return tt=1,Je=f,f.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,h){if(h===void 0&&(h=1e-6),a<0)return 0;if(a>1)return 1;for(var p=a,_=0;_<8;_++){var y=this.sampleCurveX(p)-a;if(Math.abs(y)<h)return p;var b=this.sampleCurveDerivativeX(p);if(Math.abs(b)<1e-6)break;p-=y/b}var F=0,z=1;for(p=a,_=0;_<20&&(y=this.sampleCurveX(p),!(Math.abs(y-a)<h));_++)a>y?F=p:z=p,p=.5*(z-F)+F;return p},solve:function(a,h){return this.sampleCurveY(this.solveCurveX(a,h))}},Je}(),Zt=A(Ft);function fr(){if(Ct)return st;function f(a,h){this.x=a,this.y=h}return Ct=1,st=f,f.prototype={clone:function(){return new f(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,h){return this.clone()._rotateAround(a,h)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var h=a.x-this.x,p=a.y-this.y;return h*h+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,h){return Math.atan2(this.x*h-this.y*a,this.x*a+this.y*h)},_matMult:function(a){var h=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=h,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var h=Math.cos(a),p=Math.sin(a),_=p*this.x+h*this.y;return this.x=h*this.x-p*this.y,this.y=_,this},_rotateAround:function(a,h){var p=Math.cos(a),_=Math.sin(a),y=h.y+_*(this.x-h.x)+p*(this.y-h.y);return this.x=h.x+p*(this.x-h.x)-_*(this.y-h.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(a){return a instanceof f?a:Array.isArray(a)?new f(a[0],a[1]):a},st}var Ye=A(fr());function Re(f,a){if(Array.isArray(f)){if(!Array.isArray(a)||f.length!==a.length)return!1;for(let h=0;h<f.length;h++)if(!Re(f[h],a[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&a!==null){if(typeof a!="object"||Object.keys(f).length!==Object.keys(a).length)return!1;for(const h in f)if(!Re(f[h],a[h]))return!1;return!0}return f===a}const hr=Math.PI/180,Ut=180/Math.PI;function vt(f){return f*hr}function Yt(f){return f*Ut}const ar=[[0,0],[1,0],[1,1],[0,1]];function nr(f){if(f<=0)return 0;if(f>=1)return 1;const a=f*f,h=a*f;return 4*(f<.5?h:3*(f-a)+h-.75)}function Fr(f,a,h,p){const _=new Zt(f,a,h,p);return function(y){return _.solve(y)}}const Gr=Fr(.25,.1,.25,1);function Ir(f,a,h){return Math.min(h,Math.max(a,f))}function cn(f,a,h){return(h=Ir((h-f)/(a-f),0,1))*h*(3-2*h)}function Sn(f,a,h){const p=h-a,_=((f-a)%p+p)%p+a;return _===a?h:_}function En(f,a,h){if(!f.length)return h(null,[]);let p=f.length;const _=new Array(f.length);let y=null;f.forEach((b,F)=>{a(b,(z,V)=>{z&&(y=z),_[F]=V,--p==0&&h(y,_)})})}function an(f,...a){for(const h of a)for(const p in h)f[p]=h[p];return f}let lr=1;function Xt(){return lr++}function qr(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))}function Kr(f,a){f.forEach(h=>{a[h]&&(a[h]=a[h].bind(a))})}function kn(f,a){return f.indexOf(a,f.length-a.length)!==-1}function mn(f,a,h){const p={};for(const _ in f)p[_]=a.call(this,f[_],_,f);return p}function Un(f,a,h){const p={};for(const _ in f)a.call(this,f[_],_,f)&&(p[_]=f[_]);return p}function Hi(f){return Array.isArray(f)?f.map(Hi):typeof f=="object"&&f?mn(f,Hi):f}const Gn={};function ti(f){Gn[f]||(typeof console<"u"&&console.warn(f),Gn[f]=!0)}function si(f,a,h){return(h.y-f.y)*(a.x-f.x)>(a.y-f.y)*(h.x-f.x)}function xi(f){let a=0;for(let h,p,_=0,y=f.length,b=y-1;_<y;b=_++)h=f[_],p=f[b],a+=(p.x-h.x)*(h.y+p.y);return a}function Bn([f,a,h]){const p=vt(a+90),_=vt(h);return{x:f*Math.cos(p)*Math.sin(_),y:f*Math.sin(p)*Math.sin(_),z:f*Math.cos(_),azimuthal:a,polar:h}}function Zr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Nr(f){const a={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,p,_,y)=>{const b=_||y;return a[p]=!b||b.toLowerCase(),""}),a["max-age"]){const h=parseInt(a["max-age"],10);isNaN(h)?delete a["max-age"]:a["max-age"]=h}return a}let un,ri=null;function Hn(f,a){return[f[4*a],f[4*a+1],f[4*a+2],f[4*a+3]]}function ir(f,a,h,p){for(;a<h;){const _=a+h>>1;f[_]<p?a=_+1:h=_}return a}function We(f,a,h,p){for(;a<h;){const _=a+h>>1;f[_]<=p?a=_+1:h=_}return a}function qe(f){return f>0?1/(1.001-f):1+f}function ht(f){return f>0?1-1/(1.001-f):-f}const It={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(un==null){const f=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{un=r.API_URL_REGEX!=null?new RegExp(r.API_URL_REGEX):f}catch{un=f}}return un},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!It.API_URL)return null;try{const f=new URL(It.API_URL);return f.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":f.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function wt(f){return It.API_URL_REGEX.test(f)}function kt(f){return It.API_SPRITE_REGEX.test(f)}let Wt,Ot,pr,xr,Ar,Tr;function nn(){return Wt==null&&(Wt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Wt}const on={now:()=>xr!==void 0?xr:performance.now(),setNow(f){xr=f},restoreNow(){xr=void 0},frame(f){const a=requestAnimationFrame(f);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(f,a=0){const{width:h,height:p}=f;Ar||(Ar=document.createElement("canvas"));const _=Ar.getContext("2d",{willReadFrequently:!0});if(!_)throw new Error("failed to create canvas 2d context");return(h>Ar.width||p>Ar.height)&&(Ar.width=h,Ar.height=p),_.clearRect(-a,-a,h+2*a,p+2*a),_.drawImage(f,0,0,h,p),_.getImageData(-a,-a,h+2*a,p+2*a)},resolveURL:f=>(Ot||(Ot=document.createElement("a")),Ot.href=f,Ot.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(pr==null&&(pr=window.matchMedia("(prefers-reduced-motion: reduce)")),pr.matches)},hasCanvasFingerprintNoise(){if(Tr!==void 0)return Tr;if(!nn())return Tr=!1,!1;const f=new OffscreenCanvas(85,1),a=f.getContext("2d",{willReadFrequently:!0});let h=0;for(let _=0;_<f.width;++_)a.fillStyle=`rgba(${h++},${h++},${h++}, 255)`,a.fillRect(_,0,1,1);const p=a.getImageData(0,0,f.width,f.height);h=0;for(let _=0;_<p.data.length;++_)if(_%4!=3&&h++!==p.data[_])return Tr=!0,!0;return Tr=!1,!1}};function _n(f,a){const h=f.indexOf("?");if(h<0)return`${f}?${new URLSearchParams(a).toString()}`;const p=new URLSearchParams(f.slice(h));for(const _ in a)p.set(_,a[_]);return`${f.slice(0,h)}?${p.toString()}`}function Dn(f,a={persistentParams:[]}){const h=f.indexOf("?");if(h<0)return f;const p=new URLSearchParams,_=new URLSearchParams(f.slice(h));for(const b of a.persistentParams){const F=_.get(b);F&&p.set(b,F)}const y=p.toString();return`${f.slice(0,h)}${y.length>0?`?${y}`:""}`}const qn="mapbox-tiles";let $n=500,Ni=50;const Vi=["language","worldview","jobid"];let Wn,Ki;function Cs(){try{return caches}catch{}}function ro(){const f=Cs();f&&Wn==null&&(Wn=f.open(qn))}let Fs=1/0;const es={supported:!1,testSupport:function(f){!tl&&Ba&&(go?sa(f):Sa=f)}};let Sa,Ba,tl=!1,go=!1;const Sl=typeof self<"u"?self:{};function sa(f){const a=f.createTexture();f.bindTexture(f.TEXTURE_2D,a);try{if(f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,Ba),f.isContextLost())return;es.supported=!0}catch{}f.deleteTexture(a),tl=!0}Sl.document&&(Ba=Sl.document.createElement("img"),Ba.onload=function(){Sa&&sa(Sa),Sa=null,go=!0},Ba.onerror=function(){tl=!0,Sa=null},Ba.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ha={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ha);class Gi extends Error{constructor(a,h,p){h===401&&wt(p)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=h,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Fc=Zr()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,nc=function(f,a){if(!(/^file:/.test(h=f.url)||/^file:/.test(Fc())&&!/^\w+:/.test(h))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(p,_){const y=new AbortController,b=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:Fc(),referrerPolicy:p.referrerPolicy,signal:y.signal});let F=!1,z=!1;const V=(T=b.url).indexOf("sku=")>0&&wt(T);var T;p.type==="json"&&b.headers.set("Accept","application/json");const D=(O,Q,W)=>{if(z)return;if(O&&O.message!=="SecurityError"&&ti(O.toString()),Q&&W)return H(Q);const re=Date.now();fetch(b).then(he=>{if(he.ok){const Se=V?he.clone():null;return H(he,Se,re)}return _(new Gi(he.statusText,he.status,p.url))}).catch(he=>{he.name!=="AbortError"&&_(new Error(`${he.message} ${p.url}`))})},H=(O,Q,W)=>{(p.type==="arrayBuffer"?O.arrayBuffer():p.type==="json"?O.json():O.text()).then(re=>{z||(Q&&W&&function(he,Se,Te){if(ro(),Wn==null)return;const de=Nr(Se.headers.get("Cache-Control")||"");if(de["no-store"])return;const je={status:Se.status,statusText:Se.statusText,headers:new Headers};Se.headers.forEach((dt,pt)=>je.headers.set(pt,dt)),de["max-age"]&&je.headers.set("Expires",new Date(Te+1e3*de["max-age"]).toUTCString());const Ve=je.headers.get("Expires");if(!Ve||new Date(Ve).getTime()-Te<42e4)return;let et=Dn(he.url,{persistentParams:Vi});if(Se.status===206){const dt=he.headers.get("Range");if(!dt)return;je.status=200,et=_n(et,{range:dt})}(function(dt,pt){if(Ki===void 0)try{new Response(new ReadableStream),Ki=!0}catch{Ki=!1}Ki?pt(dt.body):dt.blob().then(pt)})(Se,dt=>{const pt=new Response((at=Se.status)!==200&&at!==404&&[101,103,204,205,304].includes(at)?null:dt,je);var at;ro(),Wn!=null&&Wn.then(Et=>Et.put(et,pt)).catch(Et=>ti(Et.message))})}(b,Q,W),F=!0,_(null,re,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(re=>{z||_(new Error(re.message))})};return V?function(O,Q){if(ro(),Wn==null)return Q(null);Wn.then(W=>{let re=Dn(O.url,{persistentParams:Vi});const he=O.headers.get("Range");he&&(re=_n(re,{range:he})),W.match(re).then(Se=>{const Te=function(de){if(!de)return!1;const je=new Date(de.headers.get("Expires")||0),Ve=Nr(de.headers.get("Cache-Control")||"");return je>Date.now()&&!Ve["no-cache"]}(Se);W.delete(re),Te&&W.put(re,Se.clone()),Q(null,Se,Te)}).catch(Q)}).catch(Q)}(b,D):D(null,null),{cancel:()=>{z=!0,F||y.abort()}}}(f,a);if(Zr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",f,a,void 0,!0)}var h;return function(p,_){const y=new XMLHttpRequest;y.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const b in p.headers)y.setRequestHeader(b,p.headers[b]);return p.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=p.credentials==="include",y.onerror=()=>{_(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let b=y.response;if(p.type==="json")try{b=JSON.parse(y.response)}catch(F){return _(F)}_(null,b,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else _(new Gi(y.statusText,y.status,p.url))},y.send(p.body),{cancel:()=>y.abort()}}(f,a)},Ul=function(f,a){return nc(an(f,{type:"arrayBuffer"}),a)};function Xo(f){const a=document.createElement("a");return a.href=f,a.protocol===location.protocol&&a.host===location.host}const Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let mi,So;mi=[],So=0;const vs=function(f,a){if(es.supported&&(f.headers||(f.headers={}),f.headers.accept="image/webp,*/*"),So>=It.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:f,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return mi.push(y),y}So++;let h=!1;const p=()=>{if(!h)for(h=!0,So--;mi.length&&So<It.MAX_PARALLEL_IMAGE_REQUESTS;){const y=mi.shift(),{requestParameters:b,callback:F,cancelled:z}=y;z||(y.cancel=vs(b,F).cancel)}},_=Ul(f,(y,b,F,z)=>{p(),y?a(y):b&&(self.createImageBitmap?function(V,T){const D=new Blob([new Uint8Array(V)],{type:"image/png"});createImageBitmap(D).then(H=>{T(null,H)}).catch(H=>{T(new Error(`Could not load image because of ${H.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(b,(V,T)=>a(V,T,F,z)):function(V,T){const D=new Image;D.onload=()=>{T(null,D),URL.revokeObjectURL(D.src),D.onload=null,requestAnimationFrame(()=>{D.src=Pa})},D.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const H=new Blob([new Uint8Array(V)],{type:"image/png"});D.src=V.byteLength?URL.createObjectURL(H):Pa}(b,(V,T)=>a(V,T,F,z)))});return{cancel:()=>{_.cancel(),p()}}};var Bl,Nc,Cc,ae={exports:{}},Oe={exports:{}},At={exports:{}},Ht=function(){if(Cc)return ae.exports;Cc=1;var f=(Bl||(Bl=1,Oe.exports=function(h,p){var _,y,b,F,z,V,T,D;for(y=h.length-(_=3&h.length),b=p,z=3432918353,V=461845907,D=0;D<y;)T=255&h.charCodeAt(D)|(255&h.charCodeAt(++D))<<8|(255&h.charCodeAt(++D))<<16|(255&h.charCodeAt(++D))<<24,++D,b=27492+(65535&(F=5*(65535&(b=(b^=T=(65535&(T=(T=(65535&T)*z+(((T>>>16)*z&65535)<<16)&4294967295)<<15|T>>>17))*V+(((T>>>16)*V&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(F>>>16)&65535)<<16);switch(T=0,_){case 3:T^=(255&h.charCodeAt(D+2))<<16;case 2:T^=(255&h.charCodeAt(D+1))<<8;case 1:b^=T=(65535&(T=(T=(65535&(T^=255&h.charCodeAt(D)))*z+(((T>>>16)*z&65535)<<16)&4294967295)<<15|T>>>17))*V+(((T>>>16)*V&65535)<<16)&4294967295}return b^=h.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),Oe.exports),a=(Nc||(Nc=1,At.exports=function(h,p){for(var _,y=h.length,b=p^y,F=0;y>=4;)_=1540483477*(65535&(_=255&h.charCodeAt(F)|(255&h.charCodeAt(++F))<<8|(255&h.charCodeAt(++F))<<16|(255&h.charCodeAt(++F))<<24))+((1540483477*(_>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),y-=4,++F;switch(y){case 3:b^=(255&h.charCodeAt(F+2))<<16;case 2:b^=(255&h.charCodeAt(F+1))<<8;case 1:b=1540483477*(65535&(b^=255&h.charCodeAt(F)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),At.exports);return ae.exports=f,ae.exports.murmur3=f,ae.exports.murmur2=a,ae.exports}(),er=A(Ht);class tr{constructor(a,...h){an(this,h[0]||{}),this.type=a}}class _r extends tr{constructor(a,h={}){super("error",an({error:a},h))}}function fn(f,a,h){h[f]&&h[f].indexOf(a)!==-1||(h[f]=h[f]||[],h[f].push(a))}function pn(f,a,h){if(h&&h[f]){const p=h[f].indexOf(a);p!==-1&&h[f].splice(p,1)}}class Nn{on(a,h){return this._listeners=this._listeners||{},fn(a,h,this._listeners),this}off(a,h){return pn(a,h,this._listeners),pn(a,h,this._oneTimeListeners),this}once(a,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},fn(a,h,this._oneTimeListeners),this):new Promise(p=>this.once(a,p))}fire(a,h){const p=typeof a=="string"?new tr(a,h):a,_=p.type;if(this.listens(_)){p.target=this;const y=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const z of y)z.call(this,p);const b=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const z of b)pn(_,z,this._oneTimeListeners),z.call(this,p);const F=this._eventedParent;F&&(an(p,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),F.fire(p))}else p instanceof _r&&console.error(p.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,h){return this._eventedParent=a,this._eventedParentData=h,this}}var Mn,Xr={},Qn=function(){if(Mn)return Xr;Mn=1;var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(y){return(y=Math.round(y))<0?0:y>255?255:y}function h(y){return a(y[y.length-1]==="%"?parseFloat(y)/100*255:parseInt(y))}function p(y){return(b=y[y.length-1]==="%"?parseFloat(y)/100:parseFloat(y))<0?0:b>1?1:b;var b}function _(y,b,F){return F<0?F+=1:F>1&&(F-=1),6*F<1?y+(b-y)*F*6:2*F<1?b:3*F<2?y+(b-y)*(2/3-F)*6:y}try{Xr.parseCSSColor=function(y){var b,F=y.replace(/ /g,"").toLowerCase();if(F in f)return f[F].slice();if(F[0]==="#")return F.length===4?(b=parseInt(F.substr(1),16))>=0&&b<=4095?[(3840&b)>>4|(3840&b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1]:null:F.length===7&&(b=parseInt(F.substr(1),16))>=0&&b<=16777215?[(16711680&b)>>16,(65280&b)>>8,255&b,1]:null;var z=F.indexOf("("),V=F.indexOf(")");if(z!==-1&&V+1===F.length){var T=F.substr(0,z),D=F.substr(z+1,V-(z+1)).split(","),H=1;switch(T){case"rgba":if(D.length!==4)return null;H=p(D.pop());case"rgb":return D.length!==3?null:[h(D[0]),h(D[1]),h(D[2]),H];case"hsla":if(D.length!==4)return null;H=p(D.pop());case"hsl":if(D.length!==3)return null;var O=(parseFloat(D[0])%360+360)%360/360,Q=p(D[1]),W=p(D[2]),re=W<=.5?W*(Q+1):W+Q-W*Q,he=2*W-re;return[a(255*_(he,re,O+1/3)),a(255*_(he,re,O)),a(255*_(he,re,O-1/3)),H];default:return null}}return null}}catch{}return Xr}();class oi{constructor(a,h,p,_=1){this.r=a,this.g=h,this.b=p,this.a=_}static parse(a){if(!a)return;if(a instanceof oi)return a;if(typeof a!="string")return;const h=Qn.parseCSSColor(a);return h?new oi(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3]):void 0}toString(){const[a,h,p,_]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(a)},${Math.round(h)},${Math.round(p)},${_})`}toRenderColor(a){const{r:h,g:p,b:_,a:y}=this;return new Pi(a,h,p,_,y)}}class Pi{constructor(a,h,p,_,y){if(a){const b=a.image.height,F=b*b;h=y===0?0:h/y*(b-1),p=y===0?0:p/y*(b-1),_=y===0?0:_/y*(b-1);const z=Math.floor(h),V=Math.floor(p),T=Math.floor(_),D=Math.ceil(h),H=Math.ceil(p),O=Math.ceil(_),Q=h-z,W=p-V,re=_-T,he=a.image.data,Se=4*(z+V*F+T*b),Te=4*(z+V*F+O*b),de=4*(z+H*F+T*b),je=4*(z+H*F+O*b),Ve=4*(D+V*F+T*b),et=4*(D+V*F+O*b),dt=4*(D+H*F+T*b),pt=4*(D+H*F+O*b);if(Se<0||pt>=he.length)throw new Error("out of range");this.r=Sr(Sr(Sr(he[Se],he[Te],re),Sr(he[de],he[je],re),W),Sr(Sr(he[Ve],he[et],re),Sr(he[dt],he[pt],re),W),Q)/255*y,this.g=Sr(Sr(Sr(he[Se+1],he[Te+1],re),Sr(he[de+1],he[je+1],re),W),Sr(Sr(he[Ve+1],he[et+1],re),Sr(he[dt+1],he[pt+1],re),W),Q)/255*y,this.b=Sr(Sr(Sr(he[Se+2],he[Te+2],re),Sr(he[de+2],he[je+2],re),W),Sr(Sr(he[Ve+2],he[et+2],re),Sr(he[dt+2],he[pt+2],re),W),Q)/255*y,this.a=y}else this.r=h,this.g=p,this.b=_,this.a=y}toArray(){const{r:a,g:h,b:p,a:_}=this;return _===0?[0,0,0,0]:[255*a/_,255*h/_,255*p/_,_]}toArray01(){const{r:a,g:h,b:p,a:_}=this;return _===0?[0,0,0,0]:[a/_,h/_,p/_,_]}toArray01Scaled(a){const{r:h,g:p,b:_,a:y}=this;return y===0?[0,0,0]:[h/y*a,p/y*a,_/y*a]}toArray01PremultipliedAlpha(){const{r:a,g:h,b:p,a:_}=this;return[a,h,p,_]}toArray01Linear(){const{r:a,g:h,b:p,a:_}=this;return _===0?[0,0,0,0]:[Math.pow(a/_,2.2),Math.pow(h/_,2.2),Math.pow(p/_,2.2),_]}}function Sr(f,a,h){return f*(1-h)+a*h}function ln(f,a,h){return f.map((p,_)=>Sr(p,a[_],h))}oi.black=new oi(0,0,0,1),oi.white=new oi(1,1,1,1),oi.transparent=new oi(0,0,0,0),oi.red=new oi(1,0,0,1),oi.blue=new oi(0,0,1,1);var Jn=Object.freeze({__proto__:null,array:ln,color:function(f,a,h){return new oi(Sr(f.r,a.r,h),Sr(f.g,a.g,h),Sr(f.b,a.b,h),Sr(f.a,a.a,h))},number:Sr});function Bi(f,...a){for(const h of a)for(const p in h)f[p]=h[p];return f}class Ns extends Error{constructor(a,h){super(h),this.message=h,this.key=a}}class Ks{constructor(a,h=[]){this.parent=a,this.bindings={};for(const[p,_]of h)this.bindings[p]=_}concat(a){return new Ks(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Ro={kind:"null"},yn={kind:"number"},Yn={kind:"string"},Li={kind:"boolean"},da={kind:"color"},Ms={kind:"object"},fi={kind:"value"},Po={kind:"collator"},zl={kind:"formatted"},oa={kind:"resolvedImage"};function yo(f,a){return{kind:"array",itemType:f,N:a}}function ps(f){if(f.kind==="array"){const a=ps(f.itemType);return typeof f.N=="number"?`array<${a}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${a}>`}return f.kind}const $c=[Ro,yn,Yn,Li,da,zl,Ms,yo(fi),oa];function Ql(f,a){if(a.kind==="error")return null;if(f.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!Ql(f.itemType,a.itemType))&&(typeof f.N!="number"||f.N===a.N))return null}else{if(f.kind===a.kind)return null;if(f.kind==="value"){for(const h of $c)if(!Ql(h,a))return null}}return`Expected ${ps(f)} but found ${ps(a)} instead.`}function Hl(f,a){return a.some(h=>h.kind===f.kind)}function Ma(f,a){return a.some(h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f)}class qo{constructor(a,h,p){this.sensitivity=a?h?"variant":"case":h?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,h){return this.collator.compare(a,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xs{constructor(a,h,p,_,y){this.text=a.normalize?a.normalize():a,this.image=h,this.scale=p,this.fontStack=_,this.textColor=y}}class Bo{constructor(a){this.sections=a}static fromString(a){return new Bo([new Xs(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.namePrimary.length!==0)}static factory(a){return a instanceof Bo?a:Bo.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const h of this.sections){if(h.image){a.push(["image",h.image.namePrimary]);continue}a.push(h.text);const p={};h.fontStack&&(p["text-font"]=["literal",h.fontStack.split(",")]),h.scale&&(p["font-scale"]=h.scale),h.textColor&&(p["text-color"]=["rgba"].concat(h.textColor.toRenderColor(null).toArray())),a.push(p)}return a}}class Ys{constructor(a){this.namePrimary=a.namePrimary,a.nameSecondary&&(this.nameSecondary=a.nameSecondary),this.available=a.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(a,h){return a?new Ys({namePrimary:a,nameSecondary:h,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function vo(f,a,h,p){return typeof f=="number"&&f>=0&&f<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof h=="number"&&h>=0&&h<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[f,a,h,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[f,a,h,p]:[f,a,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fa(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof oi||f instanceof qo||f instanceof Bo||f instanceof Ys)return!0;if(Array.isArray(f)){for(const a of f)if(!fa(a))return!1;return!0}if(typeof f=="object"){for(const a in f)if(!fa(f[a]))return!1;return!0}return!1}function xs(f){if(f===null)return Ro;if(typeof f=="string")return Yn;if(typeof f=="boolean")return Li;if(typeof f=="number")return yn;if(f instanceof oi)return da;if(f instanceof qo)return Po;if(f instanceof Bo)return zl;if(f instanceof Ys)return oa;if(Array.isArray(f)){const a=f.length;let h;for(const p of f){const _=xs(p);if(h){if(h===_)continue;h=fi;break}h=_}return yo(h||fi,a)}return Ms}function no(f){const a=typeof f;return f===null?"":a==="string"||a==="number"||a==="boolean"?String(f):f instanceof oi||f instanceof Bo||f instanceof Ys?f.toString():JSON.stringify(f)}class $o{constructor(a,h){this.type=a,this.value=h}static parse(a,h){if(a.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!fa(a[1]))return h.error("invalid value");const p=a[1];let _=xs(p);const y=h.expectedType;return _.kind!=="array"||_.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(_=y),new $o(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof oi?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Bo?this.value.serialize():this.value}}class Eo{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const ic={string:Yn,number:yn,boolean:Li,object:Ms};class aa{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");let p,_=1;const y=a[0];if(y==="array"){let F,z;if(a.length>2){const V=a[1];if(typeof V!="string"||!(V in ic)||V==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);F=ic[V],_++}else F=fi;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return h.error('The length argument to "array" must be a positive integer literal',2);z=a[2],_++}p=yo(F,z)}else p=ic[y];const b=[];for(;_<a.length;_++){const F=h.parse(a[_],_,fi);if(!F)return null;b.push(F)}return new aa(p,b)}evaluate(a){for(let h=0;h<this.args.length;h++){const p=this.args[h].evaluate(a);if(!Ql(this.type,xs(p)))return p;if(h===this.args.length-1)throw new Eo(`The expression ${JSON.stringify(this.args[h].serialize())} evaluated to ${ps(xs(p))} but was expected to be of type ${ps(this.type)}.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,h=[a.kind];if(a.kind==="array"){const p=a.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){h.push(p.kind);const _=a.N;(typeof _=="number"||this.args.length>1)&&h.push(_)}}return h.concat(this.args.map(p=>p.serialize()))}}class rl{constructor(a){this.type=zl,this.sections=a}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[1];if(!Array.isArray(p)&&typeof p=="object")return h.error("First argument must be an image or text section.");const _=[];let y=!1;for(let b=1;b<=a.length-1;++b){const F=a[b];if(y&&typeof F=="object"&&!Array.isArray(F)){y=!1;let z=null;if(F["font-scale"]&&(z=h.parseObjectValue(F["font-scale"],b,"font-scale",yn),!z))return null;let V=null;if(F["text-font"]&&(V=h.parseObjectValue(F["text-font"],b,"text-font",yo(Yn)),!V))return null;let T=null;if(F["text-color"]&&(T=h.parseObjectValue(F["text-color"],b,"text-color",da),!T))return null;const D=_[_.length-1];D.scale=z,D.font=V,D.textColor=T}else{const z=h.parse(a[b],b,fi);if(!z)return null;const V=z.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,_.push({content:z,scale:null,font:null,textColor:null})}}return new rl(_)}evaluate(a){return new Bo(this.sections.map(h=>{const p=h.content.evaluate(a);return xs(p)===oa?new Xs("",p,null,null,null):new Xs(no(p),null,h.scale?h.scale.evaluate(a):null,h.font?h.font.evaluate(a).join(","):null,h.textColor?h.textColor.evaluate(a):null)}))}eachChild(a){for(const h of this.sections)a(h.content),h.scale&&a(h.scale),h.font&&a(h.font),h.textColor&&a(h.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const h of this.sections){a.push(h.content.serialize());const p={};h.scale&&(p["font-scale"]=h.scale.serialize()),h.font&&(p["text-font"]=h.font.serialize()),h.textColor&&(p["text-color"]=h.textColor.serialize()),a.push(p)}return a}}class Uo{constructor(a,h){this.type=oa,this.inputPrimary=a,this.inputSecondary=h}static parse(a,h){if(a.length<2)return h.error("Expected two or more arguments.");const p=h.parse(a[1],1,Yn);if(!p)return h.error("No image name provided.");if(a.length===2)return new Uo(p);const _=h.parse(a[2],1,Yn);return _?new Uo(p,_):h.error("Secondary image variant is not a string.")}evaluate(a){const h=Ys.fromString(this.inputPrimary.evaluate(a),this.inputSecondary?this.inputSecondary.evaluate(a):void 0);return h&&a.availableImages&&(h.available=a.availableImages.indexOf(h.namePrimary)>-1,h.nameSecondary&&h.available&&a.availableImages&&(h.available=a.availableImages.indexOf(h.nameSecondary)>-1)),h}eachChild(a){a(this.inputPrimary),this.inputSecondary&&a(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Va(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}const Vl={"to-boolean":Li,"to-color":da,"to-number":yn,"to-string":Yn};class Wo{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expected at least one argument.");const p=a[0],_=[];let y=Ro;if(p==="to-array"){if(!Array.isArray(a[1]))return null;const b=a[1].length;if(h.expectedType){if(h.expectedType.kind!=="array")return h.error(`Expected ${h.expectedType.kind} but found array.`);y=yo(h.expectedType.itemType,b)}else{if(!(b>0&&fa(a[1][0])))return null;y=yo(xs(a[1][0]),b)}for(let F=0;F<b;F++){const z=a[1][F];let V;if(Va(z)==="array")V=h.parse(z,void 0,y.itemType);else{const T=Va(z);if(T!==y.itemType.kind)return h.error(`Expected ${y.itemType.kind} but found ${T}.`);V=h.registry.literal.parse(["literal",z===void 0?null:z],h)}if(!V)return null;_.push(V)}}else{if((p==="to-boolean"||p==="to-string")&&a.length!==2)return h.error("Expected one argument.");y=Vl[p];for(let b=1;b<a.length;b++){const F=h.parse(a[b],b,fi);if(!F)return null;_.push(F)}}return new Wo(y,_)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let h,p;for(const _ of this.args){if(h=_.evaluate(a),p=null,h instanceof oi)return h;if(typeof h=="string"){const y=a.parseColor(h);if(y)return y}else if(Array.isArray(h)&&(p=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:vo(h[0],h[1],h[2],h[3]),!p))return new oi(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Eo(p||`Could not parse color from value '${typeof h=="string"?h:String(JSON.stringify(h))}'`)}if(this.type.kind==="number"){let h=null;for(const p of this.args){if(h=p.evaluate(a),h===null)return 0;const _=Number(h);if(!isNaN(_))return _}throw new Eo(`Could not convert ${JSON.stringify(h)} to number.`)}return this.type.kind==="formatted"?Bo.fromString(no(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Ys.fromString(no(this.args[0].evaluate(a))):this.type.kind==="array"?this.args.map(h=>h.evaluate(a)):no(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if(this.type.kind==="formatted")return new rl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Uo(this.args[0]).serialize();const a=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(h=>{a.push(h.serialize())}),a}}const yu=["Unknown","Point","LineString","Polygon"];class pa{constructor(a,h){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=a,this.options=h}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?yu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(a){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,h=this.featureDistanceData.scale,{x:p,y:_}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(p*h-a[0])+this.featureDistanceData.bearing[1]*(_*h-a[1])}return 0}parseColor(a){let h=this._parseColorCache[a];return h||(h=this._parseColorCache[a]=oi.parse(a)),h}getConfig(a){return this.options?this.options.get(a):null}}class xo{constructor(a,h,p,_,y){this.name=a,this.type=h,this._evaluate=p,this.args=_,this._overloadIndex=y}evaluate(a){if(!this._evaluate){const h=xo.definitions[this.name];this._evaluate=Array.isArray(h)?h[2]:h.overloads[this._overloadIndex][1]}return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,h){const p=a[0],_=xo.definitions[p];if(!_)return h.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(_)?_[0]:_.type,b=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,F=[];let z=null,V=-1;for(const[T,D]of b){if(Array.isArray(T)&&T.length!==a.length-1)continue;F.push(T),V++,z=new sl(h.registry,h.path,null,h.scope,void 0,h._scope,h.options);const H=[];let O=!1;for(let Q=1;Q<a.length;Q++){const W=a[Q],re=Array.isArray(T)?T[Q-1]:T.type,he=z.parse(W,1+H.length,re);if(!he){O=!0;break}H.push(he)}if(!O)if(Array.isArray(T)&&T.length!==H.length)z.error(`Expected ${T.length} arguments, but found ${H.length} instead.`);else{for(let Q=0;Q<H.length;Q++){const W=Array.isArray(T)?T[Q]:T.type,re=H[Q];z.concat(Q+1).checkSubtype(W,re.type)}if(z.errors.length===0)return new xo(p,y,D,H,V)}}if(F.length===1)h.errors.push(...z.errors);else{const T=(F.length?F:b.map(([H])=>H)).map(Gl).join(" | "),D=[];for(let H=1;H<a.length;H++){const O=h.parse(a[H],1+D.length);if(!O)return null;D.push(ps(O.type))}h.error(`Expected arguments of type ${T}, but found (${D.join(", ")}) instead.`)}return null}static register(a,h){xo.definitions=h;for(const p in h)a[p]=xo}}function Gl(f){return Array.isArray(f)?`(${f.map(ps).join(", ")})`:`(${ps(f.type)}...)`}class _o{constructor(a,h,p){this.type=Po,this.locale=p,this.caseSensitive=a,this.diacriticSensitive=h}static parse(a,h){if(a.length!==2)return h.error("Expected one argument.");const p=a[1];if(typeof p!="object"||Array.isArray(p))return h.error("Collator options argument must be an object.");const _=p["case-sensitive"]===void 0?h.parse(!1,1,Li):h.parseObjectValue(p["case-sensitive"],1,"case-sensitive",Li);if(!_)return null;const y=p["diacritic-sensitive"]===void 0?h.parse(!1,1,Li):h.parseObjectValue(p["diacritic-sensitive"],1,"diacritic-sensitive",Li);if(!y)return null;let b=null;return p.locale&&(b=h.parseObjectValue(p.locale,1,"locale",Yn),!b)?null:new _o(_,y,b)}evaluate(a){return new qo(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}function ql(f,a,h=0,p=f.length-1,_=pe){for(;p>h;){if(p-h>600){const z=p-h+1,V=a-h+1,T=Math.log(z),D=.5*Math.exp(2*T/3),H=.5*Math.sqrt(T*D*(z-D)/z)*(V-z/2<0?-1:1);ql(f,a,Math.max(h,Math.floor(a-V*D/z+H)),Math.min(p,Math.floor(a+(z-V)*D/z+H)),_)}const y=f[a];let b=h,F=p;for(k(f,h,a),_(f[p],y)>0&&k(f,h,p);b<F;){for(k(f,b,F),b++,F--;_(f[b],y)<0;)b++;for(;_(f[F],y)>0;)F--}_(f[h],y)===0?k(f,h,F):(F++,k(f,F,p)),F<=a&&(h=F+1),a<=F&&(p=F-1)}}function k(f,a,h){const p=f[a];f[a]=f[h],f[h]=p}function pe(f,a){return f<a?-1:f>a?1:0}function Ke(f){let a=0;for(let h,p,_=0,y=f.length,b=y-1;_<y;b=_++)h=f[_],p=f[b],a+=(p.x-h.x)*(h.y+p.y);return a}function ot(f,a){f[0]=Math.min(f[0],a[0]),f[1]=Math.min(f[1],a[1]),f[2]=Math.max(f[2],a[0]),f[3]=Math.max(f[3],a[1])}function St(f,a){return!(f[0]<=a[0]||f[2]>=a[2]||f[1]<=a[1]||f[3]>=a[3])}function $t(f,a,h){const p=f[0]-a[0],_=f[1]-a[1],y=f[0]-h[0],b=f[1]-h[1];return p*b-y*_==0&&p*y<=0&&_*b<=0}function gr(f,a,h=!1){let p=!1;for(let F=0,z=a.length;F<z;F++){const V=a[F];for(let T=0,D=V.length,H=D-1;T<D;H=T++){const O=V[H],Q=V[T];if($t(f,O,Q))return h;(y=O)[1]>(_=f)[1]!=(b=Q)[1]>_[1]&&_[0]<(b[0]-y[0])*(_[1]-y[1])/(b[1]-y[1])+y[0]&&(p=!p)}}var _,y,b;return p}function $r(f,a,h,p){const _=p[0]-h[0],y=p[1]-h[1],b=(f[0]-h[0])*y-_*(f[1]-h[1]),F=(a[0]-h[0])*y-_*(a[1]-h[1]);return b>0&&F<0||b<0&&F>0}function An(f,a,h,p){return(_=[p[0]-h[0],p[1]-h[1]])[0]*(y=[a[0]-f[0],a[1]-f[1]])[1]-_[1]*y[0]!=0&&!(!$r(f,a,h,p)||!$r(h,p,f,a));var _,y}const Tn=8192;function Wr(f,a){const h=(180+f[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,_=Math.pow(2,a.z);return[Math.round(h*_*Tn),Math.round(p*_*Tn)]}function Dr(f,a){for(let h=0;h<a.length;h++)if(gr(f,a[h]))return!0;return!1}function Ci(f,a,h){for(const p of h)for(let _=0,y=p.length,b=y-1;_<y;b=_++)if(An(f,a,p[b],p[_]))return!0;return!1}function gn(f,a){for(let h=0;h<f.length;++h)if(!gr(f[h],a))return!1;for(let h=0;h<f.length-1;++h)if(Ci(f[h],f[h+1],a))return!1;return!0}function Fi(f,a){for(let h=0;h<a.length;h++)if(gn(f,a[h]))return!0;return!1}function _s(f,a,h){const p=[];for(let _=0;_<f.length;_++){const y=[];for(let b=0;b<f[_].length;b++){const F=Wr(f[_][b],h);ot(a,F),y.push(F)}p.push(y)}return p}function vn(f,a,h){const p=[];for(let _=0;_<f.length;_++){const y=_s(f[_],a,h);p.push(y)}return p}function ao(f,a,h,p){if(f[0]<h[0]||f[0]>h[2]){const _=.5*p;let y=f[0]-h[0]>_?-p:h[0]-f[0]>_?p:0;y===0&&(y=f[0]-h[2]>_?-p:h[2]-f[0]>_?p:0),f[0]+=y}ot(a,f)}function Zs(f,a,h,p){const _=Math.pow(2,p.z)*Tn,y=[p.x*Tn,p.y*Tn],b=[];if(!f)return b;for(const F of f)for(const z of F){const V=[z.x+y[0],z.y+y[1]];ao(V,a,h,_),b.push(V)}return b}function Yo(f,a,h,p){const _=Math.pow(2,p.z)*Tn,y=[p.x*Tn,p.y*Tn],b=[];if(!f)return b;for(const z of f){const V=[];for(const T of z){const D=[T.x+y[0],T.y+y[1]];ot(a,D),V.push(D)}b.push(V)}if(a[2]-a[0]<=_/2){(F=a)[0]=F[1]=1/0,F[2]=F[3]=-1/0;for(const z of b)for(const V of z)ao(V,a,h,_)}var F;return b}class nl{constructor(a,h){this.type=Li,this.geojson=a,this.geometries=h}static parse(a,h){if(a.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(fa(a[1])){const p=a[1];if(p.type==="FeatureCollection")for(let _=0;_<p.features.length;++_){const y=p.features[_].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new nl(p,p.features[_].geometry)}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new nl(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new nl(p,p)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(h,p){const _=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=h.canonicalID();if(!b)return!1;if(p.type==="Polygon"){const F=_s(p.coordinates,y,b),z=Zs(h.geometry(),_,y,b);if(!St(_,y))return!1;for(const V of z)if(!gr(V,F))return!1}if(p.type==="MultiPolygon"){const F=vn(p.coordinates,y,b),z=Zs(h.geometry(),_,y,b);if(!St(_,y))return!1;for(const V of z)if(!Dr(V,F))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(h,p){const _=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],b=h.canonicalID();if(!b)return!1;if(p.type==="Polygon"){const F=_s(p.coordinates,y,b),z=Yo(h.geometry(),_,y,b);if(!St(_,y))return!1;for(const V of z)if(!gn(V,F))return!1}if(p.type==="MultiPolygon"){const F=vn(p.coordinates,y,b),z=Yo(h.geometry(),_,y,b);if(!St(_,y))return!1;for(const V of z)if(!Fi(V,F))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const il={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},io=1/298.257223563,Ga=io*(2-io),Ea=Math.PI/180;class Zo{static fromTile(a,h,p){const _=Math.PI*(1-2*(a+.5)/Math.pow(2,h)),y=Math.atan(.5*(Math.exp(_)-Math.exp(-_)))/Ea;return new Zo(y,p)}static get units(){return il}constructor(a,h){if(a===void 0)throw new Error("No latitude given.");if(h&&!il[h])throw new Error(`Unknown unit ${h}. Use one of: ${Object.keys(il).join(", ")}`);const p=6378.137*Ea*(h?il[h]:1),_=Math.cos(a*Ea),y=1/(1-Ga*(1-_*_)),b=Math.sqrt(y);this.kx=p*b*_,this.ky=p*b*y*(1-Ga)}distance(a,h){const p=cs(a[0]-h[0])*this.kx,_=(a[1]-h[1])*this.ky;return Math.sqrt(p*p+_*_)}bearing(a,h){const p=cs(h[0]-a[0])*this.kx;return Math.atan2(p,(h[1]-a[1])*this.ky)/Ea}destination(a,h,p){const _=p*Ea;return this.offset(a,Math.sin(_)*h,Math.cos(_)*h)}offset(a,h,p){return[a[0]+h/this.kx,a[1]+p/this.ky]}lineDistance(a){let h=0;for(let p=0;p<a.length-1;p++)h+=this.distance(a[p],a[p+1]);return h}area(a){let h=0;for(let p=0;p<a.length;p++){const _=a[p];for(let y=0,b=_.length,F=b-1;y<b;F=y++)h+=cs(_[y][0]-_[F][0])*(_[y][1]+_[F][1])*(p?-1:1)}return Math.abs(h)/2*this.kx*this.ky}along(a,h){let p=0;if(h<=0)return a[0];for(let _=0;_<a.length-1;_++){const y=a[_],b=a[_+1],F=this.distance(y,b);if(p+=F,p>h)return $i(y,b,(h-(p-F))/F)}return a[a.length-1]}pointToSegmentDistance(a,h,p){let[_,y]=h,b=cs(p[0]-_)*this.kx,F=(p[1]-y)*this.ky;if(b!==0||F!==0){const z=(cs(a[0]-_)*this.kx*b+(a[1]-y)*this.ky*F)/(b*b+F*F);z>1?(_=p[0],y=p[1]):z>0&&(_+=b/this.kx*z,y+=F/this.ky*z)}return b=cs(a[0]-_)*this.kx,F=(a[1]-y)*this.ky,Math.sqrt(b*b+F*F)}pointOnLine(a,h){let p=1/0,_=a[0][0],y=a[0][1],b=0,F=0;for(let z=0;z<a.length-1;z++){let V=a[z][0],T=a[z][1],D=cs(a[z+1][0]-V)*this.kx,H=(a[z+1][1]-T)*this.ky,O=0;D===0&&H===0||(O=(cs(h[0]-V)*this.kx*D+(h[1]-T)*this.ky*H)/(D*D+H*H),O>1?(V=a[z+1][0],T=a[z+1][1]):O>0&&(V+=D/this.kx*O,T+=H/this.ky*O)),D=cs(h[0]-V)*this.kx,H=(h[1]-T)*this.ky;const Q=D*D+H*H;Q<p&&(p=Q,_=V,y=T,b=z,F=O)}return{point:[_,y],index:b,t:Math.max(0,Math.min(1,F))}}lineSlice(a,h,p){let _=this.pointOnLine(p,a),y=this.pointOnLine(p,h);if(_.index>y.index||_.index===y.index&&_.t>y.t){const V=_;_=y,y=V}const b=[_.point],F=_.index+1,z=y.index;!ja(p[F],b[0])&&F<=z&&b.push(p[F]);for(let V=F+1;V<=z;V++)b.push(p[V]);return ja(p[z],y.point)||b.push(y.point),b}lineSliceAlong(a,h,p){let _=0;const y=[];for(let b=0;b<p.length-1;b++){const F=p[b],z=p[b+1],V=this.distance(F,z);if(_+=V,_>a&&y.length===0&&y.push($i(F,z,(a-(_-V))/V)),_>=h)return y.push($i(F,z,(h-(_-V))/V)),y;_>a&&y.push(z)}return y}bufferPoint(a,h){const p=h/this.ky,_=h/this.kx;return[a[0]-_,a[1]-p,a[0]+_,a[1]+p]}bufferBBox(a,h){const p=h/this.ky,_=h/this.kx;return[a[0]-_,a[1]-p,a[2]+_,a[3]+p]}insideBBox(a,h){return cs(a[0]-h[0])>=0&&cs(a[0]-h[2])<=0&&a[1]>=h[1]&&a[1]<=h[3]}}function ja(f,a){return f[0]===a[0]&&f[1]===a[1]}function $i(f,a,h){const p=cs(a[0]-f[0]);return[f[0]+p*h,f[1]+(a[1]-f[1])*h]}function cs(f){for(;f<-180;)f+=360;for(;f>180;)f-=360;return f}class la{constructor(a=[],h=(p,_)=>p<_?-1:p>_?1:0){if(this.data=a,this.length=this.data.length,this.compare=h,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:h,compare:p}=this,_=h[a];for(;a>0;){const y=a-1>>1,b=h[y];if(p(_,b)>=0)break;h[a]=b,a=y}h[a]=_}_down(a){const{data:h,compare:p}=this,_=this.length>>1,y=h[a];for(;a<_;){let b=1+(a<<1);const F=b+1;if(F<this.length&&p(h[F],h[b])<0&&(b=F),p(h[b],y)>=0)break;h[a]=h[b],a=b}h[a]=y}}var Jr=8192;function sc(f,a){return a.dist-f.dist}const bs=100,oc=50;function yl(f){const a=[1/0,1/0,-1/0,-1/0];if(a.length!==f.length)return!1;for(let h=0;h<a.length;h++)if(a[h]!==f[h])return!1;return!0}function $l(f){return f[1]-f[0]+1}function js(f,a){const h=f[1]>=f[0]&&f[1]<a;return h||console.warn("Distance Expression: Index is out of range"),h}function Jo(f,a){if(f[0]>f[1])return[null,null];const h=$l(f);if(a){if(h===2)return[f,null];const p=Math.floor(h/2);return[[f[0],f[0]+p],[f[0]+p,f[1]]]}{if(h===1)return[f,null];const p=Math.floor(h/2)-1;return[[f[0],f[0]+p],[f[0]+p+1,f[1]]]}}function Aa(f,a){const h=[1/0,1/0,-1/0,-1/0];if(!js(a,f.length))return h;for(let p=a[0];p<=a[1];++p)ot(h,f[p]);return h}function Pc(f){const a=[1/0,1/0,-1/0,-1/0];for(let h=0;h<f.length;++h)for(let p=0;p<f[h].length;++p)ot(a,f[h][p]);return a}function yr(f,a,h){if(yl(f)||yl(a))return NaN;let p=0,_=0;return f[2]<a[0]&&(p=a[0]-f[2]),f[0]>a[2]&&(p=f[0]-a[2]),f[1]>a[3]&&(_=f[1]-a[3]),f[3]<a[1]&&(_=a[1]-f[3]),h.distance([0,0],[p,_])}function jr(f){return 360*f-180}function xn(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function jn(f,a){const h=Math.pow(2,a.z),p=(f.y/Jr+a.y)/h;return[jr((f.x/Jr+a.x)/h),xn(p)]}function ts(f,a){const h=[];for(let p=0;p<f.length;++p)h.push(jn(f[p],a));return h}function bi(f,a,h){const p=h.pointOnLine(a,f).point;return h.distance(f,p)}function As(f,a,h,p,_){const y=h.slice(p[0],p[1]+1);let b=1/0;for(let F=a[0];F<=a[1];++F)if((b=Math.min(b,bi(f[F],y,_)))===0)return 0;return b}function us(f,a,h,p,_){const y=Math.min(_.pointToSegmentDistance(f,h,p),_.pointToSegmentDistance(a,h,p)),b=Math.min(_.pointToSegmentDistance(h,f,a),_.pointToSegmentDistance(p,f,a));return Math.min(y,b)}function bo(f,a,h,p,_){if(!js(a,f.length)||!js(p,h.length))return NaN;let y=1/0;for(let b=a[0];b<a[1];++b)for(let F=p[0];F<p[1];++F){if(An(f[b],f[b+1],h[F],h[F+1]))return 0;y=Math.min(y,us(f[b],f[b+1],h[F],h[F+1],_))}return y}function Xi(f,a,h,p,_){if(!js(a,f.length)||!js(p,h.length))return NaN;let y=1/0;for(let b=a[0];b<=a[1];++b)for(let F=p[0];F<=p[1];++F)if((y=Math.min(y,_.distance(f[b],h[F])))===0)return y;return y}function ks(f,a,h){if(gr(f,a,!0))return 0;let p=1/0;for(const _ of a){const y=_.length;if(y<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(_[0]!==_[y-1]&&(p=Math.min(p,h.pointToSegmentDistance(f,_[y-1],_[0])))===0||(p=Math.min(p,bi(f,_,h)))===0)return p}return p}function Ss(f,a,h,p){if(!js(a,f.length))return NaN;for(let y=a[0];y<=a[1];++y)if(gr(f[y],h,!0))return 0;let _=1/0;for(let y=a[0];y<a[1];++y)for(const b of h)for(let F=0,z=b.length,V=z-1;F<z;V=F++){if(An(f[y],f[y+1],b[V],b[F]))return 0;_=Math.min(_,us(f[y],f[y+1],b[V],b[F],p))}return _}function Us(f,a){for(const h of f)for(let p=0;p<=h.length-1;++p)if(gr(h[p],a,!0))return!0;return!1}function Js(f,a,h,p=1/0){const _=Pc(f),y=Pc(a);if(p!==1/0&&yr(_,y,h)>=p)return p;if(St(_,y)){if(Us(f,a))return 0}else if(Us(a,f))return 0;let b=p;for(const F of f)for(let z=0,V=F.length,T=V-1;z<V;T=z++)for(const D of a)for(let H=0,O=D.length,Q=O-1;H<O;Q=H++){if(An(F[T],F[z],D[Q],D[H]))return 0;b=Math.min(b,us(F[T],F[z],D[Q],D[H],h))}return b}function ea(f,a,h,p,_,y,b){if(y===null||b===null)return;const F=yr(Aa(p,y),Aa(_,b),h);F<a&&f.push({dist:F,range1:y,range2:b})}function ma(f,a,h,p,_=1/0){let y=Math.min(p.distance(f[0],h[0][0]),_);if(y===0)return y;const b=new la([{dist:0,range1:[0,f.length-1],range2:[0,0]}],sc),F=a?oc:bs,z=Pc(h);for(;b.length;){const V=b.pop();if(V.dist>=y)continue;const T=V.range1;if($l(T)<=F){if(!js(T,f.length))return NaN;if(a){const D=Ss(f,T,h,p);if((y=Math.min(y,D))===0)return y}else for(let D=T[0];D<=T[1];++D){const H=ks(f[D],h,p);if((y=Math.min(y,H))===0)return y}}else{const D=Jo(T,a);if(D[0]!==null){const H=yr(Aa(f,D[0]),z,p);H<y&&b.push({dist:H,range1:D[0],range2:[0,0]})}if(D[1]!==null){const H=yr(Aa(f,D[1]),z,p);H<y&&b.push({dist:H,range1:D[1],range2:[0,0]})}}}return y}function ta(f,a,h,p,_,y=1/0){let b=Math.min(y,_.distance(f[0],h[0]));if(b===0)return b;const F=new la([{dist:0,range1:[0,f.length-1],range2:[0,h.length-1]}],sc),z=a?oc:bs,V=p?oc:bs;for(;F.length;){const T=F.pop();if(T.dist>=b)continue;const D=T.range1,H=T.range2;if($l(D)<=z&&$l(H)<=V){if(!js(D,f.length)||!js(H,h.length))return NaN;if(a&&p?b=Math.min(b,bo(f,D,h,H,_)):a||p?a&&!p?b=Math.min(b,As(h,H,f,D,_)):!a&&p&&(b=Math.min(b,As(f,D,h,H,_))):b=Math.min(b,Xi(f,D,h,H,_)),b===0)return b}else{const O=Jo(D,a),Q=Jo(H,p);ea(F,b,_,f,h,O[0],Q[0]),ea(F,b,_,f,h,O[0],Q[1]),ea(F,b,_,f,h,O[1],Q[0]),ea(F,b,_,f,h,O[1],Q[1])}}return b}function ra(f,a,h,p,_=1/0){let y=_;const b=Aa(f,[0,f.length-1]);for(const F of h)if(!(y!==1/0&&yr(b,Aa(F,[0,F.length-1]),p)>=y)&&(y=Math.min(y,ta(f,a,F,!0,p,y)),y===0))return y;return y}function Gs(f,a,h,p,_=1/0){let y=_;const b=Aa(f,[0,f.length-1]);for(const F of h){if(y!==1/0&&yr(b,Pc(F),p)>=y)continue;const z=ma(f,a,F,p,y);if(isNaN(z))return z;if((y=Math.min(y,z))===0)return y}return y}function ga(f){return f==="Point"||f==="MultiPoint"||f==="LineString"||f==="MultiLineString"||f==="Polygon"||f==="MultiPolygon"}class hs{constructor(a,h){this.type=yn,this.geojson=a,this.geometries=h}static parse(a,h){if(a.length!==2)return h.error(`'distance' expression requires either one argument, but found ' ${a.length-1} instead.`);if(fa(a[1])){const p=a[1];if(p.type==="FeatureCollection"){for(let _=0;_<p.features.length;++_)if(ga(p.features[_].geometry.type))return new hs(p,p.features[_].geometry)}else if(p.type==="Feature"){if(ga(p.geometry.type))return new hs(p,p.geometry)}else if(ga(p.type))return new hs(p,p)}return h.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(a){const h=a.geometry(),p=a.canonicalID();if(h!=null&&p!=null){if(a.geometryType()==="Point")return function(_,y,b){const F=[];for(const V of _)for(const T of V)F.push(jn(T,y));const z=new Zo(F[0][1],"meters");return b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString"?ta(F,!1,b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",z):b.type==="MultiLineString"?ra(F,!1,b.coordinates,z):b.type==="Polygon"||b.type==="MultiPolygon"?Gs(F,!1,b.type==="Polygon"?[b.coordinates]:b.coordinates,z):null}(h,p,this.geometries);if(a.geometryType()==="LineString")return function(_,y,b){const F=[];for(const V of _){const T=[];for(const D of V)T.push(jn(D,y));F.push(T)}const z=new Zo(F[0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return ra(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",F,z);if(b.type==="MultiLineString"){let V=1/0;for(let T=0;T<b.coordinates.length;T++){const D=ra(b.coordinates[T],!0,F,z,V);if(isNaN(D))return D;if((V=Math.min(V,D))===0)return V}return V}if(b.type==="Polygon"||b.type==="MultiPolygon"){let V=1/0;for(let T=0;T<F.length;T++){const D=Gs(F[T],!0,b.type==="Polygon"?[b.coordinates]:b.coordinates,z,V);if(isNaN(D))return D;if((V=Math.min(V,D))===0)return V}return V}return null}(h,p,this.geometries);if(a.geometryType()==="Polygon")return function(_,y,b){const F=[];for(const V of function(T,D){const H=T.length;if(H<=1)return[T];const O=[];let Q,W;for(let re=0;re<H;re++){const he=Ke(T[re]);he!==0&&(T[re].area=Math.abs(he),W===void 0&&(W=he<0),W===he<0?(Q&&O.push(Q),Q=[T[re]]):Q.push(T[re]))}return Q&&O.push(Q),O}(_)){const T=[];for(let D=0;D<V.length;++D)T.push(ts(V[D],y));F.push(T)}const z=new Zo(F[0][0][0][1],"meters");if(b.type==="Point"||b.type==="MultiPoint"||b.type==="LineString")return Gs(b.type==="Point"?[b.coordinates]:b.coordinates,b.type==="LineString",F,z);if(b.type==="MultiLineString"){let V=1/0;for(let T=0;T<b.coordinates.length;T++){const D=Gs(b.coordinates[T],!0,F,z,V);if(isNaN(D))return D;if((V=Math.min(V,D))===0)return V}return V}return b.type==="Polygon"||b.type==="MultiPolygon"?function(V,T,D){let H=1/0;for(const O of V)for(const Q of T){const W=Js(O,Q,D,H);if(isNaN(W))return W;if((H=Math.min(H,W))===0)return H}return H}(b.type==="Polygon"?[b.coordinates]:b.coordinates,F,z):null}(h,p,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function ss(f,a){switch(f){case"string":return no(a);case"number":return+a;case"boolean":return!!a;case"color":return oi.parse(a);case"formatted":return Bo.fromString(no(a));case"resolvedImage":return Ys.fromString(no(a))}return a}function In(f,a,h,p){return p!==void 0&&(f=p*Math.round(f/p)),a!==void 0&&f<a&&(f=a),h!==void 0&&f>h&&(f=h),f}class gi{constructor(a,h,p){this.type=a,this.key=h,this.scope=p}static parse(a,h){let p=h.expectedType;if(p==null&&(p=fi),a.length<2||a.length>3)return h.error("Invalid number of arguments for 'config' expression.");const _=h.parse(a[1],1);if(!(_ instanceof $o))return h.error("Key name of 'config' expression must be a string literal.");if(a.length>=3){const y=h.parse(a[2],2);return y instanceof $o?new gi(p,no(_.value),no(y.value)):h.error("Scope of 'config' expression must be a string literal.")}return new gi(p,no(_.value))}evaluate(a){const h=[this.key,this.scope,a.scope].filter(Boolean).join(""),p=a.getConfig(h);if(!p)return null;const{type:_,value:y,values:b,minValue:F,maxValue:z,stepValue:V}=p,T=p.default.evaluate(a);let D=T;if(y){const H=a.scope;a.scope=(H||"").split("").slice(1).join(""),D=y.evaluate(a),a.scope=H}return _&&(D=ss(_,D)),D===void 0||F===void 0&&z===void 0&&V===void 0||(typeof D=="number"?D=In(D,F,z,V):Array.isArray(D)&&(D=D.map(H=>typeof H=="number"?In(H,F,z,V):H))),y!==void 0&&D!==void 0&&b&&!b.includes(D)&&(D=T,_&&(D=ss(_,D))),(_&&_!==this.type||D!==void 0&&xs(D)!==this.type)&&(D=ss(this.type.kind,D)),D}eachChild(){}outputDefined(){return!1}serialize(){const a=["config",this.key];return this.scope&&a.concat(this.key),a}}function lo(f){if(f instanceof xo&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof nl||f instanceof hs)return!1;let a=!0;return f.eachChild(h=>{a&&!lo(h)&&(a=!1)}),a}function eo(f){if(f instanceof xo&&f.name==="feature-state")return!1;let a=!0;return f.eachChild(h=>{a&&!eo(h)&&(a=!1)}),a}function ws(f){if(f instanceof gi)return new Set([f.key]);let a=new Set;return f.eachChild(h=>{a=new Set([...a,...ws(h)])}),a}function Yi(f,a){if(f instanceof xo&&a.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild(p=>{h&&!Yi(p,a)&&(h=!1)}),h}class ai{constructor(a,h){this.type=h.type,this.name=a,this.boundExpression=h}static parse(a,h){if(a.length!==2||typeof a[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const p=a[1];return h.scope.has(p)?new ai(p,h.scope.get(p)):h.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class qs{constructor(a,h=[],p,_=new Ks,y=[],b,F){this.registry=a,this.path=h,this.key=h.map(z=>typeof z=="string"?`['${z}']`:`[${z}]`).join(""),this.scope=_,this.errors=y,this.expectedType=p,this._scope=b,this.options=F}parse(a,h,p,_,y={}){return h||p?this.concat(h,null,p,_)._parse(a,y):this._parse(a,y)}parseObjectValue(a,h,p,_,y,b={}){return this.concat(h,p,_,y)._parse(a,b)}_parse(a,h){function p(_,y,b){return b==="assert"?new aa(y,[_]):b==="coerce"?new Wo(y,[_]):_}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=typeof a[0]=="string"?this.registry[a[0]]:void 0;if(_){let y=_.parse(a,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,F=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||F.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||F.kind!=="value"&&F.kind!=="string"){if(this.checkSubtype(b,F))return null}else y=p(y,b,h.typeAnnotation||"coerce");else y=p(y,b,h.typeAnnotation||"assert")}if(!(y instanceof $o)&&y.type.kind!=="resolvedImage"&&ac(y)){const b=new pa(this._scope,this.options);try{y=new $o(y.type,y.evaluate(b))}catch(F){return this.error(F.message),null}}return y}return Wo.parse(["to-array",a],this)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,h,p,_){let y=typeof a=="number"?this.path.concat(a):this.path;y=typeof h=="string"?y.concat(h):y;const b=_?this.scope.concat(_):this.scope;return new qs(this.registry,y,p||null,b,this.errors,this._scope,this.options)}error(a,...h){const p=`${this.key}${h.map(_=>`[${_}]`).join("")}`;this.errors.push(new Ns(p,a))}checkSubtype(a,h){const p=Ql(a,h);return p&&this.error(p),p}}var sl=qs;function ac(f){if(f instanceof ai)return ac(f.boundExpression);if(f instanceof xo&&f.name==="error"||f instanceof _o||f instanceof nl||f instanceof hs||f instanceof gi)return!1;const a=f instanceof Wo||f instanceof aa;let h=!0;return f.eachChild(p=>{h=a?h&&ac(p):h&&p instanceof $o}),!!h&&lo(f)&&Yi(f,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function ol(f,a){const h=f.length-1;let p,_,y=0,b=h,F=0;for(;y<=b;)if(F=Math.floor((y+b)/2),p=f[F],_=f[F+1],p<=a){if(F===h||a<_)return F;y=F+1}else{if(!(p>a))throw new Eo("Input is not a number.");b=F-1}return 0}class qa{constructor(a,h,p){this.type=a,this.input=h,this.labels=[],this.outputs=[];for(const[_,y]of p)this.labels.push(_),this.outputs.push(y)}static parse(a,h){if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");const p=h.parse(a[1],1,yn);if(!p)return null;const _=[];let y=null;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);for(let b=1;b<a.length;b+=2){const F=b===1?-1/0:a[b],z=a[b+1],V=b,T=b+1;if(typeof F!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(_.length&&_[_.length-1][0]>=F)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const D=h.parse(z,T,y);if(!D)return null;y=y||D.type,_.push([F,D])}return new qa(y,p,_)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=h[0])return p[0].evaluate(a);const y=h.length;return _>=h[y-1]?p[y-1].evaluate(a):p[ol(h,_)].evaluate(a)}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let h=0;h<this.labels.length;h++)h>0&&a.push(this.labels[h]),a.push(this.outputs[h].serialize());return a}}const Mc=.95047,lc=1.08883,so=4/29,zs=6/29,cc=3*zs*zs,jc=zs*zs*zs,vu=Math.PI/180,Sc=180/Math.PI;function nu(f){return f>jc?Math.pow(f,1/3):f/cc+so}function rh(f){return f>zs?f*f*f:cc*(f-so)}function Zh(f){return 255*(f<=.0031308?12.92*f:1.055*Math.pow(f,1/2.4)-.055)}function nh(f){return(f/=255)<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function bh(f){const a=nh(f.r),h=nh(f.g),p=nh(f.b),_=nu((.4124564*a+.3575761*h+.1804375*p)/Mc),y=nu((.2126729*a+.7151522*h+.072175*p)/1);return{l:116*y-16,a:500*(_-y),b:200*(y-nu((.0193339*a+.119192*h+.9503041*p)/lc)),alpha:f.a}}function xu(f){let a=(f.l+16)/116,h=isNaN(f.a)?a:a+f.a/500,p=isNaN(f.b)?a:a-f.b/200;return a=1*rh(a),h=Mc*rh(h),p=lc*rh(p),new oi(Zh(3.2404542*h-1.5371385*a-.4985314*p),Zh(-.969266*h+1.8760108*a+.041556*p),Zh(.0556434*h-.2040259*a+1.0572252*p),f.alpha)}function Jh(f,a,h){const p=a-f;return f+h*(p>180||p<-180?p-360*Math.round(p/360):p)}const kc={forward:bh,reverse:xu,interpolate:function(f,a,h){return{l:Sr(f.l,a.l,h),a:Sr(f.a,a.a,h),b:Sr(f.b,a.b,h),alpha:Sr(f.alpha,a.alpha,h)}}},wh={forward:function(f){const{l:a,a:h,b:p}=bh(f),_=Math.atan2(p,h)*Sc;return{h:_<0?_+360:_,c:Math.sqrt(h*h+p*p),l:a,alpha:f.a}},reverse:function(f){const a=f.h*vu,h=f.c;return xu({l:f.l,a:Math.cos(a)*h,b:Math.sin(a)*h,alpha:f.alpha})},interpolate:function(f,a,h){return{h:Jh(f.h,a.h,h),c:Sr(f.c,a.c,h),l:Sr(f.l,a.l,h),alpha:Sr(f.alpha,a.alpha,h)}}};var vd=Object.freeze({__proto__:null,hcl:wh,lab:kc});class Wl{constructor(a,h,p,_,y){this.type=a,this.operator=h,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(const[b,F]of y)this.labels.push(b),this.outputs.push(F)}static interpolationFactor(a,h,p,_){let y=0;if(a.name==="exponential")y=nf(h,a.base,p,_);else if(a.name==="linear")y=nf(h,1,p,_);else if(a.name==="cubic-bezier"){const b=a.controlPoints;y=new Zt(b[0],b[1],b[2],b[3]).solve(nf(h,1,p,_))}return y}static parse(a,h){let[p,_,y,...b]=a;if(!Array.isArray(_)||_.length===0)return h.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const V=_[1];if(typeof V!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:V}}else{if(_[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const V=_.slice(1);if(V.length!==4||V.some(T=>typeof T!="number"||T<0||T>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:V}}}if(a.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(y=h.parse(y,2,yn),!y)return null;const F=[];let z=null;p==="interpolate-hcl"||p==="interpolate-lab"?z=da:h.expectedType&&h.expectedType.kind!=="value"&&(z=h.expectedType);for(let V=0;V<b.length;V+=2){const T=b[V],D=b[V+1],H=V+3,O=V+4;if(typeof T!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(F.length&&F[F.length-1][0]>=T)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);const Q=h.parse(D,O,z);if(!Q)return null;z=z||Q.type,F.push([T,Q])}return z.kind==="number"||z.kind==="color"||z.kind==="array"&&z.itemType.kind==="number"&&typeof z.N=="number"?new Wl(z,p,_,y,F):h.error(`Type ${ps(z)} is not interpolatable.`)}evaluate(a){const h=this.labels,p=this.outputs;if(h.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=h[0])return p[0].evaluate(a);const y=h.length;if(_>=h[y-1])return p[y-1].evaluate(a);const b=ol(h,_),F=Wl.interpolationFactor(this.interpolation,_,h[b],h[b+1]),z=p[b].evaluate(a),V=p[b+1].evaluate(a);return this.operator==="interpolate"?Jn[this.type.kind.toLowerCase()](z,V,F):this.operator==="interpolate-hcl"?wh.reverse(wh.interpolate(wh.forward(z),wh.forward(V),F)):kc.reverse(kc.interpolate(kc.forward(z),kc.forward(V),F))}eachChild(a){a(this.input);for(const h of this.outputs)a(h)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const h=[this.operator,a,this.input.serialize()];for(let p=0;p<this.labels.length;p++)h.push(this.labels[p],this.outputs[p].serialize());return h}}function nf(f,a,h,p){const _=p-h,y=f-h;return _===0?0:a===1?y/_:(Math.pow(a,y)-1)/(Math.pow(a,_)-1)}class xd{constructor(a,h){this.type=a,this.args=h}static parse(a,h){if(a.length<2)return h.error("Expectected at least one argument.");let p=null;const _=h.expectedType;_&&_.kind!=="value"&&(p=_);const y=[];for(const F of a.slice(1)){const z=h.parse(F,1+y.length,p,void 0,{typeAnnotation:"omit"});if(!z)return null;p=p||z.type,y.push(z)}const b=_&&y.some(F=>Ql(_,F.type));return new xd(b?fi:p,y)}evaluate(a){let h,p=null,_=0;for(const y of this.args){if(_++,p=y.evaluate(a),p&&p instanceof Ys&&!p.available&&(h||(h=p),p=null,_===this.args.length))return h;if(p!==null)break}return p}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(h=>{a.push(h.serialize())}),a}}class _d{constructor(a,h){this.type=h.type,this.bindings=[].concat(a),this.result=h}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const h of this.bindings)a(h[1]);a(this.result)}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const p=[];for(let y=1;y<a.length-1;y+=2){const b=a[y];if(typeof b!="string")return h.error(`Expected string, but found ${typeof b} instead.`,y);if(/[^a-zA-Z0-9_]/.test(b))return h.error("Variable names must contain only alphanumeric characters or '_'.",y);const F=h.parse(a[y+1],y+1);if(!F)return null;p.push([b,F])}const _=h.parse(a[a.length-1],a.length-1,h.expectedType,p);return _?new _d(p,_):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[h,p]of this.bindings)a.push(h,p.serialize());return a.push(this.result.serialize()),a}}class bd{constructor(a,h,p){this.type=a,this.index=h,this.input=p}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,yn),_=h.parse(a[2],2,yo(h.expectedType||fi));return p&&_?new bd(_.type.itemType,p,_):null}evaluate(a){const h=this.index.evaluate(a),p=this.input.evaluate(a);if(h<0)throw new Eo(`Array index out of bounds: ${h} < 0.`);if(h>=p.length)throw new Eo(`Array index out of bounds: ${h} > ${p.length-1}.`);if(h!==Math.floor(h))throw new Eo(`Array index must be an integer, but found ${h} instead.`);return p[h]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class ih{constructor(a,h){this.type=Li,this.needle=a,this.haystack=h}static parse(a,h){if(a.length!==3)return h.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,fi),_=h.parse(a[2],2,fi);return p&&_?Hl(p.type,[Li,Yn,yn,Ro,fi])?new ih(p,_):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ps(p.type)} instead`):null}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(p==null)return!1;if(!Ma(h,["boolean","string","number","null"]))throw new Eo(`Expected first argument to be of type boolean, string, number or null, but found ${ps(xs(h))} instead.`);if(!Ma(p,["string","array"]))throw new Eo(`Expected second argument to be of type array or string, but found ${ps(xs(p))} instead.`);return p.indexOf(h)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class _u{constructor(a,h,p){this.type=yn,this.needle=a,this.haystack=h,this.fromIndex=p}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,fi),_=h.parse(a[2],2,fi);if(!p||!_)return null;if(!Hl(p.type,[Li,Yn,yn,Ro,fi]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ps(p.type)} instead`);if(a.length===4){const y=h.parse(a[3],3,yn);return y?new _u(p,_,y):null}return new _u(p,_)}evaluate(a){const h=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!Ma(h,["boolean","string","number","null"]))throw new Eo(`Expected first argument to be of type boolean, string, number or null, but found ${ps(xs(h))} instead.`);if(!Ma(p,["string","array"]))throw new Eo(`Expected second argument to be of type array or string, but found ${ps(xs(p))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(a);return p.indexOf(h,_)}return p.indexOf(h)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Dc{constructor(a,h,p,_,y,b){this.inputType=a,this.type=h,this.input=p,this.cases=_,this.outputs=y,this.otherwise=b}static parse(a,h){if(a.length<5)return h.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return h.error("Expected an even number of arguments.");let p,_;h.expectedType&&h.expectedType.kind!=="value"&&(_=h.expectedType);const y={},b=[];for(let V=2;V<a.length-1;V+=2){let T=a[V];const D=a[V+1];Array.isArray(T)||(T=[T]);const H=h.concat(V);if(T.length===0)return H.error("Expected at least one branch label.");for(const Q of T){if(typeof Q!="number"&&typeof Q!="string")return H.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return H.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return H.error("Numeric branch labels must be integer values.");if(p){if(H.checkSubtype(p,xs(Q)))return null}else p=xs(Q);if(y[String(Q)]!==void 0)return H.error("Branch labels must be unique.");y[String(Q)]=b.length}const O=h.parse(D,V,_);if(!O)return null;_=_||O.type,b.push(O)}const F=h.parse(a[1],1,fi);if(!F)return null;const z=h.parse(a[a.length-1],a.length-1,_);return z?F.type.kind!=="value"&&h.concat(1).checkSubtype(p,F.type)?null:new Dc(p,_,F,y,b,z):null}evaluate(a){const h=this.input.evaluate(a);return(xs(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],h=Object.keys(this.cases).sort(),p=[],_={};for(const b of h){const F=_[this.cases[b]];F===void 0?(_[this.cases[b]]=p.length,p.push([this.cases[b],[b]])):p[F][1].push(b)}const y=b=>this.inputType.kind==="number"?Number(b):b;for(const[b,F]of p)a.push(F.length===1?y(F[0]):F.map(y)),a.push(this.outputs[b].serialize());return a.push(this.otherwise.serialize()),a}}class Kl{constructor(a,h,p){this.type=a,this.branches=h,this.otherwise=p}static parse(a,h){if(a.length<4)return h.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return h.error("Expected an odd number of arguments.");let p;h.expectedType&&h.expectedType.kind!=="value"&&(p=h.expectedType);const _=[];for(let b=1;b<a.length-1;b+=2){const F=h.parse(a[b],b,Li);if(!F)return null;const z=h.parse(a[b+1],b+1,p);if(!z)return null;_.push([F,z]),p=p||z.type}const y=h.parse(a[a.length-1],a.length-1,p);return y?new Kl(p,_,y):null}evaluate(a){for(const[h,p]of this.branches)if(h.evaluate(a))return p.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[h,p]of this.branches)a(h),a(p);a(this.otherwise)}outputDefined(){return this.branches.every(([a,h])=>h.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(h=>{a.push(h.serialize())}),a}}class sh{constructor(a,h,p,_){this.type=a,this.input=h,this.beginIndex=p,this.endIndex=_}static parse(a,h){if(a.length<=2||a.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=h.parse(a[1],1,fi),_=h.parse(a[2],2,yn);if(!p||!_)return null;if(!Hl(p.type,[yo(fi),Yn,fi]))return h.error(`Expected first argument to be of type array or string, but found ${ps(p.type)} instead`);if(a.length===4){const y=h.parse(a[3],3,yn);return y?new sh(p.type,p,_,y):null}return new sh(p.type,p,_)}evaluate(a){const h=this.input.evaluate(a),p=this.beginIndex.evaluate(a);if(!Ma(h,["string","array"]))throw new Eo(`Expected first argument to be of type array or string, but found ${ps(xs(h))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(a);return h.slice(p,_)}return h.slice(p)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function zo(f,a){return f==="=="||f==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function qf(f,a,h,p){return p.compare(a,h)===0}function Ch(f,a,h){const p=f!=="=="&&f!=="!=";return class $V{constructor(y,b,F){this.type=Li,this.lhs=y,this.rhs=b,this.collator=F,this.hasUntypedArgument=y.type.kind==="value"||b.type.kind==="value"}static parse(y,b){if(y.length!==3&&y.length!==4)return b.error("Expected two or three arguments.");const F=y[0];let z=b.parse(y[1],1,fi);if(!z)return null;if(!zo(F,z.type))return b.concat(1).error(`"${F}" comparisons are not supported for type '${ps(z.type)}'.`);let V=b.parse(y[2],2,fi);if(!V)return null;if(!zo(F,V.type))return b.concat(2).error(`"${F}" comparisons are not supported for type '${ps(V.type)}'.`);if(z.type.kind!==V.type.kind&&z.type.kind!=="value"&&V.type.kind!=="value")return b.error(`Cannot compare types '${ps(z.type)}' and '${ps(V.type)}'.`);p&&(z.type.kind==="value"&&V.type.kind!=="value"?z=new aa(V.type,[z]):z.type.kind!=="value"&&V.type.kind==="value"&&(V=new aa(z.type,[V])));let T=null;if(y.length===4){if(z.type.kind!=="string"&&V.type.kind!=="string"&&z.type.kind!=="value"&&V.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(T=b.parse(y[3],3,Po),!T)return null}return new $V(z,V,T)}evaluate(y){const b=this.lhs.evaluate(y),F=this.rhs.evaluate(y);if(p&&this.hasUntypedArgument){const z=xs(b),V=xs(F);if(z.kind!==V.kind||z.kind!=="string"&&z.kind!=="number")throw new Eo(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${z.kind}, ${V.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const z=xs(b),V=xs(F);if(z.kind!=="string"||V.kind!=="string")return a(y,b,F)}return this.collator?h(y,b,F,this.collator.evaluate(y)):a(y,b,F)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[f];return this.eachChild(b=>{y.push(b.serialize())}),y}}}const Np=Ch("==",function(f,a,h){return a===h},qf),$f=Ch("!=",function(f,a,h){return a!==h},function(f,a,h,p){return!qf(0,a,h,p)}),vl=Ch("<",function(f,a,h){return a<h},function(f,a,h,p){return p.compare(a,h)<0}),Mo=Ch(">",function(f,a,h){return a>h},function(f,a,h,p){return p.compare(a,h)>0}),$a=Ch("<=",function(f,a,h){return a<=h},function(f,a,h,p){return p.compare(a,h)<=0}),Wf=Ch(">=",function(f,a,h){return a>=h},function(f,a,h,p){return p.compare(a,h)>=0});class Sh{constructor(a,h,p,_,y,b){this.type=Yn,this.number=a,this.locale=h,this.currency=p,this.unit=_,this.minFractionDigits=y,this.maxFractionDigits=b}static parse(a,h){if(a.length!==3)return h.error("Expected two arguments.");const p=h.parse(a[1],1,yn);if(!p)return null;const _=a[2];if(typeof _!="object"||Array.isArray(_))return h.error("NumberFormat options argument must be an object.");let y=null;if(_.locale&&(y=h.parseObjectValue(_.locale,2,"locale",Yn),!y))return null;let b=null;if(_.currency&&(b=h.parseObjectValue(_.currency,2,"currency",Yn),!b))return null;let F=null;if(_.unit&&(F=h.parseObjectValue(_.unit,2,"unit",Yn),!F))return null;let z=null;if(_["min-fraction-digits"]&&(z=h.parseObjectValue(_["min-fraction-digits"],2,"min-fraction-digits",yn),!z))return null;let V=null;return _["max-fraction-digits"]&&(V=h.parseObjectValue(_["max-fraction-digits"],2,"max-fraction-digits",yn),!V)?null:new Sh(p,y,b,F,z,V)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class Ta{constructor(a){this.type=yn,this.input=a}static parse(a,h){if(a.length!==2)return h.error(`Expected 1 argument, but found ${a.length-1} instead.`);const p=h.parse(a[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${ps(p.type)} instead.`):new Ta(p):null}evaluate(a){const h=this.input.evaluate(a);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Eo(`Expected value to be of type string or array, but found ${ps(xs(h))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(h=>{a.push(h.serialize())}),a}}function co(f){return function(){f=1831565813+(f|=0)|0;let a=Math.imul(f^f>>>15,1|f);return a=a+Math.imul(a^a>>>7,61|a)^a,((a^a>>>14)>>>0)/4294967296}}const nt={"==":Np,"!=":$f,">":Mo,"<":vl,">=":Wf,"<=":$a,array:aa,at:bd,boolean:aa,case:Kl,coalesce:xd,collator:_o,format:rl,image:Uo,in:ih,"index-of":_u,interpolate:Wl,"interpolate-hcl":Wl,"interpolate-lab":Wl,length:Ta,let:_d,literal:$o,match:Dc,number:aa,"number-format":Sh,object:aa,slice:sh,step:qa,string:aa,"to-boolean":Wo,"to-color":Wo,"to-number":Wo,"to-string":Wo,var:ai,within:nl,distance:hs,config:gi};function ge(f,[a,h,p,_]){a=a.evaluate(f),h=h.evaluate(f),p=p.evaluate(f);const y=_?_.evaluate(f):1,b=vo(a,h,p,y);if(b)throw new Eo(b);return new oi(a/255*y,h/255*y,p/255*y,y)}function ke(f,[a,h,p,_]){a=a.evaluate(f),h=h.evaluate(f),p=p.evaluate(f);const y=_?_.evaluate(f):1,b=function(V,T,D,H){return typeof V=="number"&&V>=0&&V<=360?typeof T=="number"&&T>=0&&T<=100&&typeof D=="number"&&D>=0&&D<=100?H===void 0||typeof H=="number"&&H>=0&&H<=1?null:`Invalid hsla value [${[V,T,D,H].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof H=="number"?[V,T,D,H]:[V,T,D]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof H=="number"?[V,T,D,H]:[V,T,D]).join(", ")}]: 'h' must be between 0 and 360.`}(a,h,p,y);if(b)throw new Eo(b);const F=`hsla(${a}, ${h}%, ${p}%, ${y})`,z=oi.parse(F);if(!z)throw new Eo(`Failed to parse HSLA color: ${F}`);return z}function rt(f,a){return f in a}function Kt(f,a){const h=a[f];return h===void 0?null:h}function Qr(f){return{type:f}}function Kn(f){return{result:"success",value:f}}function Ei(f){return{result:"error",value:f}}function ki(f,a){return!!f&&!!f.parameters&&f.parameters.indexOf(a)>-1}function Qs(f){return f["property-type"]==="data-driven"}function Oc(f){return ki(f.expression,"measure-light")}function Kf(f){return ki(f.expression,"zoom")}function Pp(f){return!!f.expression&&f.expression.interpolated}function wd(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function _A(f){return f}function bA(f,a){const h=a.type==="color",p=f.stops&&typeof f.stops[0][0]=="object",_=p||!(p||f.property!==void 0),y=f.type||(Pp(a)?"exponential":"interval");if(h&&((f=Bi({},f)).stops&&(f.stops=f.stops.map(V=>[V[0],oi.parse(V[1])])),f.default=oi.parse(f.default?f.default:a.default)),f.colorSpace&&f.colorSpace!=="rgb"&&!vd[f.colorSpace])throw new Error(`Unknown color space: ${f.colorSpace}`);let b,F,z;if(y==="exponential")b=CA;else if(y==="interval")b=wA;else if(y==="categorical"){b=ag,F=Object.create(null);for(const V of f.stops)F[V[0]]=V[1];z=typeof f.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);b=Mp}if(p){const V={},T=[];for(let O=0;O<f.stops.length;O++){const Q=f.stops[O],W=Q[0].zoom;V[W]===void 0&&(V[W]={zoom:W,type:f.type,property:f.property,default:f.default,stops:[]},T.push(W)),V[W].stops.push([Q[0].value,Q[1]])}const D=[];for(const O of T)D.push([V[O].zoom,bA(V[O],a)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:Wl.interpolationFactor.bind(void 0,H),zoomStops:D.map(O=>O[0]),evaluate:({zoom:O},Q)=>CA({stops:D,base:f.base},a,O).evaluate(O,Q)}}if(_){const V=y==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Wl.interpolationFactor.bind(void 0,V),zoomStops:f.stops.map(T=>T[0]),evaluate:({zoom:T})=>b(f,a,T,F,z)}}return{kind:"source",evaluate(V,T){const D=T&&T.properties?T.properties[f.property]:void 0;return D===void 0?sf(f.default,a.default):b(f,a,D,F,z)}}}function sf(f,a,h){return f!==void 0?f:a!==void 0?a:h!==void 0?h:void 0}function ag(f,a,h,p,_){return sf(typeof h===_?p[h]:void 0,f.default,a.default)}function wA(f,a,h){if(Va(h)!=="number")return sf(f.default,a.default);const p=f.stops.length;if(p===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[p-1][0])return f.stops[p-1][1];const _=ol(f.stops.map(y=>y[0]),h);return f.stops[_][1]}function CA(f,a,h){const p=f.base!==void 0?f.base:1;if(Va(h)!=="number")return sf(f.default,a.default);const _=f.stops.length;if(_===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[_-1][0])return f.stops[_-1][1];const y=ol(f.stops.map(T=>T[0]),h),b=function(T,D,H,O){const Q=O-H,W=T-H;return Q===0?0:D===1?W/Q:(Math.pow(D,W)-1)/(Math.pow(D,Q)-1)}(h,p,f.stops[y][0],f.stops[y+1][0]),F=f.stops[y][1],z=f.stops[y+1][1];let V=Jn[a.type]||_A;if(f.colorSpace&&f.colorSpace!=="rgb"){const T=vd[f.colorSpace];V=(D,H)=>T.reverse(T.interpolate(T.forward(D),T.forward(H),b))}return typeof F.evaluate=="function"?{evaluate(...T){const D=F.evaluate.apply(void 0,T),H=z.evaluate.apply(void 0,T);if(D!==void 0&&H!==void 0)return V(D,H,b)}}:V(F,z,b)}function Mp(f,a,h){return a.type==="color"?h=oi.parse(h):a.type==="formatted"?h=Bo.fromString(h.toString()):a.type==="resolvedImage"?h=Ys.fromString(h.toString()):Va(h)===a.type||a.type==="enum"&&a.values[h]||(h=void 0),sf(h,f.default,a.default)}xo.register(nt,{error:[{kind:"error"},[Yn],(f,[a])=>{throw new Eo(a.evaluate(f))}],typeof:[Yn,[fi],(f,[a])=>ps(xs(a.evaluate(f)))],"to-rgba":[yo(yn,4),[da],(f,[a])=>a.evaluate(f).toRenderColor(null).toArray()],rgb:[da,[yn,yn,yn],ge],rgba:[da,[yn,yn,yn,yn],ge],hsl:[da,[yn,yn,yn],ke],hsla:[da,[yn,yn,yn,yn],ke],has:{type:Li,overloads:[[[Yn],(f,[a])=>rt(a.evaluate(f),f.properties())],[[Yn,Ms],(f,[a,h])=>rt(a.evaluate(f),h.evaluate(f))]]},get:{type:fi,overloads:[[[Yn],(f,[a])=>Kt(a.evaluate(f),f.properties())],[[Yn,Ms],(f,[a,h])=>Kt(a.evaluate(f),h.evaluate(f))]]},"feature-state":[fi,[Yn],(f,[a])=>Kt(a.evaluate(f),f.featureState||{})],properties:[Ms,[],f=>f.properties()],"geometry-type":[Yn,[],f=>f.geometryType()],id:[fi,[],f=>f.id()],zoom:[yn,[],f=>f.globals.zoom],pitch:[yn,[],f=>f.globals.pitch||0],"distance-from-center":[yn,[],f=>f.distanceFromCenter()],"measure-light":[yn,[Yn],(f,[a])=>f.measureLight(a.evaluate(f))],"heatmap-density":[yn,[],f=>f.globals.heatmapDensity||0],"line-progress":[yn,[],f=>f.globals.lineProgress||0],"raster-value":[yn,[],f=>f.globals.rasterValue||0],"raster-particle-speed":[yn,[],f=>f.globals.rasterParticleSpeed||0],"sky-radial-progress":[yn,[],f=>f.globals.skyRadialProgress||0],accumulated:[fi,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[yn,Qr(yn),(f,a)=>{let h=0;for(const p of a)h+=p.evaluate(f);return h}],"*":[yn,Qr(yn),(f,a)=>{let h=1;for(const p of a)h*=p.evaluate(f);return h}],"-":{type:yn,overloads:[[[yn,yn],(f,[a,h])=>a.evaluate(f)-h.evaluate(f)],[[yn],(f,[a])=>-a.evaluate(f)]]},"/":[yn,[yn,yn],(f,[a,h])=>a.evaluate(f)/h.evaluate(f)],"%":[yn,[yn,yn],(f,[a,h])=>a.evaluate(f)%h.evaluate(f)],ln2:[yn,[],()=>Math.LN2],pi:[yn,[],()=>Math.PI],e:[yn,[],()=>Math.E],"^":[yn,[yn,yn],(f,[a,h])=>Math.pow(a.evaluate(f),h.evaluate(f))],sqrt:[yn,[yn],(f,[a])=>Math.sqrt(a.evaluate(f))],log10:[yn,[yn],(f,[a])=>Math.log(a.evaluate(f))/Math.LN10],ln:[yn,[yn],(f,[a])=>Math.log(a.evaluate(f))],log2:[yn,[yn],(f,[a])=>Math.log(a.evaluate(f))/Math.LN2],sin:[yn,[yn],(f,[a])=>Math.sin(a.evaluate(f))],cos:[yn,[yn],(f,[a])=>Math.cos(a.evaluate(f))],tan:[yn,[yn],(f,[a])=>Math.tan(a.evaluate(f))],asin:[yn,[yn],(f,[a])=>Math.asin(a.evaluate(f))],acos:[yn,[yn],(f,[a])=>Math.acos(a.evaluate(f))],atan:[yn,[yn],(f,[a])=>Math.atan(a.evaluate(f))],min:[yn,Qr(yn),(f,a)=>Math.min(...a.map(h=>h.evaluate(f)))],max:[yn,Qr(yn),(f,a)=>Math.max(...a.map(h=>h.evaluate(f)))],abs:[yn,[yn],(f,[a])=>Math.abs(a.evaluate(f))],round:[yn,[yn],(f,[a])=>{const h=a.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[yn,[yn],(f,[a])=>Math.floor(a.evaluate(f))],ceil:[yn,[yn],(f,[a])=>Math.ceil(a.evaluate(f))],"filter-==":[Li,[Yn,fi],(f,[a,h])=>f.properties()[a.value]===h.value],"filter-id-==":[Li,[fi],(f,[a])=>f.id()===a.value],"filter-type-==":[Li,[Yn],(f,[a])=>f.geometryType()===a.value],"filter-<":[Li,[Yn,fi],(f,[a,h])=>{const p=f.properties()[a.value],_=h.value;return typeof p==typeof _&&p<_}],"filter-id-<":[Li,[fi],(f,[a])=>{const h=f.id(),p=a.value;return typeof h==typeof p&&h<p}],"filter->":[Li,[Yn,fi],(f,[a,h])=>{const p=f.properties()[a.value],_=h.value;return typeof p==typeof _&&p>_}],"filter-id->":[Li,[fi],(f,[a])=>{const h=f.id(),p=a.value;return typeof h==typeof p&&h>p}],"filter-<=":[Li,[Yn,fi],(f,[a,h])=>{const p=f.properties()[a.value],_=h.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[Li,[fi],(f,[a])=>{const h=f.id(),p=a.value;return typeof h==typeof p&&h<=p}],"filter->=":[Li,[Yn,fi],(f,[a,h])=>{const p=f.properties()[a.value],_=h.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[Li,[fi],(f,[a])=>{const h=f.id(),p=a.value;return typeof h==typeof p&&h>=p}],"filter-has":[Li,[fi],(f,[a])=>a.value in f.properties()],"filter-has-id":[Li,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Li,[yo(Yn)],(f,[a])=>a.value.indexOf(f.geometryType())>=0],"filter-id-in":[Li,[yo(fi)],(f,[a])=>a.value.indexOf(f.id())>=0],"filter-in-small":[Li,[Yn,yo(fi)],(f,[a,h])=>h.value.indexOf(f.properties()[a.value])>=0],"filter-in-large":[Li,[Yn,yo(fi)],(f,[a,h])=>function(p,_,y,b){for(;y<=b;){const F=y+b>>1;if(_[F]===p)return!0;_[F]>p?b=F-1:y=F+1}return!1}(f.properties()[a.value],h.value,0,h.value.length-1)],all:{type:Li,overloads:[[[Li,Li],(f,[a,h])=>a.evaluate(f)&&h.evaluate(f)],[Qr(Li),(f,a)=>{for(const h of a)if(!h.evaluate(f))return!1;return!0}]]},any:{type:Li,overloads:[[[Li,Li],(f,[a,h])=>a.evaluate(f)||h.evaluate(f)],[Qr(Li),(f,a)=>{for(const h of a)if(h.evaluate(f))return!0;return!1}]]},"!":[Li,[Li],(f,[a])=>!a.evaluate(f)],"is-supported-script":[Li,[Yn],(f,[a])=>{const h=f.globals&&f.globals.isSupportedScript;return!h||h(a.evaluate(f))}],upcase:[Yn,[Yn],(f,[a])=>a.evaluate(f).toUpperCase()],downcase:[Yn,[Yn],(f,[a])=>a.evaluate(f).toLowerCase()],concat:[Yn,Qr(fi),(f,a)=>a.map(h=>no(h.evaluate(f))).join("")],"resolved-locale":[Yn,[Po],(f,[a])=>a.evaluate(f).resolvedLocale()],random:[yn,[yn,yn,fi],(f,a)=>{const[h,p,_]=a.map(b=>b.evaluate(f));if(h>p||h===p)return h;let y;if(typeof _=="string")y=function(b){let F=0;if(b.length===0)return F;for(let z=0;z<b.length;z++)F=(F<<5)-F+b.charCodeAt(z),F|=0;return F}(_);else{if(typeof _!="number")throw new Eo(`Invalid seed input: ${_}`);y=_}return h+co(y)()*(p-h)}]});class bu{constructor(a,h,p,_){this.expression=a,this._warningHistory={},this._evaluator=new pa(p,_),this._defaultValue=h?function(y){return y.type==="color"&&(wd(y.default)||Array.isArray(y.default))?new oi(0,0,0,0):y.type==="color"?oi.parse(y.default)||null:y.default===void 0?null:y.default}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(a,h,p,_,y,b,F,z){return this._evaluator.globals=a,this._evaluator.feature=h,this._evaluator.featureState=p,this._evaluator.canonical=_||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b,this._evaluator.featureTileCoord=F||null,this._evaluator.featureDistanceData=z||null,this.expression.evaluate(this._evaluator)}evaluate(a,h,p,_,y,b,F,z){this._evaluator.globals=a,this._evaluator.feature=h||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=b||null,this._evaluator.featureTileCoord=F||null,this._evaluator.featureDistanceData=z||null;try{const V=this.expression.evaluate(this._evaluator);if(V==null||typeof V=="number"&&V!=V)return this._defaultValue;if(this._enumValues&&!(V in this._enumValues))throw new Eo(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(V)} instead.`);return V}catch(V){return this._warningHistory[V.message]||(this._warningHistory[V.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${V.message}`)),this._defaultValue}}}function Xf(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in nt}function of(f,a,h,p){const _=new sl(nt,[],a?function(b){const F={color:da,string:Yn,number:yn,enum:Yn,boolean:Li,formatted:zl,resolvedImage:oa};return b.type==="array"?yo(F[b.value]||fi,b.length):F[b.type]}(a):void 0,void 0,void 0,h,p),y=_.parse(f,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return y?Kn(new bu(y,a,h,p)):Ei(_.errors)}class af{constructor(a,h,p){this.kind=a,this._styleExpression=h,this.isLightConstant=p,this.isStateDependent=a!=="constant"&&!eo(h.expression),this.configDependencies=ws(h.expression)}evaluateWithoutErrorHandling(a,h,p,_,y,b){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,_,y,b)}evaluate(a,h,p,_,y,b){return this._styleExpression.evaluate(a,h,p,_,y,b)}}class w{constructor(a,h,p,_,y){this.kind=a,this.zoomStops=p,this._styleExpression=h,this.isStateDependent=a!=="camera"&&!eo(h.expression),this.isLightConstant=y,this.configDependencies=ws(h.expression),this.interpolationType=_}evaluateWithoutErrorHandling(a,h,p,_,y,b){return this._styleExpression.evaluateWithoutErrorHandling(a,h,p,_,y,b)}evaluate(a,h,p,_,y,b){return this._styleExpression.evaluate(a,h,p,_,y,b)}interpolationFactor(a,h,p){return this.interpolationType?Wl.interpolationFactor(this.interpolationType,a,h,p):0}}function L(f,a,h,p){if((f=of(f,a,h,p)).result==="error")return f;const _=f.value.expression,y=lo(_);if(!y&&!Qs(a))return Ei([new Ns("","data expressions not supported")]);const b=Yi(_,["zoom","pitch","distance-from-center"]);if(!b&&!Kf(a))return Ei([new Ns("","zoom expressions not supported")]);const F=Yi(_,["measure-light"]);if(!F&&!Oc(a))return Ei([new Ns("","measure-light expression not supported")]);const z=a.expression&&a.expression.relaxZoomRestriction,V=ee(_);return V||b||z?V instanceof Ns?Ei([V]):V instanceof Wl&&!Pp(a)?Ei([new Ns("",'"interpolate" expressions cannot be used with this property')]):Kn(V?new w(y?"camera":"composite",f.value,V.labels,V instanceof Wl?V.interpolation:void 0,F):new af(y?"constant":"source",f.value,F)):Ei([new Ns("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class G{constructor(a,h){this._parameters=a,this._specification=h,Bi(this,bA(this._parameters,this._specification))}static deserialize(a){return new G(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function ee(f){let a=null;if(f instanceof _d)a=ee(f.result);else if(f instanceof xd){for(const h of f.args)if(a=ee(h),a)break}else(f instanceof qa||f instanceof Wl)&&f.input instanceof xo&&f.input.name==="zoom"&&(a=f);return a instanceof Ns||f.eachChild(h=>{const p=ee(h);p instanceof Ns?a=p:a&&p&&a!==p&&(a=new Ns("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}var Ae,Ce,Ie=function(){if(Ce)return Ae;Ce=1,Ae=a;var f=3;function a(h,p,_){var y=this.cells=[];if(h instanceof ArrayBuffer){this.arrayBuffer=h;var b=new Int32Array(this.arrayBuffer);h=b[0],this.d=(p=b[1])+2*(_=b[2]);for(var F=0;F<this.d*this.d;F++){var z=b[f+F],V=b[f+F+1];y.push(z===V?null:b.subarray(z,V))}var T=b[f+y.length+1];this.keys=b.subarray(b[f+y.length],T),this.bboxes=b.subarray(T),this.insert=this._insertReadonly}else{this.d=p+2*_;for(var D=0;D<this.d*this.d;D++)y.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=h,this.padding=_,this.scale=p/h,this.uid=0;var H=_/p*h;this.min=-H,this.max=h+H}return a.prototype.insert=function(h,p,_,y,b){this._forEachCell(p,_,y,b,this._insertCell,this.uid++),this.keys.push(h),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(y),this.bboxes.push(b)},a.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},a.prototype._insertCell=function(h,p,_,y,b,F){this.cells[b].push(F)},a.prototype.query=function(h,p,_,y,b){var F=this.min,z=this.max;if(h<=F&&p<=F&&z<=_&&z<=y&&!b)return Array.prototype.slice.call(this.keys);var V=[];return this._forEachCell(h,p,_,y,this._queryCell,V,{},b),V},a.prototype._queryCell=function(h,p,_,y,b,F,z,V){var T=this.cells[b];if(T!==null)for(var D=this.keys,H=this.bboxes,O=0;O<T.length;O++){var Q=T[O];if(z[Q]===void 0){var W=4*Q;(V?V(H[W+0],H[W+1],H[W+2],H[W+3]):h<=H[W+2]&&p<=H[W+3]&&_>=H[W+0]&&y>=H[W+1])?(z[Q]=!0,F.push(D[Q])):z[Q]=!1}}},a.prototype._forEachCell=function(h,p,_,y,b,F,z,V){for(var T=this._convertToCellCoord(h),D=this._convertToCellCoord(p),H=this._convertToCellCoord(_),O=this._convertToCellCoord(y),Q=T;Q<=H;Q++)for(var W=D;W<=O;W++){var re=this.d*W+Q;if((!V||V(this._convertFromCellCoord(Q),this._convertFromCellCoord(W),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(W+1)))&&b.call(this,h,p,_,y,re,F,z,V))return}},a.prototype._convertFromCellCoord=function(h){return(h-this.padding)/this.scale},a.prototype._convertToCellCoord=function(h){return Math.max(0,Math.min(this.d-1,Math.floor(h*this.scale)+this.padding))},a.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var h=this.cells,p=f+this.cells.length+1+1,_=0,y=0;y<this.cells.length;y++)_+=this.cells[y].length;var b=new Int32Array(p+_+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;for(var F=p,z=0;z<h.length;z++){var V=h[z];b[f+z]=F,b.set(V,F),F+=V.length}return b[f+h.length]=F,b.set(this.keys,F),b[f+h.length+1]=F+=this.keys.length,b.set(this.bboxes,F),F+=this.bboxes.length,b.buffer},Ae}(),Ne=A(Ie);const Me={};function Pe(f,a,h={}){Object.defineProperty(f,"_classRegistryKey",{value:a,writable:!1}),Me[a]={klass:f,omit:h.omit||[]}}Pe(Object,"Object"),Ne.serialize=function(f,a){const h=f.toArrayBuffer();return a&&a.add(h),{buffer:h}},Ne.deserialize=function(f){return new Ne(f.buffer)},Object.defineProperty(Ne,"name",{value:"Grid"}),Pe(Ne,"Grid"),Pe(oi,"Color"),Pe(Error,"Error"),Pe(Bo,"Formatted"),Pe(Xs,"FormattedSection"),Pe(Gi,"AJAXError"),Pe(Ys,"ResolvedImage"),Pe(G,"StylePropertyFunction"),Pe(bu,"StyleExpression",{omit:["_evaluator"]}),Pe(w,"ZoomDependentExpression"),Pe(af,"ZoomConstantExpression"),Pe(xo,"CompoundExpression",{omit:["_evaluate"]});for(const f in nt)Me[nt[f]._classRegistryKey]||Pe(nt[f],`Expression${f}`);function lt(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Lt(f){return self.ImageBitmap&&f instanceof ImageBitmap}function Bt(f,a){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp)return f;if(lt(f)||Lt(f))return a&&a.add(f),f;if(ArrayBuffer.isView(f)){const h=f;return a&&a.add(h.buffer),h}if(f instanceof ImageData)return a&&a.add(f.data.buffer),f;if(Array.isArray(f)){const h=[];for(const p of f)h.push(Bt(p,a));return h}if(f instanceof Map){const h={$name:"Map"};for(const[p,_]of f.entries())h[p]=Bt(_);return h}if(f instanceof Set){const h={$name:"Set"};let p=0;for(const _ of f.values())h[++p]=Bt(_);return h}if(typeof f=="object"){const h=f.constructor,p=h._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${p}`);const _=h.serialize?h.serialize(f,a):{};if(!h.serialize){for(const y in f)f.hasOwnProperty(y)&&(Me[p].omit.indexOf(y)>=0||(_[y]=Bt(f[y],a)));f instanceof Error&&(_.message=f.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(_.$name=p),_}throw new Error("can't serialize object of type "+typeof f)}function xt(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||lt(f)||Lt(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map(xt);if(typeof f=="object"){const a=f.$name||"Object";if(a==="Map"){const _=new Map;for(const y of Object.keys(f))y!=="$name"&&_.set(y,xt(f[y]));return _}if(a==="Set"){const _=new Set;for(const y of Object.keys(f))y!=="$name"&&_.add(xt(f[y]));return _}const{klass:h}=Me[a];if(!h)throw new Error(`can't deserialize unregistered class ${a}`);if(h.deserialize)return h.deserialize(f);const p=Object.create(h.prototype);for(const _ of Object.keys(f))_!=="$name"&&(p[_]=xt(f[_]));return p}throw new Error("can't deserialize object of type "+typeof f)}const Pt={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519,"CJK Unified Ideographs Extension B":f=>f>=131072&&f<=173791};function Qt(f){for(const a of f)if(cr(a.charCodeAt(0)))return!0;return!1}function ct(f){for(const a of f)if(!mt(a.charCodeAt(0)))return!1;return!0}function mt(f){return!(Pt.Arabic(f)||Pt["Arabic Supplement"](f)||Pt["Arabic Extended-A"](f)||Pt["Arabic Presentation Forms-A"](f)||Pt["Arabic Presentation Forms-B"](f))}function cr(f){return!(f!==746&&f!==747&&(f<4352||!(Pt["Bopomofo Extended"](f)||Pt.Bopomofo(f)||Pt["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Pt["CJK Compatibility Ideographs"](f)||Pt["CJK Compatibility"](f)||Pt["CJK Radicals Supplement"](f)||Pt["CJK Strokes"](f)||!(!Pt["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Pt["CJK Unified Ideographs Extension A"](f)||Pt["CJK Unified Ideographs"](f)||Pt["Enclosed CJK Letters and Months"](f)||Pt["Hangul Compatibility Jamo"](f)||Pt["Hangul Jamo Extended-A"](f)||Pt["Hangul Jamo Extended-B"](f)||Pt["Hangul Jamo"](f)||Pt["Hangul Syllables"](f)||Pt.Hiragana(f)||Pt["Ideographic Description Characters"](f)||Pt.Kanbun(f)||Pt["Kangxi Radicals"](f)||Pt["Katakana Phonetic Extensions"](f)||Pt.Katakana(f)&&f!==12540||!(!Pt["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Pt["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Pt["Unified Canadian Aboriginal Syllabics"](f)||Pt["Unified Canadian Aboriginal Syllabics Extended"](f)||Pt["Vertical Forms"](f)||Pt["Yijing Hexagram Symbols"](f)||Pt["Yi Syllables"](f)||Pt["Yi Radicals"](f))))}function mr(f){return!(cr(f)||function(a){return!!(Pt["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||Pt["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||Pt["Letterlike Symbols"](a)||Pt["Number Forms"](a)||Pt["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||Pt["Control Pictures"](a)&&a!==9251||Pt["Optical Character Recognition"](a)||Pt["Enclosed Alphanumerics"](a)||Pt["Geometric Shapes"](a)||Pt["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||Pt["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||Pt["CJK Symbols and Punctuation"](a)||Pt.Katakana(a)||Pt["Private Use Area"](a)||Pt["CJK Compatibility Forms"](a)||Pt["Small Form Variants"](a)||Pt["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(f))}function dr(f){return f>=1424&&f<=2303||Pt["Arabic Presentation Forms-A"](f)||Pt["Arabic Presentation Forms-B"](f)}function Yr(f,a){return!(!a&&dr(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Pt.Khmer(f))}function Or(f){for(const a of f)if(dr(a.charCodeAt(0)))return!0;return!1}const bn="deferred",zr="loading",ui="loaded";let pi=null,Vn="unavailable",ei=null;const Mi=function(f){f&&typeof f=="string"&&f.indexOf("NetworkError")>-1&&(Vn="error"),pi&&pi(f)};function Si(){zn.fire(new tr("pluginStateChange",{pluginStatus:Vn,pluginURL:ei}))}const zn=new Nn,ms=function(){return Vn},To=function(){if(Vn!==bn||!ei)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Vn=zr,Si(),ei&&Ul({url:ei},f=>{f?Mi(f):(Vn=ui,Si())})},Ri={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Vn===ui||Ri.applyArabicShaping!=null,isLoading:()=>Vn===zr,setState(f){Vn=f.pluginStatus,ei=f.pluginURL},isParsed:()=>Ri.applyArabicShaping!=null&&Ri.processBidirectionalText!=null&&Ri.processStyledBidirectionalText!=null,getPluginURL:()=>ei};class Ui{constructor(a,h){this.zoom=a,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.transition=h.transition,this.pitch=h.pitch,this.brightness=h.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(a){return function(h,p){for(const _ of h)if(!Yr(_.charCodeAt(0),p))return!1;return!0}(a,Ri.isLoaded())}}class yi{constructor(a,h,p,_){this.property=a,this.value=h,this.expression=function(y,b,F,z){if(wd(y))return new G(y,b);if(Xf(y)||Array.isArray(y)&&y.length>0){const V=L(y,b,F,z);if(V.result==="error")throw new Error(V.value.map(T=>`${T.key}: ${T.message}`).join(", "));return V.value}{let V=y;return typeof y=="string"&&b.type==="color"&&(V=oi.parse(y)),{kind:"constant",configDependencies:new Set,evaluate:()=>V}}}(h===void 0?a.specification.default:h,a.specification,p,_)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,h,p){return this.property.possiblyEvaluate(this,a,h,p)}}class Qo{constructor(a,h,p){this.property=a,this.value=new yi(a,void 0,h,p)}transitioned(a,h){return new Ds(this.property,this.value,h,an({},a.transition,this.transition),a.now)}untransitioned(){return new Ds(this.property,this.value,null,{},0)}}class Ko{constructor(a,h,p){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues),this._scope=h,this._options=p,this.configDependencies=new Set}getValue(a){return Hi(this._values[a].value.value)}setValue(a,h){this._values.hasOwnProperty(a)||(this._values[a]=new Qo(this._values[a].property,this._scope,this._options)),this._values[a].value=new yi(this._values[a].property,h===null?void 0:Hi(h),this._scope,this._options),this._values[a].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].value.expression.configDependencies]))}setTransitionOrValue(a,h){h&&(this._options=h);const p=this._properties.properties;if(a)for(const _ in a){const y=a[_];if(kn(_,"-transition")){const b=_.slice(0,-11);p[b]&&this.setTransition(b,y)}else p.hasOwnProperty(_)&&this.setValue(_,y)}}getTransition(a){return Hi(this._values[a].transition)}setTransition(a,h){this._values.hasOwnProperty(a)||(this._values[a]=new Qo(this._values[a].property)),this._values[a].transition=Hi(h)||void 0}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p);const _=this.getTransition(h);_!==void 0&&(a[`${h}-transition`]=_)}return a}transitioned(a,h){const p=new $s(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(a,h._values[_]);return p}untransitioned(){const a=new $s(this._properties);for(const h of Object.keys(this._values))a._values[h]=this._values[h].untransitioned();return a}}class Ds{constructor(a,h,p,_,y){const b=_.delay||0,F=_.duration||0;y=y||0,this.property=a,this.value=h,this.begin=y+b,this.end=this.begin+F,a.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(a,h,p){const _=a.now||0,y=this.value.possiblyEvaluate(a,h,p),b=this.prior;if(b){if(_>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(_<this.begin)return b.possiblyEvaluate(a,h,p);{const F=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(a,h,p),y,nr(F))}}return y}}class $s{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,h,p){const _=new ca(this._properties);for(const y of Object.keys(this._values))_._values[y]=this._values[y].possiblyEvaluate(a,h,p);return _}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Io{constructor(a,h,p){this._properties=a,this._values=Object.create(a.defaultPropertyValues),this._scope=h,this._options=p,this.configDependencies=new Set}getValue(a){return Hi(this._values[a].value)}setValue(a,h){this._values[a]=new yi(this._values[a].property,h===null?void 0:Hi(h),this._scope,this._options),this._values[a].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].expression.configDependencies]))}serialize(){const a={};for(const h of Object.keys(this._values)){const p=this.getValue(h);p!==void 0&&(a[h]=p)}return a}possiblyEvaluate(a,h,p){const _=new ca(this._properties);for(const y of Object.keys(this._values))_._values[y]=this._values[y].possiblyEvaluate(a,h,p);return _}}class jo{constructor(a,h,p){this.property=a,this.value=h,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,h,p,_){return this.property.evaluate(this.value,this.parameters,a,h,p,_)}}class ca{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Pr{constructor(a){this.specification=a}possiblyEvaluate(a,h){return a.expression.evaluate(h)}interpolate(a,h,p){const _=Jn[this.specification.type];return _?_(a,h,p):a}}class Ln{constructor(a,h){this.specification=a,this.overrides=h}possiblyEvaluate(a,h,p,_){return new jo(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(h,null,{},p,_)}:a.expression,h)}interpolate(a,h,p){if(a.value.kind!=="constant"||h.value.kind!=="constant")return a;if(a.value.value===void 0||h.value.value===void 0)return new jo(this,{kind:"constant",value:void 0},a.parameters);const _=Jn[this.specification.type];return _?new jo(this,{kind:"constant",value:_(a.value.value,h.value.value,p)},a.parameters):a}evaluate(a,h,p,_,y,b){return a.kind==="constant"?a.value:a.evaluate(h,p,_,y,b)}}class ya{constructor(a){this.specification=a}possiblyEvaluate(a,h,p,_){return!!a.expression.evaluate(h,null,{},p,_)}interpolate(){return!1}}class Bs{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const h=new Ui(0,{});for(const p in a){const _=a[p];_.specification.overridable&&this.overridableProperties.push(p);const y=this.defaultPropertyValues[p]=new yi(_,void 0),b=this.defaultTransitionablePropertyValues[p]=new Qo(_);this.defaultTransitioningPropertyValues[p]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=y.possiblyEvaluate(h)}}}Pe(Ln,"DataDrivenProperty"),Pe(Pr,"DataConstantProperty"),Pe(ya,"ColorRampProperty");var ur=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Zi(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Bh(f){if(Array.isArray(f))return f.map(Bh);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const a={};for(const h in f)a[h]=Bh(f[h]);return a}return Zi(f)}function lf(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const a of f.slice(1))if(!lf(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}function Rc(f,a="",h=null,p="fill"){if(f==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};lf(f)||(f=Cd(f));const _=f;let y=!0;try{y=function(D){if(!Wc(D))return D;let H=Bh(D);return uc(H),H=oh(H),H}(_)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(_,null,2)}
        `)}const b=ur[`filter_${p}`],F=of(y,b,a,h);let z=null;if(F.result==="error")throw new Error(F.value.map(D=>`${D.key}: ${D.message}`).join(", "));z=(D,H,O)=>F.value.evaluate(D,H,{},O);let V=null,T=null;if(y!==_){const D=of(_,b,a,h);if(D.result==="error")throw new Error(D.value.map(H=>`${H.key}: ${H.message}`).join(", "));V=(H,O,Q,W,re)=>D.value.evaluate(H,O,{},Q,void 0,void 0,W,re),T=!lo(D.value.expression)}return{filter:z,dynamicFilter:V||void 0,needGeometry:Kc(y),needFeature:!!T}}function oh(f){if(!Array.isArray(f))return f;const a=function(h){if(ka.has(h[0])){for(let p=1;p<h.length;p++)if(Wc(h[p]))return!0}return h}(f);return a===!0?a:a.map(h=>oh(h))}function uc(f){let a=!1;const h=[];if(f[0]==="case"){for(let p=1;p<f.length-1;p+=2)a=a||Wc(f[p]),h.push(f[p+1]);h.push(f[f.length-1])}else if(f[0]==="match"){a=a||Wc(f[1]);for(let p=2;p<f.length-1;p+=2)h.push(f[p+1]);h.push(f[f.length-1])}else if(f[0]==="step"){a=a||Wc(f[1]);for(let p=1;p<f.length-1;p+=2)h.push(f[p+1])}a&&(f.length=0,f.push("any",...h));for(let p=1;p<f.length;p++)uc(f[p])}function Wc(f){if(!Array.isArray(f))return!1;if((a=f[0])==="pitch"||a==="distance-from-center")return!0;var a;for(let h=1;h<f.length;h++)if(Wc(f[h]))return!0;return!1}const ka=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function iu(f,a){return f<a?-1:f>a?1:0}function Kc(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let a=1;a<f.length;a++)if(Kc(f[a]))return!0;return!1}function Cd(f){if(!f)return!0;const a=f[0];return f.length<=1?a!=="any":a==="=="?wu(f[1],f[2],"=="):a==="!="?ah(wu(f[1],f[2],"==")):a==="<"||a===">"||a==="<="||a===">="?wu(f[1],f[2],a):a==="any"?(h=f.slice(1),["any"].concat(h.map(Cd))):a==="all"?["all"].concat(f.slice(1).map(Cd)):a==="none"?["all"].concat(f.slice(1).map(Cd).map(ah)):a==="in"?Sd(f[1],f.slice(2)):a==="!in"?ah(Sd(f[1],f.slice(2))):a==="has"?su(f[1]):a!=="!has"||ah(su(f[1]));var h}function wu(f,a,h){switch(f){case"$type":return[`filter-type-${h}`,a];case"$id":return[`filter-id-${h}`,a];default:return[`filter-${h}`,f,a]}}function Sd(f,a){if(a.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(h=>typeof h!=typeof a[0])?["filter-in-large",f,["literal",a.sort(iu)]]:["filter-in-small",f,["literal",a]]}}function su(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function ah(f){return["!",f]}const Xc="";function Cu(f,a){return a?`${f}${Xc}${a}`:f}const ou="-transition",lg=new Set(["fill","line","background","hillshade","raster"]);class Wa extends Nn{constructor(a,h,p,_,y){if(super(),this.id=a.id,this.fqid=Cu(this.id,p),this.type=a.type,this.scope=p,this.lut=_,this.options=y,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&a.type!=="sky"&&a.type!=="slot"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),a.slot&&(this.slot=a.slot),h.layout&&(this._unevaluatedLayout=new Io(h.layout,this.scope,y),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),h.paint)){this._transitionablePaint=new Ko(h.paint,this.scope,y);for(const b in a.paint)this.setPaintProperty(b,a.paint[b]);for(const b in a.layout)this.setLayoutProperty(b,a.layout[b]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ca(h.paint)}}onAdd(a){}onRemove(a){}isDraped(a){return!this.is3D()&&lg.has(this.type)}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,h){if(this.type==="custom"&&a==="visibility")return void(this.visibility=h);const p=this._unevaluatedLayout;p._properties.properties[a]&&(p.setValue(a,h),this.configDependencies=new Set([...this.configDependencies,...p.configDependencies]),a==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(a){return kn(a,ou)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,h){const p=this._transitionablePaint,_=p._properties.properties;if(kn(a,ou)){const D=a.slice(0,-11);return _[D]&&p.setTransition(D,h||void 0),!1}if(!_[a])return!1;const y=p._values[a],b=y.value.isDataDriven(),F=y.value;p.setValue(a,h),this.configDependencies=new Set([...this.configDependencies,...p.configDependencies]),this._handleSpecialPaintPropertyUpdate(a);const z=p._values[a].value,V=z.isDataDriven(),T=kn(a,"pattern")||a==="line-dasharray";return V||b||T||this._handleOverridablePaintPropertyUpdate(a,F,z)}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getDefaultProgramParams(a,h,p){return null}_handleOverridablePaintPropertyUpdate(a,h,p){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,h){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,h)}serialize(){return Un({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const a in this.paint._values){const h=this.paint.get(a);if(h instanceof jo&&Qs(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}compileFilter(a){this._filterCompiled||(this._featureFilter=Rc(this.filter,this.scope,a),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(a){this._stats&&(a.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(a){}queryIntersectsFeature(a,h,p,_,y,b,F,z,V){}queryIntersectsMatchingFeature(a,h,p,_){}}const hc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class cf{constructor(a,h){this._structArray=a,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class uo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,h){return a._trim(),h&&(a.isTransferred=!0,h.add(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const h=Object.create(this.prototype);return h.arrayBuffer=a.arrayBuffer,h.length=a.length,h.capacity=a.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...a){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...a){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function os(f,a=1){let h=0,p=0;return{members:f.map(_=>{const y=hc[_.type].BYTES_PER_ELEMENT,b=h=Yf(h,Math.max(a,y)),F=_.components||1;return p=Math.max(p,y),h+=y*F,{name:_.name,type:_.type,components:F,offset:b}}),size:Yf(h,Math.max(p,a)),alignment:a}}function Yf(f,a){return Math.ceil(f/a)*a}class Bc extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const _=2*a;return this.int16[_+0]=h,this.int16[_+1]=p,a}}Bc.prototype.bytesPerElement=4,Pe(Bc,"StructArrayLayout2i4");class Bd extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const y=3*a;return this.int16[y+0]=h,this.int16[y+1]=p,this.int16[y+2]=_,a}}Bd.prototype.bytesPerElement=6,Pe(Bd,"StructArrayLayout3i6");class Su extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p,_)}emplace(a,h,p,_,y){const b=4*a;return this.int16[b+0]=h,this.int16[b+1]=p,this.int16[b+2]=_,this.int16[b+3]=y,a}}Su.prototype.bytesPerElement=8,Pe(Su,"StructArrayLayout4i8");class Bu extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,h,p,_,y)}emplace(a,h,p,_,y,b){const F=5*a;return this.int16[F+0]=h,this.int16[F+1]=p,this.int16[F+2]=_,this.int16[F+3]=y,this.int16[F+4]=b,a}}Bu.prototype.bytesPerElement=10,Pe(Bu,"StructArrayLayout5i10");class ed extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F){const z=this.length;return this.resize(z+1),this.emplace(z,a,h,p,_,y,b,F)}emplace(a,h,p,_,y,b,F,z){const V=6*a,T=12*a,D=3*a;return this.int16[V+0]=h,this.int16[V+1]=p,this.uint8[T+4]=_,this.uint8[T+5]=y,this.uint8[T+6]=b,this.uint8[T+7]=F,this.float32[D+2]=z,a}}ed.prototype.bytesPerElement=12,Pe(ed,"StructArrayLayout2i4ub1f12");class El extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p,_)}emplace(a,h,p,_,y){const b=4*a;return this.float32[b+0]=h,this.float32[b+1]=p,this.float32[b+2]=_,this.float32[b+3]=y,a}}El.prototype.bytesPerElement=16,Pe(El,"StructArrayLayout4f16");class Eu extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const y=3*a;return this.float32[y+0]=h,this.float32[y+1]=p,this.float32[y+2]=_,a}}Eu.prototype.bytesPerElement=12,Pe(Eu,"StructArrayLayout3f12");class lh extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,h,p,_,y)}emplace(a,h,p,_,y,b){const F=6*a,z=3*a;return this.uint16[F+0]=h,this.uint16[F+1]=p,this.uint16[F+2]=_,this.uint16[F+3]=y,this.float32[z+2]=b,a}}lh.prototype.bytesPerElement=12,Pe(lh,"StructArrayLayout4ui1f12");class Uc extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p,_)}emplace(a,h,p,_,y){const b=4*a;return this.uint16[b+0]=h,this.uint16[b+1]=p,this.uint16[b+2]=_,this.uint16[b+3]=y,a}}Uc.prototype.bytesPerElement=8,Pe(Uc,"StructArrayLayout4ui8");class Ed extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b){const F=this.length;return this.resize(F+1),this.emplace(F,a,h,p,_,y,b)}emplace(a,h,p,_,y,b,F){const z=6*a;return this.int16[z+0]=h,this.int16[z+1]=p,this.int16[z+2]=_,this.int16[z+3]=y,this.int16[z+4]=b,this.int16[z+5]=F,a}}Ed.prototype.bytesPerElement=12,Pe(Ed,"StructArrayLayout6i12");class td extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F,z,V,T,D,H){const O=this.length;return this.resize(O+1),this.emplace(O,a,h,p,_,y,b,F,z,V,T,D,H)}emplace(a,h,p,_,y,b,F,z,V,T,D,H,O){const Q=12*a;return this.int16[Q+0]=h,this.int16[Q+1]=p,this.int16[Q+2]=_,this.int16[Q+3]=y,this.uint16[Q+4]=b,this.uint16[Q+5]=F,this.uint16[Q+6]=z,this.uint16[Q+7]=V,this.int16[Q+8]=T,this.int16[Q+9]=D,this.int16[Q+10]=H,this.int16[Q+11]=O,a}}td.prototype.bytesPerElement=24,Pe(td,"StructArrayLayout4i4ui4i24");class Tl extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b){const F=this.length;return this.resize(F+1),this.emplace(F,a,h,p,_,y,b)}emplace(a,h,p,_,y,b,F){const z=10*a,V=5*a;return this.int16[z+0]=h,this.int16[z+1]=p,this.int16[z+2]=_,this.float32[V+2]=y,this.float32[V+3]=b,this.float32[V+4]=F,a}}Tl.prototype.bytesPerElement=20,Pe(Tl,"StructArrayLayout3i3f20");class uf extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint32[1*a+0]=h,a}}uf.prototype.bytesPerElement=4,Pe(uf,"StructArrayLayout1ul4");class Tu extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const _=2*a;return this.uint16[_+0]=h,this.uint16[_+1]=p,a}}Tu.prototype.bytesPerElement=4,Pe(Tu,"StructArrayLayout2ui4");class Td extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F,z,V,T,D,H,O){const Q=this.length;return this.resize(Q+1),this.emplace(Q,a,h,p,_,y,b,F,z,V,T,D,H,O)}emplace(a,h,p,_,y,b,F,z,V,T,D,H,O,Q){const W=20*a,re=10*a;return this.int16[W+0]=h,this.int16[W+1]=p,this.int16[W+2]=_,this.int16[W+3]=y,this.int16[W+4]=b,this.float32[re+3]=F,this.float32[re+4]=z,this.float32[re+5]=V,this.float32[re+6]=T,this.int16[W+14]=D,this.uint32[re+8]=H,this.uint16[W+18]=O,this.uint16[W+19]=Q,a}}Td.prototype.bytesPerElement=40,Pe(Td,"StructArrayLayout5i4f1i1ul2ui40");class ch extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F){const z=this.length;return this.resize(z+1),this.emplace(z,a,h,p,_,y,b,F)}emplace(a,h,p,_,y,b,F,z){const V=8*a;return this.int16[V+0]=h,this.int16[V+1]=p,this.int16[V+2]=_,this.int16[V+4]=y,this.int16[V+5]=b,this.int16[V+6]=F,this.int16[V+7]=z,a}}ch.prototype.bytesPerElement=16,Pe(ch,"StructArrayLayout3i2i2i16");class na extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,h,p,_,y)}emplace(a,h,p,_,y,b){const F=4*a,z=8*a;return this.float32[F+0]=h,this.float32[F+1]=p,this.float32[F+2]=_,this.int16[z+6]=y,this.int16[z+7]=b,a}}na.prototype.bytesPerElement=16,Pe(na,"StructArrayLayout2f1f2i16");class Id extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b){const F=this.length;return this.resize(F+1),this.emplace(F,a,h,p,_,y,b)}emplace(a,h,p,_,y,b,F){const z=20*a,V=5*a;return this.uint8[z+0]=h,this.uint8[z+1]=p,this.float32[V+1]=_,this.float32[V+2]=y,this.float32[V+3]=b,this.float32[V+4]=F,a}}Id.prototype.bytesPerElement=20,Pe(Id,"StructArrayLayout2ub4f20");class Ka extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,h,p)}emplace(a,h,p,_){const y=3*a;return this.uint16[y+0]=h,this.uint16[y+1]=p,this.uint16[y+2]=_,a}}Ka.prototype.bytesPerElement=6,Pe(Ka,"StructArrayLayout3ui6");class jp extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he,Se,Te,de,je){const Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he,Se,Te,de,je)}emplace(a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he,Se,Te,de,je,Ve){const et=30*a,dt=15*a,pt=60*a;return this.int16[et+0]=h,this.int16[et+1]=p,this.int16[et+2]=_,this.float32[dt+2]=y,this.float32[dt+3]=b,this.uint16[et+8]=F,this.uint16[et+9]=z,this.uint32[dt+5]=V,this.uint32[dt+6]=T,this.uint32[dt+7]=D,this.uint16[et+16]=H,this.uint16[et+17]=O,this.uint16[et+18]=Q,this.float32[dt+10]=W,this.float32[dt+11]=re,this.uint8[pt+48]=he,this.uint8[pt+49]=Se,this.uint8[pt+50]=Te,this.uint32[dt+13]=de,this.int16[et+28]=je,this.uint8[pt+58]=Ve,a}}jp.prototype.bytesPerElement=60,Pe(jp,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class hf extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he,Se,Te,de,je,Ve,et,dt,pt,at,Et,yt,Nt,zt,Gt,qt){const Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he,Se,Te,de,je,Ve,et,dt,pt,at,Et,yt,Nt,zt,Gt,qt)}emplace(a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he,Se,Te,de,je,Ve,et,dt,pt,at,Et,yt,Nt,zt,Gt,qt,Jt){const vr=20*a,rr=40*a,Br=80*a;return this.float32[vr+0]=h,this.float32[vr+1]=p,this.int16[rr+4]=_,this.int16[rr+5]=y,this.int16[rr+6]=b,this.int16[rr+7]=F,this.int16[rr+8]=z,this.int16[rr+9]=V,this.int16[rr+10]=T,this.int16[rr+11]=D,this.int16[rr+12]=H,this.uint16[rr+13]=O,this.uint16[rr+14]=Q,this.uint16[rr+15]=W,this.uint16[rr+16]=re,this.uint16[rr+17]=he,this.uint16[rr+18]=Se,this.uint16[rr+19]=Te,this.uint16[rr+20]=de,this.uint16[rr+21]=je,this.uint16[rr+22]=Ve,this.uint16[rr+23]=et,this.uint16[rr+24]=dt,this.uint16[rr+25]=pt,this.uint16[rr+26]=at,this.uint16[rr+27]=Et,this.uint32[vr+14]=yt,this.float32[vr+15]=Nt,this.float32[vr+16]=zt,this.float32[vr+17]=Gt,this.float32[vr+18]=qt,this.uint8[Br+76]=Jt,a}}hf.prototype.bytesPerElement=80,Pe(hf,"StructArrayLayout2f9i15ui1ul4f1ub80");class Ld extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.float32[1*a+0]=h,a}}Ld.prototype.bytesPerElement=4,Pe(Ld,"StructArrayLayout1f4");class Il extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y){const b=this.length;return this.resize(b+1),this.emplace(b,a,h,p,_,y)}emplace(a,h,p,_,y,b){const F=5*a;return this.float32[F+0]=h,this.float32[F+1]=p,this.float32[F+2]=_,this.float32[F+3]=y,this.float32[F+4]=b,a}}Il.prototype.bytesPerElement=20,Pe(Il,"StructArrayLayout5f20");class rd extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F){const z=this.length;return this.resize(z+1),this.emplace(z,a,h,p,_,y,b,F)}emplace(a,h,p,_,y,b,F,z){const V=7*a;return this.float32[V+0]=h,this.float32[V+1]=p,this.float32[V+2]=_,this.float32[V+3]=y,this.float32[V+4]=b,this.float32[V+5]=F,this.float32[V+6]=z,a}}rd.prototype.bytesPerElement=28,Pe(rd,"StructArrayLayout7f28");class au extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,h,p,_){const y=this.length;return this.resize(y+1),this.emplace(y,a,h,p,_)}emplace(a,h,p,_,y){const b=6*a;return this.uint32[3*a+0]=h,this.uint16[b+2]=p,this.uint16[b+3]=_,this.uint16[b+4]=y,a}}au.prototype.bytesPerElement=12,Pe(au,"StructArrayLayout1ul3ui12");class al extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint16[1*a+0]=h,a}}al.prototype.bytesPerElement=2,Pe(al,"StructArrayLayout1ui2");class ll extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h){const p=this.length;return this.resize(p+1),this.emplace(p,a,h)}emplace(a,h,p){const _=2*a;return this.float32[_+0]=h,this.float32[_+1]=p,a}}ll.prototype.bytesPerElement=8,Pe(ll,"StructArrayLayout2f8");class cl extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re){const he=this.length;return this.resize(he+1),this.emplace(he,a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re)}emplace(a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he){const Se=16*a;return this.float32[Se+0]=h,this.float32[Se+1]=p,this.float32[Se+2]=_,this.float32[Se+3]=y,this.float32[Se+4]=b,this.float32[Se+5]=F,this.float32[Se+6]=z,this.float32[Se+7]=V,this.float32[Se+8]=T,this.float32[Se+9]=D,this.float32[Se+10]=H,this.float32[Se+11]=O,this.float32[Se+12]=Q,this.float32[Se+13]=W,this.float32[Se+14]=re,this.float32[Se+15]=he,a}}cl.prototype.bytesPerElement=64,Pe(cl,"StructArrayLayout16f64");class Iu extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,h,p,_,y,b,F){const z=this.length;return this.resize(z+1),this.emplace(z,a,h,p,_,y,b,F)}emplace(a,h,p,_,y,b,F,z){const V=10*a,T=5*a;return this.uint16[V+0]=h,this.uint16[V+1]=p,this.uint16[V+2]=_,this.uint16[V+3]=y,this.float32[T+2]=b,this.float32[T+3]=F,this.float32[T+4]=z,a}}Iu.prototype.bytesPerElement=20,Pe(Iu,"StructArrayLayout4ui3f20");class Eh extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.int16[1*a+0]=h,a}}Eh.prototype.bytesPerElement=2,Pe(Eh,"StructArrayLayout1i2");class Fd extends uo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(a){const h=this.length;return this.resize(h+1),this.emplace(h,a)}emplace(a,h){return this.uint8[1*a+0]=h,a}}Fd.prototype.bytesPerElement=1,Pe(Fd,"StructArrayLayout1ub1");class SA extends cf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}SA.prototype.size=40;class Th extends Td{get(a){return new SA(this,a)}}Pe(Th,"CollisionBoxArray");class uh extends cf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}uh.prototype.size=60;class R1 extends jp{get(a){return new uh(this,a)}}Pe(R1,"PlacedSymbolArray");class bb extends cf{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(a){this._structArray.uint32[this._pos4+14]=a}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(a){this._structArray.float32[this._pos4+18]=a}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}bb.prototype.size=80;class U1 extends hf{get(a){return new bb(this,a)}}Pe(U1,"SymbolInstanceArray");class wb extends Ld{getoffsetX(a){return this.float32[1*a+0]}}Pe(wb,"GlyphOffsetArray");class M0 extends Bc{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}Pe(M0,"SymbolLineVertexArray");class Cb extends cf{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Cb.prototype.size=12;class Sb extends au{get(a){return new Cb(this,a)}}Pe(Sb,"FeatureIndexArray");class Bb extends Tu{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}Pe(Bb,"FillExtrusionCentroidArray");class Eb extends cf{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Eb.prototype.size=6;class z1 extends Bd{get(a){return new Eb(this,a)}}Pe(z1,"FillExtrusionWallArray");const pS=os([{name:"a_pos",components:2,type:"Int16"}],4),AS=os([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ia{constructor(a=[]){this.segments=a}_prepareSegment(a,h,p,_){let y=this.segments[this.segments.length-1];return a>Ia.MAX_VERTEX_ARRAY_LENGTH&&ti(`Max vertices per segment is ${Ia.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!y||y.vertexLength+a>Ia.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==_)&&(y={vertexOffset:h,primitiveOffset:p,vertexLength:0,primitiveLength:0},_!==void 0&&(y.sortKey=_),this.segments.push(y)),y}prepareSegment(a,h,p,_){return this._prepareSegment(a,h.length,p.length,_)}get(){return this.segments}destroy(){for(const a of this.segments)for(const h in a.vaos)a.vaos[h].destroy()}static simpleSegment(a,h,p,_){return new Ia([{vertexOffset:a,primitiveOffset:h,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function Tb(f,a){return 256*(f=Ir(Math.floor(f),0,255))+Ir(Math.floor(a),0,255)}Ia.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pe(Ia,"SegmentVector");const mS=os([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),gS=os([{name:"a_dash",components:4,type:"Uint16"}]);class cg{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(a,h,p,_){this.ids.push(Ib(a)),this.positions.push(h,p,_)}eachPosition(a,h){const p=Ib(a);let _=0,y=this.ids.length-1;for(;_<y;){const b=_+y>>1;this.ids[b]>=p?y=b:_=b+1}for(;this.ids[_]===p;)h(this.positions[3*_],this.positions[3*_+1],this.positions[3*_+2]),_++}static serialize(a,h){const p=new Float64Array(a.ids),_=new Uint32Array(a.positions);return BA(p,_,0,p.length-1),h&&(h.add(p.buffer),h.add(_.buffer)),{ids:p,positions:_}}static deserialize(a){const h=new cg;let p;h.ids=a.ids,h.positions=a.positions;for(const _ of h.ids)_!==p&&h.uniqueIds.push(_),p=_;return h.indexed=!0,h}}function Ib(f){const a=+f;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:er(String(f))}function BA(f,a,h,p){for(;h<p;){const _=f[h+p>>1];let y=h-1,b=p+1;for(;;){do y++;while(f[y]<_);do b--;while(f[b]>_);if(y>=b)break;j0(f,y,b),j0(a,3*y,3*b),j0(a,3*y+1,3*b+1),j0(a,3*y+2,3*b+2)}b-h<p-b?(BA(f,a,h,b),h=b+1):(BA(f,a,b+1,p),p=b)}}function j0(f,a,h){const p=f[a];f[a]=f[h],f[h]=p}Pe(cg,"FeaturePositionMap");class df{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,h){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,h),this.initialized=!0),!!this.location}set(a,h,p){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class kp extends df{constructor(a){super(a),this.current=0}set(a,h,p){this.fetchUniformLocation(a,h)&&this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}}class Yc extends df{constructor(a){super(a),this.current=0}set(a,h,p){this.fetchUniformLocation(a,h)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class Nd extends df{constructor(a){super(a),this.current=[0,0]}set(a,h,p){this.fetchUniformLocation(a,h)&&(p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1])))}}class Q1 extends df{constructor(a){super(a),this.current=[0,0,0]}set(a,h,p){this.fetchUniformLocation(a,h)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2])))}}class k0 extends df{constructor(a){super(a),this.current=[0,0,0,0]}set(a,h,p){this.fetchUniformLocation(a,h)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class H1 extends df{constructor(a){super(a),this.current=oi.transparent.toRenderColor(null)}set(a,h,p){this.fetchUniformLocation(a,h)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const Lb=new Float32Array(16);class ug extends df{constructor(a){super(a),this.current=Lb}set(a,h,p){if(this.fetchUniformLocation(a,h)){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let _=1;_<16;_++)if(p[_]!==this.current[_]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}}}const yS=new Float32Array(9),vS=new Float32Array(4);class V1 extends df{constructor(a){super(a),this.current=vS}set(a,h,p){if(this.fetchUniformLocation(a,h)){for(let _=0;_<4;_++)if(p[_]!==this.current[_]){this.current=p,this.gl.uniformMatrix2fv(this.location,!1,p);break}}}}function G1(f){return[Tb(255*f.r,255*f.g),Tb(255*f.b,255*f.a)]}class hg{constructor(a,h,p,_){this.value=a,this.uniformNames=h.map(y=>`u_${y}`),this.type=p,this.context=_}setUniform(a,h,p,_,y){const b=_.constantOr(this.value);h.set(a,y,b instanceof oi?b.toRenderColor(this.context.lut):b)}getBinding(a,h){return this.type==="color"?new H1(a):new Yc(a)}}class EA{constructor(a,h){this.uniformNames=h.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,h,p,_,y){const b=y==="u_pattern"||y==="u_dash"?this.pattern:y==="u_pixel_ratio"?this.pixelRatio:null;b&&h.set(a,y,b)}getBinding(a,h){return h==="u_pattern"||h==="u_dash"?new k0(a):new Yc(a)}}class Pd{constructor(a,h,p,_){this.expression=a,this.type=p,this.maxValue=0,this.paintVertexAttributes=h.map(y=>({name:`a_${y}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(a,h,p,_,y,b,F){const z=this.paintVertexArray.length,V=this.expression.evaluate(new Ui(0,{brightness:b}),h,{},y,_,F);this.paintVertexArray.resize(a),this._setPaintValue(z,a,V,this.context)}updatePaintArray(a,h,p,_,y,b,F){const z=this.expression.evaluate({zoom:0,brightness:F},p,_,void 0,y);this._setPaintValue(a,h,z,this.context)}_setPaintValue(a,h,p,_){if(this.type==="color"){const y=G1(p.toRenderColor(_.lut));for(let b=a;b<h;b++)this.paintVertexArray.emplace(b,y[0],y[1])}else{for(let y=a;y<h;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hh{constructor(a,h,p,_,y,b){this.expression=a,this.uniformNames=h.map(F=>`u_${F}_t`),this.type=p,this.useIntegerZoom=_,this.context=y,this.maxValue=0,this.paintVertexAttributes=h.map(F=>({name:`a_${F}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(a,h,p,_,y,b,F){const z=this.expression.evaluate(new Ui(this.context.zoom,{brightness:b}),h,{},y,_,F),V=this.expression.evaluate(new Ui(this.context.zoom+1,{brightness:b}),h,{},y,_,F),T=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(T,a,z,V,this.context)}updatePaintArray(a,h,p,_,y,b,F){const z=this.expression.evaluate({zoom:this.context.zoom,brightness:F},p,_,void 0,y),V=this.expression.evaluate({zoom:this.context.zoom+1,brightness:F},p,_,void 0,y);this._setPaintValue(a,h,z,V,this.context)}_setPaintValue(a,h,p,_,y){if(this.type==="color"){const b=G1(p.toRenderColor(y.lut)),F=G1(p.toRenderColor(y.lut));for(let z=a;z<h;z++)this.paintVertexArray.emplace(z,b[0],b[1],F[0],F[1])}else{for(let b=a;b<h;b++)this.paintVertexArray.emplace(b,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,h,p,_,y){const b=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,F=Ir(this.expression.interpolationFactor(b,this.context.zoom,this.context.zoom+1),0,1);h.set(a,y,F)}getBinding(a,h){return new Yc(a)}}class Md{constructor(a,h,p,_,y){this.expression=a,this.layerId=y,this.paintVertexAttributes=(p==="array"?gS:mS).members;for(let b=0;b<h.length;++b);this.paintVertexArray=new _}populatePaintArray(a,h,p,_){const y=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(y,a,h.patterns&&h.patterns[this.layerId],p)}updatePaintArray(a,h,p,_,y,b,F){this._setPaintValues(a,h,p.patterns&&p.patterns[this.layerId],b)}_setPaintValues(a,h,p,_){if(!_||!p)return;const y=_[p];if(!y)return;const{tl:b,br:F,pixelRatio:z}=y;for(let V=a;V<h;V++)this.paintVertexArray.emplace(V,b[0],b[1],F[0],F[1],z)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Dp{constructor(a,h,p=()=>!0){this.binders={},this._buffers=[],this.context=h;const _=[];for(const y in a.paint._values){const b=a.paint.get(y);if(!p(y)||!(b instanceof jo&&Qs(b.property.specification)))continue;const F=_S(y,a.type),z=b.value,V=b.property.specification.type,T=!!b.property.useIntegerZoom,D=y==="line-dasharray"||y.endsWith("pattern"),H=y==="line-dasharray"&&a.layout.get("line-cap").value.kind!=="constant";if(z.kind!=="constant"||H)if(z.kind==="source"||H||D){const O=v(y,V,"source");this.binders[y]=D?new Md(z,F,V,O,a.id):new Pd(z,F,V,O),_.push(`/a_${y}`)}else{const O=v(y,V,"composite");this.binders[y]=new hh(z,F,V,T,h,O),_.push(`/z_${y}`)}else this.binders[y]=D?new EA(z.value,F):new hg(z.value,F,V,h),_.push(`/u_${y}`)}this.cacheKey=_.sort().join("")}getMaxValue(a){const h=this.binders[a];return h instanceof Pd||h instanceof hh?h.maxValue:0}populatePaintArrays(a,h,p,_,y,b,F){for(const z in this.binders){const V=this.binders[z];V.context=this.context,(V instanceof Pd||V instanceof hh||V instanceof Md)&&V.populatePaintArray(a,h,p,_,y,b,F)}}setConstantPatternPositions(a){for(const h in this.binders){const p=this.binders[h];p instanceof EA&&p.setConstantPatternPositions(a)}}updatePaintArrays(a,h,p,_,y,b,F,z){let V=!1;const T=Object.keys(a),D=T.length!==0,H=D?T:h.uniqueIds;this.context.lut=y.lut;for(const O in this.binders){const Q=this.binders[O];if(Q.context=this.context,(Q instanceof Pd||Q instanceof hh||Q instanceof Md)&&(Q.expression.isStateDependent===!0||Q.expression.isLightConstant===!1)){const W=y.paint.get(O);Q.expression=W.value;for(const re of H){const he=a[re.toString()];h.eachPosition(re,(Se,Te,de)=>{const je=_.feature(Se);Q.updatePaintArray(Te,de,je,he,b,F,z)})}if(!D)for(const re of p.uniqueIds){const he=a[re.toString()];p.eachPosition(re,(Se,Te,de)=>{const je=_.feature(Se);Q.updatePaintArray(Te,de,je,he,b,F,z)})}V=!0}}return V}defines(){const a=[];for(const h in this.binders){const p=this.binders[h];(p instanceof hg||p instanceof EA)&&a.push(...p.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return a}getBinderAttributes(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof Pd||p instanceof hh||p instanceof Md)for(let _=0;_<p.paintVertexAttributes.length;_++)a.push(p.paintVertexAttributes[_].name)}return a}getBinderUniforms(){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof hg||p instanceof EA||p instanceof hh)for(const _ of p.uniformNames)a.push(_)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const h=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof hg||_ instanceof EA||_ instanceof hh)for(const y of _.uniformNames)h.push({name:y,property:p,binding:_.getBinding(a,y)})}return h}setUniforms(a,h,p,_,y){for(const{name:b,property:F,binding:z}of p)this.binders[F].setUniform(a,z,y,_.get(F),b)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const h=this.binders[a];(h instanceof Pd||h instanceof hh||h instanceof Md)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(a){for(const h in this.binders){const p=this.binders[h];(p instanceof Pd||p instanceof hh||p instanceof Md)&&p.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const h=this.binders[a];(h instanceof Pd||h instanceof hh||h instanceof Md)&&h.destroy()}}}class Zf{constructor(a,h,p=()=>!0){this.programConfigurations={};for(const _ of a)this.programConfigurations[_.id]=new Dp(_,h,p);this.needsUpload=!1,this._featureMap=new cg,this._featureMapWithoutIds=new cg,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(a,h,p,_,y,b,F,z){for(const V in this.programConfigurations)this.programConfigurations[V].populatePaintArrays(a,h,_,y,b,F,z);h.id!==void 0?this._featureMap.add(h.id,p,this._bufferOffset,a):(this._featureMapWithoutIds.add(this._idlessCounter,p,this._bufferOffset,a),this._idlessCounter+=1),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,h,p,_,y,b){for(const F of p)this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(a,this._featureMap,this._featureMapWithoutIds,h,F,_,y,b||0)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const xS={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function _S(f,a){return xS[f]||[f.replace(`${a}-`,"").replace(/-/g,"_")]}const bS={"line-pattern":{source:lh,composite:lh},"fill-pattern":{source:lh,composite:lh},"fill-extrusion-pattern":{source:lh,composite:lh},"line-dasharray":{source:Uc,composite:Uc}},Fb={color:{source:ll,composite:El},number:{source:Ld,composite:ll}};function v(f,a,h){const p=bS[f];return p&&p[h]||Fb[a][h]}Pe(hg,"ConstantBinder"),Pe(EA,"PatternConstantBinder"),Pe(Pd,"SourceExpressionBinder"),Pe(Md,"PatternCompositeBinder"),Pe(hh,"CompositeExpressionBinder"),Pe(Dp,"ProgramConfiguration",{omit:["_buffers"]}),Pe(Zf,"ProgramConfigurationSet");const l=Jr/Math.PI/2,d=5,x=6,E=16383,I=64,M=[I,32,16],q=-l,X=l;function ne(f,a,h,p=l){return h=vt(h),[f*Math.sin(h)*p,-a*p,f*Math.cos(h)*p]}function se(f,a,h){return ne(Math.cos(vt(f)),Math.sin(vt(f)),a,h)}const ye=63710088e-1,we=2*Math.PI*ye;class Ee{constructor(a,h){if(isNaN(a)||isNaN(h))throw new Error(`Invalid LngLat object: (${a}, ${h})`);if(this.lng=+a,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ee(Sn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const h=Math.PI/180,p=this.lat*h,_=a.lat*h,y=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((a.lng-this.lng)*h);return ye*Math.acos(Math.min(y,1))}toBounds(a=0){const h=360*a/40075017,p=h/Math.cos(Math.PI/180*this.lat);return new Ge({lng:this.lng-p,lat:this.lat-h},{lng:this.lng+p,lat:this.lat+h})}toEcef(a){return se(this.lat,this.lng,l+a*l/ye)}static convert(a){if(a instanceof Ee)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ee(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Ee(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ge{constructor(a,h){if(a)if(h)this.setSouthWest(a).setNorthEast(h);else if(a.length===4){const p=a;this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]])}else{const p=a;this.setSouthWest(p[0]).setNorthEast(p[1])}}setNorthEast(a){return this._ne=a instanceof Ee?new Ee(a.lng,a.lat):Ee.convert(a),this}setSouthWest(a){return this._sw=a instanceof Ee?new Ee(a.lng,a.lat):Ee.convert(a),this}extend(a){const h=this._sw,p=this._ne;let _,y;if(a instanceof Ee)_=a,y=a;else{if(!(a instanceof Ge))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Ge.convert(a)):this.extend(Ee.convert(a)):typeof a=="object"&&a!==null&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(Ee.convert(a)):this;if(_=a._sw,y=a._ne,!_||!y)return this}return h||p?(h.lng=Math.min(_.lng,h.lng),h.lat=Math.min(_.lat,h.lat),p.lng=Math.max(y.lng,p.lng),p.lat=Math.max(y.lat,p.lat)):(this._sw=new Ee(_.lng,_.lat),this._ne=new Ee(y.lng,y.lat)),this}getCenter(){return new Ee((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ee(this.getWest(),this.getNorth())}getSouthEast(){return new Ee(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:h,lat:p}=Ee.convert(a);let _=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}static convert(a){if(a)return a instanceof Ge?a:new Ge(a)}}const $e=0,Xe=25.5;function Ze(f){return we*Math.cos(f*Math.PI/180)}function ft(f){return(180+f)/360}function gt(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function ut(f,a){return f/Ze(a)}function bt(f){return 360*f-180}function _t(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function Mt(f,a){return f*Ze(_t(a))}const Tt=85.051129;function jt(f){return Math.cos(vt(Ir(f,-Tt,Tt)))}function Vt(f,a){const h=Ir(a,$e,Xe),p=Math.pow(2,h);return jt(f)*we/(512*p)}function Rt(f){return 1/Math.cos(f*Math.PI/180)}function Dt(f,a=0){const h=Math.exp(Math.PI*(1-(f.y+a/Jr)/(1<<f.z)*2));return 80150034*h/(h*h+1)/Jr/(1<<f.z)}class sr{constructor(a,h,p=0){this.x=+a,this.y=+h,this.z=+p}static fromLngLat(a,h=0){const p=Ee.convert(a);return new sr(ft(p.lng),gt(p.lat),ut(h,p.lat))}toLngLat(){return new Ee(bt(this.x),_t(this.y))}toAltitude(){return Mt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/we*Rt(_t(this.y))}}function Cr(f,a,h,p,_,y,b,F,z){const V=(a+p)/2,T=(h+_)/2,D=new Ye(V,T);F(D),function(H,O,Q,W,re,he){const Se=Q-re,Te=W-he;return Math.abs((W-O)*Se-(Q-H)*Te)/Math.hypot(Se,Te)}(D.x,D.y,y.x,y.y,b.x,b.y)>=z?(Cr(f,a,h,V,T,y,D,F,z),Cr(f,V,T,p,_,D,b,F,z)):f.push(b)}function Rr(f,a,h){let p=f[0],_=p.x,y=p.y;a(p);const b=[p];for(let F=1;F<f.length;F++){const z=f[F],{x:V,y:T}=z;a(z),Cr(b,_,y,V,T,p,z,a,h),_=V,y=T,p=z}return b}function wr(f,a,h,p){if(p(a,h)){const _=a.add(h)._mult(.5);wr(f,a,_,p),wr(f,_,h,p)}else f.push(h)}function en(f,a){let h=f[0];const p=[h];for(let _=1;_<f.length;_++){const y=f[_];wr(p,h,y,a),h=y}return p}const or=Math.pow(2,14)-1,Lr=-or-1;function Er(f,a){const h=Math.round(f.x*a),p=Math.round(f.y*a);return f.x=Ir(h,Lr,or),f.y=Ir(p,Lr,or),(h<f.x||h>f.x+1||p<f.y||p>f.y+1)&&ti("Geometry exceeds allowed extent, reduce your vector tile buffer size"),f}function tn(f,a,h){const p=f.loadGeometry(),_=f.extent,y=Jr/_;if(a&&h&&h.projection.isReprojectedInTileSpace){const b=1<<a.z,{scale:F,x:z,y:V,projection:T}=h,D=H=>{const O=bt((a.x+H.x/_)/b),Q=_t((a.y+H.y/_)/b),W=T.project(O,Q);H.x=(W.x*F-z)*_,H.y=(W.y*F-V)*_};for(let H=0;H<p.length;H++)if(f.type!==1)p[H]=Rr(p[H],D,1);else{const O=[];for(const Q of p[H])Q.x<0||Q.x>=_||Q.y<0||Q.y>=_||(D(Q),O.push(Q));p[H]=O}}for(const b of p)for(const F of b)Er(F,y);return p}function sn(f,a){return{type:f.type,id:f.id,properties:f.properties,geometry:a?tn(f):[]}}function kr(f,a,h,p,_){f.emplaceBack(2*a+(p+1)/2,2*h+(_+1)/2)}function Hr(f,a,h){f.emplaceBack(a.x,a.y,a.z,h[0]*16384,h[1]*16384,h[2]*16384)}class Xn{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new Bc,this.indexArray=new Ka,this.segments=new Ia,this.programConfigurations=new Zf(a.layers,{zoom:a.zoom,lut:a.lut}),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}updateFootprints(a,h){}populate(a,h,p,_){const y=this.layers[0],b=[];let F=null;y.type==="circle"&&(F=y.layout.get("circle-sort-key"));for(const{feature:V,id:T,index:D,sourceLayerIndex:H}of a){const O=this.layers[0]._featureFilter.needGeometry,Q=sn(V,O);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Q,p))continue;const W=F?F.evaluate(Q,{},p):void 0,re={id:T,properties:V.properties,type:V.type,sourceLayerIndex:H,index:D,geometry:O?Q.geometry:tn(V,p,_),patterns:{},sortKey:W};b.push(re)}F&&b.sort((V,T)=>V.sortKey-T.sortKey);let z=null;_.projection.name==="globe"&&(this.globeExtVertexArray=new Ed,z=_.projection);for(const V of b){const{geometry:T,index:D,sourceLayerIndex:H}=V,O=a[D].feature;this.addFeature(V,T,D,h.availableImages,p,z,h.brightness),h.featureIndex.insert(O,T,D,H,this.index)}}update(a,h,p,_,y){const b=Object.keys(a).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,h,b?this.stateDependentLayers:this.layers,p,_,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,pS.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,AS.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,h,p,_,y,b,F){for(const z of h)for(const V of z){const T=V.x,D=V.y;if(T<0||T>=Jr||D<0||D>=Jr)continue;if(b){const Q=b.projectTilePoint(T,D,y),W=b.upVector(y,T,D),re=this.globeExtVertexArray;Hr(re,Q,W),Hr(re,Q,W),Hr(re,Q,W),Hr(re,Q,W)}const H=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),O=H.vertexLength;kr(this.layoutVertexArray,T,D,-1,-1),kr(this.layoutVertexArray,T,D,1,-1),kr(this.layoutVertexArray,T,D,1,1),kr(this.layoutVertexArray,T,D,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),H.vertexLength+=4,H.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,{},_,y,F)}}function hn(f,a){for(let h=0;h<f.length;h++)if(ko(a,f[h]))return!0;for(let h=0;h<a.length;h++)if(ko(f,a[h]))return!0;return!!ii(f,a)}function Fn(f,a,h){return!!ko(f,a)||!!ji(a,f,h)}function li(f,a){if(f.length===1)return ho(a,f[0]);for(let h=0;h<a.length;h++){const p=a[h];for(let _=0;_<p.length;_++)if(ko(f,p[_]))return!0}for(let h=0;h<f.length;h++)if(ho(a,f[h]))return!0;for(let h=0;h<a.length;h++)if(ii(f,a[h]))return!0;return!1}function On(f,a,h){if(f.length>1){if(ii(f,a))return!0;for(let p=0;p<a.length;p++)if(ji(a[p],f,h))return!0}for(let p=0;p<f.length;p++)if(ji(f[p],a,h))return!0;return!1}function ii(f,a){if(f.length===0||a.length===0)return!1;for(let h=0;h<f.length-1;h++){const p=f[h],_=f[h+1];for(let y=0;y<a.length-1;y++)if(zi(p,_,a[y],a[y+1]))return!0}return!1}function zi(f,a,h,p){return si(f,h,p)!==si(a,h,p)&&si(f,a,h)!==si(f,a,p)}function ji(f,a,h){const p=h*h;if(a.length===1)return f.distSqr(a[0])<p;for(let _=1;_<a.length;_++)if(Ws(f,a[_-1],a[_])<p)return!0;return!1}function Ws(f,a,h){const p=a.distSqr(h);if(p===0)return f.distSqr(a);const _=((f.x-a.x)*(h.x-a.x)+(f.y-a.y)*(h.y-a.y))/p;return f.distSqr(_<0?a:_>1?h:h.sub(a)._mult(_)._add(a))}function ho(f,a){let h,p,_,y=!1;for(let b=0;b<f.length;b++){h=f[b];for(let F=0,z=h.length-1;F<h.length;z=F++)p=h[F],_=h[z],p.y>a.y!=_.y>a.y&&a.x<(_.x-p.x)*(a.y-p.y)/(_.y-p.y)+p.x&&(y=!y)}return y}function ko(f,a){let h=!1;for(let p=0,_=f.length-1;p<f.length;_=p++){const y=f[p],b=f[_];y.y>a.y!=b.y>a.y&&a.x<(b.x-y.x)*(a.y-y.y)/(b.y-y.y)+y.x&&(h=!h)}return h}function Ih(f,a,h,p,_){for(const b of f)if(a<=b.x&&h<=b.y&&p>=b.x&&_>=b.y)return!0;const y=[new Ye(a,h),new Ye(a,_),new Ye(p,_),new Ye(p,h)];if(f.length>2){for(const b of y)if(ko(f,b))return!0}for(let b=0;b<f.length-1;b++)if(Xa(f[b],f[b+1],y))return!0;return!1}function Xa(f,a,h){const p=h[0],_=h[2];if(f.x<p.x&&a.x<p.x||f.x>_.x&&a.x>_.x||f.y<p.y&&a.y<p.y||f.y>_.y&&a.y>_.y)return!1;const y=si(f,a,h[0]);return y!==si(f,a,h[1])||y!==si(f,a,h[2])||y!==si(f,a,h[3])}function Ji(f,a,h,p,_,y){let b=a.y-f.y,F=f.x-a.x;if(y=y||0){const z=b*b+F*F;if(z===0)return!0;const V=Math.sqrt(z);b/=V,F/=V}return!((h.x-f.x)*b+(h.y-f.y)*F-y<0||(p.x-f.x)*b+(p.y-f.y)*F-y<0||(_.x-f.x)*b+(_.y-f.y)*F-y<0)}function oo(f,a,h,p,_,y,b){return!(Ji(f,a,p,_,y,b)||Ji(a,h,p,_,y,b)||Ji(h,f,p,_,y,b)||Ji(p,_,f,a,h,b)||Ji(_,y,f,a,h,b)||Ji(y,p,f,a,h,b))}function ia(f,a,h){const p=a.paint.get(f).value;return p.kind==="constant"?p.value:h.programConfigurations.get(a.id).getMaxValue(f)}function to(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Di(f,a,h,p,_){if(!a[0]&&!a[1])return f;const y=Ye.convert(a)._mult(_);h==="viewport"&&y._rotate(-p);const b=[];for(let F=0;F<f.length;F++)b.push(f[F].sub(y));return b}function Es(f,a,h,p){const _=Ye.convert(f)._mult(p);return a==="viewport"&&_._rotate(-h),_}let Hs,La;Pe(Xn,"CircleBucket",{omit:["layers"]});var Ya,ds={exports:{}},Ll=(Ya||(Ya=1,function(f,a){(function(h){function p(y,b,F){var z=_(256*y,256*(b=Math.pow(2,F)-b-1),F),V=_(256*(y+1),256*(b+1),F);return z[0]+","+z[1]+","+V[0]+","+V[1]}function _(y,b,F){var z=2*Math.PI*6378137/256/Math.pow(2,F);return[y*z-2*Math.PI*6378137/2,b*z-2*Math.PI*6378137/2]}h.getURL=function(y,b,F,z,V,T){return T=T||{},y+"?"+["bbox="+p(F,z,V),"format="+(T.format||"image/png"),"service="+(T.service||"WMS"),"version="+(T.version||"1.1.1"),"request="+(T.request||"GetMap"),"srs="+(T.srs||"EPSG:3857"),"width="+(T.width||256),"height="+(T.height||256),"layers="+b].join("&")},h.getTileBBox=p,h.getMercCoords=_,Object.defineProperty(h,"__esModule",{value:!0})})(a)}(0,ds.exports)),ds.exports);class Xl{constructor(a,h,p){this.z=a,this.x=h,this.y=p,this.key=lu(0,a,a,h,p)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,h){const p=Ll.getTileBBox(this.x,this.y,this.z),_=function(y,b,F){let z,V="";for(let T=y;T>0;T--)z=1<<T-1,V+=(b&z?1:0)+(F&z?2:0);return V}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fl{constructor(a,h){this.wrap=a,this.canonical=h,this.key=lu(a,h.z,h.z,h.x,h.y)}}class Lo{constructor(a,h,p,_,y){this.overscaledZ=a,this.wrap=h,this.canonical=new Xl(p,+_,+y),this.key=h===0&&a===p?this.canonical.key:lu(h,a,p,_,y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const h=this.canonical.z-a;return a>this.canonical.z?new Lo(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Lo(a,this.wrap,a,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(a,h=!0){if(this.overscaledZ===a&&h)return this.key;if(a>this.canonical.z)return lu(this.wrap*+h,a,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-a;return lu(this.wrap*+h,a,a,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const h=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.z<this.canonical.z&&a.canonical.x===this.canonical.x>>h&&a.canonical.y===this.canonical.y>>h}children(a){if(this.overscaledZ>=a)return[new Lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new Lo(h,this.wrap,h,p,_),new Lo(h,this.wrap,h,p+1,_),new Lo(h,this.wrap,h,p,_+1),new Lo(h,this.wrap,h,p+1,_+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new Lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new Lo(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fl(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function lu(f,a,h,p,_){const y=1<<Math.min(h,22);let b=y*(_%y)+p%y;return f&&h<22&&(b+=y*y*((f<0?-2*f-1:2*f)%(1<<2*(22-h)))),16*(32*b+h)+(a-h)}const cu=[f=>{let a=f.canonical.x-1,h=f.wrap;return a<0&&(a=(1<<f.canonical.z)-1,h--),new Lo(f.overscaledZ,h,f.canonical.z,a,f.canonical.y)},f=>{let a=f.canonical.x+1,h=f.wrap;return a===1<<f.canonical.z&&(a=0,h++),new Lo(f.overscaledZ,h,f.canonical.z,a,f.canonical.y)},f=>new Lo(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,(f.canonical.y===0?1<<f.canonical.z:f.canonical.y)-1),f=>new Lo(f.overscaledZ,f.wrap,f.canonical.z,f.canonical.x,f.canonical.y===(1<<f.canonical.z)-1?0:f.canonical.y+1)];Pe(Xl,"CanonicalTileID"),Pe(Lo,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Lh=os([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:dh}=Lh,Lu=os([{name:"a_pos_3",components:3,type:"Int16"}]);var Fh=os([{name:"a_pos",type:"Int16",components:2}]);class ff{constructor(a,h){this.pos=a,this.dir=h}intersectsPlane(a,h,p){const _=Ue.vec3.dot(h,this.dir);if(Math.abs(_)<1e-6)return!1;const y=((a[0]-this.pos[0])*h[0]+(a[1]-this.pos[1])*h[1]+(a[2]-this.pos[2])*h[2])/_;return p[0]=this.pos[0]+this.dir[0]*y,p[1]=this.pos[1]+this.dir[1]*y,p[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(a,h,p){if(Ue.vec3.equals(this.pos,a)||h===0)return p[0]=p[1]=p[2]=0,!1;const[_,y,b]=this.dir,F=this.pos[0]-a[0],z=this.pos[1]-a[1],V=this.pos[2]-a[2],T=_*_+y*y+b*b,D=2*(F*_+z*y+V*b),H=D*D-4*T*(F*F+z*z+V*V-h*h);if(H<0){const O=Math.max(-D/2,0),Q=F+_*O,W=z+y*O,re=V+b*O,he=Math.hypot(Q,W,re);return p[0]=Q*h/he,p[1]=W*h/he,p[2]=re*h/he,!1}{const O=(-D-Math.sqrt(H))/(2*T);if(O<0){const Q=Math.hypot(F,z,V);return p[0]=F*h/Q,p[1]=z*h/Q,p[2]=V*h/Q,!1}return p[0]=F+_*O,p[1]=z+y*O,p[2]=V+b*O,!0}}}class Jf{constructor(a,h,p,_,y){this.TL=a,this.TR=h,this.BR=p,this.BL=_,this.horizon=y}static fromInvProjectionMatrix(a,h,p){const _=[-1,1,1],y=[1,1,1],b=[1,-1,1],F=[-1,-1,1],z=Ue.vec3.transformMat4(_,_,a),V=Ue.vec3.transformMat4(y,y,a),T=Ue.vec3.transformMat4(b,b,a),D=Ue.vec3.transformMat4(F,F,a);return new Jf(z,V,T,D,h/p)}}function jd(f,a,h){let p=1/0,_=-1/0;const y=[];for(const b of f){Ue.vec3.sub(y,b,a);const F=Ue.vec3.dot(y,h);p=Math.min(p,F),_=Math.max(_,F)}return[p,_]}function TA(f,a){let h=!0;for(let p=0;p<f.planes.length;p++){const _=f.planes[p];let y=0;for(let b=0;b<a.length;b++)y+=Ue.vec3.dot(_,a[b])+_[3]>=0;if(y===0)return 0;y!==a.length&&(h=!1)}return h?2:1}function IA(f,a){for(const h of f.projections){const p=jd(a,f.points[0],h.axis);if(h.projection[1]<p[0]||h.projection[0]>p[1])return 0}return 1}function D0(f,a){let h=0;const p=[0,0,0,0];for(let _=0;_<f.length;_++)p[0]=f[_][0],p[1]=f[_][1],p[2]=f[_][2],p[3]=1,Ue.vec4.dot(p,a)>=0&&h++;return h}class LA{constructor(a,h){this.points=a||new Array(8).fill([0,0,0]),this.planes=h||new Array(6).fill([0,0,0,0]),this.bounds=Fo.fromPoints(this.points),this.projections=[],this.frustumEdges=[Ue.vec3.sub([],this.points[2],this.points[3]),Ue.vec3.sub([],this.points[0],this.points[3]),Ue.vec3.sub([],this.points[4],this.points[0]),Ue.vec3.sub([],this.points[5],this.points[1]),Ue.vec3.sub([],this.points[6],this.points[2]),Ue.vec3.sub([],this.points[7],this.points[3])];for(const p of this.frustumEdges){const _=[0,-p[2],p[1]],y=[p[2],0,-p[0]];this.projections.push({axis:_,projection:jd(this.points,this.points[0],_)}),this.projections.push({axis:y,projection:jd(this.points,this.points[0],y)})}}static fromInvProjectionMatrix(a,h,p,_){const y=Math.pow(2,p),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(V=>{const T=Ue.vec4.transformMat4([],V,a),D=1/T[3]/h*y;return Ue.vec4.mul(T,T,[D,D,_?1/T[3]:D,D])}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(V=>{const T=Ue.vec3.sub([],b[V[0]],b[V[1]]),D=Ue.vec3.sub([],b[V[2]],b[V[1]]),H=Ue.vec3.normalize([],Ue.vec3.cross([],T,D)),O=-Ue.vec3.dot(H,b[V[1]]);return H.concat(O)}),z=[];for(let V=0;V<b.length;V++)z.push([b[V][0],b[V][1],b[V][2]]);return new LA(z,F)}intersectsPrecise(a,h,p){for(let _=0;_<h.length;_++)if(!D0(a,h[_]))return 0;for(let _=0;_<this.planes.length;_++)if(!D0(a,this.planes[_]))return 0;for(const _ of p)for(const y of this.frustumEdges){const b=Ue.vec3.cross([],_,y),F=Ue.vec3.length(b);if(F===0)continue;Ue.vec3.scale(b,b,1/F);const z=jd(this.points,this.points[0],b),V=jd(a,this.points[0],b);if(z[0]>V[1]||V[0]>z[1])return 0}return 1}containsPoint(a){for(const h of this.planes){const p=h[3];if(Ue.vec3.dot([h[0],h[1],h[2]],a)+p<0)return!1}return!0}}class Fo{static fromPoints(a){const h=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const _ of a)Ue.vec3.min(h,h,_),Ue.vec3.max(p,p,_);return new Fo(h,p)}static fromTileIdAndHeight(a,h,p){const _=1<<a.canonical.z,y=a.canonical.x,b=a.canonical.y;return new Fo([y/_,b/_,h],[(y+1)/_,(b+1)/_,p])}static applyTransform(a,h){const p=a.getCorners();for(let _=0;_<p.length;++_)Ue.vec3.transformMat4(p[_],p[_],h);return Fo.fromPoints(p)}static applyTransformFast(a,h){const p=[h[12],h[13],h[14]],_=[...p];for(let y=0;y<3;y++)for(let b=0;b<3;b++){const F=h[4*b+y],z=F*a.min[b],V=F*a.max[b];p[y]+=Math.min(z,V),_[y]+=Math.max(z,V)}return new Fo(p,_)}static projectAabbCorners(a,h){const p=a.getCorners();for(let _=0;_<p.length;++_)Ue.vec3.transformMat4(p[_],p[_],h);return p}constructor(a,h){this.min=a,this.max=h,this.center=Ue.vec3.scale([],Ue.vec3.add([],this.min,this.max),.5)}quadrant(a){const h=[a%2==0,a<2],p=Ue.vec3.clone(this.min),_=Ue.vec3.clone(this.max);for(let y=0;y<h.length;y++)p[y]=h[y]?this.min[y]:this.center[y],_[y]=h[y]?this.center[y]:this.max[y];return _[2]=this.max[2],new Fo(p,_)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,h=this.max;return[[a[0],a[1],a[2]],[h[0],a[1],a[2]],[h[0],h[1],a[2]],[a[0],h[1],a[2]],[a[0],a[1],h[2]],[h[0],a[1],h[2]],[h[0],h[1],h[2]],[a[0],h[1],h[2]]]}intersects(a){return this.intersectsAabb(a.bounds)?TA(a,this.getCorners()):0}intersectsFlat(a){return this.intersectsAabb(a.bounds)?TA(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(a,h){return h||this.intersects(a)?IA(a,this.getCorners()):0}intersectsPreciseFlat(a,h){return h||this.intersectsFlat(a)?IA(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(a){for(let h=0;h<3;++h)if(this.min[h]>a.max[h]||a.min[h]>this.max[h])return!1;return!0}intersectsAabbXY(a){return!(this.min[0]>a.max[0]||a.min[0]>this.max[0]||this.min[1]>a.max[1]||a.min[1]>this.max[1])}encapsulate(a){for(let h=0;h<3;h++)this.min[h]=Math.min(this.min[h],a.min[h]),this.max[h]=Math.max(this.max[h],a.max[h])}encapsulatePoint(a){for(let h=0;h<3;h++)this.min[h]=Math.min(this.min[h],a[h]),this.max[h]=Math.max(this.max[h],a[h])}closestPoint(a){return[Math.max(Math.min(this.max[0],a[0]),this.min[0]),Math.max(Math.min(this.max[1],a[1]),this.min[1]),Math.max(Math.min(this.max[2],a[2]),this.min[2])]}}function Op(f){return f*l/ye}Pe(Fo,"Aabb");const wS=[new Fo([q,q,q],[X,X,X]),new Fo([q,q,q],[0,0,X]),new Fo([0,q,q],[X,0,X]),new Fo([q,0,q],[0,X,X]),new Fo([0,0,q],[X,X,X])];function Nb(f,a,h,p=!0){const _=Ue.vec3.scale([],f._camera.position,f.worldSize),y=[a,h,1,1];Ue.vec4.transformMat4(y,y,f.pixelMatrixInverse),Ue.vec4.scale(y,y,1/y[3]);const b=Ue.vec3.sub([],y,_),F=Ue.vec3.normalize([],b),z=f.globeMatrix,V=[z[12],z[13],z[14]],T=Ue.vec3.sub([],V,_),D=Ue.vec3.length(T),H=Ue.vec3.normalize([],T),O=f.worldSize/(2*Math.PI),Q=Ue.vec3.dot(H,F),W=Math.asin(O/D);if(W<Math.acos(Q)){if(!p)return null;const Et=[],yt=[];Ue.vec3.scale(Et,F,D/Q),Ue.vec3.normalize(yt,Ue.vec3.sub(yt,Et,T)),Ue.vec3.normalize(F,Ue.vec3.add(F,T,Ue.vec3.scale(F,yt,Math.tan(W)*D)))}const re=[];new ff(_,F).closestPointOnSphere(V,O,re);const he=Ue.vec3.normalize([],Hn(z,0)),Se=Ue.vec3.normalize([],Hn(z,1)),Te=Ue.vec3.normalize([],Hn(z,2)),de=Ue.vec3.dot(he,re),je=Ue.vec3.dot(Se,re),Ve=Ue.vec3.dot(Te,re),et=Yt(Math.asin(-je/O));let dt=Yt(Math.atan2(de,Ve));dt=f.center.lng+function(Et,yt){const Nt=(yt-Et+180)%360-180;return Nt<-180?Nt+360:Nt}(f.center.lng,dt);const pt=ft(dt),at=Ir(gt(et),0,1);return new sr(pt,at)}class QX{constructor(a,h,p){this.a=Ue.vec3.sub([],a,p),this.b=Ue.vec3.sub([],h,p),this.center=p;const _=Ue.vec3.normalize([],this.a),y=Ue.vec3.normalize([],this.b);this.angle=Math.acos(Ue.vec3.dot(_,y))}}function CS(f,a){if(f.angle===0)return null;let h;return h=f.a[a]===0?1/f.angle*.5*Math.PI:1/f.angle*Math.atan(f.b[a]/f.a[a]/Math.sin(f.angle)-1/Math.tan(f.angle)),h<0||h>1?null:function(p,_,y,b){const F=Math.sin(y);return p*(Math.sin((1-b)*y)/F)+_*(Math.sin(b*y)/F)}(f.a[a],f.b[a],f.angle,Ir(h,0,1))+f.center[a]}function ep(f){if(f.z<=1)return wS[f.z+2*f.y+f.x];const a=SS(Pb(f));return Fo.fromPoints(a)}function Rp(f,a,h){return Ue.vec3.scale(f,f,1-h),Ue.vec3.scaleAndAdd(f,f,a,h)}function KN(f,a,h){for(const p of f)Ue.vec3.transformMat4(p,p,a),Ue.vec3.scale(p,p,h)}function XN(f,a,h,p){const _=a/f.worldSize,y=f.globeMatrix;if(h.z<=1){const pt=ep(h).getCorners();return KN(pt,y,_),Fo.fromPoints(pt)}const b=Pb(h,p),F=SS(b,l+Op(f._tileCoverLift));KN(F,y,_);const z=Number.MAX_VALUE,V=[-z,-z,-z],T=[z,z,z];if(b.contains(f.center)){for(const Et of F)Ue.vec3.min(T,T,Et),Ue.vec3.max(V,V,Et);V[2]=0;const pt=f.point,at=[pt.x*_,pt.y*_,0];return Ue.vec3.min(T,T,at),Ue.vec3.max(V,V,at),new Fo(T,V)}if(f._tileCoverLift>0){for(const pt of F)Ue.vec3.min(T,T,pt),Ue.vec3.max(V,V,pt);return new Fo(T,V)}const D=[y[12]*_,y[13]*_,y[14]*_],H=b.getCenter(),O=Ir(f.center.lat,-Tt,Tt),Q=Ir(H.lat,-Tt,Tt),W=ft(f.center.lng),re=gt(O);let he=W-ft(H.lng);const Se=re-gt(Q);he>.5?he-=1:he<-.5&&(he+=1);let Te=0;if(Math.abs(he)>Math.abs(Se))Te=he>=0?1:3;else{Te=Se>=0?0:2;const pt=[y[4]*_,y[5]*_,y[6]*_],at=-Math.sin(vt(Se>=0?b.getSouth():b.getNorth()))*l;Ue.vec3.scaleAndAdd(D,D,pt,at)}const de=F[Te],je=F[(Te+1)%4],Ve=new QX(de,je,D),et=[CS(Ve,0)||de[0],CS(Ve,1)||de[1],CS(Ve,2)||de[2]],dt=FA(f.zoom);if(dt>0){const pt=function({x:Et,y:yt,z:Nt},zt,Gt,qt,Jt){const vr=1/(1<<Nt);let rr=Et*vr,Br=rr+vr,Ur=yt*vr,br=Ur+vr,Cn=0;const dn=(rr+Br)/2-qt;return dn>.5?Cn=-1:dn<-.5&&(Cn=1),rr=((rr+Cn)*zt-(qt*=zt))*Gt+qt,Br=((Br+Cn)*zt-qt)*Gt+qt,Ur=(Ur*zt-(Jt*=zt))*Gt+Jt,br=(br*zt-Jt)*Gt+Jt,[[rr,br,0],[Br,br,0],[Br,Ur,0],[rr,Ur,0]]}(h,a,f._pixelsPerMercatorPixel,W,re);for(let Et=0;Et<F.length;Et++)Rp(F[Et],pt[Et],dt);const at=Ue.vec3.add([],pt[Te],pt[(Te+1)%4]);Ue.vec3.scale(at,at,.5),Rp(et,at,dt)}for(const pt of F)Ue.vec3.min(T,T,pt),Ue.vec3.max(V,V,pt);return T[2]=Math.min(de[2],je[2]),Ue.vec3.min(T,T,et),Ue.vec3.max(V,V,et),new Fo(T,V)}function Pb({x:f,y:a,z:h},p=!1){const _=1/(1<<h),y=new Ee(bt(f*_),a===(1<<h)-1&&p?-90:_t((a+1)*_)),b=new Ee(bt((f+1)*_),a===0&&p?90:_t(a*_));return new Ge(y,b)}function SS(f,a=l){const h=vt(f.getNorth()),p=vt(f.getSouth()),_=Math.cos(h),y=Math.cos(p),b=Math.sin(h),F=Math.sin(p),z=f.getWest(),V=f.getEast();return[ne(y,F,z,a),ne(y,F,V,a),ne(_,b,V,a),ne(_,b,z,a)]}function q1(f,a,h,p){const _=1<<h.z,y=(f/Jr+h.x)/_;return se(_t((a/Jr+h.y)/_),bt(y),p)}function Mb({min:f,max:a}){return E/Math.max(a[0]-f[0],a[1]-f[1],a[2]-f[2])}const YN=new Float64Array(16);function jb(f){const a=Mb(f),h=Ue.mat4.fromScaling(YN,[a,a,a]);return Ue.mat4.translate(h,h,Ue.vec3.negate([],f.min))}function BS(f){const a=Ue.mat4.fromTranslation(YN,f.min),h=1/Mb(f);return Ue.mat4.scale(a,a,[h,h,h])}function ES(f){const a=Jr/(2*Math.PI);return f/(2*Math.PI)/a}function ZN(f,a){return Jr/(512*Math.pow(2,f))*Mb(ep(a))}function JN(f,a,h,p,_){const y=ES(h),b=[f,a,-h/(2*Math.PI)],F=Ue.mat4.identity(new Float64Array(16));return Ue.mat4.translate(F,F,b),Ue.mat4.scale(F,F,[y,y,y]),Ue.mat4.rotateX(F,F,vt(-_)),Ue.mat4.rotateY(F,F,vt(-p)),F}function FA(f){return cn(d,x,f)}function eP(f,a){const h=se(a.lat,a.lng),p=function(y){const b=se(y._center.lat,y._center.lng),F=Ue.vec3.fromValues(0,1,0);let z=Ue.vec3.cross([],F,b);const V=Ue.mat4.fromRotation([],-y.angle,b);z=Ue.vec3.transformMat4(z,z,V),Ue.mat4.fromRotation(V,-y._pitch,z);const T=Ue.vec3.normalize([],b);return Ue.vec3.scale(T,T,Op(y.cameraToCenterDistance/y.pixelsPerMeter)),Ue.vec3.transformMat4(T,T,V),Ue.vec3.add([],b,T)}(f),_=Ue.vec3.subtract([],p,h);return Ue.vec3.angle(_,h)}function TS(f,a){return eP(f,a)>Math.PI/2*1.01}const tP=vt(85),HX=Math.cos(tP),VX=Math.sin(tP),GX=Ue.mat4.create(),rP=f=>{const a=[];return f.paint.get("circle-pitch-alignment")==="map"&&a.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&a.push("SCALE_WITH_MAP"),a};function nP(f,a,h,p,_,y,b,F,z){if(y&&f.queryGeometry.isAboveHorizon)return!1;y&&(z*=f.pixelToTileUnitsFactor);const V=f.tileID.canonical,T=h.projection.upVectorScale(V,h.center.lat,h.worldSize).metersToTile;for(const D of a)for(const H of D){const O=H.add(F),Q=_&&h.elevation?h.elevation.exaggeration()*_.getElevationAt(O.x,O.y,!0):0,W=h.projection.projectTilePoint(O.x,O.y,V);if(Q>0){const Te=h.projection.upVector(V,O.x,O.y);W.x+=Te[0]*T*Q,W.y+=Te[1]*T*Q,W.z+=Te[2]*T*Q}const re=y?O:qX(W.x,W.y,W.z,p),he=y?f.tilespaceRays.map(Te=>WX(Te,Q)):f.queryGeometry.screenGeometry,Se=Ue.vec4.transformMat4([],[W.x,W.y,W.z,1],p);if(!b&&y?z*=Se[3]/h.cameraToCenterDistance:b&&!y&&(z*=h.cameraToCenterDistance/Se[3]),y){const Te=_t((H.y/Jr+V.y)/(1<<V.z));z/=h.projection.pixelsPerMeter(Te,1)/ut(1,Te)}if(Fn(he,re,z))return!0}return!1}function qX(f,a,h,p){const _=Ue.vec4.transformMat4([],[f,a,h,1],p);return new Ye(_[0]/_[3],_[1]/_[3])}const iP=Ue.vec3.fromValues(0,0,0),$X=Ue.vec3.fromValues(0,0,1);function WX(f,a){const h=Ue.vec3.create();return iP[2]=a,f.intersectsPlane(iP,$X,h),new Ye(h[0],h[1])}class sP extends Xn{}let oP,aP,lP,cP;function uP(f,{width:a,height:h},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==a*h*p)throw new RangeError("mismatched image size")}else _=new Uint8Array(a*h*p);return f.width=a,f.height=h,f.data=_,f}function hP(f,a,h){const{width:p,height:_}=a;p===f.width&&_===f.height||(IS(f,a,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,p),height:Math.min(f.height,_)},h,null),f.width=p,f.height=_,f.data=a.data)}function IS(f,a,h,p,_,y,b,F){if(_.width===0||_.height===0)return a;if(_.width>f.width||_.height>f.height||h.x>f.width-_.width||h.y>f.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>a.width||_.height>a.height||p.x>a.width-_.width||p.y>a.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const z=f.data,V=a.data,T=y===4&&F;for(let D=0;D<_.height;D++){const H=((h.y+D)*f.width+h.x)*y,O=((p.y+D)*a.width+p.x)*y;if(T)for(let Q=0;Q<_.width;Q++){const W=H+Q*y+3,re=O+Q*y;V[re+0]=255,V[re+1]=255,V[re+2]=255,V[re+3]=z[W]}else if(b)for(let Q=0;Q<_.width;Q++){const W=H+Q*y,re=O+Q*y,he=z[W+3],Se=new oi(z[W+0]/255*he,z[W+1]/255*he,z[W+2]/255*he,he).toRenderColor(b).toArray();V[re+0]=Se[0],V[re+1]=Se[1],V[re+2]=Se[2],V[re+3]=Se[3]}else for(let Q=0;Q<_.width*y;Q++)V[O+Q]=z[H+Q]}return a}Pe(sP,"HeatmapBucket",{omit:["layers"]});class NA{constructor(a,h){uP(this,a,1,h)}resize(a){hP(this,new NA(a),1)}clone(){return new NA({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,_,y){IS(a,h,p,_,y,1,null)}}class uu{constructor(a,h){uP(this,a,4,h)}resize(a){hP(this,new uu(a),4)}replace(a,h){h?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new uu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,h,p,_,y,b,F){IS(a,h,p,_,y,4,b,F)}}class dP{constructor(a,h){this.width=a.width,this.height=a.height,this.data=h instanceof Uint8Array?new Float32Array(h.buffer):h}}function $1(f){const a={},h=f.resolution||256,p=f.clips?f.clips.length:1,_=f.image||new uu({width:h,height:p}),y=(b,F,z)=>{a[f.evaluationKey]=z;const V=f.expression.evaluate(a);V&&(_.data[b+F+0]=Math.floor(255*V.r/V.a),_.data[b+F+1]=Math.floor(255*V.g/V.a),_.data[b+F+2]=Math.floor(255*V.b/V.a),_.data[b+F+3]=Math.floor(255*V.a))};if(f.clips)for(let b=0,F=0;b<p;++b,F+=4*h)for(let z=0,V=0;z<h;z++,V+=4){const T=z/(h-1),{start:D,end:H}=f.clips[b];y(F,V,D*(1-T)+H*T)}else for(let b=0,F=0;b<h;b++,F+=4)y(0,F,b/(h-1));return _}Pe(NA,"AlphaImage"),Pe(uu,"RGBAImage");const KX=os([{name:"a_pos",components:2,type:"Int16"}],4),{members:XX}=KX;function W1(f,a,h=2){const p=a&&a.length,_=p?a[0]*h:f.length;let y=fP(f,0,_,h,!0);const b=[];if(!y||y.next===y.prev)return b;let F,z,V;if(p&&(y=function(T,D,H,O){const Q=[];for(let W=0,re=D.length;W<re;W++){const he=fP(T,D[W]*O,W<re-1?D[W+1]*O:T.length,O,!1);he===he.next&&(he.steiner=!0),Q.push(iY(he))}Q.sort(tY);for(let W=0;W<Q.length;W++)H=rY(Q[W],H);return H}(f,a,y,h)),f.length>80*h){F=1/0,z=1/0;let T=-1/0,D=-1/0;for(let H=h;H<_;H+=h){const O=f[H],Q=f[H+1];O<F&&(F=O),Q<z&&(z=Q),O>T&&(T=O),Q>D&&(D=Q)}V=Math.max(T-F,D-z),V=V!==0?32767/V:0}return K1(y,b,h,F,z,V,0),b}function fP(f,a,h,p,_){let y;if(_===function(b,F,z,V){let T=0;for(let D=F,H=z-V;D<z;D+=V)T+=(b[H]-b[D])*(b[D+1]+b[H+1]),H=D;return T}(f,a,h,p)>0)for(let b=a;b<h;b+=p)y=mP(b/p|0,f[b],f[b+1],y);else for(let b=h-p;b>=a;b-=p)y=mP(b/p|0,f[b],f[b+1],y);return y&&kb(y,y.next)&&(Y1(y),y=y.next),y}function dg(f,a){if(!f)return f;a||(a=f);let h,p=f;do if(h=!1,p.steiner||!kb(p,p.next)&&Nl(p.prev,p,p.next)!==0)p=p.next;else{if(Y1(p),p=a=p.prev,p===p.next)break;h=!0}while(h||p!==a);return a}function K1(f,a,h,p,_,y,b){if(!f)return;!b&&y&&function(z,V,T,D){let H=z;do H.z===0&&(H.z=LS(H.x,H.y,V,T,D)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==z);H.prevZ.nextZ=null,H.prevZ=null,function(O){let Q,W=1;do{let re,he=O;O=null;let Se=null;for(Q=0;he;){Q++;let Te=he,de=0;for(let Ve=0;Ve<W&&(de++,Te=Te.nextZ,Te);Ve++);let je=W;for(;de>0||je>0&&Te;)de!==0&&(je===0||!Te||he.z<=Te.z)?(re=he,he=he.nextZ,de--):(re=Te,Te=Te.nextZ,je--),Se?Se.nextZ=re:O=re,re.prevZ=Se,Se=re;he=Te}Se.nextZ=null,W*=2}while(Q>1)}(H)}(f,p,_,y);let F=f;for(;f.prev!==f.next;){const z=f.prev,V=f.next;if(y?ZX(f,p,_,y):YX(f))a.push(z.i,f.i,V.i),Y1(f),f=V.next,F=V.next;else if((f=V)===F){b?b===1?K1(f=JX(dg(f),a),a,h,p,_,y,2):b===2&&eY(f,a,h,p,_,y):K1(dg(f),a,h,p,_,y,1);break}}}function YX(f){const a=f.prev,h=f,p=f.next;if(Nl(a,h,p)>=0)return!1;const _=a.x,y=h.x,b=p.x,F=a.y,z=h.y,V=p.y,T=_<y?_<b?_:b:y<b?y:b,D=F<z?F<V?F:V:z<V?z:V,H=_>y?_>b?_:b:y>b?y:b,O=F>z?F>V?F:V:z>V?z:V;let Q=p.next;for(;Q!==a;){if(Q.x>=T&&Q.x<=H&&Q.y>=D&&Q.y<=O&&O0(_,F,y,z,b,V,Q.x,Q.y)&&Nl(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function ZX(f,a,h,p){const _=f.prev,y=f,b=f.next;if(Nl(_,y,b)>=0)return!1;const F=_.x,z=y.x,V=b.x,T=_.y,D=y.y,H=b.y,O=F<z?F<V?F:V:z<V?z:V,Q=T<D?T<H?T:H:D<H?D:H,W=F>z?F>V?F:V:z>V?z:V,re=T>D?T>H?T:H:D>H?D:H,he=LS(O,Q,a,h,p),Se=LS(W,re,a,h,p);let Te=f.prevZ,de=f.nextZ;for(;Te&&Te.z>=he&&de&&de.z<=Se;){if(Te.x>=O&&Te.x<=W&&Te.y>=Q&&Te.y<=re&&Te!==_&&Te!==b&&O0(F,T,z,D,V,H,Te.x,Te.y)&&Nl(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,de.x>=O&&de.x<=W&&de.y>=Q&&de.y<=re&&de!==_&&de!==b&&O0(F,T,z,D,V,H,de.x,de.y)&&Nl(de.prev,de,de.next)>=0))return!1;de=de.nextZ}for(;Te&&Te.z>=he;){if(Te.x>=O&&Te.x<=W&&Te.y>=Q&&Te.y<=re&&Te!==_&&Te!==b&&O0(F,T,z,D,V,H,Te.x,Te.y)&&Nl(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;de&&de.z<=Se;){if(de.x>=O&&de.x<=W&&de.y>=Q&&de.y<=re&&de!==_&&de!==b&&O0(F,T,z,D,V,H,de.x,de.y)&&Nl(de.prev,de,de.next)>=0)return!1;de=de.nextZ}return!0}function JX(f,a){let h=f;do{const p=h.prev,_=h.next.next;!kb(p,_)&&pP(p,h,h.next,_)&&X1(p,_)&&X1(_,p)&&(a.push(p.i,h.i,_.i),Y1(h),Y1(h.next),h=f=_),h=h.next}while(h!==f);return dg(h)}function eY(f,a,h,p,_,y){let b=f;do{let F=b.next.next;for(;F!==b.prev;){if(b.i!==F.i&&sY(b,F)){let z=AP(b,F);return b=dg(b,b.next),z=dg(z,z.next),K1(b,a,h,p,_,y,0),void K1(z,a,h,p,_,y,0)}F=F.next}b=b.next}while(b!==f)}function tY(f,a){return f.x-a.x}function rY(f,a){const h=function(_,y){let b=y;const F=_.x,z=_.y;let V,T=-1/0;do{if(z<=b.y&&z>=b.next.y&&b.next.y!==b.y){const W=b.x+(z-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(W<=F&&W>T&&(T=W,V=b.x<b.next.x?b:b.next,W===F))return V}b=b.next}while(b!==y);if(!V)return null;const D=V,H=V.x,O=V.y;let Q=1/0;b=V;do{if(F>=b.x&&b.x>=H&&F!==b.x&&O0(z<O?F:T,z,H,O,z<O?T:F,z,b.x,b.y)){const W=Math.abs(z-b.y)/(F-b.x);X1(b,_)&&(W<Q||W===Q&&(b.x>V.x||b.x===V.x&&nY(V,b)))&&(V=b,Q=W)}b=b.next}while(b!==D);return V}(f,a);if(!h)return a;const p=AP(h,f);return dg(p,p.next),dg(h,h.next)}function nY(f,a){return Nl(f.prev,f,a.prev)<0&&Nl(a.next,f,f.next)<0}function LS(f,a,h,p,_){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*_|0)|f<<8))|f<<4))|f<<2))|f<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-p)*_|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function iY(f){let a=f,h=f;do(a.x<h.x||a.x===h.x&&a.y<h.y)&&(h=a),a=a.next;while(a!==f);return h}function O0(f,a,h,p,_,y,b,F){return(_-b)*(a-F)>=(f-b)*(y-F)&&(f-b)*(p-F)>=(h-b)*(a-F)&&(h-b)*(y-F)>=(_-b)*(p-F)}function sY(f,a){return f.next.i!==a.i&&f.prev.i!==a.i&&!function(h,p){let _=h;do{if(_.i!==h.i&&_.next.i!==h.i&&_.i!==p.i&&_.next.i!==p.i&&pP(_,_.next,h,p))return!0;_=_.next}while(_!==h);return!1}(f,a)&&(X1(f,a)&&X1(a,f)&&function(h,p){let _=h,y=!1;const b=(h.x+p.x)/2,F=(h.y+p.y)/2;do _.y>F!=_.next.y>F&&_.next.y!==_.y&&b<(_.next.x-_.x)*(F-_.y)/(_.next.y-_.y)+_.x&&(y=!y),_=_.next;while(_!==h);return y}(f,a)&&(Nl(f.prev,f,a.prev)||Nl(f,a.prev,a))||kb(f,a)&&Nl(f.prev,f,f.next)>0&&Nl(a.prev,a,a.next)>0)}function Nl(f,a,h){return(a.y-f.y)*(h.x-a.x)-(a.x-f.x)*(h.y-a.y)}function kb(f,a){return f.x===a.x&&f.y===a.y}function pP(f,a,h,p){const _=Ob(Nl(f,a,h)),y=Ob(Nl(f,a,p)),b=Ob(Nl(h,p,f)),F=Ob(Nl(h,p,a));return _!==y&&b!==F||!(_!==0||!Db(f,h,a))||!(y!==0||!Db(f,p,a))||!(b!==0||!Db(h,f,p))||!(F!==0||!Db(h,a,p))}function Db(f,a,h){return a.x<=Math.max(f.x,h.x)&&a.x>=Math.min(f.x,h.x)&&a.y<=Math.max(f.y,h.y)&&a.y>=Math.min(f.y,h.y)}function Ob(f){return f>0?1:f<0?-1:0}function X1(f,a){return Nl(f.prev,f,f.next)<0?Nl(f,a,f.next)>=0&&Nl(f,f.prev,a)>=0:Nl(f,a,f.prev)<0||Nl(f,f.next,a)<0}function AP(f,a){const h=FS(f.i,f.x,f.y),p=FS(a.i,a.x,a.y),_=f.next,y=a.prev;return f.next=a,a.prev=f,h.next=_,_.prev=h,p.next=h,h.prev=p,y.next=p,p.prev=y,p}function mP(f,a,h,p){const _=FS(f,a,h);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function Y1(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function FS(f,a,h){return{i:f,x:a,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Rb(f,a){const h=f.length;if(h<=1)return[f];const p=[];let _,y;for(let b=0;b<h;b++){const F=xi(f[b]);F!==0&&(f[b].area=Math.abs(F),y===void 0&&(y=F<0),y===F<0?(_&&p.push(_),_=[f[b]]):_.push(f[b]))}if(_&&p.push(_),a>1)for(let b=0;b<p.length;b++)p[b].length<=a||(ql(p[b],a,1,p[b].length-1,oY),p[b]=p[b].slice(0,a));return p}function oY(f,a){return a.area-f.area}function NS(f,a,h){const p=h.patternDependencies;let _=!1;for(const y of a){const b=y.paint.get(`${f}-pattern`);b.isConstant()||(_=!0);const F=b.constantOr(null);F&&(_=!0,p[F]=!0)}return _}function PS(f,a,h,p,_){const y=_.patternDependencies;for(const b of a){const F=b.paint.get(`${f}-pattern`).value;if(F.kind!=="constant"){let z=F.evaluate({zoom:p},h,{},_.availableImages);z=z&&z.name?z.name:z,y[z]=!0,h.patterns[b.id]=z}}return h}class MS{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bc,this.indexArray=new Ka,this.indexArray2=new Tu,this.programConfigurations=new Zf(a.layers,{zoom:a.zoom,lut:a.lut}),this.segments=new Ia,this.segments2=new Ia,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.projection=a.projection}updateFootprints(a,h){}populate(a,h,p,_){this.hasPattern=NS("fill",this.layers,h);const y=this.layers[0].layout.get("fill-sort-key"),b=[];for(const{feature:F,id:z,index:V,sourceLayerIndex:T}of a){const D=this.layers[0]._featureFilter.needGeometry,H=sn(F,D);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),H,p))continue;const O=y?y.evaluate(H,{},p,h.availableImages):void 0,Q={id:z,properties:F.properties,type:F.type,sourceLayerIndex:T,index:V,geometry:D?H.geometry:tn(F,p,_),patterns:{},sortKey:O};b.push(Q)}y&&b.sort((F,z)=>F.sortKey-z.sortKey);for(const F of b){const{geometry:z,index:V,sourceLayerIndex:T}=F;if(this.hasPattern){const D=PS("fill",this.layers,F,this.zoom,h);this.patternFeatures.push(D)}else this.addFeature(F,z,V,p,{},h.availableImages,h.brightness);h.featureIndex.insert(a[V].feature,z,V,T,this.index)}}update(a,h,p,_,y){const b=Object.keys(a).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,h,b?this.stateDependentLayers:this.layers,p,_,y)}addFeatures(a,h,p,_,y,b){for(const F of this.patternFeatures)this.addFeature(F,F.geometry,F.index,h,p,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,XX),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,h,p,_,y,b=[],F){for(const z of Rb(h,500)){let V=0;for(const W of z)V+=W.length;const T=this.segments.prepareSegment(V,this.layoutVertexArray,this.indexArray),D=T.vertexLength,H=[],O=[];for(const W of z){if(W.length===0)continue;W!==z[0]&&O.push(H.length/2);const re=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),he=re.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(he+W.length-1,he),H.push(W[0].x),H.push(W[0].y);for(let Se=1;Se<W.length;Se++)this.layoutVertexArray.emplaceBack(W[Se].x,W[Se].y),this.indexArray2.emplaceBack(he+Se-1,he+Se),H.push(W[Se].x),H.push(W[Se].y);re.vertexLength+=W.length,re.primitiveLength+=W.length}const Q=W1(H,O);for(let W=0;W<Q.length;W+=3)this.indexArray.emplaceBack(D+Q[W],D+Q[W+1],D+Q[W+2]);T.vertexLength+=V,T.primitiveLength+=Q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,y,b,_,F)}}let gP,yP,vP,xP;Pe(MS,"FillBucket",{omit:["layers","patternFeatures"]});class jS{constructor(a,h,p,_){if(this.triangleCount=h.length/3,this.min=new Ye(0,0),this.max=new Ye(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||a.length===0)return;const[y,b]=[a[0].clone(),a[0].clone()];for(let D=1;D<a.length;++D){const H=a[D];y.x=Math.min(y.x,H.x),y.y=Math.min(y.y,H.y),b.x=Math.max(b.x,H.x),b.y=Math.max(b.y,H.y)}if(_){const D=Math.ceil(Math.max(b.x-y.x,b.y-y.y)/_);p=Math.max(p,D)}if(p===0)return;this.min=y,this.max=b;const F=this.max.sub(this.min);F.x=Math.max(F.x,1),F.y=Math.max(F.y,1);const z=Math.max(F.x,F.y)/p;this.cellsX=Math.max(1,Math.ceil(F.x/z)),this.cellsY=Math.max(1,Math.ceil(F.y/z)),this.xScale=1/z,this.yScale=1/z;const V=[];for(let D=0;D<this.triangleCount;D++){const H=a[h[3*D+0]].sub(this.min),O=a[h[3*D+1]].sub(this.min),Q=a[h[3*D+2]].sub(this.min),W=tp(Math.floor(Math.min(H.x,O.x,Q.x)),this.xScale,this.cellsX),re=tp(Math.floor(Math.max(H.x,O.x,Q.x)),this.xScale,this.cellsX),he=tp(Math.floor(Math.min(H.y,O.y,Q.y)),this.yScale,this.cellsY),Se=tp(Math.floor(Math.max(H.y,O.y,Q.y)),this.yScale,this.cellsY),Te=new Ye(0,0),de=new Ye(0,0),je=new Ye(0,0),Ve=new Ye(0,0);for(let et=he;et<=Se;++et){Te.y=de.y=et*z,je.y=Ve.y=(et+1)*z;for(let dt=W;dt<=re;++dt)Te.x=je.x=dt*z,de.x=Ve.x=(dt+1)*z,(oo(H,O,Q,Te,de,Ve)||oo(H,O,Q,Te,Ve,je))&&V.push({cellIdx:et*this.cellsX+dt,triIdx:D})}}if(V.length===0)return;V.sort((D,H)=>D.cellIdx-H.cellIdx||D.triIdx-H.triIdx);let T=0;for(;T<V.length;){const D=V[T].cellIdx,H={start:this.payload.length,len:0};for(;T<V.length&&V[T].cellIdx===D;)++H.len,this.payload.push(V[T++].triIdx);this.cells[D]=H}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(a,h){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>a.x||a.y>this.max.y||this.min.y>a.y)return;const p=tp(a.x-this.min.x,this.xScale,this.cellsX),_=tp(a.y-this.min.y,this.yScale,this.cellsY),y=this.cells[_*this.cellsX+p];if(y){this._lazyInitLookup();for(let b=0;b<y.len;b++){const F=this.payload[y.start+b],z=Math.floor(F/8),V=1<<F%8;if(!(this.lookup[z]&V)&&(this.lookup[z]|=V,h.push(F),h.length===this.triangleCount))return}}}query(a,h,p){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>h.x||a.y>this.max.y||this.min.y>h.y)return;this._lazyInitLookup();const _=tp(a.x-this.min.x,this.xScale,this.cellsX),y=tp(h.x-this.min.x,this.xScale,this.cellsX),b=tp(a.y-this.min.y,this.yScale,this.cellsY),F=tp(h.y-this.min.y,this.yScale,this.cellsY);for(let z=b;z<=F;z++)for(let V=_;V<=y;V++){const T=this.cells[z*this.cellsX+V];if(T)for(let D=0;D<T.len;D++){const H=this.payload[T.start+D],O=Math.floor(H/8),Q=1<<H%8;if(!(this.lookup[O]&Q)&&(this.lookup[O]|=Q,p.push(H),p.length===this.triangleCount))return}}}}function tp(f,a,h){return Math.max(0,Math.min(h-1,Math.floor(f*a)))}Pe(jS,"TriangleGridIndex");class _P{constructor(a){this.zoom=a.zoom,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=a.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.footprints=[]}updateFootprints(a,h){for(const p of this.footprints)h.push({footprint:p,id:a})}populate(a,h,p,_){const y=[];for(const{feature:b,id:F,index:z,sourceLayerIndex:V}of a){const T=this.layers[0]._featureFilter.needGeometry,D=sn(b,T);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),D,p))continue;const H={id:F,properties:b.properties,type:b.type,sourceLayerIndex:V,index:z,geometry:T?D.geometry:tn(b,p,_),patterns:{}};y.push(H)}for(const b of y){const{geometry:F,index:z,sourceLayerIndex:V}=b;this.addFeature(b,F,z,p,{},h.availableImages,h.brightness),h.featureIndex.insert(a[z].feature,F,z,V,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(a){}update(a,h,p,_,y){}destroy(){}addFeature(a,h,p,_,y,b=[],F){for(const z of Rb(h,2)){const V=[],T=[],D=[],H=new Ye(1/0,1/0),O=new Ye(-1/0,-1/0);for(const re of z)if(re.length!==0){re!==z[0]&&D.push(T.length/2);for(let he=0;he<re.length;he++)T.push(re[he].x),T.push(re[he].y),V.push(re[he]),H.x=Math.min(H.x,re[he].x),H.y=Math.min(H.y,re[he].y),O.x=Math.max(O.x,re[he].x),O.y=Math.max(O.y,re[he].y)}const Q=W1(T,D),W=new jS(V,Q,8,256);this.footprints.push({vertices:V,indices:Q,grid:W,min:H,max:O})}}}Pe(_P,"ClipBucket",{omit:["layers"]});const aY=os([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),lY=os([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),cY=os([{name:"a_centroid_pos",components:2,type:"Uint16"}]),uY=os([{name:"a_join_normal_inside",components:3,type:"Int16"}]),hY=os([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),dY=os([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:fY}=aY;var kS,bP,DS,wP,OS,CP,SP,Ub={};function BP(){if(bP)return kS;bP=1;var f=fr();function a(_,y,b,F,z){this.properties={},this.extent=b,this.type=0,this._pbf=_,this._geometry=-1,this._keys=F,this._values=z,_.readFields(h,this,y)}function h(_,y,b){_==1?y.id=b.readVarint():_==2?function(F,z){for(var V=F.readVarint()+F.pos;F.pos<V;){var T=z._keys[F.readVarint()],D=z._values[F.readVarint()];z.properties[T]=D}}(b,y):_==3?y.type=b.readVarint():_==4&&(y._geometry=b.pos)}function p(_){for(var y,b,F=0,z=0,V=_.length,T=V-1;z<V;T=z++)F+=((b=_[T]).x-(y=_[z]).x)*(y.y+b.y);return F}return kS=a,a.types=["Unknown","Point","LineString","Polygon"],a.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var y,b=_.readVarint()+_.pos,F=1,z=0,V=0,T=0,D=[];_.pos<b;){if(z<=0){var H=_.readVarint();F=7&H,z=H>>3}if(z--,F===1||F===2)V+=_.readSVarint(),T+=_.readSVarint(),F===1&&(y&&D.push(y),y=[]),y.push(new f(V,T));else{if(F!==7)throw new Error("unknown command "+F);y&&y.push(y[0].clone())}}return y&&D.push(y),D},a.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var y=_.readVarint()+_.pos,b=1,F=0,z=0,V=0,T=1/0,D=-1/0,H=1/0,O=-1/0;_.pos<y;){if(F<=0){var Q=_.readVarint();b=7&Q,F=Q>>3}if(F--,b===1||b===2)(z+=_.readSVarint())<T&&(T=z),z>D&&(D=z),(V+=_.readSVarint())<H&&(H=V),V>O&&(O=V);else if(b!==7)throw new Error("unknown command "+b)}return[T,H,D,O]},a.prototype.toGeoJSON=function(_,y,b){var F,z,V=this.extent*Math.pow(2,b),T=this.extent*_,D=this.extent*y,H=this.loadGeometry(),O=a.types[this.type];function Q(he){for(var Se=0;Se<he.length;Se++){var Te=he[Se];he[Se]=[360*(Te.x+T)/V-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+D)/V)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(F=0;F<H.length;F++)W[F]=H[F][0];Q(H=W);break;case 2:for(F=0;F<H.length;F++)Q(H[F]);break;case 3:for(H=function(he){var Se=he.length;if(Se<=1)return[he];for(var Te,de,je=[],Ve=0;Ve<Se;Ve++){var et=p(he[Ve]);et!==0&&(de===void 0&&(de=et<0),de===et<0?(Te&&je.push(Te),Te=[he[Ve]]):Te.push(he[Ve]))}return Te&&je.push(Te),je}(H),F=0;F<H.length;F++)for(z=0;z<H[F].length;z++)Q(H[F][z])}H.length===1?H=H[0]:O="Multi"+O;var re={type:"Feature",geometry:{type:O,coordinates:H},properties:this.properties};return"id"in this&&(re.id=this.id),re},kS}function EP(){if(wP)return DS;wP=1;var f=BP();function a(p,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(h,this,_),this.length=this._features.length}function h(p,_,y){p===15?_.version=y.readVarint():p===1?_.name=y.readString():p===5?_.extent=y.readVarint():p===2?_._features.push(y.pos):p===3?_._keys.push(y.readString()):p===4&&_._values.push(function(b){for(var F=null,z=b.readVarint()+b.pos;b.pos<z;){var V=b.readVarint()>>3;F=V===1?b.readString():V===2?b.readFloat():V===3?b.readDouble():V===4?b.readVarint64():V===5?b.readVarint():V===6?b.readSVarint():V===7?b.readBoolean():null}return F}(y))}return DS=a,a.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var _=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,_,this.extent,this._keys,this._values)},DS}function TP(){return SP||(SP=1,Ub.VectorTile=function(){if(CP)return OS;CP=1;var f=EP();function a(h,p,_){if(h===3){var y=new f(_,_.readVarint()+_.pos);y.length&&(p[y.name]=y)}}return OS=function(h,p){this.layers=h.readFields(a,{},p)},OS}(),Ub.VectorTileFeature=BP(),Ub.VectorTileLayer=EP()),Ub}var R0=TP();class fg extends Ye{constructor(a,h,p){super(a,h),this.z=p}}class IP extends fg{constructor(a,h,p,_){super(a,h,p),this.w=_}}function zb(f,a,h,p){const _=[],y=p===0?(b,F,z,V,T,D)=>{b.push(new Ye(D,z+(D-F)/(V-F)*(T-z)))}:(b,F,z,V,T,D)=>{b.push(new Ye(F+(D-z)/(T-z)*(V-F),D))};for(const b of f){const F=[];for(const z of b){if(z.length<=2)continue;const V=[];for(let H=0;H<z.length-1;H++){const O=z[H].x,Q=z[H].y,W=z[H+1].x,re=z[H+1].y,he=p===0?O:Q,Se=p===0?W:re;he<a?Se>a&&y(V,O,Q,W,re,a):he>h?Se<h&&y(V,O,Q,W,re,h):V.push(z[H]),Se<a&&he>=a&&y(V,O,Q,W,re,a),Se>h&&he<=h&&y(V,O,Q,W,re,h)}let T=z[z.length-1];const D=p===0?T.x:T.y;D>=a&&D<=h&&V.push(T),V.length&&(T=V[V.length-1],V[0].x===T.x&&V[0].y===T.y||V.push(V[0]),F.push(V))}F.length&&_.push(F)}return _}function LP(f,a,h,p){const _=h==="x"?"y":"x",y=(p-f[h])/(a[h]-f[h]);f[_]=f[_]+(a[_]-f[_])*y,f[h]=p,f.hasOwnProperty("z")&&(f.z=Sr(f.z,a.z,y)),f.hasOwnProperty("w")&&(f.w=Sr(f.w,a.w,y))}function FP(f,a,h,p){const _=h,y=p;for(const b of["x","y"]){let F=f,z=a;F[b]>=z[b]&&(F=a,z=f),F[b]<_&&z[b]>_&&LP(F,z,b,_),F[b]<y&&z[b]>y&&LP(z,F,b,y)}}const Qb=Number.MAX_SAFE_INTEGER;function NP(f,a,h,p){return f.order<a||f.order===Qb||!(f.clipMask&h)||function(_,y){return y.length!==0&&y.find(b=>b===_)===void 0}(p,f.clipScope)}function Hb(f,a){return f.x-a.x||f.y-a.y}function PP(f,a){return Hb(f.min,a.min)===0&&Hb(f.max,a.max)===0}function RS(f,a){return!(f.min.x>a.max.x||f.max.x<a.min.x||f.min.y>a.max.y||f.max.y<a.min.y)}function US(f,a){if(f.length!==a.length)return!1;for(let h=0;h<f.length;h++)if(f[h].sourceId!==a[h].sourceId||!PP(f[h],a[h])||f[h].order!==a[h].order||f[h].clipMask!==a[h].clipMask||!Re(f[h].clipScope,a[h].clipScope))return!1;return!0}function MP(f,a,h){const p=1/Jr,_=1/(1<<h.canonical.z),y=(a.x*p+h.canonical.x)*_+h.wrap,b=(a.y*p+h.canonical.y)*_;return{min:new Ye((f.x*p+h.canonical.x)*_+h.wrap,(f.y*p+h.canonical.y)*_),max:new Ye(y,b)}}function pY(f,a,h){const p=1<<h.canonical.z,_=((a.x-h.wrap)*p-h.canonical.x)*Jr,y=(a.y*p-h.canonical.y)*Jr;return{min:new Ye(((f.x-h.wrap)*p-h.canonical.x)*Jr,(f.y*p-h.canonical.y)*Jr),max:new Ye(_,y)}}function jP(f,a,h,p,_,y,b){const F=f.indices,z=f.vertices,V=[];for(let T=p;T<p+_;T+=3){const D=a[h[T+0]+y],H=a[h[T+1]+y],O=a[h[T+2]+y],Q=Math.min(D.x,H.x,O.x),W=Math.max(D.x,H.x,O.x),re=Math.min(D.y,H.y,O.y),he=Math.max(D.y,H.y,O.y);V.length=0,f.grid.query(new Ye(Q,re),new Ye(W,he),V);for(let Se=0;Se<V.length;Se++){const Te=V[Se];if(oo(z[F[3*Te+0]],z[F[3*Te+1]],z[F[3*Te+2]],D,H,O,b))return!0}}return!1}function kP(f,a,h,p){if(!f||!h)return!1;let _=f.vertices;if(!a.canonical.equals(p.canonical)||a.wrap!==p.wrap){if(h.vertices.length<f.vertices.length)return kP(h,p,f,a);const y=a.canonical,b=p.canonical,F=Math.pow(2,b.z-y.z);_=f.vertices.map(z=>new Ye((z.x+y.x*Jr)*F-b.x*Jr,(z.y+y.y*Jr)*F-b.y*Jr))}return jP(h,_,f.indices,0,f.indices.length,0,0)}function DP(f,a,h,p){const _=Math.pow(2,p.z-h.z);return new Ye((f+h.x*Jr)*_-p.x*Jr,(a+h.y*Jr)*_-p.y*Jr)}function OP(f,a){const h=[];a.grid.queryPoint(f,h);const p=a.indices,_=a.vertices;for(let y=0;y<h.length;y++){const b=h[y];if(ko([_[p[3*b+0]],_[p[3*b+1]],_[p[3*b+2]]],f))return!0}return!1}const zS=[new Ye(0,0),new Ye(Jr,0),new Ye(Jr,Jr),new Ye(0,Jr)];function RP(f,a){const h=[];let p=[];if(!a||f.length<2)return[f];if(f.length===2)return Xa(f[0],f[1],zS)?[f]:[];for(let _=0;_<f.length+2;_++){const y=f[_%f.length],b=f[(_+1)%f.length],F=Xa(_===0?f[f.length-1]:f[(_-1)%f.length],y,zS),z=Xa(y,b,zS),V=F||z;V&&p.push(y),V&&z||p.length>0&&(p.length>1&&h.push(p),p=[])}return p.length>1&&h.push(p),h}const QS=R0.VectorTileFeature.types,AY=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],mY=["fill-extrusion-flood-light-ground-radius"],gY=Math.pow(2,13),yY=Math.pow(2,15)-1,UP=new Ye(0,1),PA=2147483648;function Z1(f,a,h,p,_,y,b,F){f.emplaceBack((a<<1)+b,(h<<1)+y,(Math.floor(p*gY)<<1)+_,Math.round(F))}function J1(f,a,h){f.emplaceBack(a.x*Jr,a.y*Jr,h?1:0)}function Vb(f,a,h,p,_,y){f.emplaceBack(a.x,a.y,(h.x<<1)+p,(h.y<<1)+_,y)}function ev(f,a,h){f.emplaceBack(a.x,a.y,a.z,h[0]*16384,h[1]*16384,h[2]*16384)}class zP{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class QP{constructor(){this.centroidXY=new Ye(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Ye(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Ye(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Ye(this.max.x-this.min.x,this.max.y-this.min.y)}}class HP{constructor(){this.acc=new Ye(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(a,h){a.min.x===Number.MAX_VALUE&&(a.min.x=a.max.x=h.x,a.min.y=a.max.y=h.y)}appendEdge(a,h,p){this.accCount++,this.acc._add(h);let _=!!this.borders;h.x<a.min.x?(a.min.x=h.x,_=!0):h.x>a.max.x&&(a.max.x=h.x,_=!0),h.y<a.min.y?(a.min.y=h.y,_=!0):h.y>a.max.y&&(a.max.y=h.y,_=!0),((h.x===0||h.x===Jr)&&h.x===p.x)!=((h.y===0||h.y===Jr)&&h.y===p.y)&&this.processBorderOverlap(h,p),_&&this.checkBorderIntersection(h,p)}checkBorderIntersection(a,h){h.x<0!=a.x<0&&this.addBorderIntersection(0,Sr(h.y,a.y,(0-h.x)/(a.x-h.x))),h.x>Jr!=a.x>Jr&&this.addBorderIntersection(1,Sr(h.y,a.y,(Jr-h.x)/(a.x-h.x))),h.y<0!=a.y<0&&this.addBorderIntersection(2,Sr(h.x,a.x,(0-h.y)/(a.y-h.y))),h.y>Jr!=a.y>Jr&&this.addBorderIntersection(3,Sr(h.x,a.x,(Jr-h.y)/(a.y-h.y)))}addBorderIntersection(a,h){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[a];h<p[0]&&(p[0]=h),h>p[1]&&(p[1]=h)}processBorderOverlap(a,h){if(a.x===h.x){if(a.y===h.y)return;const p=a.x===0?0:1;this.addBorderIntersection(p,h.y),this.addBorderIntersection(p,a.y)}else{const p=a.y===0?2:3;this.addBorderIntersection(p,h.x),this.addBorderIntersection(p,a.x)}}centroid(){return this.accCount===0?new Ye(0,0):new Ye(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((a,h)=>a+ +(h[0]!==Number.MAX_VALUE),0):0}}function VP(f,a){const h=f.add(a)._unit(),p=Ir(f.x*h.x+f.y*h.y,-1,1);var _,y,b;return b=Math.acos(p),Math.min(4,Math.max(-4,Math.tan(b)))/4*yY*((_=f).x*(y=a).y-_.y*y.x<0?-1:1)}const vY=[f=>f.x<0,f=>f.x>Jr,f=>f.y<0,f=>f.y>Jr];function xY(f,a,h,p){const _=[4];if(p===0)return _;h._mult(p);const y=f.sub(h),b=a.sub(h),F=[f,a,y,b];for(let z=0;z<4;z++)for(const V of F)if(vY[z](V)){_.push(z);break}return _}class GP{constructor(a){this.vertexArray=new Bu,this.indexArray=new Ka,this.programConfigurations=new Zf(a.layers,{zoom:a.zoom,lut:a.lut},h=>mY.includes(h)),this._segments=new Ia,this.hiddenByLandmarkVertexArray=new Fd,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Ia}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(a,h,p,_=!1){const y=a.length;if(y>2){let b=Math.max(0,this._segments.get().length-1);const F=this._segments._prepareSegment(4*y,this.vertexArray.length,2*this._segmentToGroundQuads[b].length);let z;b!==this._segments.get().length-1&&(b++,this._segmentToGroundQuads[b]=[],this._segmentToRegionTriCounts[b]=[0,0,0,0,0]);{const V=a[0],T=a[1];z=VP(V.sub(a[y-1])._perp()._unit(),T.sub(V)._perp()._unit())}for(let V=0;V<y;V++){const T=V===y-1?0:V+1,D=a[V],H=a[T],O=a[T===y-1?0:T+1],Q=H.sub(D)._perp()._unit(),W=VP(Q,O.sub(H)._perp()._unit()),re=z,he=W;if(HS(D,H,h)||_&&WP(D,h)&&WP(H,h)){z=W;continue}const Se=F.vertexLength;Vb(this.vertexArray,D,H,1,1,re),Vb(this.vertexArray,D,H,1,0,re),Vb(this.vertexArray,D,H,0,1,he),Vb(this.vertexArray,D,H,0,0,he),F.vertexLength+=4;const Te=xY(D,H,Q,p);for(const de of Te)this._segmentToGroundQuads[b].push({id:Se,region:de}),this._segmentToRegionTriCounts[b][de]+=2,F.primitiveLength+=2;z=W}}}prepareBorderSegments(){if(!this.hasData())return;const a=this._segments.get(),h=a.length;for(let p=0;p<h;p++)this._segmentToGroundQuads[p].sort((_,y)=>_.region-y.region);for(let p=0;p<h;p++){const _=this._segmentToGroundQuads[p],y=a[p],b=this._segmentToRegionTriCounts[p];b.reduce((z,V)=>z+V,0);let F=0;for(let z=0;z<=4;z++){const V=b[z];if(V!==0){let T=this.regionSegments[z];T||(T=this.regionSegments[z]=new Ia);const D={vertexOffset:y.vertexOffset,primitiveOffset:y.primitiveOffset+F,vertexLength:y.vertexLength,primitiveLength:V};T.get().push(D)}F+=V}for(let z=0;z<_.length;z++){const V=_[z].id;this.indexArray.emplaceBack(V,V+1,V+3),this.indexArray.emplaceBack(V,V+3,V+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(a,h,p,_,y,b){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,a,h,p,_,y,b)}upload(a){this.hasData()&&(this.vertexBuffer=a.createVertexBuffer(this.vertexArray,lY.members),this.indexBuffer=a.createIndexBuffer(this.indexArray))}uploadPaintProperties(a){this.hasData()&&this.programConfigurations.upload(a)}update(a,h,p,_,y,b){this.hasData()&&this.programConfigurations.updatePaintArrays(a,h,p,_,y,b)}updateHiddenByLandmark(a){if(!this.hasData())return;const h=a.groundVertexCount+a.groundVertexArrayOffset;if(a.groundVertexCount===0)return;const p=a.flags&PA?1:0;for(let _=a.groundVertexArrayOffset;_<h;++_)this.hiddenByLandmarkVertexArray.emplace(_,p);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(a){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=a.createVertexBuffer(this.hiddenByLandmarkVertexArray,hY.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let a=0;a<=4;a++){const h=this.regionSegments[a];h&&h.destroy()}}}}class Gb{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ka,this.footprintVertices=new Bc,this.footprintSegments=[],this.layoutVertexArray=new Su,this.centroidVertexArray=new Bb,this.wallVertexArray=new z1,this.indexArray=new Ka,this.programConfigurations=new Zf(a.layers,{zoom:a.zoom,lut:a.lut},h=>AY.includes(h)),this.segments=new Ia,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.groundEffect=new GP(a),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(a,h){}populate(a,h,p,_){this.features=[],this.hasPattern=NS("fill-extrusion",this.layers,h),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=Dt(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:y,id:b,index:F,sourceLayerIndex:z}of a){const V=this.layers[0]._featureFilter.needGeometry,T=sn(y,V);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),T,p))continue;const D={id:b,sourceLayerIndex:z,index:F,geometry:V?T.geometry:tn(y,p,_),properties:y.properties,type:y.type,patterns:{}},H=this.layoutVertexArray.length,O=QS[D.type]==="Polygon";if(this.hasPattern)this.features.push(PS("fill-extrusion",this.layers,D,this.zoom,h));else if(this.wallMode)for(const Q of D.geometry)for(const W of RP(Q,O))this.addFeature(D,[W],F,p,{},h.availableImages,_,h.brightness);else this.addFeature(D,D.geometry,F,p,{},h.availableImages,_,h.brightness);h.featureIndex.insert(y,D.geometry,F,z,this.index,H)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(a,h,p,_,y,b){for(const F of this.features){const z=QS[F.type]==="Polygon",{geometry:V}=F;if(this.wallMode)for(const T of V)for(const D of RP(T,z))this.addFeature(F,[D],F.index,h,p,_,y,b);else this.addFeature(F,V,F.index,h,p,_,y,b)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(a,h,p,_,y){const b=Object.keys(a).length!==0;if(b&&!this.stateDependentLayers.length)return;const F=b?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(a,h,F,p,_,y),this.groundEffect.update(a,h,F,p,_,y)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,fY),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.wallVertexBuffer=a.createVertexBuffer(this.wallVertexArray,uY.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,dY.members,!0)),this.groundEffect.upload(a)),this.groundEffect.uploadPaintProperties(a),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){this.groundEffect.uploadHiddenByLandmark(a),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,cY.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,h,p,_,y,b,F,z){const V=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(a,{})/this.tileToMeter,T=[new Ye(0,0),new Ye(Jr,Jr)],D=F.projection,H=D.name==="globe",O=this.wallMode||QS[a.type]==="Polygon",Q=new HP;Q.centroidDataIndex=this.centroidData.length;const W=new QP,re=this.layers[0].paint.get("fill-extrusion-base").evaluate(a,{},_)<=0,he=this.layers[0].paint.get("fill-extrusion-height").evaluate(a,{},_);let Se;if(W.height=he,W.vertexArrayOffset=this.layoutVertexArray.length,W.groundVertexArrayOffset=this.groundEffect.vertexArray.length,H&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ed),this.wallMode){if(H)return void ti("Non zero fill-extrusion-line-width is not yet supported on globe.");if(h.length!==1)return;Se=function(at){const Et=at[0].x===at[at.length-1].x&&at[0].y===at[at.length-1].y;(function(rn){let Vr=0;const Zn=rn.length;for(let wn=0;wn<Zn;wn++)Vr+=(rn[(wn+1)%Zn].x-rn[wn].x)*(rn[(wn+1)%Zn].y+rn[wn].y);return Vr>=0})(at)||(at=at.reverse());const Nt={geometry:[],joinNormals:[],indices:[]},zt=[],Gt=[],qt=[];let Jt=at.length;if(Jt<(Et?3:2))return Nt;for(;Jt>=2&&at[Jt-1].equals(at[Jt-2]);)Jt--;let vr,rr,Br,Ur,br,Cn=0;for(;Cn<Jt-1&&at[Cn].equals(at[Cn+1]);)Cn++;Et&&(vr=at[Jt-2],br=at[Cn].sub(vr)._unit()._perp());for(let rn=Cn;rn<Jt;rn++){if(Br=rn===Jt-1?Et?at[Cn+1]:void 0:at[rn+1],Br&&at[rn].equals(Br))continue;br&&(Ur=br),vr&&(rr=vr),vr=at[rn],br=Br?Br.sub(vr)._unit()._perp():Ur,Ur=Ur||br;let Vr=Ur.add(br);Vr.x===0&&Vr.y===0||Vr._unit();const Zn=Vr.x*br.x+Vr.y*br.y,wn=Zn!==0?1/Zn:1/0,Pn=Ur.x*br.y-Ur.y*br.x>0;let hi="miter";const Oi=2;hi==="miter"&&wn>Oi&&(hi="bevel"),hi==="bevel"&&(wn>100&&(hi="flipbevel"),wn<Oi&&(hi="miter"));const Ti=(Ii,qi,Wi,fo)=>{const Vs=new Ye(Ii.x,Ii.y),Ai=new Ye(Ii.x,Ii.y);Vs.x+=qi.x*fo,Vs.y+=qi.y*fo,Ai.x-=qi.x*Math.max(Wi,1),Ai.y-=qi.y*Math.max(Wi,1),qt.push(qi),zt.push(Vs),Gt.push(Ai)};if(hi==="miter")Vr._mult(wn),Ti(vr,Vr,0,0);else if(hi==="flipbevel")Vr=br.mult(-1),Ti(vr,Vr,0,0),Ti(vr,Vr.mult(-1),0,0);else{const Ii=-Math.sqrt(wn*wn-1),qi=Pn?Ii:0,Wi=Pn?0:Ii;rr&&Ti(vr,Ur,qi,Wi),Br&&Ti(vr,br,qi,Wi)}}Nt.geometry=[...zt,...Gt.reverse(),zt[0]],Nt.joinNormals=[...qt,...qt.reverse(),qt[qt.length-1]];const dn=Nt.geometry.length-1;for(let rn=0;rn<dn/2;rn++)if(rn+1<dn/2){let Vr=rn,Zn=rn+1,wn=dn-1-rn,Pn=dn-2-rn;Vr=Vr===0?dn-1:Vr-1,Zn=Zn===0?dn-1:Zn-1,wn=wn===0?dn-1:wn-1,Pn=Pn===0?dn-1:Pn-1,Nt.indices.push(wn),Nt.indices.push(Zn),Nt.indices.push(Vr),Nt.indices.push(wn),Nt.indices.push(Pn),Nt.indices.push(Zn)}return Nt}(h[0]),h=[Se.geometry]}const Te=(at,Et)=>at<(Et.length-1)/2||at===Et.length-1,de=this.wallMode?[h]:Rb(h,500);for(let at=de.length-1;at>=0;at--){const Et=de[at];(Et.length===0||(je=Et[0]).every(yt=>yt.x<=0)||je.every(yt=>yt.x>=Jr)||je.every(yt=>yt.y<=0)||je.every(yt=>yt.y>=Jr))&&de.splice(at,1)}var je;let Ve;if(H)Ve=ZP(de,T,_);else{Ve=[];for(const at of de)Ve.push({polygon:at,bounds:T})}const et=O?this.edgeRadius:0,dt=et>0&&this.zoom<17,pt=(at,Et)=>{if(at.length===0)return!1;const yt=at[at.length-1];return Et.x===yt.x&&Et.y===yt.y};for(const{polygon:at,bounds:Et}of Ve){let yt=0,Nt=0;for(const Jt of at)O&&!Jt[0].equals(Jt[Jt.length-1])&&Jt.push(Jt[0]),Nt+=O?Jt.length-1:Jt.length;const zt=this.segments.prepareSegment((O?5:4)*Nt,this.layoutVertexArray,this.indexArray);W.footprintSegIdx<0&&(W.footprintSegIdx=this.footprintSegments.length),W.polygonSegIdx<0&&(W.polygonSegIdx=this.polygonSegments.length);const Gt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},qt=new zP;if(qt.vertexOffset=this.footprintVertices.length,qt.indexOffset=3*this.footprintIndices.length,qt.ringIndices=[],O){const Jt=[],vr=[];yt=zt.vertexLength;for(let Br=0;Br<at.length;Br++){const Ur=at[Br];Ur.length&&Br!==0&&vr.push(Jt.length/2);const br=[];let Cn,dn;Cn=Ur[1].sub(Ur[0])._perp()._unit(),qt.ringIndices.push(Ur.length-1);for(let rn=1;rn<Ur.length;rn++){const Vr=Ur[rn],Zn=Ur[rn===Ur.length-1?1:rn+1],wn=Vr.clone();if(et){dn=Zn.sub(Vr)._perp()._unit();const Pn=Cn.add(dn)._unit(),hi=et*Math.min(4,1/(Cn.x*Pn.x+Cn.y*Pn.y));wn.x+=hi*Pn.x,wn.y+=hi*Pn.y,wn.x=Math.round(wn.x),wn.y=Math.round(wn.y),Cn=dn}if(!re||et!==0&&!dt||pt(br,wn)||br.push(wn),Z1(this.layoutVertexArray,wn.x,wn.y,0,0,1,1,0),this.wallMode){const Pn=Te(rn,Ur);J1(this.wallVertexArray,Se.joinNormals[rn],!Pn)}zt.vertexLength++,this.footprintVertices.emplaceBack(Vr.x,Vr.y),Jt.push(Vr.x,Vr.y),H&&ev(this.layoutVertexExtArray,D.projectTilePoint(wn.x,wn.y,_),D.upVector(_,wn.x,wn.y))}re&&(et===0||dt)&&(br.length!==0&&pt(br,br[0])&&br.pop(),this.groundEffect.addData(br,Et,V))}const rr=this.wallMode?Se.indices:W1(Jt,vr);for(let Br=0;Br<rr.length;Br+=3)this.footprintIndices.emplaceBack(qt.vertexOffset+rr[Br+0],qt.vertexOffset+rr[Br+1],qt.vertexOffset+rr[Br+2]),this.indexArray.emplaceBack(yt+rr[Br],yt+rr[Br+2],yt+rr[Br+1]),zt.primitiveLength++;qt.indexCount+=rr.length,qt.vertexCount+=this.footprintVertices.length-qt.vertexOffset}for(let Jt=0;Jt<at.length;Jt++){const vr=at[Jt];Q.startRing(W,vr[0]);let rr=vr.length>4&&KP(vr[vr.length-2],vr[0],vr[1]),Br=et?_Y(vr[vr.length-2],vr[0],vr[1],et):0;const Ur=[];let br,Cn,dn;Cn=vr[1].sub(vr[0])._perp()._unit();let rn=!0;for(let Vr=1,Zn=0;Vr<vr.length;Vr++){let wn=vr[Vr-1],Pn=vr[Vr];const hi=vr[Vr===vr.length-1?1:Vr+1];if(Q.appendEdge(W,Pn,wn),HS(Pn,wn,Et)){et&&(Cn=hi.sub(Pn)._perp()._unit(),rn=!rn);continue}const Oi=Pn.sub(wn)._perp(),Ti=Oi.x/(Math.abs(Oi.x)+Math.abs(Oi.y)),Ii=Oi.y>0?1:0,qi=wn.dist(Pn);if(Zn+qi>32768&&(Zn=0),et){dn=hi.sub(Pn)._perp()._unit();let Ai=$P(wn,Pn,hi,qP(Cn,dn),et);isNaN(Ai)&&(Ai=0);const Ps=Pn.sub(wn)._unit();wn=wn.add(Ps.mult(Br))._round(),Pn=Pn.add(Ps.mult(-Ai))._round(),Br=Ai,Cn=dn,re&&this.zoom>=17&&(pt(Ur,wn)||Ur.push(wn),pt(Ur,Pn)||Ur.push(Pn))}const Wi=zt.vertexLength,fo=vr.length>4&&KP(wn,Pn,hi);let Vs=XP(Zn,rr,rn);if(Z1(this.layoutVertexArray,wn.x,wn.y,Ti,Ii,0,0,Vs),Z1(this.layoutVertexArray,wn.x,wn.y,Ti,Ii,0,1,Vs),this.wallMode){const Ai=Te(Vr-1,vr),Ps=Se.joinNormals[Vr-1];J1(this.wallVertexArray,Ps,Ai),J1(this.wallVertexArray,Ps,Ai)}if(Zn+=qi,Vs=XP(Zn,fo,!rn),rr=fo,Z1(this.layoutVertexArray,Pn.x,Pn.y,Ti,Ii,0,0,Vs),Z1(this.layoutVertexArray,Pn.x,Pn.y,Ti,Ii,0,1,Vs),this.wallMode){const Ai=Te(Vr,vr),Ps=Se.joinNormals[Vr];J1(this.wallVertexArray,Ps,Ai),J1(this.wallVertexArray,Ps,Ai)}if(zt.vertexLength+=4,this.indexArray.emplaceBack(Wi+0,Wi+1,Wi+2),this.indexArray.emplaceBack(Wi+1,Wi+3,Wi+2),zt.primitiveLength+=2,et){const Ai=yt+(Vr===1?vr.length-2:Vr-2),Ps=Vr===1?yt:Ai+1;if(this.indexArray.emplaceBack(Wi+1,Ai,Wi+3),this.indexArray.emplaceBack(Ai,Ps,Wi+3),zt.primitiveLength+=2,br===void 0&&(br=Wi),!HS(hi,vr[Vr],Et)){const Os=Vr===vr.length-1?br:zt.vertexLength;this.indexArray.emplaceBack(Wi+2,Wi+3,Os),this.indexArray.emplaceBack(Wi+3,Os+1,Os),this.indexArray.emplaceBack(Wi+3,Ps,Os+1),zt.primitiveLength+=3}rn=!rn}if(H){const Ai=this.layoutVertexExtArray,Ps=D.projectTilePoint(wn.x,wn.y,_),Os=D.projectTilePoint(Pn.x,Pn.y,_),Do=D.upVector(_,wn.x,wn.y),Da=D.upVector(_,Pn.x,Pn.y);ev(Ai,Ps,Do),ev(Ai,Ps,Do),ev(Ai,Os,Da),ev(Ai,Os,Da)}}O&&(yt+=vr.length-1),re&&et&&this.zoom>=17&&(Ur.length!==0&&pt(Ur,Ur[0])&&Ur.pop(),this.groundEffect.addData(Ur,Et,V,et>0))}this.footprintSegments.push(qt),Gt.triangleCount=this.indexArray.length-Gt.triangleArrayOffset,this.polygonSegments.push(Gt),++W.footprintSegLen,++W.polygonSegLen}if(W.vertexCount=this.layoutVertexArray.length-W.vertexArrayOffset,W.groundVertexCount=this.groundEffect.vertexArray.length-W.groundVertexArrayOffset,W.vertexCount!==0){if(W.centroidXY=Q.borders?UP:this.encodeCentroid(Q,W),this.centroidData.push(W),Q.borders){this.featuresOnBorder.push(Q);const at=this.featuresOnBorder.length-1;for(let Et=0;Et<Q.borders.length;Et++)Q.borders[Et][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Et].push(at)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,y,b,_,z),this.groundEffect.addPaintPropertiesData(a,p,y,b,_,z),this.maxHeight=Math.max(this.maxHeight,he)}}sortBorders(){for(let a=0;a<this.borderFeatureIndices.length;a++)this.borderFeatureIndices[a].sort((h,p)=>this.featuresOnBorder[h].borders[a][0]-this.featuresOnBorder[p].borders[a][0])}splitToSubtiles(){const a=[];for(let F=0;F<this.centroidData.length;F++){const z=this.centroidData[F],V=+(z.min.y+z.max.y>Jr),T=2*V+(+(z.min.x+z.max.x>Jr)^V);for(let D=0;D<z.polygonSegLen;D++){const H=z.polygonSegIdx+D;a.push({centroidIdx:F,subtile:T,polygonSegmentIdx:H,triangleSegmentIdx:this.polygonSegments[H].triangleSegIdx})}}const h=new Ka;a.sort((F,z)=>F.triangleSegmentIdx===z.triangleSegmentIdx?F.subtile-z.subtile:F.triangleSegmentIdx-z.triangleSegmentIdx);let p=0,_=0,y=0;for(const F of a){if(F.triangleSegmentIdx!==p)break;y++}const b=a.length;for(;_!==a.length;){p=a[_].triangleSegmentIdx;let F=0,z=_,V=_;for(let T=z;T<y&&a[T].subtile===F;T++)V++;for(;z!==y;){const T=a[z];F=T.subtile;const D=this.centroidData[T.centroidIdx].min.clone(),H=this.centroidData[T.centroidIdx].max.clone(),O={vertexOffset:this.segments.segments[p].vertexOffset,primitiveOffset:h.length,vertexLength:this.segments.segments[p].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let Q=z;Q<V;Q++){const W=a[Q],re=this.polygonSegments[W.polygonSegmentIdx],he=this.centroidData[W.centroidIdx].min,Se=this.centroidData[W.centroidIdx].max,Te=this.indexArray.uint16;for(let de=re.triangleArrayOffset;de<re.triangleArrayOffset+re.triangleCount;de++)h.emplaceBack(Te[3*de],Te[3*de+1],Te[3*de+2]);O.primitiveLength+=re.triangleCount,D.x=Math.min(D.x,he.x),D.y=Math.min(D.y,he.y),H.x=Math.max(H.x,Se.x),H.y=Math.max(H.y,Se.y)}O.primitiveLength>0&&this.triangleSubSegments.push({segment:O,min:D,max:H}),z=V;for(let Q=z;Q<y&&a[Q].subtile===a[z].subtile;Q++)V++}_=y;for(let T=_;T<b&&a[T].triangleSegmentIdx===a[_].triangleSegmentIdx;T++)y++}h._trim(),this.indexArray=h}getVisibleSegments(a,h,p){const _=new Ia;if(this.wallMode){for(const W of this.triangleSubSegments)_.segments.push(W.segment);return _}let y=0,b=0;const F=1<<a.canonical.z;if(h){const W=h.getMinMaxForTile(a);W&&(y=W.min,b=W.max)}b+=this.maxHeight;const z=a.toUnwrapped();let V;const T=[z.canonical.x/F+z.wrap,z.canonical.y/F],D=[(z.canonical.x+1)/F+z.wrap,(z.canonical.y+1)/F],H=(W,re,he)=>[W[0]*(1-he[0])+re[0]*he[0],W[1]*(1-he[1])+re[1]*he[1]],O=[],Q=[];for(const W of this.triangleSubSegments){O[0]=W.min.x/Jr,O[1]=W.min.y/Jr,Q[0]=W.max.x/Jr,Q[1]=W.max.y/Jr;const re=H(T,D,O),he=H(T,D,Q);if(new Fo([re[0],re[1],y],[he[0],he[1],b]).intersectsPrecise(p)===0){V&&(_.segments.push(V),V=void 0);continue}const Se=W.segment;V&&V.vertexOffset!==Se.vertexOffset&&(_.segments.push(V),V=void 0),V?(V.vertexLength+=Se.vertexLength,V.primitiveLength+=Se.primitiveLength):V={vertexOffset:Se.vertexOffset,primitiveLength:Se.primitiveLength,vertexLength:Se.vertexLength,primitiveOffset:Se.primitiveOffset,sortKey:void 0,vaos:{}}}return V&&_.segments.push(V),_}encodeCentroid(a,h){const p=a.centroid(),_=h.span(),y=Math.min(7,Math.round(_.x*this.tileToMeter/10)),b=Math.min(7,Math.round(_.y*this.tileToMeter/10));return new Ye(Ir(p.x,1,Jr-1)<<3|y,Ir(p.y,1,Jr-1)<<3|b)}encodeBorderCentroid(a){if(!a.borders)return new Ye(0,0);const h=a.borders,p=Number.MAX_VALUE;if(h[0][0]!==p||h[1][0]!==p){const _=h[0][0]!==p?0:1;return new Ye(6|(h[0][0]!==p?0:65528),(h[_][0]+h[_][1])/2<<3|6)}{const _=h[2][0]!==p?2:3;return new Ye((h[_][0]+h[_][1])/2<<3|6,6|(h[2][0]!==p?0:65528))}}showCentroid(a){const h=this.centroidData[a.centroidDataIndex];h.flags&=PA,h.centroidXY.x=0,h.centroidXY.y=0,this.writeCentroidToBuffer(h)}writeCentroidToBuffer(a){this.groundEffect.updateHiddenByLandmark(a);const h=a.vertexArrayOffset,p=a.vertexCount+a.vertexArrayOffset,_=a.flags&PA?UP:a.centroidXY,y=this.centroidVertexArray.geta_centroid_pos0(h);if(this.centroidVertexArray.geta_centroid_pos1(h)!==_.y||y!==_.x){for(let b=h;b<p;++b)this.centroidVertexArray.emplace(b,_.x,_.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const a of this.centroidData)this.writeCentroidToBuffer(a)}updateReplacement(a,h,p){if(h.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=h.updateTime;const _=h.getReplacementRegionsForTile(a.toUnwrapped());if(US(this.activeReplacements,_))return;if(this.activeReplacements=_,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const b of this.centroidData)b.flags&=2147483647;const y=[];for(const b of this.activeReplacements){if(b.order<p)continue;const F=Math.pow(2,b.footprintTileId.canonical.z-a.canonical.z);for(const z of this.centroidData)if(!(z.flags&PA||b.min.x>z.max.x||z.min.x>b.max.x||b.min.y>z.max.y||z.min.y>b.max.y))for(let V=0;V<z.footprintSegLen;V++){const T=this.footprintSegments[z.footprintSegIdx+V];if(y.length=0,bY(this.footprintVertices,T.vertexOffset,T.vertexCount,b.footprintTileId.canonical,a.canonical,y),jP(b.footprint,y,this.footprintIndices.uint16,T.indexOffset,T.indexCount,-T.vertexOffset,-F)){z.flags|=PA;break}}}for(const b of this.centroidData)this.writeCentroidToBuffer(b);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(a,h,p){let _=!1;for(let y=0;y<p.footprintSegLen;y++){const b=this.footprintSegments[p.footprintSegIdx+y];let F=0;for(const z of b.ringIndices){for(let V=F,T=z+F-1;V<z+F;T=V++){const D=this.footprintVertices.int16[2*(V+b.vertexOffset)+0],H=this.footprintVertices.int16[2*(V+b.vertexOffset)+1],O=this.footprintVertices.int16[2*(T+b.vertexOffset)+1];H>h!=O>h&&a<(this.footprintVertices.int16[2*(T+b.vertexOffset)+0]-D)*(h-H)/(O-H)+D&&(_=!_)}F=z}}return _}getHeightAtTileCoord(a,h){let p=Number.NEGATIVE_INFINITY,_=!0;const y=4*(a+Jr)*Jr+(h+Jr);if(this.partLookup.hasOwnProperty(y)){const b=this.partLookup[y];return b?{height:b.height,hidden:!!(b.flags&PA)}:void 0}for(const b of this.centroidData)a>b.max.x||b.min.x>a||h>b.max.y||b.min.y>h||this.footprintContainsPoint(a,h,b)&&b&&b.height>p&&(p=b.height,this.partLookup[y]=b,_=!!(b.flags&PA));if(p!==Number.NEGATIVE_INFINITY)return{height:p,hidden:_};this.partLookup[y]=void 0}}function qP(f,a){const h=f.add(a)._unit();return f.x*h.x+f.y*h.y}function _Y(f,a,h,p){const _=a.sub(f)._perp()._unit(),y=h.sub(a)._perp()._unit();return $P(f,a,h,qP(_,y),p)}function $P(f,a,h,p,_){const y=Math.sqrt(1-p*p);return Math.min(f.dist(a)/3,a.dist(h)/3,_*y/p)}function HS(f,a,h){return f.x<h[0].x&&a.x<h[0].x||f.x>h[1].x&&a.x>h[1].x||f.y<h[0].y&&a.y<h[0].y||f.y>h[1].y&&a.y>h[1].y}function WP(f,a){return f.x<a[0].x||f.x>a[1].x||f.y<a[0].y||f.y>a[1].y}function KP(f,a,h){if(f.x<0||f.x>=Jr||a.x<0||a.x>=Jr||h.x<0||h.x>=Jr)return!1;const p=h.sub(a),_=p.perp(),y=f.sub(a);return(p.x*y.x+p.y*y.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(y.x*y.x+y.y*y.y))>-.866&&_.x*y.x+_.y*y.y<0}function XP(f,a,h){const p=a?2|f:-3&f;return h?1|p:-2&p}function YP(){const f=Math.PI/32,a=Math.tan(f),h=ye;return h*Math.sqrt(1+2*a*a)-h}function ZP(f,a,h){const p=1<<h.z,_=bt(h.x/p),y=bt((h.x+1)/p),b=_t(h.y/p),F=_t((h.y+1)/p);return function(z,V,T,D,H=0,O){const Q=[];if(!z.length||!T||!D)return Q;const W=(Ve,et)=>{for(const dt of Ve)Q.push({polygon:dt,bounds:et})},re=Math.ceil(Math.log2(T)),he=Math.ceil(Math.log2(D)),Se=re-he,Te=[];for(let Ve=0;Ve<Math.abs(Se);Ve++)Te.push(Se>0?0:1);for(let Ve=0;Ve<Math.min(re,he);Ve++)Te.push(0),Te.push(1);let de=z;if(de=zb(de,V[0].y-H,V[1].y+H,1),de=zb(de,V[0].x-H,V[1].x+H,0),!de.length)return Q;const je=[];for(Te.length?je.push({polygons:de,bounds:V,depth:0}):W(de,V);je.length;){const Ve=je.pop(),et=Ve.depth,dt=Te[et],pt=Ve.bounds[0],at=Ve.bounds[1],Et=dt===0?pt.x:pt.y,yt=dt===0?at.x:at.y,Nt=O?O(dt,Et,yt):.5*(Et+yt),zt=zb(Ve.polygons,Et-H,Nt+H,dt),Gt=zb(Ve.polygons,Nt-H,yt+H,dt);if(zt.length){const qt=[pt,new Ye(dt===0?Nt:at.x,dt===1?Nt:at.y)];Te.length>et+1?je.push({polygons:zt,bounds:qt,depth:et+1}):W(zt,qt)}if(Gt.length){const qt=[new Ye(dt===0?Nt:pt.x,dt===1?Nt:pt.y),at];Te.length>et+1?je.push({polygons:Gt,bounds:qt,depth:et+1}):W(Gt,qt)}}return Q}(f,a,Math.ceil((y-_)/11.25),Math.ceil((b-F)/11.25),1,(z,V,T)=>{if(z===0)return .5*(V+T);{const D=_t((h.y+V/Jr)/p);return(gt(.5*(_t((h.y+T/Jr)/p)+D))*p-h.y)*Jr}})}function bY(f,a,h,p,_,y){const b=Math.pow(2,p.z-_.z);for(let F=0;F<h;F++){let z=f.int16[2*(F+a)+0],V=f.int16[2*(F+a)+1];z=(z+_.x*Jr)*b-p.x*Jr,V=(V+_.y*Jr)*b-p.y*Jr,y.push(new Ye(z,V))}}let JP,eM;function tv(f,a){return f.x*a.x+f.y*a.y}function tM(f,a){if(f.length===1){let h=0;const p=a[h++];let _;for(;!_||p.equals(_);)if(_=a[h++],!_)return 1/0;for(;h<a.length;h++){const y=a[h],b=f[0],F=_.sub(p),z=y.sub(p),V=b.sub(p),T=tv(F,F),D=tv(F,z),H=tv(z,z),O=tv(V,F),Q=tv(V,z),W=T*H-D*D,re=(H*O-D*Q)/W,he=(T*Q-D*O)/W,Se=p.z*(1-re-he)+_.z*re+y.z*he;if(isFinite(Se))return Se}return 1/0}{let h=1/0;for(const p of a)h=Math.min(h,p.z);return h}}function rM(f,a,h,p,_,y,b,F){const z=b*_.getElevationAt(f,a,!0,!0),V=y[0]!==0,T=V?y[1]===0?b*(y[0]/7-450):b*function(D,H,O){const Q=Math.floor(H[0]/8),W=Math.floor(H[1]/8),re=10*(H[0]-8*Q),he=10*(H[1]-8*W),Se=D.getElevationAt(Q,W,!0,!0),Te=D.getMeterToDEM(O),de=Math.floor(.5*(re*Te-1)),je=Math.floor(.5*(he*Te-1)),Ve=D.tileCoordToPixel(Q,W),et=2*de+1,dt=2*je+1,pt=function(Gt,qt,Jt,vr,rr){return[Gt.getElevationAtPixel(qt,Jt,!0),Gt.getElevationAtPixel(qt+rr,Jt,!0),Gt.getElevationAtPixel(qt,Jt+rr,!0),Gt.getElevationAtPixel(qt+vr,Jt+rr,!0)]}(D,Ve.x-de,Ve.y-je,et,dt),at=Math.abs(pt[0]-pt[1]),Et=Math.abs(pt[2]-pt[3]),yt=Math.abs(pt[0]-pt[2])+Math.abs(pt[1]-pt[3]),Nt=Math.min(.25,.5*Te*(at+Et)/et),zt=Math.min(.25,.5*Te*yt/dt);return Se+Math.max(Nt*re,zt*he)}(_,y,F):z;return{base:z+(h===0)?-1:h,top:V?Math.max(T+p,z+h+2):z+p}}Pe(Gb,"FillExtrusionBucket",{omit:["layers","features"]}),Pe(QP,"PartData"),Pe(zP,"FootprintSegment"),Pe(HP,"BorderCentroidData"),Pe(GP,"GroundEffect");const wY=os([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),CY=os([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:SY}=wY,BY=os([{name:"a_packed",components:4,type:"Float32"}]),{members:EY}=BY,TY=os([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:IY}=TY;class nM{constructor(a,h){this.width=a,this.height=h,this.nextRow=0,this.image=new NA({width:a,height:h}),this.positions={},this.uploaded=!1}getDash(a,h){const p=this.getKey(a,h);return this.positions[p]}trim(){const a=this.width,h=this.height=qr(this.nextRow);this.image.resize({width:a,height:h})}getKey(a,h){return a.join(",")+h}getDashRanges(a,h,p){const _=[];let y=a.length%2==1?-a[a.length-1]*p:0,b=a[0]*p,F=!0;_.push({left:y,right:b,isDash:F,zeroLength:a[0]===0});let z=a[0];for(let V=1;V<a.length;V++){F=!F;const T=a[V];y=z*p,z+=T,b=z*p,_.push({left:y,right:b,isDash:F,zeroLength:T===0})}return _}addRoundDash(a,h,p){const _=h/2;for(let y=-p;y<=p;y++){const b=this.width*(this.nextRow+p+y);let F=0,z=a[F];for(let V=0;V<this.width;V++){V/z.right>1&&(z=a[++F]);const T=Math.abs(V-z.left),D=Math.abs(V-z.right),H=Math.min(T,D);let O;const Q=y/p*(_+1);if(z.isDash){const W=_-Math.abs(Q);O=Math.sqrt(H*H+W*W)}else O=_-Math.sqrt(H*H+Q*Q);this.image.data[b+V]=Math.max(0,Math.min(255,O+128))}}}addRegularDash(a,h){for(let z=a.length-1;z>=0;--z){const V=a[z],T=a[z+1];V.zeroLength?a.splice(z,1):T&&T.isDash===V.isDash&&(T.left=V.left,a.splice(z,1))}const p=a[0],_=a[a.length-1];p.isDash===_.isDash&&(p.left=_.left-this.width,_.right=p.right+this.width);const y=this.width*this.nextRow;let b=0,F=a[b];for(let z=0;z<this.width;z++){z/F.right>1&&(F=a[++b]);const V=Math.abs(z-F.left),T=Math.abs(z-F.right),D=Math.min(V,T);this.image.data[y+z]=Math.max(0,Math.min(255,(F.isDash?D:-D)+h+128))}}addDash(a,h){const p=this.getKey(a,h);if(this.positions[p])return this.positions[p];const _=h==="round",y=_?7:0,b=2*y+1;if(this.nextRow+b>this.height)return ti("LineAtlas out of space"),null;a.length===0&&a.push(1);let F=0;for(let T=0;T<a.length;T++)a[T]<0&&(ti("Negative value is found in line dasharray, replacing values with 0"),a[T]=0),F+=a[T];if(F!==0){const T=this.width/F,D=this.getDashRanges(a,this.width,T);_?this.addRoundDash(D,T,y):this.addRegularDash(D,h==="square"?.5*T:0)}const z=this.nextRow+y;this.nextRow+=b;const V={tl:[z,y],br:[F,0]};return this.positions[p]=V,V}}Pe(nM,"LineAtlas");const LY=R0.VectorTileFeature.types,FY=Math.cos(Math.PI/180*37.5),NY=Math.cos(Math.PI/180*5);class VS{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new ed,this.layoutVertexArray2=new El,this.patternVertexArray=new Eu,this.indexArray=new Ka,this.programConfigurations=new Zf(a.layers,{zoom:a.zoom,lut:a.lut}),this.segments=new Ia,this.maxLineLength=0,this.zOffsetVertexArray=new Ld,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.tessellationStep=a.tessellationStep?a.tessellationStep:Jr/64}updateFootprints(a,h){}populate(a,h,p,_){this.hasPattern=NS("line",this.layers,h);const y=this.layers[0].layout.get("line-sort-key"),b=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!b.isConstant()||!!b.constantOr(0);const F=[];for(const{feature:D,id:H,index:O,sourceLayerIndex:Q}of a){const W=this.layers[0]._featureFilter.needGeometry,re=sn(D,W);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),re,p))continue;const he=y?y.evaluate(re,{},p):void 0,Se={id:H,properties:D.properties,type:D.type,sourceLayerIndex:Q,index:O,geometry:W?re.geometry:tn(D,p,_),patterns:{},sortKey:he};F.push(Se)}y&&F.sort((D,H)=>D.sortKey-H.sortKey);const{lineAtlas:z,featureIndex:V}=h,T=this.addConstantDashes(z);for(const D of F){const{geometry:H,index:O,sourceLayerIndex:Q}=D;if(T&&this.addFeatureDashes(D,z),this.hasPattern){const W=PS("line",this.layers,D,this.zoom,h);this.patternFeatures.push(W)}else this.addFeature(D,H,O,p,z.positions,h.availableImages,h.brightness);V.insert(a[O].feature,H,O,Q,this.index)}}addConstantDashes(a){let h=!1;for(const p of this.layers){const _=p.paint.get("line-dasharray").value,y=p.layout.get("line-cap").value;if(_.kind!=="constant"||y.kind!=="constant")h=!0;else{const b=y.value,F=_.value;if(!F)continue;a.addDash(F,b)}}return h}addFeatureDashes(a,h){const p=this.zoom;for(const _ of this.layers){const y=_.paint.get("line-dasharray").value,b=_.layout.get("line-cap").value;if(y.kind==="constant"&&b.kind==="constant")continue;let F,z;if(y.kind==="constant"){if(F=y.value,!F)continue}else F=y.evaluate({zoom:p},a);z=b.kind==="constant"?b.value:b.evaluate({zoom:p},a),h.addDash(F,z),a.patterns[_.id]=h.getKey(F,z)}}update(a,h,p,_,y){const b=Object.keys(a).length!==0;b&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,h,b?this.stateDependentLayers:this.layers,p,_,y)}addFeatures(a,h,p,_,y,b){for(const F of this.patternFeatures)this.addFeature(F,F.geometry,F.index,h,p,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,EY)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=a.createVertexBuffer(this.patternVertexArray,IY)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,CY.members,!0)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,SY),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,h,p,_,y,b,F){const z=this.layers[0].layout,V=z.get("line-join").evaluate(a,{}),T=z.get("line-cap").evaluate(a,{}),D=z.get("line-miter-limit"),H=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const O of h)this.addLine(O,a,_,V,T,D,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,y,b,_,F)}addLine(a,h,p,_,y,b,F){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const z={zoom:this.zoom,lineProgress:void 0},V=this.layers[0].layout,T=_==="none";if(this.patternJoinNone=this.hasPattern&&T,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ve=0;Ve<a.length-1;Ve++)this.totalDistance+=a[Ve].dist(a[Ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=LY[h.type]==="Polygon";let H=a.length;for(;H>=2&&a[H-1].equals(a[H-2]);)H--;let O=0;for(;O<H-1&&a[O].equals(a[O+1]);)O++;if(H<(D?3:2))return;_==="bevel"&&(b=1.05);const Q=this.overscaling<=16?15*Jr/(512*this.overscaling):0,W=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let re,he,Se,Te,de,je;this.e1=this.e2=-1,D&&(re=a[H-2],de=a[O].sub(re)._unit()._perp());for(let Ve=O;Ve<H;Ve++){if(Se=Ve===H-1?D?a[O+1]:void 0:a[Ve+1],Se&&a[Ve].equals(Se))continue;if(de&&(Te=de),re&&(he=re),re=a[Ve],this.hasZOffset){const qt=V.get("line-z-offset").value;if(qt.kind==="constant")je=qt.value;else{if(this.lineClips){const Jt=this.totalDistance/(this.lineClips.end-this.lineClips.start);z.lineProgress=(Jt*this.lineClips.start+this.distance+(he?he.dist(re):0))/Jt}else ti(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),z.lineProgress=0;je=qt.evaluate(z,h)}je=je||0}de=Se?Se.sub(re)._unit()._perp():Te,Te=Te||de;const et=he&&Se;let dt=et?_:D||T?"butt":y;const pt=Te.x*de.x+Te.y*de.y;if(T){const qt=function(Jt){if(Jt.patternJoinNone){const vr=Jt.segmentPoints.length/2,rr=Jt.lineSoFar-Jt.segmentStart;for(let Br=0;Br<vr;++Br){const Ur=Jt.segmentPoints[2*Br+1],br=Math.round(Jt.segmentPoints[2*Br])+.5+.25*Ur;Jt.patternVertexArray.emplaceBack(br,rr,Jt.segmentStart),Jt.patternVertexArray.emplaceBack(br,rr,Jt.segmentStart)}Jt.segmentPoints.length=0}Jt.e1=Jt.e2=-1};if(et&&pt<NY){this.updateDistance(he,re),this.addCurrentVertex(re,Te,1,1,W,je),qt(this),this.addCurrentVertex(re,de,-1,-1,W,je);continue}if(he){if(!Se){this.updateDistance(he,re),this.addCurrentVertex(re,Te,1,1,W,je),qt(this);continue}dt="miter"}}let at=Te.add(de);at.x===0&&at.y===0||at._unit();const Et=at.x*de.x+at.y*de.y,yt=Et!==0?1/Et:1/0,Nt=2*Math.sqrt(2-2*Et),zt=Et<FY&&he&&Se,Gt=Te.x*de.y-Te.y*de.x>0;if(zt&&Ve>O){const qt=re.dist(he);if(qt>2*Q){const Jt=re.sub(re.sub(he)._mult(Q/qt)._round());this.updateDistance(he,Jt),this.addCurrentVertex(Jt,Te,0,0,W,je),he=Jt}}if(et&&dt==="round"&&(yt<F?dt="miter":yt<=2&&(dt="fakeround")),dt==="miter"&&yt>b&&(dt="bevel"),dt==="bevel"&&(yt>2&&(dt="flipbevel"),yt<b&&(dt="miter")),he&&this.updateDistance(he,re),dt==="miter")at._mult(yt),this.addCurrentVertex(re,at,0,0,W,je);else if(dt==="flipbevel"){if(yt>100)at=de.mult(-1);else{const qt=yt*Te.add(de).mag()/Te.sub(de).mag();at._perp()._mult(qt*(Gt?-1:1))}this.addCurrentVertex(re,at,0,0,W,je),this.addCurrentVertex(re,at.mult(-1),0,0,W,je)}else if(dt==="bevel"||dt==="fakeround"){const qt=-Math.sqrt(yt*yt-1),Jt=Gt?qt:0,vr=Gt?0:qt;if(he&&this.addCurrentVertex(re,Te,Jt,vr,W,je),dt==="fakeround"){const rr=Math.round(180*Nt/Math.PI/20);for(let Br=1;Br<rr;Br++){let Ur=Br/rr;if(Ur!==.5){const Cn=Ur-.5;Ur+=Ur*Cn*(Ur-1)*((1.0904+pt*(pt*(3.55645-1.43519*pt)-3.2452))*Cn*Cn+(.848013+pt*(.215638*pt-1.06021)))}const br=de.sub(Te)._mult(Ur)._add(Te)._unit()._mult(Gt?-1:1);this.addHalfVertex(re,br.x,br.y,!1,Gt,0,W,je)}}Se&&this.addCurrentVertex(re,de,-Jt,-vr,W,je)}else dt==="butt"?this.addCurrentVertex(re,at,0,0,W,je):dt==="square"?(he||this.addCurrentVertex(re,at,-1,-1,W,je),this.addCurrentVertex(re,at,0,0,W,je),he&&this.addCurrentVertex(re,at,1,1,W,je)):dt==="round"&&(he&&(this.addCurrentVertex(re,Te,0,0,W,je),this.addCurrentVertex(re,Te,1,1,W,je,!0)),Se&&(this.addCurrentVertex(re,de,-1,-1,W,je,!0),this.addCurrentVertex(re,de,0,0,W,je)));if(zt&&Ve<H-1){const qt=re.dist(Se);if(qt>2*Q){const Jt=re.add(Se.sub(re)._mult(Q/qt)._round());this.updateDistance(re,Jt),this.addCurrentVertex(Jt,de,0,0,W,je),re=Jt}}}}addVerticesTo(a,h,p,_,y,b,F,z,V,T){const D=(h.w-a.w)/this.tessellationStep|0;if(D>1){this.lineSoFar=a.w;const H=(h.x-a.x)/D,O=(h.y-a.y)/D,Q=(h.z-a.z)/D,W=(h.w-a.w)/D;for(let re=1;re<D;++re)a.x+=H,a.y+=O,a.z+=Q,this.lineSoFar+=W,this.addHalfVertex(a,p,_,T,!1,F,V,a.z),this.addHalfVertex(a,y,b,T,!0,-z,V,a.z)}this.lineSoFar=h.w,this.addHalfVertex(h,p,_,T,!1,F,V,h.z),this.addHalfVertex(h,y,b,T,!0,-z,V,h.z)}addCurrentVertex(a,h,p,_,y,b,F=!1){const z=h.x+h.y*p,V=h.y-h.x*p,T=h.y*_-h.x,D=-h.y-h.x*_;if(b!=null){const O=Jr+10,Q=b,W=new IP(a.x,a.y,Q,this.lineSoFar),re=iM(a,-10,O),he=this.lineSoFar;if(this.currentVertex)if(re){const Se=this.currentVertexIsOutside,Te=this.currentVertex,de=new IP(a.x,a.y,Q,this.lineSoFar);FP(Te,de,-10,O),iM(de,-10,O)||(Se&&(this.e1=this.e2=-1,this.lineSoFar=Te.w,this.addHalfVertex(Te,z,V,F,!1,p,y,Te.z),this.addHalfVertex(Te,T,D,F,!0,-_,y,Te.z)),this.addVerticesTo(Te,de,z,V,T,D,p,_,y,F))}else{const Se=this.currentVertex;this.currentVertexIsOutside&&(FP(Se,W,-10,O),this.e1=this.e2=-1,this.lineSoFar=Se.w,this.addHalfVertex(Se,z,V,F,!1,p,y,Se.z),this.addHalfVertex(Se,T,D,F,!0,-_,y,Se.z)),this.addVerticesTo(Se,W,z,V,T,D,p,_,y,F)}else re||(this.addHalfVertex(a,z,V,F,!1,p,y,b),this.addHalfVertex(a,T,D,F,!0,-_,y,b));this.currentVertex=W,this.currentVertexIsOutside=re,this.lineSoFar=he}else this.addHalfVertex(a,z,V,F,!1,p,y,b),this.addHalfVertex(a,T,D,F,!0,-_,y,b)}addHalfVertex({x:a,y:h},p,_,y,b,F,z,V){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),b||this.segmentPoints.push(this.lineSoFar-this.segmentStart,F)),this.layoutVertexArray.emplaceBack((a<<1)+(y?1:0),(h<<1)+(b?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(F===0?0:F<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),z.primitiveLength++),b?this.e2=T:this.e1=T,V!=null&&this.zOffsetVertexArray.emplaceBack(V)}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,h){this.distance+=a.dist(h),this.updateScaledDistance()}}function iM(f,a,h){return f.x<a||f.x>h||f.y<a||f.y>h}let sM,oM;function aM(f,a,h){return a*(Jr/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}function lM(f,a){return 1/aM(f,1,a.tileZoom)}function cM(f,a,h,p){return f.translatePosMatrix(p||a.tileID.projMatrix,a,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}Pe(VS,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const uM=f=>{const a=[];hM(f)&&a.push("RENDER_LINE_DASH"),f.paint.get("line-gradient")&&a.push("RENDER_LINE_GRADIENT");const h=f.paint.get("line-trim-offset");h[0]===0&&h[1]===0||a.push("RENDER_LINE_TRIM_OFFSET"),f.paint.get("line-border-width").constantOr(1)!==0&&a.push("RENDER_LINE_BORDER");const p=f.layout.get("line-join").constantOr("miter")==="none",_=!!f.paint.get("line-pattern").constantOr(1);return p&&_&&a.push("LINE_JOIN_NONE"),a};function hM(f){const a=f.paint.get("line-dasharray").value;return a.value||a.kind!=="constant"}let GS;const dM=()=>GS||(GS={layout:sM||(sM=new Bs({"line-cap":new Ln(ur.layout_line["line-cap"]),"line-join":new Ln(ur.layout_line["line-join"]),"line-miter-limit":new Pr(ur.layout_line["line-miter-limit"]),"line-round-limit":new Pr(ur.layout_line["line-round-limit"]),"line-sort-key":new Ln(ur.layout_line["line-sort-key"]),"line-z-offset":new Ln(ur.layout_line["line-z-offset"]),visibility:new Pr(ur.layout_line.visibility)})),paint:oM||(oM=new Bs({"line-opacity":new Ln(ur.paint_line["line-opacity"]),"line-color":new Ln(ur.paint_line["line-color"]),"line-translate":new Pr(ur.paint_line["line-translate"]),"line-translate-anchor":new Pr(ur.paint_line["line-translate-anchor"]),"line-width":new Ln(ur.paint_line["line-width"]),"line-gap-width":new Ln(ur.paint_line["line-gap-width"]),"line-offset":new Ln(ur.paint_line["line-offset"]),"line-blur":new Ln(ur.paint_line["line-blur"]),"line-dasharray":new Ln(ur.paint_line["line-dasharray"]),"line-pattern":new Ln(ur.paint_line["line-pattern"]),"line-gradient":new ya(ur.paint_line["line-gradient"]),"line-trim-offset":new Pr(ur.paint_line["line-trim-offset"]),"line-trim-fade-range":new Pr(ur.paint_line["line-trim-fade-range"]),"line-trim-color":new Pr(ur.paint_line["line-trim-color"]),"line-emissive-strength":new Pr(ur.paint_line["line-emissive-strength"]),"line-border-width":new Ln(ur.paint_line["line-border-width"]),"line-border-color":new Ln(ur.paint_line["line-border-color"]),"line-occlusion-opacity":new Pr(ur.paint_line["line-occlusion-opacity"])}))},GS);class PY extends Ln{possiblyEvaluate(a,h){return h=new Ui(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,transition:h.transition}),super.possiblyEvaluate(a,h)}evaluate(a,h,p,_){return h=an({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(a,h,p,_)}}let rv;function fM(f,a){return a>0?a+2*f:f}const MY=os([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jY=os([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),kY=os([{name:"a_projected_pos",components:4,type:"Float32"}],4);os([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const DY=os([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),OY=os([{name:"a_texb",components:2,type:"Uint16"}]),RY=os([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),UY=os([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);os([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const pM=os([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zY=os([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);os([{name:"triangle",components:3,type:"Uint16"}]),os([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),os([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),os([{type:"Float32",name:"offsetX"}]),os([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var zc=24;const pf=128;function qS(f,a){const{expression:h}=a;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Ui(f+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=h;let y=0;for(;y<p.length&&p[y]<=f;)y++;y=Math.max(0,y-1);let b=y;for(;b<p.length&&p[b]<f+1;)b++;b=Math.min(p.length-1,b);const F=p[y],z=p[b];return h.kind==="composite"?{kind:"composite",minZoom:F,maxZoom:z,interpolationType:_}:{kind:"camera",minZoom:F,maxZoom:z,minSize:h.evaluate(new Ui(F)),maxSize:h.evaluate(new Ui(z)),interpolationType:_}}}function qb(f,{uSize:a,uSizeT:h},{lowerSize:p,upperSize:_}){return f.kind==="source"?p/pf:f.kind==="composite"?Sr(p/pf,_/pf,h):a}function U0(f,a){let h=0,p=0;if(f.kind==="constant")p=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:_,minZoom:y,maxZoom:b}=f,F=_?Ir(Wl.interpolationFactor(_,a,y,b),0,1):0;f.kind==="camera"?p=Sr(f.minSize,f.maxSize,F):h=F}return{uSizeT:h,uSize:p}}var QY=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:pf,evaluateSizeForFeature:qb,evaluateSizeForZoom:U0,getSizeData:qS});function HY(f,a,h){return f.sections.forEach(p=>{p.text=function(_,y,b){const F=y.layout.get("text-transform").evaluate(b,{});return F==="uppercase"?_=_.toLocaleUpperCase():F==="lowercase"&&(_=_.toLocaleLowerCase()),Ri.applyArabicShaping&&(_=Ri.applyArabicShaping(_)),_}(p.text,a,h)}),f}const nv={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function VY(f){return f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""}function GY(f){return f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""||f===""}var AM,$S,mM,WS={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function qY(){return AM||(AM=1,WS.read=function(f,a,h,p,_){var y,b,F=8*_-p-1,z=(1<<F)-1,V=z>>1,T=-7,D=h?_-1:0,H=h?-1:1,O=f[a+D];for(D+=H,y=O&(1<<-T)-1,O>>=-T,T+=F;T>0;y=256*y+f[a+D],D+=H,T-=8);for(b=y&(1<<-T)-1,y>>=-T,T+=p;T>0;b=256*b+f[a+D],D+=H,T-=8);if(y===0)y=1-V;else{if(y===z)return b?NaN:1/0*(O?-1:1);b+=Math.pow(2,p),y-=V}return(O?-1:1)*b*Math.pow(2,y-p)},WS.write=function(f,a,h,p,_,y){var b,F,z,V=8*y-_-1,T=(1<<V)-1,D=T>>1,H=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=p?0:y-1,Q=p?1:-1,W=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(F=isNaN(a)?1:0,b=T):(b=Math.floor(Math.log(a)/Math.LN2),a*(z=Math.pow(2,-b))<1&&(b--,z*=2),(a+=b+D>=1?H/z:H*Math.pow(2,1-D))*z>=2&&(b++,z/=2),b+D>=T?(F=0,b=T):b+D>=1?(F=(a*z-1)*Math.pow(2,_),b+=D):(F=a*Math.pow(2,D-1)*Math.pow(2,_),b=0));_>=8;f[h+O]=255&F,O+=Q,F/=256,_-=8);for(b=b<<_|F,V+=_;V>0;f[h+O]=255&b,O+=Q,b/=256,V-=8);f[h+O-Q]|=128*W}),WS}function gM(){if(mM)return $S;mM=1,$S=a;var f=qY();function a(de){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(de)?de:new Uint8Array(de||0),this.pos=0,this.type=0,this.length=this.buf.length}a.Varint=0,a.Fixed64=1,a.Bytes=2,a.Fixed32=5;var h=4294967296,p=1/h,_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function y(de){return de.type===a.Bytes?de.readVarint()+de.pos:de.pos+1}function b(de,je,Ve){return Ve?4294967296*je+(de>>>0):4294967296*(je>>>0)+(de>>>0)}function F(de,je,Ve){var et=je<=16383?1:je<=2097151?2:je<=268435455?3:Math.floor(Math.log(je)/(7*Math.LN2));Ve.realloc(et);for(var dt=Ve.pos-1;dt>=de;dt--)Ve.buf[dt+et]=Ve.buf[dt]}function z(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeVarint(de[Ve])}function V(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeSVarint(de[Ve])}function T(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeFloat(de[Ve])}function D(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeDouble(de[Ve])}function H(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeBoolean(de[Ve])}function O(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeFixed32(de[Ve])}function Q(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeSFixed32(de[Ve])}function W(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeFixed64(de[Ve])}function re(de,je){for(var Ve=0;Ve<de.length;Ve++)je.writeSFixed64(de[Ve])}function he(de,je){return(de[je]|de[je+1]<<8|de[je+2]<<16)+16777216*de[je+3]}function Se(de,je,Ve){de[Ve]=je,de[Ve+1]=je>>>8,de[Ve+2]=je>>>16,de[Ve+3]=je>>>24}function Te(de,je){return(de[je]|de[je+1]<<8|de[je+2]<<16)+(de[je+3]<<24)}return a.prototype={destroy:function(){this.buf=null},readFields:function(de,je,Ve){for(Ve=Ve||this.length;this.pos<Ve;){var et=this.readVarint(),dt=et>>3,pt=this.pos;this.type=7&et,de(dt,je,this),this.pos===pt&&this.skip(et)}return je},readMessage:function(de,je){return this.readFields(de,je,this.readVarint()+this.pos)},readFixed32:function(){var de=he(this.buf,this.pos);return this.pos+=4,de},readSFixed32:function(){var de=Te(this.buf,this.pos);return this.pos+=4,de},readFixed64:function(){var de=he(this.buf,this.pos)+he(this.buf,this.pos+4)*h;return this.pos+=8,de},readSFixed64:function(){var de=he(this.buf,this.pos)+Te(this.buf,this.pos+4)*h;return this.pos+=8,de},readFloat:function(){var de=f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,de},readDouble:function(){var de=f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,de},readVarint:function(de){var je,Ve,et=this.buf;return je=127&(Ve=et[this.pos++]),Ve<128?je:(je|=(127&(Ve=et[this.pos++]))<<7,Ve<128?je:(je|=(127&(Ve=et[this.pos++]))<<14,Ve<128?je:(je|=(127&(Ve=et[this.pos++]))<<21,Ve<128?je:function(dt,pt,at){var Et,yt,Nt=at.buf;if(Et=(112&(yt=Nt[at.pos++]))>>4,yt<128||(Et|=(127&(yt=Nt[at.pos++]))<<3,yt<128)||(Et|=(127&(yt=Nt[at.pos++]))<<10,yt<128)||(Et|=(127&(yt=Nt[at.pos++]))<<17,yt<128)||(Et|=(127&(yt=Nt[at.pos++]))<<24,yt<128)||(Et|=(1&(yt=Nt[at.pos++]))<<31,yt<128))return b(dt,Et,pt);throw new Error("Expected varint not more than 10 bytes")}(je|=(15&(Ve=et[this.pos]))<<28,de,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var de=this.readVarint();return de%2==1?(de+1)/-2:de/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var de=this.readVarint()+this.pos,je=this.pos;return this.pos=de,de-je>=12&&_?function(Ve,et,dt){return _.decode(Ve.subarray(et,dt))}(this.buf,je,de):function(Ve,et,dt){for(var pt="",at=et;at<dt;){var Et,yt,Nt,zt=Ve[at],Gt=null,qt=zt>239?4:zt>223?3:zt>191?2:1;if(at+qt>dt)break;qt===1?zt<128&&(Gt=zt):qt===2?(192&(Et=Ve[at+1]))==128&&(Gt=(31&zt)<<6|63&Et)<=127&&(Gt=null):qt===3?(yt=Ve[at+2],(192&(Et=Ve[at+1]))==128&&(192&yt)==128&&((Gt=(15&zt)<<12|(63&Et)<<6|63&yt)<=2047||Gt>=55296&&Gt<=57343)&&(Gt=null)):qt===4&&(yt=Ve[at+2],Nt=Ve[at+3],(192&(Et=Ve[at+1]))==128&&(192&yt)==128&&(192&Nt)==128&&((Gt=(15&zt)<<18|(63&Et)<<12|(63&yt)<<6|63&Nt)<=65535||Gt>=1114112)&&(Gt=null)),Gt===null?(Gt=65533,qt=1):Gt>65535&&(Gt-=65536,pt+=String.fromCharCode(Gt>>>10&1023|55296),Gt=56320|1023&Gt),pt+=String.fromCharCode(Gt),at+=qt}return pt}(this.buf,je,de)},readBytes:function(){var de=this.readVarint()+this.pos,je=this.buf.subarray(this.pos,de);return this.pos=de,je},readPackedVarint:function(de,je){if(this.type!==a.Bytes)return de.push(this.readVarint(je));var Ve=y(this);for(de=de||[];this.pos<Ve;)de.push(this.readVarint(je));return de},readPackedSVarint:function(de){if(this.type!==a.Bytes)return de.push(this.readSVarint());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readSVarint());return de},readPackedBoolean:function(de){if(this.type!==a.Bytes)return de.push(this.readBoolean());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readBoolean());return de},readPackedFloat:function(de){if(this.type!==a.Bytes)return de.push(this.readFloat());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readFloat());return de},readPackedDouble:function(de){if(this.type!==a.Bytes)return de.push(this.readDouble());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readDouble());return de},readPackedFixed32:function(de){if(this.type!==a.Bytes)return de.push(this.readFixed32());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readFixed32());return de},readPackedSFixed32:function(de){if(this.type!==a.Bytes)return de.push(this.readSFixed32());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readSFixed32());return de},readPackedFixed64:function(de){if(this.type!==a.Bytes)return de.push(this.readFixed64());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readFixed64());return de},readPackedSFixed64:function(de){if(this.type!==a.Bytes)return de.push(this.readSFixed64());var je=y(this);for(de=de||[];this.pos<je;)de.push(this.readSFixed64());return de},skip:function(de){var je=7&de;if(je===a.Varint)for(;this.buf[this.pos++]>127;);else if(je===a.Bytes)this.pos=this.readVarint()+this.pos;else if(je===a.Fixed32)this.pos+=4;else{if(je!==a.Fixed64)throw new Error("Unimplemented type: "+je);this.pos+=8}},writeTag:function(de,je){this.writeVarint(de<<3|je)},realloc:function(de){for(var je=this.length||16;je<this.pos+de;)je*=2;if(je!==this.length){var Ve=new Uint8Array(je);Ve.set(this.buf),this.buf=Ve,this.length=je}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(de){this.realloc(4),Se(this.buf,de,this.pos),this.pos+=4},writeSFixed32:function(de){this.realloc(4),Se(this.buf,de,this.pos),this.pos+=4},writeFixed64:function(de){this.realloc(8),Se(this.buf,-1&de,this.pos),Se(this.buf,Math.floor(de*p),this.pos+4),this.pos+=8},writeSFixed64:function(de){this.realloc(8),Se(this.buf,-1&de,this.pos),Se(this.buf,Math.floor(de*p),this.pos+4),this.pos+=8},writeVarint:function(de){(de=+de||0)>268435455||de<0?function(je,Ve){var et,dt;if(je>=0?(et=je%4294967296|0,dt=je/4294967296|0):(dt=~(-je/4294967296),4294967295^(et=~(-je%4294967296))?et=et+1|0:(et=0,dt=dt+1|0)),je>=18446744073709552e3||je<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ve.realloc(10),function(pt,at,Et){Et.buf[Et.pos++]=127&pt|128,pt>>>=7,Et.buf[Et.pos++]=127&pt|128,pt>>>=7,Et.buf[Et.pos++]=127&pt|128,pt>>>=7,Et.buf[Et.pos++]=127&pt|128,Et.buf[Et.pos]=127&(pt>>>=7)}(et,0,Ve),function(pt,at){var Et=(7&pt)<<4;at.buf[at.pos++]|=Et|((pt>>>=3)?128:0),pt&&(at.buf[at.pos++]=127&pt|((pt>>>=7)?128:0),pt&&(at.buf[at.pos++]=127&pt|((pt>>>=7)?128:0),pt&&(at.buf[at.pos++]=127&pt|((pt>>>=7)?128:0),pt&&(at.buf[at.pos++]=127&pt|((pt>>>=7)?128:0),pt&&(at.buf[at.pos++]=127&pt)))))}(dt,Ve)}(de,this):(this.realloc(4),this.buf[this.pos++]=127&de|(de>127?128:0),de<=127||(this.buf[this.pos++]=127&(de>>>=7)|(de>127?128:0),de<=127||(this.buf[this.pos++]=127&(de>>>=7)|(de>127?128:0),de<=127||(this.buf[this.pos++]=de>>>7&127))))},writeSVarint:function(de){this.writeVarint(de<0?2*-de-1:2*de)},writeBoolean:function(de){this.writeVarint(!!de)},writeString:function(de){de=String(de),this.realloc(4*de.length),this.pos++;var je=this.pos;this.pos=function(et,dt,pt){for(var at,Et,yt=0;yt<dt.length;yt++){if((at=dt.charCodeAt(yt))>55295&&at<57344){if(!Et){at>56319||yt+1===dt.length?(et[pt++]=239,et[pt++]=191,et[pt++]=189):Et=at;continue}if(at<56320){et[pt++]=239,et[pt++]=191,et[pt++]=189,Et=at;continue}at=Et-55296<<10|at-56320|65536,Et=null}else Et&&(et[pt++]=239,et[pt++]=191,et[pt++]=189,Et=null);at<128?et[pt++]=at:(at<2048?et[pt++]=at>>6|192:(at<65536?et[pt++]=at>>12|224:(et[pt++]=at>>18|240,et[pt++]=at>>12&63|128),et[pt++]=at>>6&63|128),et[pt++]=63&at|128)}return pt}(this.buf,de,this.pos);var Ve=this.pos-je;Ve>=128&&F(je,Ve,this),this.pos=je-1,this.writeVarint(Ve),this.pos+=Ve},writeFloat:function(de){this.realloc(4),f.write(this.buf,de,this.pos,!0,23,4),this.pos+=4},writeDouble:function(de){this.realloc(8),f.write(this.buf,de,this.pos,!0,52,8),this.pos+=8},writeBytes:function(de){var je=de.length;this.writeVarint(je),this.realloc(je);for(var Ve=0;Ve<je;Ve++)this.buf[this.pos++]=de[Ve]},writeRawMessage:function(de,je){this.pos++;var Ve=this.pos;de(je,this);var et=this.pos-Ve;et>=128&&F(Ve,et,this),this.pos=Ve-1,this.writeVarint(et),this.pos+=et},writeMessage:function(de,je,Ve){this.writeTag(de,a.Bytes),this.writeRawMessage(je,Ve)},writePackedVarint:function(de,je){je.length&&this.writeMessage(de,z,je)},writePackedSVarint:function(de,je){je.length&&this.writeMessage(de,V,je)},writePackedBoolean:function(de,je){je.length&&this.writeMessage(de,H,je)},writePackedFloat:function(de,je){je.length&&this.writeMessage(de,T,je)},writePackedDouble:function(de,je){je.length&&this.writeMessage(de,D,je)},writePackedFixed32:function(de,je){je.length&&this.writeMessage(de,O,je)},writePackedSFixed32:function(de,je){je.length&&this.writeMessage(de,Q,je)},writePackedFixed64:function(de,je){je.length&&this.writeMessage(de,W,je)},writePackedSFixed64:function(de,je){je.length&&this.writeMessage(de,re,je)},writeBytesField:function(de,je){this.writeTag(de,a.Bytes),this.writeBytes(je)},writeFixed32Field:function(de,je){this.writeTag(de,a.Fixed32),this.writeFixed32(je)},writeSFixed32Field:function(de,je){this.writeTag(de,a.Fixed32),this.writeSFixed32(je)},writeFixed64Field:function(de,je){this.writeTag(de,a.Fixed64),this.writeFixed64(je)},writeSFixed64Field:function(de,je){this.writeTag(de,a.Fixed64),this.writeSFixed64(je)},writeVarintField:function(de,je){this.writeTag(de,a.Varint),this.writeVarint(je)},writeSVarintField:function(de,je){this.writeTag(de,a.Varint),this.writeSVarint(je)},writeStringField:function(de,je){this.writeTag(de,a.Bytes),this.writeString(je)},writeFloatField:function(de,je){this.writeTag(de,a.Fixed32),this.writeFloat(je)},writeDoubleField:function(de,je){this.writeTag(de,a.Fixed64),this.writeDouble(je)},writeBooleanField:function(de,je){this.writeVarintField(de,!!je)}},$S}var $b=A(gM());const KS=3;function $Y(f,a,h){a.glyphs=[],f===1&&h.readMessage(WY,a)}function WY(f,a,h){if(f===3){const{id:p,bitmap:_,width:y,height:b,left:F,top:z,advance:V}=h.readMessage(KY,{});a.glyphs.push({id:p,bitmap:new NA({width:y+2*KS,height:b+2*KS},_),metrics:{width:y,height:b,left:F,top:z,advance:V}})}else f===4?a.ascender=h.readSVarint():f===5&&(a.descender=h.readSVarint())}function KY(f,a,h){f===1?a.id=h.readVarint():f===2?a.bitmap=h.readBytes():f===3?a.width=h.readVarint():f===4?a.height=h.readVarint():f===5?a.left=h.readSVarint():f===6?a.top=h.readSVarint():f===7&&(a.advance=h.readVarint())}const yM=KS,nd={horizontal:1,vertical:2,horizontalOnly:3};class iv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,h){const p=new iv;return p.scale=a||1,p.fontStack=h,p}static forImage(a){const h=new iv;return h.imageName=a,h}}class z0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,h){const p=new z0;for(let _=0;_<a.sections.length;_++){const y=a.sections[_];y.image?p.addImageSection(y):p.addTextSection(y,h)}return p}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCodePoint(a){return this.text.codePointAt(a)}verticalizePunctuation(a){this.text=function(h,p){let _="";for(let y=0;y<h.length;y++){const b=h.charCodeAt(y+1)||null,F=h.charCodeAt(y-1)||null;_+=!p&&(b&&mr(b)&&!nv[h[y+1]]||F&&mr(F)&&!nv[h[y-1]])||!nv[h[y]]?h[y]:nv[h[y]]}return _}(this.text,a)}trim(){let a=0;for(let p=0;p<this.text.length&&Wb[this.text.charCodeAt(p)];p++)a++;let h=this.text.length;for(let p=this.text.length-1;p>=0&&p>=a&&Wb[this.text.charCodeAt(p)];p--)h--;this.text=this.text.substring(a,h),this.sectionIndex=this.sectionIndex.slice(a,h)}substring(a,h){const p=new z0;return p.text=this.text.substring(a,h),p.sectionIndex=this.sectionIndex.slice(a,h),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,h)=>Math.max(a,this.sections[h].scale),0)}addTextSection(a,h){this.text+=a.text,this.sections.push(iv.forText(a.scale,a.fontStack||h));const p=this.sections.length-1;for(let _=0;_<a.text.length;++_)this.sectionIndex.push(p)}addImageSection(a){const h=a.image?a.image.namePrimary:"";if(h.length===0)return void ti("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCodePoint(p),this.sections.push(iv.forImage(h)),this.sectionIndex.push(this.sections.length-1)):ti("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function XS(f,a,h,p,_,y,b,F,z,V,T,D,H,O,Q){const W=z0.fromFeature(f,_);D===nd.vertical&&W.verticalizePunctuation(H);let re=[];const he=function(Ve,et,dt,pt,at,Et){if(!Ve)return[];const yt=[],Nt=function(Jt,vr,rr,Br,Ur,br){let Cn=0;for(let dn=0;dn<Jt.length();dn++){const rn=Jt.getSection(dn);Cn+=vM(Jt.getCodePoint(dn),rn,Br,Ur,vr,br)}return Cn/Math.max(1,Math.ceil(Cn/rr))}(Ve,et,dt,pt,at,Et),zt=Ve.text.indexOf("")>=0;let Gt=0;for(let Jt=0;Jt<Ve.length();Jt++){const vr=Ve.getSection(Jt),rr=Ve.getCodePoint(Jt);if(Wb[rr]||(Gt+=vM(rr,vr,pt,at,et,Et)),Jt<Ve.length()-1){const Br=!((qt=rr)<11904||!(Pt["Bopomofo Extended"](qt)||Pt.Bopomofo(qt)||Pt["CJK Compatibility Forms"](qt)||Pt["CJK Compatibility Ideographs"](qt)||Pt["CJK Compatibility"](qt)||Pt["CJK Radicals Supplement"](qt)||Pt["CJK Strokes"](qt)||Pt["CJK Symbols and Punctuation"](qt)||Pt["CJK Unified Ideographs Extension A"](qt)||Pt["CJK Unified Ideographs"](qt)||Pt["Enclosed CJK Letters and Months"](qt)||Pt["Halfwidth and Fullwidth Forms"](qt)||Pt.Hiragana(qt)||Pt["Ideographic Description Characters"](qt)||Pt["Kangxi Radicals"](qt)||Pt["Katakana Phonetic Extensions"](qt)||Pt.Katakana(qt)||Pt["Vertical Forms"](qt)||Pt["Yi Radicals"](qt)||Pt["Yi Syllables"](qt)));(XY[rr]||Br||vr.imageName)&&yt.push(_M(Jt+1,Gt,Nt,yt,YY(rr,Ve.getCodePoint(Jt+1),Br&&zt),!1))}}var qt;return bM(_M(Ve.length(),Gt,Nt,yt,0,!0))}(W,V,y,a,p,O),{processBidirectionalText:Se,processStyledBidirectionalText:Te}=Ri;if(Se&&W.sections.length===1){const Ve=Se(W.toString(),he);for(const et of Ve){const dt=new z0;dt.text=et,dt.sections=W.sections;for(let pt=0;pt<et.length;pt++)dt.sectionIndex.push(0);re.push(dt)}}else if(Te){const Ve=Te(W.text,W.sectionIndex,he);for(const et of Ve){const dt=new z0;dt.text=et[0],dt.sectionIndex=et[1],dt.sections=W.sections,re.push(dt)}}else re=function(Ve,et){const dt=[],pt=Ve.text;let at=0;for(const Et of et)dt.push(Ve.substring(at,Et)),at=Et;return at<pt.length&&dt.push(Ve.substring(at,pt.length)),dt}(W,he);const de=[],je={positionedLines:de,text:W.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:D,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ve,et,dt,pt,at,Et,yt,Nt,zt,Gt,qt,Jt){let vr=0,rr=0,Br=0;const Ur=Nt==="right"?1:Nt==="left"?0:.5;let br=!1;for(const wn of at){const Pn=wn.getSections();for(const hi of Pn){if(hi.imageName)continue;const Oi=et[hi.fontStack];if(Oi&&(br=Oi.ascender!==void 0&&Oi.descender!==void 0,!br))break}if(!br)break}let Cn=0;for(const wn of at){wn.trim();const Pn=wn.getMaxScale(),hi=(Pn-1)*zc,Oi={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[Cn]=Oi;const Ti=Oi.positionedGlyphs;let Ii=0;if(!wn.length()){rr+=Et,++Cn;continue}let qi=0,Wi=0;for(let Vs=0;Vs<wn.length();Vs++){const Ai=wn.getSection(Vs),Ps=wn.getSectionIndex(Vs),Os=wn.getCodePoint(Vs);let Do=Ai.scale,Da=null,hl=null,Oa=null,va=zc,dc=0;const xl=!(zt===nd.horizontal||!qt&&!cr(Os)||qt&&(Wb[Os]||(dn=Os,Pt.Arabic(dn)||Pt["Arabic Supplement"](dn)||Pt["Arabic Extended-A"](dn)||Pt["Arabic Presentation Forms-A"](dn)||Pt["Arabic Presentation Forms-B"](dn))));if(Ai.imageName){const Qc=pt[Ai.imageName];if(!Qc)continue;Oa=Ai.imageName,Ve.iconsInText=Ve.iconsInText||!0,hl=Qc.paddedRect;const No=Qc.displaySize;Do=Do*zc/Jt,Da={width:No[0],height:No[1],left:0,top:-yM,advance:xl?No[1]:No[0],localGlyph:!1},dc=br?-Da.height*Do:Pn*zc-17-No[1]*Do,va=Da.advance;const fh=(xl?No[0]:No[1])*Do-zc*Pn;fh>0&&fh>Ii&&(Ii=fh)}else{const Qc=dt[Ai.fontStack];if(!Qc)continue;Qc[Os]&&(hl=Qc[Os]);const No=et[Ai.fontStack];if(!No)continue;const fh=No.glyphs[Os];if(!fh)continue;if(Da=fh.metrics,va=Os!==8203?zc:0,br){const vf=No.ascender!==void 0?Math.abs(No.ascender):0,Dd=No.descender!==void 0?Math.abs(No.descender):0,Od=(vf+Dd)*Do;qi<Od&&(qi=Od,Wi=(vf-Dd)/2*Do),dc=-vf*Do}else dc=(Pn-Do)*zc-17}xl?(Ve.verticalizable=!0,Ti.push({glyph:Os,imageName:Oa,x:vr,y:rr+dc,vertical:xl,scale:Do,localGlyph:Da.localGlyph,fontStack:Ai.fontStack,sectionIndex:Ps,metrics:Da,rect:hl}),vr+=va*Do+Gt):(Ti.push({glyph:Os,imageName:Oa,x:vr,y:rr+dc,vertical:xl,scale:Do,localGlyph:Da.localGlyph,fontStack:Ai.fontStack,sectionIndex:Ps,metrics:Da,rect:hl}),vr+=Da.advance*Do+Gt)}Ti.length!==0&&(Br=Math.max(vr-Gt,Br),br?wM(Ti,Ur,Ii,Wi,Et*Pn/2):wM(Ti,Ur,Ii,0,Et/2)),vr=0;const fo=Et*Pn+Ii;Oi.lineOffset=Math.max(Ii,hi),rr+=fo,++Cn}var dn;const rn=rr,{horizontalAlign:Vr,verticalAlign:Zn}=YS(yt);(function(wn,Pn,hi,Oi,Ti,Ii){const qi=(Pn-hi)*Ti,Wi=-Ii*Oi;for(const fo of wn)for(const Vs of fo.positionedGlyphs)Vs.x+=qi,Vs.y+=Wi})(Ve.positionedLines,Ur,Vr,Zn,Br,rn),Ve.top+=-Zn*rn,Ve.bottom=Ve.top+rn,Ve.left+=-Vr*Br,Ve.right=Ve.left+Br,Ve.hasBaseline=br}(je,a,h,p,re,b,F,z,D,V,H,Q),!function(Ve){for(const et of Ve)if(et.positionedGlyphs.length!==0)return!1;return!0}(de)&&je}const Wb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},XY={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function vM(f,a,h,p,_,y){if(a.imageName){const b=p[a.imageName];return b?b.displaySize[0]*a.scale*zc/y+_:0}{const b=h[a.fontStack],F=b&&b.glyphs[f];return F?F.metrics.advance*a.scale+_:0}}function xM(f,a,h,p){const _=Math.pow(f-a,2);return p?f<a?_/2:2*_:_+Math.abs(h)*h}function YY(f,a,h){let p=0;return f===10&&(p-=1e4),h&&(p+=150),f!==40&&f!==65288||(p+=50),a!==41&&a!==65289||(p+=50),p}function _M(f,a,h,p,_,y){let b=null,F=xM(a,h,_,y);for(const z of p){const V=xM(a-z.x,h,_,y)+z.badness;V<=F&&(b=z,F=V)}return{index:f,x:a,priorBreak:b,badness:F}}function bM(f){return f?bM(f.priorBreak).concat(f.index):[]}function YS(f){let a=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:a,verticalAlign:h}}function wM(f,a,h,p,_){if(!(a||h||p||_))return;const y=f.length-1,b=f[y],F=(b.x+b.metrics.advance*b.scale)*a;for(let z=0;z<=y;z++)f[z].x-=F,f[z].y+=h+p+_}function ZY(f,a,h,p){const{horizontalAlign:_,verticalAlign:y}=YS(p),b=h[0]-f.displaySize[0]*_,F=h[1]-f.displaySize[1]*y;return{imagePrimary:f,imageSecondary:a,top:F,bottom:F+f.displaySize[1],left:b,right:b+f.displaySize[0]}}function CM(f,a,h,p,_,y){const b=f.imagePrimary;let F;if(b.content){const re=b.content,he=b.pixelRatio||1;F=[re[0]/he,re[1]/he,b.displaySize[0]-re[2]/he,b.displaySize[1]-re[3]/he]}const z=a.left*y,V=a.right*y;let T,D,H,O;h==="width"||h==="both"?(O=_[0]+z-p[3],D=_[0]+V+p[1]):(O=_[0]+(z+V-b.displaySize[0])/2,D=O+b.displaySize[0]);const Q=a.top*y,W=a.bottom*y;return h==="height"||h==="both"?(T=_[1]+Q-p[0],H=_[1]+W+p[2]):(T=_[1]+(Q+W-b.displaySize[1])/2,H=T+b.displaySize[1]),{imagePrimary:b,imageSecondary:void 0,top:T,right:D,bottom:H,left:O,collisionPadding:F}}class Up extends Ye{constructor(a,h,p,_,y){super(a,h),this.angle=_,this.z=p,y!==void 0&&(this.segment=y)}clone(){return new Up(this.x,this.y,this.z,this.angle,this.segment)}}function SM(f,a,h,p,_){if(a.segment===void 0)return!0;let y=a,b=a.segment+1,F=0;for(;F>-h/2;){if(b--,b<0)return!1;F-=f[b].dist(y),y=f[b]}F+=f[b].dist(f[b+1]),b++;const z=[];let V=0;for(;F<h/2;){const T=f[b],D=f[b+1];if(!D)return!1;let H=f[b-1].angleTo(T)-T.angleTo(D);for(H=Math.abs((H+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:F,angleDelta:H}),V+=H;F-z[0].distance>p;)V-=z.shift().angleDelta;if(V>_)return!1;b++,F+=T.dist(D)}return!0}function BM(f){let a=0;for(let h=0;h<f.length-1;h++)a+=f[h].dist(f[h+1]);return a}function EM(f,a,h){return f?.6*a*h:0}function TM(f,a){return Math.max(f?f.right-f.left:0,a?a.right-a.left:0)}function JY(f,a,h,p,_,y){const b=EM(h,_,y),F=TM(h,p)*y;let z=0;const V=BM(f)/2;for(let T=0;T<f.length-1;T++){const D=f[T],H=f[T+1],O=D.dist(H);if(z+O>V){const Q=(V-z)/O,W=Sr(D.x,H.x,Q),re=Sr(D.y,H.y,Q),he=new Up(W,re,0,H.angleTo(D),T);return!b||SM(f,he,F,b,a)?he:void 0}z+=O}}function eZ(f,a,h,p,_,y,b,F,z){const V=EM(p,y,b),T=TM(p,_),D=T*b,H=f[0].x===0||f[0].x===z||f[0].y===0||f[0].y===z;return a-D<a/4&&(a=D+a/4),IM(f,H?a/2*F%a:(T/2+2*y)*b*F%a,a,V,h,D,H,!1,z)}function IM(f,a,h,p,_,y,b,F,z){const V=y/2,T=BM(f);let D=0,H=a-h,O=[];for(let Q=0;Q<f.length-1;Q++){const W=f[Q],re=f[Q+1],he=W.dist(re),Se=re.angleTo(W);for(;H+h<D+he;){H+=h;const Te=(H-D)/he,de=Sr(W.x,re.x,Te),je=Sr(W.y,re.y,Te);if(de>=0&&de<z&&je>=0&&je<z&&H-V>=0&&H+V<=T){const Ve=new Up(de,je,0,Se,Q);p&&!SM(f,Ve,y,p,_)||O.push(Ve)}}D+=he}return F||O.length||b||(O=IM(f,D/2,h,p,_,y,b,!0,z)),O}function LM(f,a,h,p,_){const y=[];for(let b=0;b<f.length;b++){const F=f[b];let z;for(let V=0;V<F.length-1;V++){let T=F[V],D=F[V+1];T.x<a&&D.x<a||(T.x<a?T=new Ye(a,T.y+(a-T.x)/(D.x-T.x)*(D.y-T.y))._round():D.x<a&&(D=new Ye(a,T.y+(a-T.x)/(D.x-T.x)*(D.y-T.y))._round()),T.y<h&&D.y<h||(T.y<h?T=new Ye(T.x+(h-T.y)/(D.y-T.y)*(D.x-T.x),h)._round():D.y<h&&(D=new Ye(T.x+(h-T.y)/(D.y-T.y)*(D.x-T.x),h)._round()),T.x>=p&&D.x>=p||(T.x>=p?T=new Ye(p,T.y+(p-T.x)/(D.x-T.x)*(D.y-T.y))._round():D.x>=p&&(D=new Ye(p,T.y+(p-T.x)/(D.x-T.x)*(D.y-T.y))._round()),T.y>=_&&D.y>=_||(T.y>=_?T=new Ye(T.x+(_-T.y)/(D.y-T.y)*(D.x-T.x),_)._round():D.y>=_&&(D=new Ye(T.x+(_-T.y)/(D.y-T.y)*(D.x-T.x),_)._round()),z&&T.equals(z[z.length-1])||(z=[T],y.push(z)),z.push(D)))))}}return y}function FM(f){let a=0,h=0;for(const b of f)a+=b.w*b.h,h=Math.max(h,b.w);f.sort((b,F)=>F.h-b.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),h),h:1/0}];let _=0,y=0;for(const b of f)for(let F=p.length-1;F>=0;F--){const z=p[F];if(!(b.w>z.w||b.h>z.h)){if(b.x=z.x,b.y=z.y,y=Math.max(y,b.y+b.h),_=Math.max(_,b.x+b.w),b.w===z.w&&b.h===z.h){const V=p.pop();F<p.length&&(p[F]=V)}else b.h===z.h?(z.x+=b.w,z.w-=b.w):b.w===z.w?(z.y+=b.h,z.h-=b.h):(p.push({x:z.x+b.w,y:z.y,w:z.w-b.w,h:b.h}),z.y+=b.h,z.h-=b.h);break}}return{w:_,h:y,fill:a/(_*y)||0}}Pe(Up,"Anchor");const sv=1;class ZS{constructor(a,{pixelRatio:h,version:p,stretchX:_,stretchY:y,content:b},F){this.paddedRect=a,this.pixelRatio=h,this.stretchX=_,this.stretchY=y,this.content=b,this.version=p,this.padding=F}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class NM{constructor(a,h,p){const _={},y={};this.haveRenderCallbacks=[];const b=[];this.addImages(a,_,sv,b),this.addImages(h,y,2,b);const{w:F,h:z}=FM(b),V=new uu({width:F||1,height:z||1});for(const T in a){const D=a[T],H=_[T].paddedRect;uu.copy(D.data,V,{x:0,y:0},{x:H.x+sv,y:H.y+sv},D.data,p,D.sdf)}for(const T in h){const D=h[T],H=y[T].paddedRect;let O=y[T].padding;const Q=H.x+O,W=H.y+O,re=D.data.width,he=D.data.height;O=O>1?O-1:O,uu.copy(D.data,V,{x:0,y:0},{x:Q,y:W},D.data,p),uu.copy(D.data,V,{x:0,y:he-O},{x:Q,y:W-O},{width:re,height:O},p),uu.copy(D.data,V,{x:0,y:0},{x:Q,y:W+he},{width:re,height:O},p),uu.copy(D.data,V,{x:re-O,y:0},{x:Q-O,y:W},{width:O,height:he},p),uu.copy(D.data,V,{x:0,y:0},{x:Q+re,y:W},{width:O,height:he},p),uu.copy(D.data,V,{x:re-O,y:he-O},{x:Q-O,y:W-O},{width:O,height:O},p),uu.copy(D.data,V,{x:0,y:he-O},{x:Q+re,y:W-O},{width:O,height:O},p),uu.copy(D.data,V,{x:0,y:0},{x:Q+re,y:W+he},{width:O,height:O},p),uu.copy(D.data,V,{x:re-O,y:0},{x:Q-O,y:W+he},{width:O,height:O},p)}this.image=V,this.iconPositions=_,this.patternPositions=y}addImages(a,h,p,_){for(const y in a){const b=a[y],F={x:0,y:0,w:b.data.width+2*p,h:b.data.height+2*p};_.push(F),h[y]=new ZS(F,b,p),b.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(a,h,p){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(_=>a.hasImage(_,p)),a.dispatchRenderCallbacks(this.haveRenderCallbacks,p);for(const _ in a.getUpdatedImages(p))this.patchUpdatedImage(this.iconPositions[_],a.getImage(_,p),h),this.patchUpdatedImage(this.patternPositions[_],a.getImage(_,p),h)}patchUpdatedImage(a,h,p){if(!a||!h||a.version===h.version)return;a.version=h.version;const[_,y]=a.tl;p.update(h.data,{position:{x:_,y}})}}Pe(ZS,"ImagePosition"),Pe(NM,"ImageAtlas");const ov=1e20;function PM(f,a,h,p,_,y,b,F,z){for(let V=a;V<a+p;V++)MM(f,h*y+V,y,_,b,F,z);for(let V=h;V<h+_;V++)MM(f,V*y+a,1,p,b,F,z)}function MM(f,a,h,p,_,y,b){y[0]=0,b[0]=-ov,b[1]=ov,_[0]=f[a];for(let F=1,z=0,V=0;F<p;F++){_[F]=f[a+F*h];const T=F*F;do{const D=y[z];V=(_[F]-_[D]+T-D*D)/(F-D)/2}while(V<=b[z]&&--z>-1);z++,y[z]=F,b[z]=V,b[z+1]=ov}for(let F=0,z=0;F<p;F++){for(;b[z+1]<F;)z++;const V=y[z],T=F-V;f[a+F*h]=_[V]+T*T}}const Af=2,JS={none:0,ideographs:1,all:2};class Q0{constructor(a,h,p){this.requestManager=a,this.localGlyphMode=h,this.localFontFamily=p,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a,h){this.urls[h]=a}getGlyphs(a,h,p){const _=[],y=this.urls[h]||It.GLYPHS_URL;for(const b in a)for(const F of a[b])_.push({stack:b,id:F});En(_,({stack:b,id:F},z)=>{let V=this.entries[b];V||(V=this.entries[b]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=V.glyphs[F];if(T!==void 0)return void z(null,{stack:b,id:F,glyph:T});if(T=this._tinySDF(V,b,F),T)return V.glyphs[F]=T,void z(null,{stack:b,id:F,glyph:T});const D=Math.floor(F/256);if(256*D>65535)return void z(new Error("glyphs > 65535 not supported"));if(V.ranges[D])return void z(null,{stack:b,id:F,glyph:T});let H=V.requests[D];H||(H=V.requests[D]=[],Q0.loadGlyphRange(b,D,y,this.requestManager,(O,Q)=>{if(Q){V.ascender=Q.ascender,V.descender=Q.descender;for(const W in Q.glyphs)this._doesCharSupportLocalGlyph(+W)||(V.glyphs[+W]=Q.glyphs[+W]);V.ranges[D]=!0}for(const W of H)W(O,Q);delete V.requests[D]})),H.push((O,Q)=>{O?z(O):Q&&z(null,{stack:b,id:F,glyph:Q.glyphs[F]||null})})},(b,F)=>{if(b)p(b);else if(F){const z={};for(const{stack:V,id:T,glyph:D}of F)z[V]===void 0&&(z[V]={}),z[V].glyphs===void 0&&(z[V].glyphs={}),z[V].glyphs[T]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics},z[V].ascender=this.entries[V].ascender,z[V].descender=this.entries[V].descender;p(null,z)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==JS.none&&(this.localGlyphMode===JS.all?!!this.localFontFamily:!!this.localFontFamily&&(Pt["CJK Unified Ideographs"](a)||Pt["Hangul Syllables"](a)||Pt.Hiragana(a)||Pt.Katakana(a)||Pt["CJK Symbols and Punctuation"](a)||Pt["CJK Unified Ideographs Extension A"](a)||Pt["CJK Unified Ideographs Extension B"](a)))}_tinySDF(a,h,p){const _=this.localFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let y=a.tinySDF;if(!y){let W="400";/bold/i.test(h)?W="900":/medium/i.test(h)?W="500":/light/i.test(h)&&(W="200"),y=a.tinySDF=new Q0.TinySDF({fontFamily:_,fontWeight:W,fontSize:24*Af,buffer:3*Af,radius:8*Af}),y.fontWeight=W}if(this.localGlyphs[y.fontWeight][p])return this.localGlyphs[y.fontWeight][p];const b=String.fromCodePoint(p),{data:F,width:z,height:V,glyphWidth:T,glyphHeight:D,glyphLeft:H,glyphTop:O,glyphAdvance:Q}=y.draw(b);return this.localGlyphs[y.fontWeight][p]={id:p,bitmap:new NA({width:z,height:V},F),metrics:{width:T/Af,height:D/Af,left:H/Af,top:O/Af-27,advance:Q/Af,localGlyph:!0}}}}Q0.loadGlyphRange=function(f,a,h,p,_){const y=256*a,b=y+255,F=p.transformRequest(p.normalizeGlyphsURL(h).replace("{fontstack}",f).replace("{range}",`${y}-${b}`),Ha.Glyphs);Ul(F,(z,V)=>{if(z)_(z);else if(V){const T={},D=function(H){return new $b(H).readFields($Y,{})}(V);for(const H of D.glyphs)T[H.id]=H;_(null,{glyphs:T,ascender:D.ascender,descender:D.descender})}})},Q0.TinySDF=class{constructor({fontSize:f=24,buffer:a=3,radius:h=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:y="normal",fontStyle:b="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=h;const F=this.size=f+4*a,z=this._createCanvas(F),V=this.ctx=z.getContext("2d",{willReadFrequently:!0});V.font=`${b} ${y} ${f}px ${_}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(F*F),this.gridInner=new Float64Array(F*F),this.f=new Float64Array(F),this.z=new Float64Array(F+1),this.v=new Uint16Array(F)}_createCanvas(f){const a=document.createElement("canvas");return a.width=a.height=f,a}draw(f){const{width:a,actualBoundingBoxAscent:h,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:y}=this.ctx.measureText(f),b=Math.ceil(h),F=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-_))),z=Math.min(this.size-this.buffer,b+Math.ceil(p)),V=F+2*this.buffer,T=z+2*this.buffer,D=Math.max(V*T,0),H=new Uint8ClampedArray(D),O={data:H,width:V,height:T,glyphWidth:F,glyphHeight:z,glyphTop:b,glyphLeft:0,glyphAdvance:a};if(F===0||z===0)return O;const{ctx:Q,buffer:W,gridInner:re,gridOuter:he}=this;Q.clearRect(W,W,F,z),Q.fillText(f,W,W+b);const Se=Q.getImageData(W,W,F,z);he.fill(ov,0,D),re.fill(0,0,D);for(let Te=0;Te<z;Te++)for(let de=0;de<F;de++){const je=Se.data[4*(Te*F+de)+3]/255;if(je===0)continue;const Ve=(Te+W)*V+de+W;if(je===1)he[Ve]=0,re[Ve]=ov;else{const et=.5-je;he[Ve]=et>0?et*et:0,re[Ve]=et<0?et*et:0}}PM(he,0,0,V,T,V,this.f,this.v,this.z),PM(re,W,W,F,z,V,this.f,this.v,this.z);for(let Te=0;Te<D;Te++){const de=Math.sqrt(he[Te])-Math.sqrt(re[Te]);H[Te]=Math.round(255-255*(de/this.radius+this.cutoff))}return O}};const MA=sv;function jM(f,a,h,p){const _=[],y=f.imagePrimary,b=y.pixelRatio,F=y.paddedRect.w-2*MA,z=y.paddedRect.h-2*MA,V=f.right-f.left,T=f.bottom-f.top,D=y.stretchX||[[0,F]],H=y.stretchY||[[0,z]],O=(Et,yt)=>Et+yt[1]-yt[0],Q=D.reduce(O,0),W=H.reduce(O,0),re=F-Q,he=z-W;let Se=0,Te=Q,de=0,je=W,Ve=0,et=re,dt=0,pt=he;if(y.content&&p){const Et=y.content;Se=Kb(D,0,Et[0]),de=Kb(H,0,Et[1]),Te=Kb(D,Et[0],Et[2]),je=Kb(H,Et[1],Et[3]),Ve=Et[0]-Se,dt=Et[1]-de,et=Et[2]-Et[0]-Te,pt=Et[3]-Et[1]-je}const at=(Et,yt,Nt,zt)=>{const Gt=Xb(Et.stretch-Se,Te,V,f.left),qt=Yb(Et.fixed-Ve,et,Et.stretch,Q),Jt=Xb(yt.stretch-de,je,T,f.top),vr=Yb(yt.fixed-dt,pt,yt.stretch,W),rr=Xb(Nt.stretch-Se,Te,V,f.left),Br=Yb(Nt.fixed-Ve,et,Nt.stretch,Q),Ur=Xb(zt.stretch-de,je,T,f.top),br=Yb(zt.fixed-dt,pt,zt.stretch,W),Cn=new Ye(Gt,Jt),dn=new Ye(rr,Jt),rn=new Ye(rr,Ur),Vr=new Ye(Gt,Ur),Zn=new Ye(qt/b,vr/b),wn=new Ye(Br/b,br/b),Pn=a*Math.PI/180;if(Pn){const Wi=Math.sin(Pn),fo=Math.cos(Pn),Vs=[fo,-Wi,Wi,fo];Cn._matMult(Vs),dn._matMult(Vs),Vr._matMult(Vs),rn._matMult(Vs)}const hi=Et.stretch+Et.fixed,Oi=Nt.stretch+Nt.fixed,Ti=yt.stretch+yt.fixed,Ii=zt.stretch+zt.fixed,qi=f.imageSecondary;return{tl:Cn,tr:dn,bl:Vr,br:rn,texPrimary:{x:y.paddedRect.x+MA+hi,y:y.paddedRect.y+MA+Ti,w:Oi-hi,h:Ii-Ti},texSecondary:qi?{x:qi.paddedRect.x+MA+hi,y:qi.paddedRect.y+MA+Ti,w:Oi-hi,h:Ii-Ti}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zn,pixelOffsetBR:wn,minFontScaleX:et/b/V,minFontScaleY:pt/b/T,isSDF:h}};if(p&&(y.stretchX||y.stretchY)){const Et=kM(D,re,Q),yt=kM(H,he,W);for(let Nt=0;Nt<Et.length-1;Nt++){const zt=Et[Nt],Gt=Et[Nt+1];for(let qt=0;qt<yt.length-1;qt++)_.push(at(zt,yt[qt],Gt,yt[qt+1]))}}else _.push(at({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:F+1},{fixed:0,stretch:z+1}));return _}function Kb(f,a,h){let p=0;for(const _ of f)p+=Math.max(a,Math.min(h,_[1]))-Math.max(a,Math.min(h,_[0]));return p}function kM(f,a,h){const p=[{fixed:-MA,stretch:0}];for(const[_,y]of f){const b=p[p.length-1];p.push({fixed:_-b.stretch,stretch:b.stretch}),p.push({fixed:_-b.stretch,stretch:b.stretch+(y-_)})}return p.push({fixed:a+MA,stretch:h}),p}function Xb(f,a,h,p){return f/a*h+p}function Yb(f,a,h,p){return f-a*h/p}function tZ(f,a,h,p){const _=a+f.positionedLines[p].lineOffset;return p===0?h+_/2:h+(_+(a+f.positionedLines[p-1].lineOffset))/2}function rZ(f,a=1,h=!1){let p=1/0,_=1/0,y=-1/0,b=-1/0;const F=f[0];for(let O=0;O<F.length;O++){const Q=F[O];(!O||Q.x<p)&&(p=Q.x),(!O||Q.y<_)&&(_=Q.y),(!O||Q.x>y)&&(y=Q.x),(!O||Q.y>b)&&(b=Q.y)}const z=Math.min(y-p,b-_);let V=z/2;const T=new la([],nZ);if(z===0)return new Ye(p,_);for(let O=p;O<y;O+=z)for(let Q=_;Q<b;Q+=z)T.push(new H0(O+V,Q+V,V,f));let D=function(O){let Q=0,W=0,re=0;const he=O[0];for(let Se=0,Te=he.length,de=Te-1;Se<Te;de=Se++){const je=he[Se],Ve=he[de],et=je.x*Ve.y-Ve.x*je.y;W+=(je.x+Ve.x)*et,re+=(je.y+Ve.y)*et,Q+=3*et}return new H0(W/Q,re/Q,0,O)}(f),H=T.length;for(;T.length;){const O=T.pop();(O.d>D.d||!D.d)&&(D=O,h&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,H)),O.max-D.d<=a||(V=O.h/2,T.push(new H0(O.p.x-V,O.p.y-V,V,f)),T.push(new H0(O.p.x+V,O.p.y-V,V,f)),T.push(new H0(O.p.x-V,O.p.y+V,V,f)),T.push(new H0(O.p.x+V,O.p.y+V,V,f)),H+=4)}return h&&(console.log(`num probes: ${H}`),console.log(`best distance: ${D.d}`)),D.p}function nZ(f,a){return a.max-f.max}class H0{constructor(a,h,p,_){this.p=new Ye(a,h),this.h=p,this.d=function(y,b){let F=!1,z=1/0;for(let V=0;V<b.length;V++){const T=b[V];for(let D=0,H=T.length,O=H-1;D<H;O=D++){const Q=T[D],W=T[O];Q.y>y.y!=W.y>y.y&&y.x<(W.x-Q.x)*(y.y-Q.y)/(W.y-Q.y)+Q.x&&(F=!F),z=Math.min(z,Ws(y,Q,W))}}return(F?1:-1)*Math.sqrt(z)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}}const eB=Number.POSITIVE_INFINITY,iZ=Math.sqrt(2);function DM(f,[a,h]){let p=0,_=0;if(h===eB){a<0&&(a=0);const y=a/iZ;switch(f){case"top-right":case"top-left":_=y-7;break;case"bottom-right":case"bottom-left":_=7-y;break;case"bottom":_=7-a;break;case"top":_=a-7}switch(f){case"top-right":case"bottom-right":p=-y;break;case"top-left":case"bottom-left":p=y;break;case"left":p=a;break;case"right":p=-a}}else{switch(a=Math.abs(a),h=Math.abs(h),f){case"top-right":case"top-left":case"top":_=h-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-h}switch(f){case"top-right":case"bottom-right":case"right":p=-a;break;case"top-left":case"bottom-left":case"left":p=a}}return[p,_]}function tB(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sZ(f,a,h,p,_,y,b,F,z,V,T,D,H,O,Q){let W=y.textMaxSize.evaluate(a,{},D);W===void 0&&(W=b);const re=f.layers[0].layout,he=re.get("icon-offset").evaluate(a,{},D),Se=RM(h.horizontal)||h.vertical,Te=H.name==="globe",de=zc,je=b/de,Ve=f.tilePixelRatio*W/de,et=(Gt=f.overscaling,f.zoom>18&&Gt>2&&(Gt>>=1),Math.max(Jr/(512*Gt),1)*re.get("symbol-spacing")),dt=re.get("text-padding")*f.tilePixelRatio,pt=re.get("icon-padding")*f.tilePixelRatio,at=vt(re.get("text-max-angle")),Et=re.get("text-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",yt=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Nt=re.get("symbol-placement"),zt=et/2;var Gt;const qt=re.get("icon-text-fit").evaluate(a,{},D),Jt=re.get("icon-text-fit-padding").evaluate(a,{},D),vr=qt!=="none";let rr;f.hasAnyIconTextFit===!1&&vr&&(f.hasAnyIconTextFit=!0),p&&vr&&(f.allowVerticalPlacement&&h.vertical&&(rr=CM(p,h.vertical,qt,Jt,he,je)),Se&&(p=CM(p,Se,qt,Jt,he,je)));const Br=(Ur,br,Cn)=>{if(br.x<0||br.x>=Jr||br.y<0||br.y>=Jr)return;let dn=null;if(Te){const{x:rn,y:Vr,z:Zn}=H.projectTilePoint(br.x,br.y,Cn);dn={anchor:new Up(rn,Vr,Zn,0,void 0),up:H.upVector(Cn,br.x,br.y)}}(function(rn,Vr,Zn,wn,Pn,hi,Oi,Ti,Ii,qi,Wi,fo,Vs,Ai,Ps,Os,Do,Da,hl,Oa,va,dc,xl,Qc,No,fh,vf){const Dd=rn.addToLineVertexArray(Vr,wn);let Od,gg,RA,yg,Cv,ok,ak,lk=0,ck=0,uk=0,hk=0,LB=-1,FB=-1;const rp={};let dk=er("");const vg=Zn?Zn.anchor:Vr,NB=Ii.layout.get("icon-text-fit").evaluate(va,{},No)!=="none";let PB=0,MB=0;if(Ii._unevaluatedLayout.getValue("text-radial-offset")===void 0?[PB,MB]=Ii.layout.get("text-offset").evaluate(va,{},No).map(Nh=>Nh*zc):(PB=Ii.layout.get("text-radial-offset").evaluate(va,{},No)*zc,MB=eB),rn.allowVerticalPlacement&&Pn.vertical){const Nh=Pn.vertical;if(Ps)ok=rB(Nh),Ti&&(ak=rB(Ti));else{const Ph=Ii.layout.get("text-rotate").evaluate(va,{},No)+90;RA=Zb(qi,vg,Vr,Wi,fo,Vs,Nh,Ai,Ph,Os),Ti&&(yg=Zb(qi,vg,Vr,Wi,fo,Vs,Ti,Da,Ph))}}if(hi){const Nh=Ii.layout.get("icon-rotate").evaluate(va,{},No),Ph=jM(hi,Nh,xl,NB),Y0=Ti?jM(Ti,Nh,xl,NB):void 0;gg=Zb(qi,vg,Vr,Wi,fo,Vs,hi,Da,Nh),lk=4*Ph.length;const fk=rn.iconSizeData;let xg=null;fk.kind==="source"?(xg=[pf*Ii.layout.get("icon-size").evaluate(va,{},No)],xg[0]>jA&&ti(`${rn.layerIds[0]}: Value for "icon-size" is >= ${av}. Reduce your "icon-size".`)):fk.kind==="composite"&&(xg=[pf*dc.compositeIconSizes[0].evaluate(va,{},No),pf*dc.compositeIconSizes[1].evaluate(va,{},No)],(xg[0]>jA||xg[1]>jA)&&ti(`${rn.layerIds[0]}: Value for "icon-size" is >= ${av}. Reduce your "icon-size".`)),rn.addSymbols(rn.icon,Ph,xg,Oa,hl,va,!1,Zn,Vr,Dd.lineStartIndex,Dd.lineLength,-1,Qc,No,fh,vf),LB=rn.icon.placedSymbolArray.length-1,Y0&&(ck=4*Y0.length,rn.addSymbols(rn.icon,Y0,xg,Oa,hl,va,nd.vertical,Zn,Vr,Dd.lineStartIndex,Dd.lineLength,-1,Qc,No,fh,vf),FB=rn.icon.placedSymbolArray.length-1)}for(const Nh in Pn.horizontal){const Ph=Pn.horizontal[Nh];Od||(dk=er(Ph.text),Ps?Cv=rB(Ph):Od=Zb(qi,vg,Vr,Wi,fo,Vs,Ph,Ai,Ii.layout.get("text-rotate").evaluate(va,{},No),Os));const Y0=Ph.positionedLines.length===1;if(uk+=OM(rn,Zn,Vr,Ph,Oi,Ii,Ps,va,Os,Dd,Pn.vertical?nd.horizontal:nd.horizontalOnly,Y0?Object.keys(Pn.horizontal):[Nh],rp,LB,dc,Qc,No,fh),Y0)break}Pn.vertical&&(hk+=OM(rn,Zn,Vr,Pn.vertical,Oi,Ii,Ps,va,Os,Dd,nd.vertical,["vertical"],rp,FB,dc,Qc,No,fh));let UA=-1;const jB=(Nh,Ph)=>Nh?Math.max(Nh,Ph):Ph;UA=jB(Cv,UA),UA=jB(ok,UA),UA=jB(ak,UA);const xJ=UA>-1?1:0;rn.glyphOffsetArray.length>=65535&&ti("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),va.sortKey!==void 0&&rn.addToSortKeyRanges(rn.symbolInstances.length,va.sortKey),rn.symbolInstances.emplaceBack(Vr.x,Vr.y,vg.x,vg.y,vg.z,rp.right>=0?rp.right:-1,rp.center>=0?rp.center:-1,rp.left>=0?rp.left:-1,rp.vertical>=0?rp.vertical:-1,LB,FB,dk,Od!==void 0?Od:rn.collisionBoxArray.length,Od!==void 0?Od+1:rn.collisionBoxArray.length,RA!==void 0?RA:rn.collisionBoxArray.length,RA!==void 0?RA+1:rn.collisionBoxArray.length,gg!==void 0?gg:rn.collisionBoxArray.length,gg!==void 0?gg+1:rn.collisionBoxArray.length,yg||rn.collisionBoxArray.length,yg?yg+1:rn.collisionBoxArray.length,Wi,uk,hk,lk,ck,xJ,0,PB,MB,UA,0,NB?1:0)})(f,br,dn,Ur,h,p,_,rr,f.layers[0],f.collisionBoxArray,a.index,a.sourceLayerIndex,f.index,dt,Et,z,0,pt,yt,he,a,y,V,T,D,O,Q)};if(Nt==="line")for(const Ur of LM(a.geometry,0,0,Jr,Jr)){const br=eZ(Ur,et,at,h.vertical||Se,p,de,Ve,f.overscaling,Jr);for(const Cn of br)Se&&oZ(f,Se.text,zt,Cn)||Br(Ur,Cn,D)}else if(Nt==="line-center"){for(const Ur of a.geometry)if(Ur.length>1){const br=JY(Ur,at,h.vertical||Se,p,de,Ve);br&&Br(Ur,br,D)}}else if(a.type==="Polygon")for(const Ur of Rb(a.geometry,0)){const br=rZ(Ur,16);Br(Ur[0],new Up(br.x,br.y,0,0,void 0),D)}else if(a.type==="LineString")for(const Ur of a.geometry)Br(Ur,new Up(Ur[0].x,Ur[0].y,0,0,void 0),D);else if(a.type==="Point")for(const Ur of a.geometry)for(const br of Ur)Br([br],new Up(br.x,br.y,0,0,void 0),D)}const av=255,jA=av*pf;function OM(f,a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re,he){const Se=function(je,Ve,et,dt,pt,at,Et,yt){const Nt=[];if(Ve.positionedLines.length===0)return Nt;const zt=dt.layout.get("text-rotate").evaluate(at,{})*Math.PI/180,Gt=function(Br){const Ur=Br[0],br=Br[1],Cn=Ur*br;return Cn>0?[Ur,-br]:Cn<0?[-Ur,br]:Ur===0?[br,Ur]:[br,-Ur]}(et);let qt=Math.abs(Ve.top-Ve.bottom);for(const Br of Ve.positionedLines)qt-=Br.lineOffset;const Jt=Ve.positionedLines.length,vr=qt/Jt;let rr=Ve.top-et[1];for(let Br=0;Br<Jt;++Br){const Ur=Ve.positionedLines[Br];rr=tZ(Ve,vr,rr,Br);for(const br of Ur.positionedGlyphs){if(!br.rect)continue;const Cn=br.rect||{};let dn=yM+1,rn=!0,Vr=1,Zn=0;if(br.imageName){const Oa=Et[br.imageName];if(!Oa)continue;if(Oa.sdf){ti("SDF images are not supported in formatted text and will be ignored.");continue}rn=!1,Vr=Oa.pixelRatio,dn=sv/Vr}const wn=(pt||yt)&&br.vertical,Pn=br.metrics.advance*br.scale/2,hi=br.metrics,Oi=br.rect;if(Oi===null)continue;yt&&Ve.verticalizable&&(Zn=br.imageName?Pn-br.metrics.width*br.scale/2:0);const Ti=pt?[br.x+Pn,br.y]:[0,0];let Ii=[0,0],qi=[0,0],Wi=!1;pt||(wn?(qi=[br.x+Pn+Gt[0],br.y+Gt[1]-Zn],Wi=!0):Ii=[br.x+Pn+et[0],br.y+et[1]-Zn]);const fo=Oi.w*br.scale/(Vr*(br.localGlyph?Af:1)),Vs=Oi.h*br.scale/(Vr*(br.localGlyph?Af:1));let Ai,Ps,Os,Do;if(wn){const Oa=br.y-rr,va=new Ye(-Pn,Pn-Oa),dc=-Math.PI/2,xl=new Ye(...qi);Ai=new Ye(-Pn+Ii[0],Ii[1]),Ai._rotateAround(dc,va)._add(xl),Ai.x+=-Oa+Pn,Ai.y-=(hi.left-dn)*br.scale;const Qc=br.imageName?hi.advance*br.scale:zc*br.scale,No=String.fromCodePoint(br.glyph);VY(No)?Ai.x+=(1-dn)*br.scale:GY(No)?Ai.x+=Qc-hi.height*br.scale+(-dn-1)*br.scale:Ai.x+=br.imageName||hi.width+2*dn===Oi.w&&hi.height+2*dn===Oi.h?(Qc-Vs)/2:(Qc-(hi.height+2*dn)*br.scale)/2,Ps=new Ye(Ai.x,Ai.y-fo),Os=new Ye(Ai.x+Vs,Ai.y),Do=new Ye(Ai.x+Vs,Ai.y-fo)}else{const Oa=(hi.left-dn)*br.scale-Pn+Ii[0],va=(-hi.top-dn)*br.scale+Ii[1],dc=Oa+fo,xl=va+Vs;Ai=new Ye(Oa,va),Ps=new Ye(dc,va),Os=new Ye(Oa,xl),Do=new Ye(dc,xl)}if(zt){let Oa;Oa=pt?new Ye(0,0):Wi?new Ye(Gt[0],Gt[1]):new Ye(et[0],et[1]),Ai._rotateAround(zt,Oa),Ps._rotateAround(zt,Oa),Os._rotateAround(zt,Oa),Do._rotateAround(zt,Oa)}const Da=new Ye(0,0),hl=new Ye(0,0);Nt.push({tl:Ai,tr:Ps,bl:Os,br:Do,texPrimary:Cn,texSecondary:void 0,writingMode:Ve.writingMode,glyphOffset:Ti,sectionIndex:br.sectionIndex,isSDF:rn,pixelOffsetTL:Da,pixelOffsetBR:hl,minFontScaleX:0,minFontScaleY:0})}}return Nt}(0,p,z,y,b,F,_,f.allowVerticalPlacement),Te=f.textSizeData;let de=null;Te.kind==="source"?(de=[pf*y.layout.get("text-size").evaluate(F,{},re)],de[0]>jA&&ti(`${f.layerIds[0]}: Value for "text-size" is >= ${av}. Reduce your "text-size".`)):Te.kind==="composite"&&(de=[pf*Q.compositeTextSizes[0].evaluate(F,{},re),pf*Q.compositeTextSizes[1].evaluate(F,{},re)],(de[0]>jA||de[1]>jA)&&ti(`${f.layerIds[0]}: Value for "text-size" is >= ${av}. Reduce your "text-size".`)),f.addSymbols(f.text,Se,de,z,b,F,T,a,h,V.lineStartIndex,V.lineLength,O,W,re,he,!1);for(const je of D)H[je]=f.text.placedSymbolArray.length-1;return 4*Se.length}function RM(f){for(const a in f)return f[a];return null}function Zb(f,a,h,p,_,y,b,F,z,V){let T=b.top,D=b.bottom,H=b.left,O=b.right;const Q=b.collisionPadding;if(Q&&(H-=Q[0],T-=Q[1],O+=Q[2],D+=Q[3]),z){const W=new Ye(H,T),re=new Ye(O,T),he=new Ye(H,D),Se=new Ye(O,D),Te=vt(z);let de=new Ye(0,0);V&&(de=new Ye(V[0],V[1])),W._rotateAround(Te,de),re._rotateAround(Te,de),he._rotateAround(Te,de),Se._rotateAround(Te,de),H=Math.min(W.x,re.x,he.x,Se.x),O=Math.max(W.x,re.x,he.x,Se.x),T=Math.min(W.y,re.y,he.y,Se.y),D=Math.max(W.y,re.y,he.y,Se.y)}return f.emplaceBack(a.x,a.y,a.z,h.x,h.y,H,T,O,D,F,p,_,y),f.length-1}function rB(f){f.collisionPadding&&(f.top-=f.collisionPadding[1],f.bottom+=f.collisionPadding[3]);const a=f.bottom-f.top;return a>0?Math.max(10,a):null}function oZ(f,a,h,p){const _=f.compareText;if(a in _){const y=_[a];for(let b=y.length-1;b>=0;b--)if(p.dist(y[b])<h)return!0}else _[a]=[];return _[a].push(p),!1}function UM(f,a){const h=f.fovAboveCenter,p=f.elevation?f.elevation.getMinElevationBelowMSL()*a:0,_=(f._camera.position[2]*f.worldSize-p)/Math.cos(f._pitch),y=Math.sin(h)*_/Math.sin(Math.max(Math.PI/2-f._pitch-h,.01));let b=Math.sin(f._pitch)*y+_;const F=_*(1/f._horizonShift);return f.elevation&&f.elevation.exaggeration()!==0||(b*=1+Math.max(f.zoom-17,0)),Math.min(1.01*b,F)}function lv(f,a){if(!a.isReprojectedInTileSpace)return{scale:1<<f.z,x:f.x,y:f.y,x2:f.x+1,y2:f.y+1,projection:a};const h=Math.pow(2,-f.z),p=f.x*h,_=(f.x+1)*h,y=f.y*h,b=(f.y+1)*h,F=bt(p),z=bt(_),V=_t(y),T=_t(b),D=a.project(F,V),H=a.project(z,V),O=a.project(z,T),Q=a.project(F,T);let W=Math.min(D.x,H.x,O.x,Q.x),re=Math.min(D.y,H.y,O.y,Q.y),he=Math.max(D.x,H.x,O.x,Q.x),Se=Math.max(D.y,H.y,O.y,Q.y);const Te=h/16;function de(Ve,et,dt,pt,at,Et){const yt=(dt+at)/2,Nt=(pt+Et)/2,zt=a.project(bt(yt),_t(Nt)),Gt=Math.max(0,W-zt.x,re-zt.y,zt.x-he,zt.y-Se);W=Math.min(W,zt.x),he=Math.max(he,zt.x),re=Math.min(re,zt.y),Se=Math.max(Se,zt.y),Gt>Te&&(de(Ve,zt,dt,pt,yt,Nt),de(zt,et,yt,Nt,at,Et))}de(D,H,p,y,_,y),de(H,O,_,y,_,b),de(O,Q,_,b,p,b),de(Q,D,p,b,p,y),W-=Te,re-=Te,he+=Te,Se+=Te;const je=1/Math.max(he-W,Se-re);return{scale:je,x:W*je,y:re*je,x2:he*je,y2:Se*je,projection:a}}function zM(f,{x:a,y:h},p=0){return new Ye(((a-p)*f.scale-f.x)*Jr,(h*f.scale-f.y)*Jr)}const aZ=Ue.mat4.identity(new Float32Array(16));class kA{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,h){return{x:0,y:0,z:0}}unproject(a,h){return new Ee(0,0)}projectTilePoint(a,h,p){return{x:a,y:h,z:0}}locationPoint(a,h,p=!0){return a._coordinatePoint(a.locationCoordinate(h),p)}pixelsPerMeter(a,h){return ut(1,a)*h}pixelSpaceConversion(a,h,p){return 1}farthestPixelDistance(a){return UM(a,a.pixelsPerMeter)}pointCoordinate(a,h,p,_){const y=a.horizonLineFromTop(!1),b=new Ye(h,Math.max(y,p));return a.rayIntersectionCoordinate(a.pointRayIntersection(b,_))}pointCoordinate3D(a,h,p){const _=new Ye(h,p);if(a.elevation)return a.elevation.pointCoordinate(_);{const y=this.pointCoordinate(a,_.x,_.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(a,h){if(a.elevation&&a.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(a,h.x,h.y);const p=a.horizonLineFromTop();return h.y<p}createInversionMatrix(a,h){return aZ}createTileMatrix(a,h,p){let _,y,b;const F=p.canonical,z=Ue.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const V=lv(F,this);_=1,y=V.x+p.wrap*V.scale,b=V.y,Ue.mat4.scale(z,z,[_/V.scale,_/V.scale,a.pixelsPerMeter/h])}else _=h/a.zoomScale(F.z),y=(F.x+Math.pow(2,F.z)*p.wrap)*_,b=F.y*_;return Ue.mat4.translate(z,z,[y,b,0]),Ue.mat4.scale(z,z,[_/Jr,_/Jr,1]),z}upVector(a,h,p){return[0,0,1]}upVectorScale(a,h,p){return{metersToTile:1}}}class lZ extends kA{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[h,p]=this.parallels=a.parallels||[29.5,45.5],_=Math.sin(vt(h));this.n=(_+Math.sin(vt(p)))/2,this.c=1+_*(2*this.n-_),this.r0=Math.sqrt(this.c)/this.n}project(a,h){const{n:p,c:_,r0:y}=this,b=vt(a-this.center[0]),F=vt(h),z=Math.sqrt(_-2*p*Math.sin(F))/p;return{x:z*Math.sin(b*p),y:z*Math.cos(b*p)-y,z:0}}unproject(a,h){const{n:p,c:_,r0:y}=this,b=y+h;let F=Math.atan2(a,Math.abs(b))*Math.sign(b);b*p<0&&(F-=Math.PI*Math.sign(a)*Math.sign(b));const z=vt(this.center[0])*p;F=Sn(F,-Math.PI-z,Math.PI-z);const V=Ir(Yt(F/p)+this.center[0],-180,180),T=Math.asin(Ir((_-(a*a+b*b)*p*p)/(2*p),-1,1)),D=Ir(Yt(T),-Tt,Tt);return new Ee(V,D)}}const cv=1.340264,uv=-.081106,hv=893e-6,dv=.003796,Jb=Math.sqrt(3)/2;class cZ extends kA{project(a,h){h=h/180*Math.PI,a=a/180*Math.PI;const p=Math.asin(Jb*Math.sin(h)),_=p*p,y=_*_*_;return{x:.5*(a*Math.cos(p)/(Jb*(cv+3*uv*_+y*(7*hv+9*dv*_)))/Math.PI+.5),y:1-.5*(p*(cv+uv*_+y*(hv+dv*_))/Math.PI+1),z:0}}unproject(a,h){a=(2*a-.5)*Math.PI;let p=h=(2*(1-h)-1)*Math.PI,_=p*p,y=_*_*_;for(let T,D,H,O=0;O<12&&(D=p*(cv+uv*_+y*(hv+dv*_))-h,H=cv+3*uv*_+y*(7*hv+9*dv*_),T=D/H,p=Ir(p-T,-Math.PI/3,Math.PI/3),_=p*p,y=_*_*_,!(Math.abs(T)<1e-12));++O);const b=Jb*a*(cv+3*uv*_+y*(7*hv+9*dv*_))/Math.cos(p),F=Math.asin(Math.sin(p)/Jb),z=Ir(180*b/Math.PI,-180,180),V=Ir(180*F/Math.PI,-Tt,Tt);return new Ee(z,V)}}class uZ extends kA{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,h){return{x:.5+a/360,y:.5-h/360,z:0}}unproject(a,h){const p=360*(a-.5),_=Ir(360*(.5-h),-Tt,Tt);return new Ee(p,_)}}const V0=Math.PI/2;function ew(f){return Math.tan((V0+f)/2)}class hZ extends kA{constructor(a){super(a),this.center=a.center||[0,30];const[h,p]=this.parallels=a.parallels||[30,30];let _=vt(h),y=vt(p);this.southernCenter=_+y<0,this.southernCenter&&(_=-_,y=-y);const b=Math.cos(_),F=ew(_);this.n=_===y?Math.sin(_):Math.log(b/Math.cos(y))/Math.log(ew(y)/F),this.f=b*Math.pow(ew(_),this.n)/this.n}project(a,h){h=vt(h),this.southernCenter&&(h=-h),a=vt(a-this.center[0]);const p=1e-6,{n:_,f:y}=this;y>0?h<-V0+p&&(h=-V0+p):h>V0-p&&(h=V0-p);const b=y/Math.pow(ew(h),_);let F=b*Math.sin(_*a),z=y-b*Math.cos(_*a);return F=.5*(F/Math.PI+.5),z=.5*(z/Math.PI+.5),{x:F,y:this.southernCenter?z:1-z,z:0}}unproject(a,h){a=(2*a-.5)*Math.PI,this.southernCenter&&(h=1-h),h=(2*(1-h)-.5)*Math.PI;const{n:p,f:_}=this,y=_-h,b=Math.sign(y),F=Math.sign(p)*Math.sqrt(a*a+y*y);let z=Math.atan2(a,Math.abs(y))*b;y*p<0&&(z-=Math.PI*Math.sign(a)*b);const V=Ir(Yt(z/p)+this.center[0],-180,180),T=Ir(Yt(2*Math.atan(Math.pow(_/F,1/p))-V0),-Tt,Tt);return new Ee(V,this.southernCenter?-T:T)}}class QM extends kA{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,h){return{x:ft(a),y:gt(h),z:0}}unproject(a,h){const p=bt(a),_=_t(h);return new Ee(p,_)}}const HM=vt(Tt);class dZ extends kA{project(a,h){const p=(h=vt(h))*h,_=p*p;return{x:.5*((a=vt(a))*(.8707-.131979*p+_*(_*(.003971*p-.001529*_)-.013791))/Math.PI+.5),y:1-.5*(h*(1.007226+p*(.015085+_*(.028874*p-.044475-.005916*_)))/Math.PI+1),z:0}}unproject(a,h){a=(2*a-.5)*Math.PI;let p=h=(2*(1-h)-1)*Math.PI,_=25,y=0,b=p*p;do{b=p*p;const V=b*b;y=(p*(1.007226+b*(.015085+V*(.028874*b-.044475-.005916*V)))-h)/(1.007226+b*(.045255+V*(.259866*b-.311325-.005916*11*V))),p=Ir(p-y,-HM,HM)}while(Math.abs(y)>1e-6&&--_>0);b=p*p;const F=Ir(Yt(a/(.8707+b*(b*(b*b*b*(.003971-.001529*b)-.013791)-.131979))),-180,180),z=Yt(p);return new Ee(F,z)}}const VM=vt(Tt);class fZ extends kA{project(a,h){h=vt(h),a=vt(a);const p=Math.cos(h),_=2/Math.PI,y=Math.acos(p*Math.cos(a/2)),b=Math.sin(y)/y,F=.5*(a*_+2*p*Math.sin(a/2)/b)||0,z=.5*(h+Math.sin(h)/b)||0;return{x:.5*(F/Math.PI+.5),y:1-.5*(z/Math.PI+1),z:0}}unproject(a,h){let p=a=(2*a-.5)*Math.PI,_=h=(2*(1-h)-1)*Math.PI,y=25;const b=1e-6;let F=0,z=0;do{const V=Math.cos(_),T=Math.sin(_),D=2*T*V,H=T*T,O=V*V,Q=Math.cos(p/2),W=Math.sin(p/2),re=2*Q*W,he=W*W,Se=1-O*Q*Q,Te=Se?1/Se:0,de=Se?Math.acos(V*Q)*Math.sqrt(1/Se):0,je=.5*(2*de*V*W+2*p/Math.PI)-a,Ve=.5*(de*T+_)-h,et=.5*Te*(O*he+de*V*Q*H)+1/Math.PI,dt=Te*(re*D/4-de*T*W),pt=.125*Te*(D*W-de*T*O*re),at=.5*Te*(H*Q+de*he*V)+.5,Et=dt*pt-at*et;F=(Ve*dt-je*at)/Et,z=(je*pt-Ve*et)/Et,p=Ir(p-F,-Math.PI,Math.PI),_=Ir(_-z,-VM,VM)}while((Math.abs(F)>b||Math.abs(z)>b)&&--y>0);return new Ee(Yt(p),Yt(_))}}class GM extends kA{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(vt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,h){const{scale:p,cosPhi:_}=this;return{x:vt(a)*_*p+.5,y:-Math.sin(vt(h))/_*p+.5,z:0}}unproject(a,h){const{scale:p,cosPhi:_}=this,y=-(h-.5)/p,b=Ir(Yt((a-.5)/p)/_,-180,180),F=Math.asin(Ir(y*_,-1,1)),z=Ir(Yt(F),-Tt,Tt);return new Ee(b,z)}}class pZ extends QM{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,h,p){const _=q1(a,h,p),y=jb(ep(p));return Ue.vec3.transformMat4(_,_,y),{x:_[0],y:_[1],z:_[2]}}locationPoint(a,h){const p=se(h.lat,h.lng),_=Ue.vec3.normalize([],p),y=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(h),a._centerAltitude):a._centerAltitude,b=ut(1,0)*Jr*y;Ue.vec3.scaleAndAdd(p,p,_,b);const F=Ue.mat4.identity(new Float64Array(16));return Ue.mat4.multiply(F,a.pixelMatrix,a.globeMatrix),Ue.vec3.transformMat4(p,p,F),new Ye(p[0],p[1])}pixelsPerMeter(a,h){return ut(1,0)*h}pixelSpaceConversion(a,h,p){const _=ut(1,a)*h,y=Sr(ut(1,45)*h,_,p);return this.pixelsPerMeter(a,h)/y}createTileMatrix(a,h,p){const _=BS(ep(p.canonical));return Ue.mat4.multiply(new Float64Array(16),a.globeMatrix,_)}createInversionMatrix(a,h){const{center:p}=a,_=jb(ep(h));return Ue.mat4.rotateY(_,_,vt(p.lng)),Ue.mat4.rotateX(_,_,vt(p.lat)),Ue.mat4.scale(_,_,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(_)}pointCoordinate(a,h,p,_){return Nb(a,h,p,!0)||new sr(0,0)}pointCoordinate3D(a,h,p){const _=this.pointCoordinate(a,h,p,0);return[_.x,_.y,_.z]}isPointAboveHorizon(a,h){return!Nb(a,h.x,h.y,!1)}farthestPixelDistance(a){const h=function(_,y){const b=_.cameraToCenterDistance,F=_._centerAltitude*y,z=_._camera,V=_._camera.forward(),T=Ue.vec3.add([],Ue.vec3.scale([],V,-b),[0,0,F]),D=_.worldSize/(2*Math.PI),H=[0,0,-D],O=_.width/_.height,Q=Math.tan(_.fovAboveCenter),W=Ue.vec3.scale([],z.up(),Q),re=Ue.vec3.scale([],z.right(),Q*O),he=Ue.vec3.normalize([],Ue.vec3.add([],Ue.vec3.add([],V,W),re)),Se=[];let Te;if(new ff(T,he).closestPointOnSphere(H,D,Se)){const de=Ue.vec3.add([],Se,H),je=Ue.vec3.sub([],de,T);Te=Math.cos(_.fovAboveCenter)*Ue.vec3.length(je)}else{const de=Ue.vec3.sub([],T,H),je=Ue.vec3.sub([],H,T);Ue.vec3.normalize(je,je);const Ve=Ue.vec3.length(de)-D;Te=Math.sqrt(Ve*(Ve+2*D));const et=Math.acos(Te/(D+Ve))-Math.acos(Ue.vec3.dot(V,je));Te*=Math.cos(et)}return 1.01*Te}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),p=FA(a.zoom);if(p>0){const _=UM(a,ut(1,a.center.lat)*a.worldSize),y=a.worldSize/(2*Math.PI),b=Math.max(a.width,a.height)/a.worldSize*Math.PI;return Sr(h,_+y*(1-Math.cos(b)),Math.pow(p,10))}return h}upVector(a,h,p){return q1(h,p,a,1)}upVectorScale(a){return{metersToTile:Op(Mb(ep(a)))}}}function qM(f){const a=f.parallels,h=!!a&&Math.abs(a[0]+a[1])<.01;switch(f.name){case"mercator":return new QM(f);case"equirectangular":return new uZ(f);case"naturalEarth":return new dZ(f);case"equalEarth":return new cZ(f);case"winkelTripel":return new fZ(f);case"albers":return h?new GM(f):new lZ(f);case"lambertConformalConic":return h?new GM(f):new hZ(f);case"globe":return new pZ(f)}throw new Error(`Invalid projection name: ${f.name}`)}const AZ=R0.VectorTileFeature.types,mZ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tw(f,a,h,p,_,y,b,F,z,V,T,D,H){const O=F?Math.min(jA,Math.round(F[0])):0,Q=F?Math.min(jA,Math.round(F[1])):0;f.emplaceBack(a,h,Math.round(32*p),Math.round(32*_),y,b,(O<<1)+(z?1:0),Q,16*V,16*T,256*D,256*H)}function rw(f,a,h){f.emplaceBack(a,h)}function nw(f,a,h,p,_,y,b){f.emplaceBack(a,h,p,_,y,b)}function iw(f,a,h,p,_){f.emplaceBack(a,h,p,_),f.emplaceBack(a,h,p,_),f.emplaceBack(a,h,p,_),f.emplaceBack(a,h,p,_)}function gZ(f){for(const a of f.sections)if(Or(a.text))return!0;return!1}class nB{constructor(a){this.layoutVertexArray=new td,this.indexArray=new Ka,this.programConfigurations=a,this.segments=new Ia,this.dynamicLayoutVertexArray=new El,this.opacityVertexArray=new uf,this.placedSymbolArray=new R1,this.iconTransitioningVertexArray=new Tu,this.globeExtVertexArray=new Tl,this.zOffsetVertexArray=new Ld}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(a,h,p,_,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,MY.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,kY.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,mZ,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=a.createVertexBuffer(this.iconTransitioningVertexArray,OY.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,jY.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||y)&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,DY.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Pe(nB,"SymbolBuffers");class iB{constructor(a,h,p){this.layoutVertexArray=new a,this.layoutAttributes=h,this.indexArray=new p,this.segments=new Ia,this.collisionVertexArray=new Id,this.collisionVertexArrayExt=new El}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,RY.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,UY.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Pe(iB,"CollisionBuffers");class sw{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.lut=a.lut,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(b=>b.fqid),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ue.mat4.identity([]),this.placementViewportMatrix=Ue.mat4.identity([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=qS(this.zoom,h["text-size"]),this.iconSizeData=qS(this.zoom,h["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),y=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&_.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(b=>nd[b]),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=a.sourceID,this.projection=a.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=p.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new nB(new Zf(this.layers,{zoom:this.zoom,lut:this.lut},a=>a.startsWith("text")||a.startsWith("symbol"))),this.icon=new nB(new Zf(this.layers,{zoom:this.zoom,lut:this.lut},a=>a.startsWith("icon")||a.startsWith("symbol"))),this.glyphOffsetArray=new wb,this.lineVertexArray=new M0,this.symbolInstances=new U1}calculateGlyphDependencies(a,h,p,_,y){for(let b=0;b<a.length;b++){const F=a.codePointAt(b);if(F===void 0)break;if(h[F]=!0,_&&y&&F<=65535){const z=nv[a.charAt(b)];z&&(h[z.charCodeAt(0)]=!0)}}}updateFootprints(a,h){}updateReplacement(a,h){if(h.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=h.updateTime;const p=h.getReplacementRegionsForTile(a.toUnwrapped(),!0);return!US(this.activeReplacements,p)&&(this.activeReplacements=p,!0)}populate(a,h,p,_){const y=this.layers[0],b=y.layout,F=this.projection.name==="globe",z=b.get("text-font"),V=b.get("text-field"),T=b.get("icon-image"),D=(V.value.kind!=="constant"||V.value.value instanceof Bo&&!V.value.value.isEmpty()||V.value.value.toString().length>0)&&(z.value.kind!=="constant"||z.value.value.length>0),H=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,O=b.get("symbol-sort-key");if(this.features=[],!D&&!H)return;const Q=h.iconDependencies,W=h.glyphDependencies,re=h.availableImages,he=new Ui(this.zoom);for(const{feature:Se,id:Te,index:de,sourceLayerIndex:je}of a){const Ve=y._featureFilter.needGeometry,et=sn(Se,Ve);if(!y._featureFilter.filter(he,et,p))continue;if(Ve||(et.geometry=tn(Se,p,_)),F&&Se.type!==1&&p.z<=5){const Et=et.geometry,yt=.98078528056,Nt=(zt,Gt)=>{const qt=q1(zt.x,zt.y,p,1),Jt=q1(Gt.x,Gt.y,p,1);return Ue.vec3.dot(qt,Jt)<yt};for(let zt=0;zt<Et.length;zt++)Et[zt]=en(Et[zt],Nt)}let dt,pt;if(D){const Et=y.getValueAndResolveTokens("text-field",et,p,re),yt=Bo.factory(Et);gZ(yt)&&(this.hasRTLText=!0),(!this.hasRTLText||ms()==="unavailable"||this.hasRTLText&&Ri.isParsed())&&(dt=HY(yt,y,et))}if(H){const Et=y.getValueAndResolveTokens("icon-image",et,p,re);pt=Et instanceof Ys?Et:Ys.fromString(Et)}if(!dt&&!pt)continue;const at=this.sortFeaturesByKey?O.evaluate(et,{},p):void 0;if(this.features.push({id:Te,text:dt,icon:pt,index:de,sourceLayerIndex:je,geometry:et.geometry,properties:Se.properties,type:AZ[Se.type],sortKey:at}),pt&&(Q[pt.namePrimary]=!0,pt.nameSecondary&&(Q[pt.nameSecondary]=!0)),dt){const Et=z.evaluate(et,{},p).join(","),yt=b.get("text-rotation-alignment")==="map"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(nd.vertical)>=0;for(const Nt of dt.sections)if(Nt.image)Q[Nt.image.namePrimary]=!0;else{const zt=Qt(dt.toString()),Gt=Nt.fontStack||Et,qt=W[Gt]=W[Gt]||{};this.calculateGlyphDependencies(Nt.text,qt,yt,this.allowVerticalPlacement,zt)}}}b.get("symbol-placement")==="line"&&(this.features=function(Se){const Te={},de={},je=[];let Ve=0;function et(Et){je.push(Se[Et]),Ve++}function dt(Et,yt,Nt){const zt=de[Et];return delete de[Et],de[yt]=zt,je[zt].geometry[0].pop(),je[zt].geometry[0]=je[zt].geometry[0].concat(Nt[0]),zt}function pt(Et,yt,Nt){const zt=Te[yt];return delete Te[yt],Te[Et]=zt,je[zt].geometry[0].shift(),je[zt].geometry[0]=Nt[0].concat(je[zt].geometry[0]),zt}function at(Et,yt,Nt){const zt=Nt?yt[0][yt[0].length-1]:yt[0][0];return`${Et}:${zt.x}:${zt.y}`}for(let Et=0;Et<Se.length;Et++){const yt=Se[Et],Nt=yt.geometry,zt=yt.text?yt.text.toString():null;if(!zt){et(Et);continue}const Gt=at(zt,Nt),qt=at(zt,Nt,!0);if(Gt in de&&qt in Te&&de[Gt]!==Te[qt]){const Jt=pt(Gt,qt,Nt),vr=dt(Gt,qt,je[Jt].geometry);delete Te[Gt],delete de[qt],de[at(zt,je[vr].geometry,!0)]=vr,je[Jt].geometry=null}else Gt in de?dt(Gt,qt,Nt):qt in Te?pt(Gt,qt,Nt):(et(Et),Te[Gt]=Ve-1,de[qt]=Ve-1)}return je.filter(Et=>Et.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Se,Te)=>Se.sortKey-Te.sortKey)}update(a,h,p,_,y){const b=Object.keys(a).length!==0;if(b&&!this.stateDependentLayers.length)return;const F=b?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(a,h,F,p,_,y),this.icon.programConfigurations.updatePaintArrays(a,h,F,p,_,y)}updateZOffset(){const a=(y,b,F)=>{p+=b,p>y.length&&y.resize(p);for(let z=-b;z<0;z++)y.emplace(z+p,F)},h=(y,b,F)=>{_+=b,_>y.length&&y.resize(_);for(let z=-b;z<0;z++)y.emplace(z+_,F)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let p=0,_=0;for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y),{numHorizontalGlyphVertices:F,numVerticalGlyphVertices:z,numIconVertices:V}=b,T=b.zOffset,D=V>0;if((F>0||z>0)&&(a(this.text.zOffsetVertexArray,F,T),a(this.text.zOffsetVertexArray,z,T)),D){const{placedIconSymbolIndex:H,verticalPlacedIconSymbolIndex:O}=b;H>=0&&h(this.icon.zOffsetVertexArray,V,T),O>=0&&h(this.icon.zOffsetVertexArray,b.numVerticalIconVertices,T)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=qM(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,h){const p=this.lineVertexArray.length;if(a.segment!==void 0)for(const{x:_,y}of h)this.lineVertexArray.emplaceBack(_,y);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(a,h,p,_,y,b,F,z,V,T,D,H,O,Q,W,re){const he=a.indexArray,Se=a.layoutVertexArray,Te=a.globeExtVertexArray,de=a.segments.prepareSegment(4*h.length,Se,he,this.canOverlap?b.sortKey:void 0),je=this.glyphOffsetArray.length,Ve=de.vertexLength,et=this.allowVerticalPlacement&&F===nd.vertical?Math.PI/2:0,dt=b.text&&b.text.sections;for(let at=0;at<h.length;at++){const{tl:Et,tr:yt,bl:Nt,br:zt,texPrimary:Gt,texSecondary:qt,pixelOffsetTL:Jt,pixelOffsetBR:vr,minFontScaleX:rr,minFontScaleY:Br,glyphOffset:Ur,isSDF:br,sectionIndex:Cn}=h[at],dn=de.vertexLength,rn=Ur[1];if(tw(Se,V.x,V.y,Et.x,rn+Et.y,Gt.x,Gt.y,p,br,Jt.x,Jt.y,rr,Br),tw(Se,V.x,V.y,yt.x,rn+yt.y,Gt.x+Gt.w,Gt.y,p,br,vr.x,Jt.y,rr,Br),tw(Se,V.x,V.y,Nt.x,rn+Nt.y,Gt.x,Gt.y+Gt.h,p,br,Jt.x,vr.y,rr,Br),tw(Se,V.x,V.y,zt.x,rn+zt.y,Gt.x+Gt.w,Gt.y+Gt.h,p,br,vr.x,vr.y,rr,Br),z){const{x:Vr,y:Zn,z:wn}=z.anchor,[Pn,hi,Oi]=z.up;nw(Te,Vr,Zn,wn,Pn,hi,Oi),nw(Te,Vr,Zn,wn,Pn,hi,Oi),nw(Te,Vr,Zn,wn,Pn,hi,Oi),nw(Te,Vr,Zn,wn,Pn,hi,Oi),iw(a.dynamicLayoutVertexArray,Vr,Zn,wn,et)}else iw(a.dynamicLayoutVertexArray,V.x,V.y,V.z,et);if(re){const Vr=qt||Gt;rw(a.iconTransitioningVertexArray,Vr.x,Vr.y),rw(a.iconTransitioningVertexArray,Vr.x+Vr.w,Vr.y),rw(a.iconTransitioningVertexArray,Vr.x,Vr.y+Vr.h),rw(a.iconTransitioningVertexArray,Vr.x+Vr.w,Vr.y+Vr.h)}he.emplaceBack(dn,dn+1,dn+2),he.emplaceBack(dn+1,dn+2,dn+3),de.vertexLength+=4,de.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ur[0]),at!==h.length-1&&Cn===h[at+1].sectionIndex||a.programConfigurations.populatePaintArrays(Se.length,b,b.index,{},O,Q,W,dt&&dt[Cn])}const pt=z?z.anchor:V;a.placedSymbolArray.emplaceBack(pt.x,pt.y,pt.z,V.x,V.y,je,this.glyphOffsetArray.length-je,Ve,T,D,V.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],F,0,!1,0,H,0)}_commitLayoutVertex(a,h,p,_,y,b,F){a.emplaceBack(h,p,_,y,b,Math.round(F.x),Math.round(F.y))}_addCollisionDebugVertices(a,h,p,_,y,b,F){const z=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),V=z.vertexLength,T=F.tileAnchorX,D=F.tileAnchorY;for(let O=0;O<4;O++)p.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(p.collisionVertexArrayExt,h,a.padding,F.zOffset),this._commitLayoutVertex(p.layoutVertexArray,_,y,b,T,D,new Ye(a.x1,a.y1)),this._commitLayoutVertex(p.layoutVertexArray,_,y,b,T,D,new Ye(a.x2,a.y1)),this._commitLayoutVertex(p.layoutVertexArray,_,y,b,T,D,new Ye(a.x2,a.y2)),this._commitLayoutVertex(p.layoutVertexArray,_,y,b,T,D,new Ye(a.x1,a.y2)),z.vertexLength+=4;const H=p.indexArray;H.emplaceBack(V,V+1),H.emplaceBack(V+1,V+2),H.emplaceBack(V+2,V+3),H.emplaceBack(V+3,V),z.primitiveLength+=4}_addTextDebugCollisionBoxes(a,h,p,_,y,b){for(let F=_;F<y;F++){const z=p.get(F),V=this.getSymbolInstanceTextSize(a,b,h,F);this._addCollisionDebugVertices(z,V,this.textCollisionBox,z.projectedAnchorX,z.projectedAnchorY,z.projectedAnchorZ,b)}}_addIconDebugCollisionBoxes(a,h,p,_,y,b){for(let F=_;F<y;F++){const z=p.get(F),V=this.getSymbolInstanceIconSize(a,h,b.placedIconSymbolIndex);this._addCollisionDebugVertices(z,V,this.iconCollisionBox,z.projectedAnchorX,z.projectedAnchorY,z.projectedAnchorZ,b)}}generateCollisionDebugBuffers(a,h){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new iB(ch,pM.members,Tu),this.iconCollisionBox=new iB(ch,pM.members,Tu);const p=U0(this.iconSizeData,a),_=U0(this.textSizeData,a);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(_,a,h,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(_,a,h,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(p,a,h,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(p,a,h,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(a,h,p,_){const y=this.text.placedSymbolArray.get(h.rightJustifiedTextSymbolIndex>=0?h.rightJustifiedTextSymbolIndex:h.centerJustifiedTextSymbolIndex>=0?h.centerJustifiedTextSymbolIndex:h.leftJustifiedTextSymbolIndex>=0?h.leftJustifiedTextSymbolIndex:h.verticalPlacedTextSymbolIndex>=0?h.verticalPlacedTextSymbolIndex:_),b=qb(this.textSizeData,a,y)/zc;return this.tilePixelRatio*b}getSymbolInstanceIconSize(a,h,p){const _=this.icon.placedSymbolArray.get(p),y=qb(this.iconSizeData,a,_);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(a,h,p,_){a.emplaceBack(h,-p,-p,_),a.emplaceBack(h,p,-p,_),a.emplaceBack(h,p,p,_),a.emplaceBack(h,-p,p,_)}_updateTextDebugCollisionBoxes(a,h,p,_,y,b){for(let F=_;F<y;F++){const z=p.get(F),V=this.getSymbolInstanceTextSize(a,b,h,F);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,V,z.padding,b.zOffset)}}_updateIconDebugCollisionBoxes(a,h,p,_,y,b){for(let F=_;F<y;F++){const z=p.get(F),V=this.getSymbolInstanceIconSize(a,h,b.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,V,z.padding,b.zOffset)}}updateCollisionDebugBuffers(a,h){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const p=U0(this.iconSizeData,a),_=U0(this.textSizeData,a);for(let y=0;y<this.symbolInstances.length;y++){const b=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(_,a,h,b.textBoxStartIndex,b.textBoxEndIndex,b),this._updateTextDebugCollisionBoxes(_,a,h,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._updateIconDebugCollisionBoxes(p,a,h,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._updateIconDebugCollisionBoxes(p,a,h,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,h,p,_,y,b,F,z,V){const T={};if(h<p){const{x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de,featureIndex:je}=a.get(h);T.textBox={x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de},T.textFeatureIndex=je}if(_<y){const{x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de,featureIndex:je}=a.get(_);T.verticalTextBox={x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de},T.verticalTextFeatureIndex=je}if(b<F){const{x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de,featureIndex:je}=a.get(b);T.iconBox={x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de},T.iconFeatureIndex=je}if(z<V){const{x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de,featureIndex:je}=a.get(z);T.verticalIconBox={x1:D,y1:H,x2:O,y2:Q,padding:W,projectedAnchorX:re,projectedAnchorY:he,projectedAnchorZ:Se,tileAnchorX:Te,tileAnchorY:de},T.verticalIconFeatureIndex=je}return T}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const p=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(a,h){const p=a.placedSymbolArray.get(h),_=p.vertexStartIndex+4*p.numGlyphs;for(let y=p.vertexStartIndex;y<_;y+=4)a.indexArray.emplaceBack(y,y+1,y+2),a.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(a),p=Math.cos(a),_=[],y=[],b=[];for(let F=0;F<this.symbolInstances.length;++F){b.push(F);const z=this.symbolInstances.get(F);_.push(0|Math.round(h*z.tileAnchorX+p*z.tileAnchorY)),y.push(z.featureIndex)}return b.sort((F,z)=>_[F]-_[z]||y[z]-y[F]),b}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let a=0;a<this.symbolInstances.length;++a)this.symbolInstanceIndexesSortedZOffset.push(a)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((a,h)=>this.symbolInstances.get(h).zOffset-this.symbolInstances.get(a).zOffset)}addToSortKeyRanges(a,h){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===h?p.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const p=this.symbolInstances.get(h);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:_,centerJustifiedTextSymbolIndex:y,leftJustifiedTextSymbolIndex:b,verticalPlacedTextSymbolIndex:F,placedIconSymbolIndex:z,verticalPlacedIconSymbolIndex:V}=p;_>=0&&this.addIndicesForPlacedSymbol(this.text,_),y>=0&&y!==_&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&b!==y&&b!==_&&this.addIndicesForPlacedSymbol(this.text,b),F>=0&&this.addIndicesForPlacedSymbol(this.text,F),z>=0&&this.addIndicesForPlacedSymbol(this.icon,z),V>=0&&this.addIndicesForPlacedSymbol(this.icon,V)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let $M,WM,sB;Pe(sw,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),sw.addDynamicAttributes=iw;class KM{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:Ro,this.defaultValue=a}evaluate(a){if(a.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(a.formattedSection))return h.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pe(KM,"FormatSectionOverride",{omit:["defaultValue"]});const oB=()=>sB||(sB={layout:$M||($M=new Bs({"symbol-placement":new Pr(ur.layout_symbol["symbol-placement"]),"symbol-spacing":new Pr(ur.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pr(ur.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ln(ur.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pr(ur.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Pr(ur.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new Pr(ur.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pr(ur.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pr(ur.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pr(ur.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ln(ur.layout_symbol["icon-size"]),"icon-text-fit":new Ln(ur.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ln(ur.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ln(ur.layout_symbol["icon-image"]),"icon-rotate":new Ln(ur.layout_symbol["icon-rotate"]),"icon-padding":new Pr(ur.layout_symbol["icon-padding"]),"icon-keep-upright":new Pr(ur.layout_symbol["icon-keep-upright"]),"icon-offset":new Ln(ur.layout_symbol["icon-offset"]),"icon-anchor":new Ln(ur.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pr(ur.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pr(ur.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pr(ur.layout_symbol["text-rotation-alignment"]),"text-field":new Ln(ur.layout_symbol["text-field"]),"text-font":new Ln(ur.layout_symbol["text-font"]),"text-size":new Ln(ur.layout_symbol["text-size"]),"text-max-width":new Ln(ur.layout_symbol["text-max-width"]),"text-line-height":new Ln(ur.layout_symbol["text-line-height"]),"text-letter-spacing":new Ln(ur.layout_symbol["text-letter-spacing"]),"text-justify":new Ln(ur.layout_symbol["text-justify"]),"text-radial-offset":new Ln(ur.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pr(ur.layout_symbol["text-variable-anchor"]),"text-anchor":new Ln(ur.layout_symbol["text-anchor"]),"text-max-angle":new Pr(ur.layout_symbol["text-max-angle"]),"text-writing-mode":new Pr(ur.layout_symbol["text-writing-mode"]),"text-rotate":new Ln(ur.layout_symbol["text-rotate"]),"text-padding":new Pr(ur.layout_symbol["text-padding"]),"text-keep-upright":new Pr(ur.layout_symbol["text-keep-upright"]),"text-transform":new Ln(ur.layout_symbol["text-transform"]),"text-offset":new Ln(ur.layout_symbol["text-offset"]),"text-allow-overlap":new Pr(ur.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pr(ur.layout_symbol["text-ignore-placement"]),"text-optional":new Pr(ur.layout_symbol["text-optional"]),visibility:new Pr(ur.layout_symbol.visibility)})),paint:WM||(WM=new Bs({"icon-opacity":new Ln(ur.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ln(ur.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ln(ur.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ln(ur.paint_symbol["text-emissive-strength"]),"icon-color":new Ln(ur.paint_symbol["icon-color"]),"icon-halo-color":new Ln(ur.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ln(ur.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ln(ur.paint_symbol["icon-halo-blur"]),"icon-translate":new Pr(ur.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pr(ur.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ln(ur.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ln(ur.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ln(ur.paint_symbol["text-occlusion-opacity"]),"text-color":new Ln(ur.paint_symbol["text-color"],{runtimeType:da,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Ln(ur.paint_symbol["text-halo-color"]),"text-halo-width":new Ln(ur.paint_symbol["text-halo-width"]),"text-halo-blur":new Ln(ur.paint_symbol["text-halo-blur"]),"text-translate":new Pr(ur.paint_symbol["text-translate"]),"text-translate-anchor":new Pr(ur.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Pr(ur.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Pr(ur.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Pr(ur.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Pr(ur.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ln(ur.paint_symbol["symbol-z-offset"]),"symbol-elevation-reference":new Pr(ur.paint_symbol["symbol-elevation-reference"])}))},sB);class ow extends Wa{constructor(a,h,p,_){super(a,oB(),h,p,_),this._colorAdjustmentMatrix=Ue.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=a.paint!==void 0&&("icon-occlusion-opacity"in a.paint||"text-occlusion-opacity"in a.paint)}recalculate(a,h){super.recalculate(a,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const y of p)_.indexOf(y)<0&&_.push(y);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(a,h,p,_){return this._saturation===a&&this._contrast===h&&this._brightnessMin===p&&this._brightnessMax===_||(this._colorAdjustmentMatrix=function(y,b,F,z){y=ht(y),b=qe(b);const V=Ue.mat4.create(),T=y/3,D=1-2*T,H=[D,T,T,0,T,D,T,0,T,T,D,0,0,0,0,1],O=.5-.5*b,Q=z-F;return Ue.mat4.multiply(V,[Q,0,0,0,0,Q,0,0,0,0,Q,0,F,F,F,1],[b,0,0,0,0,b,0,0,0,0,b,0,O,O,O,1]),Ue.mat4.multiply(V,V,H),V}(a,h,p,_),this._saturation=a,this._contrast=h,this._brightnessMin=p,this._brightnessMax=_),this._colorAdjustmentMatrix}getValueAndResolveTokens(a,h,p,_){const y=this.layout.get(a).evaluate(h,{},p,_),b=this._unevaluatedLayout._values[a];return b.isDataDriven()||Xf(b.value)||!y?y:function(F,z){return z.replace(/{([^{}]+)}/g,(V,T)=>T in F?String(F[T]):"")}(h.properties,y)}createBucket(a){return new sw(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of oB().paint.overridableProperties){if(!ow.hasPaintOverride(this.layout,a))continue;const h=this.paint.get(a),p=new KM(h),_=new bu(p,h.property.specification,this.scope,this.options);let y=null;y=h.value.kind==="constant"||h.value.kind==="source"?new af("source",_):new w("composite",_,h.value.zoomStops,h.value._interpolationType),this.paint._values[a]=new jo(h.property,y,h.parameters)}}_handleOverridablePaintPropertyUpdate(a,h,p){return!(!this.layout||h.isDataDriven()||p.isDataDriven())&&ow.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,h){const p=a.get("text-field"),_=oB().paint.properties[h];let y=!1;const b=F=>{for(const z of F)if(_.overrides&&_.overrides.hasOverride(z))return void(y=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Bo)b(p.value.value.sections);else if(p.value.kind==="source"){const F=V=>{y||(V instanceof $o&&xs(V.value)===zl?b(V.value.sections):V instanceof rl?b(V.sections):V.eachChild(F))},z=p.value;z._styleExpression&&F(z._styleExpression.expression)}return y}getProgramIds(){return["symbol"]}getDefaultProgramParams(a,h,p){return{config:new Dp(this,{zoom:h,lut:p}),overrideFog:!1}}}let XM,YM,ZM,JM;var aB=os([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function lB(f){switch(f){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function cB(f){switch(f){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class uB{constructor(a,h,p,_){this.context=a,this.format=p,this.useMipmap=_&&_.useMipmap,this.texture=a.gl.createTexture(),this.update(h,{premultiply:_&&_.premultiply})}update(a,h){const p=a&&a instanceof HTMLVideoElement&&a.width===0?a.videoWidth:a.width,_=a&&a instanceof HTMLVideoElement&&a.height===0?a.videoHeight:a.height,{context:y}=this,{gl:b}=y,{x:F,y:z}=h&&h.position?h.position:{x:0,y:0},V=Math.max(F+p,this.size?this.size[0]:0),T=Math.max(z+_,this.size?this.size[1]:0);!this.size||this.size[0]===V&&this.size[1]===T||(b.bindTexture(b.TEXTURE_2D,null),b.deleteTexture(this.texture),this.texture=b.createTexture(),this.size=null),b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA8&&(!h||h.premultiply!==!1));const D=a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||ImageBitmap&&a instanceof ImageBitmap;if(!this.size&&V>0&&T>0){const H=this.useMipmap?Math.floor(Math.log2(Math.max(V,T)))+1:1;b.texStorage2D(b.TEXTURE_2D,H,this.format,V,T),this.size=[V,T]}if(this.size)if(D)b.texSubImage2D(b.TEXTURE_2D,0,F,z,lB(this.format),cB(this.format),a);else{const H=a.data;H&&b.texSubImage2D(b.TEXTURE_2D,0,F,z,p,_,lB(this.format),cB(this.format),H)}this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(a,h,p=!1){const{context:_}=this,{gl:y}=_;y.bindTexture(y.TEXTURE_2D,this.texture),a!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,a),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,this.useMipmap&&!p?a===y.NEAREST?y.NEAREST_MIPMAP_NEAREST:y.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),h!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,h),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,h),this.wrapS=h)}bindExtraParam(a,h,p,_){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),h!==this.magFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,h),this.magFilter=h),a!==this.minFilter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,this.useMipmap?a===b.NEAREST?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),p!==this.wrapS&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,p),this.wrapS=p),_!==this.wrapT&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,_),this.wrapT=_)}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class aw{constructor(a,h){this.context=a,this.texture=h}bind(a,h){const{context:p}=this,{gl:_}=p;_.bindTexture(_.TEXTURE_2D,this.texture),a!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,a),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,a),this.minFilter=a),h!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,h),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,h),this.wrapS=h)}}function lw(f,a,h,p,_,y,b,F){const z=[f,a,1,h,p,1,_,y,1],V=[b,F,1],T=Ue.mat3.adjoint([],z),[D,H,O]=Ue.vec3.transformMat3(V,V,T);return Ue.mat3.multiply(z,z,[D,0,0,0,H,0,0,0,O])}function ej(f,a,h,p,_,y,b,F){const z=function(V,T,D,H,O,Q,W,re){const he=lw(0,0,1,0,1,1,0,1),Se=lw(V,T,D,H,O,Q,W,re),Te=Ue.mat3.adjoint([],he);return Ue.mat3.multiply(Se,Se,Te)}(f,a,h,p,_,y,b,F);return[z[2]/z[8]/Jr,z[5]/z[8]/Jr]}function cw(f){return[f[0],Math.min(Math.max(f[1],-Tt),Tt)]}class tj extends Nn{constructor(a,h,p,_){super(),this.id=a,this.dispatcher=p,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(_),this.options=h,this._dirty=!1}load(a,h){if(this._loaded=h||!1,this.fire(new tr("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return a&&(this.coordinates=a),this._loaded=!0,void this._finishLoading();this._imageRequest=vs(this.map._requestManager.transformRequest(this.url,Ha.Image),(p,_)=>{this._imageRequest=null,this._loaded=!0,p?this.fire(new _r(p)):_&&(this.image=_ instanceof HTMLImageElement?on.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,a&&(this.coordinates=a),this._finishLoading())})}loaded(){return this._loaded}updateImage(a){return a.url?(this._imageRequest&&a.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=a.url,this.load(a.coordinates,this._loaded),this):this}setTexture(a){if(!(a.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new aw(this.map.painter.context,a.handle),this.width=a.dimensions[0],this.height=a.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new tr("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(a){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof aw||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(a){if(this.coordinates=a,this._boundsArray=void 0,this._unsupportedCoords=!1,!a.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let h=a[0][1],p=a[0][1];for(const y of a)y[1]>p&&(p=y[1]),y[1]<h&&(h=y[1]);const _=(p+h)/2;if(_>Tt?this.onNorthPole=!0:_<-Tt&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const y=a.map(sr.fromLngLat);this.tileID=function(b){let F=1/0,z=1/0,V=-1/0,T=-1/0;for(const W of b)F=Math.min(F,W.x),z=Math.min(z,W.y),V=Math.max(V,W.x),T=Math.max(T,W.y);const D=Math.max(V-F,T-z),H=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),O=Math.pow(2,H);let Q=Math.floor((F+V)/2*O);return Q>1&&(Q-=1),new Xl(H,Q,Math.floor((z+T)/2*O))}(y),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new tr("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(a){for(const he in this.tiles){const Se=this.tiles[he];Se.state!=="loaded"&&(Se.state="loaded",Se.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const h=lv(new Xl(0,0,0),this.map.transform.projection),p=[h.projection.project(this.coordinates[0][0],this.coordinates[0][1]),h.projection.project(this.coordinates[1][0],this.coordinates[1][1]),h.projection.project(this.coordinates[2][0],this.coordinates[2][1]),h.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(he){const Se=he[1].x-he[0].x,Te=he[1].y-he[0].y,de=he[2].x-he[1].x,je=he[2].y-he[1].y,Ve=he[3].x-he[2].x,et=he[3].y-he[2].y,dt=he[0].x-he[3].x,pt=he[0].y-he[3].y,at=Se*je-de*Te,Et=de*et-Ve*je,yt=Ve*pt-dt*et,Nt=dt*Te-Se*pt;return at>0&&Et>0&&yt>0&&Nt>0||at<0&&Et<0&&yt<0&&Nt<0}(p))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const _=lv(this.tileID,this.map.transform.projection),[y,b,F,z]=this.coordinates.map(he=>{const Se=_.projection.project(he[0],he[1]);return zM(_,Se)._round()});this.perspectiveTransform=ej(y.x,y.y,b.x,b.y,F.x,F.y,z.x,z.y);const V=this._boundsArray=new Su;V.emplaceBack(y.x,y.y,0,0),V.emplaceBack(b.x,b.y,Jr,0),V.emplaceBack(z.x,z.y,0,Jr),V.emplaceBack(F.x,F.y,Jr,Jr),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=a.createVertexBuffer(V,aB.members),this.boundsSegments=Ia.simpleSegment(0,0,4,2);const T=[],D=[cw((H=this.coordinates)[0]),cw(H[1]),cw(H[2]),cw(H[3])];var H;const[O,Q,W,re]=function(he){let Se=he[0][0],Te=Se,de=he[0][1],je=de;for(let Ve=1;Ve<he.length;Ve++)he[Ve][0]<Se?Se=he[Ve][0]:he[Ve][0]>Te&&(Te=he[Ve][0]),he[Ve][1]<de?de=he[Ve][1]:he[Ve][1]>je&&(je=he[Ve][1]);return[Se,de,Te-Se,je-de]}(D);{const he=new Su,[Se,Te,de,je]=function(Jt){let vr=Jt[0].x,rr=vr,Br=Jt[0].y,Ur=Br;for(let br=1;br<Jt.length;br++)Jt[br].x<vr?vr=Jt[br].x:Jt[br].x>rr&&(rr=Jt[br].x),Jt[br].y<Br?Br=Jt[br].y:Jt[br].y>Ur&&(Ur=Jt[br].y);return[vr,Br,rr-vr,Ur-Br]}(p),Ve=Jt=>[(Jt.x-Se)/de,(Jt.y-Te)/je],[et,dt,pt,at]=p.map(Ve),Et=function(Jt,vr,rr,Br,Ur,br,Cn,dn){const rn=lw(0,0,1,0,1,1,0,1),Vr=lw(Jt,vr,rr,Br,Ur,br,Cn,dn),Zn=Ue.mat3.adjoint([],Vr);return Ue.mat3.multiply(rn,rn,Zn)}(et[0],et[1],dt[0],dt[1],pt[0],pt[1],at[0],at[1]);this.elevatedGlobePerspectiveTransform=ej(et[0],et[1],dt[0],dt[1],pt[0],pt[1],at[0],at[1]);const yt=(Jt,vr)=>{T.push(Jt.lng);const rr=Math.round((Jt.lng-O)/W*Jr),Br=Math.round((Jt.lat-Q)/re*Jr),Ur=Ve(vr),br=Ue.vec3.transformMat3([],[Ur[0],Ur[1],1],Et),Cn=Math.round(br[0]/br[2]*Jr),dn=Math.round(br[1]/br[2]*Jr);he.emplaceBack(rr,Br,Cn,dn)},Nt=p[3].x-p[0].x,zt=p[3].y-p[0].y,Gt=p[2].x-p[1].x,qt=p[2].y-p[1].y;for(let Jt=0;Jt<65;Jt++){const vr=Jt/64,rr=[p[0].x+vr*Nt,p[0].y+vr*zt],Br=[p[1].x+vr*Gt,p[1].y+vr*qt],Ur=Br[0]-rr[0],br=Br[1]-rr[1];for(let Cn=0;Cn<65;Cn++){const dn=Cn/64,rn={x:rr[0]+Ur*dn,y:rr[1]+br*dn,z:0};yt(h.projection.unproject(rn.x,rn.y),rn)}}this.elevatedGlobeVertexBuffer=a.createVertexBuffer(he,aB.members)}{this.maxLongitudeTriangleSize=0;let he=[],Se=new Ka;const Te=(de,je,Ve)=>{Se.emplaceBack(de,je,Ve);const et=T[de],dt=T[je],pt=T[Ve],at=Math.min(Math.min(et,dt),pt),Et=Math.max(Math.max(et,dt),pt)-at;Et>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Et),he.push(at+Et/2)};for(let de=0;de<64;de++)for(let je=0;je<64;je++){const Ve=65*de+je,et=Ve+1,dt=Ve+65,pt=dt+1;Te(Ve,dt,et),Te(et,dt,pt)}[he,Se]=function(de,je){const Ve=Array.from({length:de.length},(pt,at)=>at);Ve.sort((pt,at)=>de[pt]-de[at]);const et=[],dt=new Ka;for(let pt=0;pt<Ve.length;pt++){const at=Ve[pt];et.push(de[at]);const Et=3*at,yt=Et+1;dt.emplaceBack(je.uint16[Et],je.uint16[yt],je.uint16[yt+1])}return[et,dt]}(he,Se),this.elevatedGlobeTrianglesCenterLongitudes=he,this.elevatedGlobeIndexBuffer=a.createIndexBuffer(Se)}this.elevatedGlobeSegments=Ia.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,W/Jr,0,re/Jr,0,0,Q,O,0])}prepare(){const a=Object.keys(this.tiles).length!==0;if(this.tileID&&!a)return;const h=this.map.painter.context,p=h.gl;!this._dirty||this.texture instanceof aw||(this.texture?this.texture.update(this.image):(this.texture=new uB(h,this.image,p.RGBA8),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),a&&this._prepareData(h)}loadTile(a,h){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},h(null)):(a.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(a){const h=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!h)return null;const p=this.elevatedGlobeTrianglesCenterLongitudes;let _=(y=a+180)+360*Math.round((p[0]-y)/360);var y;const b=new Ia,F=(D,H)=>{b.segments.push({vertexOffset:0,primitiveOffset:D,vertexLength:h.segments[0].vertexLength,primitiveLength:H,sortKey:void 0,vaos:{}})},z=.51*this.maxLongitudeTriangleSize;if(Math.abs(p[0]-_)<=z){const D=We(p,0,p.length,_+z);return D===p.length||F(D,ir(p,D+1,p.length,_+360-z)-D),b}_<p[0]&&(_+=360);const V=ir(p,0,p.length,_-z);if(V===p.length)return F(0,p.length),b;F(0,V-0);const T=We(p,V+1,p.length,_+z);return T!==p.length&&F(T,p.length-T),b}}const yZ=(Math.pow(256,2)-1)/16907520;class rj extends Wa{constructor(a,h,p,_){super(a,{layout:ZM||(ZM=new Bs({visibility:new Pr(ur.layout_raster.visibility)})),paint:JM||(JM=new Bs({"raster-opacity":new Pr(ur.paint_raster["raster-opacity"]),"raster-color":new ya(ur.paint_raster["raster-color"]),"raster-color-mix":new Pr(ur.paint_raster["raster-color-mix"]),"raster-color-range":new Pr(ur.paint_raster["raster-color-range"]),"raster-hue-rotate":new Pr(ur.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pr(ur.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pr(ur.paint_raster["raster-brightness-max"]),"raster-saturation":new Pr(ur.paint_raster["raster-saturation"]),"raster-contrast":new Pr(ur.paint_raster["raster-contrast"]),"raster-resampling":new Pr(ur.paint_raster["raster-resampling"]),"raster-fade-duration":new Pr(ur.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Pr(ur.paint_raster["raster-emissive-strength"]),"raster-array-band":new Pr(ur.paint_raster["raster-array-band"]),"raster-elevation":new Pr(ur.paint_raster["raster-elevation"])}))},h,p,_),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(a){return!(a&&a._source instanceof tj&&(a._source.onNorthPole||a._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(a){a!=="raster-color"&&a!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(a){if(!this.hasColorMap()||!this._curRampRange)return;const h=this._transitionablePaint._values["raster-color"].value.expression,[p,_]=a||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(p)&&isNaN(_)||p===this._curRampRange[0]&&_===this._curRampRange[1]||(this.colorRamp=$1({expression:h,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:p,end:_}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[p,_])}}let nj,ij,sj,oj,aj;class lj extends Wa{constructor(a,h,p,_){super(a,{layout:nj||(nj=new Bs({visibility:new Pr(ur["layout_raster-particle"].visibility)})),paint:ij||(ij=new Bs({"raster-particle-array-band":new Pr(ur["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Pr(ur["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new ya(ur["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Pr(ur["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Pr(ur["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Pr(ur["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Pr(ur["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Pr(ur["paint_raster-particle"]["raster-particle-elevation"])}))},h,p,_),this._updateColorRamp(),this.lastInvalidatedAt=on.now()}onRemove(a){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(a){return!1}_handleSpecialPaintPropertyUpdate(a){a!=="raster-particle-color"&&a!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),a==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const a=this._transitionablePaint._values["raster-particle-color"].value.expression,h=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=$1({expression:a,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:h}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=on.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class vZ extends Wa{constructor(a,h){super(a,{},h,null),this.implementation=a,a.slot&&(this.slot=a.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(a){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}function hB(f,a,h){const p=[0,0,1],_=Ue.quat.identity([]);return Ue.quat.rotateY(_,_,h?-vt(f)+Math.PI:vt(f)),Ue.quat.rotateX(_,_,-vt(a)),Ue.vec3.transformQuat(p,p,_),Ue.vec3.normalize(p,p)}function cj(f,a){const h=uw(f.projection,f.zoom,f.width,f.height),p=function(y,b,F,z,V){const T=new Ee(F.lng-180*DA,F.lat),D=new Ee(F.lng+180*DA,F.lat),H=y.project(T.lng,T.lat),O=y.project(D.lng,D.lat),Q=-Math.atan2(O.y-H.y,O.x-H.x),W=sr.fromLngLat(F);W.y=Ir(W.y,-1+DA,1-DA);const re=W.toLngLat(),he=y.project(re.lng,re.lat),Se=sr.fromLngLat(re);Se.x+=DA;const Te=Se.toLngLat(),de=y.project(Te.lng,Te.lat),je=hj(de.x-he.x,de.y-he.y,Q),Ve=sr.fromLngLat(re);Ve.y+=DA;const et=Ve.toLngLat(),dt=y.project(et.lng,et.lat),pt=hj(dt.x-he.x,dt.y-he.y,Q),at=Math.abs(je.x)/Math.abs(pt.y),Et=Ue.mat4.identity([]);Ue.mat4.rotateZ(Et,Et,-Q*(1-(V?0:z)));const yt=Ue.mat4.identity([]);return Ue.mat4.scale(yt,yt,[1,1-(1-at)*z,1]),yt[4]=-pt.x/pt.y*z,Ue.mat4.rotateZ(yt,yt,Q),Ue.mat4.multiply(yt,Et,yt),yt}(f.projection,0,f.center,h,a),_=uj(f);return Ue.mat4.scale(p,p,[_,_,1]),p}function uj(f){const a=f.projection,h=uw(f.projection,f.zoom,f.width,f.height),p=dB(a,f.center),_=dB(a,Ee.convert(a.center));return Math.pow(2,p*h+(1-h)*_)}function uw(f,a,h,p,_=1/0){const y=f.range;if(!y)return 0;const b=Math.min(_,Math.max(h,p)),F=Math.log(b/1024)/Math.LN2;return cn(y[0]+F,y[1]+F,a)}const DA=1/4e4;function dB(f,a){const h=Ir(a.lat,-Tt,Tt),p=new Ee(a.lng-180*DA,h),_=new Ee(a.lng+180*DA,h),y=f.project(p.lng,h),b=f.project(_.lng,h),F=sr.fromLngLat(p),z=sr.fromLngLat(_),V=b.x-y.x,T=b.y-y.y,D=z.x-F.x,H=z.y-F.y,O=Math.sqrt((D*D+H*H)/(V*V+T*T));return Math.log(O)/Math.LN2}function hj(f,a,h){const p=Math.cos(h),_=Math.sin(h);return{x:f*p-a*_,y:f*_+a*p}}function dj(f,a,h){Ue.mat4.identity(f),Ue.mat4.rotateZ(f,f,vt(a[2])),Ue.mat4.rotateX(f,f,vt(a[0])),Ue.mat4.rotateY(f,f,vt(a[1])),Ue.mat4.scale(f,f,h),Ue.mat4.multiply(f,f,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function hw(f,a,h,p,_,y,b,F){const z=[h[0]-a[0],h[1]-a[1],0],V=[p[0]-a[0],p[1]-a[1],0];if(Ue.vec3.length(z)<1e-12||Ue.vec3.length(V)<1e-12)return Ue.quat.identity(f);const T=Ue.vec3.cross([],z,V);Ue.vec3.normalize(T,T),Ue.vec3.subtract(V,p,a),z[2]=(y-_)*F,V[2]=(b-_)*F;const D=z;return Ue.vec3.cross(D,z,V),Ue.vec3.normalize(D,D),Ue.quat.rotationTo(f,T,D)}function fB(f,a,h=!1){const p=FA(a.zoom),_=function(y,b,F){const z=b.worldSize,V=[y[12],y[13],y[14]],T=_t(V[1]/z),D=bt(V[0]/z),H=Ue.mat4.identity([]),O=ut(1,T)*z,Q=ut(1,0)*z*Vt(T,b.zoom),W=1/ES(z);let re=Q*W;if(F){const de=uw(b.projection,b.zoom,b.width,b.height,1024);re=W*b.projection.pixelSpaceConversion(b.center.lat,z,de)}const he=se(T,D);Ue.vec3.add(he,he,Ue.vec3.scale([],Ue.vec3.normalize([],he),O*re*V[2]));const Se=function(de){const je=[de[0],de[1],de[2]];let Ve=[0,1,0];const et=Ue.vec3.cross([],Ve,je);return Ue.vec3.cross(Ve,je,et),Ue.vec3.squaredLength(Ve)===0&&(Ve=[0,1,0],Ue.vec3.cross(et,je,Ve)),Ue.vec3.normalize(et,et),Ue.vec3.normalize(Ve,Ve),Ue.vec3.normalize(je,je),[et[0],et[1],et[2],0,Ve[0],Ve[1],Ve[2],0,je[0],je[1],je[2],0,de[0],de[1],de[2],1]}(he);Ue.mat4.scale(H,H,[re,re,re*O]),Ue.mat4.translate(H,H,[-V[0],-V[1],-V[2]]);const Te=Ue.mat4.multiply([],b.globeMatrix,Se);return Ue.mat4.multiply(Te,Te,H),Ue.mat4.multiply(Te,Te,y),Te}(f,a,h);if(p>0){const y=function(b,F){const z=F.worldSize,V=ut(1,0)*z*Vt(F.center.lat,F.zoom)/ES(z),T=ut(1,F.center.lat)*z,D=Ue.mat4.identity([]);return Ue.mat4.rotateY(D,D,vt(F.center.lng)),Ue.mat4.rotateX(D,D,vt(F.center.lat)),Ue.mat4.translate(D,D,[0,0,l]),Ue.mat4.scale(D,D,[V,V,V*T]),Ue.mat4.translate(D,D,[F.point.x-.5*z,F.point.y-.5*z,0]),Ue.mat4.multiply(D,D,b),Ue.mat4.multiply(D,F.globeMatrix,D)}(f,a);return function(b,F,z){const V=(Q,W,re)=>{const he=Ue.vec3.length(Q),Se=Ue.vec3.length(W),Te=Rp(Q,W,re);return Ue.vec3.scale(Te,Te,1/Ue.vec3.length(Te)*Sr(he,Se,re))},T=V([b[0],b[1],b[2]],[F[0],F[1],F[2]],z),D=V([b[4],b[5],b[6]],[F[4],F[5],F[6]],z),H=V([b[8],b[9],b[10]],[F[8],F[9],F[10]],z),O=Rp([b[12],b[13],b[14]],[F[12],F[13],F[14]],z);return[T[0],T[1],T[2],0,D[0],D[1],D[2],0,H[0],H[1],H[2],0,O[0],O[1],O[2],1]}(_,y,p)}return _}function fj(f,a,h,p){const _=Fo.projectAabbCorners(p,h);let y=Number.MAX_VALUE,b=-1;for(let V=0;V<_.length;++V){const T=_[V];T[0]=(.5*T[0]+.5)*a.width,T[1]=(.5-.5*T[1])*a.height,T[2]<y&&(b=V,y=T[2])}const F=V=>new Ye(_[V][0],_[V][1]);let z;switch(b){case 0:case 6:z=[F(1),F(5),F(4),F(7),F(3),F(2),F(1)];break;case 1:case 7:z=[F(0),F(4),F(5),F(6),F(2),F(3),F(0)];break;case 3:case 5:z=[F(1),F(0),F(4),F(7),F(6),F(2),F(1)];break;default:z=[F(1),F(5),F(6),F(7),F(3),F(0),F(1)]}if(hn(f,z))return y}const xZ=os([{name:"a_pos_3f",components:3,type:"Float32"}]),_Z=os([{name:"a_color_3f",components:3,type:"Float32"}]),bZ=os([{name:"a_color_4f",components:4,type:"Float32"}]),wZ=os([{name:"a_uv_2f",components:2,type:"Float32"}]),CZ=os([{name:"a_normal_3f",components:3,type:"Float32"}]),SZ=os([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),BZ=os([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),pj={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class dw{constructor(a,h,p,_){this.message=(a?`${a}: `:"")+p,_&&(this.identifier=_),h!=null&&h.__line__&&(this.line=h.__line__)}}function Aj(f,a){const h=f.indexOf("://")===-1;try{return new URL(f,h&&a?"http://example.com":void 0),!0}catch{return!1}}class mj{constructor(a,h){this.feature=a,this.instancedDataOffset=h,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class gj{constructor(){this.instancedDataArray=new cl,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class pB{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.layers=a.layers,this.layerIds=this.layers.map(h=>h.fqid),this.projection=a.projection,this.index=a.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(a,h){}populate(a,h,p,_){this.tileToMeter=Dt(p);const y=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:b,id:F,index:z,sourceLayerIndex:V}of a){const T=F??(b.properties&&b.properties.hasOwnProperty("id")?b.properties.id:void 0),D=sn(b,y);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),D,p))continue;const H={id:T,sourceLayerIndex:V,index:z,geometry:y?D.geometry:tn(b,p,_),properties:b.properties,type:b.type,patterns:{}},O=this.addFeature(H,H.geometry,D);O&&h.featureIndex.insert(b,H.geometry,z,V,this.index,this.instancesPerModel[O].instancedDataArray.length,Jr/32)}this.lookup=null}update(a,h,p,_){for(const y in this.instancesPerModel){const b=this.instancesPerModel[y];for(const F in a)b.idToFeaturesIndex.hasOwnProperty(F)&&(this.evaluate(b.features[b.idToFeaturesIndex[F]],a[F],b,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let a=!1;for(const h in this.instancesPerModel){const p=this.instancesPerModel[h];for(const _ of p.features){const y=this.layers[0],b=_.feature,F=this.canonical,z=y.paint.get("model-rotation").evaluate(b,{},F),V=y.paint.get("model-scale").evaluate(b,{},F),T=y.paint.get("model-translation").evaluate(b,{},F);Ue.vec3.exactEquals(_.rotation,z)&&Ue.vec3.exactEquals(_.scale,V)&&Ue.vec3.exactEquals(_.translation,T)||(this.evaluate(_,_.featureStates,p,!0),a=!0)}}return a}updateReplacement(a,h,p,_){if(h.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=h.updateTime;const y=h.getReplacementRegionsForTile(a.toUnwrapped(),!0);if(US(this.activeReplacements,y))return!1;this.activeReplacements=y;let b=!1;for(const F in this.instancesPerModel){const z=this.instancesPerModel[F],V=z.instancedDataArray;for(const T of z.features){const D=T.instancedDataOffset,H=T.instancedDataCount;for(let O=0;O<H;O++){const Q=16*(O+D);let W=V.float32[Q+0];const re=W>Jr;W=re?W-Jr:W;const he=Math.floor(W),Se=V.float32[Q+1];let Te=!1;for(const de of this.activeReplacements)if(!NP(de,p,pj.Model,_)&&!(de.min.x>he||he>de.max.x||de.min.y>Se||Se>de.max.y)&&(Te=OP(DP(he,Se,a.canonical,de.footprintTileId.canonical),de.footprint),Te))break;V.float32[Q]=Te?W+Jr:W,b=b||Te!==re}}}return b}isEmpty(){for(const a in this.instancesPerModel)if(this.instancesPerModel[a].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(a){if(!this.uploaded)for(const h in this.instancesPerModel){const p=this.instancesPerModel[h];p.instancedDataArray.length<0||p.instancedDataArray.length===0||(p.instancedDataBuffer?p.instancedDataBuffer.updateData(p.instancedDataArray):p.instancedDataBuffer=a.createVertexBuffer(p.instancedDataArray,SZ.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const h in this.instancesPerModel){const p=this.instancesPerModel[h];p.instancedDataArray.length!==0&&p.instancedDataBuffer&&p.instancedDataBuffer.destroy()}const a=this.layers[0].modelManager;if(a&&this.modelUris)for(const h of this.modelUris)a.removeModel(h,"")}addFeature(a,h,p){const _=this.layers[0],y=_.layout.get("model-id").evaluate(p,{},this.canonical);if(!y)return ti(`modelId is not evaluated for layer ${_.id} and it is not going to get rendered.`),y;Aj(y,!1)&&(this.modelUris.includes(y)||this.modelUris.push(y)),this.instancesPerModel[y]||(this.instancesPerModel[y]=new gj);const b=this.instancesPerModel[y],F=b.instancedDataArray,z=new mj(p,F.length);for(const V of h)for(const T of V){if(T.x<0||T.x>=Jr||T.y<0||T.y>=Jr)continue;const D=(this.lookupDim-1)/Jr,H=this.lookupDim*(T.y*D|0)+T.x*D|0;if(this.lookup){if(this.lookup[H]!==0)continue;this.lookup[H]=1}this.instanceCount++;const O=F.length;F.resize(O+1),b.instancesEvaluatedElevation.push(0),F.float32[16*O]=T.x,F.float32[16*O+1]=T.y}return z.instancedDataCount=b.instancedDataArray.length-z.instancedDataOffset,z.instancedDataCount>0&&(a.id&&(b.idToFeaturesIndex[a.id]=b.features.length),b.features.push(z),this.evaluate(z,{},b,!1)),y}getModelUris(){return this.modelUris}evaluate(a,h,p,_){const y=this.layers[0],b=a.feature,F=this.canonical,z=a.rotation=y.paint.get("model-rotation").evaluate(b,h,F),V=a.scale=y.paint.get("model-scale").evaluate(b,h,F),T=a.translation=y.paint.get("model-translation").evaluate(b,h,F),D=y.paint.get("model-color").evaluate(b,h,F);D.a=y.paint.get("model-color-mix-intensity").evaluate(b,h,F);const H=[];this.maxVerticalOffset<T[2]&&(this.maxVerticalOffset=T[2]),this.maxScale=Math.max(Math.max(this.maxScale,V[0]),Math.max(V[1],V[2])),dj(H,z,V);const O=Math.round(100*D.a)+D.b/1.05;for(let Q=0;Q<a.instancedDataCount;++Q){const W=a.instancedDataOffset+Q,re=16*W,he=p.instancedDataArray.float32;let Se=0;_&&(Se=he[re+6]-p.instancesEvaluatedElevation[W]);const Te=0|he[re+1];he[re]=(0|he[re])+D.r/1.05,he[re+1]=Te+D.g/1.05,he[re+2]=O,he[re+3]=1/(F.z>10?this.tileToMeter:Dt(F,Te)),he[re+4]=T[0],he[re+5]=T[1],he[re+6]=T[2]+Se,he[re+7]=H[0],he[re+8]=H[1],he[re+9]=H[2],he[re+10]=H[4],he[re+11]=H[5],he[re+12]=H[6],he[re+13]=H[8],he[re+14]=H[9],he[re+15]=H[10],p.instancesEvaluatedElevation[W]=T[2]}}}let yj,vj;Pe(pB,"ModelBucket",{omit:["layers"]}),Pe(gj,"PerModelAttributes"),Pe(mj,"ModelFeature");const pg=64,G0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function xj(f,a,h,p,_,y,b,F,z,V=!1){const T=h.zoom,D=h.project(p),H=Vt(p.lat,T),O=1/H;Ue.mat4.identity(f),Ue.mat4.translate(f,f,[D.x+b[0]*O,D.y+b[1]*O,b[2]]);let Q=1,W=1;const re=h.worldSize;if(V){if(h.projection.name==="mercator"){let de=0;h.elevation&&(de=h.elevation.getAtPointOrZero(new sr(D.x/re,D.y/re),0));const je=Ue.vec4.transformMat4([],[D.x,D.y,de,1],h.projMatrix)[3]/h.cameraToCenterDistance;Q=je,W=je*Vt(h.center.lat,T)}else if(h.projection.name==="globe"){const de=fB(f,h),je=Ue.mat4.multiply([],h.projMatrix,de),Ve=[0,0,0,1];Ue.vec4.transformMat4(Ve,Ve,je);const et=Ve[3]/h.cameraToCenterDistance,dt=FA(T),pt=h.projection.pixelsPerMeter(p.lat,re)*Vt(p.lat,T),at=h.projection.pixelsPerMeter(h.center.lat,re)*Vt(h.center.lat,T);Q=et/Sr(pt,jt(h.center.lat),dt),W=et*H/pt,Q*=at,W*=at}}else Q=O;Ue.mat4.scale(f,f,[Q,Q,W]);const he=[...f],Se=a.orientation,Te=[];if(dj(Te,[Se[0]+_[0],Se[1]+_[1],Se[2]+_[2]],y),Ue.mat4.multiply(f,he,Te),F&&h.elevation){let de=0;const je=[];if(z&&h.elevation){de=function(dt,pt,at,Et,yt){const Nt=pt.elevation;if(!Nt)return 0;const zt=Fo.projectAabbCorners(at,Et),Gt=ut(1,yt.lat)*pt.worldSize,qt=function(Zn,wn){const Pn=[0,0,1],hi=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Oi of hi){const Ti=Zn[Oi.corners[0]],Ii=Zn[Oi.corners[1]],qi=Zn[Oi.corners[2]],Wi=[Ii[0]-Ti[0],Ii[1]-Ti[1],wn*(Ii[2]-Ti[2])],fo=Ue.vec3.cross(Wi,Wi,[qi[0]-Ti[0],qi[1]-Ti[1],wn*(qi[2]-Ti[2])]);Ue.vec3.normalize(fo,fo),Oi.dotProductWithUp=Ue.vec3.dot(fo,Pn)}return hi.sort((Oi,Ti)=>Oi.dotProductWithUp-Ti.dotProductWithUp),hi[0].corners}(zt,Gt),Jt=zt[qt[0]],vr=zt[qt[1]],rr=zt[qt[2]],Br=zt[qt[3]],Ur=Nt.getAtPointOrZero(new sr(Jt[0]/pt.worldSize,Jt[1]/pt.worldSize),0),br=Nt.getAtPointOrZero(new sr(vr[0]/pt.worldSize,vr[1]/pt.worldSize),0),Cn=Nt.getAtPointOrZero(new sr(rr[0]/pt.worldSize,rr[1]/pt.worldSize),0),dn=Nt.getAtPointOrZero(new sr(Br[0]/pt.worldSize,Br[1]/pt.worldSize),0),rn=(Ur+dn)/2,Vr=(br+Cn)/2;return rn>Vr?br<Cn?hw(dt,vr,Br,Jt,br,dn,Ur,Gt):hw(dt,rr,Jt,Br,Cn,Ur,dn,Gt):Ur<dn?hw(dt,Jt,vr,rr,Ur,br,Cn,Gt):hw(dt,Br,rr,vr,dn,Cn,br,Gt),Math.max(rn,Vr)}(je,h,a.aabb,f,p);const Ve=Ue.mat4.fromQuat([],je),et=Ue.mat4.multiply([],Ve,Te);Ue.mat4.multiply(f,he,et)}else de=h.elevation.getAtPointOrZero(new sr(D.x/re,D.y/re),0);de!==0&&(f[14]+=de)}}function fv(f,a,h=!1){f.uploaded||(f.gfxTexture=new uB(a,f.image,h?a.gl.R8:a.gl.RGBA8,{useMipmap:f.sampler.minFilter>=a.gl.NEAREST_MIPMAP_NEAREST}),f.uploaded=!0,f.image=null)}function EZ(f,a,h){f.indexBuffer=a.createIndexBuffer(f.indexArray,!1,!0),f.vertexBuffer=a.createVertexBuffer(f.vertexArray,xZ.members,!1,!0),f.normalArray&&(f.normalBuffer=a.createVertexBuffer(f.normalArray,CZ.members,!1,!0)),f.texcoordArray&&(f.texcoordBuffer=a.createVertexBuffer(f.texcoordArray,wZ.members,!1,!0)),f.colorArray&&(f.colorBuffer=a.createVertexBuffer(f.colorArray,(f.colorArray.bytesPerElement===12?_Z:bZ).members,!1,!0)),f.featureArray&&(f.pbrBuffer=a.createVertexBuffer(f.featureArray,BZ.members,!0)),f.segments=Ia.simpleSegment(0,0,f.vertexArray.length,f.indexArray.length);const p=f.material;p.pbrMetallicRoughness.baseColorTexture&&fv(p.pbrMetallicRoughness.baseColorTexture,a),p.pbrMetallicRoughness.metallicRoughnessTexture&&fv(p.pbrMetallicRoughness.metallicRoughnessTexture,a),p.normalTexture&&fv(p.normalTexture,a),p.occlusionTexture&&fv(p.occlusionTexture,a,h),p.emissionTexture&&fv(p.emissionTexture,a)}function AB(f,a,h){if(f.meshes)for(const p of f.meshes)EZ(p,a,h);if(f.children)for(const p of f.children)AB(p,a,h)}function fw(f){if(f.meshes)for(const a of f.meshes)a.indexArray.destroy(),a.vertexArray.destroy(),a.colorArray&&a.colorArray.destroy(),a.normalArray&&a.normalArray.destroy(),a.texcoordArray&&a.texcoordArray.destroy(),a.featureArray&&a.featureArray.destroy();if(f.children)for(const a of f.children)fw(a)}function mB(f){if(f.meshes)for(const h of f.meshes)h.vertexBuffer&&(h.vertexBuffer.destroy(),h.indexBuffer.destroy(),h.normalBuffer&&h.normalBuffer.destroy(),h.texcoordBuffer&&h.texcoordBuffer.destroy(),h.colorBuffer&&h.colorBuffer.destroy(),h.pbrBuffer&&h.pbrBuffer.destroy(),h.segments.destroy(),h.material&&((a=h.material).pbrMetallicRoughness.baseColorTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),a.pbrMetallicRoughness.metallicRoughnessTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),a.normalTexture&&a.normalTexture.gfxTexture&&a.normalTexture.gfxTexture.destroy(),a.emissionTexture&&a.emissionTexture.gfxTexture&&a.emissionTexture.gfxTexture.destroy(),a.occlusionTexture&&a.occlusionTexture.gfxTexture&&a.occlusionTexture.gfxTexture.destroy()));var a;if(f.children)for(const h of f.children)mB(h)}class q0{constructor(a,h,p){this._demTile=a,this._dem=this._demTile.dem,this._scale=h,this._offset=p}static create(a,h,p){const _=p||a.findDEMTileFor(h);if(!_||!_.dem)return;const y=_.dem,b=_.tileID,F=1<<h.canonical.z-b.canonical.z;return new q0(_,y.dim/Jr/F,[(h.canonical.x/F-b.canonical.x)*y.dim,(h.canonical.y/F-b.canonical.y)*y.dim])}tileCoordToPixel(a,h){const p=h*this._scale+this._offset[1],_=Math.floor(a*this._scale+this._offset[0]),y=Math.floor(p);return new Ye(_,y)}getElevationAt(a,h,p,_){const y=a*this._scale+this._offset[0],b=h*this._scale+this._offset[1],F=Math.floor(y),z=Math.floor(b),V=this._dem;return _=!!_,p?Sr(Sr(V.get(F,z,_),V.get(F,z+1,_),b-z),Sr(V.get(F+1,z,_),V.get(F+1,z+1,_),b-z),y-F):V.get(F,z,_)}getElevationAtPixel(a,h,p){return this._dem.get(a,h,!!p)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*ut(1,a)*this._dem.stride}}const gB=new Float32Array(262144),Ag=new Uint8Array(262144);function _j(f){let a=0;if(f.meshes)for(const h of f.meshes)a=Math.max(a,h.aabb.max[2]);if(f.children)for(const h of f.children)a=Math.max(a,_j(h));return a}function bj(f,a,h){if(f.meshes)for(const p of f.meshes)p.aabb.min[0]!==1/0&&h.insert(a,p.aabb.min[0],p.aabb.min[1],p.aabb.max[0],p.aabb.max[1]);if(f.children)for(const p of f.children)bj(p,a,h)}const wj=["","wall","door","roof","window","lamp","logo"];class Cj{constructor(a){this.node=a,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:a.id,geometry:[],properties:{height:_j(a)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new Fo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let a=0;const h=new Fo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const p of this.node.meshes)this.node.lightMeshIndex!==a&&(p.transformedAabb=Fo.applyTransformFast(p.aabb,this.node.matrix),h.encapsulate(p.transformedAabb)),a++;this.aabb=h}return this.aabb}}class pw{constructor(a,h,p,_,y,b){this.id=h,this.modelTraits|=G0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,p&&(this.modelTraits|=G0.HasMapboxMeshFeatures),_&&(this.modelTraits|=G0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=y,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const F of a)this.nodesInfo.push(new Cj(F)),bj(F,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0)}updateFootprints(a,h){for(const p of this.getNodesInfo()){const _=p.node;_.footprint&&h.push({footprint:_.footprint,id:a})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(a){if(!this.needsUpload)return;const h=this.getNodesInfo();for(const p of h){const _=p.node;this.uploaded?this.updatePbrBuffer(_):AB(_,a,!0)}for(const p of h)fw(p.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(a){let h=!1;if(!a.meshes)return h;for(const p of a.meshes)p.pbrBuffer&&(p.pbrBuffer.updateData(p.featureArray),h=!0);return h}needsReEvaluation(a,h,p){const _=a.transform.projectionOptions,y=a.style.getBrightness(),b=this.brightness!==y;return!!(!this.uploaded||this.dirty||_.name!==this.projection.name||pv(p.paint.get("model-color").value,b)||pv(p.paint.get("model-color-mix-intensity").value,b)||pv(p.paint.get("model-roughness").value,b)||pv(p.paint.get("model-emissive-strength").value,b)||pv(p.paint.get("model-height-based-emissive-strength-multiplier").value,b))&&(this.projection=_,this.brightness=y,!0)}evaluateScale(a,h){if(a.transform.zoom===this.zoom)return;this.zoom=a.transform.zoom;const p=this.getNodesInfo(),_=this.id.canonical;for(const y of p){const b=y.feature;y.evaluatedScale=h.paint.get("model-scale").evaluate(b,{},_)}}evaluate(a){const h=this.getNodesInfo();for(const p of h){if(!p.node.meshes)continue;const _=p.feature,y=p.node.meshes&&p.node.meshes[0].featureData,b=p.evaluatedColor[2],F=p.evaluatedRMEA[2],z=this.id.canonical;if(p.hasTranslucentParts=!1,y){for(let V=0;V<wj.length;V++){const T=wj[V];T.length&&(_.properties.part=T);const D=a.paint.get("model-color").evaluate(_,{},z).toRenderColor(null),H=a.paint.get("model-color-mix-intensity").evaluate(_,{},z);p.evaluatedColor[V]=[D.r,D.g,D.b,H],p.evaluatedRMEA[V][0]=a.paint.get("model-roughness").evaluate(_,{},z),p.evaluatedRMEA[V][2]=a.paint.get("model-emissive-strength").evaluate(_,{},z),p.evaluatedRMEA[V][3]=D.a,p.emissionHeightBasedParams[V]=a.paint.get("model-height-based-emissive-strength-multiplier").evaluate(_,{},z),!p.hasTranslucentParts&&D.a<1&&(p.hasTranslucentParts=!0)}delete _.properties.part,IZ(p,b!==p.evaluatedColor[2]||F!==p.evaluatedRMEA[2],this.modelTraits)}else p.evaluatedRMEA[0][2]=a.paint.get("model-emissive-strength").evaluate(_,{},z);p.evaluatedScale=a.paint.get("model-scale").evaluate(_,{},z),this.updatePbrBuffer(p.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(a,h,p,_){const y=a.findDEMTileFor(p);if(y&&(y.tileID.canonical!==this.terrainTile||h!==this.terrainExaggeration)){if(y.dem&&y.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=y.tileID.overscaledZ;const b=q0.create(a,p,y);if(!b)return;this.modelTraits&G0.HasMapboxMeshFeatures&&this.updateDEM(a,b,p,_);for(const F of this.getNodesInfo()){const z=F.node;if(!z.footprint||!z.footprint.vertices||!z.footprint.vertices.length)continue;const V=z.footprint.vertices;let T=b.getElevationAt(V[0].x,V[0].y,!0,!0);for(let D=1;D<V.length;D++)T=Math.min(T,b.getElevationAt(V[D].x,V[D].y,!0,!0));z.elevation=T}}this.terrainTile=y.tileID.canonical,this.terrainExaggeration=h}}updateDEM(a,h,p,_){let y=h._dem._modifiedForSources[_];if(y===void 0&&(h._dem._modifiedForSources[_]=[],y=h._dem._modifiedForSources[_]),y.includes(p.canonical))return;const b=h._dem.dim;y.push(p.canonical);let F=!1;for(const z of this.getNodesInfo()){const V=z.node;if(!V.footprint||!V.footprint.grid)continue;const T=V.footprint.grid,D=h.tileCoordToPixel(T.min.x,T.min.y),H=h.tileCoordToPixel(T.max.x,T.max.y),O=Math.min(Math.min(b-H.y,D.x),Math.min(D.y,b-H.x));if(O<0)continue;const Q=Ir(O,2,5);let W=Math.max(0,D.x-Q),re=Math.max(0,D.y-Q),he=Math.min(H.x+Q,b-1),Se=Math.min(H.y+Q,b-1);for(let Ve=re;Ve<=Se;++Ve)for(let et=W;et<=he;++et)Ag[Ve*b+et]=255;let Te=0,de=0;for(let Ve=0;Ve<T.cellsY;++Ve)for(let et=0;et<T.cellsX;++et){if(!T.cells[Ve*T.cellsX+et])continue;const dt=h.tileCoordToPixel(T.min.x+et/T.xScale,T.min.y+Ve/T.yScale),pt=h.tileCoordToPixel(T.min.x+(et+1)/T.xScale,T.min.y+(Ve+1)/T.yScale);for(let at=dt.y;at<=Math.min(pt.y+1,b-1);++at)for(let Et=dt.x;Et<=Math.min(pt.x+1,b-1);++Et)Ag[at*b+Et]===255&&(Ag[at*b+Et]=0,Te+=h.getElevationAtPixel(Et,at),de++)}const je=Te/de;W=Math.max(1,D.x-Q),re=Math.max(1,D.y-Q),he=Math.min(H.x+Q,b-2),Se=Math.min(H.y+Q,b-2),F=!0;for(let Ve=re;Ve<=Se;++Ve)for(let et=W;et<=he;++et)Ag[Ve*b+et]===0&&(gB[Ve*b+et]=h._dem.set(et,Ve,je));for(let Ve=1;Ve<Q;++Ve){W=Math.max(1,D.x-Ve),re=Math.max(1,D.y-Ve),he=Math.min(H.x+Ve,b-2),Se=Math.min(H.y+Ve,b-2);for(let et=re;et<=Se;++et)for(let dt=W;dt<=he;++dt){const pt=et*b+dt;if(Ag[pt]===255){let at=0,Et=0,yt=-1,Nt=-1;for(let zt=-1;zt<=1;++zt)for(let Gt=-1;Gt<=1;++Gt){const qt=(et+zt)*b+dt+Gt;if(Ag[qt]>=Ve)continue;const Jt=gB[qt],vr=Math.abs(Jt);vr>Et&&(at=Jt,Et=vr,yt=Gt,Nt=zt)}if(Et>.1){const zt=1-(Ve+.5*Math.abs(yt*Nt))/Q;let Gt=h._dem.get(dt,et)+at*zt;const qt=h._dem.get(dt+yt,et+Nt),Jt=h._dem.get(dt-yt,et-Nt,!0);(Gt-qt)*(Gt-Jt)>0&&(Gt=(qt+Jt)/2),gB[pt]=h._dem.set(dt,et,Gt),Ag[pt]=Ve}}}}}F&&(h._demTile.needsDEMTextureUpload=!0,h._dem._timestamp=on.now())}getNodesInfo(){return this.nodesInfo}destroy(){const a=this.getNodesInfo();for(const h of a)fw(h.node),mB(h.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(a,h){if(h.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=h.updateTime;const p=h.getReplacementRegionsForTile(a.toUnwrapped()),_=this.getNodesInfo();for(let y=0;y<this.nodesInfo.length;y++){const b=_[y].node;_[y].hiddenByReplacement=!!b.footprint&&!p.find(F=>F.footprint===b.footprint)}}getHeightAtTileCoord(a,h){const p=this.getNodesInfo(),_=[],y=[0,0,0],b=Ue.mat4.identity([]);for(let F=0;F<this.nodesInfo.length;F++){const z=p[F],V=z.node.meshes[0],T=V.transformedAabb;if(a<T.min[0]||h<T.min[1]||a>T.max[0]||h>T.max[1])continue;if(z.node.hidden===!0)return{height:1/0,maxHeight:z.feature.properties.height,hidden:!1,verticalScale:z.evaluatedScale[2]};Ue.mat4.invert(b,z.node.matrix),y[0]=a,y[1]=h,Ue.vec3.transformMat4(y,y,b);const D=(y[0]-V.aabb.min[0])/(V.aabb.max[0]-V.aabb.min[0])*pg|0,H=Math.min(63,(y[1]-V.aabb.min[1])/(V.aabb.max[1]-V.aabb.min[1])*pg|0)*pg+Math.min(63,D),O=V.heightmap[H];if(!(O<0&&z.node.footprint))return z.hiddenByReplacement?void 0:{height:O,maxHeight:z.feature.properties.height,hidden:!1,verticalScale:z.evaluatedScale[2]};if(z.node.footprint.grid.query(new Ye(a,h),new Ye(a,h),_),_.length>0)return{height:void 0,maxHeight:z.feature.properties.height,hidden:z.hiddenByReplacement,verticalScale:z.evaluatedScale[2]}}}}function pv(f,a){return!f.isLightConstant&&a}function TZ(f,a,h,p,_,y,b,F){let z=(61440&a|(61440&a)>>4)>>8,V=(3840&a|(3840&a)>>4)>>4,T=240&a|(240&a)>>4;h[3]>0&&(z=Sr(z,255*h[0],h[3]),V=Sr(V,255*h[1],h[3]),T=Sr(T,255*h[2],h[3]));const D=z<<8|V,H=T<<8|Math.floor(255*p[3]),O=function(Ve){const et=Ir(Ve,0,2);return Math.min(Math.round(.5*et*255),255)}(p[2])<<8|15*p[0]<<4|15*p[1],Q=Ir(_[0],0,1),W=Ir(_[1],0,1),re=Ir(_[2],0,1),he=Ir(_[3],0,1);let Se,Te,de,je;if(Q!==W&&b!==y&&W!==Q){const Ve=b-y;Te=1/(Ve*(W-Q)),de=-(y+Ve*Q)/(Ve*(W-Q));const et=Ir(_[4],-1,1);je=Math.pow(10,et),Se=255*re<<8|255*he}else Se=65535,Te=0,de=1,je=1;if(f.emplaceBack(D,H,O,Se,Te,de,je),F){const Ve=F.length;F.clear();for(let et=0;et<Ve;et++)F.emplaceBack(D,H,O,Se,Te,de,je)}}function IZ(f,a,h){const p=f.node;let _=0;const y=h&G0.HasMeshoptCompression;for(const b of p.meshes){if(p.lights&&p.lightMeshIndex===_||!b.featureData)continue;b.featureArray=new Iu,b.featureArray.reserve(b.featureData.length);let F=a;for(const z of b.featureData){const V=y?65535&z:z>>16&65535,T=y?z>>16&65535:65535&z,D=(15&T)<8?15&T:0,H=f.evaluatedRMEA[D],O=f.evaluatedColor[D],Q=f.emissionHeightBasedParams[D];let W;if(F&&D===2&&p.lights&&(W=new Iu,W.resize(10*p.lights.length)),TZ(b.featureArray,V,O,H,Q,b.aabb.min[2],b.aabb.max[2],W),W&&F){F=!1;const re=p.meshes[p.lightMeshIndex];re.featureArray=W,re.featureArray._trim()}}b.featureArray._trim(),_++}}function Sj(f,a,h,p){const _=1<<f.z;a.lat=_t((p/Jr+f.y)/_),a.lng=bt((h/Jr+f.x)/_)}Pe(pw,"Tiled3dModelBucket",{omit:["layers"]}),Pe(Cj,"Tiled3dModelFeature");const LZ={circle:class extends Wa{constructor(f,a,h,p){super(f,{layout:Hs||(Hs=new Bs({"circle-sort-key":new Ln(ur.layout_circle["circle-sort-key"]),visibility:new Pr(ur.layout_circle.visibility)})),paint:La||(La=new Bs({"circle-radius":new Ln(ur.paint_circle["circle-radius"]),"circle-color":new Ln(ur.paint_circle["circle-color"]),"circle-blur":new Ln(ur.paint_circle["circle-blur"]),"circle-opacity":new Ln(ur.paint_circle["circle-opacity"]),"circle-translate":new Pr(ur.paint_circle["circle-translate"]),"circle-translate-anchor":new Pr(ur.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pr(ur.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pr(ur.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ln(ur.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ln(ur.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ln(ur.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Pr(ur.paint_circle["circle-emissive-strength"])}))},a,h,p)}createBucket(f){return new Xn(f)}queryRadius(f){const a=f;return ia("circle-radius",this,a)+ia("circle-stroke-width",this,a)+to(this.paint.get("circle-translate"))}queryIntersectsFeature(f,a,h,p,_,y,b,F){const z=Es(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),V=this.paint.get("circle-radius").evaluate(a,h)+this.paint.get("circle-stroke-width").evaluate(a,h);return nP(f,p,y,b,F,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",z,V)}getProgramIds(){return["circle"]}getDefaultProgramParams(f,a,h){const p=rP(this);return{config:new Dp(this,{zoom:a,lut:h}),defines:p,overrideFog:!1}}},heatmap:class extends Wa{createBucket(f){return new sP(f)}constructor(f,a,h,p){super(f,{layout:oP||(oP=new Bs({visibility:new Pr(ur.layout_heatmap.visibility)})),paint:aP||(aP=new Bs({"heatmap-radius":new Ln(ur.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ln(ur.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pr(ur.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ya(ur.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pr(ur.paint_heatmap["heatmap-opacity"])}))},a,h,p),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(f){f==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(f){return ia("heatmap-radius",this,f)}queryIntersectsFeature(f,a,h,p,_,y,b,F){const z=this.paint.get("heatmap-radius").evaluate(a,h);return nP(f,p,y,b,F,!0,!0,new Ye(0,0),z)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(f,a,h){return f==="heatmap"?{config:new Dp(this,{zoom:a,lut:h}),overrideFog:!1}:{}}},hillshade:class extends Wa{constructor(f,a,h,p){super(f,{layout:lP||(lP=new Bs({visibility:new Pr(ur.layout_hillshade.visibility)})),paint:cP||(cP=new Bs({"hillshade-illumination-direction":new Pr(ur.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pr(ur.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pr(ur.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pr(ur.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pr(ur.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pr(ur.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Pr(ur.paint_hillshade["hillshade-emissive-strength"])}))},a,h,p)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(f,a,h){return{overrideFog:!1}}},fill:class extends Wa{constructor(f,a,h,p){super(f,{layout:gP||(gP=new Bs({"fill-sort-key":new Ln(ur.layout_fill["fill-sort-key"]),visibility:new Pr(ur.layout_fill.visibility)})),paint:yP||(yP=new Bs({"fill-antialias":new Pr(ur.paint_fill["fill-antialias"]),"fill-opacity":new Ln(ur.paint_fill["fill-opacity"]),"fill-color":new Ln(ur.paint_fill["fill-color"]),"fill-outline-color":new Ln(ur.paint_fill["fill-outline-color"]),"fill-translate":new Pr(ur.paint_fill["fill-translate"]),"fill-translate-anchor":new Pr(ur.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ln(ur.paint_fill["fill-pattern"]),"fill-emissive-strength":new Pr(ur.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ln(ur.paint_fill["fill-z-offset"])}))},a,h,p)}getProgramIds(){const f=this.paint.get("fill-pattern"),a=f&&f.constantOr(1),h=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&h.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),h}getDefaultProgramParams(f,a,h){return{config:new Dp(this,{zoom:a,lut:h}),overrideFog:!1}}recalculate(f,a){super.recalculate(f,a);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(f){return new MS(f)}queryRadius(){return to(this.paint.get("fill-translate"))}queryIntersectsFeature(f,a,h,p,_,y){return!f.queryGeometry.isAboveHorizon&&li(Di(f.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Wa{constructor(f,a,h,p){super(f,{layout:JP||(JP=new Bs({visibility:new Pr(ur["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Pr(ur["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:eM||(eM=new Bs({"fill-extrusion-opacity":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ln(ur["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Pr(ur["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},a,h,p),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(f){return new Gb(f)}queryRadius(){return to(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(f,a,h,p,_,y,b,F,z){const V=Es(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(a,h),D=this.paint.get("fill-extrusion-base").evaluate(a,h),H=[0,0],O=F&&y.elevation,Q=y.elevation?y.elevation.exaggeration():1,W=f.tile.getBucket(this);if(O&&W instanceof Gb){const de=W.centroidVertexArray,je=z+1;je<de.length&&(H[0]=de.geta_centroid_pos0(je),H[1]=de.geta_centroid_pos1(je))}if(H[0]===0&&H[1]===1)return!1;y.projection.name==="globe"&&(p=ZP([p],[new Ye(0,0),new Ye(Jr,Jr)],f.tileID.canonical).map(de=>de.polygon).flat());const re=O?F:null,[he,Se]=function(de,je,Ve,et,dt,pt,at,Et,yt,Nt,zt){return de.projection.name==="globe"?function(Gt,qt,Jt,vr,rr,Br,Ur,br,Cn,dn,rn){const Vr=[],Zn=[],wn=Gt.projection.upVectorScale(rn,Gt.center.lat,Gt.worldSize).metersToTile,Pn=[0,0,0,1],hi=[0,0,0,1],Oi=(Ii,qi,Wi,fo)=>{Ii[0]=qi,Ii[1]=Wi,Ii[2]=fo,Ii[3]=1},Ti=YP();Jt>0&&(Jt+=Ti),vr+=Ti;for(const Ii of qt){const qi=[],Wi=[];for(const fo of Ii){const Vs=fo.x+rr.x,Ai=fo.y+rr.y,Ps=Gt.projection.projectTilePoint(Vs,Ai,rn),Os=Gt.projection.upVector(rn,fo.x,fo.y);let Do=Jt,Da=vr;if(Ur){const hl=rM(Vs,Ai,Jt,vr,Ur,br,Cn,dn);Do+=hl.base,Da+=hl.top}Jt!==0?Oi(Pn,Ps.x+Os[0]*wn*Do,Ps.y+Os[1]*wn*Do,Ps.z+Os[2]*wn*Do):Oi(Pn,Ps.x,Ps.y,Ps.z),Oi(hi,Ps.x+Os[0]*wn*Da,Ps.y+Os[1]*wn*Da,Ps.z+Os[2]*wn*Da),Ue.vec3.transformMat4(Pn,Pn,Br),Ue.vec3.transformMat4(hi,hi,Br),qi.push(new fg(Pn[0],Pn[1],Pn[2])),Wi.push(new fg(hi[0],hi[1],hi[2]))}Vr.push(qi),Zn.push(Wi)}return[Vr,Zn]}(de,je,Ve,et,dt,pt,at,Et,yt,Nt,zt):at?function(Gt,qt,Jt,vr,rr,Br,Ur,br,Cn){const dn=[],rn=[],Vr=[0,0,0,1];for(const Zn of Gt){const wn=[],Pn=[];for(const hi of Zn){const Oi=hi.x+vr.x,Ti=hi.y+vr.y,Ii=rM(Oi,Ti,qt,Jt,Br,Ur,br,Cn);Vr[0]=Oi,Vr[1]=Ti,Vr[2]=Ii.base,Vr[3]=1,Ue.vec4.transformMat4(Vr,Vr,rr),Vr[3]=Math.max(Vr[3],1e-5);const qi=new fg(Vr[0]/Vr[3],Vr[1]/Vr[3],Vr[2]/Vr[3]);Vr[0]=Oi,Vr[1]=Ti,Vr[2]=Ii.top,Vr[3]=1,Ue.vec4.transformMat4(Vr,Vr,rr),Vr[3]=Math.max(Vr[3],1e-5);const Wi=new fg(Vr[0]/Vr[3],Vr[1]/Vr[3],Vr[2]/Vr[3]);wn.push(qi),Pn.push(Wi)}dn.push(wn),rn.push(Pn)}return[dn,rn]}(je,Ve,et,dt,pt,at,Et,yt,Nt):function(Gt,qt,Jt,vr,rr){const Br=[],Ur=[],br=rr[8]*qt,Cn=rr[9]*qt,dn=rr[10]*qt,rn=rr[11]*qt,Vr=rr[8]*Jt,Zn=rr[9]*Jt,wn=rr[10]*Jt,Pn=rr[11]*Jt;for(const hi of Gt){const Oi=[],Ti=[];for(const Ii of hi){const qi=Ii.x+vr.x,Wi=Ii.y+vr.y,fo=rr[0]*qi+rr[4]*Wi+rr[12],Vs=rr[1]*qi+rr[5]*Wi+rr[13],Ai=rr[2]*qi+rr[6]*Wi+rr[14],Ps=rr[3]*qi+rr[7]*Wi+rr[15],Os=fo+br,Do=Vs+Cn,Da=Ai+dn,hl=Math.max(Ps+rn,1e-5),Oa=fo+Vr,va=Vs+Zn,dc=Ai+wn,xl=Math.max(Ps+Pn,1e-5);Oi.push(new fg(Os/hl,Do/hl,Da/hl)),Ti.push(new fg(Oa/xl,va/xl,dc/xl))}Br.push(Oi),Ur.push(Ti)}return[Br,Ur]}(je,Ve,et,dt,pt)}(y,p,D,T,V,b,re,H,Q,y.center.lat,f.tileID.canonical),Te=f.queryGeometry;return function(de,je,Ve){let et=1/0;li(Ve,je)&&(et=tM(Ve,je[0]));for(let dt=0;dt<je.length;dt++){const pt=je[dt],at=de[dt];for(let Et=0;Et<pt.length-1;Et++){const yt=pt[Et],Nt=[yt,pt[Et+1],at[Et+1],at[Et],yt];hn(Ve,Nt)&&(et=Math.min(et,tM(Ve,Nt)))}}return et!==1/0&&et}(he,Se,Te.isPointQuery()?Te.screenBounds:Te.screenGeometry)}},line:class extends Wa{constructor(f,a,h,p){const _=dM();super(f,_,a,h,p),_.layout&&(this.layout=new ca(_.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(f){if(f==="line-gradient"){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof qa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(f,a){super.recalculate(f,a),this.paint._values["line-floorwidth"]=(()=>{if(rv)return rv;const h=dM();return rv=new PY(h.paint.properties["line-width"].specification),rv.useIntegerZoom=!0,rv})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)}createBucket(f){return new VS(f)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(f,a,h){const p=uM(this);return{config:new Dp(this,{zoom:a,lut:h}),defines:p,overrideFog:!1}}queryRadius(f){const a=f,h=fM(ia("line-width",this,a),ia("line-gap-width",this,a)),p=ia("line-offset",this,a);return h/2+Math.abs(p)+to(this.paint.get("line-translate"))}queryIntersectsFeature(f,a,h,p,_,y){if(f.queryGeometry.isAboveHorizon)return!1;const b=Di(f.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,f.pixelToTileUnitsFactor),F=f.pixelToTileUnitsFactor/2*fM(this.paint.get("line-width").evaluate(a,h),this.paint.get("line-gap-width").evaluate(a,h)),z=this.paint.get("line-offset").evaluate(a,h);return z&&(p=function(V,T){const D=[],H=new Ye(0,0);for(let O=0;O<V.length;O++){const Q=V[O],W=[];for(let re=0;re<Q.length;re++){const he=Q[re],Se=Q[re+1],Te=re===0?H:he.sub(Q[re-1])._unit()._perp(),de=re===Q.length-1?H:Se.sub(he)._unit()._perp(),je=Te._add(de)._unit();je._mult(1/(je.x*de.x+je.y*de.y)),W.push(je._mult(T)._add(he))}D.push(W)}return D}(p,z*f.pixelToTileUnitsFactor)),function(V,T,D){for(let H=0;H<T.length;H++){const O=T[H];if(V.length>=3){for(let Q=0;Q<O.length;Q++)if(ko(V,O[Q]))return!0}if(On(V,O,D))return!0}return!1}(b,p,F)}isTileClipped(){return!0}isDraped(f){const a=this.layout.get("line-z-offset");return a.isConstant()&&!a.constantOr(0)}},symbol:ow,background:class extends Wa{constructor(f,a,h,p){super(f,{layout:XM||(XM=new Bs({visibility:new Pr(ur.layout_background.visibility)})),paint:YM||(YM=new Bs({"background-pitch-alignment":new Pr(ur.paint_background["background-pitch-alignment"]),"background-color":new Pr(ur.paint_background["background-color"]),"background-pattern":new Pr(ur.paint_background["background-pattern"]),"background-opacity":new Pr(ur.paint_background["background-opacity"]),"background-emissive-strength":new Pr(ur.paint_background["background-emissive-strength"])}))},a,h,p)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(f,a,h){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:rj,"raster-particle":lj,sky:class extends Wa{constructor(f,a,h,p){super(f,{layout:sj||(sj=new Bs({visibility:new Pr(ur.layout_sky.visibility)})),paint:oj||(oj=new Bs({"sky-type":new Pr(ur.paint_sky["sky-type"]),"sky-atmosphere-sun":new Pr(ur.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Pr(ur.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Pr(ur.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Pr(ur.paint_sky["sky-gradient-radius"]),"sky-gradient":new ya(ur.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Pr(ur.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Pr(ur.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Pr(ur.paint_sky["sky-opacity"])}))},a,h,p),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(f){f==="sky-gradient"?this._updateColorRamp():f!=="sky-atmosphere-sun"&&f!=="sky-atmosphere-halo-color"&&f!=="sky-atmosphere-color"&&f!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=$1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(f){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=f.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(f,a){if(this.paint.get("sky-type")==="atmosphere"){const p=this.paint.get("sky-atmosphere-sun"),_=!p,y=f.style.light,b=y.properties.get("position");return _&&y.properties.get("anchor")==="viewport"&&ti("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),_?hB(b.azimuthal,90-b.polar,a):hB(p[0],90-p[1],a)}const h=this.paint.get("sky-gradient-center");return hB(h[0],90-h[1],a)}isSky(){return!0}markSkyboxValid(f){this._skyboxInvalidated=!1,this._lightPosition=f.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const f=this.paint.get("sky-type");return f==="atmosphere"?["skyboxCapture","skybox"]:f==="gradient"?["skyboxGradient"]:null}},slot:class extends Wa{constructor(f,a,h,p){super(f,{paint:aj||(aj=new Bs({}))},a,null)}},model:class extends Wa{constructor(f,a,h,p){super(f,{layout:yj||(yj=new Bs({visibility:new Pr(ur.layout_model.visibility),"model-id":new Ln(ur.layout_model["model-id"])})),paint:vj||(vj=new Bs({"model-opacity":new Pr(ur.paint_model["model-opacity"]),"model-rotation":new Ln(ur.paint_model["model-rotation"]),"model-scale":new Ln(ur.paint_model["model-scale"]),"model-translation":new Ln(ur.paint_model["model-translation"]),"model-color":new Ln(ur.paint_model["model-color"]),"model-color-mix-intensity":new Ln(ur.paint_model["model-color-mix-intensity"]),"model-type":new Pr(ur.paint_model["model-type"]),"model-cast-shadows":new Pr(ur.paint_model["model-cast-shadows"]),"model-receive-shadows":new Pr(ur.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Pr(ur.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ln(ur.paint_model["model-emissive-strength"]),"model-roughness":new Ln(ur.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ln(ur.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Pr(ur.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Pr(ur.paint_model["model-front-cutoff"])}))},a,h,p),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(f){return new pB(f)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(f){return f instanceof pw?Jr-1:0}queryIntersectsFeature(f,a,h,p,_,y){if(!this.modelManager)return!1;const b=this.modelManager,F=f.tile.getBucket(this);if(!(F&&F instanceof pB))return!1;const z=F;for(const V in z.instancesPerModel){const T=z.instancesPerModel[V],D=a.id!==void 0?a.id:a.properties&&a.properties.hasOwnProperty("id")?a.properties.id:void 0;if(T.idToFeaturesIndex.hasOwnProperty(D)){const H=T.features[T.idToFeaturesIndex[D]],O=b.getModel(V,this.scope);if(!O)return!1;let Q=Ue.mat4.create();const W=new Ee(0,0),re=z.canonical;let he=Number.MAX_VALUE;for(let Se=0;Se<H.instancedDataCount;++Se){const Te=16*(H.instancedDataOffset+Se),de=T.instancedDataArray.float32,je=[de[Te+4],de[Te+5],de[Te+6]];Sj(re,W,de[Te],0|de[Te+1]),xj(Q,O,y,W,H.rotation,H.scale,je,!1,!1,!1),y.projection.name==="globe"&&(Q=fB(Q,y));const Ve=Ue.mat4.multiply([],y.projMatrix,Q),et=f.queryGeometry,dt=fj(et.isPointQuery()?et.screenBounds:et.screenGeometry,y,Ve,O.aabb);dt!=null&&(he=Math.min(dt,he))}return he!==Number.MAX_VALUE&&he}}return!1}_handleOverridablePaintPropertyUpdate(f,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven()||f!=="model-color"&&f!=="model-color-mix-intensity"&&f!=="model-rotation"&&f!=="model-scale"&&f!=="model-translation"&&f!=="model-emissive-strength")}_isPropertyZoomDependent(f){const a=this._transitionablePaint._values[f];return a!=null&&a.value!=null&&a.value.expression!=null&&a.value.expression instanceof w}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(f,a,h,p){const _=f.tile,y=_.getBucket(this);let b=null,F=Number.MAX_VALUE;if(!(y&&y instanceof pw))return{queryFeature:b,intersectionZ:F};const z=y.getNodesInfo()[a];if(z.hiddenByReplacement||!z.node.meshes||!h.filter(new Ui(_.tileID.overscaledZ),z.feature,_.tileID.canonical))return{queryFeature:b,intersectionZ:F};const V=z.node,T=p.calculatePosMatrix(_.tileID.toUnwrapped(),p.worldSize),D=z.evaluatedScale;let H=0;p.elevation&&V.elevation&&(H=V.elevation*p.elevation.exaggeration()),Ue.mat4.translate(T,T,[(V.anchor?V.anchor[0]:0)*(D[0]-1),(V.anchor?V.anchor[1]:0)*(D[1]-1),H]),Ue.mat4.scale(T,T,D),Ue.mat4.multiply(T,T,V.matrix);const O=f.queryGeometry,Q=O.isPointQuery()?O.screenBounds:O.screenGeometry,W=function(he){const Se=Ue.mat4.multiply([],T,he.matrix),Te=Ue.mat4.multiply(Se,p.expandedFarZProjMatrix,Se);for(let de=0;de<he.meshes.length;++de){const je=he.meshes[de];if(de===he.lightMeshIndex)continue;const Ve=fj(Q,p,Te,je.aabb);Ve!=null&&(F=Math.min(Ve,F))}if(he.children)for(const de of he.children)W(de)};if(W(V),F===Number.MAX_VALUE)return{queryFeature:b,intersectionZ:F};const re=new Ee(0,0);return Sj(_.tileID.canonical,re,z.node.anchor[0],z.node.anchor[1]),b={type:"Feature",geometry:{type:"Point",coordinates:[re.lng,re.lat]},properties:z.feature.properties,id:z.feature.id,state:{},layer:this.serialize()},{queryFeature:b,intersectionZ:F}}},clip:class extends Wa{constructor(f,a,h,p){super(f,{layout:vP||(vP=new Bs({"clip-layer-types":new Pr(ur.layout_clip["clip-layer-types"]),"clip-layer-scope":new Pr(ur.layout_clip["clip-layer-scope"])})),paint:xP||(xP=new Bs({}))},a,h,p)}recalculate(f,a){super.recalculate(f,a)}createBucket(f){return new _P(f)}isTileClipped(){return!0}is3D(){return!0}}};class FZ{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class NZ{constructor(){this.tasks={},this.taskQueue=[],Kr(["process"],this),this.invoker=new FZ(this.process),this.nextId=0}add(a,h){const p=this.nextId++,_=function({type:y,isSymbolTile:b,zoom:F}){return F=F||0,y==="message"?0:y!=="maybePrepare"||b?y!=="parseTile"||b?y==="parseTile"&&b?300-F:y==="maybePrepare"&&b?400-F:500:200-F:100-F}(h);if(_===0){try{a()}finally{}return null}return this.tasks[p]={fn:a,metadata:h,priority:_,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const a=this.pick();if(a===null)return;const h=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!h)return;h.fn()}finally{}}pick(){let a=null,h=1/0;for(let _=0;_<this.taskQueue.length;_++){const y=this.tasks[this.taskQueue[_]];y.priority<h&&(h=y.priority,a=_)}if(a===null)return null;const p=this.taskQueue[a];return this.taskQueue.splice(a,1),p}remove(){this.invoker.remove()}}class Bj{constructor(a,h,p){this.target=a,this.parent=h,this.mapId=p,this.callbacks={},this.cancelCallbacks={},Kr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new NZ}send(a,h,p,_,y=!1,b){const F=Math.round(1e18*Math.random()).toString(36).substring(0,10);p&&(p.metadata=b,this.callbacks[F]=p);const z=new Set;return this.target.postMessage({id:F,type:a,hasCallback:!!p,targetMapId:_,mustQueue:y,sourceMapId:this.mapId,data:Bt(h,z)},z),{cancel:()=>{p&&delete this.callbacks[F],this.target.postMessage({id:F,type:"<cancel>",targetMapId:_,sourceMapId:this.mapId})}}}receive(a){const h=a.data,p=h.id;if(p&&(!h.targetMapId||this.mapId===h.targetMapId))if(h.type==="<cancel>"){const _=this.cancelCallbacks[p];delete this.cancelCallbacks[p],_&&_.cancel()}else if(h.mustQueue||Zr()){const _=this.callbacks[p],y=this.scheduler.add(()=>this.processTask(p,h),_&&_.metadata||{type:"message"});y&&(this.cancelCallbacks[p]=y)}else this.processTask(p,h)}processTask(a,h){if(delete this.cancelCallbacks[a],h.type==="<response>"){const p=this.callbacks[a];delete this.callbacks[a],p&&(h.error?p(xt(h.error)):p(null,xt(h.data)))}else{const p=new Set,_=h.hasCallback?(b,F)=>{this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:b?Bt(b):null,data:Bt(F,p)},p)}:b=>{},y=xt(h.data);if(this.parent[h.type])this.parent[h.type](h.sourceMapId,y,_);else if(this.parent.getWorkerSource){const b=h.type.split(".");this.parent.getWorkerSource(h.sourceMapId,b[0],y.source,y.scope)[b[1]](y,_)}else _(new Error(`Could not find function ${h.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class $0{constructor(a,h){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=Xt();const p=this.workerPool.acquire(this.id);for(let _=0;_<p.length;_++){const y=new $0.Actor(p[_],h,this.id);y.name=`Worker ${_}`,this.actors.push(y)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(a,h,p){En(this.actors,(_,y)=>{_.send(a,h,y)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(a=>{a.remove()}),this.actors=[],this.workerPool.release(this.id)}}$0.Actor=Bj;class Ej{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,h){const p=this.toIdx(a,h);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(a,h){return this.leaves[this.toIdx(a,h)]}toIdx(a,h){return h*this.size+a}}function Tj(f,a,h,p){let _=0,y=Number.MAX_VALUE;for(let b=0;b<3;b++)if(Math.abs(p[b])<1e-15){if(h[b]<f[b]||h[b]>a[b])return null}else{const F=1/p[b];let z=(f[b]-h[b])*F,V=(a[b]-h[b])*F;if(z>V){const T=z;z=V,V=T}if(z>_&&(_=z),V<y&&(y=V),_>y)return null}return _}function Ij(f,a,h,p,_,y,b,F,z,V,T){const D=p-f,H=_-a,O=y-h,Q=b-f,W=F-a,re=z-h,he=T[1]*re-T[2]*W,Se=T[2]*Q-T[0]*re,Te=T[0]*W-T[1]*Q,de=D*he+H*Se+O*Te;if(Math.abs(de)<1e-15)return null;const je=1/de,Ve=V[0]-f,et=V[1]-a,dt=V[2]-h,pt=(Ve*he+et*Se+dt*Te)*je;if(pt<0||pt>1)return null;const at=et*O-dt*H,Et=dt*D-Ve*O,yt=Ve*H-et*D,Nt=(T[0]*at+T[1]*Et+T[2]*yt)*je;return Nt<0||pt+Nt>1?null:(Q*at+W*Et+re*yt)*je}function Lj(f,a,h){return(f-a)/(h-a)}function Fj(f,a,h,p,_,y,b,F,z){const V=1<<h,T=y-p,D=b-_,H=(f+1)/V*T+p,O=(a+0)/V*D+_,Q=(a+1)/V*D+_;F[0]=(f+0)/V*T+p,F[1]=O,z[0]=H,z[1]=Q}class Nj{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const h=function(y){const b=Math.ceil(Math.log2(y.dim/8)),F=[];let z=Math.ceil(Math.pow(2,b));const V=1/z,T=(O,Q,W,re,he)=>{const Se=re?1:0,Te=(O+1)*W-Se,de=Q*W,je=(Q+1)*W-Se;he[0]=O*W,he[1]=de,he[2]=Te,he[3]=je};let D=new Ej(z);const H=[];for(let O=0;O<z*z;O++){T(O%z,Math.floor(O/z),V,!1,H);const Q=OA(H[0],H[1],y),W=OA(H[2],H[1],y),re=OA(H[2],H[3],y),he=OA(H[0],H[3],y);D.minimums.push(Math.min(Q,W,re,he)),D.maximums.push(Math.max(Q,W,re,he)),D.leaves.push(1)}for(F.push(D),z/=2;z>=1;z/=2){const O=F[F.length-1];D=new Ej(z);for(let Q=0;Q<z*z;Q++){T(Q%z,Math.floor(Q/z),2,!0,H);const W=O.getElevation(H[0],H[1]),re=O.getElevation(H[2],H[1]),he=O.getElevation(H[2],H[3]),Se=O.getElevation(H[0],H[3]),Te=O.isLeaf(H[0],H[1]),de=O.isLeaf(H[2],H[1]),je=O.isLeaf(H[2],H[3]),Ve=O.isLeaf(H[0],H[3]),et=Math.min(W.min,re.min,he.min,Se.min),dt=Math.max(W.max,re.max,he.max,Se.max),pt=Te&&de&&je&&Ve;D.maximums.push(dt),D.minimums.push(et),D.leaves.push(dt-et<=5&&pt?1:0)}F.push(D)}return F}(this.dem),p=h.length-1,_=h[p];this._addNode(_.minimums[0],_.maximums[0],_.leaves[0]),this._construct(h,0,0,p,0)}raycastRoot(a,h,p,_,y,b,F=1){return Tj([a,h,-100],[p,_,this.maximums[0]*F],y,b)}raycast(a,h,p,_,y,b,F=1){if(!this.nodeCount)return null;const z=this.raycastRoot(a,h,p,_,y,b,F);if(z==null)return null;const V=[],T=[],D=[],H=[],O=[{idx:0,t:z,nodex:0,nodey:0,depth:0}];for(;O.length>0;){const{idx:Q,t:W,nodex:re,nodey:he,depth:Se}=O.pop();if(this.leaves[Q]){Fj(re,he,Se,a,h,p,_,D,H);const de=1<<Se,je=(re+0)/de,Ve=(re+1)/de,et=(he+0)/de,dt=(he+1)/de,pt=OA(je,et,this.dem)*F,at=OA(Ve,et,this.dem)*F,Et=OA(Ve,dt,this.dem)*F,yt=OA(je,dt,this.dem)*F,Nt=Ij(D[0],D[1],pt,H[0],D[1],at,H[0],H[1],Et,y,b),zt=Ij(H[0],H[1],Et,D[0],H[1],yt,D[0],D[1],pt,y,b),Gt=Math.min(Nt!==null?Nt:Number.MAX_VALUE,zt!==null?zt:Number.MAX_VALUE);if(Gt!==Number.MAX_VALUE)return Gt;{const qt=Ue.vec3.scaleAndAdd([],y,b,W);if(Pj(pt,at,yt,Et,Lj(qt[0],D[0],H[0]),Lj(qt[1],D[1],H[1]))>=qt[2])return W}continue}let Te=0;for(let de=0;de<this._siblingOffset.length;de++){Fj((re<<1)+this._siblingOffset[de][0],(he<<1)+this._siblingOffset[de][1],Se+1,a,h,p,_,D,H),D[2]=-100,H[2]=this.maximums[this.childOffsets[Q]+de]*F;const je=Tj(D,H,y,b);if(je!=null){const Ve=je;V[de]=Ve;let et=!1;for(let dt=0;dt<Te&&!et;dt++)Ve>=V[T[dt]]&&(T.splice(dt,0,de),et=!0);et||(T[Te]=de),Te++}}for(let de=0;de<Te;de++){const je=T[de];O.push({idx:this.childOffsets[Q]+je,t:V[je],nodex:(re<<1)+this._siblingOffset[je][0],nodey:(he<<1)+this._siblingOffset[je][1],depth:Se+1})}}return null}_addNode(a,h,p){return this.minimums.push(a),this.maximums.push(h),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(a,h,p,_,y){if(a[_].isLeaf(h,p)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const b=_-1,F=a[b];let z=0,V=0;for(let T=0;T<this._siblingOffset.length;T++){const D=2*h+this._siblingOffset[T][0],H=2*p+this._siblingOffset[T][1],O=F.getElevation(D,H),Q=F.isLeaf(D,H),W=this._addNode(O.min,O.max,Q);Q&&(z|=1<<T),V||(V=W)}for(let T=0;T<this._siblingOffset.length;T++)z&1<<T||this._construct(a,2*h+this._siblingOffset[T][0],2*p+this._siblingOffset[T][1],b,V+T)}}function Pj(f,a,h,p,_,y){return Sr(Sr(f,h,y),Sr(a,p,y),_)}function OA(f,a,h){const p=h.dim,_=Ir(f*p-.5,0,p-1),y=Ir(a*p-.5,0,p-1),b=Math.floor(_),F=Math.floor(y),z=Math.min(b+1,p-1),V=Math.min(F+1,p-1);return Pj(h.get(b,F),h.get(z,F),h.get(b,V),h.get(z,V),_-b,y-F)}const PZ={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function MZ(f,a,h){return(256*f*256+256*a+h)/10-1e4}function jZ(f,a,h){return 256*f+a+h/256-32768}class Aw{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,h,p,_=!1){if(this.uid=a,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return void ti(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const y=this.dim=h.height-2,b=new Uint32Array(h.data.buffer);if(this.pixels=new Uint8Array(h.data.buffer),this.floatView=new Float32Array(h.data.buffer),this.borderReady=_,this._modifiedForSources={},!_){for(let z=0;z<y;z++)b[this._idx(-1,z)]=b[this._idx(0,z)],b[this._idx(y,z)]=b[this._idx(y-1,z)],b[this._idx(z,-1)]=b[this._idx(z,0)],b[this._idx(z,y)]=b[this._idx(z,y-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(y,-1)]=b[this._idx(y-1,0)],b[this._idx(-1,y)]=b[this._idx(0,y-1)],b[this._idx(y,y)]=b[this._idx(y-1,y-1)]}const F=p==="terrarium"?jZ:MZ;for(let z=0;z<b.length;++z){const V=4*z;this.floatView[z]=F(this.pixels[V],this.pixels[V+1],this.pixels[V+2])}this._timestamp=on.now()}_buildQuadTree(){this._tree=new Nj(this)}get(a,h,p=!1){p&&(a=Ir(a,-1,this.dim),h=Ir(h,-1,this.dim));const _=this._idx(a,h);return this.floatView[_]}set(a,h,p){const _=this._idx(a,h),y=this.floatView[_];return this.floatView[_]=p,p-y}static getUnpackVector(a){return PZ[a]}_idx(a,h){if(a<-1||a>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(a+1)}static pack(a,h){const p=[0,0,0,0],_=Aw.getUnpackVector(h);let y=Math.floor((a+_[3])/_[2]);return p[2]=y%256,y=Math.floor(y/256),p[1]=y%256,y=Math.floor(y/256),p[0]=y,p}getPixels(){return new dP({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,h,p){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let _=h*this.dim,y=h*this.dim+this.dim,b=p*this.dim,F=p*this.dim+this.dim;switch(h){case-1:_=y-1;break;case 1:y=_+1}switch(p){case-1:b=F-1;break;case 1:F=b+1}const z=-h*this.dim,V=-p*this.dim;for(let T=b;T<F;T++)for(let D=_;D<y;D++){const H=4*this._idx(D,T),O=4*this._idx(D+z,T+V);this.pixels[H+0]=a.pixels[O+0],this.pixels[H+1]=a.pixels[O+1],this.pixels[H+2]=a.pixels[O+2],this.pixels[H+3]=a.pixels[O+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function kZ(f,a,h){f===1?a.header_length=h.readFixed32():f===2?a.x=h.readVarint():f===3?a.y=h.readVarint():f===4?a.z=h.readVarint():f===5&&a.layers.push(function(p,_){return p.readFields(zZ,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},_)}(h,h.readVarint()+h.pos))}function DZ(f,a,h){f===1?(a.delta_filter=function(p,_){return p.readFields(OZ,{block_size:0},_)}(h,h.readVarint()+h.pos),a.filter="delta_filter"):f===2?(h.readVarint(),a.filter="zigzag_filter"):f===3?(h.readVarint(),a.filter="bitshuffle_filter"):f===4&&(h.readVarint(),a.filter="byteshuffle_filter")}function OZ(f,a,h){f===1&&(a.block_size=h.readVarint())}function RZ(f,a,h){f===1?(h.readVarint(),a.codec="gzip_data"):f===2?(h.readVarint(),a.codec="jpeg_image"):f===3?(h.readVarint(),a.codec="webp_image"):f===4&&(h.readVarint(),a.codec="png_image")}function UZ(f,a,h){f===1?a.first_byte=h.readFixed64():f===2?a.last_byte=h.readFixed64():f===3?a.filters.push(function(p,_){return p.readFields(DZ,{},_)}(h,h.readVarint()+h.pos)):f===4?a.codec=function(p,_){return p.readFields(RZ,{},_)}(h,h.readVarint()+h.pos):f===5?a.deprecated_offset=h.readFloat():f===6?a.deprecated_scale=h.readFloat():f===7?a.bands.push(h.readString()):f===8?a.offset=h.readDouble():f===9&&(a.scale=h.readDouble())}function zZ(f,a,h){f===1?a.version=h.readVarint():f===2?a.name=h.readString():f===3?a.units=h.readString():f===4?a.tilesize=h.readVarint():f===5?a.buffer=h.readVarint():f===6?a.pixel_format=h.readVarint():f===7&&a.data_index.push(function(p,_){return p.readFields(UZ,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,deprecated_offset:0,deprecated_scale:0,bands:[]},_)}(h,h.readVarint()+h.pos))}function QZ(f,a,h){if(f===2)(function(p,_,y){p.readFields(HZ,y,_)})(h,h.readVarint()+h.pos,a);else if(f===3)throw new Error("Not implemented")}function HZ(f,a,h){if(f===1){let p=0;const _=h.readVarint()+h.pos;for(;h.pos<_;)a[p++]=h.readVarint()}}Pe(Aw,"DEMData"),Pe(Nj,"DemMinMaxQuadTree",{omit:["dem"]});class VZ{constructor(a){this.capacity=a,this.cache=new Map}get(a){if(!this.cache.has(a))return;const h=this.cache.get(a);return this.cache.delete(a),this.cache.set(a,h),h}put(a,h){this.cache.has(a)?this.cache.delete(a):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(a,h)}}function GZ(f,a){if(a.length!==4)throw new Error(`Expected data of dimension 4 but got ${a.length}.`);let h=a[3];for(let p=2;p>=1;p--){const _=p===1?1:0,y=p===2?1:0;for(let b=0;b<a[0];b++){const F=a[1]*b;for(let z=_;z<a[1];z++){const V=a[2]*(z+F);for(let T=y;T<a[2];T++){const D=a[3]*(T+V);for(let H=0;H<a[3];H++){const O=D+H;f[O]+=f[O-h]}}}}h*=a[p]}return f}function qZ(f){for(let a=0,h=f.length;a<h;a++)f[a]=f[a]>>>1^-(1&f[a]);return f}function $Z(f,a){switch(a){case"uint32":return f;case"uint16":for(let h=0;h<f.length;h+=2){const p=f[h],_=f[h+1];f[h]=(240&p)>>4|(61440&p)>>8|(240&_)<<4|61440&_,f[h+1]=15&p|(3840&p)>>4|(15&_)<<8|(3840&_)<<4}return f;case"uint8":for(let h=0;h<f.length;h+=4){const p=f[h],_=f[h+1],y=f[h+2],b=f[h+3];f[h+0]=(192&p)>>6|(192&_)>>4|(192&y)>>2|192&b,f[h+1]=(48&p)>>4|(48&_)>>2|48&y|(48&b)<<2,f[h+2]=(12&p)>>2|12&_|(12&y)<<2|(12&b)<<4,f[h+3]=3&p|(3&_)<<2|(3&y)<<4|(3&b)<<6}return f;default:throw new Error(`Invalid pixel format, "${a}"`)}}var id=Uint8Array,Av=Uint16Array,WZ=Int32Array,Mj=new id([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jj=new id([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),KZ=new id([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kj=function(f,a){for(var h=new Av(31),p=0;p<31;++p)h[p]=a+=1<<f[p-1];var _=new WZ(h[30]);for(p=1;p<30;++p)for(var y=h[p];y<h[p+1];++y)_[y]=y-h[p]<<5|p;return{b:h,r:_}},Dj=kj(Mj,2),Oj=Dj.b,XZ=Dj.r;Oj[28]=258,XZ[258]=28;for(var YZ=kj(jj,0).b,Rj=new Av(32768),ul=0;ul<32768;++ul){var W0=(43690&ul)>>1|(21845&ul)<<1;Rj[ul]=((65280&(W0=(61680&(W0=(52428&W0)>>2|(13107&W0)<<2))>>4|(3855&W0)<<4))>>8|(255&W0)<<8)>>1}var mv=function(f,a,h){for(var p=f.length,_=0,y=new Av(a);_<p;++_)f[_]&&++y[f[_]-1];var b,F=new Av(a);for(_=1;_<a;++_)F[_]=F[_-1]+y[_-1]<<1;b=new Av(1<<a);var z=15-a;for(_=0;_<p;++_)if(f[_])for(var V=_<<4|f[_],T=a-f[_],D=F[f[_]-1]++<<T,H=D|(1<<T)-1;D<=H;++D)b[Rj[D]>>z]=V;return b},gv=new id(288);for(ul=0;ul<144;++ul)gv[ul]=8;for(ul=144;ul<256;++ul)gv[ul]=9;for(ul=256;ul<280;++ul)gv[ul]=7;for(ul=280;ul<288;++ul)gv[ul]=8;var Uj=new id(32);for(ul=0;ul<32;++ul)Uj[ul]=5;var ZZ=mv(gv,9),JZ=mv(Uj,5),yB=function(f){for(var a=f[0],h=1;h<f.length;++h)f[h]>a&&(a=f[h]);return a},mf=function(f,a,h){var p=a/8|0;return(f[p]|f[p+1]<<8)>>(7&a)&h},vB=function(f,a){var h=a/8|0;return(f[h]|f[h+1]<<8|f[h+2]<<16)>>(7&a)},eJ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gf=function(f,a,h){var p=new Error(a||eJ[f]);if(p.code=f,Error.captureStackTrace&&Error.captureStackTrace(p,gf),!h)throw p;return p},tJ=new id(0),rJ=typeof TextDecoder<"u"&&new TextDecoder;try{rJ.decode(tJ,{stream:!0})}catch{}const nJ={gzip_data:"gzip"};class kd extends Error{constructor(a){super(a),this.name="MRTError"}}const iJ={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},zj={uint32:1,uint16:2,uint8:4},sJ={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let xB;class _B{constructor(a=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=a}getLayer(a){const h=this.layers[a];if(!h)throw new kd(`Layer '${a}' not found`);return h}getHeaderLength(a){const h=new Uint8Array(a),p=new DataView(a);if(h[0]!==13)throw new kd("File is not a valid MRT.");return p.getUint32(1,!0)}parseHeader(a){const h=new Uint8Array(a),p=this.getHeaderLength(a);if(h.length<p)throw new kd(`Expected header with length >= ${p} but got buffer of length ${h.length}`);const _=function(y,b){return y.readFields(kZ,{header_length:0,x:0,y:0,z:0,layers:[]},void 0)}(new xB(h.subarray(0,p)));if(!isNaN(this.x)&&(this.x!==_.x||this.y!==_.y||this.z!==_.z))throw new kd(`Invalid attempt to parse header ${_.z}/${_.x}/${_.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=_.x,this.y=_.y,this.z=_.z;for(const y of _.layers)this.layers[y.name]=new oJ(y,{cacheSize:this._cacheSize});return this}createDecodingTask(a){const h=[],p=this.getLayer(a.layerName);for(let _ of a.blockIndices){const y=p.dataIndex[_],b=y.first_byte-a.firstByte,F=y.last_byte-a.firstByte;if(p._blocksInProgress.has(_))continue;const z={layerName:p.name,firstByte:b,lastByte:F,pixelFormat:p.pixelFormat,blockIndex:_,blockShape:[y.bands.length].concat(p.bandShape),buffer:p.buffer,codec:y.codec.codec,filters:y.filters.map(V=>V.filter)};p._blocksInProgress.add(_),h.push(z)}return new Qj(h,()=>{h.forEach(_=>p._blocksInProgress.delete(_.blockIndex))},(_,y)=>{if(h.forEach(b=>p._blocksInProgress.delete(b.blockIndex)),_)throw _;y.forEach(b=>{this.getLayer(b.layerName).processDecodedData(b)})})}}class oJ{constructor({version:a,name:h,units:p,tilesize:_,pixel_format:y,buffer:b,data_index:F},z){if(this.version=a,this.version!==1)throw new kd(`Cannot parse raster layer encoded with MRT version ${a}`);this.name=h,this.units=p,this.tileSize=_,this.buffer=b,this.pixelFormat=iJ[y],this.dataIndex=F,this.bandShape=[_+2*b,_+2*b,zj[this.pixelFormat]],this._decodedBlocks=new VZ(z?z.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return zj[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:a})=>a).flat()}processDecodedData(a){const h=a.blockIndex.toString();this._decodedBlocks.get(h)||this._decodedBlocks.put(h,a.data)}getBlockForBand(a){let h=0;switch(typeof a){case"string":for(const[p,_]of this.dataIndex.entries()){for(const[y,b]of _.bands.entries())if(b===a)return{bandIndex:h+y,blockIndex:p,blockBandIndex:y};h+=_.bands.length}break;case"number":for(const[p,_]of this.dataIndex.entries()){if(a>=h&&a<h+_.bands.length)return{bandIndex:a,blockIndex:p,blockBandIndex:a-h};h+=_.bands.length}break;default:throw new kd(`Invalid band \`${JSON.stringify(a)}\`. Expected string or integer.`)}throw new kd(`Band not found: ${JSON.stringify(a)}`)}getDataRange(a){let h=1/0,p=-1/0;const _=[],y=new Set;for(const b of a){const{blockIndex:F}=this.getBlockForBand(b);if(F<0)throw new kd(`Invalid band: ${JSON.stringify(b)}`);const z=this.dataIndex[F];_.includes(F)||_.push(F),y.add(F),h=Math.min(h,z.first_byte),p=Math.max(p,z.last_byte)}if(y.size>this.cacheSize)throw new kd(`Number of blocks to decode (${y.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:h,lastByte:p,blockIndices:_}}hasBand(a){const{blockIndex:h}=this.getBlockForBand(a);return h>=0}hasDataForBand(a){const{blockIndex:h}=this.getBlockForBand(a);return h>=0&&!!this._decodedBlocks.get(h.toString())}getBandView(a){const{blockIndex:h,blockBandIndex:p}=this.getBlockForBand(a),_=this._decodedBlocks.get(h.toString());if(!_)throw new kd(`Data for band ${JSON.stringify(a)} of layer "${this.name}" not decoded.`);const y=this.dataIndex[h],b=this.bandShape.reduce((V,T)=>V*T,1),F=p*b,z=_.subarray(F,F+b);return{data:z,bytes:new Uint8Array(z.buffer).subarray(z.byteOffset,z.byteOffset+z.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:y.offset!==0?y.offset:y.deprecated_offset,scale:y.scale!==0?y.scale:y.deprecated_scale}}}_B.setPbf=function(f){xB=f};class Qj{constructor(a,h,p){this.tasks=a,this._onCancel=h,this._onComplete=p,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(a,h){this._finalized||(this._onComplete(a,h),this._finalized=!0)}}_B.performDecoding=function(f,a){const h=new Uint8Array(f);return Promise.all(a.tasks.map(p=>{const{layerName:_,firstByte:y,lastByte:b,pixelFormat:F,blockShape:z,blockIndex:V,filters:T,codec:D}=p,H=h.subarray(y,b+1),O=new Uint32Array(z[0]*z[1]*z[2]);let Q;if(D!=="gzip_data")throw new kd(`Unhandled codec: ${D}`);return Q=function(W,re){if(!globalThis.DecompressionStream&&re==="gzip_data")return Promise.resolve(((de=function(et){et[0]==31&&et[1]==139&&et[2]==8||gf(6,"invalid gzip data");var dt=et[3],pt=10;4&dt&&(pt+=2+(et[10]|et[11]<<8));for(var at=(dt>>3&1)+(dt>>4&1);at>0;at-=!et[pt++]);return pt+(2&dt)}(Te=W))+8>Te.length&&gf(6,"invalid gzip data"),function(et,dt,pt,at){var Et=et.length;if(!Et||dt.f&&!dt.l)return pt||new id(0);var yt=!pt,Nt=yt||dt.i!=2,zt=dt.i;yt&&(pt=new id(3*Et));var Gt,qt,Jt=function(RA){var yg=pt.length;if(RA>yg){var Cv=new id(Math.max(2*yg,RA));Cv.set(pt),pt=Cv}},vr=dt.f||0,rr=dt.p||0,Br=dt.b||0,Ur=dt.l,br=dt.d,Cn=dt.m,dn=dt.n,rn=8*Et;do{if(!Ur){vr=mf(et,rr,1);var Vr=mf(et,rr+1,3);if(rr+=3,!Vr){var Zn=et[(Ai=4+((rr+7)/8|0))-4]|et[Ai-3]<<8,wn=Ai+Zn;if(wn>Et){zt&&gf(0);break}Nt&&Jt(Br+Zn),pt.set(et.subarray(Ai,wn),Br),dt.b=Br+=Zn,dt.p=rr=8*wn,dt.f=vr;continue}if(Vr==1)Ur=ZZ,br=JZ,Cn=9,dn=5;else if(Vr==2){var Pn=mf(et,rr,31)+257,hi=mf(et,rr+10,15)+4,Oi=Pn+mf(et,rr+5,31)+1;rr+=14;for(var Ti=new id(Oi),Ii=new id(19),qi=0;qi<hi;++qi)Ii[KZ[qi]]=mf(et,rr+3*qi,7);rr+=3*hi;var Wi=yB(Ii),fo=(1<<Wi)-1,Vs=mv(Ii,Wi);for(qi=0;qi<Oi;){var Ai,Ps=Vs[mf(et,rr,fo)];if(rr+=15&Ps,(Ai=Ps>>4)<16)Ti[qi++]=Ai;else{var Os=0,Do=0;for(Ai==16?(Do=3+mf(et,rr,3),rr+=2,Os=Ti[qi-1]):Ai==17?(Do=3+mf(et,rr,7),rr+=3):Ai==18&&(Do=11+mf(et,rr,127),rr+=7);Do--;)Ti[qi++]=Os}}var Da=Ti.subarray(0,Pn),hl=Ti.subarray(Pn);Cn=yB(Da),dn=yB(hl),Ur=mv(Da,Cn),br=mv(hl,dn)}else gf(1);if(rr>rn){zt&&gf(0);break}}Nt&&Jt(Br+131072);for(var Oa=(1<<Cn)-1,va=(1<<dn)-1,dc=rr;;dc=rr){var xl=(Os=Ur[vB(et,rr)&Oa])>>4;if((rr+=15&Os)>rn){zt&&gf(0);break}if(Os||gf(2),xl<256)pt[Br++]=xl;else{if(xl==256){dc=rr,Ur=null;break}var Qc=xl-254;xl>264&&(Qc=mf(et,rr,(1<<(vf=Mj[qi=xl-257]))-1)+Oj[qi],rr+=vf);var No=br[vB(et,rr)&va],fh=No>>4;if(No||gf(3),rr+=15&No,hl=YZ[fh],fh>3){var vf=jj[fh];hl+=vB(et,rr)&(1<<vf)-1,rr+=vf}if(rr>rn){zt&&gf(0);break}Nt&&Jt(Br+131072);var Dd=Br+Qc;if(Br<hl){var Od=0-hl,gg=Math.min(hl,Dd);for(Od+Br<0&&gf(3);Br<gg;++Br)pt[Br]=(void 0)[Od+Br]}for(;Br<Dd;++Br)pt[Br]=pt[Br-hl]}}dt.l=Ur,dt.p=dc,dt.b=Br,dt.f=vr,Ur&&(vr=1,dt.m=Cn,dt.d=br,dt.n=dn)}while(!vr);return Br!=pt.length&&yt?(Gt=pt,((qt=Br)==null||qt>Gt.length)&&(qt=Gt.length),new id(Gt.subarray(0,qt))):pt.subarray(0,Br)}(Te.subarray(de,-8),{i:2},new id(((he=Te)[(Se=he.length)-4]|he[Se-3]<<8|he[Se-2]<<16|he[Se-1]<<24)>>>0))));var he,Se,Te,de;const je=nJ[re];if(!je)throw new Error(`Unhandled codec: ${re}`);const Ve=new globalThis.DecompressionStream(je);return new Response(new Blob([W]).stream().pipeThrough(Ve)).arrayBuffer().then(et=>new Uint8Array(et))}(H,D).then(W=>(function(re,he){re.readFields(QZ,he)}(new xB(W),O),new sJ[F](O.buffer))),Q.then(W=>{for(let re=T.length-1;re>=0;re--)switch(T[re]){case"delta_filter":GZ(W,z);break;case"zigzag_filter":qZ(W);break;case"bitshuffle_filter":$Z(W,F);break;default:throw new kd(`Unhandled filter "${T[re]}"`)}return{layerName:_,blockIndex:V,data:W}}).catch(W=>{throw W})}))},Pe(Qj,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var yv={workerUrl:"",workerClass:null,workerParams:void 0};const bB="mapboxgl_preloaded_worker_pool";class vv{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<vv.workerCount;)this.workers.push(yv.workerClass!=null?new yv.workerClass:new self.Worker(yv.workerUrl,yv.workerParams));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.workers&&this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[bB]}numActive(){return Object.keys(this.active).length}}let xv;function mw(){return xv||(xv=new vv),xv}vv.workerCount=2;let _v,wB,yf,K0,CB,X0=null;function Hj(){return Zr()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:wB||It.DRACO_URL}function Vj(){if(Zr()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(K0)return K0;const f=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return K0=WebAssembly.validate(f)?It.MESHOPT_SIMD_URL:It.MESHOPT_URL,K0}const gw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},aJ={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},bv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function Gj(f,a,h){const p=h.json.bufferViews.length,_=h.buffers.length;a.bufferView=p,h.json.bufferViews[p]={buffer:_,byteLength:f.byteLength},h.buffers[_]=f}const SB="KHR_draco_mesh_compression";function lJ(f,a){const h=f.extensions&&f.extensions[SB];if(!h)return;const p=new yf.Decoder,_=Kj(a,h.bufferView),y=new yf.Mesh;if(!p.DecodeArrayToMesh(_,_.byteLength,y))throw new Error("Failed to decode Draco mesh");const b=a.json.accessors[f.indices],F=gw[b.componentType],z=b.count*F.BYTES_PER_ELEMENT,V=yf._malloc(z);F===Uint16Array?p.GetTrianglesUInt16Array(y,z,V):p.GetTrianglesUInt32Array(y,z,V),Gj(yf.memory.buffer.slice(V,V+z),b,a),yf._free(V);for(const T of Object.keys(h.attributes)){const D=p.GetAttributeByUniqueId(y,h.attributes[T]),H=a.json.accessors[f.attributes[T]],O=aJ[H.componentType],Q=H.count*bv[H.type]*gw[H.componentType].BYTES_PER_ELEMENT,W=yf._malloc(Q);p.GetAttributeDataArrayForAllPoints(y,D,yf[O],Q,W),Gj(yf.memory.buffer.slice(W,W+Q),H,a),yf._free(W)}p.destroy(),y.destroy(),delete f.extensions[SB]}const yw="EXT_meshopt_compression";function cJ(f,a){if(!f.extensions||!f.extensions[yw])return;const h=f.extensions[yw],p=new Uint8Array(a.buffers[h.buffer],h.byteOffset||0,h.byteLength||0),_=new Uint8Array(h.count*h.byteStride);CB.decodeGltfBuffer(_,h.count,h.byteStride,p,h.mode,h.filter),f.buffer=a.buffers.length,f.byteOffset=0,a.buffers[f.buffer]=_.buffer,delete f.extensions[yw]}const qj=1179937895,$j=new TextDecoder("utf8");function Wj(f,a){return new URL(f,a).href}function uJ(f,a,h,p){return fetch(Wj(f.uri,p)).then(_=>_.arrayBuffer()).then(_=>{a.buffers[h]=_})}function Kj(f,a){const h=f.json.bufferViews[a];return new Uint8Array(f.buffers[h.buffer],h.byteOffset||0,h.byteLength)}function hJ(f,a,h,p){if(f.uri){const _=Wj(f.uri,p);return fetch(_).then(y=>y.blob()).then(y=>createImageBitmap(y)).then(y=>{a.images[h]=y})}if(f.bufferView!==void 0){const _=Kj(a,f.bufferView),y=new Blob([_],{type:f.mimeType});return createImageBitmap(y).then(b=>{a.images[h]=b})}}function Xj(f,a=0,h){const p={json:null,images:[],buffers:[]};if(new Uint32Array(f,a,1)[0]===qj){const T=new Uint32Array(f,a);let D=2;const H=(T[D++]>>2)-3,O=T[D++]>>2;if(D++,p.json=JSON.parse($j.decode(T.subarray(D,D+O))),D+=O,D<H){const Q=T[D++];D++;const W=a+(D<<2);p.buffers[0]=f.slice(W,W+Q)}}else p.json=JSON.parse($j.decode(new Uint8Array(f,a)));const{buffers:_,images:y,meshes:b,extensionsUsed:F,bufferViews:z}=p.json;let V=Promise.resolve();if(_){const T=[];for(let D=0;D<_.length;D++){const H=_[D];H.uri?T.push(uJ(H,p,D,h)):p.buffers[D]||(p.buffers[D]=null)}V=Promise.all(T)}return V.then(()=>{const T=[],D=F&&F.includes(SB),H=F&&F.includes(yw);if(D&&T.push(function(){if(!yf)return _v??(_v=function(O){let Q,W=null;function re(){Q=new Uint8Array(W.buffer)}function he(){throw new Error("Unexpected Draco error.")}const Se={a:{a:he,d:function(Te,de,je){return Q.copyWithin(Te,de,de+je)},c:function(Te){const de=Q.length,je=Math.max(Te>>>0,Math.ceil(1.2*de)),Ve=Math.ceil((je-de)/65536);try{return W.grow(Ve),re(),!0}catch{return!1}},b:he}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(O,Se):O.then(Te=>Te.arrayBuffer()).then(Te=>WebAssembly.instantiate(Te,Se))).then(Te=>{const{Rb:de,Qb:je,P:Ve,T:et,X:dt,Ja:pt,La:at,Qa:Et,Va:yt,Wa:Nt,eb:zt,jb:Gt,f:qt,e:Jt,yb:vr,zb:rr,Ab:Br,Bb:Ur,Db:br,Gb:Cn}=Te.instance.exports;W=Jt;const dn=(()=>{let rn=0,Vr=0,Zn=0,wn=0;return Pn=>{Zn&&(de(wn),de(rn),Vr+=Zn,Zn=rn=0),rn||(Vr+=128,rn=je(Vr));const hi=Pn.length+7&-8;let Oi=rn;hi>=Vr&&(Zn=hi,Oi=wn=je(hi));for(let Ti=0;Ti<Pn.length;Ti++)Q[Oi+Ti]=Pn[Ti];return Oi}})();return re(),qt(),{memory:Jt,_free:de,_malloc:je,Mesh:class{constructor(){this.ptr=Ve()}destroy(){et(this.ptr)}},Decoder:class{constructor(){this.ptr=pt()}destroy(){Gt(this.ptr)}DecodeArrayToMesh(rn,Vr,Zn){const wn=dn(rn),Pn=at(this.ptr,wn,Vr,Zn.ptr);return!!dt(Pn)}GetAttributeByUniqueId(rn,Vr){return{ptr:Et(this.ptr,rn.ptr,Vr)}}GetTrianglesUInt16Array(rn,Vr,Zn){yt(this.ptr,rn.ptr,Vr,Zn)}GetTrianglesUInt32Array(rn,Vr,Zn){Nt(this.ptr,rn.ptr,Vr,Zn)}GetAttributeDataArrayForAllPoints(rn,Vr,Zn,wn,Pn){zt(this.ptr,rn.ptr,Vr.ptr,Zn,wn,Pn)}},DT_INT8:vr(),DT_UINT8:rr(),DT_INT16:Br(),DT_UINT16:Ur(),DT_UINT32:br(),DT_FLOAT32:Cn()}})}(fetch(Hj())),_v.then(O=>{yf=O,_v=void 0}))}()),H&&T.push(function(){if(CB)return;const O=function(Q){let W;const re=WebAssembly.instantiateStreaming(Q,{}).then(Te=>{W=Te.instance,W.exports.__wasm_call_ctors()}),he={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Se={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:re,supported:!0,decodeGltfBuffer(Te,de,je,Ve,et,dt){(function(pt,at,Et,yt,Nt,zt,Gt){const qt=pt.exports.sbrk,Jt=yt+3&-4,vr=qt(Jt*Nt),rr=qt(zt.length),Br=new Uint8Array(pt.exports.memory.buffer);Br.set(zt,rr);const Ur=at(vr,yt,Nt,rr,zt.length);if(Ur===0&&Gt&&Gt(vr,Jt,Nt),Et.set(Br.subarray(vr,vr+yt*Nt)),qt(vr-qt(0)),Ur!==0)throw new Error(`Malformed buffer data: ${Ur}`)})(W,W.exports[Se[et]],Te,de,je,Ve,W.exports[he[dt]])}}}(fetch(Vj()));return O.ready.then(()=>{CB=O})}()),y)for(let O=0;O<y.length;O++)T.push(hJ(y[O],p,O,h));return(T.length?Promise.all(T):Promise.resolve()).then(()=>{if(D&&b)for(const{primitives:O}of b)for(const Q of O)lJ(Q,p);if(H&&b&&z)for(const O of z)cJ(O,p);return p})})}function mg(f,a){const h=f.json.bufferViews[a.bufferView],p=gw[a.componentType];return new p(f.buffers[h.buffer],(a.byteOffset||0)+(h.byteOffset||0),a.count*(h.byteStride&&h.byteStride!==bv[a.type]*p.BYTES_PER_ELEMENT?h.byteStride/p.BYTES_PER_ELEMENT:bv[a.type]))}function BB(f,a,h,p){const _=gw[a.componentType],y=function(T){switch(T){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(_),b=f.json.bufferViews[a.bufferView],F=b.byteStride?b.byteStride/_.BYTES_PER_ELEMENT:bv[a.type],z=h.float32,V=z.length/h.capacity;for(let T=0,D=0;T<a.count*F;T+=F,D+=V)for(let H=0;H<V;H++)z[D+H]=p[T+H]*y;h._trim()}function dJ(f,a,h){const p=f.indices,_=f.attributes,y={};y.indexArray=new Ka;const b=a.json.accessors[p],F=b.count/3;y.indexArray.reserve(F);const z=mg(a,b);for(let H=0;H<F;H++)y.indexArray.emplaceBack(z[3*H],z[3*H+1],z[3*H+2]);y.indexArray._trim(),y.vertexArray=new Eu;const V=a.json.accessors[_.POSITION];y.vertexArray.reserve(V.count);const T=mg(a,V);for(let H=0;H<V.count;H++)y.vertexArray.emplaceBack(T[3*H],T[3*H+1],T[3*H+2]);if(y.vertexArray._trim(),y.aabb=new Fo(V.min,V.max),y.centroid=function(H,O){const Q=[0,0,0],W=H.length;if(W>0){for(let re=0;re<W;re++){const he=3*H[re];Q[0]+=O[he],Q[1]+=O[he+1],Q[2]+=O[he+2]}Q[0]/=W,Q[1]/=W,Q[2]/=W}return Q}(z,T),_.COLOR_0!==void 0){const H=a.json.accessors[_.COLOR_0],O=bv[H.type],Q=mg(a,H);y.colorArray=O===3?new Eu:new El,y.colorArray.resize(H.count),BB(a,H,y.colorArray,Q)}if(_.NORMAL!==void 0){y.normalArray=new Eu;const H=a.json.accessors[_.NORMAL];y.normalArray.resize(H.count);const O=mg(a,H);BB(a,H,y.normalArray,O)}if(_.TEXCOORD_0!==void 0&&h.length>0){y.texcoordArray=new ll;const H=a.json.accessors[_.TEXCOORD_0];y.texcoordArray.resize(H.count);const O=mg(a,H);BB(a,H,y.texcoordArray,O)}if(_._FEATURE_ID_RGBA4444!==void 0){const H=a.json.accessors[_._FEATURE_ID_RGBA4444];a.json.extensionsUsed&&a.json.extensionsUsed.includes("EXT_meshopt_compression")&&(y.featureData=mg(a,H))}_._FEATURE_RGBA4444!==void 0&&(y.featureData=new Uint32Array(mg(a,a.json.accessors[_._FEATURE_RGBA4444]).buffer));const D=f.material;return y.material=function(H,O){const{emissiveFactor:Q=[0,0,0],alphaMode:W="OPAQUE",alphaCutoff:re=.5,normalTexture:he,occlusionTexture:Se,emissiveTexture:Te,doubleSided:de}=H,{baseColorFactor:je=[1,1,1,1],metallicFactor:Ve=1,roughnessFactor:et=1,baseColorTexture:dt,metallicRoughnessTexture:pt}=H.pbrMetallicRoughness||{},at=Se?O[Se.index]:void 0;if(Se&&Se.extensions&&Se.extensions.KHR_texture_transform&&at){const Et=Se.extensions.KHR_texture_transform;at.offsetScale=[Et.offset[0],Et.offset[1],Et.scale[0],Et.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new oi(...je),metallicFactor:Ve,roughnessFactor:et,baseColorTexture:dt?O[dt.index]:void 0,metallicRoughnessTexture:pt?O[pt.index]:void 0},doubleSided:de,emissiveFactor:Q,alphaMode:W,alphaCutoff:re,normalTexture:he?O[he.index]:void 0,occlusionTexture:at,emissionTexture:Te?O[Te.index]:void 0,defined:H.defined===void 0}}(D!==void 0?a.json.materials[D]:{defined:!1},h),y}function Yj(f,a,h){const{matrix:p,rotation:_,translation:y,scale:b,mesh:F,extras:z,children:V}=f,T={};if(T.matrix=p||Ue.mat4.fromRotationTranslationScale([],_||[0,0,0,1],y||[0,0,0],b||[1,1,1]),F!==void 0){T.meshes=h[F];const D=T.anchor=[0,0];for(const H of T.meshes){const{min:O,max:Q}=H.aabb;D[0]+=O[0]+Q[0],D[1]+=O[1]+Q[1]}D[0]=Math.floor(D[0]/T.meshes.length/2),D[1]=Math.floor(D[1]/T.meshes.length/2)}if(z&&(z.id&&(T.id=z.id),z.lights&&(T.lights=function(D){if(!D.length)return[];const H=function(he){const Se=atob(he),Te=new Uint8Array(Se.length);for(let de=0;de<Se.length;de++)Te[de]=Se.codePointAt(de);return Te}(D),O=[],Q=H.length/24,W=new Uint16Array(H.buffer),re=new Float32Array(H.buffer);for(let he=0;he<Q;he++){const Se=W[2*he*6]/30,Te=W[2*he*6+1]/30,de=W[2*he*6+10]/100,je=re[6*he+1],Ve=re[6*he+2],et=re[6*he+3],dt=re[6*he+4],pt=et-je,at=dt-Ve,Et=Math.hypot(pt,at);O.push({pos:[je+.5*pt,Ve+.5*at,Te],normal:[at/Et,-pt/Et,0],width:Et,height:Se,depth:de,points:[je,Ve,et,dt]})}return O}(z.lights))),V){const D=[];for(const H of V)D.push(Yj(a.json.nodes[H],a,h));T.children=D}return T}function fJ(f){if(f.vertices.length===0||f.indices.length===0)return null;const a=new jS(f.vertices,f.indices,8,256),[h,p]=[a.min.clone(),a.max.clone()];return{vertices:f.vertices,indices:f.indices,grid:a,min:h,max:p}}function pJ(f){if(!f.extras||!f.extras.ground)return null;const a=f.extras.ground;if(!a||!Array.isArray(a)||a.length===0)return null;const h=a[0];if(!h||!Array.isArray(h)||h.length===0)return null;const p=[];for(const b of h){if(!Array.isArray(b)||b.length!==2)continue;const F=b[0],z=b[1];typeof F=="number"&&typeof z=="number"&&p.push(new Ye(F,z))}if(p.length<3)return null;p.length>1&&p[p.length-1].equals(p[0])&&p.pop();let _=0;for(let b=0;b<p.length;b++){const F=p[b],z=p[(b+1)%p.length],V=p[(b+2)%p.length];_+=(F.x-z.x)*(V.y-z.y)-(V.x-z.x)*(F.y-z.y)}_>0&&p.reverse();const y=W1(p.flatMap(b=>[b.x,b.y]),[]);return y.length===0?null:{vertices:p,indices:y}}function AJ(f,a){const h=[],p=[];let _=0;const y=[];for(const b of f){_=h.length;const F=b.vertexArray.float32,z=b.indexArray.uint16;for(let V=0;V<b.vertexArray.length;V++)y[0]=F[3*V+0],y[1]=F[3*V+1],y[2]=F[3*V+2],Ue.vec3.transformMat4(y,y,a),h.push(new Ye(y[0],y[1]));for(let V=0;V<3*b.indexArray.length;V++)p.push(z[V]+_)}if(p.length%3!=0)return null;for(let b=0;b<p.length;b+=3){const F=h[p[b+0]],z=h[p[b+1]],V=h[p[b+2]];(F.x-z.x)*(V.y-z.y)-(V.x-z.x)*(F.y-z.y)>0&&([p[b+1],p[b+2]]=[p[b+2],p[b+1]])}return{vertices:h,indices:p}}function Zj(f){const a=function(z,V){const T=[],D=WebGL2RenderingContext;if(z.json.textures)for(const H of z.json.textures){const O={magFilter:D.LINEAR,minFilter:D.NEAREST,wrapS:D.REPEAT,wrapT:D.REPEAT};H.sampler!==void 0&&Object.assign(O,z.json.samplers[H.sampler]),T.push({image:V[H.source],sampler:O,uploaded:!1})}return T}(f,f.images),h=function(z,V){const T=[];for(const D of z.json.meshes){const H=[];for(const O of D.primitives)H.push(dJ(O,z,V));T.push(H)}return T}(f,a),{scenes:p,scene:_,nodes:y}=f.json,b=p?p[_||0].nodes:y,F=[];for(const z of b)F.push(Yj(y[z],f,h));return function(z,V,T){const D={},H=new Set;for(let O=0;O<z.length;O++){const Q=T[V[O]];if(!Q.extras)continue;const W=Q.extras["mapbox:footprint:version"],re=Q.extras["mapbox:footprint:id"];(W||re)&&H.add(O),W==="1.0.0"&&re&&(D[re]=O)}for(let O=0;O<z.length;O++){if(H.has(O))continue;const Q=z[O],W=T[V[O]];if(!W.extras)continue;let re=null;Q.id in D&&(re=AJ(z[D[Q.id]].meshes,Q.matrix)),re||(re=pJ(W)),re&&(Q.footprint=fJ(re))}if(H.size>0){const O=Array.from(H.values()).sort((Q,W)=>Q-W);for(let Q=O.length-1;Q>=0;Q--)z.splice(O[Q],1)}}(F,b,f.json.nodes),F}function mJ(f){f.heightmap=new Float32Array(4096),f.heightmap.fill(-1);const a=f.vertexArray.float32,h=f.aabb.min[0]-1,p=f.aabb.min[1]-1,_=pg/(f.aabb.max[0]-h+2),y=pg/(f.aabb.max[1]-p+2);for(let b=0;b<a.length;b+=3){const F=a[b+2],z=(a[b+0]-h)*_|0,V=(a[b+1]-p)*y|0;F>f.heightmap[V*pg+z]&&(f.heightmap[V*pg+z]=F)}}function gJ(f,a){const h={};h.indexArray=new Ka,h.indexArray.reserve(4*f.length),h.vertexArray=new Eu,h.vertexArray.reserve(10*f.length),h.colorArray=new El,h.vertexArray.reserve(10*f.length);let p=0;for(const b of f){const F=Math.min(10,Math.max(4,1.3*b.height))*a,z=[-b.normal[1],b.normal[0],0],V=Math.min(.29,.1*b.width/b.depth),T=b.width-2*b.depth*a*(V+.01),D=Ue.vec3.scaleAndAdd([],b.pos,z,T/2),H=Ue.vec3.scaleAndAdd([],b.pos,z,-T/2),O=[D[0],D[1],D[2]+b.height],Q=[H[0],H[1],H[2]+b.height],W=Ue.vec3.scaleAndAdd([],b.normal,z,V);Ue.vec3.scale(W,W,F);const re=Ue.vec3.scaleAndAdd([],b.normal,z,-V);Ue.vec3.scale(re,re,F),Ue.vec3.add(W,D,W),Ue.vec3.add(re,H,re),D[2]+=.1,H[2]+=.1,h.vertexArray.emplaceBack(W[0],W[1],W[2]),h.vertexArray.emplaceBack(re[0],re[1],re[2]),h.vertexArray.emplaceBack(D[0],D[1],D[2]),h.vertexArray.emplaceBack(H[0],H[1],H[2]),h.vertexArray.emplaceBack(O[0],O[1],O[2]),h.vertexArray.emplaceBack(Q[0],Q[1],Q[2]),h.vertexArray.emplaceBack(D[0],D[1],D[2]),h.vertexArray.emplaceBack(H[0],H[1],H[2]),h.vertexArray.emplaceBack(W[0],W[1],W[2]),h.vertexArray.emplaceBack(re[0],re[1],re[2]);const he=T/F/2;h.colorArray.emplaceBack(-he-V,-1,he,.8),h.colorArray.emplaceBack(he+V,-1,he,.8),h.colorArray.emplaceBack(-he,0,he,1.3),h.colorArray.emplaceBack(he,0,he,1.3),h.colorArray.emplaceBack(he+V,-.8,he,.7),h.colorArray.emplaceBack(he+V,-.8,he,.7),h.colorArray.emplaceBack(0,0,he,1.3),h.colorArray.emplaceBack(0,0,he,1.3),h.colorArray.emplaceBack(he+V,-1.2,he,.8),h.colorArray.emplaceBack(he+V,-1.2,he,.8),h.indexArray.emplaceBack(6+p,4+p,8+p),h.indexArray.emplaceBack(7+p,9+p,5+p),h.indexArray.emplaceBack(0+p,1+p,2+p),h.indexArray.emplaceBack(1+p,3+p,2+p),p+=10}const _={defined:!0,emissiveFactor:[0,0,0]},y={};return y.baseColorFactor=oi.white,_.pbrMetallicRoughness=y,h.material=_,h.aabb=new Fo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),h}class Jj{constructor(a){this._stringToNumber={},this._numberToString=[];for(let h=0;h<a.length;h++){const p=a[h];this._stringToNumber[p]=h,this._numberToString[h]=p}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const yJ=["id","tile","layer","source","sourceLayer","state"];class ek{constructor(a,h,p,_,y){this.type="Feature",this._vectorTileFeature=a,this._z=h,this._x=p,this._y=_,this.properties=a.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const h of yJ)this[h]!==void 0&&(a[h]=this[h]);return a}}class tk{constructor(a,h){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Ne(Jr,16,0),this.featureIndexArray=new Sb,this.promoteId=h,this.is3DTile=!1}insert(a,h,p,_,y,b=0,F=0){const z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,y,b);const V=this.grid;for(let T=0;T<h.length;T++){const D=h[T],H=[1/0,1/0,-1/0,-1/0];for(let O=0;O<D.length;O++){const Q=D[O];H[0]=Math.min(H[0],Q.x),H[1]=Math.min(H[1],Q.y),H[2]=Math.max(H[2],Q.x),H[3]=Math.max(H[3],Q.y)}F!==0&&(H[0]-=F,H[1]-=F,H[2]+=F,H[3]+=F),H[0]<Jr&&H[1]<Jr&&H[2]>=0&&H[3]>=0&&V.insert(z,H[0],H[1],H[2],H[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new R0.VectorTile(new $b(this.rawTileData)).layers,this.sourceLayerCoder=new Jj(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,h,p,_){this.loadVTLayers();const y=a.params||{},b=Rc(y.filter),F=a.tileResult,z=a.transform,V=F.bufferedTilespaceBounds,T=this.grid.query(V.min.x,V.min.y,V.max.x,V.max.y,(Q,W,re,he)=>Ih(F.bufferedTilespaceGeometry,Q,W,re,he));T.sort(vJ);let D=null;z.elevation&&T.length>0&&(D=q0.create(z.elevation,this.tileID));const H={};let O;for(let Q=0;Q<T.length;Q++){const W=T[Q];if(W===O)continue;O=W;const re=this.featureIndexArray.get(W);let he=null;if(this.is3DTile){const Se=this.bucketLayerIDs[0][0],Te=h[Se];if(Te.type!=="model")continue;const{queryFeature:de,intersectionZ:je}=Te.queryIntersectsMatchingFeature(F,re.featureIndex,b,z);de&&this.appendToResult(H,Se,re.featureIndex,de,je)}else this.loadMatchingFeature(H,re,b,y.layers,y.availableImages,h,p,_,(Se,Te,de,je=0)=>(he||(he=tn(Se,this.tileID.canonical,a.tileTransform)),Te.queryIntersectsFeature(F,Se,de,he,this.z,a.transform,a.pixelPosMatrix,D,je)))}return H}loadMatchingFeature(a,h,p,_,y,b,F,z,V){const{featureIndex:T,bucketIndex:D,sourceLayerIndex:H,layoutVertexArrayOffset:O}=h,Q=this.bucketLayerIDs[D];if(_&&!function(Se,Te){for(let de=0;de<Se.length;de++)if(Te.indexOf(Se[de])>=0)return!0;return!1}(_,Q))return;const W=this.sourceLayerCoder.decode(H),re=this.vtLayers[W].feature(T);if(p.needGeometry){const Se=sn(re,!0);if(!p.filter(new Ui(this.tileID.overscaledZ),Se,this.tileID.canonical))return}else if(!p.filter(new Ui(this.tileID.overscaledZ),re))return;const he=this.getId(re,W);for(let Se=0;Se<Q.length;Se++){const Te=Q[Se];if(_&&_.indexOf(Te)<0)continue;const de=b[Te];if(!de)continue;let je={};he!==void 0&&z&&(je=z.getState(de.sourceLayer||"_geojsonTileLayer",he));const Ve=!V||V(re,de,je,O);if(!Ve)continue;const et=new ek(re,this.z,this.x,this.y,he),dt=an({},F[Te]);dt.paint=rk(dt.paint,de.paint,re,je,y),dt.layout=rk(dt.layout,de.layout,re,je,y),et.layer=dt,this.appendToResult(a,Te,T,et,Ve)}}appendToResult(a,h,p,_,y){let b=a[h];b===void 0&&(b=a[h]=[]),b.push({featureIndex:p,feature:_,intersectionZ:y})}lookupSymbolFeatures(a,h,p,_,y,b,F,z){const V={};this.loadVTLayers();const T=Rc(y);for(const D of a)this.loadMatchingFeature(V,{bucketIndex:p,sourceLayerIndex:_,featureIndex:D,layoutVertexArrayOffset:0},T,b,F,z,h);return V}loadFeature(a){const{featureIndex:h,sourceLayerIndex:p}=a;this.loadVTLayers();const _=this.sourceLayerCoder.decode(p),y=this.vtFeatures[_];if(y[h])return y[h];const b=this.vtLayers[_].feature(h);return y[h]=b,b}hasLayer(a){for(const h of this.bucketLayerIDs)for(const p of h)if(a===p)return!0;return!1}getId(a,h){let p=a.id;if(this.promoteId){const _=typeof this.promoteId=="string"?this.promoteId:this.promoteId[h];_!=null&&(p=a.properties[_]),typeof p=="boolean"&&(p=Number(p))}return p}}function rk(f,a,h,p,_){return mn(f,(y,b)=>{const F=a instanceof ca?a.get(b):null;return F&&F.evaluate?F.evaluate(h,p,_):F})}function vJ(f,a){return a-f}Pe(tk,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const nk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class EB{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,p]=new Uint8Array(a,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const y=nk[15&p];if(!y)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(a,2,1),[F]=new Uint32Array(a,4,1);return new EB(F,b,y,a)}constructor(a,h=64,p=Float64Array,_){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=p,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const y=nk.indexOf(this.ArrayType),b=2*a*this.ArrayType.BYTES_PER_ELEMENT,F=a*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-F%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+F+z,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+b+F+z),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+F+z,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=a)}add(a,h){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=a,this.coords[this._pos++]=h,p}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return TB(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,h,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:b,nodeSize:F}=this,z=[0,y.length-1,0],V=[];for(;z.length;){const T=z.pop()||0,D=z.pop()||0,H=z.pop()||0;if(D-H<=F){for(let re=H;re<=D;re++){const he=b[2*re],Se=b[2*re+1];he>=a&&he<=p&&Se>=h&&Se<=_&&V.push(y[re])}continue}const O=H+D>>1,Q=b[2*O],W=b[2*O+1];Q>=a&&Q<=p&&W>=h&&W<=_&&V.push(y[O]),(T===0?a<=Q:h<=W)&&(z.push(H),z.push(O-1),z.push(1-T)),(T===0?p>=Q:_>=W)&&(z.push(O+1),z.push(D),z.push(1-T))}return V}within(a,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:y,nodeSize:b}=this,F=[0,_.length-1,0],z=[],V=p*p;for(;F.length;){const T=F.pop()||0,D=F.pop()||0,H=F.pop()||0;if(D-H<=b){for(let re=H;re<=D;re++)sk(y[2*re],y[2*re+1],a,h)<=V&&z.push(_[re]);continue}const O=H+D>>1,Q=y[2*O],W=y[2*O+1];sk(Q,W,a,h)<=V&&z.push(_[O]),(T===0?a-p<=Q:h-p<=W)&&(F.push(H),F.push(O-1),F.push(1-T)),(T===0?a+p>=Q:h+p>=W)&&(F.push(O+1),F.push(D),F.push(1-T))}return z}}function TB(f,a,h,p,_,y){if(_-p<=h)return;const b=p+_>>1;ik(f,a,b,p,_,y),TB(f,a,h,p,b-1,1-y),TB(f,a,h,b+1,_,1-y)}function ik(f,a,h,p,_,y){for(;_>p;){if(_-p>600){const V=_-p+1,T=h-p+1,D=Math.log(V),H=.5*Math.exp(2*D/3),O=.5*Math.sqrt(D*H*(V-H)/V)*(T-V/2<0?-1:1);ik(f,a,h,Math.max(p,Math.floor(h-T*H/V+O)),Math.min(_,Math.floor(h+(V-T)*H/V+O)),y)}const b=a[2*h+y];let F=p,z=_;for(wv(f,a,p,h),a[2*_+y]>b&&wv(f,a,p,_);F<z;){for(wv(f,a,F,z),F++,z--;a[2*F+y]<b;)F++;for(;a[2*z+y]>b;)z--}a[2*p+y]===b?wv(f,a,p,z):(z++,wv(f,a,z,_)),z<=h&&(p=z+1),h<=z&&(_=z-1)}}function wv(f,a,h,p){IB(f,h,p),IB(a,2*h,2*p),IB(a,2*h+1,2*p+1)}function IB(f,a,h){const p=f[a];f[a]=f[h],f[h]=p}function sk(f,a,h,p){const _=f-h,y=a-p;return _*_+y*y}i.$=Ko,i.A=class extends dw{},i.B=Va,i.C=Bi,i.D=Zi,i.E=Nn,i.F=Pp,i.G=Qs,i.H=Kf,i.I=ZS,i.J=Xf,i.K=Bh,i.L=L,i.M=of,i.N=eo,i.O=Yi,i.P=Ye,i.Q=lo,i.R=Ha,i.S=xo,i.T=uB,i.U=Qn,i.V=dw,i.W=lf,i.X=wd,i.Y=Oc,i.Z=function(f){const a=f.value;let h=[];if(!a)return h;const p=Va(a);return p!=="string"?(h=h.concat([new dw(f.key,a,`string expected, "${p}" found`)]),h):(Aj(a,!0)||(h=h.concat([new dw(f.key,a,`invalid url "${a}"`)])),h)},i._=ur,i.a=function(f){return It.API_CDN_URL_REGEX.test(f)},i.a$=al,i.a0=Bs,i.a1=Pr,i.a2=class{constructor(f){this.specification=f}possiblyEvaluate(f,a){return Bn(f.expression.evaluate(a))}interpolate(f,a,h){return{x:Sr(f.x,a.x,h),y:Sr(f.y,a.y,h),z:Sr(f.z,a.z,h),azimuthal:Sr(f.azimuthal,a.azimuthal,h),polar:Sr(f.polar,a.polar,h)}}},i.a3=Ui,i.a4=w,i.a5=sr,i.a6=Ue,i.a7=cn,i.a8=ca,i.a9=FA,i.aA=Lo,i.aB=rj,i.aC=lj,i.aD=tj,i.aE=function(f,a){const h=document.createElement("video");h.muted=!0,h.onloadstart=function(){a(null,h)};for(let p=0;p<f.length;p++){const _=document.createElement("source");Xo(f[p])||(h.crossOrigin="Anonymous"),_.src=f[p],h.appendChild(_)}return{cancel:()=>{}}},i.aF=aw,i.aG=function(f){return fetch(f).then(a=>a.arrayBuffer()).then(a=>Xj(a,0,f))},i.aH=Zj,i.aI=class{constructor(f,a,h,p){this.id=f,this.position=a!=null?new Ee(a[0],a[1]):new Ee(0,0),this.orientation=h??[0,0,0],this.nodes=p,this.uploaded=!1,this.aabb=new Fo([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(f,a){if(Ue.mat4.multiply(f.matrix,a,f.matrix),f.meshes)for(const h of f.meshes){const p=Fo.applyTransformFast(h.aabb,f.matrix);this.aabb.encapsulate(p)}if(f.children)for(const h of f.children)this._applyTransformations(h,f.matrix)}computeBoundsAndApplyParent(){const f=Ue.mat4.identity([]);for(const a of this.nodes)this._applyTransformations(a,f)}computeModelMatrix(f,a,h,p,_,y,b=!1){xj(this.matrix,this,f.transform,this.position,a,h,p,_,y,b)}upload(f){if(!this.uploaded){for(const a of this.nodes)AB(a,f);for(const a of this.nodes)fw(a);this.uploaded=!0}}destroy(){for(const f of this.nodes)mB(f)}},i.aJ=Kr,i.aK=lv,i.aL=bt,i.aM=_t,i.aN=Su,i.aO=Ka,i.aP=Xt,i.aQ=Th,i.aR=sw,i.aS=function(){Ri.isLoading()||Ri.isLoaded()||ms()!=="deferred"||To()},i.aT=Rc,i.aU=sn,i.aV=ek,i.aW=Nr,i.aX=VS,i.aY=MS,i.aZ=tn,i.a_=Bc,i.aa=Sr,i.ab=Jr,i.ac=ln,i.ad=class{constructor(f){this.specification=f}possiblyEvaluate(f,a){return function([h,p]){const _=Bn([1,h,p]);return{x:_.x,y:_.y,z:_.z}}(f.expression.evaluate(a))}interpolate(f,a,h){return{x:Sr(f.x,a.x,h),y:Sr(f.y,a.y,h),z:Sr(f.z,a.z,h)}}},i.ae=function(f,a,h=0,p=!0){const _=new Ye(h,h),y=f.sub(_),b=a.add(_),F=[y,new Ye(b.x,y.y),b,new Ye(y.x,b.y)];return p&&F.push(y.clone()),F},i.af=function(f,a){const h=[];for(let p=0;p<f.length;p++){const _=Sn(p-1,-1,f.length-1),y=Sn(p+1,-1,f.length-1),b=f[p],F=f[y],z=f[_].sub(b).unit(),V=F.sub(b).unit(),T=V.angleWithSep(z.x,z.y),D=z.add(V).unit().mult(-1*a/Math.sin(T/2));h.push(b.add(D))}return h},i.ag=zM,i.ah=Ih,i.ai=function(f,a,h=0){return Ue.vec3.fromValues(((a.x-h)*f.scale-f.x)*Jr,(a.y*f.scale-f.y)*Jr,Mt(a.z,a.y))},i.aj=ff,i.ak=aM,i.al=function(f){let a=1/0,h=1/0,p=-1/0,_=-1/0;for(const y of f)a=Math.min(a,y.x),h=Math.min(h,y.y),p=Math.max(p,y.x),_=Math.max(_,y.y);return{min:new Ye(a,h),max:new Ye(p,_)}},i.am=ft,i.an=ko,i.ao=Rr,i.ap=Ir,i.aq=l,i.ar=function(f,a){const h={};for(let p=0;p<a.length;p++){const _=a[p];_ in f&&(h[_]=f[_])}return h},i.as=Ge,i.at=gt,i.au=class{constructor(f){this.entries={},this.scheduler=f}request(f,a,h,p){const _=this.entries[f]=this.entries[f]||{callbacks:[]};if(_.result){const[y,b]=_.result;return this.scheduler?this.scheduler.add(()=>{p(y,b)},a):p(y,b),()=>{}}return _.callbacks.push(p),_.cancel||(_.cancel=h((y,b)=>{_.result=[y,b];for(const F of _.callbacks)this.scheduler?this.scheduler.add(()=>{F(y,b)},a):F(y,b);setTimeout(()=>delete this.entries[f],3e3)})),()=>{_.result||(_.callbacks=_.callbacks.filter(y=>y!==p),_.callbacks.length||(_.cancel(),delete this.entries[f]))}}},i.av=Cu,i.aw=function(f,a,h){const p=JSON.stringify(f.request);return f.data&&(this.deduped.entries[p]={result:[null,f.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:f.isSymbolTile,zoom:f.tileZoom},_=>{const y=Ul(f.request,(b,F,z,V)=>{b?_(b):F&&_(null,{vectorTile:h?void 0:new R0.VectorTile(new $b(F)),rawData:F,cacheControl:z,expires:V})});return()=>{y.cancel(),_()}},a)},i.ax=function(f){Fs++,Fs>Ni&&(f.getActor().send("enforceCacheSizeLimit",$n),Fs=0)},i.ay=nn,i.az=function(f){return f<=1?1:Math.pow(2,Math.floor(Math.log(f)/Math.LN2))},i.b=function(f){return It.API_FONTS_REGEX.test(f)},i.b$=function(f){const{x:a,y:h}=f.point,{lng:p,lat:_}=f._center;return JN(a,h,f.worldSize,p,_)},i.b0=Fh,i.b1=Ia,i.b2=W1,i.b3=aB,i.b4=function(f,a){const h=FA(a.zoom);if(h===0)return ep(f);const p=Pb(f),_=SS(p),y=ft(p.getWest())*a.worldSize,b=ft(p.getEast())*a.worldSize,F=gt(p.getNorth())*a.worldSize,z=gt(p.getSouth())*a.worldSize,V=[y,F,0],T=[b,F,0],D=[y,z,0],H=[b,z,0],O=Ue.mat4.invert([],a.globeMatrix);return Ue.vec3.transformMat4(V,V,O),Ue.vec3.transformMat4(T,T,O),Ue.vec3.transformMat4(D,D,O),Ue.vec3.transformMat4(H,H,O),_[0]=Rp(_[0],D,h),_[1]=Rp(_[1],H,h),_[2]=Rp(_[2],T,h),_[3]=Rp(_[3],V,h),Fo.fromPoints(_)},i.b5=jb,i.b6=q1,i.b7=Rp,i.b8=Bd,i.b9=Lu,i.bA=Sn,i.bB=vt,i.bC=Hn,i.bD=ut,i.bE=function(f,a,h){f[4*a+0]=h[0],f[4*a+1]=h[1],f[4*a+2]=h[2],f[4*a+3]=h[3]},i.bF=ug,i.bG=Nd,i.bH=Q1,i.bI=Yc,i.bJ=kp,i.bK=Ee,i.bL=qM,i.bM=Fl,i.bN=LA,i.bO=uj,i.bP=Xl,i.bQ=XN,i.bR=function(f,a,h,p,_,y,b,F,z){if(z.name==="globe")return XN(f,a,new Xl(h,p,_),!1);const V=lv({z:h,x:p,y:_},z);return new Fo([(y+V.x/V.scale)*a,a*(V.y/V.scale),b],[(y+V.x2/V.scale)*a,a*(V.y2/V.scale),F])},i.bS=function(f,a,h){let p=0;for(let _=0;_<2;++_)f[_]>0&&(p+=(f[_]-0)*(f[_]-0)),a[_]<0&&(p+=(0-a[_])*(0-a[_]));return p},i.bT=Tt,i.bU=x,i.bV=function(f){const a=Ue.mat4.identity(new Float64Array(16));Ue.mat4.multiply(a,f.pixelMatrix,f.globeMatrix);const h=[0,q,0],p=[0,X,0];return Ue.vec3.transformMat4(h,h,a),Ue.vec3.transformMat4(p,p,a),[h[0]>0&&h[0]<=f.width&&h[1]>0&&h[1]<=f.height&&!TS(f,new Ee(f.center.lat,90)),p[0]>0&&p[0]<=f.width&&p[1]>0&&p[1]<=f.height&&!TS(f,new Ee(f.center.lat,-90))]},i.bW=function(f,a){const{scale:h}=f.tileTransform,p=h*Jr/(f.tileSize*Math.pow(2,a.zoom-f.tileID.overscaledZ+f.tileID.canonical.z));return Ue.mat2.scale(new Float32Array(4),a.inverseAdjustmentMatrix,[p,p])},i.bX=uw,i.bY=cj,i.bZ=function(f){const a=cj(f,!0);return Ue.mat2.invert([],[a[0],a[1],a[4],a[5]])},i.b_=Jf,i.ba=_B,i.bb=$b,i.bc=Ul,i.bd=function(f){const a=[];for(const h in f)a.push(f[h]);return a},i.be=function(f,a){const h=[];for(const p in f)p in a||h.push(p);return h},i.bf=En,i.bg=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bh=Re,i.bi=function(f,a){const{x:h,y:p}=f.point,_=JN(h,p,f.worldSize/f._pixelsPerMercatorPixel,0,0);return Ue.mat4.multiply(_,_,BS(ep(a)))},i.bj=U0,i.bk=nd,i.bl=qb,i.bm=function(f,a,h,p,_){const y=5*a+2;f.float32[y+0]=h,f.float32[y+1]=p,f.float32[y+2]=_},i.bn=iw,i.bo=LM,i.bp=hn,i.bq=zc,i.br=NP,i.bs=pj,i.bt=DP,i.bu=OP,i.bv=tB,i.bw=DM,i.bx=YS,i.by=EB,i.bz=oi,i.c=kt,i.c$=cu,i.c0=Yt,i.c1=lu,i.c2=d,i.c3=function(f){const a=Math.round((f+45+360)%360/90)%4;return ar[a]},i.c4=45,i.c5=Ze,i.c6=k0,i.c7=function(f,a,h){const p=Math.sqrt(f*f+a*a+h*h),_=p>0?Math.acos(h/p)*Ut:0;let y=f!==0||a!==0?Math.atan2(-a,-f)*Ut+90:0;return y<0&&(y+=360),[p,y,_]},i.c8=Dt,i.c9=Fo,i.cA=function(f){const a=Tt-5;f=Ir(f,-a,a)/a*90;const h=Math.pow(Math.abs(Math.sin(vt(f))),3);return Math.round(h*(M.length-1))},i.cB=function(f,a,h,p){const _=a.getNorth(),y=a.getSouth(),b=a.getWest(),F=a.getEast(),z=1<<f.z,V=F-b,T=_-y,D=V/I,H=-T/M[h],O=[0,D,0,H,0,0,_,b,0];if(f.z>0){const Q=180/p;Ue.mat3.multiply(O,O,[Q/V+1,0,0,0,Q/T+1,0,-.5*Q/D,.5*Q/H,1])}return O[2]=z,O[5]=f.x,O[8]=f.y,O},i.cC=ep,i.cD=function(f,a,h){const p=Ue.mat4.identity(new Float64Array(16)),_=(a/(1<<f)-.5)*Math.PI*2;return Ue.mat4.rotateY(p,h.globeMatrix,_),Float32Array.from(p)},i.cE=class{isDataAvailableAtPoint(f){const a=this._source();if(this.isUsingMockSource()||!a||f.y<0||f.y>1)return!1;const h=a.getSource().maxzoom,p=1<<h,_=Math.floor(f.x),y=Math.floor((f.x-_)*p),b=Math.floor(f.y*p),F=this.findDEMTileFor(new Lo(h,_,h,y,b));return!(!F||!F.dem)}getAtPointOrZero(f,a=0){return this.getAtPoint(f,a)||0}getAtPoint(f,a,h=!0){if(this.isUsingMockSource())return null;a==null&&(a=null);const p=this._source();if(!p||f.y<0||f.y>1)return a;const _=p.getSource().maxzoom,y=1<<_,b=Math.floor(f.x),F=f.x-b,z=new Lo(_,b,_,Math.floor(F*y),Math.floor(f.y*y)),V=this.findDEMTileFor(z);if(!V||!V.dem)return a;const T=V.dem,D=1<<V.tileID.canonical.z,H=(F*D-V.tileID.canonical.x)*T.dim,O=(f.y*D-V.tileID.canonical.y)*T.dim,Q=Math.floor(H),W=Math.floor(O);return(h?this.exaggeration():1)*Sr(Sr(T.get(Q,W),T.get(Q,W+1),O-W),Sr(T.get(Q+1,W),T.get(Q+1,W+1),O-W),H-Q)}getAtTileOffset(f,a,h){const p=1<<f.canonical.z;return this.getAtPointOrZero(new sr(f.wrap+(f.canonical.x+a/Jr)/p,(f.canonical.y+h/Jr)/p))}getAtTileOffsetFunc(f,a,h,p){return _=>{const y=this.getAtTileOffset(f,_.x,_.y),b=p.upVector(f.canonical,_.x,_.y),F=p.upVectorScale(f.canonical,a,h).metersToTile;return Ue.vec3.scale(b,b,y*F),b}}getForTilePoints(f,a,h,p){if(this.isUsingMockSource())return!1;const _=q0.create(this,f,p);return!!_&&(a.forEach(y=>{y[2]=this.exaggeration()*_.getElevationAt(y[0],y[1],h)}),!0)}getMinMaxForTile(f){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(f);if(!a||!a.dem)return null;const h=a.dem.tree,p=a.tileID,_=1<<f.canonical.z-p.canonical.z;let y=f.canonical.x/_-p.canonical.x,b=f.canonical.y/_-p.canonical.y,F=0;for(let z=0;z<f.canonical.z-p.canonical.z&&!h.leaves[F];z++){y*=2,b*=2;const V=2*Math.floor(b)+Math.floor(y);F=h.childOffsets[F]+V,y%=1,b%=1}return{min:this.exaggeration()*h.minimums[F],max:this.exaggeration()*h.maximums[F]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(f,a,h){throw new Error("Pure virtual method called.")}pointCoordinate(f){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(f){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const f=this.visibleDemTiles;if(f.length===0)return null;let a=!1,h=Number.MAX_VALUE,p=Number.MIN_VALUE;for(const _ of f){const y=this.getMinMaxForTile(_.tileID);y&&(h=Math.min(h,y.min),p=Math.max(p,y.max),a=!0)}return a?{min:h,max:p}:null}},i.cF=dP,i.cG=Op,i.cH=function(f,a){return[Math.pow(f[0],2.2)*a,Math.pow(f[1],2.2)*a,Math.pow(f[2],2.2)*a]},i.cI=ZN,i.cJ=ht,i.cK=qe,i.cL=256,i.cM=function(f,a){const h=[0,0,0],p=jb(ep(a.canonical));return Ue.vec3.transformMat4(h,h,p),Ue.vec3.transformMat4(h,h,f),h},i.cN=f=>({u_camera_to_center_distance:new Yc(f),u_extrude_scale:new V1(f),u_device_pixel_ratio:new Yc(f),u_matrix:new ug(f),u_inv_rot_matrix:new ug(f),u_merc_center:new Nd(f),u_tile_id:new Q1(f),u_zoom_transition:new Yc(f),u_up_dir:new Q1(f),u_emissive_strength:new Yc(f)}),i.cO=f=>({u_matrix:new ug(f),u_pixels_to_tile_units:new V1(f),u_device_pixel_ratio:new Yc(f),u_units_to_pixels:new Nd(f),u_dash_image:new kp(f),u_gradient_image:new kp(f),u_image_height:new Yc(f),u_texsize:new Nd(f),u_tile_units_to_pixels:new Yc(f),u_alpha_discard_threshold:new Yc(f),u_trim_offset:new Nd(f),u_trim_fade_range:new Nd(f),u_trim_color:new k0(f),u_emissive_strength:new Yc(f)}),i.cP=f=>({u_matrix:new ug(f),u_texsize:new Nd(f),u_pixels_to_tile_units:new V1(f),u_device_pixel_ratio:new Yc(f),u_image:new kp(f),u_units_to_pixels:new Nd(f),u_tile_units_to_pixels:new Yc(f),u_alpha_discard_threshold:new Yc(f),u_trim_offset:new Nd(f)}),i.cQ=na,i.cR=zY,i.cS=QY,i.cT=rP,i.cU=(f,a,h,p,_,y)=>{const b=f.transform,F=b.projection.name==="globe";let z;if(y.paint.get("circle-pitch-alignment")==="map")if(F){const T=ZN(b.zoom,a.canonical)*b._pixelsPerMercatorPixel;z=Float32Array.from([T,0,0,T])}else z=b.calculatePixelsToTileUnitsMatrix(h);else z=new Float32Array([b.pixelsToGLUnits[0],0,0,b.pixelsToGLUnits[1]]);const V={u_camera_to_center_distance:f.transform.getCameraToCenterDistance(b.projection),u_matrix:f.translatePosMatrix(a.projMatrix,h,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_device_pixel_ratio:on.devicePixelRatio,u_extrude_scale:z,u_inv_rot_matrix:GX,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:y.paint.get("circle-emissive-strength")};if(F){V.u_inv_rot_matrix=p,V.u_merc_center=_,V.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],V.u_zoom_transition=FA(b.zoom);const T=_[0]*Jr,D=_[1]*Jr;V.u_up_dir=b.projection.upVector(new Xl(0,0,0),T,D)}return V},i.cV=uM,i.cW=(f,a,h,p,_,y)=>{const b=f.transform;return{u_matrix:cM(f,a,h,p),u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(a),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:lM(a,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:y}},i.cX=(f,a,h,p,_,y,b)=>{const F=f.transform,z=F.calculatePixelsToTileUnitsMatrix(a);return{u_matrix:cM(f,a,h,p),u_pixels_to_tile_units:z,u_device_pixel_ratio:y,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:hM(h)&&a.lineAtlasTexture?a.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:lM(a,f.transform),u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:h.paint.get("line-trim-fade-range"),u_trim_color:h.paint.get("line-trim-color").toRenderColor(h.lut).toArray01(),u_emissive_strength:h.paint.get("line-emissive-strength")}},i.cY=qr,i.cZ=$1,i.c_=YP,i.ca=Bn,i.cb=function(f){return[Math.pow(f[0],1/2.2),Math.pow(f[1],1/2.2),Math.pow(f[2],1/2.2)]},i.cc=function(f){return f({pluginStatus:Vn,pluginURL:ei}),zn.on("pluginStateChange",f),f},i.cd=$0,i.ce=mw,i.cf=Q0,i.cg=JS,i.ch=Fc,i.ci=Mi,i.cj=Dn,i.ck=er,i.cl=Hi,i.cm=function(f){const a=f.indexOf(Xc);return a>=0?f.slice(0,a):f},i.cn=function(f){return f.indexOf(Xc)>=0},i.co=function(f){const a=f.indexOf(Xc);return a>=0?f.slice(a+1):""},i.cp=function(f){const a=[],h=f.id;return h===void 0&&a.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&a.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&a.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),a},i.cq=function(f,a,h,p){return f.type==="custom"?new vZ(f,a):new LZ[f.type](f,a,h,p)},i.cr=Un,i.cs=zn,i.ct=nc,i.cu=H1,i.cv=class extends df{constructor(f){super(f),this.current=yS}set(f,a,h){if(this.fetchUniformLocation(f,a)){for(let p=0;p<9;p++)if(h[p]!==this.current[p]){this.current=h,this.gl.uniformMatrix3fv(this.location,!1,h);break}}}},i.cw=nr,i.cx=function(f,a,h){const p=FA(h.zoom),_=f.style.map._antialias,y=a.options.extStandardDerivativesForceOff||f.terrain&&f.terrain.exaggeration()>0;return p===0&&!_&&!y},i.cy=function(f){const a=f.pixelsPerMeter,h=a/ut(1,f.center.lat),p=Ue.mat4.identity(new Float64Array(16));return Ue.mat4.translate(p,p,[f.point.x,f.point.y,0]),Ue.mat4.scale(p,p,[h,h,a]),Float32Array.from(p)},i.cz=Pb,i.d=function(f){return It.API_TILEJSON_REGEX.test(f)},i.d$=A,i.d0=Gb,i.d1=PA,i.d2=450,i.d3=7,i.d4=yZ,i.d5=os,i.d6=Eh,i.d7=256,i.d8=BS,i.d9=Eu,i.dA=eP,i.dB=function(f){const a=[0,0,0],h=Ue.mat4.identity(new Float64Array(16));return Ue.mat4.multiply(h,f.pixelMatrix,f.globeMatrix),Ue.vec3.transformMat4(a,a,h),new Ye(a[0],a[1])},i.dC=function(f,a,h=!1){if(Vn===bn||Vn===zr||Vn===ui)throw new Error("setRTLTextPlugin cannot be called multiple times.");ei=on.resolveURL(f),Vn=bn,pi=a,Si(),h||To()},i.dD=ms,i.dE=function(){mw().acquire(bB)},i.dF=function(){const f=xv;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(bB),xv=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.dG=vv,i.dH=function(f){const a=Cs();if(!a)return;const h=a.delete(qn);f&&h.catch(f).then(()=>f())},i.dI=yv,i.dJ=Hj,i.dK=function(f){wB=on.resolveURL(f),X0||(X0=new $0(mw(),new Nn)),X0.broadcast("setDracoUrl",wB)},i.dL=Vj,i.dM=function(f){K0=on.resolveURL(f),X0||(X0=new $0(mw(),new Nn)),X0.broadcast("setMeshoptUrl",K0)},i.dN=Pe,i.dO=NA,i.dP=Af,i.dQ=Jj,i.dR=tk,i.dS=nM,i.dT=mn,i.dU=NM,i.dV=function(f,a,h,p,_,y,b,F,z,V,T){f.createArrays(),f.tilePixelRatio=Jr/(512*f.overscaling),f.compareText={},f.iconsNeedLinear=!1;const D=f.layers[0].layout,H=f.layers[0]._unevaluatedLayout._values,O={};if(f.textSizeData.kind==="composite"){const{minZoom:he,maxZoom:Se}=f.textSizeData;O.compositeTextSizes=[H["text-size"].possiblyEvaluate(new Ui(he),F),H["text-size"].possiblyEvaluate(new Ui(Se),F)]}if(f.iconSizeData.kind==="composite"){const{minZoom:he,maxZoom:Se}=f.iconSizeData;O.compositeIconSizes=[H["icon-size"].possiblyEvaluate(new Ui(he),F),H["icon-size"].possiblyEvaluate(new Ui(Se),F)]}O.layoutTextSize=H["text-size"].possiblyEvaluate(new Ui(z+1),F),O.layoutIconSize=H["icon-size"].possiblyEvaluate(new Ui(z+1),F),O.textMaxSize=H["text-size"].possiblyEvaluate(new Ui(18),F);const Q=D.get("text-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",W=D.get("text-size");let re=!1;for(const he of f.features)if(he.icon&&he.icon.nameSecondary){re=!0;break}for(const he of f.features){const Se=D.get("text-font").evaluate(he,{},F).join(","),Te=W.evaluate(he,{},F),de=O.layoutTextSize.evaluate(he,{},F),je=(O.layoutIconSize.evaluate(he,{},F),{horizontal:{},vertical:void 0}),Ve=he.text;let et,dt=[0,0];if(Ve){const Et=Ve.toString(),yt=D.get("text-letter-spacing").evaluate(he,{},F)*zc,Nt=D.get("text-line-height").evaluate(he,{},F)*zc,zt=ct(Et)?yt:0,Gt=D.get("text-anchor").evaluate(he,{},F),qt=D.get("text-variable-anchor");if(!qt){const Ur=D.get("text-radial-offset").evaluate(he,{},F);dt=Ur?DM(Gt,[Ur*zc,eB]):D.get("text-offset").evaluate(he,{},F).map(br=>br*zc)}let Jt=Q?"center":D.get("text-justify").evaluate(he,{},F);const vr=D.get("symbol-placement")==="point",rr=vr?D.get("text-max-width").evaluate(he,{},F)*zc:1/0,Br=Ur=>{f.allowVerticalPlacement&&Qt(Et)&&(je.vertical=XS(Ve,a,h,_,Se,rr,Nt,Gt,Ur,zt,dt,nd.vertical,!0,de,Te))};if(!Q&&qt){const Ur=Jt==="auto"?qt.map(Cn=>tB(Cn)):[Jt];let br=!1;for(let Cn=0;Cn<Ur.length;Cn++){const dn=Ur[Cn];if(!je.horizontal[dn])if(br)je.horizontal[dn]=je.horizontal[0];else{const rn=XS(Ve,a,h,_,Se,rr,Nt,"center",dn,zt,dt,nd.horizontal,!1,de,Te);rn&&(je.horizontal[dn]=rn,br=rn.positionedLines.length===1)}}Br("left")}else{if(Jt==="auto"&&(Jt=tB(Gt)),vr||D.get("text-writing-mode").indexOf("horizontal")>=0||!Qt(Et)){const Ur=XS(Ve,a,h,_,Se,rr,Nt,Gt,Jt,zt,dt,nd.horizontal,!1,de,Te);Ur&&(je.horizontal[Jt]=Ur)}Br(vr?"left":Jt)}}let pt=!1;if(he.icon&&he.icon.namePrimary){const Et=p[he.icon.namePrimary];Et&&(et=ZY(_[he.icon.namePrimary],he.icon.nameSecondary?_[he.icon.nameSecondary]:void 0,D.get("icon-offset").evaluate(he,{},F),D.get("icon-anchor").evaluate(he,{},F)),pt=Et.sdf,f.sdfIcons===void 0?f.sdfIcons=Et.sdf:f.sdfIcons!==Et.sdf&&ti("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Et.pixelRatio!==f.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(f.iconsNeedLinear=!0))}const at=RM(je.horizontal)||je.vertical;f.iconsInText||(f.iconsInText=!!at&&at.iconsInText),(at||et)&&sZ(f,he,je,et,p,O,de,0,dt,pt,b,F,V,T,re)}y&&f.generateCollisionDebugBuffers(z,f.collisionBoxArray)},i.dW=R0,i.dX=Aw,i.dY=fr,i.dZ=TP,i.d_=gM,i.da=Il,i.db=rd,i.dc=function(f,a,h,p,_){return Ir((f-a)/(h-a)*(_-p)+p,p,_)},i.dd=co,i.de=Vt,i.df=class{constructor(f,a,h,p){this.context=f,this.format=p,this.size=h,this.texture=f.gl.createTexture();const[_,y,b]=this.size,{gl:F}=f;F.bindTexture(F.TEXTURE_3D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(!1),F.texImage3D(F.TEXTURE_3D,0,this.format,_,y,b,0,lB(this.format),cB(this.format),a.data)}bind(f,a){const{context:h}=this,{gl:p}=h;p.bindTexture(p.TEXTURE_3D,this.texture),f!==this.minFilter&&(p.texParameteri(p.TEXTURE_3D,p.TEXTURE_MAG_FILTER,f),p.texParameteri(p.TEXTURE_3D,p.TEXTURE_MIN_FILTER,f),this.minFilter=f),a!==this.wrapS&&(p.texParameteri(p.TEXTURE_3D,p.TEXTURE_WRAP_S,a),p.texParameteri(p.TEXTURE_3D,p.TEXTURE_WRAP_T,a),this.wrapS=a)}destroy(){const{gl:f}=this.context;f.deleteTexture(this.texture),this.texture=null}},i.dg=fB,i.dh=[1,1,1],i.di=q0,i.dj=G0,i.dk=Tu,i.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Ye(1/0,1/0),max:new Ye(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(f,a=!1){const h=MP(new Ye(0,0),new Ye(Jr,Jr),f),p=[];if(a&&!RS(h,this._globalClipBounds))return p;for(const _ of this._activeRegions){if(_.hiddenByOverlap||!RS(h,_))continue;const y=pY(_.min,_.max,f);p.push({min:y.min,max:y.max,sourceId:this._sourceIds[_.priority],footprint:_.footprint,footprintTileId:_.tileId,order:_.order,clipMask:_.clipMask,clipScope:_.clipScope})}return p}setSources(f){this._setSources(f.map(a=>({getSourceId:()=>a.cache.id,getFootprints:()=>{const h=[];for(const p of a.cache.getVisibleCoordinates()){const _=a.cache.getTile(p).buckets[a.layer];_&&_.updateFootprints(p.toUnwrapped(),h)}return h},getOrder:()=>a.order,getClipMask:()=>a.clipMask,getClipScope:()=>a.clipScope})))}_addSource(f){const a=f.getFootprints();if(a.length===0)return;const h=f.getOrder(),p=f.getClipMask(),_=f.getClipScope();for(const y of a){if(!y.footprint)continue;const b=MP(y.footprint.min,y.footprint.max,y.id);this._activeRegions.push({min:b.min,max:b.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:y.id,footprint:y.footprint,order:h,clipMask:p,clipScope:_})}this._sourceIds.push(f.getSourceId())}_computeReplacement(){this._activeRegions.sort((a,h)=>a.priority-h.priority||Hb(a.min,h.min)||Hb(a.max,h.max)||a.order-h.order||a.clipMask-h.clipMask||function(p,_){const y=(b,F)=>b+F;return p.length-_.length||p.reduce(y,"").localeCompare(_.reduce(y,""))}(a.clipScope,h.clipScope));let f=this._activeRegions.length!==this._prevRegions.length;if(!f){let a=0;for(;!f&&a!==this._activeRegions.length;){const h=this._activeRegions[a],p=this._prevRegions[a];f=h.priority!==p.priority||!PP(h,p)||h.order!==p.order||h.clipMask!==p.clipMask||!Re(h.clipScope,p.clipScope),++a}}if(f){++this._updateTime;for(const h of this._activeRegions)h.order!==Qb&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,h.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,h.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,h.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,h.max.y));const a=h=>{const p=this._activeRegions;if(h>=p.length)return h;const _=p[h].priority;for(;h<p.length&&p[h].priority===_;)++h;return h};if(this._sourceIds.length>1){let h=0,p=a(h);for(;h!==p;){let _=h;const y=h;for(;_!==p;){const b=this._activeRegions[_];b.hiddenByOverlap=!1;for(let F=0;F<y;F++){const z=this._activeRegions[F];if(!z.hiddenByOverlap&&b.order===Qb&&RS(b,z)&&(b.hiddenByOverlap=kP(b.footprint,b.tileId,z.footprint,z.tileId),b.hiddenByOverlap))break}++_}h=p,p=a(h)}}}}_setSources(f){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let a=f.length-1;a>=0;a--)this._addSource(f[a]);this._computeReplacement()}},i.dm=class{constructor(f){this._createGrid(f),this._createPoles(f)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const f of this._poleSegments)f.destroy();for(const f of this._gridSegments)f.withSkirts.destroy(),f.withoutSkirts.destroy()}_fillGridMeshWithLods(f,a){const h=new Bc,p=new Ka,_=[],y=f+1+2,b=a[0]+1,F=a[0]+1+(1+a.length),z=(V,T,D)=>{let H=V===y-1?V-2:V===0?V:V-1;return H+=D?24575:0,[H,T]};for(let V=0;V<y;++V)h.emplaceBack(...z(V,0,!0));for(let V=0;V<b;++V)for(let T=0;T<y;++T)h.emplaceBack(...z(T,V,(T===0||T===y-1)&&!0));for(let V=0;V<a.length;++V){const T=a[V];for(let D=0;D<y;++D)h.emplaceBack(...z(D,T,!0))}for(let V=0;V<a.length;++V){const T=p.length,D=a[V]+1+2,H=new Ka;for(let W=0;W<D-1;W++){const re=W===D-2,he=re?y*(F-a.length+V-W):y;for(let Se=0;Se<y-1;Se++){const Te=W*y+Se;W===0||re||Se===0||Se===y-2?(H.emplaceBack(Te+1,Te,Te+he),H.emplaceBack(Te+he,Te+he+1,Te+1)):(p.emplaceBack(Te+1,Te,Te+he),p.emplaceBack(Te+he,Te+he+1,Te+1))}}const O=Ia.simpleSegment(0,T,h.length,p.length-T);for(let W=0;W<H.uint16.length;W+=3)p.emplaceBack(H.uint16[W],H.uint16[W+1],H.uint16[W+2]);const Q=Ia.simpleSegment(0,T,h.length,p.length-T);_.push({withoutSkirts:O,withSkirts:Q})}return{vertices:h,indices:p,segments:_}}_createGrid(f){const a=this._fillGridMeshWithLods(I,M);this._gridSegments=a.segments,this._gridBuffer=f.createVertexBuffer(a.vertices,Fh.members),this._gridIndexBuffer=f.createIndexBuffer(a.indices,!0)}_createPoles(f){const a=new Ka;for(let b=0;b<=I;b++)a.emplaceBack(0,b+1,b+2);this._poleIndexBuffer=f.createIndexBuffer(a,!0);const h=new Il,p=new Il,_=new Il,y=new Il;this._poleSegments=[];for(let b=0,F=0;b<d;b++){const z=360/(1<<b);h.emplaceBack(0,-l,0,.5,0),p.emplaceBack(0,-l,0,.5,1),_.emplaceBack(0,-l,0,.5,.5),y.emplaceBack(0,-l,0,.5,.5);for(let V=0;V<=I;V++){let T=V/I,D=0;const H=Sr(0,z,T),[O,Q,W]=ne(HX,VX,H,l);h.emplaceBack(O,Q,W,T,D),p.emplaceBack(O,Q,W,T,1-D);const re=vt(H);T=.5+.5*Math.sin(re),D=.5+.5*Math.cos(re),_.emplaceBack(O,Q,W,T,D),y.emplaceBack(O,Q,W,T,1-D)}this._poleSegments.push(Ia.simpleSegment(F,0,66,64)),F+=66}this._poleNorthVertexBuffer=f.createVertexBuffer(h,dh,!1),this._poleSouthVertexBuffer=f.createVertexBuffer(p,dh,!1),this._texturedPoleNorthVertexBuffer=f.createVertexBuffer(_,dh,!1),this._texturedPoleSouthVertexBuffer=f.createVertexBuffer(y,dh,!1)}getGridBuffers(f,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[f].withSkirts:this._gridSegments[f].withoutSkirts]}getPoleBuffers(f,a){return[a?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,a?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[f]]}},i.dn=Qb,i.dp=Fr,i.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.dr=Gr,i.ds=Rt,i.dt=se,i.du=function([f,a,h]){const p=Math.hypot(f,a,h),_=Math.atan2(f,h),y=.5*Math.PI-Math.acos(-a/p);return new Ee(Yt(_),Yt(y))},i.dv=dB,i.dw=ye,i.dx=function(f){const a=f.navigator?f.navigator.userAgent:null;return!!function(h){if(ri==null){const p=h.navigator?h.navigator.userAgent:null;ri=!!h.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return ri}(f)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},i.dy=function(f,a){$n=f,Ni=a},i.dz=TS,i.e=It,i.e0=function(f){let a=0;if(new Uint32Array(f,0,1)[0]!==qj){const h=new Uint32Array(f,0,7),[,,p,_,y,b]=h;a=h.byteLength+_+y+b+y,(p!==f.byteLength||a>=f.byteLength)&&ti("Invalid b3dm header information.")}return Xj(f,a)},i.e1=function(f,a){const h=Zj(f);for(const p of h){for(const _ of p.meshes)mJ(_);p.lights&&(p.lightMeshIndex=p.meshes.length,p.meshes.push(gJ(p.lights,a)))}return h},i.e2=pw,i.e3=Bj,i.e4=Ri,i.e5=function(f){ro(),Wn!=null&&Wn.then(a=>{a.keys().then(h=>{for(let p=0;p<h.length-f;p++)a.delete(h[p])})})},i.f=function(f){return f.indexOf("mapbox:")===0},i.g=function(f,a){return nc(an(f,{method:"GET"}),a)},i.h=wt,i.i=function(f){return It.API_STYLE_REGEX.test(f)&&!kt(f)},i.j=function(f){return decodeURIComponent(atob(f).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""))},i.k=function(f){return btoa(encodeURIComponent(f).replace(/%([0-9A-F]{2})/g,(a,h)=>String.fromCharCode(+("0x"+h))))},i.l=an,i.m=es,i.n=function(f,a){return nc(an(f,{type:"json"}),a)},i.o=vs,i.p=function(f,a){return nc(an(f,{method:"POST"}),a)},i.q=on,i.r=uu,i.s=function(f){try{const a=self[f];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=_r,i.u=function(){return function f(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,f)}()},i.v=function(f){return!!f&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(f)},i.w=ti,i.x=tr,i.y=2,i.z=FM}),c(["./shared"],function(i){function A(ir){const We=ir?ir.url.toString():void 0;return We?performance.getEntriesByName(We):[]}function g(ir){if(typeof ir=="number"||typeof ir=="boolean"||typeof ir=="string"||ir==null)return JSON.stringify(ir);if(Array.isArray(ir)){let qe="[";for(const ht of ir)qe+=`${g(ht)},`;return`${qe}]`}let We="{";for(const qe of Object.keys(ir).sort())We+=`${qe}:${g(ir[qe])},`;return`${We}}`}function C(ir){let We="";for(const qe of i.bg)We+=`/${g(ir[qe])}`;return We}class B{constructor(We){this.keyCache={},this._layers={},this._layerConfigs={},We&&this.replace(We)}replace(We,qe){this._layerConfigs={},this._layers={},this.update(We,[],qe)}update(We,qe,ht){this._options=ht;for(const wt of We)this._layerConfigs[wt.id]=wt,(this._layers[wt.id]=i.cq(wt,this.scope,null,this._options)).compileFilter(ht),this.keyCache[wt.id]&&delete this.keyCache[wt.id];for(const wt of qe)delete this.keyCache[wt],delete this._layerConfigs[wt],delete this._layers[wt];this.familiesBySource={};const It=function(wt,kt){const Wt={};for(let pr=0;pr<wt.length;pr++){const xr=kt&&kt[wt[pr].id]||C(wt[pr]);kt&&(kt[wt[pr].id]=xr);let Ar=Wt[xr];Ar||(Ar=Wt[xr]=[]),Ar.push(wt[pr])}const Ot=[];for(const pr in Wt)Ot.push(Wt[pr]);return Ot}(i.bd(this._layerConfigs),this.keyCache);for(const wt of It){const kt=wt.map(Tr=>this._layers[Tr.id]),Wt=kt[0];if(Wt.visibility==="none")continue;const Ot=Wt.source||"";let pr=this.familiesBySource[Ot];pr||(pr=this.familiesBySource[Ot]={});const xr=Wt.sourceLayer||"_geojsonTileLayer";let Ar=pr[xr];Ar||(Ar=pr[xr]=[]),Ar.push(kt)}}}const S=1*i.dP;class P{constructor(We){const qe={},ht=[];for(const Wt in We){const Ot=We[Wt],pr=qe[Wt]={};for(const xr in Ot.glyphs){const Ar=Ot.glyphs[+xr];if(!Ar||Ar.bitmap.width===0||Ar.bitmap.height===0)continue;const Tr=Ar.metrics.localGlyph?S:1,nn={x:0,y:0,w:Ar.bitmap.width+2*Tr,h:Ar.bitmap.height+2*Tr};ht.push(nn),pr[xr]=nn}}const{w:It,h:wt}=i.z(ht),kt=new i.dO({width:It||1,height:wt||1});for(const Wt in We){const Ot=We[Wt];for(const pr in Ot.glyphs){const xr=Ot.glyphs[+pr];if(!xr||xr.bitmap.width===0||xr.bitmap.height===0)continue;const Ar=qe[Wt][pr],Tr=xr.metrics.localGlyph?S:1;i.dO.copy(xr.bitmap,kt,{x:0,y:0},{x:Ar.x+Tr,y:Ar.y+Tr},xr.bitmap)}}this.image=kt,this.positions=qe}}i.dN(P,"GlyphAtlas");class j{constructor(We){this.tileID=new i.aA(We.tileID.overscaledZ,We.tileID.wrap,We.tileID.canonical.z,We.tileID.canonical.x,We.tileID.canonical.y),this.tileZoom=We.tileZoom,this.uid=We.uid,this.zoom=We.zoom,this.lut=We.lut,this.canonical=We.tileID.canonical,this.pixelRatio=We.pixelRatio,this.tileSize=We.tileSize,this.source=We.source,this.scope=We.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=We.showCollisionBoxes,this.collectResourceTiming=!!We.collectResourceTiming,this.promoteId=We.promoteId,this.isSymbolTile=We.isSymbolTile,this.tileTransform=i.aK(We.tileID.canonical,We.projection),this.projection=We.projection,this.brightness=We.brightness,this.extraShadowCaster=!!We.extraShadowCaster,this.tessellationStep=We.tessellationStep}parse(We,qe,ht,It,wt){this.status="parsing",this.data=We,this.collisionBoxArray=new i.aQ;const kt=new i.dQ(Object.keys(We.layers).sort()),Wt=new i.dR(this.tileID,this.promoteId);Wt.bucketLayerIDs=[];const Ot={},pr=new i.dS(256,256),xr={featureIndex:Wt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:pr,availableImages:ht,brightness:this.brightness},Ar=qe.familiesBySource[this.source];for(const $n in Ar){const Ni=We.layers[$n];if(!Ni)continue;let Vi=!1,Wn=!1,Ki=!1;for(const Fs of Ar[$n])Fs[0].type==="symbol"?Vi=!0:Wn=!0,Fs[0].is3D()&&Fs[0].type!=="model"&&(Ki=!0);if(this.extraShadowCaster&&!Ki||this.isSymbolTile===!0&&!Vi||this.isSymbolTile===!1&&!Wn)continue;Ni.version===1&&i.w(`Vector tile source "${this.source}" layer "${$n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Cs=kt.encode($n),ro=[];for(let Fs=0;Fs<Ni.length;Fs++){const es=Ni.feature(Fs),Sa=Wt.getId(es,$n);ro.push({feature:es,id:Sa,index:Fs,sourceLayerIndex:Cs})}for(const Fs of Ar[$n]){const es=Fs[0];(!this.extraShadowCaster||es.is3D()&&es.type!=="model")&&(this.isSymbolTile!==void 0&&es.type==="symbol"!==this.isSymbolTile||es.minzoom&&this.zoom<Math.floor(es.minzoom)||es.maxzoom&&this.zoom>=es.maxzoom||es.visibility!=="none"&&(R(Fs,this.zoom,xr.brightness,ht),(Ot[es.id]=es.createBucket({index:Wt.bucketLayerIDs.length,layers:Fs,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Cs,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(ro,xr,this.tileID.canonical,this.tileTransform),Wt.bucketLayerIDs.push(Fs.map(Sa=>Sa.id))))}}let Tr,nn,on,_n;pr.trim();const Dn={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},qn=()=>{if(Tr)return this.status="done",wt(Tr);if(this.extraShadowCaster)this.status="done",wt(null,{buckets:i.bd(Ot).filter($n=>!$n.isEmpty()),featureIndex:Wt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:xr.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(nn&&on&&_n){const $n=new P(nn),Ni=new i.dU(on,_n,this.lut);for(const Vi in Ot){const Wn=Ot[Vi];Wn instanceof i.aR?(R(Wn.layers,this.zoom,xr.brightness,ht),i.dV(Wn,nn,$n.positions,on,Ni.iconPositions,this.showCollisionBoxes,ht,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Wn.hasPattern&&(Wn instanceof i.aX||Wn instanceof i.aY||Wn instanceof i.d0)&&(R(Wn.layers,this.zoom,xr.brightness,ht),Wn.addFeatures(xr,this.tileID.canonical,Ni.patternPositions,ht,this.tileTransform,this.brightness))}this.status="done",wt(null,{buckets:i.bd(Ot).filter(Vi=>!Vi.isEmpty()),featureIndex:Wt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$n.image,lineAtlas:pr,imageAtlas:Ni,brightness:xr.brightness})}};if(!this.extraShadowCaster){const $n=i.dT(xr.glyphDependencies,Wn=>Object.keys(Wn).map(Number));Object.keys($n).length?It.send("getGlyphs",{uid:this.uid,stacks:$n,scope:this.scope},(Wn,Ki)=>{Tr||(Tr=Wn,nn=Ki,qn())},void 0,!1,Dn):nn={};const Ni=Object.keys(xr.iconDependencies);Ni.length?It.send("getImages",{icons:Ni,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Wn,Ki)=>{Tr||(Tr=Wn,on=Ki,qn())},void 0,!1,Dn):on={};const Vi=Object.keys(xr.patternDependencies);Vi.length?It.send("getImages",{icons:Vi,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Wn,Ki)=>{Tr||(Tr=Wn,_n=Ki,qn())},void 0,!1,Dn):_n={}}qn()}}function R(ir,We,qe,ht){const It=new i.a3(We,{brightness:qe});for(const wt of ir)wt.recalculate(It,ht)}class N extends i.E{constructor(We,qe,ht,It,wt,kt){super(),this.actor=We,this.layerIndex=qe,this.availableImages=ht,this.loadVectorData=wt||i.aw,this.loading={},this.loaded={},this.deduped=new i.au(We.scheduler),this.isSpriteLoaded=It,this.scheduler=We.scheduler,this.brightness=kt}loadTile(We,qe){const ht=We.uid,It=We&&We.request,wt=It&&It.collectResourceTiming,kt=this.loading[ht]=new j(We);kt.abort=this.loadVectorData(We,(Wt,Ot)=>{const pr=!this.loading[ht];if(delete this.loading[ht],pr||Wt||!Ot)return kt.status="done",pr||(this.loaded[ht]=kt),qe(Wt);const xr=Ot.rawData,Ar={};Ot.expires&&(Ar.expires=Ot.expires),Ot.cacheControl&&(Ar.cacheControl=Ot.cacheControl),kt.vectorTile=Ot.vectorTile||new i.dW.VectorTile(new i.bb(xr));const Tr=()=>{kt.parse(kt.vectorTile,this.layerIndex,this.availableImages,this.actor,(nn,on)=>{if(nn||!on)return qe(nn);const _n={};if(wt){const Dn=A(It);Dn.length>0&&(_n.resourceTiming=JSON.parse(JSON.stringify(Dn)))}qe(null,i.l({rawTileData:xr.slice(0)},on,Ar,_n))})};this.isSpriteLoaded?Tr():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Tr,{type:"parseTile",isSymbolTile:We.isSymbolTile,zoom:We.tileZoom}):Tr()}),this.loaded=this.loaded||{},this.loaded[ht]=kt})}reloadTile(We,qe){const ht=this.loaded,It=We.uid;if(ht&&ht[It]){const wt=ht[It];wt.showCollisionBoxes=We.showCollisionBoxes,wt.projection=We.projection,wt.brightness=We.brightness,wt.tileTransform=i.aK(We.tileID.canonical,We.projection),wt.extraShadowCaster=We.extraShadowCaster,wt.lut=We.lut;const kt=(Wt,Ot)=>{const pr=wt.reloadCallback;pr&&(delete wt.reloadCallback,wt.parse(wt.vectorTile,this.layerIndex,this.availableImages,this.actor,pr)),qe(Wt,Ot)};wt.status==="parsing"?wt.reloadCallback=kt:wt.status==="done"&&(wt.vectorTile?wt.parse(wt.vectorTile,this.layerIndex,this.availableImages,this.actor,kt):kt())}else qe(null,void 0)}abortTile(We,qe){const ht=We.uid,It=this.loading[ht];It&&(It.abort&&It.abort(),delete this.loading[ht]),qe()}removeTile(We,qe){const ht=this.loaded,It=We.uid;ht&&ht[It]&&delete ht[It],qe()}}class U{loadTile(We,qe){const{uid:ht,encoding:It,rawImageData:wt,padding:kt}=We,Wt=ImageBitmap&&wt instanceof ImageBitmap?this.getImageData(wt,kt):wt;qe(null,new i.dX(ht,Wt,It,kt<1))}getImageData(We,qe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(We.width,We.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=We.width,this.offscreenCanvas.height=We.height,this.offscreenCanvasContext.drawImage(We,0,0,We.width,We.height);const ht=this.offscreenCanvasContext.getImageData(-qe,-qe,We.width+2*qe,We.height+2*qe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ht}}i.ba.setPbf(i.bb);class ${decodeRasterArray({task:We,buffer:qe},ht){i.ba.performDecoding(qe,We).then(It=>{ht(null,It)},It=>{ht(It)})}}const J=i.dW.VectorTileFeature.prototype.toGeoJSON;class te{constructor(We){this._feature=We,this.extent=i.ab,this.type=We.type,this.properties=We.tags,"id"in We&&!isNaN(We.id)&&(this.id=parseInt(We.id,10))}loadGeometry(){if(this._feature.type===1){const We=[];for(const qe of this._feature.geometry)We.push([new i.P(qe[0],qe[1])]);return We}{const We=[];for(const qe of this._feature.geometry){const ht=[];for(const It of qe)ht.push(new i.P(It[0],It[1]));We.push(ht)}return We}}toGeoJSON(We,qe,ht){return J.call(this,We,qe,ht)}}class ue{constructor(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.ab,this.length=We.length,this._features=We}feature(We){return new te(this._features[We])}}const oe=64/4096,K=128;class ce{constructor(){this.features=new Map}clear(){this.features.clear()}load(We=[],qe){for(const ht of We){const It=ht.id;if(It==null)continue;let wt=this.features.get(It);wt&&this.updateCache(wt,qe),ht.geometry?(wt=Z(ht),this.updateCache(wt,qe),this.features.set(It,wt)):this.features.delete(It),this.updateCache(wt,qe)}}updateCache(We,qe){for(const{canonical:ht,uid:It}of Object.values(qe)){const{z:wt,x:kt,y:Wt}=ht;me(We,Math.pow(2,wt),kt,Wt)&&delete qe[It]}}getTile(We,qe,ht){const It=Math.pow(2,We),wt=[];for(const kt of this.features.values())me(kt,It,qe,ht)&&wt.push(Qe(kt,It,qe,ht));return{features:wt}}getFeatures(){return[...this.features.values()]}}function me({minX:ir,minY:We,maxX:qe,maxY:ht},It,wt,kt){return ir<(wt+1+oe)/It&&We<(kt+1+oe)/It&&qe>(wt-oe)/It&&ht>(kt-oe)/It}function Z(ir){const{id:We,geometry:qe,properties:ht}=ir;if(!qe)return;if(qe.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:It,coordinates:wt}=qe,kt={id:We,type:1,geometry:[],tags:ht,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Wt=kt.geometry;if(It==="Point")Y(wt,Wt,kt);else if(It==="MultiPoint")for(const Ot of wt)Y(Ot,Wt,kt);else if(It==="LineString")kt.type=2,Le(wt,Wt,kt);else if(It==="MultiLineString")kt.type=2,_e(wt,Wt,kt);else if(It==="Polygon")kt.type=3,_e(wt,Wt,kt,!0);else{if(It!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");kt.type=3;for(const Ot of wt)_e(Ot,Wt,kt,!0)}return kt}function Y([ir,We],qe,ht){const It=i.am(ir);let wt=i.at(We);wt=wt<0?0:wt>1?1:wt,qe.push(It,wt),ht.minX=Math.min(ht.minX,It),ht.minY=Math.min(ht.minY,wt),ht.maxX=Math.max(ht.maxX,It),ht.maxY=Math.max(ht.maxY,wt)}function Le(ir,We,qe,ht=!1,It=!1){const wt=[];for(const kt of ir)Y(kt,wt,qe);We.push(wt),ht&&function(kt,Wt){let Ot=0;for(let pr=0,xr=kt.length,Ar=xr-2;pr<xr;Ar=pr,pr+=2)Ot+=(kt[pr]-kt[Ar])*(kt[pr+1]+kt[Ar+1]);if(Ot>0===Wt)for(let pr=0,xr=kt.length;pr<xr/2;pr+=2){const Ar=kt[pr],Tr=kt[pr+1];kt[pr]=kt[xr-2-pr],kt[pr+1]=kt[xr-1-pr],kt[xr-2-pr]=Ar,kt[xr-1-pr]=Tr}}(wt,It)}function _e(ir,We,qe,ht=!1){for(let It=0;It<ir.length;It++)Le(ir[It],We,qe,ht,It===0)}function Qe(ir,We,qe,ht){const{id:It,type:wt,geometry:kt,tags:Wt}=ir,Ot=[];if(wt===1)(function(pr,xr,Ar,Tr,nn){for(let on=0;on<pr.length;on+=2){const _n=Math.round(i.ab*(pr[on+0]*xr-Ar)),Dn=Math.round(i.ab*(pr[on+1]*xr-Tr));nn.push([_n,Dn])}})(kt,We,qe,ht,Ot);else for(const pr of kt)De(pr,We,qe,ht,Ot);return{id:It,type:wt,geometry:Ot,tags:Wt}}function De(ir,We,qe,ht,It){const wt=-K,kt=i.ab+K;let Wt;for(let Ot=0;Ot<ir.length-2;Ot+=2){let pr=Math.round(i.ab*(ir[Ot+0]*We-qe)),xr=Math.round(i.ab*(ir[Ot+1]*We-ht)),Ar=Math.round(i.ab*(ir[Ot+2]*We-qe)),Tr=Math.round(i.ab*(ir[Ot+3]*We-ht));const nn=Ar-pr,on=Tr-xr;pr<wt&&Ar<wt||(pr<wt?(xr+=Math.round(on*((wt-pr)/nn)),pr=wt):Ar<wt&&(Tr=xr+Math.round(on*((wt-pr)/nn)),Ar=wt),xr<wt&&Tr<wt||(xr<wt?(pr+=Math.round(nn*((wt-xr)/on)),xr=wt):Tr<wt&&(Ar=pr+Math.round(nn*((wt-xr)/on)),Tr=wt),pr>=kt&&Ar>=kt||(pr>=kt?(xr+=Math.round(on*((kt-pr)/nn)),pr=kt):Ar>=kt&&(Tr=xr+Math.round(on*((kt-pr)/nn)),Ar=kt),xr>=kt&&Tr>=kt||(xr>=kt?(pr+=Math.round(nn*((kt-xr)/on)),xr=kt):Tr>=kt&&(Ar=pr+Math.round(nn*((kt-xr)/on)),Tr=kt),Wt&&pr===Wt[Wt.length-1][0]&&xr===Wt[Wt.length-1][1]||(Wt=[[pr,xr]],It.push(Wt)),Wt.push([Ar,Tr])))))}}var Be,xe,ze,Fe={exports:{}},it=function(){if(ze)return Fe.exports;ze=1;var ir=i.d_(),We=function(){if(xe)return Be;xe=1;var xr=i.dY(),Ar=i.dZ().VectorTileFeature;function Tr(on,_n){this.options=_n||{},this.features=on,this.length=on.length}function nn(on,_n){this.id=typeof on.id=="number"?on.id:void 0,this.type=on.type,this.rawGeometry=on.type===1?[on.geometry]:on.geometry,this.properties=on.tags,this.extent=_n||4096}return Be=Tr,Tr.prototype.feature=function(on){return new nn(this.features[on],this.options.extent)},nn.prototype.loadGeometry=function(){var on=this.rawGeometry;this.geometry=[];for(var _n=0;_n<on.length;_n++){for(var Dn=on[_n],qn=[],$n=0;$n<Dn.length;$n++)qn.push(new xr(Dn[$n][0],Dn[$n][1]));this.geometry.push(qn)}return this.geometry},nn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var on=this.geometry,_n=1/0,Dn=-1/0,qn=1/0,$n=-1/0,Ni=0;Ni<on.length;Ni++)for(var Vi=on[Ni],Wn=0;Wn<Vi.length;Wn++){var Ki=Vi[Wn];_n=Math.min(_n,Ki.x),Dn=Math.max(Dn,Ki.x),qn=Math.min(qn,Ki.y),$n=Math.max($n,Ki.y)}return[_n,qn,Dn,$n]},nn.prototype.toGeoJSON=Ar.prototype.toGeoJSON,Be}();function qe(xr){var Ar=new ir;return function(Tr,nn){for(var on in Tr.layers)nn.writeMessage(3,ht,Tr.layers[on])}(xr,Ar),Ar.finish()}function ht(xr,Ar){var Tr;Ar.writeVarintField(15,xr.version||1),Ar.writeStringField(1,xr.name||""),Ar.writeVarintField(5,xr.extent||4096);var nn={keys:[],values:[],keycache:{},valuecache:{}};for(Tr=0;Tr<xr.length;Tr++)nn.feature=xr.feature(Tr),Ar.writeMessage(2,It,nn);var on=nn.keys;for(Tr=0;Tr<on.length;Tr++)Ar.writeStringField(3,on[Tr]);var _n=nn.values;for(Tr=0;Tr<_n.length;Tr++)Ar.writeMessage(4,pr,_n[Tr])}function It(xr,Ar){var Tr=xr.feature;Tr.id!==void 0&&Ar.writeVarintField(1,Tr.id),Ar.writeMessage(2,wt,xr),Ar.writeVarintField(3,Tr.type),Ar.writeMessage(4,Ot,Tr)}function wt(xr,Ar){var Tr=xr.feature,nn=xr.keys,on=xr.values,_n=xr.keycache,Dn=xr.valuecache;for(var qn in Tr.properties){var $n=Tr.properties[qn],Ni=_n[qn];if($n!==null){Ni===void 0&&(nn.push(qn),_n[qn]=Ni=nn.length-1),Ar.writeVarint(Ni);var Vi=typeof $n;Vi!=="string"&&Vi!=="boolean"&&Vi!=="number"&&($n=JSON.stringify($n));var Wn=Vi+":"+$n,Ki=Dn[Wn];Ki===void 0&&(on.push($n),Dn[Wn]=Ki=on.length-1),Ar.writeVarint(Ki)}}}function kt(xr,Ar){return(Ar<<3)+(7&xr)}function Wt(xr){return xr<<1^xr>>31}function Ot(xr,Ar){for(var Tr=xr.loadGeometry(),nn=xr.type,on=0,_n=0,Dn=Tr.length,qn=0;qn<Dn;qn++){var $n=Tr[qn],Ni=1;nn===1&&(Ni=$n.length),Ar.writeVarint(kt(1,Ni));for(var Vi=nn===3?$n.length-1:$n.length,Wn=0;Wn<Vi;Wn++){Wn===1&&nn!==1&&Ar.writeVarint(kt(2,Vi-1));var Ki=$n[Wn].x-on,Cs=$n[Wn].y-_n;Ar.writeVarint(Wt(Ki)),Ar.writeVarint(Wt(Cs)),on+=Ki,_n+=Cs}nn===3&&Ar.writeVarint(kt(7,1))}}function pr(xr,Ar){var Tr=typeof xr;Tr==="string"?Ar.writeStringField(1,xr):Tr==="boolean"?Ar.writeBooleanField(7,xr):Tr==="number"&&(xr%1!=0?Ar.writeDoubleField(3,xr):xr<0?Ar.writeSVarintField(6,xr):Ar.writeVarintField(5,xr))}return Fe.exports=qe,Fe.exports.fromVectorTileJs=qe,Fe.exports.fromGeojsonVt=function(xr,Ar){Ar=Ar||{};var Tr={};for(var nn in xr)Tr[nn]=new We(xr[nn].features,Ar),Tr[nn].name=nn,Tr[nn].version=Ar.version,Tr[nn].extent=Ar.extent;return qe({layers:Tr})},Fe.exports.GeoJSONWrapper=We,Fe.exports}(),ie=i.d$(it);const le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ir=>ir},fe=Math.fround||(be=new Float32Array(1),ir=>(be[0]=+ir,be[0]));var be;const He=3,Je=5,tt=6;class st{constructor(We){this.options=Object.assign(Object.create(le),We),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(We){const{log:qe,minZoom:ht,maxZoom:It}=this.options;qe&&console.time("total time");const wt=`prepare ${We.length} points`;qe&&console.time(wt),this.points=We;const kt=[];for(let Ot=0;Ot<We.length;Ot++){const pr=We[Ot];if(!pr.geometry)continue;const[xr,Ar]=pr.geometry.coordinates,Tr=fe(Ft(xr)),nn=fe(Zt(Ar));kt.push(Tr,nn,1/0,Ot,-1,1),this.options.reduce&&kt.push(0)}let Wt=this.trees[It+1]=this._createTree(kt);qe&&console.timeEnd(wt);for(let Ot=It;Ot>=ht;Ot--){const pr=+Date.now();Wt=this.trees[Ot]=this._createTree(this._cluster(Wt,Ot)),qe&&console.log("z%d: %d clusters in %dms",Ot,Wt.numItems,+Date.now()-pr)}return qe&&console.timeEnd("total time"),this}getClusters(We,qe){let ht=((We[0]+180)%360+360)%360-180;const It=Math.max(-90,Math.min(90,We[1]));let wt=We[2]===180?180:((We[2]+180)%360+360)%360-180;const kt=Math.max(-90,Math.min(90,We[3]));if(We[2]-We[0]>=360)ht=-180,wt=180;else if(ht>wt){const Ar=this.getClusters([ht,It,180,kt],qe),Tr=this.getClusters([-180,It,wt,kt],qe);return Ar.concat(Tr)}const Wt=this.trees[this._limitZoom(qe)],Ot=Wt.range(Ft(ht),Zt(kt),Ft(wt),Zt(It)),pr=Wt.data,xr=[];for(const Ar of Ot){const Tr=this.stride*Ar;xr.push(pr[Tr+Je]>1?Ct(pr,Tr,this.clusterProps):this.points[pr[Tr+He]])}return xr}getChildren(We){const qe=this._getOriginId(We),ht=this._getOriginZoom(We),It="No cluster with the specified id.",wt=this.trees[ht];if(!wt)throw new Error(It);const kt=wt.data;if(qe*this.stride>=kt.length)throw new Error(It);const Wt=this.options.radius/(this.options.extent*Math.pow(2,ht-1)),Ot=wt.within(kt[qe*this.stride],kt[qe*this.stride+1],Wt),pr=[];for(const xr of Ot){const Ar=xr*this.stride;kt[Ar+4]===We&&pr.push(kt[Ar+Je]>1?Ct(kt,Ar,this.clusterProps):this.points[kt[Ar+He]])}if(pr.length===0)throw new Error(It);return pr}getLeaves(We,qe,ht){const It=[];return this._appendLeaves(It,We,qe=qe||10,ht=ht||0,0),It}getTile(We,qe,ht){const It=this.trees[this._limitZoom(We)],wt=Math.pow(2,We),{extent:kt,radius:Wt}=this.options,Ot=Wt/kt,pr=(ht-Ot)/wt,xr=(ht+1+Ot)/wt,Ar={features:[]};return this._addTileFeatures(It.range((qe-Ot)/wt,pr,(qe+1+Ot)/wt,xr),It.data,qe,ht,wt,Ar),qe===0&&this._addTileFeatures(It.range(1-Ot/wt,pr,1,xr),It.data,wt,ht,wt,Ar),qe===wt-1&&this._addTileFeatures(It.range(0,pr,Ot/wt,xr),It.data,-1,ht,wt,Ar),Ar.features.length?Ar:null}getClusterExpansionZoom(We){let qe=this._getOriginZoom(We)-1;for(;qe<=this.options.maxZoom;){const ht=this.getChildren(We);if(qe++,ht.length!==1)break;We=ht[0].properties.cluster_id}return qe}_appendLeaves(We,qe,ht,It,wt){const kt=this.getChildren(qe);for(const Wt of kt){const Ot=Wt.properties;if(Ot&&Ot.cluster?wt+Ot.point_count<=It?wt+=Ot.point_count:wt=this._appendLeaves(We,Ot.cluster_id,ht,It,wt):wt<It?wt++:We.push(Wt),We.length===ht)break}return wt}_createTree(We){const qe=new i.by(We.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ht=0;ht<We.length;ht+=this.stride)qe.add(We[ht],We[ht+1]);return qe.finish(),qe.data=We,qe}_addTileFeatures(We,qe,ht,It,wt,kt){for(const Wt of We){const Ot=Wt*this.stride,pr=qe[Ot+Je]>1;let xr,Ar,Tr;if(pr)xr=Ue(qe,Ot,this.clusterProps),Ar=qe[Ot],Tr=qe[Ot+1];else{const _n=this.points[qe[Ot+He]];xr=_n.properties;const[Dn,qn]=_n.geometry.coordinates;Ar=Ft(Dn),Tr=Zt(qn)}const nn={type:1,geometry:[[Math.round(this.options.extent*(Ar*wt-ht)),Math.round(this.options.extent*(Tr*wt-It))]],tags:xr};let on;on=pr||this.options.generateId?qe[Ot+He]:this.points[qe[Ot+He]].id,on!==void 0&&(nn.id=on),kt.features.push(nn)}}_limitZoom(We){return Math.max(this.options.minZoom,Math.min(Math.floor(+We),this.options.maxZoom+1))}_cluster(We,qe){const{radius:ht,extent:It,reduce:wt,minPoints:kt}=this.options,Wt=ht/(It*Math.pow(2,qe)),Ot=We.data,pr=[],xr=this.stride;for(let Ar=0;Ar<Ot.length;Ar+=xr){if(Ot[Ar+2]<=qe)continue;Ot[Ar+2]=qe;const Tr=Ot[Ar],nn=Ot[Ar+1],on=We.within(Ot[Ar],Ot[Ar+1],Wt),_n=Ot[Ar+Je];let Dn=_n;for(const qn of on){const $n=qn*xr;Ot[$n+2]>qe&&(Dn+=Ot[$n+Je])}if(Dn>_n&&Dn>=kt){let qn,$n=Tr*_n,Ni=nn*_n,Vi=-1;const Wn=(Ar/xr<<5)+(qe+1)+this.points.length;for(const Ki of on){const Cs=Ki*xr;if(Ot[Cs+2]<=qe)continue;Ot[Cs+2]=qe;const ro=Ot[Cs+Je];$n+=Ot[Cs]*ro,Ni+=Ot[Cs+1]*ro,Ot[Cs+4]=Wn,wt&&(qn||(qn=this._map(Ot,Ar,!0),Vi=this.clusterProps.length,this.clusterProps.push(qn)),wt(qn,this._map(Ot,Cs)))}Ot[Ar+4]=Wn,pr.push($n/Dn,Ni/Dn,1/0,Wn,-1,Dn),wt&&pr.push(Vi)}else{for(let qn=0;qn<xr;qn++)pr.push(Ot[Ar+qn]);if(Dn>1)for(const qn of on){const $n=qn*xr;if(!(Ot[$n+2]<=qe)){Ot[$n+2]=qe;for(let Ni=0;Ni<xr;Ni++)pr.push(Ot[$n+Ni])}}}}return pr}_getOriginId(We){return We-this.points.length>>5}_getOriginZoom(We){return(We-this.points.length)%32}_map(We,qe,ht){if(We[qe+Je]>1){const kt=this.clusterProps[We[qe+tt]];return ht?Object.assign({},kt):kt}const It=this.points[We[qe+He]].properties,wt=this.options.map(It);return ht&&wt===It?Object.assign({},wt):wt}}function Ct(ir,We,qe){return{type:"Feature",id:ir[We+He],properties:Ue(ir,We,qe),geometry:{type:"Point",coordinates:[(ht=ir[We],360*(ht-.5)),fr(ir[We+1])]}};var ht}function Ue(ir,We,qe){const ht=ir[We+Je],It=ht>=1e4?`${Math.round(ht/1e3)}k`:ht>=1e3?Math.round(ht/100)/10+"k":ht,wt=ir[We+tt],kt=wt===-1?{}:Object.assign({},qe[wt]);return Object.assign(kt,{cluster:!0,cluster_id:ir[We+He],point_count:ht,point_count_abbreviated:It})}function Ft(ir){return ir/360+.5}function Zt(ir){const We=Math.sin(ir*Math.PI/180),qe=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return qe<0?0:qe>1?1:qe}function fr(ir){const We=(180-360*ir)*Math.PI/180;return 360*Math.atan(Math.exp(We))/Math.PI-90}function Ye(ir,We,qe,ht){let It=ht;const wt=We+(qe-We>>1);let kt,Wt=qe-We;const Ot=ir[We],pr=ir[We+1],xr=ir[qe],Ar=ir[qe+1];for(let Tr=We+3;Tr<qe;Tr+=3){const nn=Re(ir[Tr],ir[Tr+1],Ot,pr,xr,Ar);if(nn>It)kt=Tr,It=nn;else if(nn===It){const on=Math.abs(Tr-wt);on<Wt&&(kt=Tr,Wt=on)}}It>ht&&(kt-We>3&&Ye(ir,We,kt,ht),ir[kt+2]=It,qe-kt>3&&Ye(ir,kt,qe,ht))}function Re(ir,We,qe,ht,It,wt){let kt=It-qe,Wt=wt-ht;if(kt!==0||Wt!==0){const Ot=((ir-qe)*kt+(We-ht)*Wt)/(kt*kt+Wt*Wt);Ot>1?(qe=It,ht=wt):Ot>0&&(qe+=kt*Ot,ht+=Wt*Ot)}return kt=ir-qe,Wt=We-ht,kt*kt+Wt*Wt}function hr(ir,We,qe,ht){const It={id:ir??null,type:We,geometry:qe,tags:ht,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(We==="Point"||We==="MultiPoint"||We==="LineString")Ut(It,qe);else if(We==="Polygon")Ut(It,qe[0]);else if(We==="MultiLineString")for(const wt of qe)Ut(It,wt);else if(We==="MultiPolygon")for(const wt of qe)Ut(It,wt[0]);return It}function Ut(ir,We){for(let qe=0;qe<We.length;qe+=3)ir.minX=Math.min(ir.minX,We[qe]),ir.minY=Math.min(ir.minY,We[qe+1]),ir.maxX=Math.max(ir.maxX,We[qe]),ir.maxY=Math.max(ir.maxY,We[qe+1])}function vt(ir,We,qe,ht){if(!We.geometry)return;const It=We.geometry.coordinates;if(It&&It.length===0)return;const wt=We.geometry.type,kt=Math.pow(qe.tolerance/((1<<qe.maxZoom)*qe.extent),2);let Wt=[],Ot=We.id;if(qe.promoteId?Ot=We.properties[qe.promoteId]:qe.generateId&&(Ot=ht||0),wt==="Point")Yt(It,Wt);else if(wt==="MultiPoint")for(const pr of It)Yt(pr,Wt);else if(wt==="LineString")ar(It,Wt,kt,!1);else if(wt==="MultiLineString"){if(qe.lineMetrics){for(const pr of It)Wt=[],ar(pr,Wt,kt,!1),ir.push(hr(Ot,"LineString",Wt,We.properties));return}nr(It,Wt,kt,!1)}else if(wt==="Polygon")nr(It,Wt,kt,!0);else{if(wt!=="MultiPolygon"){if(wt==="GeometryCollection"){for(const pr of We.geometry.geometries)vt(ir,{id:Ot,geometry:pr,properties:We.properties},qe,ht);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const pr of It){const xr=[];nr(pr,xr,kt,!0),Wt.push(xr)}}ir.push(hr(Ot,wt,Wt,We.properties))}function Yt(ir,We){We.push(Fr(ir[0]),Gr(ir[1]),0)}function ar(ir,We,qe,ht){let It,wt,kt=0;for(let Ot=0;Ot<ir.length;Ot++){const pr=Fr(ir[Ot][0]),xr=Gr(ir[Ot][1]);We.push(pr,xr,0),Ot>0&&(kt+=ht?(It*xr-pr*wt)/2:Math.sqrt(Math.pow(pr-It,2)+Math.pow(xr-wt,2))),It=pr,wt=xr}const Wt=We.length-3;We[2]=1,Ye(We,0,Wt,qe),We[Wt+2]=1,We.size=Math.abs(kt),We.start=0,We.end=We.size}function nr(ir,We,qe,ht){for(let It=0;It<ir.length;It++){const wt=[];ar(ir[It],wt,qe,ht),We.push(wt)}}function Fr(ir){return ir/360+.5}function Gr(ir){const We=Math.sin(ir*Math.PI/180),qe=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return qe<0?0:qe>1?1:qe}function Ir(ir,We,qe,ht,It,wt,kt,Wt){if(ht/=We,wt>=(qe/=We)&&kt<ht)return ir;if(kt<qe||wt>=ht)return null;const Ot=[];for(const pr of ir){const xr=pr.geometry;let Ar=pr.type;const Tr=It===0?pr.minX:pr.minY,nn=It===0?pr.maxX:pr.maxY;if(Tr>=qe&&nn<ht){Ot.push(pr);continue}if(nn<qe||Tr>=ht)continue;let on=[];if(Ar==="Point"||Ar==="MultiPoint")cn(xr,on,qe,ht,It);else if(Ar==="LineString")Sn(xr,on,qe,ht,It,!1,Wt.lineMetrics);else if(Ar==="MultiLineString")an(xr,on,qe,ht,It,!1);else if(Ar==="Polygon")an(xr,on,qe,ht,It,!0);else if(Ar==="MultiPolygon")for(const _n of xr){const Dn=[];an(_n,Dn,qe,ht,It,!0),Dn.length&&on.push(Dn)}if(on.length){if(Wt.lineMetrics&&Ar==="LineString"){for(const _n of on)Ot.push(hr(pr.id,Ar,_n,pr.tags));continue}Ar!=="LineString"&&Ar!=="MultiLineString"||(on.length===1?(Ar="LineString",on=on[0]):Ar="MultiLineString"),Ar!=="Point"&&Ar!=="MultiPoint"||(Ar=on.length===3?"Point":"MultiPoint"),Ot.push(hr(pr.id,Ar,on,pr.tags))}}return Ot.length?Ot:null}function cn(ir,We,qe,ht,It){for(let wt=0;wt<ir.length;wt+=3){const kt=ir[wt+It];kt>=qe&&kt<=ht&&lr(We,ir[wt],ir[wt+1],ir[wt+2])}}function Sn(ir,We,qe,ht,It,wt,kt){let Wt=En(ir);const Ot=It===0?Xt:qr;let pr,xr,Ar=ir.start;for(let Dn=0;Dn<ir.length-3;Dn+=3){const qn=ir[Dn],$n=ir[Dn+1],Ni=ir[Dn+2],Vi=ir[Dn+3],Wn=ir[Dn+4],Ki=It===0?qn:$n,Cs=It===0?Vi:Wn;let ro=!1;kt&&(pr=Math.sqrt(Math.pow(qn-Vi,2)+Math.pow($n-Wn,2))),Ki<qe?Cs>qe&&(xr=Ot(Wt,qn,$n,Vi,Wn,qe),kt&&(Wt.start=Ar+pr*xr)):Ki>ht?Cs<ht&&(xr=Ot(Wt,qn,$n,Vi,Wn,ht),kt&&(Wt.start=Ar+pr*xr)):lr(Wt,qn,$n,Ni),Cs<qe&&Ki>=qe&&(xr=Ot(Wt,qn,$n,Vi,Wn,qe),ro=!0),Cs>ht&&Ki<=ht&&(xr=Ot(Wt,qn,$n,Vi,Wn,ht),ro=!0),!wt&&ro&&(kt&&(Wt.end=Ar+pr*xr),We.push(Wt),Wt=En(ir)),kt&&(Ar+=pr)}let Tr=ir.length-3;const nn=ir[Tr],on=ir[Tr+1],_n=It===0?nn:on;_n>=qe&&_n<=ht&&lr(Wt,nn,on,ir[Tr+2]),Tr=Wt.length-3,wt&&Tr>=3&&(Wt[Tr]!==Wt[0]||Wt[Tr+1]!==Wt[1])&&lr(Wt,Wt[0],Wt[1],Wt[2]),Wt.length&&We.push(Wt)}function En(ir){const We=[];return We.size=ir.size,We.start=ir.start,We.end=ir.end,We}function an(ir,We,qe,ht,It,wt){for(const kt of ir)Sn(kt,We,qe,ht,It,wt,!1)}function lr(ir,We,qe,ht){ir.push(We,qe,ht)}function Xt(ir,We,qe,ht,It,wt){const kt=(wt-We)/(ht-We);return lr(ir,wt,qe+(It-qe)*kt,1),kt}function qr(ir,We,qe,ht,It,wt){const kt=(wt-qe)/(It-qe);return lr(ir,We+(ht-We)*kt,wt,1),kt}function Kr(ir,We){const qe=[];for(let ht=0;ht<ir.length;ht++){const It=ir[ht],wt=It.type;let kt;if(wt==="Point"||wt==="MultiPoint"||wt==="LineString")kt=kn(It.geometry,We);else if(wt==="MultiLineString"||wt==="Polygon"){kt=[];for(const Wt of It.geometry)kt.push(kn(Wt,We))}else if(wt==="MultiPolygon"){kt=[];for(const Wt of It.geometry){const Ot=[];for(const pr of Wt)Ot.push(kn(pr,We));kt.push(Ot)}}qe.push(hr(It.id,wt,kt,It.tags))}return qe}function kn(ir,We){const qe=[];qe.size=ir.size,ir.start!==void 0&&(qe.start=ir.start,qe.end=ir.end);for(let ht=0;ht<ir.length;ht+=3)qe.push(ir[ht]+We,ir[ht+1],ir[ht+2]);return qe}function mn(ir,We){if(ir.transformed)return ir;const qe=1<<ir.z,ht=ir.x,It=ir.y;for(const wt of ir.features){const kt=wt.geometry,Wt=wt.type;if(wt.geometry=[],Wt===1)for(let Ot=0;Ot<kt.length;Ot+=2)wt.geometry.push(Un(kt[Ot],kt[Ot+1],We,qe,ht,It));else for(let Ot=0;Ot<kt.length;Ot++){const pr=[];for(let xr=0;xr<kt[Ot].length;xr+=2)pr.push(Un(kt[Ot][xr],kt[Ot][xr+1],We,qe,ht,It));wt.geometry.push(pr)}}return ir.transformed=!0,ir}function Un(ir,We,qe,ht,It,wt){return[Math.round(qe*(ir*ht-It)),Math.round(qe*(We*ht-wt))]}function Hi(ir,We,qe,ht,It){const wt=We===It.maxZoom?0:It.tolerance/((1<<We)*It.extent),kt={features:[],numPoints:0,numSimplified:0,numFeatures:ir.length,source:null,x:qe,y:ht,z:We,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Wt of ir)Gn(kt,Wt,wt,It);return kt}function Gn(ir,We,qe,ht){const It=We.geometry,wt=We.type,kt=[];if(ir.minX=Math.min(ir.minX,We.minX),ir.minY=Math.min(ir.minY,We.minY),ir.maxX=Math.max(ir.maxX,We.maxX),ir.maxY=Math.max(ir.maxY,We.maxY),wt==="Point"||wt==="MultiPoint")for(let Wt=0;Wt<It.length;Wt+=3)kt.push(It[Wt],It[Wt+1]),ir.numPoints++,ir.numSimplified++;else if(wt==="LineString")ti(kt,It,ir,qe,!1,!1);else if(wt==="MultiLineString"||wt==="Polygon")for(let Wt=0;Wt<It.length;Wt++)ti(kt,It[Wt],ir,qe,wt==="Polygon",Wt===0);else if(wt==="MultiPolygon")for(let Wt=0;Wt<It.length;Wt++){const Ot=It[Wt];for(let pr=0;pr<Ot.length;pr++)ti(kt,Ot[pr],ir,qe,!0,pr===0)}if(kt.length){let Wt=We.tags||null;if(wt==="LineString"&&ht.lineMetrics){Wt={};for(const pr in We.tags)Wt[pr]=We.tags[pr];Wt.mapbox_clip_start=It.start/It.size,Wt.mapbox_clip_end=It.end/It.size}const Ot={geometry:kt,type:wt==="Polygon"||wt==="MultiPolygon"?3:wt==="LineString"||wt==="MultiLineString"?2:1,tags:Wt};We.id!==null&&(Ot.id=We.id),ir.features.push(Ot)}}function ti(ir,We,qe,ht,It,wt){const kt=ht*ht;if(ht>0&&We.size<(It?kt:ht))return void(qe.numPoints+=We.length/3);const Wt=[];for(let Ot=0;Ot<We.length;Ot+=3)(ht===0||We[Ot+2]>kt)&&(qe.numSimplified++,Wt.push(We[Ot],We[Ot+1])),qe.numPoints++;It&&function(Ot,pr){let xr=0;for(let Ar=0,Tr=Ot.length,nn=Tr-2;Ar<Tr;nn=Ar,Ar+=2)xr+=(Ot[Ar]-Ot[nn])*(Ot[Ar+1]+Ot[nn+1]);if(xr>0===pr)for(let Ar=0,Tr=Ot.length;Ar<Tr/2;Ar+=2){const nn=Ot[Ar],on=Ot[Ar+1];Ot[Ar]=Ot[Tr-2-Ar],Ot[Ar+1]=Ot[Tr-1-Ar],Ot[Tr-2-Ar]=nn,Ot[Tr-1-Ar]=on}}(Wt,wt),ir.push(Wt)}const si={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class xi{constructor(We,qe){const ht=(qe=this.options=function(wt,kt){for(const Wt in kt)wt[Wt]=kt[Wt];return wt}(Object.create(si),qe)).debug;if(ht&&console.time("preprocess data"),qe.maxZoom<0||qe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(qe.promoteId&&qe.generateId)throw new Error("promoteId and generateId cannot be used together.");let It=function(wt,kt){const Wt=[];if(wt.type==="FeatureCollection")for(let Ot=0;Ot<wt.features.length;Ot++)vt(Wt,wt.features[Ot],kt,Ot);else vt(Wt,wt.type==="Feature"?wt:{geometry:wt},kt);return Wt}(We,qe);this.tiles={},this.tileCoords=[],ht&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",qe.indexMaxZoom,qe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),It=function(wt,kt){const Wt=kt.buffer/kt.extent;let Ot=wt;const pr=Ir(wt,1,-1-Wt,Wt,0,-1,2,kt),xr=Ir(wt,1,1-Wt,2+Wt,0,-1,2,kt);return(pr||xr)&&(Ot=Ir(wt,1,-Wt,1+Wt,0,-1,2,kt)||[],pr&&(Ot=Kr(pr,1).concat(Ot)),xr&&(Ot=Ot.concat(Kr(xr,-1)))),Ot}(It,qe),It.length&&this.splitTile(It,0,0,0),ht&&(It.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(We,qe,ht,It,wt,kt,Wt){const Ot=[We,qe,ht,It],pr=this.options,xr=pr.debug;for(;Ot.length;){It=Ot.pop(),ht=Ot.pop(),qe=Ot.pop(),We=Ot.pop();const Ar=1<<qe,Tr=Bn(qe,ht,It);let nn=this.tiles[Tr];if(!nn&&(xr>1&&console.time("creation"),nn=this.tiles[Tr]=Hi(We,qe,ht,It,pr),this.tileCoords.push({z:qe,x:ht,y:It}),xr)){xr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",qe,ht,It,nn.numFeatures,nn.numPoints,nn.numSimplified),console.timeEnd("creation"));const ro=`z${qe}`;this.stats[ro]=(this.stats[ro]||0)+1,this.total++}if(nn.source=We,wt==null){if(qe===pr.indexMaxZoom||nn.numPoints<=pr.indexMaxPoints)continue}else{if(qe===pr.maxZoom||qe===wt)continue;if(wt!=null){const ro=wt-qe;if(ht!==kt>>ro||It!==Wt>>ro)continue}}if(nn.source=null,We.length===0)continue;xr>1&&console.time("clipping");const on=.5*pr.buffer/pr.extent,_n=.5-on,Dn=.5+on,qn=1+on;let $n=null,Ni=null,Vi=null,Wn=null,Ki=Ir(We,Ar,ht-on,ht+Dn,0,nn.minX,nn.maxX,pr),Cs=Ir(We,Ar,ht+_n,ht+qn,0,nn.minX,nn.maxX,pr);We=null,Ki&&($n=Ir(Ki,Ar,It-on,It+Dn,1,nn.minY,nn.maxY,pr),Ni=Ir(Ki,Ar,It+_n,It+qn,1,nn.minY,nn.maxY,pr),Ki=null),Cs&&(Vi=Ir(Cs,Ar,It-on,It+Dn,1,nn.minY,nn.maxY,pr),Wn=Ir(Cs,Ar,It+_n,It+qn,1,nn.minY,nn.maxY,pr),Cs=null),xr>1&&console.timeEnd("clipping"),Ot.push($n||[],qe+1,2*ht,2*It),Ot.push(Ni||[],qe+1,2*ht,2*It+1),Ot.push(Vi||[],qe+1,2*ht+1,2*It),Ot.push(Wn||[],qe+1,2*ht+1,2*It+1)}}getTile(We,qe,ht){We=+We,qe=+qe,ht=+ht;const It=this.options,{extent:wt,debug:kt}=It;if(We<0||We>24)return null;const Wt=1<<We,Ot=Bn(We,qe=qe+Wt&Wt-1,ht);if(this.tiles[Ot])return mn(this.tiles[Ot],wt);kt>1&&console.log("drilling down to z%d-%d-%d",We,qe,ht);let pr,xr=We,Ar=qe,Tr=ht;for(;!pr&&xr>0;)xr--,Ar>>=1,Tr>>=1,pr=this.tiles[Bn(xr,Ar,Tr)];return pr&&pr.source?(kt>1&&(console.log("found parent tile z%d-%d-%d",xr,Ar,Tr),console.time("drilling down")),this.splitTile(pr.source,xr,Ar,Tr,We,qe,ht),kt>1&&console.timeEnd("drilling down"),this.tiles[Ot]?mn(this.tiles[Ot],wt):null):null}}function Bn(ir,We,qe){return 32*((1<<ir)*qe+We)+ir}function Zr(ir,We){const qe=ir.tileID.canonical;if(!this._geoJSONIndex)return void We(null,null);const ht=this._geoJSONIndex.getTile(qe.z,qe.x,qe.y);if(!ht)return void We(null,null);const It=new ue(ht.features);let wt=ie(It);wt.byteOffset===0&&wt.byteLength===wt.buffer.byteLength||(wt=new Uint8Array(wt)),We(null,{vectorTile:It,rawData:wt.buffer})}class Nr extends N{constructor(We,qe,ht,It,wt,kt){super(We,qe,ht,It,Zr,kt),wt&&(this.loadGeoJSON=wt),this._dynamicIndex=new ce}loadData(We,qe){const ht=We&&We.request,It=ht&&ht.collectResourceTiming;this.loadGeoJSON(We,(wt,kt)=>{if(wt||!kt)return qe(wt);if(typeof kt!="object")return qe(new Error(`Input data given to '${We.source}' is not a valid GeoJSON object.`));{try{if(We.filter){const Ot=i.M(We.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ot.result==="error")throw new Error(Ot.value.map(pr=>`${pr.key}: ${pr.message}`).join(", "));kt.features=kt.features.filter(pr=>Ot.value.evaluate({zoom:0},pr))}We.dynamic?(kt.type==="Feature"&&(kt={type:"FeatureCollection",features:[kt]}),We.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(kt.features,this.loaded),We.cluster&&(kt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=We.cluster?new st(function({superclusterOptions:Ot,clusterProperties:pr}){if(!pr||!Ot)return Ot;const xr={},Ar={},Tr={accumulated:null,zoom:0},nn={properties:null},on=Object.keys(pr);for(const _n of on){const[Dn,qn]=pr[_n],$n=i.M(qn),Ni=i.M(typeof Dn=="string"?[Dn,["accumulated"],["get",_n]]:Dn);xr[_n]=$n.value,Ar[_n]=Ni.value}return Ot.map=_n=>{nn.properties=_n;const Dn={};for(const qn of on)Dn[qn]=xr[qn].evaluate(Tr,nn);return Dn},Ot.reduce=(_n,Dn)=>{nn.properties=Dn;for(const qn of on)Tr.accumulated=_n[qn],_n[qn]=Ar[qn].evaluate(Tr,nn)},Ot}(We)).load(kt.features):We.dynamic?this._dynamicIndex:function(Ot,pr){return new xi(Ot,pr)}(kt,We.geojsonVtOptions)}catch(Ot){return qe(Ot)}const Wt={};if(It){const Ot=A(ht);Ot&&(Wt.resourceTiming={},Wt.resourceTiming[We.source]=JSON.parse(JSON.stringify(Ot)))}qe(null,Wt)}})}reloadTile(We,qe){const ht=this.loaded;return ht&&ht[We.uid]?We.partial?qe(null,void 0):super.reloadTile(We,qe):this.loadTile(We,qe)}loadGeoJSON(We,qe){if(We.request)i.n(We.request,qe);else{if(typeof We.data!="string")return qe(new Error(`Input data given to '${We.source}' is not a valid GeoJSON object.`));try{return qe(null,JSON.parse(We.data))}catch{return qe(new Error(`Input data given to '${We.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(We,qe){try{qe(null,this._geoJSONIndex.getClusterExpansionZoom(We.clusterId))}catch(ht){qe(ht)}}getClusterChildren(We,qe){try{qe(null,this._geoJSONIndex.getChildren(We.clusterId))}catch(ht){qe(ht)}}getClusterLeaves(We,qe){try{qe(null,this._geoJSONIndex.getLeaves(We.clusterId,We.limit,We.offset))}catch(ht){qe(ht)}}}class un{constructor(We,qe){this.tileID=new i.aA(We.tileID.overscaledZ,We.tileID.wrap,We.tileID.canonical.z,We.tileID.canonical.x,We.tileID.canonical.y),this.tileZoom=We.tileZoom,this.uid=We.uid,this.zoom=We.zoom,this.canonical=We.tileID.canonical,this.pixelRatio=We.pixelRatio,this.tileSize=We.tileSize,this.source=We.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=We.projection,this.brightness=qe}parse(We,qe,ht,It){this.status="parsing";const wt=new i.aA(ht.tileID.overscaledZ,ht.tileID.wrap,ht.tileID.canonical.z,ht.tileID.canonical.x,ht.tileID.canonical.y),kt={},Wt=qe.familiesBySource[ht.source],Ot=new i.dR(wt,ht.promoteId);return Ot.bucketLayerIDs=[],Ot.is3DTile=!0,i.e0(We).then(pr=>{if(!pr)return It(new Error("Could not parse tile"));const xr=i.e1(pr,1/i.c8(ht.tileID.canonical)),Ar=pr.json.extensionsUsed&&pr.json.extensionsUsed.includes("MAPBOX_mesh_features")||pr.json.asset.extras&&pr.json.asset.extras.MAPBOX_mesh_features,Tr=pr.json.extensionsUsed&&pr.json.extensionsUsed.includes("EXT_meshopt_compression"),nn=new i.a3(this.zoom,{brightness:this.brightness});for(const on in Wt)for(const _n of Wt[on]){const Dn=_n[0];Ot.bucketLayerIDs.push(_n.map($n=>$n.id)),Dn.recalculate(nn,[]);const qn=new i.e2(xr,wt,Ar,Tr,this.brightness,Ot);Ar||(qn.needsUpload=!0),kt[Dn.fqid]=qn,qn.evaluate(Dn)}this.status="done",It(null,{buckets:kt,featureIndex:Ot})}).catch(pr=>It(new Error(pr.message)))}}class ri{constructor(We,qe,ht,It,wt,kt){this.actor=We,this.layerIndex=qe,this.brightness=kt,this.loading={},this.loaded={}}loadTile(We,qe){const ht=We.uid,It=this.loading[ht]=new un(We,this.brightness);i.bc(We.request,(wt,kt)=>{const Wt=!this.loading[ht];return delete this.loading[ht],Wt||wt?(It.status="done",Wt||(this.loaded[ht]=It),qe(wt)):kt&&kt.byteLength!==0?void It.parse(kt,this.layerIndex,We,(Ot,pr)=>{It.status="done",this.loaded=this.loaded||{},this.loaded[ht]=It,Ot||!pr?qe(Ot):qe(null,pr)}):(It.status="done",this.loaded[ht]=It,qe())})}reloadTile(We,qe){const ht=this.loaded,It=We.uid;if(ht&&ht[It]){const wt=ht[It];wt.projection=We.projection,wt.brightness=We.brightness;const kt=(Wt,Ot)=>{wt.reloadCallback&&(delete wt.reloadCallback,this.loadTile(We,qe)),qe(Wt,Ot)};wt.status==="parsing"?wt.reloadCallback=kt:wt.status==="done"&&this.loadTile(We,qe)}}abortTile(We,qe){const ht=We.uid;this.loading[ht]&&delete this.loading[ht],qe()}removeTile(We,qe){const ht=this.loaded,It=We.uid;ht&&ht[It]&&delete ht[It],qe()}}class Hn{constructor(We){this.self=We,this.actor=new i.e3(We,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=i.bL({name:"mercator"}),this.workerSourceTypes={vector:N,geojson:Nr,"batched-model":ri},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(qe,ht)=>{if(this.workerSourceTypes[qe])throw new Error(`Worker source with name "${qe}" already registered.`);this.workerSourceTypes[qe]=ht},this.self.registerRTLTextPlugin=qe=>{if(i.e4.isParsed())throw new Error("RTL text plugin already registered.");i.e4.applyArabicShaping=qe.applyArabicShaping,i.e4.processBidirectionalText=qe.processBidirectionalText,i.e4.processStyledBidirectionalText=qe.processStyledBidirectionalText}}clearCaches(We,qe,ht){delete this.layerIndexes[We],delete this.availableImages[We],delete this.workerSources[We],delete this.demWorkerSources[We],delete this.rasterArrayWorkerSource,ht()}checkIfReady(We,qe,ht){ht()}setReferrer(We,qe){this.referrer=qe}spriteLoaded(We,{scope:qe,isLoaded:ht}){if(this.isSpriteLoaded[We]||(this.isSpriteLoaded[We]={}),this.isSpriteLoaded[We][qe]=ht,this.workerSources[We]&&this.workerSources[We][qe])for(const It in this.workerSources[We][qe]){const wt=this.workerSources[We][qe][It];for(const kt in wt){const Wt=wt[kt];Wt instanceof N&&(Wt.isSpriteLoaded=ht,Wt.fire(new i.x("isSpriteLoaded")))}}}setImages(We,{scope:qe,images:ht},It){if(this.availableImages[We]||(this.availableImages[We]={}),this.availableImages[We][qe]=ht,this.workerSources[We]&&this.workerSources[We][qe]){for(const wt in this.workerSources[We][qe]){const kt=this.workerSources[We][qe][wt];for(const Wt in kt)kt[Wt].availableImages=ht}It()}else It()}setProjection(We,qe){this.projections[We]=i.bL(qe)}setBrightness(We,qe,ht){this.brightness=qe,ht()}setLayers(We,qe,ht){this.getLayerIndex(We,qe.scope).replace(qe.layers,qe.options),ht()}updateLayers(We,qe,ht){this.getLayerIndex(We,qe.scope).update(qe.layers,qe.removedIds,qe.options),ht()}loadTile(We,qe,ht){qe.projection=this.projections[We]||this.defaultProjection,this.getWorkerSource(We,qe.type,qe.source,qe.scope).loadTile(qe,ht)}loadDEMTile(We,qe,ht){this.getDEMWorkerSource(We,qe.source,qe.scope).loadTile(qe,ht)}decodeRasterArray(We,qe,ht){this.getRasterArrayWorkerSource().decodeRasterArray(qe,ht)}reloadTile(We,qe,ht){qe.projection=this.projections[We]||this.defaultProjection,this.getWorkerSource(We,qe.type,qe.source,qe.scope).reloadTile(qe,ht)}abortTile(We,qe,ht){this.getWorkerSource(We,qe.type,qe.source,qe.scope).abortTile(qe,ht)}removeTile(We,qe,ht){this.getWorkerSource(We,qe.type,qe.source,qe.scope).removeTile(qe,ht)}removeSource(We,qe,ht){if(!(this.workerSources[We]&&this.workerSources[We][qe.scope]&&this.workerSources[We][qe.scope][qe.type]&&this.workerSources[We][qe.scope][qe.type][qe.source]))return;const It=this.workerSources[We][qe.scope][qe.type][qe.source];delete this.workerSources[We][qe.scope][qe.type][qe.source],It.removeSource!==void 0?It.removeSource(qe,ht):ht()}loadWorkerSource(We,qe,ht){try{this.self.importScripts(qe.url),ht()}catch(It){ht(It.toString())}}syncRTLPluginState(We,qe,ht){try{i.e4.setState(qe);const It=i.e4.getPluginURL();if(i.e4.isLoaded()&&!i.e4.isParsed()&&It!=null){this.self.importScripts(It);const wt=i.e4.isParsed();ht(wt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${It}`),wt)}}catch(It){ht(It.toString())}}setDracoUrl(We,qe){this.dracoUrl=qe}getAvailableImages(We,qe){this.availableImages[We]||(this.availableImages[We]={});let ht=this.availableImages[We][qe];return ht||(ht=[]),ht}getLayerIndex(We,qe){this.layerIndexes[We]||(this.layerIndexes[We]={});let ht=this.layerIndexes[We][qe];return ht||(ht=this.layerIndexes[We][qe]=new B,ht.scope=qe),ht}getWorkerSource(We,qe,ht,It){return this.workerSources[We]||(this.workerSources[We]={}),this.workerSources[We][It]||(this.workerSources[We][It]={}),this.workerSources[We][It][qe]||(this.workerSources[We][It][qe]={}),this.isSpriteLoaded[We]||(this.isSpriteLoaded[We]={}),this.workerSources[We][It][qe][ht]||(this.workerSources[We][It][qe][ht]=new this.workerSourceTypes[qe]({send:(wt,kt,Wt,Ot,pr,xr)=>{this.actor.send(wt,kt,Wt,We,pr,xr)},scheduler:this.actor.scheduler},this.getLayerIndex(We,It),this.getAvailableImages(We,It),this.isSpriteLoaded[We][It],void 0,this.brightness)),this.workerSources[We][It][qe][ht]}getDEMWorkerSource(We,qe,ht){return this.demWorkerSources[We]||(this.demWorkerSources[We]={}),this.demWorkerSources[We][ht]||(this.demWorkerSources[We][ht]={}),this.demWorkerSources[We][ht][qe]||(this.demWorkerSources[We][ht][qe]=new U),this.demWorkerSources[We][ht][qe]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new $),this.rasterArrayWorkerSource}enforceCacheSizeLimit(We,qe){i.e5(qe)}getWorkerPerformanceMetrics(We,qe,ht){ht(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Hn(self)),Hn}),c(["./shared"],function(i){var A="3.7.0";const g={create:"create",load:"load",fullLoad:"fullLoad"},C={mark(v){performance.mark(v)},measure(v,l,d){performance.measure(v,l,d)}};function B(v){const l=v.name.split("?")[0];return i.a(l)&&l.includes("mapbox-gl.js")?"javascript":i.a(l)&&l.includes("mapbox-gl.css")?"css":i.b(l)?"fontRange":i.c(l)?"sprite":i.i(l)?"style":i.d(l)?"tilejson":"other"}var S,P={},j=function(){if(S)return P;function v(x){return!l(x)}function l(x){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var I,M,q=new Blob([""],{type:"text/javascript"}),X=URL.createObjectURL(q);try{M=new Worker(X),I=!0}catch{I=!1}return M&&M.terminate(),URL.revokeObjectURL(X),I}()?function(){var I=document.createElement("canvas");I.width=I.height=1;var M=I.getContext("2d");if(!M)return!1;var q=M.getImageData(0,0,1,1);return q&&q.width===I.width}()?(d[E=x&&x.failIfMajorPerformanceCaveat]===void 0&&(d[E]=function(I){var M,q=function(X){var ne=document.createElement("canvas"),se=Object.create(v.webGLContextAttributes);return se.failIfMajorPerformanceCaveat=X,ne.getContext("webgl2",se)}(I);if(!q)return!1;try{M=q.createShader(q.VERTEX_SHADER)}catch{return!1}return!(!M||q.isContextLost())&&(q.shaderSource(M,"void main() {}"),q.compileShader(M),q.getShaderParameter(M,q.COMPILE_STATUS)===!0)}(E)),d[E]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var E}S=1,P.supported=v,P.notSupportedReason=l;var d={};return v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},P}();function R(v,l,d){const x=document.createElement(v);return l!=null&&(x.className=l),d&&d.appendChild(x),x}function N(v,l,d){const x=document.createElementNS("http://www.w3.org/2000/svg",v);for(const E of Object.keys(l))x.setAttributeNS(null,E,String(l[E]));return d&&d.appendChild(x),x}const U=typeof document<"u"?document.documentElement&&document.documentElement.style:null,$=U&&U.userSelect!==void 0?"userSelect":"WebkitUserSelect";let J;function te(){U&&$&&(J=U[$],U[$]="none")}function ue(){U&&$&&(U[$]=J)}function oe(v){v.preventDefault(),v.stopPropagation(),window.removeEventListener("click",oe,!0)}function K(){window.addEventListener("click",oe,!0),window.setTimeout(()=>{window.removeEventListener("click",oe,!0)},0)}function ce(v,l){const d=v.getBoundingClientRect();return Y(v,d,l)}function me(v,l){const d=v.getBoundingClientRect(),x=[];for(let E=0;E<l.length;E++)x.push(Y(v,d,l[E]));return x}function Z(v){return window.InstallTrigger!==void 0&&v.button===2&&v.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function Y(v,l,d){const x=v.offsetWidth===l.width?1:v.offsetWidth/l.width;return new i.P((d.clientX-l.left)*x,(d.clientY-l.top)*x)}const Le="01",_e="NO_ACCESS_TOKEN";class Qe{constructor(l,d,x){this._transformRequestFn=l,this._customAccessToken=d,this._silenceAuthErrors=!!x,this._createSkuToken()}_createSkuToken(){const l=function(){let d="";for(let x=0;x<10;x++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Le,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeStyleURL(l,d){if(!i.f(l))return l;const x=Be(l);return x.params.push(`sdk=js-${A}`),x.path=`/styles/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||d)}normalizeGlyphsURL(l,d){if(!i.f(l))return l;const x=Be(l);return x.path=`/fonts/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||d)}normalizeModelURL(l,d){if(!i.f(l))return l;const x=Be(l);return x.path=`/models/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||d)}normalizeSourceURL(l,d,x,E){if(!i.f(l))return l;const I=Be(l);return I.path=`/v4/${I.authority}.json`,I.params.push("secure"),x&&I.params.push(`language=${x}`),E&&I.params.push(`worldview=${E}`),this._makeAPIURL(I,this._customAccessToken||d)}normalizeSpriteURL(l,d,x,E){const I=Be(l);return i.f(l)?(I.path=`/styles/v1${I.path}/sprite${d}${x}`,this._makeAPIURL(I,this._customAccessToken||E)):(I.path+=`${d}${x}`,xe(I))}normalizeTileURL(l,d,x){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!i.f(l))return l;const E=Be(l);E.path=E.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||x&&E.authority!=="raster"&&x===512?"@2x":""}${i.m.supported?".webp":"$1"}`),E.authority==="raster"?E.path=`/${i.e.RASTER_URL_PREFIX}${E.path}`:E.authority==="rasterarrays"?E.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${E.path}`:E.authority==="3dtiles"?E.path=`/${i.e.TILES3D_URL_PREFIX}${E.path}`:(E.path=E.path.replace(/^.+\/v4\//,"/"),E.path=`/${i.e.TILE_URL_VERSION}${E.path}`);const I=this._customAccessToken||function(M){for(const q of M){const X=q.match(/^access_token=(.*)$/);if(X)return X[1]}return null}(E.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&I&&this._skuToken&&E.params.push(`sku=${this._skuToken}`),this._makeAPIURL(E,I)}canonicalizeTileURL(l,d){const x=Be(l);if(!x.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!x.path.match(/\.[\w]+$/))return l;let E="mapbox://";x.path.match(/^\/raster\/v1\//)?E+=`raster/${x.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:x.path.match(/^\/rasterarrays\/v1\//)?E+=`rasterarrays/${x.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:E+=`tiles/${x.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let I=x.params;return d&&(I=I.filter(M=>!M.match(/^access_token=/))),I.length&&(E+=`?${I.join("&")}`),E}canonicalizeTileset(l,d){const x=!!d&&i.f(d),E=[];for(const I of l.tiles||[])i.h(I)?E.push(this.canonicalizeTileURL(I,x)):E.push(I);return E}_makeAPIURL(l,d){const x="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",E=Be(i.e.API_URL);if(l.protocol=E.protocol,l.authority=E.authority,l.protocol==="http"){const I=l.params.indexOf("secure");I>=0&&l.params.splice(I,1)}if(E.path!=="/"&&(l.path=`${E.path}${l.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return xe(l);if(d=d||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${x}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${x}`)}return l.params=l.params.filter(I=>I.indexOf("access_token")===-1),l.params.push(`access_token=${d||""}`),xe(l)}}const De=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Be(v){const l=v.match(De);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function xe(v){const l=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${l}`}const ze="mapbox.eventData";function Fe(v){if(!v)return null;const l=v.split(".");if(!l||l.length!==3)return null;try{return JSON.parse(i.j(l[1]))}catch{return null}}class it{constructor(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const d=Fe(i.e.ACCESS_TOKEN);let x="";return x=d&&d.u?i.k(d.u):i.e.ACCESS_TOKEN||"",l?`${ze}.${l}:${x}`:`${ze}:${x}`}fetchEventData(){const l=i.s("localStorage"),d=this.getStorageKey(),x=this.getStorageKey("uuid");if(l)try{const E=localStorage.getItem(d);E&&(this.eventData=JSON.parse(E));const I=localStorage.getItem(x);I&&(this.anonId=I)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const l=i.s("localStorage"),d=this.getStorageKey(),x=this.getStorageKey("uuid"),E=this.anonId;if(l&&E)try{localStorage.setItem(x,E),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,d,x,E){if(!i.e.EVENTS_URL)return;const I=Be(i.e.EVENTS_URL);I.params.push(`access_token=${E||i.e.ACCESS_TOKEN||""}`);const M={event:this.type,created:new Date(l).toISOString()},q=d?i.l(M,d):M,X={url:xe(I),headers:{"Content-Type":"text/plain"},body:JSON.stringify([q])};this.pendingRequest=i.p(X,ne=>{this.pendingRequest=null,x(ne),this.saveEventData(),this.processRequests(E)})}queueRequest(l,d){this.queue.push(l),this.processRequests(d)}}const ie=new class extends it{constructor(v){super("appUserTurnstile"),this._customAccessToken=v}postTurnstileEvent(v,l){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(v)&&v.some(d=>i.f(d)||i.h(d))&&this.queueRequest(Date.now(),l)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=Fe(i.e.ACCESS_TOKEN),d=l?l.u:i.e.ACCESS_TOKEN;let x=d!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),x=!0);const E=this.queue.shift();if(this.eventData.lastSuccess){const I=new Date(this.eventData.lastSuccess),M=new Date(E),q=(E-this.eventData.lastSuccess)/864e5;x=x||q>=1||q<-1||I.getDate()!==M.getDate()}else x=!0;x?this.postEvent(E,{sdkIdentifier:"mapbox-gl-js",sdkVersion:A,skuId:Le,"enabled.telemetry":!1,userId:this.anonId},I=>{I||(this.eventData.lastSuccess=E,this.eventData.tokenU=d)},v):this.processRequests()}},le=ie.postTurnstileEvent.bind(ie),fe=new class extends it{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(v,l,d,x){this.skuToken=l,this.errorCb=x,i.e.EVENTS_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},d):this.errorCb(new Error(_e)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:A,skuId:Le,skuToken:this.skuToken,userId:this.anonId},x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},v))}remove(){this.errorCb=null}},be=fe.postMapLoadEvent.bind(fe),He=new class extends it{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(v){let l=this.mapInstanceIdMap.get(v);return l||(l=i.u(),this.mapInstanceIdMap.set(v,l)),l}getEventId(v){const l=this.eventIdPerMapInstanceMap.get(v)||0;return this.eventIdPerMapInstanceMap.set(v,l+1),l}postStyleLoadEvent(v,l){const{map:d,style:x,importedStyles:E}=l;if(!i.e.EVENTS_URL||!v&&!i.e.ACCESS_TOKEN)return;const I=this.getMapInstanceId(d),M={mapInstanceId:I,eventId:this.getEventId(I),style:x};E.length&&(M.importedStyles=E),this.queueRequest({timestamp:Date.now(),payload:M},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,payload:d}=this.queue.shift();this.postEvent(l,d,()=>{},v)}},Je=He.postStyleLoadEvent.bind(He),tt=new class extends it{constructor(){super("gljs.performance")}postPerformanceEvent(v,l){i.e.EVENTS_URL&&(v||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:l},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,performanceData:d}=this.queue.shift(),x=function(E){const I=performance.getEntriesByType("resource"),M=performance.getEntriesByType("mark"),q=function(Ee){const Ge={};if(Ee){for(const $e in Ee)if($e!=="other")for(const Xe of Ee[$e]){const Ze=`${$e}ResolveRangeMin`,ft=`${$e}ResolveRangeMax`,gt=`${$e}RequestCount`,ut=`${$e}RequestCachedCount`;Ge[Ze]=Math.min(Ge[Ze]||1/0,Xe.startTime),Ge[ft]=Math.max(Ge[ft]||-1/0,Xe.responseEnd);const bt=_t=>{Ge[_t]===void 0&&(Ge[_t]=0),++Ge[_t]};Xe.transferSize!==void 0&&Xe.transferSize===0&&bt(ut),bt(gt)}}return Ge}(function(Ee,Ge){const $e={};if(Ee)for(const Xe of Ee){const Ze=Ge(Xe);$e[Ze]===void 0&&($e[Ze]=[]),$e[Ze].push(Xe)}return $e}(I,B)),X=window.devicePixelRatio,ne=navigator.connection||navigator.mozConnection||navigator.webkitConnection,se=ne?ne.effectiveType:void 0,ye={counters:[],metadata:[],attributes:[]},we=(Ee,Ge,$e)=>{$e!=null&&Ee.push({name:Ge,value:$e.toString()})};for(const Ee in q)we(ye.counters,Ee,q[Ee]);if(E.interactionRange[0]!==1/0&&E.interactionRange[1]!==-1/0&&(we(ye.counters,"interactionRangeMin",E.interactionRange[0]),we(ye.counters,"interactionRangeMax",E.interactionRange[1])),M)for(const Ee of Object.keys(g)){const Ge=g[Ee],$e=M.find(Xe=>Xe.name===Ge);$e&&we(ye.counters,Ge,$e.startTime)}return we(ye.counters,"visibilityHidden",E.visibilityHidden),we(ye.attributes,"style",function(Ee){if(Ee)for(const Ge of Ee){const $e=Ge.name.split("?")[0];if(i.i($e)){const Xe=$e.split("/").slice(-2);if(Xe.length===2)return`mapbox://styles/${Xe[0]}/${Xe[1]}`}}}(I)),we(ye.attributes,"terrainEnabled",E.terrainEnabled?"true":"false"),we(ye.attributes,"fogEnabled",E.fogEnabled?"true":"false"),we(ye.attributes,"projection",E.projection),we(ye.attributes,"zoom",E.zoom),we(ye.metadata,"devicePixelRatio",X),we(ye.metadata,"connectionEffectiveType",se),we(ye.metadata,"navigatorUserAgent",navigator.userAgent),we(ye.metadata,"screenWidth",window.screen.width),we(ye.metadata,"screenHeight",window.screen.height),we(ye.metadata,"windowWidth",window.innerWidth),we(ye.metadata,"windowHeight",window.innerHeight),we(ye.metadata,"mapWidth",E.width/X),we(ye.metadata,"mapHeight",E.height/X),we(ye.metadata,"webglRenderer",E.renderer),we(ye.metadata,"webglVendor",E.vendor),we(ye.metadata,"sdkVersion",A),we(ye.metadata,"sdkIdentifier","mapbox-gl-js"),ye}(d);for(const E of x.metadata);for(const E of x.counters);for(const E of x.attributes);this.postEvent(l,x,()=>{},v)}},st=tt.postPerformanceEvent.bind(tt),Ct=new class extends it{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(v,l,d,x){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const E=Be(i.e.API_URL+i.e.SESSION_PATH);E.params.push(`sku=${l||""}`),E.params.push(`access_token=${x||i.e.ACCESS_TOKEN||""}`);const I={url:xe(E),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(I,M=>{this.pendingRequest=null,d(M),this.saveEventData(),this.processRequests(x)})}getSessionAPI(v,l,d,x){this.skuToken=l,this.errorCb=x,i.e.SESSION_PATH&&i.e.API_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},d):this.errorCb(new Error(_e)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||this.getSession(d,this.skuToken,x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},v)}remove(){this.errorCb=null}},Ue=Ct.getSessionAPI.bind(Ct),Ft=new Set;function Zt(v,l){l?Ft.add(v):Ft.delete(v)}class fr{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(l,d){this._updatedSourceCaches[l]=d,this.setDirty()}discardSourceCacheUpdate(l){delete this._updatedSourceCaches[l]}updateLayer(l){const d=l.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(l.id),this.setDirty()}removeLayer(l){const d=l.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][l.id]=l,this._updatedLayers[d].delete(l.id),this._updatedPaintProps.delete(l.fqid),this.setDirty()}getRemovedLayer(l){return this._removedLayers[l.scope]?this._removedLayers[l.scope][l.id]:null}discardLayerRemoval(l){this._removedLayers[l.scope]&&delete this._removedLayers[l.scope][l.id]}getLayerUpdatesByScope(){const l={};for(const d in this._updatedLayers)l[d]=l[d]||{},l[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)l[d]=l[d]||{},l[d].removedIds=Object.keys(this._removedLayers[d]);return l}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(l){this._updatedPaintProps.add(l.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(l){this._updatedImages.add(l),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Ye(v){const{userImage:l}=v;return!!(l&&l.render&&l.render())&&(v.data.replace(new Uint8Array(l.data.buffer)),!0)}class Re extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(l){this.images[l]={},this.loaded[l]=!1,this.updatedImages[l]={},this.patterns[l]={},this.callbackDispatchedThisFrame[l]={},this.atlasImage[l]=new i.r({width:1,height:1})}isLoaded(){for(const l in this.loaded)if(!this.loaded[l])return!1;return!0}setLoaded(l,d){if(this.loaded[d]!==l&&(this.loaded[d]=l,l)){for(const{ids:x,callback:E}of this.requestors)this._notify(x,d,E);this.requestors=[]}}hasImage(l,d){return!!this.getImage(l,d)}getImage(l,d){return this.images[d][l]}addImage(l,d,x){this._validate(l,x)&&(this.images[d][l]=x)}_validate(l,d){let x=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new i.t(new Error(`Image "${l}" has invalid "stretchX" value`))),x=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new i.t(new Error(`Image "${l}" has invalid "stretchY" value`))),x=!1),this._validateContent(d.content,d)||(this.fire(new i.t(new Error(`Image "${l}" has invalid "content" value`))),x=!1),x}_validateStretch(l,d){if(!l)return!0;let x=0;for(const E of l){if(E[0]<x||E[1]<E[0]||d<E[1])return!1;x=E[1]}return!0}_validateContent(l,d){return!(l&&(l.length!==4||l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,d,x){x.version=this.images[d][l].version+1,this.images[d][l]=x,this.updatedImages[d][l]=!0}removeImage(l,d){const x=this.images[d][l];delete this.images[d][l],delete this.patterns[d][l],x.userImage&&x.userImage.onRemove&&x.userImage.onRemove()}listImages(l){return Object.keys(this.images[l])}getImages(l,d,x){let E=!0;const I=!!this.loaded[d];if(!I)for(const M of l)this.images[d][M]||(E=!1);I||E?this._notify(l,d,x):this.requestors.push({ids:l,scope:d,callback:x})}getUpdatedImages(l){return this.updatedImages[l]}_notify(l,d,x){const E={};for(const I of l){this.images[d][I]||this.fire(new i.x("styleimagemissing",{id:I}));const M=this.images[d][I];M?E[I]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:i.w(`Image "${I}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}x(null,E)}getPixelSize(l){const{width:d,height:x}=this.atlasImage[l];return{width:d,height:x}}getPattern(l,d,x){const E=this.patterns[d][l],I=this.getImage(l,d);if(!I)return null;if(E&&E.position.version===I.version)return E.position;if(E)E.position.version=I.version;else{const M={w:I.data.width+2*i.y,h:I.data.height+2*i.y,x:0,y:0},q=new i.I(M,I,i.y);this.patterns[d][l]={bin:M,position:q}}return this._updatePatternAtlas(d,x),this.patterns[d][l].position}bind(l,d){const x=l.gl;let E=this.atlasTexture[d];E?this.dirty&&(E.update(this.atlasImage[d]),this.dirty=!1):(E=new i.T(l,this.atlasImage[d],x.RGBA8),this.atlasTexture[d]=E),E.bind(x.LINEAR,x.CLAMP_TO_EDGE)}_updatePatternAtlas(l,d){const x=[];for(const q in this.patterns[l])x.push(this.patterns[l][q].bin);const{w:E,h:I}=i.z(x),M=this.atlasImage[l];M.resize({width:E||1,height:I||1});for(const q in this.patterns[l]){const{bin:X,position:ne}=this.patterns[l][q];let se=ne.padding;const ye=X.x+se,we=X.y+se,Ee=this.images[l][q].data,Ge=Ee.width,$e=Ee.height;se=se>1?se-1:se,i.r.copy(Ee,M,{x:0,y:0},{x:ye,y:we},{width:Ge,height:$e},d),i.r.copy(Ee,M,{x:0,y:$e-se},{x:ye,y:we-se},{width:Ge,height:se},d),i.r.copy(Ee,M,{x:0,y:0},{x:ye,y:we+$e},{width:Ge,height:se},d),i.r.copy(Ee,M,{x:Ge-se,y:0},{x:ye-se,y:we},{width:se,height:$e},d),i.r.copy(Ee,M,{x:0,y:0},{x:ye+Ge,y:we},{width:se,height:$e},d),i.r.copy(Ee,M,{x:Ge-se,y:$e-se},{x:ye-se,y:we-se},{width:se,height:se},d),i.r.copy(Ee,M,{x:0,y:$e-se},{x:ye+Ge,y:we-se},{width:se,height:se},d),i.r.copy(Ee,M,{x:0,y:0},{x:ye+Ge,y:we+$e},{width:se,height:se},d),i.r.copy(Ee,M,{x:Ge-se,y:0},{x:ye-se,y:we+$e},{width:se,height:se},d)}this.dirty=!0}beginFrame(){for(const l in this.images)this.callbackDispatchedThisFrame[l]={}}dispatchRenderCallbacks(l,d){for(const x of l){if(this.callbackDispatchedThisFrame[d][x])continue;this.callbackDispatchedThisFrame[d][x]=!0;const E=this.images[d][x];Ye(E)&&this.updateImage(x,d,E)}}}function hr(v){const l=v.key,d=v.value,x=v.valueSpec||{},E=v.objectElementValidators||{},I=v.style,M=v.styleSpec;let q=[];const X=i.B(d);if(X!=="object")return[new i.V(l,d,`object expected, ${X} found`)];for(const ne in d){const se=ne.split(".")[0];let ye;E[se]?ye=E[se]:x[se]?ye=ti:E["*"]?ye=E["*"]:x["*"]&&(ye=ti),ye?q=q.concat(ye({key:(l&&`${l}.`)+ne,value:d[ne],valueSpec:x[se]||x["*"],style:I,styleSpec:M,object:d,objectKey:ne},d)):q.push(new i.A(l,d[ne],`unknown property "${ne}"`))}for(const ne in x)E[ne]||x[ne].required&&x[ne].default===void 0&&d[ne]===void 0&&q.push(new i.V(l,d,`missing required property "${ne}"`));return q}function Ut(v){const l=v.value,d=v.valueSpec,x=v.style,E=v.styleSpec,I=v.key,M=v.arrayElementValidator||ti;if(i.B(l)!=="array")return[new i.V(I,l,`array expected, ${i.B(l)} found`)];if(d.length&&l.length!==d.length)return[new i.V(I,l,`array length ${d.length} expected, length ${l.length} found`)];if(d["min-length"]&&l.length<d["min-length"])return[new i.V(I,l,`array length at least ${d["min-length"]} expected, length ${l.length} found`)];let q={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};E.$version<7&&(q.function=d.function),i.B(d.value)==="object"&&(q=d.value);let X=[];for(let ne=0;ne<l.length;ne++)X=X.concat(M({array:l,arrayIndex:ne,value:l[ne],valueSpec:q,style:x,styleSpec:E,key:`${I}[${ne}]`},!0));return X}function vt(v){const l=v.key,d=v.value,x=v.valueSpec;let E=i.B(d);if(E==="number"&&d!=d&&(E="NaN"),E!=="number")return[new i.V(l,d,`number expected, ${E} found`)];if("minimum"in x){let I=x.minimum;if(i.B(x.minimum)==="array"&&(I=x.minimum[v.arrayIndex]),d<I)return[new i.V(l,d,`${d} is less than the minimum value ${I}`)]}if("maximum"in x){let I=x.maximum;if(i.B(x.maximum)==="array"&&(I=x.maximum[v.arrayIndex]),d>I)return[new i.V(l,d,`${d} is greater than the maximum value ${I}`)]}return[]}function Yt(v){const l=v.valueSpec,d=i.D(v.value.type);let x,E,I,M={};const q=d!=="categorical"&&v.value.property===void 0,X=!q,ne=i.B(v.value.stops)==="array"&&i.B(v.value.stops[0])==="array"&&i.B(v.value.stops[0][0])==="object",se=hr({key:v.key,value:v.value,valueSpec:v.styleSpec.function,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{stops:function(Ee){if(d==="identity")return[new i.V(Ee.key,Ee.value,'identity function may not have a "stops" property')];let Ge=[];const $e=Ee.value;return Ge=Ge.concat(Ut({key:Ee.key,value:$e,valueSpec:Ee.valueSpec,style:Ee.style,styleSpec:Ee.styleSpec,arrayElementValidator:ye})),i.B($e)==="array"&&$e.length===0&&Ge.push(new i.V(Ee.key,$e,"array must have at least one stop")),Ge},default:function(Ee){return ti({key:Ee.key,value:Ee.value,valueSpec:l,style:Ee.style,styleSpec:Ee.styleSpec})}}});return d==="identity"&&q&&se.push(new i.V(v.key,v.value,'missing required property "property"')),d==="identity"||v.value.stops||se.push(new i.V(v.key,v.value,'missing required property "stops"')),d==="exponential"&&v.valueSpec.expression&&!i.F(v.valueSpec)&&se.push(new i.V(v.key,v.value,"exponential functions not supported")),v.styleSpec.$version>=8&&(X&&!i.G(v.valueSpec)?se.push(new i.V(v.key,v.value,"property functions not supported")):q&&!i.H(v.valueSpec)&&se.push(new i.V(v.key,v.value,"zoom functions not supported"))),d!=="categorical"&&!ne||v.value.property!==void 0||se.push(new i.V(v.key,v.value,'"property" property is required')),se;function ye(Ee){let Ge=[];const $e=Ee.value,Xe=Ee.key;if(i.B($e)!=="array")return[new i.V(Xe,$e,`array expected, ${i.B($e)} found`)];if($e.length!==2)return[new i.V(Xe,$e,`array length 2 expected, length ${$e.length} found`)];if(ne){if(i.B($e[0])!=="object")return[new i.V(Xe,$e,`object expected, ${i.B($e[0])} found`)];if($e[0].zoom===void 0)return[new i.V(Xe,$e,"object stop key must have zoom")];if($e[0].value===void 0)return[new i.V(Xe,$e,"object stop key must have value")];const Ze=i.D($e[0].zoom);if(typeof Ze!="number")return[new i.V(Xe,$e[0].zoom,"stop zoom values must be numbers")];if(I&&I>Ze)return[new i.V(Xe,$e[0].zoom,"stop zoom values must appear in ascending order")];Ze!==I&&(I=Ze,E=void 0,M={}),Ge=Ge.concat(hr({key:`${Xe}[0]`,value:$e[0],valueSpec:{zoom:{}},style:Ee.style,styleSpec:Ee.styleSpec,objectElementValidators:{zoom:vt,value:we}}))}else Ge=Ge.concat(we({key:`${Xe}[0]`,value:$e[0],valueSpec:{},style:Ee.style,styleSpec:Ee.styleSpec},$e));return i.J(i.K($e[1]))?Ge.concat([new i.V(`${Xe}[1]`,$e[1],"expressions are not allowed in function stops.")]):Ge.concat(ti({key:`${Xe}[1]`,value:$e[1],valueSpec:l,style:Ee.style,styleSpec:Ee.styleSpec}))}function we(Ee,Ge){const $e=i.B(Ee.value),Xe=i.D(Ee.value),Ze=Ee.value!==null?Ee.value:Ge;if(x){if($e!==x)return[new i.V(Ee.key,Ze,`${$e} stop domain type must match previous stop domain type ${x}`)]}else x=$e;if($e!=="number"&&$e!=="string"&&$e!=="boolean"&&typeof Xe!="number"&&typeof Xe!="string"&&typeof Xe!="boolean")return[new i.V(Ee.key,Ze,"stop domain value must be a number, string, or boolean")];if($e!=="number"&&d!=="categorical"){let ft=`number expected, ${$e} found`;return i.G(l)&&d===void 0&&(ft+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(Ee.key,Ze,ft)]}return d!=="categorical"||$e!=="number"||typeof Xe=="number"&&isFinite(Xe)&&Math.floor(Xe)===Xe?d!=="categorical"&&$e==="number"&&typeof Xe=="number"&&typeof E=="number"&&E!==void 0&&Xe<E?[new i.V(Ee.key,Ze,"stop domain values must appear in ascending order")]:(E=Xe,d==="categorical"&&Xe in M?[new i.V(Ee.key,Ze,"stop domain values must be unique")]:(M[Xe]=!0,[])):[new i.V(Ee.key,Ze,`integer expected, found ${String(Xe)}`)]}}function ar(v){const l=(v.expressionContext==="property"?i.L:i.M)(i.K(v.value),v.valueSpec);if(l.result==="error")return l.value.map(x=>new i.V(`${v.key}${x.key}`,v.value,x.message));const d=l.value.expression||l.value._styleExpression.expression;if(v.expressionContext==="property"&&v.propertyKey==="text-font"&&!d.outputDefined())return[new i.V(v.key,v.value,`Invalid data expression for "${v.propertyKey}". Output values must be contained as literals within the expression.`)];if(v.expressionContext==="property"&&v.propertyType==="layout"&&!i.N(d))return[new i.V(v.key,v.value,'"feature-state" data expressions are not supported with layout properties.')];if(v.expressionContext==="filter")return nr(d,v);if(v.expressionContext&&v.expressionContext.indexOf("cluster")===0){if(!i.O(d,["zoom","feature-state"]))return[new i.V(v.key,v.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(v.expressionContext==="cluster-initial"&&!i.Q(d))return[new i.V(v.key,v.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nr(v,l){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(l.valueSpec&&l.valueSpec.expression)for(const E of l.valueSpec.expression.parameters)d.delete(E);if(d.size===0)return[];const x=[];return v instanceof i.S&&d.has(v.name)?[new i.V(l.key,l.value,`["${v.name}"] expression is not supported in a filter for a ${l.object.type} layer with id: ${l.object.id}`)]:(v.eachChild(E=>{x.push(...nr(E,l))}),x)}function Fr(v){const l=v.key,d=v.value,x=v.valueSpec,E=[];return Array.isArray(x.values)?x.values.indexOf(i.D(d))===-1&&E.push(new i.V(l,d,`expected one of [${x.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(x.values).indexOf(i.D(d))===-1&&E.push(new i.V(l,d,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(d)} found`)),E}function Gr(v){return i.W(i.K(v.value))?ar(i.C({},v,{expressionContext:"filter",valueSpec:v.styleSpec[`filter_${v.layerType||"fill"}`]})):Ir(v)}function Ir(v){const l=v.value,d=v.key;if(i.B(l)!=="array")return[new i.V(d,l,`array expected, ${i.B(l)} found`)];const x=v.styleSpec;let E,I=[];if(l.length<1)return[new i.V(d,l,"filter array must have at least 1 element")];switch(I=I.concat(Fr({key:`${d}[0]`,value:l[0],valueSpec:x.filter_operator,style:v.style,styleSpec:v.styleSpec})),i.D(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&i.D(l[1])==="$type"&&I.push(new i.V(d,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&I.push(new i.V(d,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(E=i.B(l[1]),E!=="string"&&I.push(new i.V(`${d}[1]`,l[1],`string expected, ${E} found`)));for(let M=2;M<l.length;M++)E=i.B(l[M]),i.D(l[1])==="$type"?I=I.concat(Fr({key:`${d}[${M}]`,value:l[M],valueSpec:x.geometry_type,style:v.style,styleSpec:v.styleSpec})):E!=="string"&&E!=="number"&&E!=="boolean"&&I.push(new i.V(`${d}[${M}]`,l[M],`string, number, or boolean expected, ${E} found`));break;case"any":case"all":case"none":for(let M=1;M<l.length;M++)I=I.concat(Ir({key:`${d}[${M}]`,value:l[M],style:v.style,styleSpec:v.styleSpec}));break;case"has":case"!has":E=i.B(l[1]),l.length!==2?I.push(new i.V(d,l,`filter array for "${l[0]}" operator must have 2 elements`)):E!=="string"&&I.push(new i.V(`${d}[1]`,l[1],`string expected, ${E} found`))}return I}function cn(v,l){const d=v.key,x=v.style,E=v.layer,I=v.styleSpec,M=v.value,q=v.objectKey,X=I[`${l}_${v.layerType}`];if(!X)return[];const ne=q.match(/^(.*)-transition$/);if(l==="paint"&&ne&&X[ne[1]]&&X[ne[1]].transition)return ti({key:d,value:M,valueSpec:I.transition,style:x,styleSpec:I});const se=v.valueSpec||X[q];if(!se)return[new i.A(d,M,`unknown property "${q}"`)];let ye;if(i.B(M)==="string"&&i.G(se)&&!se.tokens&&(ye=/^{([^}]+)}$/.exec(M))){const Ee=`\`{ "type": "identity", "property": ${ye?JSON.stringify(ye[1]):'"_"'} }\``;return[new i.V(d,M,`"${q}" does not support interpolation syntax
Use an identity property function instead: ${Ee}.`)]}const we=[];if(v.layerType==="symbol")q!=="text-field"||!x||x.glyphs||x.imports||we.push(new i.V(d,M,'use of "text-field" requires a style "glyphs" property')),q==="text-font"&&i.X(i.K(M))&&i.D(M.type)==="identity"&&we.push(new i.V(d,M,'"text-font" does not support identity functions'));else if(v.layerType==="model"&&l==="paint"&&E&&E.layout&&E.layout.hasOwnProperty("model-id")&&i.G(se)&&(i.Y(se)||i.H(se))){const Ee=i.L(i.K(M),se),Ge=Ee.value.expression||Ee.value._styleExpression.expression;Ge&&!i.O(Ge,["measure-light"])&&(q==="model-emissive-strength"&&i.Q(Ge)&&i.N(Ge)||we.push(new i.V(d,M,`${q} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return we.concat(ti({key:v.key,value:M,valueSpec:se,style:x,styleSpec:I,expressionContext:"property",propertyType:l,propertyKey:q}))}function Sn(v){return cn(v,"paint")}function En(v){return cn(v,"layout")}function an(v){let l=[];const d=v.value,x=v.key,E=v.style,I=v.styleSpec;d.type||d.ref||l.push(new i.V(x,d,'either "type" or "ref" is required'));let M=i.D(d.type);const q=i.D(d.ref);if(d.id){const X=i.D(d.id);for(let ne=0;ne<v.arrayIndex;ne++){const se=E.layers[ne];i.D(se.id)===X&&l.push(new i.V(x,d.id,`duplicate layer id "${d.id}", previously used at line ${se.id.__line__}`))}}if("ref"in d){let X;["type","source","source-layer","filter","layout"].forEach(ne=>{ne in d&&l.push(new i.V(x,d[ne],`"${ne}" is prohibited for ref layers`))}),E.layers.forEach(ne=>{i.D(ne.id)===q&&(X=ne)}),X?X.ref?l.push(new i.V(x,d.ref,"ref cannot reference another ref layer")):M=i.D(X.type):typeof q=="string"&&l.push(new i.V(x,d.ref,`ref layer "${q}" not found`))}else if(M!=="background"&&M!=="sky"&&M!=="slot")if(d.source){const X=E.sources&&E.sources[d.source],ne=X&&i.D(X.type);X?ne==="vector"&&M==="raster"?l.push(new i.V(x,d.source,`layer "${d.id}" requires a raster source`)):ne==="raster"&&M!=="raster"?l.push(new i.V(x,d.source,`layer "${d.id}" requires a vector source`)):ne!=="vector"||d["source-layer"]?ne==="raster-dem"&&M!=="hillshade"?l.push(new i.V(x,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):ne!=="raster-array"||["raster","raster-particle"].includes(M)?M!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||ne==="geojson"&&X.lineMetrics?M==="raster-particle"&&ne!=="raster-array"&&l.push(new i.V(x,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):l.push(new i.V(x,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new i.V(x,d.source,"raster-array source can only be used with layer type 'raster'.")):l.push(new i.V(x,d,`layer "${d.id}" must specify a "source-layer"`)):l.push(new i.V(x,d.source,`source "${d.source}" not found`))}else l.push(new i.V(x,d,'missing required property "source"'));return l=l.concat(hr({key:x,value:d,valueSpec:I.layer,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ti({key:`${x}.type`,value:d.type,valueSpec:I.layer.type,style:v.style,styleSpec:v.styleSpec,object:d,objectKey:"type"}),filter:X=>Gr(i.C({layerType:M},X)),layout:X=>hr({layer:d,key:X.key,value:X.value,valueSpec:{},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":ne=>En(i.C({layerType:M},ne))}}),paint:X=>hr({layer:d,key:X.key,value:X.value,valueSpec:{},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{"*":ne=>Sn(i.C({layerType:M,layer:d},ne))}})}})),l}function lr(v){const l=v.value,d=v.key,x=i.B(l);return x!=="string"?[new i.V(d,l,`string expected, ${x} found`)]:[]}const Xt={promoteId:function({key:v,value:l}){if(i.B(l)==="string")return lr({key:v,value:l});{const d=[];for(const x in l)d.push(...lr({key:`${v}.${x}`,value:l[x]}));return d}}};function qr(v){const l=v.value,d=v.key,x=v.styleSpec,E=v.style;if(!l.type)return[new i.V(d,l,'"type" is required')];const I=i.D(l.type);let M=[];switch(["vector","raster","raster-dem","raster-array"].includes(I)&&(l.url||l.tiles||M.push(new i.A(d,l,'Either "url" or "tiles" is required.'))),I){case"vector":case"raster":case"raster-dem":case"raster-array":return M=M.concat(hr({key:d,value:l,valueSpec:x[`source_${I.replace("-","_")}`],style:v.style,styleSpec:x,objectElementValidators:Xt})),M;case"geojson":if(M=hr({key:d,value:l,valueSpec:x.source_geojson,style:E,styleSpec:x,objectElementValidators:Xt}),l.cluster)for(const q in l.clusterProperties){const[X,ne]=l.clusterProperties[q],se=typeof X=="string"?[X,["accumulated"],["get",q]]:X;M.push(...ar({key:`${d}.${q}.map`,value:ne,expressionContext:"cluster-map"})),M.push(...ar({key:`${d}.${q}.reduce`,value:se,expressionContext:"cluster-reduce"}))}return M;case"video":return hr({key:d,value:l,valueSpec:x.source_video,style:E,styleSpec:x});case"image":return hr({key:d,value:l,valueSpec:x.source_image,style:E,styleSpec:x});case"canvas":return[new i.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fr({key:`${d}.type`,value:l.type,valueSpec:{values:Kr(x)},style:E,styleSpec:x})}}function Kr(v){return v.source.reduce((l,d)=>{const x=v[d];return x.type.type==="enum"&&(l=l.concat(Object.keys(x.type.values))),l},[])}function kn(v){const l=v.value,d=v.styleSpec,x=d.light,E=v.style;let I=[];const M=i.B(l);if(l===void 0)return I;if(M!=="object")return I=I.concat([new i.V("light",l,`object expected, ${M} found`)]),I;for(const q in l){const X=q.match(/^(.*)-transition$/);I=I.concat(X&&x[X[1]]&&x[X[1]].transition?ti({key:q,value:l[q],valueSpec:d.transition,style:E,styleSpec:d}):x[q]?ti({key:q,value:l[q],valueSpec:x[q],style:E,styleSpec:d}):[new i.V(q,l[q],`unknown property "${q}"`)])}return I}function mn(v){const l=v.value;let d=[];if(!l)return d;const x=i.B(l);if(x!=="object")return d=d.concat([new i.V("light-3d",l,`object expected, ${x} found`)]),d;const E=v.styleSpec,I=E["light-3d"],M=v.key,q=v.style,X=v.style.lights;for(const ye of["type","id"])if(!(ye in l))return d=d.concat([new i.V("light-3d",l,`missing property ${ye} on light`)]),d;if(l.type&&X)for(let ye=0;ye<v.arrayIndex;ye++){const we=i.D(l.type),Ee=X[ye];i.D(Ee.type)===we&&d.push(new i.V(M,l.id,`duplicate light type "${l.type}", previously defined at line ${Ee.id.__line__}`))}const ne=`properties_light_${l.type}`;if(!(ne in E))return d=d.concat([new i.V("light-3d",l,`Invalid light type ${l.type}`)]),d;const se=E[ne];for(const ye in l)if(ye==="properties"){const we=l[ye],Ee=i.B(we);if(Ee!=="object")return d=d.concat([new i.V("properties",we,`object expected, ${Ee} found`)]),d;for(const Ge in we)d=d.concat(se[Ge]?ti({key:Ge,value:we[Ge],valueSpec:se[Ge],style:q,styleSpec:E}):[new i.A(v.key,we[Ge],`unknown property "${Ge}"`)])}else{const we=ye.match(/^(.*)-transition$/);d=d.concat(we&&I[we[1]]&&I[we[1]].transition?ti({key:ye,value:l[ye],valueSpec:E.transition,style:q,styleSpec:E}):I[ye]?ti({key:ye,value:l[ye],valueSpec:I[ye],style:q,styleSpec:E}):[new i.A(ye,l[ye],`unknown property "${ye}"`)])}return d}function Un(v){const l=v.value,d=v.key,x=v.style,E=v.styleSpec,I=E.terrain;let M=[];const q=i.B(l);if(l===void 0||q==="null")return M;if(q!=="object")return M=M.concat([new i.V("terrain",l,`object expected, ${q} found`)]),M;for(const X in l){const ne=X.match(/^(.*)-transition$/);M=M.concat(ne&&I[ne[1]]&&I[ne[1]].transition?ti({key:X,value:l[X],valueSpec:E.transition,style:x,styleSpec:E}):I[X]?ti({key:X,value:l[X],valueSpec:I[X],style:x,styleSpec:E}):[new i.A(X,l[X],`unknown property "${X}"`)])}if(l.source){const X=x.sources&&x.sources[l.source],ne=X&&i.D(X.type);X?ne!=="raster-dem"&&M.push(new i.V(d,l.source,`terrain cannot be used with a source of type ${String(ne)}, it only be used with a "raster-dem" source type`)):M.push(new i.V(d,l.source,`source "${l.source}" not found`))}else M.push(new i.V(d,l,'terrain is missing required property "source"'));return M}function Hi(v){const l=v.value,d=v.style,x=v.styleSpec,E=x.fog;let I=[];const M=i.B(l);if(l===void 0)return I;if(M!=="object")return I=I.concat([new i.V("fog",l,`object expected, ${M} found`)]),I;for(const q in l){const X=q.match(/^(.*)-transition$/);I=I.concat(X&&E[X[1]]&&E[X[1]].transition?ti({key:q,value:l[q],valueSpec:x.transition,style:d,styleSpec:x}):E[q]?ti({key:q,value:l[q],valueSpec:E[q],style:d,styleSpec:x}):[new i.A(q,l[q],`unknown property "${q}"`)])}return I}const Gn={"*":()=>[],array:Ut,boolean:function(v){const l=v.value,d=v.key,x=i.B(l);return x!=="boolean"?[new i.V(d,l,`boolean expected, ${x} found`)]:[]},number:vt,color:function(v){const l=v.key,d=v.value,x=i.B(d);return x!=="string"?[new i.V(l,d,`color expected, ${x} found`)]:i.U.parseCSSColor(d)===null?[new i.V(l,d,`color expected, "${d}" found`)]:[]},enum:Fr,filter:Gr,function:Yt,layer:an,object:hr,source:qr,model:i.Z,light:kn,"light-3d":mn,terrain:Un,fog:Hi,string:lr,formatted:function(v){return lr(v).length===0?[]:ar(v)},resolvedImage:function(v){return lr(v).length===0?[]:ar(v)},projection:function(v){const l=v.value,d=v.styleSpec,x=d.projection,E=v.style;let I=[];const M=i.B(l);if(M==="object")for(const q in l)I=I.concat(ti({key:q,value:l[q],valueSpec:x[q],style:E,styleSpec:d}));else M!=="string"&&(I=I.concat([new i.V("projection",l,`object or string expected, ${M} found`)]));return I},import:function(v){const{value:l,styleSpec:d}=v,{data:x,...E}=l;Object.defineProperty(E,"__line__",{value:l.__line__,enumerable:!1});let I=hr(i.C({},v,{value:E,valueSpec:d.import}));return i.D(E.id)===""&&I.push(new i.V(`${v.key}.id`,E,"import id can't be an empty string")),x&&(I=I.concat(xi(x,d,{key:`${v.key}.data`}))),I}};function ti(v,l=!1){const d=v.value,x=v.valueSpec,E=v.styleSpec;if(x.expression&&i.X(i.D(d)))return Yt(v);if(x.expression&&i.J(i.K(d)))return ar(v);if(x.type&&Gn[x.type]){const I=Gn[x.type](v);return l===!0&&I.length>0&&i.B(v.value)==="array"?ar(v):I}return hr(i.C({},v,{valueSpec:x.type?E[x.type]:x}))}function si(v){const l=v.value,d=v.key,x=lr(v);return x.length||(l.indexOf("{fontstack}")===-1&&x.push(new i.V(d,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&x.push(new i.V(d,l,'"glyphs" url must include a "{range}" token'))),x}function xi(v,l=i._,d={}){return ti({key:d.key||"",value:v,valueSpec:l.$root,styleSpec:l,style:v,objectElementValidators:{glyphs:si,"*":()=>[]}})}function Bn(v,l=i._){return wt(xi(v,l))}const Zr=v=>wt(qr(v)),Nr=v=>wt(kn(v)),un=v=>wt(mn(v)),ri=v=>wt(Un(v)),Hn=v=>wt(Hi(v)),ir=v=>wt(an(v)),We=v=>wt(Gr(v)),qe=v=>wt(Sn(v)),ht=v=>wt(En(v)),It=v=>wt(i.Z(v));function wt(v){return v.slice().sort((l,d)=>l.line&&d.line?l.line-d.line:0)}function kt(v,l){let d=!1;if(l&&l.length)for(const x of l)x instanceof i.A?i.w(x.message):(v.fire(new i.t(new Error(x.message))),d=!0);return d}let Wt;class Ot extends i.E{constructor(l,d="flat"){super(),this._transitionable=new i.$(Wt||(Wt=new i.a0({anchor:new i.a1(i._.light.anchor),position:new i.a2(i._.light.position),color:new i.a1(i._.light.color),intensity:new i.a1(i._.light.intensity)}))),this.setLight(l,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d,x={}){this._validate(Nr,l,x)||(this._transitionable.setTransitionOrValue(l),this.id=d)}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,x){return(!x||x.validate!==!1)&&kt(this,l.call(Bn,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}const pr=new i.a0({source:new i.a1(i._.terrain.source),exaggeration:new i.a1(i._.terrain.exaggeration)});let xr=class extends i.E{constructor(v,l,d,x){super(),this.scope=d,this._transitionable=new i.$(pr,d,x),this._transitionable.setTransitionOrValue(v,x),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(v,l){this._transitionable.setTransitionOrValue(v,l)}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}getExaggeration(v){return this._transitioning.possiblyEvaluate(new i.a3(v)).get("exaggeration")}isZoomDependent(){const v=this._transitionable._values.exaggeration;return v!=null&&v.value!=null&&v.value.expression!=null&&v.value.expression instanceof i.a4}};const Ar=45,Tr=65,nn=.05;function on(v,l,d,x){const E=i.a7(Ar,Tr,d),[I,M]=_n(v,x);let q=1-Math.min(1,Math.exp((l-I)/(M-I)*-6));return q*=q*q,q=Math.min(1,1.00747*q),q*E*v.alpha}function _n(v,l){const d=.5/Math.tan(.5*l);return[v.range[0]+d,v.range[1]+d]}function Dn(v,l,d,x,E){const I=i.a6.vec3.transformMat4([],[l,d,x],E.mercatorFogMatrix);return on(v,i.a6.vec3.length(I),E.pitch,E._fov)}function qn(v,l,d,x,E,I,M){const q=[[d,x,0],[E,x,0],[E,I,0],[d,I,0]];let X=Number.MAX_VALUE,ne=-Number.MAX_VALUE;for(const se of q){const ye=i.a6.vec3.transformMat4([],se,l),we=i.a6.vec3.length(ye);X=Math.min(X,we),ne=Math.max(ne,we)}return[on(v,X,M.pitch,M._fov),on(v,ne,M.pitch,M._fov)]}const $n=new i.a0({range:new i.a1(i._.fog.range),color:new i.a1(i._.fog.color),"high-color":new i.a1(i._.fog["high-color"]),"space-color":new i.a1(i._.fog["space-color"]),"horizon-blend":new i.a1(i._.fog["horizon-blend"]),"star-intensity":new i.a1(i._.fog["star-intensity"]),"vertical-range":new i.a1(i._.fog["vertical-range"])});class Ni extends i.E{constructor(l,d,x,E){super(),this._transitionable=new i.$($n,x,new Map(E)),this.set(l,E),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new i.a8($n),this.scope=x}get state(){const l=this._transform,d=l.projection.name==="globe",x=i.a9(l.zoom),E=this.properties.get("range"),I=[.5,3];return{range:d?[i.aa(I[0],E[0],x),i.aa(I[1],E[1],x)]:E,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,d,x={}){if(this._validate(Hn,l,x))return;const E=i.l({},l);for(const I of Object.keys(i._.fog))E[I]===void 0&&(E[I]=i._.fog[I].default);this._options=E,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.a7(Ar,Tr,l))*d.a}getOpacityAtLatLng(l,d){return this._transform.projection.supportsFog?function(x,E,I){const M=i.a5.fromLngLat(E),q=I.elevation?I.elevation.getAtPointOrZero(M):0;return Dn(x,M.x,M.y,q,I)}(this.state,l,d):0}getOpacityForTile(l){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(l.toUnwrapped());return qn(this.state,d,0,0,i.ab,i.ab,this._transform)}getOpacityForBounds(l,d,x,E,I){return this._transform.projection.supportsFog?qn(this.state,l,d,x,E,I,this._transform):[1,1]}getFovAdjustedRange(l){return this._transform.projection.supportsFog?_n(this.state,l):[0,1]}isVisibleOnFrustum(l){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const x of d){const E=l.points[x];let I;if(E[2]>=0)I=E;else{const M=l.points[x-4];I=i.ac(M,E,M[2]/(M[2]-E[2]))}if(Dn(this.state,I[0],I[1],0,this._transform)>=nn)return!0}return!1}updateConfig(l){this._transitionable.setTransitionOrValue(this._options,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,x){return(!x||x.validate!==!1)&&kt(this,l.call(Bn,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i._})))}}class Vi extends i.E{constructor(l,d,x,E){super(),this.scope=x,this._options=l,this.properties=new i.a8(d),this._transitionable=new i.$(d,x,new Map(E)),this._transitionable.setTransitionOrValue(l.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(l){this._transitionable.setTransitionOrValue(this._options.properties,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(l,d){this._options=l,this._transitionable.setTransitionOrValue(l.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let Wn,Ki;class Cs{constructor(l,d,x,E){this.screenBounds=l,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=x,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(l,d){let x,E;if(l instanceof i.P||typeof l[0]=="number"){const I=i.P.convert(l);x=[I],E=d.isPointAboveHorizon(I)}else{const I=i.P.convert(l[0]),M=i.P.convert(l[1]);x=[I,M],E=i.ae(I,M).every(q=>d.isPointAboveHorizon(q))}return new Cs(x,d.getCameraPoint(),E,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return i.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const d=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],E=i.ae(d,x,0,!1);return this.cameraPoint.y>x.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<x.x?E.splice(3,0,this.cameraPoint):this.cameraPoint.x>=x.x?E[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(E[3]=this.cameraPoint)),i.af(E,l)}bufferedCameraGeometryGlobe(l){const d=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],E=i.ae(d,x,l),I=this.cameraPoint.clone();switch(3*((I.y>d.y)+(I.y>x.y))+((I.x>d.x)+(I.x>x.x))){case 0:E[0]=I,E[4]=I.clone();break;case 1:E.splice(1,0,I);break;case 2:E[1]=I;break;case 3:E.splice(4,0,I);break;case 5:E.splice(2,0,I);break;case 6:E[3]=I;break;case 7:E.splice(3,0,I);break;case 8:E[2]=I}return E}containsTile(l,d,x,E=0){const I=l.queryPadding/d._pixelsPerMercatorPixel+1,M=x?this._bufferedCameraMercator(I,d):this._bufferedScreenMercator(I,d);let q=l.tileID.wrap+(M.unwrapped?E:0);const X=M.polygon.map(Xe=>i.ag(l.tileTransform,Xe,q));if(!i.ah(X,0,0,i.ab,i.ab))return;q=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?E:0);const ne=this.screenGeometryMercator.polygon.map(Xe=>i.ai(l.tileTransform,Xe,q)),se=ne.map(Xe=>new i.P(Xe[0],Xe[1])),ye=d.getFreeCameraOptions().position||new i.a5(0,0,0),we=i.ai(l.tileTransform,ye,q),Ee=ne.map(Xe=>{const Ze=i.a6.vec3.sub(Xe,Xe,we);return i.a6.vec3.normalize(Ze,Ze),new i.aj(we,Ze)}),Ge=i.ak(l,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:se,tilespaceRays:Ee,bufferedTilespaceGeometry:X,bufferedTilespaceBounds:($e=i.al(X),$e.min.x=i.ap($e.min.x,0,i.ab),$e.min.y=i.ap($e.min.y,0,i.ab),$e.max.x=i.ap($e.max.x,0,i.ab),$e.max.y=i.ap($e.max.y,0,i.ab),$e),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:Ge};var $e}_bufferedScreenMercator(l,d){const x=es(l);if(this._screenRaycastCache[x])return this._screenRaycastCache[x];{let E;return E=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),d):{polygon:this.bufferedScreenGeometry(l).map(I=>d.pointCoordinate3D(I)),unwrapped:!0},this._screenRaycastCache[x]=E,E}}_bufferedCameraMercator(l,d){const x=es(l);if(this._cameraRaycastCache[x])return this._cameraRaycastCache[x];{let E;return E=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),d):{polygon:this.bufferedCameraGeometry(l).map(I=>d.pointCoordinate3D(I)),unwrapped:!0},this._cameraRaycastCache[x]=E,E}}_projectAndResample(l,d){const x=function(I,M){const q=i.a6.mat4.multiply([],M.pixelMatrix,M.globeMatrix),X=[0,-i.aq,0,1],ne=[0,i.aq,0,1],se=[0,0,0,1];i.a6.vec4.transformMat4(X,X,q),i.a6.vec4.transformMat4(ne,ne,q),i.a6.vec4.transformMat4(se,se,q);const ye=new i.P(X[0]/X[3],X[1]/X[3]),we=new i.P(ne[0]/ne[3],ne[1]/ne[3]),Ee=i.an(I,ye)&&X[3]<se[3],Ge=i.an(I,we)&&ne[3]<se[3];if(!Ee&&!Ge)return null;const $e=function(Mt,Tt,jt){for(let Vt=1;Vt<Mt.length;Vt++){const Rt=Fs(Tt.pointCoordinate3D(Mt[Vt-1]).x),Dt=Fs(Tt.pointCoordinate3D(Mt[Vt]).x);if(jt<0){if(Rt<Dt)return{idx:Vt,t:-Rt/(Dt-1-Rt)}}else if(Dt<Rt)return{idx:Vt,t:(1-Rt)/(Dt+1-Rt)}}return null}(I,M,Ee?-1:1);if(!$e)return null;const{idx:Xe,t:Ze}=$e;let ft=Xe>1?ro(I.slice(0,Xe),M):[],gt=Xe<I.length?ro(I.slice(Xe),M):[];ft=ft.map(Mt=>new i.P(Fs(Mt.x),Mt.y)),gt=gt.map(Mt=>new i.P(Fs(Mt.x),Mt.y));const ut=[...ft];ut.length===0&&ut.push(gt[gt.length-1]);const bt=i.aa(ut[ut.length-1].y,(gt.length===0?ft[0]:gt[0]).y,Ze);let _t;return _t=Ee?[new i.P(0,bt),new i.P(0,0),new i.P(1,0),new i.P(1,bt)]:[new i.P(1,bt),new i.P(1,1),new i.P(0,1),new i.P(0,bt)],ut.push(..._t),gt.length===0?ut.push(ft[0]):ut.push(...gt),{polygon:ut.map(Mt=>new i.a5(Mt.x,Mt.y)),unwrapped:!1}}(l,d);if(x)return x;const E=function(I,M){let q=!1,X=-1/0,ne=0;for(let ye=0;ye<I.length-1;ye++)I[ye].x>X&&(X=I[ye].x,ne=ye);for(let ye=0;ye<I.length-1;ye++){const we=(ne+ye)%(I.length-1),Ee=I[we],Ge=I[we+1];Math.abs(Ee.x-Ge.x)>.5&&(Ee.x<Ge.x?(Ee.x+=1,we===0&&(I[I.length-1].x+=1)):(Ge.x+=1,we+1===I.length-1&&(I[0].x+=1)),q=!0)}const se=i.am(M.center.lng);return q&&se<Math.abs(se-1)&&I.forEach(ye=>{ye.x-=1}),{polygon:I,unwrapped:q}}(ro(l,d).map(I=>new i.P(Fs(I.x),I.y)),d);return{polygon:E.polygon.map(I=>new i.a5(I.x,I.y)),unwrapped:E.unwrapped}}}function ro(v,l){return i.ao(v,d=>{const x=l.pointCoordinate3D(d);d.x=x.x,d.y=x.y},1/256)}function Fs(v){return v<0?1+v%1:v%1}function es(v){return 100*v|0}function Sa(v,l,d,x,E){const I=function(q,X){if(q)return E(q);if(X){if(v.url&&X.tiles&&v.tiles&&delete v.tiles,X.variants){if(!Array.isArray(X.variants))return E(new Error("variants must be an array"));for(const se of X.variants){if(se==null||typeof se!="object"||se.constructor!==Object)return E(new Error("variant must be an object"));if(!Array.isArray(se.capabilities))return E(new Error("capabilities must be an array"));if(se.capabilities.length===1&&se.capabilities[0]==="meshopt"){X=i.l(X,se);break}}}const ne=i.ar(i.l(X,v),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);X.vector_layers&&(ne.vectorLayers=X.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(se=>se.id)),X.raster_layers&&(ne.rasterLayers=X.raster_layers,ne.rasterLayerIds=ne.rasterLayers.map(se=>se.id)),ne.tiles=l.canonicalizeTileset(ne,v.url),E(null,ne)}},M=function(q,X,ne){if(!q)return null;if(!X&&!ne)return q;ne=ne||q.worldview_default;const se=Object.values(q.language||{});if(se.length===0)return null;const ye=Object.values(q.worldview||{});if(ye.length===0)return null;const we=se.every(Ge=>Ge===X),Ee=ye.every(Ge=>Ge===ne);return we&&Ee?q:X in(q.language_options||{})||ne in(q.worldview_options||{})?null:q.language_options&&q.worldview_options?q:null}(v.data,d,x);return M?i.q.frame(()=>I(null,M)):v.url?i.n(l.transformRequest(l.normalizeSourceURL(v.url,null,d,x),i.R.Source),I):i.q.frame(()=>{const{data:q,...X}=v;I(null,X)})}class Ba{constructor(l,d,x){this.bounds=i.as.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=x||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const d=Math.pow(2,l.z),x=Math.floor(i.am(this.bounds.getWest())*d),E=Math.floor(i.at(this.bounds.getNorth())*d),I=Math.ceil(i.am(this.bounds.getEast())*d),M=Math.ceil(i.at(this.bounds.getSouth())*d);return l.x>=x&&l.x<I&&l.y>=E&&l.y<M}}class tl extends i.E{constructor(l,d,x,E){if(super(),this.id=l,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.ar(d,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E),this._tileWorkers={},this._deduped=new i.au}load(l){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,x=this.map._worldview;this._tileJSONRequest=Sa(this._options,this.map._requestManager,d,x,(E,I)=>{this._tileJSONRequest=null,this._loaded=!0,E?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),x&&x.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${x}`),this.fire(new i.t(E))):I&&(i.l(this,I),I.bounds&&(this.tileBounds=new Ba(I.bounds,this.minzoom,this.maxzoom)),le(I.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),l&&l(E)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(l,d){const x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),E=this.map._requestManager.transformRequest(x,i.R.Tile),I=this.map.style?this.map.style.getLut(this.scope):null,M={request:E,data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,lut:I?{image:I.image.clone()}:null,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:l.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(M.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",M,q.bind(this));else if(l.actor=this._tileWorkers[x]=this._tileWorkers[x]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",M,q.bind(this),void 0,!0);else{const X=i.aw.call({deduped:this._deduped},M,(ne,se)=>{ne||!se?q.call(this,ne):(M.data={cacheControl:se.cacheControl,expires:se.expires,rawData:se.rawData.slice(0)},l.actor&&l.actor.send("loadTile",M,q.bind(this),void 0,!0))},!0);l.request={cancel:X}}function q(X,ne){return delete l.request,l.aborted?d(null):X&&X.status!==404?d(X):(ne&&ne.resourceTiming&&(l.resourceTiming=ne.resourceTiming),this.map._refreshExpiredTiles&&ne&&l.setExpiryData(ne),l.loadVectorData(ne,this.map.painter),i.ax(this.dispatcher),d(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope}),l.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class go extends i.E{constructor(l,d,x,E){super(),this.id=l,this.dispatcher=x,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},d),i.l(this,i.ar(d,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._tileJSONRequest=Sa(this._options,this.map._requestManager,null,null,(d,x)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new i.t(d)):x&&(i.l(this,x),x.bounds&&(this.tileBounds=new Ba(x.bounds,this.minzoom,this.maxzoom)),le(x.tiles),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),l&&l(d)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const x=i.q.devicePixelRatio>=2,E=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),x,this.tileSize);l.request=i.o(this.map._requestManager.transformRequest(E,i.R.Tile),(I,M,q,X)=>(delete l.request,l.aborted?(l.state="unloaded",d(null)):I?(l.state="errored",d(I)):M?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:q,expires:X}),l.setTexture(M,this.map.painter),l.state="loaded",i.ax(this.dispatcher),void d(null)):d(null)))}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d&&d()}unloadTile(l,d){l.texture&&l.texture instanceof i.T?(l.destroy(!0),l.texture&&l.texture instanceof i.T&&this.map.painter.saveTileTexture(l.texture)):l.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Sl extends go{constructor(l,d,x,E){super(l,d,x,E),this.type="raster-array",this.maxzoom=22,this._options=i.l({type:"raster-array"},d)}triggerRepaint(l){const d=this.map.painter._terrain,x=this.map.style.getSourceCache(this.id);d&&d.enabled&&x&&d._clearRenderCacheForTile(x.id,l.tileID),this.map.triggerRepaint()}loadTile(l,d){const x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),E=this.map._requestManager.transformRequest(x,i.R.Tile);l.requestParams=E,l.actor||(l.actor=this.dispatcher.getActor()),l.request=l.fetchHeader(void 0,(I,M,q,X)=>{if(delete l.request,l.aborted)return l.state="unloaded",d(null);if(I)return I.code===20?void 0:(l.state="errored",d(I));this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:q,expires:X}),l.state="empty",d(null)})}unloadTile(l,d){const x=l.texture;x&&x instanceof i.T?(l.destroy(!0),this.map.painter.saveTileTexture(x)):(l.destroy(),l.flushQueues(),l._isHeaderLoaded=!1,delete l._mrt,delete l.textureDescriptor),l.fbo&&(l.fbo.destroy(),delete l.fbo),delete l.request,delete l.requestParams,delete l.neighboringTiles,l.state="unloaded"}prepareTile(l,d,x){l._isHeaderLoaded&&(l.state!=="empty"&&(l.state="reloading"),l.fetchBand(d,x,(E,I)=>{if(E)return l.state="errored",this.fire(new i.t(E)),void this.triggerRepaint(l);I&&(l.setTexture(I,this.map.painter),l.state="loaded",this.triggerRepaint(l))}))}getInitialBand(l){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:I})=>I===l),x=d&&d.fields,E=x&&x.bands&&x.bands;return E?E[0]:0}getTextureDescriptor(l,d,x){if(!l)return;const E=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!E)return;let I=null;d instanceof i.aB?I=d.paint.get("raster-array-band"):d instanceof i.aC&&(I=d.paint.get("raster-particle-array-band"));const M=I||this.getInitialBand(E);if(M!=null)if(l.textureDescriptor){if(!l.updateNeeded(E,M)||x)return Object.assign({},l.textureDescriptor,{texture:l.texture})}else this.prepareTile(l,E,M)}}const sa={vector:tl,raster:go,"raster-dem":class extends go{constructor(v,l,d,x){super(v,l,d,x),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(v,l){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function x(E,I){E&&(v.state="errored",l(E)),I&&(v.dem=I,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",l(null))}v.request=i.o(this.map._requestManager.transformRequest(d,i.R.Tile),(function(E,I,M,q){if(delete v.request,v.aborted)v.state="unloaded",l(null);else if(E)v.state="errored",l(E);else if(I){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:M,expires:q});const X=ImageBitmap&&I instanceof ImageBitmap&&i.ay(),ne=1-(I.width-i.az(I.width))/2;ne<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const se=X?I:i.q.getImageData(I,ne),ye={uid:v.uid,coord:v.tileID,source:this.id,scope:this.scope,rawImageData:se,encoding:this.encoding,padding:ne};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",ye,x.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(v){const l=v.canonical,d=Math.pow(2,l.z),x=(l.x-1+d)%d,E=l.x===0?v.wrap-1:v.wrap,I=(l.x+1+d)%d,M=l.x+1===d?v.wrap+1:v.wrap,q={};return q[new i.aA(v.overscaledZ,E,l.z,x,l.y).key]={backfilled:!1},q[new i.aA(v.overscaledZ,M,l.z,I,l.y).key]={backfilled:!1},l.y>0&&(q[new i.aA(v.overscaledZ,E,l.z,x,l.y-1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,v.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,M,l.z,I,l.y-1).key]={backfilled:!1}),l.y+1<d&&(q[new i.aA(v.overscaledZ,E,l.z,x,l.y+1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,v.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},q[new i.aA(v.overscaledZ,M,l.z,I,l.y+1).key]={backfilled:!1}),q}},"raster-array":Sl,geojson:class extends i.E{constructor(v,l,d,x){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(x),this._data=l.data,this._options=i.l({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.minzoom!==void 0&&(this.minzoom=l.minzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const E=i.ab/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*E,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*E,extent:i.ab,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:i.ab,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*E,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter,dynamic:l.dynamic},l.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}updateData(v){if(!this._options.dynamic)return this.fire(new i.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof v!="string"&&(v.type==="Feature"&&(v={type:"FeatureCollection",features:[v]}),v.type!=="FeatureCollection"))return this.fire(new i.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof v!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const l=new Map;for(const d of this._data.features)l.set(d.id,d);for(const d of v.features)l.set(d.id,d);this._data.features=[...l.values()]}else this._data=v;return this._updateWorkerData(!0),this}getClusterExpansionZoom(v,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterChildren(v,l){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterLeaves(v,l,d,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:v,limit:l,offset:d},x),this}_updateWorkerData(v=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.x("dataloading",{dataType:"source"})),this._loaded=!1;const l=i.l({append:v},this.workerOptions);l.scope=this.scope;const d=this._data;typeof d=="string"?(l.request=this.map._requestManager.transformRequest(i.q.resolveURL(d),i.R.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,l,(x,E)=>{if(this._loaded=!0,this._pendingLoad=null,x)this.fire(new i.t(x));else{const I={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&E&&E.resourceTiming&&E.resourceTiming[this.id]&&(I.resourceTiming=E.resourceTiming[this.id]),v&&(this._partialReload=!0),this.fire(new i.x("data",I)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(v),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(v,l){const d=v.actor?"reloadTile":"loadTile";v.actor=this.actor;const x=this.map.style?this.map.style.getLut(this.scope):null,E=this._partialReload,I={type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:x?{image:x.image.clone()}:null,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:E};v.request=this.actor.send(d,I,(M,q)=>E&&!q?(v.state="loaded",l(null)):(delete v.request,v.destroy(),v.aborted?l(null):M?l(M):(v.loadVectorData(q,this.map.painter,d==="reloadTile"),l(null))),void 0,d==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v,l){this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id,scope:this.scope}),v.destroy()}onRemove(v){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aD{constructor(v,l,d,x){super(v,l,d,x),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const l of v.urls)this.urls.push(this.map._requestManager.transformRequest(l,i.R.Source).url);i.aE(this.urls,(l,d)=>{this._loaded=!0,l?this.fire(new i.t(l)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const l=this.video.seekable;v<l.start(0)||v>l.end(0)?this.fire(new i.t(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,l=v.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(v,this.video,l.RGBA8),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aD,model:class extends i.E{constructor(v,l,d,x){super(),this.id=v,this.type="model",this.models=[],this._loaded=!1,this._options=l}load(){const v=[];for(const l in this._options.models){const d=this._options.models[l],x=i.aG(this.map._requestManager.transformRequest(d.uri,i.R.Model).url).then(E=>{if(!E)return;const I=i.aH(E),M=new i.aI(l,d.position,d.orientation,I);M.computeBoundsAndApplyParent(),this.models.push(M)}).catch(E=>{this.fire(new i.t(new Error(`Could not load model ${l} from ${d.uri}: ${E.message}`)))});v.push(x)}return Promise.allSettled(v).then(()=>{this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(l=>{this.fire(new i.t(new Error(`Could not load models: ${l.message}`)))})}onAdd(v){this.map=v,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(v,l){}serialize(){return{type:"model"}}},"batched-model":class extends i.E{constructor(v,l,d,x){super(),this.type="batched-model",this.id=v,this.tileSize=512,this._options=l,this.tiles=this._options.tiles,this.maxzoom=l.maxzoom||19,this.minzoom=l.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(x)}onAdd(v){this.map=v,this.load()}load(v){this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map._worldview;this._tileJSONRequest=Sa(this._options,this.map._requestManager,l,d,(x,E)=>{this._tileJSONRequest=null,this._loaded=!0,x?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new i.t(x))):E&&(i.l(this,E),E.bounds&&(this.tileBounds=new Ba(E.bounds,this.minzoom,this.maxzoom)),le(E.tiles,this.map._requestManager._customAccessToken),this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))),v&&v(x)})}hasTransition(){return!1}hasTile(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)}loaded(){return this._loaded}loadTile(v,l){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(d,i.R.Tile),data:void 0,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,tileSize:this.tileSize*v.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:v.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(v.actor&&v.state!=="expired")if(v.state==="loading")v.reloadCallback=l;else{if(v.buckets){const I=Object.values(v.buckets);for(const M of I)M.dirty=!0;return void(v.state="loaded")}v.request=v.actor.send("reloadTile",x,E.bind(this))}else v.actor=this.dispatcher.getActor(),v.request=v.actor.send("loadTile",x,E.bind(this),void 0,!0);function E(I,M){return v.aborted?l(null):I&&I.status!==404?l(I):(M&&(M.resourceTiming&&(v.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&v.setExpiryData(M),v.buckets={...v.buckets,...M.buckets},M.featureIndex&&(v.latestFeatureIndex=M.featureIndex)),v.state="loaded",void l(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aD{constructor(v,l,d,x){super(v,l,d,x),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(I=>typeof I!="number"))||this.fire(new i.t(new i.V(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.t(new i.V(`sources.${v}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new i.t(new i.V(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new i.t(new i.V(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.t(new i.V(`sources.${v}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(v){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?!v&&!this._playing||this.texture instanceof i.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(l,this.canvas,l.gl.RGBA8,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends i.E{constructor(v,l,d,x){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=l,this.setEventedParent(x),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ba(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.ar(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this.map=v,this._loaded=!1,this.fire(new i.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:l,y:d,z:x}=v.canonical;return this._implementation.hasTile({x:l,y:d,z:x})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,l){const{x:d,y:x,z:E}=v.tileID.canonical,I=new AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:d,y:x,z:E},{signal:I.signal})).then((function(M){return delete v.request,v.aborted?(v.state="unloaded",l(null)):M===void 0?(v.state="errored",l(null)):M===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",l(null)):function(q){return q instanceof ImageData||q instanceof HTMLCanvasElement||q instanceof ImageBitmap||q instanceof HTMLImageElement}(M)?(this.loadTileData(v,M),v.state="loaded",void l(null)):(v.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(M=>{M.code!==20&&(v.state="errored",l(M))}),v.request.cancel=()=>I.abort()}loadTileData(v,l){v.setTexture(l,this.map.painter)}unloadTile(v,l){if(v.texture&&v.texture instanceof i.T?(v.destroy(!0),v.texture&&v.texture instanceof i.T&&this.map.painter.saveTileTexture(v.texture)):v.destroy(),this._implementation.unloadTile){const{x:d,y:x,z:E}=v.tileID.canonical;this._implementation.unloadTile({x:d,y:x,z:E})}l&&l()}abortTile(v,l){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),l&&l()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z}))}_clearTiles(){const v=i.av(this.id,this.scope);this.map.style.clearSource(v)}_update(){this.fire(new i.x("data",{dataType:"source",sourceDataType:"content"}))}}},Ha=function(v,l,d,x){const E=new sa[l.type](v,l,d,x);if(E.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${E.id}`);return i.aJ(["load","abort","unload","serialize","prepare"],E),E};function Gi(v,l){const d=i.a6.mat4.identity([]);return i.a6.mat4.scale(d,d,[.5*v.width,.5*-v.height,1]),i.a6.mat4.translate(d,d,[1,-1,0]),i.a6.mat4.multiply(d,d,v.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(d)}function Fc(v,l,d,x,E,I,M,q=!1){const X=v.tilesIn(x,M,q);X.sort(Ul);const ne=[];for(const ye of X)ne.push({wrappedTileID:ye.tile.tileID.wrapped().key,queryResults:ye.tile.queryRenderedFeatures(l,d,v._state,ye,E,I,Gi(v.transform,ye.tile.tileID),q)});const se=function(ye){const we={},Ee={};for(const Ge of ye){const $e=Ge.queryResults,Xe=Ge.wrappedTileID,Ze=Ee[Xe]=Ee[Xe]||{};for(const ft in $e){const gt=$e[ft],ut=Ze[ft]=Ze[ft]||{},bt=we[ft]=we[ft]||[];for(const _t of gt)ut[_t.featureIndex]||(ut[_t.featureIndex]=!0,bt.push(_t))}}return we}(ne);for(const ye in se)se[ye].forEach(we=>{const Ee=we.feature,Ge=Ee.layer;Ge&&Ge.type!=="background"&&Ge.type!=="sky"&&Ge.type!=="slot"&&(Ee.source=Ge.source,Ge["source-layer"]&&(Ee.sourceLayer=Ge["source-layer"]),Ee.state=Ee.id!==void 0?v.getFeatureState(Ge["source-layer"],Ee.id):{})});return se}function nc(v,l){const d=v.getRenderableIds().map(I=>v.getTileByID(I)),x=[],E={};for(let I=0;I<d.length;I++){const M=d[I],q=M.tileID.canonical.key;E[q]||(E[q]=!0,M.querySourceFeatures(x,l))}return x}function Ul(v,l){const d=v.tileID,x=l.tileID;return d.overscaledZ-x.overscaledZ||d.canonical.y-x.canonical.y||d.wrap-x.wrap||d.canonical.x-x.canonical.x}const Xo=32,Pa=33,mi=new Uint16Array(8184);for(let v=0;v<2046;v++){let l=v+2,d=0,x=0,E=0,I=0,M=0,q=0;for(1&l?E=I=M=Xo:d=x=q=Xo;(l>>=1)>1;){const ne=d+E>>1,se=x+I>>1;1&l?(E=d,I=x,d=M,x=q):(d=E,x=I,E=M,I=q),M=ne,q=se}const X=4*v;mi[X+0]=d,mi[X+1]=x,mi[X+2]=E,mi[X+3]=I}const So=new Uint16Array(2178),vs=new Uint8Array(1089),Bl=new Uint16Array(1089);function Nc(v){return v===0?-.03125:v===32?.03125:0}const Cc={type:2,extent:i.ab,loadGeometry:()=>[[new i.P(0,0),new i.P(i.ab+1,0),new i.P(i.ab+1,i.ab+1),new i.P(0,i.ab+1),new i.P(0,0)]]};class ae{constructor(l,d,x,E,I){this.tileID=l,this.uid=i.aP(),this.uses=0,this.tileSize=d,this.tileZoom=x,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=I,E&&E.style&&(this._lastUpdatedBrightness=E.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",E&&E.transform&&(this.projection=E.transform.projection)}registerFadeDuration(l){const d=l+this.timeAdded;d<i.q.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aK(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(l,d,x){if(this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(E,I){const M={};if(!I)return M;for(const q of E){const X=q.layerIds.map(ne=>I.getLayer(ne)).filter(Boolean);if(X.length!==0){q.layers=X,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(ne=>X.filter(se=>se.id===ne)[0]));for(const ne of X)M[ne.fqid]=q}}return M}(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const E in this.buckets){const I=this.buckets[E];if(I instanceof i.aR){if(this.hasSymbolBuckets=!0,!x)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const E in this.buckets){const I=this.buckets[E];if(I instanceof i.aR&&I.hasRTLText){this.hasRTLText=!0,i.aS();break}}this.queryPadding=0;for(const E in this.buckets){const I=this.buckets[E],M=d.style.getOwnLayer(E);if(!M)continue;const q=M.queryRadius(I);this.queryPadding=Math.max(this.queryPadding,q)}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas),this._lastUpdatedBrightness=l.brightness}else this.collisionBoxArray=new i.aQ}unloadVectorData(){if(this.hasData()){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(l){return this.buckets[l.fqid]}upload(l){for(const E in this.buckets){const I=this.buckets[E];I.uploadPending()&&I.upload(l)}const d=l.gl,x=this.imageAtlas;if(x&&!x.uploaded){const E=!!Object.keys(x.patternPositions).length;this.imageAtlasTexture=new i.T(l,x.image,d.RGBA8,{useMipmap:E}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(l,this.glyphAtlasImage,d.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(l,this.lineAtlas.image,d.R8),this.lineAtlas.uploaded=!0)}prepare(l,d,x){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture,x),!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const E=d.style.getBrightness();(this._lastUpdatedBrightness||E)&&(this._lastUpdatedBrightness&&E&&Math.abs(this._lastUpdatedBrightness-E)<.001||(this._lastUpdatedBrightness=E,this.updateBuckets(d)))}queryRenderedFeatures(l,d,x,E,I,M,q,X){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:E,pixelPosMatrix:q,transform:M,params:I,tileTransform:this.tileTransform},l,d,x):{}}querySourceFeatures(l,d){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const E=x.loadVTLayers(),I=d?d.sourceLayer:"",M=E._geojsonTileLayer||E[I];if(!M)return;const q=i.aT(d&&d.filter),{z:X,x:ne,y:se}=this.tileID.canonical,ye={z:X,x:ne,y:se};for(let we=0;we<M.length;we++){const Ee=M.feature(we);if(q.needGeometry){const Xe=i.aU(Ee,!0);if(!q.filter(new i.a3(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!q.filter(new i.a3(this.tileID.overscaledZ),Ee))continue;const Ge=x.getId(Ee,I),$e=new i.aV(Ee,X,ne,se,Ge);$e.tile=ye,l.push($e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const x=i.aW(l.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const x=Date.now();let E=!1;if(this.expirationTime>x)E=!1;else if(d)if(this.expirationTime<d)E=!0;else{const I=this.expirationTime-d;I?this.expirationTime=x+Math.max(I,3e4):E=!0}else E=!0;E?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,d){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(l).length!==0&&d&&this.updateBuckets(d)}updateBuckets(l){if(!this.latestFeatureIndex)return;const d=this.latestFeatureIndex.loadVTLayers(),x=l.style.listImages(),E=l.style.getBrightness();for(const I in this.buckets){if(!l.style.hasLayer(I))continue;const M=this.buckets[I],q=M.layers[0].sourceLayer||"_geojsonTileLayer",X=d[q],ne=l.style.getOwnSourceCache(M.layers[0].source);let se={};ne&&(se=ne._state.getState(q,void 0)),M.update(se,X,x,this.imageAtlas&&this.imageAtlas.patternPositions||{},E),(M instanceof i.aX||M instanceof i.aY)&&l._terrain&&l._terrain.enabled&&ne&&M.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(ne.id,this.tileID);const ye=l&&l.style&&l.style.getOwnLayer(I);ye&&(this.queryPadding=Math.max(this.queryPadding,ye.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=i.q.now()+l}setTexture(l,d){const x=d.context,E=x.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l):(this.texture=new i.T(x,l,E.RGBA8,{useMipmap:!0}),this.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE))}setDependencies(l,d){const x={};for(const E of d)x[E]=!0;this.dependencies[l]=x}hasDependency(l,d){for(const x of l){const E=this.dependencies[x];if(E){for(const I of d)if(E[I])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(l,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const x=i.aZ(Cc,this.tileID.canonical,this.tileTransform)[0],E=new i.a_,I=new i.a$;for(let M=0;M<x.length;M++){const{x:q,y:X}=x[M];E.emplaceBack(q,X),I.emplaceBack(M)}I.emplaceBack(0),this._tileDebugIndexBuffer=l.createIndexBuffer(I),this._tileDebugBuffer=l.createVertexBuffer(E,i.b0.members),this._tileDebugSegments=i.b1.simpleSegment(0,0,E.length,I.length)}_makeTileBoundsBuffers(l,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const x=i.aZ(Cc,this.tileID.canonical,this.tileTransform)[0];let E,I;if(this.isRaster){const M=function(q,X){const ne=i.aK(q,X),se=Math.pow(2,q.z);for(let Xe=0;Xe<Pa;Xe++)for(let Ze=0;Ze<Pa;Ze++){const ft=i.aL((q.x+(Ze+Nc(Ze))/Xo)/se),gt=i.aM((q.y+(Xe+Nc(Xe))/Xo)/se),ut=X.project(ft,gt),bt=Xe*Pa+Ze;So[2*bt+0]=Math.round((ut.x*ne.scale-ne.x)*i.ab),So[2*bt+1]=Math.round((ut.y*ne.scale-ne.y)*i.ab)}vs.fill(0),Bl.fill(0);for(let Xe=2045;Xe>=0;Xe--){const Ze=4*Xe,ft=mi[Ze+0],gt=mi[Ze+1],ut=mi[Ze+2],bt=mi[Ze+3],_t=ft+ut>>1,Mt=gt+bt>>1,Tt=_t+Mt-gt,jt=Mt+ft-_t,Vt=gt*Pa+ft,Rt=bt*Pa+ut,Dt=Mt*Pa+_t,sr=Math.hypot((So[2*Vt+0]+So[2*Rt+0])/2-So[2*Dt+0],(So[2*Vt+1]+So[2*Rt+1])/2-So[2*Dt+1])>=16;vs[Dt]=vs[Dt]||(sr?1:0),Xe<1022&&(vs[Dt]=vs[Dt]||vs[(gt+jt>>1)*Pa+(ft+Tt>>1)]||vs[(bt+jt>>1)*Pa+(ut+Tt>>1)])}const ye=new i.aN,we=new i.aO;let Ee=0;function Ge(Xe,Ze){const ft=Ze*Pa+Xe;return Bl[ft]===0&&(ye.emplaceBack(So[2*ft+0],So[2*ft+1],Xe*i.ab/Xo,Ze*i.ab/Xo),Bl[ft]=++Ee),Bl[ft]-1}function $e(Xe,Ze,ft,gt,ut,bt){const _t=Xe+ft>>1,Mt=Ze+gt>>1;if(Math.abs(Xe-ut)+Math.abs(Ze-bt)>1&&vs[Mt*Pa+_t])$e(ut,bt,Xe,Ze,_t,Mt),$e(ft,gt,ut,bt,_t,Mt);else{const Tt=Ge(Xe,Ze),jt=Ge(ft,gt),Vt=Ge(ut,bt);we.emplaceBack(Tt,jt,Vt)}}return $e(0,0,Xo,Xo,Xo,0),$e(Xo,Xo,0,0,0,Xo),{vertices:ye,indices:we}}(this.tileID.canonical,d);E=M.vertices,I=M.indices}else{E=new i.aN,I=new i.aO;for(const{x:q,y:X}of x)E.emplaceBack(q,X,0,0);const M=i.b2(E.int16,void 0,4);for(let q=0;q<M.length;q+=3)I.emplaceBack(M[q],M[q+1],M[q+2])}this._tileBoundsBuffer=l.createVertexBuffer(E,i.b3.members),this._tileBoundsIndexBuffer=l.createIndexBuffer(I),this._tileBoundsSegments=i.b1.simpleSegment(0,0,E.length,I.length)}_makeGlobeTileDebugBuffers(l,d){const x=d.projection;if(!x||x.name!=="globe"||d.freezeTileCoverage)return;const E=this.tileID.canonical,I=i.b4(E,d),M=i.b5(I),q=i.a9(d.zoom);let X;q>0&&(X=i.a6.mat4.invert(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(l,E,d,M,X,q),this._makeGlobeTileDebugTextBuffer(l,E,d,M,X,q)}_globePoint(l,d,x,E,I,M,q){let X=i.b6(l,d,x);if(M){const ne=1<<x.z,se=i.am(E.center.lng),ye=i.at(E.center.lat),we=(x.x+.5)/ne-se;let Ee=0;we>.5?Ee=-1:we<-.5&&(Ee=1);let Ge=(l/i.ab+x.x)/ne+Ee,$e=(d/i.ab+x.y)/ne;Ge=(Ge-se)*E._pixelsPerMercatorPixel+se,$e=($e-ye)*E._pixelsPerMercatorPixel+ye;const Xe=[Ge*E.worldSize,$e*E.worldSize,0];i.a6.vec3.transformMat4(Xe,Xe,M),X=i.b7(X,Xe,q)}return i.a6.vec3.transformMat4(X,X,I)}_makeGlobeTileDebugBorderBuffer(l,d,x,E,I,M){const q=new i.a_,X=new i.a$,ne=new i.b8,se=(we,Ee,Ge,$e,Xe)=>{const Ze=(Ge-we)/(Xe-1),ft=($e-Ee)/(Xe-1),gt=q.length;for(let ut=0;ut<Xe;ut++){const bt=we+ut*Ze,_t=Ee+ut*ft;q.emplaceBack(bt,_t);const Mt=this._globePoint(bt,_t,d,x,E,I,M);ne.emplaceBack(Mt[0],Mt[1],Mt[2]),X.emplaceBack(gt+ut)}},ye=i.ab;se(0,0,ye,0,16),se(ye,0,ye,ye,16),se(ye,ye,0,ye,16),se(0,ye,0,0,16),this._tileDebugIndexBuffer=l.createIndexBuffer(X),this._tileDebugBuffer=l.createVertexBuffer(q,i.b0.members),this._globeTileDebugBorderBuffer=l.createVertexBuffer(ne,i.b9.members),this._tileDebugSegments=i.b1.simpleSegment(0,0,q.length,X.length)}_makeGlobeTileDebugTextBuffer(l,d,x,E,I,M){const q=i.ab/4,X=new i.a_,ne=new i.aO,se=new i.b8,ye=25;ne.reserve(32),X.reserve(ye),se.reserve(ye);const we=(Ee,Ge)=>ye*Ee+Ge;for(let Ee=0;Ee<ye;Ee++){const Ge=Ee*q;for(let $e=0;$e<ye;$e++){const Xe=$e*q;X.emplaceBack(Xe,Ge);const Ze=this._globePoint(Xe,Ge,d,x,E,I,M);se.emplaceBack(Ze[0],Ze[1],Ze[2])}}for(let Ee=0;Ee<4;Ee++)for(let Ge=0;Ge<4;Ge++){const $e=we(Ee,Ge),Xe=we(Ee,Ge+1),Ze=we(Ee+1,Ge),ft=we(Ee+1,Ge+1);ne.emplaceBack($e,Xe,Ze),ne.emplaceBack(Ze,Xe,ft)}this._tileDebugTextIndexBuffer=l.createIndexBuffer(ne),this._tileDebugTextBuffer=l.createVertexBuffer(X,i.b0.members),this._globeTileDebugTextBuffer=l.createVertexBuffer(se,i.b9.members),this._tileDebugTextSegments=i.b1.simpleSegment(0,0,ye,32)}destroy(l=!1){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!l&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.ba.setPbf(i.bb);class Oe extends ae{constructor(l,d,x,E,I){super(l,d,x,E,I),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(l,d){const x=d.context,E=x.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l,{premultiply:!1}):this.texture=new i.T(x,l,E.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(l=16384,d){const x=this._mrt=new i.ba(30),E=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(l-1)}});return this.entireBuffer=null,this.request=i.bc(E,(I,M,q,X)=>{if(I)d(I);else try{const ne=x.getHeaderLength(M);if(ne>l)return void(this.request=this.fetchHeader(ne,d));x.parseHeader(M),this._isHeaderLoaded=!0;let se=0;for(const ye of Object.values(x.layers))se=Math.max(se,ye.dataIndex[ye.dataIndex.length-1].last_byte);M.byteLength>=se&&(this.entireBuffer=M),d(null,this.entireBuffer||M,q,X)}catch(ne){d(ne)}}),this.request}fetchBand(l,d,x){const E=this._mrt;if(!this._isHeaderLoaded||!E)return void x(new Error("Tile header is not ready"));const I=this.actor;if(!I)return void x(new Error("Can't fetch tile band without an actor"));let M;const q=(ye,we)=>{M.complete(ye,we),ye?x(ye):(this.updateTextureDescriptor(l,d),x(null,this.textureDescriptor&&this.textureDescriptor.img))},X=(ye,we)=>{if(ye)return x(ye);const Ee=I.send("decodeRasterArray",{buffer:we,task:M},q,void 0,!0);this._workQueue.push(()=>{Ee&&Ee.cancel(),M.cancel()})},ne=E.getLayer(l);if(!ne)return void x(new Error(`Unknown sourceLayer "${l}"`));if(ne.hasDataForBand(d))return this.updateTextureDescriptor(l,d),void x(null,this.textureDescriptor?this.textureDescriptor.img:null);const se=ne.getDataRange([d]);if(M=E.createDecodingTask(se),!M||M.tasks.length)if(this.flushQueues(),this.entireBuffer)X(null,this.entireBuffer.slice(se.firstByte,se.lastByte+1));else{const ye=Object.assign({},this.requestParams,{headers:{Range:`bytes=${se.firstByte}-${se.lastByte}`}}),we=i.bc(ye,X);this._fetchQueue.push(()=>{we.cancel(),M.cancel()})}else x(null)}updateNeeded(l,d){return(!this.textureDescriptor||this.textureDescriptor.band!==d||this.textureDescriptor.layer!==l)&&this.state!=="errored"}updateTextureDescriptor(l,d){if(!this._mrt)return;const x=this._mrt.getLayer(l);if(!x||!x.hasBand(d)||!x.hasDataForBand(d))return;const{bytes:E,tileSize:I,buffer:M,offset:q,scale:X}=x.getBandView(d),ne=I+2*M,se={data:E,width:ne,height:ne},ye=this.texture;ye&&ye instanceof i.T&&ye.update(se,{premultiply:!1}),this.textureDescriptor={layer:l,band:d,img:se,buffer:M,offset:q,tileSize:I,format:x.pixelFormat,mix:[X,256*X,65536*X,16777216*X]}}}class At{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,x){const E=l.wrapped().key;this.data[E]===void 0&&(this.data[E]=[]);const I={value:d,timeout:void 0};if(x!==void 0&&(I.timeout=setTimeout(()=>{this.remove(l,I)},x)),this.data[E].push(I),this.order.push(E),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const x=l.wrapped().key,E=d===void 0?0:this.data[x].indexOf(d),I=this.data[x][E];return this.data[x].splice(E,1),I.timeout&&clearTimeout(I.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(I.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const x in this.data)for(const E of this.data[x])l(E.value)||d.push(E);for(const x of d)this.remove(x.value.tileID,x)}}class Ht{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,x){const E=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][E]=this.stateChanges[l][E]||{},i.l(this.stateChanges[l][E],x),this.deletedStates[l]===null){this.deletedStates[l]={};for(const I in this.state[l])I!==E&&(this.deletedStates[l][I]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][E]===null){this.deletedStates[l][E]={};for(const I in this.state[l][E])x[I]||(this.deletedStates[l][E][I]=null)}else for(const I in x)this.deletedStates[l]&&this.deletedStates[l][E]&&this.deletedStates[l][E][I]===null&&delete this.deletedStates[l][E][I]}removeFeatureState(l,d,x){if(this.deletedStates[l]===null)return;const E=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},x&&d!==void 0)this.deletedStates[l][E]!==null&&(this.deletedStates[l][E]=this.deletedStates[l][E]||{},this.deletedStates[l][E][x]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][E])for(x in this.deletedStates[l][E]={},this.stateChanges[l][E])this.deletedStates[l][E][x]=null;else this.deletedStates[l][E]=null;else this.deletedStates[l]=null}getState(l,d){const x=this.state[l]||{},E=this.stateChanges[l]||{},I=this.deletedStates[l];if(I===null)return{};if(d!==void 0){const q=String(d),X=i.l({},x[q],E[q]);if(I){const ne=I[d];if(ne===null)return{};for(const se in ne)delete X[se]}return X}const M=i.l({},x,E);if(I)for(const q in I)delete M[q];return M}initializeTileState(l,d){l.setFeatureState(this.state,d)}coalesceChanges(l,d){const x={};for(const E in this.stateChanges){this.state[E]=this.state[E]||{};const I={};for(const M in this.stateChanges[E])this.state[E][M]||(this.state[E][M]={}),i.l(this.state[E][M],this.stateChanges[E][M]),I[M]=this.state[E][M];x[E]=I}for(const E in this.deletedStates){this.state[E]=this.state[E]||{};const I={};if(this.deletedStates[E]===null)for(const M in this.state[E])I[M]={},this.state[E][M]={};else for(const M in this.deletedStates[E]){if(this.deletedStates[E][M]===null)this.state[E][M]={};else if(this.state[E][M])for(const q of Object.keys(this.deletedStates[E][M]))delete this.state[E][M][q];I[M]=this.state[E][M]}x[E]=x[E]||{},i.l(x[E],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(const E in l)l[E].setFeatureState(x,d)}}class er extends i.E{constructor(l,d,x){super(),this.id=l,this._onlySymbols=x,d.on("data",E=>{E.dataType==="source"&&E.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new At(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Ht,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(l){this.map=l,this._minTileCacheSize=this._minTileCacheSize===void 0&&l?l._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&l?l._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const d=this._tiles[l];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,d){return l.isSymbolTile=this._onlySymbols,l.isExtraShadowCaster=this._shadowCasterTiles[l.tileID.key],this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l)}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l)}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const x=this._tiles[d];x.upload(l),x.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return i.bd(this._tiles).map(l=>l.tileID).sort(tr).map(l=>l.key)}getRenderableIds(l,d){const x=[];for(const E in this._tiles)this._isIdRenderable(+E,l,d)&&x.push(this._tiles[E]);return l?x.sort((E,I)=>{const M=E.tileID,q=I.tileID,X=new i.P(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),ne=new i.P(q.canonical.x,q.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-q.overscaledZ||ne.y-X.y||ne.x-X.x}).map(E=>E.tileID.key):x.map(E=>E.tileID).sort(tr).map(E=>E.key)}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d,x){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())&&(x||!this._shadowCasterTiles[l])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(+l,"reloading")}}_reloadTile(l,d){const x=this._tiles[l];x&&(x.state!=="loading"&&(x.state=d),this._loadTile(x,this._tileLoaded.bind(this,x,l,d)))}_tileLoaded(l,d,x,E){if(E)if(l.state="errored",E.status!==404)this._source.fire(new i.t(E,{tile:l}));else{if(this._source.fire(new i.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:l})),!(l.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const I=this.map.painter.terrain;this.update(this.transform,I.getScaledDemTileSize(),!0),I.resetTileLookupCache(this.id)}else this.update(this.transform)}else l.timeAdded=i.q.now(),x==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this._source.type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),this._source.fire(new i.x("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id}))}_backfillDEM(l){const d=this.getRenderableIds();for(let E=0;E<d.length;E++){const I=d[E];if(l.neighboringTiles&&l.neighboringTiles[I]){const M=this.getTileByID(I);x(l,M),x(M,l)}}function x(E,I){if(!E.dem||E.dem.borderReady)return;E.needsHillshadePrepare=!0,E.needsDEMTextureUpload=!0;let M=I.tileID.canonical.x-E.tileID.canonical.x;const q=I.tileID.canonical.y-E.tileID.canonical.y,X=Math.pow(2,E.tileID.canonical.z),ne=I.tileID.key;M===0&&q===0||Math.abs(q)>1||(Math.abs(M)>1&&(Math.abs(M+X)===1?M+=X:Math.abs(M-X)===1&&(M-=X)),I.dem&&E.dem&&(E.dem.backfillBorder(I.dem,M,q),E.neighboringTiles&&E.neighboringTiles[ne]&&(E.neighboringTiles[ne].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,x,E){for(const I in this._tiles){let M=this._tiles[I];if(E[I]||!M.hasData()||M.tileID.overscaledZ<=d||M.tileID.overscaledZ>x)continue;let q=M.tileID;for(;M&&M.tileID.overscaledZ>d+1;){const ne=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[ne.key],M&&M.hasData()&&(q=ne)}let X=q;for(;X.overscaledZ>d;)if(X=X.scaledTo(X.overscaledZ-1),l[X.key]){E[q.key]=q;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const x=this._loadedParentTiles[l.key];return x&&x.tileID.overscaledZ>=d?x:null}for(let x=l.overscaledZ-1;x>=d;x--){const E=l.scaledTo(x),I=this._getLoadedTile(E);if(I)return I}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,d){d=d||this._source.tileSize;const x=Math.ceil(l.width/d)+1,E=Math.ceil(l.height/d)+1,I=Math.floor(x*E*5),M=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,I):I,q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,M):M;this._cache.setMaxSize(q)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const x={};for(const E in this._tiles){const I=this._tiles[E];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+d),x[I.tileID.key]=I}this._tiles=x;for(const E in this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(const E in this._tiles)this._setTileReloadTimer(+E,this._tiles[E])}}update(l,d,x,E){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!x)return;this.updateCacheSize(l,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const I=this._source.type==="batched-model";let M;if(this.used||this.usedForTerrain){if(this._source.tileID)M=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(ne=>new i.aA(ne.canonical.z,ne.wrap,ne.canonical.z,ne.canonical.x,ne.canonical.y));else if(this.tileCoverLift!==0){const ne=l.clone();ne.tileCoverLift=this.tileCoverLift,M=ne.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:I}),this._source.minzoom<=1&&l.projection.name==="globe"&&(M.push(new i.aA(1,0,1,0,0)),M.push(new i.aA(1,0,1,1,0)),M.push(new i.aA(1,0,1,0,1)),M.push(new i.aA(1,0,1,1,1)))}else if(M=l.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:I}),this._source.hasTile){const ne=this._source.hasTile.bind(this._source);M=M.filter(se=>ne(se))}}else M=[];if(M.length>0&&this.castsShadows&&E&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!_r(this._source.type)){const ne=l.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!x}),se=Math.min(ne,this._source.maxzoom);if(I){const ye=l.extendTileCover(M,se);for(const we of ye)M.push(we)}else{const ye=l.extendTileCover(M,se,E);for(const we of ye)this._shadowCasterTiles[we.key]=!0,M.push(we)}}const q=this._updateRetainedTiles(M);if(_r(this._source.type)&&M.length!==0){const ne={},se={},ye=Object.keys(q);for(const Ee of ye){const Ge=q[Ee],$e=this._tiles[Ee];if(!$e||$e.fadeEndTime&&$e.fadeEndTime<=i.q.now())continue;const Xe=this.findLoadedParent(Ge,Math.max(Ge.overscaledZ-er.maxOverzooming,this._source.minzoom));Xe&&(this._addTile(Xe.tileID),ne[Xe.tileID.key]=Xe.tileID),se[Ee]=Ge}const we=M[M.length-1].overscaledZ;for(const Ee in this._tiles){const Ge=this._tiles[Ee];if(q[Ee]||!Ge.hasData())continue;let $e=Ge.tileID;for(;$e.overscaledZ>we;){$e=$e.scaledTo($e.overscaledZ-1);const Xe=this._tiles[$e.key];if(Xe&&Xe.hasData()&&se[$e.key]){q[Ee]=Ge.tileID;break}}}for(const Ee in ne)q[Ee]||(this._coveredTiles[Ee]=!0,q[Ee]=ne[Ee])}for(const ne in q)this._tiles[ne].clearFadeHold();const X=i.be(this._tiles,q);for(const ne of X){const se=this._tiles[ne];se.hasSymbolBuckets&&!se.holdingForFade()?se.setHoldDuration(this.map._fadeDuration):se.hasSymbolBuckets&&!se.symbolFadeFinished()||this._removeTile(+ne)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const d={};if(l.length===0)return d;const x={},E=l.reduce((ne,se)=>Math.min(ne,se.overscaledZ),1/0),I=l[0].overscaledZ,M=Math.max(I-er.maxOverzooming,this._source.minzoom),q=Math.max(I+er.maxUnderzooming,this._source.minzoom),X={};for(const ne of l){const se=this._addTile(ne);d[ne.key]=ne,se.hasData()||E<this._source.maxzoom&&(X[ne.key]=ne)}this._retainLoadedChildren(X,E,q,d);for(const ne of l){let se=this._tiles[ne.key];if(se.hasData())continue;if(ne.canonical.z>=this._source.maxzoom){const we=ne.children(this._source.maxzoom)[0],Ee=this.getTile(we);if(Ee&&Ee.hasData()){d[we.key]=we;continue}}else{const we=ne.children(this._source.maxzoom);if(d[we[0].key]&&d[we[1].key]&&d[we[2].key]&&d[we[3].key])continue}let ye=se.wasRequested();for(let we=ne.overscaledZ-1;we>=M;--we){const Ee=ne.scaledTo(we);if(x[Ee.key]||(x[Ee.key]=!0,se=this.getTile(Ee),!se&&ye&&(se=this._addTile(Ee)),se&&(d[Ee.key]=Ee,ye=se.wasRequested(),se.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let x,E=this._tiles[l].tileID;for(;E.overscaledZ>0;){if(E.key in this._loadedParentTiles){x=this._loadedParentTiles[E.key];break}d.push(E.key);const I=E.scaledTo(E.overscaledZ-1);if(x=this._getLoadedTile(I),x)break;E=I}for(const I of d)this._loadedParentTiles[I]=x}}_addTile(l){let d=this._tiles[l.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[l.key]||this._reloadTile(l.key,"reloading"),d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const x=!!d;if(!x){const E=this.map?this.map.painter:null,I=this._source.tileSize*l.overscaleFactor();d=this._source.type==="raster-array"?new Oe(l,I,this.transform.tileZoom,E,this._isRaster):new ae(l,I,this.transform.tileZoom,E,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))}return d?(d.uses++,this._tiles[l.key]=d,x||this._source.fire(new i.x("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const x=d.getExpiryTimeout();x&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},x))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(l,d,x){const E=[],I=this.transform;if(!I)return E;const M=I.projection.name==="globe",q=i.am(I.center.lng);for(const X in this._tiles){const ne=this._tiles[X];if(x&&ne.clearQueryDebugViz(),ne.holdingForFade())continue;let se;if(M){const ye=ne.tileID.canonical;if(ye.z===0){const we=[Math.abs(i.ap(q,...fn(ye,-1))-q),Math.abs(i.ap(q,...fn(ye,1))-q)];se=[0,2*we.indexOf(Math.min(...we))-1]}else{const we=[Math.abs(i.ap(q,...fn(ye,-1))-q),Math.abs(i.ap(q,...fn(ye,0))-q),Math.abs(i.ap(q,...fn(ye,1))-q)];se=[we.indexOf(Math.min(...we))-1]}}else se=[0];for(const ye of se){const we=l.containsTile(ne,I,d,ye);we&&E.push(we)}}return E}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(l){return this._getRenderableCoordinates(l)}_getRenderableCoordinates(l,d){const x=this.getRenderableIds(l,d).map(I=>this._tiles[I].tileID),E=this.transform.projection.name==="globe";for(const I of x)I.projMatrix=this.transform.calculateProjMatrix(I.toUnwrapped()),I.expandedProjMatrix=E?this.transform.calculateProjMatrix(I.toUnwrapped(),!1,!0):I.projMatrix;return x}sortCoordinatesByDistance(l){const d=l.slice(),x=this.transform._camera.position,E=this.transform._camera.forward(),I={};for(const M of d){const q=1/(1<<M.canonical.z);I[M.key]=((M.canonical.x+.5)*q+M.wrap-x[0])*E[0]+((M.canonical.y+.5)*q-x[1])*E[1]-x[2]*E[2]}return d.sort((M,q)=>I[M.key]-I[q.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(_r(this._source.type))for(const l in this._tiles){const d=this._tiles[l];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(l,d,x){this._state.updateState(l=l||"_geojsonTileLayer",d,x)}removeFeatureState(l,d,x){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,x)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,x){const E=this._tiles[l];E&&E.setDependencies(d,x)}reloadTilesForDependencies(l,d){for(const x in this._tiles)this._tiles[x].hasDependency(l,d)&&this._reloadTile(+x,"reloading");this._cache.filter(x=>!x.hasDependency(l,d))}_preloadTiles(l,d){if(!this._sourceLoaded){const X=()=>{this._sourceLoaded&&(this._source.off("data",X),this._preloadTiles(l,d))};return void this._source.on("data",X)}const x=new Map,E=Array.isArray(l)?l:[l],I=this.map.painter.terrain,M=this.usedForTerrain&&I?I.getScaledDemTileSize():this._source.tileSize;for(const X of E){const ne=X.coveringTiles({tileSize:M,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const se of ne)x.set(se.key,se);this.usedForTerrain&&X.updateElevation(!1)}const q=Array.from(x.values());i.bf(q,(X,ne)=>{const se=new ae(X,this._source.tileSize*X.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(se,ye=>{this._source.type==="raster-dem"&&se.dem&&this._backfillDEM(se),ne(ye,se)})},d)}}function tr(v,l){const d=Math.abs(2*v.wrap)-+(v.wrap<0),x=Math.abs(2*l.wrap)-+(l.wrap<0);return v.overscaledZ-l.overscaledZ||x-d||l.canonical.y-v.canonical.y||l.canonical.x-v.canonical.x}function _r(v){return v==="raster"||v==="image"||v==="video"||v==="custom"}function fn(v,l){const d=1<<v.z;return[v.x/d+l,(v.x+1)/d+l]}er.maxOverzooming=10,er.maxUnderzooming=3;class pn{constructor(l){this.style=l,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const l=!1,d=!1;for(const x in this.style._mergedLayers){const E=this.style._mergedLayers[x];if(E.type==="fill-extrusion")this.layers.push({layer:E,visible:l,visibilityChanged:d});else if(E.type==="model"){const I=this.style.getLayerSource(E);I&&I.type==="batched-model"&&this.layers.push({layer:E,visible:l,visibilityChanged:d})}}}onNewFrame(l){this.layersGotHidden=!1;for(const d of this.layers){const x=d.layer;let E=!1;x.type==="fill-extrusion"?E=!x.isHidden(l)&&x.paint.get("fill-extrusion-opacity")>0:x.type==="model"&&(E=!x.isHidden(l)&&x.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!E&&d.visible,d.visible=E}}updateZOffset(l,d){this.currentBuildingBuckets=[];for(const E of this.layers){const I=E.layer,M=this.style.getLayerSourceCache(I);let q=1;I.type==="fill-extrusion"&&(q=E.visible?I.paint.get("fill-extrusion-vertical-scale"):0);let X=M?M.getTile(d):null;if(!X&&M&&d.canonical.z>M.getSource().minzoom){let ne=d.scaledTo(Math.min(M.getSource().maxzoom,d.overscaledZ-1));for(;ne.overscaledZ>=M.getSource().minzoom&&(X=M.getTile(ne),!X&&ne.overscaledZ!==0);)ne=ne.scaledTo(ne.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:X?X.getBucket(I):null,tileID:X?X.tileID:d,verticalScale:q})}l.hasAnyZOffset=!1;let x=!1;for(let E=0;E<l.symbolInstances.length;E++){const I=l.symbolInstances.get(E),M=I.zOffset,q=this._getHeightAtTileOffset(d,I.tileAnchorX,I.tileAnchorY);I.zOffset=q!==Number.NEGATIVE_INFINITY?q:M,x||M===I.zOffset||(x=!0),l.hasAnyZOffset||I.zOffset===0||(l.hasAnyZOffset=!0)}x&&(l.zOffsetBuffersNeedUpload=!0,l.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(l,d,x,E){let I=d,M=x;if(l.canonical.z!==E.canonical.z){const q=E.canonical,X=1/(1<<l.canonical.z-q.z);I=(d+l.canonical.x*i.ab)*X-q.x*i.ab|0,M=(x+l.canonical.y*i.ab)*X-q.y*i.ab|0}return{tileX:I,tileY:M}}_getHeightAtTileOffset(l,d,x){let E,I;for(let M=0;M<this.layers.length;++M){if(this.layers[M].layer.type!=="fill-extrusion")continue;const{bucket:q,tileID:X,verticalScale:ne}=this.currentBuildingBuckets[M];if(!q)continue;const{tileX:se,tileY:ye}=this._mapCoordToOverlappingTile(l,d,x,X),we=q.getHeightAtTileCoord(se,ye);we&&we.height!==void 0&&(we.hidden?E=we.height:I=Math.max(we.height*ne,I||0))}if(I!==void 0)return I;for(let M=0;M<this.layers.length;++M){const q=this.layers[M];if(q.layer.type!=="model"||!q.visible)continue;const{bucket:X,tileID:ne}=this.currentBuildingBuckets[M];if(!X)continue;const{tileX:se,tileY:ye}=this._mapCoordToOverlappingTile(l,d,x,ne),we=X.getHeightAtTileCoord(se,ye);if(we&&!we.hidden)return we.height===void 0&&E!==void 0?Math.min(we.maxHeight,E)*we.verticalScale:we.height?we.height*we.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Nn(v,l){const d={};for(const x in v)x!=="ref"&&(d[x]=v[x]);return i.bg.forEach(x=>{x in l&&(d[x]=l[x])}),d}function Mn(v){v=v.slice();const l=Object.create(null);for(let d=0;d<v.length;d++)l[v[d].id]=v[d];for(let d=0;d<v.length;d++)"ref"in v[d]&&(v[d]=Nn(v[d],l[v[d].ref]));return v}const Xr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Qn(v,l,d){d.push({command:Xr.addSource,args:[v,l[v]]})}function oi(v,l,d){l.push({command:Xr.removeSource,args:[v]}),d[v]=!0}function Pi(v,l,d,x){oi(v,d,x),Qn(v,l,d)}function Sr(v,l,d){let x;for(x in v[d])if(v[d].hasOwnProperty(x)&&x!=="data"&&!i.bh(v[d][x],l[d][x]))return!1;for(x in l[d])if(l[d].hasOwnProperty(x)&&x!=="data"&&!i.bh(v[d][x],l[d][x]))return!1;return!0}function ln(v,l,d,x,E,I){let M;for(M in l=l||{},v=v||{})v.hasOwnProperty(M)&&(i.bh(v[M],l[M])||d.push({command:I,args:[x,M,l[M],E]}));for(M in l)l.hasOwnProperty(M)&&!v.hasOwnProperty(M)&&(i.bh(v[M],l[M])||d.push({command:I,args:[x,M,l[M],E]}))}function Jn(v){return v.id}function Bi(v,l){return v[l.id]=l,v}class Ns{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=i.ap(l,0,1);let d=1,x=this._distances[d];const E=l*this.paddedLength+this.padding;for(;x<E&&d<this._distances.length;)x=this._distances[++d];const I=d-1,M=this._distances[I],q=x-M,X=q>0?(E-M)/q:0;return this.points[I].mult(1-X).add(this.points[d].mult(X))}}class Ks{constructor(l,d,x){const E=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(l/x),this.yCellCount=Math.ceil(d/x);for(let M=0;M<this.xCellCount*this.yCellCount;M++)E.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,x,E,I){this._forEachCell(d,x,E,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(x),this.bboxes.push(E),this.bboxes.push(I)}insertCircle(l,d,x,E){this._forEachCell(d-E,x-E,d+E,x+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(x),this.circles.push(E)}_insertBoxCell(l,d,x,E,I,M){this.boxCells[I].push(M)}_insertCircleCell(l,d,x,E,I,M){this.circleCells[I].push(M)}_query(l,d,x,E,I,M){if(x<0||l>this.width||E<0||d>this.height)return!I&&[];const q=[];if(l<=0&&d<=0&&this.width<=x&&this.height<=E){if(I)return!0;for(let X=0;X<this.boxKeys.length;X++)q.push({key:this.boxKeys[X],x1:this.bboxes[4*X],y1:this.bboxes[4*X+1],x2:this.bboxes[4*X+2],y2:this.bboxes[4*X+3]});for(let X=0;X<this.circleKeys.length;X++){const ne=this.circles[3*X],se=this.circles[3*X+1],ye=this.circles[3*X+2];q.push({key:this.circleKeys[X],x1:ne-ye,y1:se-ye,x2:ne+ye,y2:se+ye})}return M?q.filter(M):q}return this._forEachCell(l,d,x,E,this._queryCell,q,{hitTest:I,seenUids:{box:{},circle:{}}},M),I?q.length>0:q}_queryCircle(l,d,x,E,I){const M=l-x,q=l+x,X=d-x,ne=d+x;if(q<0||M>this.width||ne<0||X>this.height)return!E&&[];const se=[];return this._forEachCell(M,X,q,ne,this._queryCellCircle,se,{hitTest:E,circle:{x:l,y:d,radius:x},seenUids:{box:{},circle:{}}},I),E?se.length>0:se}query(l,d,x,E,I){return this._query(l,d,x,E,!1,I)}hitTest(l,d,x,E,I){return this._query(l,d,x,E,!0,I)}hitTestCircle(l,d,x,E){return this._queryCircle(l,d,x,!0,E)}_queryCell(l,d,x,E,I,M,q,X){const ne=q.seenUids,se=this.boxCells[I];if(se!==null){const we=this.bboxes;for(const Ee of se)if(!ne.box[Ee]){ne.box[Ee]=!0;const Ge=4*Ee;if(l<=we[Ge+2]&&d<=we[Ge+3]&&x>=we[Ge+0]&&E>=we[Ge+1]&&(!X||X(this.boxKeys[Ee]))){if(q.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[Ee],x1:we[Ge],y1:we[Ge+1],x2:we[Ge+2],y2:we[Ge+3]})}}}const ye=this.circleCells[I];if(ye!==null){const we=this.circles;for(const Ee of ye)if(!ne.circle[Ee]){ne.circle[Ee]=!0;const Ge=3*Ee;if(this._circleAndRectCollide(we[Ge],we[Ge+1],we[Ge+2],l,d,x,E)&&(!X||X(this.circleKeys[Ee]))){if(q.hitTest)return M.push(!0),!0;{const $e=we[Ge],Xe=we[Ge+1],Ze=we[Ge+2];M.push({key:this.circleKeys[Ee],x1:$e-Ze,y1:Xe-Ze,x2:$e+Ze,y2:Xe+Ze})}}}}}_queryCellCircle(l,d,x,E,I,M,q,X){const ne=q.circle,se=q.seenUids,ye=this.boxCells[I];if(ye!==null){const Ee=this.bboxes;for(const Ge of ye)if(!se.box[Ge]){se.box[Ge]=!0;const $e=4*Ge;if(this._circleAndRectCollide(ne.x,ne.y,ne.radius,Ee[$e+0],Ee[$e+1],Ee[$e+2],Ee[$e+3])&&(!X||X(this.boxKeys[Ge])))return M.push(!0),!0}}const we=this.circleCells[I];if(we!==null){const Ee=this.circles;for(const Ge of we)if(!se.circle[Ge]){se.circle[Ge]=!0;const $e=3*Ge;if(this._circlesCollide(Ee[$e],Ee[$e+1],Ee[$e+2],ne.x,ne.y,ne.radius)&&(!X||X(this.circleKeys[Ge])))return M.push(!0),!0}}}_forEachCell(l,d,x,E,I,M,q,X){const ne=this._convertToXCellCoord(l),se=this._convertToYCellCoord(d),ye=this._convertToXCellCoord(x),we=this._convertToYCellCoord(E);for(let Ee=ne;Ee<=ye;Ee++)for(let Ge=se;Ge<=we;Ge++)if(I.call(this,l,d,x,E,this.xCellCount*Ge+Ee,M,q,X))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,x,E,I,M){const q=E-l,X=I-d,ne=x+M;return ne*ne>q*q+X*X}_circleAndRectCollide(l,d,x,E,I,M,q){const X=(M-E)/2,ne=Math.abs(l-(E+X));if(ne>X+x)return!1;const se=(q-I)/2,ye=Math.abs(d-(I+se));if(ye>se+x)return!1;if(ne<=X||ye<=se)return!0;const we=ne-X,Ee=ye-se;return we*we+Ee*Ee<=x*x}}const Ro={unknown:0,flipRequired:1,flipNotRequired:2},yn=Math.tan(85*Math.PI/180);function Yn(v,l,d,x,E,I,M){const q=i.a6.mat4.create();if(d)if(I.name==="globe"){const X=i.bi(E,l);i.a6.mat4.multiply(q,q,X)}else{const X=i.a6.mat2.invert([],M);q[0]=X[0],q[1]=X[1],q[4]=X[2],q[5]=X[3],x||i.a6.mat4.rotateZ(q,q,E.angle)}else i.a6.mat4.multiply(q,E.labelPlaneMatrix,v);return q}function Li(v,l,d,x,E,I,M){const q=Yn(v,l,d,x,E,I,M);return I.name==="globe"&&d||(q[2]=q[6]=q[10]=q[14]=0),q}function da(v,l,d,x,E,I,M){if(d){if(I.name==="globe"){const q=Yn(v,l,d,x,E,I,M);return i.a6.mat4.invert(q,q),i.a6.mat4.multiply(q,v,q),q}{const q=i.a6.mat4.clone(v),X=i.a6.mat4.identity([]);return X[0]=M[0],X[1]=M[1],X[4]=M[2],X[5]=M[3],i.a6.mat4.multiply(q,q,X),x||i.a6.mat4.rotateZ(q,q,-E.angle),q}}return E.glCoordMatrix}function Ms(v,l,d,x){const E=[v,l,d,1];d?i.a6.vec4.transformMat4(E,E,x):qo(E,E,x);const I=E[3];return E[0]/=I,E[1]/=I,E[2]/=I,E}function fi(v,l){return Math.min(.5+v/l*.5,1.5)}function Po(v,l){const d=v[0]/v[3],x=v[1]/v[3];return d>=-l[0]&&d<=l[0]&&x>=-l[1]&&x<=l[1]}function zl(v,l,d,x,E,I,M,q,X,ne){const se=d.transform,ye=x?v.textSizeData:v.iconSizeData,we=i.bj(ye,d.transform.zoom),Ee=se.projection.name==="globe",Ge=[256/d.width*2+1,256/d.height*2+1],$e=x?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;$e.clear();let Xe=null;Ee&&(Xe=x?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const Ze=v.lineVertexArray,ft=x?v.text.placedSymbolArray:v.icon.placedSymbolArray,gt=d.transform.width/d.transform.height;let ut,bt=!1;for(let _t=0;_t<ft.length;_t++){const Mt=ft.get(_t),{numGlyphs:Tt,writingMode:jt}=Mt;if(jt!==i.bk.vertical||bt||ut===i.bk.horizontal||(bt=!0),ut=jt,(Mt.hidden||jt===i.bk.vertical)&&!bt){Ma(Tt,$e);continue}bt=!1;const Vt=new i.P(Mt.tileAnchorX,Mt.tileAnchorY);let{x:Rt,y:Dt,z:sr}=se.projection.projectTilePoint(Vt.x,Vt.y,ne.canonical);if(X){const[kr,Hr,Xn]=X(Vt);Rt+=kr,Dt+=Hr,sr+=Xn}const Cr=[Rt,Dt,sr,1];if(i.a6.vec4.transformMat4(Cr,Cr,l),!Po(Cr,Ge)){Ma(Tt,$e);continue}const Rr=Cr[3],wr=fi(d.transform.getCameraToCenterDistance(se.projection),Rr),en=i.bl(ye,we,Mt),or=M?en/wr:en*wr,Lr=Ms(Rt,Dt,sr,E);if(Lr[3]<=0){Ma(Tt,$e);continue}let Er={};const tn=M?null:X,sn=ps(Mt,or,!1,q,l,E,I,v.glyphOffsetArray,Ze,$e,Xe,Lr,Vt,Er,gt,tn,se.projection,ne,M);bt=sn.useVertical,tn&&sn.needsFlipping&&(Er={}),(sn.notEnoughRoom||bt||sn.needsFlipping&&ps(Mt,or,!0,q,l,E,I,v.glyphOffsetArray,Ze,$e,Xe,Lr,Vt,Er,gt,tn,se.projection,ne,M).notEnoughRoom)&&Ma(Tt,$e)}x?(v.text.dynamicLayoutVertexBuffer.updateData($e),Xe&&v.text.globeExtVertexBuffer&&v.text.globeExtVertexBuffer.updateData(Xe)):(v.icon.dynamicLayoutVertexBuffer.updateData($e),Xe&&v.icon.globeExtVertexBuffer&&v.icon.globeExtVertexBuffer.updateData(Xe))}function oa(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e){const{lineStartIndex:Xe,glyphStartIndex:Ze,segment:ft}=q,gt=Ze+q.numGlyphs,ut=Xe+q.lineLength,bt=l.getoffsetX(Ze),_t=l.getoffsetX(gt-1),Mt=Hl(v*bt,d,x,E,I,M,ft,Xe,ut,X,ne,se,ye,we,!0,Ee,Ge,$e);if(!Mt)return null;const Tt=Hl(v*_t,d,x,E,I,M,ft,Xe,ut,X,ne,se,ye,we,!0,Ee,Ge,$e);return Tt?{first:Mt,last:Tt}:null}function yo(v,l,d,x){return v===i.bk.horizontal&&Math.abs(x)>Math.abs(d)?{useVertical:!0}:v===i.bk.vertical?x>0?{needsFlipping:!0}:null:l!==Ro.unknown&&function(E,I){return E===0||Math.abs(I/E)>yn}(d,x)?l===Ro.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function ps(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e,Xe,Ze,ft){const gt=l/24,ut=v.lineOffsetX*gt,bt=v.lineOffsetY*gt,{lineStartIndex:_t,glyphStartIndex:Mt,numGlyphs:Tt,segment:jt,writingMode:Vt,flipState:Rt}=v,Dt=_t+v.lineLength,sr=Cr=>{if(se){const[or,Lr,Er]=Cr.up,tn=ne.length;i.bm(se,tn+0,or,Lr,Er),i.bm(se,tn+1,or,Lr,Er),i.bm(se,tn+2,or,Lr,Er),i.bm(se,tn+3,or,Lr,Er)}const[Rr,wr,en]=Cr.point;i.bn(ne,Rr,wr,en,Cr.angle)};if(Tt>1){const Cr=oa(gt,q,ut,bt,d,ye,we,v,X,I,Ee,$e,!1,Xe,Ze,ft);if(!Cr)return{notEnoughRoom:!0};if(x&&!d){let[Rr,wr,en]=Cr.first.point,[or,Lr,Er]=Cr.last.point;[Rr,wr]=Ms(Rr,wr,en,M),[or,Lr]=Ms(or,Lr,Er,M);const tn=yo(Vt,Rt,(or-Rr)*Ge,Lr-wr);if(v.flipState=tn&&tn.needsFlipping?Ro.flipRequired:Ro.flipNotRequired,tn)return tn}sr(Cr.first);for(let Rr=Mt+1;Rr<Mt+Tt-1;Rr++){const wr=Hl(gt*q.getoffsetX(Rr),ut,bt,d,ye,we,jt,_t,Dt,X,I,Ee,$e,!1,!1,Xe,Ze,ft);if(!wr)return ne.length-=4*(Rr-Mt),{notEnoughRoom:!0};sr(wr)}sr(Cr.last)}else{if(x&&!d){const Rr=Ms(we.x,we.y,0,E),wr=_t+jt+1,en=new i.P(X.getx(wr),X.gety(wr)),or=Ms(en.x,en.y,0,E),Lr=or[3]>0?or:Ql(we,en,Rr,1,E,void 0,Xe,Ze.canonical),Er=yo(Vt,Rt,(Lr[0]-Rr[0])*Ge,Lr[1]-Rr[1]);if(v.flipState=Er&&Er.needsFlipping?Ro.flipRequired:Ro.flipNotRequired,Er)return Er}const Cr=Hl(gt*q.getoffsetX(Mt),ut,bt,d,ye,we,jt,_t,Dt,X,I,Ee,$e,!1,!1,Xe,Ze,ft);if(!Cr)return{notEnoughRoom:!0};sr(Cr)}return{}}function $c(v,l,d,x,E){const{x:I,y:M,z:q}=x.projectTilePoint(v.x,v.y,l);if(!E)return Ms(I,M,q,d);const[X,ne,se]=E(v);return Ms(I+X,M+ne,q+se,d)}function Ql(v,l,d,x,E,I,M,q){const X=$c(v.sub(l)._unit()._add(v),q,E,M,I);return i.a6.vec3.sub(X,d,X),i.a6.vec3.normalize(X,X),i.a6.vec3.scaleAndAdd(X,d,X,x)}function Hl(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e,Xe,Ze){const ft=x?v-l:v+l;let gt=ft>0?1:-1,ut=0;x&&(gt*=-1,ut=Math.PI),gt<0&&(ut+=Math.PI);let bt=q+M+(gt>0?0:1)|0,_t=E,Mt=E,Tt=0,jt=0;const Vt=Math.abs(ft),Rt=[],Dt=[];let sr=I,Cr=sr;const Rr=()=>Ql(Cr,sr,Mt,Vt-Tt+1,se,we,$e,Xe.canonical);for(;Tt+jt<=Vt;){if(bt+=gt,bt<q||bt>=X)return null;if(Mt=_t,Cr=sr,Rt.push(Mt),Ee&&Dt.push(Cr),sr=new i.P(ne.getx(bt),ne.gety(bt)),_t=ye[bt],!_t){const Hr=$c(sr,Xe.canonical,se,$e,we);_t=Hr[3]>0?ye[bt]=Hr:Rr()}Tt+=jt,jt=i.a6.vec3.distance(Mt,_t)}Ge&&we&&(ye[bt]&&(_t=Rr(),jt=i.a6.vec3.distance(Mt,_t)),ye[bt]=_t);const wr=(Vt-Tt)/jt,en=sr.sub(Cr)._mult(wr)._add(Cr),or=i.a6.vec3.sub([],_t,Mt),Lr=i.a6.vec3.scaleAndAdd([],Mt,or,wr);let Er=[0,0,1],tn=or[0],sn=or[1];if(Ze&&(Er=$e.upVector(Xe.canonical,en.x,en.y),Er[0]!==0||Er[1]!==0||Er[2]!==1)){const Hr=[Er[2],0,-Er[0]],Xn=i.a6.vec3.cross([],Er,Hr);i.a6.vec3.normalize(Hr,Hr),i.a6.vec3.normalize(Xn,Xn),tn=i.a6.vec3.dot(or,Hr),sn=i.a6.vec3.dot(or,Xn)}if(d){const Hr=i.a6.vec3.cross([],Er,or);i.a6.vec3.normalize(Hr,Hr),i.a6.vec3.scaleAndAdd(Lr,Lr,Hr,d*gt)}const kr=ut+Math.atan2(sn,tn);return Rt.push(Lr),Ee&&Dt.push(en),{point:Lr,angle:kr,path:Rt,tilePath:Dt,up:Er}}function Ma(v,l){const d=l.length,x=d+4*v;l.resize(x),l.float32.fill(-1/0,4*d,4*x)}function qo(v,l,d){const x=l[0],E=l[1];return v[0]=d[0]*x+d[4]*E+d[12],v[1]=d[1]*x+d[5]*E+d[13],v[3]=d[3]*x+d[7]*E+d[15],v}const Xs=100;class Bo{constructor(l,d,x=new Ks(l.width+200,l.height+200,25),E=new Ks(l.width+200,l.height+200,25)){this.transform=l,this.grid=x,this.ignoredGrid=E,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Xs,this.screenBottomBoundary=l.height+Xs,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=d}placeCollisionBox(l,d,x,E,I,M,q,X){let ne=x.projectedAnchorX,se=x.projectedAnchorY,ye=x.projectedAnchorZ;const we=x.elevation,Ee=x.tileID,Ge=l.getProjection();if(we&&Ee){const[_t,Mt,Tt]=Ge.upVector(Ee.canonical,x.tileAnchorX,x.tileAnchorY),jt=Ge.upVectorScale(Ee.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;ne+=_t*we*jt,se+=Mt*we*jt,ye+=Tt*we*jt}const $e=this.projectAndGetPerspectiveRatio(q,ne,se,ye,x.tileID,Ge.name==="globe"||!!we||this.transform.pitch>0,Ge),Xe=M*$e.perspectiveRatio,Ze=(x.x1*d+E.x-x.padding)*Xe+$e.point.x,ft=(x.y1*d+E.y-x.padding)*Xe+$e.point.y,gt=(x.x2*d+E.x+x.padding)*Xe+$e.point.x,ut=(x.y2*d+E.y+x.padding)*Xe+$e.point.y,bt=$e.perspectiveRatio<=.55||$e.occluded;return!this.isInsideGrid(Ze,ft,gt,ut)||!I&&this.grid.hitTest(Ze,ft,gt,ut,X)||bt?{box:[],offscreen:!1,occluded:$e.occluded}:{box:[Ze,ft,gt,ut],offscreen:this.isOffscreen(Ze,ft,gt,ut),occluded:!1}}placeCollisionCircles(l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e){const Xe=[],Ze=this.transform.elevation,ft=l.getProjection(),gt=Ze?Ze.getAtTileOffsetFunc($e,this.transform.center.lat,this.transform.worldSize,ft):null,ut=new i.P(x.tileAnchorX,x.tileAnchorY);let{x:bt,y:_t,z:Mt}=ft.projectTilePoint(ut.x,ut.y,$e.canonical);if(gt){const[en,or,Lr]=gt(ut);bt+=en,_t+=or,Mt+=Lr}const Tt=ft.name==="globe",jt=this.projectAndGetPerspectiveRatio(q,bt,_t,Mt,$e,Tt||!!Ze||this.transform.pitch>0,ft),{perspectiveRatio:Vt}=jt,Rt=(ye?M/Vt:M*Vt)/i.bq,Dt=Ms(bt,_t,Mt,X),sr=jt.signedDistanceFromCamera>0?oa(Rt,I,x.lineOffsetX*Rt,x.lineOffsetY*Rt,!1,Dt,ut,x,E,X,{},Ze&&!ye?gt:null,ye&&!!Ze,ft,$e,ye):null;let Cr=!1,Rr=!1,wr=!0;if(sr&&!jt.occluded){const en=.5*Ee*Vt+Ge,or=new i.P(-100,-100),Lr=new i.P(this.screenRightBoundary,this.screenBottomBoundary),Er=new Ns,{first:tn,last:sn}=sr,kr=tn.path.length;let Hr=[];for(let Fn=kr-1;Fn>=1;Fn--)Hr.push(tn.path[Fn]);for(let Fn=1;Fn<sn.path.length;Fn++)Hr.push(sn.path[Fn]);const Xn=2.5*en;ne&&(Hr=Hr.map(([Fn,li,On],ii)=>(gt&&!Tt&&(On=gt(ii<kr-1?tn.tilePath[kr-1-ii]:sn.tilePath[ii-kr+2])[2]),Ms(Fn,li,On,ne))),Hr.some(Fn=>Fn[3]<=0)&&(Hr=[]));let hn=[];if(Hr.length>0){let Fn=1/0,li=-1/0,On=1/0,ii=-1/0;for(const zi of Hr)Fn=Math.min(Fn,zi[0]),On=Math.min(On,zi[1]),li=Math.max(li,zi[0]),ii=Math.max(ii,zi[1]);li>=or.x&&Fn<=Lr.x&&ii>=or.y&&On<=Lr.y&&(hn=[Hr.map(zi=>new i.P(zi[0],zi[1]))],(Fn<or.x||li>Lr.x||On<or.y||ii>Lr.y)&&(hn=i.bo(hn,or.x,or.y,Lr.x,Lr.y)))}for(const Fn of hn){Er.reset(Fn,.25*en);let li=0;li=Er.length<=.5*en?1:Math.ceil(Er.paddedLength/Xn)+1;for(let On=0;On<li;On++){const ii=On/Math.max(li-1,1),zi=Er.lerp(ii),ji=zi.x+Xs,Ws=zi.y+Xs;Xe.push(ji,Ws,en,0);const ho=ji-en,ko=Ws-en,Ih=ji+en,Xa=Ws+en;if(wr=wr&&this.isOffscreen(ho,ko,Ih,Xa),Rr=Rr||this.isInsideGrid(ho,ko,Ih,Xa),!d&&this.grid.hitTestCircle(ji,Ws,en,we)&&(Cr=!0,!se))return{circles:[],offscreen:!1,collisionDetected:Cr,occluded:!1}}}}return{circles:!se&&Cr||!Rr?[]:Xe,offscreen:wr,collisionDetected:Cr,occluded:jt.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let x=1/0,E=1/0,I=-1/0,M=-1/0;for(const se of l){const ye=new i.P(se.x+Xs,se.y+Xs);x=Math.min(x,ye.x),E=Math.min(E,ye.y),I=Math.max(I,ye.x),M=Math.max(M,ye.y),d.push(ye)}const q=this.grid.query(x,E,I,M).concat(this.ignoredGrid.query(x,E,I,M)),X={},ne={};for(const se of q){const ye=se.key;if(X[ye.bucketInstanceId]===void 0&&(X[ye.bucketInstanceId]={}),X[ye.bucketInstanceId][ye.featureIndex])continue;const we=[new i.P(se.x1,se.y1),new i.P(se.x2,se.y1),new i.P(se.x2,se.y2),new i.P(se.x1,se.y2)];i.bp(d,we)&&(X[ye.bucketInstanceId][ye.featureIndex]=!0,ne[ye.bucketInstanceId]===void 0&&(ne[ye.bucketInstanceId]=[]),ne[ye.bucketInstanceId].push(ye.featureIndex))}return ne}insertCollisionBox(l,d,x,E,I){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:E,collisionGroupID:I},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,x,E,I){const M=d?this.ignoredGrid:this.grid,q={bucketInstanceId:x,featureIndex:E,collisionGroupID:I};for(let X=0;X<l.length;X+=4)M.insertCircle(q,l[X],l[X+1],l[X+2])}projectAndGetPerspectiveRatio(l,d,x,E,I,M,q){const X=[d,x,E,1];let ne=!1;E||this.transform.pitch>0?(i.a6.vec4.transformMat4(X,X,l),this.fogState&&I&&q.name!=="globe"&&(ne=function(we,Ee,Ge,$e,Xe,Ze){const ft=Ze.calculateFogTileMatrix(Xe),gt=[Ee,Ge,$e];return i.a6.vec3.transformMat4(gt,gt,ft),on(we,i.a6.vec3.length(gt),Ze.pitch,Ze._fov)}(this.fogState,d,x,E,I.toUnwrapped(),this.transform)>.9)):qo(X,X,l);const se=X[3];return{point:new i.P((X[0]/se+1)/2*this.transform.width+Xs,(-X[1]/se+1)/2*this.transform.height+Xs),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(q)/se*.5,1.5),signedDistanceFromCamera:se,occluded:M&&X[2]>se||ne}}isOffscreen(l,d,x,E){return x<Xs||l>=this.screenRightBoundary||E<Xs||d>this.screenBottomBoundary}isInsideGrid(l,d,x,E){return x>=0&&l<this.gridRightBoundary&&E>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=i.a6.mat4.identity([]);return i.a6.mat4.translate(l,l,[-100,-100,0]),l}}function Ys(v,l,d){const x=l.createTileMatrix(v,v.worldSize,d.toUnwrapped());return i.a6.mat4.multiply(new Float32Array(16),v.projMatrix,x)}function vo(v,l,d){if(l.projection.name===d.projection.name)return v.projMatrix;const x=d.clone();return x.setProjection(l.projection),Ys(x,l.getProjection(),v)}function fa(v,l,d){return l.name===d.projection.name?v.projMatrix:Ys(d,l,v)}class xs{constructor(l,d,x,E){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):E&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class no{constructor(l,d,x,E,I,M=!1){this.text=new xs(l?l.text:null,d,x,I),this.icon=new xs(l?l.icon:null,d,E,I),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class $o{constructor(l,d,x,E=!1){this.text=l,this.icon=d,this.skipFade=x,this.clipped=E}}class Eo{constructor(){this.invProjMatrix=i.a6.mat4.create(),this.viewportMatrix=i.a6.mat4.create(),this.circles=[]}}class ic{constructor(l,d,x,E,I){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=x,this.bucketIndex=E,this.tileID=I}}class aa{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:x=>x.collisionGroupID===d}}return this.collisionGroups[l]}}function rl(v,l,d,x,E){const{horizontalAlign:I,verticalAlign:M}=i.bx(v),q=-(I-.5)*l,X=-(M-.5)*d,ne=i.bw(v,x);return new i.P(q+ne[0]*E,X+ne[1]*E)}function Uo(v,l,d,x,E){const I=new i.P(v,l);return d&&I._rotate(x?E:-E),I}class Va{constructor(l,d,x,E,I,M){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new Bo(this.transform,I),this.buildingIndex=M,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new aa(x),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,d,x,E){const I=x.getBucket(d),M=x.latestFeatureIndex;if(!I||!M||d.fqid!==I.layerIds[0])return;const q=I.layers[0].layout,X=I.layers[0].paint,ne=x.collisionBoxArray,se=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),ye=x.tileSize/i.ab,we=x.tileID.toUnwrapped();this.transform.setProjection(I.projection);const Ee=(Ge=x.tileID,$e=I.getProjection(),Xe=this.transform,$e.name===this.projection?Xe.calculateProjMatrix(Ge.toUnwrapped()):Ys(Xe,$e,Ge));var Ge,$e,Xe;const Ze=q.get("text-pitch-alignment")==="map",ft=q.get("text-rotation-alignment")==="map";d.compileFilter();const gt=d.dynamicFilter(),ut=d.dynamicFilterNeedsFeature(),bt=this.transform.calculatePixelsToTileUnitsMatrix(x),_t=Li(Ee,x.tileID.canonical,Ze,ft,this.transform,I.getProjection(),bt);let Mt=null;if(Ze){const Vt=da(Ee,x.tileID.canonical,Ze,ft,this.transform,I.getProjection(),bt);Mt=i.a6.mat4.multiply([],this.transform.labelPlaneMatrix,Vt)}let Tt=null;gt&&x.latestFeatureIndex&&(Tt={unwrappedTileID:we,dynamicFilter:gt,dynamicFilterNeedsFeature:ut}),this.retainedQueryData[I.bucketInstanceId]=new ic(I.bucketInstanceId,M,I.sourceLayerIndex,I.index,x.tileID);const jt={bucket:I,layout:q,paint:X,posMatrix:Ee,textLabelPlaneMatrix:_t,labelToScreenMatrix:Mt,clippingData:Tt,scale:se,textPixelRatio:ye,holdingForFade:x.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:i.bj(I.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:i.bj(I.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID),latestFeatureIndex:x.latestFeatureIndex};if(E)for(const Vt of I.sortKeyRanges){const{sortKey:Rt,symbolInstanceStart:Dt,symbolInstanceEnd:sr}=Vt;l.push({sortKey:Rt,symbolInstanceStart:Dt,symbolInstanceEnd:sr,parameters:jt})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:jt})}attemptAnchorPlacement(l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e,Xe,Ze,ft){const{textOffset0:gt,textOffset1:ut,crossTileID:bt}=we,_t=[gt,ut],Mt=rl(l,x,E,_t,I),Tt=this.collisionIndex.placeCollisionBox(Ge,I,d,Uo(Mt.x,Mt.y,M,q,this.transform.angle),ye,X,ne,se.predicate);if(Xe){const jt=Ge.getSymbolInstanceIconSize(ft,this.transform.zoom,we.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Ge,jt,Xe,Uo(Mt.x,Mt.y,M,q,this.transform.angle),ye,X,ne,se.predicate).box.length===0)return}if(Tt.box.length>0){let jt;return this.prevPlacement&&this.prevPlacement.variableOffsets[bt]&&this.prevPlacement.placements[bt]&&this.prevPlacement.placements[bt].text&&(jt=this.prevPlacement.variableOffsets[bt].anchor),this.variableOffsets[bt]={textOffset:_t,width:x,height:E,anchor:l,textScale:I,prevAnchor:jt},this.markUsedJustification(Ge,l,we,$e),Ge.allowVerticalPlacement&&(this.markUsedOrientation(Ge,$e,we),this.placedOrientations[bt]=$e),{shift:Mt,placedGlyphBoxes:Tt}}}placeLayerBucketPart(l,d,x,E){const{bucket:I,layout:M,paint:q,posMatrix:X,textLabelPlaneMatrix:ne,labelToScreenMatrix:se,clippingData:ye,textPixelRatio:we,holdingForFade:Ee,collisionBoxArray:Ge,partiallyEvaluatedTextSize:$e,partiallyEvaluatedIconSize:Xe,collisionGroup:Ze,latestFeatureIndex:ft}=l.parameters,gt=M.get("text-optional"),ut=M.get("icon-optional"),bt=M.get("text-allow-overlap"),_t=M.get("icon-allow-overlap"),Mt=M.get("text-rotation-alignment")==="map",Tt=M.get("text-pitch-alignment")==="map",jt=M.get("symbol-z-elevate"),Vt=q.get("symbol-z-offset"),Rt=q.get("symbol-elevation-reference")==="sea";this.transform.setProjection(I.projection);let Dt=bt&&(_t||!I.hasIconData()||ut),sr=_t&&(bt||!I.hasTextData()||gt);const Cr=!Vt.isConstant();!I.collisionArrays&&Ge&&I.deserializeCollisionBoxes(Ge),x&&E&&I.updateCollisionDebugBuffers(this.transform.zoom,Ge);const Rr=(wr,en,or)=>{const{crossTileID:Lr,numVerticalGlyphVertices:Er}=wr;let tn=null;if(ye&&ye.dynamicFilterNeedsFeature||Cr){const Di=this.retainedQueryData[I.bucketInstanceId];tn=ft.loadFeature({featureIndex:wr.featureIndex,bucketIndex:Di.bucketIndex,sourceLayerIndex:Di.sourceLayerIndex,layoutVertexArrayOffset:0})}if(ye&&!(0,ye.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},tn,this.retainedQueryData[I.bucketInstanceId].tileID.canonical,new i.P(wr.tileAnchorX,wr.tileAnchorY),this.transform.calculateDistanceTileData(ye.unwrappedTileID)))return this.placements[Lr]=new $o(!1,!1,!1,!0),void d.add(Lr);const sn=Vt.evaluate(tn,{});if(d.has(Lr))return;if(Ee)return void(this.placements[Lr]=new $o(!1,!1,!1));let kr=!1,Hr=!1,Xn=!0,hn=!1,Fn=!1,li=null,On={box:null,offscreen:null,occluded:null},ii={box:null,offscreen:null,occluded:null},zi=null,ji=null,Ws=null,ho=0,ko=0,Ih=0;or.textFeatureIndex?ho=or.textFeatureIndex:wr.useRuntimeCollisionCircles&&(ho=wr.featureIndex),or.verticalTextFeatureIndex&&(ko=or.verticalTextFeatureIndex);const Xa=Di=>{Di.tileID=this.retainedQueryData[I.bucketInstanceId].tileID;const Es=this.transform.elevation;Di.elevation=Rt?sn:sn+(Es?Es.getAtTileOffset(Di.tileID,Di.tileAnchorX,Di.tileAnchorY):0),Di.elevation+=wr.zOffset},Ji=or.textBox;if(Ji){Xa(Ji);const Di=Hs=>{let La=i.bk.horizontal;if(I.allowVerticalPlacement&&!Hs&&this.prevPlacement){const Ya=this.prevPlacement.placedOrientations[Lr];Ya&&(this.placedOrientations[Lr]=Ya,La=Ya,this.markUsedOrientation(I,La,wr))}return La},Es=(Hs,La)=>{if(I.allowVerticalPlacement&&Er>0&&or.verticalTextBox){for(const Ya of I.writingModes)if(Ya===i.bk.vertical?(On=La(),ii=On):On=Hs(),On&&On.box&&On.box.length)break}else On=Hs()};if(M.get("text-variable-anchor")){let Hs=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Lr]){const ds=this.prevPlacement.variableOffsets[Lr];Hs.indexOf(ds.anchor)>0&&(Hs=Hs.filter(Ll=>Ll!==ds.anchor),Hs.unshift(ds.anchor))}const La=(ds,Ll,Xl)=>{const Fl=I.getSymbolInstanceTextSize($e,wr,this.transform.zoom,en),Lo=(ds.x2-ds.x1)*Fl+2*ds.padding,lu=(ds.y2-ds.y1)*Fl+2*ds.padding,cu=wr.hasIconTextFit&&!_t?Ll:null;cu&&Xa(cu);let Lh={box:[],offscreen:!1,occluded:!1};const dh=bt?2*Hs.length:Hs.length;for(let Lu=0;Lu<dh;++Lu){const Fh=this.attemptAnchorPlacement(Hs[Lu%Hs.length],ds,Lo,lu,Fl,Mt,Tt,we,X,Ze,Lu>=Hs.length,wr,en,I,Xl,cu,$e,Xe);if(Fh&&(Lh=Fh.placedGlyphBoxes,Lh&&Lh.box&&Lh.box.length)){kr=!0,li=Fh.shift;break}}return Lh};Es(()=>La(Ji,or.iconBox,i.bk.horizontal),()=>{const ds=or.verticalTextBox;return ds&&Xa(ds),I.allowVerticalPlacement&&!(On&&On.box&&On.box.length)&&Er>0&&ds?La(ds,or.verticalIconBox,i.bk.vertical):{box:null,offscreen:null,occluded:null}}),On&&(kr=On.box,Xn=On.offscreen,hn=On.occluded);const Ya=Di(!(!On||!On.box));if(!kr&&this.prevPlacement){const ds=this.prevPlacement.variableOffsets[Lr];ds&&(this.variableOffsets[Lr]=ds,this.markUsedJustification(I,ds.anchor,wr,Ya))}}else{const Hs=(La,Ya)=>{const ds=I.getSymbolInstanceTextSize($e,wr,this.transform.zoom,en),Ll=this.collisionIndex.placeCollisionBox(I,ds,La,new i.P(0,0),bt,we,X,Ze.predicate);return Ll&&Ll.box&&Ll.box.length&&(this.markUsedOrientation(I,Ya,wr),this.placedOrientations[Lr]=Ya),Ll};Es(()=>Hs(Ji,i.bk.horizontal),()=>{const La=or.verticalTextBox;return I.allowVerticalPlacement&&Er>0&&La?(Xa(La),Hs(La,i.bk.vertical)):{box:null,offscreen:null,occluded:null}}),Di(!!(On&&On.box&&On.box.length))}}if(zi=On,kr=zi&&zi.box&&zi.box.length>0,Xn=zi&&zi.offscreen,hn=zi&&zi.occluded,wr.useRuntimeCollisionCircles){const Di=I.text.placedSymbolArray.get(wr.centerJustifiedTextSymbolIndex>=0?wr.centerJustifiedTextSymbolIndex:wr.verticalPlacedTextSymbolIndex),Es=i.bl(I.textSizeData,$e,Di),Hs=M.get("text-padding");ji=this.collisionIndex.placeCollisionCircles(I,bt,Di,I.lineVertexArray,I.glyphOffsetArray,Es,X,ne,se,x,Tt,Ze.predicate,wr.collisionCircleDiameter*Es/i.bq,Hs,this.retainedQueryData[I.bucketInstanceId].tileID),kr=bt||ji.circles.length>0&&!ji.collisionDetected,Xn=Xn&&ji.offscreen,hn=ji.occluded}if(or.iconFeatureIndex&&(Ih=or.iconFeatureIndex),or.iconBox){const Di=Es=>{Xa(Es);const Hs=wr.hasIconTextFit&&li?Uo(li.x,li.y,Mt,Tt,this.transform.angle):new i.P(0,0),La=I.getSymbolInstanceIconSize(Xe,this.transform.zoom,wr.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(I,La,Es,Hs,_t,we,X,Ze.predicate)};ii&&ii.box&&ii.box.length&&or.verticalIconBox?(Ws=Di(or.verticalIconBox),Hr=Ws.box.length>0):(Ws=Di(or.iconBox),Hr=Ws.box.length>0),Xn=Xn&&Ws.offscreen,Fn=Ws.occluded}const oo=gt||wr.numHorizontalGlyphVertices===0&&Er===0,ia=ut||wr.numIconVertices===0;if(oo||ia?ia?oo||(Hr=Hr&&kr):kr=Hr&&kr:Hr=kr=Hr&&kr,kr&&zi&&zi.box&&this.collisionIndex.insertCollisionBox(zi.box,M.get("text-ignore-placement"),I.bucketInstanceId,ii&&ii.box&&ko?ko:ho,Ze.ID),Hr&&Ws&&this.collisionIndex.insertCollisionBox(Ws.box,M.get("icon-ignore-placement"),I.bucketInstanceId,Ih,Ze.ID),ji&&(kr&&this.collisionIndex.insertCollisionCircles(ji.circles,M.get("text-ignore-placement"),I.bucketInstanceId,ho,Ze.ID),x)){const Di=I.bucketInstanceId;let Es=this.collisionCircleArrays[Di];Es===void 0&&(Es=this.collisionCircleArrays[Di]=new Eo);for(let Hs=0;Hs<ji.circles.length;Hs+=4)Es.circles.push(ji.circles[Hs+0]),Es.circles.push(ji.circles[Hs+1]),Es.circles.push(ji.circles[Hs+2]),Es.circles.push(ji.collisionDetected?1:0)}const to=I.projection.name!=="globe";Dt=Dt&&(to||!hn),sr=sr&&(to||!Fn),this.placements[Lr]=new $o(kr||Dt,Hr||sr,Xn||I.justReloaded),d.add(Lr)};if(jt&&this.buildingIndex&&(this.buildingIndex.updateZOffset(I,this.retainedQueryData[I.bucketInstanceId].tileID),I.updateZOffset()),I.sortFeaturesByY){const wr=I.getSortedSymbolIndexes(this.transform.angle);for(let en=wr.length-1;en>=0;--en){const or=wr[en];Rr(I.symbolInstances.get(or),or,I.collisionArrays[or])}I.hasAnyZOffset&&i.w(`${I.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(I.hasAnyZOffset){const wr=I.getSortedIndexesByZOffset();for(let en=0;en<wr.length;++en){const or=wr[en];Rr(I.symbolInstances.get(or),or,I.collisionArrays[or])}}else for(let wr=l.symbolInstanceStart;wr<l.symbolInstanceEnd;wr++)Rr(I.symbolInstances.get(wr),wr,I.collisionArrays[wr]);if(x&&I.bucketInstanceId in this.collisionCircleArrays){const wr=this.collisionCircleArrays[I.bucketInstanceId];i.a6.mat4.invert(wr.invProjMatrix,X),wr.viewportMatrix=this.collisionIndex.getViewportMatrix()}I.justReloaded=!1}markUsedJustification(l,d,x,E){const{leftJustifiedTextSymbolIndex:I,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:q,verticalPlacedTextSymbolIndex:X,crossTileID:ne}=x,se=i.bv(d),ye=E===i.bk.vertical?X:se==="left"?I:se==="center"?M:se==="right"?q:-1;I>=0&&(l.text.placedSymbolArray.get(I).crossTileID=ye>=0&&I!==ye?0:ne),M>=0&&(l.text.placedSymbolArray.get(M).crossTileID=ye>=0&&M!==ye?0:ne),q>=0&&(l.text.placedSymbolArray.get(q).crossTileID=ye>=0&&q!==ye?0:ne),X>=0&&(l.text.placedSymbolArray.get(X).crossTileID=ye>=0&&X!==ye?0:ne)}markUsedOrientation(l,d,x){const E=d===i.bk.horizontal||d===i.bk.horizontalOnly?d:0,I=d===i.bk.vertical?d:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:q,rightJustifiedTextSymbolIndex:X,verticalPlacedTextSymbolIndex:ne}=x,se=l.text.placedSymbolArray;M>=0&&(se.get(M).placedOrientation=E),q>=0&&(se.get(q).placedOrientation=E),X>=0&&(se.get(X).placedOrientation=E),ne>=0&&(se.get(ne).placedOrientation=I)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let x=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const E=d?d.symbolFadeChange(l):1,I=d?d.opacities:{},M=d?d.variableOffsets:{},q=d?d.placedOrientations:{};for(const X in this.placements){const ne=this.placements[X],se=I[X];se?(this.opacities[X]=new no(se,E,ne.text,ne.icon,null,ne.clipped),x=x||ne.text!==se.text.placed||ne.icon!==se.icon.placed):(this.opacities[X]=new no(null,E,ne.text,ne.icon,ne.skipFade,ne.clipped),x=x||ne.text||ne.icon)}for(const X in I){const ne=I[X];if(!this.opacities[X]){const se=new no(ne,E,!1,!1);se.isHidden()||(this.opacities[X]=se,x=x||ne.text.placed||ne.icon.placed)}}for(const X in M)this.variableOffsets[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.variableOffsets[X]=M[X]);for(const X in q)this.placedOrientations[X]||!this.opacities[X]||this.opacities[X].isHidden()||(this.placedOrientations[X]=q[X]);x?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d,x,E){const I=new Set;for(const M of d){const q=M.getBucket(l);q&&M.latestFeatureIndex&&l.fqid===q.layerIds[0]&&(this.updateBucketOpacities(q,I,M,M.collisionBoxArray,x,E,M.tileID,l.scope),q.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(q,M.tileID),q.updateZOffset()))}}updateBucketOpacities(l,d,x,E,I,M,q,X){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const ne=l.layers[0].layout,se=l.layers[0].paint,ye=!!l.layers[0].dynamicFilter(),we=new no(null,0,!1,!1,!0),Ee=ne.get("text-allow-overlap"),Ge=ne.get("icon-allow-overlap"),$e=ne.get("text-variable-anchor"),Xe=ne.get("text-rotation-alignment")==="map",Ze=ne.get("text-pitch-alignment")==="map",ft=se.get("symbol-z-offset"),gt=se.get("symbol-elevation-reference")==="sea",ut=!ft.isConstant(),bt=new no(null,0,Ee&&(Ge||!l.hasIconData()||ne.get("icon-optional")),Ge&&(Ee||!l.hasTextData()||ne.get("text-optional")),!0);!l.collisionArrays&&E&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(E);const _t=(Tt,jt,Vt)=>{for(let Rt=0;Rt<jt/4;Rt++)Tt.opacityVertexArray.emplaceBack(Vt)};let Mt=0;M&&l.updateReplacement(q,M);for(let Tt=0;Tt<l.symbolInstances.length;Tt++){const jt=l.symbolInstances.get(Tt),{numHorizontalGlyphVertices:Vt,numVerticalGlyphVertices:Rt,crossTileID:Dt,numIconVertices:sr,tileAnchorX:Cr,tileAnchorY:Rr}=jt;let wr=null;if(jt&&ut){const hn=this.retainedQueryData[l.bucketInstanceId];wr=x.latestFeatureIndex.loadFeature({featureIndex:jt.featureIndex,bucketIndex:hn.bucketIndex,sourceLayerIndex:hn.sourceLayerIndex,layoutVertexArrayOffset:0})}const en=ft.evaluate(wr,{}),or=d.has(Dt);let Lr=this.opacities[Dt];or?Lr=we:Lr||(Lr=bt,this.opacities[Dt]=Lr),d.add(Dt);const Er=Vt>0||Rt>0,tn=sr>0,sn=this.placedOrientations[Dt],kr=sn===i.bk.vertical,Hr=sn===i.bk.horizontal||sn===i.bk.horizontalOnly;!Er&&!tn||Lr.isHidden()||Mt++;let Xn=!1;if((Er||tn)&&M)for(const hn of l.activeReplacements){if(i.br(hn,I,i.bs.Symbol,X)||hn.min.x>Cr||Cr>hn.max.x||hn.min.y>Rr||Rr>hn.max.y)continue;const Fn=i.bt(Cr,Rr,q.canonical,hn.footprintTileId.canonical);if(Xn=i.bu(Fn,hn.footprint),Xn)break}if(Er){const hn=Xn?pe:k(Lr.text);_t(l.text,Vt,kr?pe:hn),_t(l.text,Rt,Hr?pe:hn);const Fn=Lr.text.isHidden(),{leftJustifiedTextSymbolIndex:li,centerJustifiedTextSymbolIndex:On,rightJustifiedTextSymbolIndex:ii,verticalPlacedTextSymbolIndex:zi}=jt,ji=l.text.placedSymbolArray,Ws=Fn||kr?1:0;li>=0&&(ji.get(li).hidden=Ws),On>=0&&(ji.get(On).hidden=Ws),ii>=0&&(ji.get(ii).hidden=Ws),zi>=0&&(ji.get(zi).hidden=Fn||Hr?1:0);const ho=this.variableOffsets[Dt];ho&&this.markUsedJustification(l,ho.anchor,jt,sn);const ko=this.placedOrientations[Dt];ko&&(this.markUsedJustification(l,"left",jt,ko),this.markUsedOrientation(l,ko,jt))}if(tn){const hn=Xn?pe:k(Lr.icon),{placedIconSymbolIndex:Fn,verticalPlacedIconSymbolIndex:li}=jt,On=l.icon.placedSymbolArray,ii=Lr.icon.isHidden()?1:0;Fn>=0&&(_t(l.icon,sr,kr?pe:hn),On.get(Fn).hidden=ii),li>=0&&(_t(l.icon,jt.numVerticalIconVertices,Hr?pe:hn),On.get(li).hidden=ii)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const hn=l.collisionArrays[Tt];if(hn){let Fn=new i.P(0,0),li=!0;if(hn.textBox||hn.verticalTextBox){if($e){const ii=this.variableOffsets[Dt];ii?(Fn=rl(ii.anchor,ii.width,ii.height,ii.textOffset,ii.textScale),Xe&&Fn._rotate(Ze?this.transform.angle:-this.transform.angle)):li=!1}ye&&(li=!Lr.clipped),hn.textBox&&Vl(l.textCollisionBox.collisionVertexArray,Lr.text.placed,!li||kr,en,gt,Fn.x,Fn.y),hn.verticalTextBox&&Vl(l.textCollisionBox.collisionVertexArray,Lr.text.placed,!li||Hr,en,gt,Fn.x,Fn.y)}const On=li&&!!(!Hr&&hn.verticalIconBox);hn.iconBox&&Vl(l.iconCollisionBox.collisionVertexArray,Lr.icon.placed,On,en,gt,jt.hasIconTextFit?Fn.x:0,jt.hasIconTextFit?Fn.y:0),hn.verticalIconBox&&Vl(l.iconCollisionBox.collisionVertexArray,Lr.icon.placed,!On,en,gt,jt.hasIconTextFit?Fn.x:0,jt.hasIconTextFit?Fn.y:0)}}}if(l.fullyClipped=Mt===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const Tt=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=Tt.invProjMatrix,l.placementViewportMatrix=Tt.viewportMatrix,l.collisionCircleArray=Tt.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const x=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*x>l}setStale(){this.stale=!0}}function Vl(v,l,d,x,E,I,M){v.emplaceBack(l?1:0,d?1:0,I||0,M||0,x,E?1:0),v.emplaceBack(l?1:0,d?1:0,I||0,M||0,x,E?1:0),v.emplaceBack(l?1:0,d?1:0,I||0,M||0,x,E?1:0),v.emplaceBack(l?1:0,d?1:0,I||0,M||0,x,E?1:0)}const Wo=Math.pow(2,25),yu=Math.pow(2,24),pa=Math.pow(2,17),xo=Math.pow(2,16),Gl=Math.pow(2,9),_o=Math.pow(2,8),ql=Math.pow(2,1);function k(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const l=v.placed?1:0,d=Math.floor(127*v.opacity);return d*Wo+l*yu+d*pa+l*xo+d*Gl+l*_o+d*ql+l}const pe=0;class Ke{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,d,x,E,I){const M=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(M,E,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((q,X)=>q.sortKey-X.sortKey));this._currentPartIndex<M.length;){const q=M[this._currentPartIndex];if(d.placeLayerBucketPart(q,this._seenCrossTileIDs,x,q.symbolInstanceStart===0),this._currentPartIndex++,I())return!0}return!1}}class ot{constructor(l,d,x,E,I,M,q,X,ne){this.placement=new Va(l,I,M,q,X,ne),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(l,d,x,E){const I=i.q.now(),M=()=>{const q=i.q.now()-I;return!this._forceFullPlacement&&q>2};for(;this._currentPlacementIndex>=0;){const q=d[l[this._currentPlacementIndex]],X=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=X)&&(!q.maxzoom||q.maxzoom>X)){const ne=q,se=ne.layout.get("symbol-z-elevate"),ye=ne.layout.get("symbol-sort-key").constantOr(1)!==void 0,we=ne.layout.get("symbol-z-order"),Ee=we==="viewport-y"||we==="auto"&&!(we!=="viewport-y"&&ye),Ge=ne.layout.get("text-allow-overlap")||ne.layout.get("icon-allow-overlap")||ne.layout.get("text-ignore-placement")||ne.layout.get("icon-ignore-placement"),$e=Ee&&Ge,Xe=this._inProgressLayer=this._inProgressLayer||new Ke(ne),Ze=i.av(q.source,q.scope);if(Xe.continuePlacement(se||$e?E[Ze]:x[Ze],this.placement,this._showCollisionBoxes,q,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const St=512/i.ab/2;class $t{constructor(l,d,x){this.tileID=l,this.bucketInstanceId=x,this.index=new i.by(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const E=l.canonical.x*i.ab,I=l.canonical.y*i.ab;for(let M=0;M<d.length;M++){const{key:q,crossTileID:X,tileAnchorX:ne,tileAnchorY:se}=d.get(M),ye=Math.floor((E+ne)*St),we=Math.floor((I+se)*St);this.index.add(ye,we),this.keys.push(q),this.crossTileIDs.push(X)}this.index.finish()}findMatches(l,d,x){const E=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),I=St/Math.pow(2,d.canonical.z-this.tileID.canonical.z),M=d.canonical.x*i.ab,q=d.canonical.y*i.ab;for(let X=0;X<l.length;X++){const ne=l.get(X);if(ne.crossTileID)continue;const{key:se,tileAnchorX:ye,tileAnchorY:we}=ne,Ee=Math.floor((M+ye)*I),Ge=Math.floor((q+we)*I),$e=this.index.range(Ee-E,Ge-E,Ee+E,Ge+E);for(const Xe of $e){const Ze=this.crossTileIDs[Xe];if(this.keys[Xe]===se&&!x.has(Ze)){x.add(Ze),ne.crossTileID=Ze;break}}}}}class gr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class $r{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const x in this.indexes){const E=this.indexes[x],I={};for(const M in E){const q=E[M];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+d),I[q.tileID.key]=q}this.indexes[x]=I}this.lng=l}addBucket(l,d,x){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let I=0;I<d.symbolInstances.length;I++)d.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const E=this.usedCrossTileIDs[l.overscaledZ];for(const I in this.indexes){const M=this.indexes[I];if(Number(I)>l.overscaledZ)for(const q in M){const X=M[q];X.tileID.isChildOf(l)&&X.findMatches(d.symbolInstances,l,E)}else{const q=M[l.scaledTo(Number(I)).key];q&&q.findMatches(d.symbolInstances,l,E)}}for(let I=0;I<d.symbolInstances.length;I++){const M=d.symbolInstances.get(I);M.crossTileID||(M.crossTileID=x.generate(),E.add(M.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new $t(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const x of d.crossTileIDs)this.usedCrossTileIDs[l].delete(x)}removeStaleBuckets(l){let d=!1;for(const x in this.indexes){const E=this.indexes[x];for(const I in E)l[E[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,E[I]),delete E[I],d=!0)}return d}}class An{constructor(){this.layerIndexes={},this.crossTileIDs=new gr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,x,E){let I=this.layerIndexes[l.fqid];I===void 0&&(I=this.layerIndexes[l.fqid]=new $r);let M=!1;const q={};E.name!=="globe"&&I.handleWrapJump(x);for(const X of d){const ne=X.getBucket(l);ne&&l.fqid===ne.layerIds[0]&&(ne.bucketInstanceId||(ne.bucketInstanceId=++this.maxBucketInstanceId),I.addBucket(X.tileID,ne,this.crossTileIDs)&&(M=!0),q[ne.bucketInstanceId]=!0)}return I.removeStaleBuckets(q)&&(M=!0),M}pruneUnusedLayers(l){const d={};l.forEach(x=>{d[x]=!0});for(const x in this.layerIndexes)d[x]||delete this.layerIndexes[x]}}const Tn=771;class Wr{constructor(l,d,x,E){this.blendFunction=l,this.blendColor=d,this.mask=x,this.blendEquation=E}}Wr.Replace=[1,0,1,0],Wr.disabled=new Wr(Wr.Replace,i.bz.transparent,[!1,!1,!1,!1]),Wr.unblended=new Wr(Wr.Replace,i.bz.transparent,[!0,!0,!0,!0]),Wr.alphaBlended=new Wr([1,Tn,1,Tn],i.bz.transparent,[!0,!0,!0,!0]),Wr.alphaBlendedNonPremultiplied=new Wr([770,Tn,770,Tn],i.bz.transparent,[!0,!0,!0,!0]),Wr.multiply=new Wr([774,0,774,0],i.bz.transparent,[!0,!0,!0,!0]);class Dr{constructor(l,d,x){this.func=l,this.mask=d,this.range=x}}Dr.ReadOnly=!1,Dr.ReadWrite=!0,Dr.disabled=new Dr(519,Dr.ReadOnly,[0,1]);const Ci=7680;class gn{constructor(l,d,x,E,I,M){this.test=l,this.ref=d,this.mask=x,this.fail=E,this.depthFail=I,this.pass=M}}gn.disabled=new gn({func:519,mask:0},0,0,Ci,Ci,Ci);const Fi=1029,_s=2305;class vn{constructor(l,d,x){this.enable=l,this.mode=d,this.frontFace=x}}function ao(v,l){const d=i.bC(v,3);i.a6.mat4.fromQuat(v,l),i.bE(v,3,d)}function Zs(v,l){const d=i.a6.quat.identity([]);return i.a6.quat.rotateZ(d,d,-l),i.a6.quat.rotateX(d,d,-v),d}function Yo(v,l){const d=[v[0],v[1],0],x=[l[0],l[1],0];if(i.a6.vec3.length(d)>=1e-15){const M=i.a6.vec3.normalize([],d);i.a6.vec3.scale(x,M,i.a6.vec3.dot(x,M)),l[0]=x[0],l[1]=x[1]}const E=i.a6.vec3.cross([],l,v);if(i.a6.vec3.len(E)<1e-15)return null;const I=Math.atan2(-E[1],E[0]);return Zs(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),I)}vn.disabled=new vn(!1,Fi,_s),vn.backCCW=new vn(!0,Fi,_s),vn.backCW=new vn(!0,Fi,2304),vn.frontCW=new vn(!0,1028,2304),vn.frontCCW=new vn(!0,1028,_s);class nl{constructor(l,d){this.position=l,this.orientation=d}get position(){return this._position}set position(l){if(l){const d=l instanceof i.a5?l:new i.a5(l[0],l[1],l[2]);this._renderWorldCopies&&(d.x=i.bA(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(l,d){if(this.orientation=null,!this.position)return;const x=this.position,E=this._elevation?this._elevation.getAtPointOrZero(i.a5.fromLngLat(l)):0,I=i.a5.fromLngLat(l,E),M=[I.x-x.x,I.y-x.y,I.z-x.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=Yo(M,d)}setPitchBearing(l,d){this.orientation=Zs(i.bB(l),i.bB(-d))}}class il{constructor(l,d){this._transform=i.a6.mat4.identity([]),this.orientation=d,this.position=l}get mercatorPosition(){const l=this.position;return new i.a5(l[0],l[1],l[2])}get position(){const l=i.bC(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var d;l&&i.bE(this._transform,3,[(d=l)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||i.a6.quat.identity([]),l&&ao(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,d){this._orientation=Zs(l,d),ao(this._transform,this._orientation)}forward(){const l=i.bC(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=i.bC(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=i.bC(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,d){const x=new Float64Array(16);return i.a6.mat4.invert(x,this.getWorldToCamera(l,d)),x}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(l,d,x){const E=this.position;i.a6.vec3.scale(E,E,-l);const I=new Float64Array(16);return i.a6.mat4.fromScaling(I,[x,x,x]),i.a6.mat4.translate(I,I,E),I[10]*=d,I}getWorldToCamera(l,d){const x=new Float64Array(16),E=new Float64Array(4),I=this.position;return i.a6.quat.conjugate(E,this._orientation),i.a6.vec3.scale(I,I,-l),i.a6.mat4.fromQuat(x,E),i.a6.mat4.translate(x,x,I),x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,x[8]*=d,x[9]*=d,x[10]*=d,x[11]*=d,x}getCameraToClipPerspective(l,d,x,E){const I=new Float64Array(16);return i.a6.mat4.perspective(I,l,d,x,E),I}getCameraToClipOrthographic(l,d,x,E,I,M){const q=new Float64Array(16);return i.a6.mat4.ortho(q,l,d,x,E,I,M),q}getDistanceToElevation(l,d=!1){const x=l===0?0:i.bD(l,d?i.aM(this.position[1]):this.position[1]),E=this.forward();return(x-this.position[2])/E[2]}clone(){return new il([...this.position],[...this.orientation])}}const io={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class Ga{constructor(l=0,d=0,x=0,E=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(x)||x<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=x,this.right=E}interpolate(l,d,x){return d.top!=null&&l.top!=null&&(this.top=i.aa(l.top,d.top,x)),d.bottom!=null&&l.bottom!=null&&(this.bottom=i.aa(l.bottom,d.bottom,x)),d.left!=null&&l.left!=null&&(this.left=i.aa(l.left,d.left,x)),d.right!=null&&l.right!=null&&(this.right=i.aa(l.right,d.right,x)),this}getCenter(l,d){const x=i.ap((this.left+l-this.right)/2,0,l),E=i.ap((this.top+d-this.bottom)/2,0,d);return new i.P(x,E)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Ga(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ea=(v,l,d)=>(1-d)*v+d*l,Zo=v=>v*v*v*v*v;class ja{constructor(l,d,x,E,I,M,q){this.tileSize=512,this._renderWorldCopies=I===void 0||I,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=x??0,this._maxPitch=E??60,this.setProjection(M),this.setMaxBounds(q),this.width=0,this.height=0,this._center=new i.bK(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ga,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new il,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const l=new ja(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(l,d=!1){const x=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||x)&&this._updateCameraOnTerrain(),(l||x)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return i.ar(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=i.bL(this.projectionOptions);const x=this.getProjection(),E=!i.bh(d,x);return E&&this._calcMatrices(),this.mercatorFromTransition=!1,E}setOrthographicProjectionAtLowPitch(l){return this._orthographicProjectionAtLowPitch!==l&&(this._orthographicProjectionAtLowPitch=l,this._calcMatrices(),!0)}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.bL({name:"mercator"});const d=l!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.bD(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bA(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const d=-l*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=i.a6.mat2.create(),i.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=i.ap(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=i.bB(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(l){this._tileCoverLift!==l&&(this._tileCoverLift=l)}_updateCameraOnTerrain(){const l=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&l===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||l===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const x=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&x.exaggeration()&&this._centerAltitudeValidForExaggeration!==x.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*x.exaggeration(),this._centerAltitudeValidForExaggeration=x.exaggeration()):(this._centerAltitude=l||0,this._centerAltitudeValidForExaggeration=x.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],x=this.horizonLineFromTop();let E=0,I=0;for(let M=0;M<d.length;M++){const q=new i.P(d[M][0]*this.width,x+d[M][1]*(this.height-x)),X=l.pointCoordinate(q);if(!X)continue;const ne=1/Math.hypot(X[0]-this._camera.position[0],X[1]-this._camera.position[1]);E+=X[3]*ne,I+=ne}return I===0?NaN:E/I}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),x=this.pixelsPerMeter/this.worldSize*d,E=this._mercatorZfromZoom(l),I=this._mercatorZfromZoom(this._maxZoom),M=Math.max(E-x,I);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let x;x=l.z<this._camera.position[2]?[d.x,d.y,d.z]:[l.x,l.y,l.z];const E=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,x));return i.ap(this._zoomFromMercatorZ(E),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let d=!1;if(l.orientation&&!i.a6.quat.exactEquals(l.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(l.orientation)),l.position){const x=[l.position.x,l.position.y,l.position.z];i.a6.vec3.exactEquals(x,this._camera.position)||(this._setCameraPosition(x),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,d=new nl;return d.position=new i.a5(l[0],l[1],l[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(l){if(!i.a6.quat.length(l))return!1;i.a6.quat.normalize(l,l);const d=i.a6.vec3.transformQuat([],[0,0,-1],l),x=i.a6.vec3.transformQuat([],[0,-1,0],l);if(x[2]<0)return!1;const E=Yo(d,x);return!!E&&(this._camera.orientation=E,!0)}_setCameraPosition(l){const d=this.zoomScale(this.minZoom)*this.tileSize,x=this.zoomScale(this.maxZoom)*this.tileSize,E=this.cameraToCenterDistance;l[2]=i.ap(l[2],E/x,E/d),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,x){this._unmodified=!1,this._edgeInsets.interpolate(l,d,x),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new i.bM(0,l)];if(this.renderWorldCopies){const x=this.pointCoordinate(new i.P(0,0)),E=this.pointCoordinate(new i.P(this.width,0)),I=this.pointCoordinate(new i.P(this.width,this.height)),M=this.pointCoordinate(new i.P(0,this.height)),q=Math.floor(Math.min(x.x,E.x,I.x,M.x)),X=Math.floor(Math.max(x.x,E.x,I.x,M.x)),ne=1;for(let se=q-ne;se<=X+ne;se++)se!==0&&d.push(new i.bM(se,l))}return d}isLODDisabled(l){return(!l||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(l,d,x){let E=[];const I=x!==void 0,M=!I;if(M&&this.zoom<d||I&&x[0]===0&&x[1]===0)return E;const q=new Set,X=(se,ye,we,Ee,Ge)=>{const $e=i.c1(ye,se,we,Ee,Ge);q.has($e)||(E.push(new i.aA(se,ye,we,Ee,Ge)),q.add($e))};for(let se=0;se<l.length;se++){const ye=l[se];if(M&&ye.canonical.z!==d)continue;const we=ye.canonical,Ee=ye.overscaledZ,Ge=ye.wrap,$e=1<<we.z,Xe=we.x+1<$e,Ze=we.x>0,ft=we.y+1<$e,gt=we.y>0,ut=ye.wrap-(Ze?0:1),bt=ye.wrap+(Xe?0:1),_t=Ze?we.x-1:$e-1,Mt=Xe?we.x+1:0;if(I)x[0]<0?(X(Ee,bt,we.z,Mt,we.y),x[1]<0&&ft&&(X(Ee,Ge,we.z,we.x,we.y+1),X(Ee,bt,we.z,Mt,we.y+1)),x[1]>0&&gt&&(X(Ee,Ge,we.z,we.x,we.y-1),X(Ee,bt,we.z,Mt,we.y-1))):x[0]>0?(X(Ee,ut,we.z,_t,we.y),x[1]<0&&ft&&(X(Ee,Ge,we.z,we.x,we.y+1),X(Ee,ut,we.z,_t,we.y+1)),x[1]>0&&gt&&(X(Ee,Ge,we.z,we.x,we.y-1),X(Ee,ut,we.z,_t,we.y-1))):x[1]<0&&ft?X(Ee,Ge,we.z,we.x,we.y+1):gt&&X(Ee,Ge,we.z,we.x,we.y-1);else{const Tt=ye.visibleQuadrants;1&Tt&&(X(Ee,ut,we.z,_t,we.y),gt&&(X(Ee,Ge,we.z,we.x,we.y-1),X(Ee,ut,we.z,_t,we.y-1))),2&Tt&&(X(Ee,bt,we.z,Mt,we.y),gt&&(X(Ee,Ge,we.z,we.x,we.y-1),X(Ee,bt,we.z,Mt,we.y-1))),4&Tt&&(X(Ee,ut,we.z,_t,we.y),ft&&(X(Ee,Ge,we.z,we.x,we.y+1),X(Ee,ut,we.z,_t,we.y+1))),8&Tt&&(X(Ee,bt,we.z,Mt,we.y),ft&&(X(Ee,Ge,we.z,we.x,we.y+1),X(Ee,bt,we.z,Mt,we.y+1)))}}const ne=[];for(const se of E)E.some(ye=>se.isChildOf(ye))||ne.push(se);if(E=ne.filter(se=>!l.some(ye=>!!(se.overscaledZ<d&&ye.isChildOf(se))||se.equals(ye)||se.isChildOf(ye))),M){const se=1<<d,ye=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),we=[se*ye.x,se*ye.y],Ee=4,Ge=Ee*Ee;E=E.filter($e=>{const Xe=$e.canonical.x+.5-we[0],Ze=$e.canonical.y+.5-we[1];return Xe*Xe+Ze*Ze<Ge})}return E}coveringTiles(l){let d=this.coveringZoomLevel(l);const x=d,E=this.elevation&&this.elevation.exaggeration(),I=E&&!l.isTerrainDEM,M=this.projection.name==="mercator";if(l.minzoom!==void 0&&d<l.minzoom)return[];l.maxzoom!==void 0&&d>l.maxzoom&&(d=l.maxzoom);const q=this.locationCoordinate(this.center),X=this.center.lat,ne=1<<d,se=[ne*q.x,ne*q.y,0],ye=this.projection.name==="globe",we=!ye,Ee=i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,we),Ge=ye?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),$e=ne*i.bD(1,this.center.lat),Xe=this._camera.position[2]/i.bD(1,this.center.lat),Ze=[ne*Ge.x,ne*Ge.y,Xe*(we?1:$e)],ft=ye||E,gt=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),ut=this.isLODDisabled(!0)?d:0;let bt;if(this._elevation&&l.isTerrainDEM)bt=1e4*this._elevation.exaggeration();else if(this._elevation){const or=this._elevation.getMinMaxForVisibleTiles();bt=or?or.max:this._centerAltitude}else bt=this._centerAltitude;const _t=l.isTerrainDEM?-bt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Mt=this.projection.isReprojectedInTileSpace?i.bO(this):1,Tt=or=>{const Er=new i.a5(or.x+25e-6,or.y,or.z),tn=new i.a5(or.x,or.y+25e-6,or.z),sn=or.toLngLat(),kr=Er.toLngLat(),Hr=tn.toLngLat(),Xn=this.locationCoordinate(sn),hn=this.locationCoordinate(kr),Fn=this.locationCoordinate(Hr),li=Math.hypot(hn.x-Xn.x,hn.y-Xn.y),On=Math.hypot(Fn.x-Xn.x,Fn.y-Xn.y);return Math.sqrt(li*On)*Mt/25e-6},jt=or=>{const Lr=bt,Er=_t;return{aabb:i.bR(this,ne,0,0,0,or,Er,Lr,this.projection),zoom:0,x:0,y:0,minZ:Er,maxZ:Lr,wrap:or,fullyVisible:!1}},Vt=[];let Rt=[];const Dt=d,sr=l.reparseOverscaled?x:d,Cr=(Xe-this._centerAltitude)*$e,Rr=or=>{if(!this._elevation||!or.tileID||!M)return;const Lr=this._elevation.getMinMaxForTile(or.tileID),Er=or.aabb;Lr?(Er.min[2]=Lr.min,Er.max[2]=Lr.max,Er.center[2]=(Er.min[2]+Er.max[2])/2):(or.shouldSplit=en(or),or.shouldSplit||(Er.min[2]=Er.max[2]=Er.center[2]=this._centerAltitude))},wr=(or,Lr)=>{if(.707*Lr<or)return 1;const Er=Lr/or;return Er/(1.4144271570014144+(Math.pow(1.1,Er-1.4144271570014144+1)-1)/(1.1-1)-1)},en=or=>{if(or.zoom<ut)return!0;if(or.zoom===Dt)return!1;if(or.shouldSplit!=null)return or.shouldSplit;const Lr=or.aabb.distanceX(Ze),Er=or.aabb.distanceY(Ze);let tn=Cr,sn=1;if(ye){tn=or.aabb.distanceZ(Ze);const On=Math.pow(2,or.zoom),ii=i.aM((or.y+1)/On),zi=i.aM(or.y/On),ji=Math.min(Math.max(X,ii),zi),Ws=i.c5(ji)/i.c5(X);if(sn=ji===X?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ws/this._mercatorScaleRatio),this.zoom<=i.c2&&or.zoom===Dt-1&&Ws>=.9)return!0}else if(I&&(tn=or.aabb.distanceZ(Ze)*$e),this.projection.isReprojectedInTileSpace&&x<=5){const On=Math.pow(2,or.zoom),ii=Tt(new i.a5((or.x+.5)/On,(or.y+.5)/On));sn=ii>.85?1:ii}if(!M){const On=Math.sqrt(Lr*Lr+Er*Er+tn*tn);let ii=(1<<Dt-or.zoom)*gt*sn;return ii*=wr(Math.max(tn,Cr),On),On<ii}let kr=Number.MAX_VALUE,Hr=0;const Xn=or.aabb.getCorners(),hn=[];for(const On of Xn){i.a6.vec3.sub(hn,On,Ze),ye||(I?hn[2]*=$e:hn[2]=Cr);const ii=i.a6.vec3.dot(hn,this._camera.forward());ii<kr&&(kr=ii,Hr=Math.abs(hn[2]))}let Fn=(1<<Dt-or.zoom)*gt*sn;if(Fn*=wr(Math.max(Hr,Cr),kr),kr<Fn)return!0;const li=or.aabb.closestPoint(se);return li[0]===se[0]&&li[1]===se[1]};if(this.renderWorldCopies)for(let or=1;or<=3;or++)Vt.push(jt(-or)),Vt.push(jt(or));for(Vt.push(jt(0));Vt.length>0;){const or=Vt.pop(),Lr=or.x,Er=or.y;let tn=or.fullyVisible;const sn=()=>this.projection.name==="globe"&&(or.y===0||or.y===(1<<or.zoom)-1);if(!tn){let kr=ft?or.aabb.intersects(Ee):or.aabb.intersectsFlat(Ee);if(kr===0&&sn()){const Hr=new i.bP(or.zoom,Lr,Er);kr=i.bQ(this,ne,Hr,!0).intersects(Ee)}if(kr===0)continue;tn=kr===2}if(or.zoom!==Dt&&en(or))for(let kr=0;kr<4;kr++){const Hr=(Lr<<1)+kr%2,Xn=(Er<<1)+(kr>>1),hn={aabb:M?or.aabb.quadrant(kr):i.bR(this,ne,or.zoom+1,Hr,Xn,or.wrap,or.minZ,or.maxZ,this.projection),zoom:or.zoom+1,x:Hr,y:Xn,wrap:or.wrap,fullyVisible:tn,tileID:void 0,shouldSplit:void 0,minZ:or.minZ,maxZ:or.maxZ};I&&!ye&&(hn.tileID=new i.aA(or.zoom+1===Dt?sr:or.zoom+1,or.wrap,or.zoom+1,Hr,Xn),Rr(hn)),Vt.push(hn)}else{const kr=or.zoom===Dt?sr:or.zoom;if(l.minzoom&&l.minzoom>kr)continue;let Hr=0;if(!tn){let li=ft?or.aabb.intersectsPrecise(Ee):or.aabb.intersectsPreciseFlat(Ee);if(li===0&&sn()){const On=new i.bP(or.zoom,Lr,Er);li=i.bQ(this,ne,On,!0).intersectsPrecise(Ee)}if(li===0)continue;if(l.calculateQuadrantVisibility)if(Ee.containsPoint(or.aabb.center))Hr=15;else for(let On=0;On<4;On++)or.aabb.quadrant(On).intersects(Ee)!==0&&(Hr|=1<<On)}const Xn=se[0]-(.5+Lr+(or.wrap<<or.zoom))*(1<<d-or.zoom),hn=se[1]-.5-Er,Fn=or.tileID?or.tileID:new i.aA(kr,or.wrap,or.zoom,Lr,Er);l.calculateQuadrantVisibility&&(Fn.visibleQuadrants=Hr),Rt.push({tileID:Fn,distanceSq:Xn*Xn+hn*hn})}}if(this.fogCullDistSq){const or=this.fogCullDistSq,Lr=this.horizonLineFromTop();Rt=Rt.filter(Er=>{const tn=[0,0,0,1],sn=[i.ab,i.ab,0,1],kr=this.calculateFogTileMatrix(Er.tileID.toUnwrapped());i.a6.vec4.transformMat4(tn,tn,kr),i.a6.vec4.transformMat4(sn,sn,kr);const Hr=i.a6.vec4.min([],tn,sn),Xn=i.a6.vec4.max([],tn,sn),hn=i.bS(Hr,Xn);if(hn===0)return!0;let Fn=!1;const li=this._elevation;if(li&&hn>or&&Lr!==0){const On=this.calculateProjMatrix(Er.tileID.toUnwrapped());let ii;l.isTerrainDEM||(ii=li.getMinMaxForTile(Er.tileID)),ii||(ii={min:_t,max:bt});const zi=i.c3(this.rotation),ji=[zi[0]*i.ab,zi[1]*i.ab,ii.max];i.a6.vec3.transformMat4(ji,ji,On),Fn=(1-ji[1])*this.height*.5<Lr}return hn<or||Fn})}return Rt.sort((or,Lr)=>or.distanceSq-Lr.distanceSq).map(or=>or.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const d=i.ap(l.lat,-i.bT,i.bT),x=this.projection.project(l.lng,d);return new i.P(x.x*this.worldSize,x.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.bD(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,d){let x,E;const I=this.centerPoint;if(this.projection.name==="globe"){const q=this.worldSize;x=(d.x-I.x)/q,E=(d.y-I.y)/q}else{const q=this.pointCoordinate(d),X=this.pointCoordinate(I);x=q.x-X.x,E=q.y-X.y}const M=this.locationCoordinate(l);this.setLocation(new i.a5(M.x-x,M.y-E))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,d){const x=d?i.bD(d,l.lat):void 0,E=this.projection.project(l.lng,l.lat);return new i.a5(E.x,E.y,x)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,d){const x=d??this._centerAltitude,E=[l.x,l.y,0,1],I=[l.x,l.y,1,1];i.a6.vec4.transformMat4(E,E,this.pixelMatrixInverse),i.a6.vec4.transformMat4(I,I,this.pixelMatrixInverse);const M=I[3];i.a6.vec4.scale(E,E,1/E[3]),i.a6.vec4.scale(I,I,1/M);const q=E[2],X=I[2];return{p0:E,p1:I,t:q===X?0:(x-q)/(X-q)}}screenPointToMercatorRay(l){const d=[l.x,l.y,0,1],x=[l.x,l.y,1,1];return i.a6.vec4.transformMat4(d,d,this.pixelMatrixInverse),i.a6.vec4.transformMat4(x,x,this.pixelMatrixInverse),i.a6.vec4.scale(d,d,1/d[3]),i.a6.vec4.scale(x,x,1/x[3]),d[2]=i.bD(d[2],this._center.lat)*this.worldSize,x[2]=i.bD(x[2],this._center.lat)*this.worldSize,i.a6.vec4.scale(d,d,1/this.worldSize),i.a6.vec4.scale(x,x,1/this.worldSize),new i.aj([d[0],d[1],d[2]],i.a6.vec3.normalize([],i.a6.vec3.sub([],x,d)))}rayIntersectionCoordinate(l){const{p0:d,p1:x,t:E}=l,I=i.bD(d[2],this._center.lat),M=i.bD(x[2],this._center.lat);return new i.a5(i.aa(d[0],x[0],E)/this.worldSize,i.aa(d[1],x[1],E)/this.worldSize,i.aa(I,M,E))}pointCoordinate(l,d=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,d)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let d=this.projection.pointCoordinate3D(this,l.x,l.y);if(d)return new i.a5(d[0],d[1],d[2]);let x=0,E=this.horizonLineFromTop();if(l.y>E)return this.pointCoordinate(l);const I=.02*E,M=l.clone();for(let q=0;q<10&&E-x>I;q++){M.y=i.aa(x,E,.66);const X=this.projection.pointCoordinate3D(this,M.x,M.y);X?(E=M.y,d=X):x=M.y}return d?new i.a5(d[0],d[1],d[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=i.bU)return!this.isPointAboveHorizon(l);const d=this.pointCoordinate(l);return d.y>=0&&d.y<=1}_coordinatePoint(l,d){const x=d&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,E=[l.x*this.worldSize,l.y*this.worldSize,x+l.toAltitude(),1];return i.a6.vec4.transformMat4(E,E,this.pixelMatrix),E[3]>0?new i.P(E[0]/E[3],E[1]/E[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:d}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,I=this.pointLocation3D(new i.P(d,l)),M=this.pointLocation3D(new i.P(E,l)),q=this.pointLocation3D(new i.P(E,x)),X=this.pointLocation3D(new i.P(d,x));let ne=Math.min(I.lng,M.lng,q.lng,X.lng),se=Math.max(I.lng,M.lng,q.lng,X.lng),ye=Math.min(I.lat,M.lat,q.lat,X.lat),we=Math.max(I.lat,M.lat,q.lat,X.lat);const Ee=Math.pow(2,-this.zoom)/16*270,Ge=this.projection.name==="globe"?1:4,$e=(Xe,Ze,ft,gt,ut)=>{const bt=(Xe+ft)/2,_t=(Ze+gt)/2,Mt=new i.P(bt,_t),{lng:Tt,lat:jt}=this.pointLocation3D(Mt),Vt=Math.max(0,ne-Tt,ye-jt,Tt-se,jt-we);ne=Math.min(ne,Tt),se=Math.max(se,Tt),ye=Math.min(ye,jt),we=Math.max(we,jt),(ut<Ge||Vt>Ee)&&($e(Xe,Ze,bt,_t,ut+1),$e(bt,_t,ft,gt,ut+1))};if($e(d,l,E,l,1),$e(E,l,E,x,1),$e(E,x,d,x,1),$e(d,x,d,l,1),this.projection.name==="globe"){const[Xe,Ze]=i.bV(this);Xe?(we=90,se=180,ne=-180):Ze&&(ye=-90,se=180,ne=-180)}return new i.as(new i.bK(ne,ye),new i.bK(se,we))}_getBoundsRectangular(l,d){const{top:x,left:E}=this._edgeInsets,I=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,q=new i.P(E,x),X=new i.P(M,x),ne=new i.P(M,I),se=new i.P(E,I);let ye=this.pointCoordinate(q,l),we=this.pointCoordinate(X,l);const Ee=this.pointCoordinate(ne,d),Ge=this.pointCoordinate(se,d),$e=(Xe,Ze)=>(Ze.y-Xe.y)/(Ze.x-Xe.x);return ye.y>1&&we.y>=0?ye=new i.a5((1-Ge.y)/$e(Ge,ye)+Ge.x,1):ye.y<0&&we.y<=1&&(ye=new i.a5(-Ge.y/$e(Ge,ye)+Ge.x,0)),we.y>1&&ye.y>=0?we=new i.a5((1-Ee.y)/$e(Ee,we)+Ee.x,1):we.y<0&&ye.y<=1&&(we=new i.a5(-Ee.y/$e(Ee,we)+Ee.x,0)),new i.as().extend(this.coordinateLocation(ye)).extend(this.coordinateLocation(we)).extend(this.coordinateLocation(Ge)).extend(this.coordinateLocation(Ee))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=l.visibleDemTiles.reduce((x,E)=>{if(E.dem){const I=E.dem.tree;x.min=Math.min(x.min,I.minimums[0]),x.max=Math.max(x.max,I.maximums[0])}return x},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*l.exaggeration(),d.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,x=this.height/2-d*(1-this._horizonShift);return l?Math.max(0,x):x}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-i.bT,this.maxLat=i.bT,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.am(this.minLng)*this.tileSize,this.worldMaxX=i.am(this.maxLng)*this.tileSize,this.worldMinY=i.at(this.maxLat)*this.tileSize,this.worldMaxY=i.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,d){return this.projection.createTileMatrix(this,d,l)}calculateDistanceTileData(l){const d=l.key,x=this._distanceTileDataCache;if(x[d])return x[d];const E=l.canonical,I=1/this.height,M=this.cameraWorldSize,q=M/this.zoomScale(E.z),X=(E.x+Math.pow(2,E.z)*l.wrap)*q,ne=E.y*q,se=this.point;se.x*=M/this.worldSize,se.y*=M/this.worldSize;const ye=this.angle,we=Math.sin(-ye),Ee=-Math.cos(-ye);return x[d]={bearing:[we,Ee],center:[(se.x-X)*I,(se.y-ne)*I],scale:q/i.ab*I},x[d]}calculateFogTileMatrix(l){const d=l.key,x=this._fogTileMatrixCache;if(x[d])return x[d];const E=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return i.a6.mat4.multiply(E,this.worldToFogMatrix,E),x[d]=new Float32Array(E),x[d]}calculateProjMatrix(l,d=!1,x=!1){const E=l.key;let I;if(I=x?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,I[E])return I[E];const M=this.calculatePosMatrix(l,this.worldSize);let q;return q=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:x?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,i.a6.mat4.multiply(M,q,M),I[E]=new Float32Array(M),I[E]}calculatePixelsToTileUnitsMatrix(l){const d=l.tileID.key,x=this._pixelsToTileUnitsCache;if(x[d])return x[d];const E=i.bW(l,this);return x[d]=E,x[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,d=i.a6.mat4.fromScaling([],[l,l,l]);return i.a6.mat4.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const d=i.bD(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(d),E=this._camera.forward(),I=i.bD(1,this._center.lat);x[2]/=I,E[2]/=I,i.a6.vec3.normalize(E,E);const M=l.raycast(x,E,l.exaggeration());if(M){const q=i.a6.vec3.scaleAndAdd([],x,E,M),X=new i.a5(q[0],q[1],i.bD(q[2],i.aM(q[1]))),ne=(X.z+i.a6.vec3.length([X.x-x[0],X.y-x[1],X.z-x[2]*I]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(ne),this._centerAltitude=X.toAltitude(),this._center=this.coordinateLocation(X),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const d=this._elevation,x=i.bD(1,this._center.lat)*this.worldSize,E=this._computeCameraPosition(x),I=d.getAtPointOrZero(new i.a5(...E)),M=this.pixelsPerMeter/this.worldSize*I,q=this._minimumHeightOverTerrain(),X=E[2]-M;if(X<=q)if(X<0||l){const ne=this.locationCoordinate(this._center,this._centerAltitude),se=[E[0],E[1],ne.z-E[2]],ye=i.a6.vec3.length(se);se[2]-=(q-X)/this._pixelsPerMercatorPixel;const we=i.a6.vec3.length(se);if(we===0)return;i.a6.vec3.scale(se,se,ye/we*this._pixelsPerMercatorPixel),this._camera.position=[E[0],E[1],ne.z*this._pixelsPerMercatorPixel-se[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const we=this.center;return we.lat=i.ap(we.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(we.lng=i.ap(we.lng,this.minLng,this.maxLng)),this.center=we,void(this._constraining=!1)}const d=this._unmodified,{x,y:E}=this.point;let I=0,M=x,q=E;const X=this.width/2,ne=this.height/2,se=this.worldMinY*this.scale,ye=this.worldMaxY*this.scale;if(E-ne<se&&(q=se+ne),E+ne>ye&&(q=ye-ne),ye-se<this.height&&(I=Math.max(I,this.height/(ye-se)),q=(ye+se)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const we=this.worldMinX*this.scale,Ee=this.worldMaxX*this.scale,Ge=this.worldSize/2-(we+Ee)/2;M=(x+Ge+this.worldSize)%this.worldSize-Ge,M-X<we&&(M=we+X),M+X>Ee&&(M=Ee-X),Ee-we<this.width&&(I=Math.max(I,this.width/(Ee-we)),M=(Ee+we)/2)}M===x&&q===E||(this.center=this.unproject(new i.P(M,q))),I&&(this.zoom+=this.scaleZoom(I)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.projection.name==="globe",x=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.bD(1,this.center.lat)/i.bD(1,i.c4));const E=i.bX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,E),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const I=this.projection.zAxisUnit==="meters"?x:1,M=this._camera.getWorldToCamera(this.worldSize,I);let q;const X=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(X[8]=2*-l.x/this.width,X[9]=2*l.y/this.height,this.isOrthographic){let jt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Vt=jt*this.aspect,Rt=-Vt,Dt=-jt;Vt-=l.x,Rt-=l.x,jt+=l.y,Dt+=l.y,q=this._camera.getCameraToClipOrthographic(Rt,Vt,Dt,jt,this._nearZ,this._farZ),((sr,Cr,Rr,wr)=>{for(let en=0;en<16;en++)sr[en]=Ea(Cr[en],Rr[en],wr)})(q,q,X,Zo(this.pitch>=15?1:this.pitch/15))}else q=X;const ne=i.a6.mat4.mul([],X,M);let se=i.a6.mat4.mul([],q,M);if(this.projection.isReprojectedInTileSpace){const jt=this.locationCoordinate(this.center),Vt=i.a6.mat4.identity([]);i.a6.mat4.translate(Vt,Vt,[jt.x*this.worldSize,jt.y*this.worldSize,0]),i.a6.mat4.multiply(Vt,Vt,i.bY(this)),i.a6.mat4.translate(Vt,Vt,[-jt.x*this.worldSize,-jt.y*this.worldSize,0]),i.a6.mat4.multiply(se,se,Vt),i.a6.mat4.multiply(ne,ne,Vt),this.inverseAdjustmentMatrix=i.bZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.a6.mat4.scale([],se,[this.worldSize,this.worldSize,this.worldSize/I,1]),this.projMatrix=se,this.invProjMatrix=i.a6.mat4.invert(new Float64Array(16),this.projMatrix),d){const jt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);jt[8]=2*-l.x/this.width,jt[9]=2*l.y/this.height,this.expandedFarZProjMatrix=i.a6.mat4.mul([],jt,M)}else this.expandedFarZProjMatrix=this.projMatrix;const ye=i.a6.mat4.invert([],q);this.frustumCorners=i.b_.fromInvProjectionMatrix(ye,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const we=new Float32Array(16);i.a6.mat4.identity(we),i.a6.mat4.scale(we,we,[1,-1,1]),i.a6.mat4.rotateX(we,we,this._pitch),i.a6.mat4.rotateZ(we,we,this.angle);const Ee=i.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.a6.mat4.clone(Ee);const Ge=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ee[8]=2*-l.x/this.width,Ee[9]=2*(l.y+Ge)/this.height,this.skyboxMatrix=i.a6.mat4.multiply(we,Ee,we);const $e=this.point,Xe=$e.x,Ze=$e.y,ft=this.width%2/2,gt=this.height%2/2,ut=Math.cos(this.angle),bt=Math.sin(this.angle),_t=Xe-Math.round(Xe)+ut*ft+bt*gt,Mt=Ze-Math.round(Ze)+ut*gt+bt*ft,Tt=new Float64Array(se);if(i.a6.mat4.translate(Tt,Tt,[_t>.5?_t-1:_t,Mt>.5?Mt-1:Mt,0]),this.alignedProjMatrix=Tt,se=i.a6.mat4.create(),i.a6.mat4.scale(se,se,[this.width/2,-this.height/2,1]),i.a6.mat4.translate(se,se,[1,-1,0]),this.labelPlaneMatrix=se,se=i.a6.mat4.create(),i.a6.mat4.scale(se,se,[1,-1,1]),i.a6.mat4.translate(se,se,[-1,-1,0]),i.a6.mat4.scale(se,se,[2/this.width,2/this.height,1]),this.glCoordMatrix=se,this.pixelMatrix=i.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,ne),this._calcFogMatrices(),this._distanceTileDataCache={},se=i.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!se)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=se,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.b$(this);const jt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.a6.vec3.transformMat4(jt,jt,M),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=se;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,x=this._camera.position,E=1/this.height/this._pixelsPerMercatorPixel,I=[l,l,d];i.a6.vec3.scale(I,I,E),i.a6.vec3.scale(x,x,-1),i.a6.vec3.multiply(x,x,I);const M=i.a6.mat4.create();i.a6.mat4.translate(M,M,x),i.a6.mat4.scale(M,M,I),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,d,E)}_computeCameraPosition(l){const d=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,x=this._camera.forward(),E=this.point,I=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-l/this.worldSize*this._centerAltitude;return[E.x/this.worldSize-x[0]*I,E.y/this.worldSize-x[1]*I,l/this.worldSize*this._centerAltitude-x[2]*I]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),x=this._camera.position[2],E=l[2];let I=1;this.projection.wrap&&(this.center=this.center.wrap()),E>0&&(I=Math.min((d-x)/E,1)),this._camera.position=i.a6.vec3.scaleAndAdd([],this._camera.position,l,I),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,d=this._camera.forward(),{pitch:x,bearing:E}=this._camera.getPitchBearing(),I=i.bD(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.bB(this._maxPitch)),q=Math.max((l[2]-I)/Math.cos(x),M),X=this._zoomFromMercatorZ(q);i.a6.vec3.scaleAndAdd(l,l,d,q),this._pitch=i.ap(x,i.bB(this.minPitch),i.bB(this.maxPitch)),this.angle=i.bA(E,-Math.PI,Math.PI),this._setZoom(i.ap(X,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.a5(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let d=0,x=i.bU,E=0,I=1/0;for(;x-d>1e-6&&x>d;){const M=d+.5*(x-d),q=this.tileSize*Math.pow(2,M),X=this.getCameraToCenterDistance(this.projection,M,q),ne=this.scaleZoom(X/(l*this.tileSize)),se=Math.abs(M-ne);se<I&&(I=se,E=M),M<ne?d=M:x=M}return E}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,d){const x=Math.min(l.x,d.x),E=Math.max(l.x,d.x),I=Math.min(l.y,d.y),M=Math.max(l.y,d.y);if(I<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const q=[new i.P(x,I),new i.P(E,M),new i.P(x,M),new i.P(E,I)],X=this.renderWorldCopies?-3:0,ne=this.renderWorldCopies?4:1;for(const se of q){const ye=this.pointRayIntersection(se);if(ye.t<0)return!0;const we=this.rayIntersectionCoordinate(ye);if(we.x<X||we.y<0||we.x>ne||we.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.c0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(l,d){const x=i.a6.vec3.length(i.a6.vec3.sub([],this._camera.position,l)),E=this._zoomFromMercatorZ(x)+d;return x-this._mercatorZfromZoom(E)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([d,x,E],I){const M=[d,x,E,1];i.a6.vec4.transformMat4(M,M,I);const q=M[3]=Math.max(M[3],1e-6);return M[0]/=q,M[1]/=q,M[2]/=q,M}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,l))}}getCameraToCenterDistance(l,d=this.zoom,x=this.worldSize){const E=i.bX(l,d,this.width,this.height,1024),I=l.pixelSpaceConversion(this.center.lat,x,E);let M=.5/Math.tan(.5*this._fov)*this.height*I;return this.isOrthographic&&(M=Ea(1,M,Zo(this.pitch>=15?1:this.pitch/15))),M}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.a6.mat4.multiply(l,l,this.globeMatrix),l}getFrustum(l){return i.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,this.projection.zAxisUnit==="meters")}}const $i=(v,l)=>{if(l>0&&v.terrain&&i.w("Cutoff is currently disabled on terrain"),l<=0||v.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=v.transform,x=Math.max(Math.abs(d._zoom-(v.minCutoffZoom-1)),1),E=d.isLODDisabled(!1)?i.a7(60,45,d.pitch):i.a7(30,15,d.pitch),I=d._farZ-d._nearZ,M=l*d.height,q=((1-(X=E))*d.cameraToCenterDistance+X*(d._farZ+M))*x;var X;return{shouldRenderCutoff:E<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(q-d._nearZ)/I,(q-M-d._nearZ)/I]}}},cs={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class la{constructor(l,d){this.aabb=l,this.lastCascade=d}}class Jr{add(l,d){const x=this.receivers[l.key];x!==void 0?(x.aabb.min[0]=Math.min(x.aabb.min[0],d.min[0]),x.aabb.min[1]=Math.min(x.aabb.min[1],d.min[1]),x.aabb.min[2]=Math.min(x.aabb.min[2],d.min[2]),x.aabb.max[0]=Math.max(x.aabb.max[0],d.max[0]),x.aabb.max[1]=Math.max(x.aabb.max[1],d.max[1]),x.aabb.max[2]=Math.max(x.aabb.max[2],d.max[2])):this.receivers[l.key]=new la(d,null)}clear(){this.receivers={}}get(l){return this.receivers[l.key]}computeRequiredCascades(l,d,x){const E=i.c9.fromPoints(l.points);let I=0;for(const M in this.receivers){const q=this.receivers[M];if(!q||!E.intersectsAabb(q.aabb))continue;q.aabb.min=E.closestPoint(q.aabb.min),q.aabb.max=E.closestPoint(q.aabb.max);const X=q.aabb.getCorners();for(let ne=0;ne<x.length;ne++){let se=!0;for(const ye of X){const we=[ye[0]*d,ye[1]*d,ye[2]];if(i.a6.vec3.transformMat4(we,we,x[ne].matrix),we[0]<-1||we[0]>1||we[1]<-1||we[1]>1){se=!1;break}}if(q.lastCascade=ne,I=Math.max(I,ne),se)break}}return I+1}}class sc{constructor(l){this.painter=l,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Jr,this._depthMode=new Dr(l.context.gl.LEQUAL,Dr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,l.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),l.tp.registerParameter(cs,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),l.tp.registerParameter(cs,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),l.tp.registerParameter(cs,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),l.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const l of this._cascades)l.texture.destroy(),l.framebuffer.destroy();this._cascades=[]}updateShadowParameters(l,d){const x=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const E=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||E<=0||(this._shadowLayerCount=x.style.order.reduce((Ge,$e)=>{const Xe=x.style._mergedLayers[$e];return Ge+(Xe.hasShadowPass()&&!Xe.isHidden(l.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const I=x.context,M=cs.shadowMapResolution,q=cs.shadowMapResolution;if(this._cascades.length===0||cs.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Ge=0;Ge<cs.cascadeCount;++Ge){const $e=x._shadowMapDebug,Xe=I.gl,Ze=I.createFramebuffer(M,q,$e,"texture"),ft=new i.T(I,{width:M,height:q,data:null},Xe.DEPTH_COMPONENT16);if(Ze.depthAttachment.set(ft.texture),$e){const gt=new i.T(I,{width:M,height:q,data:null},Xe.RGBA8);Ze.colorAttachment.set(gt.texture)}this._cascades.push({framebuffer:Ze,texture:ft,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.bN,scale:0})}}this.shadowDirection=oc(d);let X=0;if(l.elevation){const Ge=l.elevation,$e=[1e4,-1e4];Ge.visibleDemTiles.filter(Xe=>Xe.dem).forEach(Xe=>{const Ze=Xe.dem.tree;$e[0]=Math.min($e[0],Ze.minimums[0]),$e[1]=Math.max($e[1],Ze.maximums[0])}),$e[0]!==1e4&&(X=($e[1]-$e[0])*Ge.exaggeration())}const ne=1.5*l.cameraToCenterDistance,se=3*ne,ye=new Float64Array(16);for(let Ge=0;Ge<this._cascades.length;++Ge){const $e=this._cascades[Ge];let Xe=l.height/50,Ze=1;cs.cascadeCount===1?Ze=se:Ge===0?Ze=ne:(Xe=ne,Ze=se);const[ft,gt]=$l(l,this.shadowDirection,Xe,Ze,cs.shadowMapResolution,X);$e.scale=l.scale,$e.matrix=ft,$e.boundingSphereRadius=gt,i.a6.mat4.invert(ye,$e.matrix),$e.frustum=i.bN.fromInvProjectionMatrix(ye,1,0,!0),$e.far=Ze}const we=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[we].far,this._cascades[we].far],this._uniformValues.u_shadow_intensity=E,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/cs.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=cs.shadowMapResolution,this._uniformValues.u_shadowmap_0=io.ShadowMap0,this._uniformValues.u_shadowmap_1=io.ShadowMap0+1,this._groundShadowTiles=x.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Ee=x.transform.elevation;for(const Ge of this._groundShadowTiles){let $e={min:0,max:0};if(Ee){const Xe=Ee.getMinMaxForTile(Ge);Xe&&($e=Xe)}this.addShadowReceiver(Ge.toUnwrapped(),$e.min,$e.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(l){this._enabled=l}drawShadowPass(l,d){if(!this.enabled)return;const x=this.painter,E=x.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(x.transform.getFrustum(0),x.transform.worldSize,this._cascades),E.viewport.set([0,0,cs.shadowMapResolution,cs.shadowMapResolution]);for(let I=0;I<this._numCascadesToRender;++I){x.currentShadowCascade=I,E.bindFramebuffer.set(this._cascades[I].framebuffer.framebuffer),E.clear({color:i.bz.white,depth:1});for(const M of l.order){const q=l._mergedLayers[M];if(!q.hasShadowPass()||q.isHidden(x.transform.zoom))continue;const X=l.getLayerSourceCache(q),ne=X?d[X.id]:void 0;(q.type==="model"||ne&&ne.length)&&x.renderLayer(x,X,q,ne)}}x.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const l=this.painter,d=l.style,x=l.context,E=d.directionalLight,I=d.ambientLight;if(!E||!I)return;const M=[],q=$i(l,l.longestCutoffRange);q.shouldRenderCutoff&&M.push("RENDER_CUTOFF");const X=yl(d,E,I),ne=new Dr(x.gl.LEQUAL,Dr.ReadOnly,l.depthRangeFor3D);for(const se of this._groundShadowTiles){const ye=se.toUnwrapped(),we=l.isTileAffectedByFog(se),Ee=l.getOrCreateProgram("groundShadow",{defines:M,overrideFog:we});this.setupShadows(ye,Ee),l.uploadCommonUniforms(x,Ee,ye,null,q);const Ge={u_matrix:l.transform.calculateProjMatrix(ye),u_ground_shadow_factor:X};Ee.draw(l,x.gl.TRIANGLES,ne,gn.disabled,Wr.multiply,vn.disabled,Ge,"ground_shadow",l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments,{},l.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Wr.unblended:Wr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(l){const d=this.painter.transform,x=d.calculatePosMatrix(l,d.worldSize);return i.a6.mat4.multiply(x,this._cascades[this.painter.currentShadowCascade].matrix,x),Float32Array.from(x)}calculateShadowPassMatrixFromMatrix(l){return i.a6.mat4.multiply(l,this._cascades[this.painter.currentShadowCascade].matrix,l),Float32Array.from(l)}setupShadows(l,d,x,E=0){if(!this.enabled)return;const I=this.painter.transform,M=this.painter.context,q=M.gl,X=this._uniformValues,ne=new Float64Array(16),se=I.calculatePosMatrix(l,I.worldSize);for(let ye=0;ye<this._cascades.length;ye++)i.a6.mat4.multiply(ne,this._cascades[ye].matrix,se),X[ye===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(ne),M.activeTexture.set(q.TEXTURE0+io.ShadowMap0+ye),this._cascades[ye].texture.bind(q.NEAREST,q.CLAMP_TO_EDGE);if(this.useNormalOffset=!!x,this.useNormalOffset){const ye=i.c8(l.canonical),we=2/I.tileSize*i.ab/cs.shadowMapResolution,Ee=we*this._cascades[0].boundingSphereRadius,Ge=we*this._cascades[this._cascades.length-1].boundingSphereRadius,$e=(x==="vector-tile"?1:3)/Math.pow(2,E-l.canonical.z-(1-I.zoom+Math.floor(I.zoom)));X.u_shadow_normal_offset=[ye,Ee*$e,Ge*$e],X.u_shadow_bias=[6e-5,.0012,.012]}else X.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(M,X)}setupShadowsFromMatrix(l,d,x=!1){if(!this.enabled)return;const E=this.painter.context,I=E.gl,M=this._uniformValues,q=new Float64Array(16);for(let X=0;X<cs.cascadeCount;X++)i.a6.mat4.multiply(q,this._cascades[X].matrix,l),M[X===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(q),E.activeTexture.set(I.TEXTURE0+io.ShadowMap0+X),this._cascades[X].texture.bind(I.NEAREST,I.CLAMP_TO_EDGE);if(this.useNormalOffset=x,x){const X=cs.normalOffset;M.u_shadow_normal_offset=[1,X,X],M.u_shadow_bias=[6e-5,.0012,.012]}else M.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(E,M)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(l,d,x,E){if(E[2]>=0)return{};const I=function(X,ne,se){const ye=se/(1<<X.canonical.z);return new i.c9([X.canonical.x*ye+X.wrap*se,X.canonical.y*ye+X.wrap*se,0],[(X.canonical.x+1)*ye+X.wrap*se,(X.canonical.y+1)*ye+X.wrap*se,ne])}(l,d,x).getCorners(),M=d/-E[2];E[0]<0?(i.a6.vec3.add(I[0],I[0],[E[0]*M,0,0]),i.a6.vec3.add(I[3],I[3],[E[0]*M,0,0])):E[0]>0&&(i.a6.vec3.add(I[1],I[1],[E[0]*M,0,0]),i.a6.vec3.add(I[2],I[2],[E[0]*M,0,0])),E[1]<0?(i.a6.vec3.add(I[0],I[0],[0,E[1]*M,0]),i.a6.vec3.add(I[1],I[1],[0,E[1]*M,0])):E[1]>0&&(i.a6.vec3.add(I[2],I[2],[0,E[1]*M,0]),i.a6.vec3.add(I[3],I[3],[0,E[1]*M,0]));const q={};return q.vertices=I,q.planes=[bs(I[1],I[0],I[4]),bs(I[2],I[1],I[5]),bs(I[3],I[2],I[6]),bs(I[0],I[3],I[7])],q}addShadowReceiver(l,d,x){this._receivers.add(l,i.c9.fromTileIdAndHeight(l,d,x))}getMaxCascadeForTile(l){const d=this._receivers.get(l);return d&&d.lastCascade?d.lastCascade:0}}function bs(v,l,d){const x=i.a6.vec3.sub([],d,l),E=i.a6.vec3.sub([],v,l),I=i.a6.vec3.cross([],x,E),M=i.a6.vec3.length(I);return M===0?[0,0,1,0]:(i.a6.vec3.scale(I,I,1/M),[I[0],I[1],I[2],-i.a6.vec3.dot(I,l)])}function oc(v){const l=v.properties.get("direction"),d=i.c7(l.x,l.y,l.z);d[2]=i.ap(d[2],0,75);const x=i.ca([d[0],d[1],d[2]]);return i.a6.vec3.fromValues(x.x,x.y,x.z)}function yl(v,l,d){const x=l.properties.get("color"),E=l.properties.get("intensity"),I=l.properties.get("direction"),M=[I.x,I.y,I.z],q=d.properties.get("color"),X=d.properties.get("intensity"),ne=Math.max(i.a6.vec3.dot([0,0,1],M),0),se=[0,0,0];i.a6.vec3.scale(se,q.toRenderColor(v.getLut(l.scope)).toArray01Linear().slice(0,3),X);const ye=[0,0,0];return i.a6.vec3.scale(ye,x.toRenderColor(v.getLut(d.scope)).toArray01Linear().slice(0,3),ne*E),i.cb([se[0]>0?se[0]/(se[0]+ye[0]):0,se[1]>0?se[1]/(se[1]+ye[1]):0,se[2]>0?se[2]/(se[2]+ye[2]):0])}function $l(v,l,d,x,E,I){const M=v.zoom,q=v.scale,X=v.worldSize,ne=1/X,se=v.aspect,ye=Math.sqrt(1+se*se)*Math.tan(.5*v.fovX),we=ye*ye,Ee=x-d,Ge=x+d;let $e,Xe;we>Ee/Ge?($e=x,Xe=x*ye):($e=.5*Ge*(1+we),Xe=.5*Math.sqrt(Ee*Ee+2*(x*x+d*d)*we+Ge*Ge*we*we));const Ze=v.projection.pixelsPerMeter(v.center.lat,X),ft=v._camera.getCameraToWorldMercator(),gt=[0,0,-$e*ne];i.a6.vec3.transformMat4(gt,gt,ft);let ut=Xe*ne;const bt=v._edgeInsets;if(!(bt.left===0&&bt.top===0&&bt.right===0&&bt.bottom===0||bt.left===bt.right&&bt.top===bt.bottom)){const tn=v._camera.getWorldToCamera(v.worldSize,v.projection.zAxisUnit==="meters"?Ze:1),sn=v._camera.getCameraToClipPerspective(v._fov,v.width/v.height,d,x);sn[8]=2*-v.centerOffset.x/v.width,sn[9]=2*v.centerOffset.y/v.height;const kr=new Float64Array(16);i.a6.mat4.mul(kr,sn,tn);const Hr=new Float64Array(16);i.a6.mat4.invert(Hr,kr);const Xn=i.bN.fromInvProjectionMatrix(Hr,X,M,!0);for(const hn of Xn.points){const Fn=((_t=hn)[0]/=q,_t[1]/=q,_t[2]=i.bD(_t[2],v._center.lat),_t);ut=Math.max(ut,i.a6.vec3.len(i.a6.vec3.subtract([],gt,Fn)))}}var _t;ut*=E/(E-1);const Mt=Math.acos(l[2]),Tt=Math.atan2(-l[0],-l[1]),jt=new il;jt.position=gt,jt.setPitchBearing(Mt,Tt);const Vt=jt.getWorldToCamera(X,Ze),Rt=ut*X,Dt=Math.min(v._mercatorZfromZoom(17)*X*-2,-2*Rt),sr=jt.getCameraToClipOrthographic(-Rt,Rt,-Rt,Rt,Dt,(Rt+I*Ze)/l[2]),Cr=new Float64Array(16);i.a6.mat4.multiply(Cr,sr,Vt);const Rr=i.a6.vec3.fromValues(Math.floor(1e6*gt[0])/1e6*X,Math.floor(1e6*gt[1])/1e6*X,0),wr=.5*E,en=[0,0,0];i.a6.vec3.transformMat4(en,Rr,Cr),i.a6.vec3.scale(en,en,wr);const or=[Math.floor(en[0]),Math.floor(en[1]),Math.floor(en[2])],Lr=[0,0,0];i.a6.vec3.sub(Lr,en,or),i.a6.vec3.scale(Lr,Lr,-1/wr);const Er=new Float64Array(16);return i.a6.mat4.identity(Er),i.a6.mat4.translate(Er,Er,Lr),i.a6.mat4.multiply(Cr,Er,Cr),[Cr,Rt]}class js extends i.E{constructor(l){super(),this.requestManager=l,this.models={"":{}},this.numModelsLoading={}}loadModel(l,d){return i.aG(this.requestManager.transformRequest(d,i.R.Model).url).then(x=>{if(!x)return;const E=i.aH(x),I=new i.aI(l,void 0,void 0,E);return I.computeBoundsAndApplyParent(),I}).catch(x=>{if(x&&x.status===404)return null;this.fire(new i.t(new Error(`Could not load model ${l} from ${d}: ${x.message}`)))})}load(l,d){this.models[d]||(this.models[d]={});const x=Object.keys(l);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+x.length;const E=[];for(const I of x)E.push(this.loadModel(I,l[I]));Promise.allSettled(E).then(I=>{for(let M=0;M<I.length;M++){const{status:q,value:X}=I[M];q==="fulfilled"&&X&&(this.models[d][x[M]]={model:X,numReferences:1})}this.numModelsLoading[d]-=x.length,this.fire(new i.x("data",{dataType:"style"}))}).catch(I=>{this.fire(new i.t(new Error(`Could not load models: ${I.message}`)))})}isLoaded(){for(const l in this.numModelsLoading)if(this.numModelsLoading[l]>0)return!1;return!0}hasModel(l,d){return!!this.getModel(l,d)}getModel(l,d){return this.models[d]||(this.models[d]={}),this.models[d][l]?this.models[d][l].model:void 0}addModel(l,d,x){this.models[x]||(this.models[x]={}),this.hasModel(l,x)&&this.models[x][l].numReferences++,this.load({[l]:this.requestManager.normalizeModelURL(d)},x)}addModels(l,d){this.models[d]||(this.models[d]={});const x={};for(const E in l)this.models[d][E]={},x[E]=this.requestManager.normalizeModelURL(l[E]);this.load(x,d)}addModelsFromBucket(l,d){this.models[d]||(this.models[d]={});const x={};for(const E of l)this.hasModel(E,d)?this.models[d][E].numReferences++:x[E]=this.requestManager.normalizeModelURL(E);this.load(x,d)}removeModel(l,d){if(this.models[d]&&this.models[d][l]&&(this.models[d][l].numReferences--,this.models[d][l].numReferences===0)){const x=this.models[d][l].model;delete this.models[d][l],x.destroy()}}listModels(l){return this.models[l]||(this.models[l]={}),Object.keys(this.models[l])}upload(l,d){this.models[d]||(this.models[d]={});for(const x in this.models[d])this.models[d][x].model&&this.models[d][x].model.upload(l.context)}}const Jo=new i.a0({data:new i.a1(i._.colorTheme.data)}),Aa=(v,l)=>kt(v,l&&l.filter(d=>d.identifier!=="source.canvas")),Pc=i.ar(Xr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),yr=i.ar(Xr,["setCenter","setZoom","setBearing","setPitch"]),jr={version:8,layers:[],sources:{}},xn={duration:300,delay:0};class jn extends i.E{constructor(l,d={}){super(),this.map=l,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=i.l({},xn),this._buildingIndex=new pn(this),this.crossTileSymbolIndex=new An,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new fr,this.dispatcher=d.dispatcher?d.dispatcher:new i.cd(i.ce(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new Re,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new i.cf(l._requestManager,d.localFontFamily?i.cg.all:d.localIdeographFontFamily?i.cg.ideographs:i.cg.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new js(l._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",i.ch());const x=this;this._rtlTextPluginCallback=jn.registerForPluginStateChange(E=>{x.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(I,M)=>{if(i.ci(I),M&&M.every(q=>q))for(const q in x._sourceCaches){const X=x._sourceCaches[q],ne=X.getSource().type;ne!=="vector"&&ne!=="geojson"||X.reload()}})}),this.on("data",E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const I=this.getOwnSource(E.sourceId);if(I&&I.vectorLayerIds)for(const M in this._layers){const q=this._layers[M];q.source===I.id&&this._validateLayer(q)}})}load(l){return l?(typeof l=="string"?this.loadURL(l):this.loadJSON(l),this):this}_getGlobalId(l){if(!l)return null;if(typeof l=="string"){if(i.f(l))return l;const d=i.cj(l);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${i.ck(JSON.stringify(l))}`}_diffStyle(l,d,x){this.globalId=this._getGlobalId(l);const E=(I,M)=>{try{M(null,this.setState(I,x))}catch(q){M(q,!1)}};if(typeof l=="string"){const I=this.map._requestManager.normalizeStyleURL(l),M=this.map._requestManager.transformRequest(I,i.R.Style);i.n(M,(q,X)=>{q?this.fire(new i.t(q)):X&&E(X,d)})}else typeof l=="object"&&E(l,d)}loadURL(l,d={}){this.fire(new i.x("dataloading",{dataType:"style"}));const x=typeof d.validate=="boolean"?d.validate:!i.f(l);this.globalId=this._getGlobalId(l),l=this.map._requestManager.normalizeStyleURL(l,d.accessToken),this.resolvedImports.add(l);const E=this.importsCache.get(l);if(E)return this._load(E,x);const I=this.map._requestManager.transformRequest(l,i.R.Style);this._request=i.n(I,(M,q)=>{if(this._request=null,M)this.fire(new i.t(M));else if(q)return this.importsCache.set(l,q),this._load(q,x)})}loadJSON(l,d={}){this.fire(new i.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(l),this._request=i.q.frame(()=>{this._request=null,this._load(l,d.validate!==!1)})}loadEmpty(){this.fire(new i.x("dataloading",{dataType:"style"})),this._load(jr,!1)}_loadImports(l,d,x){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const E=[];for(const I of l){const M=this._createFragmentStyle(I),q=new Promise(se=>{M.once("style.import.load",se),M.once("error",se)}).then(()=>this.mergeAll());if(E.push(q),this.resolvedImports.has(I.url)){M.loadEmpty();continue}const X=I.data||this.importsCache.get(I.url);X?(M.loadJSON(X,{validate:d}),this._isInternalStyle(X)&&(M.globalId=null)):I.url?M.loadURL(I.url,{validate:d}):M.loadEmpty();const ne={style:M,id:I.id,config:I.config};if(x){const se=this.fragments.findIndex(({id:ye})=>ye===x);this.fragments=this.fragments.slice(0,se).concat(ne).concat(this.fragments.slice(se))}else this.fragments.push(ne)}return Promise.allSettled(E)}getImportGlobalIds(l=this,d=new Set){for(const x of l.fragments)x.style.globalId&&d.add(x.style.globalId),this.getImportGlobalIds(x.style,d);return[...d.values()]}_createFragmentStyle(l){const d=this.scope?i.av(l.id,this.scope):l.id;let x;const E=this._initialConfig&&this._initialConfig[d];(l.config||E)&&(x=i.l({},l.config,E));const I=new jn(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:x,configOptions:this.options,configDependentLayers:this._configDependentLayers});return I.setEventedParent(this.map,{style:I}),I}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(l){return this.isRootStyle()&&(l.fragment||!!l.schema&&l.fragment!==!1)}_load(l,d){const x=l.schema;if(this._isInternalStyle(l)){const M=i.l({},jr,{imports:[{id:"basemap",data:l,url:""}]});return void this._load(M,d)}if(this.updateConfig(this._config,x),d&&Aa(this,Bn(l)))return;this._loaded=!0,this.stylesheet=i.cl(l);const E=()=>{for(const ne in l.sources)this.addSource(ne,l.sources[ne],{validate:!1,isInitialLoad:!0});l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(l.glyphs,this.scope);const M=Mn(this.stylesheet.layers);if(this._order=M.map(ne=>ne.id),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const ne=this.stylesheet.lights[0];this.light=new Ot(ne.properties,ne.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Ot(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const ne of M){const se=i.cq(ne,this.scope,this._styleColorTheme.lut,this.options);se.configDependencies.size!==0&&this._configDependentLayers.add(se.fqid),se.setEventedParent(this,{layer:{id:se.id}}),this._layers[se.id]=se,this._serializedLayers[se.id]=se.serialize();const ye=this.getOwnLayerSourceCache(se),we=!!this.directionalLight&&this.directionalLight.shadowsEnabled();ye&&se.canCastShadows()&&we&&(ye.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const q=this.stylesheet.terrain;q&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(q,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.x("data",{dataType:"style"}));const X=this.isRootStyle();l.imports?this._loadImports(l.imports,d).then(()=>{this._reloadImports(),this.fire(new i.x(X?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new i.x(X?"style.load":"style.import.load")))},I=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=I,I){const M=this._evaluateColorThemeData(I);this._loadColorTheme(M).then(()=>{E()}).catch(q=>{i.w(`Couldn't load color theme from the stylesheet: ${q}`),E()})}else this._styleColorTheme.lut=null,E()}isRootStyle(){return this.importDepth===0}mergeAll(){let l,d,x,E,I,M,q,X;const ne={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(se=>{if(se.stylesheet){if(se.light!=null&&(l=se.light),se.stylesheet.lights)for(const ye of se.stylesheet.lights)ye.type==="ambient"&&se.ambientLight!=null&&(d=se.ambientLight),ye.type==="directional"&&se.directionalLight!=null&&(x=se.directionalLight);E=this._prioritizeTerrain(E,se.terrain,se.stylesheet.terrain),se.stylesheet.fog&&se.fog!=null&&(I=se.fog),se.stylesheet.camera!=null&&(X=se.stylesheet.camera),se.stylesheet.projection!=null&&(M=se.stylesheet.projection),se.stylesheet.transition!=null&&(q=se.stylesheet.transition),ne[se.scope]=se._styleColorTheme}}),this.light=l,this.ambientLight=d,this.directionalLight=x,this.fog=I,this._styleColorThemeForScope=ne,E===null?delete this.terrain:this.terrain=E,this.camera=X||{"camera-projection":"perspective"},this.projection=M||{name:"mercator"},this.transition=i.l({},xn,q),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(l){const d=x=>{for(const E of x.fragments)d(E.style);l(x)};d(this)}_prioritizeTerrain(l,d,x){const E=l&&l.drapeRenderMode===0;return x===null?d&&d.drapeRenderMode===0?d:E?l:null:d!=null&&(!l||E||d&&d.drapeRenderMode===1)?d:l}mergeTerrain(){let l;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{l=this._prioritizeTerrain(l,d.terrain,d.stylesheet.terrain)}),l===null?delete this.terrain:this.terrain=l}mergeProjection(){let l;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(l=d.stylesheet.projection)}),this.projection=l||{name:"mercator"}}mergeSources(){const l={},d={},x={};this.forEachFragmentStyle(E=>{for(const I in E._sourceCaches){const M=i.av(I,E.scope);l[M]=E._sourceCaches[I]}for(const I in E._otherSourceCaches){const M=i.av(I,E.scope);d[M]=E._otherSourceCaches[I]}for(const I in E._symbolSourceCaches){const M=i.av(I,E.scope);x[M]=E._symbolSourceCaches[I]}}),this._mergedSourceCaches=l,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=x}mergeLayers(){const l={},d=[],x={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(I=>{for(const M of I._order){const q=I._layers[M];if(q.type==="slot"){const X=i.cm(M);if(l[X])continue;l[X]=[]}q.slot&&l[q.slot]?l[q.slot].push(q):d.push(q)}}),this._mergedOrder=[];const E=(I=[])=>{for(const M of I)if(M.type==="slot"){const q=i.cm(M.id);l[q]&&E(l[q]),this._mergedSlots.push(q)}else{const q=i.av(M.id,M.scope);this._mergedOrder.push(q),x[q]=M,M.is3D()&&(this._has3DLayers=!0),M.type==="circle"&&(this._hasCircleLayers=!0),M.type==="symbol"&&(this._hasSymbolLayers=!0),M.type==="clip"&&(this._clipLayerPresent=!0)}};E(d),this._mergedOrder.sort((I,M)=>{const q=x[I],X=x[M];return q.hasInitialOcclusionOpacityProperties?X.is3D()?1:0:q.is3D()&&X.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=x,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(l){return this.stylesheet.camera=i.l({},this.stylesheet.camera,l),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(l){return l.data?function(d,x,E){const I=i.l({},x);for(const q of Object.keys(i._.colorTheme))I[q]===void 0&&(I[q]=i._.colorTheme[q].default);const M=new i.$(Jo,d,new Map(E));return M.setTransitionOrValue(I,E),M.untransitioned().possiblyEvaluate(new i.a3(0))}(this.scope,l,this.options).get("data"):null}_loadColorTheme(l){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((x,E)=>{const I="data:image/png;base64,";if(!l||l.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void x();let M=l;M.startsWith(I)||(M=I+M);const q="mapbox-reserved-lut",X=new Image;X.src=M,X.onerror=()=>{this._styleColorTheme.lutLoading=!1,E(new Error("Failed to load image data"))},X.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void x();this._styleColorTheme.lutLoading=!1;const{width:ne,height:se,data:ye}=i.q.getImageData(X);if(se>32)return void E(new Error("The height of the image must be less than or equal to 32 pixels."));if(ne!==se*se)return void E(new Error("The width of the image must be equal to the height squared."));this.getImage(q)&&this.removeImage(q),this.addImage(q,{data:new i.r({width:ne,height:se},ye),pixelRatio:1,sdf:!1,version:0});const we=this.imageManager.getImage(q,this.scope);we?(this._styleColorTheme.lut={image:we.data,data:l},x()):E(new Error("Missing LUT image."))}})}getLut(l){const d=this._styleColorThemeForScope[l];return d?d.lut:null}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(l){this._spriteRequest=function(d,x,E){let I,M,q;const X=i.q.devicePixelRatio>1?"@2x":"";let ne=i.n(x.transformRequest(x.normalizeSpriteURL(d,X,".json"),i.R.SpriteJSON),(we,Ee)=>{ne=null,q||(q=we,I=Ee,ye())}),se=i.o(x.transformRequest(x.normalizeSpriteURL(d,X,".png"),i.R.SpriteImage),(we,Ee)=>{se=null,q||(q=we,M=Ee,ye())});function ye(){if(q)E(q);else if(I&&M){const we=i.q.getImageData(M),Ee={};for(const Ge in I){const{width:$e,height:Xe,x:Ze,y:ft,sdf:gt,pixelRatio:ut,stretchX:bt,stretchY:_t,content:Mt}=I[Ge],Tt=new i.r({width:$e,height:Xe});i.r.copy(we,Tt,{x:Ze,y:ft},{x:0,y:0},{width:$e,height:Xe},null),Ee[Ge]={data:Tt,pixelRatio:ut,sdf:gt,stretchX:bt,stretchY:_t,content:Mt}}E(null,Ee)}}return{cancel(){ne&&(ne.cancel(),ne=null),se&&(se.cancel(),se=null)}}}(l,this.map._requestManager,(d,x)=>{if(this._spriteRequest=null,d)this.fire(new i.t(d));else if(x)for(const E in x)this.imageManager.addImage(E,this.scope,x[E]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.x("data",{dataType:"style"}))})}_validateLayer(l){const d=this.getOwnSource(l.source);if(!d)return;const x=l.sourceLayer;x&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(x)===-1)&&this.fire(new i.t(new Error(`Source layer "${x}" does not exist on source "${d.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:l}of this.fragments)if(!l.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((l,d)=>{const x=this.fragments[d];return x&&x.style&&(l.data=x.style.serialize()),l})}_serializeSources(){const l={};for(const d in this._sourceCaches){const x=this._sourceCaches[d].getSource();l[x.id]||(l[x.id]=x.serialize())}return l}_serializeLayers(l){const d=[];for(const x of l){const E=this._layers[x];E&&E.type!=="custom"&&d.push(E.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(l){return!!this.terrain&&l.isDraped(this.getLayerSourceCache(l))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(l){const d=this.getOwnLayer(l);if(d)return d;this.fire(new i.t(new Error(`The layer '${l}' does not exist in the map's style.`)))}_checkSource(l){const d=this.getOwnSource(l);if(d)return d;this.fire(new i.t(new Error(`The source '${l}' does not exist in the map's style.`)))}precompilePrograms(l,d){const x=this.map.painter;if(x)for(let E=l.minzoom||0;E<(l.maxzoom||25.5);E++){const I=l.getProgramIds();if(I)for(const M of I){const q=l.getDefaultProgramParams(M,d.zoom,this._styleColorTheme.lut);q&&(x.style=this,this.fog&&(x._fogVisible=!0,q.overrideFog=!0,x.getOrCreateProgram(M,q)),x._fogVisible=!1,q.overrideFog=!1,x.getOrCreateProgram(M,q),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(q.overrideRtt=!0,x.getOrCreateProgram(M,q)))}}}update(l){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(l),this.directionalLight&&this.directionalLight.recalculate(l);const d=this.calculateLightsBrightness();l.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const x=this._changes.isDirty();let E=!1;if(this._changes.isDirty()){const M=this._changes.getLayerUpdatesByScope();for(const q in M){const{updatedIds:X,removedIds:ne}=M[q];(X||ne)&&(this._updateWorkerLayers(q,X,ne),E=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(l),this.light&&this.light.updateTransitions(l),this.ambientLight&&this.ambientLight.updateTransitions(l),this.directionalLight&&this.directionalLight.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._changes.reset()}const I={};for(const M in this._mergedSourceCaches){const q=this._mergedSourceCaches[M];I[M]=q.used,q.used=!1,q.tileCoverLift=0}for(const M of this._mergedOrder){const q=this._mergedLayers[M];if(q.recalculate(l,this._availableImages),!q.isHidden(l.zoom)){const X=this.getLayerSourceCache(q);X&&(X.used=!0,X.tileCoverLift=Math.max(X.tileCoverLift,q.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(q,l)}):this.precompilePrograms(q,l))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&E&&this.mergeLayers();for(const M in I){const q=this._mergedSourceCaches[M];I[M]!==q.used&&q.getSource().fire(new i.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:q.getSource().id}))}this.light&&this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),x&&this.fire(new i.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=this._changes.getUpdatedImages();if(l.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l);this._changes.resetUpdatedImages()}}_updateWorkerLayers(l,d,x){const E=this.getFragmentStyle(l);E&&this.dispatcher.broadcast("updateLayers",{layers:d?E._serializeLayers(d):[],scope:l,removedIds:x||[],options:E.options})}setState(l,d){if(this._checkLoaded(),Aa(this,Bn(l)))return!1;(l=i.cl(l)).layers=Mn(l.layers);const x=function(M,q){if(!M)return[{command:Xr.setStyle,args:[q]}];let X=[];try{if(!i.bh(M.version,q.version))return[{command:Xr.setStyle,args:[q]}];if(i.bh(M.center,q.center)||X.push({command:Xr.setCenter,args:[q.center]}),i.bh(M.zoom,q.zoom)||X.push({command:Xr.setZoom,args:[q.zoom]}),i.bh(M.bearing,q.bearing)||X.push({command:Xr.setBearing,args:[q.bearing]}),i.bh(M.pitch,q.pitch)||X.push({command:Xr.setPitch,args:[q.pitch]}),i.bh(M.sprite,q.sprite)||X.push({command:Xr.setSprite,args:[q.sprite]}),i.bh(M.glyphs,q.glyphs)||X.push({command:Xr.setGlyphs,args:[q.glyphs]}),i.bh(M.imports,q.imports)||function(Ee=[],Ge=[],$e){Ge=Ge||[];const Xe=(Ee=Ee||[]).map(Jn),Ze=Ge.map(Jn),ft=Ee.reduce(Bi,{}),gt=Ge.reduce(Bi,{}),ut=Xe.slice();let bt,_t,Mt,Tt;for(bt=0,_t=0;bt<Xe.length;bt++)Mt=Xe[bt],gt.hasOwnProperty(Mt)?_t++:($e.push({command:Xr.removeImport,args:[Mt]}),ut.splice(ut.indexOf(Mt,_t),1));for(bt=0,_t=0;bt<Ze.length;bt++)Mt=Ze[Ze.length-1-bt],ut[ut.length-1-bt]!==Mt&&(ft.hasOwnProperty(Mt)?($e.push({command:Xr.removeImport,args:[Mt]}),ut.splice(ut.lastIndexOf(Mt,ut.length-_t),1)):_t++,Tt=ut[ut.length-bt],$e.push({command:Xr.addImport,args:[gt[Mt],Tt]}),ut.splice(ut.length-bt,0,Mt));for(const jt of Ge){const Vt=ft[jt.id];Vt&&!i.bh(Vt,jt)&&$e.push({command:Xr.updateImport,args:[jt.id,jt]})}}(M.imports,q.imports,X),i.bh(M.transition,q.transition)||X.push({command:Xr.setTransition,args:[q.transition]}),i.bh(M.light,q.light)||X.push({command:Xr.setLight,args:[q.light]}),i.bh(M.fog,q.fog)||X.push({command:Xr.setFog,args:[q.fog]}),i.bh(M.projection,q.projection)||X.push({command:Xr.setProjection,args:[q.projection]}),i.bh(M.lights,q.lights)||X.push({command:Xr.setLights,args:[q.lights]}),i.bh(M.camera,q.camera)||X.push({command:Xr.setCamera,args:[q.camera]}),!i.bh(M["color-theme"],q["color-theme"]))return[{command:Xr.setStyle,args:[q]}];const ne={},se=[];(function(Ee,Ge,$e,Xe){let Ze;for(Ze in Ge=Ge||{},Ee=Ee||{})Ee.hasOwnProperty(Ze)&&(Ge.hasOwnProperty(Ze)||oi(Ze,$e,Xe));for(Ze in Ge){if(!Ge.hasOwnProperty(Ze))continue;const ft=Ge[Ze];Ee.hasOwnProperty(Ze)?i.bh(Ee[Ze],ft)||(Ee[Ze].type==="geojson"&&ft.type==="geojson"&&Sr(Ee,Ge,Ze)?$e.push({command:Xr.setGeoJSONSourceData,args:[Ze,ft.data]}):Pi(Ze,Ge,$e,Xe)):Qn(Ze,Ge,$e)}})(M.sources,q.sources,se,ne);const ye=[];M.layers&&M.layers.forEach(Ee=>{Ee.source&&ne[Ee.source]?X.push({command:Xr.removeLayer,args:[Ee.id]}):ye.push(Ee)});let we=M.terrain;we&&ne[we.source]&&(X.push({command:Xr.setTerrain,args:[void 0]}),we=void 0),X=X.concat(se),i.bh(we,q.terrain)||X.push({command:Xr.setTerrain,args:[q.terrain]}),function(Ee,Ge,$e){Ge=Ge||[];const Xe=(Ee=Ee||[]).map(Jn),Ze=Ge.map(Jn),ft=Ee.reduce(Bi,{}),gt=Ge.reduce(Bi,{}),ut=Xe.slice(),bt=Object.create(null);let _t,Mt,Tt,jt,Vt,Rt,Dt;for(_t=0,Mt=0;_t<Xe.length;_t++)Tt=Xe[_t],gt.hasOwnProperty(Tt)?Mt++:($e.push({command:Xr.removeLayer,args:[Tt]}),ut.splice(ut.indexOf(Tt,Mt),1));for(_t=0,Mt=0;_t<Ze.length;_t++)Tt=Ze[Ze.length-1-_t],ut[ut.length-1-_t]!==Tt&&(ft.hasOwnProperty(Tt)?($e.push({command:Xr.removeLayer,args:[Tt]}),ut.splice(ut.lastIndexOf(Tt,ut.length-Mt),1)):Mt++,Rt=ut[ut.length-_t],$e.push({command:Xr.addLayer,args:[gt[Tt],Rt]}),ut.splice(ut.length-_t,0,Tt),bt[Tt]=!0);for(_t=0;_t<Ze.length;_t++)if(Tt=Ze[_t],jt=ft[Tt],Vt=gt[Tt],!bt[Tt]&&!i.bh(jt,Vt))if(i.bh(jt.source,Vt.source)&&i.bh(jt["source-layer"],Vt["source-layer"])&&i.bh(jt.type,Vt.type)){for(Dt in ln(jt.layout,Vt.layout,$e,Tt,null,Xr.setLayoutProperty),ln(jt.paint,Vt.paint,$e,Tt,null,Xr.setPaintProperty),i.bh(jt.slot,Vt.slot)||$e.push({command:Xr.setSlot,args:[Tt,Vt.slot]}),i.bh(jt.filter,Vt.filter)||$e.push({command:Xr.setFilter,args:[Tt,Vt.filter]}),i.bh(jt.minzoom,Vt.minzoom)&&i.bh(jt.maxzoom,Vt.maxzoom)||$e.push({command:Xr.setLayerZoomRange,args:[Tt,Vt.minzoom,Vt.maxzoom]}),jt)jt.hasOwnProperty(Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&Dt!=="slot"&&(Dt.indexOf("paint.")===0?ln(jt[Dt],Vt[Dt],$e,Tt,Dt.slice(6),Xr.setPaintProperty):i.bh(jt[Dt],Vt[Dt])||$e.push({command:Xr.setLayerProperty,args:[Tt,Dt,Vt[Dt]]}));for(Dt in Vt)Vt.hasOwnProperty(Dt)&&!jt.hasOwnProperty(Dt)&&Dt!=="layout"&&Dt!=="paint"&&Dt!=="filter"&&Dt!=="metadata"&&Dt!=="minzoom"&&Dt!=="maxzoom"&&Dt!=="slot"&&(Dt.indexOf("paint.")===0?ln(jt[Dt],Vt[Dt],$e,Tt,Dt.slice(6),Xr.setPaintProperty):i.bh(jt[Dt],Vt[Dt])||$e.push({command:Xr.setLayerProperty,args:[Tt,Dt,Vt[Dt]]}))}else $e.push({command:Xr.removeLayer,args:[Tt]}),Rt=ut[ut.lastIndexOf(Tt)+1],$e.push({command:Xr.addLayer,args:[Vt,Rt]})}(ye,q.layers,X)}catch(ne){console.warn("Unable to compute style diff:",ne),X=[{command:Xr.setStyle,args:[q]}]}return X}(this.serialize(),l).filter(M=>!(M.command in yr));if(x.length===0)return!1;const E=x.filter(M=>!(M.command in Pc));if(E.length>0)throw new Error(`Unimplemented: ${E.map(M=>M.command).join(", ")}.`);const I=[];return x.forEach(M=>{I.push(this[M.command].apply(this,M.args))}),d&&Promise.all(I).then(d),this.stylesheet=l,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(l,d){return this.getImage(l)?this.fire(new i.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,this.scope,d),this._afterImageUpdated(l),this)}updateImage(l,d){this.imageManager.updateImage(l,this.scope,d)}getImage(l){return this.imageManager.getImage(l,this.scope)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l,this.scope),this._afterImageUpdated(l),this):this.fire(new i.t(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(l),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new i.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(l,d,x={}){return this._checkLoaded(),this._validate(It,`models.${l}`,d,null,x)||(this.modelManager.addModel(l,d,this.scope),this._changes.setDirty()),this}hasModel(l){return this.modelManager.hasModel(l,this.scope)}removeModel(l){return this.hasModel(l)?(this.modelManager.removeModel(l,this.scope),this):this.fire(new i.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(l,d,x={}){if(this._checkLoaded(),this.getOwnSource(l)!==void 0)throw new Error(`There is already a source with ID "${l}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(Zr,`sources.${l}`,d,null,x))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const E=Ha(l,d,this.dispatcher,this);E.scope=this.scope,E.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(E.id),source:E.serialize(),sourceId:E.id}));const I=M=>{const q=(M?"symbol:":"other:")+E.id,X=i.av(q,this.scope),ne=this._sourceCaches[q]=new er(X,E,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[E.id]=ne,ne.onAdd(this.map)};I(!1),d.type!=="vector"&&d.type!=="geojson"||I(!0),E.onAdd&&E.onAdd(this.map),x.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(l){this._checkLoaded();const d=this.getOwnSource(l);if(!d)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===l)return this.fire(new i.t(new Error(`Source "${l}" cannot be removed while layer "${E}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===l)return this.fire(new i.t(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const x=this.getOwnSourceCaches(l);for(const E of x){const I=i.cm(E.id);delete this._sourceCaches[I],this._changes.discardSourceCacheUpdate(E.id),E.fire(new i.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:E.getSource().id})),E.setEventedParent(null),E.clearTiles()}return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(l,d){this._checkLoaded(),this.getOwnSource(l).setData(d),this._changes.setDirty()}getOwnSource(l){const d=this.getOwnSourceCache(l);return d&&d.getSource()}getOwnSources(){const l=[];for(const d in this._otherSourceCaches){const x=this.getOwnSourceCache(d);x&&l.push(x.getSource())}return l}areTilesLoaded(){const l=this._mergedSourceCaches;for(const d in l){const x=l[d]._tiles;for(const E in x){const I=x[E];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0}setLights(l){if(this._checkLoaded(),!l)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const E of l){if(this._validate(un,"lights",E))return;switch(E.type){case"ambient":if(this.ambientLight){const I=this.ambientLight;I.set(E),I.updateTransitions(d)}else this.ambientLight=new Vi(E,Wn||(Wn=new i.a0({color:new i.a1(i._.properties_light_ambient.color),intensity:new i.a1(i._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const I=this.directionalLight;I.set(E),I.updateTransitions(d)}else this.directionalLight=new Vi(E,Ki||(Ki=new i.a0({direction:new i.ad(i._.properties_light_directional.direction),color:new i.a1(i._.properties_light_directional.color),intensity:new i.a1(i._.properties_light_directional.intensity),"cast-shadows":new i.a1(i._.properties_light_directional["cast-shadows"]),"shadow-intensity":new i.a1(i._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const x=new i.a3(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(x),this.directionalLight&&this.directionalLight.recalculate(x),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const l=this.directionalLight,d=this.ambientLight;if(!l||!d)return;const x=ye=>.2126*(ye[0]<=.03928?ye[0]/12.92:Math.pow((ye[0]+.055)/1.055,2.4))+.7152*(ye[1]<=.03928?ye[1]/12.92:Math.pow((ye[1]+.055)/1.055,2.4))+.0722*(ye[2]<=.03928?ye[2]/12.92:Math.pow((ye[2]+.055)/1.055,2.4)),E=l.properties.get("color").toRenderColor(null).toArray01(),I=l.properties.get("intensity"),M=l.properties.get("direction"),q=1-i.c7(M.x,M.y,M.z)[2]/90,X=x(E)*I*q,ne=d.properties.get("color").toRenderColor(null).toArray01(),se=d.properties.get("intensity");return(X+x(ne)*se)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const l=[];return this.directionalLight&&l.push(this.directionalLight.get()),this.ambientLight&&l.push(this.ambientLight.get()),l}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(l){if(!l)return this;if(i.cn(l)){const d=i.co(l),x=this.fragments.find(({id:I})=>I===d);if(!x)throw new Error(`Style import not found: ${l}`);const E=i.cm(l);return x.style.getFragmentStyle(E)}{const d=this.fragments.find(({id:x})=>x===l);if(!d)throw new Error(`Style import not found: ${l}`);return d.style}}getConfigProperty(l,d){const x=this.getFragmentStyle(l);if(!x)return null;const E=i.av(d,x.scope),I=x.options.get(E),M=I?I.value||I.default:null;return M?M.serialize():null}setConfigProperty(l,d,x){const E=this.getFragmentStyle(l);if(!E)return;const I=E.stylesheet.schema;if(!I||!I[d])return;const M=i.M(x);if(M.result!=="success")return void Aa(this,M.value);const q=M.value.expression,X=i.av(d,E.scope),ne=E.options.get(X);if(!ne)return;let se;const{minValue:ye,maxValue:we,stepValue:Ee,type:Ge,values:$e}=I[d],Xe=i.M(I[d].default);Xe.result==="success"&&(se=Xe.value.expression),se?(this.options.set(X,{...ne,value:q,default:se,minValue:ye,maxValue:we,stepValue:Ee,type:Ge,values:$e}),this.updateConfigDependencies(d)):this.fire(new i.t(new Error(`No schema defined for the config option "${d}" in the "${l}" fragment.`)))}getConfig(l){const d=this.getFragmentStyle(l);if(!d)return null;const x=d.stylesheet.schema;if(!x)return null;const E={};for(const I in x){const M=i.av(I,d.scope),q=d.options.get(M),X=q?q.value||q.default:null;E[I]=X?X.serialize():null}return E}setConfig(l,d){const x=this.getFragmentStyle(l);x&&(x.updateConfig(d,x.stylesheet.schema),this.updateConfigDependencies())}getSchema(l){const d=this.getFragmentStyle(l);return d?d.stylesheet.schema:null}setSchema(l,d){const x=this.getFragmentStyle(l);x&&(x.stylesheet.schema=d,x.updateConfig(x._config,d),this.updateConfigDependencies())}updateConfig(l,d){if(this._config=l,l||d)if(d)for(const x in d){let E,I;const M=i.M(d[x].default);if(M.result==="success"&&(E=M.value.expression),l&&l[x]!==void 0){const we=i.M(l[x]);we.result==="success"&&(I=we.value.expression)}const{minValue:q,maxValue:X,stepValue:ne,type:se,values:ye}=d[x];if(E){const we=i.av(x,this.scope);this.options.set(we,{default:E,value:I,minValue:q,maxValue:X,stepValue:ne,type:se,values:ye})}else this.fire(new i.t(new Error(`No schema defined for config option "${x}".`)))}else this.fire(new i.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(l){for(const d of this._configDependentLayers){const x=this.getLayer(d);if(x){if(l&&!x.configDependencies.has(l))continue;x.possiblyEvaluateVisibility(),this._updateLayer(x)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(d=>{if(d._styleColorTheme.colorTheme){const x=d._evaluateColorThemeData(d._styleColorTheme.colorTheme);(!d._styleColorTheme.lut&&x!==""||d._styleColorTheme.lut&&x!==d._styleColorTheme.lut.data)&&d.setColorTheme(d._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(l,d,x={}){this._checkLoaded();const E=l.id;if(this._layers[E])return void this.fire(new i.t(new Error(`Layer with id "${E}" already exists on this map`)));let I;if(l.type==="custom"){if(Aa(this,i.cp(l)))return;I=i.cq(l,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof l.source=="object"&&(this.addSource(E,l.source),l=i.cl(l),l=i.l(l,{source:E})),this._validate(ir,`layers.${E}`,l,{arrayIndex:-1},x))return;I=i.cq(l,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(I),I.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[I.id]=I.serialize()}I.configDependencies.size!==0&&this._configDependentLayers.add(I.fqid);let M=this._order.length;if(d){const se=this._order.indexOf(d);if(se===-1)return void this.fire(new i.t(new Error(`Layer with id "${d}" does not exist on this map.`)));I.slot===this._layers[d].slot?M=se:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(M,0,E),this._layerOrderChanged=!0,this._layers[E]=I;const q=this.getOwnLayerSourceCache(I),X=!!this.directionalLight&&this.directionalLight.shadowsEnabled();q&&I.canCastShadows()&&X&&(q.castsShadows=!0);const ne=this._changes.getRemovedLayer(I);if(ne&&I.source&&q&&I.type!=="custom"){this._changes.discardLayerRemoval(I);const se=i.av(I.source,I.scope);ne.type!==I.type?this._changes.updateSourceCache(se,"clear"):(this._changes.updateSourceCache(se,"reload"),q.pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map),I.scope=this.scope,this.mergeLayers()}moveLayer(l,d){this._checkLoaded();const x=this._checkLayer(l);if(!x||l===d)return;const E=this._order.indexOf(l);this._order.splice(E,1);let I=this._order.length;if(d){const M=this._order.indexOf(d);if(M===-1)return void this.fire(new i.t(new Error(`Layer with id "${d}" does not exist on this map.`)));x.slot===this._layers[d].slot?I=M:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(I,0,l),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(l){this._checkLoaded();const d=this._checkLayer(l);if(!d)return;d.setEventedParent(null);const x=this._order.indexOf(l);this._order.splice(x,1),delete this._layers[l],delete this._serializedLayers[l],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const E=this.getOwnLayerSourceCache(d);if(E&&E.castsShadows){let I=!1;for(const M in this._layers)if(this._layers[M].source===d.source&&this._layers[M].canCastShadows()){I=!0;break}E.castsShadows=I}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(l){return this._layers[l]}hasLayer(l){return l in this._mergedLayers}hasLayerType(l){for(const d in this._layers)if(this._layers[d].type===l)return!0;return!1}setLayerZoomRange(l,d,x){this._checkLoaded();const E=this._checkLayer(l);E&&(E.minzoom===d&&E.maxzoom===x||(d!=null&&(E.minzoom=d),x!=null&&(E.maxzoom=x),this._updateLayer(E)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(l,d){this._checkLoaded();const x=this._checkLayer(l);x&&x.slot!==d&&(x.slot=d,this._updateLayer(x))}setFilter(l,d,x={}){this._checkLoaded();const E=this._checkLayer(l);if(E&&!i.bh(E.filter,d))return d==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(We,`layers.${E.id}.filter`,d,{layerType:E.type},x)||(E.filter=i.cl(d),this._updateLayer(E)))}getFilter(l){const d=this._checkLayer(l);if(d)return i.cl(d.filter)}setLayoutProperty(l,d,x,E={}){this._checkLoaded();const I=this._checkLayer(l);if(I&&!i.bh(I.getLayoutProperty(d),x)){if(x!=null&&(!E||E.validate!==!1)&&Aa(I,ht.call(Bn,{key:`layers.${l}.layout.${d}`,layerType:I.type,objectKey:d,value:x,styleSpec:i._,style:{glyphs:!0,sprite:!0}})))return;I.setLayoutProperty(d,x),I.configDependencies.size!==0&&this._configDependentLayers.add(I.fqid),this._updateLayer(I)}}getLayoutProperty(l,d){const x=this._checkLayer(l);if(x)return x.getLayoutProperty(d)}setPaintProperty(l,d,x,E={}){this._checkLoaded();const I=this._checkLayer(l);if(!I||i.bh(I.getPaintProperty(d),x)||x!=null&&(!E||E.validate!==!1)&&Aa(I,qe.call(Bn,{key:`layers.${l}.paint.${d}`,layerType:I.type,objectKey:d,value:x,styleSpec:i._})))return;const M=I.setPaintProperty(d,x);I.configDependencies.size!==0&&this._configDependentLayers.add(I.fqid),M&&this._updateLayer(I),this._changes.updatePaintProperties(I)}getPaintProperty(l,d){const x=this._checkLayer(l);if(x)return x.getPaintProperty(d)}setFeatureState(l,d){this._checkLoaded();const x=l.source,E=l.sourceLayer,I=this._checkSource(x);if(!I)return;const M=I.type;if(M==="geojson"&&E)return void this.fire(new i.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!E)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided.")));const q=this.getOwnSourceCaches(x);for(const X of q)X.setFeatureState(E,l.id,d)}removeFeatureState(l,d){this._checkLoaded();const x=l.source,E=this._checkSource(x);if(!E)return;const I=E.type,M=I==="vector"?l.sourceLayer:void 0;if(I==="vector"&&!M)return void this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new i.t(new Error("A feature id is required to remove its specific state property.")));const q=this.getOwnSourceCaches(x);for(const X of q)X.removeFeatureState(M,l.id,d)}getFeatureState(l){this._checkLoaded();const d=l.source,x=l.sourceLayer,E=this._checkSource(d);if(E){if(E.type!=="vector"||x)return l.id===void 0&&this.fire(new i.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(x,l.id);this.fire(new i.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(l){return this.stylesheet.transition=i.l({},this.stylesheet.transition,l),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const l=this.getTerrain(),d=l&&this.terrain&&this.terrain.scope===this.scope?l:this.stylesheet.terrain;return i.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},x=>x!==void 0)}_updateLayer(l){this._changes.updateLayer(l);const d=this.getLayerSourceCache(l),x=i.av(l.source,l.scope),E=this._changes.getUpdatedSourceCaches();l.source&&!E[x]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(x,"reload"),d.pause()),l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const d=q=>this._mergedLayers[q].is3D(),x=this.order,E={},I=[];for(let q=x.length-1;q>=0;q--){const X=x[q];if(d(X)){E[X]=q;for(const ne of l){const se=ne[X];if(se)for(const ye of se)I.push(ye)}}}I.sort((q,X)=>X.intersectionZ-q.intersectionZ);const M=[];for(let q=x.length-1;q>=0;q--){const X=x[q];if(d(X))for(let ne=I.length-1;ne>=0;ne--){const se=I[ne].feature;if(se.layer&&E[se.layer.id]<q)break;M.push(se),I.pop()}else for(const ne of l){const se=ne[X];if(se)for(const ye of se)M.push(ye.feature)}}return M}queryRenderedFeatures(l,d,x){d&&d.filter&&this._validate(We,"queryRenderedFeatures.filter",d.filter,null,d),d.scope=this.scope,d.availableImages=this._availableImages,d.serializedLayers=this._serializedLayers;const E={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new i.t(new Error("parameters.layers must be an Array."))),[];for(const ne of d.layers){const se=this._mergedLayers[ne];if(!se)return this.fire(new i.t(new Error(`The layer '${ne}' does not exist in the map's style and cannot be queried for features.`))),[];E[se.source]=!0}}const I=[],M=d.serializedLayers||{},q=d&&d.layers?d.layers.some(ne=>{const se=this.getLayer(ne);return se&&se.is3D()}):this.has3DLayers(),X=Cs.createFromScreenPoints(l,x);for(const ne in this._mergedSourceCaches){const se=this._mergedSourceCaches[ne].getSource();if(!se||se.scope!==d.scope)continue;const ye=this._mergedSourceCaches[ne].getSource().id;d.layers&&!E[ye]||I.push(Fc(this._mergedSourceCaches[ne],this._mergedLayers,M,X,d,x,q,!!this.map._showQueryGeometry))}return this.placement&&I.push(function(ne,se,ye,we,Ee,Ge,$e){const Xe={},Ze=Ge.queryRenderedSymbols(we),ft=[];for(const gt of Object.keys(Ze).map(Number))ft.push($e[gt]);ft.sort(Ul);for(const gt of ft){const ut=gt.featureIndex.lookupSymbolFeatures(Ze[gt.bucketInstanceId],se,gt.bucketIndex,gt.sourceLayerIndex,Ee.filter,Ee.layers,Ee.availableImages,ne);for(const bt in ut){const _t=Xe[bt]=Xe[bt]||[],Mt=ut[bt];Mt.sort((Tt,jt)=>{const Vt=gt.featureSortOrder;if(Vt){const Rt=Vt.indexOf(Tt.featureIndex);return Vt.indexOf(jt.featureIndex)-Rt}return jt.featureIndex-Tt.featureIndex});for(const Tt of Mt)_t.push(Tt)}}for(const gt in Xe)Xe[gt].forEach(ut=>{const bt=ut.feature,_t=ye(ne[gt]);if(!_t)return;const Mt=_t.getFeatureState(bt.layer["source-layer"],bt.id);bt.source=bt.layer.source,bt.layer["source-layer"]&&(bt.sourceLayer=bt.layer["source-layer"]),bt.state=Mt});return Xe}(this._mergedLayers,M,this.getLayerSourceCache.bind(this),X.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(l,d){d&&d.filter&&this._validate(We,"querySourceFeatures.filter",d.filter,null,d);const x=this.getOwnSourceCaches(l);let E=[];for(const I of x)E=E.concat(nc(I,d));return E}addSourceType(l,d,x){return jn.getSourceType(l)?x(new Error(`A source type called "${l}" already exists.`)):(jn.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},x):x(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(l,d,x={}){this._checkLoaded();const E=this.light.getLight();let I=!1;for(const q in l)if(!i.bh(l[q],E[q])){I=!0;break}if(!I)return;const M=this._getTransitionParameters();this.light.setLight(l,d,x),this.light.updateTransitions(M)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(l,d=1){if(this._checkLoaded(),!l)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,l===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let x=l;const E=l.source==null;if(d===1){if(this.disableElevatedTerrain)return;if(typeof x.source=="object"){const q="terrain-dem-src";this.addSource(q,x.source),x=i.cl(x),x=i.l(x,{source:q})}const I=i.l({},x),M={};if(this.terrain&&E){I.source=this.terrain.get().source;const q=this.terrain?this.getFragmentStyle(this.terrain.scope):null;q&&(M.style=q.serialize())}if(this._validate(ri,"terrain",I,M))return}if(!this.terrain||this.terrain.scope!==this.scope&&!E||this.terrain&&d!==this.terrain.drapeRenderMode){if(!x)return;this._createTerrain(x,d),this.fire(new i.x("data",{dataType:"style"}))}else{const I=this.terrain,M=I.get();for(const q of Object.keys(i._.terrain))!x.hasOwnProperty(q)&&i._.terrain[q].default&&(x[q]=i._.terrain[q].default);for(const q in l)if(!i.bh(l[q],M[q])){I.set(l,this.options),this.stylesheet.terrain=l;const X=this._getTransitionParameters({duration:0});I.updateTransitions(X),this.fire(new i.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const d=this.fog=new Ni(l,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!i.bh(d.get(),l)){d.set(l,this.options),this.stylesheet.fog=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}}else this._createFog(l);this._markersNeedUpdate=!0}setColorTheme(l){this._checkLoaded();const d=()=>{for(const E in this._layers)this._layers[E].lut=this._styleColorTheme.lut;for(const E in this._sourceCaches)this._sourceCaches[E].clearTiles()};if(this._styleColorTheme.colorTheme=l,!l)return this._styleColorTheme.lut=null,void d();const x=this._evaluateColorThemeData(l);this._loadColorTheme(x).then(()=>{this.fire(new i.x("colorthemeset")),d()}).catch(E=>{i.w(`Couldn't set color theme: ${E}`)})}_getTransitionParameters(l){return{now:i.q.now(),transition:i.l(this.transition,l)}}updateDrapeFirstLayers(){if(!this.terrain)return;const l=[],d=[];for(const x of this._mergedOrder)this.isLayerDraped(this._mergedLayers[x])?l.push(x):d.push(x);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...d)}_createTerrain(l,d){const x=this.terrain=new xr(l,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=l),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const E=this._getTransitionParameters({duration:0});x.updateTransitions(E)}_force3DLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="symbol"&&this._updateLayer(d)}}_validate(l,d,x,E,I={}){if(I&&I.validate===!1)return!1;const M=i.l({},this.serialize());return Aa(this,l.call(Bn,i.l({key:d,style:M,value:x,styleSpec:i._},E)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._mergedLayers)this._mergedLayers[l].setEventedParent(null);for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles(),this._mergedSourceCaches[l].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(l){const d=this.getSourceCaches(l);for(const x of d)x.clearTiles()}clearSources(){for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles()}reloadSource(l){const d=this.getSourceCaches(l);for(const x of d)x.resume(),x.reload()}reloadSources(){for(const l of this.getSources())l.reload&&l.reload()}updateSources(l){let d;this.directionalLight&&(d=oc(this.directionalLight));for(const x in this._mergedSourceCaches)this._mergedSourceCaches[x].update(l,void 0,void 0,d)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const d=this._sourceCaches[l];d.resume(),d.reload()}}_updatePlacement(l,d,x,E,I,M,q=!1){let X=!1,ne=!1;const se={},ye={};for(const we of this._mergedOrder){const Ee=this._mergedLayers[we];if(Ee.type!=="symbol")continue;const Ge=i.av(Ee.source,Ee.scope);let $e=se[Ge];if(!$e){const Ze=this.getLayerSourceCache(Ee);if(!Ze)continue;const ft=Ze.getRenderableIds(!0).map(gt=>Ze.getTileByID(gt));ye[Ge]=ft.slice(),$e=se[Ge]=ft.sort((gt,ut)=>ut.tileID.overscaledZ-gt.tileID.overscaledZ||(gt.tileID.isLessThan(ut.tileID)?-1:1))}const Xe=this.crossTileSymbolIndex.addLayer(Ee,$e,d.center.lng,d.projection);X=X||Xe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),q=q||this._layerOrderChanged||E===0,this._layerOrderChanged&&this.fire(new i.x("neworder")),(q||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),d.zoom))&&(this.pauseablePlacement=new ot(d,this._mergedOrder,q,x,E,I,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,se,ye),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),ne=!0),X&&this.pauseablePlacement.placement.setStale()),ne||X){this._buildingIndex.onNewFrame(d.zoom);for(let we=0;we<this._mergedOrder.length;we++){const Ee=this._mergedLayers[this._mergedOrder[we]];if(Ee.type!=="symbol")continue;const Ge=this.isLayerClipped(Ee);this.placement.updateLayerOpacities(Ee,se[i.av(Ee.source,Ee.scope)],we,Ge?M:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}addImport(l,d){this._checkLoaded();const x=this.stylesheet.imports=this.stylesheet.imports||[];if(x.findIndex(({id:I})=>I===l.id)!==-1)return void this.fire(new i.t(new Error(`Import with id '${l.id}' already exists in the map's style.`)));if(!d)return x.push(l),this._loadImports([l],!0);const E=x.findIndex(({id:I})=>I===d);return E===-1&&this.fire(new i.t(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=x.slice(0,E).concat(l).concat(x.slice(E)),this._loadImports([l],!0,d)}updateImport(l,d){this._checkLoaded();const x=this.stylesheet.imports||[],E=this.getImportIndex(l);return E===-1?this:typeof d=="string"?(this.setImportUrl(l,d),this):(d.url&&d.url!==x[E].url&&this.setImportUrl(l,d.url),i.bh(d.config,x[E].config)||this.setImportConfig(l,d.config),i.bh(d.data,x[E].data)||this.setImportData(l,d.data),this)}moveImport(l,d){this._checkLoaded();let x=this.stylesheet.imports||[];const E=this.getImportIndex(l);if(E===-1)return this;const I=this.getImportIndex(d);if(I===-1)return this;const M=x[E],q=this.fragments[E];return x=x.filter(({id:X})=>X!==l),this.fragments=this.fragments.filter(({id:X})=>X!==l),this.stylesheet.imports=x.slice(0,I).concat(M).concat(x.slice(I)),this.fragments=this.fragments.slice(0,I).concat(q).concat(this.fragments.slice(I)),this.mergeLayers(),this}setImportUrl(l,d){this._checkLoaded();const x=this.stylesheet.imports||[],E=this.getImportIndex(l);if(E===-1)return this;x[E].url=d;const I=this.fragments[E];return I.style=this._createFragmentStyle(x[E]),I.style.on("style.import.load",()=>this.mergeAll()),I.style.loadURL(d),this}setImportData(l,d){this._checkLoaded();const x=this.getImportIndex(l),E=this.stylesheet.imports||[];return x===-1?this:d?(this.fragments[x].style.setState(d),this._reloadImports(),this):(delete E[x].data,this.setImportUrl(l,E[x].url))}setImportConfig(l,d){this._checkLoaded();const x=this.getImportIndex(l),E=this.stylesheet.imports||[];if(x===-1)return this;d?E[x].config=d:delete E[x].config;const I=this.fragments[x],M=I.style.stylesheet&&I.style.stylesheet.schema;return I.config=d,I.style.updateConfig(d,M),this.updateConfigDependencies(),this}removeImport(l){this._checkLoaded();const d=this.stylesheet.imports||[],x=this.getImportIndex(l);x!==-1&&(d.splice(x,1),this.fragments[x].style._remove(),this.fragments.splice(x,1),this._reloadImports())}getImportIndex(l){const d=(this.stylesheet.imports||[]).findIndex(x=>x.id===l);return d===-1&&this.fire(new i.t(new Error(`Import '${l}' does not exist in the map's style and cannot be updated.`))),d}getLayer(l){return this._mergedLayers[l]}getSources(){const l=[];for(const d in this._mergedOtherSourceCaches){const x=this._mergedOtherSourceCaches[d];x&&l.push(x.getSource())}return l}getSource(l,d){const x=this.getSourceCache(l,d);return x&&x.getSource()}getLayerSource(l){const d=this.getLayerSourceCache(l);return d&&d.getSource()}getSourceCache(l,d){const x=i.av(l,d);return this._mergedOtherSourceCaches[x]}getLayerSourceCache(l){const d=i.av(l.source,l.scope);return l.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(l){if(l==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[l]&&d.push(this._mergedOtherSourceCaches[l]),this._mergedSymbolSourceCaches[l]&&d.push(this._mergedSymbolSourceCaches[l]),d}updateSourceCaches(){const l=this._changes.getUpdatedSourceCaches();for(const d in l){const x=l[d];x==="reload"?this.reloadSource(d):x==="clear"&&this.clearSource(d)}}updateLayers(l){const d=this._changes.getUpdatedPaintProperties();for(const x of d){const E=this.getLayer(x);E&&E.updateTransitions(l)}}getImages(l,d,x){this.imageManager.getImages(d.icons,d.scope,x),this._updateTilesForChangedImages();const E=I=>{I&&I.setDependencies(d.tileID.key,d.type,d.icons)};E(this._otherSourceCaches[d.source]),E(this._symbolSourceCaches[d.source])}getGlyphs(l,d,x){this.glyphManager.getGlyphs(d.stacks,d.scope,x)}getResource(l,d,x){return i.ct(d,x)}getOwnSourceCache(l){return this._otherSourceCaches[l]}getOwnLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}getOwnSourceCaches(l){const d=[];return this._otherSourceCaches[l]&&d.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&d.push(this._symbolSourceCaches[l]),d}_isSourceCacheLoaded(l){const d=this.getOwnSourceCaches(l);return d.length===0?(this.fire(new i.t(new Error(`There is no source with ID '${l}'`))),!1):d.every(x=>x.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(l,d){if(!this._clipLayerPresent&&l.type!=="fill-extrusion")return!1;const x=l.type==="fill-extrusion"&&l.sourceLayer==="building";if(l.is3D()){if(x||d&&d.type==="batched-model"||l.type==="model")return!0}else if(l.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(l=>{l.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}jn.getSourceType=function(v){return sa[v]},jn.setSourceType=function(v,l){sa[v]=l},jn.registerForPluginStateChange=i.cc;var ts=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,bi=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,As=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,us="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",bo=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Xi=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,ks=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Ss=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Us=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Js=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,ea=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ma=[];ss(ts,ma),ss(As,ma),ss(bi,ma);const ta={"_prelude_fog.vertex.glsl":Xi,"_prelude_terrain.vertex.glsl":bo,"_prelude_shadow.vertex.glsl":Js,"_prelude_fog.fragment.glsl":ks,"_prelude_shadow.fragment.glsl":ea,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Ss,"_prelude_raster_particle.glsl":Us},ra={};In("",bo),In(ks,Xi),In(ea,Js),In(Ss,""),In(Us,"");const Gs=In(bi,As),ga=ts;var hs={background:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:In("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:In(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:In(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:In("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:In("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:In("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:In(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:In(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:In(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:In(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:In("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:In("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:In(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:In(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:In("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:In(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,us),skyboxGradient:In(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,us),skyboxCapture:In(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:In(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:In(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:In(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:In(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),occlusion:In("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function ss(v,l){const d=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let x of d)if(x=x.trim(),x[0]==="#"&&x.includes("if")&&!x.includes("endif")){x=x.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const E=x.split(" ");for(const I of E)l.includes(I)||l.push(I)}}function In(v,l){const d=/#include\s+"([^"]+)"/g,x=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let E=l.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);E&&(E=E.map(ne=>{const se=ne.split(" ");return se[se.length-1]}),E=[...new Set(E)]);const I={},M=[],q=[];if(v=v.replace(d,(ne,se)=>(q.push(se),"")),(l=l.replace(d,(ne,se)=>(M.push(se),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let X=[...ma];ss(v,X),ss(l,X);for(const ne of[...M,...q])ta[ne]||console.error(`Undefined include: ${ne}`),ra[ne]||(ra[ne]=[],ss(ta[ne],ra[ne])),X=[...X,...ra[ne]];return{fragmentSource:v=v.replace(x,(ne,se,ye,we,Ee)=>(I[Ee]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
in ${ye} ${we} ${Ee};
#else
uniform ${ye} ${we} u_${Ee};
#endif
`:se==="initialize"?`
#ifdef HAS_UNIFORM_u_${Ee}
    ${ye} ${we} ${Ee} = u_${Ee};
#endif
`:se==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    in ${ye} ${we} ${Ee};
#endif
`:se==="initialize-attribute"?"":void 0)),vertexSource:l=l.replace(x,(ne,se,ye,we,Ee)=>{const Ge=we==="float"?"vec2":we,$e=Ee.match(/color/)?"color":Ge;return se==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
in ${ye} ${we} a_${Ee};
#endif
`:I[Ee]?se==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
in ${ye} ${Ge} a_${Ee};
out ${ye} ${we} ${Ee};
#else
uniform ${ye} ${we} u_${Ee};
#endif
`:se==="initialize"?$e==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = a_${Ee};
#else
    ${ye} ${we} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = unpack_mix_${$e}(a_${Ee}, u_${Ee}_t);
#else
    ${ye} ${we} ${Ee} = u_${Ee};
#endif
`:se==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    in ${ye} ${we} a_${Ee};
    out ${ye} ${we} ${Ee};
#endif
`:se==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    ${Ee} = a_${Ee};
#endif
`:void 0:se==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
in ${ye} ${Ge} a_${Ee};
#else
uniform ${ye} ${we} u_${Ee};
#endif
`:se==="define-instanced"?$e==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${Ee}0;
in vec4 a_${Ee}1;
in vec4 a_${Ee}2;
in vec4 a_${Ee}3;
#else
uniform ${ye} ${we} u_${Ee};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${ye} ${Ge} a_${Ee};
#else
uniform ${ye} ${we} u_${Ee};
#endif
`:se==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${Ee}
    ${ye} ${we} ${Ee} = a_${Ee};
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${ye} ${we} ${Ee} = a_${Ee};
#else
    ${ye} ${we} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${ye} ${we} ${Ee} = unpack_mix_${$e}(a_${Ee}, u_${Ee}_t);
#else
    ${ye} ${we} ${Ee} = u_${Ee};
#endif
`}),staticAttributes:E,usedDefines:X,vertexIncludes:M,fragmentIncludes:q}}class gi{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,d,x,E,I,M,q,X){this.context=l;let ne=this.boundPaintVertexBuffers.length!==E.length;for(let ye=0;!ne&&ye<E.length;ye++)this.boundPaintVertexBuffers[ye]!==E[ye]&&(ne=!0);let se=this.boundDynamicVertexBuffers.length!==q.length;for(let ye=0;!se&&ye<q.length;ye++)this.boundDynamicVertexBuffers[ye]!==q[ye]&&(se=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==x||ne||se||this.boundIndexBuffer!==I||this.boundVertexOffset!==M)this.freshBind(d,x,E,I,M,q,X);else{l.bindVertexArrayOES.set(this.vao);for(const ye of q)ye&&(ye.bind(),X&&ye.instanceCount&&ye.setVertexAttribDivisor(l.gl,d,X));I&&I.dynamicDraw&&I.bind()}}freshBind(l,d,x,E,I,M,q){const X=l.numAttributes,ne=this.context,se=ne.gl;this.vao&&this.destroy(),this.vao=ne.gl.createVertexArray(),ne.bindVertexArrayOES.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=E,this.boundVertexOffset=I,this.boundDynamicVertexBuffers=M,d.enableAttributes(se,l),d.bind(),d.setVertexAttribPointers(se,l,I);for(const ye of x)ye.enableAttributes(se,l),ye.bind(),ye.setVertexAttribPointers(se,l,I);for(const ye of M)ye&&(ye.enableAttributes(se,l),ye.bind(),ye.setVertexAttribPointers(se,l,I),q&&ye.instanceCount&&ye.setVertexAttribDivisor(se,l,q));E&&E.bind(),ne.currentNumAttributes=X}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function lo(v,l){const d=Math.pow(2,l.canonical.z),x=l.canonical.y;return[new i.a5(0,x/d).toLngLat().lat,new i.a5(0,(x+1)/d).toLngLat().lat]}function eo(v,l,d,x,E,I,M){const q=v.context,X=q.gl,ne=d.hillshadeFBO;if(!ne)return;v.prepareDrawTile();const se=v.isTileAffectedByFog(l),ye=v.getOrCreateProgram("hillshade",{overrideFog:se});q.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ne.colorAttachment.get());const we=((Xe,Ze,ft,gt)=>{const ut=ft.paint.get("hillshade-shadow-color"),bt=ft.paint.get("hillshade-highlight-color"),_t=ft.paint.get("hillshade-accent-color"),Mt=ft.paint.get("hillshade-emissive-strength");let Tt=i.bB(ft.paint.get("hillshade-illumination-direction"));if(ft.paint.get("hillshade-illumination-anchor")==="viewport")Tt-=Xe.transform.angle;else if(Xe.style&&Xe.style.enable3dLights()&&Xe.style.directionalLight){const Vt=Xe.style.directionalLight.properties.get("direction"),Rt=i.c7(Vt.x,Vt.y,Vt.z);Tt=i.bB(Rt[1])}const jt=!Xe.options.moving;return{u_matrix:gt||Xe.transform.calculateProjMatrix(Ze.tileID.toUnwrapped(),jt),u_image:0,u_latrange:lo(0,Ze.tileID),u_light:[ft.paint.get("hillshade-exaggeration"),Tt],u_shadow:ut.toRenderColor(ft.lut),u_highlight:bt.toRenderColor(ft.lut),u_emissive_strength:Mt,u_accent:_t.toRenderColor(ft.lut)}})(v,d,x,v.terrain?l.projMatrix:null);v.uploadCommonUniforms(q,ye,l.toUnwrapped());const{tileBoundsBuffer:Ee,tileBoundsIndexBuffer:Ge,tileBoundsSegments:$e}=v.getTileBoundsBuffers(d);ye.draw(v,X.TRIANGLES,E,I,M,vn.disabled,we,x.id,Ee,Ge,$e)}function ws(v,l,d){if(!l.needsDEMTextureUpload)return;const x=v.context,E=x.gl;x.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||v.getTileTexture(d.stride);const I=d.getPixels();l.demTexture?l.demTexture.update(I,{premultiply:!1}):l.demTexture=new i.T(x,I,E.R32F,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Yi(v,l,d){const x=v.context,E=x.gl;if(!l.dem)return;const I=l.dem;if(x.activeTexture.set(E.TEXTURE1),ws(v,l,I),!l.demTexture)return;l.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);const M=I.dim;x.activeTexture.set(E.TEXTURE0);let q=l.hillshadeFBO;if(!q){const we=new i.T(x,{width:M,height:M,data:null},E.RGBA8);we.bind(E.LINEAR,E.CLAMP_TO_EDGE),q=l.hillshadeFBO=x.createFramebuffer(M,M,!0,"renderbuffer"),q.colorAttachment.set(we.texture)}x.bindFramebuffer.set(q.framebuffer),x.viewport.set([0,0,M,M]);const{tileBoundsBuffer:X,tileBoundsIndexBuffer:ne,tileBoundsSegments:se}=v.getMercatorTileBoundsBuffers(),ye=[];v.linearFloatFilteringSupported()&&ye.push("TERRAIN_DEM_FLOAT_FORMAT"),v.getOrCreateProgram("hillshadePrepare",{defines:ye}).draw(v,E.TRIANGLES,Dr.disabled,gn.disabled,Wr.unblended,vn.disabled,((we,Ee)=>{const Ge=Ee.stride,$e=i.a6.mat4.create();return i.a6.mat4.ortho($e,0,i.ab,-i.ab,0,0,1),i.a6.mat4.translate($e,$e,[0,-i.ab,0]),{u_matrix:$e,u_image:1,u_dimension:[Ge,Ge],u_zoom:we.overscaledZ}})(l.tileID,I),d.id,X,ne,se),l.needsHillshadePrepare=!1}class ai{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qs extends ai{getDefault(){return i.bz.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class sl extends ai{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class ac extends ai{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class ol extends ai{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class qa extends ai{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Mc extends ai{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class lc extends ai{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class so extends ai{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class zs extends ai{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class cc extends ai{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class jc extends ai{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class vu extends ai{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Sc extends ai{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class nu extends ai{getDefault(){const l=this.gl;return[l.ONE,l.ZERO,l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class rh extends ai{getDefault(){return i.bz.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Zh extends ai{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(l,l),this.current=l,this.dirty=!1)}}class nh extends ai{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class bh extends ai{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class xu extends ai{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Jh=class extends ai{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class kc extends ai{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class wh extends ai{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class vd extends ai{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Wl extends ai{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class nf extends ai{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class xd extends ai{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class _d extends ai{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class bd extends ai{getDefault(){return null}set(l){this.gl&&(l!==this.current||this.dirty)&&(this.gl.bindVertexArray(l),this.current=l,this.dirty=!1)}}class ih extends ai{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class _u extends ai{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Dc extends ai{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Kl extends ai{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class sh extends Kl{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class zo extends Kl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class qf extends Kl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ch extends zo{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Np=(v,l,d)=>({u_matrix:v,u_image0:0,u_skirt_height:l,u_ground_shadow_factor:d}),$f=(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(x),u_merc_matrix:d,u_zoom_transition:E,u_merc_center:I,u_image0:0,u_frustum_tl:M,u_frustum_tr:q,u_frustum_br:X,u_frustum_bl:ne,u_globe_pos:se,u_globe_radius:ye,u_viewport:we,u_grid_matrix:$e?Float32Array.from($e):new Float32Array(9),u_skirt_height:Ee,u_far_z_cutoff:Ge});function vl(v,l){return v!=null&&l!=null&&!(!v.hasData()||!l.hasData())&&v.demTexture!=null&&l.demTexture!=null&&v.tileID.key!==l.tileID.key}const Mo=new class{constructor(){this.operations={}}newMorphing(v,l,d,x,E){if(v in this.operations){const I=this.operations[v];I.to.tileID.key!==d.tileID.key&&(I.queued=d)}else this.operations[v]={startTime:x,phase:0,duration:E,from:l,to:d,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const l=this.operations[v];return{from:l.from,to:l.to,phase:l.phase}}update(v){for(const l in this.operations){const d=this.operations[l];for(d.phase=(v-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,v)){delete this.operations[l];break}}}_nextOp(v,l){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=l,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},$a={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Wf(v,l,d){if(l===0)return 0;const x=l<1&&d===514?.25/l:1;return 6*Math.pow(1.5,22-v)*Math.max(l,1)*x}function Sh(v,l){const d=1<<v.z;return!l&&(v.x===0||v.x===d-1)||v.y===0||v.y===d-1}const Ta=v=>({u_matrix:v});function co(v,l,d,x,E){if(E>0){const I=i.q.now(),M=(I-v.timeAdded)/E,q=l?(I-l.timeAdded)/E:-1,X=d.getSource(),ne=x.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),se=!l||Math.abs(l.tileID.overscaledZ-ne)>Math.abs(v.tileID.overscaledZ-ne),ye=se&&v.refreshedUponExpiration?1:i.ap(se?M:1-q,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),l?{opacity:1,mix:1-ye}:{opacity:ye,mix:0}}return{opacity:1,mix:0}}class nt extends er{constructor(l){const d={type:"raster-dem",maxzoom:l.transform.maxZoom},x=new i.cd(i.ce(),null),E=Ha("mock-dem",d,x,l.style);super("mock-dem",E,!1),E.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,d){l.state="loaded",d(null)}}class ge extends er{constructor(l){const d=Ha("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new i.cd(i.ce(),null),l.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,d,x){if(l.freezeTileCoverage)return;this.transform=l;const E=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((I,M)=>{if(I[M.key]="",!this._tiles[M.key]){const q=new ae(M,this._source.tileSize*M.overscaleFactor(),l.tileZoom);q.state="loaded",this._tiles[M.key]=q}return I},{});for(const I in this._tiles)I in E||(this.freeFBO(I),this._tiles[I].unloadVectorData(),delete this._tiles[I])}freeFBO(l){const d=this.proxyCachedFBO[l];if(d!==void 0){const x=Object.values(d);this.renderCachePool.push(...x),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ke extends i.aA{constructor(l,d,x){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=d,this.projMatrix=x}}class rt extends i.cE{constructor(l,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},l.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[x,E,I]=function(X){const ne=new i.a_,se=new i.aO,ye=131;ne.reserve(17161),se.reserve(33800);const we=i.ab/128,Ee=i.ab+we/2,Ge=Ee+we;for(let Xe=-we;Xe<Ge;Xe+=we)for(let Ze=-we;Ze<Ge;Ze+=we){const ft=Ze<0||Ze>Ee||Xe<0||Xe>Ee?24575:0,gt=i.ap(Math.round(Ze),0,i.ab),ut=i.ap(Math.round(Xe),0,i.ab);ne.emplaceBack(gt+ft,ut)}const $e=(Xe,Ze)=>{const ft=Ze*ye+Xe;se.emplaceBack(ft+1,ft,ft+ye),se.emplaceBack(ft+ye,ft+ye+1,ft+1)};for(let Xe=1;Xe<129;Xe++)for(let Ze=1;Ze<129;Ze++)$e(Ze,Xe);return[0,129].forEach(Xe=>{for(let Ze=0;Ze<130;Ze++)$e(Ze,Xe),$e(Xe,Ze)}),[ne,se,32768]}(),M=l.context;this.gridBuffer=M.createVertexBuffer(x,i.b0.members),this.gridIndexBuffer=M.createIndexBuffer(E),this.gridSegments=i.b1.simpleSegment(0,0,x.length,E.length),this.gridNoSkirtSegments=i.b1.simpleSegment(0,0,x.length,I),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new ge(d.map),this.orthoMatrix=i.a6.mat4.create(),i.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.ab,0,i.ab,0,1);const q=M.gl;this._overlapStencilMode=new gn({func:q.GEQUAL,mask:255},0,255,q.KEEP,q.KEEP,q.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new nt(d.map),this._pendingGroundEffectLayers=[]}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),this._style=l,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,d,x){if(l&&l.terrain){this._style!==l&&(this.style=l,this._evaluationZoom=void 0);const E=l.terrain.properties,I=l.terrain.drapeRenderMode===0,M=l.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const q=l.terrain&&l.terrain.scope,X=E.get("source"),ne=I?this._mockSourceCache:l.getSourceCache(X,q);if(!ne)return void i.w(`Couldn't find terrain source "${X}".`);if(this.sourceCache=ne,this._exaggeration=M?this.calculateExaggeration(d):E.get("exaggeration"),!d.projection.requiresDraping&&M&&this._exaggeration===0)return void this._disable();this.enabled=!0;const se=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const ye=this.getScaledDemTileSize();this.sourceCache.update(d,ye,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,se(),this._initializing=!0),se(),d.updateElevation(!0,x),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(l){const d=this._previousCameraAltitude,x=l.getFreeCameraOptions().position.z/l.pixelsPerMeter*l.worldSize;this._previousCameraAltitude=x;const E=d!=null?x-d:Number.MAX_VALUE;if(Math.abs(E)<2)return this._exaggeration;const I=l.zoom,M=this._style.terrain;if(!this._previousUpdateTimestamp)return M.getExaggeration(I);let q=I-this._previousZoom;const X=this._previousUpdateTimestamp;let ne=I;this._evaluationZoom!=null&&(ne=this._evaluationZoom,Math.abs(I-ne)>.5&&(q=.5*(I-ne+q)),q*E<0&&(ne+=q)),this._evaluationZoom=ne;const se=M.getExaggeration(ne),ye=se===M.getExaggeration(Math.max(0,ne-.1));if(ye&&Math.abs(se-this._exaggeration)<.01)return se;let we=Math.min(.1,.00375*(this._updateTimestamp-X));return(ye||se<.1||Math.abs(q)<1e-4)&&(we=Math.min(.2,4*we)),i.aa(this._exaggeration,se,we)}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._mergedSourceCaches)this._style._mergedSourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,x=this.painter.transform;this._initializing&&(this._initializing=x._centerAltitude===0&&this.getAtPointOrZero(i.a5.fromLngLat(x.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const E=this.proxyCoords=d.getIds().map(X=>{const ne=d.getTileByID(X).tileID;return ne.projMatrix=x.calculateProjMatrix(ne.toUnwrapped()),ne});(function(X,ne){const se=ne.transform.pointCoordinate(ne.transform.getCameraPoint()),ye=new i.P(se.x,se.y);X.sort((we,Ee)=>{if(Ee.overscaledZ-we.overscaledZ)return Ee.overscaledZ-we.overscaledZ;const Ge=new i.P(we.canonical.x+(1<<we.canonical.z)*we.wrap,we.canonical.y),$e=new i.P(Ee.canonical.x+(1<<Ee.canonical.z)*Ee.wrap,Ee.canonical.y),Xe=ye.mult(1<<we.canonical.z);return Xe.x-=.5,Xe.y-=.5,Xe.distSqr(Ge)-Xe.distSqr($e)})})(E,this.painter);const I=this.proxyToSource||{};this.proxyToSource={},E.forEach(X=>{this.proxyToSource[X.key]={}}),this.terrainTileForTile={};const M=this._style._mergedSourceCaches;for(const X in M){const ne=M[X];if(!ne.used||(ne!==this.sourceCache&&this.resetTileLookupCache(ne.id),this._setupProxiedCoordsForOrtho(ne,l[X],I),ne.usedForTerrain))continue;const se=l[X];ne.getSource().reparseOverscaled&&this._assignTerrainTiles(se)}this.proxiedCoords[d.id]=E.map(X=>new ke(X,X.key,this.orthoMatrix)),this._assignTerrainTiles(E),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(I),this.renderingToTexture=!1;const q={};this._visibleDemTiles=[];for(const X of this.proxyCoords){const ne=this.terrainTileForTile[X.key];if(!ne)continue;const se=ne.tileID.key;se in q||(this._visibleDemTiles.push(ne),q[se]=se)}}_assignTerrainTiles(l){this._initializing||l.forEach(d=>{if(this.terrainTileForTile[d.key])return;const x=this._findTileCoveringTileID(d,this.sourceCache);x&&(this.terrainTileForTile[d.key]=x)})}_prepareDEMTextures(){const l=this.painter.context,d=l.gl;for(const x in this.terrainTileForTile){const E=this.terrainTileForTile[x],I=E.dem;!I||E.demTexture&&!E.needsDEMTextureUpload||(l.activeTexture.set(d.TEXTURE1),ws(this.painter,E,I))}}_prepareDemTileUniforms(l,d,x,E){if(!d||d.demTexture==null)return!1;const I=l.tileID.canonical,M=Math.pow(2,d.tileID.canonical.z-I.z),q=E||"";return x[`u_dem_tl${q}`]=[I.x*M%1,I.y*M%1],x[`u_dem_scale${q}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let l=0;const d=this._visibleDemTiles.reduce((x,E)=>{if(!E.dem)return x;const I=E.dem.tree.minimums[0];return I>0&&l++,x+I},0);return l?d/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,d=l.gl;l.activeTexture.set(d.TEXTURE2);const x=this._getLoadedAreaMinimum(),E=new i.cF({width:1,height:1},new Float32Array([x]));this._emptyDEMTextureDirty=!1;let I=this._emptyDEMTexture;return I?I.update(E,{premultiply:!1}):I=this._emptyDEMTexture=new i.T(l,E,d.R32F,{premultiply:!1}),I}setupElevationDraw(l,d,x){const E=this.painter.context,I=E.gl,M={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};M.u_exaggeration=this.exaggeration();let q=null,X=null,ne=1;if(x&&x.morphing&&this._useVertexMorphing){const Ee=x.morphing.srcDemTile,Ge=x.morphing.dstDemTile;ne=x.morphing.phase,Ee&&Ge&&(this._prepareDemTileUniforms(l,Ee,M,"_prev")&&(X=Ee),this._prepareDemTileUniforms(l,Ge,M)&&(q=Ge))}const se=Ee=>Ee&&Ee.demTexture&&this.painter.linearFloatFilteringSupported()?I.LINEAR:I.NEAREST;let ye=null;var we;if(this.enabled?X&&q?(ye=q.demTexture,E.activeTexture.set(I.TEXTURE4),X.demTexture.bind(se(X),I.CLAMP_TO_EDGE),M.u_dem_lerp=ne):(q=this.terrainTileForTile[l.tileID.key],ye=this._prepareDemTileUniforms(l,q,M)?q.demTexture:this.emptyDEMTexture):ye=this.emptyDEMTexture,E.activeTexture.set(I.TEXTURE2),ye&&(M.u_dem_size=(we=ye).size[0]===1?1:we.size[0]-2,ye.bind(se(q),I.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(x&&x.useDepthForOcclusion,d,M),x&&x.useMeterToDem&&q){const Ee=(1<<q.tileID.canonical.z)*i.bD(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=Ee}if(x&&x.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=x.labelPlaneMatrixInv),d.setTerrainUniformValues(E,M),this.painter.transform.projection.name==="globe"){const Ee=this.globeUniformValues(this.painter.transform,l.tileID.canonical,x&&x.useDenormalizedUpVectorScale);d.setGlobeUniformValues(E,Ee)}}globeUniformValues(l,d,x){const E=l.projection;return{u_tile_tl_up:E.upVector(d,0,0),u_tile_tr_up:E.upVector(d,i.ab,0),u_tile_br_up:E.upVector(d,i.ab,i.ab),u_tile_bl_up:E.upVector(d,0,i.ab),u_tile_up_scale:x?i.cG(1):E.upVectorScale(d,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const d=this.painter,x=this.painter.context;l.length!==0&&(x.bindFramebuffer.set(null),x.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(E,I,M,q,X){if(E.transform.projection.name==="globe")(function(ne,se,ye,we,Ee){const Ge=ne.context,$e=Ge.gl;let Xe,Ze;const ft=ne.transform,gt=i.cx(ne,Ge,ft),ut=(sr,Cr)=>{if(Ze===Cr)return;const Rr=[$a[Cr],"PROJECTION_GLOBE_VIEW"];gt&&Rr.push("CUSTOM_ANTIALIASING");const wr=ne.isTileAffectedByFog(sr);Xe=ne.getOrCreateProgram("globeRaster",{defines:Rr,overrideFog:wr}),Ze=Cr},bt=ne.colorModeForRenderPass(),_t=new Dr($e.LEQUAL,Dr.ReadWrite,ne.depthRangeFor3D);Mo.update(Ee);const Mt=i.cy(ft),Tt=[i.am(ft.center.lng),i.at(ft.center.lat)],jt=ne.globeSharedBuffers,Vt=[ft.width*i.q.devicePixelRatio,ft.height*i.q.devicePixelRatio],Rt=Float32Array.from(ft.globeMatrix),Dt={useDenormalizedUpVectorScale:!0};{const sr=ne.transform,Cr=Wf(sr.zoom,se.exaggeration(),se.sourceCache._source.tileSize);Ze=-1;const Rr=$e.TRIANGLES;for(const wr of we){const en=ye.getTile(wr),or=gn.disabled,Lr=se.prevTerrainTileForTile[wr.key],Er=se.terrainTileForTile[wr.key];vl(Lr,Er)&&Mo.newMorphing(wr.key,Lr,Er,Ee,250),Ge.activeTexture.set($e.TEXTURE0),en.texture&&en.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE);const tn=Mo.getMorphValuesForProxy(wr.key),sn=tn?1:0;tn&&i.C(Dt,{morphing:{srcDemTile:tn.from,dstDemTile:tn.to,phase:i.cw(tn.phase)}});const kr=i.cz(wr.canonical),Hr=i.cA(kr.getCenter().lat),Xn=i.cB(wr.canonical,kr,Hr,sr.worldSize/sr._pixelsPerMercatorPixel),hn=i.b5(i.cC(wr.canonical)),Fn=$f(sr.expandedFarZProjMatrix,Rt,Mt,hn,i.a9(sr.zoom),Tt,sr.frustumCorners.TL,sr.frustumCorners.TR,sr.frustumCorners.BR,sr.frustumCorners.BL,sr.globeCenterInViewSpace,sr.globeRadius,Vt,Cr,sr._farZ,Xn);if(ut(wr,sn),Xe&&(se.setupElevationDraw(en,Xe,Dt),ne.uploadCommonUniforms(Ge,Xe,wr.toUnwrapped()),jt)){const[li,On,ii]=jt.getGridBuffers(Hr,Cr!==0);Xe.draw(ne,Rr,_t,or,bt,vn.backCCW,Fn,"globe_raster",li,On,ii)}}}if(jt&&(ne.renderDefaultNorthPole||ne.renderDefaultSouthPole)){const sr=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];gt&&sr.push("CUSTOM_ANTIALIASING"),Xe=ne.getOrCreateProgram("globeRaster",{defines:sr});for(const Cr of we){const{x:Rr,y:wr,z:en}=Cr.canonical,or=wr===0,Lr=wr===(1<<en)-1,[Er,tn,sn,kr]=jt.getPoleBuffers(en,!1);if(kr&&(or||Lr)){const Hr=ye.getTile(Cr);Ge.activeTexture.set($e.TEXTURE0),Hr.texture&&Hr.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE);let Xn=i.cD(en,Rr,ft);const hn=i.b5(i.cC(Cr.canonical)),Fn=(li,On)=>li.draw(ne,$e.TRIANGLES,_t,gn.disabled,bt,vn.disabled,$f(ft.expandedFarZProjMatrix,Xn,Xn,hn,0,Tt,ft.frustumCorners.TL,ft.frustumCorners.TR,ft.frustumCorners.BR,ft.frustumCorners.BL,ft.globeCenterInViewSpace,ft.globeRadius,Vt,0,ft._farZ),"globe_pole_raster",On,sn,kr);se.setupElevationDraw(Hr,Xe,Dt),ne.uploadCommonUniforms(Ge,Xe,Cr.toUnwrapped()),or&&ne.renderDefaultNorthPole&&Fn(Xe,Er),Lr&&ne.renderDefaultSouthPole&&(Xn=i.a6.mat4.scale(i.a6.mat4.create(),Xn,[1,-1,1]),Fn(Xe,tn))}}}})(E,I,M,q,X);else{const ne=E.context,se=ne.gl;let ye,we;const Ee=E.shadowRenderer,Ge=$i(E,E.longestCutoffRange),$e=bt=>{if(we===bt)return;const _t=[];_t.push($a[bt]),Ge.shouldRenderCutoff&&_t.push("RENDER_CUTOFF"),ye=E.getOrCreateProgram("terrainRaster",{defines:_t}),we=bt},Xe=E.colorModeForRenderPass(),Ze=new Dr(se.LEQUAL,Dr.ReadWrite,E.depthRangeFor3D);Mo.update(X);const ft=E.transform,gt=Wf(ft.zoom,I.exaggeration(),I.sourceCache._source.tileSize);let ut=[0,0,0];if(Ee){const bt=E.style.directionalLight,_t=E.style.ambientLight;bt&&_t&&(ut=yl(E.style,bt,_t))}{we=-1;const bt=se.TRIANGLES,[_t,Mt]=[I.gridIndexBuffer,I.gridSegments];for(const Tt of q){const jt=M.getTile(Tt),Vt=gn.disabled,Rt=I.prevTerrainTileForTile[Tt.key],Dt=I.terrainTileForTile[Tt.key];vl(Rt,Dt)&&Mo.newMorphing(Tt.key,Rt,Dt,X,250),ne.activeTexture.set(se.TEXTURE0),jt.texture&&jt.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);const sr=Mo.getMorphValuesForProxy(Tt.key),Cr=sr?1:0;let Rr;sr&&(Rr={morphing:{srcDemTile:sr.from,dstDemTile:sr.to,phase:i.cw(sr.phase)}});const wr=Np(Tt.projMatrix,Sh(Tt.canonical,ft.renderWorldCopies)?gt/10:gt,ut);if($e(Cr),!ye)continue;I.setupElevationDraw(jt,ye,Rr);const en=Tt.toUnwrapped();Ee&&Ee.setupShadows(en,ye),E.uploadCommonUniforms(ne,ye,en,null,Ge),ye.draw(E,bt,Ze,Vt,Xe,vn.backCCW,wr,"terrain_raster",I.gridBuffer,_t,Mt)}}}}(d,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const d=this.painter,x=this.painter.context,E=this.proxySourceCache,I=this.proxiedCoords[E.id],M=this._drapedRenderBatches.shift(),q=d.style.order,X=[];let ne=0;for(const se of I){const ye=E.getTileByID(se.proxyTileKey),we=E.proxyCachedFBO[se.key]?E.proxyCachedFBO[se.key][l]:void 0,Ee=we!==void 0?E.renderCache[we]:this.pool[ne++],Ge=we!==void 0;if(ye.texture=Ee.tex,Ge&&!Ee.dirty){X.push(ye.tileID);continue}let $e;x.bindFramebuffer.set(Ee.fb.framebuffer),this.renderedToTile=!1,Ee.dirty&&(x.clear({color:i.bz.transparent,stencil:0}),Ee.dirty=!1);for(let Xe=M.start;Xe<=M.end;++Xe){const Ze=d.style._mergedLayers[q[Xe]];if(Ze.isHidden(d.transform.zoom))continue;const ft=d.style.getLayerSourceCache(Ze),gt=ft?this.proxyToSource[se.key][ft.id]:[se];if(!gt)continue;const ut=gt;x.viewport.set([0,0,Ee.fb.width,Ee.fb.height]),$e!==(ft?ft.id:null)&&(this._setupStencil(Ee,gt,Ze,ft),$e=ft?ft.id:null),d.renderLayer(d,ft,Ze,ut)}if(this._drapedRenderBatches.length===0)for(const Xe of this._pendingGroundEffectLayers){const Ze=d.style._mergedLayers[q[Xe]];if(Ze.isHidden(d.transform.zoom))continue;const ft=d.style.getLayerSourceCache(Ze),gt=ft?this.proxyToSource[se.key][ft.id]:[se];if(!gt)continue;const ut=gt;x.viewport.set([0,0,Ee.fb.width,Ee.fb.height]),$e!==(ft?ft.id:null)&&(this._setupStencil(Ee,gt,Ze,ft),$e=ft?ft.id:null),d.renderLayer(d,ft,Ze,ut)}this.renderedToTile?(Ee.dirty=!0,X.push(ye.tileID)):Ge||--ne,ne===5&&(ne=0,this.renderToBackBuffer(X))}return this.renderToBackBuffer(X),this.renderingToTexture=!1,x.bindFramebuffer.set(null),x.viewport.set([0,0,d.width,d.height]),M.end+1}postRender(){}isLayerOrderingCorrect(l){const d=l.order.length;let x=-1,E=d;for(let I=0;I<d;++I)this._style.isLayerDraped(l._mergedLayers[l.order[I]])?x=Math.max(x,I):E=Math.min(E,I);return E>x}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{l=Math.min(l,d.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,d,x){if(!this._visibleDemTiles)return null;const E=this._visibleDemTiles.filter(I=>I.dem).map(I=>{const M=I.tileID,q=1<<M.overscaledZ,{x:X,y:ne}=M.canonical,se=X/q,ye=(X+1)/q,we=ne/q,Ee=(ne+1)/q;return{minx:se,miny:we,maxx:ye,maxy:Ee,t:I.dem.tree.raycastRoot(se,we,ye,Ee,l,d,x),tile:I}});E.sort((I,M)=>(I.t!==null?I.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const I of E){if(I.t==null)return null;const M=I.tile.dem.tree.raycast(I.minx,I.miny,I.maxx,I.maxy,l,d,x);if(M!=null)return M}return null}_createFBO(){const l=this.painter.context,d=l.gl,x=this.drapeBufferSize;l.activeTexture.set(d.TEXTURE0);const E=new i.T(l,{width:x[0],height:x[1],data:null},d.RGBA8);E.bind(d.LINEAR,d.CLAMP_TO_EDGE);const I=l.createFramebuffer(x[0],x[1],!0,null);return I.colorAttachment.set(E.texture),I.depthAttachment=new Ch(l,I.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,x[0],x[1]),this._stencilRef=0,I.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):I.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:I,tex:E,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const l in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const d=this._style._mergedLayers[l],x=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!x&&d.shouldRedrape():!x&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const x of this._style.getSources())if(x instanceof tl){l=!0;break}if(!l)return;const d={};for(let x=0;x<this._style.order.length;++x){const E=this._style._mergedLayers[this._style.order[x]],I=this._style.getLayerSourceCache(E);if(I&&!d[I.id]&&!E.isHidden(this.painter.transform.zoom)&&E.type==="line"&&E.widthExpression()instanceof i.a4){d[I.id]=!0;for(const M of this.proxyCoords){const q=this.proxyToSource[M.key][I.id];if(q)for(const X of q)this._clearRenderCacheForTile(I.id,X)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const x in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[x]._source instanceof go){l=!0;break}if(!l)return;const d={};for(let x=0;x<this._style.order.length;++x){const E=this._style._mergedLayers[this._style.order[x]],I=this._style.getLayerSourceCache(E);if(!I||d[I.id]||E.isHidden(this.painter.transform.zoom)||E.type!=="raster")continue;const M=E.paint.get("raster-fade-duration");for(const q of this.proxyCoords){const X=this.proxyToSource[q.key][I.id];if(X)for(const ne of X){const se=co(I.getTile(ne),I.findLoadedParent(ne,0),I,this.painter.transform,M);(se.opacity!==1||se.mix!==0)&&this._clearRenderCacheForTile(I.id,ne)}}}}_setupDrapedRenderBatches(){const l=this._style.order,d=l.length;if(d===0)return;const x=[];this._pendingGroundEffectLayers=[];let E,I=0,M=this._style._mergedLayers[l[I]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++I<d;)M=this._style._mergedLayers[l[I]];for(;I<d;++I){const q=this._style._mergedLayers[l[I]];q.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(q)?E===void 0&&(E=I):(q.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(I),E!==void 0&&(x.push({start:E,end:I-1}),E=void 0)))}if(E!==void 0&&x.push({start:E,end:I-1}),x.length!==0){const q=x[x.length-1];this._pendingGroundEffectLayers.every(X=>X>q.end)||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=x}_setupRenderCache(l){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const M=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let q=0;q<M.length;++q){const X=Object.values(M[q]);d.renderCachePool.push(...X)}}return}this._clearRasterLayersFromRenderCache();const x=this.proxyCoords,E=this._tilesDirty;for(let M=x.length-1;M>=0;M--){const q=x[M];if(d.getTileByID(q.key),d.proxyCachedFBO[q.key]!==void 0){const X=l[q.key],ne=this.proxyToSource[q.key];let se=0;for(const ye in ne){const we=ne[ye],Ee=X[ye];if(!Ee||Ee.length!==we.length||we.some((Ge,$e)=>Ge!==Ee[$e]||E[ye]&&E[ye].hasOwnProperty(Ge.key))){se=-1;break}++se}for(const ye in d.proxyCachedFBO[q.key])d.renderCache[d.proxyCachedFBO[q.key][ye]].dirty=se<0||se!==Object.values(X).length}}const I=[...this._drapedRenderBatches];I.sort((M,q)=>q.end-q.start-(M.end-M.start));for(const M of I)for(const q of x){if(d.proxyCachedFBO[q.key])continue;let X=d.renderCachePool.pop();X===void 0&&d.renderCache.length<50&&(X=d.renderCache.length,d.renderCache.push(this._createFBO())),X!==void 0&&(d.proxyCachedFBO[q.key]={},d.proxyCachedFBO[q.key][M.start]=X,d.renderCache[X].dirty=!0)}this._tilesDirty={}}_setupStencil(l,d,x,E){if(!E||!this._sourceTilesOverlap[E.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const I=this.painter.context,M=I.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let q;if(x.isTileClipped())q=d.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);q=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+q>255&&(I.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=q,this._overlapStencilMode.ref=this._stencilRef,x.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):gn.disabled}_renderTileClippingMasks(l,d){const x=this.painter,E=this.painter.context,I=E.gl;x._tileClippingMaskIDs={},E.setColorMode(Wr.disabled),E.setDepthMode(Dr.disabled);const M=x.getOrCreateProgram("clippingMask");for(const q of l){const X=x._tileClippingMaskIDs[q.key]=--d;M.draw(x,I.TRIANGLES,Dr.disabled,new gn({func:I.ALWAYS,mask:0},X,255,I.KEEP,I.KEEP,I.REPLACE),Wr.disabled,vn.disabled,Ta(q.projMatrix),"$clipping",x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}pointCoordinate(l){const d=this.painter.transform;if(l.x<0||l.x>d.width||l.y<0||l.y>d.height)return null;const x=[l.x,l.y,1,1];i.a6.vec4.transformMat4(x,x,d.pixelMatrixInverse),i.a6.vec4.scale(x,x,1/x[3]),x[0]/=d.worldSize,x[1]/=d.worldSize;const E=d._camera.position,I=i.bD(1,d.center.lat),M=[E[0],E[1],E[2]/I,0],q=i.a6.vec3.subtract([],x.slice(0,3),M);i.a6.vec3.normalize(q,q);const X=this.raycast(M,q,this._exaggeration);return X!==null&&X?(i.a6.vec3.scaleAndAdd(M,M,q,X),M[3]=M[2],M[2]*=I,M):null}_setupProxiedCoordsForOrtho(l,d,x){if(l.getSource()instanceof i.aD)return this._setupProxiedCoordsForImageSource(l,d,x);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const E=this.proxiedCoords[l.id]=[],I=this.proxyCoords;for(let X=0;X<I.length;X++){const ne=I[X],se=this._findTileCoveringTileID(ne,l);if(se){const ye=this._createProxiedId(ne,se,x[ne.key]&&x[ne.key][l.id]);E.push(ye),this.proxyToSource[ne.key][l.id]=[ye]}}let M=!1;const q=new Set;for(let X=0;X<d.length;X++){const ne=l.getTile(d[X]);if(!ne||!ne.hasData())continue;const se=this._findTileCoveringTileID(ne.tileID,this.proxySourceCache);if(se&&se.tileID.canonical.z!==ne.tileID.canonical.z){const ye=this.proxyToSource[se.tileID.key][l.id],we=this._createProxiedId(se.tileID,ne,x[se.tileID.key]&&x[se.tileID.key][l.id]);ye?ye.splice(ye.length-1,0,we):this.proxyToSource[se.tileID.key][l.id]=[we];const Ee=this.proxyToSource[se.tileID.key][l.id];q.has(Ee)||q.add(Ee),E.push(we),M=!0}}if(this._sourceTilesOverlap[l.id]=M,M&&this._debugParams.sortTilesHiZFirst)for(const X of q)X.sort((ne,se)=>se.overscaledZ-ne.overscaledZ)}_setupProxiedCoordsForImageSource(l,d,x){if(!l.getSource().loaded())return;const E=this.proxiedCoords[l.id]=[],I=this.proxyCoords,M=l.getSource(),q=M.tileID;if(!q)return;const X=new i.P(q.x,q.y)._div(1<<q.z),ne=M.coordinates.map(i.a5.fromLngLat).reduce((ye,we)=>(ye.min.x=Math.min(ye.min.x,we.x-X.x),ye.min.y=Math.min(ye.min.y,we.y-X.y),ye.max.x=Math.max(ye.max.x,we.x-X.x),ye.max.y=Math.max(ye.max.y,we.y-X.y),ye),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),se=(ye,we)=>{const Ee=ye.wrap+ye.canonical.x/(1<<ye.canonical.z),Ge=ye.canonical.y/(1<<ye.canonical.z),$e=i.ab/(1<<ye.canonical.z),Xe=we.wrap+we.canonical.x/(1<<we.canonical.z),Ze=we.canonical.y/(1<<we.canonical.z);return Ee+$e<Xe+ne.min.x||Ee>Xe+ne.max.x||Ge+$e<Ze+ne.min.y||Ge>Ze+ne.max.y};for(let ye=0;ye<I.length;ye++){const we=I[ye];for(let Ee=0;Ee<d.length;Ee++){const Ge=l.getTile(d[Ee]);if(!Ge||!Ge.hasData()||se(we,Ge.tileID))continue;const $e=this._createProxiedId(we,Ge,x[we.key]&&x[we.key][l.id]),Xe=this.proxyToSource[we.key][l.id];Xe?Xe.push($e):this.proxyToSource[we.key][l.id]=[$e],E.push($e)}}}_createProxiedId(l,d,x){let E=this.orthoMatrix;if(x){const I=x.find(M=>M.key===d.tileID.key);if(I)return I}if(d.tileID.key!==l.key){const I=l.canonical.z-d.tileID.canonical.z;let M,q,X;E=i.a6.mat4.create();const ne=d.tileID.wrap-l.wrap<<l.overscaledZ;I>0?(M=i.ab>>I,q=M*((d.tileID.canonical.x<<I)-l.canonical.x+ne),X=M*((d.tileID.canonical.y<<I)-l.canonical.y)):(M=i.ab<<-I,q=i.ab*(d.tileID.canonical.x-(l.canonical.x+ne<<-I)),X=i.ab*(d.tileID.canonical.y-(l.canonical.y<<-I))),i.a6.mat4.ortho(E,0,M,0,M,0,1),i.a6.mat4.translate(E,E,[q,X,0])}return new ke(d.tileID,l.key,E)}_findTileCoveringTileID(l,d){let x=d.getTile(l);if(x&&x.hasData())return x;const E=this._findCoveringTileCache[d.id],I=E[l.key];if(x=I?d.getTileByID(I):null,x&&x.hasData()||I===null)return x;let M=x?x.tileID:l,q=M.overscaledZ;const X=d.getSource().minzoom,ne=[];if(!I){const ye=d.getSource().maxzoom;if(l.canonical.z>=ye){const we=l.canonical.z-ye;d.getSource().reparseOverscaled?(q=Math.max(l.canonical.z+2,d.transform.tileZoom),M=new i.aA(q,l.wrap,ye,l.canonical.x>>we,l.canonical.y>>we)):we!==0&&(q=ye,M=new i.aA(q,l.wrap,ye,l.canonical.x>>we,l.canonical.y>>we))}M.key!==l.key&&(ne.push(M.key),x=d.getTile(M))}const se=ye=>{ne.forEach(we=>{E[we]=ye}),ne.length=0};for(q-=1;q>=X&&(!x||!x.hasData());q--){x&&se(x.tileID.key);const ye=M.calculateScaledKey(q);if(x=d.getTileByID(ye),x&&x.hasData())break;const we=E[ye];if(we===null)break;we===void 0?ne.push(ye):x=d.getTileByID(we)}return se(x?x.tileID.key:null),x&&x.hasData()?x:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,d){let x=this._tilesDirty[l];x||(x=this._tilesDirty[l]={}),x[d.key]=!0}}function Kt(v,l,d){const x=function(q,X,ne){const se=i.a6.vec3.dot(X,q),ye=i.a6.vec3.dot(ne,[.2126,.7152,.0722]),we=(Ge,$e,Xe)=>(1-Xe)*Ge+Xe*$e,Ee=we(1-.3*Math.min(ye,1),1,Math.min(se+1,1));return we(.92,1,Math.asin(i.ap(X[2],-1,1))/Math.PI+.5)*Ee}(v,[0,0,1],l),E=[0,0,0];i.a6.vec3.scale(E,d.slice(0,3),x);const I=[0,0,0];i.a6.vec3.scale(I,l.slice(0,3),v[2]);const M=[0,0,0];return i.a6.vec3.add(M,E,I),i.cb(M)}const Qr=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Kn=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class Ei{static cacheKey(l,d,x,E){let I=`${d}${E?E.cacheKey:""}`;for(const M of x)l.usedDefines.includes(M)&&(I+=`/${M}`);return I}constructor(l,d,x,E,I,M){const q=l.gl;this.program=q.createProgram(),this.configuration=E,this.name=d,this.fixedDefines=[...M];const X=E?E.getBinderAttributes():[],ne=(x.staticAttributes||[]).concat(X);let se=E?E.defines():[];se=se.concat(M.map(Xe=>`#define ${Xe}`));const ye=`#version 300 es
`;let we=ye+se.concat("precision mediump float;",ga,Gs.fragmentSource).join(`
`);for(const Xe of x.fragmentIncludes)we+=`
${ta[Xe]}`;we+=`
${x.fragmentSource}`;let Ee=ye+se.concat("precision highp float;",ga,Gs.vertexSource).join(`
`);for(const Xe of x.vertexIncludes)Ee+=`
${ta[Xe]}`;Ee+=`
${x.vertexSource}`;const Ge=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(Ge,we),q.compileShader(Ge),q.attachShader(this.program,Ge);const $e=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())this.failedToCreate=!0;else{q.shaderSource($e,Ee),q.compileShader($e),q.attachShader(this.program,$e),this.attributes={},this.numAttributes=ne.length;for(let Xe=0;Xe<this.numAttributes;Xe++)if(ne[Xe]){const Ze=ne[Xe].startsWith("a_")?ne[Xe]:`a_${ne[Xe]}`;q.bindAttribLocation(this.program,Xe,Ze),this.attributes[Ze]=Xe}q.linkProgram(this.program),q.deleteShader($e),q.deleteShader(Ge),this.fixedUniforms=I(l),this.binderUniforms=E?E.getUniforms(l):[],(M.includes("TERRAIN")||d.indexOf("symbol")!==-1||d.indexOf("circle")!==-1)&&(this.terrainUniforms=(Xe=>({u_dem:new i.bJ(Xe),u_dem_prev:new i.bJ(Xe),u_dem_tl:new i.bG(Xe),u_dem_scale:new i.bI(Xe),u_dem_tl_prev:new i.bG(Xe),u_dem_scale_prev:new i.bI(Xe),u_dem_size:new i.bI(Xe),u_dem_lerp:new i.bI(Xe),u_exaggeration:new i.bI(Xe),u_depth:new i.bJ(Xe),u_depth_size_inv:new i.bG(Xe),u_depth_range_unpack:new i.bG(Xe),u_occluder_half_size:new i.bI(Xe),u_occlusion_depth_offset:new i.bI(Xe),u_meter_to_dem:new i.bI(Xe),u_label_plane_matrix_inv:new i.bF(Xe)}))(l)),M.includes("GLOBE")&&(this.globeUniforms=(Xe=>({u_tile_tl_up:new i.bH(Xe),u_tile_tr_up:new i.bH(Xe),u_tile_br_up:new i.bH(Xe),u_tile_bl_up:new i.bH(Xe),u_tile_up_scale:new i.bI(Xe)}))(l)),M.includes("FOG")&&(this.fogUniforms=(Xe=>({u_fog_matrix:new i.bF(Xe),u_fog_range:new i.bG(Xe),u_fog_color:new i.c6(Xe),u_fog_horizon_blend:new i.bI(Xe),u_fog_vertical_limit:new i.bG(Xe),u_fog_temporal_offset:new i.bI(Xe),u_frustum_tl:new i.bH(Xe),u_frustum_tr:new i.bH(Xe),u_frustum_br:new i.bH(Xe),u_frustum_bl:new i.bH(Xe),u_globe_pos:new i.bH(Xe),u_globe_radius:new i.bI(Xe),u_globe_transition:new i.bI(Xe),u_is_globe:new i.bJ(Xe),u_viewport:new i.bG(Xe)}))(l)),M.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Xe=>({u_cutoff_params:new i.c6(Xe)}))(l)),M.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Xe=>({u_lighting_ambient_color:new i.bH(Xe),u_lighting_directional_dir:new i.bH(Xe),u_lighting_directional_color:new i.bH(Xe),u_ground_radiance:new i.bH(Xe)}))(l)),M.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Xe=>({u_light_matrix_0:new i.bF(Xe),u_light_matrix_1:new i.bF(Xe),u_fade_range:new i.bG(Xe),u_shadow_normal_offset:new i.bH(Xe),u_shadow_intensity:new i.bI(Xe),u_shadow_texel_size:new i.bI(Xe),u_shadow_map_resolution:new i.bI(Xe),u_shadow_direction:new i.bH(Xe),u_shadow_bias:new i.bH(Xe),u_shadowmap_0:new i.bJ(Xe),u_shadowmap_1:new i.bJ(Xe)}))(l))}}setTerrainUniformValues(l,d){if(!this.terrainUniforms)return;const x=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in d)x[E]&&x[E].set(this.program,E,d[E])}}setGlobeUniformValues(l,d){if(!this.globeUniforms)return;const x=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in d)x[E]&&x[E].set(this.program,E,d[E])}}setFogUniformValues(l,d){if(!this.fogUniforms)return;const x=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in d)x[E].set(this.program,E,d[E])}}setCutoffUniformValues(l,d){if(!this.cutoffUniforms)return;const x=this.cutoffUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in d)x[E].set(this.program,E,d[E])}}setLightsUniformValues(l,d){if(!this.lightsUniforms)return;const x=this.lightsUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const E in d)x[E].set(this.program,E,d[E])}}setShadowUniformValues(l,d){if(this.failedToCreate||!this.shadowUniforms)return;const x=this.shadowUniforms;l.program.set(this.program);for(const E in d)x[E].set(this.program,E,d[E])}_drawDebugWireframe(l,d,x,E,I,M,q,X,ne,se){const ye=l.options.wireframe;if(ye.terrain===!1&&ye.layers2D===!1&&ye.layers3D===!1)return;const we=l.context;if(!(!(!ye.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!ye.layers2D||l._terrain&&l._terrain.renderingToTexture||!Qr.includes(this.name))||!(!ye.layers3D||!Kn.includes(this.name))))return;const Ee=we.gl,Ge=l.wireframeDebugCache.getLinesFromTrianglesBuffer(l.frameCounter,I,we);if(!Ge)return;const $e=[...this.fixedDefines];$e.push("DEBUG_WIREFRAME");const Xe=l.getOrCreateProgram(this.name,{config:this.configuration,defines:$e});we.program.set(Xe.program);const Ze=(ut,bt,_t)=>{if(bt[ut]&&_t[ut])for(const Mt in bt[ut])_t[ut][Mt]&&_t[ut][Mt].set(_t.program,Mt,bt[ut][Mt].current)};ne&&ne.setUniforms(Xe.program,we,Xe.binderUniforms,q,{zoom:X}),Ze("fixedUniforms",this,Xe),Ze("terrainUniforms",this,Xe),Ze("globeUniforms",this,Xe),Ze("fogUniforms",this,Xe),Ze("lightsUniforms",this,Xe),Ze("shadowUniforms",this,Xe),Ge.bind(),we.setColorMode(new Wr([Ee.ONE,Ee.ONE_MINUS_SRC_ALPHA,Ee.ZERO,Ee.ONE],i.bz.transparent,[!0,!0,!0,!1])),we.setDepthMode(new Dr(d.func===Ee.LESS?Ee.LEQUAL:d.func,Dr.ReadOnly,d.range)),we.setStencilMode(gn.disabled);const ft=3*M.primitiveLength*2,gt=3*M.primitiveOffset*2*2;se&&se>1?Ee.drawElementsInstanced(Ee.LINES,ft,Ee.UNSIGNED_SHORT,gt,se):Ee.drawElements(Ee.LINES,ft,Ee.UNSIGNED_SHORT,gt),I.bind(),we.program.set(this.program),we.setDepthMode(d),we.setStencilMode(x),we.setColorMode(E)}draw(l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e,Xe){const Ze=l.context,ft=Ze.gl;if(this.failedToCreate)return;Ze.program.set(this.program),Ze.setDepthMode(x),Ze.setStencilMode(E),Ze.setColorMode(I),Ze.setCullFace(M);for(const bt of Object.keys(this.fixedUniforms))this.fixedUniforms[bt].set(this.program,bt,q[bt]);Ge&&Ge.setUniforms(this.program,Ze,this.binderUniforms,we,{zoom:Ee});const gt={[ft.POINTS]:1,[ft.LINES]:2,[ft.TRIANGLES]:3,[ft.LINE_STRIP]:1}[d],ut=Xe&&Xe>0?1:void 0;for(const bt of ye.get()){const _t=bt.vaos||(bt.vaos={});(_t[X]||(_t[X]=new gi)).bind(Ze,this,ne,Ge?Ge.getPaintVertexBuffers():[],se,bt.vertexOffset,$e||[],ut),Xe&&Xe>1?ft.drawElementsInstanced(d,bt.primitiveLength*gt,ft.UNSIGNED_SHORT,bt.primitiveOffset*gt*2,Xe):se?ft.drawElements(d,bt.primitiveLength*gt,ft.UNSIGNED_SHORT,bt.primitiveOffset*gt*2):ft.drawArrays(d,bt.vertexOffset,bt.vertexLength),d===ft.TRIANGLES&&se&&this._drawDebugWireframe(l,x,E,I,se,bt,we,Ee,Ge,Xe)}}}function ki(v,l){const d=Math.pow(2,l.tileID.overscaledZ),x=l.tileSize*Math.pow(2,v.transform.tileZoom)/d,E=x*(l.tileID.canonical.x+l.tileID.wrap*d),I=x*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture?l.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.ak(l,1,v.transform.tileZoom),u_pixel_coord_upper:[E>>16,I>>16],u_pixel_coord_lower:[65535&E,65535&I]}}const Qs=i.a6.mat4.create(),Oc=(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e)=>{const Xe=l.style.light,Ze=Xe.properties.get("position"),ft=[Ze.x,Ze.y,Ze.z],gt=i.a6.mat3.create();Xe.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(gt,-l.transform.angle),i.a6.vec3.transformMat3(ft,ft,gt));const ut=Xe.properties.get("color"),bt=l.transform,_t={u_matrix:v,u_lightpos:ft,u_lightintensity:Xe.properties.get("intensity"),u_lightcolor:[ut.r,ut.g,ut.b],u_vertical_gradient:+d,u_opacity:x,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Qs,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:E,u_edge_radius:I,u_width_scale:M,u_flood_light_color:we,u_vertical_scale:Ee,u_flood_light_intensity:Ge,u_ground_shadow_factor:$e};return bt.projection.name==="globe"&&(_t.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],_t.u_zoom_transition=ne,_t.u_inv_rot_matrix=ye,_t.u_merc_center=se,_t.u_up_dir=bt.projection.upVector(new i.bP(0,0,0),se[0]*i.ab,se[1]*i.ab),_t.u_height_lift=X),_t},Kf=(v,l,d,x)=>({u_matrix:v,u_edge_radius:l,u_width_scale:d,u_vertical_scale:x}),Pp=(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge)=>{const $e=Oc(v,l,d,x,E,I,M,q,ne,se,ye,we,Ee,Ge,1,[0,0,0]),Xe={u_height_factor:-Math.pow(2,q.overscaledZ)/X.tileSize/8};return i.l($e,ki(l,X),Xe)},wd=(v,l)=>({u_matrix:v,u_emissive_strength:l}),_A=(v,l,d,x)=>i.l(wd(v,l),ki(d,x)),bA=(v,l,d)=>({u_matrix:v,u_world:d,u_emissive_strength:l}),sf=(v,l,d,x,E)=>i.l(_A(v,l,d,x),{u_world:E}),ag=(v,l,d,x)=>{const E=i.ab/d.tileSize;return{u_matrix:v,u_camera_to_center_distance:l.getCameraToCenterDistance(x),u_extrude_scale:[l.pixelsToGLUnits[0]/E,l.pixelsToGLUnits[1]/E]}},wA=(v,l,d=1)=>({u_matrix:v,u_color:l.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),CA=i.a6.mat4.create(),Mp=(v,l,d,x,E,I,M)=>{const q=v.transform,X=q.projection.name==="globe",ne=X?i.cI(q.zoom,l.canonical)*q._pixelsPerMercatorPixel:i.ak(d,1,I),se={u_matrix:l.projMatrix,u_extrude_scale:ne,u_intensity:M,u_inv_rot_matrix:CA,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(X){se.u_inv_rot_matrix=x,se.u_merc_center=E,se.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],se.u_zoom_transition=i.a9(q.zoom);const ye=E[0]*i.ab,we=E[1]*i.ab;se.u_up_dir=q.projection.upVector(new i.bP(0,0,0),ye,we)}return se};function bu(v,[l,d,x,E],[I,M]){if(I===M)return[0,0,0,0];const q=255*(v-1)/(v*(M-I));return[l*q,d*q,x*q,E*q]}function Xf(v,l,[d,x]){return d===x?0:.5/v+(l-d)*(v-1)/(v*(x-d))}const of=(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e,Xe,Ze,ft,gt,ut)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:x,u_grid_matrix:E,u_tl_parent:I,u_scale_parent:ne,u_fade_t:se.mix,u_opacity:se.opacity*ye.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ye.paint.get("raster-brightness-min"),u_brightness_high:ye.paint.get("raster-brightness-max"),u_saturation_factor:i.cJ(ye.paint.get("raster-saturation")),u_contrast_factor:i.cK(ye.paint.get("raster-contrast")),u_spin_weights:af(ye.paint.get("raster-hue-rotate")),u_perspective_transform:we,u_raster_elevation:Ee,u_zoom_transition:M,u_merc_center:q,u_cutoff_params:X,u_colorization_mix:bu(i.cL,$e,Ze),u_colorization_offset:Xf(i.cL,Xe,Ze),u_color_ramp:Ge,u_texture_offset:[gt/(ft+2*gt),ft/(ft+2*gt)],u_texture_res:[ft+2*gt,ft+2*gt],u_emissive_strength:ut});function af(v){v*=Math.PI/180;const l=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const w=.05,L=(v,l,d,x,E,I,M,q,X,ne,se,ye)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:x,u_grid_matrix:E,u_tl_parent:I,u_scale_parent:ne,u_fade_t:se.mix,u_opacity:se.opacity,u_image0:0,u_image1:1,u_raster_elevation:ye,u_zoom_transition:M,u_merc_center:q,u_cutoff_params:X}),G=(v,l,d,x,E,I,M,q,X,ne)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_tile_offset:d,u_velocity:x,u_color_ramp:I,u_velocity_res:E,u_max_speed:M,u_uv_offset:q,u_data_scale:[255*X[0],255*X[1]],u_data_offset:ne,u_particle_pos_scale:1.1,u_particle_pos_offset:[w,w]}),ee=(v,l,d,x,E,I,M,q,X,ne)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_velocity:d,u_velocity_res:x,u_max_speed:E,u_speed_factor:I,u_reset_rate:M,u_rand_seed:Math.random(),u_uv_offset:q,u_data_scale:[255*X[0],255*X[1]],u_data_offset:ne,u_particle_pos_scale:1.1,u_particle_pos_offset:[w,w]}),Ae=i.a6.mat4.create(),Ce=(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e,Xe,Ze,ft,gt,ut)=>{const bt=E.transform,_t={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:bt.getCameraToCenterDistance(ft),u_rotate_symbol:+d,u_aspect_ratio:bt.width/bt.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:I,u_label_plane_matrix:M,u_coord_matrix:q,u_is_text:+ne,u_elevation_from_sea:X?1:0,u_pitch_with_map:+x,u_texsize:se,u_texsize_icon:ye,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ae,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ae,u_up_vector:[0,-1,0],u_color_adj_mat:gt,u_icon_transition:ut||0,u_gamma_scale:x?E.transform.getCameraToCenterDistance(ft)*Math.cos(E.terrain?0:E.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:+we};return ft.name==="globe"&&(_t.u_tile_id=[Ee.canonical.x,Ee.canonical.y,1<<Ee.canonical.z],_t.u_zoom_transition=Ge,_t.u_inv_rot_matrix=Xe,_t.u_merc_center=$e,_t.u_camera_forward=bt._camera.forward(),_t.u_ecef_origin=i.cM(bt.globeMatrix,Ee.toUnwrapped()),_t.u_tile_matrix=Float32Array.from(bt.globeMatrix),_t.u_up_vector=Ze),_t},Ie=(v,l,d,x)=>({u_matrix:v,u_emissive_strength:l,u_opacity:d,u_color:x}),Ne=(v,l,d,x,E,I,M,q,X)=>i.l(function(ne,se,ye,we,Ee,Ge){const{width:$e,height:Xe}=we.imageManager.getPixelSize(se),Ze=Math.pow(2,Ge.tileID.overscaledZ),ft=Ge.tileSize*Math.pow(2,we.transform.tileZoom)/Ze,gt=ft*(Ge.tileID.canonical.x+Ge.tileID.wrap*Ze),ut=ft*Ge.tileID.canonical.y;return{u_image:0,u_pattern_tl:ye.tl,u_pattern_br:ye.br,u_texsize:[$e,Xe],u_pattern_size:ye.displaySize,u_pattern_units_to_pixels:Ee?[we.transform.width,-1*we.transform.height]:[1/i.ak(Ge,1,we.transform.tileZoom),1/i.ak(Ge,1,we.transform.tileZoom)],u_pixel_coord_upper:[gt>>16,ut>>16],u_pixel_coord_lower:[65535&gt,65535&ut]}}(0,I,M,x,q,X),{u_matrix:v,u_emissive_strength:l,u_opacity:d}),Me=new Float32Array(i.a6.mat4.identity([])),Pe=(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee=[0,0,0],Ge)=>{const $e=E.style.light,Xe=$e.properties.get("position"),Ze=[-Xe.x,-Xe.y,Xe.z],ft=i.a6.mat3.create();$e.properties.get("anchor")==="viewport"&&(i.a6.mat3.fromRotation(ft,-E.transform.angle),i.a6.vec3.transformMat3(Ze,Ze,ft));const gt=se.alphaMode==="MASK",ut=$e.properties.get("color").toRenderColor(null),bt=we.paint.get("model-ambient-occlusion-intensity"),_t=we.paint.get("model-color").constantOr(i.bz.white).toRenderColor(null),Mt=we.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:v,u_lighting_matrix:l,u_normal_matrix:d,u_node_matrix:x||Me,u_lightpos:Ze,u_lightintensity:$e.properties.get("intensity"),u_lightcolor:[ut.r,ut.g,ut.b],u_camera_pos:Ee,u_opacity:I,u_baseTextureIsAlpha:0,u_alphaMask:+gt,u_alphaCutoff:se.alphaCutoff,u_baseColorFactor:[M.r,M.g,M.b,M.a],u_emissiveFactor:[q[0],q[1],q[2],1],u_metallicFactor:X,u_roughnessFactor:ne,u_baseColorTexture:io.BaseColor,u_metallicRoughnessTexture:io.MetallicRoughness,u_normalTexture:io.Normal,u_occlusionTexture:io.Occlusion,u_emissionTexture:io.Emission,u_lutTexture:io.LUT,u_color_mix:[_t.r,_t.g,_t.b,Mt],u_aoIntensity:bt,u_emissive_strength:ye,u_occlusionTextureTransform:Ge||[0,0,0,0]}},lt=(v,l=Me,d=Me)=>({u_matrix:v,u_instance:l,u_node_matrix:d}),Lt={fillExtrusion:v=>({u_matrix:new i.bF(v),u_lightpos:new i.bH(v),u_lightintensity:new i.bI(v),u_lightcolor:new i.bH(v),u_vertical_gradient:new i.bI(v),u_opacity:new i.bI(v),u_edge_radius:new i.bI(v),u_width_scale:new i.bI(v),u_ao:new i.bG(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_up_dir:new i.bH(v),u_height_lift:new i.bI(v),u_flood_light_color:new i.bH(v),u_vertical_scale:new i.bI(v),u_flood_light_intensity:new i.bI(v),u_ground_shadow_factor:new i.bH(v)}),fillExtrusionDepth:v=>({u_matrix:new i.bF(v),u_edge_radius:new i.bI(v),u_width_scale:new i.bI(v),u_vertical_scale:new i.bI(v)}),fillExtrusionPattern:v=>({u_matrix:new i.bF(v),u_lightpos:new i.bH(v),u_lightintensity:new i.bI(v),u_lightcolor:new i.bH(v),u_vertical_gradient:new i.bI(v),u_height_factor:new i.bI(v),u_edge_radius:new i.bI(v),u_width_scale:new i.bI(v),u_ao:new i.bG(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_up_dir:new i.bH(v),u_height_lift:new i.bI(v),u_image:new i.bJ(v),u_texsize:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_tile_units_to_pixels:new i.bI(v),u_opacity:new i.bI(v)}),fillExtrusionGroundEffect:v=>({u_matrix:new i.bF(v),u_opacity:new i.bI(v),u_ao_pass:new i.bI(v),u_meter_to_tile:new i.bI(v),u_ao:new i.bG(v),u_flood_light_intensity:new i.bI(v),u_flood_light_color:new i.bH(v),u_attenuation:new i.bI(v),u_edge_radius:new i.bI(v),u_fb:new i.bJ(v),u_fb_size:new i.bI(v),u_dynamic_offset:new i.bI(v)}),fill:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v)}),fillPattern:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_image:new i.bJ(v),u_texsize:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_tile_units_to_pixels:new i.bI(v)}),fillOutline:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_world:new i.bG(v)}),fillOutlinePattern:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_world:new i.bG(v),u_image:new i.bJ(v),u_texsize:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_tile_units_to_pixels:new i.bI(v)}),circle:i.cN,collisionBox:v=>({u_matrix:new i.bF(v),u_camera_to_center_distance:new i.bI(v),u_extrude_scale:new i.bG(v)}),collisionCircle:v=>({u_matrix:new i.bF(v),u_inv_matrix:new i.bF(v),u_camera_to_center_distance:new i.bI(v),u_viewport_size:new i.bG(v)}),debug:v=>({u_color:new i.cu(v),u_matrix:new i.bF(v),u_overlay:new i.bJ(v),u_overlay_scale:new i.bI(v)}),clippingMask:v=>({u_matrix:new i.bF(v)}),heatmap:v=>({u_extrude_scale:new i.bI(v),u_intensity:new i.bI(v),u_matrix:new i.bF(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_up_dir:new i.bH(v)}),heatmapTexture:v=>({u_image:new i.bJ(v),u_color_ramp:new i.bJ(v),u_opacity:new i.bI(v)}),hillshade:v=>({u_matrix:new i.bF(v),u_image:new i.bJ(v),u_latrange:new i.bG(v),u_light:new i.bG(v),u_shadow:new i.cu(v),u_highlight:new i.cu(v),u_emissive_strength:new i.bI(v),u_accent:new i.cu(v)}),hillshadePrepare:v=>({u_matrix:new i.bF(v),u_image:new i.bJ(v),u_dimension:new i.bG(v),u_zoom:new i.bI(v)}),line:i.cO,linePattern:i.cP,raster:v=>({u_matrix:new i.bF(v),u_normalize_matrix:new i.bF(v),u_globe_matrix:new i.bF(v),u_merc_matrix:new i.bF(v),u_grid_matrix:new i.cv(v),u_tl_parent:new i.bG(v),u_scale_parent:new i.bI(v),u_fade_t:new i.bI(v),u_opacity:new i.bI(v),u_image0:new i.bJ(v),u_image1:new i.bJ(v),u_brightness_low:new i.bI(v),u_brightness_high:new i.bI(v),u_saturation_factor:new i.bI(v),u_contrast_factor:new i.bI(v),u_spin_weights:new i.bH(v),u_perspective_transform:new i.bG(v),u_raster_elevation:new i.bI(v),u_zoom_transition:new i.bI(v),u_merc_center:new i.bG(v),u_cutoff_params:new i.c6(v),u_colorization_mix:new i.c6(v),u_colorization_offset:new i.bI(v),u_color_ramp:new i.bJ(v),u_texture_offset:new i.bG(v),u_texture_res:new i.bG(v),u_emissive_strength:new i.bI(v)}),rasterParticle:v=>({u_matrix:new i.bF(v),u_normalize_matrix:new i.bF(v),u_globe_matrix:new i.bF(v),u_merc_matrix:new i.bF(v),u_grid_matrix:new i.cv(v),u_tl_parent:new i.bG(v),u_scale_parent:new i.bI(v),u_fade_t:new i.bI(v),u_opacity:new i.bI(v),u_image0:new i.bJ(v),u_image1:new i.bJ(v),u_raster_elevation:new i.bI(v),u_zoom_transition:new i.bI(v),u_merc_center:new i.bG(v),u_cutoff_params:new i.c6(v)}),rasterParticleTexture:v=>({u_texture:new i.bJ(v),u_opacity:new i.bI(v)}),rasterParticleDraw:v=>({u_particle_texture:new i.bJ(v),u_particle_texture_side_len:new i.bI(v),u_tile_offset:new i.bG(v),u_velocity:new i.bJ(v),u_color_ramp:new i.bJ(v),u_velocity_res:new i.bG(v),u_max_speed:new i.bI(v),u_uv_offset:new i.bG(v),u_data_scale:new i.bG(v),u_data_offset:new i.bI(v),u_particle_pos_scale:new i.bI(v),u_particle_pos_offset:new i.bG(v)}),rasterParticleUpdate:v=>({u_particle_texture:new i.bJ(v),u_particle_texture_side_len:new i.bI(v),u_velocity:new i.bJ(v),u_velocity_res:new i.bG(v),u_max_speed:new i.bI(v),u_speed_factor:new i.bI(v),u_reset_rate:new i.bI(v),u_rand_seed:new i.bI(v),u_uv_offset:new i.bG(v),u_data_scale:new i.bG(v),u_data_offset:new i.bI(v),u_particle_pos_scale:new i.bI(v),u_particle_pos_offset:new i.bG(v)}),symbol:v=>({u_is_size_zoom_constant:new i.bJ(v),u_is_size_feature_constant:new i.bJ(v),u_size_t:new i.bI(v),u_size:new i.bI(v),u_camera_to_center_distance:new i.bI(v),u_rotate_symbol:new i.bJ(v),u_aspect_ratio:new i.bI(v),u_fade_change:new i.bI(v),u_matrix:new i.bF(v),u_label_plane_matrix:new i.bF(v),u_coord_matrix:new i.bF(v),u_is_text:new i.bJ(v),u_elevation_from_sea:new i.bJ(v),u_pitch_with_map:new i.bJ(v),u_texsize:new i.bG(v),u_texsize_icon:new i.bG(v),u_texture:new i.bJ(v),u_texture_icon:new i.bJ(v),u_gamma_scale:new i.bI(v),u_device_pixel_ratio:new i.bI(v),u_tile_id:new i.bH(v),u_zoom_transition:new i.bI(v),u_inv_rot_matrix:new i.bF(v),u_merc_center:new i.bG(v),u_camera_forward:new i.bH(v),u_tile_matrix:new i.bF(v),u_up_vector:new i.bH(v),u_ecef_origin:new i.bH(v),u_is_halo:new i.bJ(v),u_icon_transition:new i.bI(v),u_color_adj_mat:new i.bF(v)}),background:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_opacity:new i.bI(v),u_color:new i.cu(v)}),backgroundPattern:v=>({u_matrix:new i.bF(v),u_emissive_strength:new i.bI(v),u_opacity:new i.bI(v),u_image:new i.bJ(v),u_pattern_tl:new i.bG(v),u_pattern_br:new i.bG(v),u_texsize:new i.bG(v),u_pattern_size:new i.bG(v),u_pixel_coord_upper:new i.bG(v),u_pixel_coord_lower:new i.bG(v),u_pattern_units_to_pixels:new i.bG(v)}),terrainRaster:v=>({u_matrix:new i.bF(v),u_image0:new i.bJ(v),u_skirt_height:new i.bI(v),u_ground_shadow_factor:new i.bH(v)}),skybox:v=>({u_matrix:new i.bF(v),u_sun_direction:new i.bH(v),u_cubemap:new i.bJ(v),u_opacity:new i.bI(v),u_temporal_offset:new i.bI(v)}),skyboxGradient:v=>({u_matrix:new i.bF(v),u_color_ramp:new i.bJ(v),u_center_direction:new i.bH(v),u_radius:new i.bI(v),u_opacity:new i.bI(v),u_temporal_offset:new i.bI(v)}),skyboxCapture:v=>({u_matrix_3f:new i.cv(v),u_sun_direction:new i.bH(v),u_sun_intensity:new i.bI(v),u_color_tint_r:new i.c6(v),u_color_tint_m:new i.c6(v),u_luminance:new i.bI(v)}),globeRaster:v=>({u_proj_matrix:new i.bF(v),u_globe_matrix:new i.bF(v),u_normalize_matrix:new i.bF(v),u_merc_matrix:new i.bF(v),u_zoom_transition:new i.bI(v),u_merc_center:new i.bG(v),u_image0:new i.bJ(v),u_grid_matrix:new i.cv(v),u_skirt_height:new i.bI(v),u_far_z_cutoff:new i.bI(v),u_frustum_tl:new i.bH(v),u_frustum_tr:new i.bH(v),u_frustum_br:new i.bH(v),u_frustum_bl:new i.bH(v),u_globe_pos:new i.bH(v),u_globe_radius:new i.bI(v),u_viewport:new i.bG(v)}),globeAtmosphere:v=>({u_frustum_tl:new i.bH(v),u_frustum_tr:new i.bH(v),u_frustum_br:new i.bH(v),u_frustum_bl:new i.bH(v),u_horizon:new i.bI(v),u_transition:new i.bI(v),u_fadeout_range:new i.bI(v),u_color:new i.c6(v),u_high_color:new i.c6(v),u_space_color:new i.c6(v),u_temporal_offset:new i.bI(v),u_horizon_angle:new i.bI(v)}),model:v=>({u_matrix:new i.bF(v),u_lighting_matrix:new i.bF(v),u_normal_matrix:new i.bF(v),u_node_matrix:new i.bF(v),u_lightpos:new i.bH(v),u_lightintensity:new i.bI(v),u_lightcolor:new i.bH(v),u_camera_pos:new i.bH(v),u_opacity:new i.bI(v),u_baseColorFactor:new i.c6(v),u_emissiveFactor:new i.c6(v),u_metallicFactor:new i.bI(v),u_roughnessFactor:new i.bI(v),u_baseTextureIsAlpha:new i.bJ(v),u_alphaMask:new i.bJ(v),u_alphaCutoff:new i.bI(v),u_baseColorTexture:new i.bJ(v),u_metallicRoughnessTexture:new i.bJ(v),u_normalTexture:new i.bJ(v),u_occlusionTexture:new i.bJ(v),u_emissionTexture:new i.bJ(v),u_lutTexture:new i.bJ(v),u_color_mix:new i.c6(v),u_aoIntensity:new i.bI(v),u_emissive_strength:new i.bI(v),u_occlusionTextureTransform:new i.c6(v)}),modelDepth:v=>({u_matrix:new i.bF(v),u_instance:new i.bF(v),u_node_matrix:new i.bF(v)}),groundShadow:v=>({u_matrix:new i.bF(v),u_ground_shadow_factor:new i.bH(v)}),stars:v=>({u_matrix:new i.bF(v),u_up:new i.bH(v),u_right:new i.bH(v),u_intensity_multiplier:new i.bI(v)}),occlusion:v=>({u_matrix:new i.bF(v),u_anchorPos:new i.bH(v),u_screenSizePx:new i.bG(v),u_occluderSizePx:new i.bG(v),u_color:new i.c6(v)})};class Bt{constructor(l,d,x,E){this.id=Bt.uniqueIdxCounter,Bt.uniqueIdxCounter++,this.context=l;const I=l.gl;this.buffer=I.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),I.bufferData(I.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||E||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){this.id=Bt.uniqueIdxCounter,Bt.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Bt.uniqueIdxCounter=0;const xt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pt{constructor(l,d,x,E,I,M){this.length=d.length,this.attributes=x,this.itemSize=d.bytesPerElement,this.dynamicDraw=E,this.instanceCount=M,this.context=l;const q=l.gl;this.buffer=q.createBuffer(),l.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||I||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let x=0;x<this.attributes.length;x++){const E=d.attributes[this.attributes[x].name];E!==void 0&&l.enableVertexAttribArray(E)}}setVertexAttribPointers(l,d,x){for(let E=0;E<this.attributes.length;E++){const I=this.attributes[E],M=d.attributes[I.name];M!==void 0&&l.vertexAttribPointer(M,I.components,l[xt[I.type]],!1,this.itemSize,I.offset+this.itemSize*(x||0))}}setVertexAttribDivisor(l,d,x){for(let E=0;E<this.attributes.length;E++){const I=d.attributes[this.attributes[E].name];I!==void 0&&this.instanceCount&&this.instanceCount>0&&l.vertexAttribDivisor(I,x)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Qt{constructor(l,d,x,E,I){this.context=l,this.width=d,this.height=x;const M=this.framebuffer=l.gl.createFramebuffer();E&&(this.colorAttachment=new sh(l,M)),I&&(this.depthAttachmentType=I,this.depthAttachment=I==="renderbuffer"?new zo(l,M):new qf(l,M))}destroy(){const l=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&l.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&l.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&l.deleteTexture(d)}l.deleteFramebuffer(this.framebuffer)}}class ct{constructor(l,d){this.gl=l,this.clearColor=new qs(this),this.clearDepth=new sl(this),this.clearStencil=new ac(this),this.colorMask=new ol(this),this.depthMask=new qa(this),this.stencilMask=new Mc(this),this.stencilFunc=new lc(this),this.stencilOp=new so(this),this.stencilTest=new zs(this),this.depthRange=new cc(this),this.depthTest=new jc(this),this.depthFunc=new vu(this),this.blend=new Sc(this),this.blendFunc=new nu(this),this.blendColor=new rh(this),this.blendEquation=new Zh(this),this.cullFace=new nh(this),this.cullFaceSide=new bh(this),this.frontFace=new xu(this),this.program=new Jh(this),this.activeTexture=new kc(this),this.viewport=new wh(this),this.bindFramebuffer=new vd(this),this.bindRenderbuffer=new Wl(this),this.bindTexture=new nf(this),this.bindVertexBuffer=new xd(this),this.bindElementBuffer=new _d(this),this.bindVertexArrayOES=new bd(this),this.pixelStoreUnpack=new ih(this),this.pixelStoreUnpackPremultiplyAlpha=new _u(this),this.pixelStoreUnpackFlipY=new Dc(this),this.options=d?{...d}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=l.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),this.maxPointSize=l.getParameter(l.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d,x){return new Bt(this,l,d,x)}createVertexBuffer(l,d,x,E,I){return new Pt(this,l,d,x,E,I)}createRenderbuffer(l,d,x){const E=this.gl,I=E.createRenderbuffer();return this.bindRenderbuffer.set(I),E.renderbufferStorage(E.RENDERBUFFER,l,d,x),this.bindRenderbuffer.set(null),I}createFramebuffer(l,d,x,E){return new Qt(this,l,d,x,E)}clear({color:l,depth:d,stencil:x,colorMask:E}){const I=this.gl;let M=0;l&&(M|=I.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set(E||[!0,!0,!0,!0])),d!==void 0&&(M|=I.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),x!==void 0&&(M|=I.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),I.clear(M)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){i.bh(l.blendFunction,Wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor),l.blendEquation?this.blendEquation.set(l.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(l.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let mt;function cr(v,l,d,x,E,I,M){const q=v.context,X=q.gl,ne=v.transform,se=v.getOrCreateProgram("collisionBox"),ye=[];let we=0,Ee=0;for(let ut=0;ut<x.length;ut++){const bt=x[ut],_t=l.getTile(bt),Mt=_t.getBucket(d);if(!Mt)continue;const Tt=vo(bt,Mt,ne);let jt=Tt;E[0]===0&&E[1]===0||(jt=v.translatePosMatrix(Tt,_t,E,I));const Vt=M?Mt.textCollisionBox:Mt.iconCollisionBox,Rt=Mt.collisionCircleArray;if(Rt.length>0){const Dt=i.a6.mat4.create(),sr=jt;i.a6.mat4.mul(Dt,Mt.placementInvProjMatrix,ne.glCoordMatrix),i.a6.mat4.mul(Dt,Dt,Mt.placementViewportMatrix),ye.push({circleArray:Rt,circleOffset:Ee,transform:sr,invTransform:Dt,projection:Mt.getProjection()}),we+=Rt.length/4,Ee=we}Vt&&(v.terrain&&v.terrain.setupElevationDraw(_t,se),se.draw(v,X.LINES,Dr.disabled,gn.disabled,v.colorModeForRenderPass(),vn.disabled,ag(jt,ne,_t,Mt.getProjection()),d.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,null,ne.zoom,null,[Vt.collisionVertexBuffer,Vt.collisionVertexBufferExt]))}if(!M||!ye.length)return;const Ge=v.getOrCreateProgram("collisionCircle"),$e=new i.cQ;$e.resize(4*we),$e._trim();let Xe=0;for(const ut of ye)for(let bt=0;bt<ut.circleArray.length/4;bt++){const _t=4*bt,Mt=ut.circleArray[_t+0],Tt=ut.circleArray[_t+1],jt=ut.circleArray[_t+2],Vt=ut.circleArray[_t+3];$e.emplace(Xe++,Mt,Tt,jt,Vt,0),$e.emplace(Xe++,Mt,Tt,jt,Vt,1),$e.emplace(Xe++,Mt,Tt,jt,Vt,2),$e.emplace(Xe++,Mt,Tt,jt,Vt,3)}(!mt||mt.length<2*we)&&(mt=function(ut){const bt=2*ut,_t=new i.aO;_t.resize(bt),_t._trim();for(let Mt=0;Mt<bt;Mt++){const Tt=6*Mt;_t.uint16[Tt+0]=4*Mt+0,_t.uint16[Tt+1]=4*Mt+1,_t.uint16[Tt+2]=4*Mt+2,_t.uint16[Tt+3]=4*Mt+2,_t.uint16[Tt+4]=4*Mt+3,_t.uint16[Tt+5]=4*Mt+0}return _t}(we));const Ze=q.createIndexBuffer(mt,!0),ft=q.createVertexBuffer($e,i.cR.members,!0);for(const ut of ye){const bt={u_matrix:ut.transform,u_inv_matrix:ut.invTransform,u_camera_to_center_distance:(gt=ne).getCameraToCenterDistance(ut.projection),u_viewport_size:[gt.width,gt.height]};Ge.draw(v,X.TRIANGLES,Dr.disabled,gn.disabled,v.colorModeForRenderPass(),vn.disabled,bt,d.id,ft,Ze,i.b1.simpleSegment(0,2*ut.circleOffset,ut.circleArray.length,ut.circleArray.length/2),null,ne.zoom)}var gt;ft.destroy(),Ze.destroy()}const mr=i.a6.mat4.create();function dr(v){const l=v._camera.getWorldToCamera(v.worldSize,1),d=i.a6.mat4.multiply([],l,v.globeMatrix);i.a6.mat4.invert(d,d);const x=[0,0,0],E=[0,1,0,0];return i.a6.vec4.transformMat4(E,E,d),x[0]=E[0],x[1]=E[1],x[2]=E[2],i.a6.vec3.normalize(x,x),x}function Yr({width:v,height:l,anchor:d,textOffset:x,textScale:E},I){const{horizontalAlign:M,verticalAlign:q}=i.bx(d),X=-(M-.5)*v,ne=-(q-.5)*l,se=i.bw(d,x);return new i.P((X/E+se[0])*I,(ne/E+se[1])*I)}function Or(v,l,d,x,E,I,M,q,X,ne,se){const ye=v.text.placedSymbolArray,we=v.text.dynamicLayoutVertexArray,Ee=v.icon.dynamicLayoutVertexArray,Ge={},$e=v.getProjection(),Xe=fa(q,$e,I),Ze=I.elevation,ft=$e.upVectorScale(q.canonical,I.center.lat,I.worldSize).metersToTile;we.clear();for(let gt=0;gt<ye.length;gt++){const ut=ye.get(gt),{tileAnchorX:bt,tileAnchorY:_t,numGlyphs:Mt}=ut,Tt=ut.hidden||!ut.crossTileID||v.allowVerticalPlacement&&!ut.placedOrientation?null:x[ut.crossTileID];if(Tt){let jt=0,Vt=0,Rt=0;if(Ze){const Er=Ze?Ze.getAtTileOffset(q,bt,_t):0,[tn,sn,kr]=$e.upVector(q.canonical,bt,_t);jt=Er*tn*ft,Vt=Er*sn*ft,Rt=Er*kr*ft}let[Dt,sr,Cr,Rr]=Ms(ut.projectedAnchorX+jt,ut.projectedAnchorY+Vt,ut.projectedAnchorZ+Rt,d?Xe:M);const wr=fi(I.getCameraToCenterDistance($e),Rr);let en=E.evaluateSizeForFeature(v.textSizeData,ne,ut)*wr/i.bq;d&&(en*=v.tilePixelRatio/X);const or=Yr(Tt,en);d?({x:Dt,y:sr,z:Cr}=$e.projectTilePoint(bt+or.x,_t+or.y,q.canonical),[Dt,sr,Cr]=Ms(Dt+jt,sr+Vt,Cr+Rt,M)):(l&&or._rotate(-I.angle),Dt+=or.x,sr+=or.y,Cr=0);const Lr=v.allowVerticalPlacement&&ut.placedOrientation===i.bk.vertical?Math.PI/2:0;for(let Er=0;Er<Mt;Er++)i.bn(we,Dt,sr,Cr,Lr);se&&ut.associatedIconIndex>=0&&(Ge[ut.associatedIconIndex]={x:Dt,y:sr,z:Cr,angle:Lr})}else Ma(Mt,we)}if(se){Ee.clear();const gt=v.icon.placedSymbolArray;for(let ut=0;ut<gt.length;ut++){const bt=gt.get(ut),{numGlyphs:_t}=bt,Mt=Ge[ut];if(bt.hidden||!Mt)Ma(_t,Ee);else{const{x:Tt,y:jt,z:Vt,angle:Rt}=Mt;for(let Dt=0;Dt<_t;Dt++)i.bn(Ee,Tt,jt,Vt,Rt)}}v.icon.dynamicLayoutVertexBuffer.updateData(Ee)}v.text.dynamicLayoutVertexBuffer.updateData(we)}function bn(v,l,d,x,E,I,M={}){const q=d.paint.get("icon-translate"),X=d.paint.get("text-translate"),ne=d.paint.get("icon-translate-anchor"),se=d.paint.get("text-translate-anchor"),ye=d.layout.get("icon-rotation-alignment"),we=d.layout.get("text-rotation-alignment"),Ee=d.layout.get("icon-pitch-alignment"),Ge=d.layout.get("text-pitch-alignment"),$e=d.layout.get("icon-keep-upright"),Xe=d.layout.get("text-keep-upright"),Ze=d.paint.get("icon-color-saturation"),ft=d.paint.get("icon-color-contrast"),gt=d.paint.get("icon-color-brightness-min"),ut=d.paint.get("icon-color-brightness-max"),bt=d.paint.get("symbol-elevation-reference")==="sea",_t=d.paint.get("text-occlusion-opacity").constantOr(0),Mt=v.context,Tt=Mt.gl,jt=v.transform,Vt=ye==="map",Rt=we==="map",Dt=Ee==="map",sr=Ge==="map",Cr=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Rr=!1;const wr=v.depthModeForSublayer(0,Dr.ReadOnly),en=[i.am(jt.center.lng),i.at(jt.center.lat)],or=d.layout.get("text-variable-anchor"),Lr=jt.projection.name==="globe",Er=[],tn=[0,-1,0];for(const sn of x){const kr=l.getTile(sn),Hr=kr.getBucket(d);if(!Hr||Hr.projection.name==="mercator"&&Lr||Hr.fullyClipped)continue;const Xn=Hr.projection.name==="globe",hn=Xn?i.a9(jt.zoom):0,Fn=fa(sn,Hr.getProjection(),jt),li=jt.calculatePixelsToTileUnitsMatrix(kr),On=or&&Hr.hasTextData(),ii=Hr.hasIconTextFit()&&On&&Hr.hasIconData(),zi=Hr.getProjection().createInversionMatrix(jt,sn.canonical),ji=to=>{jt.depthOcclusionForSymbolsAndCircles&&(d.hasInitialOcclusionOpacityProperties||v.terrain)&&(to.push("DEPTH_D24"),to.push("DEPTH_OCCLUSION"))},Ws=()=>{const to=Vt&&d.layout.get("symbol-placement")!=="point",Di=[];ji(Di);const Es=to||ii,Hs=d.paint.get("icon-image-cross-fade").constantOr(0);v.terrainRenderModeElevated()&&Dt&&Di.push("PITCH_WITH_MAP_TERRAIN"),Xn&&(Di.push("PROJECTION_GLOBE_VIEW"),Es&&Di.push("PROJECTED_POS_ON_VIEWPORT")),Hs>0&&Di.push("ICON_TRANSITION"),Hr.icon.zOffsetVertexBuffer&&Di.push("Z_OFFSET"),Ze===0&&ft===0&&gt===0&&ut===1||Di.push("COLOR_ADJUSTMENT"),Hr.sdfIcons&&Di.push("RENDER_SDF");const La=Hr.icon.programConfigurations.get(d.id),Ya=v.getOrCreateProgram("symbol",{config:La,defines:Di}),ds=kr.imageAtlasTexture?kr.imageAtlasTexture.size:[0,0],Ll=Hr.iconSizeData,Xl=i.bj(Ll,jt.zoom),Fl=Dt||jt.pitch!==0,Lo=Yn(Fn,kr.tileID.canonical,Dt,Vt,jt,Hr.getProjection(),li),lu=da(Fn,kr.tileID.canonical,Dt,Vt,jt,Hr.getProjection(),li),cu=v.translatePosMatrix(lu,kr,q,ne,!0),Lh=v.translatePosMatrix(Fn,kr,q,ne),dh=Es?mr:Lo,Lu=Vt&&!Dt&&!to;let Fh=tn;!Lr&&!jt.mercatorFromTransition||Vt||(Fh=dr(jt));const ff=Xn?Fh:tn,Jf=d.getColorAdjustmentMatrix(Ze,ft,gt,ut),jd=Ce(Ll.kind,Xl,Lu,Dt,v,Lh,dh,cu,bt,!1,ds,[0,0],!0,sn,hn,en,zi,ff,Hr.getProjection(),Jf,Hs),TA=kr.imageAtlasTexture?kr.imageAtlasTexture:null,IA=d.layout.get("icon-size").constantOr(0)!==1||Hr.iconsNeedLinear,D0=Hr.sdfIcons||v.options.rotating||v.options.zooming||IA||Fl?Tt.LINEAR:Tt.NEAREST,LA=Hr.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,Fo=v.terrain&&Dt&&to?i.a6.mat4.invert(i.a6.mat4.create(),Lo):mr;if(to&&Hr.icon){const Op=jt.elevation,wS=Op?Op.getAtTileOffsetFunc(sn,jt.center.lat,jt.worldSize,Hr.getProjection()):null,Nb=Li(Fn,kr.tileID.canonical,Dt,Vt,jt,Hr.getProjection(),li);zl(Hr,Fn,v,!1,Nb,lu,Dt,$e,wS,sn)}return{program:Ya,buffers:Hr.icon,uniformValues:jd,atlasTexture:TA,atlasTextureIcon:null,atlasInterpolation:D0,atlasInterpolationIcon:null,isSDF:Hr.sdfIcons,hasHalo:LA,tile:kr,labelPlaneMatrixInv:Fo}},ho=()=>{const to=Rt&&d.layout.get("symbol-placement")!=="point",Di=[],Es=to||or||ii;v.terrainRenderModeElevated()&&sr&&Di.push("PITCH_WITH_MAP_TERRAIN"),Xn&&(Di.push("PROJECTION_GLOBE_VIEW"),Es&&Di.push("PROJECTED_POS_ON_VIEWPORT")),Hr.text.zOffsetVertexBuffer&&Di.push("Z_OFFSET"),Hr.iconsInText&&Di.push("RENDER_TEXT_AND_SYMBOL"),Di.push("RENDER_SDF"),ji(Di);const Hs=Hr.text.programConfigurations.get(d.id),La=v.getOrCreateProgram("symbol",{config:Hs,defines:Di});let Ya,ds=[0,0],Ll=null;const Xl=Hr.textSizeData;Hr.iconsInText&&(ds=kr.imageAtlasTexture?kr.imageAtlasTexture.size:[0,0],Ll=kr.imageAtlasTexture?kr.imageAtlasTexture:null,Ya=sr||jt.pitch!==0||v.options.rotating||v.options.zooming||Xl.kind==="composite"||Xl.kind==="camera"?Tt.LINEAR:Tt.NEAREST);const Fl=kr.glyphAtlasTexture?kr.glyphAtlasTexture.size:[0,0],Lo=i.bj(Xl,jt.zoom),lu=Yn(Fn,kr.tileID.canonical,sr,Rt,jt,Hr.getProjection(),li),cu=da(Fn,kr.tileID.canonical,sr,Rt,jt,Hr.getProjection(),li),Lh=v.translatePosMatrix(cu,kr,X,se,!0),dh=v.translatePosMatrix(Fn,kr,X,se),Lu=Es?mr:lu,Fh=Rt&&!sr&&!to;let ff=tn;!Lr&&!jt.mercatorFromTransition||Rt||(ff=dr(jt));const Jf=Ce(Xl.kind,Lo,Fh,sr,v,dh,Lu,Lh,bt,!0,Fl,ds,!0,sn,hn,en,zi,Xn?ff:tn,Hr.getProjection(),_t),jd=kr.glyphAtlasTexture?kr.glyphAtlasTexture:null,TA=Tt.LINEAR,IA=d.paint.get("text-halo-width").constantOr(1)!==0,D0=v.terrain&&sr&&to?i.a6.mat4.invert(i.a6.mat4.create(),lu):mr;if(to&&Hr.text){const LA=jt.elevation,Fo=LA?LA.getAtTileOffsetFunc(sn,jt.center.lat,jt.worldSize,Hr.getProjection()):null,Op=Li(Fn,kr.tileID.canonical,sr,Rt,jt,Hr.getProjection(),li);zl(Hr,Fn,v,!0,Op,cu,sr,Xe,Fo,sn)}return{program:La,buffers:Hr.text,uniformValues:Jf,atlasTexture:jd,atlasTextureIcon:Ll,atlasInterpolation:TA,atlasInterpolationIcon:Ya,isSDF:!0,hasHalo:IA,tile:kr,labelPlaneMatrixInv:D0}},ko=Hr.icon.segments.get().length,Ih=Hr.text.segments.get().length,Xa=ko&&!M.onlyText?Ws():null,Ji=Ih&&!M.onlyIcons?ho():null,oo=d.paint.get("icon-opacity").constantOr(1),ia=d.paint.get("text-opacity").constantOr(1);if(Cr&&Hr.canOverlap){Rr=!0;const to=oo&&!M.onlyText?Hr.icon.segments.get():[],Di=ia&&!M.onlyIcons?Hr.text.segments.get():[];for(const Es of to)Er.push({segments:new i.b1([Es]),sortKey:Es.sortKey,state:Xa});for(const Es of Di)Er.push({segments:new i.b1([Es]),sortKey:Es.sortKey,state:Ji})}else M.onlyText||Er.push({segments:oo?Hr.icon.segments:new i.b1([]),sortKey:0,state:Xa}),M.onlyIcons||Er.push({segments:ia?Hr.text.segments:new i.b1([]),sortKey:0,state:Ji})}Rr&&Er.sort((sn,kr)=>sn.sortKey-kr.sortKey);for(const sn of Er){const kr=sn.state;if(kr)if(v.terrain?v.terrain.setupElevationDraw(kr.tile,kr.program,{useDepthForOcclusion:jt.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:kr.labelPlaneMatrixInv}):v.setupDepthForOcclusion(jt.depthOcclusionForSymbolsAndCircles,kr.program),Mt.activeTexture.set(Tt.TEXTURE0),kr.atlasTexture&&kr.atlasTexture.bind(kr.atlasInterpolation,Tt.CLAMP_TO_EDGE,!0),kr.atlasTextureIcon&&(Mt.activeTexture.set(Tt.TEXTURE1),kr.atlasTextureIcon&&kr.atlasTextureIcon.bind(kr.atlasInterpolationIcon,Tt.CLAMP_TO_EDGE,!0)),v.uploadCommonLightUniforms(v.context,kr.program),kr.hasHalo){const Hr=kr.uniformValues;Hr.u_is_halo=1,zr(kr.buffers,sn.segments,d,v,kr.program,wr,E,I,Hr,2),Hr.u_is_halo=0}else{if(kr.isSDF){const Hr=kr.uniformValues;kr.hasHalo&&(Hr.u_is_halo=1,zr(kr.buffers,sn.segments,d,v,kr.program,wr,E,I,Hr,1)),Hr.u_is_halo=0}zr(kr.buffers,sn.segments,d,v,kr.program,wr,E,I,kr.uniformValues,1)}}}function zr(v,l,d,x,E,I,M,q,X,ne){const se=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.iconTransitioningVertexBuffer,v.globeExtVertexBuffer,v.zOffsetVertexBuffer];E.draw(x,x.context.gl.TRIANGLES,I,M,q,vn.disabled,X,d.id,v.layoutVertexBuffer,v.indexBuffer,l,d.paint,x.transform.zoom,v.programConfigurations.get(d.id),se,ne)}function ui(v,l,d,x,E,I,M){const q=v.context.gl,X=d.paint.get("fill-pattern"),ne=d.is3D(),se=ne?v.stencilModeFor3D():gn.disabled,ye=X&&X.constantOr(1);let we,Ee,Ge,$e,Xe;M?(Ee=ye&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",we=q.LINES):(Ee=ye?"fillPattern":"fill",we=q.TRIANGLES);for(const Ze of x){const ft=l.getTile(Ze);if(ye&&!ft.patternsLoaded())continue;const gt=ft.getBucket(d);if(!gt)continue;v.prepareDrawTile();const ut=gt.programConfigurations.get(d.id),bt=v.isTileAffectedByFog(Ze),_t=v.getOrCreateProgram(Ee,{config:ut,overrideFog:bt});ye&&(v.context.activeTexture.set(q.TEXTURE0),ft.imageAtlasTexture&&ft.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ut.updatePaintBuffers());const Mt=X.constantOr(null);if(Mt&&ft.imageAtlas){const Vt=ft.imageAtlas.patternPositions[Mt.toString()];Vt&&ut.setConstantPatternPositions(Vt)}const Tt=v.translatePosMatrix(Ze.projMatrix,ft,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor")),jt=d.paint.get("fill-emissive-strength");if(M){$e=gt.indexBuffer2,Xe=gt.segments2;const Vt=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[q.drawingBufferWidth,q.drawingBufferHeight];Ge=Ee==="fillOutlinePattern"&&ye?sf(Tt,jt,v,ft,Vt):bA(Tt,jt,Vt)}else $e=gt.indexBuffer,Xe=gt.segments,Ge=ye?_A(Tt,jt,v,ft):wd(Tt,jt);v.uploadCommonUniforms(v.context,_t,Ze.toUnwrapped()),_t.draw(v,we,E,ne?se:v.stencilModeForClipping(Ze),I,vn.disabled,Ge,d.id,gt.layoutVertexBuffer,$e,Xe,d.paint,v.transform.zoom,ut,void 0)}}function pi(v,l,d,x,E,I,M,q){d.resetLayerRenderingStats(v);const X=v.context,ne=X.gl,se=v.transform,ye=d.paint.get("fill-extrusion-pattern"),we=ye.constantOr(1),Ee=d.paint.get("fill-extrusion-opacity"),Ge=v.style.enable3dLights(),$e=d.paint.get(Ge&&!we?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Xe=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),$e],Ze=d.layout.get("fill-extrusion-edge-radius"),ft=Ze>0&&!d.paint.get("fill-extrusion-rounded-roof"),gt=ft?0:Ze,ut=se.projection.name==="globe"?i.c_():0,bt=se.projection.name==="globe",_t=bt?i.a9(se.zoom):0,Mt=[i.am(se.center.lng),i.at(se.center.lat)],Tt=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(d.lut).toArray01().slice(0,3),jt=d.paint.get("fill-extrusion-flood-light-intensity"),Vt=d.paint.get("fill-extrusion-vertical-scale"),Rt=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Dt=$i(v,d.paint.get("fill-extrusion-cutoff-fade-range")),sr=[];let Cr;bt&&sr.push("PROJECTION_GLOBE_VIEW"),Xe[0]>0&&sr.push("FAUX_AO"),ft&&sr.push("ZERO_ROOF_RADIUS"),q&&sr.push("HAS_CENTROID"),jt>0&&sr.push("FLOOD_LIGHT"),Dt.shouldRenderCutoff&&sr.push("RENDER_CUTOFF"),Rt&&sr.push("RENDER_WALL_MODE");const Rr=v.renderPass==="shadow",wr=v.shadowRenderer,en=Rr&&!!wr;v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!0);let or=[0,0,0];if(wr){const tn=v.style.directionalLight,sn=v.style.ambientLight;tn&&sn&&(or=yl(v.style,tn,sn)),Cr=sr.concat(["SHADOWS_SINGLE_CASCADE"])}const Lr=en?"fillExtrusionDepth":we?"fillExtrusionPattern":"fillExtrusion",Er=d.getLayerRenderingStats();for(const tn of x){const sn=l.getTile(tn),kr=sn.getBucket(d);if(!kr||kr.projection.name!==se.projection.name)continue;let Hr=!1;wr&&(Hr=wr.getMaxCascadeForTile(tn.toUnwrapped())===0);const Xn=v.isTileAffectedByFog(tn),hn=kr.programConfigurations.get(d.id),Fn=v.getOrCreateProgram(Lr,{config:hn,defines:Hr?Cr:sr,overrideFog:Xn});if(v.terrain&&v.terrain.setupElevationDraw(sn,Fn,{useMeterToDem:!0}),!kr.centroidVertexBuffer){const ho=Fn.attributes.a_centroid_pos;ho!==void 0&&ne.vertexAttrib2f(ho,0,0)}!Rr&&wr&&wr.setupShadows(sn.tileID.toUnwrapped(),Fn,"vector-tile",sn.tileID.overscaledZ),we&&(v.context.activeTexture.set(ne.TEXTURE0),sn.imageAtlasTexture&&sn.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),hn.updatePaintBuffers());const li=ye.constantOr(null);if(li&&sn.imageAtlas){const ho=sn.imageAtlas.patternPositions[li.toString()];ho&&hn.setConstantPatternPositions(ho)}const On=d.paint.get("fill-extrusion-vertical-gradient"),ii=1/kr.tileToMeter;let zi;if(Rr&&wr){if(ms(sn.tileID,kr,v))continue;const ho=wr.calculateShadowPassMatrixFromTile(sn.tileID.toUnwrapped());zi=Kf(ho,gt,ii,Vt)}else{const ho=v.translatePosMatrix(tn.expandedProjMatrix,sn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ko=se.projection.createInversionMatrix(se,tn.canonical);zi=we?Pp(ho,v,On,Ee,Xe,gt,ii,tn,sn,ut,_t,Mt,ko,Tt,Vt):Oc(ho,v,On,Ee,Xe,gt,ii,tn,ut,_t,Mt,ko,Tt,Vt,jt,or)}v.uploadCommonUniforms(X,Fn,tn.toUnwrapped(),null,Dt);let ji=kr.segments;if(se.projection.name==="mercator"&&!Rr&&(ji=kr.getVisibleSegments(sn.tileID,v.terrain,v.transform.getFrustum(0)),!ji.get().length))continue;if(Er)if(Rr)for(const ho of ji.get())Er.numRenderedVerticesInShadowPass+=ho.primitiveLength;else for(const ho of ji.get())Er.numRenderedVerticesInTransparentPass+=ho.primitiveLength;const Ws=[];(v.terrain||q)&&Ws.push(kr.centroidVertexBuffer),bt&&Ws.push(kr.layoutVertexExtBuffer),Rt&&Ws.push(kr.wallVertexBuffer),Fn.draw(v,X.gl.TRIANGLES,E,I,M,vn.backCCW,zi,d.id,kr.layoutVertexBuffer,kr.indexBuffer,ji,d.paint,v.transform.zoom,hn,Ws)}v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!1)}function Vn(v,l,d,x,E,I,M,q,X,ne,se,ye,we,Ee,Ge,$e,Xe,Ze,ft){const gt=v.context,ut=gt.gl,bt=v.transform,_t=v.transform.zoom,Mt=[],Tt=$i(v,d.paint.get("fill-extrusion-cutoff-fade-range"));ne==="clear"?(Mt.push("CLEAR_SUBPASS"),ft&&(Mt.push("CLEAR_FROM_TEXTURE"),gt.activeTexture.set(ut.TEXTURE0),ft.bind(ut.LINEAR,ut.CLAMP_TO_EDGE))):ne==="sdf"&&Mt.push("SDF_SUBPASS"),Xe&&Mt.push("HAS_CENTROID"),Tt.shouldRenderCutoff&&Mt.push("RENDER_CUTOFF");const jt=d.layout.get("fill-extrusion-edge-radius"),Vt=(Rt,Dt,sr,Cr,Rr)=>{const wr=Dt.programConfigurations.get(d.id),en=v.isTileAffectedByFog(Rt),or=v.getOrCreateProgram("fillExtrusionGroundEffect",{config:wr,defines:Mt,overrideFog:en}),Lr=((tn,sn,kr,Hr,Xn,hn,Fn,li,On,ii,zi)=>({u_matrix:sn,u_opacity:kr,u_ao_pass:Hr?1:0,u_meter_to_tile:Xn,u_ao:hn,u_flood_light_intensity:Fn,u_flood_light_color:li,u_attenuation:On,u_edge_radius:ii,u_fb:0,u_fb_size:zi,u_dynamic_offset:1}))(0,Cr,se,X,Rr,[ye,we*Rr],Ee,Ge,$e,_t>=17?0:jt*Rr,ft?ft.size[0]:0),Er=[];Xe&&Er.push(Dt.hiddenByLandmarkVertexBuffer),v.uploadCommonUniforms(gt,or,Rt.toUnwrapped(),null,Tt),or.draw(v,gt.gl.TRIANGLES,E,I,M,q,Lr,d.id,Dt.vertexBuffer,Dt.indexBuffer,sr,d.paint,_t,wr,Er)};for(const Rt of x){const Dt=l.getTile(Rt),sr=Dt.getBucket(d);if(!sr||sr.projection.name!==bt.projection.name||!sr.groundEffect||sr.groundEffect&&!sr.groundEffect.hasData())continue;const Cr=sr.groundEffect,Rr=1/sr.tileToMeter;{const wr=v.translatePosMatrix(Rt.projMatrix,Dt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),en=Cr.getDefaultSegment();Vt(Rt,Cr,en,wr,Rr)}if(Ze)for(let wr=0;wr<4;wr++){const en=i.c$[wr](Rt),or=l.getTile(en);if(!or)continue;const Lr=or.getBucket(d);if(!Lr||Lr.projection.name!==bt.projection.name||!Lr.groundEffect||Lr.groundEffect&&!Lr.groundEffect.hasData())continue;const Er=Lr.groundEffect;let tn,sn;wr===0?(tn=[-i.ab,0,0],sn=1):wr===1?(tn=[i.ab,0,0],sn=0):wr===2?(tn=[0,-i.ab,0],sn=3):(tn=[0,i.ab,0],sn=2);const kr=Er.regionSegments[sn];if(!kr)continue;const Hr=new Float32Array(16);i.a6.mat4.translate(Hr,Rt.projMatrix,tn),Vt(Rt,Er,kr,v.translatePosMatrix(Hr,Dt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Rr)}}}function ei(v,l,d,x,E,I,M){x.centroidVertexArray.length===0&&x.createCentroidsBuffer();const q=I?I.findDEMTileFor(d):null;if(!(q&&q.dem||M))return;const X=Ze=>new i.P(Math.ceil((Ze+i.d2)*i.d3),0),ne=Ze=>{const ft=l.getSource().minzoom,gt=bt=>{const _t=l.getTileByID(bt);if(_t&&_t.hasData())return _t.getBucket(E)},ut=[0,-1,1];for(const bt of ut){if(Ze.overscaledZ+bt<ft)continue;const _t=gt(Ze.calculateScaledKey(Ze.overscaledZ+bt));if(_t)return _t}},se=[0,0,0],ye=(Ze,ft)=>(se[0]=Math.min(Ze.min.y,ft.min.y),se[1]=Math.max(Ze.max.y,ft.max.y),se[2]=i.ab-ft.min.x>Ze.max.x?ft.min.x-i.ab:Ze.max.x,se),we=(Ze,ft)=>(se[0]=Math.min(Ze.min.x,ft.min.x),se[1]=Math.max(Ze.max.x,ft.max.x),se[2]=i.ab-ft.min.y>Ze.max.y?ft.min.y-i.ab:Ze.max.y,se),Ee=[(Ze,ft)=>ye(Ze,ft),(Ze,ft)=>ye(ft,Ze),(Ze,ft)=>we(Ze,ft),(Ze,ft)=>we(ft,Ze)],Ge=(Ze,ft,gt,ut,bt,_t,Mt)=>{if(!I)return 0;const Tt=[[_t?gt:Ze,_t?Ze:gt,0],[_t?gt:ft,_t?ft:gt,0]],jt=Mt<0?i.ab+Mt:Mt,Vt=[_t?jt:(Ze+ft)/2,_t?(Ze+ft)/2:jt,0];return gt===0&&Mt<0||gt!==0&&Mt>0?I.getForTilePoints(bt,[Vt],!0,ut):Tt.push(Vt),I.getForTilePoints(d,Tt,!0,q),Math.max(Tt[0][2],Tt[1][2],Vt[2])/I.exaggeration()};for(let Ze=0;Ze<4;Ze++){const ft=x.borderFeatureIndices[Ze];if(ft.length===0)continue;const gt=i.c$[Ze](d),ut=ne(gt);if(!(ut&&ut instanceof i.d0)||x.borderDoneWithNeighborZ[Ze]===ut.canonical.z)continue;ut.centroidVertexArray.length===0&&ut.createCentroidsBuffer();const bt=I?I.findDEMTileFor(gt):null;if(!(bt&&bt.dem||M))continue;const _t=(Ze<2?1:5)-Ze,Mt=ut.borderDoneWithNeighborZ[_t]!==x.canonical.z,Tt=ut.borderFeatureIndices[_t];let jt=0;if(x.canonical.z!==ut.canonical.z){for(const Vt of ft)x.showCentroid(x.featuresOnBorder[Vt]);if(Mt)for(const Vt of Tt)ut.showCentroid(ut.featuresOnBorder[Vt]);x.borderDoneWithNeighborZ[Ze]=ut.canonical.z,ut.borderDoneWithNeighborZ[_t]=x.canonical.z}for(const Vt of ft){const Rt=x.featuresOnBorder[Vt],Dt=x.centroidData[Rt.centroidDataIndex],sr=Rt.borders[Ze];let Cr;for(;jt<Tt.length;){Cr=ut.featuresOnBorder[Tt[jt]];const Rr=Cr.borders[_t];if(Rr[1]>sr[0]+3||Rr[0]>sr[0]-3)break;ut.showCentroid(Cr),jt++}if(Cr&&jt<Tt.length){const Rr=jt;let wr=0;for(;!(Cr.borders[_t][0]>sr[1]-3)&&(wr++,++jt!==Tt.length);)Cr=ut.featuresOnBorder[Tt[jt]];Cr=ut.featuresOnBorder[Tt[Rr]];let en=!1;if(wr>=1){const Er=Cr.borders[_t];Math.abs(sr[0]-Er[0])<3&&Math.abs(sr[1]-Er[1])<3&&(wr=1,en=!0,jt=Rr+1)}else if(wr===0){x.showCentroid(Rt);continue}const or=ut.centroidData[Cr.centroidDataIndex];M&&en&&((($e=Dt).flags|(Xe=or).flags)&i.d1?($e.flags|=i.d1,Xe.flags|=i.d1):($e.flags&=~i.d1,Xe.flags&=~i.d1));const Lr=Rt.intersectsCount()>1||Cr.intersectsCount()>1;if(wr>1)jt=Rr,Dt.centroidXY=or.centroidXY=new i.P(0,0);else if(bt&&bt.dem&&!Lr){const Er=Ee[Ze](Dt,or),tn=Ze%2?i.ab-1:0,sn=Ge(Er[0],Math.min(i.ab-1,Er[1]),tn,bt,gt,Ze<2,Er[2]);Dt.centroidXY=or.centroidXY=X(sn)}else Lr?Dt.centroidXY=or.centroidXY=new i.P(0,0):(Dt.centroidXY=x.encodeBorderCentroid(Rt),or.centroidXY=ut.encodeBorderCentroid(Cr));x.writeCentroidToBuffer(Dt),ut.writeCentroidToBuffer(or)}else x.showCentroid(Rt)}x.borderDoneWithNeighborZ[Ze]=ut.canonical.z,ut.borderDoneWithNeighborZ[_t]=x.canonical.z}var $e,Xe;(x.needsCentroidUpdate||!x.centroidVertexBuffer&&x.centroidVertexArray.length!==0)&&x.uploadCentroid(v)}const Mi=[1,0,0],Si=[0,1,0],zn=[0,0,1];function ms(v,l,d){const x=d.transform,E=d.shadowRenderer;if(!E)return!0;const I=v.toUnwrapped(),M=x.tileSize*E._cascades[d.currentShadowCascade].scale;let q=l.maxHeight;if(x.elevation){const $e=x.elevation.getMinMaxForTile(v);$e&&(q+=$e.max)}const X=[...E.shadowDirection];X[2]=-X[2];const ne=E.computeSimplifiedTileShadowVolume(I,q,M,X);if(!ne)return!1;const se=[Mi,Si,zn,X,[X[0],0,X[2]],[0,X[1],X[2]]],ye=x.projection.name==="globe",we=x.scaleZoom(M),Ee=i.bN.fromInvProjectionMatrix(x.invProjMatrix,x.worldSize,we,!ye),Ge=E.getCurrentCascadeFrustum();return Ee.intersectsPrecise(ne.vertices,ne.planes,se)===0||Ge.intersectsPrecise(ne.vertices,ne.planes,se)===0}function To(v){return[v[0]*i.d4,v[1]*i.d4,v[2]*i.d4,0]}function Ri(v,l,d,x,E,I,M,q,X){const ne=x.getSource(),se=d.globeSharedBuffers;if(!se)return;let ye,we,Ee;if(l&&(ye=x.getTile(l)),ne instanceof i.aD?(we=ne.texture,Ee=i.cD(0,0,d.transform)):ye&&l&&(we=ye.texture,Ee=i.cD(l.canonical.z,l.canonical.x,d.transform)),!we||!Ee)return;v||(Ee=i.a6.mat4.scale(i.a6.mat4.create(),Ee,[1,-1,1]));const Ge=d.context,$e=Ge.gl,Xe=E.paint.get("raster-resampling")==="nearest"?$e.NEAREST:$e.LINEAR,Ze=d.colorModeForDrapableLayerRenderPass(I),ft=M.defines;ft.push("GLOBE_POLES");const gt=new Dr($e.LEQUAL,Dr.ReadWrite,d.depthRangeFor3D),ut=Float32Array.from(d.transform.expandedFarZProjMatrix),bt=Float32Array.from(i.b5(i.cC(new i.bP(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),Ge.activeTexture.set($e.TEXTURE0),we.bind(Xe,$e.CLAMP_TO_EDGE),Ge.activeTexture.set($e.TEXTURE1),we.bind(Xe,$e.CLAMP_TO_EDGE),we.useMipmap&&Ge.extTextureFilterAnisotropic&&d.transform.pitch>20&&$e.texParameterf($e.TEXTURE_2D,Ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ge.extTextureFilterAnisotropicMax);const[_t,Mt,Tt,jt]=l?se.getPoleBuffers(l.canonical.z,!1):se.getPoleBuffers(0,!0),Vt=E.paint.get("raster-elevation");let Rt;v?(Rt=_t,d.renderDefaultNorthPole=Vt!==0):(Rt=Mt,d.renderDefaultSouthPole=Vt!==0);const Dt=To(M.mix),sr=((Rr,wr,en,or,Lr,Er,tn,sn,kr,Hr,Xn,hn,Fn)=>of(Rr,wr,en,new Float32Array(16),new Float32Array(9),[0,0],or,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Er,[0,0],sn,2,Hr,Xn,hn,1,0,Fn))(ut,bt,Ee,i.a9(d.transform.zoom),0,E,0,Vt,0,Dt,M.offset,M.range,I),Cr=d.getOrCreateProgram("raster",{defines:ft});d.uploadCommonUniforms(Ge,Cr,null),Cr.draw(d,$e.TRIANGLES,gt,X,Ze,q,sr,E.id,Rt,Tt,jt)}function Ui(v){const l=v._nearZ,d=v.projection.farthestPixelDistance(v),x=d-l,E=.2*v.height,I=l+E;return[l,d,(I-E-l)/x,(I-l)/x]}function yi(v,l,d,x){if(v)return l instanceof Sl&&v instanceof Oe?l.getTextureDescriptor(v,d,!0):{texture:v.texture,mix:To(x.mix),offset:x.offset,buffer:0,tileSize:1}}var Qo=i.d5([{name:"a_index",type:"Int16",components:1}]);class Ko{constructor(l,d,x,E){const I={width:x[0],height:x[1],data:null},M=l.gl;this.targetColorTexture=new i.T(l,I,M.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(l,I,M.RGBA8,{useMipmap:!1}),this.context=l,this.updateParticleTexture(d,E),this.lastInvalidatedAt=0}updateParticleTexture(l,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const x=this.context.gl,E=d.width*d.height;this.particleTexture0=new i.T(this.context,d,x.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,d,x.RGBA8,{premultiply:!1,useMipmap:!1});const I=new i.d6;I.reserve(E);for(let M=0;M<E;M++)I.emplaceBack(M);this.particleIndexBuffer=this.context.createVertexBuffer(I,Qo.members,!0),this.particleSegment=i.b1.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(l){return!(this.lastInvalidatedAt<l&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Ds(v,l,d){if(!v)return null;const x=l.getTextureDescriptor(v,d,!0);if(!x)return null;let{texture:E,mix:I,offset:M,tileSize:q,buffer:X,format:ne}=x;if(!E||!ne)return null;let se=!1;return ne==="uint32"&&(se=!0,I[3]=0,I=bu(i.d7,I,[0,d.paint.get("raster-particle-max-speed")]),M=Xf(i.d7,M,[0,d.paint.get("raster-particle-max-speed")])),{texture:E,textureOffset:[X/(q+2*X),q/(q+2*X)],tileSize:q,scalarData:se,scale:I,offset:M,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[ne]]}}function $s(v){const l=v._nearZ,d=v.projection.farthestPixelDistance(v),x=d-l,E=.2*v.height,I=l+E;return[l,d,(I-E-l)/x,(I-l)/x]}const Io=new i.bz(1,0,0,1),jo=new i.bz(0,1,0,1),ca=new i.bz(0,0,1,1),Pr=new i.bz(1,0,1,1),Ln=new i.bz(0,1,1,1);function ya(v,l,d,x,E,I,M){const q=v.context,X=v.transform,ne=q.gl,se=X.projection.name==="globe",ye=se?["PROJECTION_GLOBE_VIEW"]:[];let we=i.a6.mat4.clone(d.projMatrix);if(se&&i.a9(X.zoom)>0){const Dt=i.b4(d.canonical,X),sr=i.d8(Dt);we=i.a6.mat4.multiply(new Float32Array(16),X.globeMatrix,sr),i.a6.mat4.multiply(we,X.projMatrix,we)}const Ee=i.a6.mat4.create();Ee[12]+=2*E/(i.q.devicePixelRatio*X.width),Ee[13]+=2*I/(i.q.devicePixelRatio*X.height),i.a6.mat4.multiply(we,Ee,we);const Ge=v.getOrCreateProgram("debug",{defines:ye}),$e=l.getTileByID(d.key);v.terrain&&v.terrain.setupElevationDraw($e,Ge);const Xe=Dr.disabled,Ze=gn.disabled,ft=v.colorModeForRenderPass(),gt="$debug";q.activeTexture.set(ne.TEXTURE0),v.emptyTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),se?$e._makeGlobeTileDebugBuffers(v.context,X):$e._makeDebugTileBoundsBuffers(v.context,X.projection);const ut=$e._tileDebugBuffer||v.debugBuffer,bt=$e._tileDebugIndexBuffer||v.debugIndexBuffer,_t=$e._tileDebugSegments||v.debugSegments;if(Ge.draw(v,ne.LINE_STRIP,Xe,Ze,ft,vn.disabled,wA(we,x),gt,ut,bt,_t,null,null,null,[$e._globeTileDebugBorderBuffer]),M){const Dt=$e.latestRawTileData,sr=Math.floor((Dt&&Dt.byteLength||0)/1024);let Cr=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Cr+=` => ${d.overscaledZ}`),Cr+=` ${$e.state}`,Cr+=` ${sr}kb`,function(Rr,wr){Rr.initDebugOverlayCanvas();const en=Rr.debugOverlayCanvas,or=Rr.context.gl,Lr=Rr.debugOverlayCanvas.getContext("2d");Lr.clearRect(0,0,en.width,en.height),Lr.shadowColor="white",Lr.shadowBlur=2,Lr.lineWidth=1.5,Lr.strokeStyle="white",Lr.textBaseline="top",Lr.font="bold 36px Open Sans, sans-serif",Lr.fillText(wr,5,5),Lr.strokeText(wr,5,5),Rr.debugOverlayTexture.update(en),Rr.debugOverlayTexture.bind(or.LINEAR,or.CLAMP_TO_EDGE)}(v,Cr)}const Mt=l.getTile(d).tileSize,Tt=512/Math.min(Mt,512)*(d.overscaledZ/X.zoom)*.5,jt=$e._tileDebugTextBuffer||v.debugBuffer,Vt=$e._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,Rt=$e._tileDebugTextSegments||v.debugSegments;Ge.draw(v,ne.TRIANGLES,Xe,Ze,Wr.alphaBlended,vn.disabled,wA(we,i.bz.transparent,Tt),gt,jt,Vt,Rt,null,null,null,[$e._globeTileDebugTextBuffer])}function Bs(v,l,d,x){Zi(v,0,l+d/2,v.transform.width,d,x)}function ur(v,l,d,x){Zi(v,l-d/2,0,d,v.transform.height,x)}function Zi(v,l,d,x,E,I){const M=v.context,q=M.gl;q.enable(q.SCISSOR_TEST),q.scissor(l*i.q.devicePixelRatio,d*i.q.devicePixelRatio,x*i.q.devicePixelRatio,E*i.q.devicePixelRatio),M.clear({color:I}),q.disable(q.SCISSOR_TEST)}const Bh=i.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:lf}=Bh;function Rc(v,l,d,x){v.emplaceBack(l,d,x)}class oh{constructor(l){this.vertexArray=new i.d9,this.indices=new i.aO,Rc(this.vertexArray,-1,-1,1),Rc(this.vertexArray,1,-1,1),Rc(this.vertexArray,-1,1,1),Rc(this.vertexArray,1,1,1),Rc(this.vertexArray,-1,-1,-1),Rc(this.vertexArray,1,-1,-1),Rc(this.vertexArray,-1,1,-1),Rc(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,lf),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=i.b1.simpleSegment(0,0,36,12)}}function uc(v,l,d,x,E,I){const M=v.context.gl,q=l.paint.get("sky-atmosphere-color"),X=l.paint.get("sky-atmosphere-halo-color"),ne=l.paint.get("sky-atmosphere-sun-intensity"),se=((ye,we,Ee,Ge,$e)=>({u_matrix_3f:ye,u_sun_direction:we,u_sun_intensity:Ee,u_color_tint_r:[Ge.r,Ge.g,Ge.b,Ge.a],u_color_tint_m:[$e.r,$e.g,$e.b,$e.a],u_luminance:5e-5}))(i.a6.mat3.fromMat4(i.a6.mat3.create(),x),E,ne,q,X);M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+I,l.skyboxTexture,0),d.draw(v,M.TRIANGLES,Dr.disabled,gn.disabled,Wr.unblended,vn.frontCW,se,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Wc=i.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ka{constructor(l){const d=new i.da;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const x=new i.aO;x.emplaceBack(0,1,2),x.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(d,Wc.members),this.indexBuffer=l.createIndexBuffer(x),this.segments=i.b1.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const iu=i.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Kc{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Cd{constructor(l){this.colorModeAlphaBlendedWriteRGB=new Wr([1,Tn,1,Tn],i.bz.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Wr([1,0,1,0],i.bz.transparent,[!1,!1,!1,!0]),this.params=new Kc,this.updateNeeded=!0,l.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),l.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(l){const d=l.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new ka(d);const x=this.params.sizeRange,E=this.params.intensityRange,I=function(se){const ye=i.dd(30),we=[];for(let Ee=0;Ee<se;++Ee){const Ge=2*Math.PI*ye(),$e=Math.acos(1-2*ye())-.5*Math.PI;we.push(i.a6.vec3.fromValues(Math.cos($e)*Math.cos(Ge),Math.cos($e)*Math.sin(Ge),Math.sin($e)))}return we}(this.params.starsCount),M=i.dd(300),q=new i.db,X=new i.aO;let ne=0;for(let se=0;se<I.length;++se){const ye=i.a6.vec3.scale([],I[se],200),we=Math.max(0,1+.01*x*(1*M()-.5)),Ee=Math.max(0,1+.01*E*(1*M()-.5));q.emplaceBack(ye[0],ye[1],ye[2],-1,-1,we,Ee),q.emplaceBack(ye[0],ye[1],ye[2],1,-1,we,Ee),q.emplaceBack(ye[0],ye[1],ye[2],1,1,we,Ee),q.emplaceBack(ye[0],ye[1],ye[2],-1,1,we,Ee),X.emplaceBack(ne+0,ne+1,ne+2),X.emplaceBack(ne+0,ne+2,ne+3),ne+=4}this.starsVx=d.createVertexBuffer(q,iu.members),this.starsIdx=d.createIndexBuffer(X),this.starsSegments=i.b1.simpleSegment(0,0,q.length,X.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(l,d){const x=l.context,E=x.gl,I=l.transform,M=new Dr(E.LEQUAL,Dr.ReadOnly,[0,1]),q=i.a9(I.zoom),X=l.style.getLut(d.scope),ne=d.properties.get("color").toRenderColor(X).toArray01(),se=d.properties.get("high-color").toRenderColor(X).toArray01(),ye=d.properties.get("space-color").toRenderColor(X).toArray01PremultipliedAlpha(),we=5e-4,Ee=i.dc(d.properties.get("horizon-blend"),0,1,we,.25),Ge=i.cx(l,x,I)&&Ee===we?I.worldSize/(2*Math.PI*1.025)-1:I.globeRadius,$e=l.frameCounter/1e3%1,Xe=i.a6.vec3.length(I.globeCenterInViewSpace),Ze=Math.sqrt(Math.pow(Xe,2)-Math.pow(Ge,2)),ft=Math.acos(Ze/Xe),gt=ut=>{const bt=I.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ut&&bt.push("ALPHA_PASS");const _t=l.getOrCreateProgram("globeAtmosphere",{defines:bt}),Mt=((jt,Vt,Rt,Dt,sr,Cr,Rr,wr,en,or,Lr,Er)=>({u_frustum_tl:jt,u_frustum_tr:Vt,u_frustum_br:Rt,u_frustum_bl:Dt,u_horizon:sr,u_transition:Cr,u_fadeout_range:Rr,u_color:wr,u_high_color:en,u_space_color:or,u_temporal_offset:Lr,u_horizon_angle:Er}))(I.frustumCorners.TL,I.frustumCorners.TR,I.frustumCorners.BR,I.frustumCorners.BL,I.frustumCorners.horizon,q,Ee,ne,se,ye,$e,ft);l.uploadCommonUniforms(x,_t);const Tt=this.atmosphereBuffer;Tt&&_t.draw(l,E.TRIANGLES,M,gn.disabled,ut?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,vn.backCW,Mt,ut?"atmosphere_glow_alpha":"atmosphere_glow",Tt.vertexBuffer,Tt.indexBuffer,Tt.segments)};gt(!1),gt(!0)}drawStars(l,d){const x=i.ap(d.properties.get("star-intensity"),0,1);if(x===0)return;const E=l.context,I=E.gl,M=l.transform,q=l.getOrCreateProgram("stars"),X=i.a6.quat.identity([]);i.a6.quat.rotateX(X,X,-M._pitch),i.a6.quat.rotateZ(X,X,-M.angle),i.a6.quat.rotateX(X,X,i.bB(M._center.lat)),i.a6.quat.rotateY(X,X,-i.bB(M._center.lng));const ne=i.a6.mat4.fromQuat(new Float32Array(16),X),se=i.a6.mat4.multiply([],M.starsProjMatrix,ne),ye=i.a6.mat3.fromMat4([],ne),we=i.a6.mat3.invert([],ye),Ee=[0,1,0];i.a6.vec3.transformMat3(Ee,Ee,we),i.a6.vec3.scale(Ee,Ee,this.params.sizeMultiplier);const Ge=[1,0,0];i.a6.vec3.transformMat3(Ge,Ge,we),i.a6.vec3.scale(Ge,Ge,this.params.sizeMultiplier);const $e=(Xe=Ee,Ze=Ge,ft=x,{u_matrix:Float32Array.from(se),u_up:Xe,u_right:Ze,u_intensity_multiplier:ft});var Xe,Ze,ft;l.uploadCommonUniforms(E,q),this.starsVx&&this.starsIdx&&q.draw(l,I.TRIANGLES,Dr.disabled,gn.disabled,this.colorModeAlphaBlendedWriteRGB,vn.disabled,$e,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function wu(v,l){const d=[...v],x=l.cameraWorldSizeForFog/l.worldSize,E=i.a6.mat4.identity([]);return i.a6.mat4.scale(E,E,[x,x,1]),i.a6.mat4.multiply(d,E,d),i.a6.mat4.multiply(d,l.worldToFogMatrix,d),d}function Sd(v,l,d,x,E){const I=d.material,M=x.context,{baseColorTexture:q,metallicRoughnessTexture:X}=I.pbrMetallicRoughness,{normalTexture:ne,occlusionTexture:se,emissionTexture:ye}=I;function we(Ee,Ge,$e){if(Ee&&(v.push(Ge),M.activeTexture.set(M.gl.TEXTURE0+$e),Ee.gfxTexture)){const{minFilter:Xe,magFilter:Ze,wrapS:ft,wrapT:gt}=Ee.sampler;Ee.gfxTexture.bindExtraParam(Xe,Ze,ft,gt)}}we(q,"HAS_TEXTURE_u_baseColorTexture",io.BaseColor),we(X,"HAS_TEXTURE_u_metallicRoughnessTexture",io.MetallicRoughness),we(ne,"HAS_TEXTURE_u_normalTexture",io.Normal),we(se,"HAS_TEXTURE_u_occlusionTexture",io.Occlusion),we(ye,"HAS_TEXTURE_u_emissionTexture",io.Emission),E&&(E.texture||(E.texture=new i.df(x.context,E.image,[E.image.height,E.image.height,E.image.height],M.gl.RGBA8)),M.activeTexture.set(M.gl.TEXTURE0+io.LUT),E.texture&&E.texture.bind(M.gl.LINEAR,M.gl.CLAMP_TO_EDGE),v.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(v.push("HAS_ATTRIBUTE_a_uv_2f"),l.push(d.texcoordBuffer)),d.colorBuffer&&(v.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),l.push(d.colorBuffer)),d.normalBuffer&&(v.push("HAS_ATTRIBUTE_a_normal_3f"),l.push(d.normalBuffer)),d.pbrBuffer&&(v.push("HAS_ATTRIBUTE_a_pbr"),v.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),l.push(d.pbrBuffer)),I.alphaMode!=="OPAQUE"&&I.alphaMode!=="MASK"||v.push("UNPREMULT_TEXTURE_IN_SHADER"),I.defined||v.push("DIFFUSE_SHADED"),v.push("USE_STANDARD_DERIVATIVES")}function su(v,l,d,x,E,I){const M=d.paint.get("model-opacity"),q=l.context,X=new Dr(l.context.gl.LEQUAL,Dr.ReadWrite,l.depthRangeFor3D),ne=l.transform,se=v.mesh,ye=se.material,we=ye.pbrMetallicRoughness,Ee=l.style.fog;let Ge;Ge=l.transform.projection.zAxisUnit==="pixels"?[...v.nodeModelMatrix]:i.a6.mat4.multiply([],x.zScaleMatrix,v.nodeModelMatrix),i.a6.mat4.multiply(Ge,x.negCameraPosMatrix,Ge);const $e=i.a6.mat4.invert([],Ge);i.a6.mat4.transpose($e,$e);const Xe=d.paint.get("model-emissive-strength").constantOr(0),Ze=Pe(new Float32Array(v.worldViewProjection),new Float32Array(Ge),new Float32Array($e),null,l,M,we.baseColorFactor.toRenderColor(null),ye.emissiveFactor,we.metallicFactor,we.roughnessFactor,ye,Xe,d),ft={defines:[]},gt=[];Sd(ft.defines,gt,se,l,d.lut);const ut=l.shadowRenderer;ut&&(ut.useNormalOffset=!1);let bt=null;if(Ee){const Tt=wu(v.nodeModelMatrix,l.transform);if(bt=new Float32Array(Tt),ne.projection.name!=="globe"){const jt=se.aabb.min,Vt=se.aabb.max,[Rt,Dt]=Ee.getOpacityForBounds(Tt,jt[0],jt[1],Vt[0],Vt[1]);ft.overrideFog=Rt>=nn||Dt>=nn}}const _t=$i(l,d.paint.get("model-cutoff-fade-range"));_t.shouldRenderCutoff&&ft.defines.push("RENDER_CUTOFF");const Mt=l.getOrCreateProgram("model",ft);l.uploadCommonUniforms(q,Mt,null,bt,_t),l.renderPass!=="shadow"&&ut&&ut.setupShadowsFromMatrix(v.nodeModelMatrix,Mt),Mt.draw(l,q.gl.TRIANGLES,X,E,I,se.material.doubleSided?vn.disabled:vn.backCCW,Ze,d.id,se.vertexBuffer,se.indexBuffer,se.segments,d.paint,l.transform.zoom,void 0,gt)}function ah(v,l,d,x,E,I,M){let q;q=v.projection.name==="globe"?i.dg(d,v):[...d],i.a6.mat4.multiply(q,q,l.matrix);const X=i.a6.mat4.multiply([],x,q);if(l.meshes)for(const ne of l.meshes){if(ne.material.alphaMode!=="BLEND"){M.push({mesh:ne,depth:0,modelIndex:E,worldViewProjection:X,nodeModelMatrix:q});continue}const se=i.a6.vec3.transformMat4([],ne.centroid,X);se[2]>0&&I.push({mesh:ne,depth:se[2],modelIndex:E,worldViewProjection:X,nodeModelMatrix:q})}if(l.children)for(const ne of l.children)ah(v,ne,d,x,E,I,M)}function Xc(v,l,d,x){const E=d.shadowRenderer;if(!E)return;const I=E.getShadowPassDepthMode(),M=E.getShadowPassColorMode(),q=E.calculateShadowPassMatrixFromMatrix(l),X=lt(q);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,I,gn.disabled,M,vn.backCCW,X,x.id,v.vertexBuffer,v.indexBuffer,v.segments,x.paint,d.transform.zoom,void 0,void 0)}function Cu(v,l,d){const x=l.updateZoomBasedPaintProperties(),E=function(I,M,q){let X,ne,se,ye=I.terrain?I.terrain.exaggeration():0;if(I.terrain&&ye>0){const we=I.terrain,Ee=we.findDEMTileFor(q);Ee&&Ee.dem?X=i.di.create(we,q,Ee):ye=0}if(ye===0&&(M.terrainElevationMin=0,M.terrainElevationMax=0),ye===M.validForExaggeration&&(ye===0||X&&X._demTile&&X._demTile.tileID===M.validForDEMTile.id&&X._dem._timestamp===M.validForDEMTile.timestamp))return!1;for(const we in M.instancesPerModel){const Ee=M.instancesPerModel[we];for(let Ge=0;Ge<Ee.instancedDataArray.length;++Ge){const $e=(X?ye*X.getElevationAt(0|Ee.instancedDataArray.float32[16*Ge],0|Ee.instancedDataArray.float32[16*Ge+1],!0,!0):0)+Ee.instancesEvaluatedElevation[Ge];Ee.instancedDataArray.float32[16*Ge+6]=$e,ne=ne?Math.min(M.terrainElevationMin,$e):$e,se=se?Math.max(M.terrainElevationMax,$e):$e}}return M.terrainElevationMin=ne||0,M.terrainElevationMax=se||0,M.validForExaggeration=ye,M.validForDEMTile=X&&X._demTile?{id:X._demTile.tileID,timestamp:X._dem._timestamp}:{id:void 0,timestamp:0},!0}(v,l,d);(x||E)&&(l.uploaded=!1,l.upload(v.context))}const ou={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.c9([0,0,0],[i.ab,i.ab,0])};function lg(v,l){const d=1<<v.canonical.z,x=l.getFreeCameraOptions().position,E=l.elevation,I=v.canonical.x/d,M=(v.canonical.x+1)/d,q=v.canonical.y/d,X=(v.canonical.y+1)/d;let ne=l._centerAltitude;if(E){const Ee=E.getMinMaxForTile(v);Ee&&Ee.max>ne&&(ne=Ee.max)}const se=i.ap(x.x,I,M)-x.x,ye=i.ap(x.y,q,X)-x.y,we=i.bD(ne,l.center.lat)-x.z;return l._zoomFromMercatorZ(Math.sqrt(se*se+ye*ye+we*we))}function Wa(v,l,d,x,E,I,M){const q=v.context,X=v.renderPass==="shadow",ne=v.shadowRenderer,se=X&&ne?ne.getShadowPassDepthMode():new Dr(q.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D),ye=v.isTileAffectedByFog(I);if(d.meshes)for(const we of d.meshes){const Ee=["MODEL_POSITION_ON_GPU"],Ge=[];let $e,Xe,Ze;x.instancedDataArray.length>20&&Ee.push("INSTANCED_ARRAYS");const ft=$i(v,l.paint.get("model-cutoff-fade-range"));if(ft.shouldRenderCutoff&&Ee.push("RENDER_CUTOFF"),X&&ne)$e=v.getOrCreateProgram("modelDepth",{defines:Ee}),Xe=lt(M.shadowTileMatrix,M.shadowTileMatrix,Float32Array.from(d.matrix)),Ze=ne.getShadowPassColorMode();else{Sd(Ee,Ge,we,v,l.lut),$e=v.getOrCreateProgram("model",{defines:Ee,overrideFog:ye});const ut=we.material,bt=ut.pbrMetallicRoughness,_t=l.paint.get("model-opacity"),Mt=l.paint.get("model-emissive-strength").constantOr(0);Xe=Pe(I.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,v,_t,bt.baseColorFactor.toRenderColor(null),ut.emissiveFactor,bt.metallicFactor,bt.roughnessFactor,ut,Mt,l,E),ne&&(M.shadowUniformsInitialized?$e.setShadowUniformValues(q,ne.getShadowUniformValues()):(ne.setupShadows(I.toUnwrapped(),$e,"model-tile",I.overscaledZ),M.shadowUniformsInitialized=!0)),Ze=ft.shouldRenderCutoff||_t<1||ut.alphaMode!=="OPAQUE"?Wr.alphaBlended:Wr.unblended}v.uploadCommonUniforms(q,$e,I.toUnwrapped(),null,ft);const gt=we.material.doubleSided?vn.disabled:vn.backCCW;if(x.instancedDataArray.length>20)Ge.push(x.instancedDataBuffer),$e.draw(v,q.gl.TRIANGLES,se,gn.disabled,Ze,gt,Xe,l.id,we.vertexBuffer,we.indexBuffer,we.segments,l.paint,v.transform.zoom,void 0,Ge,x.instancedDataArray.length);else{const ut=X?"u_instance":"u_normal_matrix";for(let bt=0;bt<x.instancedDataArray.length;++bt)Xe[ut]=new Float32Array(x.instancedDataArray.arrayBuffer,64*bt,16),$e.draw(v,q.gl.TRIANGLES,se,gn.disabled,Ze,gt,Xe,l.id,we.vertexBuffer,we.indexBuffer,we.segments,l.paint,v.transform.zoom,void 0,Ge)}}if(d.children)for(const we of d.children)Wa(v,l,we,x,E,I,M)}const hc=[1,-1,1];function cf(v,l,d,x){if(!d.modelManager)return!0;const E=d.modelManager;if(!d.shadowRenderer)return!0;const I=d.shadowRenderer,M=l.aabb;let q=!0,X=v.maxHeight;if(X===0){let se=0;for(const ye in v.instancesPerModel){const we=E.getModel(ye,x);we?se=Math.max(se,Math.max(Math.max(we.aabb.max[0],we.aabb.max[1]),we.aabb.max[2])):q=!1}X=v.maxScale*se*1.41+v.maxVerticalOffset,q&&(v.maxHeight=X)}M.max[2]=X,M.min[2]+=v.terrainElevationMin,M.max[2]+=v.terrainElevationMax,i.a6.vec3.transformMat4(M.min,M.min,l.tileMatrix),i.a6.vec3.transformMat4(M.max,M.max,l.tileMatrix);const ne=M.intersects(I.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(v.isInsideFirstShadowMapFrustum=ne===2),ne===0}function uo(v,l){const d=v.uniformValues.u_cutoff_params[0],x=v.uniformValues.u_cutoff_params[1],E=v.uniformValues.u_cutoff_params[2],I=v.uniformValues.u_cutoff_params[3];return x===d||I===E?1:i.ap(((l-d)/(x-d)-E)/(I-E),0,1)}function os(v,l,d,x){if(l.pitch<20)return 1;const E=l.getWorldToCameraMatrix();i.a6.mat4.multiply(E,E,v);const I=i.a6.vec4.fromValues(d.min[0],d.min[1],d.min[2],1);let M=i.a6.vec4.transformMat4(i.a6.vec4.create(),I,E),q=M,X=M;I[1]=d.max[1],M=i.a6.vec4.transformMat4(i.a6.vec4.create(),I,E),q=M[1]<q[1]?M:q,X=M[1]>X[1]?M:X,I[0]=d.max[0],M=i.a6.vec4.transformMat4(i.a6.vec4.create(),I,E),q=M[1]<q[1]?M:q,X=M[1]>X[1]?M:X,I[1]=d.min[1],M=i.a6.vec4.transformMat4(i.a6.vec4.create(),I,E),q=M[1]<q[1]?M:q,X=M[1]>X[1]?M:X;const ne=i.ap(x[0],0,1),se=100*l.pixelsPerMeter*i.ap(x[1],0,1),ye=i.ap(x[2],0,1),we=i.a6.vec4.lerp(i.a6.vec4.create(),q,X,ne),Ee=Math.tan(.5*l.fovX),Ge=-we[2]*Ee;if(se===0)return we[1]<-Math.abs(Ge)?ye:1;const $e=(-Math.abs(Ge)-we[1])/se,Xe=(ft,gt,ut)=>(1-ut)*ft+ut*gt,Ze=i.ap(Xe(1,ye,$e),ye,1);return Xe(1,Ze,i.ap((l.pitch-20)/20,0,1))}class Yf{}class Bc{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(l,d,x){{const ye=this._storage.get(d.id);if(ye)return ye.lastUsedFrameIdx=l,ye.buf}const E=x.gl,I=E.getBufferParameter(E.ELEMENT_ARRAY_BUFFER,E.BUFFER_SIZE),M=new ArrayBuffer(I),q=new Int16Array(M);E.getBufferSubData(E.ELEMENT_ARRAY_BUFFER,0,new Int16Array(M));const X=new i.dk;for(let ye=0;ye<I/2;ye+=3){const we=q[ye],Ee=q[ye+1],Ge=q[ye+2];X.emplaceBack(we,Ee),X.emplaceBack(Ee,Ge),X.emplaceBack(Ge,we)}const ne=x.bindVertexArrayOES.current,se=new Yf;return se.buf=new Bt(x,X),se.lastUsedFrameIdx=l,this._storage.set(d.id,se),x.bindVertexArrayOES.set(ne),se.buf}update(l){for(const[d,x]of this._storage)l-x.lastUsedFrameIdx>30&&(x.buf.destroy(),this._storage.delete(d))}destroy(){for(const[l,d]of this._storage)d.buf.destroy(),this._storage.delete(l)}}class Bd{constructor(l){this.occluderSize=30,this.depthOffset=-1e-4,l.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),l.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Su={symbol:function(v,l,d,x,E){if(v.renderPass!=="translucent")return;const I=gn.disabled,M=v.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(ne,se,ye,we,Ee,Ge,$e){const Xe=se.transform,Ze=Ee==="map",ft=Ge==="map";for(const gt of ne){const ut=we.getTile(gt),bt=ut.getBucket(ye);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const _t=i.bj(bt.textSizeData,Xe.zoom),Mt=fa(gt,bt.getProjection(),Xe),Tt=Xe.calculatePixelsToTileUnitsMatrix(ut),jt=Yn(Mt,ut.tileID.canonical,ft,Ze,Xe,bt.getProjection(),Tt),Vt=bt.hasIconTextFit()&&bt.hasIconData();if(_t){const Rt=Math.pow(2,Xe.zoom-ut.tileID.overscaledZ);Or(bt,Ze,ft,$e,i.cS,Xe,jt,gt,Rt,_t,Vt)}}}(x,v,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),E);const q=d.paint.get("icon-opacity").constantOr(1)!==0,X=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(q||X)?bn(v,l,d,x,I,M):(q&&bn(v,l,d,x,I,M,{onlyIcons:!0}),X&&bn(v,l,d,x,I,M,{onlyText:!0})),l.map.showCollisionBoxes&&(cr(v,l,d,x,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),cr(v,l,d,x,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(v,l,d,x){if(v.renderPass!=="translucent")return;const E=d.paint.get("circle-opacity"),I=d.paint.get("circle-stroke-width"),M=d.paint.get("circle-stroke-opacity"),q=d.layout.get("circle-sort-key").constantOr(1)!==void 0,X=d.paint.get("circle-emissive-strength");if(E.constantOr(1)===0&&(I.constantOr(1)===0||M.constantOr(1)===0))return;const ne=v.context,se=ne.gl,ye=v.transform,we=v.depthModeForSublayer(0,Dr.ReadOnly),Ee=gn.disabled,Ge=v.colorModeForDrapableLayerRenderPass(X),$e=ye.projection.name==="globe",Xe=[i.am(ye.center.lng),i.at(ye.center.lat)],Ze=[];for(let gt=0;gt<x.length;gt++){const ut=x[gt],bt=l.getTile(ut),_t=bt.getBucket(d);if(!_t||_t.projection.name!==ye.projection.name)continue;const Mt=_t.programConfigurations.get(d.id),Tt=i.cT(d),jt=v.isTileAffectedByFog(ut);$e&&Tt.push("PROJECTION_GLOBE_VIEW"),Tt.push("DEPTH_D24"),v.terrain&&ye.depthOcclusionForSymbolsAndCircles&&Tt.push("DEPTH_OCCLUSION");const Vt=v.getOrCreateProgram("circle",{config:Mt,defines:Tt,overrideFog:jt}),Rt=_t.layoutVertexBuffer,Dt=_t.globeExtVertexBuffer,sr=_t.indexBuffer,Cr=ye.projection.createInversionMatrix(ye,ut.canonical),Rr={programConfiguration:Mt,program:Vt,layoutVertexBuffer:Rt,globeExtVertexBuffer:Dt,indexBuffer:sr,uniformValues:i.cU(v,ut,bt,Cr,Xe,d),tile:bt};if(q){const wr=_t.segments.get();for(const en of wr)Ze.push({segments:new i.b1([en]),sortKey:en.sortKey,state:Rr})}else Ze.push({segments:_t.segments,sortKey:0,state:Rr})}q&&Ze.sort((gt,ut)=>gt.sortKey-ut.sortKey);const ft={useDepthForOcclusion:ye.depthOcclusionForSymbolsAndCircles};for(const gt of Ze){const{programConfiguration:ut,program:bt,layoutVertexBuffer:_t,globeExtVertexBuffer:Mt,indexBuffer:Tt,uniformValues:jt,tile:Vt}=gt.state,Rt=gt.segments;v.terrain&&v.terrain.setupElevationDraw(Vt,bt,ft),v.uploadCommonUniforms(ne,bt,Vt.tileID.toUnwrapped()),bt.draw(v,se.TRIANGLES,we,Ee,Ge,vn.disabled,jt,d.id,_t,Tt,Rt,d.paint,ye.zoom,ut,[Mt])}},heatmap:function(v,l,d,x){if(d.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const E=v.context,I=E.gl,M=gn.disabled,q=new Wr([I.ONE,I.ONE,I.ONE,I.ONE],i.bz.transparent,[!0,!0,!0,!0]);(function(Ee,Ge,$e,Xe){const Ze=Ee.gl,ft=Ge.width*Xe,gt=Ge.height*Xe;Ee.activeTexture.set(Ze.TEXTURE1),Ee.viewport.set([0,0,ft,gt]);let ut=$e.heatmapFbo;if(!ut||ut&&(ut.width!==ft||ut.height!==gt)){ut&&ut.destroy();const bt=Ze.createTexture();Ze.bindTexture(Ze.TEXTURE_2D,bt),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_WRAP_S,Ze.CLAMP_TO_EDGE),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_WRAP_T,Ze.CLAMP_TO_EDGE),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_MIN_FILTER,Ze.LINEAR),Ze.texParameteri(Ze.TEXTURE_2D,Ze.TEXTURE_MAG_FILTER,Ze.LINEAR),ut=$e.heatmapFbo=Ee.createFramebuffer(ft,gt,!0,null),function(_t,Mt,Tt,jt,Vt,Rt){const Dt=_t.gl;Dt.texImage2D(Dt.TEXTURE_2D,0,_t.extRenderToTextureHalfFloat?Dt.RGBA16F:Dt.RGBA,Vt,Rt,0,Dt.RGBA,_t.extRenderToTextureHalfFloat?Dt.HALF_FLOAT:Dt.UNSIGNED_BYTE,null),jt.colorAttachment.set(Tt)}(Ee,0,bt,ut,ft,gt)}else Ze.bindTexture(Ze.TEXTURE_2D,ut.colorAttachment.get()),Ee.bindFramebuffer.set(ut.framebuffer)})(E,v,d,v.transform.projection.name==="globe"?.5:.25),E.clear({color:i.bz.transparent});const X=v.transform,ne=X.projection.name==="globe",se=ne?["PROJECTION_GLOBE_VIEW"]:[],ye=ne?vn.frontCCW:vn.disabled,we=[i.am(X.center.lng),i.at(X.center.lat)];for(let Ee=0;Ee<x.length;Ee++){const Ge=x[Ee];if(l.hasRenderableParent(Ge))continue;const $e=l.getTile(Ge),Xe=$e.getBucket(d);if(!Xe||Xe.projection.name!==X.projection.name)continue;const Ze=v.isTileAffectedByFog(Ge),ft=Xe.programConfigurations.get(d.id),gt=v.getOrCreateProgram("heatmap",{config:ft,defines:se,overrideFog:Ze}),{zoom:ut}=v.transform;v.terrain&&v.terrain.setupElevationDraw($e,gt),v.uploadCommonUniforms(E,gt,Ge.toUnwrapped());const bt=X.projection.createInversionMatrix(X,Ge.canonical);gt.draw(v,I.TRIANGLES,Dr.disabled,M,q,ye,Mp(v,Ge,$e,bt,we,ut,d.paint.get("heatmap-intensity")),d.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,d.paint,v.transform.zoom,ft,ne?[Xe.globeExtVertexBuffer]:null)}E.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(E,I){const M=E.context,q=M.gl,X=I.heatmapFbo;if(!X)return;M.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,X.colorAttachment.get()),M.activeTexture.set(q.TEXTURE1);let ne=I.colorRampTexture;ne||(ne=I.colorRampTexture=new i.T(M,I.colorRamp,q.RGBA8)),ne.bind(q.LINEAR,q.CLAMP_TO_EDGE),E.getOrCreateProgram("heatmapTexture").draw(E,q.TRIANGLES,Dr.disabled,gn.disabled,E.colorModeForRenderPass(),vn.disabled,((se,ye,we,Ee)=>({u_image:0,u_color_ramp:1,u_opacity:ye.paint.get("heatmap-opacity")}))(0,I),I.id,E.viewportBuffer,E.quadTriangleIndexBuffer,E.viewportSegments,I.paint,E.transform.zoom)}(v,d))},line:function(v,l,d,x){if(v.renderPass!=="translucent")return;const E=d.paint.get("line-opacity"),I=d.paint.get("line-width");if(E.constantOr(1)===0||I.constantOr(1)===0)return;const M=d.paint.get("line-emissive-strength"),q=d.paint.get("line-occlusion-opacity"),X=v.context,ne=X.gl,se=d.layout.get("line-z-offset"),ye=!se.isConstant()||!!se.constantOr(0),we=ye?new Dr(v.depthOcclusion?ne.GREATER:ne.LEQUAL,Dr.ReadOnly,v.depthRangeFor3D):v.depthModeForSublayer(0,Dr.ReadOnly),Ee=v.colorModeForDrapableLayerRenderPass(M),Ge=v.terrain&&v.terrain.renderingToTexture,$e=Ge?1:i.q.devicePixelRatio,Xe=d.paint.get("line-dasharray"),Ze=Xe.constantOr(1),ft=d.layout.get("line-cap"),gt=Xe.constantOr(null),ut=ft.constantOr(null),bt=d.paint.get("line-pattern"),_t=bt.constantOr(1),Mt=bt.constantOr(null),Tt=d.paint.get("line-opacity").constantOr(1);let jt=!_t&&Tt!==1||v.depthOcclusion&&q>0&&q<1;const Vt=d.paint.get("line-gradient"),Rt=_t?"linePattern":"line",Dt=i.cV(d);let sr;if(Ge&&v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(jt=!1),q!==0&&v.depthOcclusion){const Rr=d.paint._values["line-opacity"];Rr&&Rr.value&&Rr.value.kind==="constant"?sr=Rr.value:i.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}if(ye&&(v.forceTerrainMode=!0),!ye&&q!==0&&v.terrain&&!Ge)return void i.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const Cr=jt&&ye?v.stencilModeFor3D():gn.disabled;for(const Rr of x){const wr=l.getTile(Rr);if(_t&&!wr.patternsLoaded())continue;const en=wr.getBucket(d);if(!en)continue;v.prepareDrawTile();const or=en.programConfigurations.get(d.id),Lr=v.isTileAffectedByFog(Rr),Er=v.getOrCreateProgram(Rt,{config:or,defines:ye?[...Dt,"ELEVATED"]:Dt,overrideFog:Lr});if(Mt&&wr.imageAtlas){const hn=wr.imageAtlas.patternPositions[Mt.toString()];hn&&or.setConstantPatternPositions(hn)}if(!_t&&gt&&ut&&wr.lineAtlas){const hn=wr.lineAtlas.getDash(gt,ut);hn&&or.setConstantPatternPositions(hn)}let[tn,sn]=d.paint.get("line-trim-offset");(ut==="round"||ut==="square")&&tn!==sn&&(tn===0&&(tn-=1),sn===1&&(sn+=1));const kr=Ge?Rr.projMatrix:null,Hr=_t?i.cW(v,wr,d,kr,$e,[tn,sn]):i.cX(v,wr,d,kr,en.lineClipsArray.length,$e,[tn,sn]);if(Vt){const hn=en.gradients[d.id];let Fn=hn.texture;if(d.gradientVersion!==hn.version){let li=256;if(d.stepInterpolant){const On=l.getSource().maxzoom,ii=Rr.canonical.z===On?Math.ceil(1<<v.transform.maxZoom-Rr.canonical.z):1;li=i.ap(i.cY(en.maxLineLength/i.ab*1024*ii),256,X.maxTextureSize)}hn.gradient=i.cZ({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:li,image:hn.gradient||void 0,clips:en.lineClipsArray}),hn.texture?hn.texture.update(hn.gradient):hn.texture=new i.T(X,hn.gradient,ne.RGBA8),hn.version=d.gradientVersion,Fn=hn.texture}X.activeTexture.set(ne.TEXTURE1),Fn.bind(d.stepInterpolant?ne.NEAREST:ne.LINEAR,ne.CLAMP_TO_EDGE)}Ze&&(X.activeTexture.set(ne.TEXTURE0),wr.lineAtlasTexture&&wr.lineAtlasTexture.bind(ne.LINEAR,ne.REPEAT),or.updatePaintBuffers()),_t&&(X.activeTexture.set(ne.TEXTURE0),wr.imageAtlasTexture&&wr.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),or.updatePaintBuffers()),ye&&v.terrain.setupElevationDraw(wr,Er),v.uploadCommonUniforms(X,Er,Rr.toUnwrapped());const Xn=hn=>{sr!=null&&(sr.value=Tt*q),Er.draw(v,ne.TRIANGLES,we,hn,Ee,vn.disabled,Hr,d.id,en.layoutVertexBuffer,en.indexBuffer,en.segments,d.paint,v.transform.zoom,or,[en.layoutVertexBuffer2,en.patternVertexBuffer,en.zOffsetVertexBuffer]),sr!=null&&(sr.value=Tt)};if(jt&&!ye){const hn=v.stencilModeForClipping(Rr).ref;hn===0&&Ge&&X.clear({stencil:0});const Fn={func:ne.EQUAL,mask:255};Hr.u_alpha_discard_threshold=.8,Xn(new gn(Fn,hn,255,ne.KEEP,ne.KEEP,ne.INVERT)),Hr.u_alpha_discard_threshold=0,Xn(new gn(Fn,hn,255,ne.KEEP,ne.KEEP,ne.KEEP))}else jt&&ye&&(Hr.u_alpha_discard_threshold=.001),Xn(ye?Cr:v.stencilModeForClipping(Rr))}jt&&(v.resetStencilClippingMasks(),Ge&&X.clear({stencil:0})),q===0||v.depthOcclusion||Ge||v.layersWithOcclusionOpacity.push(v.currentLayer),ye&&(v.forceTerrainMode=!1)},fill:function(v,l,d,x){const E=d.paint.get("fill-color"),I=d.paint.get("fill-opacity"),M=d.is3D(),q=new Dr(v.context.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D);if(I.constantOr(1)===0)return;const X=d.paint.get("fill-emissive-strength"),ne=v.colorModeForDrapableLayerRenderPass(X),se=d.paint.get("fill-pattern"),ye=v.opaquePassEnabledForLayer()&&!se.constantOr(1)&&E.constantOr(i.bz.transparent).a===1&&I.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===ye){const we=M?q:v.depthModeForSublayer(1,v.renderPass==="opaque"?Dr.ReadWrite:Dr.ReadOnly);ui(v,l,d,x,we,ne,!1)}if(!M&&v.renderPass==="translucent"&&d.paint.get("fill-antialias")){const we=M?q:v.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,Dr.ReadOnly);ui(v,l,d,x,we,ne,!0)}},"fill-extrusion":function(v,l,d,x){const E=d.paint.get("fill-extrusion-opacity"),I=v.context,M=I.gl,q=v.terrain,X=q&&q.renderingToTexture;if(E===0)return;const ne=v.conflationActive&&v.style.isLayerClipped(d,l.getSource()),se=v.style.order.indexOf(d.fqid);if(ne&&function(ye,we,Ee,Ge,$e){for(const Xe of Ge){const Ze=we.getTile(Xe).getBucket(Ee);Ze&&(Ze.updateReplacement(Xe,ye.replacementSource,$e),Ze.uploadCentroid(ye.context))}}(v,l,d,x,se),q||ne)for(const ye of x){const we=l.getTile(ye).getBucket(d);we&&ei(v.context,l,ye,we,d,q,ne)}if(v.renderPass==="shadow"&&v.shadowRenderer){const ye=v.shadowRenderer;if(q&&E<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.a4)return;const we=ye.getShadowPassDepthMode(),Ee=ye.getShadowPassColorMode();pi(v,l,d,x,we,gn.disabled,Ee,ne)}else if(v.renderPass==="translucent"){const ye=!d.paint.get("fill-extrusion-pattern").constantOr(1),we=d.paint.get("fill-extrusion-color").constantOr(i.bz.white);if(!X&&we.a!==0){const Ee=new Dr(v.context.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D);E===1&&ye?pi(v,l,d,x,Ee,gn.disabled,Wr.unblended,ne):(pi(v,l,d,x,Ee,gn.disabled,Wr.disabled,ne),pi(v,l,d,x,Ee,v.stencilModeFor3D(),v.colorModeForRenderPass(),ne),v.resetStencilClippingMasks())}if(v.style.enable3dLights()&&ye&&(!q&&v.transform.projection.name!=="globe"||X)){const Ee=d.paint.get("fill-extrusion-opacity"),Ge=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),$e=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Xe=d.paint.get("fill-extrusion-flood-light-intensity"),Ze=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(d.lut).toArray01().slice(0,3),ft=Ge>0&&$e>0,gt=Xe>0,ut=(_t,Mt,Tt)=>(1-Tt)*_t+Tt*Mt,bt=_t=>{const Mt=v.depthModeForSublayer(1,Dr.ReadOnly,M.LEQUAL,!0),Tt=d.paint.get(_t?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),jt=ut(.1,3,Tt),Vt=v._showOverdrawInspector;if(!Vt){const Rt=new gn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),Dt=new Wr([M.ONE,M.ONE,M.ONE,M.ONE],i.bz.transparent,[!1,!1,!1,!0],M.MIN);Vn(v,l,d,x,Mt,Rt,Dt,vn.disabled,_t,"sdf",Ee,Ge,$e,Xe,Ze,jt,ne,!1)}{const Rt=Vt?gn.disabled:new gn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),Dt=Vt?v.colorModeForRenderPass():new Wr([M.ONE_MINUS_DST_ALPHA,M.DST_ALPHA,M.ONE,M.ONE],i.bz.transparent,[!0,!0,!0,!0]);Vn(v,l,d,x,Mt,Rt,Dt,vn.disabled,_t,"color",Ee,Ge,$e,Xe,Ze,jt,ne,!1)}};if(X){const _t=(Mt,Tt,jt)=>{const Vt=v.depthModeForSublayer(1,Dr.ReadOnly,M.LEQUAL,!1),Rt=d.paint.get(Mt?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Dt=ut(.1,3,Rt);{const sr=new Wr([M.ONE,M.ONE,M.ONE,M.ONE],i.bz.transparent,[!1,!1,!1,!0]);Vn(v,l,d,x,Vt,gn.disabled,sr,vn.disabled,Mt,"clear",Ee,Ge,$e,Xe,Ze,Dt,ne,Tt)}{const sr=new gn({func:M.ALWAYS,mask:255},255,255,M.KEEP,M.KEEP,M.REPLACE),Cr=new Wr([M.ONE,M.ONE,M.ONE,M.ONE],i.bz.transparent,[!1,!1,!1,!0],M.MIN);Vn(v,l,d,x,Vt,sr,Cr,vn.disabled,Mt,"sdf",Ee,Ge,$e,Xe,Ze,Dt,ne,Tt)}{const sr=Mt?M.ZERO:M.ONE_MINUS_DST_ALPHA,Cr=new gn({func:M.EQUAL,mask:255},255,255,M.KEEP,M.DECR,M.DECR),Rr=new Wr([sr,M.DST_ALPHA,M.ONE_MINUS_DST_ALPHA,M.ZERO],i.bz.transparent,[!0,!0,!0,!0]);Vn(v,l,d,x,Vt,Cr,Rr,vn.disabled,Mt,"color",Ee,Ge,$e,Xe,Ze,Dt,ne,Tt)}{const sr=new Wr([M.ONE,M.ONE,M.ONE,Mt?M.ZERO:M.ONE],i.bz.transparent,[!1,!1,!1,!0],Mt?M.FUNC_ADD:M.MAX);Vn(v,l,d,x,Vt,gn.disabled,sr,vn.disabled,Mt,"clear",Ee,Ge,$e,Xe,Ze,Dt,ne,Tt,jt)}};if(ft||gt){let Mt;if(v.prepareDrawTile(),q){const Tt=q.drapeBufferSize[0],jt=q.drapeBufferSize[1];Mt=q.framebufferCopyTexture,Mt&&(!Mt||Mt.size[0]===Tt&&Mt.size[1]===jt)||(Mt&&Mt.destroy(),Mt=q.framebufferCopyTexture=new i.T(I,new i.r({width:Tt,height:jt}),M.RGBA8)),Mt.bind(M.LINEAR,M.CLAMP_TO_EDGE),M.copyTexImage2D(M.TEXTURE_2D,0,M.RGBA,0,0,Tt,jt,0)}ft&&_t(!0,!1,Mt),gt&&_t(!1,!0,Mt)}}else ft&&bt(!0),gt&&bt(!1),(ft||gt)&&v.resetStencilClippingMasks()}}},hillshade:function(v,l,d,x){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent"||v.style.disableElevatedTerrain)return;const E=v.context,I=v.terrain&&v.terrain.renderingToTexture,[M,q]=v.renderPass!=="translucent"||I?[{},x]:v.stencilConfigForOverlap(x);for(const X of q){const ne=l.getTile(X);if(ne.needsHillshadePrepare&&v.renderPass==="offscreen")Yi(v,ne,d);else if(v.renderPass==="translucent"){const se=v.depthModeForSublayer(0,Dr.ReadOnly),ye=d.paint.get("hillshade-emissive-strength"),we=v.colorModeForDrapableLayerRenderPass(ye),Ee=I&&v.terrain?v.terrain.stencilModeForRTTOverlap(X):M[X.overscaledZ];eo(v,X,ne,d,se,Ee,we)}}E.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,l,d,x,E,I){if(v.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const M=v.transform.projection.name==="globe",q=d.paint.get("raster-elevation")!==0,X=q&&M;if(v.renderElevatedRasterBackface&&!X)return;const ne=v.context,se=ne.gl,ye=l.getSource(),we=function(_t,Mt,Tt,jt){const Vt=Mt.paint.get("raster-color"),Rt=_t.type==="raster-array",Dt=[],sr=Mt.paint.get("raster-resampling"),Cr=Mt.paint.get("raster-color-mix");let Rr=Mt.paint.get("raster-color-range");const wr=[Cr[0],Cr[1],Cr[2],0],en=Cr[3];let or=sr==="nearest"?jt.NEAREST:jt.LINEAR;if(Rt&&(Dt.push("RASTER_ARRAY"),Vt||Dt.push("RASTER_COLOR"),sr==="linear"&&Dt.push("RASTER_ARRAY_LINEAR"),or=jt.NEAREST,!Rr&&_t.rasterLayers)){const Lr=_t.rasterLayers.find(({id:Er})=>Er===Mt.sourceLayer);Lr&&Lr.fields&&Lr.fields.range&&(Rr=Lr.fields.range)}if(Rr=Rr||[0,1],Vt){Dt.push("RASTER_COLOR"),Tt.activeTexture.set(jt.TEXTURE2),Mt.updateColorRamp(Rr);let Lr=Mt.colorRampTexture;Lr||(Lr=Mt.colorRampTexture=new i.T(Tt,Mt.colorRamp,jt.RGBA8)),Lr.bind(jt.LINEAR,jt.CLAMP_TO_EDGE)}return{mix:wr,range:Rr,offset:en,defines:Dt,resampling:or}}(ye,d,ne,se);if(ye instanceof i.aD&&!x.length&&!M)return;const Ee=d.paint.get("raster-emissive-strength"),Ge=v.colorModeForDrapableLayerRenderPass(Ee),$e=v.terrain&&v.terrain.renderingToTexture,Xe=!v.options.moving,Ze=d.paint.get("raster-resampling")==="nearest"?se.NEAREST:se.LINEAR;if(ye instanceof i.aD&&!x.length&&(ye.onNorthPole||ye.onSouthPole)){const _t=q?v.stencilModeFor3D():gn.disabled;return void Ri(!!ye.onNorthPole,null,v,l,d,Ee,we,vn.disabled,_t)}if(!x.length)return;const[ft,gt]=ye instanceof i.aD||$e?[{},x]:v.stencilConfigForOverlap(x),ut=gt[gt.length-1].overscaledZ;X&&we.defines.push("PROJECTION_GLOBE_VIEW"),q&&we.defines.push("RENDER_CUTOFF");const bt=(_t,Mt,Tt)=>{for(const jt of _t){const Vt=jt.toUnwrapped(),Rt=l.getTile(jt);if($e&&(!Rt||!Rt.hasData()))continue;ne.activeTexture.set(se.TEXTURE0);const Dt=yi(Rt,ye,d,we);if(!Dt||!Dt.texture)continue;const{texture:sr,mix:Cr,offset:Rr,tileSize:wr,buffer:en}=Dt;let or,Lr;$e?(or=Dr.disabled,Lr=jt.projMatrix):q?(or=new Dr(se.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D),Lr=M?Float32Array.from(v.transform.expandedFarZProjMatrix):v.transform.calculateProjMatrix(Vt,Xe)):(or=v.depthModeForSublayer(jt.overscaledZ-ut,d.paint.get("raster-opacity")===1?Dr.ReadWrite:Dr.ReadOnly,se.LESS),Lr=v.transform.calculateProjMatrix(Vt,Xe));const Er=v.terrain&&$e?v.terrain.stencilModeForRTTOverlap(jt):ft[jt.overscaledZ],tn=I?0:d.paint.get("raster-fade-duration");Rt.registerFadeDuration(tn);const sn=l.findLoadedParent(jt,0),kr=co(Rt,sn,l,v.transform,tn);let Hr,Xn;v.terrain&&v.terrain.prepareDrawTile(),ne.activeTexture.set(se.TEXTURE0),sr.bind(Ze,se.CLAMP_TO_EDGE),ne.activeTexture.set(se.TEXTURE1),sn?(sn.texture&&sn.texture.bind(Ze,se.CLAMP_TO_EDGE),Hr=Math.pow(2,sn.tileID.overscaledZ-Rt.tileID.overscaledZ),Xn=[Rt.tileID.canonical.x*Hr%1,Rt.tileID.canonical.y*Hr%1]):sr.bind(Ze,se.CLAMP_TO_EDGE),sr.useMipmap&&ne.extTextureFilterAnisotropic&&v.transform.pitch>20&&se.texParameterf(se.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const hn=v.transform;let Fn;const li=q?Ui(hn):[0,0,0,0];let On,ii,zi,ji,Ws,ho=0;if(X&&ye instanceof i.aD&&ye.coordinates.length>3)On=Float32Array.from(i.b5(i.cC(new i.bP(0,0,0)))),ii=Float32Array.from(hn.globeMatrix),zi=Float32Array.from(i.cy(hn)),ji=[i.am(hn.center.lng),i.at(hn.center.lat)],Fn=ye.elevatedGlobePerspectiveTransform,Ws=ye.elevatedGlobeGridMatrix||new Float32Array(9);else if(X){const Ji=i.cz(jt.canonical);ho=i.cA(Ji.getCenter().lat),On=Float32Array.from(i.b5(i.cC(jt.canonical))),ii=Float32Array.from(hn.globeMatrix),zi=Float32Array.from(i.cy(hn)),ji=[i.am(hn.center.lng),i.at(hn.center.lat)],Fn=[0,0],Ws=Float32Array.from(i.cB(jt.canonical,Ji,ho,hn.worldSize/hn._pixelsPerMercatorPixel))}else Fn=ye instanceof i.aD?ye.perspectiveTransform:[0,0],On=new Float32Array(16),ii=new Float32Array(9),zi=new Float32Array(16),ji=[0,0],Ws=new Float32Array(9);const ko=of(Lr,On,ii,zi,Ws,Xn||[0,0],i.a9(v.transform.zoom),ji,li,Hr||1,kr,d,Fn,q?d.paint.get("raster-elevation"):0,2,Cr,Rr,we.range,wr,en,Ee),Ih=v.isTileAffectedByFog(jt),Xa=v.getOrCreateProgram("raster",{defines:we.defines,overrideFog:Ih});if(v.uploadCommonUniforms(ne,Xa,Vt),ye instanceof i.aD){const Ji=ye.elevatedGlobeVertexBuffer,oo=ye.elevatedGlobeIndexBuffer;if($e||!M)ye.boundsBuffer&&ye.boundsSegments&&Xa.draw(v,se.TRIANGLES,or,gn.disabled,Ge,vn.disabled,ko,d.id,ye.boundsBuffer,v.quadTriangleIndexBuffer,ye.boundsSegments);else if(Ji&&oo){const ia=hn.zoom<=i.c2?ye.elevatedGlobeSegments:ye.getSegmentsForLongitude(hn.center.lng);ia&&Xa.draw(v,se.TRIANGLES,or,gn.disabled,Ge,Mt,ko,d.id,Ji,oo,ia)}}else if(X){or=new Dr(se.LEQUAL,Dr.ReadOnly,v.depthRangeFor3D);const Ji=v.globeSharedBuffers;if(Ji){const[oo,ia,to]=Ji.getGridBuffers(ho,!1);Xa.draw(v,se.TRIANGLES,or,Tt||Er,v.colorModeForRenderPass(),Mt,ko,d.id,oo,ia,to)}}else{const{tileBoundsBuffer:Ji,tileBoundsIndexBuffer:oo,tileBoundsSegments:ia}=v.getTileBoundsBuffers(Rt);Xa.draw(v,se.TRIANGLES,or,Er,Ge,vn.disabled,ko,d.id,Ji,oo,ia)}}if(!(ye instanceof i.aD)&&X)for(const jt of _t){const Vt=jt.canonical.y===(1<<jt.canonical.z)-1;jt.canonical.y===0&&Ri(!0,jt,v,l,d,Ee,we,Mt,Tt||gn.disabled),Vt&&Ri(!1,jt,v,l,d,Ee,we,Mt===vn.frontCW?vn.backCW:vn.frontCW,Tt||gn.disabled)}};X?bt(gt,v.renderElevatedRasterBackface?vn.backCW:vn.frontCW,v.stencilModeFor3D()):bt(gt,vn.disabled,void 0),v.resetStencilClippingMasks()},"raster-particle":function(v,l,d,x,E,I){v.renderPass==="offscreen"&&function(M,q,X,ne){if(!ne.length)return;const se=M.context,ye=se.gl,we=q.getSource();if(!(we instanceof Sl))return;const Ee=Math.ceil(Math.sqrt(X.paint.get("raster-particle-count")));let Ge=X.particlePositionRGBAImage;if(!Ge||Ge.width!==Ee){const gt=function(ut){const bt=ut*ut,_t=new Uint8Array(4*bt),Mt=function(jt){return jt|=0,jt=Math.imul(2747636419^jt,2654435769),jt=Math.imul(jt^jt>>>16,2654435769),((jt=Math.imul(jt^jt>>>16,2654435769))>>>0)/4294967296},Tt=1/1.1;for(let jt=0;jt<bt;jt++){const Vt=Tt*(Mt(2*jt+0)+w),Rt=Tt*(Mt(2*jt+1)+w),Dt=255*Vt%1,sr=255*Rt%1,Cr=Dt,Rr=Rt-sr/255,wr=sr;_t[4*jt+0]=255*(Vt-Dt/255),_t[4*jt+1]=255*Cr,_t[4*jt+2]=255*Rr,_t[4*jt+3]=255*wr}return _t}(Ee);Ge=X.particlePositionRGBAImage=new i.r({width:Ee,height:Ee},gt)}let $e=X.particleFramebuffer;$e?$e.width!==Ee&&($e.destroy(),$e=X.particleFramebuffer=se.createFramebuffer(Ee,Ee,!0,null)):$e=X.particleFramebuffer=se.createFramebuffer(Ee,Ee,!0,null);const Xe=[];for(const gt of ne){const ut=q.getTile(gt);if(!(ut instanceof Oe))continue;const bt=Ds(ut,we,X);if(!bt)continue;const _t=[ut.tileSize,ut.tileSize];let Mt=X.tileFramebuffer;Mt||(Mt=X.tileFramebuffer=se.createFramebuffer(_t[0],_t[1],!0,null));let Tt=ut.rasterParticleState;Tt||(Tt=ut.rasterParticleState=new Ko(se,gt,_t,Ge));const jt=Tt.update(X.lastInvalidatedAt);Tt.particleTextureDimension!==Ee&&Tt.updateParticleTexture(gt,Ge);const Vt=Tt.targetColorTexture;Tt.targetColorTexture=Tt.backgroundColorTexture,Tt.backgroundColorTexture=Vt;const Rt=Tt.particleTexture0;Tt.particleTexture0=Tt.particleTexture1,Tt.particleTexture1=Rt,Xe.push([gt,bt,Tt,jt])}if(Xe.length===0)return;const Ze=i.q.now(),ft=X.previousDrawTimestamp?.001*(Ze-X.previousDrawTimestamp):.0167;if(X.previousDrawTimestamp=Ze,X.hasColorMap()){se.activeTexture.set(ye.TEXTURE0+2);let gt=X.colorRampTexture;gt||(gt=X.colorRampTexture=new i.T(se,X.colorRamp,ye.RGBA8)),gt.bind(ye.LINEAR,ye.CLAMP_TO_EDGE)}se.bindFramebuffer.set(X.tileFramebuffer.framebuffer),function(gt,ut,bt){const _t=gt.context,Mt=_t.gl,Tt=ut.tileFramebuffer;_t.activeTexture.set(Mt.TEXTURE0);const jt={u_texture:0,u_opacity:1.05*(Rt=ut.paint.get("raster-particle-fade-opacity-factor"))/(Rt+.05)},Vt=gt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Rt;for(const Dt of bt){const[,,sr,Cr]=Dt;Tt.colorAttachment.set(sr.targetColorTexture.texture),_t.viewport.set([0,0,Tt.width,Tt.height]),_t.clear({color:i.bz.transparent}),Cr&&(sr.backgroundColorTexture.bind(Mt.NEAREST,Mt.CLAMP_TO_EDGE),Vt.draw(gt,Mt.TRIANGLES,Dr.disabled,gn.disabled,Wr.alphaBlended,vn.disabled,jt,ut.id,gt.viewportBuffer,gt.quadTriangleIndexBuffer,gt.viewportSegments))}}(M,X,Xe),function(gt,ut,bt,_t){const Mt=gt.context,Tt=Mt.gl,jt=bt.tileFramebuffer,Vt=gt.transform.projection.name==="globe",Rt=bt.paint.get("raster-particle-max-speed");for(const Dt of _t){const[sr,Cr,Rr]=Dt;Mt.activeTexture.set(Tt.TEXTURE0+0),Cr.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),jt.colorAttachment.set(Rr.targetColorTexture.texture);const wr=gt.getOrCreateProgram("rasterParticleDraw",{defines:Cr.defines,overrideFog:!1});Mt.activeTexture.set(Tt.TEXTURE0+1);const en=Cr.scalarData?[]:[0,1,2,3].map(Er=>i.c$[Er](sr));en.push(sr);const or=sr.canonical.x,Lr=sr.canonical.y;for(const Er of en){const tn=ut.getTile(Vt?Er.wrapped():Er);if(!tn)continue;const sn=tn.rasterParticleState;if(!sn)continue;const kr=Er.canonical.x+(1<<Er.canonical.z)*(Er.wrap-sr.wrap),Hr=Er.canonical.y;sn.particleTexture0.bind(Tt.NEAREST,Tt.CLAMP_TO_EDGE);const Xn=G(1,sn.particleTexture0.size[0],[kr-or,Hr-Lr],0,Cr.texture.size,2,Rt,Cr.textureOffset,Cr.scale,Cr.offset);wr.draw(gt,Tt.POINTS,Dr.disabled,gn.disabled,Wr.alphaBlended,vn.disabled,Xn,bt.id,sn.particleIndexBuffer,void 0,sn.particleSegment)}}}(M,q,X,Xe),se.bindFramebuffer.set(X.particleFramebuffer.framebuffer),function(gt,ut,bt,_t){const Mt=gt.context,Tt=Mt.gl,jt=ut.paint.get("raster-particle-max-speed"),Vt=_t*ut.paint.get("raster-particle-speed-factor")*.15,Rt=function(sr){return Math.pow(sr,6)}(.01+1*ut.paint.get("raster-particle-reset-rate-factor")),Dt=ut.particleFramebuffer;Mt.viewport.set([0,0,Dt.width,Dt.height]);for(const sr of bt){const[,Cr,Rr]=sr;Mt.activeTexture.set(Tt.TEXTURE0+0),Cr.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),Mt.activeTexture.set(Tt.TEXTURE0+1);const wr=Rr.particleTexture0;wr.bind(Tt.NEAREST,Tt.CLAMP_TO_EDGE);const en=ee(1,wr.size[0],0,Cr.texture.size,jt,Vt,Rt,Cr.textureOffset,Cr.scale,Cr.offset);Dt.colorAttachment.set(Rr.particleTexture1.texture),Mt.clear({color:i.bz.transparent}),gt.getOrCreateProgram("rasterParticleUpdate",{defines:Cr.defines}).draw(gt,Tt.TRIANGLES,Dr.disabled,gn.disabled,Wr.unblended,vn.disabled,en,ut.id,gt.viewportBuffer,gt.quadTriangleIndexBuffer,gt.viewportSegments)}}(M,X,Xe,ft)}(v,l,d,x),v.renderPass==="translucent"&&(function(M,q,X,ne,se){const ye=M.context,we=ye.gl,Ee=q.getSource().tileSize,Ge=5*(1-i.a7(i.bU,i.bU+1,M.transform.zoom))*Ee+X.paint.get("raster-particle-elevation"),$e=!M.options.moving,Xe=M.transform.projection.name==="globe";if(!ne.length)return;const[Ze,ft]=M.stencilConfigForOverlap(ne),gt=[];Xe&&gt.push("PROJECTION_GLOBE_VIEW");const ut=M.stencilModeFor3D();for(const bt of ft){const _t=bt.toUnwrapped(),Mt=q.getTile(bt);if(!Mt.rasterParticleState)continue;const Tt=Mt.rasterParticleState,jt=100;Mt.registerFadeDuration(jt);const Vt=q.findLoadedParent(bt,0),Rt=co(Mt,Vt,q,M.transform,jt);let Dt,sr;M.terrain&&M.terrain.prepareDrawTile(),ye.activeTexture.set(we.TEXTURE0),Tt.targetColorTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),ye.activeTexture.set(we.TEXTURE1),Vt&&Vt.rasterParticleState?(Vt.rasterParticleState.targetColorTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),Dt=Math.pow(2,Vt.tileID.overscaledZ-Mt.tileID.overscaledZ),sr=[Mt.tileID.canonical.x*Dt%1,Mt.tileID.canonical.y*Dt%1]):Tt.targetColorTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE);const Cr=Xe?Float32Array.from(M.transform.expandedFarZProjMatrix):M.transform.calculateProjMatrix(_t,$e),Rr=M.transform,wr=$s(Rr),en=i.cz(bt.canonical),or=i.cA(en.getCenter().lat);let Lr,Er,tn,sn,kr;Xe?(Lr=Float32Array.from(i.b5(i.cC(bt.canonical))),Er=Float32Array.from(Rr.globeMatrix),tn=Float32Array.from(i.cy(Rr)),sn=[i.am(Rr.center.lng),i.at(Rr.center.lat)],kr=Float32Array.from(i.cB(bt.canonical,en,or,Rr.worldSize/Rr._pixelsPerMercatorPixel))):(Lr=new Float32Array(16),Er=new Float32Array(9),tn=new Float32Array(16),sn=[0,0],kr=new Float32Array(9));const Hr=L(Cr,Lr,Er,tn,kr,sr||[0,0],i.a9(M.transform.zoom),sn,wr,Dt||1,Rt,Ge),Xn=M.isTileAffectedByFog(bt),hn=M.getOrCreateProgram("rasterParticle",{defines:gt,overrideFog:Xn});if(M.uploadCommonUniforms(ye,hn,_t),Xe){const Fn=new Dr(we.LEQUAL,Dr.ReadOnly,M.depthRangeFor3D),li=0,On=M.globeSharedBuffers;if(On){const[ii,zi,ji]=On.getGridBuffers(or,li!==0);hn.draw(M,we.TRIANGLES,Fn,ut,Wr.alphaBlended,M.renderElevatedRasterBackface?vn.frontCCW:vn.backCCW,Hr,X.id,ii,zi,ji)}}else{const Fn=M.depthModeForSublayer(0,Dr.ReadOnly),li=Ze[bt.overscaledZ],{tileBoundsBuffer:On,tileBoundsIndexBuffer:ii,tileBoundsSegments:zi}=M.getTileBoundsBuffers(Mt);hn.draw(M,we.TRIANGLES,Fn,li,Wr.alphaBlended,vn.disabled,Hr,X.id,On,ii,zi)}}M.resetStencilClippingMasks()}(v,l,d,x),v.style.map.triggerRepaint())},background:function(v,l,d,x){const E=d.paint.get("background-color"),I=d.paint.get("background-opacity"),M=d.paint.get("background-emissive-strength"),q=d.paint.get("background-pitch-alignment")==="viewport";if(I===0)return;const X=v.context,ne=X.gl,se=v.transform,ye=se.tileSize,we=d.paint.get("background-pattern");let Ee;if(we!==void 0&&(we===null||(Ee=v.imageManager.getPattern(we.toString(),d.scope,v.style.getLut(d.scope)),!Ee)))return;const Ge=!we&&E.a===1&&I===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Ge)return;const $e=gn.disabled,Xe=v.depthModeForSublayer(0,Ge==="opaque"?Dr.ReadWrite:Dr.ReadOnly),Ze=v.colorModeForDrapableLayerRenderPass(M),ft=we?"backgroundPattern":"background";let gt,ut=x;if(ut||(gt=v.getBackgroundTiles(),ut=Object.values(gt).map(bt=>bt.tileID)),we&&(X.activeTexture.set(ne.TEXTURE0),v.imageManager.bind(v.context,d.scope)),q){const bt=v.getOrCreateProgram(ft,{overrideFog:!1,overrideRtt:!0}),_t=new Float32Array(i.a6.mat4.identity([])),Mt=new i.aA(0,0,0,0,0),Tt=we?Ne(_t,M,I,v,0,d.scope,Ee,q,{tileID:Mt,tileSize:ye}):Ie(_t,M,I,E.toRenderColor(d.lut));bt.draw(v,ne.TRIANGLES,Xe,$e,Ze,vn.disabled,Tt,d.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments)}else for(const bt of ut){const _t=v.isTileAffectedByFog(bt),Mt=v.getOrCreateProgram(ft,{overrideFog:_t}),Tt=bt.toUnwrapped(),jt=x?bt.projMatrix:v.transform.calculateProjMatrix(Tt);v.prepareDrawTile();const Vt=l?l.getTile(bt):gt?gt[bt.key]:new ae(bt,ye,se.zoom,v),Rt=we?Ne(jt,M,I,v,0,d.scope,Ee,q,{tileID:bt,tileSize:ye}):Ie(jt,M,I,E.toRenderColor(d.lut));v.uploadCommonUniforms(X,Mt,Tt);const{tileBoundsBuffer:Dt,tileBoundsIndexBuffer:sr,tileBoundsSegments:Cr}=v.getTileBoundsBuffers(Vt);Mt.draw(v,ne.TRIANGLES,Xe,$e,Ze,vn.disabled,Rt,d.id,Dt,sr,Cr)}},sky:function(v,l,d){const x=v._atmosphere?i.a9(v.transform.zoom):1,E=d.paint.get("sky-opacity")*x;if(E===0)return;const I=v.context,M=d.paint.get("sky-type"),q=new Dr(I.gl.LEQUAL,Dr.ReadOnly,[0,1]),X=v.frameCounter/1e3%1;M==="atmosphere"?v.renderPass==="offscreen"?d.needsSkyboxCapture(v)&&(function(ne,se,ye,we){const Ee=ne.context,Ge=Ee.gl;let $e=se.skyboxFbo;if(!$e){$e=se.skyboxFbo=Ee.createFramebuffer(32,32,!0,null),se.skyboxGeometry=new oh(Ee),se.skyboxTexture=Ee.gl.createTexture(),Ge.bindTexture(Ge.TEXTURE_CUBE_MAP,se.skyboxTexture),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_WRAP_S,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_WRAP_T,Ge.CLAMP_TO_EDGE),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_MIN_FILTER,Ge.LINEAR),Ge.texParameteri(Ge.TEXTURE_CUBE_MAP,Ge.TEXTURE_MAG_FILTER,Ge.LINEAR);for(let gt=0;gt<6;++gt)Ge.texImage2D(Ge.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,Ge.RGBA,32,32,0,Ge.RGBA,Ge.UNSIGNED_BYTE,null)}Ee.bindFramebuffer.set($e.framebuffer),Ee.viewport.set([0,0,32,32]);const Xe=se.getCenter(ne,!0),Ze=ne.getOrCreateProgram("skyboxCapture"),ft=new Float64Array(16);i.a6.mat4.identity(ft),i.a6.mat4.rotateY(ft,ft,.5*-Math.PI),uc(ne,se,Ze,ft,Xe,0),i.a6.mat4.identity(ft),i.a6.mat4.rotateY(ft,ft,.5*Math.PI),uc(ne,se,Ze,ft,Xe,1),i.a6.mat4.identity(ft),i.a6.mat4.rotateX(ft,ft,.5*-Math.PI),uc(ne,se,Ze,ft,Xe,2),i.a6.mat4.identity(ft),i.a6.mat4.rotateX(ft,ft,.5*Math.PI),uc(ne,se,Ze,ft,Xe,3),i.a6.mat4.identity(ft),uc(ne,se,Ze,ft,Xe,4),i.a6.mat4.identity(ft),i.a6.mat4.rotateY(ft,ft,Math.PI),uc(ne,se,Ze,ft,Xe,5),Ee.viewport.set([0,0,ne.width,ne.height])}(v,d),d.markSkyboxValid(v)):v.renderPass==="sky"&&function(ne,se,ye,we,Ee){const Ge=ne.context,$e=Ge.gl,Xe=ne.transform,Ze=ne.getOrCreateProgram("skybox");Ge.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_CUBE_MAP,se.skyboxTexture);const ft=((gt,ut,bt,_t,Mt)=>({u_matrix:gt,u_sun_direction:ut,u_cubemap:0,u_opacity:_t,u_temporal_offset:Mt}))(Xe.skyboxMatrix,se.getCenter(ne,!1),0,we,Ee);ne.uploadCommonUniforms(Ge,Ze),Ze.draw(ne,$e.TRIANGLES,ye,gn.disabled,ne.colorModeForRenderPass(),vn.backCW,ft,"skybox",se.skyboxGeometry.vertexBuffer,se.skyboxGeometry.indexBuffer,se.skyboxGeometry.segment)}(v,d,q,E,X):M==="gradient"&&v.renderPass==="sky"&&function(ne,se,ye,we,Ee){const Ge=ne.context,$e=Ge.gl,Xe=ne.transform,Ze=ne.getOrCreateProgram("skyboxGradient");se.skyboxGeometry||(se.skyboxGeometry=new oh(Ge)),Ge.activeTexture.set($e.TEXTURE0);let ft=se.colorRampTexture;ft||(ft=se.colorRampTexture=new i.T(Ge,se.colorRamp,$e.RGBA8)),ft.bind($e.LINEAR,$e.CLAMP_TO_EDGE);const gt=((ut,bt,_t,Mt,Tt)=>({u_matrix:ut,u_color_ramp:0,u_center_direction:bt,u_radius:i.bB(_t),u_opacity:Mt,u_temporal_offset:Tt}))(Xe.skyboxMatrix,se.getCenter(ne,!1),se.paint.get("sky-gradient-radius"),we,Ee);ne.uploadCommonUniforms(Ge,Ze),Ze.draw(ne,$e.TRIANGLES,ye,gn.disabled,ne.colorModeForRenderPass(),vn.backCW,gt,"skyboxGradient",se.skyboxGeometry.vertexBuffer,se.skyboxGeometry.indexBuffer,se.skyboxGeometry.segment)}(v,d,q,E,X)},debug:function(v,l,d,x,E,I){for(let M=0;M<d.length;M++)if(E){const ne=new i.bz(x.r*.8,x.g*.8,x.b*.8,1);ya(v,l,d[M],x,-1,-1,I),ya(v,l,d[M],x,-1,1,I),ya(v,l,d[M],x,1,1,I),ya(v,l,d[M],x,1,-1,I),ya(v,l,d[M],ne,0,0,I)}else ya(v,l,d[M],x,0,0,I)},custom:function(v,l,d,x){const E=v.context,I=d.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&d.isDraped(l)){if(v.renderPass==="offscreen"){const M=I.prerender;if(M){if(v.setCustomLayerDefaults(),E.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const q=v.transform.pointMerc;M.call(I,E.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.a9(v.transform.zoom),[q.x,q.y],v.transform.pixelsPerMeterRatio)}else M.call(I,E.gl,v.transform.customLayerMatrix());E.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const q=I.renderToTile;if(q){const X=x[0].canonical,ne=new i.a5(X.x+x[0].wrap*(1<<X.z),X.y,X.z);E.setDepthMode(Dr.disabled),E.setStencilMode(gn.disabled),E.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),q.call(I,E.gl,ne),E.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),E.setColorMode(v.colorModeForRenderPass()),E.setStencilMode(gn.disabled);const M=I.renderingMode==="3d"?new Dr(v.context.gl.LEQUAL,Dr.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Dr.ReadOnly);if(E.setDepthMode(M),v.transform.projection.name==="globe"){const q=v.transform.pointMerc;I.render(E.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.a9(v.transform.zoom),[q.x,q.y],v.transform.pixelsPerMeterRatio)}else I.render(E.gl,v.transform.customLayerMatrix());E.setDirty(),v.setBaseState(),E.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(v,l,d,x){if(v.renderPass==="opaque")return;const E=d.paint.get("model-opacity");if(E===0)return;const I=d.paint.get("model-cast-shadows");if(v.renderPass==="shadow"&&(!I||v.terrain&&E<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof i.a4))return;const M=v.shadowRenderer,q=d.paint.get("model-receive-shadows");M&&(M.useNormalOffset=!0,q||(M.enabled=!1));const X=()=>{M&&(M.useNormalOffset=!0,q||(M.enabled=!0))},ne=l.getSource();if(v.renderPass==="light-beam"&&ne.type!=="batched-model")return;if(ne.type==="vector"||ne.type==="geojson")return function(Ze,ft,gt,ut,bt){const _t=Ze.transform;if(_t.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${_t.projection.name} projection is not yet implemented`);const Mt=_t.getFreeCameraOptions().position;if(!Ze.modelManager)return;const Tt=Ze.modelManager;gt.modelManager=Tt;const jt=Ze.shadowRenderer;if(!gt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Vt=gt._unevaluatedLayout._values["model-id"],Rt={...gt.layout.get("model-id").parameters},Dt=Ze.style.order.indexOf(gt.fqid);for(const sr of ut){const Cr=ft.getTile(sr).getBucket(gt);if(!Cr||Cr.projection.name!==_t.projection.name)continue;const Rr=Cr.getModelUris();Rr&&!Cr.modelsRequested&&(Tt.addModelsFromBucket(Rr,bt),Cr.modelsRequested=!0);const wr=lg(sr,_t);Rt.zoom=wr;const en=Vt.possiblyEvaluate(Rt);if(Cu(Ze,Cr,sr),ou.shadowUniformsInitialized=!1,ou.useSingleShadowCascade=!!jt&&jt.getMaxCascadeForTile(sr.toUnwrapped())===0,Ze.renderPass==="shadow"&&jt){if(Ze.currentShadowCascade===1&&Cr.isInsideFirstShadowMapFrustum)continue;const Er=_t.calculatePosMatrix(sr.toUnwrapped(),_t.worldSize);if(ou.tileMatrix.set(Er),ou.shadowTileMatrix=Float32Array.from(jt.calculateShadowPassMatrixFromMatrix(Er)),ou.aabb.min.fill(0),ou.aabb.max[0]=ou.aabb.max[1]=i.ab,ou.aabb.max[2]=0,cf(Cr,ou,Ze,gt.scope))continue}const or=1<<sr.canonical.z,Lr=[((Mt.x-sr.wrap)*or-sr.canonical.x)*i.ab,(Mt.y*or-sr.canonical.y)*i.ab,Mt.z*or*i.ab];Ze.conflationActive&&Object.keys(Cr.instancesPerModel).length>0&&Ze.style.isLayerClipped(gt,ft.getSource())&&Cr.updateReplacement(sr,Ze.replacementSource,Dt,bt)&&(Cr.uploaded=!1,Cr.upload(Ze.context));for(let Er in Cr.instancesPerModel){const tn=Cr.instancesPerModel[Er];tn.features.length>0&&(Er=en.evaluate(tn.features[0].feature,{}));const sn=Tt.getModel(Er,bt);if(sn&&sn.uploaded)for(const kr of sn.nodes)Wa(Ze,gt,kr,tn,Lr,sr,ou)}}}(v,l,d,x,ne.type==="vector"?d.scope:""),void X();if(!ne.loaded())return;if(ne.type==="batched-model")return function(Ze,ft,gt,ut){gt.resetLayerRenderingStats(Ze);const bt=Ze.context,_t=Ze.transform,Mt=Ze.style.fog,Tt=Ze.shadowRenderer;if(_t.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${_t.projection.name} projection is not yet implemented`);const jt=Ze.transform.getFreeCameraOptions().position,Vt=i.a6.vec3.scale([],[jt.x,jt.y,jt.z],Ze.transform.worldSize),Rt=i.a6.vec3.negate([],Vt),Dt=i.a6.mat4.identity([]),sr=i.de(_t.center.lat,_t.zoom),Cr=i.a6.mat4.fromScaling([],[1,1,1/sr]);i.a6.mat4.translate(Dt,Dt,Rt);const Rr=gt.paint.get("model-opacity"),wr=new Dr(bt.gl.LEQUAL,Dr.ReadWrite,Ze.depthRangeFor3D),en=new Dr(bt.gl.LEQUAL,Dr.ReadOnly,Ze.depthRangeFor3D),or=new i.c9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Lr=Ze.renderPass==="shadow",Er=Lr&&Tt?Tt.getCurrentCascadeFrustum():_t.getFrustum(_t.scaleZoom(_t.worldSize)),tn=gt.paint.get("model-front-cutoff"),sn=tn[2]<1,kr=$i(Ze,gt.paint.get("model-cutoff-fade-range")),Hr=gt.getLayerRenderingStats();(function(Xn,hn,Fn,li){const On=Xn.terrain?Xn.terrain.exaggeration():0,ii=Xn.transform.zoom;for(const zi of li){const ji=hn.getTile(zi).getBucket(Fn);ji&&(Xn.conflationActive&&ji.updateReplacement(zi,Xn.replacementSource),ji.evaluateScale(Xn,Fn),Xn.terrain&&On>0&&ji.elevationUpdate(Xn.terrain,On,zi,Fn.source),ji.needsReEvaluation(Xn,ii,Fn)&&ji.evaluate(Fn))}})(Ze,ft,gt,ut),function(){let Xn,hn,Fn;sn?(Xn=ut.length-1,hn=-1,Fn=-1):(Xn=0,hn=ut.length,Fn=1);const li=new Float64Array(16),On=i.a6.vec3.create(),ii=new i.P(0,0);for(let zi=Xn;zi!==hn;zi+=Fn){const ji=ut[zi],Ws=ft.getTile(ji).getBucket(gt);if(!Ws||!Ws.uploaded)continue;let ho=!1;Tt&&(ho=Tt.getMaxCascadeForTile(ji.toUnwrapped())===0);const ko=_t.calculatePosMatrix(ji.toUnwrapped(),_t.worldSize),Ih=Ws.modelTraits;!Lr&&sn&&(i.a6.mat4.invert(li,ko),i.a6.vec3.transformMat4(On,Vt,li),ii.x=On[0],ii.y=On[1]);const Xa=[];for(const Ji of Ws.getNodesInfo()){if(Ji.hiddenByReplacement||!Ji.node.meshes)continue;const oo=Ji.node;let ia=0;Ze.terrain&&oo.elevation&&(ia=oo.elevation*Ze.terrain.exaggeration());const to=(()=>{const Lo=Ji.aabb;return or.min=[...Lo.min],or.max=[...Lo.max],or.min[2]+=ia,or.max[2]+=ia,i.a6.vec3.transformMat4(or.min,or.min,ko),i.a6.vec3.transformMat4(or.max,or.max,ko),or})(),Di=Ji.evaluatedScale;if(Di[0]<=1&&Di[1]<=1&&Di[2]<=1&&to.intersects(Er)===0)continue;if(!Lr&&sn){const Lo=.16666666666666666;Ji.cameraCollisionOpacity=Vt[0]>to.min[0]&&Vt[0]<to.max[0]&&Vt[1]>to.min[1]&&Vt[1]<to.max[1]&&Vt[2]*sr<to.max[2]&&oo.footprint&&i.bu(ii,oo.footprint)?Math.max(Ji.cameraCollisionOpacity-Lo,0):Math.min(1,Ji.cameraCollisionOpacity+Lo)}const Es=[...ko],Hs=oo.anchor?oo.anchor[0]:0,La=oo.anchor?oo.anchor[1]:0;i.a6.mat4.translate(Es,Es,[Hs*(Di[0]-1),La*(Di[1]-1),ia]),i.a6.vec3.exactEquals(Di,i.dh)||i.a6.mat4.scale(Es,Es,Di);const Ya=i.a6.mat4.multiply([],Es,oo.matrix),ds=i.a6.mat4.multiply([],_t.expandedFarZProjMatrix,Ya),Ll=i.a6.mat4.multiply([],_t.expandedFarZProjMatrix,Es),Xl=i.a6.vec4.transformMat4([],[Hs,La,ia,1],ds)[2];oo.hidden=!1;let Fl=Rr;Lr||(sn&&(Fl*=Ji.cameraCollisionOpacity,Fl*=os(Es,_t,Ji.aabb,tn)),Fl*=uo(kr,Xl)),Fl!==0?Xa.push({nodeInfo:Ji,depth:Xl,opacity:Fl,wvpForNode:ds,wvpForTile:Ll,nodeModelMatrix:Ya,tileModelMatrix:Es}):oo.hidden=!0}Lr||Xa.sort((Ji,oo)=>!sn||Ji.opacity===1&&oo.opacity===1?Ji.depth<oo.depth?-1:1:Ji.opacity===1?-1:oo.opacity===1?1:Ji.depth>oo.depth?-1:1);for(const Ji of Xa){const oo=Ji.nodeInfo,ia=oo.node;let to=i.a6.mat4.multiply([],Cr,Ji.tileModelMatrix);i.a6.mat4.multiply(to,Dt,to);const Di=i.a6.mat4.invert([],to);i.a6.mat4.transpose(Di,Di),i.a6.mat4.scale(Di,Di,hc),to=i.a6.mat4.multiply(to,to,ia.matrix);const Es=Ze.renderPass==="light-beam",Hs=Ih&i.dj.HasMapboxMeshFeatures,La=Hs?0:oo.evaluatedRMEA[0][2];for(let Ya=0;Ya<ia.meshes.length;++Ya){const ds=ia.meshes[Ya],Ll=Ya===ia.lightMeshIndex;let Xl=Ji.wvpForNode;if(Ll){if(!Es&&!Ze.terrain&&Ze.shadowRenderer){Ze.currentLayer<Ze.firstLightBeamLayer&&(Ze.firstLightBeamLayer=Ze.currentLayer);continue}Xl=Ji.wvpForTile}else if(Es)continue;const Fl={defines:[]},Lo=[];if(Sd(Fl.defines,Lo,ds,Ze,gt.lut),Hs||Fl.defines.push("DIFFUSE_SHADED"),ho&&Fl.defines.push("SHADOWS_SINGLE_CASCADE"),Hr&&(Lr?Hr.numRenderedVerticesInShadowPass+=ds.vertexArray.length:Hr.numRenderedVerticesInTransparentPass+=ds.vertexArray.length),Lr){Xc(ds,Ji.nodeModelMatrix,Ze,gt);continue}let lu=null;if(Mt){const ff=wu(Ji.nodeModelMatrix,Ze.transform);if(lu=new Float32Array(ff),_t.projection.name!=="globe"){const Jf=ds.aabb.min,jd=ds.aabb.max,[TA,IA]=Mt.getOpacityForBounds(ff,Jf[0],Jf[1],jd[0],jd[1]);Fl.overrideFog=TA>=nn||IA>=nn}}const cu=ds.material;let Lh;cu.occlusionTexture&&cu.occlusionTexture.offsetScale&&(Lh=cu.occlusionTexture.offsetScale,Fl.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!Lr&&Tt&&(Tt.useNormalOffset=!!ds.normalBuffer);const dh=Ze.getOrCreateProgram("model",Fl);!Lr&&Tt&&Tt.setupShadowsFromMatrix(Ji.tileModelMatrix,dh,Tt.useNormalOffset),Ze.uploadCommonUniforms(bt,dh,null,lu);const Lu=cu.pbrMetallicRoughness;Lu.metallicFactor=.9,Lu.roughnessFactor=.5;const Fh=Pe(new Float32Array(Xl),new Float32Array(to),new Float32Array(Di),new Float32Array(ia.matrix),Ze,Ji.opacity,Lu.baseColorFactor.toRenderColor(null),cu.emissiveFactor,Lu.metallicFactor,Lu.roughnessFactor,cu,La,gt,[0,0,0],Lh);!Ll&&(oo.hasTranslucentParts||Ji.opacity<1)&&dh.draw(Ze,bt.gl.TRIANGLES,wr,gn.disabled,Wr.disabled,vn.backCCW,Fh,gt.id,ds.vertexBuffer,ds.indexBuffer,ds.segments,gt.paint,Ze.transform.zoom,void 0,Lo),dh.draw(Ze,bt.gl.TRIANGLES,Ll?en:wr,gn.disabled,Ll||Ji.opacity<1||oo.hasTranslucentParts?Wr.alphaBlended:Wr.unblended,vn.backCCW,Fh,gt.id,ds.vertexBuffer,ds.indexBuffer,ds.segments,gt.paint,Ze.transform.zoom,void 0,Lo)}}}}()}(v,l,d,x),void X();if(ne.type!=="model")return;const se=ne.getModels(),ye=[],we=v.transform.getFreeCameraOptions().position,Ee=i.a6.vec3.scale([],[we.x,we.y,we.z],v.transform.worldSize);i.a6.vec3.negate(Ee,Ee);const Ge=[],$e=[];let Xe=0;for(const Ze of se){const ft=d.paint.get("model-rotation").constantOr(null),gt=d.paint.get("model-scale").constantOr(null),ut=d.paint.get("model-translation").constantOr(null);Ze.computeModelMatrix(v,ft,gt,ut,!0,!0,!1);const bt=i.a6.mat4.identity([]),_t=i.de(Ze.position.lat,v.transform.zoom),Mt=i.a6.mat4.fromScaling([],[1,1,1/_t]);i.a6.mat4.translate(bt,bt,Ee),ye.push({zScaleMatrix:Mt,negCameraPosMatrix:bt});for(const Tt of Ze.nodes)ah(v.transform,Tt,Ze.matrix,v.transform.expandedFarZProjMatrix,Xe,Ge,$e);Xe++}if(Ge.sort((Ze,ft)=>ft.depth-Ze.depth),v.renderPass!=="shadow"){if(E===1)for(const Ze of $e)su(Ze,v,d,ye[Ze.modelIndex],gn.disabled,v.colorModeForRenderPass());else{for(const Ze of $e)su(Ze,v,d,ye[Ze.modelIndex],gn.disabled,Wr.disabled);for(const Ze of $e)su(Ze,v,d,ye[Ze.modelIndex],v.stencilModeFor3D(),v.colorModeForRenderPass());v.resetStencilClippingMasks()}for(const Ze of Ge)su(Ze,v,d,ye[Ze.modelIndex],gn.disabled,v.colorModeForRenderPass());X()}else{for(const Ze of $e)Xc(Ze.mesh,Ze.nodeModelMatrix,v,d);for(const Ze of Ge)Xc(Ze.mesh,Ze.nodeModelMatrix,v,d);X()}}},Bu={model:function(v,l,d){const x=l.getSource();if(!x.loaded())return;if(x.type==="vector"||x.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,x.type==="vector"?v.scope:""));if(x.type==="batched-model"||x.type!=="model")return;const E=x.getModels();for(const I of E)I.upload(d.context)},raster:function(v,l,d){const x=l.getSource();if(!(x instanceof Sl&&x.loaded()))return;const E=v.sourceLayer||x.rasterLayerIds&&x.rasterLayerIds[0];if(!E)return;const I=v.paint.get("raster-array-band")||x.getInitialBand(E);if(I==null)return;const M=l.getIds().map(q=>l.getTileByID(q));for(const q of M)q.updateNeeded(E,I)&&x.prepareTile(q,E,I)},"raster-particle":function(v,l,d){const x=l.getSource();if(!(x instanceof Sl&&x.loaded()))return;const E=v.sourceLayer||x.rasterLayerIds&&x.rasterLayerIds[0];if(!E)return;const I=v.paint.get("raster-particle-array-band")||x.getInitialBand(E);if(I==null)return;const M=l.getIds().map(q=>l.getTileByID(q));for(const q of M)q.updateNeeded(E,I)&&x.prepareTile(q,E,I)}};class ed{constructor(l,d,x,E){this.context=new ct(l,d),this.transform=x,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=E,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const I=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const q of I)this._debugParams.enabledLayers[q]=!0;E.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),E.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),E.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),E.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const q of I)E.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],q);this.occlusionParams=new Bd(E),this.setup(),this.numSublayers=er.maxUnderzooming+er.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new sc(this),this._wireframeDebugCache=new Bc,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const M=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,M,l.RGBA8),this._clippingActiveLastFrame=!1}updateTerrain(l,d){const x=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(x||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new rt(this,l));const E=this._terrain;this.transform.elevation=x?E:null,E.update(l,this.transform,d),this.transform.elevation&&!E.enabled&&(this.transform.elevation=null)}_updateFog(l){const d=l.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[x,E]=d.getFovAdjustedRange(this.transform._fov);if(x>E)return void(this.transform.fogCullDistSq=null);const I=x+.78*(E-x);this.transform.fogCullDistSq=I*I}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(l){l&&!this._terrain&&(this._terrain=new rt(this,this.style)),this._forceTerrainMode=l}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(l,d){if(this.width=l*i.q.devicePixelRatio,this.height=d*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style.order)this.style._mergedLayers[x].resize()}setup(){const l=this.context,d=new i.a_;d.emplaceBack(0,0),d.emplaceBack(i.ab,0),d.emplaceBack(0,i.ab),d.emplaceBack(i.ab,i.ab),this.tileExtentBuffer=l.createVertexBuffer(d,i.b0.members),this.tileExtentSegments=i.b1.simpleSegment(0,0,4,2);const x=new i.a_;x.emplaceBack(0,0),x.emplaceBack(i.ab,0),x.emplaceBack(0,i.ab),x.emplaceBack(i.ab,i.ab),this.debugBuffer=l.createVertexBuffer(x,i.b0.members),this.debugSegments=i.b1.simpleSegment(0,0,4,5);const E=new i.a_;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(-1,1),E.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(E,i.b0.members),this.viewportSegments=i.b1.simpleSegment(0,0,4,2);const I=new i.aN;I.emplaceBack(0,0,0,0),I.emplaceBack(i.ab,0,i.ab,0),I.emplaceBack(0,i.ab,0,i.ab),I.emplaceBack(i.ab,i.ab,i.ab,i.ab),this.mercatorBoundsBuffer=l.createVertexBuffer(I,i.b3.members),this.mercatorBoundsSegments=i.b1.simpleSegment(0,0,4,2);const M=new i.aO;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const q=new i.a$;for(const ne of[0,1,3,2,0])q.emplaceBack(ne);this.debugIndexBuffer=l.createIndexBuffer(q),this.emptyTexture=new i.T(l,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA8),this.identityMat=i.a6.mat4.create();const X=this.context.gl;this.stencilClearMode=new gn({func:X.ALWAYS,mask:0},0,255,X.ZERO,X.ZERO,X.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,l.TRIANGLES,Dr.disabled,this.stencilClearMode,Wr.disabled,vn.disabled,Ta(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,d,x){if(!d||this.currentStencilSource===d.id||!l.isTileClipped()||!x||x.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let q=!1;for(const X of x)if(this._tileClippingMaskIDs[X.key]===void 0){q=!0;break}if(!q)return}this.currentStencilSource=d.id;const E=this.context,I=E.gl;this.nextStencilID+x.length>256&&this.clearStencil(),E.setColorMode(Wr.disabled),E.setDepthMode(Dr.disabled);const M=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const q of x){const X=d.getTile(q),ne=this._tileClippingMaskIDs[q.key]=this.nextStencilID++,{tileBoundsBuffer:se,tileBoundsIndexBuffer:ye,tileBoundsSegments:we}=this.getTileBoundsBuffers(X);M.draw(this,I.TRIANGLES,Dr.disabled,new gn({func:I.ALWAYS,mask:0},ne,255,I.KEEP,I.KEEP,I.REPLACE),Wr.disabled,vn.disabled,Ta(q.projMatrix),"$clipping",se,ye,we)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new gn({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const d=this.context.gl;return new gn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,x=l.sort((M,q)=>q.overscaledZ-M.overscaledZ),E=x[x.length-1].overscaledZ,I=x[0].overscaledZ-E+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const M={};for(let q=0;q<I;q++)M[q+E]=new gn({func:d.GEQUAL,mask:255},q+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=I,[M,x]}return[{[E]:gn.disabled},x]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Wr([l.CONSTANT_COLOR,l.ONE,l.CONSTANT_COLOR,l.ONE],new i.bz(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wr.unblended:Wr.alphaBlended}colorModeForDrapableLayerRenderPass(l){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Wr([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new i.bz(0,0,0,l===void 0?0:l),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(l,d,x,E=!1){if(this.depthOcclusion)return new Dr(this.context.gl.GREATER,Dr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!E)return Dr.disabled;const I=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Dr(x||this.context.gl.LEQUAL,d,[I,I])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const l=this.context.gl,d=Math.ceil(this.width),x=Math.ceil(this.height),E=this.context.bindFramebuffer.get(),I=l.getParameter(l.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===x||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&x!==0&&(this.depthFBO=new Qt(this.context,d,x,!1,"texture"),this.depthTexture=new i.T(this.context,{width:d,height:x,data:null},l.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(E),l.bindTexture(l.TEXTURE_2D,I),this.depthFBO&&(l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),l.blitFramebuffer(0,0,d,x,0,0,d,x,l.DEPTH_BUFFER_BIT,l.NEAREST),l.bindFramebuffer(l.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((l,d)=>l+d/this._fpsHistory.length,0))}render(l,d){const x=i.q.now();this._dt=x-this._timeStamp,this._timeStamp=x,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=l.map.repaint,this.style=l,this.options=d;const E=this.style._mergedLayers,I=this.style.order.filter(Rt=>{const Dt=E[Rt];return!(Dt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Dt.type]});let M=!1,q=!1;for(const Rt of I){const Dt=E[Rt];Dt.type==="circle"&&(M=!0),Dt.type==="symbol"&&(Dt.hasInitialOcclusionOpacityProperties?q=!0:M=!0)}const X=I.map(Rt=>E[Rt]),ne=this.style._mergedSourceCaches;this.imageManager=l.imageManager,this.modelManager=l.modelManager,this.symbolFadeChange=l.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let se=0,ye=!1;for(const Rt in ne){const Dt=ne[Rt];Dt.used&&(Dt.prepare(this.context),Dt.getSource().usedInConflation&&++se)}let we=!1;for(const Rt of X)Rt.isHidden(this.transform.zoom)||(Rt.type==="clip"&&(we=!0),this.prepareLayer(Rt));const Ee={},Ge={},$e={},Xe={},Ze={};for(const Rt in ne){const Dt=ne[Rt];Ee[Rt]=Dt.getVisibleCoordinates(),Ge[Rt]=Ee[Rt].slice().reverse(),$e[Rt]=Dt.getVisibleCoordinates(!0).reverse(),Xe[Rt]=Dt.getShadowCasterCoordinates(),Ze[Rt]=Dt.sortCoordinatesByDistance(Ee[Rt])}const ft=Rt=>{const Dt=this.style.getLayerSourceCache(Rt);return Dt&&Dt.used?Dt.getSource():null};if(se||we||this._clippingActiveLastFrame){const Rt=[],Dt=[];let sr=0;for(const Cr of X)this.isSourceForClippingOrConflation(Cr,ft(Cr))&&(Rt.push(Cr),Dt.push(sr)),sr++;if(Rt&&(we||Rt.length>1)||this._clippingActiveLastFrame){we=!1;const Cr=[];for(let Rr=0;Rr<Rt.length;Rr++){const wr=Rt[Rr],en=Dt[Rr],or=this.style.getLayerSourceCache(wr);if(!or||!or.used||!or.getSource().usedInConflation&&wr.type!=="clip")continue;let Lr=i.dn,Er=i.bs.None;const tn=[];let sn=!0;if(wr.type==="clip"){Lr=en;for(const kr of wr.layout.get("clip-layer-types"))Er|=kr==="model"?i.bs.Model:kr==="symbol"?i.bs.Symbol:i.bs.FillExtrusion;for(const kr of wr.layout.get("clip-layer-scope"))tn.push(kr);wr.isHidden(this.transform.zoom)?sn=!1:we=!0}sn&&Cr.push({layer:wr.fqid,cache:or,order:Lr,clipMask:Er,clipScope:tn})}this.replacementSource.setSources(Cr),ye=!0}}this._clippingActiveLastFrame=we,ye||this.replacementSource.clear(),this.conflationActive=ye,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Rt=0;Rt<X.length;Rt++){const Dt=X[Rt],sr=Dt.cutoffRange();if(this.longestCutoffRange=Math.max(sr,this.longestCutoffRange),sr>0){const Cr=ft(Dt);Cr&&(this.minCutoffZoom=Math.max(Cr.minzoom,this.minCutoffZoom)),Dt.minzoom&&(this.minCutoffZoom=Math.max(Dt.minzoom,this.minCutoffZoom))}Dt.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Rt),this._lastOcclusionLayer=Rt)}const gt=this.style&&this.style.fog;gt?(this._fogVisible=gt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=gt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding($e),this.opaquePassCutoff=0);const ut=this._shadowRenderer;if(ut){ut.updateShadowParameters(this.transform,this.style.directionalLight);for(const Rt in ne)for(const Dt of Ee[Rt]){let sr={min:0,max:0};this.terrain&&(sr=this.terrain.getMinMaxForTile(Dt)||sr),ut.addShadowReceiver(Dt.toUnwrapped(),sr.min,sr.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Cd(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!Ft.has(this.context.gl))return;this.renderPass="offscreen";for(const Rt of X){const Dt=l.getLayerSourceCache(Rt);if(!Rt.hasOffscreenPass()||Rt.isHidden(this.transform.zoom))continue;const sr=Dt?Ge[Dt.id]:void 0;(Rt.type==="custom"||Rt.type==="raster"||Rt.type==="raster-particle"||Rt.isSky()||sr&&sr.length)&&this.renderLayer(this,Dt,Rt,sr)}this.depthRangeFor3D=[0,1-(X.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Xe)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const bt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),_t=(()=>{if(d.showOverdrawInspector)return i.bz.black;const Rt=this.style.fog;if(Rt&&this.transform.projection.supportsFog){const Dt=this.style.getLut(Rt.scope);if(!bt){const sr=Rt.properties.get("color").toRenderColor(Dt).toArray01();return new i.bz(...sr)}if(bt){const sr=Rt.properties.get("space-color").toRenderColor(Dt).toArray01();return new i.bz(...sr)}}return i.bz.transparent})();if(this.context.clear({color:_t,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&bt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const Rt=X[this.currentLayer],Dt=l.getLayerSourceCache(Rt);if(Rt.isSky())continue;const sr=Dt?(Rt.is3D()?Ze:Ge)[Dt.id]:void 0;this._renderTileClippingMasks(Rt,Dt,sr),this.renderLayer(this,Dt,Rt,sr)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&bt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const Rt=X[this.currentLayer],Dt=l.getLayerSourceCache(Rt);Rt.isSky()&&this.renderLayer(this,Dt,Rt,Dt?Ge[Dt.id]:void 0)}function Mt(Rt,Dt){let sr;return Dt&&(sr=(Rt.type==="symbol"?$e:Rt.is3D()?Ze:Ge)[Dt.id]),sr}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<I.length;){const Rt=X[this.currentLayer];if(Rt.type==="raster"||Rt.type==="raster-particle"){const Dt=l.getLayerSourceCache(Rt);this.renderLayer(this,Dt,Rt,Mt(Rt,Dt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Tt=0;ut&&(Tt=ut.getShadowCastingLayerCount());let jt=!1,Vt=-1;for(let Rt=0;Rt<I.length;++Rt){const Dt=X[Rt];Dt.isHidden(this.transform.zoom)||Dt.is3D()&&(Vt=Rt)}for(q&&Vt===-1&&(M=!0);this.currentLayer<I.length;){const Rt=X[this.currentLayer],Dt=l.getLayerSourceCache(Rt);if(Rt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Rt)){if(Rt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(M&&!jt&&this.terrain&&!this.transform.isOrthographic&&(jt=!0,this.blitDepth()),q&&Vt!==-1&&this.currentLayer===Vt+1&&!this.transform.isOrthographic&&this.blitDepth(),Rt.is3D()||this.terrain||this._renderTileClippingMasks(Rt,Dt,Dt?Ee[Dt.id]:void 0),this.renderLayer(this,Dt,Rt,Mt(Rt,Dt)),!this.terrain&&ut&&Tt>0&&Rt.hasShadowPass()&&--Tt==0&&(ut.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const sr=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=sr;this.currentLayer++){const Cr=X[this.currentLayer];if(!Cr.hasLightBeamPass())continue;const Rr=l.getLayerSourceCache(Cr);this.renderLayer(this,Rr,Cr,Rr?Ge[Rr.id]:void 0)}this.currentLayer=sr,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const sr=this.currentLayer;this.depthOcclusion=!0;for(const Cr of this.layersWithOcclusionOpacity){this.currentLayer=Cr;const Rr=X[this.currentLayer],wr=l.getLayerSourceCache(Rr),en=wr?Ge[wr.id]:void 0;Rr.is3D()||this.terrain||this._renderTileClippingMasks(Rr,wr,wr?Ee[wr.id]:void 0),this.renderLayer(this,wr,Rr,en)}this.depthOcclusion=!1,this.currentLayer=sr,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Rt=null;X.forEach(Dt=>{const sr=l.getLayerSourceCache(Dt);sr&&!Dt.isHidden(this.transform.zoom)&&sr.getVisibleCoordinates().length&&(!Rt||Rt.getSource().maxzoom<sr.getSource().maxzoom)&&(Rt=sr)}),Rt&&this.options.showTileBoundaries&&Su.debug(this,Rt,Rt.getVisibleCoordinates(),i.bz.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Su.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.bz(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Rt){const Dt=Rt.transform.padding;Bs(Rt,Rt.transform.height-(Dt.top||0),3,Io),Bs(Rt,Dt.bottom||0,3,jo),ur(Rt,Dt.left||0,3,ca),ur(Rt,Rt.transform.width-(Dt.right||0),3,Pr);const sr=Rt.transform.centerPoint;(function(Cr,Rr,wr,en){Zi(Cr,Rr-1,wr-10,2,20,en),Zi(Cr,Rr-10,wr-1,20,2,en)})(Rt,sr.x,Rt.transform.height-sr.y,Ln)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),ye||(this.conflationActive=!1)}prepareLayer(l){this.gpuTimingStart(l);const{unsupportedLayers:d}=this.transform.projection,x=!d||!d.includes(l.type);if(Bu[l.type]&&(x||this.terrain&&l.type==="custom")){const E=this.style.getLayerSourceCache(l);Bu[l.type](l,E,this)}this.gpuTimingEnd()}renderLayer(l,d,x,E){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="sky"||x.type==="custom"||x.type==="model"||x.type==="raster"||x.type==="raster-particle"||E&&E.length)&&(this.id=x.id,this.gpuTimingStart(x),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(x.type)&&(!l.terrain||x.type!=="custom")||x.type==="clip"||Su[x.type](l,d,x,E,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,x=this.context.gl;let E=this.gpuTimers[l.id];E||(E=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:x.createQuery()}),E.calls++,x.beginQuery(d.TIME_ELAPSED_EXT,E.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,d=this.context.gl,x=d.createQuery();this.deferredRenderGpuTimeQueries.push(x),d.beginQuery(l.TIME_ELAPSED_EXT,x)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const d={};for(const x in l){const E=l[x],I=this.context.extTimerQuery,M=I.getQueryParameter(E.query,this.context.gl.QUERY_RESULT)/1e6;I.deleteQueryEXT(E.query),d[x]=M}return d}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery,x=this.context.gl;let E=0;for(const I of l)E+=d.getQueryParameter(I,x.QUERY_RESULT)/1e6,d.deleteQueryEXT(I);return E}translatePosMatrix(l,d,x,E,I){if(!x[0]&&!x[1])return l;const M=I?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(M){const ne=Math.sin(M),se=Math.cos(M);x=[x[0]*se-x[1]*ne,x[0]*ne+x[1]*se]}const q=[I?x[0]:i.ak(d,x[0],this.transform.zoom),I?x[1]:i.ak(d,x[1],this.transform.zoom),0],X=new Float32Array(16);return i.a6.mat4.translate(X,l,q),X}saveTileTexture(l){const d=l.size[0],x=this._tileTextures[d];x?x.push(l):this._tileTextures[d]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(l,d,x){const E=x===void 0?this.terrain&&this.terrain.renderingToTexture:x,I=[];return this.style&&this.style.enable3dLights()&&(l==="globeRaster"||l==="terrainRaster"?(I.push("LIGHTING_3D_MODE"),I.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):E||I.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||I.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?I.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):I.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(I.push("TERRAIN"),this.linearFloatFilteringSupported()&&I.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&I.push("GLOBE"),!this._fogVisible||E||d!==void 0&&!d||I.push("FOG","FOG_DITHERING"),E&&I.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&I.push("OVERDRAW_INSPECTOR"),I}getOrCreateProgram(l,d){this.cache=this.cache||{};const x=d&&d.defines||[],E=d&&d.config,I=this.currentGlobalDefines(l,d&&d.overrideFog,d&&d.overrideRtt).concat(x),M=Ei.cacheKey(hs[l],l,I,E);return this.cache[M]||(this.cache[M]=new Ei(this.context,l,hs[l],E,Lt[l],I)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(l,d){if(this.style.enable3dLights()){const x=this.style.directionalLight,E=this.style.ambientLight;if(x&&E){const I=((M,q,X)=>{const ne=M.properties.get("direction"),se=M.properties.get("color").toRenderColor(X.getLut(M.scope)).toArray01(),ye=M.properties.get("intensity"),we=q.properties.get("color").toRenderColor(X.getLut(q.scope)).toArray01(),Ee=q.properties.get("intensity"),Ge=[ne.x,ne.y,ne.z],$e=i.cH(we,Ee),Xe=i.cH(se,ye);return{u_lighting_ambient_color:$e,u_lighting_directional_dir:Ge,u_lighting_directional_color:Xe,u_ground_radiance:Kt(Ge,Xe,$e)}})(x,E,this.style);d.setLightsUniformValues(l,I)}}}uploadCommonUniforms(l,d,x,E,I){if(this.uploadCommonLightUniforms(l,d),this.terrain&&this.terrain.renderingToTexture)return;const M=this.style.fog;if(M){const q=M.getOpacity(this.transform.pitch),X=((ne,se,ye,we,Ee,Ge,$e,Xe,Ze,ft,gt,ut)=>{const bt=ne.transform,_t=se.properties.get("color").toRenderColor(ne.style.getLut(se.scope)).toArray01();_t[3]=we;const Mt=ne.frameCounter/1e3%1,[Tt,jt]=se.properties.get("vertical-range");return{u_fog_matrix:ye?bt.calculateFogTileMatrix(ye):ut||ne.identityMat,u_fog_range:se.getFovAdjustedRange(bt._fov),u_fog_color:_t,u_fog_horizon_blend:se.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Tt,jt),jt],u_fog_temporal_offset:Mt,u_frustum_tl:Ee,u_frustum_tr:Ge,u_frustum_br:$e,u_frustum_bl:Xe,u_globe_pos:Ze,u_globe_radius:ft,u_viewport:gt,u_globe_transition:i.a9(bt.zoom),u_is_globe:+(bt.projection.name==="globe")}})(this,M,x,q,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],E);d.setFogUniformValues(l,X)}I&&d.setCutoffUniformValues(l,I.uniformValues)}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,d=l.createTexture();return l.bindTexture(l.TEXTURE_2D,d),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,d=this._backgroundTiles={},x=this.transform.coveringTiles({tileSize:512});for(const E of x)d[E.key]=l[E.key]||new ae(E,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(l,d){return!(!l.is3D()||l.type!=="clip"&&(l.minzoom&&l.minzoom>this.transform.zoom||(this.style._clipLayerPresent||l.sourceLayer!=="building")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(l){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[l.key];return d||(this._cachedTileFogOpacities[l.key]=d=this.style.fog.getOpacityForTile(l)),d[0]>=nn||d[1]>=nn}setupDepthForOcclusion(l,d,x){const E=this.context,I=E.gl,M=!!x;var q;x||(x={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),E.activeTexture.set(I.TEXTURE3),l&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE),x.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],x.u_depth_range_unpack=[2/((q=this.depthRangeFor3D)[1]-q[0]),-1-2*q[0]/(q[1]-q[0])],x.u_occluder_half_size=.5*this.occlusionParams.occluderSize,x.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE),E.activeTexture.set(I.TEXTURE0),M||d.setTerrainUniformValues(E,x)}}function El(v,l){let d=!1,x=null;const E=()=>{x=null,d&&(v(),x=setTimeout(E,l),d=!1)};return()=>(d=!0,x||E(),x)}class Eu{constructor(l){this._hashName=l&&encodeURIComponent(l),i.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=El(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const d=lh(l);if(this._hashName){const x=this._hashName;let E=!1;const I=location.hash.slice(1).split("&").map(M=>{const q=M.split("=")[0];return q===x?(E=!0,`${q}=${d}`):M}).filter(M=>M);return E||I.push(`${x}=${d}`),`#${I.join("&")}`}return`#${d}`}_getCurrentHash(){const l=location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(d=x)}),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(x=>isNaN(x))){const x=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(d[3]||0):l.getBearing();return l.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:x,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function lh(v,l){const d=v.getCenter(),x=Math.round(100*v.getZoom())/100,E=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,E),M=Math.round(d.lng*I)/I,q=Math.round(d.lat*I)/I,X=v.getBearing(),ne=v.getPitch();let se=l?`/${M}/${q}/${x}`:`${x}/${q}/${M}`;return(X||ne)&&(se+="/"+Math.round(10*X)/10),ne&&(se+=`/${Math.round(ne)}`),se}const Uc={linearity:.3,easing:i.dp(0,0,.3,1)},Ed=i.l({deceleration:2500,maxSpeed:1400},Uc),td=i.l({deceleration:20,maxSpeed:1400},Uc),Tl=i.l({deceleration:1e3,maxSpeed:360},Uc),uf=i.l({deceleration:1e3,maxSpeed:90},Uc);class Tu{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=i.q.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)d.zoom+=I.zoomDelta||0,d.bearing+=I.bearingDelta||0,d.pitch+=I.pitchDelta||0,I.panDelta&&d.pan._add(I.panDelta),I.around&&(d.around=I.around),I.pinchAround&&(d.pinchAround=I.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(d.pan.mag()){const I=ch(d.pan.mag(),x,i.l({},Ed,l||{}));E.offset=d.pan.mult(I.amount/d.pan.mag()),E.center=this._map.transform.center,Td(E,I)}if(d.zoom){const I=ch(d.zoom,x,td);E.zoom=this._map.transform.zoom+I.amount,Td(E,I)}if(d.bearing){const I=ch(d.bearing,x,Tl);E.bearing=this._map.transform.bearing+i.ap(I.amount,-179,179),Td(E,I)}if(d.pitch){const I=ch(d.pitch,x,uf);E.pitch=this._map.transform.pitch+I.amount,Td(E,I)}if(E.zoom||E.bearing){const I=d.pinchAround===void 0?d.around:d.pinchAround;E.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),E.noMoveStart=!0,E}}function Td(v,l){(!v.duration||v.duration<l.duration)&&(v.duration=l.duration,v.easing=l.easing)}function ch(v,l,d){const{maxSpeed:x,linearity:E,deceleration:I}=d,M=i.ap(v*E/(l/1e3),-x,x),q=Math.abs(M)/(I*E);return{easing:d.easing,duration:1e3*q,amount:M*(q/2)}}class na extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,x,E={}){const I=ce(d.getCanvasContainer(),x),M=d.unproject(I);super(l,i.l({point:I,lngLat:M,originalEvent:x},E)),this._defaultPrevented=!1,this.target=d}}class Id extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,x){const E=l==="touchend"?x.changedTouches:x.touches,I=me(d.getCanvasContainer(),E),M=I.map(X=>d.unproject(X)),q=I.reduce((X,ne,se,ye)=>X.add(ne.div(ye.length)),new i.P(0,0));super(l,{points:I,point:q,lngLats:M,lngLat:d.unproject(q),originalEvent:x}),this._defaultPrevented=!1}}class Ka extends i.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class jp{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new Ka(this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new na(l.type,this._map,l))}mouseup(l){this._map.fire(new na(l.type,this._map,l))}preclick(l){const d=i.l({},l);d.type="preclick",this._map.fire(new na(d.type,this._map,d))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(l),this._map.fire(new na(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new na(l.type,this._map,l))}mouseover(l){this._map.fire(new na(l.type,this._map,l))}mouseout(l){this._map.fire(new na(l.type,this._map,l))}touchstart(l){return this._firePreventable(new Id(l.type,this._map,l))}touchmove(l){this._map.fire(new Id(l.type,this._map,l))}touchend(l){this._map.fire(new Id(l.type,this._map,l))}touchcancel(l){this._map.fire(new Id(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hf{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new na(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new na("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new na(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ld{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(te(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const x=d,E=this._startPos,I=this._lastPos;if(!E||!I||I.equals(x)||!this._box&&x.dist(E)<this._clickTolerance)return;this._lastPos=x,this._box||(this._box=R("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const M=Math.min(E.x,x.x),q=Math.max(E.x,x.x),X=Math.min(E.y,x.y),ne=Math.max(E.y,x.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${X}px)`,this._box.style.width=q-M+"px",this._box.style.height=ne-X+"px")})}mouseupWindow(l,d){if(!this._active)return;const x=this._startPos,E=d;if(x&&l.button===0){if(this.reset(),K(),x.x!==E.x||x.y!==E.y)return this._map.fire(new i.x("boxzoomend",{originalEvent:l})),{cameraAnimation:I=>I.fitScreenCoordinates(x,E,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ue(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new i.x(l,{originalEvent:d}))}}function Il(v,l){const d={};for(let x=0;x<v.length;x++)d[v[x].identifier]=l[x];return d}class rd{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,d,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),x.length===this.numTouches&&(this.centroid=function(E){const I=new i.P(0,0);for(const M of E)I._add(M);return I.div(E.length)}(d),this.touches=Il(x,d)))}touchmove(l,d,x){if(this.aborted||!this.centroid)return;const E=Il(x,d);for(const I in this.touches){const M=E[I];(!M||M.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(l,d,x){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class au{constructor(l){this.singleTap=new rd(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,d,x){this.singleTap.touchstart(l,d,x)}touchmove(l,d,x){this.singleTap.touchmove(l,d,x)}touchend(l,d,x){const E=this.singleTap.touchend(l,d,x);if(E){const I=l.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(E)<30;if(I&&M||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class al{constructor(){this._zoomIn=new au({numTouches:1,numTaps:2}),this._zoomOut=new au({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,x){this._zoomIn.touchstart(l,d,x),this._zoomOut.touchstart(l,d,x)}touchmove(l,d,x){this._zoomIn.touchmove(l,d,x),this._zoomOut.touchmove(l,d,x)}touchend(l,d,x){const E=this._zoomIn.touchend(l,d,x),I=this._zoomOut.touchend(l,d,x);return E?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(E)},{originalEvent:l})}):I?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(I)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ll={0:1,2:2};class cl{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const x=Z(l);this._correctButton(l,x)&&(this._lastPoint=d,this._eventButton=x)}mousemoveWindow(l,d){const x=this._lastPoint;if(x){if(l.preventDefault(),this._eventButton!=null&&function(E,I){const M=ll[I];return E.buttons===void 0||(E.buttons&M)!==M}(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(x,d)}}mouseupWindow(l){this._lastPoint&&Z(l)===this._eventButton&&(this._moved&&K(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Iu extends cl{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return d===0&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class Eh extends cl{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const x=.8*(d.x-l.x);if(x)return this._active=!0,{bearingDelta:x}}contextmenu(l){l.preventDefault()}}class Fd extends cl{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const x=-.5*(d.y-l.y);if(x)return this._active=!0,{pitchDelta:x}}contextmenu(l){l.preventDefault()}}class SA{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),i.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(l,d,x){return this._calculateTransform(l,d,x)}touchmove(l,d,x){if(this._active&&!(x.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(x.length===1&&!i.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,d,x)}}touchend(l,d,x){this._calculateTransform(l,d,x),this._active&&x.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,x){x.length>0&&(this._active=!0);const E=Il(x,d),I=new i.P(0,0),M=new i.P(0,0);let q=0;for(const ne in E){const se=E[ne],ye=this._touches[ne];ye&&(I._add(se),M._add(se.sub(ye)),q++,E[ne]=se)}if(this._touches=E,q<this._minTouches||!M.mag())return;const X=M.div(q);return this._sum._add(X),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(q),panDelta:X}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Th{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,d,x){return{}}touchstart(l,d,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,x){const E=this._firstTwoTouches;if(!E)return;l.preventDefault();const[I,M]=E,q=uh(x,d,I),X=uh(x,d,M);if(!q||!X)return;const ne=this._aroundCenter?null:q.add(X).div(2);return this._move([q,X],ne,l)}touchend(l,d,x){if(!this._firstTwoTouches)return;const[E,I]=this._firstTwoTouches,M=uh(x,d,E),q=uh(x,d,I);M&&q||(this._active&&K(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function uh(v,l,d){for(let x=0;x<v.length;x++)if(v[x].identifier===d)return l[x]}function R1(v,l){return Math.log(v/l)/Math.LN2}class bb extends Th{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const x=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(R1(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:R1(this._distance,x),pinchAround:d}}}function U1(v,l){return 180*v.angleWith(l)/Math.PI}class wb extends Th{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const x=this._vector;if(this._vector=l[0].sub(l[1]),x&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:U1(this._vector,x),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,x=this._startVector;if(!x)return!1;const E=U1(l,x);return Math.abs(E)<d}}function M0(v){return Math.abs(v.y)>Math.abs(v.x)}class Cb extends Th{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,M0(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,x){const E=this._lastPoints;if(!E)return;const I=l[0].sub(E[0]),M=l[1].sub(E[1]);return this._map._cooperativeGestures&&!i.dq()&&x.touches.length<3||(this._valid=this.gestureBeginsVertically(I,M,x.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(I.y+M.y)/2*-.5})}gestureBeginsVertically(l,d,x){if(this._valid!==void 0)return this._valid;const E=l.mag()>=2,I=d.mag()>=2;if(!E&&!I)return;if(!E||!I)return this._firstMove==null&&(this._firstMove=x),x-this._firstMove<100&&void 0;const M=l.y>0==d.y>0;return M0(l)&&M0(d)&&M}}const Sb={panStep:100,bearingStep:15,pitchStep:10};class Bb{constructor(){const l=Sb;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,x=0,E=0,I=0,M=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?x=-1:(l.preventDefault(),I=-1);break;case 39:l.shiftKey?x=1:(l.preventDefault(),I=1);break;case 38:l.shiftKey?E=1:(l.preventDefault(),M=-1);break;case 40:l.shiftKey?E=-1:(l.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(x=0,E=0),{cameraAnimation:q=>{const X=q.getZoom();q.easeTo({duration:300,easeId:"keyboardHandler",easing:Eb,zoom:d?Math.round(X)+d*(l.shiftKey?2:1):X,bearing:q.getBearing()+x*this._bearingStep,pitch:q.getPitch()+E*this._pitchStep,offset:[-I*this._panStep,-M*this._panStep],center:q.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Eb(v){return v*(2-v)}const z1=4.000244140625,pS=1/450;class AS{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=pS,i.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||i.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const x=i.q.now(),E=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,d!==0&&d%z1==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(E*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=ce(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const ne=this._type==="wheel"&&Math.abs(this._delta)>z1?this._wheelZoomRate:this._defaultZoomRate;let se=2/(1+Math.exp(-Math.abs(this._delta*ne)));this._delta<0&&se!==0&&(se=1/se);const ye=d(),we=Math.pow(2,ye),Ee=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):we;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(Ee*se))),this._type==="wheel"&&(this._startZoom=ye,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const x=typeof this._targetZoom=="number"?this._targetZoom:d(),E=this._startZoom,I=this._easing;let M,q=!1;if(this._type==="wheel"&&E&&I){const ne=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),se=I(ne);M=i.aa(E,x,se),ne<1?this._frameId||(this._frameId=!0):q=!0}else M=x,q=!0;this._active=!0,q&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let X=M-d();return X*this._lastDelta<0&&(X=0),{noInertia:!0,needsRenderFrame:!q,zoomDelta:X,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=i.dr;if(this._prevEase){const x=this._prevEase,E=(i.q.now()-x.start)/x.duration,I=x.easing(E+.01)-x.easing(E),M=.27/Math.sqrt(I*I+1e-4)*.01,q=Math.sqrt(.0729-M*M);d=i.dp(M,q,.25,1)}return this._prevEase={start:i.q.now(),duration:l,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=R("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Ia{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Tb{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,d){return l.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:x.getZoom()+(l.shiftKey?-1:1),around:x.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mS{constructor(){this._tap=new au({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,d,x){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=d[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(l,d,x))}touchmove(l,d,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const E=d[0],I=E.y-this._swipePoint.y;return this._swipePoint=E,l.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(l,d,x)}touchend(l,d,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(l,d,x)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gS{constructor(l,d,x){this._el=l,this._mousePan=d,this._touchPan=x}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class cg{constructor(l,d,x){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ib{constructor(l,d,x,E){this._el=l,this._touchZoom=d,this._touchRotate=x,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const BA=v=>v.zoom||v.drag||v.pitch||v.rotate;class j0 extends i.x{}class df{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,d){const x=i.a6.vec3.sub([],d,l);this.radius=i.a6.vec3.length(x[2]<0?i.a6.vec3.div([],x,this.constants):[x[0],x[1],0])}projectRay(l){i.a6.vec3.div(l,l,this.constants),i.a6.vec3.normalize(l,l),i.a6.vec3.mul(l,l,this.constants);const d=i.a6.vec3.scale([],l,this.radius);if(d[2]>0){const x=i.a6.vec3.scale([],[0,0,1],i.a6.vec3.dot(d,[0,0,1])),E=i.a6.vec3.scale([],i.a6.vec3.normalize([],[d[0],d[1],0]),this.radius),I=i.a6.vec3.add([],d,i.a6.vec3.scale([],i.a6.vec3.sub([],i.a6.vec3.add([],E,x),d),2));d[0]=I[0],d[1]=I[1]}return d}}function kp(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Yc{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Tu(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new df,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),i.aJ(["handleEvent","handleWindowEvent"],this);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[E,I,M]of this._listeners){const q=E===document?this.handleWindowEvent:this.handleEvent;E.addEventListener(I,q,M)}}destroy(){for(const[l,d,x]of this._listeners){const E=l===document?this.handleWindowEvent:this.handleEvent;l.removeEventListener(d,E,x)}}_addDefaultHandlers(l){const d=this._map,x=d.getCanvasContainer();this._add("mapEvent",new jp(d,l));const E=d.boxZoom=new Ld(d,l);this._add("boxZoom",E);const I=new al,M=new Tb;d.doubleClickZoom=new Ia(M,I),this._add("tapZoom",I),this._add("clickZoom",M);const q=new mS;this._add("tapDragZoom",q);const X=d.touchPitch=new Cb(d);this._add("touchPitch",X);const ne=new Eh(l),se=new Fd(l);d.dragRotate=new cg(l,ne,se),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]);const ye=new Iu(l),we=new SA(d,l);d.dragPan=new gS(x,ye,we),this._add("mousePan",ye),this._add("touchPan",we,["touchZoom","touchRotate"]);const Ee=new wb,Ge=new bb;d.touchZoomRotate=new Ib(x,Ge,Ee,q),this._add("touchRotate",Ee,["touchPan","touchZoom"]),this._add("touchZoom",Ge,["touchPan","touchRotate"]),this._add("blockableMapEvent",new hf(d));const $e=d.scrollZoom=new AS(d,this);this._add("scrollZoom",$e,["mousePan"]);const Xe=d.keyboard=new Bb;this._add("keyboard",Xe);for(const Ze of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Ze]&&d[Ze].enable(l[Ze])}_add(l,d,x){this._handlers.push({handlerName:l,handler:d,allowed:x}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!BA(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,d,x){for(const E in l)if(E!==x&&(!d||d.indexOf(E)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const x of l)this._el.contains(x.target)&&d.push(x);return d}handleEvent(l,d){this._updatingCamera=!0;const x=l.type==="renderFrame",E=x?void 0:l,I={needsRenderFrame:!1},M={},q={},X=l.touches?this._getMapTouches(l.touches):void 0,ne=X?me(this._el,X):x?void 0:ce(this._el,l);for(const{handlerName:we,handler:Ee,allowed:Ge}of this._handlers){if(!Ee.isEnabled())continue;let $e;this._blockedByActive(q,Ge,we)?Ee.reset():Ee[d||l.type]&&($e=Ee[d||l.type](l,ne,X),this.mergeHandlerResult(I,M,$e,we,E),$e&&$e.needsRenderFrame&&this._triggerRenderFrame()),($e||Ee.isActive())&&(q[we]=Ee)}const se={};for(const we in this._previousActiveHandlers)q[we]||(se[we]=E);this._previousActiveHandlers=q,(Object.keys(se).length||kp(I))&&(this._changes.push([I,M,se]),this._triggerRenderFrame()),(Object.keys(q).length||kp(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ye}=I;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))}mergeHandlerResult(l,d,x,E,I){if(!x)return;i.l(l,x);const M={handlerName:E,originalEvent:x.originalEvent||I};x.zoomDelta!==void 0&&(d.zoom=M),x.panDelta!==void 0&&(d.drag=M),x.pitchDelta!==void 0&&(d.pitch=M),x.bearingDelta!==void 0&&(d.rotate=M)}_applyChanges(){const l={},d={},x={};for(const[E,I,M]of this._changes)E.panDelta&&(l.panDelta=(l.panDelta||new i.P(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(l.around=E.around),E.aroundCoord!==void 0&&(l.aroundCoord=E.aroundCoord),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),i.l(d,I),i.l(x,M);this._updateMapTransform(l,d,x),this._changes=[]}_updateMapTransform(l,d,x){const E=this._map,I=E.transform,M=ft=>[ft.x,ft.y,ft.z];if((ft=>{const gt=this._eventsInProgress.drag;return gt&&!this._handlersById[gt.handlerName].isActive()})()&&!kp(l)){const ft=I.zoom;I.cameraElevationReference="sea",this._originalZoom!=null&&I._orthographicProjectionAtLowPitch&&I.projection.name!=="globe"&&I.pitch===0?(I.cameraElevationReference="ground",I.zoom=this._originalZoom):(I.recenterOnTerrain(),I.cameraElevationReference="ground"),ft!==I.zoom&&this._map._update(!0)}if(I._isCameraConstrained&&E._stop(!0),!kp(l))return void this._fireEvents(d,x,!0);let{panDelta:q,zoomDelta:X,bearingDelta:ne,pitchDelta:se,around:ye,aroundCoord:we,pinchAround:Ee}=l;I._isCameraConstrained&&(X>0&&(X=0),I._isCameraConstrained=!1),Ee!==void 0&&(ye=Ee),(X||(ft=>d[ft]&&!this._eventsInProgress[ft])("drag"))&&ye&&(this._dragOrigin=M(I.pointCoordinate3D(ye)),this._originalZoom=I.zoom,this._trackingEllipsoid.setup(I._camera.position,this._dragOrigin)),I.cameraElevationReference="sea",E._stop(!0),ye=ye||E.transform.centerPoint,ne&&(I.bearing+=ne),se&&(I.pitch+=se),I._updateCameraState();const Ge=[0,0,0];if(q)if(I.projection.name==="mercator"){const ft=this._trackingEllipsoid.projectRay(I.screenPointToMercatorRay(ye).dir),gt=this._trackingEllipsoid.projectRay(I.screenPointToMercatorRay(ye.sub(q)).dir);Ge[0]=gt[0]-ft[0],Ge[1]=gt[1]-ft[1]}else{const ft=I.pointCoordinate(ye);if(I.projection.name==="globe"){q=q.rotate(-I.angle);const gt=I._pixelsPerMercatorPixel/I.worldSize;Ge[0]=-q.x*i.ds(i.aM(ft.y))*gt,Ge[1]=-q.y*i.ds(I.center.lat)*gt}else{const gt=I.pointCoordinate(ye.sub(q));ft&&gt&&(Ge[0]=gt.x-ft.x,Ge[1]=gt.y-ft.y)}}const $e=I.zoom,Xe=[0,0,0];if(X){const ft=M(we||I.pointCoordinate3D(ye)),gt={dir:i.a6.vec3.normalize([],i.a6.vec3.sub([],ft,I._camera.position))};if(gt.dir[2]<0){const ut=I.zoomDeltaToMovement(ft,X);i.a6.vec3.scale(Xe,gt.dir,ut)}}const Ze=i.a6.vec3.add(Ge,Ge,Xe);I._translateCameraConstrained(Ze),X&&Math.abs(I.zoom-$e)>1e-4&&I.recenterOnTerrain(),I.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,x,!0)}_fireEvents(l,d,x){const E=BA(this._eventsInProgress),I=BA(l),M={};for(const se in l){const{originalEvent:ye}=l[se];this._eventsInProgress[se]||(M[`${se}start`]=ye),this._eventsInProgress[se]=l[se]}!E&&I&&this._fireEvent("movestart",I.originalEvent);for(const se in M)this._fireEvent(se,M[se]);I&&this._fireEvent("move",I.originalEvent);for(const se in l){const{originalEvent:ye}=l[se];this._fireEvent(se,ye)}const q={};let X;for(const se in this._eventsInProgress){const{handlerName:ye,originalEvent:we}=this._eventsInProgress[se];this._handlersById[ye].isActive()||(delete this._eventsInProgress[se],X=d[ye]||we,q[`${se}end`]=X)}for(const se in q)this._fireEvent(se,q[se]);const ne=BA(this._eventsInProgress);if(x&&(E||I)&&!ne){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ye=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;se?(ye(se.bearing||this._map.getBearing())&&(se.bearing=0),this._map.easeTo(se,{originalEvent:X})):(this._map.fire(new i.x("moveend",{originalEvent:X})),ye(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new i.x(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new j0("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Nd="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Q1 extends i.E{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,i.aJ(["_renderFrameCallback"],this)}getCenter(){return new i.bK(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,x){return l=i.P.convert(l).mult(-1),this.panTo(this.transform.center,i.l({offset:l},d),x)}panTo(l,d,x){return this.easeTo(i.l({center:l},d),x)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,x){return this.easeTo(i.l({zoom:l},d),x)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,x){return this.easeTo(i.l({bearing:l},d),x)}resetNorth(l,d){return this.rotateTo(0,i.l({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=i.as.convert(l);const x=d&&d.bearing||0,E=d&&d.pitch||0,I=l.getNorthWest(),M=l.getSouthEast();return this._cameraForBounds(this.transform,I,M,x,E,d)}_extendPadding(l){const d={top:0,right:0,bottom:0,left:0};return l==null?i.l({},d,this.transform.padding):typeof l=="number"?{top:l,bottom:l,right:l,left:l}:i.l({},d,l)}_extendCameraOptions(l){return(l=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=this._extendPadding(l.padding),l}_minimumAABBFrustumDistance(l,d){const x=d.max[0]-d.min[0],E=d.max[1]-d.min[1];return x/E>l.aspect?x/(2*Math.tan(.5*l.fovX)*l.aspect):E/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,d,x,E,I,M){const q=l.clone(),X=this._extendCameraOptions(M);q.bearing=E,q.pitch=I;const ne=i.bK.convert(d),se=i.bK.convert(x),ye=.5*(ne.lat+se.lat),we=.5*(ne.lng+se.lng),Ee=i.dt(ye,we),Ge=i.a6.vec3.normalize([],Ee),$e=i.a6.vec3.normalize([],i.a6.vec3.cross([],Ge,[0,1,0])),Xe=i.a6.vec3.cross([],$e,Ge),Ze=[$e[0],$e[1],$e[2],0,Xe[0],Xe[1],Xe[2],0,Ge[0],Ge[1],Ge[2],0,0,0,0,1],ft=[Ee,i.dt(ne.lat,ne.lng),i.dt(se.lat,ne.lng),i.dt(se.lat,se.lng),i.dt(ne.lat,se.lng),i.dt(ye,ne.lng),i.dt(ye,se.lng),i.dt(ne.lat,we),i.dt(se.lat,we)];let gt=i.c9.fromPoints(ft.map(Er=>[i.a6.vec3.dot($e,Er),i.a6.vec3.dot(Xe,Er),i.a6.vec3.dot(Ge,Er)]));const ut=i.a6.vec3.transformMat4([],gt.center,Ze);i.a6.vec3.squaredLength(ut)===0&&i.a6.vec3.set(ut,0,0,1),i.a6.vec3.normalize(ut,ut),i.a6.vec3.scale(ut,ut,i.aq),q.center=i.du(ut);const bt=q.getWorldToCameraMatrix(),_t=i.a6.mat4.invert(new Float64Array(16),bt);gt=i.c9.applyTransform(gt,i.a6.mat4.multiply([],bt,Ze));const Mt=this._extendAABB(gt,q,X,E);if(!Mt)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");gt=Mt,i.a6.vec3.transformMat4(ut,ut,bt);const Tt=.5*(gt.max[2]-gt.min[2]),jt=this._minimumAABBFrustumDistance(q,gt),Vt=i.a6.vec3.scale([],[0,0,1],Tt),Rt=i.a6.vec3.add(Vt,ut,Vt),Dt=jt+(q.pitch===0?0:i.a6.vec3.distance(ut,Rt)),sr=q.globeCenterInViewSpace,Cr=i.a6.vec3.sub([],ut,[sr[0],sr[1],sr[2]]);i.a6.vec3.normalize(Cr,Cr),i.a6.vec3.scale(Cr,Cr,Dt);const Rr=i.a6.vec3.add([],ut,Cr);i.a6.vec3.transformMat4(Rr,Rr,_t);const wr=i.dw/i.aq,en=i.a6.vec3.length(Rr),or=i.bD(Math.max(en*wr-i.dw,Number.EPSILON),0),Lr=Math.min(q.zoomFromMercatorZAdjusted(or),X.maxZoom);return Lr>.5*(i.c2+i.bU)?(q.setProjection({name:"mercator"}),q.zoom=Lr,this._cameraForBounds(q,d,x,E,I,M)):{center:q.center,zoom:Lr,bearing:E,pitch:I}}_extendAABB(l,d,x,E){const I=.5*((x.padding.left||0)+(x.padding.right||0)),M=.5*((x.padding.top||0)+(x.padding.bottom||0)),q=M,X=I,ne=I,se=M,ye=d.width-(X+ne),we=d.height-(q+se),Ee=i.a6.vec3.sub([],l.max,l.min),Ge=Math.min(ye/Ee[0],we/Ee[1]),$e=Math.min(d.scaleZoom(d.scale*Ge),x.maxZoom);if(isNaN($e))return null;const Xe=d.scale/d.zoomScale($e),Ze=new i.c9([l.min[0]-X*Xe,l.min[1]-se*Xe,l.min[2]],[l.max[0]+ne*Xe,l.max[1]+q*Xe,l.max[2]]),ft=(typeof x.offset.x=="number"&&typeof x.offset.y=="number"?new i.P(x.offset.x,x.offset.y):i.P.convert(x.offset)).rotate(-i.bB(E));return Ze.center[0]-=ft.x*Xe,Ze.center[1]+=ft.y*Xe,Ze}queryTerrainElevation(l,d){const x=this.transform.elevation;return x?(d=i.l({},{exaggerated:!0},d),x.getAtPoint(i.a5.fromLngLat(l),null,d.exaggerated)):null}_cameraForBounds(l,d,x,E,I,M){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,d,x,E,I,M);const q=l.clone(),X=this._extendCameraOptions(M);q.bearing=E,q.pitch=I;const ne=i.bK.convert(d),se=i.bK.convert(x),ye=new i.bK(ne.lng,se.lat),we=new i.bK(se.lng,ne.lat),Ee=q.project(ne),Ge=q.project(se),$e=this.queryTerrainElevation(ne),Xe=this.queryTerrainElevation(se),Ze=this.queryTerrainElevation(ye),ft=this.queryTerrainElevation(we),gt=[[Ee.x,Ee.y,Math.min($e||0,Xe||0,Ze||0,ft||0)],[Ge.x,Ge.y,Math.max($e||0,Xe||0,Ze||0,ft||0)]];let ut=i.c9.fromPoints(gt);const bt=q.getWorldToCameraMatrix(),_t=i.a6.mat4.invert(new Float64Array(16),bt);ut=i.c9.applyTransform(ut,bt);const Mt=this._extendAABB(ut,q,X,E);if(!Mt)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ut=Mt;const Tt=.5*i.a6.vec3.sub([],ut.max,ut.min)[2],jt=this._minimumAABBFrustumDistance(q,ut),Vt=[0,0,1,0];i.a6.vec4.transformMat4(Vt,Vt,bt),i.a6.vec4.normalize(Vt,Vt);const Rt=i.a6.vec3.scale([],Vt,jt+Tt),Dt=i.a6.vec3.add([],ut.center,Rt);i.a6.vec3.transformMat4(ut.center,ut.center,_t),i.a6.vec3.transformMat4(Dt,Dt,_t);const sr=q.unproject(new i.P(ut.center[0],ut.center[1])),Cr=i.dv(q.projection,sr),Rr=Math.pow(2,Cr),wr=Math.min(q._zoomFromMercatorZ(Dt[2]*q.pixelsPerMeter*Rr/q.worldSize),X.maxZoom);return q.mercatorFromTransition&&wr<.5*(i.c2+i.bU)?(q.setProjection({name:"globe"}),q.zoom=wr,this._cameraForBounds(q,d,x,E,I,M)):{center:sr,zoom:wr,bearing:E,pitch:I}}fitBounds(l,d,x){const E=this.cameraForBounds(l,d);return this._fitInternal(E,d,x)}fitScreenCoordinates(l,d,x,E,I){const M=i.P.convert(l),q=i.P.convert(d),X=new i.P(Math.min(M.x,q.x),Math.min(M.y,q.y)),ne=new i.P(Math.max(M.x,q.x),Math.max(M.y,q.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,q))return this;const se=this.transform.pointLocation3D(X),ye=this.transform.pointLocation3D(ne),we=this.transform.pointLocation3D(new i.P(X.x,ne.y)),Ee=this.transform.pointLocation3D(new i.P(ne.x,X.y)),Ge=[Math.min(se.lng,ye.lng,we.lng,Ee.lng),Math.min(se.lat,ye.lat,we.lat,Ee.lat)],$e=[Math.max(se.lng,ye.lng,we.lng,Ee.lng),Math.max(se.lat,ye.lat,we.lat,Ee.lat)],Xe=E&&E.pitch?E.pitch:this.getPitch(),Ze=this._cameraForBounds(this.transform,Ge,$e,x,Xe,E);return this._fitInternal(Ze,E,I)}_fitInternal(l,d,x){return l?(d=i.l(l,d)).linear?this.easeTo(d,x):this.flyTo(d,x):this}jumpTo(l,d){this.stop();const x=l.preloadOnly?this.transform.clone():this.transform;let E=!1,I=!1,M=!1;"zoom"in l&&x.zoom!==+l.zoom&&(E=!0,x.zoom=+l.zoom),l.center!==void 0&&(x.center=i.bK.convert(l.center)),"bearing"in l&&x.bearing!==+l.bearing&&(I=!0,x.bearing=+l.bearing),"pitch"in l&&x.pitch!==+l.pitch&&(M=!0,x.pitch=+l.pitch);const q=typeof l.padding=="number"?this._extendPadding(l.padding):l.padding;if(l.padding!=null&&!x.isPaddingEqual(q))if(l.retainPadding===!1){const X=x.clone();X.padding=q,x.setLocationAtPoint(x.center,X.centerPoint)}else x.padding=q;return l.preloadOnly?(this._preloadTiles(x),this):(this.fire(new i.x("movestart",d)).fire(new i.x("move",d)),E&&this.fire(new i.x("zoomstart",d)).fire(new i.x("zoom",d)).fire(new i.x("zoomend",d)),I&&this.fire(new i.x("rotatestart",d)).fire(new i.x("rotate",d)).fire(new i.x("rotateend",d)),M&&this.fire(new i.x("pitchstart",d)).fire(new i.x("pitch",d)).fire(new i.x("pitchend",d)),this.fire(new i.x("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(Nd),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,d){const x=this.transform;if(!x.projection.supportsFreeCamera)return i.w(Nd),this;this.stop();const E=x.zoom,I=x.pitch,M=x.bearing;x.setFreeCameraOptions(l);const q=E!==x.zoom,X=I!==x.pitch,ne=M!==x.bearing;return this.fire(new i.x("movestart",d)).fire(new i.x("move",d)),q&&this.fire(new i.x("zoomstart",d)).fire(new i.x("zoom",d)).fire(new i.x("zoomend",d)),ne&&this.fire(new i.x("rotatestart",d)).fire(new i.x("rotate",d)).fire(new i.x("rotateend",d)),X&&this.fire(new i.x("pitchstart",d)).fire(new i.x("pitch",d)).fire(new i.x("pitchend",d)),this.fire(new i.x("moveend",d)),this}easeTo(l,d){this._stop(!1,l.easeId),((l=i.l({offset:[0,0],duration:500,easing:i.dr},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const x=this.transform,E=this.getZoom(),I=this.getBearing(),M=this.getPitch(),q=this.getPadding(),X="zoom"in l?+l.zoom:E,ne="bearing"in l?this._normalizeBearing(l.bearing,I):I,se="pitch"in l?+l.pitch:M,ye=this._extendPadding(l.padding),we=i.P.convert(l.offset);let Ee,Ge,$e;if(x.projection.name==="globe"){const Vt=i.a5.fromLngLat(x.center),Rt=we.rotate(-x.angle);Vt.x+=Rt.x/x.worldSize,Vt.y+=Rt.y/x.worldSize;const Dt=Vt.toLngLat(),sr=i.bK.convert(l.center||Dt);this._normalizeCenter(sr),Ee=x.centerPoint.add(Rt),Ge=new i.P(Vt.x,Vt.y).mult(x.worldSize),$e=new i.P(i.am(sr.lng),i.at(sr.lat)).mult(x.worldSize).sub(Ge)}else{Ee=x.centerPoint.add(we);const Vt=x.pointLocation(Ee),Rt=i.bK.convert(l.center||Vt);this._normalizeCenter(Rt),Ge=x.project(Vt),$e=x.project(Rt).sub(Ge)}const Xe=x.zoomScale(X-E);let Ze,ft;l.around&&(Ze=i.bK.convert(l.around),ft=x.locationPoint(Ze));const gt=this._zooming||X!==E,ut=this._rotating||I!==ne,bt=this._pitching||se!==M,_t=!x.isPaddingEqual(ye),Mt=l.retainPadding===!1?x.clone():x,Tt=Vt=>Rt=>{if(gt&&(Vt.zoom=i.aa(E,X,Rt)),ut&&(Vt.bearing=i.aa(I,ne,Rt)),bt&&(Vt.pitch=i.aa(M,se,Rt)),_t&&(Mt.interpolatePadding(q,ye,Rt),Ee=Mt.centerPoint.add(we)),Ze)Vt.setLocationAtPoint(Ze,ft);else{const Dt=Vt.zoomScale(Vt.zoom-E),sr=X>E?Math.min(2,Xe):Math.max(.5,Xe),Cr=Math.pow(sr,1-Rt),Rr=Vt.unproject(Ge.add($e.mult(Rt*Cr)).mult(Dt));Vt.setLocationAtPoint(Vt.renderWorldCopies?Rr.wrap():Rr,Ee)}return l.preloadOnly||this._fireMoveEvents(d),Vt};if(l.preloadOnly){const Vt=this._emulate(Tt,l.duration,x);return this._preloadTiles(Vt),this}const jt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=gt,this._rotating=ut,this._pitching=bt,this._padding=_t,this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,jt),this._ease(Tt(x),Vt=>{x.cameraElevationReference==="sea"&&x.recenterOnTerrain(),this._afterEase(d,Vt)},l),this}_prepareEase(l,d,x={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||x.moving||this.fire(new i.x("movestart",l)),this._zooming&&!x.zooming&&this.fire(new i.x("zoomstart",l)),this._rotating&&!x.rotating&&this.fire(new i.x("rotatestart",l)),this._pitching&&!x.pitching&&this.fire(new i.x("pitchstart",l))}_fireMoveEvents(l){this.fire(new i.x("move",l)),this._zooming&&this.fire(new i.x("zoom",l)),this._rotating&&this.fire(new i.x("rotate",l)),this._pitching&&this.fire(new i.x("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const x=this._zooming,E=this._rotating,I=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new i.x("zoomend",l)),E&&this.fire(new i.x("rotateend",l)),I&&this.fire(new i.x("pitchend",l)),this.fire(new i.x("moveend",l))}flyTo(l,d){if(this._prefersReducedMotion(l)){const Er=i.ar(l,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Er,d)}this.stop(),l=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.dr},l);const x=this.transform,E=this.getZoom(),I=this.getBearing(),M=this.getPitch(),q=this.getPadding(),X="zoom"in l?i.ap(+l.zoom,x.minZoom,x.maxZoom):E,ne="bearing"in l?this._normalizeBearing(l.bearing,I):I,se="pitch"in l?+l.pitch:M,ye=this._extendPadding(l.padding),we=x.zoomScale(X-E),Ee=i.P.convert(l.offset);let Ge=x.centerPoint.add(Ee);const $e=x.pointLocation(Ge),Xe=i.bK.convert(l.center||$e);this._normalizeCenter(Xe);const Ze=x.project($e),ft=x.project(Xe).sub(Ze);let gt=l.curve;const ut=Math.max(x.width,x.height),bt=ut/we,_t=ft.mag();if("minZoom"in l){const Er=i.ap(Math.min(l.minZoom,E,X),x.minZoom,x.maxZoom),tn=ut/x.zoomScale(Er-E);gt=Math.sqrt(tn/_t*2)}const Mt=gt*gt;function Tt(Er){const tn=(bt*bt-ut*ut+(Er?-1:1)*Mt*Mt*_t*_t)/(2*(Er?bt:ut)*Mt*_t);return Math.log(Math.sqrt(tn*tn+1)-tn)}function jt(Er){return(Math.exp(Er)-Math.exp(-Er))/2}function Vt(Er){return(Math.exp(Er)+Math.exp(-Er))/2}const Rt=Tt(0);let Dt=function(Er){return Vt(Rt)/Vt(Rt+gt*Er)},sr=function(Er){return ut*((Vt(Rt)*(jt(tn=Rt+gt*Er)/Vt(tn))-jt(Rt))/Mt)/_t;var tn},Cr=(Tt(1)-Rt)/gt;if(Math.abs(_t)<1e-6||!isFinite(Cr)){if(Math.abs(ut-bt)<1e-6)return this.easeTo(l,d);const Er=bt<ut?-1:1;Cr=Math.abs(Math.log(bt/ut))/gt,sr=function(){return 0},Dt=function(tn){return Math.exp(Er*gt*tn)}}l.duration="duration"in l?+l.duration:1e3*Cr/("screenSpeed"in l?+l.screenSpeed/gt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const Rr=I!==ne,wr=se!==M,en=!x.isPaddingEqual(ye),or=l.retainPadding===!1?x.clone():x,Lr=Er=>tn=>{const sn=tn*Cr,kr=1/Dt(sn);Er.zoom=tn===1?X:E+Er.scaleZoom(kr),Rr&&(Er.bearing=i.aa(I,ne,tn)),wr&&(Er.pitch=i.aa(M,se,tn)),en&&(or.interpolatePadding(q,ye,tn),Ge=or.centerPoint.add(Ee));const Hr=tn===1?Xe:Er.unproject(Ze.add(ft.mult(sr(sn))).mult(kr));return Er.setLocationAtPoint(Er.renderWorldCopies?Hr.wrap():Hr,Ge),Er._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(d),Er};if(l.preloadOnly){const Er=this._emulate(Lr,l.duration,x);return this._preloadTiles(Er),this}return this._zooming=!0,this._rotating=Rr,this._pitching=wr,this._padding=en,this._prepareEase(d,!1),this._ease(Lr(x),()=>this._afterEase(d),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(l){}_cancelRenderFrame(l){}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const x=this._onEaseEnd;this._onEaseEnd=void 0,x.call(this,d)}if(!l){const x=this.handlers;x&&x.stop(!1)}return this}_ease(l,d,x){x.animate===!1||x.duration===0?(l(1),d()):(this._easeStart=i.q.now(),this._easeOptions=x,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=i.bA(l,-180,180);const x=Math.abs(l-d);return Math.abs(l-360-d)<x&&(l-=360),Math.abs(l+360-d)<x&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const x=l.lng-d.center.lng;l.lng+=x>180?-360:x<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,d,x){const E=Math.ceil(15*d/1e3),I=[],M=l(x.clone());for(let q=0;q<=E;q++){const X=M(q/E);I.push(X.clone())}return I}_preloadTiles(l,d){}}class k0{constructor(l={}){this.options=l,i.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const d=this.options&&this.options.compact,x=l._getUIString("AttributionControl.ToggleAttribution");this._map=l,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=R("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",x);const E=R("span","mapboxgl-ctrl-icon",this._compactButton);return E.setAttribute("aria-hidden","true"),E.setAttribute("title",x),this._innerContainer=R("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(l){const x=d.reduce((E,I,M)=>(I.value&&(E+=`${I.key}=${I.value}${M<d.length-1?"&":""}`),E),"?");l.href=`${i.e.FEEDBACK_URL}/${x}#${lh(this._map,!0)}`,l.rel="noopener nofollow"}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const d=this._map.style._mergedSourceCaches;for(const E in d){const I=d[E];if(I.used){const M=I.getSource();M.attribution&&l.indexOf(M.attribution)<0&&l.push(M.attribution)}}l.sort((E,I)=>E.length-I.length),l=l.filter((E,I)=>{for(let M=I+1;M<l.length;M++)if(l[M].indexOf(E)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const x=l.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,l.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class H1{constructor(){i.aJ(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=R("div","mapboxgl-ctrl");const d=R("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const d in l){const x=l[d].getSource();if(x.hasOwnProperty("mapbox_logo")&&!x.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Lb{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,x=d?this._queue.concat(d):this._queue;for(const E of x)if(E.id===l)return void(E.cancelled=!0)}run(l=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const x of d)if(!x.cancelled&&(x.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class ug{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const d=i.cw((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,d,x){this._start=this.getValue(d),this._end=l,this._startTime=d,this._endTime=d+x}}const yS={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class vS{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class V1{constructor(l){this.map=l,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(l,d){if(this.typeById.has(l))throw new Error(`Interaction id "${l}" already exists.`);const{type:x,filter:E}=d;if(E){const M=i.M(E,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(M.result==="error")throw new Error(M.value.map(q=>`${q.key}: ${q.message}`).join(", "));this.filters.set(l,M.value)}const I=this.interactionsByType.get(x)||new Map;I.size===0&&(this.map.on(x,this.handleType),this.interactionsByType.set(x,I)),I.set(l,d),this.typeById.set(l,x)}remove(l){const d=this.typeById.get(l);if(!d)return;this.typeById.delete(l),this.filters.delete(l);const x=this.interactionsByType.get(d);x&&(x.delete(l),x.size===0&&this.map.off(d,this.handleType))}handleType(l){const d=l.features||this.map.queryRenderedFeatures(l.point);if(!d)return;const x=this.interactionsByType.get(l.type),E={zoom:0};for(const[I,M]of x){const q=this.filters.get(I),{handler:X,layers:ne}=M;for(const se of d)if((!ne||ne.includes(se.layer.id))&&(!q||q.evaluate(E,se))&&X({id:I,feature:se,interaction:M})!==!1)break}}}const G1={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0},hg={showCompass:!0,showZoom:!0,visualizePitch:!1};class EA{constructor(l,d,x=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Eh({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,x&&(this.mousePitch=new Fd({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),i.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),te()}move(l,d){const x=this.map,E=this.mouseRotate.mousemoveWindow(l,d),I=E&&E.bearingDelta;if(I&&x.setBearing(x.getBearing()+I),this.mousePitch){const M=this.mousePitch.mousemoveWindow(l,d),q=M&&M.pitchDelta;q&&x.setPitch(x.getPitch()+q)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ue(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(i.l({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),ce(this.element,l)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,ce(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=me(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=me(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Pd(v,l,d){if(v=new i.bK(v.lng,v.lat),l){const x=new i.bK(v.lng-360,v.lat),E=new i.bK(v.lng+360,v.lat),I=360*Math.ceil(Math.abs(v.lng-d.center.lng)/360),M=d.locationPoint(v).distSqr(l),q=l.x<0||l.y<0||l.x>d.width||l.y>d.height;d.locationPoint(x).distSqr(l)<M&&(q||Math.abs(x.lng-d.center.lng)<I)?v=x:d.locationPoint(E).distSqr(l)<M&&(q||Math.abs(E.lng-d.center.lng)<I)&&(v=E)}for(;Math.abs(v.lng-d.center.lng)>180;){const x=d.locationPoint(v);if(x.x>=0&&x.y>=0&&x.x<=d.width&&x.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const hh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Md extends i.E{constructor(l,d){if(super(),(l instanceof HTMLElement||d)&&(l=i.l({element:l},d)),i.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=i.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=R("div");const I=41,M=27,q=N("svg",{display:"block",height:I*this._scale+"px",width:M*this._scale+"px",viewBox:`0 0 ${M} ${I}`},this._element),X=N("radialGradient",{id:"shadowGradient"},N("defs",{},q));N("stop",{offset:"10%","stop-opacity":.4},X),N("stop",{offset:"100%","stop-opacity":.05},X),N("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},q),N("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},q),N("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},q),N("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},q),this._offset=i.P.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",I=>{I.preventDefault()}),this._element.addEventListener("mousedown",I=>{I.preventDefault()});const x=this._element.classList;for(const I in hh)x.remove(`mapboxgl-marker-anchor-${I}`);x.add(`mapboxgl-marker-anchor-${this._anchor}`);const E=l&&l.className?l.className.trim().split(/\s+/):[];x.add(...E),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=i.bK.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const E=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const d=l.code,x=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&x!==32&&x!==13||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,x=this._element;this._popup&&(d===x||x.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,d=this._pos;if(!l||!d)return!1;const x=l.unproject(d),E=l.getFreeCameraOptions();if(!E.position)return!1;const I=E.position.toLngLat();return I.distanceTo(x)<.9*I.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const d=this._pos;if(!d||d.x<0||d.x>l.transform.width||d.y<0||d.y>l.transform.height)return void this._clearFadeTimer();const x=l.unproject(d);let E;l._showingGlobe()&&i.dz(l.transform,this._lngLat)?E=0:(E=1-l._queryFogOpacity(x),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(E*=this._occludedOpacity)),this._element.style.opacity=`${E}`,this._element.style.pointerEvents=E>0?"auto":"none",this._popup&&this._popup._setOpacity(E),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${hh[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const l=this._pos,d=this._map,x=this.getPitchAlignment();if(!d||!l||x!=="map")return"";if(!d._showingGlobe()){const X=d.getPitch();return X?`rotateX(${X}deg)`:""}const E=i.c0(i.dA(d.transform,this._lngLat)),I=l.sub(i.dB(d.transform)),M=Math.abs(I.x)+Math.abs(I.y);if(M===0)return"";const q=E/M;return`rotateX(${-I.y*q}deg) rotateY(${I.x*q}deg)`}_calculateZTransform(){const l=this._pos,d=this._map;if(!d||!l)return"";let x=0;const E=this.getRotationAlignment();if(E==="map")if(d._showingGlobe()){const I=d.project(new i.bK(this._lngLat.lng,this._lngLat.lat+.001)),M=d.project(new i.bK(this._lngLat.lng,this._lngLat.lat-.001)).sub(I);x=i.c0(Math.atan2(M.y,M.x))-90}else x=-d.getBearing();else if(E==="horizon"){const I=i.a7(4,6,d.getZoom()),M=i.dB(d.transform);M.y+=I*d.transform.height;const q=l.sub(M),X=i.c0(Math.atan2(q.y,q.x));x=(X>90?X-270:X+90)*(1-I)}return x+=this._rotation,x?`rotateZ(${x}deg)`:""}_update(l){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Pd(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),l===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=i.P.convert(l),this._update(),this}addClassName(l){return this._element.classList.add(l),this}removeClassName(l){return this._element.classList.remove(l),this}toggleClassName(l){return this._element.classList.toggle(l)}_onMove(l){const d=this._map;if(!d)return;const x=this._pointerdownPos,E=this._positionDelta;if(x&&E){if(!this._isDragging){const I=this._clickTolerance||d._clickTolerance;if(l.point.dist(x)<I)return;this._isDragging=!0}this._pos=l.point.sub(E),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.x("dragstart"))),this.fire(new i.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.x("dragend")),this._state="inactive"}_addDragHandler(l){const d=this._map,x=this._pos;d&&x&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(x),this._pointerdownPos=l.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const d=this._map;return d&&(l?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Dp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Zf={maxWidth:100,unit:"metric"},xS={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},_S={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},bS=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fb(v=new i.P(0,0),l="bottom"){if(typeof v=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(l){case"top":return new i.P(0,v);case"top-left":return new i.P(d,d);case"top-right":return new i.P(-d,d);case"bottom":return new i.P(0,-v);case"bottom-left":return new i.P(d,-d);case"bottom-right":return new i.P(-d,-d);case"left":return new i.P(v,0);case"right":return new i.P(-v,0)}return new i.P(0,0)}return v instanceof i.P||Array.isArray(v)?i.P.convert(v):i.P.convert(v[l]||[0,0])}return{version:A,supported:j.supported,setRTLTextPlugin:i.dC,getRTLTextPluginStatus:i.dD,Map:class extends Q1{constructor(v){C.mark(g.create);const l=v;if((v=i.l({},G1,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&i.dx(window)&&(v.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ja(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._repaint=!!v.repaint,this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new Lb,this._domRenderTaskQueue=new Lb,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.aP(),this._locale=i.l({},yS,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._tessellationStep=v.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=v.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ug(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._requestManager=new Qe(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,this._contextCreateOptions=v.contextCreateOptions?{...v.contextCreateOptions}:{},typeof v.container=="string"){const d=document.getElementById(v.container);if(!d)throw new Error(`Container '${v.container.toString()}' not found.`);this._container=d}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),i.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new vS),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Yc(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,(v.style||!v.testMode)&&this.setStyle(v.style||i.e.DEFAULT_STYLE,{config:v.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),v.hash&&(this._hash=new Eu(typeof v.hash=="string"&&v.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){l.center==null&&l.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch});const d=v.bounds;d&&(this.resize(),this.fitBounds(d,i.l({},v.fitBoundsOptions,{duration:0})))}this.resize(),v.attributionControl&&this.addControl(new k0({customAttribution:v.customAttribution})),this._logoControl=new H1,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new i.x(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new i.x(`${d.dataType}dataloading`,d))}),this._interactions=new V1(this)}_getMapId(){return this._mapId}addControl(v,l){if(l===void 0&&(l=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new i.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const x=this._controlPositions[l];return l.indexOf("bottom")!==-1?x.insertBefore(d,x.firstChild):x.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new i.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(v);return l>-1&&this._controls.splice(l,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new i.x("movestart",v)).fire(new i.x("move",v)),this.fire(new i.x("resize",v)),l&&this.fire(new i.x("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(i.as.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new i.x("zoomstart")).fire(new i.x("zoom")).fire(new i.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new i.x("pitchstart")).fire(new i.x("pitch")).fire(new i.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?navigator.language:Array.isArray(v)?v.length===0?void 0:v.map(l=>l==="auto"?navigator.language:l):v}setLanguage(v){const l=this._parseLanguage(v);if(!this.style||l===this._language)return this;this._language=l,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,l=v.projection.name;let d;l==="globe"&&v.zoom>=i.bU?(v.setMercatorFromTransition(),d=!0):l==="mercator"&&v.zoom<i.bU&&(v.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,l){return this._updateProjection(v||l||{name:"mercator"})}_updateProjection(v){let l;return l=v.name==="globe"&&this.transform.zoom>=i.bU?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),l&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(v){return this.transform.locationPoint3D(i.bK.convert(v))}unproject(v){return this.transform.pointLocation3D(i.P.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,l,d){if(v==="mouseenter"||v==="mouseover"){let x=!1;const E=M=>{const q=l.filter(ne=>this.getLayer(ne)),X=q.length?this.queryRenderedFeatures(M.point,{layers:q}):[];X.length?x||(x=!0,d.call(this,new na(v,this,M.originalEvent,{features:X}))):x=!1},I=()=>{x=!1};return{layers:new Set(l),listener:d,delegates:{mousemove:E,mouseout:I}}}if(v==="mouseleave"||v==="mouseout"){let x=!1;const E=M=>{const q=l.filter(X=>this.getLayer(X));(q.length?this.queryRenderedFeatures(M.point,{layers:q}):[]).length?x=!0:x&&(x=!1,d.call(this,new na(v,this,M.originalEvent)))},I=M=>{x&&(x=!1,d.call(this,new na(v,this,M.originalEvent)))};return{layers:new Set(l),listener:d,delegates:{mousemove:E,mouseout:I}}}{const x=E=>{const I=l.filter(q=>this.getLayer(q)),M=I.length?this.queryRenderedFeatures(E.point,{layers:I}):[];M.length&&(E.features=M,d.call(this,E),delete E.features)};return{layers:new Set(l),listener:d,delegates:{[v]:x}}}}on(v,l,d){if(typeof l=="function"||d===void 0)return super.on(v,l);if(Array.isArray(l)||(l=[l]),l){for(const E of l)if(!this._isValidId(E))return this}const x=this._createDelegatedListener(v,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(x);for(const E in x.delegates)this.on(E,x.delegates[E]);return this}once(v,l,d){if(typeof l=="function"||d===void 0)return super.once(v,l);if(Array.isArray(l)||(l=[l]),l){for(const E of l)if(!this._isValidId(E))return this}const x=this._createDelegatedListener(v,l,d);for(const E in x.delegates)this.once(E,x.delegates[E]);return this}off(v,l,d){if(typeof l=="function"||d===void 0)return super.off(v,l);const x=new Set(Array.isArray(l)?l:[l]);for(const M of x)if(!this._isValidId(M))return this;const E=(M,q)=>{if(M.size!==q.size)return!1;for(const X of M)if(!q.has(X))return!1;return!0},I=this._delegatedListeners?this._delegatedListeners[v]:void 0;return I&&(M=>{for(let q=0;q<M.length;q++){const X=M[q];if(X.listener===d&&E(X.layers,x)){for(const ne in X.delegates)this.off(ne,X.delegates[ne]);return M.splice(q,1),this}}})(I),this}queryRenderedFeatures(v,l){if(!this.style)return[];if(l!==void 0||v===void 0||v instanceof i.P||Array.isArray(v)||(l=v,v=void 0),v=v||[[0,0],[this.transform.width,this.transform.height]],(l=l||{}).layers&&Array.isArray(l.layers)){for(const d of l.layers)if(!this._isValidId(d))return[]}return this.style.queryRenderedFeatures(v,l,this.transform)}querySourceFeatures(v,l){return this._isValidId(v)?this.style.querySourceFeatures(v,l):[]}isPointOnSurface(v){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&i.w(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(v))}addInteraction(v,l){return this._interactions.add(v,l),this}removeInteraction(v){return this._interactions.remove(v),this}setStyle(v,l){return l=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l),this.style&&v&&l.diff!==!1&&l.localFontFamily===this._localFontFamily&&l.localIdeographFontFamily===this._localIdeographFontFamily&&!l.config?(this.style._diffStyle(v,(d,x)=>{d?(i.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(v,l)):x&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(v,l))}_getUIString(v){const l=this._locale[v];if(l==null)throw new Error(`Missing UI string '${v}'`);return l}_updateStyle(v,l){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v){const d=i.l({},l);l&&l.config&&(d.initialConfig=l.config,delete d.config),this.style=new jn(this,d).load(v),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new jn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(v){return v==null?(this.fire(new i.t(new Error("IDs can't be empty."))),!1):!i.cn(v)||(this.fire(new i.t(new Error(`IDs can't contain special symbols: "${v}".`))),!1)}addSource(v,l){return this._isValidId(v)?(this._lazyInitEmptyStyle(),this.style.addSource(v,l),this._update(!0)):this}isSourceLoaded(v){return!!this._isValidId(v)&&!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(v,l,d){this._lazyInitEmptyStyle(),this.style.addSourceType(v,l,d)}removeSource(v){return this._isValidId(v)?(this.style.removeSource(v),this._updateTerrain(),this._update(!0)):this}getSource(v){return this._isValidId(v)?this.style.getOwnSource(v):null}addImage(v,l,{pixelRatio:d=1,sdf:x=!1,stretchX:E,stretchY:I,content:M}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap){const{width:q,height:X,data:ne}=i.q.getImageData(l);this.style.addImage(v,{data:new i.r({width:q,height:X},ne),pixelRatio:d,stretchX:E,stretchY:I,content:M,sdf:x,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new i.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:q,height:X}=l,ne=l;this.style.addImage(v,{data:new i.r({width:q,height:X},new Uint8Array(ne.data)),pixelRatio:d,stretchX:E,stretchY:I,content:M,sdf:x,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,v)}}updateImage(v,l){this._lazyInitEmptyStyle();const d=this.style.getImage(v);if(!d)return void this.fire(new i.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap?i.q.getImageData(l):l,{width:E,height:I,data:M}=x;if(E===void 0||I===void 0)return void this.fire(new i.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(E!==d.data.width||I!==d.data.height)return void this.fire(new i.t(new Error(`The width and height of the updated image (${E}, ${I})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`)));const q=!(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap);d.data.replace(M,q),this.style.updateImage(v,d)}hasImage(v){return v?!!this.style&&!!this.style.getImage(v):(this.fire(new i.t(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,l){i.o(this._requestManager.transformRequest(v,i.R.Image),(d,x)=>{l(d,x instanceof HTMLImageElement?i.q.getImageData(x):x)})}listImages(){return this.style.listImages()}addModel(v,l){this._lazyInitEmptyStyle(),this.style.addModel(v,l)}hasModel(v){return v?this.style.hasModel(v):(this.fire(new i.t(new Error("Missing required model id"))),!1)}removeModel(v){this.style.removeModel(v)}listModels(){return this.style.listModels()}addLayer(v,l){return this._isValidId(v.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(v,l),this._update(!0)):this}getSlot(v){const l=this.getLayer(v);return l&&l.slot||null}setSlot(v,l){return this.style.setSlot(v,l),this.style.mergeLayers(),this._update(!0)}addImport(v,l){return this.style.addImport(v,l),this}updateImport(v,l){return typeof l!="string"&&l.id!==v?(this.removeImport(v),this.addImport(l)):(this.style.updateImport(v,l),this._update(!0))}removeImport(v){return this.style.removeImport(v),this}moveImport(v,l){return this.style.moveImport(v,l),this._update(!0)}moveLayer(v,l){return this._isValidId(v)?(this.style.moveLayer(v,l),this._update(!0)):this}removeLayer(v){return this._isValidId(v)?(this.style.removeLayer(v),this._update(!0)):this}getLayer(v){if(!this._isValidId(v))return null;const l=this.style.getOwnLayer(v);return l?l.type==="custom"?l.implementation:l.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(v,l,d){return this._isValidId(v)?(this.style.setLayerZoomRange(v,l,d),this._update(!0)):this}setFilter(v,l,d={}){return this._isValidId(v)?(this.style.setFilter(v,l,d),this._update(!0)):this}getFilter(v){return this._isValidId(v)?this.style.getFilter(v):null}setPaintProperty(v,l,d,x={}){return this._isValidId(v)?(this.style.setPaintProperty(v,l,d,x),this._update(!0)):this}getPaintProperty(v,l){return this._isValidId(v)?this.style.getPaintProperty(v,l):null}setLayoutProperty(v,l,d,x={}){return this._isValidId(v)?(this.style.setLayoutProperty(v,l,d,x),this._update(!0)):this}getLayoutProperty(v,l){return this._isValidId(v)?this.style.getLayoutProperty(v,l):null}getSchema(v){return this.style.getSchema(v)}setSchema(v,l){return this.style.setSchema(v,l),this._update(!0)}getConfig(v){return this.style.getConfig(v)}setConfig(v,l){return this.style.setConfig(v,l),this._update(!0)}getConfigProperty(v,l){return this.style.getConfigProperty(v,l)}setConfigProperty(v,l,d){return this.style.setConfigProperty(v,l,d),this._update(!0)}setLights(v){if(this._lazyInitEmptyStyle(),v&&v.length===1&&v[0].type==="flat"){const l=v[0];l.properties?this.style.setFlatLight(l.properties,l.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(v),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const v=this.style.getLights()||[];return v.length===0&&v.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),v}setLight(v,l={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:v}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(v){return this._lazyInitEmptyStyle(),this.style.setColorTheme(v),this._update(!0)}setCamera(v){return this.style.setCamera(v),this._triggerCameraUpdate(v)}_triggerCameraUpdate(v){return this._update(this.transform.setOrthographicProjectionAtLowPitch(v["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.bK.convert(v),this.transform):0}setFeatureState(v,l){return this._isValidId(v.source)?(this.style.setFeatureState(v,l),this._update()):this}removeFeatureState(v,l){return this._isValidId(v.source)?(this.style.removeFeatureState(v,l),this._update()):this}getFeatureState(v){return this._isValidId(v.source)?this.style.getFeatureState(v):null}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let d,x,E,I=this._container;for(;I&&(!x||!E);){const M=window.getComputedStyle(I).transform;M&&M!=="none"&&(d=M.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(x=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(E=d[3])),I=I.parentElement}this._containerWidth=x?Math.abs(v/x):v,this._containerHeight=E?Math.abs(l/E):l}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=R("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=R("div","mapboxgl-canvas-container",v);this._canvas=R("canvas","mapboxgl-canvas",l),this._interactive&&(l.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=R("div","mapboxgl-control-container",v),x=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(E=>{x[E]=R("div",`mapboxgl-ctrl-${E}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,l){const d=i.q.devicePixelRatio||1;this._canvas.width=d*Math.ceil(v),this._canvas.height=d*Math.ceil(l),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${l}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const l=this._markers.indexOf(v);l!==-1&&this._markers.splice(l,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const l=this._popups.indexOf(v);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const v=i.l({},j.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl2",v);l?(Zt(l,!0),this.painter=new ed(l,this._contextCreateOptions,this.transform,this._tp),this.on("data",d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),i.m.testSupport(l)):this.fire(new i.t(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.x("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new i.x("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let l;this.fire(new i.x("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,x=i.q.now(),E=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(l=E.createQuery(),E.beginQuery(d.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const I=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,se=this.transform.pitch,ye=i.q.now(),we=new i.a3(ne,{now:ye,fadeDuration:I,pitch:se,transition:this.style.transition});this.style.update(we)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let M=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),M=this._updateAverageElevation(x),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):M=this._updateAverageElevation(x);const q=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,I,this._crossSourceCollisions,this.painter.replacementSource);if(q&&(this._placementDirty=q.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,C.mark(g.load),this.fire(new i.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const ne=i.q.now()-x;E.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const se=E.getQueryParameter(l,E.QUERY_RESULT)/1e6;E.deleteQuery(l),this.fire(new i.x("gpu-timing-frame",{cpuTime:ne,gpuTime:se}))},50)}if(this.listens("gpu-timing-layer")){const ne=this.painter.collectGpuTimers();setTimeout(()=>{const se=this.painter.queryGpuTimers(ne);this.fire(new i.x("gpu-timing-layer",{layerTimes:se}))},50)}if(this.listens("gpu-timing-deferred-render")){const ne=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const se=this.painter.queryGpuTimeDeferredRender(ne);this.fire(new i.x("gpu-timing-deferred-render",{gpuTime:se}))},50)}const X=this._sourcesDirty||this._styleDirty||this._placementDirty||M;if(X||this._repaint)this.triggerRepaint();else{const ne=this.idle();if(ne&&(M=this._updateAverageElevation(x,!0)),M)this.triggerRepaint();else if(this._triggerFrame(!1),ne&&(this.fire(new i.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const se=this._calculateSpeedIndex();this.fire(new i.x("speedindexcompleted",{speedIndex:se})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||X||(this._fullyLoaded=!0,C.mark(g.fullLoad),this._performanceMetricsCollection&&st(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const l of this._markers)v&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!v||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(v,l=!1){const d=E=>(this.transform.averageElevation=E,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const x=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(x||(l||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const E=this.transform.averageElevation;let I=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(I)?I=0:this._averageElevationLastSampledAt=v;const M=Math.abs(E-I);if(M>1){if(this._isInitialLoad||x)return this._averageElevation.jumpTo(I),d(I);this._averageElevation.easeTo(I,v,300)}else if(M>1e-4)return this._averageElevation.jumpTo(I),d(I)}return!!this._averageElevation.isEasing(v)&&d(this._averageElevation.getValue(v))}_authenticate(){Ue(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,v=>{if(v&&(v.message===_e||v.status===401)){const l=this.painter.context.gl;Zt(l,!1),this._logoControl instanceof H1&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),be(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Je(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const d=this.painter.context.gl,x=d.createFramebuffer();function E(I){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,I,0);const M=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,M),M}return d.bindFramebuffer(d.FRAMEBUFFER,x),this._canvasPixelComparison(E(v),l.canvasCopies.map(E),l.timeStamps)}_canvasPixelComparison(v,l,d){let x=d[1]-d[0];const E=v.length/4;for(let I=0;I<l.length;I++){const M=l[I];let q=0;for(let X=0;X<M.length;X+=4)M[X]===v[X]&&M[X+1]===v[X+1]&&M[X+2]===v[X+2]&&M[X+3]===v[X+3]&&(q+=1);x+=(d[I+2]-d[I+1])*(1-q/E)}return x}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Ft.delete(this.painter.context.gl),Ct.remove(),fe.remove(),this._removed=!0,this.fire(new i.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=i.q.frame(l=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(l)}))}_preloadTiles(v){const l=this.style?this.style.getSourceCaches():[];return i.bf(l,(d,x)=>d._preloadTiles(v,x),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(v){this._showParseStatus!==v&&(this._showParseStatus=v,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(v){this._showLayers2DWireframe!==v&&(this._showLayers2DWireframe=v,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(v){this._showLayers3DWireframe!==v&&(this._showLayers3DWireframe=v,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,this._tp.refreshUI(),v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,this._tp.refreshUI(),v&&this._update())}_setCacheLimits(v,l){i.dy(v,l)}get version(){return A}},NavigationControl:class{constructor(v={}){this.options=i.l({},hg,v),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(i.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),R("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),R("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:l}):d.resetNorth({},{originalEvent:l}))}),this._compassIcon=R("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const l=v.getZoom(),d=l===v.getMaxZoom(),x=l===v.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new EA(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,l){const d=R("button",v,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(v,l){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${l}`);v.setAttribute("aria-label",d),v.firstElementChild&&v.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends i.E{constructor(v={}){super();const l=navigator.geolocation;this.options=i.l({geolocation:l},Dp,v),i.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=El(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const l=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,v(d)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>l(d.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(v){const l=this._map.getMaxBounds(),d=v.coords;return!!l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new i.x("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("geolocate",v)),this._finish()}}_updateCamera(v){const l=new i.bK(v.coords.longitude,v.coords.latitude),d=v.coords.accuracy,x=this._map.getBearing(),E=i.l({bearing:x},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),E,{geolocateSource:!0})}_updateMarker(v){if(v){const l=new i.bK(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,l=i.bD(1,v._center.lat)*v.worldSize,d=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.x("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=R("button","mapboxgl-ctrl-geolocate",this._container),R("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R("div","mapboxgl-user-location"),this._dotElement.appendChild(R("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(R("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Md({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=R("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Md({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.x("trackuserlocationend")))})}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&v()}).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:k0,ScaleControl:class{constructor(v={}){this.options=i.l({},Zf,v),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,l=this._map,d=l._containerHeight/2,x=l._containerWidth/2-v/2,E=l.unproject([x,d]),I=l.unproject([x+v,d]),M=E.distanceTo(I);if(this.options.unit==="imperial"){const q=3.2808*M;q>5280?this._setScale(v,q/5280,"mile"):this._setScale(v,q,"foot")}else this.options.unit==="nautical"?this._setScale(v,M/1852,"nautical-mile"):M>=1e3?this._setScale(v,M/1e3,"kilometer"):this._setScale(v,M,"meter")}_setScale(v,l,d){this._map._requestDomTask(()=>{const x=function(I){const M=Math.pow(10,`${Math.floor(I)}`.length-1);let q=I/M;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(X){const ne=Math.pow(10,Math.ceil(-Math.log(X)/Math.LN10));return Math.round(X*ne)/ne}(q),M*q}(l),E=x/l;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(x):`${x}&nbsp;${xS[d]}`,this._container.style.width=v*E+"px"})}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=R("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v={}){this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:i.w("Full screen control 'container' must be a DOM element.")),i.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=R("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=R("button","mapboxgl-ctrl-fullscreen",this._controlContainer);R("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(v){super(),this.options=i.l(Object.create(_S),v),i.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new i.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new i.x("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=i.bK.convert(v),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const l=document.createDocumentFragment(),d=document.createElement("body");let x;for(d.innerHTML=v;x=d.firstChild,x;)l.appendChild(x);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=R("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(v),this.options.closeButton){const d=this._closeButton=R("button","mapboxgl-popup-close-button",l);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let l;return this._classList.delete(v)?l=!1:(this._classList.add(v),l=!0),this._updateClassList(),l}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const l=this._map,d=this._container,x=this._pos;if(!l||!d||!x)return"bottom";const E=d.offsetWidth,I=d.offsetHeight,M=x.x<E/2,q=x.x>l.transform.width-E/2;if(x.y+v<I)return M?"top-left":q?"top-right":"top";if(x.y>l.transform.height-I){if(M)return"bottom-left";if(q)return"bottom-right"}return M?"left":q?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),v.className=l.join(" ")}_update(v){const l=this._map,d=this._content;if(!l||!this._lngLat&&!this._trackPointer||!d)return;let x=this._container;if(x||(x=this._container=R("div","mapboxgl-popup",l.getContainer()),this._tip=R("div","mapboxgl-popup-tip",x),x.appendChild(d)),this.options.maxWidth&&x.style.maxWidth!==this.options.maxWidth&&(x.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pd(this._lngLat,this._pos,l.transform)),!this._trackPointer||v){const E=this._pos=this._trackPointer&&v instanceof i.P?v:l.project(this._lngLat),I=Fb(this.options.offset),M=this._anchor=this._getAnchor(I.y),q=Fb(this.options.offset,M),X=E.add(q).round();l._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${hh[M]} translate(${X.x}px,${X.y}px)`)})}if(!this._marker&&l._showingGlobe()){const E=i.dz(l.transform,this._lngLat)?0:1;this._setOpacity(E)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(bS);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:Md,Style:jn,LngLat:i.bK,LngLatBounds:i.as,Point:i.P,MercatorCoordinate:i.a5,FreeCameraOptions:nl,Evented:i.E,config:i.e,prewarm:i.dE,clearPrewarmedResources:i.dF,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(v){i.e.ACCESS_TOKEN=v},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(v){i.e.API_URL=v},get workerCount(){return i.dG.workerCount},set workerCount(v){i.dG.workerCount=v},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){i.e.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){i.dH(v)},get workerUrl(){return i.dI.workerUrl},set workerUrl(v){i.dI.workerUrl=v},get workerClass(){return i.dI.workerClass},set workerClass(v){i.dI.workerClass=v},get workerParams(){return i.dI.workerParams},set workerParams(v){i.dI.workerParams=v},get dracoUrl(){return i.dJ()},set dracoUrl(v){i.dK(v)},get meshoptUrl(){return i.dL()},set meshoptUrl(v){i.dM(v)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}});var u=o;return u})})(qV);var zce=qV.exports;const is=Sp(zce);var T1=Hce,Qce=Object.prototype.hasOwnProperty;function Hce(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)Qce.call(r,n)&&(t[n]=r[n])}return t}var WV={exports:{}};(function(t,e){(function(){var r={};t.exports=r,r.simpleFilter=function(n,s){return s.filter(function(o){return r.test(n,o)})},r.test=function(n,s){return r.match(n,s)!==null},r.match=function(n,s,o){o=o||{};var c=0,u=[],i=s.length,A=0,g=0,C=o.pre||"",B=o.post||"",S=o.caseSensitive&&s||s.toLowerCase(),P;n=o.caseSensitive&&n||n.toLowerCase();for(var j=0;j<i;j++)P=s[j],S[j]===n[c]?(P=C+P+B,c+=1,g+=1+g):g=0,A+=g,u[u.length]=P;return c===n.length?(A=S===n?1/0:A,{rendered:u.join(""),score:A}):null},r.filter=function(n,s,o){return!s||s.length===0?[]:typeof n!="string"?s:(o=o||{},s.reduce(function(c,u,i,A){var g=u;o.extract&&(g=o.extract(u));var C=r.match(n,g,o);return C!=null&&(c[c.length]={string:C.rendered,score:C.score,index:i,original:u}),c},[]).sort(function(c,u){var i=u.score-c.score;return i||c.index-u.index}))}})()})(WV);var Vce=WV.exports,Wh=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};Wh.prototype.show=function(){this.element.style.display="block"};Wh.prototype.hide=function(){this.element.style.display="none"};Wh.prototype.add=function(t){this.items.push(t)};Wh.prototype.clear=function(){this.items=[],this.active=0};Wh.prototype.isEmpty=function(){return!this.items.length};Wh.prototype.isVisible=function(){return this.element.style.display==="block"};Wh.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()};Wh.prototype.drawItem=function(t,e){var r=document.createElement("li"),n=document.createElement("a");e&&(r.className+=" active"),n.innerHTML=t.string,r.appendChild(n),this.element.appendChild(r),r.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),r.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))};Wh.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()};Wh.prototype.move=function(t){this.active=t,this.draw()};Wh.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Wh.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Wh.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()};var Gce=Wh,qce=T1,$ce=Vce,Wce=Gce,th=function(t,e,r){return r=r||{},this.options=qce({minLength:2,limit:5,filter:!0,hideOnBlur:!0},r),this.el=t,this.data=e||[],this.list=new Wce(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(n){this.handleKeyUp(n.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(n){this.handleKeyDown(n)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(n){this.handlePaste(n)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};th.prototype.handleKeyUp=function(t){t===40||t===38||t===27||t===13||t===9||this.handleInputChange(this.el.value)};th.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};th.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};th.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}};th.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(e){for(var r=0;r<e.length&&(this.list.add(e[r]),r!==this.options.limit-1);r++);this.list.draw()}).bind(this))};th.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};th.prototype.update=function(t){this.data=t,this.handleKeyUp()};th.prototype.clear=function(){this.data=[],this.list.clear()};th.prototype.normalize=function(t){return t=t.toLowerCase(),t};th.prototype.match=function(t,e){return t.indexOf(e)>-1};th.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")};th.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(n){return this.getItemValue(n)}).bind(this)},r;this.options.filter?(r=$ce.filter(this.query,this.data,e),r=r.map((function(n){return{original:n.original,string:this.render(n.original,n.string)}}).bind(this))):r=this.data.map((function(n){var s=this.render(n);return{original:n,string:s}}).bind(this)),t(r)};th.prototype.getItemValue=function(t){return t};th.prototype.render=function(t,e){if(e)return e;for(var r=t.original?this.getItemValue(t.original):this.getItemValue(t),n=this.normalize(r),s=n.lastIndexOf(this.query);s>-1;){var o=s+this.query.length;r=r.slice(0,s)+"<strong>"+r.slice(s,o)+"</strong>"+r.slice(o),s=n.slice(0,s).lastIndexOf(this.query)}return r};th.prototype.renderError=function(t){this.list.drawError(t)};var Kce=th,KV=Kce,Xce=KV;typeof window<"u"&&(window.Suggestions=KV);var Yce="Expected a function",T8=NaN,Zce="[object Symbol]",Jce=/^\s+|\s+$/g,eue=/^[-+]0x[0-9a-f]+$/i,tue=/^0b[01]+$/i,rue=/^0o[0-7]+$/i,nue=parseInt,iue=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,sue=typeof self=="object"&&self&&self.Object===Object&&self,oue=iue||sue||Function("return this")(),aue=Object.prototype,lue=aue.toString,cue=Math.max,uue=Math.min,OE=function(){return oue.Date.now()};function hue(t,e,r){var n,s,o,c,u,i,A=0,g=!1,C=!1,B=!0;if(typeof t!="function")throw new TypeError(Yce);e=I8(e)||0,g6(r)&&(g=!!r.leading,C="maxWait"in r,o=C?cue(I8(r.maxWait)||0,e):o,B="trailing"in r?!!r.trailing:B);function S(ue){var oe=n,K=s;return n=s=void 0,A=ue,c=t.apply(K,oe),c}function P(ue){return A=ue,u=setTimeout(N,e),g?S(ue):c}function j(ue){var oe=ue-i,K=ue-A,ce=e-oe;return C?uue(ce,o-K):ce}function R(ue){var oe=ue-i,K=ue-A;return i===void 0||oe>=e||oe<0||C&&K>=o}function N(){var ue=OE();if(R(ue))return U(ue);u=setTimeout(N,j(ue))}function U(ue){return u=void 0,B&&n?S(ue):(n=s=void 0,c)}function $(){u!==void 0&&clearTimeout(u),A=0,n=i=s=u=void 0}function J(){return u===void 0?c:U(OE())}function te(){var ue=OE(),oe=R(ue);if(n=arguments,s=this,i=ue,oe){if(u===void 0)return P(i);if(C)return u=setTimeout(N,e),S(i)}return u===void 0&&(u=setTimeout(N,e)),c}return te.cancel=$,te.flush=J,te}function g6(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function due(t){return!!t&&typeof t=="object"}function fue(t){return typeof t=="symbol"||due(t)&&lue.call(t)==Zce}function I8(t){if(typeof t=="number")return t;if(fue(t))return T8;if(g6(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=g6(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Jce,"");var r=tue.test(t);return r||rue.test(t)?nue(t.slice(2),r?2:8):eue.test(t)?T8:+t}var pue=hue,IF={exports:{}},Ky=typeof Reflect=="object"?Reflect:null,L8=Ky&&typeof Ky.apply=="function"?Ky.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},o5;Ky&&typeof Ky.ownKeys=="function"?o5=Ky.ownKeys:Object.getOwnPropertySymbols?o5=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:o5=function(e){return Object.getOwnPropertyNames(e)};function Aue(t){console&&console.warn&&console.warn(t)}var XV=Number.isNaN||function(e){return e!==e};function Na(){Na.init.call(this)}IF.exports=Na;IF.exports.once=vue;Na.EventEmitter=Na;Na.prototype._events=void 0;Na.prototype._eventsCount=0;Na.prototype._maxListeners=void 0;var F8=10;function AC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Na,"defaultMaxListeners",{enumerable:!0,get:function(){return F8},set:function(t){if(typeof t!="number"||t<0||XV(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");F8=t}});Na.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Na.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||XV(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function YV(t){return t._maxListeners===void 0?Na.defaultMaxListeners:t._maxListeners}Na.prototype.getMaxListeners=function(){return YV(this)};Na.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",o=this._events;if(o!==void 0)s=s&&o.error===void 0;else if(!s)return!1;if(s){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var u=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw u.context=c,u}var i=o[e];if(i===void 0)return!1;if(typeof i=="function")L8(i,this,r);else for(var A=i.length,g=rG(i,A),n=0;n<A;++n)L8(g[n],this,r);return!0};function ZV(t,e,r,n){var s,o,c;if(AC(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),c=o[e]),c===void 0)c=o[e]=r,++t._eventsCount;else if(typeof c=="function"?c=o[e]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),s=YV(t),s>0&&c.length>s&&!c.warned){c.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=c.length,Aue(u)}return t}Na.prototype.addListener=function(e,r){return ZV(this,e,r,!1)};Na.prototype.on=Na.prototype.addListener;Na.prototype.prependListener=function(e,r){return ZV(this,e,r,!0)};function mue(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function JV(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=mue.bind(n);return s.listener=r,n.wrapFn=s,s}Na.prototype.once=function(e,r){return AC(r),this.on(e,JV(this,e,r)),this};Na.prototype.prependOnceListener=function(e,r){return AC(r),this.prependListener(e,JV(this,e,r)),this};Na.prototype.removeListener=function(e,r){var n,s,o,c,u;if(AC(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){u=n[c].listener,o=c;break}if(o<0)return this;o===0?n.shift():gue(n,o),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,u||r)}return this};Na.prototype.off=Na.prototype.removeListener;Na.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),c;for(s=0;s<o.length;++s)c=o[s],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function eG(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?yue(s):rG(s,s.length)}Na.prototype.listeners=function(e){return eG(this,e,!0)};Na.prototype.rawListeners=function(e){return eG(this,e,!1)};Na.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):tG.call(t,e)};Na.prototype.listenerCount=tG;function tG(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Na.prototype.eventNames=function(){return this._eventsCount>0?o5(this._events):[]};function rG(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function gue(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function yue(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function vue(t,e){return new Promise(function(r,n){function s(c){t.removeListener(e,o),n(c)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}nG(t,e,o,{once:!0}),e!=="error"&&xue(t,s,{once:!0})})}function xue(t,e,r){typeof t.on=="function"&&nG(t,"error",e,r)}function nG(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(o){n.once&&t.removeEventListener(e,s),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var _ue=IF.exports,bue={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function wue(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}function Cue(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var r=e[1],n=e[2].split(";"),s=null,o=n.reduce(function(c,u){var i=wue(u);return i?i.key==="rel"?(s||(s=i.value),c):(c[i.key]=i.value,c):c},{});return s?{url:r,rel:s,params:o}:null}function Sue(t){return t?t.split(/,\s*</).reduce(function(e,r){var n=Cue(r);if(!n)return e;var s=n.rel.split(/\s+/);return s.forEach(function(o){e[o]||(e[o]={url:n.url,params:n.params})}),e},{}):{}}var Bue=Sue,Eue=Bue;function LF(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch{this.body=e.body}this.links=Eue(this.headers.link)}LF.prototype.hasNextPage=function(){return!!this.links.next};LF.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Tue=LF,mC={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},N8=mC;function Iue(t){var e=t.type||N8.ERROR_HTTP,r;if(t.body)try{r=JSON.parse(t.body)}catch{r=t.body}else r=null;var n=t.message||null;n||(typeof r=="string"?n=r:r&&typeof r.message=="string"?n=r.message:e===N8.ERROR_REQUEST_ABORTED&&(n="Request aborted")),this.message=n,this.type=e,this.statusCode=t.statusCode||null,this.request=t.request,this.body=r}var Lue=Iue;function Fue(t){var e=t.indexOf(":"),r=t.substring(0,e).trim().toLowerCase(),n=t.substring(e+1).trim();return{name:r,value:n}}function Nue(t){var e={};return t&&t.trim().split(/[\r|\n]+/).forEach(function(r){var n=Fue(r);e[n.name]=n.value}),e}var Pue=Nue,Mue=Tue,P8=Lue,RE=mC,jue=Pue,l4={};function kue(t){var e=l4[t.id];e&&(e.abort(),delete l4[t.id])}function Due(t,e){return new Mue(t,{body:e.response,headers:jue(e.getAllResponseHeaders()),statusCode:e.status})}function M8(t){var e=t.total,r=t.loaded,n=100*r/e;return{total:e,transferred:r,percent:n}}function iG(t,e){return new Promise(function(r,n){e.onprogress=function(c){t.emitter.emit(RE.EVENT_PROGRESS_DOWNLOAD,M8(c))};var s=t.file;s&&(e.upload.onprogress=function(c){t.emitter.emit(RE.EVENT_PROGRESS_UPLOAD,M8(c))}),e.onerror=function(c){n(c)},e.onabort=function(){var c=new P8({request:t,type:RE.ERROR_REQUEST_ABORTED});n(c)},e.onload=function(){if(delete l4[t.id],e.status<200||e.status>=400){var c=new P8({request:t,body:e.response,statusCode:e.status});n(c);return}r(e)};var o=t.body;typeof o=="string"?e.send(o):o?e.send(JSON.stringify(o)):s?e.send(s):e.send(),l4[t.id]=e}).then(function(r){return Due(t,r)})}function sG(t,e){var r=t.url(e),n=new window.XMLHttpRequest;return n.open(t.method,r),Object.keys(t.headers).forEach(function(s){n.setRequestHeader(s,t.headers[s])}),n}function Oue(t){return Promise.resolve().then(function(){var e=sG(t,t.client.accessToken);return iG(t,e)})}var Rue={browserAbort:kue,sendRequestXhr:iG,browserSend:Oue,createRequestXhr:sG},c4={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */c4.exports;(function(t,e){(function(r){var n=e,s=t&&t.exports==n&&t,o=typeof Ho=="object"&&Ho;(o.global===o||o.window===o)&&(r=o);var c=function(P){this.message=P};c.prototype=new Error,c.prototype.name="InvalidCharacterError";var u=function(P){throw new c(P)},i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/[\t\n\f\r ]/g,g=function(P){P=String(P).replace(A,"");var j=P.length;j%4==0&&(P=P.replace(/==?$/,""),j=P.length),(j%4==1||/[^+a-zA-Z0-9/]/.test(P))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var R=0,N,U,$="",J=-1;++J<j;)U=i.indexOf(P.charAt(J)),N=R%4?N*64+U:U,R++%4&&($+=String.fromCharCode(255&N>>(-2*R&6)));return $},C=function(P){P=String(P),/[^\0-\xFF]/.test(P)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var j=P.length%3,R="",N=-1,U,$,J,te,ue=P.length-j;++N<ue;)U=P.charCodeAt(N)<<16,$=P.charCodeAt(++N)<<8,J=P.charCodeAt(++N),te=U+$+J,R+=i.charAt(te>>18&63)+i.charAt(te>>12&63)+i.charAt(te>>6&63)+i.charAt(te&63);return j==2?(U=P.charCodeAt(N)<<8,$=P.charCodeAt(++N),te=U+$,R+=i.charAt(te>>10)+i.charAt(te>>4&63)+i.charAt(te<<2&63)+"="):j==1&&(te=P.charCodeAt(N),R+=i.charAt(te>>2)+i.charAt(te<<4&63)+"=="),R},B={encode:C,decode:g,version:"0.1.0"};if(n&&!n.nodeType)if(s)s.exports=B;else for(var S in B)B.hasOwnProperty(S)&&(n[S]=B[S]);else r.base64=B})(Ho)})(c4,c4.exports);var Uue=c4.exports,zue=Uue,UE={};function Que(t){if(UE[t])return UE[t];var e=t.split("."),r=e[0],n=e[1];if(!n)throw new Error("Invalid token");var s=Hue(n),o={usage:r,user:s.u};return Cg(s,"a")&&(o.authorization=s.a),Cg(s,"exp")&&(o.expires=s.exp*1e3),Cg(s,"iat")&&(o.created=s.iat*1e3),Cg(s,"scopes")&&(o.scopes=s.scopes),Cg(s,"client")&&(o.client=s.client),Cg(s,"ll")&&(o.lastLogin=s.ll),Cg(s,"iu")&&(o.impersonator=s.iu),UE[t]=o,o}function Hue(t){try{return JSON.parse(zue.decode(t))}catch{throw new Error("Invalid token")}}function Cg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var oG=Que,aG={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(i,A,g){this.fn=i,this.context=A,this.once=g||!1}function o(i,A,g,C,B){if(typeof g!="function")throw new TypeError("The listener must be a function");var S=new s(g,C||i,B),P=r?r+A:A;return i._events[P]?i._events[P].fn?i._events[P]=[i._events[P],S]:i._events[P].push(S):(i._events[P]=S,i._eventsCount++),i}function c(i,A){--i._eventsCount===0?i._events=new n:delete i._events[A]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var A=[],g,C;if(this._eventsCount===0)return A;for(C in g=this._events)e.call(g,C)&&A.push(r?C.slice(1):C);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(g)):A},u.prototype.listeners=function(A){var g=r?r+A:A,C=this._events[g];if(!C)return[];if(C.fn)return[C.fn];for(var B=0,S=C.length,P=new Array(S);B<S;B++)P[B]=C[B].fn;return P},u.prototype.listenerCount=function(A){var g=r?r+A:A,C=this._events[g];return C?C.fn?1:C.length:0},u.prototype.emit=function(A,g,C,B,S,P){var j=r?r+A:A;if(!this._events[j])return!1;var R=this._events[j],N=arguments.length,U,$;if(R.fn){switch(R.once&&this.removeListener(A,R.fn,void 0,!0),N){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,g),!0;case 3:return R.fn.call(R.context,g,C),!0;case 4:return R.fn.call(R.context,g,C,B),!0;case 5:return R.fn.call(R.context,g,C,B,S),!0;case 6:return R.fn.call(R.context,g,C,B,S,P),!0}for($=1,U=new Array(N-1);$<N;$++)U[$-1]=arguments[$];R.fn.apply(R.context,U)}else{var J=R.length,te;for($=0;$<J;$++)switch(R[$].once&&this.removeListener(A,R[$].fn,void 0,!0),N){case 1:R[$].fn.call(R[$].context);break;case 2:R[$].fn.call(R[$].context,g);break;case 3:R[$].fn.call(R[$].context,g,C);break;case 4:R[$].fn.call(R[$].context,g,C,B);break;default:if(!U)for(te=1,U=new Array(N-1);te<N;te++)U[te-1]=arguments[te];R[$].fn.apply(R[$].context,U)}}return!0},u.prototype.on=function(A,g,C){return o(this,A,g,C,!1)},u.prototype.once=function(A,g,C){return o(this,A,g,C,!0)},u.prototype.removeListener=function(A,g,C,B){var S=r?r+A:A;if(!this._events[S])return this;if(!g)return c(this,S),this;var P=this._events[S];if(P.fn)P.fn===g&&(!B||P.once)&&(!C||P.context===C)&&c(this,S);else{for(var j=0,R=[],N=P.length;j<N;j++)(P[j].fn!==g||B&&!P[j].once||C&&P[j].context!==C)&&R.push(P[j]);R.length?this._events[S]=R.length===1?R[0]:R:c(this,S)}return this},u.prototype.removeAllListeners=function(A){var g;return A?(g=r?r+A:A,this._events[g]&&c(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u})(aG);var Vue=aG.exports;function Gue(t){return t.map(encodeURIComponent).join(",")}function lG(t){return Array.isArray(t)?Gue(t):encodeURIComponent(String(t))}function cG(t,e,r){if(r===!1||r===null)return t;var n=/\?/.test(t)?"&":"?",s=encodeURIComponent(e);return r!==void 0&&r!==""&&r!==!0&&(s+="="+lG(r)),""+t+n+s}function que(t,e){if(!e)return t;var r=t;return Object.keys(e).forEach(function(n){var s=e[n];s!==void 0&&(Array.isArray(s)&&(s=s.filter(function(o){return o!=null}).join(",")),r=cG(r,n,s))}),r}function $ue(t,e){if(!e||t.slice(0,4)==="http")return t;var r=t[0]==="/"?"":"/";return""+e.replace(/\/$/,"")+r+t}function Wue(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,function(r,n){var s=e[n];if(s===void 0)throw new Error("Unspecified route parameter "+n);var o=lG(s);return"/"+o}):t}var Kue={appendQueryObject:que,appendQueryParam:cG,prependOrigin:$ue,interpolateRouteParams:Wue},Xue=oG,FF=T1,Yue=Vue,Xw=Kue,j8=mC,Zue=1;function Vm(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var r={};e.body&&(r["content-type"]="application/json");var n=FF(r,e.headers),s=Object.keys(n).reduce(function(o,c){return o[c.toLowerCase()]=n[c],o},{});this.id=Zue++,this._options=e,this.emitter=new Yue,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=s}Vm.prototype.url=function(e){var r=Xw.prependOrigin(this.path,this.origin);r=Xw.appendQueryObject(r,this.query);var n=this.params,s=e??this.client.accessToken;if(s){r=Xw.appendQueryParam(r,"access_token",s);var o=Xue(s).user;n=FF({ownerId:o},n)}return r=Xw.interpolateRouteParams(r,n),r};Vm.prototype.send=function(){var e=this;if(e.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return e.sent=!0,e.client.sendRequest(e).then(function(r){return e.response=r,e.emitter.emit(j8.EVENT_RESPONSE,r),r},function(r){throw e.error=r,e.emitter.emit(j8.EVENT_ERROR,r),r})};Vm.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Vm.prototype.eachPage=function(e){var r=this;function n(c){function u(){delete r._nextPageRequest;var i=c.nextPage();i&&(r._nextPageRequest=i,o(i))}e(null,c,u)}function s(c){e(c,null,function(){})}function o(c){c.send().then(n,s)}o(this)};Vm.prototype.clone=function(){return this._extend()};Vm.prototype._extend=function(e){var r=FF(this._options,e);return new Vm(this.client,r)};var Jue=Vm,ehe=oG,the=Jue,rhe=mC;function uG(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");ehe(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||rhe.API_ORIGIN}uG.prototype.createRequest=function(e){return new the(this,e)};var hG=uG,dG=Rue,fG=hG;function p1(t){fG.call(this,t)}p1.prototype=Object.create(fG.prototype);p1.prototype.constructor=p1;p1.prototype.sendRequest=dG.browserSend;p1.prototype.abortRequest=dG.browserAbort;function nhe(t){return new p1(t)}var pG=nhe,ihe=pG,she=ihe,ohe=Object.prototype.toString,ahe=function(t){var e;return ohe.call(t)==="[object Object]"&&(e=Object.getPrototypeOf(t),e===null||e===Object.getPrototypeOf({}))},lhe=ahe,che=T1,AG="value",zE=`
  `,el={};el.assert=function(t,e){return e=e||{},function(r){var n=Gm(t,r);if(n){var s=NF(n,e);throw e.apiName&&(s=e.apiName+": "+s),new Error(s)}}};el.shape=function(e){var r=fhe(e);return function(s){var o=Gm(el.plainObject,s);if(o)return o;for(var c,u,i=[],A=0;A<r.length;A++)c=r[A].key,u=r[A].value,o=Gm(u,s[c]),o&&i.push([c].concat(o));return i.length<2?i[0]:function(g){i=i.map(function(S){var P=S[0],j=NF(S,g).split(`
`).join(zE);return"- "+P+": "+j});var C=g.path.join("."),B=C===AG?"":" of "+C;return"The following properties"+B+" have invalid values:"+zE+i.join(zE)}}};el.strictShape=function(e){var r=el.shape(e);return function(s){var o=r(s);if(o)return o;var c=Object.keys(s).reduce(function(u,i){return e[i]===void 0&&u.push(i),u},[]);if(c.length!==0)return function(){return"The following keys are invalid: "+c.join(", ")}}};el.arrayOf=function(e){return mG(e)};el.tuple=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return mG(e)};function mG(t){var e=Array.isArray(t),r=function(n){return e?t[n]:t};return function(s){var o=Gm(el.plainArray,s);if(o)return o;if(e&&s.length!==t.length)return"an array with "+t.length+" items";for(var c=0;c<s.length;c++)if(o=Gm(r(c),s[c]),o)return[c].concat(o)}}el.required=function(e){function r(n){return n==null?function(s){return gG(s,yG(s.path)?"cannot be undefined/null.":"is required.")}:e.apply(this,arguments)}return r.__required=!0,r};el.oneOfType=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(n){var s=e.map(function(o){return Gm(o,n)}).filter(Boolean);if(s.length===e.length)return s.every(function(o){return o.length===1&&typeof o[0]=="string"})?uhe(s.map(function(o){return o[0]})):s.reduce(function(o,c){return c.length>o.length?c:o})}};el.equal=function(e){return function(n){if(n!==e)return JSON.stringify(e)}};el.oneOf=function(){var e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),r=e.map(function(n){return el.equal(n)});return el.oneOfType.apply(this,r)};el.range=function(e){var r=e[0],n=e[1];return function(o){var c=Gm(el.number,o);if(c||o<r||o>n)return"number between "+r+" & "+n+" (inclusive)"}};el.any=function(){};el.boolean=function(e){if(typeof e!="boolean")return"boolean"};el.number=function(e){if(typeof e!="number")return"number"};el.plainArray=function(e){if(!Array.isArray(e))return"array"};el.plainObject=function(e){if(!lhe(e))return"object"};el.string=function(e){if(typeof e!="string")return"string"};el.func=function(e){if(typeof e!="function")return"function"};function Gm(t,e){if(!(e==null&&!t.hasOwnProperty("__required"))){var r=t(e);if(r)return Array.isArray(r)?r:[r]}}function NF(t,e){var r=t.length,n=t[r-1],s=t.slice(0,r-1);return s.length===0&&(s=[AG]),e=che(e,{path:s}),typeof n=="function"?n(e):gG(e,hhe(n))}function uhe(t){return t.length<2?t[0]:t.length===2?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function hhe(t){return"must be "+dhe(t)+"."}function dhe(t){return/^an? /.test(t)?t:/^[aeiou]/i.test(t)?"an "+t:/^[a-z]/i.test(t)?"a "+t:t}function gG(t,e){var r=yG(t.path),n=t.path.join(".")+" "+e,s=r?"Item at position ":"";return s+n}function yG(t){return typeof t[t.length-1]=="number"||typeof t[0]=="number"}function fhe(t){return Object.keys(t||{}).map(function(e){return{key:e,value:t[e]}})}el.validate=Gm;el.processMessage=NF;var phe=el,Ahe=T1,Xy=phe;function mhe(t){if(typeof window<"u")return t instanceof Ho.Blob||t instanceof Ho.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof t=="string"||t.pipe!==void 0))return"Filename or Readable stream"}function ghe(t,e){return Xy.assert(Xy.strictShape(t),e)}function yhe(t){var e="date";if(typeof t=="boolean")return e;try{var r=new Date(t);if(r.getTime&&isNaN(r.getTime()))return e}catch{return e}}function vhe(t){return Xy.tuple(Xy.number,Xy.number)(t)}var xhe=Ahe(Xy,{file:mhe,date:yhe,coordinates:vhe,assertShape:ghe});function _he(t,e){var r=function(n,s){return e.indexOf(n)!==-1&&s!==void 0};return typeof e=="function"&&(r=e),Object.keys(t).filter(function(n){return r(n,t[n])}).reduce(function(n,s){return n[s]=t[s],n},{})}var bhe=_he;function whe(t,e){return Object.keys(t).reduce(function(r,n){return r[n]=e(n,t[n]),r},{})}var Che=whe,She=Che;function Bhe(t){return She(t,function(e,r){return typeof r=="boolean"?JSON.stringify(r):r})}var Ehe=Bhe,The=hG,Ihe=pG;function Lhe(t){return function(e){var r;The.prototype.isPrototypeOf(e)?r=e:r=Ihe(e);var n=Object.create(t);return n.client=r,n}}var Fhe=Lhe,vG=T1,po=xhe,u4=bhe,xG=Ehe,Nhe=Fhe,PF={},_G=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];PF.forwardGeocode=function(t){po.assertShape({query:po.required(po.string),mode:po.oneOf("mapbox.places","mapbox.places-permanent"),countries:po.arrayOf(po.string),proximity:po.oneOf(po.coordinates,"ip"),types:po.arrayOf(po.oneOf(_G)),autocomplete:po.boolean,bbox:po.arrayOf(po.number),limit:po.number,language:po.arrayOf(po.string),routing:po.boolean,fuzzyMatch:po.boolean,worldview:po.string,session_token:po.string})(t),t.mode=t.mode||"mapbox.places";var e=xG(vG({country:t.countries},u4(t,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:u4(t,["mode","query"]),query:e})};PF.reverseGeocode=function(t){po.assertShape({query:po.required(po.coordinates),mode:po.oneOf("mapbox.places","mapbox.places-permanent"),countries:po.arrayOf(po.string),types:po.arrayOf(po.oneOf(_G)),bbox:po.arrayOf(po.number),limit:po.number,language:po.arrayOf(po.string),reverseMode:po.oneOf("distance","score"),routing:po.boolean,worldview:po.string,session_token:po.string})(t),t.mode=t.mode||"mapbox.places";var e=xG(vG({country:t.countries},u4(t,["country","types","bbox","limit","language","reverseMode","routing","worldview","session_token"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:u4(t,["mode","query"]),query:e})};var Phe=Nhe(PF);let Mhe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",bG=t=>crypto.getRandomValues(new Uint8Array(t)),wG=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(o=e)=>{let c="";for(;;){let u=r(s),i=s;for(;i--;)if(c+=t[u[i]&n]||"",c.length===o)return c}}},jhe=(t,e=21)=>wG(t,e,bG),khe=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");const Dhe=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:jhe,customRandom:wG,nanoid:khe,random:bG,urlAlphabet:Mhe},Symbol.toStringTag,{value:"Module"})),Ohe=U4(Dhe);var Rhe=Ohe.nanoid;function CG(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.3.0",this.pluginSessionID=this.generateSessionID(),this.sessionIncrementer=0,this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}CG.prototype={select:function(t,e){var r=this.getEventPayload("search.select",e,{selectedFeature:t});if(r&&!(r.resultIndex===this.lastSentIndex&&r.queryString===this.lastSentInput||r.resultIndex==-1))return this.lastSentIndex=r.resultIndex,this.lastSentInput=r.queryString,this.push(r)},start:function(t){var e=this.getEventPayload("search.start",t);if(e)return this.push(e)},keyevent:function(t,e){if(t.key&&!(t.metaKey||[9,27,37,39,13,38,40].indexOf(t.keyCode)!==-1)){var r=this.getEventPayload("search.keystroke",e,{key:t.key});if(r)return this.push(r)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var r=this.getRequestOptions(t);this.request(r,(function(n){if(n)return this.handleError(n,e);if(e)return e()}).bind(this))},getRequestOptions:function(t){Array.isArray(t)||(t=[t]);var e={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return e},getEventPayload:function(t,e,r={}){if(t==="search.select"&&!r.selectedFeature||t==="search.keystroke"&&!r.key)return null;var n;if(!e.options.proximity)n=null;else if(typeof e.options.proximity=="object")n=[e.options.proximity.longitude,e.options.proximity.latitude];else if(e.options.proximity==="ip"){var s=e._headers?e._headers["ip-proximity"]:null;s&&typeof s=="string"?n=s.split(",").map(parseFloat):n=[999,999]}else n=e.options.proximity;var o=e._map?e._map.getZoom():void 0,c={event:t,version:this.getEventSchemaVersion(t),created:+new Date,sessionIdentifier:this.getSessionId(),country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:e.options.autocomplete,fuzzyMatch:e.options.fuzzyMatch,proximity:n,limit:e.options.limit,routing:e.options.routing,worldview:e.options.worldview,mapZoom:o,keyboardLocale:this.locale};if(t==="search.select"?c.queryString=e.inputString:t!="search.select"&&e._inputEl?c.queryString=e._inputEl.value:c.queryString=e.inputString,["search.keystroke","search.select"].includes(t)&&(c.path="geocoding/v5/mapbox.places"),t==="search.keystroke"&&r.key)c.lastAction=r.key;else if(t==="search.select"&&r.selectedFeature){var u=r.selectedFeature,i=this.getSelectedIndex(u,e);if(c.resultIndex=i,c.resultPlaceName=u.place_name,c.resultId=u.id,u.properties&&(c.resultMapboxId=u.properties.mapbox_id),e._typeahead){var A=e._typeahead.data;A&&A.length>0&&(c.suggestionIds=this.getSuggestionIds(A),c.suggestionNames=this.getSuggestionNames(A),c.suggestionTypes=this.getSuggestionTypes(A),c.suggestionSources=this.getSuggestionSources(A))}}return this.validatePayload(c)?c:null},request:function(t,e){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(this.readyState==4)return this.status==204?e(null):e(this.statusText)},r.open(t.method,t.host+"/"+t.path,!0);for(var n in t.headers){var s=t.headers[n];r.setRequestHeader(n,s)}r.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return Rhe()},getSessionId:function(){return this.pluginSessionID+"."+this.sessionIncrementer},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var r=e._typeahead.data,n=t.id,s=r.map(function(c){return c.id}),o=s.indexOf(n);return o}},getSuggestionIds:function(t){return t.map(function(e){return e.properties?e.properties.mapbox_id||"":e.id||""})},getSuggestionNames:function(t){return t.map(function(e){return e.place_name||""})},getSuggestionTypes:function(t){return t.map(function(e){return e.place_type&&Array.isArray(e.place_type)&&e.place_type[0]||""})},getSuggestionSources:function(t){return t.map(function(e){return e._source||""})},getEventSchemaVersion:function(t){return["search.keystroke","search.select"].includes(t)?"2.2":"2.0"},validatePayload:function(t){if(!t||!t.event)return!1;var e=["event","created","sessionIdentifier","queryString"],r=["event","created","sessionIdentifier","queryString","lastAction"],n=["event","created","sessionIdentifier","queryString","resultIndex","path","suggestionIds"],s=t.event;return s==="search.start"?this.objectHasRequiredProps(t,e):s==="search.keystroke"?this.objectHasRequiredProps(t,r):s==="search.select"?this.objectHasRequiredProps(t,n):!0},objectHasRequiredProps:function(t,e){return e.every(function(r){return r==="queryString"?typeof t[r]=="string"&&t[r].length>0:t[r]!==void 0})},shouldEnableLogging:function(t){return!(t.enableEventLogging===!1||t.origin&&t.origin!=="https://api.mapbox.com")},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}};var Uhe=CG,zhe={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},Qhe={placeholder:zhe},SG={exports:{}};(function(t){(function(e,r,n){t.exports?t.exports=n():e[r]=n()})(Ho,"subtag",function(){var e="",r=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(i){return i.match(r)||[]}function s(i){return n(i).filter(function(A,g){return A&&g})}function o(i){return i=n(i),{language:i[1]||e,extlang:i[2]||e,script:i[3]||e,region:i[4]||e}}function c(i,A,g){Object.defineProperty(i,A,{value:g,enumerable:!0})}function u(i,A,g){function C(B){return n(B)[i]||e}c(C,"pattern",A),c(o,g,C)}return u(1,/^[a-zA-Z]{2,3}$/,"language"),u(2,/^[a-zA-Z]{3}$/,"extlang"),u(3,/^[a-zA-Z]{4}$/,"script"),u(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),c(o,"split",s),o})})(SG);var Hhe=SG.exports;function BG(){}BG.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const t={enableHighAccuracy:!0};return new Promise(function(e,r){window.navigator.geolocation.getCurrentPosition(e,r,t)})}};var Vhe=BG;function Ghe(t,e){const r=EG(t),n=["address","street","place","country"];var s;if(typeof e=="function")return e(r);const o=n.indexOf(e);return o===-1?s=n:s=n.slice(o),s.reduce(function(c,u){return r[u]?(c!==""&&(c=c+", "),c+r[u]):c},"")}function EG(t){const e=t.address||"",r=t.text||"",n=t.place_name||"",o={address:n.split(",")[0],houseNumber:e,street:r,placeName:n};return t.context.forEach(function(c){const u=c.id.split(".")[0];o[u]=c.text}),o}const qhe=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var $he={transformFeatureToGeolocationText:Ghe,getAddressInfo:EG,REVERSE_GEOCODE_COORD_RGX:qhe},Whe=Xce,Khe=pue,Pg=T1,Xhe=_ue.EventEmitter,k8=bue,QE=she,HE=Phe,Yhe=Uhe,Zhe=Qhe,Jhe=Hhe,ede=Vhe,D8=$he;const QA={FORWARD:0,LOCAL:1,REVERSE:2};function tde(){var t=document.createElement("div");return t.className="mapboxgl-ctrl-geocoder--powered-by",t.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',t}function TG(t){this._eventEmitter=new Xhe,this.options=Pg({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new ede}TG.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},_headers:{},addTo:function(t){function e(r,n){if(!document.body.contains(n))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=r.onAdd();n.appendChild(s)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else if(typeof t=="string"){const r=document.querySelectorAll(t);if(r.length===0)throw new Error("Element ",t,"not found.");if(r.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,r[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(t){if(t&&typeof t!="string"&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=HE(QE({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new Yhe(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var r=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Khe(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(A){this.eventManager.keyevent(A,this)}).bind(this));var n=document.createElement("div");n.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),n.appendChild(this._clearEl),n.appendChild(this._loadingEl),e.appendChild(r),e.appendChild(this._inputEl),e.appendChild(n),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var o=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(o),n.appendChild(this._geolocateEl),this._showGeolocateButton()}var c=this._typeahead=new Whe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),c.getItemValue=this.options.getItemValue;var u=c.list.draw,i=this._footerNode=tde();return c.list.draw=function(){u.call(this),i.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),i.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(i)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(t){this._hideLoadingIcon();const e={geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}};this._handleMarker(e),this._fly(e),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(e),this._showClearButton(),this.fresh=!1;const r={limit:1,language:[this.options.language],query:e.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const n=e.geometry.coordinates[0]+","+e.geometry.coordinates[1];this._setInputValue(n),this._eventEmitter.emit("result",{result:e})}else this.geocoderService.reverseGeocode(r).send().then((function(n){const s=n.body.features[0];if(s){const o=D8.transformFeatureToGeolocationText(s,this.options.addressAccuracy);this._setInputValue(o),s.user_coordinates=e.geometry.coordinates,this._eventEmitter.emit("result",{result:s})}else this._eventEmitter.emit("result",{result:{user_coordinates:e.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(t){t.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),r.setAttribute("viewBox","0 0 18 18"),r.setAttribute("xml:space","preserve"),r.setAttribute("width",18),r.setAttribute("height",18),r.innerHTML=e,r},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(t){this._inputEl.value=t,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,r=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var n=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target,s=n?n.value:"";if(!s)return this.fresh=!0,t.keyCode!==r&&this.clear(t),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(t.metaKey||[r,e,37,39,13,38,40].indexOf(t.keyCode)!==-1)&&n.value.length>=this.options.minLength&&this._geocode(n.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;t&&JSON.stringify(t)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(t),this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this))},_fly:function(t){var e;if(t.properties&&k8[t.properties.short_code])e=Pg({},this.options.flyTo),this._map&&this._map.fitBounds(k8[t.properties.short_code].bbox,e);else if(t.bbox){var r=t.bbox;e=Pg({},this.options.flyTo),this._map&&this._map.fitBounds([[r[0],r[1]],[r[2],r[3]]],e)}else{var n={zoom:this.options.zoom};e=Pg({},n,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}},_requestType:function(t,e){var r;return t.localGeocoderOnly?r=QA.LOCAL:t.reverseGeocode&&D8.REVERSE_GEOCODE_COORD_RGX.test(e)?r=QA.REVERSE:r=QA.FORWARD,r},_setupConfig:function(t,e){const r=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],n=/[\s,]+/;var s=this,o=r.reduce(function(u,i){if(s.options[i]===void 0||s.options[i]===null)return u;["countries","types","language"].indexOf(i)>-1?u[i]=s.options[i].split(n):u[i]=s.options[i];const A=typeof s.options[i].longitude=="number"&&typeof s.options[i].latitude=="number";if(i==="proximity"&&A){const g=s.options[i].longitude,C=s.options[i].latitude;u[i]=[g,C]}return u},{});switch(t){case QA.REVERSE:{var c=e.split(n).map(function(u){return parseFloat(u,10)});s.options.flipCoordinates||c.reverse(),o.types&&o.types[0],o=Pg(o,{query:c,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(u){u in o&&delete o[u]})}break;case QA.FORWARD:{const u=e.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(u)&&(e=e.replace(/,/g," ")),o=Pg(o,{query:e})}break}return o.session_token=this.eventManager.getSessionId(),o},_geocode:function(t){this.inputString=t,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:t});const e=this._requestType(this.options,t),r=this._setupConfig(e,t);var n;switch(e){case QA.LOCAL:n=Promise.resolve();break;case QA.FORWARD:n=this.geocoderService.forwardGeocode(r).send();break;case QA.REVERSE:n=this.geocoderService.reverseGeocode(r).send();break}var s=this.options.localGeocoder?this.options.localGeocoder(t)||[]:[],o=[],c=null;return n.catch((function(u){c=u}).bind(this)).then((function(u){this._hideLoadingIcon();var i={};return u?u.statusCode=="200"&&(i=u.body,i.request=u.request,i.headers=u.headers,this._headers=u.headers):i={type:"FeatureCollection",features:[]},i.config=r,this.fresh&&(this.eventManager.start(this),this.fresh=!1),i.features&&i.features.length&&i.features.map(function(A){A._source="mapbox"}),i.features=i.features?s.concat(i.features):s,this.options.externalGeocoder?(o=this.options.externalGeocoder(t,i.features)||Promise.resolve([]),o.then(function(A){return i.features=i.features?A.concat(i.features):A,i},function(){return i})):i}).bind(this)).then((function(u){if(c)throw c;this.options.filter&&u.features.length&&(u.features=u.features.filter(this.options.filter)),u.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",u),this._typeahead.update(u.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",u))}).bind(this)).catch((function(u){this._hideLoadingIcon(),this._hideAttribution(),s.length&&this.options.localGeocoder||o.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(s)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:s}),this._eventEmitter.emit("error",{error:u})}).bind(this)),n},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this.eventManager.sessionIncrementer++,this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var e=this;t.relatedTarget&&e._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var r=e.features[0];this._typeahead.selected=r,this._inputEl.value=r.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){var t="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(t)},_renderLocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(t)},_renderNoResults:function(){var t="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(t)},_renderUserDeniedGeolocationError:function(){var t="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(t)},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=Jhe.language(t),r=Zhe.placeholder[e];if(r)return r}return"Search"},setInput:function(t,e){return e===void 0&&(e=!1),this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&(e?this._geocode(t):this._onChange()),this},setProximity:function(t,e=!0){return this.options.proximity=t,e&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&typeof t=="function"&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.options.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.options.placeholder,this._inputEl.setAttribute("aria-label",this.options.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=HE(QE({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(t){return this.options.accessToken=t,this.geocoderService=HE(QE({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(t){return this.options.autocomplete=t,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(t){return this.options.fuzzyMatch=t,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(t){return this.options.routing=t,this},getRouting:function(){return this.options.routing},setWorldview:function(t){return this.options.worldview=t,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(t){if(this._map){this._removeMarker();var e={color:"#4668F2"},r=Pg({},e,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(r),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&t.geometry.type==="Point"&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}};var rde=TG;const gC=Sp(rde);var IG={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Ho,function(){var r=function(ae,Oe){var At={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Ht={on:function(tr,_r,fn){if(At[tr]===void 0)throw new Error("Invalid event type: "+tr);At[tr].push({selector:_r,fn})},render:function(tr){Oe.store.featureChanged(tr)}},er=function(tr,_r){for(var fn=At[tr],pn=fn.length;pn--;){var Nn=fn[pn];if(Nn.selector(_r)){Nn.fn.call(Ht,_r)||Oe.store.render(),Oe.ui.updateMapClasses();break}}};return ae.start.call(Ht),{render:ae.render,stop:function(){ae.stop&&ae.stop()},trash:function(){ae.trash&&(ae.trash(),Oe.store.render())},combineFeatures:function(){ae.combineFeatures&&ae.combineFeatures()},uncombineFeatures:function(){ae.uncombineFeatures&&ae.uncombineFeatures()},drag:function(tr){er("drag",tr)},click:function(tr){er("click",tr)},mousemove:function(tr){er("mousemove",tr)},mousedown:function(tr){er("mousedown",tr)},mouseup:function(tr){er("mouseup",tr)},mouseout:function(tr){er("mouseout",tr)},keydown:function(tr){er("keydown",tr)},keyup:function(tr){er("keyup",tr)},touchstart:function(tr){er("touchstart",tr)},touchmove:function(tr){er("touchmove",tr)},touchend:function(tr){er("touchend",tr)},tap:function(tr){er("tap",tr)}}};function n(ae){return ae&&ae.__esModule&&Object.prototype.hasOwnProperty.call(ae,"default")?ae.default:ae}function s(ae){if(ae.__esModule)return ae;var Oe=ae.default;if(typeof Oe=="function"){var At=function Ht(){if(this instanceof Ht){var er=[null];er.push.apply(er,arguments);var tr=Function.bind.apply(Oe,er);return new tr}return Oe.apply(this,arguments)};At.prototype=Oe.prototype}else At={};return Object.defineProperty(At,"__esModule",{value:!0}),Object.keys(ae).forEach(function(Ht){var er=Object.getOwnPropertyDescriptor(ae,Ht);Object.defineProperty(At,Ht,er.get?er:{enumerable:!0,get:function(){return ae[Ht]}})}),At}var o={},c={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},u=c;function i(ae){var Oe=0;if(ae&&ae.length>0){Oe+=Math.abs(A(ae[0]));for(var At=1;At<ae.length;At++)Oe-=Math.abs(A(ae[At]))}return Oe}function A(ae){var Oe,At,Ht,er,tr,_r,fn=0,pn=ae.length;if(pn>2){for(_r=0;_r<pn;_r++)_r===pn-2?(Ht=pn-2,er=pn-1,tr=0):_r===pn-1?(Ht=pn-1,er=0,tr=1):(Ht=_r,er=_r+1,tr=_r+2),Oe=ae[Ht],At=ae[er],fn+=(g(ae[tr][0])-g(Oe[0]))*Math.sin(g(At[1]));fn=fn*u.RADIUS*u.RADIUS/2}return fn}function g(ae){return ae*Math.PI/180}o.geometry=function ae(Oe){var At,Ht=0;switch(Oe.type){case"Polygon":return i(Oe.coordinates);case"MultiPolygon":for(At=0;At<Oe.coordinates.length;At++)Ht+=i(Oe.coordinates[At]);return Ht;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(At=0;At<Oe.geometries.length;At++)Ht+=ae(Oe.geometries[At]);return Ht}},o.ring=A;var C={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},B={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},S={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},P={POLYGON:"polygon",LINE:"line_string",POINT:"point"},j={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},R={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},N={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},U={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},$={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},J={ACTIVE:"true",INACTIVE:"false"},te=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],ue=-85,oe=Object.freeze({__proto__:null,classes:C,sources:B,cursors:S,types:P,geojsonTypes:j,modes:R,events:N,updateActions:U,meta:$,activeStates:J,interactions:te,LAT_MIN:-90,LAT_RENDERED_MIN:ue,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),K={Point:0,LineString:1,MultiLineString:1,Polygon:2};function ce(ae,Oe){var At=K[ae.geometry.type]-K[Oe.geometry.type];return At===0&&ae.geometry.type===j.POLYGON?ae.area-Oe.area:At}function me(ae){return ae.map(function(Oe){return Oe.geometry.type===j.POLYGON&&(Oe.area=o.geometry({type:j.FEATURE,property:{},geometry:Oe.geometry})),Oe}).sort(ce).map(function(Oe){return delete Oe.area,Oe})}function Z(ae,Oe){return Oe===void 0&&(Oe=0),[[ae.point.x-Oe,ae.point.y-Oe],[ae.point.x+Oe,ae.point.y+Oe]]}function Y(ae){if(this._items={},this._nums={},this._length=ae?ae.length:0,ae)for(var Oe=0,At=ae.length;Oe<At;Oe++)this.add(ae[Oe]),ae[Oe]!==void 0&&(typeof ae[Oe]=="string"?this._items[ae[Oe]]=Oe:this._nums[ae[Oe]]=Oe)}Y.prototype.add=function(ae){return this.has(ae)||(this._length++,typeof ae=="string"?this._items[ae]=this._length:this._nums[ae]=this._length),this},Y.prototype.delete=function(ae){return this.has(ae)===!1||(this._length--,delete this._items[ae],delete this._nums[ae]),this},Y.prototype.has=function(ae){return(typeof ae=="string"||typeof ae=="number")&&(this._items[ae]!==void 0||this._nums[ae]!==void 0)},Y.prototype.values=function(){var ae=this,Oe=[];return Object.keys(this._items).forEach(function(At){Oe.push({k:At,v:ae._items[At]})}),Object.keys(this._nums).forEach(function(At){Oe.push({k:JSON.parse(At),v:ae._nums[At]})}),Oe.sort(function(At,Ht){return At.v-Ht.v}).map(function(At){return At.k})},Y.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Le=[$.FEATURE,$.MIDPOINT,$.VERTEX],_e={click:function(ae,Oe,At){return Qe(ae,Oe,At,At.options.clickBuffer)},touch:function(ae,Oe,At){return Qe(ae,Oe,At,At.options.touchBuffer)}};function Qe(ae,Oe,At,Ht){if(At.map===null)return[];var er=ae?Z(ae,Ht):Oe,tr={};At.options.styles&&(tr.layers=At.options.styles.map(function(Nn){return Nn.id}).filter(function(Nn){return At.map.getLayer(Nn)!=null}));var _r=At.map.queryRenderedFeatures(er,tr).filter(function(Nn){return Le.indexOf(Nn.properties.meta)!==-1}),fn=new Y,pn=[];return _r.forEach(function(Nn){var Mn=Nn.properties.id;fn.has(Mn)||(fn.add(Mn),pn.push(Nn))}),me(pn)}function De(ae,Oe){var At=_e.click(ae,null,Oe),Ht={mouse:S.NONE};return At[0]&&(Ht.mouse=At[0].properties.active===J.ACTIVE?S.MOVE:S.POINTER,Ht.feature=At[0].properties.meta),Oe.events.currentModeName().indexOf("draw")!==-1&&(Ht.mouse=S.ADD),Oe.ui.queueMapClasses(Ht),Oe.ui.updateMapClasses(),At[0]}function Be(ae,Oe){var At=ae.x-Oe.x,Ht=ae.y-Oe.y;return Math.sqrt(At*At+Ht*Ht)}function xe(ae,Oe,At){At===void 0&&(At={});var Ht=At.fineTolerance!=null?At.fineTolerance:4,er=At.grossTolerance!=null?At.grossTolerance:12,tr=At.interval!=null?At.interval:500;ae.point=ae.point||Oe.point,ae.time=ae.time||Oe.time;var _r=Be(ae.point,Oe.point);return _r<Ht||_r<er&&Oe.time-ae.time<tr}function ze(ae,Oe,At){At===void 0&&(At={});var Ht=At.tolerance!=null?At.tolerance:25,er=At.interval!=null?At.interval:250;return ae.point=ae.point||Oe.point,ae.time=ae.time||Oe.time,Be(ae.point,Oe.point)<Ht&&Oe.time-ae.time<er}var Fe={exports:{}},it=Fe.exports=function(ae,Oe){if(Oe||(Oe=16),ae===void 0&&(ae=128),ae<=0)return"0";for(var At=Math.log(Math.pow(2,ae))/Math.log(Oe),Ht=2;At===1/0;Ht*=2)At=Math.log(Math.pow(2,ae/Ht))/Math.log(Oe)*Ht;var er=At-Math.floor(At),tr="";for(Ht=0;Ht<Math.floor(At);Ht++)tr=Math.floor(Math.random()*Oe).toString(Oe)+tr;if(er){var _r=Math.pow(Oe,er);tr=Math.floor(Math.random()*_r).toString(Oe)+tr}var fn=parseInt(tr,Oe);return fn!==1/0&&fn>=Math.pow(2,ae)?it(ae,Oe):tr};it.rack=function(ae,Oe,At){var Ht=function(tr){var _r=0;do{if(_r++>10){if(!At)throw new Error("too many ID collisions, use more bits");ae+=At}var fn=it(ae,Oe)}while(Object.hasOwnProperty.call(er,fn));return er[fn]=tr,fn},er=Ht.hats={};return Ht.get=function(tr){return Ht.hats[tr]},Ht.set=function(tr,_r){return Ht.hats[tr]=_r,Ht},Ht.bits=ae||128,Ht.base=Oe||16,Ht};var ie=n(Fe.exports),le=function(ae,Oe){this.ctx=ae,this.properties=Oe.properties||{},this.coordinates=Oe.geometry.coordinates,this.id=Oe.id||ie(),this.type=Oe.geometry.type};le.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},le.prototype.incomingCoords=function(ae){this.setCoordinates(ae)},le.prototype.setCoordinates=function(ae){this.coordinates=ae,this.changed()},le.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},le.prototype.setProperty=function(ae,Oe){this.properties[ae]=Oe},le.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:j.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},le.prototype.internal=function(ae){var Oe={id:this.id,meta:$.FEATURE,"meta:type":this.type,active:J.INACTIVE,mode:ae};if(this.ctx.options.userProperties)for(var At in this.properties)Oe["user_"+At]=this.properties[At];return{type:j.FEATURE,properties:Oe,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var fe=function(ae,Oe){le.call(this,ae,Oe)};(fe.prototype=Object.create(le.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},fe.prototype.updateCoordinate=function(ae,Oe,At){this.coordinates=arguments.length===3?[Oe,At]:[ae,Oe],this.changed()},fe.prototype.getCoordinate=function(){return this.getCoordinates()};var be=function(ae,Oe){le.call(this,ae,Oe)};(be.prototype=Object.create(le.prototype)).isValid=function(){return this.coordinates.length>1},be.prototype.addCoordinate=function(ae,Oe,At){this.changed();var Ht=parseInt(ae,10);this.coordinates.splice(Ht,0,[Oe,At])},be.prototype.getCoordinate=function(ae){var Oe=parseInt(ae,10);return JSON.parse(JSON.stringify(this.coordinates[Oe]))},be.prototype.removeCoordinate=function(ae){this.changed(),this.coordinates.splice(parseInt(ae,10),1)},be.prototype.updateCoordinate=function(ae,Oe,At){var Ht=parseInt(ae,10);this.coordinates[Ht]=[Oe,At],this.changed()};var He=function(ae,Oe){le.call(this,ae,Oe),this.coordinates=this.coordinates.map(function(At){return At.slice(0,-1)})};(He.prototype=Object.create(le.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(ae){return ae.length>2})},He.prototype.incomingCoords=function(ae){this.coordinates=ae.map(function(Oe){return Oe.slice(0,-1)}),this.changed()},He.prototype.setCoordinates=function(ae){this.coordinates=ae,this.changed()},He.prototype.addCoordinate=function(ae,Oe,At){this.changed();var Ht=ae.split(".").map(function(er){return parseInt(er,10)});this.coordinates[Ht[0]].splice(Ht[1],0,[Oe,At])},He.prototype.removeCoordinate=function(ae){this.changed();var Oe=ae.split(".").map(function(Ht){return parseInt(Ht,10)}),At=this.coordinates[Oe[0]];At&&(At.splice(Oe[1],1),At.length<3&&this.coordinates.splice(Oe[0],1))},He.prototype.getCoordinate=function(ae){var Oe=ae.split(".").map(function(Ht){return parseInt(Ht,10)}),At=this.coordinates[Oe[0]];return JSON.parse(JSON.stringify(At[Oe[1]]))},He.prototype.getCoordinates=function(){return this.coordinates.map(function(ae){return ae.concat([ae[0]])})},He.prototype.updateCoordinate=function(ae,Oe,At){this.changed();var Ht=ae.split("."),er=parseInt(Ht[0],10),tr=parseInt(Ht[1],10);this.coordinates[er]===void 0&&(this.coordinates[er]=[]),this.coordinates[er][tr]=[Oe,At]};var Je={MultiPoint:fe,MultiLineString:be,MultiPolygon:He},tt=function(ae,Oe,At,Ht,er){var tr=At.split("."),_r=parseInt(tr[0],10),fn=tr[1]?tr.slice(1).join("."):null;return ae[_r][Oe](fn,Ht,er)},st=function(ae,Oe){if(le.call(this,ae,Oe),delete this.coordinates,this.model=Je[Oe.geometry.type],this.model===void 0)throw new TypeError(Oe.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(Oe.geometry.coordinates)};function Ct(ae){this.map=ae.map,this.drawConfig=JSON.parse(JSON.stringify(ae.options||{})),this._ctx=ae}(st.prototype=Object.create(le.prototype))._coordinatesToFeatures=function(ae){var Oe=this,At=this.model.bind(this);return ae.map(function(Ht){return new At(Oe.ctx,{id:ie(),type:j.FEATURE,properties:{},geometry:{coordinates:Ht,type:Oe.type.replace("Multi","")}})})},st.prototype.isValid=function(){return this.features.every(function(ae){return ae.isValid()})},st.prototype.setCoordinates=function(ae){this.features=this._coordinatesToFeatures(ae),this.changed()},st.prototype.getCoordinate=function(ae){return tt(this.features,"getCoordinate",ae)},st.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(ae){return ae.type===j.POLYGON?ae.getCoordinates():ae.coordinates})))},st.prototype.updateCoordinate=function(ae,Oe,At){tt(this.features,"updateCoordinate",ae,Oe,At),this.changed()},st.prototype.addCoordinate=function(ae,Oe,At){tt(this.features,"addCoordinate",ae,Oe,At),this.changed()},st.prototype.removeCoordinate=function(ae){tt(this.features,"removeCoordinate",ae),this.changed()},st.prototype.getFeatures=function(){return this.features},Ct.prototype.setSelected=function(ae){return this._ctx.store.setSelected(ae)},Ct.prototype.setSelectedCoordinates=function(ae){var Oe=this;this._ctx.store.setSelectedCoordinates(ae),ae.reduce(function(At,Ht){return At[Ht.feature_id]===void 0&&(At[Ht.feature_id]=!0,Oe._ctx.store.get(Ht.feature_id).changed()),At},{})},Ct.prototype.getSelected=function(){return this._ctx.store.getSelected()},Ct.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Ct.prototype.isSelected=function(ae){return this._ctx.store.isSelected(ae)},Ct.prototype.getFeature=function(ae){return this._ctx.store.get(ae)},Ct.prototype.select=function(ae){return this._ctx.store.select(ae)},Ct.prototype.deselect=function(ae){return this._ctx.store.deselect(ae)},Ct.prototype.deleteFeature=function(ae,Oe){return Oe===void 0&&(Oe={}),this._ctx.store.delete(ae,Oe)},Ct.prototype.addFeature=function(ae){return this._ctx.store.add(ae)},Ct.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Ct.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Ct.prototype.setActionableState=function(ae){ae===void 0&&(ae={});var Oe={trash:ae.trash||!1,combineFeatures:ae.combineFeatures||!1,uncombineFeatures:ae.uncombineFeatures||!1};return this._ctx.events.actionable(Oe)},Ct.prototype.changeMode=function(ae,Oe,At){return Oe===void 0&&(Oe={}),At===void 0&&(At={}),this._ctx.events.changeMode(ae,Oe,At)},Ct.prototype.updateUIClasses=function(ae){return this._ctx.ui.queueMapClasses(ae)},Ct.prototype.activateUIButton=function(ae){return this._ctx.ui.setActiveButton(ae)},Ct.prototype.featuresAt=function(ae,Oe,At){if(At===void 0&&(At="click"),At!=="click"&&At!=="touch")throw new Error("invalid buffer type");return _e[At](ae,Oe,this._ctx)},Ct.prototype.newFeature=function(ae){var Oe=ae.geometry.type;return Oe===j.POINT?new fe(this._ctx,ae):Oe===j.LINE_STRING?new be(this._ctx,ae):Oe===j.POLYGON?new He(this._ctx,ae):new st(this._ctx,ae)},Ct.prototype.isInstanceOf=function(ae,Oe){if(ae===j.POINT)return Oe instanceof fe;if(ae===j.LINE_STRING)return Oe instanceof be;if(ae===j.POLYGON)return Oe instanceof He;if(ae==="MultiFeature")return Oe instanceof st;throw new Error("Unknown feature class: "+ae)},Ct.prototype.doRender=function(ae){return this._ctx.store.featureChanged(ae)},Ct.prototype.onSetup=function(){},Ct.prototype.onDrag=function(){},Ct.prototype.onClick=function(){},Ct.prototype.onMouseMove=function(){},Ct.prototype.onMouseDown=function(){},Ct.prototype.onMouseUp=function(){},Ct.prototype.onMouseOut=function(){},Ct.prototype.onKeyUp=function(){},Ct.prototype.onKeyDown=function(){},Ct.prototype.onTouchStart=function(){},Ct.prototype.onTouchMove=function(){},Ct.prototype.onTouchEnd=function(){},Ct.prototype.onTap=function(){},Ct.prototype.onStop=function(){},Ct.prototype.onTrash=function(){},Ct.prototype.onCombineFeature=function(){},Ct.prototype.onUncombineFeature=function(){},Ct.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ue={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ft=Object.keys(Ue);function Zt(ae){var Oe=Object.keys(ae);return function(At,Ht){Ht===void 0&&(Ht={});var er={},tr=Oe.reduce(function(_r,fn){return _r[fn]=ae[fn],_r},new Ct(At));return{start:function(){var _r=this;er=tr.onSetup(Ht),Ft.forEach(function(fn){var pn,Nn=Ue[fn],Mn=function(){return!1};ae[Nn]&&(Mn=function(){return!0}),_r.on(fn,Mn,(pn=Nn,function(Xr){return tr[pn](er,Xr)}))})},stop:function(){tr.onStop(er)},trash:function(){tr.onTrash(er)},combineFeatures:function(){tr.onCombineFeatures(er)},uncombineFeatures:function(){tr.onUncombineFeatures(er)},render:function(_r,fn){tr.toDisplayFeatures(er,_r,fn)}}}}function fr(ae){return[].concat(ae).filter(function(Oe){return Oe!==void 0})}function Ye(){var ae=this;if(!(ae.ctx.map&&ae.ctx.map.getSource(B.HOT)!==void 0))return pn();var Oe=ae.ctx.events.currentModeName();ae.ctx.ui.queueMapClasses({mode:Oe});var At=[],Ht=[];ae.isDirty?Ht=ae.getAllIds():(At=ae.getChangedIds().filter(function(Nn){return ae.get(Nn)!==void 0}),Ht=ae.sources.hot.filter(function(Nn){return Nn.properties.id&&At.indexOf(Nn.properties.id)===-1&&ae.get(Nn.properties.id)!==void 0}).map(function(Nn){return Nn.properties.id})),ae.sources.hot=[];var er=ae.sources.cold.length;ae.sources.cold=ae.isDirty?[]:ae.sources.cold.filter(function(Nn){var Mn=Nn.properties.id||Nn.properties.parent;return At.indexOf(Mn)===-1});var tr=er!==ae.sources.cold.length||Ht.length>0;function _r(Nn,Mn){var Xr=ae.get(Nn).internal(Oe);ae.ctx.events.currentModeRender(Xr,function(Qn){ae.sources[Mn].push(Qn)})}if(At.forEach(function(Nn){return _r(Nn,"hot")}),Ht.forEach(function(Nn){return _r(Nn,"cold")}),tr&&ae.ctx.map.getSource(B.COLD).setData({type:j.FEATURE_COLLECTION,features:ae.sources.cold}),ae.ctx.map.getSource(B.HOT).setData({type:j.FEATURE_COLLECTION,features:ae.sources.hot}),ae._emitSelectionChange&&(ae.ctx.map.fire(N.SELECTION_CHANGE,{features:ae.getSelected().map(function(Nn){return Nn.toGeoJSON()}),points:ae.getSelectedCoordinates().map(function(Nn){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:Nn.coordinates}}})}),ae._emitSelectionChange=!1),ae._deletedFeaturesToEmit.length){var fn=ae._deletedFeaturesToEmit.map(function(Nn){return Nn.toGeoJSON()});ae._deletedFeaturesToEmit=[],ae.ctx.map.fire(N.DELETE,{features:fn})}function pn(){ae.isDirty=!1,ae.clearChangedIds()}pn(),ae.ctx.map.fire(N.RENDER,{})}function Re(ae){var Oe,At=this;this._features={},this._featureIds=new Y,this._selectedFeatureIds=new Y,this._selectedCoordinates=[],this._changedFeatureIds=new Y,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=ae,this.sources={hot:[],cold:[]},this.render=function(){Oe||(Oe=requestAnimationFrame(function(){Oe=null,Ye.call(At)}))},this.isDirty=!1}function hr(ae,Oe){var At=ae._selectedCoordinates.filter(function(Ht){return ae._selectedFeatureIds.has(Ht.feature_id)});ae._selectedCoordinates.length===At.length||Oe.silent||(ae._emitSelectionChange=!0),ae._selectedCoordinates=At}Re.prototype.createRenderBatch=function(){var ae=this,Oe=this.render,At=0;return this.render=function(){At++},function(){ae.render=Oe,At>0&&ae.render()}},Re.prototype.setDirty=function(){return this.isDirty=!0,this},Re.prototype.featureChanged=function(ae){return this._changedFeatureIds.add(ae),this},Re.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Re.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Re.prototype.getAllIds=function(){return this._featureIds.values()},Re.prototype.add=function(ae){return this.featureChanged(ae.id),this._features[ae.id]=ae,this._featureIds.add(ae.id),this},Re.prototype.delete=function(ae,Oe){var At=this;return Oe===void 0&&(Oe={}),fr(ae).forEach(function(Ht){At._featureIds.has(Ht)&&(At._featureIds.delete(Ht),At._selectedFeatureIds.delete(Ht),Oe.silent||At._deletedFeaturesToEmit.indexOf(At._features[Ht])===-1&&At._deletedFeaturesToEmit.push(At._features[Ht]),delete At._features[Ht],At.isDirty=!0)}),hr(this,Oe),this},Re.prototype.get=function(ae){return this._features[ae]},Re.prototype.getAll=function(){var ae=this;return Object.keys(this._features).map(function(Oe){return ae._features[Oe]})},Re.prototype.select=function(ae,Oe){var At=this;return Oe===void 0&&(Oe={}),fr(ae).forEach(function(Ht){At._selectedFeatureIds.has(Ht)||(At._selectedFeatureIds.add(Ht),At._changedFeatureIds.add(Ht),Oe.silent||(At._emitSelectionChange=!0))}),this},Re.prototype.deselect=function(ae,Oe){var At=this;return Oe===void 0&&(Oe={}),fr(ae).forEach(function(Ht){At._selectedFeatureIds.has(Ht)&&(At._selectedFeatureIds.delete(Ht),At._changedFeatureIds.add(Ht),Oe.silent||(At._emitSelectionChange=!0))}),hr(this,Oe),this},Re.prototype.clearSelected=function(ae){return ae===void 0&&(ae={}),this.deselect(this._selectedFeatureIds.values(),{silent:ae.silent}),this},Re.prototype.setSelected=function(ae,Oe){var At=this;return Oe===void 0&&(Oe={}),ae=fr(ae),this.deselect(this._selectedFeatureIds.values().filter(function(Ht){return ae.indexOf(Ht)===-1}),{silent:Oe.silent}),this.select(ae.filter(function(Ht){return!At._selectedFeatureIds.has(Ht)}),{silent:Oe.silent}),this},Re.prototype.setSelectedCoordinates=function(ae){return this._selectedCoordinates=ae,this._emitSelectionChange=!0,this},Re.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Re.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Re.prototype.getSelected=function(){var ae=this;return this._selectedFeatureIds.values().map(function(Oe){return ae.get(Oe)})},Re.prototype.getSelectedCoordinates=function(){var ae=this;return this._selectedCoordinates.map(function(Oe){return{coordinates:ae.get(Oe.feature_id).getCoordinate(Oe.coord_path)}})},Re.prototype.isSelected=function(ae){return this._selectedFeatureIds.has(ae)},Re.prototype.setFeatureProperty=function(ae,Oe,At){this.get(ae).setProperty(Oe,At),this.featureChanged(ae)},Re.prototype.storeMapConfig=function(){var ae=this;te.forEach(function(Oe){ae.ctx.map[Oe]&&(ae._mapInitialConfig[Oe]=ae.ctx.map[Oe].isEnabled())})},Re.prototype.restoreMapConfig=function(){var ae=this;Object.keys(this._mapInitialConfig).forEach(function(Oe){ae._mapInitialConfig[Oe]?ae.ctx.map[Oe].enable():ae.ctx.map[Oe].disable()})},Re.prototype.getInitialConfigValue=function(ae){return this._mapInitialConfig[ae]===void 0||this._mapInitialConfig[ae]};var Ut=function(){for(var ae=arguments,Oe={},At=0;At<arguments.length;At++){var Ht=ae[At];for(var er in Ht)vt.call(Ht,er)&&(Oe[er]=Ht[er])}return Oe},vt=Object.prototype.hasOwnProperty,Yt=n(Ut),ar=["mode","feature","mouse"];function nr(ae){var Oe=null,At=null,Ht={onRemove:function(){return ae.map.off("load",Ht.connect),clearInterval(At),Ht.removeLayers(),ae.store.restoreMapConfig(),ae.ui.removeButtons(),ae.events.removeEventListeners(),ae.ui.clearMapClasses(),ae.boxZoomInitial&&ae.map.boxZoom.enable(),ae.map=null,ae.container=null,ae.store=null,Oe&&Oe.parentNode&&Oe.parentNode.removeChild(Oe),Oe=null,this},connect:function(){ae.map.off("load",Ht.connect),clearInterval(At),Ht.addLayers(),ae.store.storeMapConfig(),ae.events.addEventListeners()},onAdd:function(er){var tr=er.fire;return er.fire=function(_r,fn){var pn=arguments;return tr.length===1&&arguments.length!==1&&(pn=[Yt({},{type:_r},fn)]),tr.apply(er,pn)},ae.map=er,ae.events=function(_r){var fn=Object.keys(_r.options.modes).reduce(function(ln,Jn){return ln[Jn]=Zt(_r.options.modes[Jn]),ln},{}),pn={},Nn={},Mn={},Xr=null,Qn=null;Mn.drag=function(ln,Jn){Jn({point:ln.point,time:new Date().getTime()})?(_r.ui.queueMapClasses({mouse:S.DRAG}),Qn.drag(ln)):ln.originalEvent.stopPropagation()},Mn.mousedrag=function(ln){Mn.drag(ln,function(Jn){return!xe(pn,Jn)})},Mn.touchdrag=function(ln){Mn.drag(ln,function(Jn){return!ze(Nn,Jn)})},Mn.mousemove=function(ln){if((ln.originalEvent.buttons!==void 0?ln.originalEvent.buttons:ln.originalEvent.which)===1)return Mn.mousedrag(ln);var Jn=De(ln,_r);ln.featureTarget=Jn,Qn.mousemove(ln)},Mn.mousedown=function(ln){pn={time:new Date().getTime(),point:ln.point};var Jn=De(ln,_r);ln.featureTarget=Jn,Qn.mousedown(ln)},Mn.mouseup=function(ln){var Jn=De(ln,_r);ln.featureTarget=Jn,xe(pn,{point:ln.point,time:new Date().getTime()})?Qn.click(ln):Qn.mouseup(ln)},Mn.mouseout=function(ln){Qn.mouseout(ln)},Mn.touchstart=function(ln){if(_r.options.touchEnabled){Nn={time:new Date().getTime(),point:ln.point};var Jn=_e.touch(ln,null,_r)[0];ln.featureTarget=Jn,Qn.touchstart(ln)}},Mn.touchmove=function(ln){if(_r.options.touchEnabled)return Qn.touchmove(ln),Mn.touchdrag(ln)},Mn.touchend=function(ln){if(ln.originalEvent.preventDefault(),_r.options.touchEnabled){var Jn=_e.touch(ln,null,_r)[0];ln.featureTarget=Jn,ze(Nn,{time:new Date().getTime(),point:ln.point})?Qn.tap(ln):Qn.touchend(ln)}};var oi=function(ln){return!(ln===8||ln===46||ln>=48&&ln<=57)};function Pi(ln,Jn,Bi){Bi===void 0&&(Bi={}),Qn.stop();var Ns=fn[ln];if(Ns===void 0)throw new Error(ln+" is not valid");Xr=ln;var Ks=Ns(_r,Jn);Qn=r(Ks,_r),Bi.silent||_r.map.fire(N.MODE_CHANGE,{mode:ln}),_r.store.setDirty(),_r.store.render()}Mn.keydown=function(ln){(ln.srcElement||ln.target).classList.contains("mapboxgl-canvas")&&(ln.keyCode!==8&&ln.keyCode!==46||!_r.options.controls.trash?oi(ln.keyCode)?Qn.keydown(ln):ln.keyCode===49&&_r.options.controls.point?Pi(R.DRAW_POINT):ln.keyCode===50&&_r.options.controls.line_string?Pi(R.DRAW_LINE_STRING):ln.keyCode===51&&_r.options.controls.polygon&&Pi(R.DRAW_POLYGON):(ln.preventDefault(),Qn.trash()))},Mn.keyup=function(ln){oi(ln.keyCode)&&Qn.keyup(ln)},Mn.zoomend=function(){_r.store.changeZoom()},Mn.data=function(ln){if(ln.dataType==="style"){var Jn=_r.setup,Bi=_r.map,Ns=_r.options,Ks=_r.store;Ns.styles.some(function(Ro){return Bi.getLayer(Ro.id)})||(Jn.addLayers(),Ks.setDirty(),Ks.render())}};var Sr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Xr=_r.options.defaultMode,Qn=r(fn[Xr](_r),_r)},changeMode:Pi,actionable:function(ln){var Jn=!1;Object.keys(ln).forEach(function(Bi){if(Sr[Bi]===void 0)throw new Error("Invalid action type");Sr[Bi]!==ln[Bi]&&(Jn=!0),Sr[Bi]=ln[Bi]}),Jn&&_r.map.fire(N.ACTIONABLE,{actions:Sr})},currentModeName:function(){return Xr},currentModeRender:function(ln,Jn){return Qn.render(ln,Jn)},fire:function(ln,Jn){Mn[ln]&&Mn[ln](Jn)},addEventListeners:function(){_r.map.on("mousemove",Mn.mousemove),_r.map.on("mousedown",Mn.mousedown),_r.map.on("mouseup",Mn.mouseup),_r.map.on("data",Mn.data),_r.map.on("touchmove",Mn.touchmove),_r.map.on("touchstart",Mn.touchstart),_r.map.on("touchend",Mn.touchend),_r.container.addEventListener("mouseout",Mn.mouseout),_r.options.keybindings&&(_r.container.addEventListener("keydown",Mn.keydown),_r.container.addEventListener("keyup",Mn.keyup))},removeEventListeners:function(){_r.map.off("mousemove",Mn.mousemove),_r.map.off("mousedown",Mn.mousedown),_r.map.off("mouseup",Mn.mouseup),_r.map.off("data",Mn.data),_r.map.off("touchmove",Mn.touchmove),_r.map.off("touchstart",Mn.touchstart),_r.map.off("touchend",Mn.touchend),_r.container.removeEventListener("mouseout",Mn.mouseout),_r.options.keybindings&&(_r.container.removeEventListener("keydown",Mn.keydown),_r.container.removeEventListener("keyup",Mn.keyup))},trash:function(ln){Qn.trash(ln)},combineFeatures:function(){Qn.combineFeatures()},uncombineFeatures:function(){Qn.uncombineFeatures()},getMode:function(){return Xr}}}(ae),ae.ui=function(_r){var fn={},pn=null,Nn={mode:null,feature:null,mouse:null},Mn={mode:null,feature:null,mouse:null};function Xr(ln){Mn=Yt(Mn,ln)}function Qn(){var ln,Jn;if(_r.container){var Bi=[],Ns=[];ar.forEach(function(Ks){Mn[Ks]!==Nn[Ks]&&(Bi.push(Ks+"-"+Nn[Ks]),Mn[Ks]!==null&&Ns.push(Ks+"-"+Mn[Ks]))}),Bi.length>0&&(ln=_r.container.classList).remove.apply(ln,Bi),Ns.length>0&&(Jn=_r.container.classList).add.apply(Jn,Ns),Nn=Yt(Nn,Mn)}}function oi(ln,Jn){Jn===void 0&&(Jn={});var Bi=document.createElement("button");return Bi.className=C.CONTROL_BUTTON+" "+Jn.className,Bi.setAttribute("title",Jn.title),Jn.container.appendChild(Bi),Bi.addEventListener("click",function(Ns){if(Ns.preventDefault(),Ns.stopPropagation(),Ns.target===pn)return Pi(),void Jn.onDeactivate();Sr(ln),Jn.onActivate()},!0),Bi}function Pi(){pn&&(pn.classList.remove(C.ACTIVE_BUTTON),pn=null)}function Sr(ln){Pi();var Jn=fn[ln];Jn&&Jn&&ln!=="trash"&&(Jn.classList.add(C.ACTIVE_BUTTON),pn=Jn)}return{setActiveButton:Sr,queueMapClasses:Xr,updateMapClasses:Qn,clearMapClasses:function(){Xr({mode:null,feature:null,mouse:null}),Qn()},addButtons:function(){var ln=_r.options.controls,Jn=document.createElement("div");return Jn.className=C.CONTROL_GROUP+" "+C.CONTROL_BASE,ln&&(ln[P.LINE]&&(fn[P.LINE]=oi(P.LINE,{container:Jn,className:C.CONTROL_BUTTON_LINE,title:"LineString tool "+(_r.options.keybindings?"(l)":""),onActivate:function(){return _r.events.changeMode(R.DRAW_LINE_STRING)},onDeactivate:function(){return _r.events.trash()}})),ln[P.POLYGON]&&(fn[P.POLYGON]=oi(P.POLYGON,{container:Jn,className:C.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(_r.options.keybindings?"(p)":""),onActivate:function(){return _r.events.changeMode(R.DRAW_POLYGON)},onDeactivate:function(){return _r.events.trash()}})),ln[P.POINT]&&(fn[P.POINT]=oi(P.POINT,{container:Jn,className:C.CONTROL_BUTTON_POINT,title:"Marker tool "+(_r.options.keybindings?"(m)":""),onActivate:function(){return _r.events.changeMode(R.DRAW_POINT)},onDeactivate:function(){return _r.events.trash()}})),ln.trash&&(fn.trash=oi("trash",{container:Jn,className:C.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){_r.events.trash()}})),ln.combine_features&&(fn.combine_features=oi("combineFeatures",{container:Jn,className:C.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){_r.events.combineFeatures()}})),ln.uncombine_features&&(fn.uncombine_features=oi("uncombineFeatures",{container:Jn,className:C.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){_r.events.uncombineFeatures()}}))),Jn},removeButtons:function(){Object.keys(fn).forEach(function(ln){var Jn=fn[ln];Jn.parentNode&&Jn.parentNode.removeChild(Jn),delete fn[ln]})}}}(ae),ae.container=er.getContainer(),ae.store=new Re(ae),Oe=ae.ui.addButtons(),ae.options.boxSelect&&(ae.boxZoomInitial=er.boxZoom.isEnabled(),er.boxZoom.disable(),er.dragPan.disable(),er.dragPan.enable()),er.loaded()?Ht.connect():(er.on("load",Ht.connect),At=setInterval(function(){er.loaded()&&Ht.connect()},16)),ae.events.start(),Oe},addLayers:function(){ae.map.addSource(B.COLD,{data:{type:j.FEATURE_COLLECTION,features:[]},type:"geojson"}),ae.map.addSource(B.HOT,{data:{type:j.FEATURE_COLLECTION,features:[]},type:"geojson"}),ae.options.styles.forEach(function(er){ae.map.addLayer(er)}),ae.store.setDirty(!0),ae.store.render()},removeLayers:function(){ae.options.styles.forEach(function(er){ae.map.getLayer(er.id)&&ae.map.removeLayer(er.id)}),ae.map.getSource(B.COLD)&&ae.map.removeSource(B.COLD),ae.map.getSource(B.HOT)&&ae.map.removeSource(B.HOT)}};return ae.setup=Ht,Ht}var Fr=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Gr(ae){return function(Oe){var At=Oe.featureTarget;return!!At&&!!At.properties&&At.properties.meta===ae}}function Ir(ae){return!!ae.originalEvent&&!!ae.originalEvent.shiftKey&&ae.originalEvent.button===0}function cn(ae){return!!ae.featureTarget&&!!ae.featureTarget.properties&&ae.featureTarget.properties.active===J.ACTIVE&&ae.featureTarget.properties.meta===$.FEATURE}function Sn(ae){return!!ae.featureTarget&&!!ae.featureTarget.properties&&ae.featureTarget.properties.active===J.INACTIVE&&ae.featureTarget.properties.meta===$.FEATURE}function En(ae){return ae.featureTarget===void 0}function an(ae){return!!ae.featureTarget&&!!ae.featureTarget.properties&&ae.featureTarget.properties.meta===$.FEATURE}function lr(ae){var Oe=ae.featureTarget;return!!Oe&&!!Oe.properties&&Oe.properties.meta===$.VERTEX}function Xt(ae){return!!ae.originalEvent&&ae.originalEvent.shiftKey===!0}function qr(ae){return ae.keyCode===27}function Kr(ae){return ae.keyCode===13}var kn=Object.freeze({__proto__:null,isOfMetaType:Gr,isShiftMousedown:Ir,isActiveFeature:cn,isInactiveFeature:Sn,noTarget:En,isFeature:an,isVertex:lr,isShiftDown:Xt,isEscapeKey:qr,isEnterKey:Kr,isTrue:function(){return!0}}),mn=Un;function Un(ae,Oe){this.x=ae,this.y=Oe}Un.prototype={clone:function(){return new Un(this.x,this.y)},add:function(ae){return this.clone()._add(ae)},sub:function(ae){return this.clone()._sub(ae)},multByPoint:function(ae){return this.clone()._multByPoint(ae)},divByPoint:function(ae){return this.clone()._divByPoint(ae)},mult:function(ae){return this.clone()._mult(ae)},div:function(ae){return this.clone()._div(ae)},rotate:function(ae){return this.clone()._rotate(ae)},rotateAround:function(ae,Oe){return this.clone()._rotateAround(ae,Oe)},matMult:function(ae){return this.clone()._matMult(ae)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(ae){return this.x===ae.x&&this.y===ae.y},dist:function(ae){return Math.sqrt(this.distSqr(ae))},distSqr:function(ae){var Oe=ae.x-this.x,At=ae.y-this.y;return Oe*Oe+At*At},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(ae){return Math.atan2(this.y-ae.y,this.x-ae.x)},angleWith:function(ae){return this.angleWithSep(ae.x,ae.y)},angleWithSep:function(ae,Oe){return Math.atan2(this.x*Oe-this.y*ae,this.x*ae+this.y*Oe)},_matMult:function(ae){var Oe=ae[0]*this.x+ae[1]*this.y,At=ae[2]*this.x+ae[3]*this.y;return this.x=Oe,this.y=At,this},_add:function(ae){return this.x+=ae.x,this.y+=ae.y,this},_sub:function(ae){return this.x-=ae.x,this.y-=ae.y,this},_mult:function(ae){return this.x*=ae,this.y*=ae,this},_div:function(ae){return this.x/=ae,this.y/=ae,this},_multByPoint:function(ae){return this.x*=ae.x,this.y*=ae.y,this},_divByPoint:function(ae){return this.x/=ae.x,this.y/=ae.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var ae=this.y;return this.y=this.x,this.x=-ae,this},_rotate:function(ae){var Oe=Math.cos(ae),At=Math.sin(ae),Ht=Oe*this.x-At*this.y,er=At*this.x+Oe*this.y;return this.x=Ht,this.y=er,this},_rotateAround:function(ae,Oe){var At=Math.cos(ae),Ht=Math.sin(ae),er=Oe.x+At*(this.x-Oe.x)-Ht*(this.y-Oe.y),tr=Oe.y+Ht*(this.x-Oe.x)+At*(this.y-Oe.y);return this.x=er,this.y=tr,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Un.convert=function(ae){return ae instanceof Un?ae:Array.isArray(ae)?new Un(ae[0],ae[1]):ae};var Hi=n(mn);function Gn(ae,Oe){var At=Oe.getBoundingClientRect();return new Hi(ae.clientX-At.left-(Oe.clientLeft||0),ae.clientY-At.top-(Oe.clientTop||0))}function ti(ae,Oe,At,Ht){return{type:j.FEATURE,properties:{meta:$.VERTEX,parent:ae,coord_path:At,active:Ht?J.ACTIVE:J.INACTIVE},geometry:{type:j.POINT,coordinates:Oe}}}function si(ae,Oe,At){var Ht=Oe.geometry.coordinates,er=At.geometry.coordinates;if(Ht[1]>85||Ht[1]<ue||er[1]>85||er[1]<ue)return null;var tr={lng:(Ht[0]+er[0])/2,lat:(Ht[1]+er[1])/2};return{type:j.FEATURE,properties:{meta:$.MIDPOINT,parent:ae,lng:tr.lng,lat:tr.lat,coord_path:At.properties.coord_path},geometry:{type:j.POINT,coordinates:[tr.lng,tr.lat]}}}function xi(ae,Oe,At){Oe===void 0&&(Oe={}),At===void 0&&(At=null);var Ht,er=ae.geometry,tr=er.type,_r=er.coordinates,fn=ae.properties&&ae.properties.id,pn=[];function Nn(Xr,Qn){var oi="",Pi=null;Xr.forEach(function(Sr,ln){var Jn=Qn!=null?Qn+"."+ln:String(ln),Bi=ti(fn,Sr,Jn,Mn(Jn));if(Oe.midpoints&&Pi){var Ns=si(fn,Pi,Bi);Ns&&pn.push(Ns)}Pi=Bi;var Ks=JSON.stringify(Sr);oi!==Ks&&pn.push(Bi),ln===0&&(oi=Ks)})}function Mn(Xr){return!!Oe.selectedPaths&&Oe.selectedPaths.indexOf(Xr)!==-1}return tr===j.POINT?pn.push(ti(fn,_r,At,Mn(At))):tr===j.POLYGON?_r.forEach(function(Xr,Qn){Nn(Xr,At!==null?At+"."+Qn:String(Qn))}):tr===j.LINE_STRING?Nn(_r,At):tr.indexOf(j.MULTI_PREFIX)===0&&(Ht=tr.replace(j.MULTI_PREFIX,""),_r.forEach(function(Xr,Qn){var oi={type:j.FEATURE,properties:ae.properties,geometry:{type:Ht,coordinates:Xr}};pn=pn.concat(xi(oi,Oe,Qn))})),pn}var Bn={enable:function(ae){setTimeout(function(){ae.map&&ae.map.doubleClickZoom&&ae._ctx&&ae._ctx.store&&ae._ctx.store.getInitialConfigValue&&ae._ctx.store.getInitialConfigValue("doubleClickZoom")&&ae.map.doubleClickZoom.enable()},0)},disable:function(ae){setTimeout(function(){ae.map&&ae.map.doubleClickZoom&&ae.map.doubleClickZoom.disable()},0)}},Zr={exports:{}},Nr=function(ae){if(!ae||!ae.type)return null;var Oe=un[ae.type];if(!Oe)return null;if(Oe==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:ae}]};if(Oe==="feature")return{type:"FeatureCollection",features:[ae]};if(Oe==="featurecollection")return ae},un={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},ri=n(Nr),Hn=Object.freeze({__proto__:null,default:function ae(Oe){switch(Oe&&Oe.type||null){case"FeatureCollection":return Oe.features=Oe.features.reduce(function(At,Ht){return At.concat(ae(Ht))},[]),Oe;case"Feature":return Oe.geometry?ae(Oe.geometry).map(function(At){var Ht={type:"Feature",properties:JSON.parse(JSON.stringify(Oe.properties)),geometry:At};return Oe.id!==void 0&&(Ht.id=Oe.id),Ht}):[Oe];case"MultiPoint":return Oe.coordinates.map(function(At){return{type:"Point",coordinates:At}});case"MultiPolygon":return Oe.coordinates.map(function(At){return{type:"Polygon",coordinates:At}});case"MultiLineString":return Oe.coordinates.map(function(At){return{type:"LineString",coordinates:At}});case"GeometryCollection":return Oe.geometries.map(ae).reduce(function(At,Ht){return At.concat(Ht)},[]);case"Point":case"Polygon":case"LineString":return[Oe]}}}),ir=Nr,We=s(Hn),qe=function(ae){return function Oe(At){return Array.isArray(At)&&At.length&&typeof At[0]=="number"?[At]:At.reduce(function(Ht,er){return Array.isArray(er)&&Array.isArray(er[0])?Ht.concat(Oe(er)):(Ht.push(er),Ht)},[])}(ae)};We instanceof Function||(We=We.default);var ht={exports:{}},It=ht.exports=function(ae){return new wt(ae)};function wt(ae){this.value=ae}function kt(ae,Oe,At){var Ht=[],er=[],tr=!0;return function _r(fn){var pn=At?Wt(fn):fn,Nn={},Mn=!0,Xr={node:pn,node_:fn,path:[].concat(Ht),parent:er[er.length-1],parents:er,key:Ht.slice(-1)[0],isRoot:Ht.length===0,level:Ht.length,circular:null,update:function(Pi,Sr){Xr.isRoot||(Xr.parent.node[Xr.key]=Pi),Xr.node=Pi,Sr&&(Mn=!1)},delete:function(Pi){delete Xr.parent.node[Xr.key],Pi&&(Mn=!1)},remove:function(Pi){xr(Xr.parent.node)?Xr.parent.node.splice(Xr.key,1):delete Xr.parent.node[Xr.key],Pi&&(Mn=!1)},keys:null,before:function(Pi){Nn.before=Pi},after:function(Pi){Nn.after=Pi},pre:function(Pi){Nn.pre=Pi},post:function(Pi){Nn.post=Pi},stop:function(){tr=!1},block:function(){Mn=!1}};if(!tr)return Xr;function Qn(){if(typeof Xr.node=="object"&&Xr.node!==null){Xr.keys&&Xr.node_===Xr.node||(Xr.keys=Ot(Xr.node)),Xr.isLeaf=Xr.keys.length==0;for(var Pi=0;Pi<er.length;Pi++)if(er[Pi].node_===fn){Xr.circular=er[Pi];break}}else Xr.isLeaf=!0,Xr.keys=null;Xr.notLeaf=!Xr.isLeaf,Xr.notRoot=!Xr.isRoot}Qn();var oi=Oe.call(Xr,Xr.node);return oi!==void 0&&Xr.update&&Xr.update(oi),Nn.before&&Nn.before.call(Xr,Xr.node),Mn&&(typeof Xr.node!="object"||Xr.node===null||Xr.circular||(er.push(Xr),Qn(),Ar(Xr.keys,function(Pi,Sr){Ht.push(Pi),Nn.pre&&Nn.pre.call(Xr,Xr.node[Pi],Pi);var ln=_r(Xr.node[Pi]);At&&Tr.call(Xr.node,Pi)&&(Xr.node[Pi]=ln.node),ln.isLast=Sr==Xr.keys.length-1,ln.isFirst=Sr==0,Nn.post&&Nn.post.call(Xr,ln),Ht.pop()}),er.pop()),Nn.after&&Nn.after.call(Xr,Xr.node)),Xr}(ae).node}function Wt(ae){if(typeof ae=="object"&&ae!==null){var Oe;if(xr(ae))Oe=[];else if(pr(ae)==="[object Date]")Oe=new Date(ae.getTime?ae.getTime():ae);else if(function(er){return pr(er)==="[object RegExp]"}(ae))Oe=new RegExp(ae);else if(function(er){return pr(er)==="[object Error]"}(ae))Oe={message:ae.message};else if(function(er){return pr(er)==="[object Boolean]"}(ae))Oe=new Boolean(ae);else if(function(er){return pr(er)==="[object Number]"}(ae))Oe=new Number(ae);else if(function(er){return pr(er)==="[object String]"}(ae))Oe=new String(ae);else if(Object.create&&Object.getPrototypeOf)Oe=Object.create(Object.getPrototypeOf(ae));else if(ae.constructor===Object)Oe={};else{var At=ae.constructor&&ae.constructor.prototype||ae.__proto__||{},Ht=function(){};Ht.prototype=At,Oe=new Ht}return Ar(Ot(ae),function(er){Oe[er]=ae[er]}),Oe}return ae}wt.prototype.get=function(ae){for(var Oe=this.value,At=0;At<ae.length;At++){var Ht=ae[At];if(!Oe||!Tr.call(Oe,Ht)){Oe=void 0;break}Oe=Oe[Ht]}return Oe},wt.prototype.has=function(ae){for(var Oe=this.value,At=0;At<ae.length;At++){var Ht=ae[At];if(!Oe||!Tr.call(Oe,Ht))return!1;Oe=Oe[Ht]}return!0},wt.prototype.set=function(ae,Oe){for(var At=this.value,Ht=0;Ht<ae.length-1;Ht++){var er=ae[Ht];Tr.call(At,er)||(At[er]={}),At=At[er]}return At[ae[Ht]]=Oe,Oe},wt.prototype.map=function(ae){return kt(this.value,ae,!0)},wt.prototype.forEach=function(ae){return this.value=kt(this.value,ae,!1),this.value},wt.prototype.reduce=function(ae,Oe){var At=arguments.length===1,Ht=At?this.value:Oe;return this.forEach(function(er){this.isRoot&&At||(Ht=ae.call(this,Ht,er))}),Ht},wt.prototype.paths=function(){var ae=[];return this.forEach(function(Oe){ae.push(this.path)}),ae},wt.prototype.nodes=function(){var ae=[];return this.forEach(function(Oe){ae.push(this.node)}),ae},wt.prototype.clone=function(){var ae=[],Oe=[];return function At(Ht){for(var er=0;er<ae.length;er++)if(ae[er]===Ht)return Oe[er];if(typeof Ht=="object"&&Ht!==null){var tr=Wt(Ht);return ae.push(Ht),Oe.push(tr),Ar(Ot(Ht),function(_r){tr[_r]=At(Ht[_r])}),ae.pop(),Oe.pop(),tr}return Ht}(this.value)};var Ot=Object.keys||function(ae){var Oe=[];for(var At in ae)Oe.push(At);return Oe};function pr(ae){return Object.prototype.toString.call(ae)}var xr=Array.isArray||function(ae){return Object.prototype.toString.call(ae)==="[object Array]"},Ar=function(ae,Oe){if(ae.forEach)return ae.forEach(Oe);for(var At=0;At<ae.length;At++)Oe(ae[At],At,ae)};Ar(Ot(wt.prototype),function(ae){It[ae]=function(Oe){var At=[].slice.call(arguments,1),Ht=new wt(Oe);return Ht[ae].apply(Ht,At)}});var Tr=Object.hasOwnProperty||function(ae,Oe){return Oe in ae},nn=ht.exports,on=_n;function _n(ae){if(!(this instanceof _n))return new _n(ae);this._bbox=ae||[1/0,1/0,-1/0,-1/0],this._valid=!!ae}_n.prototype.include=function(ae){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],ae[0]),this._bbox[1]=Math.min(this._bbox[1],ae[1]),this._bbox[2]=Math.max(this._bbox[2],ae[0]),this._bbox[3]=Math.max(this._bbox[3],ae[1]),this},_n.prototype.equals=function(ae){var Oe;return Oe=ae instanceof _n?ae.bbox():ae,this._bbox[0]==Oe[0]&&this._bbox[1]==Oe[1]&&this._bbox[2]==Oe[2]&&this._bbox[3]==Oe[3]},_n.prototype.center=function(ae){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},_n.prototype.union=function(ae){var Oe;return this._valid=!0,Oe=ae instanceof _n?ae.bbox():ae,this._bbox[0]=Math.min(this._bbox[0],Oe[0]),this._bbox[1]=Math.min(this._bbox[1],Oe[1]),this._bbox[2]=Math.max(this._bbox[2],Oe[2]),this._bbox[3]=Math.max(this._bbox[3],Oe[3]),this},_n.prototype.bbox=function(){return this._valid?this._bbox:null},_n.prototype.contains=function(ae){if(!ae)return this._fastContains();if(!this._valid)return null;var Oe=ae[0],At=ae[1];return this._bbox[0]<=Oe&&this._bbox[1]<=At&&this._bbox[2]>=Oe&&this._bbox[3]>=At},_n.prototype.intersect=function(ae){return this._valid?(Oe=ae instanceof _n?ae.bbox():ae,!(this._bbox[0]>Oe[2]||this._bbox[2]<Oe[0]||this._bbox[3]<Oe[1]||this._bbox[1]>Oe[3])):null;var Oe},_n.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var ae="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",ae)},_n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Dn=function(ae){if(!ae)return[];var Oe=We(ir(ae)),At=[];return Oe.features.forEach(function(Ht){Ht.geometry&&(At=At.concat(qe(Ht.geometry.coordinates)))}),At},qn=nn,$n=on,Ni={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Vi=Object.keys(Ni);function Wn(ae){for(var Oe=$n(),At=Dn(ae),Ht=0;Ht<At.length;Ht++)Oe.include(At[Ht]);return Oe}Zr.exports=function(ae){return Wn(ae).bbox()},Zr.exports.polygon=function(ae){return Wn(ae).polygon()},Zr.exports.bboxify=function(ae){return qn(ae).map(function(Oe){Oe&&Vi.some(function(At){return!!Oe[At]&&Ni[At].indexOf(Oe.type)!==-1})&&(Oe.bbox=Wn(Oe).bbox(),this.update(Oe))})};var Ki=n(Zr.exports),Cs=-90;function ro(ae,Oe){var At=Cs,Ht=90,er=Cs,tr=90,_r=270,fn=-270;ae.forEach(function(Nn){var Mn=Ki(Nn),Xr=Mn[1],Qn=Mn[3],oi=Mn[0],Pi=Mn[2];Xr>At&&(At=Xr),Qn<Ht&&(Ht=Qn),Qn>er&&(er=Qn),Xr<tr&&(tr=Xr),oi<_r&&(_r=oi),Pi>fn&&(fn=Pi)});var pn=Oe;return At+pn.lat>85&&(pn.lat=85-At),er+pn.lat>90&&(pn.lat=90-er),Ht+pn.lat<-85&&(pn.lat=-85-Ht),tr+pn.lat<Cs&&(pn.lat=Cs-tr),_r+pn.lng<=-270&&(pn.lng+=360*Math.ceil(Math.abs(pn.lng)/360)),fn+pn.lng>=270&&(pn.lng-=360*Math.ceil(Math.abs(pn.lng)/360)),pn}function Fs(ae,Oe){var At=ro(ae.map(function(Ht){return Ht.toGeoJSON()}),Oe);ae.forEach(function(Ht){var er,tr=Ht.getCoordinates(),_r=function(pn){var Nn={lng:pn[0]+At.lng,lat:pn[1]+At.lat};return[Nn.lng,Nn.lat]},fn=function(pn){return pn.map(function(Nn){return _r(Nn)})};Ht.type===j.POINT?er=_r(tr):Ht.type===j.LINE_STRING||Ht.type===j.MULTI_POINT?er=tr.map(_r):Ht.type===j.POLYGON||Ht.type===j.MULTI_LINE_STRING?er=tr.map(fn):Ht.type===j.MULTI_POLYGON&&(er=tr.map(function(pn){return pn.map(function(Nn){return fn(Nn)})})),Ht.incomingCoords(er)})}var es={onSetup:function(ae){var Oe=this,At={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:ae.featureIds||[]};return this.setSelected(At.initiallySelectedFeatureIds.filter(function(Ht){return Oe.getFeature(Ht)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),At},fireUpdate:function(){this.map.fire(N.UPDATE,{action:U.MOVE,features:this.getSelected().map(function(ae){return ae.toGeoJSON()})})},fireActionable:function(){var ae=this,Oe=this.getSelected(),At=Oe.filter(function(fn){return ae.isInstanceOf("MultiFeature",fn)}),Ht=!1;if(Oe.length>1){Ht=!0;var er=Oe[0].type.replace("Multi","");Oe.forEach(function(fn){fn.type.replace("Multi","")!==er&&(Ht=!1)})}var tr=At.length>0,_r=Oe.length>0;this.setActionableState({combineFeatures:Ht,uncombineFeatures:tr,trash:_r})},getUniqueIds:function(ae){return ae.length?ae.map(function(Oe){return Oe.properties.id}).filter(function(Oe){return Oe!==void 0}).reduce(function(Oe,At){return Oe.add(At),Oe},new Y).values():[]},stopExtendedInteractions:function(ae){ae.boxSelectElement&&(ae.boxSelectElement.parentNode&&ae.boxSelectElement.parentNode.removeChild(ae.boxSelectElement),ae.boxSelectElement=null),this.map.dragPan.enable(),ae.boxSelecting=!1,ae.canBoxSelect=!1,ae.dragMoving=!1,ae.canDragMove=!1},onStop:function(){Bn.enable(this)},onMouseMove:function(ae,Oe){return an(Oe)&&ae.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(ae),!0},onMouseOut:function(ae){return!ae.dragMoving||this.fireUpdate()}};es.onTap=es.onClick=function(ae,Oe){return En(Oe)?this.clickAnywhere(ae,Oe):Gr($.VERTEX)(Oe)?this.clickOnVertex(ae,Oe):an(Oe)?this.clickOnFeature(ae,Oe):void 0},es.clickAnywhere=function(ae){var Oe=this,At=this.getSelectedIds();At.length&&(this.clearSelectedFeatures(),At.forEach(function(Ht){return Oe.doRender(Ht)})),Bn.enable(this),this.stopExtendedInteractions(ae)},es.clickOnVertex=function(ae,Oe){this.changeMode(R.DIRECT_SELECT,{featureId:Oe.featureTarget.properties.parent,coordPath:Oe.featureTarget.properties.coord_path,startPos:Oe.lngLat}),this.updateUIClasses({mouse:S.MOVE})},es.startOnActiveFeature=function(ae,Oe){this.stopExtendedInteractions(ae),this.map.dragPan.disable(),this.doRender(Oe.featureTarget.properties.id),ae.canDragMove=!0,ae.dragMoveLocation=Oe.lngLat},es.clickOnFeature=function(ae,Oe){var At=this;Bn.disable(this),this.stopExtendedInteractions(ae);var Ht=Xt(Oe),er=this.getSelectedIds(),tr=Oe.featureTarget.properties.id,_r=this.isSelected(tr);if(!Ht&&_r&&this.getFeature(tr).type!==j.POINT)return this.changeMode(R.DIRECT_SELECT,{featureId:tr});_r&&Ht?(this.deselect(tr),this.updateUIClasses({mouse:S.POINTER}),er.length===1&&Bn.enable(this)):!_r&&Ht?(this.select(tr),this.updateUIClasses({mouse:S.MOVE})):_r||Ht||(er.forEach(function(fn){return At.doRender(fn)}),this.setSelected(tr),this.updateUIClasses({mouse:S.MOVE})),this.doRender(tr)},es.onMouseDown=function(ae,Oe){return cn(Oe)?this.startOnActiveFeature(ae,Oe):this.drawConfig.boxSelect&&Ir(Oe)?this.startBoxSelect(ae,Oe):void 0},es.startBoxSelect=function(ae,Oe){this.stopExtendedInteractions(ae),this.map.dragPan.disable(),ae.boxSelectStartLocation=Gn(Oe.originalEvent,this.map.getContainer()),ae.canBoxSelect=!0},es.onTouchStart=function(ae,Oe){if(cn(Oe))return this.startOnActiveFeature(ae,Oe)},es.onDrag=function(ae,Oe){return ae.canDragMove?this.dragMove(ae,Oe):this.drawConfig.boxSelect&&ae.canBoxSelect?this.whileBoxSelect(ae,Oe):void 0},es.whileBoxSelect=function(ae,Oe){ae.boxSelecting=!0,this.updateUIClasses({mouse:S.ADD}),ae.boxSelectElement||(ae.boxSelectElement=document.createElement("div"),ae.boxSelectElement.classList.add(C.BOX_SELECT),this.map.getContainer().appendChild(ae.boxSelectElement));var At=Gn(Oe.originalEvent,this.map.getContainer()),Ht=Math.min(ae.boxSelectStartLocation.x,At.x),er=Math.max(ae.boxSelectStartLocation.x,At.x),tr=Math.min(ae.boxSelectStartLocation.y,At.y),_r=Math.max(ae.boxSelectStartLocation.y,At.y),fn="translate("+Ht+"px, "+tr+"px)";ae.boxSelectElement.style.transform=fn,ae.boxSelectElement.style.WebkitTransform=fn,ae.boxSelectElement.style.width=er-Ht+"px",ae.boxSelectElement.style.height=_r-tr+"px"},es.dragMove=function(ae,Oe){ae.dragMoving=!0,Oe.originalEvent.stopPropagation();var At={lng:Oe.lngLat.lng-ae.dragMoveLocation.lng,lat:Oe.lngLat.lat-ae.dragMoveLocation.lat};Fs(this.getSelected(),At),ae.dragMoveLocation=Oe.lngLat},es.onTouchEnd=es.onMouseUp=function(ae,Oe){var At=this;if(ae.dragMoving)this.fireUpdate();else if(ae.boxSelecting){var Ht=[ae.boxSelectStartLocation,Gn(Oe.originalEvent,this.map.getContainer())],er=this.featuresAt(null,Ht,"click"),tr=this.getUniqueIds(er).filter(function(_r){return!At.isSelected(_r)});tr.length&&(this.select(tr),tr.forEach(function(_r){return At.doRender(_r)}),this.updateUIClasses({mouse:S.MOVE}))}this.stopExtendedInteractions(ae)},es.toDisplayFeatures=function(ae,Oe,At){Oe.properties.active=this.isSelected(Oe.properties.id)?J.ACTIVE:J.INACTIVE,At(Oe),this.fireActionable(),Oe.properties.active===J.ACTIVE&&Oe.geometry.type!==j.POINT&&xi(Oe).forEach(At)},es.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},es.onCombineFeatures=function(){var ae=this.getSelected();if(!(ae.length===0||ae.length<2)){for(var Oe=[],At=[],Ht=ae[0].type.replace("Multi",""),er=0;er<ae.length;er++){var tr=ae[er];if(tr.type.replace("Multi","")!==Ht)return;tr.type.includes("Multi")?tr.getCoordinates().forEach(function(fn){Oe.push(fn)}):Oe.push(tr.getCoordinates()),At.push(tr.toGeoJSON())}if(At.length>1){var _r=this.newFeature({type:j.FEATURE,properties:At[0].properties,geometry:{type:"Multi"+Ht,coordinates:Oe}});this.addFeature(_r),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([_r.id]),this.map.fire(N.COMBINE_FEATURES,{createdFeatures:[_r.toGeoJSON()],deletedFeatures:At})}this.fireActionable()}},es.onUncombineFeatures=function(){var ae=this,Oe=this.getSelected();if(Oe.length!==0){for(var At=[],Ht=[],er=function(_r){var fn=Oe[_r];ae.isInstanceOf("MultiFeature",fn)&&(fn.getFeatures().forEach(function(pn){ae.addFeature(pn),pn.properties=fn.properties,At.push(pn.toGeoJSON()),ae.select([pn.id])}),ae.deleteFeature(fn.id,{silent:!0}),Ht.push(fn.toGeoJSON()))},tr=0;tr<Oe.length;tr++)er(tr);At.length>1&&this.map.fire(N.UNCOMBINE_FEATURES,{createdFeatures:At,deletedFeatures:Ht}),this.fireActionable()}};var Sa=Gr($.VERTEX),Ba=Gr($.MIDPOINT),tl={fireUpdate:function(){this.map.fire(N.UPDATE,{action:U.CHANGE_COORDINATES,features:this.getSelected().map(function(ae){return ae.toGeoJSON()})})},fireActionable:function(ae){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:ae.selectedCoordPaths.length>0})},startDragging:function(ae,Oe){this.map.dragPan.disable(),ae.canDragMove=!0,ae.dragMoveLocation=Oe.lngLat},stopDragging:function(ae){this.map.dragPan.enable(),ae.dragMoving=!1,ae.canDragMove=!1,ae.dragMoveLocation=null},onVertex:function(ae,Oe){this.startDragging(ae,Oe);var At=Oe.featureTarget.properties,Ht=ae.selectedCoordPaths.indexOf(At.coord_path);Xt(Oe)||Ht!==-1?Xt(Oe)&&Ht===-1&&ae.selectedCoordPaths.push(At.coord_path):ae.selectedCoordPaths=[At.coord_path];var er=this.pathsToCoordinates(ae.featureId,ae.selectedCoordPaths);this.setSelectedCoordinates(er)},onMidpoint:function(ae,Oe){this.startDragging(ae,Oe);var At=Oe.featureTarget.properties;ae.feature.addCoordinate(At.coord_path,At.lng,At.lat),this.fireUpdate(),ae.selectedCoordPaths=[At.coord_path]},pathsToCoordinates:function(ae,Oe){return Oe.map(function(At){return{feature_id:ae,coord_path:At}})},onFeature:function(ae,Oe){ae.selectedCoordPaths.length===0?this.startDragging(ae,Oe):this.stopDragging(ae)},dragFeature:function(ae,Oe,At){Fs(this.getSelected(),At),ae.dragMoveLocation=Oe.lngLat},dragVertex:function(ae,Oe,At){for(var Ht=ae.selectedCoordPaths.map(function(fn){return ae.feature.getCoordinate(fn)}),er=ro(Ht.map(function(fn){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:fn}}}),At),tr=0;tr<Ht.length;tr++){var _r=Ht[tr];ae.feature.updateCoordinate(ae.selectedCoordPaths[tr],_r[0]+er.lng,_r[1]+er.lat)}},clickNoTarget:function(){this.changeMode(R.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(R.SIMPLE_SELECT)},clickActiveFeature:function(ae){ae.selectedCoordPaths=[],this.clearSelectedCoordinates(),ae.feature.changed()},onSetup:function(ae){var Oe=ae.featureId,At=this.getFeature(Oe);if(!At)throw new Error("You must provide a featureId to enter direct_select mode");if(At.type===j.POINT)throw new TypeError("direct_select mode doesn't handle point features");var Ht={featureId:Oe,feature:At,dragMoveLocation:ae.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:ae.coordPath?[ae.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(Oe,Ht.selectedCoordPaths)),this.setSelected(Oe),Bn.disable(this),this.setActionableState({trash:!0}),Ht},onStop:function(){Bn.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(ae,Oe,At){ae.featureId===Oe.properties.id?(Oe.properties.active=J.ACTIVE,At(Oe),xi(Oe,{map:this.map,midpoints:!0,selectedPaths:ae.selectedCoordPaths}).forEach(At)):(Oe.properties.active=J.INACTIVE,At(Oe)),this.fireActionable(ae)},onTrash:function(ae){ae.selectedCoordPaths.sort(function(Oe,At){return At.localeCompare(Oe,"en",{numeric:!0})}).forEach(function(Oe){return ae.feature.removeCoordinate(Oe)}),this.fireUpdate(),ae.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(ae),ae.feature.isValid()===!1&&(this.deleteFeature([ae.featureId]),this.changeMode(R.SIMPLE_SELECT,{}))},onMouseMove:function(ae,Oe){var At=cn(Oe),Ht=Sa(Oe),er=Ba(Oe),tr=ae.selectedCoordPaths.length===0;return At&&tr||Ht&&!tr?this.updateUIClasses({mouse:S.MOVE}):this.updateUIClasses({mouse:S.NONE}),(Ht||At||er)&&ae.dragMoving&&this.fireUpdate(),this.stopDragging(ae),!0},onMouseOut:function(ae){return ae.dragMoving&&this.fireUpdate(),!0}};tl.onTouchStart=tl.onMouseDown=function(ae,Oe){return Sa(Oe)?this.onVertex(ae,Oe):cn(Oe)?this.onFeature(ae,Oe):Ba(Oe)?this.onMidpoint(ae,Oe):void 0},tl.onDrag=function(ae,Oe){if(ae.canDragMove===!0){ae.dragMoving=!0,Oe.originalEvent.stopPropagation();var At={lng:Oe.lngLat.lng-ae.dragMoveLocation.lng,lat:Oe.lngLat.lat-ae.dragMoveLocation.lat};ae.selectedCoordPaths.length>0?this.dragVertex(ae,Oe,At):this.dragFeature(ae,Oe,At),ae.dragMoveLocation=Oe.lngLat}},tl.onClick=function(ae,Oe){return En(Oe)?this.clickNoTarget(ae,Oe):cn(Oe)?this.clickActiveFeature(ae,Oe):Sn(Oe)?this.clickInactive(ae,Oe):void this.stopDragging(ae)},tl.onTap=function(ae,Oe){return En(Oe)?this.clickNoTarget(ae,Oe):cn(Oe)?this.clickActiveFeature(ae,Oe):Sn(Oe)?this.clickInactive(ae,Oe):void 0},tl.onTouchEnd=tl.onMouseUp=function(ae){ae.dragMoving&&this.fireUpdate(),this.stopDragging(ae)};var go={};function Sl(ae,Oe){return!!ae.lngLat&&ae.lngLat.lng===Oe[0]&&ae.lngLat.lat===Oe[1]}go.onSetup=function(){var ae=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:[]}});return this.addFeature(ae),this.clearSelectedFeatures(),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(P.POINT),this.setActionableState({trash:!0}),{point:ae}},go.stopDrawingAndRemove=function(ae){this.deleteFeature([ae.point.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)},go.onTap=go.onClick=function(ae,Oe){this.updateUIClasses({mouse:S.MOVE}),ae.point.updateCoordinate("",Oe.lngLat.lng,Oe.lngLat.lat),this.map.fire(N.CREATE,{features:[ae.point.toGeoJSON()]}),this.changeMode(R.SIMPLE_SELECT,{featureIds:[ae.point.id]})},go.onStop=function(ae){this.activateUIButton(),ae.point.getCoordinate().length||this.deleteFeature([ae.point.id],{silent:!0})},go.toDisplayFeatures=function(ae,Oe,At){var Ht=Oe.properties.id===ae.point.id;if(Oe.properties.active=Ht?J.ACTIVE:J.INACTIVE,!Ht)return At(Oe)},go.onTrash=go.stopDrawingAndRemove,go.onKeyUp=function(ae,Oe){if(qr(Oe)||Kr(Oe))return this.stopDrawingAndRemove(ae,Oe)};var sa={onSetup:function(){var ae=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.POLYGON,coordinates:[[]]}});return this.addFeature(ae),this.clearSelectedFeatures(),Bn.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(P.POLYGON),this.setActionableState({trash:!0}),{polygon:ae,currentVertexPosition:0}},clickAnywhere:function(ae,Oe){if(ae.currentVertexPosition>0&&Sl(Oe,ae.polygon.coordinates[0][ae.currentVertexPosition-1]))return this.changeMode(R.SIMPLE_SELECT,{featureIds:[ae.polygon.id]});this.updateUIClasses({mouse:S.ADD}),ae.polygon.updateCoordinate("0."+ae.currentVertexPosition,Oe.lngLat.lng,Oe.lngLat.lat),ae.currentVertexPosition++,ae.polygon.updateCoordinate("0."+ae.currentVertexPosition,Oe.lngLat.lng,Oe.lngLat.lat)},clickOnVertex:function(ae){return this.changeMode(R.SIMPLE_SELECT,{featureIds:[ae.polygon.id]})},onMouseMove:function(ae,Oe){ae.polygon.updateCoordinate("0."+ae.currentVertexPosition,Oe.lngLat.lng,Oe.lngLat.lat),lr(Oe)&&this.updateUIClasses({mouse:S.POINTER})}};sa.onTap=sa.onClick=function(ae,Oe){return lr(Oe)?this.clickOnVertex(ae,Oe):this.clickAnywhere(ae,Oe)},sa.onKeyUp=function(ae,Oe){qr(Oe)?(this.deleteFeature([ae.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)):Kr(Oe)&&this.changeMode(R.SIMPLE_SELECT,{featureIds:[ae.polygon.id]})},sa.onStop=function(ae){this.updateUIClasses({mouse:S.NONE}),Bn.enable(this),this.activateUIButton(),this.getFeature(ae.polygon.id)!==void 0&&(ae.polygon.removeCoordinate("0."+ae.currentVertexPosition),ae.polygon.isValid()?this.map.fire(N.CREATE,{features:[ae.polygon.toGeoJSON()]}):(this.deleteFeature([ae.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT,{},{silent:!0})))},sa.toDisplayFeatures=function(ae,Oe,At){var Ht=Oe.properties.id===ae.polygon.id;if(Oe.properties.active=Ht?J.ACTIVE:J.INACTIVE,!Ht)return At(Oe);if(Oe.geometry.coordinates.length!==0){var er=Oe.geometry.coordinates[0].length;if(!(er<3)){if(Oe.properties.meta=$.FEATURE,At(ti(ae.polygon.id,Oe.geometry.coordinates[0][0],"0.0",!1)),er>3){var tr=Oe.geometry.coordinates[0].length-3;At(ti(ae.polygon.id,Oe.geometry.coordinates[0][tr],"0."+tr,!1))}if(er<=4){var _r=[[Oe.geometry.coordinates[0][0][0],Oe.geometry.coordinates[0][0][1]],[Oe.geometry.coordinates[0][1][0],Oe.geometry.coordinates[0][1][1]]];if(At({type:j.FEATURE,properties:Oe.properties,geometry:{coordinates:_r,type:j.LINE_STRING}}),er===3)return}return At(Oe)}}},sa.onTrash=function(ae){this.deleteFeature([ae.polygon.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)};var Ha={onSetup:function(ae){var Oe,At,Ht=(ae=ae||{}).featureId,er="forward";if(Ht){if(!(Oe=this.getFeature(Ht)))throw new Error("Could not find a feature with the provided featureId");var tr=ae.from;if(tr&&tr.type==="Feature"&&tr.geometry&&tr.geometry.type==="Point"&&(tr=tr.geometry),tr&&tr.type==="Point"&&tr.coordinates&&tr.coordinates.length===2&&(tr=tr.coordinates),!tr||!Array.isArray(tr))throw new Error("Please use the `from` property to indicate which point to continue the line from");var _r=Oe.coordinates.length-1;if(Oe.coordinates[_r][0]===tr[0]&&Oe.coordinates[_r][1]===tr[1])At=_r+1,Oe.addCoordinate.apply(Oe,[At].concat(Oe.coordinates[_r]));else{if(Oe.coordinates[0][0]!==tr[0]||Oe.coordinates[0][1]!==tr[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");er="backwards",At=0,Oe.addCoordinate.apply(Oe,[At].concat(Oe.coordinates[0]))}}else Oe=this.newFeature({type:j.FEATURE,properties:{},geometry:{type:j.LINE_STRING,coordinates:[]}}),At=0,this.addFeature(Oe);return this.clearSelectedFeatures(),Bn.disable(this),this.updateUIClasses({mouse:S.ADD}),this.activateUIButton(P.LINE),this.setActionableState({trash:!0}),{line:Oe,currentVertexPosition:At,direction:er}},clickAnywhere:function(ae,Oe){if(ae.currentVertexPosition>0&&Sl(Oe,ae.line.coordinates[ae.currentVertexPosition-1])||ae.direction==="backwards"&&Sl(Oe,ae.line.coordinates[ae.currentVertexPosition+1]))return this.changeMode(R.SIMPLE_SELECT,{featureIds:[ae.line.id]});this.updateUIClasses({mouse:S.ADD}),ae.line.updateCoordinate(ae.currentVertexPosition,Oe.lngLat.lng,Oe.lngLat.lat),ae.direction==="forward"?(ae.currentVertexPosition++,ae.line.updateCoordinate(ae.currentVertexPosition,Oe.lngLat.lng,Oe.lngLat.lat)):ae.line.addCoordinate(0,Oe.lngLat.lng,Oe.lngLat.lat)},clickOnVertex:function(ae){return this.changeMode(R.SIMPLE_SELECT,{featureIds:[ae.line.id]})},onMouseMove:function(ae,Oe){ae.line.updateCoordinate(ae.currentVertexPosition,Oe.lngLat.lng,Oe.lngLat.lat),lr(Oe)&&this.updateUIClasses({mouse:S.POINTER})}};Ha.onTap=Ha.onClick=function(ae,Oe){if(lr(Oe))return this.clickOnVertex(ae,Oe);this.clickAnywhere(ae,Oe)},Ha.onKeyUp=function(ae,Oe){Kr(Oe)?this.changeMode(R.SIMPLE_SELECT,{featureIds:[ae.line.id]}):qr(Oe)&&(this.deleteFeature([ae.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT))},Ha.onStop=function(ae){Bn.enable(this),this.activateUIButton(),this.getFeature(ae.line.id)!==void 0&&(ae.line.removeCoordinate(""+ae.currentVertexPosition),ae.line.isValid()?this.map.fire(N.CREATE,{features:[ae.line.toGeoJSON()]}):(this.deleteFeature([ae.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT,{},{silent:!0})))},Ha.onTrash=function(ae){this.deleteFeature([ae.line.id],{silent:!0}),this.changeMode(R.SIMPLE_SELECT)},Ha.toDisplayFeatures=function(ae,Oe,At){var Ht=Oe.properties.id===ae.line.id;if(Oe.properties.active=Ht?J.ACTIVE:J.INACTIVE,!Ht)return At(Oe);Oe.geometry.coordinates.length<2||(Oe.properties.meta=$.FEATURE,At(ti(ae.line.id,Oe.geometry.coordinates[ae.direction==="forward"?Oe.geometry.coordinates.length-2:1],""+(ae.direction==="forward"?Oe.geometry.coordinates.length-2:1),!1)),At(Oe))};var Gi={simple_select:es,direct_select:tl,draw_point:go,draw_polygon:sa,draw_line_string:Ha},Fc={defaultMode:R.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Fr,modes:Gi,controls:{},userProperties:!1},nc={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Ul={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Xo(ae,Oe){return ae.map(function(At){return At.source?At:Yt(At,{id:At.id+"."+Oe,source:Oe==="hot"?B.HOT:B.COLD})})}var Pa={exports:{}};(function(ae,Oe){var At="__lodash_hash_undefined__",Ht=9007199254740991,er="[object Arguments]",tr="[object Array]",_r="[object Boolean]",fn="[object Date]",pn="[object Error]",Nn="[object Function]",Mn="[object Map]",Xr="[object Number]",Qn="[object Object]",oi="[object Promise]",Pi="[object RegExp]",Sr="[object Set]",ln="[object String]",Jn="[object Symbol]",Bi="[object WeakMap]",Ns="[object ArrayBuffer]",Ks="[object DataView]",Ro=/^\[object .+?Constructor\]$/,yn=/^(?:0|[1-9]\d*)$/,Yn={};Yn["[object Float32Array]"]=Yn["[object Float64Array]"]=Yn["[object Int8Array]"]=Yn["[object Int16Array]"]=Yn["[object Int32Array]"]=Yn["[object Uint8Array]"]=Yn["[object Uint8ClampedArray]"]=Yn["[object Uint16Array]"]=Yn["[object Uint32Array]"]=!0,Yn[er]=Yn[tr]=Yn[Ns]=Yn[_r]=Yn[Ks]=Yn[fn]=Yn[pn]=Yn[Nn]=Yn[Mn]=Yn[Xr]=Yn[Qn]=Yn[Pi]=Yn[Sr]=Yn[ln]=Yn[Bi]=!1;var Li=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,da=typeof self=="object"&&self&&self.Object===Object&&self,Ms=Li||da||Function("return this")(),fi=Oe&&!Oe.nodeType&&Oe,Po=fi&&ae&&!ae.nodeType&&ae,zl=Po&&Po.exports===fi,oa=zl&&Li.process,yo=function(){try{return oa&&oa.binding&&oa.binding("util")}catch{}}(),ps=yo&&yo.isTypedArray;function $c(yr,jr){for(var xn=-1,jn=yr==null?0:yr.length;++xn<jn;)if(jr(yr[xn],xn,yr))return!0;return!1}function Ql(yr){var jr=-1,xn=Array(yr.size);return yr.forEach(function(jn,ts){xn[++jr]=[ts,jn]}),xn}function Hl(yr){var jr=-1,xn=Array(yr.size);return yr.forEach(function(jn){xn[++jr]=jn}),xn}var Ma,qo,Xs,Bo=Array.prototype,Ys=Function.prototype,vo=Object.prototype,fa=Ms["__core-js_shared__"],xs=Ys.toString,no=vo.hasOwnProperty,$o=(Ma=/[^.]+$/.exec(fa&&fa.keys&&fa.keys.IE_PROTO||""))?"Symbol(src)_1."+Ma:"",Eo=vo.toString,ic=RegExp("^"+xs.call(no).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=zl?Ms.Buffer:void 0,rl=Ms.Symbol,Uo=Ms.Uint8Array,Va=vo.propertyIsEnumerable,Vl=Bo.splice,Wo=rl?rl.toStringTag:void 0,yu=Object.getOwnPropertySymbols,pa=aa?aa.isBuffer:void 0,xo=(qo=Object.keys,Xs=Object,function(yr){return qo(Xs(yr))}),Gl=Zo(Ms,"DataView"),_o=Zo(Ms,"Map"),ql=Zo(Ms,"Promise"),k=Zo(Ms,"Set"),pe=Zo(Ms,"WeakMap"),Ke=Zo(Object,"create"),ot=la(Gl),St=la(_o),$t=la(ql),gr=la(k),$r=la(pe),An=rl?rl.prototype:void 0,Tn=An?An.valueOf:void 0;function Wr(yr){var jr=-1,xn=yr==null?0:yr.length;for(this.clear();++jr<xn;){var jn=yr[jr];this.set(jn[0],jn[1])}}function Dr(yr){var jr=-1,xn=yr==null?0:yr.length;for(this.clear();++jr<xn;){var jn=yr[jr];this.set(jn[0],jn[1])}}function Ci(yr){var jr=-1,xn=yr==null?0:yr.length;for(this.clear();++jr<xn;){var jn=yr[jr];this.set(jn[0],jn[1])}}function gn(yr){var jr=-1,xn=yr==null?0:yr.length;for(this.__data__=new Ci;++jr<xn;)this.add(yr[jr])}function Fi(yr){var jr=this.__data__=new Dr(yr);this.size=jr.size}function _s(yr,jr){var xn=bs(yr),jn=!xn&&sc(yr),ts=!xn&&!jn&&oc(yr),bi=!xn&&!jn&&!ts&&Aa(yr),As=xn||jn||ts||bi,us=As?function(ks,Ss){for(var Us=-1,Js=Array(ks);++Us<ks;)Js[Us]=Ss(Us);return Js}(yr.length,String):[],bo=us.length;for(var Xi in yr)!no.call(yr,Xi)||As&&(Xi=="length"||ts&&(Xi=="offset"||Xi=="parent")||bi&&(Xi=="buffer"||Xi=="byteLength"||Xi=="byteOffset")||cs(Xi,bo))||us.push(Xi);return us}function vn(yr,jr){for(var xn=yr.length;xn--;)if(Jr(yr[xn][0],jr))return xn;return-1}function ao(yr){return yr==null?yr===void 0?"[object Undefined]":"[object Null]":Wo&&Wo in Object(yr)?function(jr){var xn=no.call(jr,Wo),jn=jr[Wo];try{jr[Wo]=void 0;var ts=!0}catch{}var bi=Eo.call(jr);return ts&&(xn?jr[Wo]=jn:delete jr[Wo]),bi}(yr):function(jr){return Eo.call(jr)}(yr)}function Zs(yr){return Jo(yr)&&ao(yr)==er}function Yo(yr,jr,xn,jn,ts){return yr===jr||(yr==null||jr==null||!Jo(yr)&&!Jo(jr)?yr!=yr&&jr!=jr:function(bi,As,us,bo,Xi,ks){var Ss=bs(bi),Us=bs(As),Js=Ss?tr:$i(bi),ea=Us?tr:$i(As),ma=(Js=Js==er?Qn:Js)==Qn,ta=(ea=ea==er?Qn:ea)==Qn,ra=Js==ea;if(ra&&oc(bi)){if(!oc(As))return!1;Ss=!0,ma=!1}if(ra&&!ma)return ks||(ks=new Fi),Ss||Aa(bi)?io(bi,As,us,bo,Xi,ks):function(In,gi,lo,eo,ws,Yi,ai){switch(lo){case Ks:if(In.byteLength!=gi.byteLength||In.byteOffset!=gi.byteOffset)return!1;In=In.buffer,gi=gi.buffer;case Ns:return!(In.byteLength!=gi.byteLength||!Yi(new Uo(In),new Uo(gi)));case _r:case fn:case Xr:return Jr(+In,+gi);case pn:return In.name==gi.name&&In.message==gi.message;case Pi:case ln:return In==gi+"";case Mn:var qs=Ql;case Sr:var sl=1&eo;if(qs||(qs=Hl),In.size!=gi.size&&!sl)return!1;var ac=ai.get(In);if(ac)return ac==gi;eo|=2,ai.set(In,gi);var ol=io(qs(In),qs(gi),eo,ws,Yi,ai);return ai.delete(In),ol;case Jn:if(Tn)return Tn.call(In)==Tn.call(gi)}return!1}(bi,As,Js,us,bo,Xi,ks);if(!(1&us)){var Gs=ma&&no.call(bi,"__wrapped__"),ga=ta&&no.call(As,"__wrapped__");if(Gs||ga){var hs=Gs?bi.value():bi,ss=ga?As.value():As;return ks||(ks=new Fi),Xi(hs,ss,us,bo,ks)}}return ra?(ks||(ks=new Fi),function(In,gi,lo,eo,ws,Yi){var ai=1&lo,qs=Ga(In),sl=qs.length,ac=Ga(gi).length;if(sl!=ac&&!ai)return!1;for(var ol=sl;ol--;){var qa=qs[ol];if(!(ai?qa in gi:no.call(gi,qa)))return!1}var Mc=Yi.get(In);if(Mc&&Yi.get(gi))return Mc==gi;var lc=!0;Yi.set(In,gi),Yi.set(gi,In);for(var so=ai;++ol<sl;){var zs=In[qa=qs[ol]],cc=gi[qa];if(eo)var jc=ai?eo(cc,zs,qa,gi,In,Yi):eo(zs,cc,qa,In,gi,Yi);if(!(jc===void 0?zs===cc||ws(zs,cc,lo,eo,Yi):jc)){lc=!1;break}so||(so=qa=="constructor")}if(lc&&!so){var vu=In.constructor,Sc=gi.constructor;vu==Sc||!("constructor"in In)||!("constructor"in gi)||typeof vu=="function"&&vu instanceof vu&&typeof Sc=="function"&&Sc instanceof Sc||(lc=!1)}return Yi.delete(In),Yi.delete(gi),lc}(bi,As,us,bo,Xi,ks)):!1}(yr,jr,xn,jn,Yo,ts))}function nl(yr){return!(!js(yr)||function(jr){return!!$o&&$o in jr}(yr))&&(yl(yr)?ic:Ro).test(la(yr))}function il(yr){if(xn=(jr=yr)&&jr.constructor,jn=typeof xn=="function"&&xn.prototype||vo,jr!==jn)return xo(yr);var jr,xn,jn,ts=[];for(var bi in Object(yr))no.call(yr,bi)&&bi!="constructor"&&ts.push(bi);return ts}function io(yr,jr,xn,jn,ts,bi){var As=1&xn,us=yr.length,bo=jr.length;if(us!=bo&&!(As&&bo>us))return!1;var Xi=bi.get(yr);if(Xi&&bi.get(jr))return Xi==jr;var ks=-1,Ss=!0,Us=2&xn?new gn:void 0;for(bi.set(yr,jr),bi.set(jr,yr);++ks<us;){var Js=yr[ks],ea=jr[ks];if(jn)var ma=As?jn(ea,Js,ks,jr,yr,bi):jn(Js,ea,ks,yr,jr,bi);if(ma!==void 0){if(ma)continue;Ss=!1;break}if(Us){if(!$c(jr,function(ta,ra){if(Gs=ra,!Us.has(Gs)&&(Js===ta||ts(Js,ta,xn,jn,bi)))return Us.push(ra);var Gs})){Ss=!1;break}}else if(Js!==ea&&!ts(Js,ea,xn,jn,bi)){Ss=!1;break}}return bi.delete(yr),bi.delete(jr),Ss}function Ga(yr){return function(jr,xn,jn){var ts=xn(jr);return bs(jr)?ts:function(bi,As){for(var us=-1,bo=As.length,Xi=bi.length;++us<bo;)bi[Xi+us]=As[us];return bi}(ts,jn(jr))}(yr,Pc,ja)}function Ea(yr,jr){var xn,jn,ts=yr.__data__;return((jn=typeof(xn=jr))=="string"||jn=="number"||jn=="symbol"||jn=="boolean"?xn!=="__proto__":xn===null)?ts[typeof jr=="string"?"string":"hash"]:ts.map}function Zo(yr,jr){var xn=function(jn,ts){return jn==null?void 0:jn[ts]}(yr,jr);return nl(xn)?xn:void 0}Wr.prototype.clear=function(){this.__data__=Ke?Ke(null):{},this.size=0},Wr.prototype.delete=function(yr){var jr=this.has(yr)&&delete this.__data__[yr];return this.size-=jr?1:0,jr},Wr.prototype.get=function(yr){var jr=this.__data__;if(Ke){var xn=jr[yr];return xn===At?void 0:xn}return no.call(jr,yr)?jr[yr]:void 0},Wr.prototype.has=function(yr){var jr=this.__data__;return Ke?jr[yr]!==void 0:no.call(jr,yr)},Wr.prototype.set=function(yr,jr){var xn=this.__data__;return this.size+=this.has(yr)?0:1,xn[yr]=Ke&&jr===void 0?At:jr,this},Dr.prototype.clear=function(){this.__data__=[],this.size=0},Dr.prototype.delete=function(yr){var jr=this.__data__,xn=vn(jr,yr);return!(xn<0)&&(xn==jr.length-1?jr.pop():Vl.call(jr,xn,1),--this.size,!0)},Dr.prototype.get=function(yr){var jr=this.__data__,xn=vn(jr,yr);return xn<0?void 0:jr[xn][1]},Dr.prototype.has=function(yr){return vn(this.__data__,yr)>-1},Dr.prototype.set=function(yr,jr){var xn=this.__data__,jn=vn(xn,yr);return jn<0?(++this.size,xn.push([yr,jr])):xn[jn][1]=jr,this},Ci.prototype.clear=function(){this.size=0,this.__data__={hash:new Wr,map:new(_o||Dr),string:new Wr}},Ci.prototype.delete=function(yr){var jr=Ea(this,yr).delete(yr);return this.size-=jr?1:0,jr},Ci.prototype.get=function(yr){return Ea(this,yr).get(yr)},Ci.prototype.has=function(yr){return Ea(this,yr).has(yr)},Ci.prototype.set=function(yr,jr){var xn=Ea(this,yr),jn=xn.size;return xn.set(yr,jr),this.size+=xn.size==jn?0:1,this},gn.prototype.add=gn.prototype.push=function(yr){return this.__data__.set(yr,At),this},gn.prototype.has=function(yr){return this.__data__.has(yr)},Fi.prototype.clear=function(){this.__data__=new Dr,this.size=0},Fi.prototype.delete=function(yr){var jr=this.__data__,xn=jr.delete(yr);return this.size=jr.size,xn},Fi.prototype.get=function(yr){return this.__data__.get(yr)},Fi.prototype.has=function(yr){return this.__data__.has(yr)},Fi.prototype.set=function(yr,jr){var xn=this.__data__;if(xn instanceof Dr){var jn=xn.__data__;if(!_o||jn.length<199)return jn.push([yr,jr]),this.size=++xn.size,this;xn=this.__data__=new Ci(jn)}return xn.set(yr,jr),this.size=xn.size,this};var ja=yu?function(yr){return yr==null?[]:(yr=Object(yr),function(jr,xn){for(var jn=-1,ts=jr==null?0:jr.length,bi=0,As=[];++jn<ts;){var us=jr[jn];xn(us,jn,jr)&&(As[bi++]=us)}return As}(yu(yr),function(jr){return Va.call(yr,jr)}))}:function(){return[]},$i=ao;function cs(yr,jr){return!!(jr=jr??Ht)&&(typeof yr=="number"||yn.test(yr))&&yr>-1&&yr%1==0&&yr<jr}function la(yr){if(yr!=null){try{return xs.call(yr)}catch{}try{return yr+""}catch{}}return""}function Jr(yr,jr){return yr===jr||yr!=yr&&jr!=jr}(Gl&&$i(new Gl(new ArrayBuffer(1)))!=Ks||_o&&$i(new _o)!=Mn||ql&&$i(ql.resolve())!=oi||k&&$i(new k)!=Sr||pe&&$i(new pe)!=Bi)&&($i=function(yr){var jr=ao(yr),xn=jr==Qn?yr.constructor:void 0,jn=xn?la(xn):"";if(jn)switch(jn){case ot:return Ks;case St:return Mn;case $t:return oi;case gr:return Sr;case $r:return Bi}return jr});var sc=Zs(function(){return arguments}())?Zs:function(yr){return Jo(yr)&&no.call(yr,"callee")&&!Va.call(yr,"callee")},bs=Array.isArray,oc=pa||function(){return!1};function yl(yr){if(!js(yr))return!1;var jr=ao(yr);return jr==Nn||jr=="[object GeneratorFunction]"||jr=="[object AsyncFunction]"||jr=="[object Proxy]"}function $l(yr){return typeof yr=="number"&&yr>-1&&yr%1==0&&yr<=Ht}function js(yr){var jr=typeof yr;return yr!=null&&(jr=="object"||jr=="function")}function Jo(yr){return yr!=null&&typeof yr=="object"}var Aa=ps?function(yr){return function(jr){return yr(jr)}}(ps):function(yr){return Jo(yr)&&$l(yr.length)&&!!Yn[ao(yr)]};function Pc(yr){return(jr=yr)!=null&&$l(jr.length)&&!yl(jr)?_s(yr):il(yr);var jr}ae.exports=function(yr,jr){return Yo(yr,jr)}})(Pa,Pa.exports);var mi=n(Pa.exports);function So(ae,Oe){return ae.length===Oe.length&&JSON.stringify(ae.map(function(At){return At}).sort())===JSON.stringify(Oe.map(function(At){return At}).sort())}var vs={Polygon:He,LineString:be,Point:fe,MultiPolygon:st,MultiLineString:st,MultiPoint:st},Bl=Object.freeze({__proto__:null,CommonSelectors:kn,constrainFeatureMovement:ro,createMidPoint:si,createSupplementaryPoints:xi,createVertex:ti,doubleClickZoom:Bn,euclideanDistance:Be,featuresAt:_e,getFeatureAtAndSetCursors:De,isClick:xe,isEventAtCoordinates:Sl,isTap:ze,mapEventToBoundingBox:Z,ModeHandler:r,moveFeatures:Fs,sortFeatures:me,stringSetsAreEqual:So,StringSet:Y,theme:Fr,toDenseArray:fr}),Nc=function(ae,Oe){var At={options:ae=function(er){er===void 0&&(er={});var tr=Yt(er);return er.controls||(tr.controls={}),er.displayControlsDefault===!1?tr.controls=Yt(Ul,er.controls):tr.controls=Yt(nc,er.controls),(tr=Yt(Fc,tr)).styles=Xo(tr.styles,"cold").concat(Xo(tr.styles,"hot")),tr}(ae)};Oe=function(er,tr){return tr.modes=R,tr.getFeatureIdsAt=function(_r){return _e.click({point:_r},null,er).map(function(fn){return fn.properties.id})},tr.getSelectedIds=function(){return er.store.getSelectedIds()},tr.getSelected=function(){return{type:j.FEATURE_COLLECTION,features:er.store.getSelectedIds().map(function(_r){return er.store.get(_r)}).map(function(_r){return _r.toGeoJSON()})}},tr.getSelectedPoints=function(){return{type:j.FEATURE_COLLECTION,features:er.store.getSelectedCoordinates().map(function(_r){return{type:j.FEATURE,properties:{},geometry:{type:j.POINT,coordinates:_r.coordinates}}})}},tr.set=function(_r){if(_r.type===void 0||_r.type!==j.FEATURE_COLLECTION||!Array.isArray(_r.features))throw new Error("Invalid FeatureCollection");var fn=er.store.createRenderBatch(),pn=er.store.getAllIds().slice(),Nn=tr.add(_r),Mn=new Y(Nn);return(pn=pn.filter(function(Xr){return!Mn.has(Xr)})).length&&tr.delete(pn),fn(),Nn},tr.add=function(_r){var fn=JSON.parse(JSON.stringify(ri(_r))).features.map(function(pn){if(pn.id=pn.id||ie(),pn.geometry===null)throw new Error("Invalid geometry: null");if(er.store.get(pn.id)===void 0||er.store.get(pn.id).type!==pn.geometry.type){var Nn=vs[pn.geometry.type];if(Nn===void 0)throw new Error("Invalid geometry type: "+pn.geometry.type+".");var Mn=new Nn(er,pn);er.store.add(Mn)}else{var Xr=er.store.get(pn.id);Xr.properties=pn.properties,mi(Xr.properties,pn.properties)||er.store.featureChanged(Xr.id),mi(Xr.getCoordinates(),pn.geometry.coordinates)||Xr.incomingCoords(pn.geometry.coordinates)}return pn.id});return er.store.render(),fn},tr.get=function(_r){var fn=er.store.get(_r);if(fn)return fn.toGeoJSON()},tr.getAll=function(){return{type:j.FEATURE_COLLECTION,features:er.store.getAll().map(function(_r){return _r.toGeoJSON()})}},tr.delete=function(_r){return er.store.delete(_r,{silent:!0}),tr.getMode()!==R.DIRECT_SELECT||er.store.getSelectedIds().length?er.store.render():er.events.changeMode(R.SIMPLE_SELECT,void 0,{silent:!0}),tr},tr.deleteAll=function(){return er.store.delete(er.store.getAllIds(),{silent:!0}),tr.getMode()===R.DIRECT_SELECT?er.events.changeMode(R.SIMPLE_SELECT,void 0,{silent:!0}):er.store.render(),tr},tr.changeMode=function(_r,fn){return fn===void 0&&(fn={}),_r===R.SIMPLE_SELECT&&tr.getMode()===R.SIMPLE_SELECT?(So(fn.featureIds||[],er.store.getSelectedIds())||(er.store.setSelected(fn.featureIds,{silent:!0}),er.store.render()),tr):(_r===R.DIRECT_SELECT&&tr.getMode()===R.DIRECT_SELECT&&fn.featureId===er.store.getSelectedIds()[0]||er.events.changeMode(_r,fn,{silent:!0}),tr)},tr.getMode=function(){return er.events.getMode()},tr.trash=function(){return er.events.trash({silent:!0}),tr},tr.combineFeatures=function(){return er.events.combineFeatures({silent:!0}),tr},tr.uncombineFeatures=function(){return er.events.uncombineFeatures({silent:!0}),tr},tr.setFeatureProperty=function(_r,fn,pn){return er.store.setFeatureProperty(_r,fn,pn),tr},tr}(At,Oe),At.api=Oe;var Ht=nr(At);return Oe.onAdd=Ht.onAdd,Oe.onRemove=Ht.onRemove,Oe.types=P,Oe.options=ae,Oe};function Cc(ae){Nc(ae,this)}return Cc.modes=Gi,Cc.constants=oe,Cc.lib=Bl,Cc})})(IG);var nde=IG.exports;const LG=Sp(nde);var O8=63710088e-1;function FG(t,e,r={}){const n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function ide(t,e,r={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!R8(t[0])||!R8(t[1]))throw new Error("coordinates must contain numbers");return FG({type:"Point",coordinates:t},e,r)}function sde(t,e,r={}){for(const s of t){if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(s[s.length-1].length!==s[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}return FG({type:"Polygon",coordinates:t},e,r)}function R8(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function NG(t,e,r){if(t!==null)for(var n,s,o,c,u,i,A,g=0,C=0,B,S=t.type,P=S==="FeatureCollection",j=S==="Feature",R=P?t.features.length:1,N=0;N<R;N++){A=P?t.features[N].geometry:j?t.geometry:t,B=A?A.type==="GeometryCollection":!1,u=B?A.geometries.length:1;for(var U=0;U<u;U++){var $=0,J=0;if(c=B?A.geometries[U]:A,c!==null){i=c.coordinates;var te=c.type;switch(g=te==="Polygon"||te==="MultiPolygon"?1:0,te){case null:break;case"Point":if(e(i,C,N,$,J)===!1)return!1;C++,$++;break;case"LineString":case"MultiPoint":for(n=0;n<i.length;n++){if(e(i[n],C,N,$,J)===!1)return!1;C++,te==="MultiPoint"&&$++}te==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(n=0;n<i.length;n++){for(s=0;s<i[n].length-g;s++){if(e(i[n][s],C,N,$,J)===!1)return!1;C++}te==="MultiLineString"&&$++,te==="Polygon"&&J++}te==="Polygon"&&$++;break;case"MultiPolygon":for(n=0;n<i.length;n++){for(J=0,s=0;s<i[n].length;s++){for(o=0;o<i[n][s].length-g;o++){if(e(i[n][s][o],C,N,$,J)===!1)return!1;C++}J++}$++}break;case"GeometryCollection":for(n=0;n<c.geometries.length;n++)if(NG(c.geometries[n],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ode(t,e){var r,n,s,o,c,u,i,A,g,C,B=0,S=t.type==="FeatureCollection",P=t.type==="Feature",j=S?t.features.length:1;for(r=0;r<j;r++){for(u=S?t.features[r].geometry:P?t.geometry:t,A=S?t.features[r].properties:P?t.properties:{},g=S?t.features[r].bbox:P?t.bbox:void 0,C=S?t.features[r].id:P?t.id:void 0,i=u?u.type==="GeometryCollection":!1,c=i?u.geometries.length:1,s=0;s<c;s++){if(o=i?u.geometries[s]:u,o===null){if(e(null,B,A,g,C)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,B,A,g,C)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(e(o.geometries[n],B,A,g,C)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}B++}}function ade(t,e,r){var n=r;return ode(t,function(s,o,c,u,i){o===0&&r===void 0?n=s:n=e(n,s,o,c,u,i)}),n}function Ad(t){return ade(t,(e,r)=>e+lde(r),0)}function lde(t){let e=0,r;switch(t.type){case"Polygon":return U8(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)e+=U8(t.coordinates[r]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function U8(t){let e=0;if(t&&t.length>0){e+=Math.abs(z8(t[0]));for(let r=1;r<t.length;r++)e-=Math.abs(z8(t[r]))}return e}var cde=O8*O8/2,VE=Math.PI/180;function z8(t){const e=t.length-1;if(e<=2)return 0;let r=0,n=0;for(;n<e;){const s=t[n],o=t[n+1===e?0:n+1],c=t[n+2>=e?(n+2)%e:n+2],u=s[0]*VE,i=o[1]*VE,A=c[0]*VE;r+=(A-u)*Math.sin(i),n++}return r*cde}function MF(t,e={}){let r=0,n=0,s=0;return NG(t,function(o){r+=o[0],n+=o[1],s++}),ide([r/s,n/s],e.properties)}const ude=({longitude:t,latitude:e,onPolygonChange:r,onPlaceSelect:n})=>{const s=ve.useRef(),o=ve.useRef(),c=ve.useRef(),[u,i]=ve.useState();return ve.useEffect(()=>{is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q";const A=new is.Map({container:s.current,style:"mapbox://styles/mapbox/satellite-v9",center:[t,e],zoom:8});o.current=A;const g=new LG({displayControlsDefault:!1,controls:{polygon:!0,trash:!0},defaultMode:"draw_polygon"});A.addControl(g),c.current=g;const C=new gC({accessToken:is.accessToken,zoom:4,placeholder:"Search coordinates",mapboxgl:is,reverseGeocode:!0});A.addControl(C),C.on("result",S=>{n==null||n(S.result),A.flyTo({center:S.result.geometry.coordinates,zoom:15})});const B=()=>{const S=g.getAll();if(S.features.length>0){const P=Ad(S);i(Math.round(P*100)/100),r==null||r(S.features[0].geometry.coordinates)}else i(void 0)};A.on("draw.create",B),A.on("draw.delete",B),A.on("draw.update",B)},[t,e]),{mapContainerRef:s,mapRef:o,drawRef:c,roundedArea:u}},hde=({onAdd:t,onValidate:e})=>{const[r,n]=ve.useState({lng:"",lat:""}),s=()=>{if(!r.lng||!r.lat){alert("Please enter valid coordinates.");return}t([parseFloat(r.lng),parseFloat(r.lat)]),n({lng:"",lat:""})};return m.jsxs("div",{className:"bg-white p-4 rounded-md shadow-lg",children:[m.jsx("div",{children:m.jsxs("label",{children:["Longitude:",m.jsx("input",{type:"number",value:r.lng,onChange:o=>n({...r,lng:o.target.value}),className:"border p-2 rounded-md ml-2"})]})}),m.jsx("div",{className:"mt-2",children:m.jsxs("label",{children:["Latitude:",m.jsx("input",{type:"number",value:r.lat,onChange:o=>n({...r,lat:o.target.value}),className:"border p-2 rounded-md ml-2"})]})}),m.jsx("button",{onClick:s,className:"mt-4 bg-blue-500 text-white p-2 rounded-md",children:"Add Coordinate"}),m.jsx("button",{onClick:e,className:"mt-4 bg-green-500 text-white p-2 rounded-md ml-2",children:"Validate Selection"})]})},dde=()=>{var j,R,N;const t=Ju(),e=(j=t.state)==null?void 0:j.owner_id,r=(R=t.state)==null?void 0:R.geolocation,n=(N=t.state)==null?void 0:N.owner_type;let s="32.5825",o="0.3476";r&&r.includes(",")&&([s,o]=r.split(","));const[c,u]=ve.useState([]),[i,A]=ve.useState(null),{mapContainerRef:g,mapRef:C,drawRef:B}=ude({longitude:s,latitude:o,onPolygonChange:u,onPlaceSelect:U=>console.log("Selected place:",U)}),S=U=>{u($=>{const J=$.length?[...$]:[[]];return J[0].push(U),J})},P=async()=>{if(c.length===0||c[0].length<4){A({type:"error",message:"Invalid polygon"});return}try{const{data:U}=await Mr.get(`/api/points/exists/${n}/${e}`);if(U.exists){A({type:"error",message:"GeoMap already exists"});return}const $=c[0].map(([J,te])=>({longitude:J,latitude:te}));for(const J of $)await Mr.post("/api/points/create",{...J,owner_id:e,owner_type:n});A({type:"success",message:"Points saved!"})}catch(U){A({type:"error",message:U.response?U.response.data:U.message})}};return m.jsxs("div",{className:"relative h-full",children:[i&&m.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg ${i.type==="success"?"bg-green-500":"bg-red-500"} text-white`,children:i.message}),m.jsx("div",{className:"absolute top-10 left-2 z-10",children:m.jsx(hde,{onAdd:S,onValidate:P})}),m.jsx("div",{className:"relative h-[600px]",children:m.jsx("div",{ref:g,className:"absolute inset-0"})})]})},fde=()=>{var N,U,$;const t=ve.useRef(),e=ve.useRef(),r=ve.useRef(new is.Popup({closeButton:!1,closeOnClick:!1})),n=Ju(),s=(N=n.state)==null?void 0:N.owner_id,o=(U=n.state)==null?void 0:U.owner_type,c=($=n.state)==null?void 0:$.geolocation;let u="32.5825",i="0.3476";const[A,g]=ve.useState(null);c&&c.includes(",")&&([u,i]=c.split(","));const[C,B]=ve.useState(null),[S,P]=ve.useState({center:[u,i],zoom:15}),[j,R]=ve.useState(null);return ve.useEffect(()=>{is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current||(e.current=new is.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:[u,i],zoom:15}),e.current.on("move",()=>{const te=e.current.getCenter(),ue=e.current.getZoom();P({center:[te.lng,te.lat],zoom:ue.toFixed(2)})})),(async()=>{try{const ue=(await Mr.get(`/api/points/getbyownerid/${o}/${s}`)).data.points;if(ue.length===0){B({type:"info",message:"No points found. Please create a point first."});return}B(null);const oe={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[ue.map(ce=>[ce.longitude,ce.latitude])]},properties:{owner_type:o,owner_id:s,id:"unique-feature-id"}}]},K=()=>{e.current.getSource("polygon")?e.current.getSource("polygon").setData(oe):(e.current.addSource("polygon",{type:"geojson",data:oe}),e.current.addLayer({id:"polygon-fill",type:"fill",source:"polygon",paint:{"fill-color":"#0080ff","fill-opacity":.5}}),e.current.addLayer({id:"polygon-outline",type:"line",source:"polygon",paint:{"line-color":"#000","line-width":2}}),e.current.on("mouseenter","polygon-fill",Le=>{const _e=Le.features[0].properties;r.current.setLngLat(Z.geometry.coordinates).setHTML(`
                  <strong>Owner ID:</strong> ${_e.owner_id}<br />
                  <strong>Area:</strong> ${Math.round(Ad(oe.features[0])*100)/100} m<br />
                `).addTo(e.current)}),e.current.on("mouseleave","polygon-fill",()=>{r.current.remove()}));const ce=new is.LngLatBounds;ue.forEach(Le=>{ce.extend([Le.longitude,Le.latitude])}),e.current.fitBounds(ce,{padding:20});const me=Ad(oe.features[0]);R(Math.round(me*100)/100),g(Math.round(me/4));const Z=MF(oe.features[0]),Y=new is.Marker({color:"red"}).setLngLat(Z.geometry.coordinates).addTo(e.current);r.current.setLngLat(Z.geometry.coordinates).setHTML(`
              <strong>Owner ID:</strong> ${s}<br />
              <strong>Area:</strong> ${Math.round(me*100)/100} m<br />
            `).addTo(e.current)};e.current.isStyleLoaded()?K():e.current.on("load",K)}catch(te){console.error("Error fetching points:",te)}})()},[s,o,u,i]),m.jsxs("div",{className:"relative h-full",children:[C&&m.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg transition-shadow duration-300 focus:outline-none ${C.type==="info"?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:C.message}),m.jsx("div",{ref:t,id:"map",className:"h-[80vh]"}),m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 p-4 max-w-sm w-full",children:m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),m.jsxs("div",{className:"mt-4",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Map Properties"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Area m:"})," ",j||"Calculating..."," m"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Zoom:"})," ",S.zoom]})]})]})}),m.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 ms-4 p-4 flex-1",children:m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),m.jsxs("div",{className:"mt-4",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Estimated Trees:"})," ",A||"Calculating..."]})]})]})})]})]})},pde=()=>{var P;const t=ve.useRef(),e=ve.useRef(),r=Ju();ve.useRef(new is.Popup({closeButton:!1,closeOnClick:!1}));const n=(P=r.state)==null?void 0:P.owner_type,[s,o]=ve.useState(null),[c,u]=ve.useState({center:[-32.5825,.3476],zoom:5}),[i,A]=ve.useState([]),[g,C]=ve.useState(0),[B,S]=ve.useState(0);return ve.useEffect(()=>{is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current||(e.current=new is.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:c.center,zoom:c.zoom}),e.current.on("move",()=>{const j=e.current.getCenter(),R=e.current.getZoom();u({center:[j.lng,j.lat],zoom:R.toFixed(2)})}))},[c.center,c.zoom]),ve.useEffect(()=>{(async()=>{try{const N=(await Mr.get(`/api/points/getallbyownertype/${n}`)).data;if(console.log(N),!N.polygons||N.polygons.length===0){o({type:"info",message:"No polygons found."});return}o(null),A(N.polygons),S(N.polygons.length)}catch(R){console.error("Error fetching polygons:",R)}})()},[n]),ve.useEffect(()=>{const j=()=>{const N="0123456789ABCDEF";let U="#";for(let $=0;$<6;$++)U+=N[Math.floor(Math.random()*16)];return U},R=()=>{if(!e.current||i.length===0)return;const N=i.map((J,te)=>{const ue=J.points.map(ce=>[ce.longitude,ce.latitude]),oe={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[ue]},properties:{id:te,owner_type:J.owner_type,owner_id:J.owner_id,area:Math.round(Ad({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[ue]}}]})*100)/100}}]},K=MF(oe.features[0]);return new is.Marker().setLngLat([K.geometry.coordinates[0],K.geometry.coordinates[1]]).addTo(e.current),{type:"Feature",geometry:{type:"Polygon",coordinates:[ue]},properties:{id:te,owner_type:J.owner_type,owner_id:J.owner_id,area:Math.round(Ad(oe.features[0])*100)/100,color:j()}}}),U=N.reduce((J,te)=>J+te.properties.area,0);C(U);const $={type:"FeatureCollection",features:N};if(e.current.getSource("multiPolygon"))e.current.getSource("multiPolygon").setData($);else{e.current.addSource("multiPolygon",{type:"geojson",data:$}),e.current.addLayer({id:"multiPolygon-fill",type:"fill",source:"multiPolygon",paint:{"fill-color":["get","color"],"fill-opacity":.5}}),e.current.addLayer({id:"multiPolygon-outline",type:"line",source:"multiPolygon",paint:{"line-color":"#000","line-width":2}}),e.current.on("click","multiPolygon-fill",te=>{const{properties:ue}=te.features[0];new is.Popup().setLngLat(te.lngLat).setHTML(` <h3>Owner Type: ${ue.owner_type}</h3>
              <p>Owner ID: ${ue.owner_id}</p>
              <p>Feature ID: ${ue.id}</p>
              <p>Area: ${ue.area} m</p>
              <button class="delete-btn" data-owner-id="${ue.owner_id}" style="margin-top: 10px; padding: 5px 10px; background-color: red; color: white; border: none; border-radius: 3px; cursor: pointer;">Delete Polygon</button>`).addTo(e.current)}),e.current.on("mouseenter","multiPolygon-fill",()=>{e.current.getCanvas().style.cursor="pointer"}),e.current.on("mouseleave","multiPolygon-fill",()=>{e.current.getCanvas().style.cursor=""});const J=new is.LngLatBounds;N.forEach(te=>{te.geometry.coordinates[0].forEach(ue=>J.extend(ue))}),e.current.fitBounds(J,{padding:20})}};e.current&&i.length>0&&(e.current.isStyleLoaded()?R():e.current.on("load",R))},[i]),ve.useEffect(()=>{const j=async R=>{if(R.target.classList.contains("delete-btn")){const N=R.target.getAttribute("data-owner-id");if(!window.confirm(`Are you sure you want to delete the polygon with owner ID: ${N}?`))return;console.log("Owner ID:",N);try{if((await Mr.delete(`/api/points/owner/${N}`)).status===204){console.log(`Polygon with owner ID: ${N} deleted successfully.`),o({type:"info",message:`Polygon with owner ID: ${N} deleted successfully.`});const te=(await Mr.get(`/api/points/getallbyownertype/${n}`)).data;A(te.polygons),S(te.polygons.length)}else o({type:"error",message:`Failed to delete polygon with owner ID: ${N}.`})}catch($){console.error("Error deleting polygon:",$),o({type:"error",message:`Error deleting polygon with owner ID: ${N}.`})}}};return t.current.addEventListener("click",j),()=>{t.current&&t.current.removeEventListener("click",j)}},[i]),m.jsxs("div",{className:"relative h-full",children:[s&&m.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg transition-shadow duration-300 focus:outline-none ${s.type==="info"?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:s.message}),m.jsx("div",{ref:t,id:"map",className:"h-[80vh]"}),m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 p-4 max-w-sm w-full",children:m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),m.jsxs("div",{className:"mt-4",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Map Properties"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Total Area:"})," ",g?`${g} m`:"Calculating..."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Number of Polygons:"})," ",B]})," ",m.jsxs("p",{children:[m.jsx("strong",{children:"Zoom:"})," ",c.zoom]})]})]})}),m.jsx("div",{className:"border border-blue-300 shadow rounded-md mt-4 ms-4 p-4 flex-1",children:m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("div",{className:"rounded-full bg-slate-700 h-10 w-10"}),m.jsxs("div",{className:"mt-4",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Additional Information"}),m.jsx("p",{children:"This is where you can add more details related to the map or your application."})]})]})})]})]})},PG=ve.createContext({});function Ade(t){const e=ve.useRef(null);return e.current===null&&(e.current=t()),e.current}const jF=typeof window<"u",mde=jF?ve.useLayoutEffect:ve.useEffect,kF=ve.createContext(null);function DF(t,e){t.indexOf(e)===-1&&t.push(e)}function OF(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const fA=(t,e,r)=>r>e?e:r<t?t:r;let h4=()=>{};const pA={},MG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function jG(t){return typeof t=="object"&&t!==null}const kG=t=>/^0[^.\s]+$/u.test(t);function RF(t){let e;return()=>(e===void 0&&(e=t()),e)}const Jd=t=>t,gde=(t,e)=>r=>e(t(r)),tb=(...t)=>t.reduce(gde),B_=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class UF{constructor(){this.subscriptions=[]}add(e){return DF(this.subscriptions,e),()=>OF(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let o=0;o<s;o++){const c=this.subscriptions[o];c&&c(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xp=t=>t*1e3,_p=t=>t/1e3;function DG(t,e){return e?t*(1e3/e):0}const OG=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,yde=1e-7,vde=12;function xde(t,e,r,n,s){let o,c,u=0;do c=e+(r-e)/2,o=OG(c,n,s)-t,o>0?r=c:e=c;while(Math.abs(o)>yde&&++u<vde);return c}function rb(t,e,r,n){if(t===e&&r===n)return Jd;const s=o=>xde(o,0,1,t,r);return o=>o===0||o===1?o:OG(s(o),e,n)}const RG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,UG=t=>e=>1-t(1-e),zG=rb(.33,1.53,.69,.99),zF=UG(zG),QG=RG(zF),HG=t=>(t*=2)<1?.5*zF(t):.5*(2-Math.pow(2,-10*(t-1))),QF=t=>1-Math.sin(Math.acos(t)),VG=UG(QF),GG=RG(QF),_de=rb(.42,0,1,1),bde=rb(0,0,.58,1),qG=rb(.42,0,.58,1),wde=t=>Array.isArray(t)&&typeof t[0]!="number",$G=t=>Array.isArray(t)&&typeof t[0]=="number",Q8={linear:Jd,easeIn:_de,easeInOut:qG,easeOut:bde,circIn:QF,circInOut:GG,circOut:VG,backIn:zF,backInOut:QG,backOut:zG,anticipate:HG},Cde=t=>typeof t=="string",H8=t=>{if($G(t)){h4(t.length===4);const[e,r,n,s]=t;return rb(e,r,n,s)}else if(Cde(t))return h4(Q8[t]!==void 0),Q8[t];return t},Yw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],V8={value:null,addProjectionMetrics:null};function Sde(t,e){let r=new Set,n=new Set,s=!1,o=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},i=0;function A(C){c.has(C)&&(g.schedule(C),t()),i++,C(u)}const g={schedule:(C,B=!1,S=!1)=>{const j=S&&s?r:n;return B&&c.add(C),j.has(C)||j.add(C),C},cancel:C=>{n.delete(C),c.delete(C)},process:C=>{if(u=C,s){o=!0;return}s=!0,[r,n]=[n,r],r.forEach(A),e&&V8.value&&V8.value.frameloop[e].push(i),i=0,r.clear(),s=!1,o&&(o=!1,g.process(C))}};return g}const Bde=40;function WG(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>r=!0,c=Yw.reduce(($,J)=>($[J]=Sde(o,e?J:void 0),$),{}),{setup:u,read:i,resolveKeyframes:A,preUpdate:g,update:C,preRender:B,render:S,postRender:P}=c,j=()=>{const $=pA.useManualTiming?s.timestamp:performance.now();r=!1,pA.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min($-s.timestamp,Bde),1)),s.timestamp=$,s.isProcessing=!0,u.process(s),i.process(s),A.process(s),g.process(s),C.process(s),B.process(s),S.process(s),P.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(j))},R=()=>{r=!0,n=!0,s.isProcessing||t(j)};return{schedule:Yw.reduce(($,J)=>{const te=c[J];return $[J]=(ue,oe=!1,K=!1)=>(r||R(),te.schedule(ue,oe,K)),$},{}),cancel:$=>{for(let J=0;J<Yw.length;J++)c[Yw[J]].cancel($)},state:s,steps:c}}const{schedule:Ol,cancel:qm,state:du,steps:GE}=WG(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jd,!0);let a5;function Ede(){a5=void 0}const zh={now:()=>(a5===void 0&&zh.set(du.isProcessing||pA.useManualTiming?du.timestamp:performance.now()),a5),set:t=>{a5=t,queueMicrotask(Ede)}},KG=t=>e=>typeof e=="string"&&e.startsWith(t),HF=KG("--"),Tde=KG("var(--"),VF=t=>Tde(t)?Ide.test(t.split("/*")[0].trim()):!1,Ide=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,I1={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},E_={...I1,transform:t=>fA(0,1,t)},Zw={...I1,default:1},Mx=t=>Math.round(t*1e5)/1e5,GF=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Lde(t){return t==null}const Fde=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qF=(t,e)=>r=>!!(typeof r=="string"&&Fde.test(r)&&r.startsWith(t)||e&&!Lde(r)&&Object.prototype.hasOwnProperty.call(r,e)),XG=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,o,c,u]=n.match(GF);return{[t]:parseFloat(s),[e]:parseFloat(o),[r]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},Nde=t=>fA(0,255,t),qE={...I1,transform:t=>Math.round(Nde(t))},Gg={test:qF("rgb","red"),parse:XG("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+qE.transform(t)+", "+qE.transform(e)+", "+qE.transform(r)+", "+Mx(E_.transform(n))+")"};function Pde(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const y6={test:qF("#"),parse:Pde,transform:Gg.transform},nb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),XA=nb("deg"),bp=nb("%"),fs=nb("px"),Mde=nb("vh"),jde=nb("vw"),G8={...bp,parse:t=>bp.parse(t)/100,transform:t=>bp.transform(t*100)},Py={test:qF("hsl","hue"),parse:XG("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+bp.transform(Mx(e))+", "+bp.transform(Mx(r))+", "+Mx(E_.transform(n))+")"},Gu={test:t=>Gg.test(t)||y6.test(t)||Py.test(t),parse:t=>Gg.test(t)?Gg.parse(t):Py.test(t)?Py.parse(t):y6.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Gg.transform(t):Py.transform(t)},kde=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Dde(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(GF))==null?void 0:e.length)||0)+(((r=t.match(kde))==null?void 0:r.length)||0)>0}const YG="number",ZG="color",Ode="var",Rde="var(",q8="${}",Ude=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function T_(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(Ude,i=>(Gu.test(i)?(n.color.push(o),s.push(ZG),r.push(Gu.parse(i))):i.startsWith(Rde)?(n.var.push(o),s.push(Ode),r.push(i)):(n.number.push(o),s.push(YG),r.push(parseFloat(i))),++o,q8)).split(q8);return{values:r,split:u,indexes:n,types:s}}function JG(t){return T_(t).values}function eq(t){const{split:e,types:r}=T_(t),n=e.length;return s=>{let o="";for(let c=0;c<n;c++)if(o+=e[c],s[c]!==void 0){const u=r[c];u===YG?o+=Mx(s[c]):u===ZG?o+=Gu.transform(s[c]):o+=s[c]}return o}}const zde=t=>typeof t=="number"?0:t;function Qde(t){const e=JG(t);return eq(t)(e.map(zde))}const $m={test:Dde,parse:JG,createTransformer:eq,getAnimatableNone:Qde};function $E(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Hde({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,o=0,c=0;if(!e)s=o=c=r;else{const u=r<.5?r*(1+e):r+e-r*e,i=2*r-u;s=$E(i,u,t+1/3),o=$E(i,u,t),c=$E(i,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:n}}function d4(t,e){return r=>r>0?e:t}const kl=(t,e,r)=>t+(e-t)*r,WE=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},Vde=[y6,Gg,Py],Gde=t=>Vde.find(e=>e.test(t));function $8(t){const e=Gde(t);if(!e)return!1;let r=e.parse(t);return e===Py&&(r=Hde(r)),r}const W8=(t,e)=>{const r=$8(t),n=$8(e);if(!r||!n)return d4(t,e);const s={...r};return o=>(s.red=WE(r.red,n.red,o),s.green=WE(r.green,n.green,o),s.blue=WE(r.blue,n.blue,o),s.alpha=kl(r.alpha,n.alpha,o),Gg.transform(s))},v6=new Set(["none","hidden"]);function qde(t,e){return v6.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function $de(t,e){return r=>kl(t,e,r)}function $F(t){return typeof t=="number"?$de:typeof t=="string"?VF(t)?d4:Gu.test(t)?W8:Xde:Array.isArray(t)?tq:typeof t=="object"?Gu.test(t)?W8:Wde:d4}function tq(t,e){const r=[...t],n=r.length,s=t.map((o,c)=>$F(o)(o,e[c]));return o=>{for(let c=0;c<n;c++)r[c]=s[c](o);return r}}function Wde(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=$F(t[s])(t[s],e[s]));return s=>{for(const o in n)r[o]=n[o](s);return r}}function Kde(t,e){const r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],c=t.indexes[o][n[o]],u=t.values[c]??0;r[s]=u,n[o]++}return r}const Xde=(t,e)=>{const r=$m.createTransformer(e),n=T_(t),s=T_(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?v6.has(t)&&!s.values.length||v6.has(e)&&!n.values.length?qde(t,e):tb(tq(Kde(n,s),s.values),r):d4(t,e)};function rq(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?kl(t,e,r):$F(t)(t,e)}const Yde=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>Ol.update(e,r),stop:()=>qm(e),now:()=>du.isProcessing?du.timestamp:zh.now()}},nq=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let o=0;o<s;o++)n+=t(o/(s-1))+", ";return`linear(${n.substring(0,n.length-2)})`},f4=2e4;function WF(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<f4;)e+=r,n=t.next(e);return e>=f4?1/0:e}function Zde(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(WF(n),f4);return{type:"keyframes",ease:o=>n.next(s*o).value/e,duration:_p(s)}}const Jde=5;function iq(t,e,r){const n=Math.max(e-Jde,0);return DG(r-t(n),e-n)}const Jl={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},KE=.001;function efe({duration:t=Jl.duration,bounce:e=Jl.bounce,velocity:r=Jl.velocity,mass:n=Jl.mass}){let s,o,c=1-e;c=fA(Jl.minDamping,Jl.maxDamping,c),t=fA(Jl.minDuration,Jl.maxDuration,_p(t)),c<1?(s=A=>{const g=A*c,C=g*t,B=g-r,S=x6(A,c),P=Math.exp(-C);return KE-B/S*P},o=A=>{const C=A*c*t,B=C*r+r,S=Math.pow(c,2)*Math.pow(A,2)*t,P=Math.exp(-C),j=x6(Math.pow(A,2),c);return(-s(A)+KE>0?-1:1)*((B-S)*P)/j}):(s=A=>{const g=Math.exp(-A*t),C=(A-r)*t+1;return-KE+g*C},o=A=>{const g=Math.exp(-A*t),C=(r-A)*(t*t);return g*C});const u=5/t,i=rfe(s,o,u);if(t=xp(t),isNaN(i))return{stiffness:Jl.stiffness,damping:Jl.damping,duration:t};{const A=Math.pow(i,2)*n;return{stiffness:A,damping:c*2*Math.sqrt(n*A),duration:t}}}const tfe=12;function rfe(t,e,r){let n=r;for(let s=1;s<tfe;s++)n=n-t(n)/e(n);return n}function x6(t,e){return t*Math.sqrt(1-e*e)}const nfe=["duration","bounce"],ife=["stiffness","damping","mass"];function K8(t,e){return e.some(r=>t[r]!==void 0)}function sfe(t){let e={velocity:Jl.velocity,stiffness:Jl.stiffness,damping:Jl.damping,mass:Jl.mass,isResolvedFromDuration:!1,...t};if(!K8(t,ife)&&K8(t,nfe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,o=2*fA(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Jl.mass,stiffness:s,damping:o}}else{const r=efe(t);e={...e,...r,mass:Jl.mass},e.isResolvedFromDuration=!0}return e}function p4(t=Jl.visualDuration,e=Jl.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const o=r.keyframes[0],c=r.keyframes[r.keyframes.length-1],u={done:!1,value:o},{stiffness:i,damping:A,mass:g,duration:C,velocity:B,isResolvedFromDuration:S}=sfe({...r,velocity:-_p(r.velocity||0)}),P=B||0,j=A/(2*Math.sqrt(i*g)),R=c-o,N=_p(Math.sqrt(i/g)),U=Math.abs(R)<5;n||(n=U?Jl.restSpeed.granular:Jl.restSpeed.default),s||(s=U?Jl.restDelta.granular:Jl.restDelta.default);let $;if(j<1){const te=x6(N,j);$=ue=>{const oe=Math.exp(-j*N*ue);return c-oe*((P+j*N*R)/te*Math.sin(te*ue)+R*Math.cos(te*ue))}}else if(j===1)$=te=>c-Math.exp(-N*te)*(R+(P+N*R)*te);else{const te=N*Math.sqrt(j*j-1);$=ue=>{const oe=Math.exp(-j*N*ue),K=Math.min(te*ue,300);return c-oe*((P+j*N*R)*Math.sinh(K)+te*R*Math.cosh(K))/te}}const J={calculatedDuration:S&&C||null,next:te=>{const ue=$(te);if(S)u.done=te>=C;else{let oe=te===0?P:0;j<1&&(oe=te===0?xp(P):iq($,te,ue));const K=Math.abs(oe)<=n,ce=Math.abs(c-ue)<=s;u.done=K&&ce}return u.value=u.done?c:ue,u},toString:()=>{const te=Math.min(WF(J),f4),ue=nq(oe=>J.next(te*oe).value,te,30);return te+"ms "+ue},toTransition:()=>{}};return J}p4.applyToOptions=t=>{const e=Zde(t,100,p4);return t.ease=e.ease,t.duration=xp(e.duration),t.type="keyframes",t};function _6({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:c,min:u,max:i,restDelta:A=.5,restSpeed:g}){const C=t[0],B={done:!1,value:C},S=K=>u!==void 0&&K<u||i!==void 0&&K>i,P=K=>u===void 0?i:i===void 0||Math.abs(u-K)<Math.abs(i-K)?u:i;let j=r*e;const R=C+j,N=c===void 0?R:c(R);N!==R&&(j=N-C);const U=K=>-j*Math.exp(-K/n),$=K=>N+U(K),J=K=>{const ce=U(K),me=$(K);B.done=Math.abs(ce)<=A,B.value=B.done?N:me};let te,ue;const oe=K=>{S(B.value)&&(te=K,ue=p4({keyframes:[B.value,P(B.value)],velocity:iq($,K,B.value),damping:s,stiffness:o,restDelta:A,restSpeed:g}))};return oe(0),{calculatedDuration:null,next:K=>{let ce=!1;return!ue&&te===void 0&&(ce=!0,J(K),oe(K)),te!==void 0&&K>=te?ue.next(K-te):(!ce&&J(K),B)}}}function ofe(t,e,r){const n=[],s=r||pA.mix||rq,o=t.length-1;for(let c=0;c<o;c++){let u=s(t[c],t[c+1]);if(e){const i=Array.isArray(e)?e[c]||Jd:e;u=tb(i,u)}n.push(u)}return n}function afe(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const o=t.length;if(h4(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=ofe(e,n,s),i=u.length,A=g=>{if(c&&g<t[0])return e[0];let C=0;if(i>1)for(;C<t.length-2&&!(g<t[C+1]);C++);const B=B_(t[C],t[C+1],g);return u[C](B)};return r?g=>A(fA(t[0],t[o-1],g)):A}function lfe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=B_(0,e,n);t.push(kl(r,1,s))}}function cfe(t){const e=[0];return lfe(e,t.length-1),e}function ufe(t,e){return t.map(r=>r*e)}function hfe(t,e){return t.map(()=>e||qG).splice(0,t.length-1)}function jx({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=wde(n)?n.map(H8):H8(n),o={done:!1,value:e[0]},c=ufe(r&&r.length===e.length?r:cfe(e),t),u=afe(c,e,{ease:Array.isArray(s)?s:hfe(e,s)});return{calculatedDuration:t,next:i=>(o.value=u(i),o.done=i>=t,o)}}const dfe=t=>t!==null;function KF(t,{repeat:e,repeatType:r="loop"},n,s=1){const o=t.filter(dfe),u=s<0||e&&r!=="loop"&&e%2===1?0:o.length-1;return!u||n===void 0?o[u]:n}const ffe={decay:_6,inertia:_6,tween:jx,keyframes:jx,spring:p4};function sq(t){typeof t.type=="string"&&(t.type=ffe[t.type])}class XF{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const pfe=t=>t/100;class YF extends XF{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(r=!0)=>{var n,s;if(r){const{motionValue:o}=this.options;o&&o.updatedAt!==zh.now()&&this.tick(zh.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;sq(e);const{type:r=jx,repeat:n=0,repeatDelay:s=0,repeatType:o,velocity:c=0}=e;let{keyframes:u}=e;const i=r||jx;i!==jx&&typeof u[0]!="number"&&(this.mixKeyframes=tb(pfe,rq(u[0],u[1])),u=[0,100]);const A=i({...e,keyframes:u});o==="mirror"&&(this.mirroredGenerator=i({...e,keyframes:[...u].reverse(),velocity:-c})),A.calculatedDuration===null&&(A.calculatedDuration=WF(A));const{calculatedDuration:g}=A;this.calculatedDuration=g,this.resolvedDuration=g+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=A}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:s,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:i}=this;if(this.startTime===null)return n.next(0);const{delay:A=0,keyframes:g,repeat:C,repeatType:B,repeatDelay:S,type:P,onUpdate:j,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const N=this.currentTime-A*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let $=this.currentTime,J=n;if(C){const K=Math.min(this.currentTime,s)/u;let ce=Math.floor(K),me=K%1;!me&&K>=1&&(me=1),me===1&&ce--,ce=Math.min(ce,C+1),!!(ce%2)&&(B==="reverse"?(me=1-me,S&&(me-=S/u)):B==="mirror"&&(J=c)),$=fA(0,1,me)*u}const te=U?{done:!1,value:g[0]}:J.next($);o&&(te.value=o(te.value));let{done:ue}=te;!U&&i!==null&&(ue=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const oe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ue);return oe&&P!==_6&&(te.value=KF(g,this.options,R,this.speed)),j&&j(te.value),oe&&this.finish(),te}then(e,r){return this.finished.then(e,r)}get duration(){return _p(this.calculatedDuration)}get time(){return _p(this.currentTime)}set time(e){var r;e=xp(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zh.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=_p(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=Yde,startTime:r}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(s=this.options).onPlay)==null||o.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zh.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function Afe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const qg=t=>t*180/Math.PI,b6=t=>{const e=qg(Math.atan2(t[1],t[0]));return w6(e)},mfe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:b6,rotateZ:b6,skewX:t=>qg(Math.atan(t[1])),skewY:t=>qg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},w6=t=>(t=t%360,t<0&&(t+=360),t),X8=b6,Y8=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Z8=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),gfe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Y8,scaleY:Z8,scale:t=>(Y8(t)+Z8(t))/2,rotateX:t=>w6(qg(Math.atan2(t[6],t[5]))),rotateY:t=>w6(qg(Math.atan2(-t[2],t[0]))),rotateZ:X8,rotate:X8,skewX:t=>qg(Math.atan(t[4])),skewY:t=>qg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function C6(t){return t.includes("scale")?1:0}function S6(t,e){if(!t||t==="none")return C6(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=gfe,s=r;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=mfe,s=u}if(!s)return C6(e);const o=n[e],c=s[1].split(",").map(vfe);return typeof o=="function"?o(c):c[o]}const yfe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return S6(r,e)};function vfe(t){return parseFloat(t.trim())}const L1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],F1=new Set(L1),J8=t=>t===I1||t===fs,xfe=new Set(["x","y","z"]),_fe=L1.filter(t=>!xfe.has(t));function bfe(t){const e=[];return _fe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const e0={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>S6(e,"x"),y:(t,{transform:e})=>S6(e,"y")};e0.translateX=e0.x;e0.translateY=e0.y;const t0=new Set;let B6=!1,E6=!1,T6=!1;function oq(){if(E6){const t=Array.from(t0).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=bfe(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([o,c])=>{var u;(u=n.getValue(o))==null||u.set(c)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}E6=!1,B6=!1,t0.forEach(t=>t.complete(T6)),t0.clear()}function aq(){t0.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(E6=!0)})}function wfe(){T6=!0,aq(),oq(),T6=!1}class ZF{constructor(e,r,n,s,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(t0.add(this),B6||(B6=!0,Ol.read(aq),Ol.resolveKeyframes(oq))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const u=n.readValue(r,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),s&&o===void 0&&s.set(e[0])}Afe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),t0.delete(this)}cancel(){this.state==="scheduled"&&(t0.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Cfe=t=>t.startsWith("--");function Sfe(t,e,r){Cfe(e)?t.style.setProperty(e,r):t.style[e]=r}const Bfe=RF(()=>window.ScrollTimeline!==void 0),Efe={};function Tfe(t,e){const r=RF(t);return()=>Efe[e]??r()}const lq=Tfe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ix=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,eR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ix([0,.65,.55,1]),circOut:ix([.55,0,1,.45]),backIn:ix([.31,.01,.66,-.59]),backOut:ix([.33,1.53,.69,.99])};function cq(t,e){if(t)return typeof t=="function"?lq()?nq(t,e):"ease-out":$G(t)?ix(t):Array.isArray(t)?t.map(r=>cq(r,e)||eR.easeOut):eR[t]}function Ife(t,e,r,{delay:n=0,duration:s=300,repeat:o=0,repeatType:c="loop",ease:u="easeOut",times:i}={},A=void 0){const g={[e]:r};i&&(g.offset=i);const C=cq(u,s);Array.isArray(C)&&(g.easing=C);const B={delay:n,duration:s,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return A&&(B.pseudoElement=A),t.animate(g,B)}function uq(t){return typeof t=="function"&&"applyToOptions"in t}function Lfe({type:t,...e}){return uq(t)&&lq()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Ffe extends XF{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:s,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:u,onComplete:i}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,h4(typeof e.type!="string");const A=Lfe(e);this.animation=Ife(r,n,s,A,o),A.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=KF(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(g):Sfe(r,n,g),this.animation.cancel()}i==null||i(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return _p(Number(e))}get time(){return _p(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xp(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Bfe()?(this.animation.timeline=e,Jd):r(this)}}const hq={anticipate:HG,backInOut:QG,circInOut:GG};function Nfe(t){return t in hq}function Pfe(t){typeof t.ease=="string"&&Nfe(t.ease)&&(t.ease=hq[t.ease])}const tR=10;class Mfe extends Ffe{constructor(e){Pfe(e),sq(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:s,element:o,...c}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const u=new YF({...c,autoplay:!1}),i=xp(this.finishedTime??this.time);r.setWithVelocity(u.sample(i-tR).value,u.sample(i).value,tR),u.stop()}}const rR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($m.test(t)||t==="0")&&!t.startsWith("url("));function jfe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function kfe(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=rR(s,e),u=rR(o,e);return!c||!u?!1:jfe(t)||(r==="spring"||uq(r))&&n}function dq(t){return jG(t)&&"offsetHeight"in t}const Dfe=new Set(["opacity","clipPath","filter","transform"]),Ofe=RF(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Rfe(t){var A;const{motionValue:e,name:r,repeatDelay:n,repeatType:s,damping:o,type:c}=t;if(!dq((A=e==null?void 0:e.owner)==null?void 0:A.current))return!1;const{onUpdate:u,transformTemplate:i}=e.owner.getProps();return Ofe()&&r&&Dfe.has(r)&&(r!=="transform"||!i)&&!u&&!n&&s!=="mirror"&&o!==0&&c!=="inertia"}const Ufe=40;class zfe extends XF{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:c="loop",keyframes:u,name:i,motionValue:A,element:g,...C}){var P;super(),this.stop=()=>{var j,R;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(R=this.keyframeResolver)==null||R.cancel()},this.createdAt=zh.now();const B={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:o,repeatType:c,name:i,motionValue:A,element:g,...C},S=(g==null?void 0:g.KeyframeResolver)||ZF;this.keyframeResolver=new S(u,(j,R,N)=>this.onKeyframesResolved(j,R,B,!N),i,A,g),(P=this.keyframeResolver)==null||P.scheduleResolve()}onKeyframesResolved(e,r,n,s){this.keyframeResolver=void 0;const{name:o,type:c,velocity:u,delay:i,isHandoff:A,onUpdate:g}=n;this.resolvedAt=zh.now(),kfe(e,o,c,u)||((pA.instantAnimations||!i)&&(g==null||g(KF(e,n,r))),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const B={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Ufe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},S=!A&&Rfe(B)?new Mfe({...B,element:B.motionValue.owner.current}):new YF(B);S.finished.then(()=>this.notifyFinished()).catch(Jd),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),wfe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Qfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Hfe(t){const e=Qfe.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function fq(t,e,r=1){const[n,s]=Hfe(t);if(!n)return;const o=window.getComputedStyle(e).getPropertyValue(n);if(o){const c=o.trim();return MG(c)?parseFloat(c):c}return VF(s)?fq(s,e,r+1):s}function JF(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const pq=new Set(["width","height","top","left","right","bottom",...L1]),Vfe={test:t=>t==="auto",parse:t=>t},Aq=t=>e=>e.test(t),mq=[I1,fs,bp,XA,jde,Mde,Vfe],nR=t=>mq.find(Aq(t));function Gfe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||kG(t):!0}const qfe=new Set(["brightness","contrast","saturate","opacity"]);function $fe(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(GF)||[];if(!n)return t;const s=r.replace(n,"");let o=qfe.has(e)?1:0;return n!==r&&(o*=100),e+"("+o+s+")"}const Wfe=/\b([a-z-]*)\(.*?\)/gu,I6={...$m,getAnimatableNone:t=>{const e=t.match(Wfe);return e?e.map($fe).join(" "):t}},iR={...I1,transform:Math.round},Kfe={rotate:XA,rotateX:XA,rotateY:XA,rotateZ:XA,scale:Zw,scaleX:Zw,scaleY:Zw,scaleZ:Zw,skew:XA,skewX:XA,skewY:XA,distance:fs,translateX:fs,translateY:fs,translateZ:fs,x:fs,y:fs,z:fs,perspective:fs,transformPerspective:fs,opacity:E_,originX:G8,originY:G8,originZ:fs},eN={borderWidth:fs,borderTopWidth:fs,borderRightWidth:fs,borderBottomWidth:fs,borderLeftWidth:fs,borderRadius:fs,radius:fs,borderTopLeftRadius:fs,borderTopRightRadius:fs,borderBottomRightRadius:fs,borderBottomLeftRadius:fs,width:fs,maxWidth:fs,height:fs,maxHeight:fs,top:fs,right:fs,bottom:fs,left:fs,padding:fs,paddingTop:fs,paddingRight:fs,paddingBottom:fs,paddingLeft:fs,margin:fs,marginTop:fs,marginRight:fs,marginBottom:fs,marginLeft:fs,backgroundPositionX:fs,backgroundPositionY:fs,...Kfe,zIndex:iR,fillOpacity:E_,strokeOpacity:E_,numOctaves:iR},Xfe={...eN,color:Gu,backgroundColor:Gu,outlineColor:Gu,fill:Gu,stroke:Gu,borderColor:Gu,borderTopColor:Gu,borderRightColor:Gu,borderBottomColor:Gu,borderLeftColor:Gu,filter:I6,WebkitFilter:I6},gq=t=>Xfe[t];function yq(t,e){let r=gq(t);return r!==I6&&(r=$m),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Yfe=new Set(["auto","none","0"]);function Zfe(t,e,r){let n=0,s;for(;n<t.length&&!s;){const o=t[n];typeof o=="string"&&!Yfe.has(o)&&T_(o).values.length&&(s=t[n]),n++}if(s&&r)for(const o of e)t[o]=yq(r,s)}class Jfe extends ZF{constructor(e,r,n,s,o){super(e,r,n,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let i=0;i<e.length;i++){let A=e[i];if(typeof A=="string"&&(A=A.trim(),VF(A))){const g=fq(A,r.current);g!==void 0&&(e[i]=g),i===e.length-1&&(this.finalKeyframe=A)}}if(this.resolveNoneKeyframes(),!pq.has(n)||e.length!==2)return;const[s,o]=e,c=nR(s),u=nR(o);if(c!==u)if(J8(c)&&J8(u))for(let i=0;i<e.length;i++){const A=e[i];typeof A=="string"&&(e[i]=parseFloat(A))}else e0[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||Gfe(e[s]))&&n.push(s);n.length&&Zfe(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=e0[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var u;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=n.length-1,c=n[o];n[o]=e0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([i,A])=>{e.getValue(i).set(A)}),this.resolveNoneKeyframes()}}function epe(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const sR=30,tpe=t=>!isNaN(parseFloat(t));class rpe{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{var c,u;const o=zh.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty();s&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=zh.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tpe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new UF);const n=this.events[e].add(r);return e==="change"?()=>{n(),Ol.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>sR)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,sR);return DG(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function A1(t,e){return new rpe(t,e)}const vq=(t,e)=>e&&typeof t=="number"?e.transform(t):t,{schedule:tN,cancel:H3e}=WG(queueMicrotask,!1),Bf={x:!1,y:!1};function xq(){return Bf.x||Bf.y}function npe(t){return t==="x"||t==="y"?Bf[t]?null:(Bf[t]=!0,()=>{Bf[t]=!1}):Bf.x||Bf.y?null:(Bf.x=Bf.y=!0,()=>{Bf.x=Bf.y=!1})}function _q(t,e){const r=epe(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function oR(t){return!(t.pointerType==="touch"||xq())}function ipe(t,e,r={}){const[n,s,o]=_q(t,r),c=u=>{if(!oR(u))return;const{target:i}=u,A=e(i,u);if(typeof A!="function"||!i)return;const g=C=>{oR(C)&&(A(C),i.removeEventListener("pointerleave",g))};i.addEventListener("pointerleave",g,s)};return n.forEach(u=>{u.addEventListener("pointerenter",c,s)}),o}const bq=(t,e)=>e?t===e?!0:bq(t,e.parentElement):!1,rN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,spe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ope(t){return spe.has(t.tagName)||t.tabIndex!==-1}const l5=new WeakSet;function aR(t){return e=>{e.key==="Enter"&&t(e)}}function XE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ape=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=aR(()=>{if(l5.has(r))return;XE(r,"down");const s=aR(()=>{XE(r,"up")}),o=()=>XE(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",o,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function lR(t){return rN(t)&&!xq()}function lpe(t,e,r={}){const[n,s,o]=_q(t,r),c=u=>{const i=u.currentTarget;if(!lR(u))return;l5.add(i);const A=e(i,u),g=(S,P)=>{window.removeEventListener("pointerup",C),window.removeEventListener("pointercancel",B),l5.has(i)&&l5.delete(i),lR(S)&&typeof A=="function"&&A(S,{success:P})},C=S=>{g(S,i===window||i===document||r.useGlobalTarget||bq(i,S.target))},B=S=>{g(S,!1)};window.addEventListener("pointerup",C,s),window.addEventListener("pointercancel",B,s)};return n.forEach(u=>{(r.useGlobalTarget?window:u).addEventListener("pointerdown",c,s),dq(u)&&(u.addEventListener("focus",A=>ape(A,s)),!ope(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function wq(t){return jG(t)&&"ownerSVGElement"in t}function cpe(t){return wq(t)&&t.tagName==="svg"}const Xu=t=>!!(t&&t.getVelocity),upe=[...mq,Gu,$m],hpe=t=>upe.find(Aq(t)),Cq=ve.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function dpe(t=!0){const e=ve.useContext(kF);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,o=ve.useId();ve.useEffect(()=>{if(t)return s(o)},[t]);const c=ve.useCallback(()=>t&&n&&n(o),[o,n,t]);return!r&&n?[!1,c]:[!0]}const Sq=ve.createContext({strict:!1}),cR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},m1={};for(const t in cR)m1[t]={isEnabled:e=>cR[t].some(r=>!!e[r])};function fpe(t){for(const e in t)m1[e]={...m1[e],...t[e]}}const ppe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function A4(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ppe.has(t)}let Bq=t=>!A4(t);function Ape(t){t&&(Bq=e=>e.startsWith("on")?!A4(e):t(e))}try{Ape(require("@emotion/is-prop-valid").default)}catch{}function mpe(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(Bq(s)||r===!0&&A4(s)||!e&&!A4(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function gpe(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const yC=ve.createContext({});function vC(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function I_(t){return typeof t=="string"||Array.isArray(t)}const nN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iN=["initial",...nN];function xC(t){return vC(t.animate)||iN.some(e=>I_(t[e]))}function Eq(t){return!!(xC(t)||t.variants)}function ype(t,e){if(xC(t)){const{initial:r,animate:n}=t;return{initial:r===!1||I_(r)?r:void 0,animate:I_(n)?n:void 0}}return t.inherit!==!1?e:{}}function vpe(t){const{initial:e,animate:r}=ype(t,ve.useContext(yC));return ve.useMemo(()=>({initial:e,animate:r}),[uR(e),uR(r)])}function uR(t){return Array.isArray(t)?t.join(" "):t}const xpe=Symbol.for("motionComponentSymbol");function My(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _pe(t,e,r){return ve.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):My(r)&&(r.current=n))},[e])}const sN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bpe="framerAppearId",Tq="data-"+sN(bpe),Iq=ve.createContext({});function wpe(t,e,r,n,s){var j,R;const{visualElement:o}=ve.useContext(yC),c=ve.useContext(Sq),u=ve.useContext(kF),i=ve.useContext(Cq).reducedMotion,A=ve.useRef(null);n=n||c.renderer,!A.current&&n&&(A.current=n(t,{visualState:e,parent:o,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:i}));const g=A.current,C=ve.useContext(Iq);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&Cpe(A.current,r,s,C);const B=ve.useRef(!1);ve.useInsertionEffect(()=>{g&&B.current&&g.update(r,u)});const S=r[Tq],P=ve.useRef(!!S&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,S))&&((R=window.MotionHasOptimisedAnimation)==null?void 0:R.call(window,S)));return mde(()=>{g&&(B.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),tN.render(g.render),P.current&&g.animationState&&g.animationState.animateChanges())}),ve.useEffect(()=>{g&&(!P.current&&g.animationState&&g.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,S)}),P.current=!1))}),g}function Cpe(t,e,r,n){const{layoutId:s,layout:o,drag:c,dragConstraints:u,layoutScroll:i,layoutRoot:A,layoutCrossfade:g}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Lq(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!c||u&&My(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:g,layoutScroll:i,layoutRoot:A})}function Lq(t){if(t)return t.options.allowProjection!==!1?t.projection:Lq(t.parent)}function Spe({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){t&&fpe(t);function o(u,i){let A;const g={...ve.useContext(Cq),...u,layoutId:Bpe(u)},{isStatic:C}=g,B=vpe(u),S=n(u,C);if(!C&&jF){Epe();const P=Tpe(g);A=P.MeasureLayout,B.visualElement=wpe(s,S,g,e,P.ProjectionNode)}return m.jsxs(yC.Provider,{value:B,children:[A&&B.visualElement?m.jsx(A,{visualElement:B.visualElement,...g}):null,r(s,u,_pe(S,B.visualElement,i),S,C,B.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const c=ve.forwardRef(o);return c[xpe]=s,c}function Bpe({layoutId:t}){const e=ve.useContext(PG).id;return e&&t!==void 0?e+"-"+t:t}function Epe(t,e){ve.useContext(Sq).strict}function Tpe(t){const{drag:e,layout:r}=m1;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const L_={};function Ipe(t){for(const e in t)L_[e]=t[e],HF(e)&&(L_[e].isCSSVariable=!0)}function Fq(t,{layout:e,layoutId:r}){return F1.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!L_[t]||t==="opacity")}const Lpe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fpe=L1.length;function Npe(t,e,r){let n="",s=!0;for(let o=0;o<Fpe;o++){const c=L1[o],u=t[c];if(u===void 0)continue;let i=!0;if(typeof u=="number"?i=u===(c.startsWith("scale")?1:0):i=parseFloat(u)===0,!i||r){const A=vq(u,eN[c]);if(!i){s=!1;const g=Lpe[c]||c;n+=`${g}(${A}) `}r&&(e[c]=A)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function oN(t,e,r){const{style:n,vars:s,transformOrigin:o}=t;let c=!1,u=!1;for(const i in e){const A=e[i];if(F1.has(i)){c=!0;continue}else if(HF(i)){s[i]=A;continue}else{const g=vq(A,eN[i]);i.startsWith("origin")?(u=!0,o[i]=g):n[i]=g}}if(e.transform||(c||r?n.transform=Npe(e,t.transform,r):n.transform&&(n.transform="none")),u){const{originX:i="50%",originY:A="50%",originZ:g=0}=o;n.transformOrigin=`${i} ${A} ${g}`}}const aN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Nq(t,e,r){for(const n in e)!Xu(e[n])&&!Fq(n,r)&&(t[n]=e[n])}function Ppe({transformTemplate:t},e){return ve.useMemo(()=>{const r=aN();return oN(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Mpe(t,e){const r=t.style||{},n={};return Nq(n,r,t),Object.assign(n,Ppe(t,e)),n}function jpe(t,e){const r={},n=Mpe(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const kpe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Dpe={offset:"strokeDashoffset",array:"strokeDasharray"};function Ope(t,e,r=1,n=0,s=!0){t.pathLength=1;const o=s?kpe:Dpe;t[o.offset]=fs.transform(-n);const c=fs.transform(e),u=fs.transform(r);t[o.array]=`${c} ${u}`}function Pq(t,{attrX:e,attrY:r,attrScale:n,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...u},i,A,g){if(oN(t,u,A),i){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:C,style:B}=t;C.transform&&(B.transform=C.transform,delete C.transform),(B.transform||C.transformOrigin)&&(B.transformOrigin=C.transformOrigin??"50% 50%",delete C.transformOrigin),B.transform&&(B.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete C.transformBox),e!==void 0&&(C.x=e),r!==void 0&&(C.y=r),n!==void 0&&(C.scale=n),s!==void 0&&Ope(C,s,o,c,!1)}const Mq=()=>({...aN(),attrs:{}}),jq=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Rpe(t,e,r,n){const s=ve.useMemo(()=>{const o=Mq();return Pq(o,e,jq(n),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};Nq(o,t.style,t),s.style={...o,...s.style}}return s}const Upe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lN(t){return typeof t!="string"||t.includes("-")?!1:!!(Upe.indexOf(t)>-1||/[A-Z]/u.test(t))}function zpe(t=!1){return(r,n,s,{latestValues:o},c)=>{const i=(lN(r)?Rpe:jpe)(n,o,c,r),A=mpe(n,typeof r=="string",t),g=r!==ve.Fragment?{...A,...i,ref:s}:{},{children:C}=n,B=ve.useMemo(()=>Xu(C)?C.get():C,[C]);return ve.createElement(r,{...g,children:B})}}function hR(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function cN(t,e,r,n){if(typeof e=="function"){const[s,o]=hR(n);e=e(r!==void 0?r:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=hR(n);e=e(r!==void 0?r:t.custom,s,o)}return e}function c5(t){return Xu(t)?t.get():t}function Qpe({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,s){return{latestValues:Hpe(r,n,s,t),renderState:e()}}const kq=t=>(e,r)=>{const n=ve.useContext(yC),s=ve.useContext(kF),o=()=>Qpe(t,e,n,s);return r?o():Ade(o)};function Hpe(t,e,r,n){const s={},o=n(t,{});for(const B in o)s[B]=c5(o[B]);let{initial:c,animate:u}=t;const i=xC(t),A=Eq(t);e&&A&&!i&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let g=r?r.initial===!1:!1;g=g||c===!1;const C=g?u:c;if(C&&typeof C!="boolean"&&!vC(C)){const B=Array.isArray(C)?C:[C];for(let S=0;S<B.length;S++){const P=cN(t,B[S]);if(P){const{transitionEnd:j,transition:R,...N}=P;for(const U in N){let $=N[U];if(Array.isArray($)){const J=g?$.length-1:0;$=$[J]}$!==null&&(s[U]=$)}for(const U in j)s[U]=j[U]}}}return s}function uN(t,e,r){var o;const{style:n}=t,s={};for(const c in n)(Xu(n[c])||e.style&&Xu(e.style[c])||Fq(c,t)||((o=r==null?void 0:r.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(s[c]=n[c]);return s}const Vpe={useVisualState:kq({scrapeMotionValuesFromProps:uN,createRenderState:aN})};function Dq(t,e,r){const n=uN(t,e,r);for(const s in t)if(Xu(t[s])||Xu(e[s])){const o=L1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[o]=t[s]}return n}const Gpe={useVisualState:kq({scrapeMotionValuesFromProps:Dq,createRenderState:Mq})};function qpe(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const c={...lN(n)?Gpe:Vpe,preloadedFeatures:t,useRender:zpe(s),createVisualElement:e,Component:n};return Spe(c)}}function F_(t,e,r){const n=t.getProps();return cN(n,e,r!==void 0?r:n.custom,t)}const L6=t=>Array.isArray(t);function $pe(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,A1(r))}function Wpe(t){return L6(t)?t[t.length-1]||0:t}function Kpe(t,e){const r=F_(t,e);let{transitionEnd:n={},transition:s={},...o}=r||{};o={...o,...n};for(const c in o){const u=Wpe(o[c]);$pe(t,c,u)}}function Xpe(t){return!!(Xu(t)&&t.add)}function F6(t,e){const r=t.getValue("willChange");if(Xpe(r))return r.add(e);if(!r&&pA.WillChange){const n=new pA.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function Oq(t){return t.props[Tq]}const Ype=t=>t!==null;function Zpe(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(Ype),o=e&&r!=="loop"&&e%2===1?0:s.length-1;return!o||n===void 0?s[o]:n}const Jpe={type:"spring",stiffness:500,damping:25,restSpeed:10},eAe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tAe={type:"keyframes",duration:.8},rAe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nAe=(t,{keyframes:e})=>e.length>2?tAe:F1.has(t)?t.startsWith("scale")?eAe(e[1]):Jpe:rAe;function iAe({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:c,repeatDelay:u,from:i,elapsed:A,...g}){return!!Object.keys(g).length}const hN=(t,e,r,n={},s,o)=>c=>{const u=JF(n,t)||{},i=u.delay||n.delay||0;let{elapsed:A=0}=n;A=A-xp(i);const g={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-A,onUpdate:B=>{e.set(B),u.onUpdate&&u.onUpdate(B)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:s};iAe(u)||Object.assign(g,nAe(t,g)),g.duration&&(g.duration=xp(g.duration)),g.repeatDelay&&(g.repeatDelay=xp(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let C=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(C=!0)),(pA.instantAnimations||pA.skipAnimations)&&(C=!0,g.duration=0,g.delay=0),g.allowFlatten=!u.type&&!u.ease,C&&!o&&e.get()!==void 0){const B=Zpe(g.keyframes,u);if(B!==void 0){Ol.update(()=>{g.onUpdate(B),g.onComplete()});return}}return u.isSync?new YF(g):new zfe(g)};function sAe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Rq(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:c,...u}=e;n&&(o=n);const i=[],A=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const C=t.getValue(g,t.latestValues[g]??null),B=u[g];if(B===void 0||A&&sAe(A,g))continue;const S={delay:r,...JF(o||{},g)},P=C.get();if(P!==void 0&&!C.isAnimating&&!Array.isArray(B)&&B===P&&!S.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const N=Oq(t);if(N){const U=window.MotionHandoffAnimation(N,g,Ol);U!==null&&(S.startTime=U,j=!0)}}F6(t,g),C.start(hN(g,C,B,t.shouldReduceMotion&&pq.has(g)?{type:!1}:S,t,j));const R=C.animation;R&&i.push(R)}return c&&Promise.all(i).then(()=>{Ol.update(()=>{c&&Kpe(t,c)})}),i}function N6(t,e,r={}){var i;const n=F_(t,e,r.type==="exit"?(i=t.presenceContext)==null?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const o=n?()=>Promise.all(Rq(t,n,r)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(A=0)=>{const{delayChildren:g=0,staggerChildren:C,staggerDirection:B}=s;return oAe(t,e,g+A,C,B,r)}:()=>Promise.resolve(),{when:u}=s;if(u){const[A,g]=u==="beforeChildren"?[o,c]:[c,o];return A().then(()=>g())}else return Promise.all([o(),c(r.delay)])}function oAe(t,e,r=0,n=0,s=1,o){const c=[],u=(t.variantChildren.size-1)*n,i=s===1?(A=0)=>A*n:(A=0)=>u-A*n;return Array.from(t.variantChildren).sort(aAe).forEach((A,g)=>{A.notify("AnimationStart",e),c.push(N6(A,e,{...o,delay:r+i(g)}).then(()=>A.notify("AnimationComplete",e)))}),Promise.all(c)}function aAe(t,e){return t.sortNodePosition(e)}function lAe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(o=>N6(t,o,r));n=Promise.all(s)}else if(typeof e=="string")n=N6(t,e,r);else{const s=typeof e=="function"?F_(t,e,r.custom):e;n=Promise.all(Rq(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Uq(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const cAe=iN.length;function zq(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?zq(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<cAe;r++){const n=iN[r],s=t.props[n];(I_(s)||s===!1)&&(e[n]=s)}return e}const uAe=[...nN].reverse(),hAe=nN.length;function dAe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>lAe(t,r,n)))}function fAe(t){let e=dAe(t),r=dR(),n=!0;const s=i=>(A,g)=>{var B;const C=F_(t,g,i==="exit"?(B=t.presenceContext)==null?void 0:B.custom:void 0);if(C){const{transition:S,transitionEnd:P,...j}=C;A={...A,...j,...P}}return A};function o(i){e=i(t)}function c(i){const{props:A}=t,g=zq(t.parent)||{},C=[],B=new Set;let S={},P=1/0;for(let R=0;R<hAe;R++){const N=uAe[R],U=r[N],$=A[N]!==void 0?A[N]:g[N],J=I_($),te=N===i?U.isActive:null;te===!1&&(P=R);let ue=$===g[N]&&$!==A[N]&&J;if(ue&&n&&t.manuallyAnimateOnMount&&(ue=!1),U.protectedKeys={...S},!U.isActive&&te===null||!$&&!U.prevProp||vC($)||typeof $=="boolean")continue;const oe=pAe(U.prevProp,$);let K=oe||N===i&&U.isActive&&!ue&&J||R>P&&J,ce=!1;const me=Array.isArray($)?$:[$];let Z=me.reduce(s(N),{});te===!1&&(Z={});const{prevResolvedValues:Y={}}=U,Le={...Y,...Z},_e=Be=>{K=!0,B.has(Be)&&(ce=!0,B.delete(Be)),U.needsAnimating[Be]=!0;const xe=t.getValue(Be);xe&&(xe.liveStyle=!1)};for(const Be in Le){const xe=Z[Be],ze=Y[Be];if(S.hasOwnProperty(Be))continue;let Fe=!1;L6(xe)&&L6(ze)?Fe=!Uq(xe,ze):Fe=xe!==ze,Fe?xe!=null?_e(Be):B.add(Be):xe!==void 0&&B.has(Be)?_e(Be):U.protectedKeys[Be]=!0}U.prevProp=$,U.prevResolvedValues=Z,U.isActive&&(S={...S,...Z}),n&&t.blockInitialAnimation&&(K=!1),K&&(!(ue&&oe)||ce)&&C.push(...me.map(Be=>({animation:Be,options:{type:N}})))}if(B.size){const R={};if(typeof A.initial!="boolean"){const N=F_(t,Array.isArray(A.initial)?A.initial[0]:A.initial);N&&N.transition&&(R.transition=N.transition)}B.forEach(N=>{const U=t.getBaseTarget(N),$=t.getValue(N);$&&($.liveStyle=!0),R[N]=U??null}),C.push({animation:R})}let j=!!C.length;return n&&(A.initial===!1||A.initial===A.animate)&&!t.manuallyAnimateOnMount&&(j=!1),n=!1,j?e(C):Promise.resolve()}function u(i,A){var C;if(r[i].isActive===A)return Promise.resolve();(C=t.variantChildren)==null||C.forEach(B=>{var S;return(S=B.animationState)==null?void 0:S.setActive(i,A)}),r[i].isActive=A;const g=c(i);for(const B in r)r[B].protectedKeys={};return g}return{animateChanges:c,setActive:u,setAnimateFunction:o,getState:()=>r,reset:()=>{r=dR(),n=!0}}}function pAe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Uq(e,t):!1}function Sg(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dR(){return{animate:Sg(!0),whileInView:Sg(),whileHover:Sg(),whileTap:Sg(),whileDrag:Sg(),whileFocus:Sg(),exit:Sg()}}class og{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AAe extends og{constructor(e){super(e),e.animationState||(e.animationState=fAe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();vC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let mAe=0;class gAe extends og{constructor(){super(...arguments),this.id=mAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const yAe={animation:{Feature:AAe},exit:{Feature:gAe}};function N_(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function ib(t){return{point:{x:t.pageX,y:t.pageY}}}const vAe=t=>e=>rN(e)&&t(e,ib(e));function kx(t,e,r,n){return N_(t,e,vAe(r),n)}function Qq({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function xAe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _Ae(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}const Hq=1e-4,bAe=1-Hq,wAe=1+Hq,Vq=.01,CAe=0-Vq,SAe=0+Vq;function gh(t){return t.max-t.min}function BAe(t,e,r){return Math.abs(t-e)<=r}function fR(t,e,r,n=.5){t.origin=n,t.originPoint=kl(e.min,e.max,t.origin),t.scale=gh(r)/gh(e),t.translate=kl(r.min,r.max,t.origin)-t.originPoint,(t.scale>=bAe&&t.scale<=wAe||isNaN(t.scale))&&(t.scale=1),(t.translate>=CAe&&t.translate<=SAe||isNaN(t.translate))&&(t.translate=0)}function Dx(t,e,r,n){fR(t.x,e.x,r.x,n?n.originX:void 0),fR(t.y,e.y,r.y,n?n.originY:void 0)}function pR(t,e,r){t.min=r.min+e.min,t.max=t.min+gh(e)}function EAe(t,e,r){pR(t.x,e.x,r.x),pR(t.y,e.y,r.y)}function AR(t,e,r){t.min=e.min-r.min,t.max=t.min+gh(e)}function Ox(t,e,r){AR(t.x,e.x,r.x),AR(t.y,e.y,r.y)}const mR=()=>({translate:0,scale:1,origin:0,originPoint:0}),jy=()=>({x:mR(),y:mR()}),gR=()=>({min:0,max:0}),pc=()=>({x:gR(),y:gR()});function Qd(t){return[t("x"),t("y")]}function YE(t){return t===void 0||t===1}function P6({scale:t,scaleX:e,scaleY:r}){return!YE(t)||!YE(e)||!YE(r)}function Mg(t){return P6(t)||Gq(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Gq(t){return yR(t.x)||yR(t.y)}function yR(t){return t&&t!=="0%"}function m4(t,e,r){const n=t-r,s=e*n;return r+s}function vR(t,e,r,n,s){return s!==void 0&&(t=m4(t,s,n)),m4(t,r,n)+e}function M6(t,e=0,r=1,n,s){t.min=vR(t.min,e,r,n,s),t.max=vR(t.max,e,r,n,s)}function qq(t,{x:e,y:r}){M6(t.x,e.translate,e.scale,e.originPoint),M6(t.y,r.translate,r.scale,r.originPoint)}const xR=.999999999999,_R=1.0000000000001;function TAe(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let o,c;for(let u=0;u<s;u++){o=r[u],c=o.projectionDelta;const{visualElement:i}=o.options;i&&i.props.style&&i.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Dy(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,qq(t,c)),n&&Mg(o.latestValues)&&Dy(t,o.latestValues))}e.x<_R&&e.x>xR&&(e.x=1),e.y<_R&&e.y>xR&&(e.y=1)}function ky(t,e){t.min=t.min+e,t.max=t.max+e}function bR(t,e,r,n,s=.5){const o=kl(t.min,t.max,s);M6(t,e,r,o,n)}function Dy(t,e){bR(t.x,e.x,e.scaleX,e.scale,e.originX),bR(t.y,e.y,e.scaleY,e.scale,e.originY)}function $q(t,e){return Qq(_Ae(t.getBoundingClientRect(),e))}function IAe(t,e,r){const n=$q(t,r),{scroll:s}=e;return s&&(ky(n.x,s.offset.x),ky(n.y,s.offset.y)),n}const Wq=({current:t})=>t?t.ownerDocument.defaultView:null,wR=(t,e)=>Math.abs(t-e);function LAe(t,e){const r=wR(t.x,e.x),n=wR(t.y,e.y);return Math.sqrt(r**2+n**2)}class Kq{constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=JE(this.lastMoveEventInfo,this.history),B=this.startEvent!==null,S=LAe(C.offset,{x:0,y:0})>=3;if(!B&&!S)return;const{point:P}=C,{timestamp:j}=du;this.history.push({...P,timestamp:j});const{onStart:R,onMove:N}=this.handlers;B||(R&&R(this.lastMoveEvent,C),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,C)},this.handlePointerMove=(C,B)=>{this.lastMoveEvent=C,this.lastMoveEventInfo=ZE(B,this.transformPagePoint),Ol.update(this.updatePoint,!0)},this.handlePointerUp=(C,B)=>{this.end();const{onEnd:S,onSessionEnd:P,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=JE(C.type==="pointercancel"?this.lastMoveEventInfo:ZE(B,this.transformPagePoint),this.history);this.startEvent&&S&&S(C,R),P&&P(C,R)},!rN(e))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const c=ib(e),u=ZE(c,this.transformPagePoint),{point:i}=u,{timestamp:A}=du;this.history=[{...i,timestamp:A}];const{onSessionStart:g}=r;g&&g(e,JE(u,this.history)),this.removeListeners=tb(kx(this.contextWindow,"pointermove",this.handlePointerMove),kx(this.contextWindow,"pointerup",this.handlePointerUp),kx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qm(this.updatePoint)}}function ZE(t,e){return e?{point:e(t.point)}:t}function CR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function JE({point:t},e){return{point:t,delta:CR(t,Xq(e)),offset:CR(t,FAe(e)),velocity:NAe(e,.1)}}function FAe(t){return t[0]}function Xq(t){return t[t.length-1]}function NAe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=Xq(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>xp(e)));)r--;if(!n)return{x:0,y:0};const o=_p(s.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const c={x:(s.x-n.x)/o,y:(s.y-n.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function PAe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?kl(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?kl(r,t,n.max):Math.min(t,r)),t}function SR(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function MAe(t,{top:e,left:r,bottom:n,right:s}){return{x:SR(t.x,r,s),y:SR(t.y,e,n)}}function BR(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function jAe(t,e){return{x:BR(t.x,e.x),y:BR(t.y,e.y)}}function kAe(t,e){let r=.5;const n=gh(t),s=gh(e);return s>n?r=B_(e.min,e.max-n,t.min):n>s&&(r=B_(t.min,t.max-s,e.min)),fA(0,1,r)}function DAe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const j6=.35;function OAe(t=j6){return t===!1?t=0:t===!0&&(t=j6),{x:ER(t,"left","right"),y:ER(t,"top","bottom")}}function ER(t,e,r){return{min:TR(t,e),max:TR(t,r)}}function TR(t,e){return typeof t=="number"?t:t[e]||0}const RAe=new WeakMap;class UAe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pc(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:C}=this.getProps();C?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ib(g).point)},o=(g,C)=>{const{drag:B,dragPropagation:S,onDragStart:P}=this.getProps();if(B&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=npe(B),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qd(R=>{let N=this.getAxisMotionValue(R).get()||0;if(bp.test(N)){const{projection:U}=this.visualElement;if(U&&U.layout){const $=U.layout.layoutBox[R];$&&(N=gh($)*(parseFloat(N)/100))}}this.originPoint[R]=N}),P&&Ol.postRender(()=>P(g,C)),F6(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},c=(g,C)=>{const{dragPropagation:B,dragDirectionLock:S,onDirectionLock:P,onDrag:j}=this.getProps();if(!B&&!this.openDragLock)return;const{offset:R}=C;if(S&&this.currentDirection===null){this.currentDirection=zAe(R),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",C.point,R),this.updateAxis("y",C.point,R),this.visualElement.render(),j&&j(g,C)},u=(g,C)=>this.stop(g,C),i=()=>Qd(g=>{var C;return this.getAnimationState(g)==="paused"&&((C=this.getAxisMotionValue(g).animation)==null?void 0:C.play())}),{dragSnapToOrigin:A}=this.getProps();this.panSession=new Kq(e,{onSessionStart:s,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:i},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,contextWindow:Wq(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Ol.postRender(()=>o(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!Jw(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(c=PAe(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&My(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=MAe(n.layoutBox,e):this.constraints=!1,this.elastic=OAe(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Qd(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=DAe(n.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!My(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=IAe(n,s.root,this.visualElement.getTransformPagePoint());let c=jAe(s.layout.layoutBox,o);if(r){const u=r(xAe(c));this.hasMutatedConstraints=!!u,u&&(c=Qq(u))}return c}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),i=this.constraints||{},A=Qd(g=>{if(!Jw(g,r,this.currentDirection))return;let C=i&&i[g]||{};c&&(C={min:0,max:0});const B=s?200:1e6,S=s?40:1e7,P={type:"inertia",velocity:n?e[g]:0,bounceStiffness:B,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...C};return this.startAxisValueAnimation(g,P)});return Promise.all(A).then(u)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return F6(this.visualElement,e),n.start(hN(e,n,0,r,this.visualElement,!1))}stopAnimation(){Qd(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qd(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Qd(r=>{const{drag:n}=this.getProps();if(!Jw(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(r);if(s&&s.layout){const{min:c,max:u}=s.layout.layoutBox[r];o.set(e[r]-kl(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!My(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qd(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const i=u.get();s[c]=kAe({min:i,max:i},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Qd(c=>{if(!Jw(c,e,null))return;const u=this.getAxisMotionValue(c),{min:i,max:A}=this.constraints[c];u.set(kl(i,A,s[c]))})}addListeners(){if(!this.visualElement.current)return;RAe.set(this.visualElement,this);const e=this.visualElement.current,r=kx(e,"pointerdown",i=>{const{drag:A,dragListener:g=!0}=this.getProps();A&&g&&this.start(i)}),n=()=>{const{dragConstraints:i}=this.getProps();My(i)&&i.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ol.read(n);const c=N_(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:i,hasLayoutChanged:A})=>{this.isDragging&&A&&(Qd(g=>{const C=this.getAxisMotionValue(g);C&&(this.originPoint[g]+=i[g].translate,C.set(C.get()+i[g].translate))}),this.visualElement.render())});return()=>{c(),r(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:c=j6,dragMomentum:u=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:o,dragElastic:c,dragMomentum:u}}}function Jw(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function zAe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class QAe extends og{constructor(e){super(e),this.removeGroupControls=Jd,this.removeListeners=Jd,this.controls=new UAe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jd}unmount(){this.removeGroupControls(),this.removeListeners()}}const IR=t=>(e,r)=>{t&&Ol.postRender(()=>t(e,r))};class HAe extends og{constructor(){super(...arguments),this.removePointerDownListener=Jd}onPointerDown(e){this.session=new Kq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Wq(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:IR(e),onStart:IR(r),onMove:n,onEnd:(o,c)=>{delete this.session,s&&Ol.postRender(()=>s(o,c))}}}mount(){this.removePointerDownListener=kx(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const u5={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function LR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ov={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(fs.test(t))t=parseFloat(t);else return t;const r=LR(t,e.target.x),n=LR(t,e.target.y);return`${r}% ${n}%`}},VAe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=$m.parse(t);if(s.length>5)return n;const o=$m.createTransformer(t),c=typeof s[0]!="number"?1:0,u=r.x.scale*e.x,i=r.y.scale*e.y;s[0+c]/=u,s[1+c]/=i;const A=kl(u,i,.5);return typeof s[2+c]=="number"&&(s[2+c]/=A),typeof s[3+c]=="number"&&(s[3+c]/=A),o(s)}};class GAe extends ve.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:o}=e;Ipe(qAe),o&&(r.group&&r.group.add(o),n&&n.register&&s&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),u5.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:o}=this.props,{projection:c}=n;return c&&(c.isPresent=o,s||e.layoutDependency!==r||r===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||Ol.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Yq(t){const[e,r]=dpe(),n=ve.useContext(PG);return m.jsx(GAe,{...t,layoutGroup:n,switchLayoutGroup:ve.useContext(Iq),isPresent:e,safeToRemove:r})}const qAe={borderRadius:{...Ov,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ov,borderTopRightRadius:Ov,borderBottomLeftRadius:Ov,borderBottomRightRadius:Ov,boxShadow:VAe};function $Ae(t,e,r){const n=Xu(t)?t:A1(t);return n.start(hN("",n,e,r)),n.animation}const WAe=(t,e)=>t.depth-e.depth;class KAe{constructor(){this.children=[],this.isDirty=!1}add(e){DF(this.children,e),this.isDirty=!0}remove(e){OF(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(WAe),this.isDirty=!1,this.children.forEach(e)}}function XAe(t,e){const r=zh.now(),n=({timestamp:s})=>{const o=s-r;o>=e&&(qm(n),t(o-e))};return Ol.setup(n,!0),()=>qm(n)}const Zq=["TopLeft","TopRight","BottomLeft","BottomRight"],YAe=Zq.length,FR=t=>typeof t=="string"?parseFloat(t):t,NR=t=>typeof t=="number"||fs.test(t);function ZAe(t,e,r,n,s,o){s?(t.opacity=kl(0,r.opacity??1,JAe(n)),t.opacityExit=kl(e.opacity??1,0,eme(n))):o&&(t.opacity=kl(e.opacity??1,r.opacity??1,n));for(let c=0;c<YAe;c++){const u=`border${Zq[c]}Radius`;let i=PR(e,u),A=PR(r,u);if(i===void 0&&A===void 0)continue;i||(i=0),A||(A=0),i===0||A===0||NR(i)===NR(A)?(t[u]=Math.max(kl(FR(i),FR(A),n),0),(bp.test(A)||bp.test(i))&&(t[u]+="%")):t[u]=A}(e.rotate||r.rotate)&&(t.rotate=kl(e.rotate||0,r.rotate||0,n))}function PR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const JAe=Jq(0,.5,VG),eme=Jq(.5,.95,Jd);function Jq(t,e,r){return n=>n<t?0:n>e?1:r(B_(t,e,n))}function MR(t,e){t.min=e.min,t.max=e.max}function Ud(t,e){MR(t.x,e.x),MR(t.y,e.y)}function jR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kR(t,e,r,n,s){return t-=e,t=m4(t,1/r,n),s!==void 0&&(t=m4(t,1/s,n)),t}function tme(t,e=0,r=1,n=.5,s,o=t,c=t){if(bp.test(e)&&(e=parseFloat(e),e=kl(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=kl(o.min,o.max,n);t===o&&(u-=e),t.min=kR(t.min,e,r,u,s),t.max=kR(t.max,e,r,u,s)}function DR(t,e,[r,n,s],o,c){tme(t,e[r],e[n],e[s],e.scale,o,c)}const rme=["x","scaleX","originX"],nme=["y","scaleY","originY"];function OR(t,e,r,n){DR(t.x,e,rme,r?r.x:void 0,n?n.x:void 0),DR(t.y,e,nme,r?r.y:void 0,n?n.y:void 0)}function RR(t){return t.translate===0&&t.scale===1}function e$(t){return RR(t.x)&&RR(t.y)}function UR(t,e){return t.min===e.min&&t.max===e.max}function ime(t,e){return UR(t.x,e.x)&&UR(t.y,e.y)}function zR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function t$(t,e){return zR(t.x,e.x)&&zR(t.y,e.y)}function QR(t){return gh(t.x)/gh(t.y)}function HR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class sme{constructor(){this.members=[]}add(e){DF(this.members,e),e.scheduleRender()}remove(e){if(OF(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ome(t,e,r){let n="";const s=t.x.translate/e.x,o=t.y.translate/e.y,c=(r==null?void 0:r.z)||0;if((s||o||c)&&(n=`translate3d(${s}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:A,rotate:g,rotateX:C,rotateY:B,skewX:S,skewY:P}=r;A&&(n=`perspective(${A}px) ${n}`),g&&(n+=`rotate(${g}deg) `),C&&(n+=`rotateX(${C}deg) `),B&&(n+=`rotateY(${B}deg) `),S&&(n+=`skewX(${S}deg) `),P&&(n+=`skewY(${P}deg) `)}const u=t.x.scale*e.x,i=t.y.scale*e.y;return(u!==1||i!==1)&&(n+=`scale(${u}, ${i})`),n||"none"}const e3=["","X","Y","Z"],ame={visibility:"hidden"},lme=1e3;let cme=0;function t3(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function r$(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Oq(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Ol,!(s||o))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&r$(n)}function n$({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(c={},u=e==null?void 0:e()){this.id=cme++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dme),this.nodes.forEach(gme),this.nodes.forEach(yme),this.nodes.forEach(fme)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let i=0;i<this.path.length;i++)this.path[i].shouldResetTransform=!0;this.root===this&&(this.nodes=new KAe)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new UF),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const i=this.eventHandlers.get(c);i&&i.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=wq(c)&&!cpe(c),this.instance=c;const{layoutId:u,layout:i,visualElement:A}=this.options;if(A&&!A.current&&A.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||u)&&(this.isLayoutDirty=!0),t){let g;const C=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=XAe(C,250),u5.hasAnimatedSinceResize&&(u5.hasAnimatedSinceResize=!1,this.nodes.forEach(GR))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&A&&(u||i)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:C,hasRelativeLayoutChanged:B,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||A.getDefaultTransition()||wme,{onLayoutAnimationStart:j,onLayoutAnimationComplete:R}=A.getProps(),N=!this.targetLayout||!t$(this.targetLayout,S),U=!C&&B;if(this.options.layoutRoot||this.resumeFrom||U||C&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,U);const $={...JF(P,"layout"),onPlay:j,onComplete:R};(A.shouldReduceMotion||this.options.layoutRoot)&&($.delay=0,$.type=!1),this.startAnimation($)}else C||GR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qm(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vme),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&r$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const C=this.path[g];C.shouldResetTransform=!0,C.updateScroll("snapshot"),C.options.layoutRoot&&C.willUpdate(!1)}const{layoutId:u,layout:i}=this.options;if(u===void 0&&!i)return;const A=this.getTransformTemplate();this.prevTransformTemplateValue=A?A(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VR);return}this.isUpdating||this.nodes.forEach(Ame),this.isUpdating=!1,this.nodes.forEach(mme),this.nodes.forEach(ume),this.nodes.forEach(hme),this.clearAllSnapshots();const u=zh.now();du.delta=fA(0,1e3/60,u-du.timestamp),du.timestamp=u,du.isProcessing=!0,GE.update.process(du),GE.preRender.process(du),GE.render.process(du),du.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pme),this.sharedNodes.forEach(xme)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ol.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ol.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gh(this.snapshot.measuredBox.x)&&!gh(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let i=0;i<this.path.length;i++)this.path[i].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pc(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const i=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:i,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:i}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!e$(this.projectionDelta),i=this.getTransformTemplate(),A=i?i(this.latestValues,""):void 0,g=A!==this.prevTransformTemplateValue;c&&this.instance&&(u||Mg(this.latestValues)||g)&&(s(this.instance,A),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let i=this.removeElementScroll(u);return c&&(i=this.removeTransform(i)),Cme(i),{animationId:this.root.animationId,measuredBox:u,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var A;const{visualElement:c}=this.options;if(!c)return pc();const u=c.measureViewportBox();if(!(((A=this.scroll)==null?void 0:A.wasRoot)||this.path.some(Sme))){const{scroll:g}=this.root;g&&(ky(u.x,g.offset.x),ky(u.y,g.offset.y))}return u}removeElementScroll(c){var i;const u=pc();if(Ud(u,c),(i=this.scroll)!=null&&i.wasRoot)return u;for(let A=0;A<this.path.length;A++){const g=this.path[A],{scroll:C,options:B}=g;g!==this.root&&C&&B.layoutScroll&&(C.wasRoot&&Ud(u,c),ky(u.x,C.offset.x),ky(u.y,C.offset.y))}return u}applyTransform(c,u=!1){const i=pc();Ud(i,c);for(let A=0;A<this.path.length;A++){const g=this.path[A];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Dy(i,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Mg(g.latestValues)&&Dy(i,g.latestValues)}return Mg(this.latestValues)&&Dy(i,this.latestValues),i}removeTransform(c){const u=pc();Ud(u,c);for(let i=0;i<this.path.length;i++){const A=this.path[i];if(!A.instance||!Mg(A.latestValues))continue;P6(A.latestValues)&&A.updateSnapshot();const g=pc(),C=A.measurePageBox();Ud(g,C),OR(u,A.latestValues,A.snapshot?A.snapshot.layoutBox:void 0,g)}return Mg(this.latestValues)&&OR(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==du.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var B;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const i=!!this.resumingFrom||this!==u;if(!(c||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(B=this.parent)!=null&&B.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:C}=this.options;if(!(!this.layout||!(g||C))){if(this.resolvedRelativeTargetAt=du.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pc(),this.relativeTargetOrigin=pc(),Ox(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pc(),this.targetWithTransforms=pc()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),EAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ud(this.target,this.layout.layoutBox),qq(this.target,this.targetDelta)):Ud(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pc(),this.relativeTargetOrigin=pc(),Ox(this.relativeTargetOrigin,this.target,S.target),Ud(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||P6(this.parent.latestValues)||Gq(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var P;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let i=!0;if((this.isProjectionDirty||(P=this.parent)!=null&&P.isProjectionDirty)&&(i=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===du.timestamp&&(i=!1),i)return;const{layout:A,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(A||g))return;Ud(this.layoutCorrected,this.layout.layoutBox);const C=this.treeScale.x,B=this.treeScale.y;TAe(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pc());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jR(this.prevProjectionDelta.x,this.projectionDelta.x),jR(this.prevProjectionDelta.y,this.projectionDelta.y)),Dx(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==C||this.treeScale.y!==B||!HR(this.projectionDelta.x,this.prevProjectionDelta.x)||!HR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const i=this.getStack();i&&i.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jy(),this.projectionDelta=jy(),this.projectionDeltaWithTransform=jy()}setAnimationOrigin(c,u=!1){const i=this.snapshot,A=i?i.latestValues:{},g={...this.latestValues},C=jy();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const B=pc(),S=i?i.source:void 0,P=this.layout?this.layout.source:void 0,j=S!==P,R=this.getStack(),N=!R||R.members.length<=1,U=!!(j&&!N&&this.options.crossfade===!0&&!this.path.some(bme));this.animationProgress=0;let $;this.mixTargetDelta=J=>{const te=J/1e3;qR(C.x,c.x,te),qR(C.y,c.y,te),this.setTargetDelta(C),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ox(B,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_me(this.relativeTarget,this.relativeTargetOrigin,B,te),$&&ime(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=pc()),Ud($,this.relativeTarget)),j&&(this.animationValues=g,ZAe(g,A,this.latestValues,te,U,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=te},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,i,A;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(!1),(A=(i=this.resumingFrom)==null?void 0:i.currentAnimation)==null||A.stop(!1),this.pendingAnimation&&(qm(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ol.update(()=>{u5.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=A1(0)),this.currentAnimation=$Ae(this.motionValue,[0,1e3],{...c,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lme),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:i,layout:A,latestValues:g}=c;if(!(!u||!i||!A)){if(this!==c&&this.layout&&A&&i$(this.options.animationType,this.layout.layoutBox,A.layoutBox)){i=this.target||pc();const C=gh(this.layout.layoutBox.x);i.x.min=c.target.x.min,i.x.max=i.x.min+C;const B=gh(this.layout.layoutBox.y);i.y.min=c.target.y.min,i.y.max=i.y.min+B}Ud(u,i),Dy(u,g),Dx(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new sme),this.sharedNodes.get(c).add(u);const A=u.options.initialPromotionConfig;u.promote({transition:A?A.transition:void 0,preserveFollowOpacity:A&&A.shouldPreserveFollowOpacity?A.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:i}={}){const A=this.getStack();A&&A.promote(this,i),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:i}=c;if((i.z||i.rotate||i.rotateX||i.rotateY||i.rotateZ||i.skewX||i.skewY)&&(u=!0),!u)return;const A={};i.z&&t3("z",c,A,this.animationValues);for(let g=0;g<e3.length;g++)t3(`rotate${e3[g]}`,c,A,this.animationValues),t3(`skew${e3[g]}`,c,A,this.animationValues);c.render();for(const g in A)c.setStaticValue(g,A[g]),this.animationValues&&(this.animationValues[g]=A[g]);c.scheduleRender()}getProjectionStyles(c){if(!this.instance||this.isSVG)return;if(!this.isVisible)return ame;const u={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=c5(c==null?void 0:c.pointerEvents)||"",u.transform=i?i(this.latestValues,""):"none",u;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=c5(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Mg(this.latestValues)&&(S.transform=i?i({},""):"none",this.hasProjected=!1),S}const g=A.animationValues||A.latestValues;this.applyTransformsToTarget(),u.transform=ome(this.projectionDeltaWithTransform,this.treeScale,g),i&&(u.transform=i(g,u.transform));const{x:C,y:B}=this.projectionDelta;u.transformOrigin=`${C.origin*100}% ${B.origin*100}% 0`,A.animationValues?u.opacity=A===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=A===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const S in L_){if(g[S]===void 0)continue;const{correct:P,applyTo:j,isCSSVariable:R}=L_[S],N=u.transform==="none"?g[S]:P(g[S],A);if(j){const U=j.length;for(let $=0;$<U;$++)u[j[$]]=N}else R?this.options.visualElement.renderState.vars[S]=N:u[S]=N}return this.options.layoutId&&(u.pointerEvents=A===this?c5(c==null?void 0:c.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop(!1)}),this.root.nodes.forEach(VR),this.root.sharedNodes.clear()}}}function ume(t){t.updateLayout()}function hme(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:o}=t.options,c=e.source!==t.layout.source;o==="size"?Qd(C=>{const B=c?e.measuredBox[C]:e.layoutBox[C],S=gh(B);B.min=n[C].min,B.max=B.min+S}):i$(o,e.layoutBox,n)&&Qd(C=>{const B=c?e.measuredBox[C]:e.layoutBox[C],S=gh(n[C]);B.max=B.min+S,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[C].max=t.relativeTarget[C].min+S)});const u=jy();Dx(u,n,e.layoutBox);const i=jy();c?Dx(i,t.applyTransform(s,!0),e.measuredBox):Dx(i,n,e.layoutBox);const A=!e$(u);let g=!1;if(!t.resumeFrom){const C=t.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:B,layout:S}=C;if(B&&S){const P=pc();Ox(P,e.layoutBox,B.layoutBox);const j=pc();Ox(j,n,S.layoutBox),t$(P,j)||(g=!0),C.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=P,t.relativeParent=C)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:i,layoutDelta:u,hasLayoutChanged:A,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function dme(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fme(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pme(t){t.clearSnapshot()}function VR(t){t.clearMeasurements()}function Ame(t){t.isLayoutDirty=!1}function mme(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function GR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gme(t){t.resolveTargetDelta()}function yme(t){t.calcProjection()}function vme(t){t.resetSkewAndRotation()}function xme(t){t.removeLeadSnapshot()}function qR(t,e,r){t.translate=kl(e.translate,0,r),t.scale=kl(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function $R(t,e,r,n){t.min=kl(e.min,r.min,n),t.max=kl(e.max,r.max,n)}function _me(t,e,r,n){$R(t.x,e.x,r.x,n),$R(t.y,e.y,r.y,n)}function bme(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const wme={duration:.45,ease:[.4,0,.1,1]},WR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),KR=WR("applewebkit/")&&!WR("chrome/")?Math.round:Jd;function XR(t){t.min=KR(t.min),t.max=KR(t.max)}function Cme(t){XR(t.x),XR(t.y)}function i$(t,e,r){return t==="position"||t==="preserve-aspect"&&!BAe(QR(e),QR(r),.2)}function Sme(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Bme=n$({attachResizeListener:(t,e)=>N_(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),r3={current:void 0},s$=n$({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!r3.current){const t=new Bme({});t.mount(window),t.setOptions({layoutScroll:!0}),r3.current=t}return r3.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Eme={pan:{Feature:HAe},drag:{Feature:QAe,ProjectionNode:s$,MeasureLayout:Yq}};function YR(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,o=n[s];o&&Ol.postRender(()=>o(e,ib(e)))}class Tme extends og{mount(){const{current:e}=this.node;e&&(this.unmount=ipe(e,(r,n)=>(YR(this.node,n,"Start"),s=>YR(this.node,s,"End"))))}unmount(){}}class Ime extends og{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tb(N_(this.node.current,"focus",()=>this.onFocus()),N_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ZR(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),o=n[s];o&&Ol.postRender(()=>o(e,ib(e)))}class Lme extends og{mount(){const{current:e}=this.node;e&&(this.unmount=lpe(e,(r,n)=>(ZR(this.node,n,"Start"),(s,{success:o})=>ZR(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const k6=new WeakMap,n3=new WeakMap,Fme=t=>{const e=k6.get(t.target);e&&e(t)},Nme=t=>{t.forEach(Fme)};function Pme({root:t,...e}){const r=t||document;n3.has(r)||n3.set(r,{});const n=n3.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(Nme,{root:t,...e})),n[s]}function Mme(t,e,r){const n=Pme(e);return k6.set(t,r),n.observe(t),()=>{k6.delete(t),n.unobserve(t)}}const jme={some:0,all:1};class kme extends og{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:o}=e,c={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:jme[s]},u=i=>{const{isIntersecting:A}=i;if(this.isInView===A||(this.isInView=A,o&&!A&&this.hasEnteredView))return;A&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",A);const{onViewportEnter:g,onViewportLeave:C}=this.node.getProps(),B=A?g:C;B&&B(i)};return Mme(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Dme(e,r))&&this.startObserver()}unmount(){}}function Dme({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Ome={inView:{Feature:kme},tap:{Feature:Lme},focus:{Feature:Ime},hover:{Feature:Tme}},Rme={layout:{ProjectionNode:s$,MeasureLayout:Yq}},D6={current:null},o$={current:!1};function Ume(){if(o$.current=!0,!!jF)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>D6.current=t.matches;t.addListener(e),e()}else D6.current=!1}const zme=new WeakMap;function Qme(t,e,r){for(const n in e){const s=e[n],o=r[n];if(Xu(s))t.addValue(n,s);else if(Xu(o))t.addValue(n,A1(s,{owner:t}));else if(o!==s)if(t.hasValue(n)){const c=t.getValue(n);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(n);t.addValue(n,A1(c!==void 0?c:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const JR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Hme{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:o,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ZF,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const B=zh.now();this.renderScheduledAt<B&&(this.renderScheduledAt=B,Ol.render(this.render,!1,!0))};const{latestValues:i,renderState:A}=c;this.latestValues=i,this.baseTarget={...i},this.initialValues=r.initial?{...i}:{},this.renderState=A,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=xC(r),this.isVariantNode=Eq(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...C}=this.scrapeMotionValuesFromProps(r,{},this);for(const B in C){const S=C[B];i[B]!==void 0&&Xu(S)&&S.set(i[B],!1)}}mount(e){this.current=e,zme.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),o$.current||Ume(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:D6.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),qm(this.notifyUpdate),qm(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=F1.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Ol.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),o(),c&&c(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in m1){const r=m1[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pc()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<JR.length;n++){const s=JR[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,c=e[o];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=Qme(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=A1(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(MG(n)||kG(n))?n=parseFloat(n):!hpe(n)&&$m.test(r)&&(n=yq(e,r)),this.setBaseTarget(e,Xu(n)?n.get():n)),Xu(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var o;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const c=cN(this.props,r,(o=this.presenceContext)==null?void 0:o.custom);c&&(n=c[e])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xu(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new UF),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class a$ extends Hme{constructor(){super(...arguments),this.KeyframeResolver=Jfe}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xu(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function l$(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const o in r)t.style.setProperty(o,r[o])}function Vme(t){return window.getComputedStyle(t)}class Gme extends a${constructor(){super(...arguments),this.type="html",this.renderInstance=l$}readValueFromInstance(e,r){var n;if(F1.has(r))return(n=this.projection)!=null&&n.isProjecting?C6(r):yfe(e,r);{const s=Vme(e),o=(HF(r)?s.getPropertyValue(r):s[r])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:r}){return $q(e,r)}build(e,r,n){oN(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return uN(e,r,n)}}const c$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qme(t,e,r,n){l$(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(c$.has(s)?s:sN(s),e.attrs[s])}class $me extends a${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pc}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(F1.has(r)){const n=gq(r);return n&&n.default||0}return r=c$.has(r)?r:sN(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Dq(e,r,n)}build(e,r,n){Pq(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,s){qme(e,r,n,s)}mount(e){this.isSVGTag=jq(e.tagName),super.mount(e)}}const Wme=(t,e)=>lN(t)?new $me(e):new Gme(e,{allowProjection:t!==ve.Fragment}),Kme=qpe({...yAe,...Ome,...Eme,...Rme},Wme),iA=gpe(Kme);function i3(t){return ys({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"},child:[]}]})(t)}const Xme="/assets/bg-CXlWhlXB.jpg",e7=({text:t,className:e})=>m.jsx("span",{children:t.split("").map((r,n)=>m.jsx(iA.span,{className:e,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.05},children:r},n))}),Yme=()=>m.jsxs("div",{className:"relative bg-gradient-to-br from-purple-500 via-pink-500 to-blue-500 text-gray-100 min-h-screen flex flex-col",children:[m.jsx(Zme,{}),m.jsx(Jme,{}),m.jsx(ege,{})]}),Zme=()=>m.jsxs("header",{className:"relative h-screen",children:[m.jsx("img",{src:Xme,alt:"Agriculture Background",className:"w-full h-full object-cover mix-blend-overlay"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-700 via-transparent to-blue-800 opacity-80"}),m.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-center px-8 md:px-16",children:[m.jsx(iA.h1,{className:"text-7xl font-extrabold mb-6 text-white drop-shadow-lg",children:m.jsx(e7,{text:"Welcome to the Agriyields Traceability Portal"})}),m.jsx(iA.p,{className:"text-3xl max-w-2xl mb-8 text-gray-200 drop-shadow-md",children:m.jsx(e7,{text:"Data-driven monitoring and insights for your area of interest using satellite imagery and crop yield forecasts."})}),m.jsxs("div",{className:"flex space-x-6",children:[m.jsx(o3,{href:"/login",bgColor:"bg-gradient-to-r from-indigo-500 to-blue-500",hoverColor:"bg-gradient-to-r from-indigo-600 to-blue-600",icon:m.jsx(ane,{className:"w-6 h-6 mr-2 text-white"}),label:"Login"}),m.jsx(o3,{href:"/contactus",bgColor:"bg-gradient-to-r from-orange-400 to-red-400",hoverColor:"bg-gradient-to-r from-orange-500 to-red-500",icon:m.jsx(c1,{className:"w-6 h-6 mr-2 text-white"}),label:"Contact Us"}),m.jsx(o3,{href:"/signup",bgColor:"bg-gradient-to-r from-teal-500 to-green-500",hoverColor:"bg-gradient-to-r from-teal-600 to-green-600",icon:m.jsx(dne,{className:"w-6 h-6 mr-2 text-white"}),label:"Sign Up"})]})]})]}),Jme=()=>m.jsxs("main",{className:"flex-1 bg-gradient-to-tl from-white via-blue-50 to-pink-50 p-8 md:p-16",children:[m.jsx(t7,{title:"Get Started",children:m.jsx("p",{className:"text-center text-xl text-gray-700",children:"Join us in transforming the way you manage your farm. Explore the features and benefits today!"})}),m.jsx(t7,{title:"Why Choose Us?",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsx(s3,{title:"Forest Management",description:"Monitor crop growth and yields efficiently with real-time data.",icon:m.jsx(i3,{className:"w-12 h-12 text-green-500 mb-4"})}),m.jsx(s3,{title:"Digital Trace ID",description:"Easily generate QR codes for your produce and track inventory.",icon:m.jsx(i3,{className:"w-12 h-12 text-pink-500 mb-4"})}),m.jsx(s3,{title:"Farm Management",description:"Stay on top of your farms productivity with detailed yield reports.",icon:m.jsx(i3,{className:"w-12 h-12 text-blue-500 mb-4"})})]})})]}),s3=({title:t,description:e,icon:r})=>m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 transition-transform duration-300 hover:shadow-xl hover:scale-105 flex flex-col items-center text-center",children:[r,m.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:t}),m.jsx("p",{className:"text-gray-600",children:e})]}),t7=({title:t,children:e})=>m.jsxs("section",{className:"mb-16",children:[m.jsx("h2",{className:"text-5xl font-semibold text-center text-blue-800 mb-10 drop-shadow-lg",children:t}),m.jsx("div",{className:"bg-white shadow-2xl rounded-lg p-10 transition duration-300 transform hover:scale-105",children:e})]}),o3=({href:t,bgColor:e,hoverColor:r,icon:n,label:s})=>m.jsxs(iA.a,{href:t,className:`flex items-center ${e} text-white px-6 py-3 rounded-full shadow-lg transition transform hover:${r} hover:scale-105`,whileHover:{scale:1.1},whileTap:{scale:.95},children:[n,s]}),ege=()=>m.jsx("footer",{className:"bg-gray-900 text-white py-8 mt-8 text-center",children:m.jsx("p",{children:" 2024 Agriyields Traceability Portal. All rights reserved."})});var ec={},dN={},sb={},ob={},u$="Expected a function",r7=NaN,tge="[object Symbol]",rge=/^\s+|\s+$/g,nge=/^[-+]0x[0-9a-f]+$/i,ige=/^0b[01]+$/i,sge=/^0o[0-7]+$/i,oge=parseInt,age=typeof Ho=="object"&&Ho&&Ho.Object===Object&&Ho,lge=typeof self=="object"&&self&&self.Object===Object&&self,cge=age||lge||Function("return this")(),uge=Object.prototype,hge=uge.toString,dge=Math.max,fge=Math.min,a3=function(){return cge.Date.now()};function pge(t,e,r){var n,s,o,c,u,i,A=0,g=!1,C=!1,B=!0;if(typeof t!="function")throw new TypeError(u$);e=n7(e)||0,g4(r)&&(g=!!r.leading,C="maxWait"in r,o=C?dge(n7(r.maxWait)||0,e):o,B="trailing"in r?!!r.trailing:B);function S(ue){var oe=n,K=s;return n=s=void 0,A=ue,c=t.apply(K,oe),c}function P(ue){return A=ue,u=setTimeout(N,e),g?S(ue):c}function j(ue){var oe=ue-i,K=ue-A,ce=e-oe;return C?fge(ce,o-K):ce}function R(ue){var oe=ue-i,K=ue-A;return i===void 0||oe>=e||oe<0||C&&K>=o}function N(){var ue=a3();if(R(ue))return U(ue);u=setTimeout(N,j(ue))}function U(ue){return u=void 0,B&&n?S(ue):(n=s=void 0,c)}function $(){u!==void 0&&clearTimeout(u),A=0,n=i=s=u=void 0}function J(){return u===void 0?c:U(a3())}function te(){var ue=a3(),oe=R(ue);if(n=arguments,s=this,i=ue,oe){if(u===void 0)return P(i);if(C)return u=setTimeout(N,e),S(i)}return u===void 0&&(u=setTimeout(N,e)),c}return te.cancel=$,te.flush=J,te}function Age(t,e,r){var n=!0,s=!0;if(typeof t!="function")throw new TypeError(u$);return g4(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),pge(t,e,{leading:n,maxWait:e,trailing:s})}function g4(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function mge(t){return!!t&&typeof t=="object"}function gge(t){return typeof t=="symbol"||mge(t)&&hge.call(t)==tge}function n7(t){if(typeof t=="number")return t;if(gge(t))return r7;if(g4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=g4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(rge,"");var r=ige.test(t);return r||sge.test(t)?oge(t.slice(2),r?2:8):nge.test(t)?r7:+t}var yge=Age,ab={};Object.defineProperty(ab,"__esModule",{value:!0});ab.addPassiveEventListener=function(e,r,n){var s=n.name;s||(s=r,console.warn("Listener must be a named function.")),h5.has(r)||h5.set(r,new Set);var o=h5.get(r);if(!o.has(s)){var c=function(){var u=!1;try{var i=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,i)}catch{}return u}();e.addEventListener(r,n,c?{passive:!0}:!1),o.add(s)}};ab.removePassiveEventListener=function(e,r,n){e.removeEventListener(r,n),h5.get(r).delete(n.name||r)};var h5=new Map;Object.defineProperty(ob,"__esModule",{value:!0});var vge=yge,xge=_ge(vge),i7=ab;function _ge(t){return t&&t.__esModule?t:{default:t}}var bge=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,xge.default)(e,r)},Pl={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,r){if(e){var n=bge(function(s){Pl.scrollHandler(e)},r);return Pl.scrollSpyContainers.push(e),(0,i7.addPassiveEventListener)(e,"scroll",n),function(){(0,i7.removePassiveEventListener)(e,"scroll",n),Pl.scrollSpyContainers.splice(Pl.scrollSpyContainers.indexOf(e),1)}}return function(){}},isMounted:function(e){return Pl.scrollSpyContainers.indexOf(e)!==-1},currentPositionX:function(e){if(e===document){var r=window.scrollY!==void 0,n=(document.compatMode||"")==="CSS1Compat";return r?window.scrollX:n?document.documentElement.scrollLeft:document.body.scrollLeft}else return e.scrollLeft},currentPositionY:function(e){if(e===document){var r=window.scrollX!==void 0,n=(document.compatMode||"")==="CSS1Compat";return r?window.scrollY:n?document.documentElement.scrollTop:document.body.scrollTop}else return e.scrollTop},scrollHandler:function(e){var r=Pl.scrollSpyContainers[Pl.scrollSpyContainers.indexOf(e)].spyCallbacks||[];r.forEach(function(n){return n(Pl.currentPositionX(e),Pl.currentPositionY(e))})},addStateHandler:function(e){Pl.spySetState.push(e)},addSpyHandler:function(e,r){var n=Pl.scrollSpyContainers[Pl.scrollSpyContainers.indexOf(r)];n.spyCallbacks||(n.spyCallbacks=[]),n.spyCallbacks.push(e)},updateStates:function(){Pl.spySetState.forEach(function(e){return e()})},unmount:function(e,r){Pl.scrollSpyContainers.forEach(function(n){return n.spyCallbacks&&n.spyCallbacks.length&&n.spyCallbacks.indexOf(r)>-1&&n.spyCallbacks.splice(n.spyCallbacks.indexOf(r),1)}),Pl.spySetState&&Pl.spySetState.length&&Pl.spySetState.indexOf(e)>-1&&Pl.spySetState.splice(Pl.spySetState.indexOf(e),1),document.removeEventListener("scroll",Pl.scrollHandler)},update:function(){return Pl.scrollSpyContainers.forEach(function(e){return Pl.scrollHandler(e)})}};ob.default=Pl;var N1={},lb={};Object.defineProperty(lb,"__esModule",{value:!0});var wge=function(e,r){var n=e.indexOf("#")===0?e.substring(1):e,s=n?"#"+n:"",o=window&&window.location,c=s?o.pathname+o.search+s:o.pathname+o.search;r?history.pushState(history.state,"",c):history.replaceState(history.state,"",c)},Cge=function(){return window.location.hash.replace(/^#/,"")},Sge=function(e){return function(r){return e.contains?e!=r&&e.contains(r):!!(e.compareDocumentPosition(r)&16)}},Bge=function(e){return getComputedStyle(e).position!=="static"},l3=function(e,r){for(var n=e.offsetTop,s=e.offsetParent;s&&!r(s);)n+=s.offsetTop,s=s.offsetParent;return{offsetTop:n,offsetParent:s}},Ege=function(e,r,n){if(n)return e===document?r.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(e).position!=="static"?r.offsetLeft:r.offsetLeft-e.offsetLeft;if(e===document)return r.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(Bge(e)){if(r.offsetParent!==e){var s=function(g){return g===e||g===document},o=l3(r,s),c=o.offsetTop,u=o.offsetParent;if(u!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return c}return r.offsetTop}if(r.offsetParent===e.offsetParent)return r.offsetTop-e.offsetTop;var i=function(g){return g===document};return l3(r,i).offsetTop-l3(e,i).offsetTop};lb.default={updateHash:wge,getHash:Cge,filterElementInContainer:Sge,scrollOffset:Ege};var _C={},fN={};Object.defineProperty(fN,"__esModule",{value:!0});fN.default={defaultEasing:function(e){return e<.5?Math.pow(e*2,2)/2:1-Math.pow((1-e)*2,2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};var pN={};Object.defineProperty(pN,"__esModule",{value:!0});var Tge=ab,Ige=["mousedown","wheel","touchmove","keydown"];pN.default={subscribe:function(e){return typeof document<"u"&&Ige.forEach(function(r){return(0,Tge.addPassiveEventListener)(document,r,e)})}};var cb={};Object.defineProperty(cb,"__esModule",{value:!0});var O6={registered:{},scrollEvent:{register:function(e,r){O6.registered[e]=r},remove:function(e){O6.registered[e]=null}}};cb.default=O6;Object.defineProperty(_C,"__esModule",{value:!0});var Lge=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fge=lb;bC(Fge);var Nge=fN,s7=bC(Nge),Pge=pN,Mge=bC(Pge),jge=cb,dp=bC(jge);function bC(t){return t&&t.__esModule?t:{default:t}}var h$=function(e){return s7.default[e.smooth]||s7.default.defaultEasing},kge=function(e){return typeof e=="function"?e:function(){return e}},Dge=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},R6=function(){return Dge()||function(t,e,r){window.setTimeout(t,r||1e3/60,new Date().getTime())}}(),d$=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},f$=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollLeft;var n=window.pageXOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return n?window.pageXOffset:s?document.documentElement.scrollLeft:document.body.scrollLeft},p$=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollTop;var n=window.pageXOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return n?window.pageYOffset:s?document.documentElement.scrollTop:document.body.scrollTop},Oge=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollWidth-r.offsetWidth;var n=document.body,s=document.documentElement;return Math.max(n.scrollWidth,n.offsetWidth,s.clientWidth,s.scrollWidth,s.offsetWidth)},Rge=function(e){var r=e.data.containerElement;if(r&&r!==document&&r!==document.body)return r.scrollHeight-r.offsetHeight;var n=document.body,s=document.documentElement;return Math.max(n.scrollHeight,n.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight)},Uge=function t(e,r,n){var s=r.data;if(!r.ignoreCancelEvents&&s.cancel){dp.default.registered.end&&dp.default.registered.end(s.to,s.target,s.currentPositionY);return}if(s.delta=Math.round(s.targetPosition-s.startPosition),s.start===null&&(s.start=n),s.progress=n-s.start,s.percent=s.progress>=s.duration?1:e(s.progress/s.duration),s.currentPosition=s.startPosition+Math.ceil(s.delta*s.percent),s.containerElement&&s.containerElement!==document&&s.containerElement!==document.body?r.horizontal?s.containerElement.scrollLeft=s.currentPosition:s.containerElement.scrollTop=s.currentPosition:r.horizontal?window.scrollTo(s.currentPosition,0):window.scrollTo(0,s.currentPosition),s.percent<1){var o=t.bind(null,e,r);R6.call(window,o);return}dp.default.registered.end&&dp.default.registered.end(s.to,s.target,s.currentPosition)},AN=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},ub=function(e,r,n,s){r.data=r.data||d$(),window.clearTimeout(r.data.delayTimeout);var o=function(){r.data.cancel=!0};if(Mge.default.subscribe(o),AN(r),r.data.start=null,r.data.cancel=!1,r.data.startPosition=r.horizontal?f$(r):p$(r),r.data.targetPosition=r.absolute?e:e+r.data.startPosition,r.data.startPosition===r.data.targetPosition){dp.default.registered.end&&dp.default.registered.end(r.data.to,r.data.target,r.data.currentPosition);return}r.data.delta=Math.round(r.data.targetPosition-r.data.startPosition),r.data.duration=kge(r.duration)(r.data.delta),r.data.duration=isNaN(parseFloat(r.data.duration))?1e3:parseFloat(r.data.duration),r.data.to=n,r.data.target=s;var c=h$(r),u=Uge.bind(null,c,r);if(r&&r.delay>0){r.data.delayTimeout=window.setTimeout(function(){dp.default.registered.begin&&dp.default.registered.begin(r.data.to,r.data.target),R6.call(window,u)},r.delay);return}dp.default.registered.begin&&dp.default.registered.begin(r.data.to,r.data.target),R6.call(window,u)},wC=function(e){return e=Lge({},e),e.data=e.data||d$(),e.absolute=!0,e},zge=function(e){ub(0,wC(e))},Qge=function(e,r){ub(e,wC(r))},Hge=function(e){e=wC(e),AN(e),ub(e.horizontal?Oge(e):Rge(e),e)},Vge=function(e,r){r=wC(r),AN(r);var n=r.horizontal?f$(r):p$(r);ub(e+n,r)};_C.default={animateTopScroll:ub,getAnimationType:h$,scrollToTop:zge,scrollToBottom:Hge,scrollTo:Qge,scrollMore:Vge};Object.defineProperty(N1,"__esModule",{value:!0});var Gge=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qge=lb,$ge=mN(qge),Wge=_C,Kge=mN(Wge),Xge=cb,e2=mN(Xge);function mN(t){return t&&t.__esModule?t:{default:t}}var t2={},o7=void 0;N1.default={unmount:function(){t2={}},register:function(e,r){t2[e]=r},unregister:function(e){delete t2[e]},get:function(e){return t2[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return o7=e},getActiveLink:function(){return o7},scrollTo:function(e,r){var n=this.get(e);if(!n){console.warn("target Element not found");return}r=Gge({},r,{absolute:!1});var s=r.containerId,o=r.container,c=void 0;s?c=document.getElementById(s):o&&o.nodeType?c=o:c=document,r.absolute=!0;var u=r.horizontal,i=$ge.default.scrollOffset(c,n,u)+(r.offset||0);if(!r.smooth){e2.default.registered.begin&&e2.default.registered.begin(e,n),c===document?r.horizontal?window.scrollTo(i,0):window.scrollTo(0,i):c.scrollTop=i,e2.default.registered.end&&e2.default.registered.end(e,n);return}Kge.default.animateTopScroll(i,r,e,n)}};var A$={exports:{}},Yge="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Zge=Yge,Jge=Zge;function m$(){}function g$(){}g$.resetWarningCache=m$;var e0e=function(){function t(n,s,o,c,u,i){if(i!==Jge){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:g$,resetWarningCache:m$};return r.PropTypes=r,r};A$.exports=e0e();var T0=A$.exports;const r2=Sp(T0);var CC={};Object.defineProperty(CC,"__esModule",{value:!0});var t0e=lb,c3=r0e(t0e);function r0e(t){return t&&t.__esModule?t:{default:t}}var n0e={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,r){this.containers[e]=r},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,r=this.getHash();r?window.setTimeout(function(){e.scrollTo(r,!0),e.initialized=!0},10):this.initialized=!0},scrollTo:function(e,r){var n=this.scroller,s=n.get(e);if(s&&(r||e!==n.getActiveLink())){var o=this.containers[e]||document;n.scrollTo(e,{container:o})}},getHash:function(){return c3.default.getHash()},changeHash:function(e,r){this.isInitialized()&&c3.default.getHash()!==e&&c3.default.updateHash(e,r)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};CC.default=n0e;Object.defineProperty(sb,"__esModule",{value:!0});var n2=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s0e=ve,a7=hb(s0e),o0e=ob,i2=hb(o0e),a0e=N1,l0e=hb(a0e),c0e=T0,_l=hb(c0e),u0e=CC,HA=hb(u0e);function hb(t){return t&&t.__esModule?t:{default:t}}function h0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function f0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l7={to:_l.default.string.isRequired,containerId:_l.default.string,container:_l.default.object,activeClass:_l.default.string,activeStyle:_l.default.object,spy:_l.default.bool,horizontal:_l.default.bool,smooth:_l.default.oneOfType([_l.default.bool,_l.default.string]),offset:_l.default.number,delay:_l.default.number,isDynamic:_l.default.bool,onClick:_l.default.func,duration:_l.default.oneOfType([_l.default.number,_l.default.func]),absolute:_l.default.bool,onSetActive:_l.default.func,onSetInactive:_l.default.func,ignoreCancelEvents:_l.default.bool,hashSpy:_l.default.bool,saveHashHistory:_l.default.bool,spyThrottle:_l.default.number};sb.default=function(t,e){var r=e||l0e.default,n=function(o){f0e(c,o);function c(u){h0e(this,c);var i=d0e(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u));return s.call(i),i.state={active:!1},i.beforeUnmountCallbacks=[],i}return i0e(c,[{key:"getScrollSpyContainer",value:function(){var i=this.props.containerId,A=this.props.container;return i&&!A?document.getElementById(i):A&&A.nodeType?A:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var i=this.getScrollSpyContainer();if(!i2.default.isMounted(i)){var A=i2.default.mount(i,this.props.spyThrottle);this.beforeUnmountCallbacks.push(A)}this.props.hashSpy&&(HA.default.isMounted()||HA.default.mount(r),HA.default.mapContainer(this.props.to,i)),i2.default.addSpyHandler(this.spyHandler,i),this.setState({container:i})}}},{key:"componentWillUnmount",value:function(){i2.default.unmount(this.stateHandler,this.spyHandler),this.beforeUnmountCallbacks.forEach(function(i){return i()})}},{key:"render",value:function(){var i="";this.state&&this.state.active?i=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():i=this.props.className;var A={};this.state&&this.state.active?A=n2({},this.props.style,this.props.activeStyle):A=n2({},this.props.style);var g=n2({},this.props);for(var C in l7)g.hasOwnProperty(C)&&delete g[C];return g.className=i,g.style=A,g.onClick=this.handleClick,a7.default.createElement(t,g)}}]),c}(a7.default.PureComponent),s=function(){var c=this;this.scrollTo=function(u,i){r.scrollTo(u,n2({},c.state,i))},this.handleClick=function(u){c.props.onClick&&c.props.onClick(u),u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault(),c.scrollTo(c.props.to,c.props)},this.spyHandler=function(u,i){var A=c.getScrollSpyContainer();if(!(HA.default.isMounted()&&!HA.default.isInitialized())){var g=c.props.horizontal,C=c.props.to,B=null,S=void 0,P=void 0;if(g){var j=0,R=0,N=0;if(A.getBoundingClientRect){var U=A.getBoundingClientRect();N=U.left}if(!B||c.props.isDynamic){if(B=r.get(C),!B)return;var $=B.getBoundingClientRect();j=$.left-N+u,R=j+$.width}var J=u-c.props.offset;S=J>=Math.floor(j)&&J<Math.floor(R),P=J<Math.floor(j)||J>=Math.floor(R)}else{var te=0,ue=0,oe=0;if(A.getBoundingClientRect){var K=A.getBoundingClientRect();oe=K.top}if(!B||c.props.isDynamic){if(B=r.get(C),!B)return;var ce=B.getBoundingClientRect();te=ce.top-oe+i,ue=te+ce.height}var me=i-c.props.offset;S=me>=Math.floor(te)&&me<Math.floor(ue),P=me<Math.floor(te)||me>=Math.floor(ue)}var Z=r.getActiveLink();if(P){if(C===Z&&r.setActiveLink(void 0),c.props.hashSpy&&HA.default.getHash()===C){var Y=c.props.saveHashHistory,Le=Y===void 0?!1:Y;HA.default.changeHash("",Le)}c.props.spy&&c.state.active&&(c.setState({active:!1}),c.props.onSetInactive&&c.props.onSetInactive(C,B))}if(S&&(Z!==C||c.state.active===!1)){r.setActiveLink(C);var _e=c.props.saveHashHistory,Qe=_e===void 0?!1:_e;c.props.hashSpy&&HA.default.changeHash(C,Qe),c.props.spy&&(c.setState({active:!0}),c.props.onSetActive&&c.props.onSetActive(C,B))}}}};return n.propTypes=l7,n.defaultProps={offset:0},n};Object.defineProperty(dN,"__esModule",{value:!0});var p0e=ve,c7=y$(p0e),A0e=sb,m0e=y$(A0e);function y$(t){return t&&t.__esModule?t:{default:t}}function g0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function y0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var v0e=function(t){y0e(e,t);function e(){var r,n,s,o;g0e(this,e);for(var c=arguments.length,u=Array(c),i=0;i<c;i++)u[i]=arguments[i];return o=(n=(s=u7(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(u))),s),s.render=function(){return c7.default.createElement("a",s.props,s.props.children)},n),u7(s,o)}return e}(c7.default.Component);dN.default=(0,m0e.default)(v0e);var gN={};Object.defineProperty(gN,"__esModule",{value:!0});var x0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_0e=ve,h7=v$(_0e),b0e=sb,w0e=v$(b0e);function v$(t){return t&&t.__esModule?t:{default:t}}function C0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function B0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E0e=function(t){B0e(e,t);function e(){return C0e(this,e),S0e(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return x0e(e,[{key:"render",value:function(){return h7.default.createElement("button",this.props,this.props.children)}}]),e}(h7.default.Component);gN.default=(0,w0e.default)(E0e);var yN={},SC={};Object.defineProperty(SC,"__esModule",{value:!0});var T0e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},I0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),L0e=ve,d7=BC(L0e),F0e=nC;BC(F0e);var N0e=N1,f7=BC(N0e),P0e=T0,p7=BC(P0e);function BC(t){return t&&t.__esModule?t:{default:t}}function M0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function k0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}SC.default=function(t){var e=function(r){k0e(n,r);function n(s){M0e(this,n);var o=j0e(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,s));return o.childBindings={domNode:null},o}return I0e(n,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(o){this.props.name!==o.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;f7.default.unregister(this.props.name)}},{key:"registerElems",value:function(o){f7.default.register(o,this.childBindings.domNode)}},{key:"render",value:function(){return d7.default.createElement(t,T0e({},this.props,{parentBindings:this.childBindings}))}}]),n}(d7.default.Component);return e.propTypes={name:p7.default.string,id:p7.default.string},e};Object.defineProperty(yN,"__esModule",{value:!0});var A7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D0e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),O0e=ve,m7=vN(O0e),R0e=SC,U0e=vN(R0e),z0e=T0,g7=vN(z0e);function vN(t){return t&&t.__esModule?t:{default:t}}function Q0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H0e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function V0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var x$=function(t){V0e(e,t);function e(){return Q0e(this,e),H0e(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return D0e(e,[{key:"render",value:function(){var n=this,s=A7({},this.props);return delete s.name,s.parentBindings&&delete s.parentBindings,m7.default.createElement("div",A7({},s,{ref:function(c){n.props.parentBindings.domNode=c}}),this.props.children)}}]),e}(m7.default.Component);x$.propTypes={name:g7.default.string,id:g7.default.string};yN.default=(0,U0e.default)(x$);var u3=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y7=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function v7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s2=ve,Bg=ob,h3=N1,Ml=T0,VA=CC,b7={to:Ml.string.isRequired,containerId:Ml.string,container:Ml.object,activeClass:Ml.string,spy:Ml.bool,smooth:Ml.oneOfType([Ml.bool,Ml.string]),offset:Ml.number,delay:Ml.number,isDynamic:Ml.bool,onClick:Ml.func,duration:Ml.oneOfType([Ml.number,Ml.func]),absolute:Ml.bool,onSetActive:Ml.func,onSetInactive:Ml.func,ignoreCancelEvents:Ml.bool,hashSpy:Ml.bool,spyThrottle:Ml.number},G0e={Scroll:function(e,r){console.warn("Helpers.Scroll is deprecated since v1.7.0");var n=r||h3,s=function(c){_7(u,c);function u(i){v7(this,u);var A=x7(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,i));return o.call(A),A.state={active:!1},A}return y7(u,[{key:"getScrollSpyContainer",value:function(){var A=this.props.containerId,g=this.props.container;return A?document.getElementById(A):g&&g.nodeType?g:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var A=this.getScrollSpyContainer();Bg.isMounted(A)||Bg.mount(A,this.props.spyThrottle),this.props.hashSpy&&(VA.isMounted()||VA.mount(n),VA.mapContainer(this.props.to,A)),this.props.spy&&Bg.addStateHandler(this.stateHandler),Bg.addSpyHandler(this.spyHandler,A),this.setState({container:A})}}},{key:"componentWillUnmount",value:function(){Bg.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var A="";this.state&&this.state.active?A=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():A=this.props.className;var g=u3({},this.props);for(var C in b7)g.hasOwnProperty(C)&&delete g[C];return g.className=A,g.onClick=this.handleClick,s2.createElement(e,g)}}]),u}(s2.Component),o=function(){var u=this;this.scrollTo=function(i,A){n.scrollTo(i,u3({},u.state,A))},this.handleClick=function(i){u.props.onClick&&u.props.onClick(i),i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),u.scrollTo(u.props.to,u.props)},this.stateHandler=function(){n.getActiveLink()!==u.props.to&&(u.state!==null&&u.state.active&&u.props.onSetInactive&&u.props.onSetInactive(),u.setState({active:!1}))},this.spyHandler=function(i){var A=u.getScrollSpyContainer();if(!(VA.isMounted()&&!VA.isInitialized())){var g=u.props.to,C=null,B=0,S=0,P=0;if(A.getBoundingClientRect){var j=A.getBoundingClientRect();P=j.top}if(!C||u.props.isDynamic){if(C=n.get(g),!C)return;var R=C.getBoundingClientRect();B=R.top-P+i,S=B+R.height}var N=i-u.props.offset,U=N>=Math.floor(B)&&N<Math.floor(S),$=N<Math.floor(B)||N>=Math.floor(S),J=n.getActiveLink();if($)return g===J&&n.setActiveLink(void 0),u.props.hashSpy&&VA.getHash()===g&&VA.changeHash(),u.props.spy&&u.state.active&&(u.setState({active:!1}),u.props.onSetInactive&&u.props.onSetInactive()),Bg.updateStates();if(U&&J!==g)return n.setActiveLink(g),u.props.hashSpy&&VA.changeHash(g),u.props.spy&&(u.setState({active:!0}),u.props.onSetActive&&u.props.onSetActive(g)),Bg.updateStates()}}};return s.propTypes=b7,s.defaultProps={offset:0},s},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var r=function(n){_7(s,n);function s(o){v7(this,s);var c=x7(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,o));return c.childBindings={domNode:null},c}return y7(s,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(c){this.props.name!==c.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;h3.unregister(this.props.name)}},{key:"registerElems",value:function(c){h3.register(c,this.childBindings.domNode)}},{key:"render",value:function(){return s2.createElement(e,u3({},this.props,{parentBindings:this.childBindings}))}}]),s}(s2.Component);return r.propTypes={name:Ml.string,id:Ml.string},r}},q0e=G0e;Object.defineProperty(ec,"__esModule",{value:!0});ec.Helpers=ec.ScrollElement=ec.ScrollLink=ec.animateScroll=ec.scrollSpy=ec.Events=ec.scroller=ec.Element=ec.Button=U6=ec.Link=void 0;var $0e=dN,_$=Bp($0e),W0e=gN,b$=Bp(W0e),K0e=yN,w$=Bp(K0e),X0e=N1,C$=Bp(X0e),Y0e=cb,S$=Bp(Y0e),Z0e=ob,B$=Bp(Z0e),J0e=_C,E$=Bp(J0e),eye=sb,T$=Bp(eye),tye=SC,I$=Bp(tye),rye=q0e,L$=Bp(rye);function Bp(t){return t&&t.__esModule?t:{default:t}}var U6=ec.Link=_$.default;ec.Button=b$.default;ec.Element=w$.default;ec.scroller=C$.default;ec.Events=S$.default;ec.scrollSpy=B$.default;ec.animateScroll=E$.default;ec.ScrollLink=T$.default;ec.ScrollElement=I$.default;ec.Helpers=L$.default;ec.default={Link:_$.default,Button:b$.default,Element:w$.default,scroller:C$.default,Events:S$.default,scrollSpy:B$.default,animateScroll:E$.default,ScrollLink:T$.default,ScrollElement:I$.default,Helpers:L$.default};const EC="/assets/parrot-CPW7Bwmu.jpg",nye=()=>(ve.useEffect(()=>{const t=()=>{const e=window.scrollY,r=document.querySelector(".parallax-background");r&&(r.style.transform=`translateY(${e*.5}px)`)};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]),m.jsxs("div",{className:"bg-gradient-to-br from-green-300 via-teal-100 to-blue-200 min-h-screen font-poppins text-gray-800",children:[m.jsxs("header",{className:"bg-gradient-to-r from-teal-700 to-blue-800 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90",children:[m.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[m.jsx("span",{className:"bg-white p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:m.jsx("img",{src:EC,alt:"Description de l'image",className:"w-16 h-16 rounded-full object-cover"})}),m.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),m.jsxs("nav",{className:"hidden md:flex space-x-8 text-lg font-medium animate-fade-in",children:[m.jsx(U6,{to:"features",smooth:!0,duration:500,offset:-80,className:"cursor-pointer relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Features"}),m.jsx("a",{href:"/sectionfutur",className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"About"},"about"),m.jsx(U6,{to:"contact",smooth:!0,duration:500,offset:-80,className:"cursor-pointer relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Contact"}),m.jsx("a",{href:"/EUDRSubmissionForGuest",className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Resources"},"EUDR"),m.jsx("a",{href:"#",className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:"Blog"},"#")]}),m.jsx("a",{href:"/login",className:"hidden md:inline-block bg-teal-500 hover:bg-teal-300 text-white font-semibold px-6 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Get Started"})]}),m.jsxs("section",{className:"py-20 bg-gradient-to-tl from-teal-200 to-white text-center animate-gradient",children:[m.jsx("h2",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Welcome to the Agriyields Traceability Portal"}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto mb-8 animate-fade-in-color",children:"Data driven monitoring and insights for your area of interest using next generation satellite imagery."}),m.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-6 items-center",children:[m.jsx("a",{href:"/login",className:"bg-teal-500 hover:bg-teal-600 text-white px-8 py-3 rounded-full shadow-lg text-lg text-center",children:"Get Started"}),m.jsx("a",{href:"/learn-more",className:"bg-white hover:bg-gray-100 text-teal-500 border border-teal-500 px-8 py-3 rounded-full shadow-lg text-lg text-center",children:"Learn More"})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 mt-12 max-w-6xl mx-auto",children:[{title:"Forest Management",icon:v_,description:"Real time data insights for biodiversity and forestry conservation, antideforestation, afforestation & reforesatation.",bgColor:"bg-gradient-to-br from-blue-100 to-teal-50",iconColor:"text-blue-500"},{title:"Digital Trace ID",icon:nF,description:"Track your produce and inventory, trace supply chains from farm to fork by generating secure digital certificates & stamps.",bgColor:"bg-gradient-to-br from-green-100 to-lime-50",iconColor:"text-green-500"},{title:"Farm Management",icon:une,description:"Manage and monitor your farms operations with actionable geospatial data insights, monitor crop.",bgColor:"bg-gradient-to-br from-purple-100 to-pink-50",iconColor:"text-purple-500"}].map(({title:t,icon:e,description:r,bgColor:n,iconColor:s},o)=>m.jsxs("div",{className:`${n} rounded-xl shadow-lg p-8 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300`,children:[m.jsx("div",{className:`w-16 h-16 flex items-center justify-center rounded-full shadow-md mb-6 ${s} bg-white`,children:m.jsx(e,{className:"text-3xl"})}),m.jsx("h4",{className:"text-2xl font-bold text-gray-800 mb-4",children:t}),m.jsx("p",{className:"text-gray-600",children:r})]},o))})]}),m.jsxs("section",{id:"features",className:"py-20 bg-gradient-to-br from-teal-50 via-white to-blue-100",children:[m.jsx("h3",{className:"text-4xl font-extrabold text-center text-teal-700 mb-16 animate-fade-in-up",children:"Features"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 max-w-7xl mx-auto px-6",children:[{Icon:EH,title:"Climate",description:"Gain insights into how changing patterns in weather and climate affect your business by conducting area based risk assessments.",color:"bg-purple-400",textColor:"text-purple-600"},{Icon:rF,title:"Environment",description:"Leverage the power of advanced Geospatial data analytics and machine learning to conduct environmental risk assessments and feasibility, EUDR risk assessment & compliance verification with precision and accurancy.",color:"bg-pink-400",textColor:"text-pink-600"},{Icon:v_,title:"Carbon Offset Projects",description:"Contribute to environmental & climate sustainability and the net Zero agenda by managing and tracking carbon and other GHG emissions.",color:"bg-teal-400",textColor:"text-teal-600"},{Icon:tF,title:"Multiple Report",description:"Access detailed reports and analytics for informed decision-making on your farm.",color:"bg-purple-400",textColor:"text-purple-600"}].map(({Icon:t,title:e,description:r,color:n,textColor:s},o)=>m.jsxs("div",{className:"relative bg-white rounded-2xl p-8 shadow-md hover:shadow-2xl hover:scale-105 transition-transform duration-300",children:[m.jsx("div",{className:`${n} text-white w-16 h-16 flex items-center justify-center rounded-full shadow-lg mb-6`,children:m.jsx(t,{className:"text-2xl"})}),m.jsx("h4",{className:`text-2xl font-bold mb-4 animate-fade-in ${s}`,children:e}),m.jsx("p",{className:"text-gray-600 leading-relaxed",children:r})]},o))})]}),m.jsxs("section",{id:"contact",className:"py-20 bg-gradient-to-tl from-teal-200 to-white",children:[m.jsx("h3",{className:"text-4xl font-bold text-center text-teal-700 mb-10",children:"Contact Us"}),m.jsx("p",{className:"text-lg text-gray-600 text-center max-w-3xl mx-auto mb-12",children:"Join the big data revolution, explore and transform the way you do business by reaching out to us."}),m.jsx("div",{className:"flex justify-center gap-8",children:[{label:"Email Us",Icon:c1,href:"/contactus"},{label:"Sign Up",Icon:K5,href:"/signup"}].map(({label:t,Icon:e,href:r},n)=>m.jsxs("a",{href:r,className:"bg-teal-500 text-white px-10 py-3 rounded-full font-medium flex items-center gap-2 shadow-lg hover:bg-teal-700 transition-transform transform hover:scale-105",children:[m.jsx(e,{})," ",t]},n))})]}),m.jsxs("footer",{className:"bg-teal-700 text-white text-center py-4",children:[m.jsxs("p",{children:[" ",new Date().getFullYear(),"  Agriyields traceability portal. All rights reserved."]}),m.jsxs(iA.a,{href:"mailto:lwetutb@gmail.com",className:"text-gray-300 hover:text-gray-200 flex items-center justify-center mt-2",whileHover:{scale:1.1},children:[m.jsx(c1,{className:"w-5 h-5 mr-1"}),"nkusu@agriyields.com"]})]})]})),iye=()=>{const[t,e]=ve.useState(""),[r,n]=ve.useState(""),[s,o]=ve.useState(""),[c,u]=ve.useState(""),i=B1(),A=async g=>{g.preventDefault();try{const C=await Mr.post("/api/login",{email:t,password:r});localStorage.setItem("token",C.data.token),u("Login successful!"),o(""),i("/home")}catch{o("Login failed. Please check your credentials."),u("")}};return m.jsxs("div",{className:"bg-gradient-to-br from-teal-400 via-cyan-300 to-blue-500 min-h-screen flex items-center justify-center p-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-5 left-0 right-0 flex justify-center",children:m.jsx(jh,{size:120,className:"text-white opacity-30 animate-pulse"})}),m.jsx("div",{className:"absolute top-5 left-5 text-white opacity-20 animate-pulse",children:m.jsx(jh,{size:200})}),m.jsx("div",{className:"absolute top-10 right-5 text-white opacity-10 animate-pulse",children:m.jsx(jh,{size:150})}),m.jsx("div",{className:"absolute top-20 left-20 text-white opacity-40 animate-pulse",children:m.jsx(jh,{size:180})}),m.jsx("div",{className:"absolute top-40 left-40 text-white opacity-50 animate-pulse",children:m.jsx(jh,{size:140})}),m.jsx("div",{className:"absolute bottom-20 right-10 text-white opacity-30 animate-pulse",children:m.jsx(jh,{size:150})}),m.jsx("div",{className:"absolute bottom-5 right-5 text-white opacity-20 animate-pulse",children:m.jsx(jh,{size:120})}),m.jsx(iA.div,{className:"bg-white p-10 rounded-3xl shadow-lg w-full max-w-2xl flex overflow-hidden relative z-10",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},children:m.jsxs("div",{className:"w-full p-8",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-extrabold text-gray-800 mb-2",children:"Login"}),m.jsx("p",{className:"text-gray-600",children:"Enter your credentials to access your account"})]}),m.jsxs("form",{onSubmit:A,children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Email Address:"}),m.jsxs(iA.div,{className:"mt-2 flex items-center border-2 border-gray-300 rounded-lg shadow-sm focus-within:ring-2 focus-within:ring-teal-500 focus-within:border-teal-500 transition duration-150 ease-in-out",whileFocus:{scale:1.02},children:[m.jsx(c1,{className:"mx-3 text-gray-400"}),m.jsx("input",{type:"email",id:"email",name:"email",required:!0,className:"w-full px-4 py-3 focus:outline-none",value:t,onChange:g=>e(g.target.value)})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Password:"}),m.jsxs(iA.div,{className:"mt-2 flex items-center border-2 border-gray-300 rounded-lg shadow-sm focus-within:ring-2 focus-within:ring-teal-500 focus-within:border-teal-500 transition duration-150 ease-in-out",whileFocus:{scale:1.02},children:[m.jsx(sne,{className:"mx-3 text-gray-400"}),m.jsx("input",{type:"password",id:"password",name:"password",required:!0,className:"w-full px-4 py-3 focus:outline-none",value:r,onChange:g=>n(g.target.value)})]})]}),s&&m.jsx("p",{className:"text-red-600 mb-4",children:s}),c&&m.jsx("p",{className:"text-green-600 mb-4",children:c}),m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("button",{type:"submit",className:"bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-semibold px-6 py-2 rounded-lg shadow-md hover:shadow-lg transition duration-300 ease-in-out transform hover:-translate-y-1",children:"Login"}),m.jsx("a",{href:"mailto:lwetutb@gmail.com",className:"text-teal-600 font-semibold hover:text-teal-700 hover:underline transition duration-150 ease-in-out",children:"Contact Us to register"})]}),m.jsx("div",{className:"text-center",children:m.jsx("a",{href:"#",className:"text-teal-600 hover:text-teal-800 hover:underline text-sm",children:"Already have an account? Log in"})})]})]})})]})};class sx extends Error{}sx.prototype.name="InvalidTokenError";function sye(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function oye(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return sye(e)}catch{return atob(e)}}function TC(t,e){if(typeof t!="string")throw new sx("Invalid token specified: must be a string");e||(e={});const r=e.header===!0?0:1,n=t.split(".")[r];if(typeof n!="string")throw new sx(`Invalid token specified: missing part #${r+1}`);let s;try{s=oye(n)}catch(o){throw new sx(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new sx(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}const aye=()=>{const[t,e]=ve.useState(null);ve.useEffect(()=>{var s;const n=localStorage.getItem("token");if(n){const c=((s=TC(n).sub)==null?void 0:s.user_type)||"";e(c)}},[]);const r=[{Icon:v_,title:"Forest Management",description:"Manage and monitor your forest areas efficiently.",textColor:"text-green-700",buttonText:"Manage Forest",color:"bg-teal-500",link:"/forestpage",isBlurred:!(t==="admin"||t==="forest")},{Icon:EH,title:"Weather",description:"Monitor and manage weather data efficiently.",textColor:"text-blue-700",color:"bg-blue-500",buttonText:"View Weather",link:"/weathermap",isBlurred:!1},{Icon:nF,title:"Digital Trace ID",description:"Generate secure digital marks and certificates.",textColor:"text-indigo-700",color:"bg-indigo-500",buttonText:"Generate Codes",link:"/qr",isBlurred:!1},{Icon:rF,title:"Farm Management",description:"Track and manage your farm data effectively.",textColor:"text-yellow-700",color:"bg-yellow-500",buttonText:"Manage Farm",link:"/farmmanager",isBlurred:!(t==="admin"||t==="farmer")}];return m.jsxs("div",{className:"bg-gradient-to-br from-teal-50 via-green-50 to-yellow-50 min-h-screen font-poppins text-gray-800 relative",children:[m.jsx("div",{className:"absolute top-5 left-5 text-yellow-300 opacity-50 animate-pulse",children:m.jsx(jh,{size:200})}),m.jsx("div",{className:"absolute top-10 right-5 text-blue-300 opacity-40 animate-pulse",children:m.jsx(jh,{size:150})}),m.jsx("div",{className:"absolute top-20 left-20 text-white opacity-60 animate-pulse",children:m.jsx(jh,{size:180})}),m.jsx("div",{className:"absolute top-40 left-40 text-white opacity-50 animate-pulse",children:m.jsx(jh,{size:140})}),m.jsx("div",{className:"absolute bottom-20 right-10 text-white opacity-60 animate-pulse",children:m.jsx(jh,{size:150})}),m.jsxs("header",{className:"bg-gradient-to-r from-teal-600 to-blue-700 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90 w-full",children:[m.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[m.jsx("span",{className:"bg-white p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:m.jsx("img",{src:EC,alt:"Nkusu Logo",className:"w-16 h-16 rounded-full object-cover"})}),m.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),m.jsx("nav",{className:"hidden md:flex space-x-8 text-lg font-medium animate-fade-in",children:[{label:"Features",href:"#features"},{label:"Contact",href:"#contact"}].map(({label:n,href:s})=>m.jsx("a",{href:s,className:"relative text-white after:absolute after:w-0 after:h-[2px] after:bg-teal-300 after:bottom-0 after:left-1/2 after:transform after:-translate-x-1/2 hover:after:w-full hover:after:left-0 transition-all duration-300",children:n},n))}),m.jsx("a",{href:"/login",className:"hidden md:inline-block bg-teal-600 hover:bg-teal-500 text-white font-semibold px-6 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Get Started"})]}),m.jsxs("div",{className:"text-center max-w-6xl mx-auto mt-10",children:[m.jsx("h2",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Welcome to the Agriyields"}),m.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto mb-8 animate-fade-in-color",children:"Choose an option below to get started:"})]}),m.jsxs("div",{id:"features",className:"pt-24",children:[m.jsx("h2",{className:"text-4xl font-bold text-teal-700 text-center mb-10",children:"Features"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 max-w-4xl mx-auto px-6",children:r.map(({Icon:n,title:s,description:o,textColor:c,buttonText:u,color:i,link:A,isBlurred:g},C)=>m.jsxs("div",{className:`flex flex-col items-center p-6 rounded-lg shadow-lg transition-shadow duration-300 bg-white ${g?"opacity-50 pointer-events-none":"hover:shadow-xl"}`,children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-200 mr-4",children:m.jsx(n,{className:`text-3xl ${c}`})}),m.jsx("h3",{className:`text-xl font-semibold ${c}`,children:s})]}),m.jsx("p",{className:"text-gray-700 text-center mb-4",children:o}),m.jsx("a",{href:A,className:`mt-auto px-4 py-2 text-sm font-semibold text-white rounded ${g?"bg-gray-400":i} ${c}`,children:u})]},C))})]}),m.jsxs("div",{id:"contact",className:"py-20 bg-gradient-to-tl from-teal-200 to-white mt-20",children:[m.jsx("h3",{className:"text-4xl font-bold text-center text-teal-700 mb-10",children:"Contact Us"}),m.jsx("p",{className:"text-lg text-gray-600 text-center max-w-3xl mx-auto mb-12",children:"Have a question or want to get in touch? We'd love to hear from you."}),m.jsxs("div",{className:"flex justify-center gap-8",children:[m.jsxs("a",{href:"mailto:nkusu@agriyields.com",className:"bg-teal-500 text-white px-10 py-3 rounded-full font-medium flex items-center gap-2 shadow-lg hover:bg-teal-700 transition-transform transform hover:scale-105",children:[m.jsx(jh,{})," Email Us"]}),m.jsxs("a",{href:"/signup",className:"bg-white text-teal-600 border border-teal-500 px-10 py-3 rounded-full font-medium flex items-center gap-2 shadow-lg hover:bg-teal-500 hover:text-white transition-transform transform hover:scale-105",children:[m.jsx(W_,{})," Sign Up"]})]})]})]})};function w7(t){return ys({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"circle",attr:{cx:"10",cy:"8",r:"4"},child:[]},{tag:"path",attr:{d:"M10.67 13.02c-.22-.01-.44-.02-.67-.02-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26a6.963 6.963 0 0 1-.59-6.98zM20.75 16c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(t)}function d3(t){return ys({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"},child:[]}]})(t)}var F$={exports:{}};/*!
* sweetalert2 v11.12.4
* Released under the MIT License.
*/(function(t,e){(function(r,n){t.exports=n()})(Ho,function(){function r(nt,ge){(ge==null||ge>nt.length)&&(ge=nt.length);for(var ke=0,rt=Array(ge);ke<ge;ke++)rt[ke]=nt[ke];return rt}function n(nt){if(Array.isArray(nt))return nt}function s(nt){if(Array.isArray(nt))return r(nt)}function o(nt,ge,ke){if(typeof nt=="function"?nt===ge:nt.has(ge))return arguments.length<3?ge:ke;throw new TypeError("Private element is not present on this object")}function c(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function u(nt,ge,ke){return ge=U(ge),ce(nt,J()?Reflect.construct(ge,ke||[],U(nt).constructor):ge.apply(nt,ke))}function i(nt,ge){if(ge.has(nt))throw new TypeError("Cannot initialize the same private elements twice on an object")}function A(nt,ge){if(!(nt instanceof ge))throw new TypeError("Cannot call a class as a function")}function g(nt,ge){return nt.get(o(nt,ge))}function C(nt,ge,ke){i(nt,ge),ge.set(nt,ke)}function B(nt,ge,ke){return nt.set(o(nt,ge),ke),ke}function S(nt,ge,ke){if(J())return Reflect.construct.apply(null,arguments);var rt=[null];rt.push.apply(rt,ge);var Kt=new(nt.bind.apply(nt,rt));return Kt}function P(nt,ge){for(var ke=0;ke<ge.length;ke++){var rt=ge[ke];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(nt,De(rt.key),rt)}}function j(nt,ge,ke){return ge&&P(nt.prototype,ge),Object.defineProperty(nt,"prototype",{writable:!1}),nt}function R(nt,ge){var ke=typeof Symbol<"u"&&nt[Symbol.iterator]||nt["@@iterator"];if(!ke){if(Array.isArray(nt)||(ke=xe(nt))||ge){ke&&(nt=ke);var rt=0,Kt=function(){};return{s:Kt,n:function(){return rt>=nt.length?{done:!0}:{done:!1,value:nt[rt++]}},e:function(ki){throw ki},f:Kt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qr,Kn=!0,Ei=!1;return{s:function(){ke=ke.call(nt)},n:function(){var ki=ke.next();return Kn=ki.done,ki},e:function(ki){Ei=!0,Qr=ki},f:function(){try{Kn||ke.return==null||ke.return()}finally{if(Ei)throw Qr}}}}function N(){return N=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(nt,ge,ke){var rt=Y(nt,ge);if(rt){var Kt=Object.getOwnPropertyDescriptor(rt,ge);return Kt.get?Kt.get.call(arguments.length<3?nt:ke):Kt.value}},N.apply(null,arguments)}function U(nt){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},U(nt)}function $(nt,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(ge&&ge.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),ge&&me(nt,ge)}function J(){try{var nt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J=function(){return!!nt})()}function te(nt){if(typeof Symbol<"u"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)}function ue(nt,ge){var ke=nt==null?null:typeof Symbol<"u"&&nt[Symbol.iterator]||nt["@@iterator"];if(ke!=null){var rt,Kt,Qr,Kn,Ei=[],ki=!0,Qs=!1;try{if(Qr=(ke=ke.call(nt)).next,ge!==0)for(;!(ki=(rt=Qr.call(ke)).done)&&(Ei.push(rt.value),Ei.length!==ge);ki=!0);}catch(Oc){Qs=!0,Kt=Oc}finally{try{if(!ki&&ke.return!=null&&(Kn=ke.return(),Object(Kn)!==Kn))return}finally{if(Qs)throw Kt}}return Ei}}function oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ce(nt,ge){if(ge&&(typeof ge=="object"||typeof ge=="function"))return ge;if(ge!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c(nt)}function me(nt,ge){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ke,rt){return ke.__proto__=rt,ke},me(nt,ge)}function Z(nt,ge){return n(nt)||ue(nt,ge)||xe(nt,ge)||oe()}function Y(nt,ge){for(;!{}.hasOwnProperty.call(nt,ge)&&(nt=U(nt))!==null;);return nt}function Le(nt,ge,ke,rt){var Kt=N(U(nt.prototype),ge,ke);return function(Qr){return Kt.apply(ke,Qr)}}function _e(nt){return s(nt)||te(nt)||xe(nt)||K()}function Qe(nt,ge){if(typeof nt!="object"||!nt)return nt;var ke=nt[Symbol.toPrimitive];if(ke!==void 0){var rt=ke.call(nt,ge);if(typeof rt!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(nt)}function De(nt){var ge=Qe(nt,"string");return typeof ge=="symbol"?ge:ge+""}function Be(nt){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},Be(nt)}function xe(nt,ge){if(nt){if(typeof nt=="string")return r(nt,ge);var ke={}.toString.call(nt).slice(8,-1);return ke==="Object"&&nt.constructor&&(ke=nt.constructor.name),ke==="Map"||ke==="Set"?Array.from(nt):ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ke)?r(nt,ge):void 0}}var ze=100,Fe={},it=function(){Fe.previousActiveElement instanceof HTMLElement?(Fe.previousActiveElement.focus(),Fe.previousActiveElement=null):document.body&&document.body.focus()},ie=function(ge){return new Promise(function(ke){if(!ge)return ke();var rt=window.scrollX,Kt=window.scrollY;Fe.restoreFocusTimeout=setTimeout(function(){it(),ke()},ze),window.scrollTo(rt,Kt)})},le="swal2-",fe=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],be=fe.reduce(function(nt,ge){return nt[ge]=le+ge,nt},{}),He=["success","warning","info","question","error"],Je=He.reduce(function(nt,ge){return nt[ge]=le+ge,nt},{}),tt="SweetAlert2:",st=function(ge){return ge.charAt(0).toUpperCase()+ge.slice(1)},Ct=function(ge){console.warn("".concat(tt," ").concat(Be(ge)==="object"?ge.join(" "):ge))},Ue=function(ge){console.error("".concat(tt," ").concat(ge))},Ft=[],Zt=function(ge){Ft.includes(ge)||(Ft.push(ge),Ct(ge))},fr=function(ge){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Zt('"'.concat(ge,'" is deprecated and will be removed in the next major release.').concat(ke?' Use "'.concat(ke,'" instead.'):""))},Ye=function(ge){return typeof ge=="function"?ge():ge},Re=function(ge){return ge&&typeof ge.toPromise=="function"},hr=function(ge){return Re(ge)?ge.toPromise():Promise.resolve(ge)},Ut=function(ge){return ge&&Promise.resolve(ge)===ge},vt=function(){return document.body.querySelector(".".concat(be.container))},Yt=function(ge){var ke=vt();return ke?ke.querySelector(ge):null},ar=function(ge){return Yt(".".concat(ge))},nr=function(){return ar(be.popup)},Fr=function(){return ar(be.icon)},Gr=function(){return ar(be["icon-content"])},Ir=function(){return ar(be.title)},cn=function(){return ar(be["html-container"])},Sn=function(){return ar(be.image)},En=function(){return ar(be["progress-steps"])},an=function(){return ar(be["validation-message"])},lr=function(){return Yt(".".concat(be.actions," .").concat(be.confirm))},Xt=function(){return Yt(".".concat(be.actions," .").concat(be.cancel))},qr=function(){return Yt(".".concat(be.actions," .").concat(be.deny))},Kr=function(){return ar(be["input-label"])},kn=function(){return Yt(".".concat(be.loader))},mn=function(){return ar(be.actions)},Un=function(){return ar(be.footer)},Hi=function(){return ar(be["timer-progress-bar"])},Gn=function(){return ar(be.close)},ti=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,si=function(){var ge=nr();if(!ge)return[];var ke=ge.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),rt=Array.from(ke).sort(function(Kn,Ei){var ki=parseInt(Kn.getAttribute("tabindex")||"0"),Qs=parseInt(Ei.getAttribute("tabindex")||"0");return ki>Qs?1:ki<Qs?-1:0}),Kt=ge.querySelectorAll(ti),Qr=Array.from(Kt).filter(function(Kn){return Kn.getAttribute("tabindex")!=="-1"});return _e(new Set(rt.concat(Qr))).filter(function(Kn){return Tr(Kn)})},xi=function(){return un(document.body,be.shown)&&!un(document.body,be["toast-shown"])&&!un(document.body,be["no-backdrop"])},Bn=function(){var ge=nr();return ge?un(ge,be.toast):!1},Zr=function(){var ge=nr();return ge?ge.hasAttribute("data-loading"):!1},Nr=function(ge,ke){if(ge.textContent="",ke){var rt=new DOMParser,Kt=rt.parseFromString(ke,"text/html"),Qr=Kt.querySelector("head");Qr&&Array.from(Qr.childNodes).forEach(function(Ei){ge.appendChild(Ei)});var Kn=Kt.querySelector("body");Kn&&Array.from(Kn.childNodes).forEach(function(Ei){Ei instanceof HTMLVideoElement||Ei instanceof HTMLAudioElement?ge.appendChild(Ei.cloneNode(!0)):ge.appendChild(Ei)})}},un=function(ge,ke){if(!ke)return!1;for(var rt=ke.split(/\s+/),Kt=0;Kt<rt.length;Kt++)if(!ge.classList.contains(rt[Kt]))return!1;return!0},ri=function(ge,ke){Array.from(ge.classList).forEach(function(rt){!Object.values(be).includes(rt)&&!Object.values(Je).includes(rt)&&!Object.values(ke.showClass||{}).includes(rt)&&ge.classList.remove(rt)})},Hn=function(ge,ke,rt){if(ri(ge,ke),!!ke.customClass){var Kt=ke.customClass[rt];if(Kt){if(typeof Kt!="string"&&!Kt.forEach){Ct("Invalid type of customClass.".concat(rt,'! Expected string or iterable object, got "').concat(Be(Kt),'"'));return}ht(ge,Kt)}}},ir=function(ge,ke){if(!ke)return null;switch(ke){case"select":case"textarea":case"file":return ge.querySelector(".".concat(be.popup," > .").concat(be[ke]));case"checkbox":return ge.querySelector(".".concat(be.popup," > .").concat(be.checkbox," input"));case"radio":return ge.querySelector(".".concat(be.popup," > .").concat(be.radio," input:checked"))||ge.querySelector(".".concat(be.popup," > .").concat(be.radio," input:first-child"));case"range":return ge.querySelector(".".concat(be.popup," > .").concat(be.range," input"));default:return ge.querySelector(".".concat(be.popup," > .").concat(be.input))}},We=function(ge){if(ge.focus(),ge.type!=="file"){var ke=ge.value;ge.value="",ge.value=ke}},qe=function(ge,ke,rt){!ge||!ke||(typeof ke=="string"&&(ke=ke.split(/\s+/).filter(Boolean)),ke.forEach(function(Kt){Array.isArray(ge)?ge.forEach(function(Qr){rt?Qr.classList.add(Kt):Qr.classList.remove(Kt)}):rt?ge.classList.add(Kt):ge.classList.remove(Kt)}))},ht=function(ge,ke){qe(ge,ke,!0)},It=function(ge,ke){qe(ge,ke,!1)},wt=function(ge,ke){for(var rt=Array.from(ge.children),Kt=0;Kt<rt.length;Kt++){var Qr=rt[Kt];if(Qr instanceof HTMLElement&&un(Qr,ke))return Qr}},kt=function(ge,ke,rt){rt==="".concat(parseInt(rt))&&(rt=parseInt(rt)),rt||parseInt(rt)===0?ge.style.setProperty(ke,typeof rt=="number"?"".concat(rt,"px"):rt):ge.style.removeProperty(ke)},Wt=function(ge){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";ge&&(ge.style.display=ke)},Ot=function(ge){ge&&(ge.style.display="none")},pr=function(ge){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";ge&&new MutationObserver(function(){Ar(ge,ge.innerHTML,ke)}).observe(ge,{childList:!0,subtree:!0})},xr=function(ge,ke,rt,Kt){var Qr=ge.querySelector(ke);Qr&&Qr.style.setProperty(rt,Kt)},Ar=function(ge,ke){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";ke?Wt(ge,rt):Ot(ge)},Tr=function(ge){return!!(ge&&(ge.offsetWidth||ge.offsetHeight||ge.getClientRects().length))},nn=function(){return!Tr(lr())&&!Tr(qr())&&!Tr(Xt())},on=function(ge){return ge.scrollHeight>ge.clientHeight},_n=function(ge){var ke=window.getComputedStyle(ge),rt=parseFloat(ke.getPropertyValue("animation-duration")||"0"),Kt=parseFloat(ke.getPropertyValue("transition-duration")||"0");return rt>0||Kt>0},Dn=function(ge){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,rt=Hi();rt&&Tr(rt)&&(ke&&(rt.style.transition="none",rt.style.width="100%"),setTimeout(function(){rt.style.transition="width ".concat(ge/1e3,"s linear"),rt.style.width="0%"},10))},qn=function(){var ge=Hi();if(ge){var ke=parseInt(window.getComputedStyle(ge).width);ge.style.removeProperty("transition"),ge.style.width="100%";var rt=parseInt(window.getComputedStyle(ge).width),Kt=ke/rt*100;ge.style.width="".concat(Kt,"%")}},$n=function(){return typeof window>"u"||typeof document>"u"},Ni=`
 <div aria-labelledby="`.concat(be.title,'" aria-describedby="').concat(be["html-container"],'" class="').concat(be.popup,`" tabindex="-1">
   <button type="button" class="`).concat(be.close,`"></button>
   <ul class="`).concat(be["progress-steps"],`"></ul>
   <div class="`).concat(be.icon,`"></div>
   <img class="`).concat(be.image,`" />
   <h2 class="`).concat(be.title,'" id="').concat(be.title,`"></h2>
   <div class="`).concat(be["html-container"],'" id="').concat(be["html-container"],`"></div>
   <input class="`).concat(be.input,'" id="').concat(be.input,`" />
   <input type="file" class="`).concat(be.file,`" />
   <div class="`).concat(be.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(be.select,'" id="').concat(be.select,`"></select>
   <div class="`).concat(be.radio,`"></div>
   <label class="`).concat(be.checkbox,`">
     <input type="checkbox" id="`).concat(be.checkbox,`" />
     <span class="`).concat(be.label,`"></span>
   </label>
   <textarea class="`).concat(be.textarea,'" id="').concat(be.textarea,`"></textarea>
   <div class="`).concat(be["validation-message"],'" id="').concat(be["validation-message"],`"></div>
   <div class="`).concat(be.actions,`">
     <div class="`).concat(be.loader,`"></div>
     <button type="button" class="`).concat(be.confirm,`"></button>
     <button type="button" class="`).concat(be.deny,`"></button>
     <button type="button" class="`).concat(be.cancel,`"></button>
   </div>
   <div class="`).concat(be.footer,`"></div>
   <div class="`).concat(be["timer-progress-bar-container"],`">
     <div class="`).concat(be["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),Vi=function(){var ge=vt();return ge?(ge.remove(),It([document.documentElement,document.body],[be["no-backdrop"],be["toast-shown"],be["has-column"]]),!0):!1},Wn=function(){Fe.currentInstance.resetValidationMessage()},Ki=function(){var ge=nr(),ke=wt(ge,be.input),rt=wt(ge,be.file),Kt=ge.querySelector(".".concat(be.range," input")),Qr=ge.querySelector(".".concat(be.range," output")),Kn=wt(ge,be.select),Ei=ge.querySelector(".".concat(be.checkbox," input")),ki=wt(ge,be.textarea);ke.oninput=Wn,rt.onchange=Wn,Kn.onchange=Wn,Ei.onchange=Wn,ki.oninput=Wn,Kt.oninput=function(){Wn(),Qr.value=Kt.value},Kt.onchange=function(){Wn(),Qr.value=Kt.value}},Cs=function(ge){return typeof ge=="string"?document.querySelector(ge):ge},ro=function(ge){var ke=nr();ke.setAttribute("role",ge.toast?"alert":"dialog"),ke.setAttribute("aria-live",ge.toast?"polite":"assertive"),ge.toast||ke.setAttribute("aria-modal","true")},Fs=function(ge){window.getComputedStyle(ge).direction==="rtl"&&ht(vt(),be.rtl)},es=function(ge){var ke=Vi();if($n()){Ue("SweetAlert2 requires document to initialize");return}var rt=document.createElement("div");rt.className=be.container,ke&&ht(rt,be["no-transition"]),Nr(rt,Ni);var Kt=Cs(ge.target);Kt.appendChild(rt),ro(ge),Fs(Kt),Ki()},Sa=function(ge,ke){ge instanceof HTMLElement?ke.appendChild(ge):Be(ge)==="object"?Ba(ge,ke):ge&&Nr(ke,ge)},Ba=function(ge,ke){ge.jquery?tl(ke,ge):Nr(ke,ge.toString())},tl=function(ge,ke){if(ge.textContent="",0 in ke)for(var rt=0;rt in ke;rt++)ge.appendChild(ke[rt].cloneNode(!0));else ge.appendChild(ke.cloneNode(!0))},go=function(){if($n())return!1;var nt=document.createElement("div");return typeof nt.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof nt.style.animation<"u"?"animationend":!1}(),Sl=function(ge,ke){var rt=mn(),Kt=kn();!rt||!Kt||(!ke.showConfirmButton&&!ke.showDenyButton&&!ke.showCancelButton?Ot(rt):Wt(rt),Hn(rt,ke,"actions"),sa(rt,Kt,ke),Nr(Kt,ke.loaderHtml||""),Hn(Kt,ke,"loader"))};function sa(nt,ge,ke){var rt=lr(),Kt=qr(),Qr=Xt();!rt||!Kt||!Qr||(Gi(rt,"confirm",ke),Gi(Kt,"deny",ke),Gi(Qr,"cancel",ke),Ha(rt,Kt,Qr,ke),ke.reverseButtons&&(ke.toast?(nt.insertBefore(Qr,rt),nt.insertBefore(Kt,rt)):(nt.insertBefore(Qr,ge),nt.insertBefore(Kt,ge),nt.insertBefore(rt,ge))))}function Ha(nt,ge,ke,rt){if(!rt.buttonsStyling){It([nt,ge,ke],be.styled);return}ht([nt,ge,ke],be.styled),rt.confirmButtonColor&&(nt.style.backgroundColor=rt.confirmButtonColor,ht(nt,be["default-outline"])),rt.denyButtonColor&&(ge.style.backgroundColor=rt.denyButtonColor,ht(ge,be["default-outline"])),rt.cancelButtonColor&&(ke.style.backgroundColor=rt.cancelButtonColor,ht(ke,be["default-outline"]))}function Gi(nt,ge,ke){var rt=st(ge);Ar(nt,ke["show".concat(rt,"Button")],"inline-block"),Nr(nt,ke["".concat(ge,"ButtonText")]||""),nt.setAttribute("aria-label",ke["".concat(ge,"ButtonAriaLabel")]||""),nt.className=be[ge],Hn(nt,ke,"".concat(ge,"Button"))}var Fc=function(ge,ke){var rt=Gn();rt&&(Nr(rt,ke.closeButtonHtml||""),Hn(rt,ke,"closeButton"),Ar(rt,ke.showCloseButton),rt.setAttribute("aria-label",ke.closeButtonAriaLabel||""))},nc=function(ge,ke){var rt=vt();rt&&(Ul(rt,ke.backdrop),Xo(rt,ke.position),Pa(rt,ke.grow),Hn(rt,ke,"container"))};function Ul(nt,ge){typeof ge=="string"?nt.style.background=ge:ge||ht([document.documentElement,document.body],be["no-backdrop"])}function Xo(nt,ge){ge&&(ge in be?ht(nt,be[ge]):(Ct('The "position" parameter is not valid, defaulting to "center"'),ht(nt,be.center)))}function Pa(nt,ge){ge&&ht(nt,be["grow-".concat(ge)])}var mi={innerParams:new WeakMap,domCache:new WeakMap},So=["input","file","range","select","radio","checkbox","textarea"],vs=function(ge,ke){var rt=nr();if(rt){var Kt=mi.innerParams.get(ge),Qr=!Kt||ke.input!==Kt.input;So.forEach(function(Kn){var Ei=wt(rt,be[Kn]);Ei&&(Cc(Kn,ke.inputAttributes),Ei.className=be[Kn],Qr&&Ot(Ei))}),ke.input&&(Qr&&Bl(ke),ae(ke))}},Bl=function(ge){if(ge.input){if(!tr[ge.input]){Ue("Unexpected type of input! Expected ".concat(Object.keys(tr).join(" | "),', got "').concat(ge.input,'"'));return}var ke=Ht(ge.input);if(ke){var rt=tr[ge.input](ke,ge);Wt(ke),ge.inputAutoFocus&&setTimeout(function(){We(rt)})}}},Nc=function(ge){for(var ke=0;ke<ge.attributes.length;ke++){var rt=ge.attributes[ke].name;["id","type","value","style"].includes(rt)||ge.removeAttribute(rt)}},Cc=function(ge,ke){var rt=nr();if(rt){var Kt=ir(rt,ge);if(Kt){Nc(Kt);for(var Qr in ke)Kt.setAttribute(Qr,ke[Qr])}}},ae=function(ge){if(ge.input){var ke=Ht(ge.input);ke&&Hn(ke,ge,"input")}},Oe=function(ge,ke){!ge.placeholder&&ke.inputPlaceholder&&(ge.placeholder=ke.inputPlaceholder)},At=function(ge,ke,rt){if(rt.inputLabel){var Kt=document.createElement("label"),Qr=be["input-label"];Kt.setAttribute("for",ge.id),Kt.className=Qr,Be(rt.customClass)==="object"&&ht(Kt,rt.customClass.inputLabel),Kt.innerText=rt.inputLabel,ke.insertAdjacentElement("beforebegin",Kt)}},Ht=function(ge){var ke=nr();if(ke)return wt(ke,be[ge]||be.input)},er=function(ge,ke){["string","number"].includes(Be(ke))?ge.value="".concat(ke):Ut(ke)||Ct('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(Be(ke),'"'))},tr={};tr.text=tr.email=tr.password=tr.number=tr.tel=tr.url=tr.search=tr.date=tr["datetime-local"]=tr.time=tr.week=tr.month=function(nt,ge){return er(nt,ge.inputValue),At(nt,nt,ge),Oe(nt,ge),nt.type=ge.input,nt},tr.file=function(nt,ge){return At(nt,nt,ge),Oe(nt,ge),nt},tr.range=function(nt,ge){var ke=nt.querySelector("input"),rt=nt.querySelector("output");return er(ke,ge.inputValue),ke.type=ge.input,er(rt,ge.inputValue),At(ke,nt,ge),nt},tr.select=function(nt,ge){if(nt.textContent="",ge.inputPlaceholder){var ke=document.createElement("option");Nr(ke,ge.inputPlaceholder),ke.value="",ke.disabled=!0,ke.selected=!0,nt.appendChild(ke)}return At(nt,nt,ge),nt},tr.radio=function(nt){return nt.textContent="",nt},tr.checkbox=function(nt,ge){var ke=ir(nr(),"checkbox");ke.value="1",ke.checked=!!ge.inputValue;var rt=nt.querySelector("span");return Nr(rt,ge.inputPlaceholder),ke},tr.textarea=function(nt,ge){er(nt,ge.inputValue),Oe(nt,ge),At(nt,nt,ge);var ke=function(Kt){return parseInt(window.getComputedStyle(Kt).marginLeft)+parseInt(window.getComputedStyle(Kt).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var rt=parseInt(window.getComputedStyle(nr()).width),Kt=function(){if(document.body.contains(nt)){var Kn=nt.offsetWidth+ke(nt);Kn>rt?nr().style.width="".concat(Kn,"px"):kt(nr(),"width",ge.width)}};new MutationObserver(Kt).observe(nt,{attributes:!0,attributeFilter:["style"]})}}),nt};var _r=function(ge,ke){var rt=cn();rt&&(pr(rt),Hn(rt,ke,"htmlContainer"),ke.html?(Sa(ke.html,rt),Wt(rt,"block")):ke.text?(rt.textContent=ke.text,Wt(rt,"block")):Ot(rt),vs(ge,ke))},fn=function(ge,ke){var rt=Un();rt&&(pr(rt),Ar(rt,ke.footer,"block"),ke.footer&&Sa(ke.footer,rt),Hn(rt,ke,"footer"))},pn=function(ge,ke){var rt=mi.innerParams.get(ge),Kt=Fr();if(Kt){if(rt&&ke.icon===rt.icon){oi(Kt,ke),Nn(Kt,ke);return}if(!ke.icon&&!ke.iconHtml){Ot(Kt);return}if(ke.icon&&Object.keys(Je).indexOf(ke.icon)===-1){Ue('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(ke.icon,'"')),Ot(Kt);return}Wt(Kt),oi(Kt,ke),Nn(Kt,ke),ht(Kt,ke.showClass&&ke.showClass.icon)}},Nn=function(ge,ke){for(var rt=0,Kt=Object.entries(Je);rt<Kt.length;rt++){var Qr=Z(Kt[rt],2),Kn=Qr[0],Ei=Qr[1];ke.icon!==Kn&&It(ge,Ei)}ht(ge,ke.icon&&Je[ke.icon]),Pi(ge,ke),Mn(),Hn(ge,ke,"icon")},Mn=function(){var ge=nr();if(ge)for(var ke=window.getComputedStyle(ge).getPropertyValue("background-color"),rt=ge.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),Kt=0;Kt<rt.length;Kt++)rt[Kt].style.backgroundColor=ke},Xr=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Qn=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,oi=function(ge,ke){if(!(!ke.icon&&!ke.iconHtml)){var rt=ge.innerHTML,Kt="";if(ke.iconHtml)Kt=Sr(ke.iconHtml);else if(ke.icon==="success")Kt=Xr,rt=rt.replace(/ style=".*?"/g,"");else if(ke.icon==="error")Kt=Qn;else if(ke.icon){var Qr={question:"?",warning:"!",info:"i"};Kt=Sr(Qr[ke.icon])}rt.trim()!==Kt.trim()&&Nr(ge,Kt)}},Pi=function(ge,ke){if(ke.iconColor){ge.style.color=ke.iconColor,ge.style.borderColor=ke.iconColor;for(var rt=0,Kt=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];rt<Kt.length;rt++){var Qr=Kt[rt];xr(ge,Qr,"background-color",ke.iconColor)}xr(ge,".swal2-success-ring","border-color",ke.iconColor)}},Sr=function(ge){return'<div class="'.concat(be["icon-content"],'">').concat(ge,"</div>")},ln=function(ge,ke){var rt=Sn();if(rt){if(!ke.imageUrl){Ot(rt);return}Wt(rt,""),rt.setAttribute("src",ke.imageUrl),rt.setAttribute("alt",ke.imageAlt||""),kt(rt,"width",ke.imageWidth),kt(rt,"height",ke.imageHeight),rt.className=be.image,Hn(rt,ke,"image")}},Jn=function(ge,ke){var rt=vt(),Kt=nr();if(!(!rt||!Kt)){if(ke.toast){kt(rt,"width",ke.width),Kt.style.width="100%";var Qr=kn();Qr&&Kt.insertBefore(Qr,Fr())}else kt(Kt,"width",ke.width);kt(Kt,"padding",ke.padding),ke.color&&(Kt.style.color=ke.color),ke.background&&(Kt.style.background=ke.background),Ot(an()),Bi(Kt,ke)}},Bi=function(ge,ke){var rt=ke.showClass||{};ge.className="".concat(be.popup," ").concat(Tr(ge)?rt.popup:""),ke.toast?(ht([document.documentElement,document.body],be["toast-shown"]),ht(ge,be.toast)):ht(ge,be.modal),Hn(ge,ke,"popup"),typeof ke.customClass=="string"&&ht(ge,ke.customClass),ke.icon&&ht(ge,be["icon-".concat(ke.icon)])},Ns=function(ge,ke){var rt=En();if(rt){var Kt=ke.progressSteps,Qr=ke.currentProgressStep;if(!Kt||Kt.length===0||Qr===void 0){Ot(rt);return}Wt(rt),rt.textContent="",Qr>=Kt.length&&Ct("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Kt.forEach(function(Kn,Ei){var ki=Ks(Kn);if(rt.appendChild(ki),Ei===Qr&&ht(ki,be["active-progress-step"]),Ei!==Kt.length-1){var Qs=Ro(ke);rt.appendChild(Qs)}})}},Ks=function(ge){var ke=document.createElement("li");return ht(ke,be["progress-step"]),Nr(ke,ge),ke},Ro=function(ge){var ke=document.createElement("li");return ht(ke,be["progress-step-line"]),ge.progressStepsDistance&&kt(ke,"width",ge.progressStepsDistance),ke},yn=function(ge,ke){var rt=Ir();rt&&(pr(rt),Ar(rt,ke.title||ke.titleText,"block"),ke.title&&Sa(ke.title,rt),ke.titleText&&(rt.innerText=ke.titleText),Hn(rt,ke,"title"))},Yn=function(ge,ke){Jn(ge,ke),nc(ge,ke),Ns(ge,ke),pn(ge,ke),ln(ge,ke),yn(ge,ke),Fc(ge,ke),_r(ge,ke),Sl(ge,ke),fn(ge,ke);var rt=nr();typeof ke.didRender=="function"&&rt&&ke.didRender(rt)},Li=function(){return Tr(nr())},da=function(){var ge;return(ge=lr())===null||ge===void 0?void 0:ge.click()},Ms=function(){var ge;return(ge=qr())===null||ge===void 0?void 0:ge.click()},fi=function(){var ge;return(ge=Xt())===null||ge===void 0?void 0:ge.click()},Po=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),zl=function(ge){ge.keydownTarget&&ge.keydownHandlerAdded&&(ge.keydownTarget.removeEventListener("keydown",ge.keydownHandler,{capture:ge.keydownListenerCapture}),ge.keydownHandlerAdded=!1)},oa=function(ge,ke,rt){zl(ge),ke.toast||(ge.keydownHandler=function(Kt){return Ql(ke,Kt,rt)},ge.keydownTarget=ke.keydownListenerCapture?window:nr(),ge.keydownListenerCapture=ke.keydownListenerCapture,ge.keydownTarget.addEventListener("keydown",ge.keydownHandler,{capture:ge.keydownListenerCapture}),ge.keydownHandlerAdded=!0)},yo=function(ge,ke){var rt,Kt=si();if(Kt.length){ge=ge+ke,ge===Kt.length?ge=0:ge===-1&&(ge=Kt.length-1),Kt[ge].focus();return}(rt=nr())===null||rt===void 0||rt.focus()},ps=["ArrowRight","ArrowDown"],$c=["ArrowLeft","ArrowUp"],Ql=function(ge,ke,rt){ge&&(ke.isComposing||ke.keyCode===229||(ge.stopKeydownPropagation&&ke.stopPropagation(),ke.key==="Enter"?Hl(ke,ge):ke.key==="Tab"?Ma(ke):[].concat(ps,$c).includes(ke.key)?qo(ke.key):ke.key==="Escape"&&Xs(ke,ge,rt)))},Hl=function(ge,ke){if(Ye(ke.allowEnterKey)){var rt=ir(nr(),ke.input);if(ge.target&&rt&&ge.target instanceof HTMLElement&&ge.target.outerHTML===rt.outerHTML){if(["textarea","file"].includes(ke.input))return;da(),ge.preventDefault()}}},Ma=function(ge){for(var ke=ge.target,rt=si(),Kt=-1,Qr=0;Qr<rt.length;Qr++)if(ke===rt[Qr]){Kt=Qr;break}ge.shiftKey?yo(Kt,-1):yo(Kt,1),ge.stopPropagation(),ge.preventDefault()},qo=function(ge){var ke=mn(),rt=lr(),Kt=qr(),Qr=Xt();if(!(!ke||!rt||!Kt||!Qr)){var Kn=[rt,Kt,Qr];if(!(document.activeElement instanceof HTMLElement&&!Kn.includes(document.activeElement))){var Ei=ps.includes(ge)?"nextElementSibling":"previousElementSibling",ki=document.activeElement;if(ki){for(var Qs=0;Qs<ke.children.length;Qs++){if(ki=ki[Ei],!ki)return;if(ki instanceof HTMLButtonElement&&Tr(ki))break}ki instanceof HTMLButtonElement&&ki.focus()}}}},Xs=function(ge,ke,rt){Ye(ke.allowEscapeKey)&&(ge.preventDefault(),rt(Po.esc))},Bo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Ys=function(){var ge=vt(),ke=Array.from(document.body.children);ke.forEach(function(rt){rt.contains(ge)||(rt.hasAttribute("aria-hidden")&&rt.setAttribute("data-previous-aria-hidden",rt.getAttribute("aria-hidden")||""),rt.setAttribute("aria-hidden","true"))})},vo=function(){var ge=Array.from(document.body.children);ge.forEach(function(ke){ke.hasAttribute("data-previous-aria-hidden")?(ke.setAttribute("aria-hidden",ke.getAttribute("data-previous-aria-hidden")||""),ke.removeAttribute("data-previous-aria-hidden")):ke.removeAttribute("aria-hidden")})},fa=typeof window<"u"&&!!window.GestureEvent,xs=function(){if(fa&&!un(document.body,be.iosfix)){var ge=document.body.scrollTop;document.body.style.top="".concat(ge*-1,"px"),ht(document.body,be.iosfix),no()}},no=function(){var ge=vt();if(ge){var ke;ge.ontouchstart=function(rt){ke=$o(rt)},ge.ontouchmove=function(rt){ke&&(rt.preventDefault(),rt.stopPropagation())}}},$o=function(ge){var ke=ge.target,rt=vt(),Kt=cn();return!rt||!Kt||Eo(ge)||ic(ge)?!1:ke===rt||!on(rt)&&ke instanceof HTMLElement&&ke.tagName!=="INPUT"&&ke.tagName!=="TEXTAREA"&&!(on(Kt)&&Kt.contains(ke))},Eo=function(ge){return ge.touches&&ge.touches.length&&ge.touches[0].touchType==="stylus"},ic=function(ge){return ge.touches&&ge.touches.length>1},aa=function(){if(un(document.body,be.iosfix)){var ge=parseInt(document.body.style.top,10);It(document.body,be.iosfix),document.body.style.top="",document.body.scrollTop=ge*-1}},rl=function(){var ge=document.createElement("div");ge.className=be["scrollbar-measure"],document.body.appendChild(ge);var ke=ge.getBoundingClientRect().width-ge.clientWidth;return document.body.removeChild(ge),ke},Uo=null,Va=function(ge){Uo===null&&(document.body.scrollHeight>window.innerHeight||ge==="scroll")&&(Uo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Uo+rl(),"px"))},Vl=function(){Uo!==null&&(document.body.style.paddingRight="".concat(Uo,"px"),Uo=null)};function Wo(nt,ge,ke,rt){Bn()?Ke(nt,rt):(ie(ke).then(function(){return Ke(nt,rt)}),zl(Fe)),fa?(ge.setAttribute("style","display:none !important"),ge.removeAttribute("class"),ge.innerHTML=""):ge.remove(),xi()&&(Vl(),aa(),vo()),yu()}function yu(){It([document.documentElement,document.body],[be.shown,be["height-auto"],be["no-backdrop"],be["toast-shown"]])}function pa(nt){nt=ql(nt);var ge=Bo.swalPromiseResolve.get(this),ke=xo(this);this.isAwaitingPromise?nt.isDismissed||(_o(this),ge(nt)):ke&&ge(nt)}var xo=function(ge){var ke=nr();if(!ke)return!1;var rt=mi.innerParams.get(ge);if(!rt||un(ke,rt.hideClass.popup))return!1;It(ke,rt.showClass.popup),ht(ke,rt.hideClass.popup);var Kt=vt();return It(Kt,rt.showClass.backdrop),ht(Kt,rt.hideClass.backdrop),k(ge,ke,rt),!0};function Gl(nt){var ge=Bo.swalPromiseReject.get(this);_o(this),ge&&ge(nt)}var _o=function(ge){ge.isAwaitingPromise&&(delete ge.isAwaitingPromise,mi.innerParams.get(ge)||ge._destroy())},ql=function(ge){return typeof ge>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},ge)},k=function(ge,ke,rt){var Kt=vt(),Qr=go&&_n(ke);typeof rt.willClose=="function"&&rt.willClose(ke),Qr?pe(ge,ke,Kt,rt.returnFocus,rt.didClose):Wo(ge,Kt,rt.returnFocus,rt.didClose)},pe=function(ge,ke,rt,Kt,Qr){go&&(Fe.swalCloseEventFinishedCallback=Wo.bind(null,ge,rt,Kt,Qr),ke.addEventListener(go,function(Kn){Kn.target===ke&&(Fe.swalCloseEventFinishedCallback(),delete Fe.swalCloseEventFinishedCallback)}))},Ke=function(ge,ke){setTimeout(function(){typeof ke=="function"&&ke.bind(ge.params)(),ge._destroy&&ge._destroy()})},ot=function(ge){var ke=nr();if(ke||new co,ke=nr(),!!ke){var rt=kn();Bn()?Ot(Fr()):St(ke,ge),Wt(rt),ke.setAttribute("data-loading","true"),ke.setAttribute("aria-busy","true"),ke.focus()}},St=function(ge,ke){var rt=mn(),Kt=kn();!rt||!Kt||(!ke&&Tr(lr())&&(ke=lr()),Wt(rt),ke&&(Ot(ke),Kt.setAttribute("data-button-to-replace",ke.className),rt.insertBefore(Kt,ke)),ht([ge,rt],be.loading))},$t=function(ge,ke){ke.input==="select"||ke.input==="radio"?Wr(ge,ke):["text","email","number","tel","textarea"].some(function(rt){return rt===ke.input})&&(Re(ke.inputValue)||Ut(ke.inputValue))&&(ot(lr()),Dr(ge,ke))},gr=function(ge,ke){var rt=ge.getInput();if(!rt)return null;switch(ke.input){case"checkbox":return $r(rt);case"radio":return An(rt);case"file":return Tn(rt);default:return ke.inputAutoTrim?rt.value.trim():rt.value}},$r=function(ge){return ge.checked?1:0},An=function(ge){return ge.checked?ge.value:null},Tn=function(ge){return ge.files&&ge.files.length?ge.getAttribute("multiple")!==null?ge.files:ge.files[0]:null},Wr=function(ge,ke){var rt=nr();if(rt){var Kt=function(Kn){ke.input==="select"?Ci(rt,Fi(Kn),ke):ke.input==="radio"&&gn(rt,Fi(Kn),ke)};Re(ke.inputOptions)||Ut(ke.inputOptions)?(ot(lr()),hr(ke.inputOptions).then(function(Qr){ge.hideLoading(),Kt(Qr)})):Be(ke.inputOptions)==="object"?Kt(ke.inputOptions):Ue("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(Be(ke.inputOptions)))}},Dr=function(ge,ke){var rt=ge.getInput();rt&&(Ot(rt),hr(ke.inputValue).then(function(Kt){rt.value=ke.input==="number"?"".concat(parseFloat(Kt)||0):"".concat(Kt),Wt(rt),rt.focus(),ge.hideLoading()}).catch(function(Kt){Ue("Error in inputValue promise: ".concat(Kt)),rt.value="",Wt(rt),rt.focus(),ge.hideLoading()}))};function Ci(nt,ge,ke){var rt=wt(nt,be.select);if(rt){var Kt=function(Kn,Ei,ki){var Qs=document.createElement("option");Qs.value=ki,Nr(Qs,Ei),Qs.selected=_s(ki,ke.inputValue),Kn.appendChild(Qs)};ge.forEach(function(Qr){var Kn=Qr[0],Ei=Qr[1];if(Array.isArray(Ei)){var ki=document.createElement("optgroup");ki.label=Kn,ki.disabled=!1,rt.appendChild(ki),Ei.forEach(function(Qs){return Kt(ki,Qs[1],Qs[0])})}else Kt(rt,Ei,Kn)}),rt.focus()}}function gn(nt,ge,ke){var rt=wt(nt,be.radio);if(rt){ge.forEach(function(Qr){var Kn=Qr[0],Ei=Qr[1],ki=document.createElement("input"),Qs=document.createElement("label");ki.type="radio",ki.name=be.radio,ki.value=Kn,_s(Kn,ke.inputValue)&&(ki.checked=!0);var Oc=document.createElement("span");Nr(Oc,Ei),Oc.className=be.label,Qs.appendChild(ki),Qs.appendChild(Oc),rt.appendChild(Qs)});var Kt=rt.querySelectorAll("input");Kt.length&&Kt[0].focus()}}var Fi=function(ge){var ke=[];return ge instanceof Map?ge.forEach(function(rt,Kt){var Qr=rt;Be(Qr)==="object"&&(Qr=Fi(Qr)),ke.push([Kt,Qr])}):Object.keys(ge).forEach(function(rt){var Kt=ge[rt];Be(Kt)==="object"&&(Kt=Fi(Kt)),ke.push([rt,Kt])}),ke},_s=function(ge,ke){return!!ke&&ke.toString()===ge.toString()},vn=void 0,ao=function(ge){var ke=mi.innerParams.get(ge);ge.disableButtons(),ke.input?nl(ge,"confirm"):Zo(ge,!0)},Zs=function(ge){var ke=mi.innerParams.get(ge);ge.disableButtons(),ke.returnInputValueOnDeny?nl(ge,"deny"):io(ge,!1)},Yo=function(ge,ke){ge.disableButtons(),ke(Po.cancel)},nl=function(ge,ke){var rt=mi.innerParams.get(ge);if(!rt.input){Ue('The "input" parameter is needed to be set when using returnInputValueOn'.concat(st(ke)));return}var Kt=ge.getInput(),Qr=gr(ge,rt);rt.inputValidator?il(ge,Qr,ke):Kt&&!Kt.checkValidity()?(ge.enableButtons(),ge.showValidationMessage(rt.validationMessage||Kt.validationMessage)):ke==="deny"?io(ge,Qr):Zo(ge,Qr)},il=function(ge,ke,rt){var Kt=mi.innerParams.get(ge);ge.disableInput();var Qr=Promise.resolve().then(function(){return hr(Kt.inputValidator(ke,Kt.validationMessage))});Qr.then(function(Kn){ge.enableButtons(),ge.enableInput(),Kn?ge.showValidationMessage(Kn):rt==="deny"?io(ge,ke):Zo(ge,ke)})},io=function(ge,ke){var rt=mi.innerParams.get(ge||vn);if(rt.showLoaderOnDeny&&ot(qr()),rt.preDeny){ge.isAwaitingPromise=!0;var Kt=Promise.resolve().then(function(){return hr(rt.preDeny(ke,rt.validationMessage))});Kt.then(function(Qr){Qr===!1?(ge.hideLoading(),_o(ge)):ge.close({isDenied:!0,value:typeof Qr>"u"?ke:Qr})}).catch(function(Qr){return Ea(ge||vn,Qr)})}else ge.close({isDenied:!0,value:ke})},Ga=function(ge,ke){ge.close({isConfirmed:!0,value:ke})},Ea=function(ge,ke){ge.rejectPromise(ke)},Zo=function(ge,ke){var rt=mi.innerParams.get(ge||vn);if(rt.showLoaderOnConfirm&&ot(),rt.preConfirm){ge.resetValidationMessage(),ge.isAwaitingPromise=!0;var Kt=Promise.resolve().then(function(){return hr(rt.preConfirm(ke,rt.validationMessage))});Kt.then(function(Qr){Tr(an())||Qr===!1?(ge.hideLoading(),_o(ge)):Ga(ge,typeof Qr>"u"?ke:Qr)}).catch(function(Qr){return Ea(ge||vn,Qr)})}else Ga(ge,ke)};function ja(){var nt=mi.innerParams.get(this);if(nt){var ge=mi.domCache.get(this);Ot(ge.loader),Bn()?nt.icon&&Wt(Fr()):$i(ge),It([ge.popup,ge.actions],be.loading),ge.popup.removeAttribute("aria-busy"),ge.popup.removeAttribute("data-loading"),ge.confirmButton.disabled=!1,ge.denyButton.disabled=!1,ge.cancelButton.disabled=!1}}var $i=function(ge){var ke=ge.popup.getElementsByClassName(ge.loader.getAttribute("data-button-to-replace"));ke.length?Wt(ke[0],"inline-block"):nn()&&Ot(ge.actions)};function cs(){var nt=mi.innerParams.get(this),ge=mi.domCache.get(this);return ge?ir(ge.popup,nt.input):null}function la(nt,ge,ke){var rt=mi.domCache.get(nt);ge.forEach(function(Kt){rt[Kt].disabled=ke})}function Jr(nt,ge){var ke=nr();if(!(!ke||!nt))if(nt.type==="radio")for(var rt=ke.querySelectorAll('[name="'.concat(be.radio,'"]')),Kt=0;Kt<rt.length;Kt++)rt[Kt].disabled=ge;else nt.disabled=ge}function sc(){la(this,["confirmButton","denyButton","cancelButton"],!1)}function bs(){la(this,["confirmButton","denyButton","cancelButton"],!0)}function oc(){Jr(this.getInput(),!1)}function yl(){Jr(this.getInput(),!0)}function $l(nt){var ge=mi.domCache.get(this),ke=mi.innerParams.get(this);Nr(ge.validationMessage,nt),ge.validationMessage.className=be["validation-message"],ke.customClass&&ke.customClass.validationMessage&&ht(ge.validationMessage,ke.customClass.validationMessage),Wt(ge.validationMessage);var rt=this.getInput();rt&&(rt.setAttribute("aria-invalid","true"),rt.setAttribute("aria-describedby",be["validation-message"]),We(rt),ht(rt,be.inputerror))}function js(){var nt=mi.domCache.get(this);nt.validationMessage&&Ot(nt.validationMessage);var ge=this.getInput();ge&&(ge.removeAttribute("aria-invalid"),ge.removeAttribute("aria-describedby"),It(ge,be.inputerror))}var Jo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Aa=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Pc={allowEnterKey:void 0},yr=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],jr=function(ge){return Object.prototype.hasOwnProperty.call(Jo,ge)},xn=function(ge){return Aa.indexOf(ge)!==-1},jn=function(ge){return Pc[ge]},ts=function(ge){jr(ge)||Ct('Unknown parameter "'.concat(ge,'"'))},bi=function(ge){yr.includes(ge)&&Ct('The parameter "'.concat(ge,'" is incompatible with toasts'))},As=function(ge){var ke=jn(ge);ke&&fr(ge,ke)},us=function(ge){ge.backdrop===!1&&ge.allowOutsideClick&&Ct('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var ke in ge)ts(ke),ge.toast&&bi(ke),As(ke)};function bo(nt){var ge=nr(),ke=mi.innerParams.get(this);if(!ge||un(ge,ke.hideClass.popup)){Ct("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var rt=Xi(nt),Kt=Object.assign({},ke,rt);Yn(this,Kt),mi.innerParams.set(this,Kt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,nt),writable:!1,enumerable:!0}})}var Xi=function(ge){var ke={};return Object.keys(ge).forEach(function(rt){xn(rt)?ke[rt]=ge[rt]:Ct("Invalid parameter to update: ".concat(rt))}),ke};function ks(){var nt=mi.domCache.get(this),ge=mi.innerParams.get(this);if(!ge){Us(this);return}nt.popup&&Fe.swalCloseEventFinishedCallback&&(Fe.swalCloseEventFinishedCallback(),delete Fe.swalCloseEventFinishedCallback),typeof ge.didDestroy=="function"&&ge.didDestroy(),Ss(this)}var Ss=function(ge){Us(ge),delete ge.params,delete Fe.keydownHandler,delete Fe.keydownTarget,delete Fe.currentInstance},Us=function(ge){ge.isAwaitingPromise?(Js(mi,ge),ge.isAwaitingPromise=!0):(Js(Bo,ge),Js(mi,ge),delete ge.isAwaitingPromise,delete ge.disableButtons,delete ge.enableButtons,delete ge.getInput,delete ge.disableInput,delete ge.enableInput,delete ge.hideLoading,delete ge.disableLoading,delete ge.showValidationMessage,delete ge.resetValidationMessage,delete ge.close,delete ge.closePopup,delete ge.closeModal,delete ge.closeToast,delete ge.rejectPromise,delete ge.update,delete ge._destroy)},Js=function(ge,ke){for(var rt in ge)ge[rt].delete(ke)},ea=Object.freeze({__proto__:null,_destroy:ks,close:pa,closeModal:pa,closePopup:pa,closeToast:pa,disableButtons:bs,disableInput:yl,disableLoading:ja,enableButtons:sc,enableInput:oc,getInput:cs,handleAwaitingPromise:_o,hideLoading:ja,rejectPromise:Gl,resetValidationMessage:js,showValidationMessage:$l,update:bo}),ma=function(ge,ke,rt){ge.toast?ta(ge,ke,rt):(ga(ke),hs(ke),ss(ge,ke,rt))},ta=function(ge,ke,rt){ke.popup.onclick=function(){ge&&(ra(ge)||ge.timer||ge.input)||rt(Po.close)}},ra=function(ge){return!!(ge.showConfirmButton||ge.showDenyButton||ge.showCancelButton||ge.showCloseButton)},Gs=!1,ga=function(ge){ge.popup.onmousedown=function(){ge.container.onmouseup=function(ke){ge.container.onmouseup=function(){},ke.target===ge.container&&(Gs=!0)}}},hs=function(ge){ge.container.onmousedown=function(ke){ke.target===ge.container&&ke.preventDefault(),ge.popup.onmouseup=function(rt){ge.popup.onmouseup=function(){},(rt.target===ge.popup||rt.target instanceof HTMLElement&&ge.popup.contains(rt.target))&&(Gs=!0)}}},ss=function(ge,ke,rt){ke.container.onclick=function(Kt){if(Gs){Gs=!1;return}Kt.target===ke.container&&Ye(ge.allowOutsideClick)&&rt(Po.backdrop)}},In=function(ge){return Be(ge)==="object"&&ge.jquery},gi=function(ge){return ge instanceof Element||In(ge)},lo=function(ge){var ke={};return Be(ge[0])==="object"&&!gi(ge[0])?Object.assign(ke,ge[0]):["title","html","icon"].forEach(function(rt,Kt){var Qr=ge[Kt];typeof Qr=="string"||gi(Qr)?ke[rt]=Qr:Qr!==void 0&&Ue("Unexpected type of ".concat(rt,'! Expected "string" or "Element", got ').concat(Be(Qr)))}),ke};function eo(){for(var nt=arguments.length,ge=new Array(nt),ke=0;ke<nt;ke++)ge[ke]=arguments[ke];return S(this,ge)}function ws(nt){var ge=function(ke){function rt(){return A(this,rt),u(this,rt,arguments)}return $(rt,ke),j(rt,[{key:"_main",value:function(Qr,Kn){return Le(rt,"_main",this)([Qr,Object.assign({},nt,Kn)])}}])}(this);return ge}var Yi=function(){return Fe.timeout&&Fe.timeout.getTimerLeft()},ai=function(){if(Fe.timeout)return qn(),Fe.timeout.stop()},qs=function(){if(Fe.timeout){var ge=Fe.timeout.start();return Dn(ge),ge}},sl=function(){var ge=Fe.timeout;return ge&&(ge.running?ai():qs())},ac=function(ge){if(Fe.timeout){var ke=Fe.timeout.increase(ge);return Dn(ke,!0),ke}},ol=function(){return!!(Fe.timeout&&Fe.timeout.isRunning())},qa=!1,Mc={};function lc(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Mc[nt]=this,qa||(document.body.addEventListener("click",so),qa=!0)}var so=function(ge){for(var ke=ge.target;ke&&ke!==document;ke=ke.parentNode)for(var rt in Mc){var Kt=ke.getAttribute(rt);if(Kt){Mc[rt].fire({template:Kt});return}}},zs=Object.freeze({__proto__:null,argsToParams:lo,bindClickHandler:lc,clickCancel:fi,clickConfirm:da,clickDeny:Ms,enableLoading:ot,fire:eo,getActions:mn,getCancelButton:Xt,getCloseButton:Gn,getConfirmButton:lr,getContainer:vt,getDenyButton:qr,getFocusableElements:si,getFooter:Un,getHtmlContainer:cn,getIcon:Fr,getIconContent:Gr,getImage:Sn,getInputLabel:Kr,getLoader:kn,getPopup:nr,getProgressSteps:En,getTimerLeft:Yi,getTimerProgressBar:Hi,getTitle:Ir,getValidationMessage:an,increaseTimer:ac,isDeprecatedParameter:jn,isLoading:Zr,isTimerRunning:ol,isUpdatableParameter:xn,isValidParameter:jr,isVisible:Li,mixin:ws,resumeTimer:qs,showLoading:ot,stopTimer:ai,toggleTimer:sl}),cc=function(){function nt(ge,ke){A(this,nt),this.callback=ge,this.remaining=ke,this.running=!1,this.start()}return j(nt,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(ke){var rt=this.running;return rt&&this.stop(),this.remaining+=ke,rt&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),jc=["swal-title","swal-html","swal-footer"],vu=function(ge){var ke=typeof ge.template=="string"?document.querySelector(ge.template):ge.template;if(!ke)return{};var rt=ke.content;Jh(rt);var Kt=Object.assign(Sc(rt),nu(rt),rh(rt),Zh(rt),nh(rt),bh(rt),xu(rt,jc));return Kt},Sc=function(ge){var ke={},rt=Array.from(ge.querySelectorAll("swal-param"));return rt.forEach(function(Kt){kc(Kt,["name","value"]);var Qr=Kt.getAttribute("name"),Kn=Kt.getAttribute("value");!Qr||!Kn||(typeof Jo[Qr]=="boolean"?ke[Qr]=Kn!=="false":Be(Jo[Qr])==="object"?ke[Qr]=JSON.parse(Kn):ke[Qr]=Kn)}),ke},nu=function(ge){var ke={},rt=Array.from(ge.querySelectorAll("swal-function-param"));return rt.forEach(function(Kt){var Qr=Kt.getAttribute("name"),Kn=Kt.getAttribute("value");!Qr||!Kn||(ke[Qr]=new Function("return ".concat(Kn))())}),ke},rh=function(ge){var ke={},rt=Array.from(ge.querySelectorAll("swal-button"));return rt.forEach(function(Kt){kc(Kt,["type","color","aria-label"]);var Qr=Kt.getAttribute("type");!Qr||!["confirm","cancel","deny"].includes(Qr)||(ke["".concat(Qr,"ButtonText")]=Kt.innerHTML,ke["show".concat(st(Qr),"Button")]=!0,Kt.hasAttribute("color")&&(ke["".concat(Qr,"ButtonColor")]=Kt.getAttribute("color")),Kt.hasAttribute("aria-label")&&(ke["".concat(Qr,"ButtonAriaLabel")]=Kt.getAttribute("aria-label")))}),ke},Zh=function(ge){var ke={},rt=ge.querySelector("swal-image");return rt&&(kc(rt,["src","width","height","alt"]),rt.hasAttribute("src")&&(ke.imageUrl=rt.getAttribute("src")||void 0),rt.hasAttribute("width")&&(ke.imageWidth=rt.getAttribute("width")||void 0),rt.hasAttribute("height")&&(ke.imageHeight=rt.getAttribute("height")||void 0),rt.hasAttribute("alt")&&(ke.imageAlt=rt.getAttribute("alt")||void 0)),ke},nh=function(ge){var ke={},rt=ge.querySelector("swal-icon");return rt&&(kc(rt,["type","color"]),rt.hasAttribute("type")&&(ke.icon=rt.getAttribute("type")),rt.hasAttribute("color")&&(ke.iconColor=rt.getAttribute("color")),ke.iconHtml=rt.innerHTML),ke},bh=function(ge){var ke={},rt=ge.querySelector("swal-input");rt&&(kc(rt,["type","label","placeholder","value"]),ke.input=rt.getAttribute("type")||"text",rt.hasAttribute("label")&&(ke.inputLabel=rt.getAttribute("label")),rt.hasAttribute("placeholder")&&(ke.inputPlaceholder=rt.getAttribute("placeholder")),rt.hasAttribute("value")&&(ke.inputValue=rt.getAttribute("value")));var Kt=Array.from(ge.querySelectorAll("swal-input-option"));return Kt.length&&(ke.inputOptions={},Kt.forEach(function(Qr){kc(Qr,["value"]);var Kn=Qr.getAttribute("value");if(Kn){var Ei=Qr.innerHTML;ke.inputOptions[Kn]=Ei}})),ke},xu=function(ge,ke){var rt={};for(var Kt in ke){var Qr=ke[Kt],Kn=ge.querySelector(Qr);Kn&&(kc(Kn,[]),rt[Qr.replace(/^swal-/,"")]=Kn.innerHTML.trim())}return rt},Jh=function(ge){var ke=jc.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(ge.children).forEach(function(rt){var Kt=rt.tagName.toLowerCase();ke.includes(Kt)||Ct("Unrecognized element <".concat(Kt,">"))})},kc=function(ge,ke){Array.from(ge.attributes).forEach(function(rt){ke.indexOf(rt.name)===-1&&Ct(['Unrecognized attribute "'.concat(rt.name,'" on <').concat(ge.tagName.toLowerCase(),">."),"".concat(ke.length?"Allowed attributes are: ".concat(ke.join(", ")):"To set the value, use HTML within the element.")])})},wh=10,vd=function(ge){var ke=vt(),rt=nr();typeof ge.willOpen=="function"&&ge.willOpen(rt);var Kt=window.getComputedStyle(document.body),Qr=Kt.overflowY;_d(ke,rt,ge),setTimeout(function(){nf(ke,rt)},wh),xi()&&(xd(ke,ge.scrollbarPadding,Qr),Ys()),!Bn()&&!Fe.previousActiveElement&&(Fe.previousActiveElement=document.activeElement),typeof ge.didOpen=="function"&&setTimeout(function(){return ge.didOpen(rt)}),It(ke,be["no-transition"])},Wl=function(ge){var ke=nr();if(!(ge.target!==ke||!go)){var rt=vt();ke.removeEventListener(go,Wl),rt.style.overflowY="auto"}},nf=function(ge,ke){go&&_n(ke)?(ge.style.overflowY="hidden",ke.addEventListener(go,Wl)):ge.style.overflowY="auto"},xd=function(ge,ke,rt){xs(),ke&&rt!=="hidden"&&Va(rt),setTimeout(function(){ge.scrollTop=0})},_d=function(ge,ke,rt){ht(ge,rt.showClass.backdrop),rt.animation?(ke.style.setProperty("opacity","0","important"),Wt(ke,"grid"),setTimeout(function(){ht(ke,rt.showClass.popup),ke.style.removeProperty("opacity")},wh)):Wt(ke,"grid"),ht([document.documentElement,document.body],be.shown),rt.heightAuto&&rt.backdrop&&!rt.toast&&ht([document.documentElement,document.body],be["height-auto"])},bd={email:function(ge,ke){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(ge)?Promise.resolve():Promise.resolve(ke||"Invalid email address")},url:function(ge,ke){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(ge)?Promise.resolve():Promise.resolve(ke||"Invalid URL")}};function ih(nt){nt.inputValidator||(nt.input==="email"&&(nt.inputValidator=bd.email),nt.input==="url"&&(nt.inputValidator=bd.url))}function _u(nt){(!nt.target||typeof nt.target=="string"&&!document.querySelector(nt.target)||typeof nt.target!="string"&&!nt.target.appendChild)&&(Ct('Target parameter is not valid, defaulting to "body"'),nt.target="body")}function Dc(nt){ih(nt),nt.showLoaderOnConfirm&&!nt.preConfirm&&Ct(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),_u(nt),typeof nt.title=="string"&&(nt.title=nt.title.split(`
`).join("<br />")),es(nt)}var Kl,sh=new WeakMap,zo=function(){function nt(){if(A(this,nt),C(this,sh,void 0),!(typeof window>"u")){Kl=this;for(var ge=arguments.length,ke=new Array(ge),rt=0;rt<ge;rt++)ke[rt]=arguments[rt];var Kt=Object.freeze(this.constructor.argsToParams(ke));this.params=Kt,this.isAwaitingPromise=!1,B(sh,this,this._main(Kl.params))}}return j(nt,[{key:"_main",value:function(ke){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(us(Object.assign({},rt,ke)),Fe.currentInstance){var Kt=Bo.swalPromiseResolve.get(Fe.currentInstance),Qr=Fe.currentInstance.isAwaitingPromise;Fe.currentInstance._destroy(),Qr||Kt({isDismissed:!0}),xi()&&vo()}Fe.currentInstance=Kl;var Kn=Ch(ke,rt);Dc(Kn),Object.freeze(Kn),Fe.timeout&&(Fe.timeout.stop(),delete Fe.timeout),clearTimeout(Fe.restoreFocusTimeout);var Ei=Np(Kl);return Yn(Kl,Kn),mi.innerParams.set(Kl,Kn),qf(Kl,Ei,Kn)}},{key:"then",value:function(ke){return g(sh,this).then(ke)}},{key:"finally",value:function(ke){return g(sh,this).finally(ke)}}])}(),qf=function(ge,ke,rt){return new Promise(function(Kt,Qr){var Kn=function(ki){ge.close({isDismissed:!0,dismiss:ki})};Bo.swalPromiseResolve.set(ge,Kt),Bo.swalPromiseReject.set(ge,Qr),ke.confirmButton.onclick=function(){ao(ge)},ke.denyButton.onclick=function(){Zs(ge)},ke.cancelButton.onclick=function(){Yo(ge,Kn)},ke.closeButton.onclick=function(){Kn(Po.close)},ma(rt,ke,Kn),oa(Fe,rt,Kn),$t(ge,rt),vd(rt),$f(Fe,rt,Kn),vl(ke,rt),setTimeout(function(){ke.container.scrollTop=0})})},Ch=function(ge,ke){var rt=vu(ge),Kt=Object.assign({},Jo,ke,rt,ge);return Kt.showClass=Object.assign({},Jo.showClass,Kt.showClass),Kt.hideClass=Object.assign({},Jo.hideClass,Kt.hideClass),Kt.animation===!1&&(Kt.showClass={backdrop:"swal2-noanimation"},Kt.hideClass={}),Kt},Np=function(ge){var ke={popup:nr(),container:vt(),actions:mn(),confirmButton:lr(),denyButton:qr(),cancelButton:Xt(),loader:kn(),closeButton:Gn(),validationMessage:an(),progressSteps:En()};return mi.domCache.set(ge,ke),ke},$f=function(ge,ke,rt){var Kt=Hi();Ot(Kt),ke.timer&&(ge.timeout=new cc(function(){rt("timer"),delete ge.timeout},ke.timer),ke.timerProgressBar&&(Wt(Kt),Hn(Kt,ke,"timerProgressBar"),setTimeout(function(){ge.timeout&&ge.timeout.running&&Dn(ke.timer)})))},vl=function(ge,ke){if(!ke.toast){if(!Ye(ke.allowEnterKey)){fr("allowEnterKey"),Wf();return}Mo(ge)||$a(ge,ke)||yo(-1,1)}},Mo=function(ge){var ke=ge.popup.querySelectorAll("[autofocus]"),rt=R(ke),Kt;try{for(rt.s();!(Kt=rt.n()).done;){var Qr=Kt.value;if(Qr instanceof HTMLElement&&Tr(Qr))return Qr.focus(),!0}}catch(Kn){rt.e(Kn)}finally{rt.f()}return!1},$a=function(ge,ke){return ke.focusDeny&&Tr(ge.denyButton)?(ge.denyButton.focus(),!0):ke.focusCancel&&Tr(ge.cancelButton)?(ge.cancelButton.focus(),!0):ke.focusConfirm&&Tr(ge.confirmButton)?(ge.confirmButton.focus(),!0):!1},Wf=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var Sh=new Date,Ta=localStorage.getItem("swal-initiation");Ta?(Sh.getTime()-Date.parse(Ta))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var nt=document.createElement("audio");nt.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",nt.loop=!0,document.body.appendChild(nt),setTimeout(function(){nt.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(Sh))}zo.prototype.disableButtons=bs,zo.prototype.enableButtons=sc,zo.prototype.getInput=cs,zo.prototype.disableInput=yl,zo.prototype.enableInput=oc,zo.prototype.hideLoading=ja,zo.prototype.disableLoading=ja,zo.prototype.showValidationMessage=$l,zo.prototype.resetValidationMessage=js,zo.prototype.close=pa,zo.prototype.closePopup=pa,zo.prototype.closeModal=pa,zo.prototype.closeToast=pa,zo.prototype.rejectPromise=Gl,zo.prototype.update=bo,zo.prototype._destroy=ks,Object.assign(zo,zs),Object.keys(ea).forEach(function(nt){zo[nt]=function(){if(Kl&&Kl[nt]){var ge;return(ge=Kl)[nt].apply(ge,arguments)}return null}}),zo.DismissReason=Po,zo.version="11.12.4";var co=zo;return co.default=co,co}),typeof Ho<"u"&&Ho.Sweetalert2&&(Ho.swal=Ho.sweetAlert=Ho.Swal=Ho.SweetAlert=Ho.Sweetalert2),typeof document<"u"&&function(r,n){var s=r.createElement("style");if(r.getElementsByTagName("head")[0].appendChild(s),s.styleSheet)s.styleSheet.disabled||(s.styleSheet.cssText=n);else try{s.innerHTML=n}catch{s.innerText=n}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')})(F$);var lye=F$.exports;const Ao=Sp(lye),C7=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],f3=()=>{};function N$(t){function e(s){const o={},c={},u=C7.map(i=>i.key);return Object.entries(s).forEach(i=>{let[A,g]=i;u.includes(A)&&Qi.isValidElement(g)?(o[A]=g,c[A]=" "):c[A]=g}),[o,c]}function r(s,o){Object.entries(o).forEach(c=>{let[u,i]=c;const g=C7.find(B=>B.key===u).getter(t),C=AH(g);C.render(i),s.__roots.push(C)})}function n(s){s.__roots.forEach(o=>{o.unmount()}),s.__roots=[]}return class extends t{static argsToParams(s){if(Qi.isValidElement(s[0])||Qi.isValidElement(s[1])){const o={};return["title","html","icon"].forEach((c,u)=>{s[u]!==void 0&&(o[c]=s[u])}),o}else return t.argsToParams(s)}_main(s,o){this.__roots=[],this.__params=Object.assign({},o,s);const[c,u]=e(this.__params),i=u.willOpen||f3,A=u.didOpen||f3,g=u.didDestroy||f3;return super._main(Object.assign({},u,{willOpen:C=>{r(this,c),i(C)},didOpen:C=>{setTimeout(()=>{A(C)})},didDestroy:C=>{g(C),n(this)}}))}update(s){Object.assign(this.__params,s),n(this);const[o,c]=e(this.__params);super.update(c),r(this,o)}}}const cye=N$(Ao),uye=[{id:1,name:"Corn",weight:"50kg",category_id:"Grain"},{id:2,name:"Wheat",weight:"40kg",category_id:"Grain"}],hye=()=>{const[t,e]=ve.useState(uye),[r,n]=ve.useState(null),[s,o]=ve.useState(!1),[c,u]=ve.useState(""),[i,A]=ve.useState(null),g=ve.useRef(null);ve.useEffect(()=>{const R=N=>{g.current&&!g.current.contains(N.target)&&A(null)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const C=(R,N)=>{u(R),n(N),o(!0)},B=()=>{o(!1),n(null)},S=R=>{R.preventDefault()},P=R=>{A(i===R?null:R)},j=R=>{cye.fire({title:"Crop Details",html:`
        <p><strong>Name:</strong> ${R.name}</p>
        <p><strong>Weight:</strong> ${R.weight}</p>
        <p><strong>Category:</strong> ${R.category_id}</p>
      `,icon:"info",confirmButtonText:"Close",confirmButtonColor:"#3085d6"})};return m.jsxs("div",{className:"container mx-auto p-6 bg-gradient-to-br from-green-50 via-yellow-50 to-blue-50 min-h-screen font-sans",children:[m.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-green-700",children:"Crop Management"}),m.jsx("div",{className:"flex justify-between mb-8",children:m.jsxs("button",{onClick:()=>C("create"),className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg shadow-md flex items-center transition",children:[m.jsx(MD,{className:"w-5 h-5 mr-2"}),"Create Crop"]})}),m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4 text-green-800",children:"Crop List"}),m.jsxs("table",{className:"w-full table-auto border border-gray-300 rounded-lg overflow-hidden",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-green-100 text-green-700",children:[m.jsx("th",{className:"py-2 px-3 text-left",children:"Name"}),m.jsx("th",{className:"py-2 px-3 text-left",children:"Weight"}),m.jsx("th",{className:"py-2 px-3 text-left",children:"Category"}),m.jsx("th",{className:"py-2 px-3 text-left",children:"Actions"})]})}),m.jsx("tbody",{children:t.map(R=>m.jsxs("tr",{className:"bg-white hover:bg-gray-100",children:[m.jsx("td",{className:"border-t py-2 px-3 text-left",children:R.name}),m.jsx("td",{className:"border-t py-2 px-3 text-left",children:R.weight}),m.jsx("td",{className:"border-t py-2 px-3 text-left",children:R.category_id}),m.jsxs("td",{className:"border-t py-2 px-3 text-left flex items-center space-x-2",children:[m.jsxs("button",{onClick:()=>j(R),className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1 px-3 rounded-lg flex items-center transition",children:[m.jsx(ine,{className:"w-5 h-5 mr-1"}),"Details"]}),m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>P(R.id),className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-1 px-3 rounded-lg flex items-center transition",children:[m.jsx(d3,{className:"w-5 h-5 mr-1"}),"Actions"]}),i===R.id&&m.jsxs("div",{ref:g,className:"absolute right-0 mt-2 w-32 bg-white border border-gray-300 rounded-lg shadow-lg",children:[m.jsxs("button",{onClick:()=>C("edit",R),className:"block px-4 py-2 text-gray-700 hover:bg-gray-200 w-full text-left rounded-t-lg flex items-center",children:[m.jsx(nne,{className:"w-5 h-5 mr-2 text-green-600"}),"Edit"]}),m.jsxs("button",{onClick:()=>{},className:"block px-4 py-2 text-red-600 hover:bg-red-100 w-full text-left rounded-b-lg flex items-center",children:[m.jsx(hne,{className:"w-5 h-5 mr-2"}),"Delete"]})]})]})]})]},R.id))})]})]}),s&&m.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md w-full max-w-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4 text-green-800",children:c==="create"?"Create Crop":c==="edit"?"Edit Crop":"Crop Details"}),c==="details"?m.jsxs("div",{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Name:"})," ",r==null?void 0:r.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Weight:"})," ",r==null?void 0:r.weight]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Category:"})," ",r==null?void 0:r.category_id]}),m.jsxs("button",{onClick:B,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg mt-4 flex items-center justify-center transition",children:[m.jsx(d3,{className:"w-5 h-5 mr-2"}),"Close"]})]}):m.jsxs("form",{onSubmit:S,children:[m.jsxs("label",{className:"block mb-4",children:[m.jsx("span",{className:"text-gray-700",children:"Name"}),m.jsx("input",{type:"text",className:"form-input mt-1 block w-full border rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500",defaultValue:(r==null?void 0:r.name)||""})]}),m.jsxs("label",{className:"block mb-4",children:[m.jsx("span",{className:"text-gray-700",children:"Weight"}),m.jsx("input",{type:"text",className:"form-input mt-1 block w-full border rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500",defaultValue:(r==null?void 0:r.weight)||""})]}),m.jsxs("label",{className:"block mb-4",children:[m.jsx("span",{className:"text-gray-700",children:"Category"}),m.jsx("input",{type:"text",className:"form-input mt-1 block w-full border rounded-lg shadow-sm focus:ring-green-500 focus:border-green-500",defaultValue:(r==null?void 0:r.category_id)||""})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsxs("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition flex items-center",children:[m.jsx(MD,{className:"w-5 h-5 mr-2"}),c==="create"?"Create":"Save"]}),"n",m.jsxs("button",{type:"button",onClick:B,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition flex items-center",children:[m.jsx(d3,{className:"w-5 h-5 mr-2"}),"Cancel"]})]})]})]})})]})},S7=({children:t})=>{const[e,r]=ve.useState(null),[n,s]=ve.useState({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1}),[o,c]=ve.useState(!1);ve.useEffect(()=>{var C;const g=localStorage.getItem("token");if(g){const S=((C=TC(g).sub)==null?void 0:C.user_type)||"";console.log(S),r(S),c(S==="admin"),console.log("ato amin'ny layout ",o)}},[]);const u=()=>{localStorage.removeItem("token"),sessionStorage.clear(),window.location.href="/login"};ve.useEffect(()=>{const g=C=>{!C.target.closest(".dropdown")&&!C.target.closest(".dropdown-btn")&&s({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1})};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]);const i=g=>{setTimeout(()=>{s(C=>({...C,[g]:!0}))},200)},A=g=>{setTimeout(()=>{s(C=>({...C,[g]:!1}))},200)};return m.jsxs("div",{className:"bg-white min-h-screen font-poppins text-gray-800",children:[m.jsxs("header",{className:"bg-gradient-to-r from-teal-700 to-blue-800 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90",children:[m.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[m.jsx("span",{className:"bg-white p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:m.jsx("img",{src:EC,alt:"Description de l'image",className:"w-16 h-16 rounded-full object-cover"})}),m.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),m.jsxs("nav",{className:"hidden md:flex space-x-8 text-lg font-medium",children:[m.jsxs("div",{className:"relative",onMouseEnter:()=>i("forestDropdown"),onMouseLeave:()=>A("forestDropdown"),children:[m.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Forest"}),n.forestDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsx("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/forestpage",className:"block w-full h-full",children:"Forest Data"})})})})]}),m.jsxs("div",{className:"relative",onMouseEnter:()=>i("farmDropdown"),onMouseLeave:()=>A("farmDropdown"),children:[m.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Farm"}),n.farmDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsxs("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:[m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/farmergroup",className:"block w-full h-full",children:"Farmer Group"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/farmmanager",className:"block w-full h-full",children:"Farmer Manager"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/cropmanage",className:"block w-full h-full",children:"Crop"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"district",className:"block w-full h-full",children:"District"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx(Oo,{to:"/mapviewall",state:{owner_type:"farmer"},className:"block w-full h-full",children:"View all"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx(Oo,{to:"/storeProductManager",state:{owner_type:"farmer"},className:"block w-full h-full",children:"Store"})})]})})]}),m.jsxs("div",{className:"relative",onMouseEnter:()=>i("digitalTraceDropdown"),onMouseLeave:()=>A("digitalTraceDropdown"),children:[m.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Digital Trace"}),n.digitalTraceDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsxs("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:[m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/qrproduce",className:"block w-full h-full",children:"Produce Stamps"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/qrconservation",className:"block w-full h-full",children:"Forest Conservation Stamps"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"qrexport",className:"block w-full h-full",children:"Export Stamps"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/qrfertilizer",className:"block w-full h-full",children:"Fertilizer Stamps"})})]})})]}),m.jsxs("div",{className:"relative",onMouseEnter:()=>i("weatherDropdown"),onMouseLeave:()=>A("weatherDropdown"),children:[m.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Weather"}),n.weatherDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsxs("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:[m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/weathermapfarm",className:"block w-full h-full",children:"Map Weather"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/weatherhistory",className:"block w-full h-full",children:"Weather History"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/onemonth",className:"block w-full h-full",children:"HDD & CDD                                      "})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/graphpest",className:"block w-full h-full",children:"GDD for Pest                                        "})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/plantingdate",className:"block w-full h-full",children:"Planting Date                                       "})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/weatherdas",className:"block w-full h-full",children:"Anomaly Alert"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/alertmessage",className:"block w-full h-full",children:"Alert Messaging"})})]})})]}),m.jsxs("div",{className:"relative",onMouseEnter:()=>i("dashDropdown"),onMouseLeave:()=>A("dashDropdown"),children:[m.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Dashboard"}),n.dashDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsx("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/userDash",className:"block w-full h-full",children:"Dashboard"})})})})]}),m.jsxs("div",{className:"relative",onMouseEnter:()=>i("eudrDropdown"),onMouseLeave:()=>A("eudrDropdown"),children:[m.jsx("button",{className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"DDS"}),n.eudrDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsx("ul",{className:"text-gray-700 font-light text-base font-sans",style:{fontFamily:"Arial, sans-serif"},children:m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/EUDRSubmission",className:"block w-full h-full",children:"DDS"})})})})]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[o&&m.jsxs(m.Fragment,{children:[m.jsxs(Oo,{to:"/usermanager",className:"text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:[m.jsx(w7,{className:"inline-block"})," User Manager"]}),m.jsxs(Oo,{to:"/featuresManager",className:"text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:[m.jsx(w7,{className:"inline-block"})," Feature Manager"]})]}),m.jsxs("button",{onClick:u,className:"bg-teal-100 text-teal-700 font-semibold px-4 py-2 rounded-lg shadow-md flex items-center gap-2 hover:bg-gray-300 hover:text-gray-900 transition-all duration-200",children:[m.jsx(Rce,{className:"text-xl"}),"Log Out"]})]})]}),m.jsx("div",{className:"mt-12 px-6",children:t})]})},dye=({isOpen:t,onClose:e,children:r})=>t?m.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-lg w-full",children:[m.jsx("div",{className:"p-6",children:r}),m.jsx("div",{className:"flex justify-end p-4",children:m.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",onClick:e,children:"Close"})})]})}):null,fye=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState(1),[s,o]=ve.useState(1),[c,u]=ve.useState(null),[i,A]=ve.useState(null),[g,C]=ve.useState({});ve.useEffect(()=>{B(r)},[r]);const B=async $=>{try{const J=await Mr.get(`/api/forest/?page=${$}`);e(J.data.forests),o(J.data.total_pages)}catch{Ao.fire({icon:"error",title:"Error",text:"Failed to fetch forests. Please try again."})}},S=$=>{u(c===$?null:$)},P=$=>{A($.id),C({...$})},j=$=>{const{name:J,value:te}=$.target;C(ue=>({...ue,[J]:te}))},R=async()=>{try{(await Mr.post(`/api/forest/${i}/update`,{name:g.name,tree_type:g.tree_type})).data.success?(e(J=>J.map(te=>te.id===i?g:te)),A(null),Ao.fire({icon:"success",title:"Success",text:"Forest updated successfully."})):Ao.fire({icon:"error",title:"Error",text:"Failed to update the forest."})}catch{Ao.fire({icon:"error",title:"Error",text:"An error occurred while updating the forest."})}},N=async($,J)=>{if((await Ao.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{(await Mr.post(`/api/forest/${J}/delete`)).data.success?(e(t.filter(oe=>oe.id!==J)),Ao.fire({icon:"success",title:"Deleted!",text:"The forest has been deleted."})):Ao.fire({icon:"error",title:"Error",text:"Failed to delete the forest."})}catch{Ao.fire({icon:"error",title:"Error",text:"An error occurred while deleting the forest."})}},U=$=>{$>=1&&$<=s&&n($)};return m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-3xl font-extrabold mb-6 text-center text-teal-700",children:"Forest List"}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[m.jsxs("table",{className:"w-full table-auto border-collapse",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-teal-500 text-white",children:[m.jsx("th",{className:"px-4 py-2",children:"Forest ID"}),m.jsx("th",{className:"px-4 py-2",children:"Name"}),m.jsx("th",{className:"px-4 py-2",children:"Tree Type"}),m.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),m.jsx("tbody",{children:t.length>0?t.map($=>m.jsxs("tr",{className:"bg-gray-50 hover:bg-gray-100",children:[m.jsx("td",{className:"border px-4 py-2",children:$.id}),m.jsx("td",{className:"border px-4 py-2",children:i===$.id?m.jsx("input",{type:"text",name:"name",value:g.name,onChange:j,className:"border rounded px-2 py-1 w-full"}):$.name}),m.jsx("td",{className:"border px-4 py-2",children:i===$.id?m.jsx("input",{type:"text",name:"tree_type",value:g.tree_type,onChange:j,className:"border rounded px-2 py-1 w-full"}):$.tree_type}),m.jsx("td",{className:"border px-4 py-2",children:m.jsxs("div",{className:"relative",children:[i===$.id?m.jsx("button",{onClick:R,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-2 rounded mr-2",children:"Validate"}):m.jsx("button",{onClick:()=>P($),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded mr-2",children:"Update"}),m.jsx("button",{onClick:()=>S($.id),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",children:"Actions"}),c===$.id&&m.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded shadow-lg z-10",children:[m.jsx("button",{onClick:()=>N("Delete",$.id),className:"block px-4 py-2 text-red-600 hover:bg-red-100 w-full text-left",children:"Delete"}),m.jsx(Oo,{to:{pathname:"/mapview"},state:{owner_id:$.id,owner_type:"forest"},className:"block px-4 py-2 text-blue-600 hover:bg-blue-100 w-full text-left",children:"View"}),m.jsx(Oo,{to:{pathname:"/mapbox"},state:{owner_id:$.id,owner_type:"forest"},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Create Maps"}),m.jsx(Oo,{to:{pathname:"/reportforest"},state:{forestId:$.id},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"View Report"}),m.jsx(Oo,{to:{pathname:"/reportcarbonforest"},state:{forestId:$.id},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Carbon report"})]})]})})]},$.id)):m.jsx("tr",{children:m.jsx("td",{colSpan:"4",className:"border px-4 py-2 text-center",children:"No forests available"})})})]}),s>1&&m.jsxs("div",{className:"flex justify-center mt-8",children:[m.jsx("button",{onClick:()=>U(r-1),disabled:r===1,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-l disabled:opacity-50",children:"Previous"}),m.jsxs("span",{className:"px-4 py-2",children:["Page ",r," of ",s]}),m.jsx("button",{onClick:()=>U(r+1),disabled:r===s,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-r disabled:opacity-50",children:"Next"})]})]})]})},pye=()=>{const[t,e]=ve.useState(!1),[r,n]=ve.useState(!1),s=()=>e(!0),o=()=>e(!1),c=async u=>{u.preventDefault();const i=new FormData(u.target);try{const A=await Mr.post("/api/forest/create",i,{headers:{"Content-Type":"multipart/form-data"}});A.data.success?(console.log("Forest created successfully",A.data.forest_id),n(!r),o()):console.error("Failed to create forest")}catch(A){console.error("Error creating forest:",A)}};return m.jsxs("div",{className:"container mx-auto px-6 py-8 bg-gray-50 min-h-screen",children:[m.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-teal-800",children:"Forest Management"}),m.jsxs("div",{className:"flex flex-col items-center mb-8",children:[m.jsx("button",{onClick:s,className:"bg-teal-600 text-white font-semibold px-6 py-3 rounded-md shadow-lg hover:bg-teal-700 transition duration-300",children:"Create Forest"}),m.jsx(Oo,{to:"/mapviewall",state:{owner_type:"forest"},className:"inline-block m-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"View All Forest"}),m.jsxs("div",{className:"mt-8 w-full bg-white p-6 rounded-lg shadow-md",children:[m.jsx(fye,{},r)," "]})]}),m.jsx(dye,{isOpen:t,onClose:o,children:m.jsxs("form",{onSubmit:c,className:"space-y-4",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4 text-teal-800",children:"Create New Forest"}),m.jsx("input",{type:"text",name:"name",placeholder:"Forest Name",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-teal-400",required:!0}),m.jsx("input",{type:"text",name:"tree_type",placeholder:"Tree Type",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-teal-400",required:!0}),m.jsx("input",{type:"file",name:"image",accept:"image/*",className:"border rounded-md px-4 py-3 w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-teal-400"}),m.jsx("button",{type:"submit",className:"bg-teal-600 text-white font-semibold px-6 py-3 rounded-md shadow-lg hover:bg-teal-700 transition duration-300",children:"Create Forest"})]})})]})};function Aye(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M416 128 192 384l-96-96"},child:[]}]})(t)}function mye(t){return ys({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(t)}const gye=({isOpen:t,onClose:e,setUpdateFlag:r})=>{const[n,s]=ve.useState({name:"",subcounty:"",district_id:"",farmergroup_id:"",longitude:"",latitude:"",phonenumber1:"",phonenumber2:""}),[o,c]=ve.useState({}),[u,i]=ve.useState({}),[A,g]=ve.useState(!0),[C,B]=ve.useState(!0),[S,P]=ve.useState(!1),[j,R]=ve.useState(null);ve.useEffect(()=>{t&&(N(),U(),$())},[t]);const N=async()=>{g(!0);try{const oe=(await Mr.get("/api/district/")).data.districts.reduce((K,ce)=>(K[ce.id]=ce.name,K),{});c(oe)}catch(ue){console.error("Error fetching districts:",ue)}finally{g(!1)}},U=async()=>{B(!0);try{const oe=(await Mr.get("/api/farmergroup/")).data.reduce((K,ce)=>(K[ce.id]=ce.name,K),{});i(oe)}catch(ue){console.error("Error fetching farmer groups:",ue)}finally{B(!1)}},$=()=>{s({name:"",subcounty:"",district_id:"",farmergroup_id:"",longitude:"",latitude:"",phonenumber1:"",phonenumber2:""}),R(null)},J=ue=>{s({...n,[ue.target.name]:ue.target.value})},te=async ue=>{ue.preventDefault(),P(!0),R(null);const oe={...n,geolocation:`${n.latitude},${n.longitude}`};try{(await Mr.post("/api/farm/create",oe)).data.success?(console.log("Farm created successfully"),r(ce=>!ce),$(),e()):R("Failed to create farm. Please try again.")}catch(K){console.error("Error creating farm:",K),R("An error occurred while creating the farm.")}finally{P(!1)}};return m.jsx("div",{id:"farmModal",className:`fixed inset-0 bg-gray-900 bg-opacity-50 ${t?"flex":"hidden"} items-center justify-center`,children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-3xl mx-4 md:mx-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-3xl font-bold text-indigo-700",children:"Create a Farm"}),m.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition",children:m.jsx(mye,{size:24})})]}),m.jsxs("form",{onSubmit:te,className:"space-y-6",children:[j&&m.jsx("div",{className:"text-red-500",children:j}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"name",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Farm Name:"}),m.jsx("input",{type:"text",id:"name",name:"name",required:!0,value:n.name,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"subcounty",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Subcounty:"}),m.jsx("input",{type:"text",id:"subcounty",name:"subcounty",required:!0,value:n.subcounty,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"district_id",className:"block text-gray-700 text-sm font-semibold mb-2",children:"District:"}),A?m.jsx("p",{children:"Loading districts..."}):m.jsxs("select",{id:"district_id",name:"district_id",required:!0,value:n.district_id,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[m.jsx("option",{value:"",children:"None"}),Object.entries(o).map(([ue,oe])=>m.jsx("option",{value:ue,children:oe},ue))]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"farmergroup_id",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Farmer Group:"}),C?m.jsx("p",{children:"Loading farmer groups..."}):m.jsxs("select",{id:"farmergroup_id",name:"farmergroup_id",required:!0,value:n.farmergroup_id,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[m.jsx("option",{value:"",children:"None"}),Object.entries(u).map(([ue,oe])=>m.jsx("option",{value:ue,children:oe},ue))]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"longitude",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Longitude:"}),m.jsx("input",{type:"text",id:"longitude",name:"longitude",required:!0,value:n.longitude,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"latitude",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Latitude:"}),m.jsx("input",{type:"text",id:"latitude",name:"latitude",required:!0,value:n.latitude,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"phonenumber1",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Phone Number 1:"}),m.jsx("input",{type:"text",id:"phonenumber1",name:"phonenumber1",value:n.phonenumber1,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"phonenumber2",className:"block text-gray-700 text-sm font-semibold mb-2",children:"Phone Number 2:"}),m.jsx("input",{type:"text",id:"phonenumber2",name:"phonenumber2",value:n.phonenumber2,onChange:J,className:"shadow-sm appearance-none border rounded w-full py-3 px-4 text-gray-800 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{type:"submit",disabled:S,className:"bg-indigo-600 text-white py-2 px-6 rounded-lg hover:bg-indigo-500 focus:ring-2 focus:ring-indigo-400 focus:ring-opacity-50 transition",children:S?"Submitting...":m.jsxs("div",{className:"flex items-center",children:[m.jsx(Aye,{size:20,className:"mr-2"}),m.jsx("span",{children:"Submit"})]})})})]})]})})},yye=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState({}),[s,o]=ve.useState({}),[c,u]=ve.useState(1),[i,A]=ve.useState(1),[g,C]=ve.useState(null);ve.useEffect(()=>{B(c),S(),P()},[c]);const B=async U=>{try{const $=await Mr.get(`/api/farm/?page=${U}`);e($.data.farms),A($.data.total_pages)}catch($){console.error("Error fetching farms:",$)}},S=async()=>{try{const $=(await Mr.get("/api/district/")).data.districts.reduce((J,te)=>(J[te.id]=te.name,J),{});n($)}catch(U){console.error("Error fetching districts:",U)}},P=async()=>{try{const $=(await Mr.get("/api/farmergroup/")).data.reduce((J,te)=>(J[te.id]=te.name,J),{});o($)}catch(U){console.error("Error fetching farmer groups:",U)}},j=U=>{C(g===U?null:U)},R=async(U,$)=>{if(console.log(`${U} action for farm ID: ${$}`),U==="Delete")if(window.confirm("Are you sure you want to delete this farm? This action cannot be undone."))try{(await Mr.post(`/api/farm/${$}/delete`)).data.success?(e(t.filter(ue=>ue.id!==$)),console.log("Farm deleted successfully")):console.error("Failed to delete farm")}catch(te){console.error("Error deleting farm:",te)}else console.log("User canceled the deletion")},N=U=>{U>=1&&U<=i&&u(U)};return m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-3xl font-extrabold mb-6 text-center text-teal-700",children:"Farm List"}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[m.jsxs("table",{className:"w-full table-auto border-collapse",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-teal-500 text-white",children:[m.jsx("th",{className:"px-4 py-2",children:"Farm ID"}),m.jsx("th",{className:"px-4 py-2",children:"Name"}),m.jsx("th",{className:"px-4 py-2",children:"District"}),m.jsx("th",{className:"px-4 py-2",children:"Farmer Group"}),m.jsx("th",{className:"px-4 py-2",children:"Geolocations"}),m.jsx("th",{className:"px-4 py-2",children:"Phone Number 1"}),m.jsx("th",{className:"px-4 py-2",children:"Phone Number 2"}),m.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),m.jsx("tbody",{children:t.length>0?t.map(U=>m.jsxs("tr",{className:"bg-gray-50 hover:bg-gray-100",children:[m.jsx("td",{className:"border px-4 py-2",children:U.id}),m.jsx("td",{className:"border px-4 py-2",children:U.name}),m.jsx("td",{className:"border px-4 py-2",children:r[U.district_id]}),m.jsx("td",{className:"border px-4 py-2",children:s[U.farmergroup_id]}),m.jsx("td",{className:"border px-4 py-2",children:U.geolocation}),m.jsx("td",{className:"border px-4 py-2",children:U.phonenumber1}),m.jsx("td",{className:"border px-4 py-2",children:U.phonenumber2}),m.jsx("td",{className:"border px-4 py-2",children:m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>j(U.id),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",children:"Actions"}),g===U.id&&m.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-300 rounded shadow-lg z-10",children:[m.jsx("button",{onClick:()=>R("Update",U.id),className:"block px-4 py-2 text-teal-600 hover:bg-teal-100 w-full text-left",children:"Update"}),m.jsx("button",{onClick:()=>R("Delete",U.id),className:"block px-4 py-2 text-red-600 hover:bg-red-100 w-full text-left",children:"Delete"}),m.jsx(Oo,{to:{pathname:"/mapview"},state:{owner_id:U.id,owner_type:"farmer",geolocation:U.geolocation},className:"block px-4 py-2 text-blue-600 hover:bg-blue-100 w-full text-left",children:"View"}),m.jsx(Oo,{to:"/farmdata",className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Add FD"}),m.jsx(Oo,{to:{pathname:"/mapbox"},state:{owner_id:U.id,owner_type:"farmer",geolocation:U.geolocation},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"Create Maps"}),m.jsx(Oo,{to:{pathname:"/reportfarmer"},state:{farmId:U.id},className:"block px-4 py-2 text-green-600 hover:bg-green-100 w-full text-left",children:"view report"})]})]})})]},U.id)):m.jsx("tr",{children:m.jsx("td",{colSpan:"8",className:"border px-4 py-2 text-center",children:"No farms available"})})})]}),i>1&&m.jsxs("div",{className:"flex justify-center mt-8",children:[m.jsx("button",{onClick:()=>N(c-1),disabled:c===1,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-l disabled:opacity-50",children:"Previous"}),m.jsxs("span",{className:"px-4 py-2",children:["Page ",c," of ",i]}),m.jsx("button",{onClick:()=>N(c+1),disabled:c===i,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-r disabled:opacity-50",children:"Next"})]})]})]})},vye=()=>{const[t,e]=ve.useState(!1),r=()=>e(!0),n=()=>e(!1);return m.jsxs("div",{children:[m.jsx(gye,{isOpen:t,onClose:n}),m.jsx("button",{onClick:r,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Create Farm"}),m.jsx(Oo,{to:"/mapviewall",state:{owner_type:"farmer"},className:"inline-block m-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"View All Farms"}),m.jsx(yye,{})]})},xye=()=>m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-11/12 max-w-4xl",children:[m.jsx("div",{className:"flex justify-between items-center mb-4",children:m.jsx("h1",{className:"text-3xl font-extrabold text-teal-700",children:"Create / Edit Farm Data"})}),m.jsxs("form",{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"farm_id",className:"block text-gray-700",children:"Farm:"}),m.jsx("select",{name:"farm_id",id:"farm_id",className:"border rounded p-2 w-full",required:!0,children:m.jsx("option",{value:"",children:"Select Farm"})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"crop_id",className:"block text-gray-700",children:"Crop:"}),m.jsx("select",{name:"crop_id",id:"crop_id",className:"border rounded p-2 w-full",required:!0,children:m.jsx("option",{value:"",children:"Select Crop"})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"land_type",className:"block text-gray-700",children:"Land Type:"}),m.jsx("input",{type:"text",name:"land_type",id:"land_type",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"tilled_land_size",className:"block text-gray-700",children:"Tilled Land Size:"}),m.jsx("input",{type:"number",name:"tilled_land_size",id:"tilled_land_size",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"planting_date",className:"block text-gray-700",children:"Planting Date:"}),m.jsx("input",{type:"date",name:"planting_date",id:"planting_date",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"season",className:"block text-gray-700",children:"Season:"}),m.jsx("input",{type:"number",name:"season",id:"season",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"quality",className:"block text-gray-700",children:"Quality:"}),m.jsx("input",{type:"text",name:"quality",id:"quality",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"quantity",className:"block text-gray-700",children:"Quantity:"}),m.jsx("input",{type:"number",name:"quantity",id:"quantity",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"harvest_date",className:"block text-gray-700",children:"Harvest Date:"}),m.jsx("input",{type:"date",name:"harvest_date",id:"harvest_date",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"expected_yield",className:"block text-gray-700",children:"Expected Yield:"}),m.jsx("input",{type:"number",name:"expected_yield",id:"expected_yield",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"actual_yield",className:"block text-gray-700",children:"Actual Yield:"}),m.jsx("input",{type:"number",name:"actual_yield",id:"actual_yield",className:"border rounded p-2 w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"timestamp",className:"block text-gray-700",children:"Timestamp:"}),m.jsx("input",{type:"datetime-local",name:"timestamp",id:"timestamp",className:"border rounded p-2 w-full",required:!0})]})]}),m.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[m.jsx(Oo,{to:"/farmmanager",className:"bg-gray-500 text-white py-2 px-4 rounded inline-flex items-center",children:m.jsx("span",{children:"Cancel"})}),m.jsx("button",{type:"submit",className:"bg-teal-500 text-white py-2 px-4 rounded",children:"Save"})]})]})]})}),P$=({isOpen:t,crop:e,categories:r=[],onClose:n})=>t?m.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md w-full max-w-lg",children:[m.jsxs("h1",{className:"text-2xl font-bold mb-4",children:[e?"Edit":"Create"," Crop"]}),m.jsxs("form",{className:"bg-white p-6 rounded-lg shadow-md",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-gray-700",children:"Name:"}),m.jsx("input",{type:"text",id:"name",name:"name",className:"w-full p-2 border border-gray-300 rounded mt-1",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"weight",className:"block text-gray-700",children:"Weight:"}),m.jsx("input",{type:"number",step:"0.01",id:"weight",name:"weight",className:"w-full p-2 border border-gray-300 rounded mt-1",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"category_id",className:"block text-gray-700",children:"Category:"}),m.jsx("select",{id:"category_id",name:"category_id",className:"w-full p-2 border border-gray-300 rounded mt-1",required:!0,children:r.map(s=>m.jsx("option",{value:s.id,children:s.name},s.id))})]})]}),m.jsxs("div",{className:"flex justify-between mt-4",children:[m.jsx("button",{type:"button",onClick:n,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:e?"Update":"Create"})]}),m.jsx("a",{href:"/createcategory",className:"text-blue-500 hover:underline block mt-4",children:"Create Category"})]})]})}):null;P$.propTypes={isOpen:r2.bool.isRequired,crop:r2.object,categories:r2.array,onClose:r2.func.isRequired};const _ye=()=>{const[t,e]=ve.useState(!1),r=()=>e(!1);return m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-green-100 to-blue-200 p-6 font-sans",children:[m.jsx(P$,{isOpen:t,onClose:r}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 w-full max-w-4xl",children:[m.jsxs(Oo,{to:"/cropmanager",className:"bg-blue-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-blue-400 hover:bg-blue-200 transition-transform transform hover:scale-105 duration-300",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(W_,{className:"text-green-600 text-4xl"})," ",m.jsx("h3",{className:"text-2xl font-bold",children:"Crop Manager"})]}),m.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Manage and organize crops effectively."})]}),m.jsxs(Oo,{to:"/irrigationmanager",className:"bg-yellow-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-yellow-400 hover:bg-yellow-200 transition-transform transform hover:scale-105 duration-300",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(pne,{className:"text-blue-600 text-4xl"})," ",m.jsx("h3",{className:"text-2xl font-bold",children:"Irrigation Manager"})]}),m.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Oversee and control irrigation systems."})]}),m.jsxs(Oo,{to:"/cropcoefficientmanager",className:"bg-green-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-green-400 hover:bg-green-200 transition-transform transform hover:scale-105 duration-300",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(rF,{className:"text-green-600 text-4xl"})," ",m.jsx("h3",{className:"text-2xl font-bold",children:"Crop Coefficient Manager"})]}),m.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Manage crop coefficient data for better insights."})]}),m.jsxs(Oo,{to:"/grademanager",className:"bg-gray-100 text-gray-800 shadow-lg rounded-lg p-8 border-l-4 border-gray-400 hover:bg-gray-200 transition-transform transform hover:scale-105 duration-300",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(tne,{className:"text-purple-600 text-4xl"})," ",m.jsx("h3",{className:"text-2xl font-bold",children:"Grade Manager"})]}),m.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Handle grading of crops for quality control."})]})]})]})};var z6={exports:{}},y0={},Q6={exports:{}},Rf={},H6={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=g;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var r="none",n="contents",s=/input|select|textarea|button|object|iframe/;function o(C,B){return B.getPropertyValue("overflow")!=="visible"||C.scrollWidth<=0&&C.scrollHeight<=0}function c(C){var B=C.offsetWidth<=0&&C.offsetHeight<=0;if(B&&!C.innerHTML)return!0;try{var S=window.getComputedStyle(C),P=S.getPropertyValue("display");return B?P!==n&&o(C,S):P===r}catch{return console.warn("Failed to inspect element style"),!1}}function u(C){for(var B=C,S=C.getRootNode&&C.getRootNode();B&&B!==document.body;){if(S&&B===S&&(B=S.host.parentNode),c(B))return!1;B=B.parentNode}return!0}function i(C,B){var S=C.nodeName.toLowerCase(),P=s.test(S)&&!C.disabled||S==="a"&&C.href||B;return P&&u(C)}function A(C){var B=C.getAttribute("tabindex");B===null&&(B=void 0);var S=isNaN(B);return(S||B>=0)&&i(C,!S)}function g(C){var B=[].slice.call(C.querySelectorAll("*"),0).reduce(function(S,P){return S.concat(P.shadowRoot?g(P.shadowRoot):[P])},[]);return B.filter(A)}t.exports=e.default})(H6,H6.exports);var M$=H6.exports;Object.defineProperty(Rf,"__esModule",{value:!0});Rf.resetState=Sye;Rf.log=Bye;Rf.handleBlur=P_;Rf.handleFocus=M_;Rf.markForFocusLater=Eye;Rf.returnFocus=Tye;Rf.popWithoutFocus=Iye;Rf.setupScopedFocus=Lye;Rf.teardownScopedFocus=Fye;var bye=M$,wye=Cye(bye);function Cye(t){return t&&t.__esModule?t:{default:t}}var g1=[],Oy=null,V6=!1;function Sye(){g1=[]}function Bye(){}function P_(){V6=!0}function M_(){if(V6){if(V6=!1,!Oy)return;setTimeout(function(){if(!Oy.contains(document.activeElement)){var t=(0,wye.default)(Oy)[0]||Oy;t.focus()}},0)}}function Eye(){g1.push(document.activeElement)}function Tye(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{g1.length!==0&&(e=g1.pop(),e.focus({preventScroll:t}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function Iye(){g1.length>0&&g1.pop()}function Lye(t){Oy=t,window.addEventListener?(window.addEventListener("blur",P_,!1),document.addEventListener("focus",M_,!0)):(window.attachEvent("onBlur",P_),document.attachEvent("onFocus",M_))}function Fye(){Oy=null,window.addEventListener?(window.removeEventListener("blur",P_),document.removeEventListener("focus",M_)):(window.detachEvent("onBlur",P_),document.detachEvent("onFocus",M_))}var G6={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var r=M$,n=s(r);function s(u){return u&&u.__esModule?u:{default:u}}function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return u.activeElement.shadowRoot?o(u.activeElement.shadowRoot):u.activeElement}function c(u,i){var A=(0,n.default)(u);if(!A.length){i.preventDefault();return}var g=void 0,C=i.shiftKey,B=A[0],S=A[A.length-1],P=o();if(u===P){if(!C)return;g=S}if(S===P&&!C&&(g=B),B===P&&C&&(g=S),g){i.preventDefault(),g.focus();return}var j=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),R=j!=null&&j[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(R){var N=A.indexOf(P);if(N>-1&&(N+=C?-1:1),g=A[N],typeof g>"u"){i.preventDefault(),g=C?S:B,g.focus();return}i.preventDefault(),g.focus()}}t.exports=e.default})(G6,G6.exports);var Nye=G6.exports,Uf={},Pye=function(){},Mye=Pye,kf={},j$={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),r={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=r:window.ExecutionEnvironment=r})()})(j$);var jye=j$.exports;Object.defineProperty(kf,"__esModule",{value:!0});kf.canUseDOM=kf.SafeNodeList=kf.SafeHTMLCollection=void 0;var kye=jye,Dye=Oye(kye);function Oye(t){return t&&t.__esModule?t:{default:t}}var IC=Dye.default,Rye=IC.canUseDOM?window.HTMLElement:{};kf.SafeHTMLCollection=IC.canUseDOM?window.HTMLCollection:{};kf.SafeNodeList=IC.canUseDOM?window.NodeList:{};kf.canUseDOM=IC.canUseDOM;kf.default=Rye;Object.defineProperty(Uf,"__esModule",{value:!0});Uf.resetState=Vye;Uf.log=Gye;Uf.assertNodeList=k$;Uf.setElement=qye;Uf.validateElement=xN;Uf.hide=$ye;Uf.show=Wye;Uf.documentNotReadyOrSSRTesting=Kye;var Uye=Mye,zye=Hye(Uye),Qye=kf;function Hye(t){return t&&t.__esModule?t:{default:t}}var Gd=null;function Vye(){Gd&&(Gd.removeAttribute?Gd.removeAttribute("aria-hidden"):Gd.length!=null?Gd.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(Gd).forEach(function(t){return t.removeAttribute("aria-hidden")})),Gd=null}function Gye(){}function k$(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function qye(t){var e=t;if(typeof e=="string"&&Qye.canUseDOM){var r=document.querySelectorAll(e);k$(r,e),e=r}return Gd=e||Gd,Gd}function xN(t){var e=t||Gd;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,zye.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function $ye(t){var e=!0,r=!1,n=void 0;try{for(var s=xN(t)[Symbol.iterator](),o;!(e=(o=s.next()).done);e=!0){var c=o.value;c.setAttribute("aria-hidden","true")}}catch(u){r=!0,n=u}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}}function Wye(t){var e=!0,r=!1,n=void 0;try{for(var s=xN(t)[Symbol.iterator](),o;!(e=(o=s.next()).done);e=!0){var c=o.value;c.removeAttribute("aria-hidden")}}catch(u){r=!0,n=u}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}}function Kye(){Gd=null}var P1={};Object.defineProperty(P1,"__esModule",{value:!0});P1.resetState=Xye;P1.log=Yye;var Rx={},Ux={};function B7(t,e){t.classList.remove(e)}function Xye(){var t=document.getElementsByTagName("html")[0];for(var e in Rx)B7(t,Rx[e]);var r=document.body;for(var n in Ux)B7(r,Ux[n]);Rx={},Ux={}}function Yye(){}var Zye=function(e,r){return e[r]||(e[r]=0),e[r]+=1,r},Jye=function(e,r){return e[r]&&(e[r]-=1),r},e1e=function(e,r,n){n.forEach(function(s){Zye(r,s),e.add(s)})},t1e=function(e,r,n){n.forEach(function(s){Jye(r,s),r[s]===0&&e.remove(s)})};P1.add=function(e,r){return e1e(e.classList,e.nodeName.toLowerCase()=="html"?Rx:Ux,r.split(" "))};P1.remove=function(e,r){return t1e(e.classList,e.nodeName.toLowerCase()=="html"?Rx:Ux,r.split(" "))};var M1={};Object.defineProperty(M1,"__esModule",{value:!0});M1.log=n1e;M1.resetState=i1e;function r1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var D$=function t(){var e=this;r1e(this,t),this.register=function(r){e.openInstances.indexOf(r)===-1&&(e.openInstances.push(r),e.emit("register"))},this.deregister=function(r){var n=e.openInstances.indexOf(r);n!==-1&&(e.openInstances.splice(n,1),e.emit("deregister"))},this.subscribe=function(r){e.subscribers.push(r)},this.emit=function(r){e.subscribers.forEach(function(n){return n(r,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},y4=new D$;function n1e(){console.log("portalOpenInstances ----------"),console.log(y4.openInstances.length),y4.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function i1e(){y4=new D$}M1.default=y4;var _N={};Object.defineProperty(_N,"__esModule",{value:!0});_N.resetState=l1e;_N.log=c1e;var s1e=M1,o1e=a1e(s1e);function a1e(t){return t&&t.__esModule?t:{default:t}}var Qu=void 0,Tf=void 0,r0=[];function l1e(){for(var t=[Qu,Tf],e=0;e<t.length;e++){var r=t[e];r&&r.parentNode&&r.parentNode.removeChild(r)}Qu=Tf=null,r0=[]}function c1e(){console.log("bodyTrap ----------"),console.log(r0.length);for(var t=[Qu,Tf],e=0;e<t.length;e++){var r=t[e],n=r||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")}function E7(){r0.length!==0&&r0[r0.length-1].focusContent()}function u1e(t,e){!Qu&&!Tf&&(Qu=document.createElement("div"),Qu.setAttribute("data-react-modal-body-trap",""),Qu.style.position="absolute",Qu.style.opacity="0",Qu.setAttribute("tabindex","0"),Qu.addEventListener("focus",E7),Tf=Qu.cloneNode(),Tf.addEventListener("focus",E7)),r0=e,r0.length>0?(document.body.firstChild!==Qu&&document.body.insertBefore(Qu,document.body.firstChild),document.body.lastChild!==Tf&&document.body.appendChild(Tf)):(Qu.parentElement&&Qu.parentElement.removeChild(Qu),Tf.parentElement&&Tf.parentElement.removeChild(Tf))}o1e.default.subscribe(u1e);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(_e){for(var Qe=1;Qe<arguments.length;Qe++){var De=arguments[Qe];for(var Be in De)Object.prototype.hasOwnProperty.call(De,Be)&&(_e[Be]=De[Be])}return _e},n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},s=function(){function _e(Qe,De){for(var Be=0;Be<De.length;Be++){var xe=De[Be];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(Qe,xe.key,xe)}}return function(Qe,De,Be){return De&&_e(Qe.prototype,De),Be&&_e(Qe,Be),Qe}}(),o=ve,c=T0,u=te(c),i=Rf,A=J(i),g=Nye,C=te(g),B=Uf,S=J(B),P=P1,j=J(P),R=kf,N=te(R),U=M1,$=te(U);function J(_e){if(_e&&_e.__esModule)return _e;var Qe={};if(_e!=null)for(var De in _e)Object.prototype.hasOwnProperty.call(_e,De)&&(Qe[De]=_e[De]);return Qe.default=_e,Qe}function te(_e){return _e&&_e.__esModule?_e:{default:_e}}function ue(_e,Qe){if(!(_e instanceof Qe))throw new TypeError("Cannot call a class as a function")}function oe(_e,Qe){if(!_e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qe&&(typeof Qe=="object"||typeof Qe=="function")?Qe:_e}function K(_e,Qe){if(typeof Qe!="function"&&Qe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Qe);_e.prototype=Object.create(Qe&&Qe.prototype,{constructor:{value:_e,enumerable:!1,writable:!0,configurable:!0}}),Qe&&(Object.setPrototypeOf?Object.setPrototypeOf(_e,Qe):_e.__proto__=Qe)}var ce={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},me=function(Qe){return Qe.code==="Tab"||Qe.keyCode===9},Z=function(Qe){return Qe.code==="Escape"||Qe.keyCode===27},Y=0,Le=function(_e){K(Qe,_e);function Qe(De){ue(this,Qe);var Be=oe(this,(Qe.__proto__||Object.getPrototypeOf(Qe)).call(this,De));return Be.setOverlayRef=function(xe){Be.overlay=xe,Be.props.overlayRef&&Be.props.overlayRef(xe)},Be.setContentRef=function(xe){Be.content=xe,Be.props.contentRef&&Be.props.contentRef(xe)},Be.afterClose=function(){var xe=Be.props,ze=xe.appElement,Fe=xe.ariaHideApp,it=xe.htmlOpenClassName,ie=xe.bodyOpenClassName,le=xe.parentSelector,fe=le&&le().ownerDocument||document;ie&&j.remove(fe.body,ie),it&&j.remove(fe.getElementsByTagName("html")[0],it),Fe&&Y>0&&(Y-=1,Y===0&&S.show(ze)),Be.props.shouldFocusAfterRender&&(Be.props.shouldReturnFocusAfterClose?(A.returnFocus(Be.props.preventScroll),A.teardownScopedFocus()):A.popWithoutFocus()),Be.props.onAfterClose&&Be.props.onAfterClose(),$.default.deregister(Be)},Be.open=function(){Be.beforeOpen(),Be.state.afterOpen&&Be.state.beforeClose?(clearTimeout(Be.closeTimer),Be.setState({beforeClose:!1})):(Be.props.shouldFocusAfterRender&&(A.setupScopedFocus(Be.node),A.markForFocusLater()),Be.setState({isOpen:!0},function(){Be.openAnimationFrame=requestAnimationFrame(function(){Be.setState({afterOpen:!0}),Be.props.isOpen&&Be.props.onAfterOpen&&Be.props.onAfterOpen({overlayEl:Be.overlay,contentEl:Be.content})})}))},Be.close=function(){Be.props.closeTimeoutMS>0?Be.closeWithTimeout():Be.closeWithoutTimeout()},Be.focusContent=function(){return Be.content&&!Be.contentHasFocus()&&Be.content.focus({preventScroll:!0})},Be.closeWithTimeout=function(){var xe=Date.now()+Be.props.closeTimeoutMS;Be.setState({beforeClose:!0,closesAt:xe},function(){Be.closeTimer=setTimeout(Be.closeWithoutTimeout,Be.state.closesAt-Date.now())})},Be.closeWithoutTimeout=function(){Be.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},Be.afterClose)},Be.handleKeyDown=function(xe){me(xe)&&(0,C.default)(Be.content,xe),Be.props.shouldCloseOnEsc&&Z(xe)&&(xe.stopPropagation(),Be.requestClose(xe))},Be.handleOverlayOnClick=function(xe){Be.shouldClose===null&&(Be.shouldClose=!0),Be.shouldClose&&Be.props.shouldCloseOnOverlayClick&&(Be.ownerHandlesClose()?Be.requestClose(xe):Be.focusContent()),Be.shouldClose=null},Be.handleContentOnMouseUp=function(){Be.shouldClose=!1},Be.handleOverlayOnMouseDown=function(xe){!Be.props.shouldCloseOnOverlayClick&&xe.target==Be.overlay&&xe.preventDefault()},Be.handleContentOnClick=function(){Be.shouldClose=!1},Be.handleContentOnMouseDown=function(){Be.shouldClose=!1},Be.requestClose=function(xe){return Be.ownerHandlesClose()&&Be.props.onRequestClose(xe)},Be.ownerHandlesClose=function(){return Be.props.onRequestClose},Be.shouldBeClosed=function(){return!Be.state.isOpen&&!Be.state.beforeClose},Be.contentHasFocus=function(){return document.activeElement===Be.content||Be.content.contains(document.activeElement)},Be.buildClassName=function(xe,ze){var Fe=(typeof ze>"u"?"undefined":n(ze))==="object"?ze:{base:ce[xe],afterOpen:ce[xe]+"--after-open",beforeClose:ce[xe]+"--before-close"},it=Fe.base;return Be.state.afterOpen&&(it=it+" "+Fe.afterOpen),Be.state.beforeClose&&(it=it+" "+Fe.beforeClose),typeof ze=="string"&&ze?it+" "+ze:it},Be.attributesFromObject=function(xe,ze){return Object.keys(ze).reduce(function(Fe,it){return Fe[xe+"-"+it]=ze[it],Fe},{})},Be.state={afterOpen:!1,beforeClose:!1},Be.shouldClose=null,Be.moveFromContentToOverlay=null,Be}return s(Qe,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(Be,xe){this.props.isOpen&&!Be.isOpen?this.open():!this.props.isOpen&&Be.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!xe.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var Be=this.props,xe=Be.appElement,ze=Be.ariaHideApp,Fe=Be.htmlOpenClassName,it=Be.bodyOpenClassName,ie=Be.parentSelector,le=ie&&ie().ownerDocument||document;it&&j.add(le.body,it),Fe&&j.add(le.getElementsByTagName("html")[0],Fe),ze&&(Y+=1,S.hide(xe)),$.default.register(this)}},{key:"render",value:function(){var Be=this.props,xe=Be.id,ze=Be.className,Fe=Be.overlayClassName,it=Be.defaultStyles,ie=Be.children,le=ze?{}:it.content,fe=Fe?{}:it.overlay;if(this.shouldBeClosed())return null;var be={ref:this.setOverlayRef,className:this.buildClassName("overlay",Fe),style:r({},fe,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},He=r({id:xe,ref:this.setContentRef,style:r({},le,this.props.style.content),className:this.buildClassName("content",ze),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Je=this.props.contentElement(He,ie);return this.props.overlayElement(be,Je)}}]),Qe}(o.Component);Le.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Le.propTypes={isOpen:u.default.bool.isRequired,defaultStyles:u.default.shape({content:u.default.object,overlay:u.default.object}),style:u.default.shape({content:u.default.object,overlay:u.default.object}),className:u.default.oneOfType([u.default.string,u.default.object]),overlayClassName:u.default.oneOfType([u.default.string,u.default.object]),parentSelector:u.default.func,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,ariaHideApp:u.default.bool,appElement:u.default.oneOfType([u.default.instanceOf(N.default),u.default.instanceOf(R.SafeHTMLCollection),u.default.instanceOf(R.SafeNodeList),u.default.arrayOf(u.default.instanceOf(N.default))]),onAfterOpen:u.default.func,onAfterClose:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,role:u.default.string,contentLabel:u.default.string,aria:u.default.object,data:u.default.object,children:u.default.node,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func,testId:u.default.string},e.default=Le,t.exports=e.default})(Q6,Q6.exports);var h1e=Q6.exports;function O$(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function R$(t){function e(r){var n=this.constructor.getDerivedStateFromProps(t,r);return n??null}this.setState(e.bind(this))}function U$(t,e){try{var r=this.props,n=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}O$.__suppressDeprecationWarning=!0;R$.__suppressDeprecationWarning=!0;U$.__suppressDeprecationWarning=!0;function d1e(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var r=null,n=null,s=null;if(typeof e.componentWillMount=="function"?r="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?s="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),r!==null||n!==null||s!==null){var o=t.displayName||t.name,c=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+c+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=O$,e.componentWillReceiveProps=R$),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=U$;var u=e.componentDidUpdate;e.componentDidUpdate=function(A,g,C){var B=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:C;u.call(this,A,g,B)}}return t}const f1e=Object.freeze(Object.defineProperty({__proto__:null,polyfill:d1e},Symbol.toStringTag,{value:"Module"})),p1e=U4(f1e);Object.defineProperty(y0,"__esModule",{value:!0});y0.bodyOpenClassName=y0.portalClassName=void 0;var T7=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A1e=function(){function t(e,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),z$=ve,v4=db(z$),m1e=nC,x4=db(m1e),g1e=T0,Ts=db(g1e),y1e=h1e,I7=db(y1e),v1e=Uf,x1e=b1e(v1e),Am=kf,L7=db(Am),_1e=p1e;function b1e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function db(t){return t&&t.__esModule?t:{default:t}}function w1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function C1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var S1e=y0.portalClassName="ReactModalPortal",B1e=y0.bodyOpenClassName="ReactModal__Body--open",jg=Am.canUseDOM&&x4.default.createPortal!==void 0,N7=function(e){return document.createElement(e)},P7=function(){return jg?x4.default.createPortal:x4.default.unstable_renderSubtreeIntoContainer};function o2(t){return t()}var fb=function(t){C1e(e,t);function e(){var r,n,s,o;w1e(this,e);for(var c=arguments.length,u=Array(c),i=0;i<c;i++)u[i]=arguments[i];return o=(n=(s=F7(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(u))),s),s.removePortal=function(){!jg&&x4.default.unmountComponentAtNode(s.node);var A=o2(s.props.parentSelector);A&&A.contains(s.node)?A.removeChild(s.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},s.portalRef=function(A){s.portal=A},s.renderPortal=function(A){var g=P7(),C=g(s,v4.default.createElement(I7.default,T7({defaultStyles:e.defaultStyles},A)),s.node);s.portalRef(C)},n),F7(s,o)}return A1e(e,[{key:"componentDidMount",value:function(){if(Am.canUseDOM){jg||(this.node=N7("div")),this.node.className=this.props.portalClassName;var n=o2(this.props.parentSelector);n.appendChild(this.node),!jg&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(n){var s=o2(n.parentSelector),o=o2(this.props.parentSelector);return{prevParent:s,nextParent:o}}},{key:"componentDidUpdate",value:function(n,s,o){if(Am.canUseDOM){var c=this.props,u=c.isOpen,i=c.portalClassName;n.portalClassName!==i&&(this.node.className=i);var A=o.prevParent,g=o.nextParent;g!==A&&(A.removeChild(this.node),g.appendChild(this.node)),!(!n.isOpen&&!u)&&!jg&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Am.canUseDOM||!this.node||!this.portal)){var n=this.portal.state,s=Date.now(),o=n.isOpen&&this.props.closeTimeoutMS&&(n.closesAt||s+this.props.closeTimeoutMS);o?(n.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-s)):this.removePortal()}}},{key:"render",value:function(){if(!Am.canUseDOM||!jg)return null;!this.node&&jg&&(this.node=N7("div"));var n=P7();return n(v4.default.createElement(I7.default,T7({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(n){x1e.setElement(n)}}]),e}(z$.Component);fb.propTypes={isOpen:Ts.default.bool.isRequired,style:Ts.default.shape({content:Ts.default.object,overlay:Ts.default.object}),portalClassName:Ts.default.string,bodyOpenClassName:Ts.default.string,htmlOpenClassName:Ts.default.string,className:Ts.default.oneOfType([Ts.default.string,Ts.default.shape({base:Ts.default.string.isRequired,afterOpen:Ts.default.string.isRequired,beforeClose:Ts.default.string.isRequired})]),overlayClassName:Ts.default.oneOfType([Ts.default.string,Ts.default.shape({base:Ts.default.string.isRequired,afterOpen:Ts.default.string.isRequired,beforeClose:Ts.default.string.isRequired})]),appElement:Ts.default.oneOfType([Ts.default.instanceOf(L7.default),Ts.default.instanceOf(Am.SafeHTMLCollection),Ts.default.instanceOf(Am.SafeNodeList),Ts.default.arrayOf(Ts.default.instanceOf(L7.default))]),onAfterOpen:Ts.default.func,onRequestClose:Ts.default.func,closeTimeoutMS:Ts.default.number,ariaHideApp:Ts.default.bool,shouldFocusAfterRender:Ts.default.bool,shouldCloseOnOverlayClick:Ts.default.bool,shouldReturnFocusAfterClose:Ts.default.bool,preventScroll:Ts.default.bool,parentSelector:Ts.default.func,aria:Ts.default.object,data:Ts.default.object,role:Ts.default.string,contentLabel:Ts.default.string,shouldCloseOnEsc:Ts.default.bool,overlayRef:Ts.default.func,contentRef:Ts.default.func,id:Ts.default.string,overlayElement:Ts.default.func,contentElement:Ts.default.func};fb.defaultProps={isOpen:!1,portalClassName:S1e,bodyOpenClassName:B1e,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,r){return v4.default.createElement("div",e,r)},contentElement:function(e,r){return v4.default.createElement("div",e,r)}};fb.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,_1e.polyfill)(fb);y0.default=fb;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=y0,n=s(r);function s(o){return o&&o.__esModule?o:{default:o}}e.default=n.default,t.exports=e.default})(z6,z6.exports);var E1e=z6.exports;const T1e=Sp(E1e),I1e=({isOpen:t,onRequestClose:e,cropId:r})=>{const[n,s]=ve.useState(""),[o,c]=ve.useState(""),[u,i]=ve.useState(""),[A,g]=ve.useState([]);ve.useEffect(()=>{r&&fetch(`/api/crops/${r}`).then(B=>B.json()).then(B=>{s(B.name),c(B.weight),i(B.category_id)}),fetch("/api/categories").then(B=>B.json()).then(B=>g(B))},[r]);const C=B=>{B.preventDefault(),console.log("Crop updated:",{cropName:n,weight:o,categoryId:u}),e()};return m.jsxs(T1e,{isOpen:t,onRequestClose:e,contentLabel:"Edit Crop Modal",className:"fixed inset-0 bg-white mx-auto my-10 max-w-md md:max-w-lg lg:max-w-xl rounded-lg shadow-lg",overlayClassName:"fixed inset-0 bg-gray-800 bg-opacity-50",style:{content:{width:"90%",maxWidth:"600px",maxHeight:"80vh",margin:"auto",overflowY:"auto",padding:"20px"}},children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Crop"}),m.jsxs("form",{onSubmit:C,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-medium mb-2",children:"Name:"}),m.jsx("input",{type:"text",id:"name",value:n,onChange:B=>s(B.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"weight",className:"block text-gray-700 font-medium mb-2",children:"Weight:"}),m.jsx("input",{type:"text",id:"weight",value:o,onChange:B=>c(B.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full",required:!0})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"category_id",className:"block text-gray-700 font-medium mb-2",children:"Category:"}),m.jsxs("select",{id:"category_id",value:u,onChange:B=>i(B.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full",required:!0,children:[m.jsx("option",{value:"",disabled:!0,children:"Select a category"}),A.map(B=>m.jsx("option",{value:B.id,children:B.name},B.id))]})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{type:"submit",className:"bg-teal-500 text-white font-bold py-2 px-4 rounded hover:bg-teal-600",children:"Update Crop"}),m.jsx("button",{type:"button",onClick:e,className:"bg-gray-400 text-white font-bold py-2 px-4 rounded hover:bg-gray-500",children:"Cancel"})]})]})]})},L1e=()=>m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-400 to-green-200 text-gray-800",children:[m.jsxs("header",{className:"py-10 text-center",children:[m.jsx("h1",{className:"text-5xl font-extrabold text-blue-800",children:"Weather Dashboard"}),m.jsx("p",{className:"text-lg mt-4 font-medium text-gray-700",children:"Accurate weather predictions for better planning."})]}),m.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 p-6",children:[m.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 hover:scale-105 transform transition duration-300",children:[m.jsx(TH,{className:"text-blue-500 text-4xl mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl font-semibold text-center",children:"Daily Chart"}),m.jsx("p",{className:"text-center mt-2 text-gray-600",children:"View weather variations throughout the day."})]}),m.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 hover:scale-105 transform transition duration-300",children:[m.jsx(tF,{className:"text-green-500 text-4xl mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl font-semibold text-center",children:"10-day predictions"}),m.jsx("p",{className:"text-center mt-2 text-gray-600",children:"Discover the weather trends for the coming days."})]}),m.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 hover:scale-105 transform transition duration-300",children:[m.jsx(W_,{className:"text-yellow-500 text-4xl mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl font-semibold text-center",children:"HDD, CDD, GDD"}),m.jsx("p",{className:"text-center mt-2 text-gray-600",children:"Analyze climate indices for agriculture and energy."})]})]})]}),Q$=({id:t,onSave:e,onClose:r})=>{const[n,s]=ve.useState(null),[o,c]=ve.useState(""),[u,i]=ve.useState("");ve.useEffect(()=>{(async()=>{try{const C=await Mr.get(`/api/district/${t}`);s(C.data),c(C.data.name||""),i(C.data.region||"")}catch(C){console.error("Error fetching district:",C)}})()},[t]);const A=async g=>{g.preventDefault();const C={name:o,region:u};try{await e(C),Ao.close()}catch(B){console.error("Error saving district:",B),Ao.fire({icon:"error",title:"Oops...",text:"Failed to save district. Please try again later."})}};return n?m.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Edit District"}),m.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700","aria-label":"Close",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsxs("form",{onSubmit:A,className:"space-y-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-semibold",children:"Name:"}),m.jsx("input",{type:"text",name:"name",id:"name",value:o,onChange:g=>c(g.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter district name"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"region",className:"block text-gray-700 font-semibold",children:"Region:"}),m.jsx("input",{type:"text",name:"region",id:"region",value:u,onChange:g=>i(g.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter region name"})]}),m.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Update"})]})]}):m.jsx("p",{children:"Loading..."})},Eg=N$(Ao),H$=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState(null);ve.useEffect(()=>{s()},[]);const s=async()=>{try{const A=await Mr.get("/api/district/");e(A.data.districts)}catch(A){console.error("Error fetching districts:",A)}},o=async A=>{try{await Mr.delete(`/api/district/${A}/`),e(t.filter(g=>g.id!==A))}catch(g){console.error("Error deleting district:",g)}},c=async A=>{try{Eg.fire({title:"Loading...",text:"Fetching district details",allowOutsideClick:!1,didOpen:()=>{Eg.showLoading()}});const{data:g}=await Mr.get(`/api/district/${A}`);Eg.fire({title:"District Details",html:`<div>
            <p><span class="font-bold">Name:</span> ${g.name}</p>
            <p><span class="font-bold">Region:</span> ${g.region}</p>
          </div>`,showCancelButton:!0,cancelButtonText:"Close",showConfirmButton:!1})}catch(g){console.error("Error fetching district details:",g),Eg.fire({icon:"error",title:"Oops...",text:"Failed to fetch district details. Please try again later."})}},u=async A=>{try{const{data:g}=await Mr.get(`/api/district/${A}`);Eg.fire({title:"Edit District",html:m.jsx(Q$,{id:A,onSave:async C=>{try{await Mr.put(`/api/district/${A}/`,C),s()}catch(B){console.error("Error updating district:",B)}},onClose:()=>Eg.close()}),showConfirmButton:!1,width:"600px",didOpen:()=>{}})}catch(g){console.error("Error fetching district for editing:",g),Eg.fire({icon:"error",title:"Oops...",text:"Failed to fetch district for editing. Please try again later."})}},i=A=>{n(r===A?null:A)};return m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-3xl font-extrabold mb-6 text-center text-teal-700",children:"Districts"}),m.jsx("ul",{className:"mt-4 bg-white rounded-lg shadow-lg",children:t.map(A=>m.jsxs("li",{className:"border-b border-gray-200 py-2 px-4 flex justify-between items-center",children:[m.jsxs("span",{children:[A.name," - ",A.region]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>i(A.id),className:"bg-teal-600 hover:bg-teal-700 text-white font-bold py-1 px-2 rounded",children:"Actions"}),r===A.id&&m.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:m.jsxs("ul",{children:[m.jsx("li",{children:m.jsx("button",{onClick:()=>c(A.id),className:"block px-4 py-2 text-blue-500 hover:bg-gray-100 w-full text-left",children:"View"})}),m.jsx("li",{children:m.jsx("button",{onClick:()=>u(A.id),className:"block px-4 py-2 text-blue-500 hover:bg-gray-100 w-full text-left",children:"Edit"})}),m.jsx("li",{children:m.jsx("button",{onClick:()=>o(A.id),className:"block px-4 py-2 text-red-500 hover:bg-gray-100 w-full text-left",children:"Delete"})})]})})]})]},A.id))})]})},F1e=({isOpen:t,onClose:e})=>{const[r,n]=ve.useState(""),[s,o]=ve.useState("");return t?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create District"}),m.jsxs("form",{children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"name",className:"block text-gray-700",children:"Name:"}),m.jsx("input",{type:"text",id:"name",value:r,onChange:c=>n(c.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter district name"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"region",className:"block text-gray-700",children:"Region:"}),m.jsx("input",{type:"text",id:"region",value:s,onChange:c=>o(c.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-indigo-500",placeholder:"Enter region name"})]}),m.jsxs("div",{className:"flex justify-end",children:[m.jsx("button",{type:"button",onClick:e,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Create"})]})]})]})})]}):null},N1e=()=>{const[t,e]=ve.useState(!1),r=()=>e(!0),n=()=>e(!1);return m.jsxs("div",{className:"p-4",children:[m.jsx("button",{onClick:r,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Create District"}),m.jsx(F1e,{isOpen:t,onClose:n}),m.jsx(H$,{})]})},P1e=({id:t})=>{const[e,r]=ve.useState(null);return ve.useEffect(()=>{(async()=>{try{const s=await Mr.get(`/api/district/${t}`);r(s.data)}catch(s){console.error("Error fetching district:",s)}})()},[t]),e?m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-extrabold mb-4 text-center text-teal-700",children:"District Details"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-bold",children:"Name:"})," ",e.name]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-bold",children:"Region:"})," ",e.region]})]}):m.jsx("p",{children:"Loading..."})},M1e=({isOpen:t,onClose:e,children:r})=>t?m.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-lg w-full",children:[m.jsx("div",{className:"p-6",children:r}),m.jsx("div",{className:"flex justify-end p-4",children:m.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",onClick:e,children:"Close"})})]})}):null,j1e=()=>{const[t,e]=ve.useState(!1),r=()=>e(!0),n=()=>e(!1);return m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Point Management"}),m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("button",{onClick:r,className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-md shadow hover:bg-blue-700 transition duration-300",children:"Create Point"})}),m.jsx(M1e,{isOpen:t,onClose:n,children:m.jsxs("form",{action:"/point/handle_create_point",method:"post",className:"space-y-4",encType:"multipart/form-data",children:[m.jsx("input",{type:"text",name:"longitude",placeholder:"Longitude",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),m.jsx("input",{type:"text",name:"latitude",placeholder:"Latitude",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),m.jsxs("select",{name:"owner_type",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400",children:[m.jsx("option",{value:"",children:"Select Owner Type"}),m.jsx("option",{value:"private",children:"Private"}),m.jsx("option",{value:"public",children:"Public"})]}),m.jsx("input",{type:"text",name:"forest",placeholder:"Forest",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),m.jsx("input",{type:"text",name:"farmer",placeholder:"Farmer",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),m.jsx("input",{type:"text",name:"district",placeholder:"District",className:"border rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-400"}),m.jsx("input",{type:"file",name:"image",accept:"image/*",className:"border rounded-md px-4 py-3 w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-400"}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-md shadow hover:bg-blue-700 transition duration-300",children:"Create Point"})]})})]})},k1e=({isOpen:t,onClose:e,children:r})=>t?m.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all max-w-4xl w-full",children:[m.jsx("div",{className:"p-6",children:r}),m.jsx("div",{className:"flex justify-end p-4",children:m.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700",onClick:e,children:"Close"})})]})}):null,D1e=()=>{const[t,e]=ve.useState(!1),r=()=>e(!0),n=()=>e(!1);return m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Tree Management"}),m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("button",{onClick:r,className:"bg-blue-600 text-white font-semibold px-6 py-3 rounded-md shadow hover:bg-blue-700 transition duration-300",children:"Create Tree"})}),m.jsxs(k1e,{isOpen:t,onClose:n,children:[m.jsx("h2",{className:"text-3xl font-bold text-center text-green-700 mb-6",children:"Create Tree"}),m.jsxs("form",{action:"/tree/handle_create_tree",method:"post",className:"flex flex-wrap space-y-4",encType:"multipart/form-data",children:[m.jsxs("div",{className:"w-full flex",children:[m.jsxs("div",{className:"w-1/2 pr-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"tree_name",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Tree Name:"}),m.jsx("input",{type:"text",name:"tree_name",id:"tree_name",placeholder:"Enter tree name",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"species",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Species:"}),m.jsx("input",{type:"text",name:"species",id:"species",placeholder:"Enter species",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"forest_id",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Forest ID:"}),m.jsx("input",{type:"text",name:"forest_id",id:"forest_id",placeholder:"Enter forest ID",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"point_id",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Point ID:"}),m.jsx("input",{type:"text",name:"point_id",id:"point_id",placeholder:"Enter point ID",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"date_planted",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Date Planted:"}),m.jsx("input",{type:"date",name:"date_planted",id:"date_planted",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]})]}),m.jsxs("div",{className:"w-1/2 pl-4",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"cutting_date",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Cutting Date:"}),m.jsx("input",{type:"date",name:"cutting_date",id:"cutting_date",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"height",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Height (m):"}),m.jsx("input",{type:"number",name:"height",id:"height",placeholder:"Enter height in meters",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"diameter",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Diameter (cm):"}),m.jsx("input",{type:"number",name:"diameter",id:"diameter",placeholder:"Enter diameter in cm",className:"border border-gray-300 rounded-md px-4 py-3 w-full focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"image",className:"block text-lg font-semibold text-gray-600 mb-2",children:"Tree Image:"}),m.jsx("input",{type:"file",name:"image",id:"image",accept:"image/*",className:"border border-gray-300 rounded-md px-4 py-3 w-full text-gray-700 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-sm"})]})]})]}),m.jsx("div",{className:"flex justify-end mt-8",children:m.jsx("button",{type:"submit",className:"bg-green-600 text-white font-semibold px-6 py-3 rounded-md shadow-lg hover:bg-green-700 hover:shadow-xl transition duration-300",children:"Create Tree"})})]})]})]})},O1e=()=>{const t=({title:e,description:r,link:n,buttonText:s,bgColor:o,hoverColor:c,icon:u,iconColor:i})=>m.jsxs("div",{className:`p-6 sm:p-8 lg:p-10 rounded-lg border border-gray-200 shadow-lg transform transition-transform hover:scale-105 hover:shadow-xl ${o} flex flex-col justify-between`,children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-4 sm:mb-6",children:[m.jsx("div",{className:`text-4xl sm:text-5xl mr-3 sm:mr-4 ${i}`,children:u}),m.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-gray-800",children:e})]}),m.jsx("p",{className:"text-gray-600 mb-4 sm:mb-6 text-base sm:text-lg",children:r})]}),m.jsx(Oo,{to:n,className:`bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 sm:py-3 px-4 sm:px-6 rounded-lg transition-colors ${c}`,children:s})]});return m.jsx("div",{className:"bg-gradient-to-r from-teal-50 via-green-50 to-yellow-50 min-h-screen flex justify-center items-center p-6 sm:p-10 font-sans",children:m.jsxs("div",{className:"text-center max-w-5xl mx-auto",children:[m.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold mb-8 sm:mb-12 text-teal-800",children:"Generate Digital Codes"}),m.jsx("p",{className:"text-gray-700 text-lg sm:text-2xl mb-8 sm:mb-14",children:"Choose an option below to get started:"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-10",children:[m.jsx(t,{title:"Produce Stamps",description:"Generate Digital codes for a farm with details such as weight, price per kg, and total value.",link:"/qrproduce",buttonText:"Generate Farm Digital Codes",bgColor:"bg-green-100",hoverColor:"bg-green-200 hover:bg-green-300",icon:m.jsx(W_,{}),iconColor:"text-green-600"}),m.jsx(t,{title:"Forest Conservation Stamps",description:"Generate Digital codes for marking tree cuttings with details such as forest name, tree type, and GPS coordinates.",link:"/qrconservation",buttonText:"Generate Tree Cutting Digital Codes",bgColor:"bg-blue-100",hoverColor:"bg-blue-200 hover:bg-blue-300",icon:m.jsx(v_,{}),iconColor:"text-green-700"}),m.jsx(t,{title:"Digital Export Stamps",description:"Generate EUDR export stamps for a specified farm. Upload a zip file containing the Export stamps codes images.",link:"/qrexport",buttonText:"Generate Export Digital Codes",bgColor:"bg-red-100",hoverColor:"bg-red-200 hover:bg-red-300",icon:m.jsx(nF,{}),iconColor:"text-purple-600"}),m.jsx(t,{title:"Fertilizer Stamps",description:"Generate Digital codes for fertilizers.",link:"/qrconservation",buttonText:"Generate Digital Codes",bgColor:"bg-yellow-100",hoverColor:"bg-blue-200 hover:bg-blue-300",icon:m.jsx(v_,{}),iconColor:"text-green-700"})]})]})})};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U1e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),M7=t=>{const e=U1e(t);return e.charAt(0).toUpperCase()+e.slice(1)},V$=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),z1e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1e=ve.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:c,...u},i)=>ve.createElement("svg",{ref:i,...Q1e,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:V$("lucide",s),...!o&&!z1e(u)&&{"aria-hidden":"true"},...u},[...c.map(([A,g])=>ve.createElement(A,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=(t,e)=>{const r=ve.forwardRef(({className:n,...s},o)=>ve.createElement(H1e,{ref:o,iconNode:e,className:V$(`lucide-${R1e(M7(t))}`,`lucide-${t}`,n),...s}));return r.displayName=M7(t),r};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],G1e=vA("check",V1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1e=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],q6=vA("chevron-left",q1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1e=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$6=vA("chevron-right",$1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_4=vA("circle-alert",W1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],j7=vA("circle-check",K1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Y1e=vA("file-text",X1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1e=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],J1e=vA("leaf",Z1e);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eve=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],W6=vA("play",eve);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tve=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],K6=vA("x",tve),LC=({currentStep:t,totalSteps:e,stepNames:r})=>m.jsx("div",{className:"flex justify-center items-center mb-8 overflow-x-auto",children:r.map((n,s)=>m.jsxs("div",{className:"flex items-center flex-shrink-0",children:[m.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ${s<t?"bg-teal-600 border-teal-600 text-white":s===t?"bg-teal-100 border-teal-600 text-teal-600":"bg-gray-100 border-gray-300 text-gray-400"}`,children:s<t?m.jsx(G1e,{size:16}):s+1}),m.jsx("span",{className:`ml-2 text-sm font-medium whitespace-nowrap ${s<=t?"text-teal-700":"text-gray-400"}`,children:n}),s<r.length-1&&m.jsx("div",{className:`w-12 h-0.5 mx-4 ${s<t?"bg-teal-600":"bg-gray-300"}`})]},s))}),FC=({currentStep:t,totalSteps:e,onPrevStep:r,onNextStep:n,onSubmit:s,isStepValid:o})=>m.jsxs("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[m.jsxs("button",{type:"button",onClick:r,disabled:t===0,className:"flex items-center px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[m.jsx(q6,{size:20,className:"mr-1"}),"Previous"]}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",t+1," of ",e]}),t<e-1?m.jsxs("button",{type:"button",onClick:n,disabled:!o,className:"flex items-center px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Next",m.jsx($6,{size:20,className:"ml-1"})]}):m.jsx("button",{type:"button",onClick:s,disabled:!o,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Generate QR & Receipt"})]}),G$=({label:t,name:e,type:r="text",value:n,onChange:s,required:o,readOnly:c=!1,placeholder:u})=>m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"text-lg text-gray-800 mb-2 block",htmlFor:e,children:t}),m.jsx("input",{type:r,id:e,name:e,value:n,onChange:s,required:o,readOnly:c,placeholder:u,className:`border-2 p-4 w-full rounded-lg focus:outline-none focus:ring-4 focus:ring-teal-400 ${c?"bg-gray-100 cursor-not-allowed text-gray-600":""}`})]}),X6=({label:t,name:e,value:r,options:n,onChange:s,required:o,disabled:c=!1,placeholder:u})=>m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"text-lg text-gray-800 mb-2 block",htmlFor:e,children:t}),m.jsxs("select",{id:e,name:e,value:r,onChange:s,required:o,disabled:c,className:`border-2 p-4 w-full rounded-lg focus:outline-none focus:ring-4 focus:ring-teal-400 ${c?"bg-gray-100 cursor-not-allowed text-gray-600":""}`,children:[m.jsx("option",{value:"",children:u||`Select ${t}`}),n.map(i=>m.jsx("option",{value:i.value,children:i.label},i.value))]})]}),rve=({index:t,formData:e,onChange:r,onFarmChange:n,onAddFarm:s,onRemoveFarm:o,farms:c,districts:u,isLastBlock:i,canRemove:A})=>{const g=C=>{console.log("FarmBlock: Farm selection triggered",C.target.value,"Index:",t),console.log("FarmBlock: onFarmChange function exists:",typeof n),n?(console.log("FarmBlock: Calling onFarmChange"),n(C,t)):(console.log("FarmBlock: onFarmChange not provided, using fallback"),r(C))};return m.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-6 bg-gray-50",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h3",{className:"text-lg font-medium text-teal-700",children:["Farm #",t+1]}),m.jsxs("div",{className:"flex gap-2",children:[A&&m.jsx("button",{type:"button",onClick:()=>o(t),className:"text-red-600 hover:text-red-800 text-sm font-medium transition-colors",children:"Remove"}),i&&m.jsx("button",{type:"button",onClick:s,className:"text-teal-600 hover:text-teal-800 text-sm font-medium transition-colors",children:"+ Add Farm"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[m.jsx(X6,{label:"Farm ID",name:`farm_${t}_id`,value:e[`farm_${t}_id`]||"",onChange:g,options:c.map(C=>({value:C.id,label:`${C.name} - ${C.subcounty}`})),required:!0}),m.jsx(G$,{label:"Phone Number",name:`farm_${t}_phone`,value:e[`farm_${t}_phone`]||"",onChange:r,readOnly:!!e[`farm_${t}_id`],placeholder:e[`farm_${t}_id`]?"Auto-filled from farm data":"Will auto-fill when farm is selected",required:!0}),m.jsx(X6,{label:"District",name:`farm_${t}_district`,value:e[`farm_${t}_district`]||"",onChange:r,options:u.map(C=>({value:C.id,label:C.name})),disabled:!!e[`farm_${t}_id`],placeholder:e[`farm_${t}_id`]?"Auto-filled from farm data":"Will auto-fill when farm is selected",required:!0})]}),e[`farm_${t}_id`]&&m.jsx("div",{className:"mt-3 text-sm text-gray-600",children:m.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 rounded-full",children:" Farm data auto-filled"})})]})},NC=({step:t,formData:e,onChange:r,onCategoryChange:n,onStoreChange:s,farmBlocks:o,onAddFarm:c,onRemoveFarm:u,onFarmChange:i,farms:A,districts:g})=>{const C=B=>{let S=r;return B.name==="produceCategory"?S=n:B.name==="agroInputType"||B.name==="agroInputCategory"?S=r:B.name==="store_id"?S=P=>s(P,"id"):B.name==="store_name"&&(S=P=>s(P,"name")),B.type==="select"?m.jsx(X6,{label:B.label,name:B.name,value:e[B.name]||"",onChange:S,options:B.options||[],required:B.required},B.name):m.jsx(G$,{label:B.label,type:B.type||"text",name:B.name,value:e[B.name]||"",onChange:r,required:B.required},B.name)};return m.jsx("div",{className:"min-h-[400px]",children:t.fields.map((B,S)=>m.jsx("div",{children:B.type==="group"?B.label.includes("Farm")?S===0&&o.map((P,j)=>m.jsx(rve,{index:j,formData:e,onChange:r,onFarmChange:i,onAddFarm:c,onRemoveFarm:u,farms:A,districts:g,isLastBlock:j===o.length-1,canRemove:o.length>1},j)):m.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-6 bg-gray-50",children:[m.jsx("h3",{className:"text-lg font-medium text-teal-700 mb-4",children:B.label}),m.jsx("div",{className:"grid grid-cols-1 gap-4",children:B.fields.map(C)})]}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:C(B)})},S))})},PC=({qrData:t,onDownloadPDF:e,isDownloading:r})=>t?m.jsxs(m.Fragment,{children:[m.jsxs("div",{id:"receipt",className:"bg-white p-6 rounded-lg shadow-lg border",children:[m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("img",{src:"https://www.nkusu.com/parrotlogo.png",alt:"Logo",className:"w-16 h-16 mx-auto mb-2"}),m.jsx("h2",{className:"text-xl font-bold text-teal-700",children:"NKUSU DIGITAL STAMPS"}),m.jsx("p",{className:"text-gray-600",children:"Digital receipt for produce transaction"})]}),m.jsx("div",{className:"text-center mb-4",children:m.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(t)}`,alt:"QR Code",className:"mx-auto border rounded"})}),m.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded border overflow-auto max-h-40",children:t})]}),m.jsx("button",{onClick:e,className:`w-full mt-4 text-white px-6 py-3 rounded-lg shadow transition-colors ${r?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,disabled:r,children:r?m.jsxs("span",{className:"flex items-center justify-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating..."]}):"Download PDF"})]}):m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[m.jsx("div",{className:"w-32 h-32 mx-auto mb-4 bg-gray-100 rounded-lg flex items-center justify-center",children:m.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded animate-pulse"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Receipt Preview"}),m.jsx("p",{className:"text-gray-400",children:"Complete the form to generate your QR code and digital receipt"})]}),nve=(t,e,r,n,s)=>[{title:"Farm Information",fields:t.map((o,c)=>({type:"group",label:`Farm #${c+1}`,fields:[{type:"select",name:`farm_${c}_id`,label:"Farm ID",required:!0},{type:"text",name:`farm_${c}_phone`,label:"Phone Number",required:!0},{type:"select",name:`farm_${c}_district`,label:"District",required:!0}]}))},{title:"Product Information",fields:[{type:"text",name:"batch_number",label:"Batch Number",required:!0},{type:"select",name:"country_of_origin",label:"Country of Origin",options:e.map(o=>({value:o.nom_en_gb,label:o.nom_en_gb})),required:!0},{type:"select",name:"produceCategory",label:"Produce Category",options:r.map(o=>({value:o.name,label:o.name})),required:!0},{type:"select",name:"Crop_grade",label:"Crop Grade",options:n.map(o=>({value:o.grade_value,label:`${o.grade_value} - ${o.description||""}`})),required:!0}]},{title:"Transaction Details",fields:[{type:"select",name:"season",label:"Season",options:["Season1","Season2","Season3","Season4"].map(o=>({value:o,label:o})),required:!0},{type:"number",name:"produce_weight",label:"Produce Weight (kg)",required:!0},{type:"number",name:"price_per_kg",label:"Price Per Kg (UGX)",required:!0},{type:"number",name:"total_value",label:"Total Value (UGX)",required:!0}]},{title:"Store & Payment Information",fields:[{type:"select",name:"payment_type",label:"Payment Type",options:[{value:"cash",label:"Cash"},{value:"bank_transfer",label:"Bank Transfer"}],required:!0},{type:"select",name:"store_id",label:"Store ID",options:s.map(o=>({value:o.id,label:o.id})),required:!0},{type:"select",name:"store_name",label:"Store Name",options:s.map(o=>({value:o.name,label:o.name})),required:!0},{type:"date",name:"transaction_date",label:"Transaction Date",required:!0}]}],ive=["Farms","Product","Transaction","Store"],sm=(t,e)=>{const[r,n]=ve.useState([]);return ve.useEffect(()=>{(async()=>{try{const o=await Mr.get(t);n(o.data[e]||[])}catch(o){console.error(`Error fetching ${e}:`,o)}})()},[t,e]),r},sve=()=>{var Le;const[t,e]=ve.useState(0),[r,n]=ve.useState({}),[s,o]=ve.useState([{id:"",props:{}}]),[c,u]=ve.useState([]),[i,A]=ve.useState(null),[g,C]=ve.useState(!1),B=sm("/api/farm/","farms"),S=sm("/api/district/","districts"),P=sm("/api/pays/","pays"),j=sm("/api/store/","stores"),R=sm("/api/producecategory/","categories"),N=nve(s,P,R,c,j),U=_e=>{n(Qe=>({...Qe,[_e.target.name]:_e.target.value}))},$=async _e=>{const Qe=_e.target.value;n(Be=>({...Be,produceCategory:Qe}));const De=R.find(Be=>Be.name===Qe);if(De)try{const Be=await Mr.get(`/api/grade/getbycrop/${De.id}`);u(Be.data.status==="success"?Be.data.grades:[])}catch(Be){console.error("Error fetching grades:",Be),u([])}},J=(_e,Qe)=>{const De=_e.target.value;let Be=null;Qe==="id"?Be=j.find(xe=>xe.id.toString()===De):Qe==="name"&&(Be=j.find(xe=>xe.name===De)),n(Be?xe=>({...xe,store_id:Be.id,store_name:Be.name}):xe=>({...xe,[Qe==="id"?"store_id":"store_name"]:De}))},te=async(_e,Qe)=>{const De=_e.target.value;if(n(Be=>({...Be,[`farm_${Qe}_id`]:De})),o(Be=>Be.map((xe,ze)=>ze===Qe?{...xe,id:De}:xe)),De)try{const Be=await Mr.get(`/api/farm/${De}`);if(Be.data.status==="success"){const xe=Be.data.data;n(ze=>({...ze,[`farm_${Qe}_phone`]:xe.phonenumber1||xe.phonenumber2||"",[`farm_${Qe}_district`]:xe.district_id||""})),console.log("Updated formData with:",{phone:xe.phonenumber1,district:xe.district_id})}}catch(Be){console.error("Error fetching farm properties:",Be)}},ue=()=>{o(_e=>[..._e,{id:"",props:{}}])},oe=_e=>{s.length>1&&(o(Qe=>Qe.filter((De,Be)=>Be!==_e)),n(Qe=>{const De={...Qe};return delete De[`farm_${_e}_id`],delete De[`farm_${_e}_phone`],delete De[`farm_${_e}_district`],De}))},K=()=>{t<N.length-1&&e(t+1)},ce=()=>{t>0&&e(t-1)},me=()=>{var Qe;const _e=((Qe=N[t])==null?void 0:Qe.fields)||[];for(let De of _e)if(De.type==="group"){for(let Be of De.fields)if(Be.required&&!r[Be.name])return!1}else if(De.required&&!r[De.name])return!1;return!0},Z=()=>{const _e=JSON.stringify(r,null,2);A(_e)},Y=async()=>{if(!g){C(!0);try{const _e=JSON.parse(i),Qe=parseInt(_e.batch_number,10);if(isNaN(Qe)){console.error("Invalid batch number. Must be a number."),C(!1);return}const De=[];for(let Fe=0;Fe<Qe;Fe++){const it={..._e,batch_number:(Fe+1).toString()};De.push(it)}const Be=await Mr.post("/api/qrcode/generate_pdf",{qr_data_list:De,description:"Digital receipt for produce transaction."},{responseType:"blob"}),xe=window.URL.createObjectURL(new Blob([Be.data])),ze=document.createElement("a");ze.href=xe,ze.setAttribute("download",`receipts_${_e.batch_number}_batches.pdf`),document.body.appendChild(ze),ze.click(),ze.remove()}catch(_e){console.error("Erreur lors du tlchargement du PDF:",_e)}finally{C(!1)}}};return m.jsx("div",{className:"bg-gradient-to-br from-teal-50 via-white to-blue-50 min-h-screen py-8",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-teal-700",children:"Digital receipt for produce transaction"}),m.jsx(LC,{currentStep:t,totalSteps:N.length,stepNames:ive}),m.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[m.jsx("div",{className:"w-1/2",children:m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibent mb-6 text-teal-700",children:(Le=N[t])==null?void 0:Le.title}),m.jsx(NC,{step:N[t],formData:r,onChange:U,onCategoryChange:$,onStoreChange:J,farmBlocks:s,onAddFarm:ue,onRemoveFarm:oe,onFarmChange:te,farms:B,districts:S}),m.jsx(FC,{currentStep:t,totalSteps:N.length,onPrevStep:ce,onNextStep:K,onSubmit:Z,isStepValid:me()})]})}),m.jsx("div",{className:"w-1/2",children:m.jsx("div",{className:"sticky top-8",children:m.jsx(PC,{qrData:i,onDownloadPDF:Y,isDownloading:g})})})]})]})})},ove=()=>[{title:"Forest Information",fields:[{type:"text",name:"forest_name",label:"Forest Name",required:!0},{type:"text",name:"forest_id",label:"Forest ID",required:!0},{type:"text",name:"gps_coordinates",label:"GPS Coordinates",required:!0}]},{title:"Tree Information",fields:[{type:"text",name:"tree_type",label:"Tree Type",required:!0},{type:"number",name:"height",label:"Height (m)",required:!0},{type:"number",name:"diameter",label:"Diameter (cm)",required:!0}]},{title:"Cutting Information",fields:[{type:"date",name:"date_cutting",label:"Date of Cutting",required:!0},{type:"text",name:"batch_number",label:"Batch Number",required:!0}]}],ave=["Forest Info","Tree Info","Cutting Info"],lve=()=>{var R;const[t,e]=ve.useState(0),[r,n]=ve.useState({}),[s,o]=ve.useState(null),[c,u]=ve.useState(!1),i=ove(),A=N=>{n(U=>({...U,[N.target.name]:N.target.value}))},g=()=>{t<i.length-1&&e(t+1)},C=()=>{t>0&&e(t-1)},B=()=>{var U;const N=((U=i[t])==null?void 0:U.fields)||[];for(let $ of N)if($.type==="group"){for(let J of $.fields)if(J.required&&!r[J.name])return!1}else if($.required&&!r[$.name])return!1;return!0},S=N=>`
Forest Name: ${N.forest_name}
Forest ID: ${N.forest_id}
Tree Type: ${N.tree_type}
Date of Cutting: ${N.date_cutting}
GPS: ${N.gps_coordinates}
Height: ${N.height}m
Diameter: ${N.diameter}cm
Batch: ${N.batch_number}
    `.trim(),P=()=>{const N=S(r);o(N)},j=async()=>{if(!c){u(!0);try{const N=JSON.parse(JSON.stringify(r)),U=parseInt(N.batch_number,10);if(isNaN(U)){console.error("Invalid batch number. Must be a number."),u(!1);return}const $=[];for(let oe=0;oe<U;oe++){const K={...N,batch_number:(oe+1).toString()};$.push(K)}const J=await Mr.post("/api/qrcode/generate_pdf",{qr_data_list:$,description:"Digital receipt for tree cutting conservation."},{responseType:"blob"}),te=window.URL.createObjectURL(new Blob([J.data])),ue=document.createElement("a");ue.href=te,ue.setAttribute("download",`conservation_receipts_${N.batch_number}_batches.pdf`),document.body.appendChild(ue),ue.click(),ue.remove()}catch(N){console.error("Erreur lors du tlchargement du PDF:",N)}finally{u(!1)}}};return m.jsx("div",{className:"bg-gradient-to-br from-green-50 via-white to-emerald-50 min-h-screen py-8",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-emerald-700",children:"Generate Digital Codes for Tree Cutting"}),m.jsx(LC,{currentStep:t,totalSteps:i.length,stepNames:ave}),m.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[m.jsx("div",{className:"w-1/2",children:m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6 text-emerald-700",children:(R=i[t])==null?void 0:R.title}),m.jsx(NC,{step:i[t],formData:r,onChange:A,onCategoryChange:null,onStoreChange:null,farmBlocks:[],onAddFarm:null,onRemoveFarm:null,farms:[],districts:[]}),m.jsx(FC,{currentStep:t,totalSteps:i.length,onPrevStep:C,onNextStep:g,onSubmit:P,isStepValid:B()})]})}),m.jsx("div",{className:"w-1/2",children:m.jsx("div",{className:"sticky top-8",children:m.jsx(PC,{qrData:s,onDownloadPDF:j,isDownloading:c})})})]})]})})},cve=(t,e,r,n,s,o,c,u,i)=>[{title:"Farm & Group Information",fields:[...t.map((A,g)=>({type:"group",label:`Farm #${g+1}`,fields:[{type:"select",name:`farm_${g}_id`,label:"Farm ID",required:!0},{type:"text",name:`farm_${g}_phone`,label:"Farmer Phone Number",required:!0},{type:"select",name:`farm_${g}_district`,label:"District",required:!0}]})),{type:"select",name:"farmergroup_id",label:"Farmer Group",options:e.map(A=>({value:A.id,label:A.name})),required:!0},{type:"text",name:"geolocation",label:"Geolocation",required:!0}]},{title:"Crop Information",fields:[{type:"select",name:"crop_category",label:"Crop Category",options:n.map(A=>({value:A.id,label:A.name})),required:!0},{type:"select",name:"crop",label:"Crop",options:s.map(A=>({value:A.id,label:A.name})),required:!0},...o.length>0?[{type:"select",name:"crop_grade",label:"Crop Grade",options:o.map(A=>({value:A.grade_value,label:A.grade_value})),required:!0}]:[],{type:"select",name:"coffeeType",label:"Coffee Type",options:[{value:"Robusta",label:"Robusta"},{value:"Arabica",label:"Arabica"},{value:"Other",label:"Other"}],required:!0},...i?[{type:"select",name:"hscode",label:"HS Code",options:i==="Robusta"?[{value:"0901.11",label:"0901.11"},{value:"0901.21",label:"0901.21"}]:i==="Arabica"?[{value:"0901.12",label:"0901.12"},{value:"0901.22",label:"0901.22"}]:[{value:"0901.90",label:"0901.90"}],required:!0}]:[]]},{title:"Product Details",fields:[{type:"number",name:"batch_number",label:"Batch Number",required:!0},{type:"text",name:"produce_weight",label:"Produce Weight (Kgs)",required:!0},{type:"select",name:"season",label:"Season",options:[{value:"Season 1",label:"Season 1"},{value:"Season 2",label:"Season 2"},{value:"Season 3",label:"Season 3"},{value:"Season 4",label:"Season 4"}],required:!0}]},{title:"Store Information",fields:[{type:"select",name:"store_id",label:"Store ID",options:c.map(A=>({value:A.id,label:A.id})),required:!0},{type:"select",name:"store_name",label:"Store Name",options:c.map(A=>({value:A.name,label:A.name})),required:!0}]},{title:"Export Information",fields:[{type:"select",name:"country_of_origin",label:"Country of Origin",options:u.map(A=>({value:A.nom_en_gb,label:A.nom_en_gb})),required:!0},{type:"select",name:"destination_country",label:"Destination Country",options:u.map(A=>({value:A.nom_en_gb,label:A.nom_en_gb})),required:!0},{type:"text",name:"channel_partner",label:"Channel Partner",required:!0},{type:"text",name:"end_customer_name",label:"End Customer Name",required:!0},{type:"datetime-local",name:"timestamp",label:"Timestamp (Transaction Date)",required:!0}]}],uve=["Farm & Group","Crop Info","Product","Store","Export Info"],hve=()=>{var fr;const[t,e]=ve.useState(0),[r,n]=ve.useState({farm_id:"",farmergroup_id:"",district_name:"",country_of_origin:"",crop_category:"",crop_grade:"",crop:"",produce_weight:"",batch_number:"",harvest_date:"",timestamp:"",geolocation:"",store_name:"",season:"",destination_country:"",channel_partner:"",end_customer_name:"",coffeeType:"",hscode:"",store_id:""}),[s,o]=ve.useState([]),[c,u]=ve.useState([{id:"",props:{}}]),[i,A]=ve.useState([]),[g,C]=ve.useState([]),[B,S]=ve.useState([]),[P,j]=ve.useState([]),[R,N]=ve.useState([]),[U,$]=ve.useState([]),[J,te]=ve.useState(""),[ue,oe]=ve.useState([]),[K,ce]=ve.useState(""),[me,Z]=ve.useState([]),[Y,Le]=ve.useState(null),[_e,Qe]=ve.useState(!1),[De,Be]=ve.useState(null),xe=cve(c,B,g,i,ue,me,U,R,r.coffeeType);ve.useEffect(()=>{(async()=>{try{const[Re,hr,Ut,vt,Yt,ar,nr]=await Promise.all([Mr.get("/api/farm/"),Mr.get("/api/district/"),Mr.get("/api/farmergroup/"),Mr.get("/api/crop/"),Mr.get("/api/pays/"),Mr.get("/api/producecategory/"),Mr.get("/api/store/")]);o(Re.data.farms||[]),C(hr.data.districts||[]),S(Ut.data||[]),j(vt.data.crops||[]),N(Yt.data.pays||[]),A(ar.data.categories||[]),$(nr.data.stores||[])}catch(Re){console.error("Error fetching data:",Re)}})()},[]);const ze=Ye=>{const{name:Re,value:hr}=Ye.target;n(Ut=>({...Ut,[Re]:hr})),Re==="crop_category"?Fe(hr):Re==="crop"?it(hr):Re==="coffeeType"&&n(Ut=>({...Ut,hscode:""}))},Fe=Ye=>{te(Ye);const Re=P.filter(hr=>hr.category_id.toString()===Ye);oe(Re),n(hr=>({...hr,crop_category:Ye,crop:"",crop_grade:""})),Z([]),ce("")},it=Ye=>{ce(Ye),n(Re=>({...Re,crop:Ye,crop_grade:""})),ie(Ye)},ie=async Ye=>{var Re,hr;if(Ye)try{const Ut=await Mr.get(`/api/grade/getbycrop/${Ye}`);Z(Ut.data.grades||[]),Be(null)}catch(Ut){console.error("Error fetching grades:",Ut),Be(((hr=(Re=Ut.response)==null?void 0:Re.data)==null?void 0:hr.message)||"An error occurred while fetching grades."),Z([])}else Z([])},le=async(Ye,Re)=>{const hr=Ye.target.value;if(n(Ut=>({...Ut,[`farm_${Re}_id`]:hr})),u(Ut=>Ut.map((vt,Yt)=>Yt===Re?{...vt,id:hr}:vt)),hr)try{const Ut=await Mr.get(`/api/farm/${hr}`);if(Ut.data.status==="success"){const vt=Ut.data.data;u(Yt=>Yt.map((ar,nr)=>nr===Re?{...ar,id:hr,props:vt}:ar)),n(Yt=>({...Yt,[`farm_${Re}_phone`]:vt.phonenumber1||vt.phonenumber2||"",[`farm_${Re}_district`]:vt.district_id||"",...vt}))}}catch(Ut){console.error("Error fetching farm properties:",Ut)}},fe=()=>{u(Ye=>[...Ye,{id:"",props:{}}])},be=Ye=>{c.length>1&&(u(Re=>Re.filter((hr,Ut)=>Ut!==Ye)),n(Re=>{const hr={...Re};return delete hr[`farm_${Ye}_id`],delete hr[`farm_${Ye}_phone`],delete hr[`farm_${Ye}_district`],hr}))},He=(Ye,Re)=>{const hr=Ye.target.value;let Ut=null;Re==="id"?Ut=U.find(vt=>vt.id.toString()===hr):Re==="name"&&(Ut=U.find(vt=>vt.name===hr)),n(Ut?vt=>({...vt,store_id:Ut.id,store_name:Ut.name}):vt=>({...vt,[Re==="id"?"store_id":"store_name"]:hr}))},Je=Ye=>{const{name:Re}=Ye.target,hr=Re.match(/^farm_(\d+)_id$/);if(hr){const Ut=parseInt(hr[1],10);le(Ye,Ut)}else Re==="store_id"?He(Ye,"id"):Re==="store_name"?He(Ye,"name"):ze(Ye)},tt=()=>{t<xe.length-1&&e(t+1)},st=()=>{t>0&&e(t-1)},Ct=()=>{var Re;const Ye=((Re=xe[t])==null?void 0:Re.fields)||[];for(let hr of Ye)if(hr.type==="group"){for(let Ut of hr.fields)if(Ut.required&&!r[Ut.name])return!1}else if(hr.required&&!r[hr.name])return!1;return!0},Ue=Ye=>{const Re=c.map((hr,Ut)=>({id:Ye[`farm_${Ut}_id`],phone:Ye[`farm_${Ut}_phone`],district:Ye[`farm_${Ut}_district`]})).filter(hr=>hr.id);return`
Farms: ${Re.map(hr=>`www.nkusu.com/farmmanager/${hr.id}`).join(", ")}
Phones: ${Re.map(hr=>hr.phone).join(", ")}
Districts: ${Re.map(hr=>hr.district).join(", ")}
Farmer Group: ${Ye.farmergroup_id}
Destination: ${Ye.destination_country}
CP: ${Ye.channel_partner}
ECN: ${Ye.end_customer_name}
Store Name: ${Ye.store_name}
Crop Category: ${Ye.crop_category}
Grade: ${Ye.crop_grade||"N/A"}
Coffee Type: ${Ye.coffeeType}
HS Code: ${Ye.hscode}
Season: ${Ye.season}
Weight: ${Ye.produce_weight}
Geolocation: ${Ye.geolocation}
Country Origin: ${Ye.country_of_origin}
Transaction Date: ${Ye.timestamp}
    `.trim()},Ft=()=>{const Ye=Ue(r);Le(Ye)},Zt=async()=>{if(!_e){Qe(!0);try{const Ye=JSON.parse(JSON.stringify(r)),Re=parseInt(Ye.batch_number,10);if(isNaN(Re)){console.error("Invalid batch number. Must be a number."),Qe(!1);return}const hr=[];for(let ar=0;ar<Re;ar++){const nr={...Ye,batch_number:(ar+1).toString()};hr.push(nr)}const Ut=await Mr.post("/api/qrcode/generate_pdf",{qr_data_list:hr,description:"Digital receipt for export transaction."},{responseType:"blob"}),vt=window.URL.createObjectURL(new Blob([Ut.data])),Yt=document.createElement("a");Yt.href=vt,Yt.setAttribute("download",`export_receipts_${Ye.batch_number}_batches.pdf`),document.body.appendChild(Yt),Yt.click(),Yt.remove()}catch(Ye){console.error("Erreur lors du tlchargement du PDF:",Ye)}finally{Qe(!1)}}};return m.jsx("div",{className:"bg-gradient-to-br from-blue-50 via-white to-indigo-50 min-h-screen py-8",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-blue-700",children:"Digital Export Stamps"}),m.jsx(LC,{currentStep:t,totalSteps:xe.length,stepNames:uve}),m.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[m.jsx("div",{className:"w-1/2",children:m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6 text-blue-700",children:(fr=xe[t])==null?void 0:fr.title}),De&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:De}),m.jsx(NC,{step:xe[t],formData:r,onChange:Je,onCategoryChange:Fe,onStoreChange:He,farmBlocks:c,onAddFarm:fe,onRemoveFarm:be,onFarmChange:le,farms:s,districts:g}),m.jsx(FC,{currentStep:t,totalSteps:xe.length,onPrevStep:st,onNextStep:tt,onSubmit:Ft,isStepValid:Ct()})]})}),m.jsx("div",{className:"w-1/2",children:m.jsx("div",{className:"sticky top-8",children:m.jsx(PC,{qrData:Y,onDownloadPDF:Zt,isDownloading:_e})})})]})]})})},dve=(t,e,r,n)=>[{title:"Farm Information",fields:t.map((s,o)=>({type:"group",label:`Farm #${o+1}`,fields:[{type:"select",name:`farm_${o}_id`,label:"Farm ID",required:!0},{type:"text",name:`farm_${o}_phone`,label:"Phone Number",required:!0},{type:"select",name:`farm_${o}_district`,label:"District",required:!0}]}))},{title:"AgroInput Information",fields:[{type:"text",name:"batch_number",label:"Batch Number",required:!0},{type:"select",name:"agroInputType",label:"AgroInput Type",options:[{value:"Fertilizer",label:"Fertilizer"},{value:"Pesticide",label:"Pesticide"}],required:!0},...r==="Fertilizer"?[{type:"select",name:"agroInputCategory",label:"AgroInput Category",options:[{value:"Chemical",label:"Chemical"},{value:"Organic",label:"Organic"}],required:!0}]:[],...r==="Fertilizer"&&n?[{type:"select",name:"agroInputSubCategory",label:"AgroInput Level",options:[1,2,3,4].map(s=>({value:`${n} Level ${s}`,label:`${n} Level ${s}`})),required:!0}]:[],{type:"date",name:"application_date",label:"Application Date",required:!0},{type:"number",name:"application_rate",label:"Application Rate (kg/Acre)",required:!0}]},{title:"Product Details",fields:[{type:"number",name:"agroinput_weight",label:"AgroInput Weight (Kgs)",required:!0},{type:"number",name:"price_per_kg",label:"Price / Kg (Ugshs)",required:!0},{type:"number",name:"total_price",label:"Total Price (Ugshs)",required:!0}]},{title:"Store & Transaction Information",fields:[{type:"select",name:"payment_type",label:"Payment Type",options:[{value:"cash",label:"Cash"},{value:"credit",label:"Credit"},{value:"mobilemoney",label:"Mobile Money"},{value:"visa",label:"Visa"}],required:!0},{type:"select",name:"store_id",label:"Store ID",options:e.map(s=>({value:s.id,label:s.id})),required:!0},{type:"select",name:"store_name",label:"Store Name",options:e.map(s=>({value:s.name,label:s.name})),required:!0},{type:"date",name:"transaction_date",label:"Transaction Date",required:!0}]}],fve=["Farms","AgroInput","Product","Store & Transaction"],pve=()=>{var De;const[t,e]=ve.useState(0),[r,n]=ve.useState({}),[s,o]=ve.useState([{id:"",props:{}}]),[c,u]=ve.useState(null),[i,A]=ve.useState(!1),[g,C]=ve.useState(""),[B,S]=ve.useState(""),P=sm("/api/farm/","farms"),j=sm("/api/district/","districts"),R=sm("/api/store/","stores"),N=dve(s,R,g,B),U=Be=>{n(xe=>({...xe,[Be.target.name]:Be.target.value}))},$=Be=>{const xe=Be.target.value;C(xe),S(""),n(ze=>({...ze,agroInputType:xe,agroInputCategory:"",agroInputSubCategory:""}))},J=Be=>{const xe=Be.target.value;S(xe),n(ze=>({...ze,agroInputCategory:xe,agroInputSubCategory:""}))},te=Be=>{const{name:xe}=Be.target;xe==="agroInputType"?$(Be):xe==="agroInputCategory"?J(Be):xe==="store_id"?ue(Be,"id"):xe==="store_name"?ue(Be,"name"):U(Be)},ue=(Be,xe)=>{const ze=Be.target.value;let Fe=null;xe==="id"?Fe=R.find(it=>it.id.toString()===ze):xe==="name"&&(Fe=R.find(it=>it.name===ze)),n(Fe?it=>({...it,store_id:Fe.id,store_name:Fe.name}):it=>({...it,[xe==="id"?"store_id":"store_name"]:ze}))},oe=async(Be,xe)=>{const ze=Be.target.value;if(n(Fe=>({...Fe,[`farm_${xe}_id`]:ze})),o(Fe=>Fe.map((it,ie)=>ie===xe?{...it,id:ze}:it)),ze)try{const Fe=await Mr.get(`/api/farm/${ze}`);if(Fe.data.status==="success"){const it=Fe.data.data;n(ie=>({...ie,[`farm_${xe}_phone`]:it.phonenumber1||it.phonenumber2||"",[`farm_${xe}_district`]:it.district_id||""})),console.log("Updated formData with:",{phone:it.phonenumber1,district:it.district_id})}}catch(Fe){console.error("Error fetching farm properties:",Fe)}},K=()=>{o(Be=>[...Be,{id:"",props:{}}])},ce=Be=>{s.length>1&&(o(xe=>xe.filter((ze,Fe)=>Fe!==Be)),n(xe=>{const ze={...xe};return delete ze[`farm_${Be}_id`],delete ze[`farm_${Be}_phone`],delete ze[`farm_${Be}_district`],ze}))},me=()=>{t<N.length-1&&e(t+1)},Z=()=>{t>0&&e(t-1)},Y=()=>{var xe;const Be=((xe=N[t])==null?void 0:xe.fields)||[];for(let ze of Be)if(ze.type==="group"){for(let Fe of ze.fields)if(Fe.required&&!r[Fe.name])return!1}else if(ze.required&&!r[ze.name])return!1;return!0},Le=Be=>{const xe=s.map((ze,Fe)=>({id:Be[`farm_${Fe}_id`],phone:Be[`farm_${Fe}_phone`],district:Be[`farm_${Fe}_district`]})).filter(ze=>ze.id);return`
Farms: ${xe.map(ze=>ze.id).join(", ")}
Phones: ${xe.map(ze=>ze.phone).join(", ")}
Districts: ${xe.map(ze=>ze.district).join(", ")}
Batch: ${Be.batch_number}
Type: ${Be.agroInputType}
${Be.agroInputType==="Fertilizer"?`Category: ${Be.agroInputCategory} - ${Be.agroInputSubCategory}`:""}
Application Date: ${Be.application_date}
Rate: ${Be.application_rate}
Weight: ${Be.agroinput_weight}
Price/Kg: ${Be.price_per_kg}
Total: ${Be.total_price}
Store: ${Be.store_name} (${Be.store_id})
Transaction Date: ${Be.transaction_date}
Payment: ${Be.payment_type}
    `.trim()},_e=()=>{const Be=Le(r);u(Be)},Qe=async()=>{if(!i){A(!0);try{const Be=JSON.parse(JSON.stringify(r)),xe=parseInt(Be.batch_number,10);if(isNaN(xe)){console.error("Invalid batch number. Must be a number."),A(!1);return}const ze=[];for(let le=0;le<xe;le++){const fe={...Be,batch_number:(le+1).toString()};ze.push(fe)}const Fe=await Mr.post("/api/qrcode/generate_pdf",{qr_data_list:ze,description:"Digital receipt for fertilizer transaction."},{responseType:"blob"}),it=window.URL.createObjectURL(new Blob([Fe.data])),ie=document.createElement("a");ie.href=it,ie.setAttribute("download",`fertilizer_receipts_${Be.batch_number}_batches.pdf`),document.body.appendChild(ie),ie.click(),ie.remove()}catch(Be){console.error("Erreur lors du tlchargement du PDF:",Be)}finally{A(!1)}}};return m.jsx("div",{className:"bg-gradient-to-br from-teal-50 via-white to-blue-50 min-h-screen py-8",children:m.jsxs("div",{className:"container mx-auto px-4",children:[m.jsx("h1",{className:"text-4xl font-bold mb-8 text-center text-teal-700",children:"Generate Digital Codes for Fertilizer Application"}),m.jsx(LC,{currentStep:t,totalSteps:N.length,stepNames:fve}),m.jsxs("div",{className:"flex gap-8 max-w-7xl mx-auto",children:[m.jsx("div",{className:"w-1/2",children:m.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6 text-teal-700",children:(De=N[t])==null?void 0:De.title}),m.jsx(NC,{step:N[t],formData:r,onChange:te,onCategoryChange:J,onStoreChange:ue,farmBlocks:s,onAddFarm:K,onRemoveFarm:ce,onFarmChange:oe,farms:P,districts:j}),m.jsx(FC,{currentStep:t,totalSteps:N.length,onPrevStep:Z,onNextStep:me,onSubmit:_e,isStepValid:Y()})]})}),m.jsx("div",{className:"w-1/2",children:m.jsx("div",{className:"sticky top-8",children:m.jsx(PC,{qrData:c,onDownloadPDF:Qe,isDownloading:i})})})]})]})})},MC=()=>m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-white to-slate-100",children:m.jsxs("div",{className:"relative w-32 h-32",children:[m.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-dashed border-gray-300 animate-spin-slow"}),m.jsx("div",{className:"absolute inset-4 rounded-full border-2 border-dashed border-blue-400 animate-spin-reverse-slower"}),m.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-md animate-ping-fast"}),m.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3 h-3 bg-indigo-400 rounded-full shadow-md animate-ping-slow"}),m.jsx("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 w-2.5 h-2.5 bg-pink-400 rounded-full shadow-md animate-ping-delay"}),m.jsx("div",{className:"absolute top-1/2 right-0 transform -translate-y-1/2 w-2.5 h-2.5 bg-cyan-400 rounded-full shadow-md animate-ping-delay-2"}),m.jsx("div",{className:"absolute inset-1/3 w-12 h-12 bg-blue-100/60 rounded-full animate-pulse shadow-xl backdrop-blur-md"})]})}),Ave=t=>m.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Category"}),m.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Value"})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsx("td",{className:"px-4 py-2 border-b",children:"Carbon gross emissions"}),m.jsx("td",{className:"px-4 py-2 border-b",children:t.gfw_forest_carbon_gross_emissions__Mg_CO2e||0})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"px-4 py-2 border-b",children:"Carbon gross absorption"}),m.jsx("td",{className:"px-4 py-2 border-b",children:t.gfw_forest_carbon_gross_removals__Mg_CO2e||0})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"px-4 py-2 border-b",children:"Carbon net emissions"}),m.jsx("td",{className:"px-4 py-2 border-b",children:t.gfw_forest_carbon_net_flux__Mg_CO2e||0})]})]})]}),mve=t=>{var B,S,P,j,R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe,it,ie,le;const{geoData:e={},areaInSquareMeters:r,areaInHectares:n,resultStatus:s={},coverExtentDecileData:o={},tscDriverDriver:c={},isJrcGlobalForestCover:u,complianceStatus:i={}}=t,A=((P=(S=(B=e["tree cover loss"])==null?void 0:B[0])==null?void 0:S.data_fields)==null?void 0:P.area__ha)||0,g=A&&n?A/n*100:0,C=fe=>{switch(fe){case"100% Compliant":return"text-green-700 bg-green-100 font-semibold";case"Likely Compliant":return"text-yellow-700 bg-yellow-100 font-semibold";case"Not Compliant":return"text-red-700 bg-red-100 font-semibold";default:return"text-gray-700 bg-gray-100 font-semibold"}};return m.jsxs("table",{className:"table-auto w-full mt-4 border-collapse border border-gray-400",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-200",children:[m.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Metric"}),m.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Value"})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Project Area"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r&&n?m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[r.toFixed(2)," m"]}),m.jsxs("p",{children:[n.toFixed(2)," ha"]})]}):"Not available"})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Country Deforestation Risk Level"}),m.jsxs("td",{className:"border border-gray-400 px-4 py-2",children:["STANDARD, ",m.jsx("strong",{children:"Percentage:"})," ",g.toFixed(2),"%"]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"RADD Alert"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:((N=(R=(j=e["wur radd alerts"])==null?void 0:j[0])==null?void 0:R.data_fields)==null?void 0:N.area__ha)===0?m.jsx("p",{children:"0 ha (no RADD alert)"}):m.jsxs("p",{children:[(J=($=(U=e["radd alerts"])==null?void 0:U[0])==null?void 0:$.data_fields)==null?void 0:J.area__ha," ha (Alert)"]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Tree Cover Loss"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:((oe=(ue=(te=e["tree cover loss"])==null?void 0:te[0])==null?void 0:ue.data_fields)==null?void 0:oe.area__ha)===0?m.jsx("p",{className:"text-green-600 font-semibold",children:"0 ha (no tree loss since 2020)"}):m.jsxs("p",{className:"text-red-600 font-semibold",children:[(me=(ce=(K=e["tree cover loss"])==null?void 0:K[0])==null?void 0:ce.data_fields)==null?void 0:me.area__ha," ha of tree cover loss"]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Forest Cover (2020)"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:m.jsx("span",{className:u&&u.includes("Forest cover detected")?"text-orange-600 font-semibold":"text-green-600 font-semibold",children:u})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"EUDR Compliance Assessment"}),m.jsx("td",{className:`border border-gray-400 px-4 py-2 ${C(i.status)}`,children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:"px-3 py-1 rounded-full text-sm",children:i.status||"Assessment Pending"})}),m.jsxs("div",{className:"text-xs space-y-1",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Tree Cover Loss:"})," ",((Le=(Y=(Z=e["tree cover loss"])==null?void 0:Z[0])==null?void 0:Y.data_fields)==null?void 0:Le.area__ha)||0," ha"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Forest Cover:"})," ",u&&u.includes("Forest cover detected")?"Detected":"Not detected"]})]})]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Protected Area Status"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:(_e=s==null?void 0:s.protectedStatus)!=null&&_e.percentages?m.jsx("ul",{children:Object.entries(s.protectedStatus.percentages).map(([fe,be])=>{const He=fe==="0"?"Not in WDPA protected area":fe==="1"?"In WDPA protected area":fe==="2"?"In IUCN vulnerable area":fe==="No Data"?"No data available":"Unknown";return m.jsxs("li",{children:[He,": ",be]},fe)})}):m.jsx("p",{children:"No protected area data available."})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Cover Extent Summary"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:m.jsxs("ul",{children:[m.jsxs("li",{children:["Non-Zero Count: ",o.nonZeroCount]}),m.jsxs("li",{children:["Coverage: ",o.percentageCoverExtent.toFixed(2),"%"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Details:"}),o.valueCountArray.length>0?m.jsx("ul",{children:o.valueCountArray.map((fe,be)=>m.jsxs("li",{children:["Decile: ",fe.value,", Count: ",fe.count]},be))}):"No data available"]})]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Tree Cover Drivers"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:(c==null?void 0:c.mostCommonValue)||"Unknown"})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Cover Extent Area"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:((Be=(De=(Qe=e["wri tropical tree cover"])==null?void 0:Qe[0])==null?void 0:De.data_fields)==null?void 0:Be.area__ha)===0?m.jsx("p",{children:"0 % (LOW)"}):m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:[(Fe=(ze=(xe=e["wri tropical tree cover"])==null?void 0:xe[0])==null?void 0:ze.data_fields)==null?void 0:Fe.avg_cover," % (HIGH)"]}),m.jsxs("p",{children:[(le=(ie=(it=e["wri tropical tree cover"])==null?void 0:it[0])==null?void 0:ie.data_fields)==null?void 0:le.area__ha," ha"]})]})})]})]})]})},q$=t=>`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/geojson(${encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[t]},properties:{stroke:"#00FF00","stroke-width":4,"stroke-opacity":1,fill:"#00FF00","fill-opacity":.2}}]}))})/auto/1200x1000?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,gve=({treeCoverData:t=[],mapboxToken:e,title:r="Tree Cover Analysis"})=>{const n=ve.useRef(null),s=ve.useRef(null),[o,c]=ve.useState(null),[u,i]=ve.useState({total:0,avgCover:0,bounds:null});ve.useEffect(()=>{if(t.length===0)return;const C=t.length,B=Math.round(t.reduce((R,N)=>R+N.wri_tropical_tree_cover_extent__decile,0)/C),S=t.map(R=>R.latitude),P=t.map(R=>R.longitude),j={minLat:Math.min(...S),maxLat:Math.max(...S),minLng:Math.min(...P),maxLng:Math.max(...P),centerLat:(Math.min(...S)+Math.max(...S))/2,centerLng:(Math.min(...P)+Math.max(...P))/2};i({total:C,avgCover:B,bounds:j})},[t]);const A=C=>({type:"FeatureCollection",features:C.map(B=>({type:"Feature",properties:{value:B.wri_tropical_tree_cover_extent__decile,driver:B.tsc_tree_cover_loss_drivers__driver||"N/A"},geometry:{type:"Point",coordinates:[B.longitude,B.latitude]}}))}),g=()=>{s.current&&setTimeout(()=>{const C=s.current.getCanvas(),B=document.createElement("canvas");B.width=400,B.height=400;const S=B.getContext("2d"),P=Math.min(C.width,C.height),j=(C.width-P)/2,R=(C.height-P)/2;S.fillStyle="#fff",S.fillRect(0,0,B.width,B.height),S.drawImage(C,j,R,P,P,0,0,B.width,B.height);const N=250,U=65,$=20,J=20;S.fillStyle="rgba(255,255,255,0.85)",S.fillRect($,J,N,U),S.fillStyle="#005f2f",S.font="bold 16px Arial",S.fillText(r,$+10,J+20),S.fillStyle="#222",S.font="11px Arial";const te=new Date().toLocaleDateString();S.fillText(`Generated: ${te}`,$+10,J+40),S.fillText(`Points: ${u.total} | Avg. Cover: ${u.avgCover}%`,$+10,J+55);const ue=[{color:"#f7fcf5",label:"010%"},{color:"#c7e9c0",label:"2030%"},{color:"#74c476",label:"4050%"},{color:"#238b45",label:"6070%"},{color:"#006d2c",label:"8090%"},{color:"#00441b",label:"90100%"}],oe=95,K=15+ue.length*15,ce=B.width-oe-10,me=B.height-K-10,Z=12,Y=15;S.fillStyle="rgba(255,255,255,0.75)",S.fillRect(ce,me,oe,K),S.font="bold 10px Arial",S.fillStyle="#000",S.fillText("Forest Cover",ce+5,me+12),ue.forEach((Le,_e)=>{const Qe=me+18+_e*Y;S.fillStyle=Le.color,S.fillRect(ce+5,Qe,Z,Z),S.strokeStyle="#666",S.strokeRect(ce+5,Qe,Z,Z),S.fillStyle="#000",S.font="9px Arial",S.fillText(Le.label,ce+5+Z+4,Qe+Z-3)}),c(B.toDataURL("image/png"))},500)};return ve.useEffect(()=>{if(s.current||t.length===0||!e||!u.bounds)return;is.accessToken=e;const C=A(t);s.current=new is.Map({container:n.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[u.bounds.centerLng,u.bounds.centerLat],zoom:14,preserveDrawingBuffer:!0}),s.current.on("load",()=>{s.current.addSource("tree-cover-data",{type:"geojson",data:C}),s.current.addLayer({id:"tree-heatmap",type:"heatmap",source:"tree-cover-data",paint:{"heatmap-weight":["interpolate",["linear"],["get","value"],0,0,100,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,20,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(247,252,245,0)",.2,"#c7e9c0",.4,"#74c476",.6,"#238b45",.8,"#006d2c",1,"#00441b"],"heatmap-radius":["interpolate",["linear"],["zoom"],10,5,20,30],"heatmap-opacity":.7}}),s.current.addLayer({id:"tree-points",type:"circle",source:"tree-cover-data",paint:{"circle-radius":["interpolate",["linear"],["zoom"],13,3,20,10],"circle-color":["interpolate",["linear"],["get","value"],0,"#f7fcf5",20,"#c7e9c0",40,"#74c476",60,"#238b45",80,"#006d2c",100,"#00441b"],"circle-opacity":.8,"circle-stroke-width":.5,"circle-stroke-color":"#fff"}}),u.bounds&&s.current.once("idle",()=>{s.current.fitBounds([[u.bounds.minLng,u.bounds.minLat],[u.bounds.maxLng,u.bounds.maxLat]],{padding:50,maxZoom:18,duration:0}),setTimeout(()=>g(),1e3)})})},[t,e,u.bounds]),!e||t.length===0?m.jsx("div",{className:"w-full flex justify-center items-center bg-gray-50 h-96",children:m.jsx("p",{className:"text-gray-600",children:"No data or token."})}):m.jsxs("div",{className:"relative w-full min-h-[400px]",children:[m.jsx("div",{ref:n,style:{width:"400px",height:"400px",position:"absolute",opacity:0,pointerEvents:"none",zIndex:-1}}),o?m.jsx("div",{className:"flex justify-center items-center w-full",style:{height:"400px"},children:m.jsx("img",{src:o,alt:"Forest map",className:"w-full h-auto object-contain mx-auto",style:{maxWidth:"400px",maxHeight:"400px"}})}):m.jsx("div",{className:"flex justify-center items-center bg-gray-50 w-full h-[400px]",children:m.jsx("p",{className:"text-gray-600",children:" Generating centered map..."})})]})},$$=({results:t,reportRef:e,farmInfo:r})=>{var ze,Fe,it,ie,le,fe,be,He,Je,tt,st,Ct,Ue;console.log((Fe=(ze=t["wri tropical tree cover extent"])==null?void 0:ze[2])==null?void 0:Fe.data_fields);const[n,s]=ve.useState({nonZeroValues:[],nonZeroCount:0,percentageCoverExtent:0,valueCountArray:[]}),[o,c]=ve.useState({protectedStatus:{counts:{},percentages:{}},indigenousStatus:""}),[u,i]=ve.useState(null),[A,g]=ve.useState(null),[C,B]=ve.useState({mostCommonValue:"",frequencyCounts:{}}),[S,P]=ve.useState(null),[j,R]=ve.useState({}),[N,U]=ve.useState(0),[$,J]=ve.useState(0),[te,ue]=ve.useState(0),[oe,K]=ve.useState({status:"",statusColor:"",description:""}),[ce,me]=ve.useState(!1),[Z,Y]=ve.useState(!1),Le=(ie=(it=t["wri tropical tree cover extent"])==null?void 0:it[2])==null?void 0:ie.data_fields,_e=Qi.useMemo(()=>!Le||!Array.isArray(Le)?[]:Le.map(Ft=>({latitude:Ft.latitude,longitude:Ft.longitude,wri_tropical_tree_cover_extent__decile:Ft.wri_tropical_tree_cover_extent__decile,tsc_tree_cover_loss_drivers__driver:Ft.tsc_tree_cover_loss_drivers__driver||"Unknown"})),[Le]),Qe="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",De=((be=(fe=(le=t["jrc global forest cover"])==null?void 0:le[0])==null?void 0:fe.coordinates)==null?void 0:be[0])||((tt=(Je=(He=t["tree cover loss"])==null?void 0:He[0])==null?void 0:Je.coordinates)==null?void 0:tt[0])||((Ue=(Ct=(st=t["soil carbon"])==null?void 0:st[0])==null?void 0:Ct.coordinates)==null?void 0:Ue[0]),Be=(Ft,Zt)=>{const fr=Ft>0;return console.log(Ft,Zt),!fr&&!Zt?{status:"100% Compliant",statusColor:"text-green-600 bg-green-100",description:"No tree cover loss detected and no forest cover detected. Fully compliant with EUDR regulations."}:!fr&&Zt||fr&&!Zt?{status:"Likely Compliant",statusColor:"text-yellow-600 bg-yellow-100",description:"No tree cover loss detected but forest cover is present. Area shows good forest conservation practices."}:fr?{status:"Not Compliant",statusColor:"text-red-600 bg-red-100",description:"Tree cover loss detected. This indicates potential deforestation activity that may violate EUDR regulations."}:{status:"Assessment Pending",statusColor:"text-gray-600 bg-gray-100",description:"Insufficient data to determine compliance status."}},xe=async Ft=>{var Zt,fr,Ye,Re,hr,Ut,vt,Yt,ar;if(console.log(" saveReportToDatabase called"),console.log(" farmInfo:",r),console.log(" farmInfo.id:",r==null?void 0:r.farm_id),!(r!=null&&r.farm_id)){console.error(" Farm ID is missing, cannot save report"),console.error("farmInfo object:",r);return}me(!0),Y(!1);try{console.log(" Saving report to database..."),console.log(" Report data received:",Ft);const nr={farm_id:r.farm_id,project_area:`${((Zt=Ft.areaInHectares)==null?void 0:Zt.toFixed(2))||0} ha`,country_deforestation_risk_level:Ft.deforestationRiskLevel||"STANDARD",radd_alert:`${((fr=Ft.raddAlertsArea)==null?void 0:fr.toFixed(2))||0} ha`,tree_cover_loss:`${((Ye=Ft.treeCoverLossArea)==null?void 0:Ye.toFixed(2))||0} ha`,forest_cover_2020:Ft.isJrcGlobalForestCover||"No data",eudr_compliance_assessment:((Re=Ft.complianceStatus)==null?void 0:Re.status)||"Assessment Pending",protected_area_status:JSON.stringify(Ft.protectedStatus||{}),tree_cover_drivers:((hr=Ft.tscDriverDriver)==null?void 0:hr.mostCommonValue)||"Unknown",cover_extent_area:`${((Ut=Ft.wriTropicalTreeCoverAvg)==null?void 0:Ut.toFixed(2))||0}%`,cover_extent_summary:Ft.coverExtentDecileData||{}};console.log(" Payload prepared:",nr),console.log(" Sending POST request to /api/farmreport/create");const Fr=await Mr.post("/api/farmreport/create",nr);console.log(" Report saved successfully!"),console.log(" Server response:",Fr.data),Y(!0),setTimeout(()=>Y(!1),5e3)}catch(nr){console.error(" Error saving report:",nr),console.error(" Error response:",(vt=nr.response)==null?void 0:vt.data),console.error(" Error message:",nr.message),console.error(" Full error object:",nr),alert("Failed to save report: "+(((ar=(Yt=nr.response)==null?void 0:Yt.data)==null?void 0:ar.msg)||nr.message))}finally{me(!1)}};return ve.useEffect(()=>{var Kr,kn,mn,Un,Hi,Gn,ti,si;if(!t||typeof t!="object"||Object.keys(t).length===0)return;R(t);let Ft={nonZeroValues:[],nonZeroCount:0,percentageCoverExtent:0,valueCountArray:[]};const Zt=t["wri tropical tree cover extent"];if(Array.isArray(Zt)){const xi=Zt.find(Bn=>{var Zr;return((Zr=Bn.pixel)==null?void 0:Zr.includes("grouped by"))&&Array.isArray(Bn.data_fields)});if(xi&&Array.isArray(xi.data_fields)){const Bn=xi.data_fields;let Zr=0,Nr=0;const un=[],ri=[];Bn.forEach(ir=>{const We=ir==null?void 0:ir.wri_tropical_tree_cover_extent__decile,qe=(ir==null?void 0:ir.count)||0;if(Nr+=qe,We&&We!==0){Zr+=qe;for(let ht=0;ht<qe;ht++)un.push(We)}ri.push({value:Number(We),count:qe})});const Hn=Nr>0?Zr/Nr*100:0;Ft={nonZeroValues:un,nonZeroCount:Zr,percentageCoverExtent:Hn,valueCountArray:ri},s(Ft)}}let fr={mostCommonValue:"",frequencyCounts:{}};const Ye=t["tsc tree cover loss drivers"];if(Array.isArray(Ye)&&Ye.length>0){const xi=Ye[0],Bn=xi==null?void 0:xi.data_fields;let Zr={},Nr=null,un=0;if(Array.isArray(Bn))Bn.forEach(ri=>{const Hn=ri==null?void 0:ri.tsc_tree_cover_loss_drivers__driver,ir=(ri==null?void 0:ri.count)||1;Hn&&(Zr[Hn]=(Zr[Hn]||0)+ir,Zr[Hn]>un&&(un=Zr[Hn],Nr=Hn))});else if(typeof Bn=="object"){const ri=Bn==null?void 0:Bn.tsc_tree_cover_loss_drivers__driver;ri&&(Zr[ri]=1,Nr=ri)}fr={mostCommonValue:Nr,frequencyCounts:Zr},B(fr)}let Re=0;const hr=t["tree cover loss"];Array.isArray(hr)&&hr.length>0&&(Re=((kn=(Kr=hr[0])==null?void 0:Kr.data_fields)==null?void 0:kn.area__ha)||0,U(Re));let Ut={counts:{},percentages:{}};const vt=t["soil carbon"];if(Array.isArray(vt)&&vt.length>0){const xi=vt[0],Bn=xi==null?void 0:xi.data_fields,Zr={};let Nr=0;Array.isArray(Bn)&&Bn.forEach(ri=>{const Hn=(ri==null?void 0:ri.wdpa_protected_areas__iucn_cat)??"Unknown",ir=(ri==null?void 0:ri.count)||1;Zr[Hn]=ir,Nr+=ir});const un={};Nr>0?Object.entries(Zr).forEach(([ri,Hn])=>{un[ri]=(Hn/Nr*100).toFixed(2)+"%"}):un["No Data"]="0%",Ut={counts:Zr,percentages:un},c(ri=>({...ri,protectedStatus:Ut}))}let Yt="";const ar=t["landmark indigenous and community lands"];if(Array.isArray(ar)&&ar.length>0){const xi=((mn=ar[0])==null?void 0:mn.data_fields)||[];!Array.isArray(xi)||xi.length===0?Yt="Not known, land is not gazetted":Yt=xi.some(Zr=>(Zr==null?void 0:Zr.name)||(Zr==null?void 0:Zr.value)===1)?"Presence of indigenous and community lands":"No presence of indigenous and community lands",c(Bn=>({...Bn,indigenousStatus:Yt}))}let nr=0,Fr=0;if(De&&Array.isArray(De)&&De.length>=3){const xi=De[0],Bn=De[De.length-1],Zr=xi[0]!==Bn[0]||xi[1]!==Bn[1]?[...De,xi]:De;try{const Nr=sde([Zr]);nr=Ad(Nr),Fr=nr/1e4,i(nr),g(Fr)}catch(Nr){console.error("Turf error on polygon:",Nr)}}let Gr=!1,Ir="No forest cover detected";const cn=t["jrc global forest cover"];if(Array.isArray(cn)&&cn.length>0){const xi=(Un=cn[0])==null?void 0:Un.data_fields,Bn=(xi==null?void 0:xi.area__ha)||0;console.log("Forest area ha",Bn),Bn>0?(Gr=!0,Ir=`Forest cover detected: ${Bn.toFixed(2)} hectares`,P(Ir)):(Gr=!1,P(Ir))}let Sn=0;const En=t["wri tropical tree cover"];Array.isArray(En)&&En.length>0&&(Sn=((Gn=(Hi=En[0])==null?void 0:Hi.data_fields)==null?void 0:Gn.avg_cover)||0,J(Sn));let an=0;const lr=t["wur radd alerts"];Array.isArray(lr)&&lr.length>0&&(an=((si=(ti=lr[0])==null?void 0:ti.data_fields)==null?void 0:si.area__ha)||0,ue(an));const Xt=Be(Re,Gr);K(Xt);const qr={areaInSquareMeters:nr,areaInHectares:Fr,deforestationRiskLevel:"STANDARD",raddAlertsArea:an,treeCoverLossArea:Re,isJrcGlobalForestCover:Ir,complianceStatus:Xt,protectedStatus:Ut,coverExtentDecileData:Ft,tscDriverDriver:fr,wriTropicalTreeCoverAvg:Sn,indigenousStatus:Yt};console.log(" Check conditions for saving:"),console.log("  - farmInfo?.id:",r==null?void 0:r.farm_id),console.log("  - calculatedAreaHa:",Fr),console.log("  - calculatedAreaHa > 0:",Fr>0),console.log("  - Will save?:",(r==null?void 0:r.id)&&Fr>0),r!=null&&r.farm_id&&Fr>0?(console.log(" Conditions met! Calling saveReportToDatabase..."),console.log(" Data to save:",qr),xe(qr)):(console.warn(" Conditions NOT met for saving:"),r!=null&&r.farm_id||console.warn("  - Missing farmInfo.farm_id"),Fr>0||console.warn("  - calculatedAreaHa is not > 0 (value:",Fr,")"))},[t,r]),m.jsxs("div",{ref:e,className:"carbon-report-a4 w-full h-full m-0 p-0 bg-white text-gray-900 font-sans leading-relaxed space-y-8",children:[ce&&m.jsxs("div",{className:"fixed top-4 right-4 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),"Saving report..."]}),Z&&m.jsxs("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[m.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Report saved successfully!"]}),m.jsxs("div",{className:"flex items-center justify-between border-b-4 border-green-700 pb-6 px-8 pt-8",children:[m.jsx("div",{className:"w-24 h-24 bg-white rounded-lg flex items-center justify-center shadow-sm",children:m.jsx("img",{src:"https://www.nkusu.com/parrotlogo.svg",alt:"Parrot",className:"object-contain w-full h-full rounded-md"})}),m.jsxs("div",{className:"flex-1 text-center px-4",children:[m.jsx("h2",{className:"text-3xl font-bold text-green-800 mb-1",children:"EUDR COMPLIANCE REPORT"}),m.jsx("p",{className:"text-sm text-gray-600",children:"Report generated based on the Regulation (EU) 2023/1115 on deforestation-free products."})]}),m.jsx("div",{className:"w-24 h-24 flex justify-end",children:m.jsx("img",{src:"https://www.nkusu.com/logo.jpg",alt:"Logo",className:"object-contain w-full h-full rounded-md shadow-sm"})})]}),r&&m.jsxs("p",{className:"px-8 py-2 bg-gray-100 rounded-none border-y border-gray-300 text-sm shadow-inner",children:["This report provides an overview of Farm ID ",m.jsx("strong",{children:r.farm_id}),", owned by ",m.jsx("strong",{children:r.name}),", located in ",m.jsx("strong",{children:r.subcounty}),", ",r.district_name,". The farm is a member of the ",r.subcounty," and plays a significant role in the local agricultural landscape. With geolocation coordinates ",m.jsx("strong",{children:r.geolocation}),",",r.crops&&r.crops.length>0?m.jsxs(m.Fragment,{children:["the farm specializes in ",m.jsx("strong",{children:r.crops[0].crop})," and operates within a region characterized by Landtype: ",m.jsx("strong",{children:r.crops[0].land_type}),"."]}):m.jsx("span",{children:" no specific crops mentioned."}),"This report outlines the farm's activities, challenges, and opportunities to support its continued growth and sustainability."]}),m.jsxs("div",{className:"report-body space-y-6 bg-gray-50 px-8 py-0 shadow-none rounded-none",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsx("p",{children:"This report provides a compliance assessment under the European Union Regulation 2023/1115, which governs the import and export of products associated with deforestation and degradation."}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"1. RADD Alert (EUDR Article 2)"}),m.jsx("p",{children:"applicable to most parts of Uganda, only parts of Lake Albert region neighbouring DRCongo"})]}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"2. Tree Cover Loss (EUDR, Article 2):"}),m.jsxs("div",{className:"text-gray-700",children:["Area in which Tree loss was identified since Dec 2020:",m.jsxs("ul",{className:"list-disc list-inside text-gray-700 mt-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Zero:"})," Plot/Farm is fully compliant with EUDR Law."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Non-Zero:"})," Plot/Farm likely non compliant with EUDR Law."]})]})]})]}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"3. Forest Cover (EUDR, Article 2):"}),m.jsxs("div",{className:"text-gray-700",children:["EU joint Research Centre Geostore for checking existence or not of forest cover as of 2020",m.jsxs("ul",{className:"list-disc list-inside text-gray-700 mt-2",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"None detected:"})," Plot/Farm is fully compliant with EUDR Law."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Forest detected:"})," Farm requires careful assessment for EUDR compliance."]})]})]})]}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"4. Tree Cover Extent (EUDR, Article 2):"}),m.jsxs("p",{className:"text-gray-700",children:["Analysis of tree cover, expressed in deciles (ranging from ",m.jsx("strong",{children:"0-100"}),"), to evaluate forest coverage."]})]}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"5. Tree Cover Loss Drivers (EUDR Article 10):"}),m.jsx("p",{children:"Identifies the primary causes of deforestation or degradation."})]}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"6. Protected Area (EUDR Article 10):"}),m.jsx("p",{children:"Indicates if the plot is located in a gazetted protected area (national park, wetland, etc.)."})]}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"7. indigenous and community lands (EUDR Article 10):"}),m.jsx("p",{children:"Determines whether the land overlaps with recognized indigenous or community land."})]}),m.jsx("div",{className:"html2pdf__page-break"}),m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-2",children:[m.jsx("h4",{className:"text-xl font-semibold text-green-700",children:"Summary Compliance Table"}),mve({geoData:j,areaInSquareMeters:u,areaInHectares:A,resultStatus:o,coverExtentDecileData:n,tscDriverDriver:C,isJrcGlobalForestCover:S,treeCoverLossArea:N,wriTropicalTreeCoverAvg:$,raddAlertsArea:te,complianceStatus:oe})]}),m.jsx("div",{className:"html2pdf__page-break"}),De&&_e.length>0&&m.jsxs("div",{className:"report-section border-l-4 border-green-700 pl-5 space-y-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-green-800",children:"Risk Assessment Breakdown"}),m.jsx("p",{children:"Analysis shows:"}),m.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-1",children:[m.jsxs("li",{children:["Area: ",A==null?void 0:A.toFixed(2)," hectares"]}),m.jsxs("li",{children:["Tree cover loss: ",N," hectares"]}),m.jsxs("li",{children:["Average tree cover: ",$.toFixed(1),"%"]}),m.jsxs("li",{children:["Primary deforestation driver: ",(C==null?void 0:C.mostCommonValue)||"Unknown"]}),m.jsxs("li",{children:["RADD alerts: ",te," hectares"]}),m.jsx("li",{children:m.jsxs("strong",{children:["Compliance Status: ",oe.status]})})]}),m.jsx("img",{src:q$(De),alt:"Map",className:"report-map w-full rounded-lg shadow-md"})]})]}),m.jsx("div",{className:"html2pdf__page-break"}),m.jsxs("div",{className:"my-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Static Map Export"}),m.jsx(gve,{treeCoverData:_e,mapboxToken:Qe,title:"Tree Cover Analysis",subtitle:`${_e.length} data points`})]})]}),m.jsx("div",{className:"report-footer border-t-2 border-gray-300 px-8 pt-6 text-xs text-gray-500 text-center mt-10",children:" 2025 Agriyields. Contact: nkusu@agriyields.com"})]})};var W$={exports:{}};const yve="modulepreload",vve=function(t){return"/"+t},k7={},y1=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(r.map(u=>{if(u=vve(u),u in k7)return;k7[u]=!0;const i=u.endsWith(".css"),A=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${A}`))return;const g=document.createElement("link");if(g.rel=i?"stylesheet":yve,i||(g.as="script",g.crossOrigin=""),g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),i)return new Promise((C,B)=>{g.addEventListener("load",C),g.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${u}`)))})}))}return s.then(()=>e()).catch(o=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o})};function ba(t){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(t)}var Wu=Uint8Array,hd=Uint16Array,bN=Int32Array,jC=new Wu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kC=new Wu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Y6=new Wu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),K$=function(t,e){for(var r=new hd(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new bN(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)s[o]=o-r[n]<<5|n;return{b:r,r:s}},X$=K$(jC,2),Y$=X$.b,Z6=X$.r;Y$[28]=258,Z6[258]=28;var Z$=K$(kC,0),xve=Z$.b,D7=Z$.r,J6=new hd(32768);for(var fl=0;fl<32768;++fl){var GA=(fl&43690)>>1|(fl&21845)<<1;GA=(GA&52428)>>2|(GA&13107)<<2,GA=(GA&61680)>>4|(GA&3855)<<4,J6[fl]=((GA&65280)>>8|(GA&255)<<8)>>1}var wp=function(t,e,r){for(var n=t.length,s=0,o=new hd(e);s<n;++s)t[s]&&++o[t[s]-1];var c=new hd(e);for(s=1;s<e;++s)c[s]=c[s-1]+o[s-1]<<1;var u;if(r){u=new hd(1<<e);var i=15-e;for(s=0;s<n;++s)if(t[s])for(var A=s<<4|t[s],g=e-t[s],C=c[t[s]-1]++<<g,B=C|(1<<g)-1;C<=B;++C)u[J6[C]>>i]=A}else for(u=new hd(n),s=0;s<n;++s)t[s]&&(u[s]=J6[c[t[s]-1]++]>>15-t[s]);return u},Wm=new Wu(288);for(var fl=0;fl<144;++fl)Wm[fl]=8;for(var fl=144;fl<256;++fl)Wm[fl]=9;for(var fl=256;fl<280;++fl)Wm[fl]=7;for(var fl=280;fl<288;++fl)Wm[fl]=8;var j_=new Wu(32);for(var fl=0;fl<32;++fl)j_[fl]=5;var _ve=wp(Wm,9,0),bve=wp(Wm,9,1),wve=wp(j_,5,0),Cve=wp(j_,5,1),p3=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},_f=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},A3=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},wN=function(t){return(t+7)/8|0},J$=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Wu(t.subarray(e,r))},Sve=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],If=function(t,e,r){var n=new Error(e||Sve[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,If),!r)throw n;return n},Bve=function(t,e,r,n){var s=t.length,o=0;if(!s||e.f&&!e.l)return r||new Wu(0);var c=!r,u=c||e.i!=2,i=e.i;c&&(r=new Wu(s*3));var A=function(Ue){var Ft=r.length;if(Ue>Ft){var Zt=new Wu(Math.max(Ft*2,Ue));Zt.set(r),r=Zt}},g=e.f||0,C=e.p||0,B=e.b||0,S=e.l,P=e.d,j=e.m,R=e.n,N=s*8;do{if(!S){g=_f(t,C,1);var U=_f(t,C+1,3);if(C+=3,U)if(U==1)S=bve,P=Cve,j=9,R=5;else if(U==2){var ue=_f(t,C,31)+257,oe=_f(t,C+10,15)+4,K=ue+_f(t,C+5,31)+1;C+=14;for(var ce=new Wu(K),me=new Wu(19),Z=0;Z<oe;++Z)me[Y6[Z]]=_f(t,C+Z*3,7);C+=oe*3;for(var Y=p3(me),Le=(1<<Y)-1,_e=wp(me,Y,1),Z=0;Z<K;){var Qe=_e[_f(t,C,Le)];C+=Qe&15;var $=Qe>>4;if($<16)ce[Z++]=$;else{var De=0,Be=0;for($==16?(Be=3+_f(t,C,3),C+=2,De=ce[Z-1]):$==17?(Be=3+_f(t,C,7),C+=3):$==18&&(Be=11+_f(t,C,127),C+=7);Be--;)ce[Z++]=De}}var xe=ce.subarray(0,ue),ze=ce.subarray(ue);j=p3(xe),R=p3(ze),S=wp(xe,j,1),P=wp(ze,R,1)}else If(1);else{var $=wN(C)+4,J=t[$-4]|t[$-3]<<8,te=$+J;if(te>s){i&&If(0);break}u&&A(B+J),r.set(t.subarray($,te),B),e.b=B+=J,e.p=C=te*8,e.f=g;continue}if(C>N){i&&If(0);break}}u&&A(B+131072);for(var Fe=(1<<j)-1,it=(1<<R)-1,ie=C;;ie=C){var De=S[A3(t,C)&Fe],le=De>>4;if(C+=De&15,C>N){i&&If(0);break}if(De||If(2),le<256)r[B++]=le;else if(le==256){ie=C,S=null;break}else{var fe=le-254;if(le>264){var Z=le-257,be=jC[Z];fe=_f(t,C,(1<<be)-1)+Y$[Z],C+=be}var He=P[A3(t,C)&it],Je=He>>4;He||If(3),C+=He&15;var ze=xve[Je];if(Je>3){var be=kC[Je];ze+=A3(t,C)&(1<<be)-1,C+=be}if(C>N){i&&If(0);break}u&&A(B+131072);var tt=B+fe;if(B<ze){var st=o-ze,Ct=Math.min(ze,tt);for(st+B<0&&If(3);B<Ct;++B)r[B]=n[st+B]}for(;B<tt;++B)r[B]=r[B-ze]}}e.l=S,e.p=ie,e.b=B,e.f=g,S&&(g=1,e.m=j,e.d=P,e.n=R)}while(!g);return B!=r.length&&c?J$(r,0,B):r.subarray(0,B)},Qp=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Rv=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},m3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,o=r.slice();if(!s)return{t:tW,l:0};if(s==1){var c=new Wu(r[0].s+1);return c[r[0].s]=1,{t:c,l:1}}r.sort(function(te,ue){return te.f-ue.f}),r.push({s:-1,f:25001});var u=r[0],i=r[1],A=0,g=1,C=2;for(r[0]={s:-1,f:u.f+i.f,l:u,r:i};g!=s-1;)u=r[r[A].f<r[C].f?A++:C++],i=r[A!=g&&r[A].f<r[C].f?A++:C++],r[g++]={s:-1,f:u.f+i.f,l:u,r:i};for(var B=o[0].s,n=1;n<s;++n)o[n].s>B&&(B=o[n].s);var S=new hd(B+1),P=eI(r[g-1],S,0);if(P>e){var n=0,j=0,R=P-e,N=1<<R;for(o.sort(function(ue,oe){return S[oe.s]-S[ue.s]||ue.f-oe.f});n<s;++n){var U=o[n].s;if(S[U]>e)j+=N-(1<<P-S[U]),S[U]=e;else break}for(j>>=R;j>0;){var $=o[n].s;S[$]<e?j-=1<<e-S[$]++-1:++n}for(;n>=0&&j;--n){var J=o[n].s;S[J]==e&&(--S[J],++j)}P=e}return{t:new Wu(S),l:P}},eI=function(t,e,r){return t.s==-1?Math.max(eI(t.l,e,r+1),eI(t.r,e,r+1)):e[t.s]=r},O7=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new hd(++e),n=0,s=t[0],o=1,c=function(i){r[n++]=i},u=1;u<=e;++u)if(t[u]==s&&u!=e)++o;else{if(!s&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(s),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(s);o=1,s=t[u]}return{c:r.subarray(0,n),n:e}},Uv=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},eW=function(t,e,r){var n=r.length,s=wN(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var o=0;o<n;++o)t[s+o+4]=r[o];return(s+4+n)*8},R7=function(t,e,r,n,s,o,c,u,i,A,g){Qp(e,g++,r),++s[256];for(var C=m3(s,15),B=C.t,S=C.l,P=m3(o,15),j=P.t,R=P.l,N=O7(B),U=N.c,$=N.n,J=O7(j),te=J.c,ue=J.n,oe=new hd(19),K=0;K<U.length;++K)++oe[U[K]&31];for(var K=0;K<te.length;++K)++oe[te[K]&31];for(var ce=m3(oe,7),me=ce.t,Z=ce.l,Y=19;Y>4&&!me[Y6[Y-1]];--Y);var Le=A+5<<3,_e=Uv(s,Wm)+Uv(o,j_)+c,Qe=Uv(s,B)+Uv(o,j)+c+14+3*Y+Uv(oe,me)+2*oe[16]+3*oe[17]+7*oe[18];if(i>=0&&Le<=_e&&Le<=Qe)return eW(e,g,t.subarray(i,i+A));var De,Be,xe,ze;if(Qp(e,g,1+(Qe<_e)),g+=2,Qe<_e){De=wp(B,S,0),Be=B,xe=wp(j,R,0),ze=j;var Fe=wp(me,Z,0);Qp(e,g,$-257),Qp(e,g+5,ue-1),Qp(e,g+10,Y-4),g+=14;for(var K=0;K<Y;++K)Qp(e,g+3*K,me[Y6[K]]);g+=3*Y;for(var it=[U,te],ie=0;ie<2;++ie)for(var le=it[ie],K=0;K<le.length;++K){var fe=le[K]&31;Qp(e,g,Fe[fe]),g+=me[fe],fe>15&&(Qp(e,g,le[K]>>5&127),g+=le[K]>>12)}}else De=_ve,Be=Wm,xe=wve,ze=j_;for(var K=0;K<u;++K){var be=n[K];if(be>255){var fe=be>>18&31;Rv(e,g,De[fe+257]),g+=Be[fe+257],fe>7&&(Qp(e,g,be>>23&31),g+=jC[fe]);var He=be&31;Rv(e,g,xe[He]),g+=ze[He],He>3&&(Rv(e,g,be>>5&8191),g+=kC[He])}else Rv(e,g,De[be]),g+=Be[be]}return Rv(e,g,De[256]),g+Be[256]},Eve=new bN([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tW=new Wu(0),Tve=function(t,e,r,n,s,o){var c=o.z||t.length,u=new Wu(n+c+5*(1+Math.ceil(c/7e3))+s),i=u.subarray(n,u.length-s),A=o.l,g=(o.r||0)&7;if(e){g&&(i[0]=o.r>>3);for(var C=Eve[e-1],B=C>>13,S=C&8191,P=(1<<r)-1,j=o.p||new hd(32768),R=o.h||new hd(P+1),N=Math.ceil(r/3),U=2*N,$=function(fr){return(t[fr]^t[fr+1]<<N^t[fr+2]<<U)&P},J=new bN(25e3),te=new hd(288),ue=new hd(32),oe=0,K=0,ce=o.i||0,me=0,Z=o.w||0,Y=0;ce+2<c;++ce){var Le=$(ce),_e=ce&32767,Qe=R[Le];if(j[_e]=Qe,R[Le]=_e,Z<=ce){var De=c-ce;if((oe>7e3||me>24576)&&(De>423||!A)){g=R7(t,i,0,J,te,ue,K,me,Y,ce-Y,g),me=oe=K=0,Y=ce;for(var Be=0;Be<286;++Be)te[Be]=0;for(var Be=0;Be<30;++Be)ue[Be]=0}var xe=2,ze=0,Fe=S,it=_e-Qe&32767;if(De>2&&Le==$(ce-it))for(var ie=Math.min(B,De)-1,le=Math.min(32767,ce),fe=Math.min(258,De);it<=le&&--Fe&&_e!=Qe;){if(t[ce+xe]==t[ce+xe-it]){for(var be=0;be<fe&&t[ce+be]==t[ce+be-it];++be);if(be>xe){if(xe=be,ze=it,be>ie)break;for(var He=Math.min(it,be-2),Je=0,Be=0;Be<He;++Be){var tt=ce-it+Be&32767,st=j[tt],Ct=tt-st&32767;Ct>Je&&(Je=Ct,Qe=tt)}}}_e=Qe,Qe=j[_e],it+=_e-Qe&32767}if(ze){J[me++]=268435456|Z6[xe]<<18|D7[ze];var Ue=Z6[xe]&31,Ft=D7[ze]&31;K+=jC[Ue]+kC[Ft],++te[257+Ue],++ue[Ft],Z=ce+xe,++oe}else J[me++]=t[ce],++te[t[ce]]}}for(ce=Math.max(ce,Z);ce<c;++ce)J[me++]=t[ce],++te[t[ce]];g=R7(t,i,A,J,te,ue,K,me,Y,ce-Y,g),A||(o.r=g&7|i[g/8|0]<<3,g-=7,o.h=R,o.p=j,o.i=ce,o.w=Z)}else{for(var ce=o.w||0;ce<c+A;ce+=65535){var Zt=ce+65535;Zt>=c&&(i[g/8|0]=A,Zt=c),g=eW(i,g+1,t.subarray(ce,Zt))}o.i=c}return J$(u,0,n+wN(g)+s)},rW=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,o=r.length|0,c=0;c!=o;){for(var u=Math.min(c+2655,o);c<u;++c)s+=n+=r[c];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Ive=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),c=new Wu(o.length+t.length);c.set(o),c.set(t,o.length),t=c,s.w=o.length}return Tve(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},nW=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Lve=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=rW();s.p(e.dictionary),nW(t,2,s.d())}},Fve=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&If(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&If(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function tI(t,e){e||(e={});var r=rW();r.p(t);var n=Ive(t,e,e.dictionary?6:2,4);return Lve(n,e),nW(n,n.length-4,r.d()),n}function Nve(t,e){return Bve(t.subarray(Fve(t,e),-4),{i:2},e,e)}var Pve=typeof TextDecoder<"u"&&new TextDecoder,Mve=0;try{Pve.decode(tW,{stream:!0}),Mve=1}catch{}var as=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function g3(){as.console&&typeof as.console.log=="function"&&as.console.log.apply(as.console,arguments)}var Ra={log:g3,warn:function(t){as.console&&(typeof as.console.warn=="function"?as.console.warn.apply(as.console,arguments):g3.call(null,arguments))},error:function(t){as.console&&(typeof as.console.error=="function"?as.console.error.apply(as.console,arguments):g3(t))}};function y3(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){kg(n.response,e,r)},n.onerror=function(){Ra.error("could not download file")},n.send()}function U7(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function a2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var zx,rI,kg=as.saveAs||((typeof window>"u"?"undefined":ba(window))!=="object"||window!==as?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=as.URL||as.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?U7(s.href)?y3(t,e,r):a2(s,s.target="_blank"):a2(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){a2(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(U7(t))y3(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){a2(n)})}else navigator.msSaveOrOpenBlob(function(s,o){return o===void 0?o={autoBom:!1}:ba(o)!=="object"&&(Ra.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return y3(t,e,r);var s=t.type==="application/octet-stream",o=/constructor/i.test(as.HTMLElement)||as.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&o)&&(typeof FileReader>"u"?"undefined":ba(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(t)}else{var i=as.URL||as.webkitURL,A=i.createObjectURL(t);n?n.location=A:location.href=A,n=null,setTimeout(function(){i.revokeObjectURL(A)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function iW(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,o=r[n].process,c=s.exec(t);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),i=this.g.toString(16),A=this.b.toString(16);return u.length==1&&(u="0"+u),i.length==1&&(i="0"+i),A.length==1&&(A="0"+A),"#"+u+i+A}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function v3(t,e){var r=t[0],n=t[1],s=t[2],o=t[3];r=Mu(r,n,s,o,e[0],7,-680876936),o=Mu(o,r,n,s,e[1],12,-389564586),s=Mu(s,o,r,n,e[2],17,606105819),n=Mu(n,s,o,r,e[3],22,-1044525330),r=Mu(r,n,s,o,e[4],7,-176418897),o=Mu(o,r,n,s,e[5],12,1200080426),s=Mu(s,o,r,n,e[6],17,-1473231341),n=Mu(n,s,o,r,e[7],22,-45705983),r=Mu(r,n,s,o,e[8],7,1770035416),o=Mu(o,r,n,s,e[9],12,-1958414417),s=Mu(s,o,r,n,e[10],17,-42063),n=Mu(n,s,o,r,e[11],22,-1990404162),r=Mu(r,n,s,o,e[12],7,1804603682),o=Mu(o,r,n,s,e[13],12,-40341101),s=Mu(s,o,r,n,e[14],17,-1502002290),r=ju(r,n=Mu(n,s,o,r,e[15],22,1236535329),s,o,e[1],5,-165796510),o=ju(o,r,n,s,e[6],9,-1069501632),s=ju(s,o,r,n,e[11],14,643717713),n=ju(n,s,o,r,e[0],20,-373897302),r=ju(r,n,s,o,e[5],5,-701558691),o=ju(o,r,n,s,e[10],9,38016083),s=ju(s,o,r,n,e[15],14,-660478335),n=ju(n,s,o,r,e[4],20,-405537848),r=ju(r,n,s,o,e[9],5,568446438),o=ju(o,r,n,s,e[14],9,-1019803690),s=ju(s,o,r,n,e[3],14,-187363961),n=ju(n,s,o,r,e[8],20,1163531501),r=ju(r,n,s,o,e[13],5,-1444681467),o=ju(o,r,n,s,e[2],9,-51403784),s=ju(s,o,r,n,e[7],14,1735328473),r=ku(r,n=ju(n,s,o,r,e[12],20,-1926607734),s,o,e[5],4,-378558),o=ku(o,r,n,s,e[8],11,-2022574463),s=ku(s,o,r,n,e[11],16,1839030562),n=ku(n,s,o,r,e[14],23,-35309556),r=ku(r,n,s,o,e[1],4,-1530992060),o=ku(o,r,n,s,e[4],11,1272893353),s=ku(s,o,r,n,e[7],16,-155497632),n=ku(n,s,o,r,e[10],23,-1094730640),r=ku(r,n,s,o,e[13],4,681279174),o=ku(o,r,n,s,e[0],11,-358537222),s=ku(s,o,r,n,e[3],16,-722521979),n=ku(n,s,o,r,e[6],23,76029189),r=ku(r,n,s,o,e[9],4,-640364487),o=ku(o,r,n,s,e[12],11,-421815835),s=ku(s,o,r,n,e[15],16,530742520),r=Du(r,n=ku(n,s,o,r,e[2],23,-995338651),s,o,e[0],6,-198630844),o=Du(o,r,n,s,e[7],10,1126891415),s=Du(s,o,r,n,e[14],15,-1416354905),n=Du(n,s,o,r,e[5],21,-57434055),r=Du(r,n,s,o,e[12],6,1700485571),o=Du(o,r,n,s,e[3],10,-1894986606),s=Du(s,o,r,n,e[10],15,-1051523),n=Du(n,s,o,r,e[1],21,-2054922799),r=Du(r,n,s,o,e[8],6,1873313359),o=Du(o,r,n,s,e[15],10,-30611744),s=Du(s,o,r,n,e[6],15,-1560198380),n=Du(n,s,o,r,e[13],21,1309151649),r=Du(r,n,s,o,e[4],6,-145523070),o=Du(o,r,n,s,e[11],10,-1120210379),s=Du(s,o,r,n,e[2],15,718787259),n=Du(n,s,o,r,e[9],21,-343485551),t[0]=mm(r,t[0]),t[1]=mm(n,t[1]),t[2]=mm(s,t[2]),t[3]=mm(o,t[3])}function DC(t,e,r,n,s,o){return e=mm(mm(e,t),mm(n,o)),mm(e<<s|e>>>32-s,r)}function Mu(t,e,r,n,s,o,c){return DC(e&r|~e&n,t,e,s,o,c)}function ju(t,e,r,n,s,o,c){return DC(e&n|r&~n,t,e,s,o,c)}function ku(t,e,r,n,s,o,c){return DC(e^r^n,t,e,s,o,c)}function Du(t,e,r,n,s,o,c){return DC(r^(e|~n),t,e,s,o,c)}function sW(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)v3(n,jve(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(v3(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,v3(n,s),n}function jve(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}zx=as.atob.bind(as),rI=as.btoa.bind(as);var z7="0123456789abcdef".split("");function kve(t){for(var e="",r=0;r<4;r++)e+=z7[t>>8*r+4&15]+z7[t>>8*r&15];return e}function Dve(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function nI(t){return sW(t).map(Dve).join("")}var Ove=function(t){for(var e=0;e<t.length;e++)t[e]=kve(t[e]);return t.join("")}(sW("hello"))!="5d41402abc4b2a76b9719d911017c592";function mm(t,e){if(Ove){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function iI(t,e){var r,n,s,o;if(t!==r){for(var c=(s=t,o=1+(256/t.length>>0),new Array(o+1).join(s)),u=[],i=0;i<256;i++)u[i]=i;var A=0;for(i=0;i<256;i++){var g=u[i];A=(A+g+c.charCodeAt(i))%256,u[i]=u[A],u[A]=g}r=t,n=u}else u=n;var C=e.length,B=0,S=0,P="";for(i=0;i<C;i++)S=(S+(g=u[B=(B+1)%256]))%256,u[B]=u[S],u[S]=g,c=u[(u[B]+u[S])%256],P+=String.fromCharCode(e.charCodeAt(i)^c);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Q7={print:4,modify:8,copy:16,"annot-forms":32};function fy(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(u){if(Q7.perm!==void 0)throw new Error("Invalid permission: "+u);s+=Q7[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^s)),this.encryptionKey=nI(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=iI(this.encryptionKey,this.padding)}function py(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function H7(t){if(ba(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!s],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var o in e[r]){var c=e[r][o];try{c[0].apply(t,n)}catch(u){as.console&&Ra.error("jsPDF PubSub Error",u.message,u)}c[1]&&s.push(o)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function k_(t){if(!(this instanceof k_))return new k_(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function oW(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function om(t,e,r,n,s){if(!(this instanceof om))return new om(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,oW.call(this,n,s)}function $g(t,e,r,n,s){if(!(this instanceof $g))return new $g(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,oW.call(this,n,s)}function rs(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],o=arguments[3],c=[],u=1,i=16,A="S",g=null;ba(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,o=t.compress||t.compressPdf||o,(g=t.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(i=t.floatPrecision),A=t.defaultPathOperation||"S"),c=t.filters||(o===!0?["FlateEncode"]:c),n=n||"mm",r=(""+(r||"P")).toLowerCase();var C=t.putOnlyUsedFonts||!1,B={},S={internal:{},__private__:{}};S.__private__.PubSub=H7;var P="1.3",j=S.__private__.getPdfVersion=function(){return P};S.__private__.setPdfVersion=function(k){P=k};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};S.__private__.getPageFormats=function(){return R};var N=S.__private__.getPageFormat=function(k){return R[k]};s=s||"a4";var U={COMPAT:"compat",ADVANCED:"advanced"},$=U.COMPAT;function J(){this.saveGraphicsState(),Re(new qe(Xt,0,0,-Xt,0,_o()*Xt).toString()+" cm"),this.setFontSize(this.getFontSize()/Xt),A="n",$=U.ADVANCED}function te(){this.restoreGraphicsState(),A="S",$=U.COMPAT}var ue=S.__private__.combineFontStyleAndFontWeight=function(k,pe){if(k=="bold"&&pe=="normal"||k=="bold"&&pe==400||k=="normal"&&pe=="italic"||k=="bold"&&pe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pe&&(k=pe==400||pe==="normal"?k==="italic"?"italic":"normal":pe!=700&&pe!=="bold"||k!=="normal"?(pe==700?"bold":pe)+""+k:"bold"),k};S.advancedAPI=function(k){var pe=$===U.COMPAT;return pe&&J.call(this),typeof k!="function"||(k(this),pe&&te.call(this)),this},S.compatAPI=function(k){var pe=$===U.ADVANCED;return pe&&te.call(this),typeof k!="function"||(k(this),pe&&J.call(this)),this},S.isAdvancedAPI=function(){return $===U.ADVANCED};var oe,K=function(k){if($!==U.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ce=S.roundToPrecision=S.__private__.roundToPrecision=function(k,pe){var Ke=e||pe;if(isNaN(k)||isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Ke).replace(/0+$/,"")};oe=S.hpf=S.__private__.hpf=typeof i=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(k,i)}:i==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(k,16)};var me=S.f2=S.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return ce(k,2)},Z=S.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return ce(k,3)},Y=S.scale=S.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return $===U.COMPAT?k*Xt:$===U.ADVANCED?k:void 0},Le=function(k){return $===U.COMPAT?_o()-k:$===U.ADVANCED?k:void 0},_e=function(k){return Y(Le(k))};S.__private__.setPrecision=S.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var Qe,De="00000000000000000000000000000000",Be=S.__private__.getFileId=function(){return De},xe=S.__private__.setFileId=function(k){return De=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():De.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Qn=new fy(g.userPermissions,g.userPassword,g.ownerPassword,De)),De};S.setFileId=function(k){return xe(k),this},S.getFileId=function(){return Be()};var ze=S.__private__.convertDateToPDFDate=function(k){var pe=k.getTimezoneOffset(),Ke=pe<0?"+":"-",ot=Math.floor(Math.abs(pe/60)),St=Math.abs(pe%60),$t=[Ke,fe(ot),"'",fe(St),"'"].join("");return["D:",k.getFullYear(),fe(k.getMonth()+1),fe(k.getDate()),fe(k.getHours()),fe(k.getMinutes()),fe(k.getSeconds()),$t].join("")},Fe=S.__private__.convertPDFDateToDate=function(k){var pe=parseInt(k.substr(2,4),10),Ke=parseInt(k.substr(6,2),10)-1,ot=parseInt(k.substr(8,2),10),St=parseInt(k.substr(10,2),10),$t=parseInt(k.substr(12,2),10),gr=parseInt(k.substr(14,2),10);return new Date(pe,Ke,ot,St,$t,gr,0)},it=S.__private__.setCreationDate=function(k){var pe;if(k===void 0&&(k=new Date),k instanceof Date)pe=ze(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pe=k}return Qe=pe},ie=S.__private__.getCreationDate=function(k){var pe=Qe;return k==="jsDate"&&(pe=Fe(Qe)),pe};S.setCreationDate=function(k){return it(k),this},S.getCreationDate=function(k){return ie(k)};var le,fe=S.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},be=S.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},He=0,Je=[],tt=[],st=0,Ct=[],Ue=[],Ft=!1,Zt=tt,fr=function(){He=0,st=0,tt=[],Je=[],Ct=[],xr=Wt(),Ar=Wt()};S.__private__.setCustomOutputDestination=function(k){Ft=!0,Zt=k};var Ye=function(k){Ft||(Zt=k)};S.__private__.resetCustomOutputDestination=function(){Ft=!1,Zt=tt};var Re=S.__private__.out=function(k){return k=k.toString(),st+=k.length+1,Zt.push(k),Zt},hr=S.__private__.write=function(k){return Re(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Ut=S.__private__.getArrayBuffer=function(k){for(var pe=k.length,Ke=new ArrayBuffer(pe),ot=new Uint8Array(Ke);pe--;)ot[pe]=k.charCodeAt(pe);return Ke},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];S.__private__.getStandardFonts=function(){return vt};var Yt=t.fontSize||16;S.__private__.setFontSize=S.setFontSize=function(k){return Yt=$===U.ADVANCED?k/Xt:k,this};var ar,nr=S.__private__.getFontSize=S.getFontSize=function(){return $===U.COMPAT?Yt:Yt*Xt},Fr=t.R2L||!1;S.__private__.setR2L=S.setR2L=function(k){return Fr=k,this},S.__private__.getR2L=S.getR2L=function(){return Fr};var Gr,Ir=S.__private__.setZoomMode=function(k){var pe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))ar=k;else if(isNaN(k)){if(pe.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');ar=k}else ar=parseInt(k,10)};S.__private__.getZoomMode=function(){return ar};var cn,Sn=S.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Gr=k};S.__private__.getPageMode=function(){return Gr};var En=S.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');cn=k};S.__private__.getLayoutMode=function(){return cn},S.__private__.setDisplayMode=S.setDisplayMode=function(k,pe,Ke){return Ir(k),En(pe),Sn(Ke),this};var an={title:"",subject:"",author:"",keywords:"",creator:""};S.__private__.getDocumentProperty=function(k){if(Object.keys(an).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return an[k]},S.__private__.getDocumentProperties=function(){return an},S.__private__.setDocumentProperties=S.setProperties=S.setDocumentProperties=function(k){for(var pe in an)an.hasOwnProperty(pe)&&k[pe]&&(an[pe]=k[pe]);return this},S.__private__.setDocumentProperty=function(k,pe){if(Object.keys(an).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return an[k]=pe};var lr,Xt,qr,Kr,kn,mn={},Un={},Hi=[],Gn={},ti={},si={},xi={},Bn=null,Zr=0,Nr=[],un=new H7(S),ri=t.hotfixes||[],Hn={},ir={},We=[],qe=function k(pe,Ke,ot,St,$t,gr){if(!(this instanceof k))return new k(pe,Ke,ot,St,$t,gr);isNaN(pe)&&(pe=1),isNaN(Ke)&&(Ke=0),isNaN(ot)&&(ot=0),isNaN(St)&&(St=1),isNaN($t)&&($t=0),isNaN(gr)&&(gr=0),this._matrix=[pe,Ke,ot,St,$t,gr]};Object.defineProperty(qe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qe.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(oe).join(k)},qe.prototype.multiply=function(k){var pe=k.sx*this.sx+k.shy*this.shx,Ke=k.sx*this.shy+k.shy*this.sy,ot=k.shx*this.sx+k.sy*this.shx,St=k.shx*this.shy+k.sy*this.sy,$t=k.tx*this.sx+k.ty*this.shx+this.tx,gr=k.tx*this.shy+k.ty*this.sy+this.ty;return new qe(pe,Ke,ot,St,$t,gr)},qe.prototype.decompose=function(){var k=this.sx,pe=this.shy,Ke=this.shx,ot=this.sy,St=this.tx,$t=this.ty,gr=Math.sqrt(k*k+pe*pe),$r=(k/=gr)*Ke+(pe/=gr)*ot;Ke-=k*$r,ot-=pe*$r;var An=Math.sqrt(Ke*Ke+ot*ot);return $r/=An,k*(ot/=An)<pe*(Ke/=An)&&(k=-k,pe=-pe,$r=-$r,gr=-gr),{scale:new qe(gr,0,0,An,0,0),translate:new qe(1,0,0,1,St,$t),rotate:new qe(k,pe,-pe,k,0,0),skew:new qe(1,0,$r,1,0,0)}},qe.prototype.toString=function(k){return this.join(" ")},qe.prototype.inversed=function(){var k=this.sx,pe=this.shy,Ke=this.shx,ot=this.sy,St=this.tx,$t=this.ty,gr=1/(k*ot-pe*Ke),$r=ot*gr,An=-pe*gr,Tn=-Ke*gr,Wr=k*gr;return new qe($r,An,Tn,Wr,-$r*St-Tn*$t,-An*St-Wr*$t)},qe.prototype.applyToPoint=function(k){var pe=k.x*this.sx+k.y*this.shx+this.tx,Ke=k.x*this.shy+k.y*this.sy+this.ty;return new Uo(pe,Ke)},qe.prototype.applyToRectangle=function(k){var pe=this.applyToPoint(k),Ke=this.applyToPoint(new Uo(k.x+k.w,k.y+k.h));return new Va(pe.x,pe.y,Ke.x-pe.x,Ke.y-pe.y)},qe.prototype.clone=function(){var k=this.sx,pe=this.shy,Ke=this.shx,ot=this.sy,St=this.tx,$t=this.ty;return new qe(k,pe,Ke,ot,St,$t)},S.Matrix=qe;var ht=S.matrixMult=function(k,pe){return pe.multiply(k)},It=new qe(1,0,0,1,0,0);S.unitMatrix=S.identityMatrix=It;var wt=function(k,pe){if(!ti[k]){var Ke=(pe instanceof om?"Sh":"P")+(Object.keys(Gn).length+1).toString(10);pe.id=Ke,ti[k]=Ke,Gn[Ke]=pe,un.publish("addPattern",pe)}};S.ShadingPattern=om,S.TilingPattern=$g,S.addShadingPattern=function(k,pe){return K("addShadingPattern()"),wt(k,pe),this},S.beginTilingPattern=function(k){K("beginTilingPattern()"),Wo(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},S.endTilingPattern=function(k,pe){K("endTilingPattern()"),pe.stream=Ue[le].join(`
`),wt(k,pe),un.publish("endTilingPattern",pe),We.pop().restore()};var kt=S.__private__.newObject=function(){var k=Wt();return Ot(k,!0),k},Wt=S.__private__.newObjectDeferred=function(){return He++,Je[He]=function(){return st},He},Ot=function(k,pe){return pe=typeof pe=="boolean"&&pe,Je[k]=st,pe&&Re(k+" 0 obj"),k},pr=S.__private__.newAdditionalObject=function(){var k={objId:Wt(),content:""};return Ct.push(k),k},xr=Wt(),Ar=Wt(),Tr=S.__private__.decodeColorString=function(k){var pe=k.split(" ");if(pe.length!==2||pe[1]!=="g"&&pe[1]!=="G")pe.length===5&&(pe[4]==="k"||pe[4]==="K")&&(pe=[(1-pe[0])*(1-pe[3]),(1-pe[1])*(1-pe[3]),(1-pe[2])*(1-pe[3]),"r"]);else{var Ke=parseFloat(pe[0]);pe=[Ke,Ke,Ke,"r"]}for(var ot="#",St=0;St<3;St++)ot+=("0"+Math.floor(255*parseFloat(pe[St])).toString(16)).slice(-2);return ot},nn=S.__private__.encodeColorString=function(k){var pe;typeof k=="string"&&(k={ch1:k});var Ke=k.ch1,ot=k.ch2,St=k.ch3,$t=k.ch4,gr=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ke=="string"&&Ke.charAt(0)!=="#"){var $r=new iW(Ke);if($r.ok)Ke=$r.toHex();else if(!/^\d*\.?\d*$/.test(Ke))throw new Error('Invalid color "'+Ke+'" passed to jsPDF.encodeColorString.')}if(typeof Ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ke)&&(Ke="#"+Ke[1]+Ke[1]+Ke[2]+Ke[2]+Ke[3]+Ke[3]),typeof Ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ke)){var An=parseInt(Ke.substr(1),16);Ke=An>>16&255,ot=An>>8&255,St=255&An}if(ot===void 0||$t===void 0&&Ke===ot&&ot===St)if(typeof Ke=="string")pe=Ke+" "+gr[0];else switch(k.precision){case 2:pe=me(Ke/255)+" "+gr[0];break;case 3:default:pe=Z(Ke/255)+" "+gr[0]}else if($t===void 0||ba($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return pe=["1.","1.","1.",gr[1]].join(" ");if(typeof Ke=="string")pe=[Ke,ot,St,gr[1]].join(" ");else switch(k.precision){case 2:pe=[me(Ke/255),me(ot/255),me(St/255),gr[1]].join(" ");break;default:case 3:pe=[Z(Ke/255),Z(ot/255),Z(St/255),gr[1]].join(" ")}}else if(typeof Ke=="string")pe=[Ke,ot,St,$t,gr[2]].join(" ");else switch(k.precision){case 2:pe=[me(Ke),me(ot),me(St),me($t),gr[2]].join(" ");break;case 3:default:pe=[Z(Ke),Z(ot),Z(St),Z($t),gr[2]].join(" ")}return pe},on=S.__private__.getFilters=function(){return c},_n=S.__private__.putStream=function(k){var pe=(k=k||{}).data||"",Ke=k.filters||on(),ot=k.alreadyAppliedFilters||[],St=k.addLength1||!1,$t=pe.length,gr=k.objectId,$r=function(_s){return _s};if(g!==null&&gr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&($r=Qn.encryptor(gr,0));var An={};Ke===!0&&(Ke=["FlateEncode"]);var Tn=k.additionalKeyValues||[],Wr=(An=rs.API.processDataByFilters!==void 0?rs.API.processDataByFilters(pe,Ke):{data:pe,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(An.data.length!==0&&(Tn.push({key:"Length",value:An.data.length}),St===!0&&Tn.push({key:"Length1",value:$t})),Wr.length!=0)if(Wr.split("/").length-1==1)Tn.push({key:"Filter",value:Wr});else{Tn.push({key:"Filter",value:"["+Wr+"]"});for(var Dr=0;Dr<Tn.length;Dr+=1)if(Tn[Dr].key==="DecodeParms"){for(var Ci=[],gn=0;gn<An.reverseChain.split("/").length-1;gn+=1)Ci.push("null");Ci.push(Tn[Dr].value),Tn[Dr].value="["+Ci.join(" ")+"]"}}Re("<<");for(var Fi=0;Fi<Tn.length;Fi++)Re("/"+Tn[Fi].key+" "+Tn[Fi].value);Re(">>"),An.data.length!==0&&(Re("stream"),Re($r(An.data)),Re("endstream"))},Dn=S.__private__.putPage=function(k){var pe=k.number,Ke=k.data,ot=k.objId,St=k.contentsObjId;Ot(ot,!0),Re("<</Type /Page"),Re("/Parent "+k.rootDictionaryObjId+" 0 R"),Re("/Resources "+k.resourceDictionaryObjId+" 0 R"),Re("/MediaBox ["+parseFloat(oe(k.mediaBox.bottomLeftX))+" "+parseFloat(oe(k.mediaBox.bottomLeftY))+" "+oe(k.mediaBox.topRightX)+" "+oe(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&Re("/CropBox ["+oe(k.cropBox.bottomLeftX)+" "+oe(k.cropBox.bottomLeftY)+" "+oe(k.cropBox.topRightX)+" "+oe(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&Re("/BleedBox ["+oe(k.bleedBox.bottomLeftX)+" "+oe(k.bleedBox.bottomLeftY)+" "+oe(k.bleedBox.topRightX)+" "+oe(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&Re("/TrimBox ["+oe(k.trimBox.bottomLeftX)+" "+oe(k.trimBox.bottomLeftY)+" "+oe(k.trimBox.topRightX)+" "+oe(k.trimBox.topRightY)+"]"),k.artBox!==null&&Re("/ArtBox ["+oe(k.artBox.bottomLeftX)+" "+oe(k.artBox.bottomLeftY)+" "+oe(k.artBox.topRightX)+" "+oe(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&Re("/UserUnit "+k.userUnit),un.publish("putPage",{objId:ot,pageContext:Nr[pe],pageNumber:pe,page:Ke}),Re("/Contents "+St+" 0 R"),Re(">>"),Re("endobj");var $t=Ke.join(`
`);return $===U.ADVANCED&&($t+=`
Q`),Ot(St,!0),_n({data:$t,filters:on(),objectId:St}),Re("endobj"),ot},qn=S.__private__.putPages=function(){var k,pe,Ke=[];for(k=1;k<=Zr;k++)Nr[k].objId=Wt(),Nr[k].contentsObjId=Wt();for(k=1;k<=Zr;k++)Ke.push(Dn({number:k,data:Ue[k],objId:Nr[k].objId,contentsObjId:Nr[k].contentsObjId,mediaBox:Nr[k].mediaBox,cropBox:Nr[k].cropBox,bleedBox:Nr[k].bleedBox,trimBox:Nr[k].trimBox,artBox:Nr[k].artBox,userUnit:Nr[k].userUnit,rootDictionaryObjId:xr,resourceDictionaryObjId:Ar}));Ot(xr,!0),Re("<</Type /Pages");var ot="/Kids [";for(pe=0;pe<Zr;pe++)ot+=Ke[pe]+" 0 R ";Re(ot+"]"),Re("/Count "+Zr),Re(">>"),Re("endobj"),un.publish("postPutPages")},$n=function(k){un.publish("putFont",{font:k,out:Re,newObject:kt,putStream:_n}),k.isAlreadyPutted!==!0&&(k.objectNumber=kt(),Re("<<"),Re("/Type /Font"),Re("/BaseFont /"+py(k.postScriptName)),Re("/Subtype /Type1"),typeof k.encoding=="string"&&Re("/Encoding /"+k.encoding),Re("/FirstChar 32"),Re("/LastChar 255"),Re(">>"),Re("endobj"))},Ni=function(){for(var k in mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&$n(mn[k])},Vi=function(k){k.objectNumber=kt();var pe=[];pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Form"}),pe.push({key:"BBox",value:"["+[oe(k.x),oe(k.y),oe(k.x+k.width),oe(k.y+k.height)].join(" ")+"]"}),pe.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Ke=k.pages[1].join(`
`);_n({data:Ke,additionalKeyValues:pe,objectId:k.objectNumber}),Re("endobj")},Wn=function(){for(var k in Hn)Hn.hasOwnProperty(k)&&Vi(Hn[k])},Ki=function(k,pe){var Ke,ot=[],St=1/(pe-1);for(Ke=0;Ke<1;Ke+=St)ot.push(Ke);if(ot.push(1),k[0].offset!=0){var $t={offset:0,color:k[0].color};k.unshift($t)}if(k[k.length-1].offset!=1){var gr={offset:1,color:k[k.length-1].color};k.push(gr)}for(var $r="",An=0,Tn=0;Tn<ot.length;Tn++){for(Ke=ot[Tn];Ke>k[An+1].offset;)An++;var Wr=k[An].offset,Dr=(Ke-Wr)/(k[An+1].offset-Wr),Ci=k[An].color,gn=k[An+1].color;$r+=be(Math.round((1-Dr)*Ci[0]+Dr*gn[0]).toString(16))+be(Math.round((1-Dr)*Ci[1]+Dr*gn[1]).toString(16))+be(Math.round((1-Dr)*Ci[2]+Dr*gn[2]).toString(16))}return $r.trim()},Cs=function(k,pe){pe||(pe=21);var Ke=kt(),ot=Ki(k.colors,pe),St=[];St.push({key:"FunctionType",value:"0"}),St.push({key:"Domain",value:"[0.0 1.0]"}),St.push({key:"Size",value:"["+pe+"]"}),St.push({key:"BitsPerSample",value:"8"}),St.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_n({data:ot,additionalKeyValues:St,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ke}),Re("endobj"),k.objectNumber=kt(),Re("<< /ShadingType "+k.type),Re("/ColorSpace /DeviceRGB");var $t="/Coords ["+oe(parseFloat(k.coords[0]))+" "+oe(parseFloat(k.coords[1]))+" ";k.type===2?$t+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3])):$t+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3]))+" "+oe(parseFloat(k.coords[4]))+" "+oe(parseFloat(k.coords[5])),Re($t+="]"),k.matrix&&Re("/Matrix ["+k.matrix.toString()+"]"),Re("/Function "+Ke+" 0 R"),Re("/Extend [true true]"),Re(">>"),Re("endobj")},ro=function(k,pe){var Ke=Wt(),ot=kt();pe.push({resourcesOid:Ke,objectOid:ot}),k.objectNumber=ot;var St=[];St.push({key:"Type",value:"/Pattern"}),St.push({key:"PatternType",value:"1"}),St.push({key:"PaintType",value:"1"}),St.push({key:"TilingType",value:"1"}),St.push({key:"BBox",value:"["+k.boundingBox.map(oe).join(" ")+"]"}),St.push({key:"XStep",value:oe(k.xStep)}),St.push({key:"YStep",value:oe(k.yStep)}),St.push({key:"Resources",value:Ke+" 0 R"}),k.matrix&&St.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),_n({data:k.stream,additionalKeyValues:St,objectId:k.objectNumber}),Re("endobj")},Fs=function(k){var pe;for(pe in Gn)Gn.hasOwnProperty(pe)&&(Gn[pe]instanceof om?Cs(Gn[pe]):Gn[pe]instanceof $g&&ro(Gn[pe],k))},es=function(k){for(var pe in k.objectNumber=kt(),Re("<<"),k)switch(pe){case"opacity":Re("/ca "+me(k[pe]));break;case"stroke-opacity":Re("/CA "+me(k[pe]))}Re(">>"),Re("endobj")},Sa=function(){var k;for(k in si)si.hasOwnProperty(k)&&es(si[k])},Ba=function(){for(var k in Re("/XObject <<"),Hn)Hn.hasOwnProperty(k)&&Hn[k].objectNumber>=0&&Re("/"+k+" "+Hn[k].objectNumber+" 0 R");un.publish("putXobjectDict"),Re(">>")},tl=function(){Qn.oid=kt(),Re("<<"),Re("/Filter /Standard"),Re("/V "+Qn.v),Re("/R "+Qn.r),Re("/U <"+Qn.toHexString(Qn.U)+">"),Re("/O <"+Qn.toHexString(Qn.O)+">"),Re("/P "+Qn.P),Re(">>"),Re("endobj")},go=function(){for(var k in Re("/Font <<"),mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&Re("/"+k+" "+mn[k].objectNumber+" 0 R");Re(">>")},Sl=function(){if(Object.keys(Gn).length>0){for(var k in Re("/Shading <<"),Gn)Gn.hasOwnProperty(k)&&Gn[k]instanceof om&&Gn[k].objectNumber>=0&&Re("/"+k+" "+Gn[k].objectNumber+" 0 R");un.publish("putShadingPatternDict"),Re(">>")}},sa=function(k){if(Object.keys(Gn).length>0){for(var pe in Re("/Pattern <<"),Gn)Gn.hasOwnProperty(pe)&&Gn[pe]instanceof S.TilingPattern&&Gn[pe].objectNumber>=0&&Gn[pe].objectNumber<k&&Re("/"+pe+" "+Gn[pe].objectNumber+" 0 R");un.publish("putTilingPatternDict"),Re(">>")}},Ha=function(){if(Object.keys(si).length>0){var k;for(k in Re("/ExtGState <<"),si)si.hasOwnProperty(k)&&si[k].objectNumber>=0&&Re("/"+k+" "+si[k].objectNumber+" 0 R");un.publish("putGStateDict"),Re(">>")}},Gi=function(k){Ot(k.resourcesOid,!0),Re("<<"),Re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),go(),Sl(),sa(k.objectOid),Ha(),Ba(),Re(">>"),Re("endobj")},Fc=function(){var k=[];Ni(),Sa(),Wn(),Fs(k),un.publish("putResources"),k.forEach(Gi),Gi({resourcesOid:Ar,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources")},nc=function(){un.publish("putAdditionalObjects");for(var k=0;k<Ct.length;k++){var pe=Ct[k];Ot(pe.objId,!0),Re(pe.content),Re("endobj")}un.publish("postPutAdditionalObjects")},Ul=function(k){Un[k.fontName]=Un[k.fontName]||{},Un[k.fontName][k.fontStyle]=k.id},Xo=function(k,pe,Ke,ot,St){var $t={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:k,fontName:pe,fontStyle:Ke,encoding:ot,isStandardFont:St||!1,metadata:{}};return un.publish("addFont",{font:$t,instance:this}),mn[$t.id]=$t,Ul($t),$t.id},Pa=function(k){for(var pe=0,Ke=vt.length;pe<Ke;pe++){var ot=Xo.call(this,k[pe][0],k[pe][1],k[pe][2],vt[pe][3],!0);C===!1&&(B[ot]=!0);var St=k[pe][0].split("-");Ul({id:ot,fontName:St[0],fontStyle:St[1]||""})}un.publish("addFonts",{fonts:mn,dictionary:Un})},mi=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(ot){var pe=ot.stack||"";~pe.indexOf(" at ")&&(pe=pe.split(" at ")[1]);var Ke="Error in function "+pe.split(`
`)[0].split("<")[0]+": "+ot.message;if(!as.console)throw new Error(Ke);as.console.error(Ke,ot),as.alert&&alert(Ke)}},k.foo.bar=k,k.foo},So=function(k,pe){var Ke,ot,St,$t,gr,$r,An,Tn,Wr;if(St=(pe=pe||{}).sourceEncoding||"Unicode",gr=pe.outputEncoding,(pe.autoencode||gr)&&mn[lr].metadata&&mn[lr].metadata[St]&&mn[lr].metadata[St].encoding&&($t=mn[lr].metadata[St].encoding,!gr&&mn[lr].encoding&&(gr=mn[lr].encoding),!gr&&$t.codePages&&(gr=$t.codePages[0]),typeof gr=="string"&&(gr=$t[gr]),gr)){for(An=!1,$r=[],Ke=0,ot=k.length;Ke<ot;Ke++)(Tn=gr[k.charCodeAt(Ke)])?$r.push(String.fromCharCode(Tn)):$r.push(k[Ke]),$r[Ke].charCodeAt(0)>>8&&(An=!0);k=$r.join("")}for(Ke=k.length;An===void 0&&Ke!==0;)k.charCodeAt(Ke-1)>>8&&(An=!0),Ke--;if(!An)return k;for($r=pe.noBOM?[]:[254,255],Ke=0,ot=k.length;Ke<ot;Ke++){if((Wr=(Tn=k.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$r.push(Wr),$r.push(Tn-(Wr<<8))}return String.fromCharCode.apply(void 0,$r)},vs=S.__private__.pdfEscape=S.pdfEscape=function(k,pe){return So(k,pe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bl=S.__private__.beginPage=function(k){Ue[++Zr]=[],Nr[Zr]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},ae(Zr),Ye(Ue[le])},Nc=function(k,pe){var Ke,ot,St;switch(r=pe||r,typeof k=="string"&&(Ke=N(k.toLowerCase()),Array.isArray(Ke)&&(ot=Ke[0],St=Ke[1])),Array.isArray(k)&&(ot=k[0]*Xt,St=k[1]*Xt),isNaN(ot)&&(ot=s[0],St=s[1]),(ot>14400||St>14400)&&(Ra.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),St=Math.min(14400,St)),s=[ot,St],r.substr(0,1)){case"l":St>ot&&(s=[St,ot]);break;case"p":ot>St&&(s=[St,ot])}Bl(s),$c(yo),Re(vo),ic!==0&&Re(ic+" J"),aa!==0&&Re(aa+" j"),un.publish("addPage",{pageNumber:Zr})},Cc=function(k){k>0&&k<=Zr&&(Ue.splice(k,1),Nr.splice(k,1),Zr--,le>Zr&&(le=Zr),this.setPage(le))},ae=function(k){k>0&&k<=Zr&&(le=k)},Oe=S.__private__.getNumberOfPages=S.getNumberOfPages=function(){return Ue.length-1},At=function(k,pe,Ke){var ot,St=void 0;return Ke=Ke||{},k=k!==void 0?k:mn[lr].fontName,pe=pe!==void 0?pe:mn[lr].fontStyle,ot=k.toLowerCase(),Un[ot]!==void 0&&Un[ot][pe]!==void 0?St=Un[ot][pe]:Un[k]!==void 0&&Un[k][pe]!==void 0?St=Un[k][pe]:Ke.disableWarning===!1&&Ra.warn("Unable to look up font label for font '"+k+"', '"+pe+"'. Refer to getFontList() for available fonts."),St||Ke.noFallback||(St=Un.times[pe])==null&&(St=Un.times.normal),St},Ht=S.__private__.putInfo=function(){var k=kt(),pe=function(ot){return ot};for(var Ke in g!==null&&(pe=Qn.encryptor(k,0)),Re("<<"),Re("/Producer ("+vs(pe("jsPDF "+rs.version))+")"),an)an.hasOwnProperty(Ke)&&an[Ke]&&Re("/"+Ke.substr(0,1).toUpperCase()+Ke.substr(1)+" ("+vs(pe(an[Ke]))+")");Re("/CreationDate ("+vs(pe(Qe))+")"),Re(">>"),Re("endobj")},er=S.__private__.putCatalog=function(k){var pe=(k=k||{}).rootDictionaryObjId||xr;switch(kt(),Re("<<"),Re("/Type /Catalog"),Re("/Pages "+pe+" 0 R"),ar||(ar="fullwidth"),ar){case"fullwidth":Re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Re("/OpenAction [3 0 R /Fit]");break;case"original":Re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ke=""+ar;Ke.substr(Ke.length-1)==="%"&&(ar=parseInt(ar)/100),typeof ar=="number"&&Re("/OpenAction [3 0 R /XYZ null null "+me(ar)+"]")}switch(cn||(cn="continuous"),cn){case"continuous":Re("/PageLayout /OneColumn");break;case"single":Re("/PageLayout /SinglePage");break;case"two":case"twoleft":Re("/PageLayout /TwoColumnLeft");break;case"tworight":Re("/PageLayout /TwoColumnRight")}Gr&&Re("/PageMode /"+Gr),un.publish("putCatalog"),Re(">>"),Re("endobj")},tr=S.__private__.putTrailer=function(){Re("trailer"),Re("<<"),Re("/Size "+(He+1)),Re("/Root "+He+" 0 R"),Re("/Info "+(He-1)+" 0 R"),g!==null&&Re("/Encrypt "+Qn.oid+" 0 R"),Re("/ID [ <"+De+"> <"+De+"> ]"),Re(">>")},_r=S.__private__.putHeader=function(){Re("%PDF-"+P),Re("%")},fn=S.__private__.putXRef=function(){var k="0000000000";Re("xref"),Re("0 "+(He+1)),Re("0000000000 65535 f ");for(var pe=1;pe<=He;pe++)typeof Je[pe]=="function"?Re((k+Je[pe]()).slice(-10)+" 00000 n "):Je[pe]!==void 0?Re((k+Je[pe]).slice(-10)+" 00000 n "):Re("0000000000 00000 n ")},pn=S.__private__.buildDocument=function(){fr(),Ye(tt),un.publish("buildDocument"),_r(),qn(),nc(),Fc(),g!==null&&tl(),Ht(),er();var k=st;return fn(),tr(),Re("startxref"),Re(""+k),Re("%%EOF"),Ye(Ue[le]),tt.join(`
`)},Nn=S.__private__.getBlob=function(k){return new Blob([Ut(k)],{type:"application/pdf"})},Mn=S.output=S.__private__.output=mi(function(k,pe){switch(typeof(pe=pe||{})=="string"?pe={filename:pe}:pe.filename=pe.filename||"generated.pdf",k){case void 0:return pn();case"save":S.save(pe.filename);break;case"arraybuffer":return Ut(pn());case"blob":return Nn(pn());case"bloburi":case"bloburl":if(as.URL!==void 0&&typeof as.URL.createObjectURL=="function")return as.URL&&as.URL.createObjectURL(Nn(pn()))||void 0;Ra.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ke="",ot=pn();try{Ke=rI(ot)}catch{Ke=rI(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+pe.filename+";base64,"+Ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(as)==="[object Window]"){var St="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pe.pdfObjectUrl&&(St=pe.pdfObjectUrl,$t="");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+St+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pe)+");<\/script></body></html>",$r=as.open();return $r!==null&&$r.document.write(gr),$r}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(as)==="[object Window]"){var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pe.filename+'" width="500px" height="400px" /></body></html>',Tn=as.open();if(Tn!==null){Tn.document.write(An);var Wr=this;Tn.document.documentElement.querySelector("#pdfViewer").onload=function(){Tn.document.title=pe.filename,Tn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wr.output("bloburl"))}}return Tn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(as)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pe)+'"></iframe></body></html>',Ci=as.open();if(Ci!==null&&(Ci.document.write(Dr),Ci.document.title=pe.filename),Ci||typeof safari>"u")return Ci;break;case"datauri":case"dataurl":return as.document.location.href=this.output("datauristring",pe);default:return null}}),Xr=function(k){return Array.isArray(ri)===!0&&ri.indexOf(k)>-1};switch(n){case"pt":Xt=1;break;case"mm":Xt=72/25.4;break;case"cm":Xt=72/2.54;break;case"in":Xt=72;break;case"px":Xt=Xr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xt=12;break;case"ex":Xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Xt=n}var Qn=null;it(),xe();var oi=function(k){return g!==null?Qn.encryptor(k,0):function(pe){return pe}},Pi=S.__private__.getPageInfo=S.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nr[k].objId,pageNumber:k,pageContext:Nr[k]}},Sr=S.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pe in Nr)if(Nr[pe].objId===k)break;return Pi(pe)},ln=S.__private__.getCurrentPageInfo=S.getCurrentPageInfo=function(){return{objId:Nr[le].objId,pageNumber:le,pageContext:Nr[le]}};S.addPage=function(){return Nc.apply(this,arguments),this},S.setPage=function(){return ae.apply(this,arguments),Ye.call(this,Ue[le]),this},S.insertPage=function(k){return this.addPage(),this.movePage(le,k),this},S.movePage=function(k,pe){var Ke,ot;if(k>pe){Ke=Ue[k],ot=Nr[k];for(var St=k;St>pe;St--)Ue[St]=Ue[St-1],Nr[St]=Nr[St-1];Ue[pe]=Ke,Nr[pe]=ot,this.setPage(pe)}else if(k<pe){Ke=Ue[k],ot=Nr[k];for(var $t=k;$t<pe;$t++)Ue[$t]=Ue[$t+1],Nr[$t]=Nr[$t+1];Ue[pe]=Ke,Nr[pe]=ot,this.setPage(pe)}return this},S.deletePage=function(){return Cc.apply(this,arguments),this},S.__private__.text=S.text=function(k,pe,Ke,ot,St){var $t,gr,$r,An,Tn,Wr,Dr,Ci,gn,Fi=(ot=ot||{}).scope||this;if(typeof k=="number"&&typeof pe=="number"&&(typeof Ke=="string"||Array.isArray(Ke))){var _s=Ke;Ke=pe,pe=k,k=_s}if(arguments[3]instanceof qe?(K("The transform parameter of text() with a Matrix value"),gn=St):($r=arguments[4],An=arguments[5],ba(Dr=arguments[3])==="object"&&Dr!==null||(typeof $r=="string"&&(An=$r,$r=null),typeof Dr=="string"&&(An=Dr,Dr=null),typeof Dr=="number"&&($r=Dr,Dr=null),ot={flags:Dr,angle:$r,align:An})),isNaN(pe)||isNaN(Ke)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Fi;var vn="",ao=!1,Zs=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:oa,Yo=Fi.internal.scaleFactor;function nl(ws){return ws=ws.split("	").join(Array(ot.TabLen||9).join(" ")),vs(ws,Dr)}function il(ws){for(var Yi,ai=ws.concat(),qs=[],sl=ai.length;sl--;)typeof(Yi=ai.shift())=="string"?qs.push(Yi):Array.isArray(ws)&&(Yi.length===1||Yi[1]===void 0&&Yi[2]===void 0)?qs.push(Yi[0]):qs.push([Yi[0],Yi[1],Yi[2]]);return qs}function io(ws,Yi){var ai;if(typeof ws=="string")ai=Yi(ws)[0];else if(Array.isArray(ws)){for(var qs,sl,ac=ws.concat(),ol=[],qa=ac.length;qa--;)typeof(qs=ac.shift())=="string"?ol.push(Yi(qs)[0]):Array.isArray(qs)&&typeof qs[0]=="string"&&(sl=Yi(qs[0],qs[1],qs[2]),ol.push([sl[0],sl[1],sl[2]]));ai=ol}return ai}var Ga=!1,Ea=!0;if(typeof k=="string")Ga=!0;else if(Array.isArray(k)){var Zo=k.concat();gr=[];for(var ja,$i=Zo.length;$i--;)(typeof(ja=Zo.shift())!="string"||Array.isArray(ja)&&typeof ja[0]!="string")&&(Ea=!1);Ga=Ea}if(Ga===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var cs=Yt/Fi.internal.scaleFactor,la=cs*(Zs-1);switch(ot.baseline){case"bottom":Ke-=la;break;case"top":Ke+=cs-la;break;case"hanging":Ke+=cs-2*la;break;case"middle":Ke+=cs/2-la}if((Wr=ot.maxWidth||0)>0&&(typeof k=="string"?k=Fi.splitTextToSize(k,Wr):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(ws,Yi){return ws.concat(Fi.splitTextToSize(Yi,Wr))},[]))),$t={text:k,x:pe,y:Ke,options:ot,mutex:{pdfEscape:vs,activeFontKey:lr,fonts:mn,activeFontSize:Yt}},un.publish("preProcessText",$t),k=$t.text,$r=(ot=$t.options).angle,!(gn instanceof qe)&&$r&&typeof $r=="number"){$r*=Math.PI/180,ot.rotationDirection===0&&($r=-$r),$===U.ADVANCED&&($r=-$r);var Jr=Math.cos($r),sc=Math.sin($r);gn=new qe(Jr,sc,-sc,Jr,0,0)}else $r&&$r instanceof qe&&(gn=$r);$!==U.ADVANCED||gn||(gn=It),(Tn=ot.charSpace||$o)!==void 0&&(vn+=oe(Y(Tn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ci=ot.horizontalScale)!==void 0&&(vn+=oe(100*Ci)+` Tz
`),ot.lang;var bs=-1,oc=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,yl=Fi.internal.getCurrentPageInfo().pageContext;switch(oc){case 0:case!1:case"fill":bs=0;break;case 1:case!0:case"stroke":bs=1;break;case 2:case"fillThenStroke":bs=2;break;case 3:case"invisible":bs=3;break;case 4:case"fillAndAddForClipping":bs=4;break;case 5:case"strokeAndAddPathForClipping":bs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":bs=6;break;case 7:case"addToPathForClipping":bs=7}var $l=yl.usedRenderingMode!==void 0?yl.usedRenderingMode:-1;bs!==-1?vn+=bs+` Tr
`:$l!==-1&&(vn+=`0 Tr
`),bs!==-1&&(yl.usedRenderingMode=bs),An=ot.align||"left";var js,Jo=Yt*Zs,Aa=Fi.internal.pageSize.getWidth(),Pc=mn[lr];Tn=ot.charSpace||$o,Wr=ot.maxWidth||0,Dr=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var yr=[],jr=function(ws){return Fi.getStringUnitWidth(ws,{font:Pc,charSpace:Tn,fontSize:Yt,doKerning:!1})*Yt/Yo};if(Object.prototype.toString.call(k)==="[object Array]"){var xn;gr=il(k),An!=="left"&&(js=gr.map(jr));var jn,ts=0;if(An==="right"){pe-=js[0],k=[],$i=gr.length;for(var bi=0;bi<$i;bi++)bi===0?(jn=qo(pe),xn=Xs(Ke)):(jn=Y(ts-js[bi]),xn=-Jo),k.push([gr[bi],jn,xn]),ts=js[bi]}else if(An==="center"){pe-=js[0]/2,k=[],$i=gr.length;for(var As=0;As<$i;As++)As===0?(jn=qo(pe),xn=Xs(Ke)):(jn=Y((ts-js[As])/2),xn=-Jo),k.push([gr[As],jn,xn]),ts=js[As]}else if(An==="left"){k=[],$i=gr.length;for(var us=0;us<$i;us++)k.push(gr[us])}else if(An==="justify"&&Pc.encoding==="Identity-H"){k=[],$i=gr.length,Wr=Wr!==0?Wr:Aa;for(var bo=0,Xi=0;Xi<$i;Xi++)if(xn=Xi===0?Xs(Ke):-Jo,jn=Xi===0?qo(pe):bo,Xi<$i-1){var ks=Y((Wr-js[Xi])/(gr[Xi].split(" ").length-1)),Ss=gr[Xi].split(" ");k.push([Ss[0]+" ",jn,xn]),bo=0;for(var Us=1;Us<Ss.length;Us++){var Js=(jr(Ss[Us-1]+" "+Ss[Us])-jr(Ss[Us]))*Yo+ks;Us==Ss.length-1?k.push([Ss[Us],Js,0]):k.push([Ss[Us]+" ",Js,0]),bo-=Js}}else k.push([gr[Xi],jn,xn]);k.push(["",bo,0])}else{if(An!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],$i=gr.length,Wr=Wr!==0?Wr:Aa,Xi=0;Xi<$i;Xi++)xn=Xi===0?Xs(Ke):-Jo,jn=Xi===0?qo(pe):0,Xi<$i-1?yr.push(oe(Y((Wr-js[Xi])/(gr[Xi].split(" ").length-1)))):yr.push(0),k.push([gr[Xi],jn,xn])}}var ea=typeof ot.R2L=="boolean"?ot.R2L:Fr;ea===!0&&(k=io(k,function(ws,Yi,ai){return[ws.split("").reverse().join(""),Yi,ai]})),$t={text:k,x:pe,y:Ke,options:ot,mutex:{pdfEscape:vs,activeFontKey:lr,fonts:mn,activeFontSize:Yt}},un.publish("postProcessText",$t),k=$t.text,ao=$t.mutex.isHex||!1;var ma=mn[lr].encoding;ma!=="WinAnsiEncoding"&&ma!=="StandardEncoding"||(k=io(k,function(ws,Yi,ai){return[nl(ws),Yi,ai]})),gr=il(k),k=[];for(var ta,ra,Gs,ga=0,hs=1,ss=Array.isArray(gr[0])?hs:ga,In="",gi=function(ws,Yi,ai){var qs="";return ai instanceof qe?(ai=typeof ot.angle=="number"?ht(ai,new qe(1,0,0,1,ws,Yi)):ht(new qe(1,0,0,1,ws,Yi),ai),$===U.ADVANCED&&(ai=ht(new qe(1,0,0,-1,0,0),ai)),qs=ai.join(" ")+` Tm
`):qs=oe(ws)+" "+oe(Yi)+` Td
`,qs},lo=0;lo<gr.length;lo++){switch(In="",ss){case hs:Gs=(ao?"<":"(")+gr[lo][0]+(ao?">":")"),ta=parseFloat(gr[lo][1]),ra=parseFloat(gr[lo][2]);break;case ga:Gs=(ao?"<":"(")+gr[lo]+(ao?">":")"),ta=qo(pe),ra=Xs(Ke)}yr!==void 0&&yr[lo]!==void 0&&(In=yr[lo]+` Tw
`),lo===0?k.push(In+gi(ta,ra,gn)+Gs):ss===ga?k.push(In+Gs):ss===hs&&k.push(In+gi(ta,ra,gn)+Gs)}k=ss===ga?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var eo=`BT
/`;return eo+=lr+" "+Yt+` Tf
`,eo+=oe(Yt*Zs)+` TL
`,eo+=xs+`
`,eo+=vn,eo+=k,Re(eo+="ET"),B[lr]=!0,Fi};var Jn=S.__private__.clip=S.clip=function(k){return Re(k==="evenodd"?"W*":"W"),this};S.clipEvenOdd=function(){return Jn("evenodd")},S.__private__.discardPath=S.discardPath=function(){return Re("n"),this};var Bi=S.__private__.isValidStyle=function(k){var pe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(pe=!0),pe};S.__private__.setDefaultPathOperation=S.setDefaultPathOperation=function(k){return Bi(k)&&(A=k),this};var Ns=S.__private__.getStyle=S.getStyle=function(k){var pe=A;switch(k){case"D":case"S":pe="S";break;case"F":pe="f";break;case"FD":case"DF":pe="B";break;case"f":case"f*":case"B":case"B*":pe=k}return pe},Ks=S.close=function(){return Re("h"),this};S.stroke=function(){return Re("S"),this},S.fill=function(k){return Ro("f",k),this},S.fillEvenOdd=function(k){return Ro("f*",k),this},S.fillStroke=function(k){return Ro("B",k),this},S.fillStrokeEvenOdd=function(k){return Ro("B*",k),this};var Ro=function(k,pe){ba(pe)==="object"?Li(pe,k):Re(k)},yn=function(k){k===null||$===U.ADVANCED&&k===void 0||(k=Ns(k),Re(k))};function Yn(k,pe,Ke,ot,St){var $t=new $g(pe||this.boundingBox,Ke||this.xStep,ot||this.yStep,this.gState,St||this.matrix);$t.stream=this.stream;var gr=k+"$$"+this.cloneIndex+++"$$";return wt(gr,$t),$t}var Li=function(k,pe){var Ke=ti[k.key],ot=Gn[Ke];if(ot instanceof om)Re("q"),Re(da(pe)),ot.gState&&S.setGState(ot.gState),Re(k.matrix.toString()+" cm"),Re("/"+Ke+" sh"),Re("Q");else if(ot instanceof $g){var St=new qe(1,0,0,-1,0,_o());k.matrix&&(St=St.multiply(k.matrix||It),Ke=Yn.call(ot,k.key,k.boundingBox,k.xStep,k.yStep,St).id),Re("q"),Re("/Pattern cs"),Re("/"+Ke+" scn"),ot.gState&&S.setGState(ot.gState),Re(pe),Re("Q")}},da=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ms=S.moveTo=function(k,pe){return Re(oe(Y(k))+" "+oe(_e(pe))+" m"),this},fi=S.lineTo=function(k,pe){return Re(oe(Y(k))+" "+oe(_e(pe))+" l"),this},Po=S.curveTo=function(k,pe,Ke,ot,St,$t){return Re([oe(Y(k)),oe(_e(pe)),oe(Y(Ke)),oe(_e(ot)),oe(Y(St)),oe(_e($t)),"c"].join(" ")),this};S.__private__.line=S.line=function(k,pe,Ke,ot,St){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||!Bi(St))throw new Error("Invalid arguments passed to jsPDF.line");return $===U.COMPAT?this.lines([[Ke-k,ot-pe]],k,pe,[1,1],St||"S"):this.lines([[Ke-k,ot-pe]],k,pe,[1,1]).stroke()},S.__private__.lines=S.lines=function(k,pe,Ke,ot,St,$t){var gr,$r,An,Tn,Wr,Dr,Ci,gn,Fi,_s,vn,ao;if(typeof k=="number"&&(ao=Ke,Ke=pe,pe=k,k=ao),ot=ot||[1,1],$t=$t||!1,isNaN(pe)||isNaN(Ke)||!Array.isArray(k)||!Array.isArray(ot)||!Bi(St)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ms(pe,Ke),gr=ot[0],$r=ot[1],Tn=k.length,_s=pe,vn=Ke,An=0;An<Tn;An++)(Wr=k[An]).length===2?(_s=Wr[0]*gr+_s,vn=Wr[1]*$r+vn,fi(_s,vn)):(Dr=Wr[0]*gr+_s,Ci=Wr[1]*$r+vn,gn=Wr[2]*gr+_s,Fi=Wr[3]*$r+vn,_s=Wr[4]*gr+_s,vn=Wr[5]*$r+vn,Po(Dr,Ci,gn,Fi,_s,vn));return $t&&Ks(),yn(St),this},S.path=function(k){for(var pe=0;pe<k.length;pe++){var Ke=k[pe],ot=Ke.c;switch(Ke.op){case"m":Ms(ot[0],ot[1]);break;case"l":fi(ot[0],ot[1]);break;case"c":Po.apply(this,ot);break;case"h":Ks()}}return this},S.__private__.rect=S.rect=function(k,pe,Ke,ot,St){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||!Bi(St))throw new Error("Invalid arguments passed to jsPDF.rect");return $===U.COMPAT&&(ot=-ot),Re([oe(Y(k)),oe(_e(pe)),oe(Y(Ke)),oe(Y(ot)),"re"].join(" ")),yn(St),this},S.__private__.triangle=S.triangle=function(k,pe,Ke,ot,St,$t,gr){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||isNaN(St)||isNaN($t)||!Bi(gr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ke-k,ot-pe],[St-Ke,$t-ot],[k-St,pe-$t]],k,pe,[1,1],gr,!0),this},S.__private__.roundedRect=S.roundedRect=function(k,pe,Ke,ot,St,$t,gr){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||isNaN(St)||isNaN($t)||!Bi(gr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $r=4/3*(Math.SQRT2-1);return St=Math.min(St,.5*Ke),$t=Math.min($t,.5*ot),this.lines([[Ke-2*St,0],[St*$r,0,St,$t-$t*$r,St,$t],[0,ot-2*$t],[0,$t*$r,-St*$r,$t,-St,$t],[2*St-Ke,0],[-St*$r,0,-St,-$t*$r,-St,-$t],[0,2*$t-ot],[0,-$t*$r,St*$r,-$t,St,-$t]],k+St,pe,[1,1],gr,!0),this},S.__private__.ellipse=S.ellipse=function(k,pe,Ke,ot,St){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||!Bi(St))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*Ke,gr=4/3*(Math.SQRT2-1)*ot;return Ms(k+Ke,pe),Po(k+Ke,pe-gr,k+$t,pe-ot,k,pe-ot),Po(k-$t,pe-ot,k-Ke,pe-gr,k-Ke,pe),Po(k-Ke,pe+gr,k-$t,pe+ot,k,pe+ot),Po(k+$t,pe+ot,k+Ke,pe+gr,k+Ke,pe),yn(St),this},S.__private__.circle=S.circle=function(k,pe,Ke,ot){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||!Bi(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,pe,Ke,Ke,ot)},S.setFont=function(k,pe,Ke){return Ke&&(pe=ue(pe,Ke)),lr=At(k,pe,{disableWarning:!1}),this};var zl=S.__private__.getFont=S.getFont=function(){return mn[At.apply(S,arguments)]};S.__private__.getFontList=S.getFontList=function(){var k,pe,Ke={};for(k in Un)if(Un.hasOwnProperty(k))for(pe in Ke[k]=[],Un[k])Un[k].hasOwnProperty(pe)&&Ke[k].push(pe);return Ke},S.addFont=function(k,pe,Ke,ot,St){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?St=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&(Ke=ue(Ke,ot)),St=St||"Identity-H",Xo.call(this,k,pe,Ke,St)};var oa,yo=t.lineWidth||.200025,ps=S.__private__.getLineWidth=S.getLineWidth=function(){return yo},$c=S.__private__.setLineWidth=S.setLineWidth=function(k){return yo=k,Re(oe(Y(k))+" w"),this};S.__private__.setLineDash=rs.API.setLineDash=rs.API.setLineDashPattern=function(k,pe){if(k=k||[],pe=pe||0,isNaN(pe)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Ke){return oe(Y(Ke))}).join(" "),pe=oe(Y(pe)),Re("["+k+"] "+pe+" d"),this};var Ql=S.__private__.getLineHeight=S.getLineHeight=function(){return Yt*oa};S.__private__.getLineHeight=S.getLineHeight=function(){return Yt*oa};var Hl=S.__private__.setLineHeightFactor=S.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(oa=k),this},Ma=S.__private__.getLineHeightFactor=S.getLineHeightFactor=function(){return oa};Hl(t.lineHeight);var qo=S.__private__.getHorizontalCoordinate=function(k){return Y(k)},Xs=S.__private__.getVerticalCoordinate=function(k){return $===U.ADVANCED?k:Nr[le].mediaBox.topRightY-Nr[le].mediaBox.bottomLeftY-Y(k)},Bo=S.__private__.getHorizontalCoordinateString=S.getHorizontalCoordinateString=function(k){return oe(qo(k))},Ys=S.__private__.getVerticalCoordinateString=S.getVerticalCoordinateString=function(k){return oe(Xs(k))},vo=t.strokeColor||"0 G";S.__private__.getStrokeColor=S.getDrawColor=function(){return Tr(vo)},S.__private__.setStrokeColor=S.setDrawColor=function(k,pe,Ke,ot){return vo=nn({ch1:k,ch2:pe,ch3:Ke,ch4:ot,pdfColorType:"draw",precision:2}),Re(vo),this};var fa=t.fillColor||"0 g";S.__private__.getFillColor=S.getFillColor=function(){return Tr(fa)},S.__private__.setFillColor=S.setFillColor=function(k,pe,Ke,ot){return fa=nn({ch1:k,ch2:pe,ch3:Ke,ch4:ot,pdfColorType:"fill",precision:2}),Re(fa),this};var xs=t.textColor||"0 g",no=S.__private__.getTextColor=S.getTextColor=function(){return Tr(xs)};S.__private__.setTextColor=S.setTextColor=function(k,pe,Ke,ot){return xs=nn({ch1:k,ch2:pe,ch3:Ke,ch4:ot,pdfColorType:"text",precision:3}),this};var $o=t.charSpace,Eo=S.__private__.getCharSpace=S.getCharSpace=function(){return parseFloat($o||0)};S.__private__.setCharSpace=S.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $o=k,this};var ic=0;S.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},S.__private__.setLineCap=S.setLineCap=function(k){var pe=S.CapJoinStyles[k];if(pe===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ic=pe,Re(pe+" J"),this};var aa=0;S.__private__.setLineJoin=S.setLineJoin=function(k){var pe=S.CapJoinStyles[k];if(pe===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return aa=pe,Re(pe+" j"),this},S.__private__.setLineMiterLimit=S.__private__.setMiterLimit=S.setLineMiterLimit=S.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Re(oe(Y(k))+" M"),this},S.GState=k_,S.setGState=function(k){(k=typeof k=="string"?si[xi[k]]:rl(null,k)).equals(Bn)||(Re("/"+k.id+" gs"),Bn=k)};var rl=function(k,pe){if(!k||!xi[k]){var Ke=!1;for(var ot in si)if(si.hasOwnProperty(ot)&&si[ot].equals(pe)){Ke=!0;break}if(Ke)pe=si[ot];else{var St="GS"+(Object.keys(si).length+1).toString(10);si[St]=pe,pe.id=St}return k&&(xi[k]=pe.id),un.publish("addGState",pe),pe}};S.addGState=function(k,pe){return rl(k,pe),this},S.saveGraphicsState=function(){return Re("q"),Hi.push({key:lr,size:Yt,color:xs}),this},S.restoreGraphicsState=function(){Re("Q");var k=Hi.pop();return lr=k.key,Yt=k.size,xs=k.color,Bn=null,this},S.setCurrentTransformationMatrix=function(k){return Re(k.toString()+" cm"),this},S.comment=function(k){return Re("#"+k),this};var Uo=function(k,pe){var Ke=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ke},set:function($t){isNaN($t)||(Ke=parseFloat($t))}});var ot=pe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function($t){isNaN($t)||(ot=parseFloat($t))}});var St="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return St},set:function($t){St=$t.toString()}}),this},Va=function(k,pe,Ke,ot){Uo.call(this,k,pe),this.type="rect";var St=Ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return St},set:function(gr){isNaN(gr)||(St=parseFloat(gr))}});var $t=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(gr){isNaN(gr)||($t=parseFloat(gr))}}),this},Vl=function(){this.page=Zr,this.currentPage=le,this.pages=Ue.slice(0),this.pagesContext=Nr.slice(0),this.x=qr,this.y=Kr,this.matrix=kn,this.width=xo(le),this.height=_o(le),this.outputDestination=Zt,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){Zr=this.page,le=this.currentPage,Nr=this.pagesContext,Ue=this.pages,qr=this.x,Kr=this.y,kn=this.matrix,Gl(le,this.width),ql(le,this.height),Zt=this.outputDestination};var Wo=function(k,pe,Ke,ot,St){We.push(new Vl),Zr=le=0,Ue=[],qr=k,Kr=pe,kn=St,Bl([Ke,ot])},yu=function(k){if(ir[k])We.pop().restore();else{var pe=new Vl,Ke="Xo"+(Object.keys(Hn).length+1).toString(10);pe.id=Ke,ir[k]=Ke,Hn[Ke]=pe,un.publish("addFormObject",pe),We.pop().restore()}};for(var pa in S.beginFormObject=function(k,pe,Ke,ot,St){return Wo(k,pe,Ke,ot,St),this},S.endFormObject=function(k){return yu(k),this},S.doFormObject=function(k,pe){var Ke=Hn[ir[k]];return Re("q"),Re(pe.toString()+" cm"),Re("/"+Ke.id+" Do"),Re("Q"),this},S.getFormObject=function(k){var pe=Hn[ir[k]];return{x:pe.x,y:pe.y,width:pe.width,height:pe.height,matrix:pe.matrix}},S.save=function(k,pe){return k=k||"generated.pdf",(pe=pe||{}).returnPromise=pe.returnPromise||!1,pe.returnPromise===!1?(kg(Nn(pn()),k),typeof kg.unload=="function"&&as.setTimeout&&setTimeout(kg.unload,911),this):new Promise(function(Ke,ot){try{var St=kg(Nn(pn()),k);typeof kg.unload=="function"&&as.setTimeout&&setTimeout(kg.unload,911),Ke(St)}catch($t){ot($t.message)}})},rs.API)rs.API.hasOwnProperty(pa)&&(pa==="events"&&rs.API.events.length?function(k,pe){var Ke,ot,St;for(St=pe.length-1;St!==-1;St--)Ke=pe[St][0],ot=pe[St][1],k.subscribe.apply(k,[Ke].concat(typeof ot=="function"?[ot]:ot))}(un,rs.API.events):S[pa]=rs.API[pa]);var xo=S.getPageWidth=function(k){return(Nr[k=k||le].mediaBox.topRightX-Nr[k].mediaBox.bottomLeftX)/Xt},Gl=S.setPageWidth=function(k,pe){Nr[k].mediaBox.topRightX=pe*Xt+Nr[k].mediaBox.bottomLeftX},_o=S.getPageHeight=function(k){return(Nr[k=k||le].mediaBox.topRightY-Nr[k].mediaBox.bottomLeftY)/Xt},ql=S.setPageHeight=function(k,pe){Nr[k].mediaBox.topRightY=pe*Xt+Nr[k].mediaBox.bottomLeftY};return S.internal={pdfEscape:vs,getStyle:Ns,getFont:zl,getFontSize:nr,getCharSpace:Eo,getTextColor:no,getLineHeight:Ql,getLineHeightFactor:Ma,getLineWidth:ps,write:hr,getHorizontalCoordinate:qo,getVerticalCoordinate:Xs,getCoordinateString:Bo,getVerticalCoordinateString:Ys,collections:{},newObject:kt,newAdditionalObject:pr,newObjectDeferred:Wt,newObjectDeferredBegin:Ot,getFilters:on,putStream:_n,events:un,scaleFactor:Xt,pageSize:{getWidth:function(){return xo(le)},setWidth:function(k){Gl(le,k)},getHeight:function(){return _o(le)},setHeight:function(k){ql(le,k)}},encryptionOptions:g,encryption:Qn,getEncryptor:oi,output:Mn,getNumberOfPages:Oe,pages:Ue,out:Re,f2:me,f3:Z,getPageInfo:Pi,getPageInfoByObjId:Sr,getCurrentPageInfo:ln,getPDFVersion:j,Point:Uo,Rectangle:Va,Matrix:qe,hasHotfix:Xr},Object.defineProperty(S.internal.pageSize,"width",{get:function(){return xo(le)},set:function(k){Gl(le,k)},enumerable:!0,configurable:!0}),Object.defineProperty(S.internal.pageSize,"height",{get:function(){return _o(le)},set:function(k){ql(le,k)},enumerable:!0,configurable:!0}),Pa.call(S,vt),lr="F1",Nc(s,r),un.publish("initialized"),S}fy.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},fy.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fy.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},fy.prototype.processOwnerPassword=function(t,e){return iI(nI(e).substr(0,5),t)},fy.prototype.encryptor=function(t,e){var r=nI(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return iI(r,n)}},k_.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||ba(t)!==ba(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},rs.API={events:[]},rs.version="3.0.1";var Yl=rs.API,CN=1,I0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ny=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Is=function(t){return t.toFixed(2)},qA=function(t){return t.toFixed(5)};Yl.__acroform__={};var Kh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},V7=function(t){return t*CN},ap=function(t){var e=new lW,r=_i.internal.getHeight(t)||0,n=_i.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Is(n)),Number(Is(r))],e},Rve=Yl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Uve=Yl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},zve=Yl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},gc=Yl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zve(t,e-1)},yc=Yl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Rve(t,e-1)},vc=Yl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Uve(t,e-1)},Qve=Yl.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],o=t[1],c=t[2],u=t[3],i={};return i.lowerLeft_X=r(s)||0,i.lowerLeft_Y=n(o+u)||0,i.upperRight_X=r(s+c)||0,i.upperRight_Y=n(o)||0,[Number(Is(i.lowerLeft_X)),Number(Is(i.lowerLeft_Y)),Number(Is(i.upperRight_X)),Number(Is(i.upperRight_Y))]},Hve=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=sI(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Is(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=ap(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},sI=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(Z){return Z.split(`
`)}):s.map(function(Z){return[Z]});var o=r,c=_i.internal.getHeight(t)||0;c=c<0?-c:c;var u=_i.internal.getWidth(t)||0;u=u<0?-u:u;var i=function(Z,Y,Le){if(Z+1<s.length){var _e=Y+" "+s[Z+1][0];return l2(_e,t,Le).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var A,g,C=l2("3",t,o).height,B=t.multiline?c-o:(c-C)/2,S=B+=2,P=0,j=0,R=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+l2(e,t,o=12).width+", FieldWidth:"+u+`
`;break}for(var N="",U=0,$=0;$<s.length;$++)if(s.hasOwnProperty($)){var J=!1;if(s[$].length!==1&&R!==s[$].length-1){if((C+2)*(U+2)+2>c)continue e;N+=s[$][R],J=!0,j=$,$--}else{N=(N+=s[$][R]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var te=parseInt($),ue=i(te,N,o),oe=$>=s.length-1;if(ue&&!oe){N+=" ",R=0;continue}if(ue||oe){if(oe)j=te;else if(t.multiline&&(C+2)*(U+2)+2>c)continue e}else{if(!t.multiline||(C+2)*(U+2)+2>c)continue e;j=te}}for(var K="",ce=P;ce<=j;ce++){var me=s[ce];if(t.multiline){if(ce===j){K+=me[R]+" ",R=(R+1)%me.length;continue}if(ce===P){K+=me[me.length-1]+" ";continue}}K+=me[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,g=l2(K,t,o).width,t.textAlign){case"right":A=u-g-2;break;case"center":A=(u-g)/2;break;case"left":default:A=2}e+=Is(A)+" "+Is(S)+` Td
`,e+="("+I0(K)+`) Tj
`,e+=-Is(A)+` 0 Td
`,S=-(o+2),g=0,P=J?j:j+1,U++,N=""}break}return n.text=e,n.fontSize=o,n},l2=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Vve={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Gve=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},qve=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),ba(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},$ve=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(zf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Vve)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");CN=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new cW,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var o=n[s];o.objId=void 0,o.hasAnnotation&&Gve(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var o=!n;for(var c in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],i=[],A=u.Rect;if(u.Rect&&(u.Rect=Qve(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=_i.createDefaultAppearanceStream(u),ba(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(i=u.getKeyValueListForStream()),u.Rect=A,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=Hve(u);i.push({key:"AP",value:"<</N "+g+">>"}),s.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var C="";for(var B in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(B)){var S=u.appearanceStreamContent[B];if(C+="/"+B+" ",C+="<<",Object.keys(S).length>=1||Array.isArray(S)){for(var c in S)if(S.hasOwnProperty(c)){var P=S[c];typeof P=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P+" ",s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P)}}else typeof(P=S)=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P,s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P);C+=">>"}i.push({key:"AP",value:`<<
`+C+">>"})}s.internal.putStream({additionalKeyValues:i,objectId:u.objId}),s.internal.out("endobj")}o&&qve(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},aW=Yl.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(c){return c};if(Array.isArray(t)){for(var s="[",o=0;o<t.length;o++)switch(o!==0&&(s+=" "),ba(t[o])){case"boolean":case"number":case"object":s+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+I0(n(t[o].toString()))+")"):s+=t[o].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},x3=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+I0(n(t))+")"},pp=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};pp.prototype.toString=function(){return this.objId+" 0 R"},pp.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},pp.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:aW(s,this.objId,this.scope)}):s instanceof pp?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var lW=function(){pp.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Kh(lW,pp);var cW=function(){pp.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+I0(r(t))+")"}},set:function(r){t=r}})};Kh(cW,pp);var zf=function t(){pp.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!gc(e,3)},set:function(N){N?this.F=yc(e,3):this.F=vc(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof b4)return;o="FieldObject"+t.FieldNum++}var N=function(U){return U};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+I0(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var i=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return i},set:function(N){i=N}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return A===void 0?50/CN:A},set:function(N){A=N}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(N){g=N}});var C="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!C||this instanceof b4||this instanceof jm))return x3(C,this.objId,this.scope)},set:function(N){N=N.toString(),C=N}});var B=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(B)return this instanceof Vc?B:x3(B,this.objId,this.scope)},set:function(N){N=N.toString(),B=this instanceof Vc?N:N.substr(0,1)==="("?ny(N.substr(1,N.length-2)):ny(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vc?ny(B.substr(1,B.length-1)):B},set:function(N){N=N.toString(),B=this instanceof Vc?"/"+N:N}});var S=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(S)return S},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Vc?S:x3(S,this.objId,this.scope)},set:function(N){N=N.toString(),S=this instanceof Vc?N:N.substr(0,1)==="("?ny(N.substr(1,N.length-2)):ny(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vc?ny(S.substr(1,S.length-1)):S},set:function(N){N=N.toString(),S=this instanceof Vc?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(N){N=!!N,j=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(N){P=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,1)},set:function(N){N?this.Ff=yc(this.Ff,1):this.Ff=vc(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,2)},set:function(N){N?this.Ff=yc(this.Ff,2):this.Ff=vc(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,3)},set:function(N){N?this.Ff=yc(this.Ff,3):this.Ff=vc(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');R=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(R){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Kh(zf,pp);var n0=function(){zf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return aW(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(o,c,u){u||(u=1);for(var i,A=[];i=c.exec(o);)A.push(i[u]);return A}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,18)},set:function(r){r?this.Ff=yc(this.Ff,18):this.Ff=vc(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=yc(this.Ff,19):this.Ff=vc(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,20)},set:function(r){r?(this.Ff=yc(this.Ff,20),e.sort()):this.Ff=vc(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,22)},set:function(r){r?this.Ff=yc(this.Ff,22):this.Ff=vc(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,23)},set:function(r){r?this.Ff=yc(this.Ff,23):this.Ff=vc(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,27)},set:function(r){r?this.Ff=yc(this.Ff,27):this.Ff=vc(this.Ff,27)}}),this.hasAppearanceStream=!1};Kh(n0,zf);var i0=function(){n0.call(this),this.fontName="helvetica",this.combo=!1};Kh(i0,n0);var s0=function(){i0.call(this),this.combo=!0};Kh(s0,i0);var Qx=function(){s0.call(this),this.edit=!0};Kh(Qx,s0);var Vc=function(){zf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,15)},set:function(r){r?this.Ff=yc(this.Ff,15):this.Ff=vc(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,16)},set:function(r){r?this.Ff=yc(this.Ff,16):this.Ff=vc(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,17)},set:function(r){r?this.Ff=yc(this.Ff,17):this.Ff=vc(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,26)},set:function(r){r?this.Ff=yc(this.Ff,26):this.Ff=vc(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+I0(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){ba(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Kh(Vc,zf);var Hx=function(){Vc.call(this),this.pushButton=!0};Kh(Hx,Vc);var o0=function(){Vc.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Kh(o0,Vc);var b4=function(){var t,e;zf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),n)c.push("/"+o+" ("+I0(s(n[o]))+")");return c.push(">>"),c.join(`
`)},set:function(s){ba(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=_i.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Kh(b4,zf),o0.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},o0.prototype.createOption=function(t){var e=new b4;return e.Parent=this,e.optionName=t,this.Kids.push(e),Wve.call(this.scope,e),e};var Vx=function(){Vc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=_i.CheckBox.createAppearanceStream()};Kh(Vx,Vc);var jm=function(){zf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,13)},set:function(e){e?this.Ff=yc(this.Ff,13):this.Ff=vc(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,21)},set:function(e){e?this.Ff=yc(this.Ff,21):this.Ff=vc(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,23)},set:function(e){e?this.Ff=yc(this.Ff,23):this.Ff=vc(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,24)},set:function(e){e?this.Ff=yc(this.Ff,24):this.Ff=vc(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,25)},set:function(e){e?this.Ff=yc(this.Ff,25):this.Ff=vc(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,26)},set:function(e){e?this.Ff=yc(this.Ff,26):this.Ff=vc(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Kh(jm,zf);var Gx=function(){jm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,14)},set:function(t){t?this.Ff=yc(this.Ff,14):this.Ff=vc(this.Ff,14)}}),this.password=!0};Kh(Gx,jm);var _i={CheckBox:{createAppearanceStream:function(){return{N:{On:_i.CheckBox.YesNormal},D:{On:_i.CheckBox.YesPushDown,Off:_i.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ap(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),o=sI(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Is(_i.internal.getWidth(t))+" "+Is(_i.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Is(o.fontSize)+" Tf "+s),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=ap(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],o=_i.internal.getHeight(t),c=_i.internal.getWidth(t),u=sI(t,t.caption);return s.push("1 g"),s.push("0 0 "+Is(c)+" "+Is(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Is(c-1)+" "+Is(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Is(u.fontSize)+" Tf "+n),s.push(u.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=ap(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Is(_i.internal.getWidth(t))+" "+Is(_i.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:_i.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=_i.RadioButton.Circle.YesNormal,e.D[t]=_i.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ap(t);e.scope=t.scope;var r=[],n=_i.internal.getWidth(t)<=_i.internal.getHeight(t)?_i.internal.getWidth(t)/4:_i.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=_i.internal.Bezier_C,o=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+qA(_i.internal.getWidth(t)/2)+" "+qA(_i.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=ap(t);e.scope=t.scope;var r=[],n=_i.internal.getWidth(t)<=_i.internal.getHeight(t)?_i.internal.getWidth(t)/4:_i.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*_i.internal.Bezier_C).toFixed(5)),c=Number((n*_i.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+qA(_i.internal.getWidth(t)/2)+" "+qA(_i.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+qA(_i.internal.getWidth(t)/2)+" "+qA(_i.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),r.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),r.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),r.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ap(t);e.scope=t.scope;var r=[],n=_i.internal.getWidth(t)<=_i.internal.getHeight(t)?_i.internal.getWidth(t)/4:_i.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*_i.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+qA(_i.internal.getWidth(t)/2)+" "+qA(_i.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:_i.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=_i.RadioButton.Cross.YesNormal,e.D[t]=_i.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ap(t);e.scope=t.scope;var r=[],n=_i.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Is(_i.internal.getWidth(t)-2)+" "+Is(_i.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Is(n.x1.x)+" "+Is(n.x1.y)+" m"),r.push(Is(n.x2.x)+" "+Is(n.x2.y)+" l"),r.push(Is(n.x4.x)+" "+Is(n.x4.y)+" m"),r.push(Is(n.x3.x)+" "+Is(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=ap(t);e.scope=t.scope;var r=_i.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Is(_i.internal.getWidth(t))+" "+Is(_i.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Is(_i.internal.getWidth(t)-2)+" "+Is(_i.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Is(r.x1.x)+" "+Is(r.x1.y)+" m"),n.push(Is(r.x2.x)+" "+Is(r.x2.y)+" l"),n.push(Is(r.x4.x)+" "+Is(r.x4.y)+" m"),n.push(Is(r.x3.x)+" "+Is(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ap(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Is(_i.internal.getWidth(t))+" "+Is(_i.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};_i.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=_i.internal.getWidth(t),r=_i.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},_i.internal.getWidth=function(t){var e=0;return ba(t)==="object"&&(e=V7(t.Rect[2])),e},_i.internal.getHeight=function(t){var e=0;return ba(t)==="object"&&(e=V7(t.Rect[3])),e};var Wve=Yl.addField=function(t){if($ve(this,t),!(t instanceof zf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Yl.AcroFormChoiceField=n0,Yl.AcroFormListBox=i0,Yl.AcroFormComboBox=s0,Yl.AcroFormEditBox=Qx,Yl.AcroFormButton=Vc,Yl.AcroFormPushButton=Hx,Yl.AcroFormRadioButton=o0,Yl.AcroFormCheckBox=Vx,Yl.AcroFormTextField=jm,Yl.AcroFormPasswordField=Gx,Yl.AcroFormAppearance=_i,Yl.AcroForm={ChoiceField:n0,ListBox:i0,ComboBox:s0,EditBox:Qx,Button:Vc,PushButton:Hx,RadioButton:o0,CheckBox:Vx,TextField:jm,PasswordField:Gx,Appearance:_i},rs.AcroForm={ChoiceField:n0,ListBox:i0,ComboBox:s0,EditBox:Qx,Button:Vc,PushButton:Hx,RadioButton:o0,CheckBox:Vx,TextField:jm,PasswordField:Gx,Appearance:_i};var Kve=rs.AcroForm;function uW(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(Z,Y){var Le,_e,Qe,De,Be,xe=e;if((Y=Y||e)==="RGBA"||Z.data!==void 0&&Z.data instanceof Uint8ClampedArray&&"height"in Z&&"width"in Z)return"RGBA";if(ue(Z))for(Be in r)for(Qe=r[Be],Le=0;Le<Qe.length;Le+=1){for(De=!0,_e=0;_e<Qe[Le].length;_e+=1)if(Qe[Le][_e]!==void 0&&Qe[Le][_e]!==Z[_e]){De=!1;break}if(De===!0){xe=Be;break}}else for(Be in r)for(Qe=r[Be],Le=0;Le<Qe.length;Le+=1){for(De=!0,_e=0;_e<Qe[Le].length;_e+=1)if(Qe[Le][_e]!==void 0&&Qe[Le][_e]!==Z.charCodeAt(_e)){De=!1;break}if(De===!0){xe=Be;break}}return xe===e&&Y!==e&&(xe=Y),xe},s=function Z(Y){for(var Le=this.internal.write,_e=this.internal.putStream,Qe=(0,this.internal.getFilters)();Qe.indexOf("FlateEncode")!==-1;)Qe.splice(Qe.indexOf("FlateEncode"),1);Y.objectId=this.internal.newObject();var De=[];if(De.push({key:"Type",value:"/XObject"}),De.push({key:"Subtype",value:"/Image"}),De.push({key:"Width",value:Y.width}),De.push({key:"Height",value:Y.height}),Y.colorSpace===R.INDEXED?De.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Y.palette.length/3-1)+" "+("sMask"in Y&&Y.sMask!==void 0?Y.objectId+2:Y.objectId+1)+" 0 R]"}):(De.push({key:"ColorSpace",value:"/"+Y.colorSpace}),Y.colorSpace===R.DEVICE_CMYK&&De.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),De.push({key:"BitsPerComponent",value:Y.bitsPerComponent}),"decodeParameters"in Y&&Y.decodeParameters!==void 0&&De.push({key:"DecodeParms",value:"<<"+Y.decodeParameters+">>"}),"transparency"in Y&&Array.isArray(Y.transparency)){for(var Be="",xe=0,ze=Y.transparency.length;xe<ze;xe++)Be+=Y.transparency[xe]+" "+Y.transparency[xe]+" ";De.push({key:"Mask",value:"["+Be+"]"})}Y.sMask!==void 0&&De.push({key:"SMask",value:Y.objectId+1+" 0 R"});var Fe=Y.filter!==void 0?["/"+Y.filter]:void 0;if(_e({data:Y.data,additionalKeyValues:De,alreadyAppliedFilters:Fe,objectId:Y.objectId}),Le("endobj"),"sMask"in Y&&Y.sMask!==void 0){var it="/Predictor "+Y.predictor+" /Colors 1 /BitsPerComponent "+Y.bitsPerComponent+" /Columns "+Y.width,ie={width:Y.width,height:Y.height,colorSpace:"DeviceGray",bitsPerComponent:Y.bitsPerComponent,decodeParameters:it,data:Y.sMask};"filter"in Y&&(ie.filter=Y.filter),Z.call(this,ie)}if(Y.colorSpace===R.INDEXED){var le=this.internal.newObject();_e({data:K(new Uint8Array(Y.palette)),objectId:le}),Le("endobj")}},o=function(){var Z=this.internal.collections.addImage_images;for(var Y in Z)s.call(this,Z[Y])},c=function(){var Z,Y=this.internal.collections.addImage_images,Le=this.internal.write;for(var _e in Y)Le("/I"+(Z=Y[_e]).index,Z.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},i=function(){var Z=this.internal.collections.addImage_images;return u.call(this),Z},A=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(Z){return typeof t["process"+Z.toUpperCase()]=="function"},C=function(Z){return ba(Z)==="object"&&Z.nodeType===1},B=function(Z,Y){if(Z.nodeName==="IMG"&&Z.hasAttribute("src")){var Le=""+Z.getAttribute("src");if(Le.indexOf("data:image/")===0)return zx(unescape(Le).split("base64,").pop());var _e=t.loadFile(Le,!0);if(_e!==void 0)return _e}if(Z.nodeName==="CANVAS"){if(Z.width===0||Z.height===0)throw new Error("Given canvas must have data. Canvas width: "+Z.width+", height: "+Z.height);var Qe;switch(Y){case"PNG":Qe="image/png";break;case"WEBP":Qe="image/webp";break;case"JPEG":case"JPG":default:Qe="image/jpeg"}return zx(Z.toDataURL(Qe,1).split("base64,").pop())}},S=function(Z){var Y=this.internal.collections.addImage_images;if(Y){for(var Le in Y)if(Z===Y[Le].alias)return Y[Le]}},P=function(Z,Y,Le){return Z||Y||(Z=-96,Y=-96),Z<0&&(Z=-1*Le.width*72/Z/this.internal.scaleFactor),Y<0&&(Y=-1*Le.height*72/Y/this.internal.scaleFactor),Z===0&&(Z=Y*Le.width/Le.height),Y===0&&(Y=Z*Le.height/Le.width),[Z,Y]},j=function(Z,Y,Le,_e,Qe,De){var Be=P.call(this,Le,_e,Qe),xe=this.internal.getCoordinateString,ze=this.internal.getVerticalCoordinateString,Fe=i.call(this);if(Le=Be[0],_e=Be[1],Fe[Qe.index]=Qe,De){De*=Math.PI/180;var it=Math.cos(De),ie=Math.sin(De),le=function(be){return be.toFixed(4)},fe=[le(it),le(ie),le(-1*ie),le(it),0,0,"cm"]}this.internal.write("q"),De?(this.internal.write([1,"0","0",1,xe(Z),ze(Y+_e),"cm"].join(" ")),this.internal.write(fe.join(" ")),this.internal.write([xe(Le),"0","0",xe(_e),"0","0","cm"].join(" "))):this.internal.write([xe(Le),"0","0",xe(_e),xe(Z),ze(Y+_e),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Qe.index+" Do"),this.internal.write("Q")},R=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=t.__addimage__.sHashCode=function(Z){var Y,Le,_e=0;if(typeof Z=="string")for(Le=Z.length,Y=0;Y<Le;Y++)_e=(_e<<5)-_e+Z.charCodeAt(Y),_e|=0;else if(ue(Z))for(Le=Z.byteLength/2,Y=0;Y<Le;Y++)_e=(_e<<5)-_e+Z[Y],_e|=0;return _e},$=t.__addimage__.validateStringAsBase64=function(Z){(Z=Z||"").toString().trim();var Y=!0;return Z.length===0&&(Y=!1),Z.length%4!=0&&(Y=!1),/^[A-Za-z0-9+/]+$/.test(Z.substr(0,Z.length-2))===!1&&(Y=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Z.substr(-2))===!1&&(Y=!1),Y},J=t.__addimage__.extractImageFromDataUrl=function(Z){if(Z==null||!(Z=Z.trim()).startsWith("data:"))return null;var Y=Z.indexOf(",");return Y<0?null:Z.substring(0,Y).trim().endsWith("base64")?Z.substring(Y+1):null},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(Z){return te()&&Z instanceof ArrayBuffer};var ue=t.__addimage__.isArrayBufferView=function(Z){return te()&&typeof Uint32Array<"u"&&(Z instanceof Int8Array||Z instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Z instanceof Uint8ClampedArray||Z instanceof Int16Array||Z instanceof Uint16Array||Z instanceof Int32Array||Z instanceof Uint32Array||Z instanceof Float32Array||Z instanceof Float64Array)},oe=t.__addimage__.binaryStringToUint8Array=function(Z){for(var Y=Z.length,Le=new Uint8Array(Y),_e=0;_e<Y;_e++)Le[_e]=Z.charCodeAt(_e);return Le},K=t.__addimage__.arrayBufferToBinaryString=function(Z){for(var Y="",Le=ue(Z)?Z:new Uint8Array(Z),_e=0;_e<Le.length;_e+=8192)Y+=String.fromCharCode.apply(null,Le.subarray(_e,_e+8192));return Y};t.addImage=function(){var Z,Y,Le,_e,Qe,De,Be,xe,ze;if(typeof arguments[1]=="number"?(Y=e,Le=arguments[1],_e=arguments[2],Qe=arguments[3],De=arguments[4],Be=arguments[5],xe=arguments[6],ze=arguments[7]):(Y=arguments[1],Le=arguments[2],_e=arguments[3],Qe=arguments[4],De=arguments[5],Be=arguments[6],xe=arguments[7],ze=arguments[8]),ba(Z=arguments[0])==="object"&&!C(Z)&&"imageData"in Z){var Fe=Z;Z=Fe.imageData,Y=Fe.format||Y||e,Le=Fe.x||Le||0,_e=Fe.y||_e||0,Qe=Fe.w||Fe.width||Qe,De=Fe.h||Fe.height||De,Be=Fe.alias||Be,xe=Fe.compression||xe,ze=Fe.rotation||Fe.angle||ze}var it=this.internal.getFilters();if(xe===void 0&&it.indexOf("FlateEncode")!==-1&&(xe="SLOW"),isNaN(Le)||isNaN(_e))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var ie=ce.call(this,Z,Y,Be,xe);return j.call(this,Le,_e,Qe,De,ie,ze),this};var ce=function(Z,Y,Le,_e){var Qe,De,Be;if(typeof Z=="string"&&n(Z)===e){Z=unescape(Z);var xe=me(Z,!1);(xe!==""||(xe=t.loadFile(Z,!0))!==void 0)&&(Z=xe)}if(C(Z)&&(Z=B(Z,Y)),Y=n(Z,Y),!g(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(((Be=Le)==null||Be.length===0)&&(Le=function(ze){return typeof ze=="string"||ue(ze)?U(ze):ue(ze.data)?U(ze.data):null}(Z)),(Qe=S.call(this,Le))||(te()&&(Z instanceof Uint8Array||Y==="RGBA"||(De=Z,Z=oe(Z))),Qe=this["process"+Y.toUpperCase()](Z,A.call(this),Le,function(ze){return ze&&typeof ze=="string"&&(ze=ze.toUpperCase()),ze in t.image_compression?ze:N.NONE}(_e),De)),!Qe)throw new Error("An unknown error occurred whilst processing the image.");return Qe},me=t.__addimage__.convertBase64ToBinaryString=function(Z,Y){Y=typeof Y!="boolean"||Y;var Le,_e="";if(typeof Z=="string"){var Qe;Le=(Qe=J(Z))!==null&&Qe!==void 0?Qe:Z;try{_e=zx(Le)}catch(De){if(Y)throw $(Le)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+De.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return _e};t.getImageProperties=function(Z){var Y,Le,_e="";if(C(Z)&&(Z=B(Z)),typeof Z=="string"&&n(Z)===e&&((_e=me(Z,!1))===""&&(_e=t.loadFile(Z)||""),Z=_e),Le=n(Z),!g(Le))throw new Error("addImage does not support files of type '"+Le+"', please ensure that a plugin for '"+Le+"' support is added.");if(!te()||Z instanceof Uint8Array||(Z=oe(Z)),!(Y=this["process"+Le.toUpperCase()](Z)))throw new Error("An unknown error occurred whilst processing the image");return Y.fileType=Le,Y}})(rs.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};rs.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,o,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,i=this.internal.getPageInfoByObjId(r.objId),A=r.pageContext.annotations,g=!1,C=0;C<A.length&&!g;C++)switch((n=A[C]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var B=0;B<A.length;B++){n=A[B];var S=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(j.objId),U=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+S(N(n.contents))+")",o+=" /Popup "+R.objId+" 0 R",o+=" /P "+i.objId+" 0 R",o+=" /T ("+S(N(U))+") >>",j.content=o;var $=j.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+$,n.open&&(o+=" /Open true"),o+=" >>",R.content=o,this.internal.write(j.objId,"0 R",R.objId,"0 R");break;case"freetext":s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var J=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+S(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var te=this.annotations._nameMap[n.options.name];n.options.pageNumber=te.page,n.options.top=te.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+S(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ue=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+ue+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,o,c){var u=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:i(r),y:A(n),w:i(r+s),h:A(n+o)},options:c,type:"link"})},t.textWithLink=function(r,n,s,o){var c,u,i=this.getTextWidth(r),A=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(r,u).length;c=Math.ceil(A*g)}else u=i,c=A;return this.text(r,n,s,o),s+=.2*A,o.align==="center"&&(n-=i/2),o.align==="right"&&(n-=i),this.link(n,s-A,u,c,o),i},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(rs.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},u=t.__arabicParser__.isArabicEndLetter=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length<=2},i=t.__arabicParser__.isArabicAlfLetter=function(j){return c(j)&&s.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=1};var A=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=3};var g=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length==4},C=t.__arabicParser__.resolveLigatures=function(j){var R=0,N=r,U="",$=0;for(R=0;R<j.length;R+=1)N[j.charCodeAt(R)]!==void 0?($++,typeof(N=N[j.charCodeAt(R)])=="number"&&(U+=String.fromCharCode(N),N=r,$=0),R===j.length-1&&(N=r,U+=j.charAt(R-($-1)),R-=$-1,$=0)):(N=r,U+=j.charAt(R-$),R-=$,$=0);return U};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var B=t.__arabicParser__.getCorrectForm=function(j,R,N){return c(j)?o(j)===!1?-1:!A(j)||!c(R)&&!c(N)||!c(N)&&u(R)||u(j)&&!c(R)||u(j)&&i(R)||u(j)&&u(R)?0:g(j)&&c(R)&&!u(R)&&c(N)&&A(N)?3:u(j)||!c(N)?1:2:-1},S=function(j){var R=0,N=0,U=0,$="",J="",te="",ue=(j=j||"").split("\\s+"),oe=[];for(R=0;R<ue.length;R+=1){for(oe.push(""),N=0;N<ue[R].length;N+=1)$=ue[R][N],J=ue[R][N-1],te=ue[R][N+1],c($)?(U=B($,J,te),oe[R]+=U!==-1?String.fromCharCode(e[$.charCodeAt(0)][U]):$):oe[R]+=$;oe[R]=C(oe[R])}return oe.join(" ")},P=t.__arabicParser__.processArabic=t.processArabic=function(){var j,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(R)){var U=0;for(N=[],U=0;U<R.length;U+=1)Array.isArray(R[U])?N.push([S(R[U][0]),R[U][1],R[U][2]]):N.push([S(R[U])]);j=N}else j=S(R);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",P])}(rs.API),rs.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(rs.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var i=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(j){i=j}});var A=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return A},set:function(j){A=j}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var C=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return C},set:function(j){C=j}});var B=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return B},set:function(j){B=j}});var S=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return S},set:function(j){S=j}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(j){P=j}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(i){return n.call(this),this.internal.__cell__.headerFunction=typeof i=="function"?i:void 0,this},t.getTextDimensions=function(i,A){n.call(this);var g=(A=A||{}).fontSize||this.getFontSize(),C=A.font||this.getFont(),B=A.scaleFactor||this.internal.scaleFactor,S=0,P=0,j=0,R=this;if(!Array.isArray(i)&&typeof i!="string"){if(typeof i!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");i=String(i)}var N=A.maxWidth;N>0?typeof i=="string"?i=this.splitTextToSize(i,N):Object.prototype.toString.call(i)==="[object Array]"&&(i=i.reduce(function($,J){return $.concat(R.splitTextToSize(J,N))},[])):i=Array.isArray(i)?i:[i];for(var U=0;U<i.length;U++)S<(j=this.getStringUnitWidth(i[U],{font:C})*g)&&(S=j);return S!==0&&(P=i.length),{w:S/=B,h:Math.max((P*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/B,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var i=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(i.left,i.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var i;i=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var A=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,C=this.internal.__cell__.margins||e,B=this.internal.__cell__.tableHeaderRow,S=this.internal.__cell__.printHeaders;return A.lineNumber!==void 0&&(A.lineNumber===i.lineNumber?(i.x=(A.x||0)+(A.width||0),i.y=A.y||0):A.y+A.height+i.height+C.bottom>this.getPageHeight()?(this.cellAddPage(),i.y=C.top,S&&B&&(this.printHeaderRow(i.lineNumber,!0),i.y+=B[0].height)):i.y=A.y+A.height||i.y),i.text[0]!==void 0&&(this.rect(i.x,i.y,i.width,i.height,r===!0?"FD":void 0),i.align==="right"?this.text(i.text,i.x+i.width-g,i.y+g,{align:"right",baseline:"top"}):i.align==="center"?this.text(i.text,i.x+i.width/2,i.y+g,{align:"center",baseline:"top",maxWidth:i.width-g-g}):this.text(i.text,i.x+g,i.y+g,{align:"left",baseline:"top",maxWidth:i.width-g-g})),this.internal.__cell__.lastCell=i,this};t.table=function(i,A,g,C,B){if(n.call(this),!g)throw new Error("No data for PDF table.");var S,P,j,R,N=[],U=[],$=[],J={},te={},ue=[],oe=[],K=(B=B||{}).autoSize||!1,ce=B.printHeaders!==!1,me=B.css&&B.css["font-size"]!==void 0?16*B.css["font-size"]:B.fontSize||12,Z=B.margins||Object.assign({width:this.getPageWidth()},e),Y=typeof B.padding=="number"?B.padding:3,Le=B.headerBackgroundColor||"#c8c8c8",_e=B.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=ce,this.internal.__cell__.margins=Z,this.internal.__cell__.table_font_size=me,this.internal.__cell__.padding=Y,this.internal.__cell__.headerBackgroundColor=Le,this.internal.__cell__.headerTextColor=_e,this.setFontSize(me),C==null)U=N=Object.keys(g[0]),$=N.map(function(){return"left"});else if(Array.isArray(C)&&ba(C[0])==="object")for(N=C.map(function(Fe){return Fe.name}),U=C.map(function(Fe){return Fe.prompt||Fe.name||""}),$=C.map(function(Fe){return Fe.align||"left"}),S=0;S<C.length;S+=1)te[C[S].name]=C[S].width*(19.049976/25.4);else Array.isArray(C)&&typeof C[0]=="string"&&(U=N=C,$=N.map(function(){return"left"}));if(K||Array.isArray(C)&&typeof C[0]=="string")for(S=0;S<N.length;S+=1){for(J[R=N[S]]=g.map(function(Fe){return Fe[R]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(U[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=J[R],this.setFont(void 0,"normal"),j=0;j<P.length;j+=1)ue.push(this.getTextDimensions(P[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[R]=Math.max.apply(null,ue)+Y+Y,ue=[]}if(ce){var Qe={};for(S=0;S<N.length;S+=1)Qe[N[S]]={},Qe[N[S]].text=U[S],Qe[N[S]].align=$[S];var De=u.call(this,Qe,te);oe=N.map(function(Fe){return new o(i,A,te[Fe],De,Qe[Fe].text,void 0,Qe[Fe].align)}),this.setTableHeaderRow(oe),this.printHeaderRow(1,!1)}var Be=C.reduce(function(Fe,it){return Fe[it.name]=it.align,Fe},{});for(S=0;S<g.length;S+=1){"rowStart"in B&&B.rowStart instanceof Function&&B.rowStart({row:S,data:g[S]},this);var xe=u.call(this,g[S],te);for(j=0;j<N.length;j+=1){var ze=g[S][N[j]];"cellStart"in B&&B.cellStart instanceof Function&&B.cellStart({row:S,col:j,data:ze},this),c.call(this,new o(i,A,te[N[j]],xe,ze,S+2,Be[N[j]]))}}return this.internal.__cell__.table_x=i,this.internal.__cell__.table_y=A,this};var u=function(i,A){var g=this.internal.__cell__.padding,C=this.internal.__cell__.table_font_size,B=this.internal.scaleFactor;return Object.keys(i).map(function(S){var P=i[S];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,A[S]-g-g)},this).map(function(S){return this.getLineHeightFactor()*S.length*C/B+g+g},this).reduce(function(S,P){return Math.max(S,P)},0)};t.setTableHeaderRow=function(i){n.call(this),this.internal.__cell__.tableHeaderRow=i},t.printHeaderRow=function(i,A){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var C=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(C[0],C[1],C[2],C[3],void 0,-1)}this.setFont(void 0,"bold");for(var B=[],S=0;S<this.internal.__cell__.tableHeaderRow.length;S+=1){g=this.internal.__cell__.tableHeaderRow[S].clone(),A&&(g.y=this.internal.__cell__.margins.top||0,B.push(g)),g.lineNumber=i;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(P)}B.length>0&&this.setTableHeaderRow(B),this.setFont(void 0,"normal"),r=!1}}(rs.API);var hW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},dW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],oI=uW(dW),fW=[100,200,300,400,500,600,700,800,900],Xve=uW(fW);function aI(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return hW[o=o||"normal"]?o:"normal"}(t.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(o){return typeof oI[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function G7(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Yve={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},q7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $7(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Zve(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Yve,r.genericFontFamilies||{}),o=null,c=null,u=0;u<e.length;++u)if(s[(o=aI(e[u])).family]&&(o.family=s[o.family]),t.hasOwnProperty(o.family)){c=t[o.family];break}if(!(c=c||t[n]))throw new Error("Could not find a font-family for the rule '"+$7(o)+"' and default family '"+n+"'.");if(c=function(i,A){if(A[i])return A[i];var g=oI[i],C=g<=oI.normal?-1:1,B=G7(A,dW,g,C);if(!B)throw new Error("Could not find a matching font-stretch value for "+i);return B}(o.stretch,c),c=function(i,A){if(A[i])return A[i];for(var g=hW[i],C=0;C<g.length;++C)if(A[g[C]])return A[g[C]];throw new Error("Could not find a matching font-style for "+i)}(o.style,c),!(c=function(i,A){if(A[i])return A[i];if(i===400&&A[500])return A[500];if(i===500&&A[400])return A[400];var g=Xve[i],C=G7(A,fW,g,i<400?-1:1);if(!C)throw new Error("Could not find a matching font-weight for value "+i);return C}(o.weight,c)))throw new Error("Failed to resolve a font for the rule '"+$7(o)+"'.");return c}function W7(t){return t.trimLeft()}function Jve(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function exe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var c2,K7,X7,_3=["times"];(function(t){var e,r,n,s,o,c,u,i,A,g=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new i,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new c,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new c,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new C(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,i=this.internal.Matrix,A=new g}]);var C=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var le=ie;Object.defineProperty(this,"pdf",{get:function(){return le}});var fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return fe},set:function(Ye){fe=!!Ye}});var be=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return be},set:function(Ye){be=!!Ye}});var He=0;Object.defineProperty(this,"posX",{get:function(){return He},set:function(Ye){isNaN(Ye)||(He=Ye)}});var Je=0;Object.defineProperty(this,"posY",{get:function(){return Je},set:function(Ye){isNaN(Ye)||(Je=Ye)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(Ye){var Re;typeof Ye=="number"?Re=[Ye,Ye,Ye,Ye]:((Re=new Array(4))[0]=Ye[0],Re[1]=Ye.length>=2?Ye[1]:Re[0],Re[2]=Ye.length>=3?Ye[2]:Re[0],Re[3]=Ye.length>=4?Ye[3]:Re[1]),A.margin=Re}});var tt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return tt},set:function(Ye){tt=Ye}});var st=0;Object.defineProperty(this,"lastBreak",{get:function(){return st},set:function(Ye){st=Ye}});var Ct=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ct},set:function(Ye){Ct=Ye}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(Ye){Ye instanceof g&&(A=Ye)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(Ye){A.path=Ye}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(Ye){Ue=Ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ye){var Re;Re=B(Ye),this.ctx.fillStyle=Re.style,this.ctx.isFillTransparent=Re.a===0,this.ctx.fillOpacity=Re.a,this.pdf.setFillColor(Re.r,Re.g,Re.b,{a:Re.a}),this.pdf.setTextColor(Re.r,Re.g,Re.b,{a:Re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ye){var Re=B(Ye);this.ctx.strokeStyle=Re.style,this.ctx.isStrokeTransparent=Re.a===0,this.ctx.strokeOpacity=Re.a,Re.a===0?this.pdf.setDrawColor(255,255,255):(Re.a,this.pdf.setDrawColor(Re.r,Re.g,Re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ye){["butt","round","square"].indexOf(Ye)!==-1&&(this.ctx.lineCap=Ye,this.pdf.setLineCap(Ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ye){isNaN(Ye)||(this.ctx.lineWidth=Ye,this.pdf.setLineWidth(Ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ye){["bevel","round","miter"].indexOf(Ye)!==-1&&(this.ctx.lineJoin=Ye,this.pdf.setLineJoin(Ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ye){isNaN(Ye)||(this.ctx.miterLimit=Ye,this.pdf.setMiterLimit(Ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ye){this.ctx.textBaseline=Ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ye){["right","end","center","left","start"].indexOf(Ye)!==-1&&(this.ctx.textAlign=Ye)}});var Ft=null;function Zt(Ye,Re){if(Ft===null){var hr=function(Ut){var vt=[];return Object.keys(Ut).forEach(function(Yt){Ut[Yt].forEach(function(ar){var nr=null;switch(ar){case"bold":nr={family:Yt,weight:"bold"};break;case"italic":nr={family:Yt,style:"italic"};break;case"bolditalic":nr={family:Yt,weight:"bold",style:"italic"};break;case"":case"normal":nr={family:Yt}}nr!==null&&(nr.ref={name:Yt,style:ar},vt.push(nr))})}),vt}(Ye.getFontList());Ft=function(Ut){for(var vt={},Yt=0;Yt<Ut.length;++Yt){var ar=aI(Ut[Yt]),nr=ar.family,Fr=ar.stretch,Gr=ar.style,Ir=ar.weight;vt[nr]=vt[nr]||{},vt[nr][Fr]=vt[nr][Fr]||{},vt[nr][Fr][Gr]=vt[nr][Fr][Gr]||{},vt[nr][Fr][Gr][Ir]=ar}return vt}(hr.concat(Re))}return Ft}var fr=null;Object.defineProperty(this,"fontFaces",{get:function(){return fr},set:function(Ye){Ft=null,fr=Ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ye){var Re;if(this.ctx.font=Ye,(Re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ye))!==null){var hr=Re[1];Re[2];var Ut=Re[3],vt=Re[4];Re[5];var Yt=Re[6],ar=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vt)[2];vt=Math.floor(ar==="px"?parseFloat(vt)*this.pdf.internal.scaleFactor:ar==="em"?parseFloat(vt)*this.pdf.getFontSize():parseFloat(vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vt);var nr=function(an){var lr,Xt,qr=[],Kr=an.trim();if(Kr==="")return _3;if(Kr in q7)return[q7[Kr]];for(;Kr!=="";){switch(Xt=null,lr=(Kr=W7(Kr)).charAt(0)){case'"':case"'":Xt=Jve(Kr.substring(1),lr);break;default:Xt=exe(Kr)}if(Xt===null||(qr.push(Xt[0]),(Kr=W7(Xt[1]))!==""&&Kr.charAt(0)!==","))return _3;Kr=Kr.replace(/^,/,"")}return qr}(Yt);if(this.fontFaces){var Fr=Zve(Zt(this.pdf,this.fontFaces),nr.map(function(an){return{family:an,stretch:"normal",weight:Ut,style:hr}}));this.pdf.setFont(Fr.ref.name,Fr.ref.style)}else{var Gr="";(Ut==="bold"||parseInt(Ut,10)>=700||hr==="bold")&&(Gr="bold"),hr==="italic"&&(Gr+="italic"),Gr.length===0&&(Gr="normal");for(var Ir="",cn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Sn=0;Sn<nr.length;Sn++){if(this.pdf.internal.getFont(nr[Sn],Gr,{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn];break}if(Gr==="bolditalic"&&this.pdf.internal.getFont(nr[Sn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ir=nr[Sn],Gr="bold";else if(this.pdf.internal.getFont(nr[Sn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn],Gr="normal";break}}if(Ir===""){for(var En=0;En<nr.length;En++)if(cn[nr[En]]){Ir=cn[nr[En]];break}}Ir=Ir===""?"Times":Ir,this.pdf.setFont(Ir,Gr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ye){this.ctx.globalCompositeOperation=Ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ye){this.ctx.globalAlpha=Ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ye){this.ctx.lineDashOffset=Ye,it.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ye){this.ctx.lineDash=Ye,it.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ye){this.ctx.ignoreClearRect=!!Ye}})};C.prototype.setLineDash=function(ie){this.lineDash=ie},C.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},C.prototype.fill=function(){J.call(this,"fill",!1)},C.prototype.stroke=function(){J.call(this,"stroke",!1)},C.prototype.beginPath=function(){this.path=[{type:"begin"}]},C.prototype.moveTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var fe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"mt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(ie,le)},C.prototype.closePath=function(){var ie=new c(0,0),le=0;for(le=this.path.length-1;le!==-1;le--)if(this.path[le].type==="begin"&&ba(this.path[le+1])==="object"&&typeof this.path[le+1].x=="number"){ie=new c(this.path[le+1].x,this.path[le+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(ie.x,ie.y)},C.prototype.lineTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var fe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"lt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},C.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},C.prototype.quadraticCurveTo=function(ie,le,fe,be){if(isNaN(fe)||isNaN(be)||isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var He=this.ctx.transform.applyToPoint(new c(fe,be)),Je=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"qct",x1:Je.x,y1:Je.y,x:He.x,y:He.y}),this.ctx.lastPoint=new c(He.x,He.y)},C.prototype.bezierCurveTo=function(ie,le,fe,be,He,Je){if(isNaN(He)||isNaN(Je)||isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ra.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var tt=this.ctx.transform.applyToPoint(new c(He,Je)),st=this.ctx.transform.applyToPoint(new c(ie,le)),Ct=this.ctx.transform.applyToPoint(new c(fe,be));this.path.push({type:"bct",x1:st.x,y1:st.y,x2:Ct.x,y2:Ct.y,x:tt.x,y:tt.y}),this.ctx.lastPoint=new c(tt.x,tt.y)},C.prototype.arc=function(ie,le,fe,be,He,Je){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(He))throw Ra.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Je=!!Je,!this.ctx.transform.isIdentity){var tt=this.ctx.transform.applyToPoint(new c(ie,le));ie=tt.x,le=tt.y;var st=this.ctx.transform.applyToPoint(new c(0,fe)),Ct=this.ctx.transform.applyToPoint(new c(0,0));fe=Math.sqrt(Math.pow(st.x-Ct.x,2)+Math.pow(st.y-Ct.y,2))}Math.abs(He-be)>=2*Math.PI&&(be=0,He=2*Math.PI),this.path.push({type:"arc",x:ie,y:le,radius:fe,startAngle:be,endAngle:He,counterclockwise:Je})},C.prototype.arcTo=function(ie,le,fe,be,He){throw new Error("arcTo not implemented.")},C.prototype.rect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ra.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,le),this.lineTo(ie+fe,le),this.lineTo(ie+fe,le+be),this.lineTo(ie,le+be),this.lineTo(ie,le),this.lineTo(ie+fe,le),this.lineTo(ie,le)},C.prototype.fillRect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ra.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!S.call(this)){var He={};this.lineCap!=="butt"&&(He.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(He.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,le,fe,be),this.fill(),He.hasOwnProperty("lineCap")&&(this.lineCap=He.lineCap),He.hasOwnProperty("lineJoin")&&(this.lineJoin=He.lineJoin)}},C.prototype.strokeRect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ra.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(ie,le,fe,be),this.stroke())},C.prototype.clearRect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ra.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,le,fe,be))},C.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(le),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var be=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=be}},C.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("Q");this.pdf.setPage(le),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},C.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var B=function(ie){var le,fe,be,He;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))le=0,fe=0,be=0,He=0;else{var Je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(Je!==null)le=parseInt(Je[1]),fe=parseInt(Je[2]),be=parseInt(Je[3]),He=1;else if((Je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)le=parseInt(Je[1]),fe=parseInt(Je[2]),be=parseInt(Je[3]),He=parseFloat(Je[4]);else{if(He=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var tt=new iW(ie);ie=tt.ok?tt.toHex():"#000000"}ie.length===4?(le=ie.substring(1,2),le+=le,fe=ie.substring(2,3),fe+=fe,be=ie.substring(3,4),be+=be):(le=ie.substring(1,3),fe=ie.substring(3,5),be=ie.substring(5,7)),le=parseInt(le,16),fe=parseInt(fe,16),be=parseInt(be,16)}}return{r:le,g:fe,b:be,a:He,style:ie}},S=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};C.prototype.fillText=function(ie,le,fe,be){if(isNaN(le)||isNaN(fe)||typeof ie!="string")throw Ra.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(be=isNaN(be)?void 0:be,!S.call(this)){var He=xe(this.ctx.transform.rotation),Je=this.ctx.transform.scaleX;Y.call(this,{text:ie,x:le,y:fe,scale:Je,angle:He,align:this.textAlign,maxWidth:be})}},C.prototype.strokeText=function(ie,le,fe,be){if(isNaN(le)||isNaN(fe)||typeof ie!="string")throw Ra.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){be=isNaN(be)?void 0:be;var He=xe(this.ctx.transform.rotation),Je=this.ctx.transform.scaleX;Y.call(this,{text:ie,x:le,y:fe,scale:Je,renderingMode:"stroke",angle:He,align:this.textAlign,maxWidth:be})}},C.prototype.measureText=function(ie){if(typeof ie!="string")throw Ra.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var le=this.pdf,fe=this.pdf.internal.scaleFactor,be=le.internal.getFontSize(),He=le.getStringUnitWidth(ie)*be/le.internal.scaleFactor,Je=function(tt){var st=(tt=tt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return st}}),this};return new Je({width:He*=Math.round(96*fe/72*1e4)/1e4})},C.prototype.scale=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var fe=new i(ie,0,0,le,0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},C.prototype.rotate=function(ie){if(isNaN(ie))throw Ra.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var le=new i(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(le)},C.prototype.translate=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ra.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var fe=new i(1,0,0,1,ie,le);this.ctx.transform=this.ctx.transform.multiply(fe)},C.prototype.transform=function(ie,le,fe,be,He,Je){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(He)||isNaN(Je))throw Ra.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var tt=new i(ie,le,fe,be,He,Je);this.ctx.transform=this.ctx.transform.multiply(tt)},C.prototype.setTransform=function(ie,le,fe,be,He,Je){ie=isNaN(ie)?1:ie,le=isNaN(le)?0:le,fe=isNaN(fe)?0:fe,be=isNaN(be)?1:be,He=isNaN(He)?0:He,Je=isNaN(Je)?0:Je,this.ctx.transform=new i(ie,le,fe,be,He,Je)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};C.prototype.drawImage=function(ie,le,fe,be,He,Je,tt,st,Ct){var Ue=this.pdf.getImageProperties(ie),Ft=1,Zt=1,fr=1,Ye=1;be!==void 0&&st!==void 0&&(fr=st/be,Ye=Ct/He,Ft=Ue.width/be*st/be,Zt=Ue.height/He*Ct/He),Je===void 0&&(Je=le,tt=fe,le=0,fe=0),be!==void 0&&st===void 0&&(st=be,Ct=He),be===void 0&&st===void 0&&(st=Ue.width,Ct=Ue.height);for(var Re,hr=this.ctx.transform.decompose(),Ut=xe(hr.rotate.shx),vt=new i,Yt=(vt=(vt=(vt=vt.multiply(hr.translate)).multiply(hr.skew)).multiply(hr.scale)).applyToRectangle(new u(Je-le*fr,tt-fe*Ye,be*Ft,He*Zt)),ar=R.call(this,Yt),nr=[],Fr=0;Fr<ar.length;Fr+=1)nr.indexOf(ar[Fr])===-1&&nr.push(ar[Fr]);if($(nr),this.autoPaging)for(var Gr=nr[0],Ir=nr[nr.length-1],cn=Gr;cn<Ir+1;cn++){this.pdf.setPage(cn);var Sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],En=cn===1?this.posY+this.margin[0]:this.margin[0],an=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xt=cn===1?0:an+(cn-2)*lr;if(this.ctx.clip_path.length!==0){var qr=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Re,this.posX+this.margin[3],-Xt+En+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=qr}var Kr=JSON.parse(JSON.stringify(Yt));Kr=U([Kr],this.posX+this.margin[3],-Xt+En+this.ctx.prevPageLastElemOffset)[0];var kn=(cn>Gr||cn<Ir)&&j.call(this);kn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sn,lr,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",Kr.x,Kr.y,Kr.w,Kr.h,null,null,Ut),kn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,Ut)};var R=function(ie,le,fe){var be=[];le=le||this.pdf.internal.pageSize.width,fe=fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var He=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":be.push(Math.floor((ie.y+He)/fe)+1);break;case"arc":be.push(Math.floor((ie.y+He-ie.radius)/fe)+1),be.push(Math.floor((ie.y+He+ie.radius)/fe)+1);break;case"qct":var Je=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);be.push(Math.floor((Je.y+He)/fe)+1),be.push(Math.floor((Je.y+Je.h+He)/fe)+1);break;case"bct":var tt=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);be.push(Math.floor((tt.y+He)/fe)+1),be.push(Math.floor((tt.y+tt.h+He)/fe)+1);break;case"rect":be.push(Math.floor((ie.y+He)/fe)+1),be.push(Math.floor((ie.y+ie.h+He)/fe)+1)}for(var st=0;st<be.length;st+=1)for(;this.pdf.internal.getNumberOfPages()<be[st];)N.call(this);return be},N=function(){var ie=this.fillStyle,le=this.strokeStyle,fe=this.font,be=this.lineCap,He=this.lineWidth,Je=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=le,this.font=fe,this.lineCap=be,this.lineWidth=He,this.lineJoin=Je},U=function(ie,le,fe){for(var be=0;be<ie.length;be++)switch(ie[be].type){case"bct":ie[be].x2+=le,ie[be].y2+=fe;case"qct":ie[be].x1+=le,ie[be].y1+=fe;case"mt":case"lt":case"arc":default:ie[be].x+=le,ie[be].y+=fe}return ie},$=function(ie){return ie.sort(function(le,fe){return le-fe})},J=function(ie,le){for(var fe,be,He=this.fillStyle,Je=this.strokeStyle,tt=this.lineCap,st=this.lineWidth,Ct=Math.abs(st*this.ctx.transform.scaleX),Ue=this.lineJoin,Ft=JSON.parse(JSON.stringify(this.path)),Zt=JSON.parse(JSON.stringify(this.path)),fr=[],Ye=0;Ye<Zt.length;Ye++)if(Zt[Ye].x!==void 0)for(var Re=R.call(this,Zt[Ye]),hr=0;hr<Re.length;hr+=1)fr.indexOf(Re[hr])===-1&&fr.push(Re[hr]);for(var Ut=0;Ut<fr.length;Ut++)for(;this.pdf.internal.getNumberOfPages()<fr[Ut];)N.call(this);if($(fr),this.autoPaging)for(var vt=fr[0],Yt=fr[fr.length-1],ar=vt;ar<Yt+1;ar++){this.pdf.setPage(ar),this.fillStyle=He,this.strokeStyle=Je,this.lineCap=tt,this.lineWidth=Ct,this.lineJoin=Ue;var nr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fr=ar===1?this.posY+this.margin[0]:this.margin[0],Gr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],cn=ar===1?0:Gr+(ar-2)*Ir;if(this.ctx.clip_path.length!==0){var Sn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(fe,this.posX+this.margin[3],-cn+Fr+this.ctx.prevPageLastElemOffset),te.call(this,ie,!0),this.path=Sn}if(be=JSON.parse(JSON.stringify(Ft)),this.path=U(be,this.posX+this.margin[3],-cn+Fr+this.ctx.prevPageLastElemOffset),le===!1||ar===0){var En=(ar>vt||ar<Yt)&&j.call(this);En&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nr,Ir,null).clip().discardPath()),te.call(this,ie,le),En&&this.pdf.restoreGraphicsState()}this.lineWidth=st}else this.lineWidth=Ct,te.call(this,ie,le),this.lineWidth=st;this.path=Ft},te=function(ie,le){if((ie!=="stroke"||le||!P.call(this))&&(ie==="stroke"||le||!S.call(this))){for(var fe,be,He=[],Je=this.path,tt=0;tt<Je.length;tt++){var st=Je[tt];switch(st.type){case"begin":He.push({begin:!0});break;case"close":He.push({close:!0});break;case"mt":He.push({start:st,deltas:[],abs:[]});break;case"lt":var Ct=He.length;if(Je[tt-1]&&!isNaN(Je[tt-1].x)&&(fe=[st.x-Je[tt-1].x,st.y-Je[tt-1].y],Ct>0)){for(;Ct>=0;Ct--)if(He[Ct-1].close!==!0&&He[Ct-1].begin!==!0){He[Ct-1].deltas.push(fe),He[Ct-1].abs.push(st);break}}break;case"bct":fe=[st.x1-Je[tt-1].x,st.y1-Je[tt-1].y,st.x2-Je[tt-1].x,st.y2-Je[tt-1].y,st.x-Je[tt-1].x,st.y-Je[tt-1].y],He[He.length-1].deltas.push(fe);break;case"qct":var Ue=Je[tt-1].x+2/3*(st.x1-Je[tt-1].x),Ft=Je[tt-1].y+2/3*(st.y1-Je[tt-1].y),Zt=st.x+2/3*(st.x1-st.x),fr=st.y+2/3*(st.y1-st.y),Ye=st.x,Re=st.y;fe=[Ue-Je[tt-1].x,Ft-Je[tt-1].y,Zt-Je[tt-1].x,fr-Je[tt-1].y,Ye-Je[tt-1].x,Re-Je[tt-1].y],He[He.length-1].deltas.push(fe);break;case"arc":He.push({deltas:[],abs:[],arc:!0}),Array.isArray(He[He.length-1].abs)&&He[He.length-1].abs.push(st)}}be=le?null:ie==="stroke"?"stroke":"fill";for(var hr=!1,Ut=0;Ut<He.length;Ut++)if(He[Ut].arc)for(var vt=He[Ut].abs,Yt=0;Yt<vt.length;Yt++){var ar=vt[Yt];ar.type==="arc"?K.call(this,ar.x,ar.y,ar.radius,ar.startAngle,ar.endAngle,ar.counterclockwise,void 0,le,!hr):Le.call(this,ar.x,ar.y),hr=!0}else if(He[Ut].close===!0)this.pdf.internal.out("h"),hr=!1;else if(He[Ut].begin!==!0){var nr=He[Ut].start.x,Fr=He[Ut].start.y;_e.call(this,He[Ut].deltas,nr,Fr),hr=!0}be&&ce.call(this,be),le&&me.call(this)}},ue=function(ie){var le=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,fe=le*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-fe;case"top":return ie+le-fe;case"hanging":return ie+le-2*fe;case"middle":return ie+le/2-fe;case"ideographic":return ie;case"alphabetic":default:return ie}},oe=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};C.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(le,fe){this.colorStops.push([le,fe])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},C.prototype.createPattern=function(){return this.createLinearGradient()},C.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(ie,le,fe,be,He,Je,tt,st,Ct){for(var Ue=De.call(this,fe,be,He,Je),Ft=0;Ft<Ue.length;Ft++){var Zt=Ue[Ft];Ft===0&&(Ct?Z.call(this,Zt.x1+ie,Zt.y1+le):Le.call(this,Zt.x1+ie,Zt.y1+le)),Qe.call(this,ie,le,Zt.x2,Zt.y2,Zt.x3,Zt.y3,Zt.x4,Zt.y4)}st?me.call(this):ce.call(this,tt)},ce=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},me=function(){this.pdf.clip(),this.pdf.discardPath()},Z=function(ie,le){this.pdf.internal.out(r(ie)+" "+n(le)+" m")},Y=function(ie){var le;switch(ie.align){case"right":case"end":le="right";break;case"center":le="center";break;case"left":case"start":default:le="left"}var fe=this.pdf.getTextDimensions(ie.text),be=ue.call(this,ie.y),He=oe.call(this,be)-fe.h,Je=this.ctx.transform.applyToPoint(new c(ie.x,be)),tt=this.ctx.transform.decompose(),st=new i;st=(st=(st=st.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale);for(var Ct,Ue,Ft,Zt=this.ctx.transform.applyToRectangle(new u(ie.x,be,fe.w,fe.h)),fr=st.applyToRectangle(new u(ie.x,He,fe.w,fe.h)),Ye=R.call(this,fr),Re=[],hr=0;hr<Ye.length;hr+=1)Re.indexOf(Ye[hr])===-1&&Re.push(Ye[hr]);if($(Re),this.autoPaging)for(var Ut=Re[0],vt=Re[Re.length-1],Yt=Ut;Yt<vt+1;Yt++){this.pdf.setPage(Yt);var ar=Yt===1?this.posY+this.margin[0]:this.margin[0],nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fr=this.pdf.internal.pageSize.height-this.margin[2],Gr=Fr-this.margin[0],Ir=this.pdf.internal.pageSize.width-this.margin[1],cn=Ir-this.margin[3],Sn=Yt===1?0:nr+(Yt-2)*Gr;if(this.ctx.clip_path.length!==0){var En=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Ct,this.posX+this.margin[3],-1*Sn+ar),te.call(this,"fill",!0),this.path=En}var an=U([JSON.parse(JSON.stringify(fr))],this.posX+this.margin[3],-Sn+ar+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*ie.scale),Ft=this.lineWidth,this.lineWidth=Ft*ie.scale);var lr=this.autoPaging!=="text";if(lr||an.y+an.h<=Fr){if(lr||an.y>=ar&&an.x<=Ir){var Xt=lr?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||Ir-an.x)[0],qr=U([JSON.parse(JSON.stringify(Zt))],this.posX+this.margin[3],-Sn+ar+this.ctx.prevPageLastElemOffset)[0],Kr=lr&&(Yt>Ut||Yt<vt)&&j.call(this);Kr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,Gr,null).clip().discardPath()),this.pdf.text(Xt,qr.x,qr.y,{angle:ie.angle,align:le,renderingMode:ie.renderingMode}),Kr&&this.pdf.restoreGraphicsState()}}else an.y<Fr&&(this.ctx.prevPageLastElemOffset+=Fr-an.y);ie.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Ft)}else ie.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*ie.scale),Ft=this.lineWidth,this.lineWidth=Ft*ie.scale),this.pdf.text(ie.text,Je.x+this.posX,Je.y+this.posY,{angle:ie.angle,align:le,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Ft)},Le=function(ie,le,fe,be){fe=fe||0,be=be||0,this.pdf.internal.out(r(ie+fe)+" "+n(le+be)+" l")},_e=function(ie,le,fe){return this.pdf.lines(ie,le,fe,null,null)},Qe=function(ie,le,fe,be,He,Je,tt,st){this.pdf.internal.out([e(s(fe+ie)),e(o(be+le)),e(s(He+ie)),e(o(Je+le)),e(s(tt+ie)),e(o(st+le)),"c"].join(" "))},De=function(ie,le,fe,be){for(var He=2*Math.PI,Je=Math.PI/2;le>fe;)le-=He;var tt=Math.abs(fe-le);tt<He&&be&&(tt=He-tt);for(var st=[],Ct=be?-1:1,Ue=le;tt>1e-5;){var Ft=Ue+Ct*Math.min(tt,Je);st.push(Be.call(this,ie,Ue,Ft)),tt-=Math.abs(Ft-Ue),Ue=Ft}return st},Be=function(ie,le,fe){var be=(fe-le)/2,He=ie*Math.cos(be),Je=ie*Math.sin(be),tt=He,st=-Je,Ct=tt*tt+st*st,Ue=Ct+tt*He+st*Je,Ft=4/3*(Math.sqrt(2*Ct*Ue)-Ue)/(tt*Je-st*He),Zt=tt-Ft*st,fr=st+Ft*tt,Ye=Zt,Re=-fr,hr=be+le,Ut=Math.cos(hr),vt=Math.sin(hr);return{x1:ie*Math.cos(le),y1:ie*Math.sin(le),x2:Zt*Ut-fr*vt,y2:Zt*vt+fr*Ut,x3:Ye*Ut-Re*vt,y3:Ye*vt+Re*Ut,x4:ie*Math.cos(fe),y4:ie*Math.sin(fe)}},xe=function(ie){return 180*ie/Math.PI},ze=function(ie,le,fe,be,He,Je){var tt=ie+.5*(fe-ie),st=le+.5*(be-le),Ct=He+.5*(fe-He),Ue=Je+.5*(be-Je),Ft=Math.min(ie,He,tt,Ct),Zt=Math.max(ie,He,tt,Ct),fr=Math.min(le,Je,st,Ue),Ye=Math.max(le,Je,st,Ue);return new u(Ft,fr,Zt-Ft,Ye-fr)},Fe=function(ie,le,fe,be,He,Je,tt,st){var Ct,Ue,Ft,Zt,fr,Ye,Re,hr,Ut,vt,Yt,ar,nr,Fr,Gr=fe-ie,Ir=be-le,cn=He-fe,Sn=Je-be,En=tt-He,an=st-Je;for(Ue=0;Ue<41;Ue++)Ut=(Re=(Ft=ie+(Ct=Ue/40)*Gr)+Ct*((fr=fe+Ct*cn)-Ft))+Ct*(fr+Ct*(He+Ct*En-fr)-Re),vt=(hr=(Zt=le+Ct*Ir)+Ct*((Ye=be+Ct*Sn)-Zt))+Ct*(Ye+Ct*(Je+Ct*an-Ye)-hr),Ue==0?(Yt=Ut,ar=vt,nr=Ut,Fr=vt):(Yt=Math.min(Yt,Ut),ar=Math.min(ar,vt),nr=Math.max(nr,Ut),Fr=Math.max(Fr,vt));return new u(Math.round(Yt),Math.round(ar),Math.round(nr-Yt),Math.round(Fr-ar))},it=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,le,fe=(ie=this.ctx.lineDash,le=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:le}));this.prevLineDash!==fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=fe)}}})(rs.API),function(t){var e=function(o){var c,u,i,A,g,C,B,S,P,j;for(u=[],i=0,A=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;A>i;i+=4)(g=(o.charCodeAt(i)<<24)+(o.charCodeAt(i+1)<<16)+(o.charCodeAt(i+2)<<8)+o.charCodeAt(i+3))!==0?(C=(g=((g=((g=((g=(g-(j=g%85))/85)-(P=g%85))/85)-(S=g%85))/85)-(B=g%85))/85)%85,u.push(C+33,B+33,S+33,P+33,j+33)):u.push(122);return function(R,N){for(var U=N;U>0;U--)R.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var c,u,i,A,g,C=String,B="length",S=255,P="charCodeAt",j="slice",R="replace";for(o[j](-2),o=o[j](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),i=[],A=0,g=(o+=c="uuuuu"[j](o[B]%5||5))[B];g>A;A+=5)u=52200625*(o[P](A)-33)+614125*(o[P](A+1)-33)+7225*(o[P](A+2)-33)+85*(o[P](A+3)-33)+(o[P](A+4)-33),i.push(S&u>>24,S&u>>16,S&u>>8,S&u);return function(N,U){for(var $=U;$>0;$--)N.pop()}(i,c[B]),C.fromCharCode.apply(C,i)},n=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",i=0;i<o.length;i+=2)u+=String.fromCharCode("0x"+(o[i]+o[i+1]));return u},s=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return o=(c=tI(c)).reduce(function(i,A){return i+String.fromCharCode(A)},"")};t.processDataByFilters=function(o,c){var u=0,i=o||"",A=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":i=r(i),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=e(i),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=n(i),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=i.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=s(i),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:i,reverseChain:A.reverse().join(" ")}}}(rs.API),function(t){t.loadFile=function(e,r,n){return function(s,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=function(i,A,g){var C=new XMLHttpRequest,B=0,S=function(P){var j=P.length,R=[],N=String.fromCharCode;for(B=0;B<j;B+=1)R.push(N(255&P.charCodeAt(B)));return R.join("")};if(C.open("GET",i,!A),C.overrideMimeType("text/plain; charset=x-user-defined"),A===!1&&(C.onload=function(){C.status===200?g(S(this.responseText)):g(void 0)}),C.send(null),A&&C.status===200)return S(C.responseText)}(s,o,c)}catch{}return u}(e,r,n)},t.loadImageFile=t.loadFile}(rs.API),function(t){function e(){return(as.html2canvas?Promise.resolve(as.html2canvas):y1(()=>Promise.resolve().then(()=>NN),void 0)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(as.DOMPurify?Promise.resolve(as.DOMPurify):y1(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=ba(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(c,u){var i=document.createElement(c);for(var A in u.className&&(i.className=u.className),u.innerHTML&&u.dompurify&&(i.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)i.style[A]=u.style[A];return i},o=function c(u){var i=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),A=c.convert(Promise.resolve(),i);return A=(A=A.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(i){switch(n(i)){case"string":return"string";case"element":return i.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(i){return this.set({src:s("div",{innerHTML:c,dompurify:i})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function i(A,g){for(var C=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),B=A.firstChild;B;B=B.nextSibling)g!==!0&&B.nodeType===1&&B.nodeName==="SCRIPT"||C.appendChild(i(B,g));return A.nodeType===1&&(A.nodeName==="CANVAS"?(C.width=A.width,C.height=A.height,C.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(C.value=A.value),C.addEventListener("load",function(){C.scrollTop=A.scrollTop,C.scrollLeft=A.scrollLeft},!0)),C}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=Object.assign({},this.opt.html2canvas);return delete i.onrendered,u(this.prop.container,i)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=this.opt.jsPDF,A=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,i.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,i.context2d.posX=this.opt.x,i.context2d.posY=this.opt.y,i.context2d.margin=this.opt.margin,i.context2d.fontFaces=A,A)for(var B=0;B<A.length;++B){var S=A[B],P=S.src.find(function(j){return j.format==="truetype"});P&&i.addFont(P.url,S.ref.name,S.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,i.context2d.save(!0),u(this.prop.container,C)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,i){return(i=i||"pdf").toLowerCase()==="img"||i.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(i){if(i in o.template.prop)return function(){this.prop[i]=c[i]};switch(i){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[i]=c[i]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var i=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(i):i})},o.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(i,A){return Math.floor(i*A/72*96)}return this.then(function(){(c=c||rs.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,i,A){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),i!=null&&(this.progress.n=i),A!=null&&(this.progress.stack=A),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,i,A){return this.setProgress(c?this.progress.val+c:null,u||null,i?this.progress.n+i:null,A?this.progress.stack.concat(A):null)},o.prototype.then=function(c,u){var i=this;return this.thenCore(c,u,function(A,g){return i.updateProgress(null,null,1,[A]),Promise.prototype.then.call(this,function(C){return i.updateProgress(null,A),C}).then(A,g).then(function(C){return i.updateProgress(1),C})})},o.prototype.thenCore=function(c,u,i){i=i||Promise.prototype.then,c&&(c=c.bind(this)),u&&(u=u.bind(this));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),g=i.call(A,c,u);return o.convert(g,this.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(i){u=u.thenCore(i)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,rs.getPageSize=function(c,u,i){if(ba(c)==="object"){var A=c;c=A.orientation,u=A.unit||u,i=A.format||i}u=u||"mm",i=i||"a4",c=(""+(c||"P")).toLowerCase();var g,C=(""+i).toLowerCase(),B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var S,P=0,j=0;if(B.hasOwnProperty(C))P=B[C][1]/g,j=B[C][0]/g;else try{P=i[1],j=i[0]}catch{throw new Error("Invalid format: "+i)}if(c==="p"||c==="portrait")c="p",j>P&&(S=j,j=P,P=S);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",P>j&&(S=j,j=P,P=S)}return{width:j,height:P,unit:u,k:g,orientation:c}},t.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(aI):null;var i=new o(u);return u.worker?i:i.from(c).doCallback()}}(rs.API),rs.API.addJS=function(t){return X7=t,this.internal.events.subscribe("postPutResources",function(){c2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(c2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),K7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+X7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){c2!==void 0&&K7!==void 0&&this.internal.out("/Names <</JavaScript "+c2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),o=0;o<s.length;o++){var c=s[o],u=n.exec(c);if(u!=null){var i=u[1];r.internal.newObjectDeferredBegin(i,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var A=this.internal.pages.length,g=[];for(o=0;o<A;o++){var C=r.internal.newObject();g.push(C);var B=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+B.objId+" 0 R /XYZ null null null]>> endobj")}var S=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<g.length;o++)r.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+S+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,o){var c={title:s,options:o,children:[]};return n==null&&(n=this.root),n.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var c=n.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var i=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var A=0;A<n.children.length;A++)this.renderItems(n.children[A])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var o=0;o<s.children.length;o++)n.count++,this.count_r(n,s.children[o]);return n.count}}])}(rs.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,o,c,u){var i,A=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(i=function(C){for(var B,S=256*C.charCodeAt(4)+C.charCodeAt(5),P=C.length,j={width:0,height:0,numcomponents:1},R=4;R<P;R+=2){if(R+=S,e.indexOf(C.charCodeAt(R+1))!==-1){B=256*C.charCodeAt(R+5)+C.charCodeAt(R+6),j={width:256*C.charCodeAt(R+7)+C.charCodeAt(R+8),height:B,numcomponents:C.charCodeAt(R+9)};break}S=256*C.charCodeAt(R+2)+C.charCodeAt(R+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:r,width:i.width,height:i.height,colorSpace:u,bitsPerComponent:8,filter:A,index:n,alias:s}}return g}}(rs.API);var iy,u2,Y7,Z7,J7,txe=function(){var t,e,r;function n(o){var c,u,i,A,g,C,B,S,P,j,R,N,U,$;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C=null;;){switch(c=this.readUInt32(),P=(function(){var J,te;for(te=[],J=0;J<4;++J)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":C&&this.animation.frames.push(C),this.pos+=4,C={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),A=this.readUInt16()||100,C.delay=1e3*g/A,C.disposeOp=this.data[this.pos++],C.blendOp=this.data[this.pos++],C.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,c-=4),o=(C!=null?C.data:void 0)||this.imgData,N=0;0<=c?N<c:N>c;0<=c?++N:--N)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((j=i-this.transparency.indexed.length)>0)for(U=0;0<=j?U<j:U>j;0<=j?++U:--U)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":B=(R=this.read(c)).indexOf(0),S=String.fromCharCode.apply(String,R.slice(0,B)),this.text[S]=String.fromCharCode.apply(String,R.slice(B+1));break;case"IEND":return C&&this.animation.frames.push(C),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=($=this.colorType)===4||$===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var c,u;for(u=[],c=0;0<=o?c<o:c>o;0<=o?++c:--c)u.push(this.data[this.pos++]);return u},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var c=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*c),i=0,A=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function g(C,B,S,P){var j,R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe=Math.ceil((A.width-C)/S),it=Math.ceil((A.height-B)/P),ie=A.width==Fe&&A.height==it;for(Y=c*Fe,me=ie?u:new Uint8Array(Y*it),J=o.length,Z=0,R=0;Z<it&&i<J;){switch(o[i++]){case 0:for(U=Qe=0;Qe<Y;U=Qe+=1)me[R++]=o[i++];break;case 1:for(U=De=0;De<Y;U=De+=1)j=o[i++],$=U<c?0:me[R-c],me[R++]=(j+$)%256;break;case 2:for(U=Be=0;Be<Y;U=Be+=1)j=o[i++],N=(U-U%c)/c,Le=Z&&me[(Z-1)*Y+N*c+U%c],me[R++]=(Le+j)%256;break;case 3:for(U=xe=0;xe<Y;U=xe+=1)j=o[i++],N=(U-U%c)/c,$=U<c?0:me[R-c],Le=Z&&me[(Z-1)*Y+N*c+U%c],me[R++]=(j+Math.floor(($+Le)/2))%256;break;case 4:for(U=ze=0;ze<Y;U=ze+=1)j=o[i++],N=(U-U%c)/c,$=U<c?0:me[R-c],Z===0?Le=_e=0:(Le=me[(Z-1)*Y+N*c+U%c],_e=N&&me[(Z-1)*Y+(N-1)*c+U%c]),te=$+Le-_e,ue=Math.abs(te-$),K=Math.abs(te-Le),ce=Math.abs(te-_e),oe=ue<=K&&ue<=ce?$:K<=ce?Le:_e,me[R++]=(j+oe)%256;break;default:throw new Error("Invalid filter algorithm: "+o[i-1])}if(!ie){var le=((B+Z*P)*A.width+C)*c,fe=Z*Y;for(U=0;U<Fe;U+=1){for(var be=0;be<c;be+=1)u[le++]=me[fe++];le+=(S-1)*c}}Z++}}return o=Nve(o),A.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},n.prototype.decodePalette=function(){var o,c,u,i,A,g,C,B,S;for(u=this.palette,g=this.transparency.indexed||[],A=new Uint8Array((g.length||0)+u.length),i=0,o=0,c=C=0,B=u.length;C<B;c=C+=3)A[i++]=u[c],A[i++]=u[c+1],A[i++]=u[c+2],A[i++]=(S=g[o++])!=null?S:255;return A},n.prototype.copyToImageData=function(o,c){var u,i,A,g,C,B,S,P,j,R,N;if(i=this.colors,j=null,u=this.hasAlphaChannel,this.palette.length&&(j=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),i=4,u=!0),P=(A=o.data||o).length,C=j||c,g=B=0,i===1)for(;g<P;)S=j?4*c[g/4]:B,R=C[S++],A[g++]=R,A[g++]=R,A[g++]=R,A[g++]=u?C[S++]:255,B=S;else for(;g<P;)S=j?4*c[g/4]:B,A[g++]=C[S++],A[g++]=C[S++],A[g++]=C[S++],A[g++]=u?C[S++]:255,B=S},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var s=function(){if(Object.prototype.toString.call(as)==="[object Window]"){try{e=as.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(o){var c;if(s()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var c,u,i,A,g,C,B,S;if(this.animation){for(S=[],u=g=0,C=(B=this.animation.frames).length;g<C;u=++g)c=B[u],i=o.createImageData(c.width,c.height),A=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(i,A),c.imageData=i,S.push(c.image=t(i));return S}},n.prototype.renderFrame=function(o,c){var u,i,A;return u=(i=this.animation.frames)[c],A=i[c-1],c===0&&o.clearRect(0,0,this.width,this.height),(A!=null?A.disposeOp:void 0)===1?o.clearRect(A.xOffset,A.yOffset,A.width,A.height):(A!=null?A.disposeOp:void 0)===2&&o.putImageData(A.imageData,A.xOffset,A.yOffset),u.blendOp===0&&o.clearRect(u.xOffset,u.yOffset,u.width,u.height),o.drawImage(u.image,u.xOffset,u.yOffset)},n.prototype.animate=function(o){var c,u,i,A,g,C,B=this;return u=0,C=this.animation,A=C.numFrames,i=C.frames,g=C.numPlays,(c=function(){var S,P;if(S=u++%A,P=i[S],B.renderFrame(o,S),A>1&&u/A<g)return B.animation._timeout=setTimeout(c,P.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var c,u;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,c=o.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function rxe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],o=s>>7,c=1<<(7&s)+1;t[e++],t[e++];var u=null,i=null;o&&(u=e,i=c,e+=3*c);var A=!0,g=[],C=0,B=null,S=0,P=null;for(this.width=r,this.height=n;A&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,P=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[e++];C=t[e++]|t[e++]<<8,B=t[e++],!(1&j)&&(B=null),S=j>>2&7,e++;break;case 254:for(;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var R=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,U=t[e++]|t[e++]<<8,$=t[e++]|t[e++]<<8,J=t[e++],te=J>>6&1,ue=1<<(7&J)+1,oe=u,K=i,ce=!1;J>>7&&(ce=!0,oe=e,K=ue,e+=3*ue);var me=e;for(e++;;){var Z;if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}g.push({x:R,y:N,width:U,height:$,has_local_palette:ce,palette_offset:oe,palette_size:K,data_offset:me,data_length:e-me,transparent_index:B,interlaced:!!te,delay:C,disposal:S});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return P},this.frameInfo=function(Y){if(Y<0||Y>=g.length)throw new Error("Frame index out of range.");return g[Y]},this.decodeAndBlitFrameBGRA=function(Y,Le){var _e=this.frameInfo(Y),Qe=_e.width*_e.height,De=new Uint8Array(Qe);eU(t,_e.data_offset,De,Qe);var Be=_e.palette_offset,xe=_e.transparent_index;xe===null&&(xe=256);var ze=_e.width,Fe=r-ze,it=ze,ie=4*(_e.y*r+_e.x),le=4*((_e.y+_e.height)*r+_e.x),fe=ie,be=4*Fe;_e.interlaced===!0&&(be+=4*r*7);for(var He=8,Je=0,tt=De.length;Je<tt;++Je){var st=De[Je];if(it===0&&(it=ze,(fe+=be)>=le&&(be=4*Fe+4*r*(He-1),fe=ie+(ze+Fe)*(He<<1),He>>=1)),st===xe)fe+=4;else{var Ct=t[Be+3*st],Ue=t[Be+3*st+1],Ft=t[Be+3*st+2];Le[fe++]=Ft,Le[fe++]=Ue,Le[fe++]=Ct,Le[fe++]=255}--it}},this.decodeAndBlitFrameRGBA=function(Y,Le){var _e=this.frameInfo(Y),Qe=_e.width*_e.height,De=new Uint8Array(Qe);eU(t,_e.data_offset,De,Qe);var Be=_e.palette_offset,xe=_e.transparent_index;xe===null&&(xe=256);var ze=_e.width,Fe=r-ze,it=ze,ie=4*(_e.y*r+_e.x),le=4*((_e.y+_e.height)*r+_e.x),fe=ie,be=4*Fe;_e.interlaced===!0&&(be+=4*r*7);for(var He=8,Je=0,tt=De.length;Je<tt;++Je){var st=De[Je];if(it===0&&(it=ze,(fe+=be)>=le&&(be=4*Fe+4*r*(He-1),fe=ie+(ze+Fe)*(He<<1),He>>=1)),st===xe)fe+=4;else{var Ct=t[Be+3*st],Ue=t[Be+3*st+1],Ft=t[Be+3*st+2];Le[fe++]=Ct,Le[fe++]=Ue,Le[fe++]=Ft,Le[fe++]=255}--it}}}function eU(t,e,r,n){for(var s=t[e++],o=1<<s,c=o+1,u=c+1,i=s+1,A=(1<<i)-1,g=0,C=0,B=0,S=t[e++],P=new Int32Array(4096),j=null;;){for(;g<16&&S!==0;)C|=t[e++]<<g,g+=8,S===1?S=t[e++]:--S;if(g<i)break;var R=C&A;if(C>>=i,g-=i,R!==o){if(R===c)break;for(var N=R<u?R:j,U=0,$=N;$>o;)$=P[$]>>8,++U;var J=$;if(B+U+(N!==R?1:0)>n)return void Ra.log("Warning, gif stream longer than expected.");r[B++]=J;var te=B+=U;for(N!==R&&(r[B++]=J),$=N;U--;)$=P[$],r[--te]=255&$,$>>=8;j!==null&&u<4096&&(P[u++]=j<<8|J,u>=A+1&&i<12&&(++i,A=A<<1|1)),j=R}else u=c+1,A=(1<<(i=s+1))-1,j=null}return B!==n&&Ra.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function b3(t){var e,r,n,s,o,c=Math.floor,u=new Array(64),i=new Array(64),A=new Array(64),g=new Array(64),C=new Array(65535),B=new Array(65535),S=new Array(64),P=new Array(64),j=[],R=0,N=7,U=new Array(64),$=new Array(64),J=new Array(64),te=new Array(256),ue=new Array(2048),oe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Le=[0,1,2,3,4,5,6,7,8,9,10,11],_e=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Qe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function De(ie,le){for(var fe=0,be=0,He=new Array,Je=1;Je<=16;Je++){for(var tt=1;tt<=ie[Je];tt++)He[le[be]]=[],He[le[be]][0]=fe,He[le[be]][1]=Je,be++,fe++;fe*=2}return He}function Be(ie){for(var le=ie[0],fe=ie[1]-1;fe>=0;)le&1<<fe&&(R|=1<<N),fe--,--N<0&&(R==255?(xe(255),xe(0)):xe(R),N=7,R=0)}function xe(ie){j.push(ie)}function ze(ie){xe(ie>>8&255),xe(255&ie)}function Fe(ie,le,fe,be,He){for(var Je,tt=He[0],st=He[240],Ct=function(vt,Yt){var ar,nr,Fr,Gr,Ir,cn,Sn,En,an,lr,Xt=0;for(an=0;an<8;++an){ar=vt[Xt],nr=vt[Xt+1],Fr=vt[Xt+2],Gr=vt[Xt+3],Ir=vt[Xt+4],cn=vt[Xt+5],Sn=vt[Xt+6];var qr=ar+(En=vt[Xt+7]),Kr=ar-En,kn=nr+Sn,mn=nr-Sn,Un=Fr+cn,Hi=Fr-cn,Gn=Gr+Ir,ti=Gr-Ir,si=qr+Gn,xi=qr-Gn,Bn=kn+Un,Zr=kn-Un;vt[Xt]=si+Bn,vt[Xt+4]=si-Bn;var Nr=.707106781*(Zr+xi);vt[Xt+2]=xi+Nr,vt[Xt+6]=xi-Nr;var un=.382683433*((si=ti+Hi)-(Zr=mn+Kr)),ri=.5411961*si+un,Hn=1.306562965*Zr+un,ir=.707106781*(Bn=Hi+mn),We=Kr+ir,qe=Kr-ir;vt[Xt+5]=qe+ri,vt[Xt+3]=qe-ri,vt[Xt+1]=We+Hn,vt[Xt+7]=We-Hn,Xt+=8}for(Xt=0,an=0;an<8;++an){ar=vt[Xt],nr=vt[Xt+8],Fr=vt[Xt+16],Gr=vt[Xt+24],Ir=vt[Xt+32],cn=vt[Xt+40],Sn=vt[Xt+48];var ht=ar+(En=vt[Xt+56]),It=ar-En,wt=nr+Sn,kt=nr-Sn,Wt=Fr+cn,Ot=Fr-cn,pr=Gr+Ir,xr=Gr-Ir,Ar=ht+pr,Tr=ht-pr,nn=wt+Wt,on=wt-Wt;vt[Xt]=Ar+nn,vt[Xt+32]=Ar-nn;var _n=.707106781*(on+Tr);vt[Xt+16]=Tr+_n,vt[Xt+48]=Tr-_n;var Dn=.382683433*((Ar=xr+Ot)-(on=kt+It)),qn=.5411961*Ar+Dn,$n=1.306562965*on+Dn,Ni=.707106781*(nn=Ot+kt),Vi=It+Ni,Wn=It-Ni;vt[Xt+40]=Wn+qn,vt[Xt+24]=Wn-qn,vt[Xt+8]=Vi+$n,vt[Xt+56]=Vi-$n,Xt++}for(an=0;an<64;++an)lr=vt[an]*Yt[an],S[an]=lr>0?lr+.5|0:lr-.5|0;return S}(ie,le),Ue=0;Ue<64;++Ue)P[oe[Ue]]=Ct[Ue];var Ft=P[0]-fe;fe=P[0],Ft==0?Be(be[0]):(Be(be[B[Je=32767+Ft]]),Be(C[Je]));for(var Zt=63;Zt>0&&P[Zt]==0;)Zt--;if(Zt==0)return Be(tt),fe;for(var fr,Ye=1;Ye<=Zt;){for(var Re=Ye;P[Ye]==0&&Ye<=Zt;)++Ye;var hr=Ye-Re;if(hr>=16){fr=hr>>4;for(var Ut=1;Ut<=fr;++Ut)Be(st);hr&=15}Je=32767+P[Ye],Be(He[(hr<<4)+B[Je]]),Be(C[Je]),Ye++}return Zt!=63&&Be(tt),fe}function it(ie){ie=Math.min(Math.max(ie,1),100),o!=ie&&(function(le){for(var fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],be=0;be<64;be++){var He=c((fe[be]*le+50)/100);He=Math.min(Math.max(He,1),255),u[oe[be]]=He}for(var Je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],tt=0;tt<64;tt++){var st=c((Je[tt]*le+50)/100);st=Math.min(Math.max(st,1),255),i[oe[tt]]=st}for(var Ct=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,Ft=0;Ft<8;Ft++)for(var Zt=0;Zt<8;Zt++)A[Ue]=1/(u[oe[Ue]]*Ct[Ft]*Ct[Zt]*8),g[Ue]=1/(i[oe[Ue]]*Ct[Ft]*Ct[Zt]*8),Ue++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),o=ie)}this.encode=function(ie,le){le&&it(le),j=new Array,R=0,N=7,ze(65496),ze(65504),ze(16),xe(74),xe(70),xe(73),xe(70),xe(0),xe(1),xe(1),xe(0),ze(1),ze(1),xe(0),xe(0),function(){ze(65499),ze(132),xe(0);for(var nr=0;nr<64;nr++)xe(u[nr]);xe(1);for(var Fr=0;Fr<64;Fr++)xe(i[Fr])}(),function(nr,Fr){ze(65472),ze(17),xe(8),ze(Fr),ze(nr),xe(3),xe(1),xe(17),xe(0),xe(2),xe(17),xe(1),xe(3),xe(17),xe(1)}(ie.width,ie.height),function(){ze(65476),ze(418),xe(0);for(var nr=0;nr<16;nr++)xe(K[nr+1]);for(var Fr=0;Fr<=11;Fr++)xe(ce[Fr]);xe(16);for(var Gr=0;Gr<16;Gr++)xe(me[Gr+1]);for(var Ir=0;Ir<=161;Ir++)xe(Z[Ir]);xe(1);for(var cn=0;cn<16;cn++)xe(Y[cn+1]);for(var Sn=0;Sn<=11;Sn++)xe(Le[Sn]);xe(17);for(var En=0;En<16;En++)xe(_e[En+1]);for(var an=0;an<=161;an++)xe(Qe[an])}(),ze(65498),ze(12),xe(3),xe(1),xe(0),xe(2),xe(17),xe(3),xe(17),xe(0),xe(63),xe(0);var fe=0,be=0,He=0;R=0,N=7,this.encode.displayName="_encode_";for(var Je,tt,st,Ct,Ue,Ft,Zt,fr,Ye,Re=ie.data,hr=ie.width,Ut=ie.height,vt=4*hr,Yt=0;Yt<Ut;){for(Je=0;Je<vt;){for(Ue=vt*Yt+Je,Zt=-1,fr=0,Ye=0;Ye<64;Ye++)Ft=Ue+(fr=Ye>>3)*vt+(Zt=4*(7&Ye)),Yt+fr>=Ut&&(Ft-=vt*(Yt+1+fr-Ut)),Je+Zt>=vt&&(Ft-=Je+Zt-vt+4),tt=Re[Ft++],st=Re[Ft++],Ct=Re[Ft++],U[Ye]=(ue[tt]+ue[st+256>>0]+ue[Ct+512>>0]>>16)-128,$[Ye]=(ue[tt+768>>0]+ue[st+1024>>0]+ue[Ct+1280>>0]>>16)-128,J[Ye]=(ue[tt+1280>>0]+ue[st+1536>>0]+ue[Ct+1792>>0]>>16)-128;fe=Fe(U,A,fe,e,n),be=Fe($,g,be,r,s),He=Fe(J,g,He,r,s),Je+=32}Yt+=8}if(N>=0){var ar=[];ar[1]=N+1,ar[0]=(1<<N+1)-1,Be(ar)}return ze(65497),new Uint8Array(j)},t=t||50,function(){for(var ie=String.fromCharCode,le=0;le<256;le++)te[le]=ie(le)}(),e=De(K,ce),r=De(Y,Le),n=De(me,Z),s=De(_e,Qe),function(){for(var ie=1,le=2,fe=1;fe<=15;fe++){for(var be=ie;be<le;be++)B[32767+be]=fe,C[32767+be]=[],C[32767+be][1]=fe,C[32767+be][0]=be;for(var He=-(le-1);He<=-ie;He++)B[32767+He]=fe,C[32767+He]=[],C[32767+He][1]=fe,C[32767+He][0]=le-1+He;ie<<=1,le<<=1}}(),function(){for(var ie=0;ie<256;ie++)ue[ie]=19595*ie,ue[ie+256>>0]=38470*ie,ue[ie+512>>0]=7471*ie+32768,ue[ie+768>>0]=-11059*ie,ue[ie+1024>>0]=-21709*ie,ue[ie+1280>>0]=32768*ie+8421375,ue[ie+1536>>0]=-27439*ie,ue[ie+1792>>0]=-5329*ie}(),it(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function bf(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function tU(t){function e(K){if(!K)throw Error("assert :P")}function r(K,ce,me){for(var Z=0;4>Z;Z++)if(K[ce+Z]!=me.charCodeAt(Z))return!0;return!1}function n(K,ce,me,Z,Y){for(var Le=0;Le<Y;Le++)K[ce+Le]=me[Z+Le]}function s(K,ce,me,Z){for(var Y=0;Y<Z;Y++)K[ce+Y]=me}function o(K){return new Int32Array(K)}function c(K,ce){for(var me=[],Z=0;Z<K;Z++)me.push(new ce);return me}function u(K,ce){var me=[];return function Z(Y,Le,_e){for(var Qe=_e[Le],De=0;De<Qe&&(Y.push(_e.length>Le+1?[]:new ce),!(_e.length<Le+1));De++)Z(Y[De],Le+1,_e)}(me,0,K),me}var i=function(){var K=this;function ce(w,L){for(var G=1<<L-1>>>0;w&G;)G>>>=1;return G?(w&G-1)+G:w}function me(w,L,G,ee,Ae){e(!(ee%G));do w[L+(ee-=G)]=Ae;while(0<ee)}function Z(w,L,G,ee,Ae){if(e(2328>=Ae),512>=Ae)var Ce=o(512);else if((Ce=o(Ae))==null)return 0;return function(Ie,Ne,Me,Pe,lt,Lt){var Bt,xt,Pt=Ne,Qt=1<<Me,ct=o(16),mt=o(16);for(e(lt!=0),e(Pe!=null),e(Ie!=null),e(0<Me),xt=0;xt<lt;++xt){if(15<Pe[xt])return 0;++ct[Pe[xt]]}if(ct[0]==lt)return 0;for(mt[1]=0,Bt=1;15>Bt;++Bt){if(ct[Bt]>1<<Bt)return 0;mt[Bt+1]=mt[Bt]+ct[Bt]}for(xt=0;xt<lt;++xt)Bt=Pe[xt],0<Pe[xt]&&(Lt[mt[Bt]++]=xt);if(mt[15]==1)return(Pe=new Y).g=0,Pe.value=Lt[0],me(Ie,Pt,1,Qt,Pe),Qt;var cr,mr=-1,dr=Qt-1,Yr=0,Or=1,bn=1,zr=1<<Me;for(xt=0,Bt=1,lt=2;Bt<=Me;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt])(Pe=new Y).g=Bt,Pe.value=Lt[xt++],me(Ie,Pt+Yr,lt,zr,Pe),Yr=ce(Yr,Bt)}for(Bt=Me+1,lt=2;15>=Bt;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt]){if(Pe=new Y,(Yr&dr)!=mr){for(Pt+=zr,cr=1<<(mr=Bt)-Me;15>mr&&!(0>=(cr-=ct[mr]));)++mr,cr<<=1;Qt+=zr=1<<(cr=mr-Me),Ie[Ne+(mr=Yr&dr)].g=cr+Me,Ie[Ne+mr].value=Pt-Ne-mr}Pe.g=Bt-Me,Pe.value=Lt[xt++],me(Ie,Pt+(Yr>>Me),lt,zr,Pe),Yr=ce(Yr,Bt)}}return Or!=2*mt[15]-1?0:Qt}(w,L,G,ee,Ae,Ce)}function Y(){this.value=this.g=0}function Le(){this.value=this.g=0}function _e(){this.G=c(5,Y),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c($i,Le)}function Qe(w,L,G,ee){e(w!=null),e(L!=null),e(2147483648>ee),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=L,w.pa=G,w.Jd=L,w.Yc=G+ee,w.Zc=4<=ee?G+ee-4+1:G,Je(w)}function De(w,L){for(var G=0;0<L--;)G|=st(w,128)<<L;return G}function Be(w,L){var G=De(w,L);return tt(w)?-G:G}function xe(w,L,G,ee){var Ae,Ce=0;for(e(w!=null),e(L!=null),e(4294967288>ee),w.Sb=ee,w.Ra=0,w.u=0,w.h=0,4<ee&&(ee=4),Ae=0;Ae<ee;++Ae)Ce+=L[G+Ae]<<8*Ae;w.Ra=Ce,w.bb=ee,w.oa=L,w.pa=G}function ze(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Jr-8>>>0,++w.bb,w.u-=8;fe(w)&&(w.h=1,w.u=0)}function Fe(w,L){if(e(0<=L),!w.h&&L<=la){var G=le(w)&cs[L];return w.u+=L,ze(w),G}return w.h=1,w.u=0}function it(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function le(w){return w.Ra>>>(w.u&Jr-1)>>>0}function fe(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Jr}function be(w,L){w.u=L,w.h=fe(w)}function He(w){w.u>=sc&&(e(w.u>=sc),ze(w))}function Je(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function tt(w){return De(w,1)}function st(w,L){var G=w.Ca;0>w.b&&Je(w);var ee=w.b,Ae=G*L>>>8,Ce=(w.I>>>ee>Ae)+0;for(Ce?(G-=Ae,w.I-=Ae+1<<ee>>>0):G=Ae+1,ee=G,Ae=0;256<=ee;)Ae+=8,ee>>=8;return ee=7^Ae+bs[ee],w.b-=ee,w.Ca=(G<<ee)-1,Ce}function Ct(w,L,G){w[L+0]=G>>24&255,w[L+1]=G>>16&255,w[L+2]=G>>8&255,w[L+3]=G>>0&255}function Ue(w,L){return w[L+0]<<0|w[L+1]<<8}function Ft(w,L){return Ue(w,L)|w[L+2]<<16}function Zt(w,L){return Ue(w,L)|Ue(w,L+2)<<16}function fr(w,L){var G=1<<L;return e(w!=null),e(0<L),w.X=o(G),w.X==null?0:(w.Mb=32-L,w.Xa=L,1)}function Ye(w,L){e(w!=null),e(L!=null),e(w.Xa==L.Xa),n(L.X,0,w.X,0,1<<L.Xa)}function Re(){this.X=[],this.Xa=this.Mb=0}function hr(w,L,G,ee){e(G!=null),e(ee!=null);var Ae=G[0],Ce=ee[0];return Ae==0&&(Ae=(w*Ce+L/2)/L),Ce==0&&(Ce=(L*Ae+w/2)/w),0>=Ae||0>=Ce?0:(G[0]=Ae,ee[0]=Ce,1)}function Ut(w,L){return w+(1<<L)-1>>>L}function vt(w,L){return((4278255360&w)+(4278255360&L)>>>0&4278255360)+((16711935&w)+(16711935&L)>>>0&16711935)>>>0}function Yt(w,L){K[L]=function(G,ee,Ae,Ce,Ie,Ne,Me){var Pe;for(Pe=0;Pe<Ie;++Pe){var lt=K[w](Ne[Me+Pe-1],Ae,Ce+Pe);Ne[Me+Pe]=vt(G[ee+Pe],lt)}}}function ar(){this.ud=this.hd=this.jd=0}function nr(w,L){return((4278124286&(w^L))>>>1)+(w&L)>>>0}function Fr(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Gr(w,L){return Fr(w+(w-L+.5>>1))}function Ir(w,L,G){return Math.abs(L-G)-Math.abs(w-G)}function cn(w,L,G,ee,Ae,Ce,Ie){for(ee=Ce[Ie-1],G=0;G<Ae;++G)Ce[Ie+G]=ee=vt(w[L+G],ee)}function Sn(w,L,G,ee,Ae){var Ce;for(Ce=0;Ce<G;++Ce){var Ie=w[L+Ce],Ne=Ie>>8&255,Me=16711935&(Me=(Me=16711935&Ie)+((Ne<<16)+Ne));ee[Ae+Ce]=(4278255360&Ie)+Me>>>0}}function En(w,L){L.jd=w>>0&255,L.hd=w>>8&255,L.ud=w>>16&255}function an(w,L,G,ee,Ae,Ce){var Ie;for(Ie=0;Ie<ee;++Ie){var Ne=L[G+Ie],Me=Ne>>>8,Pe=Ne,lt=255&(lt=(lt=Ne>>>16)+((w.jd<<24>>24)*(Me<<24>>24)>>>5));Pe=255&(Pe=(Pe=Pe+((w.hd<<24>>24)*(Me<<24>>24)>>>5))+((w.ud<<24>>24)*(lt<<24>>24)>>>5)),Ae[Ce+Ie]=(4278255360&Ne)+(lt<<16)+Pe}}function lr(w,L,G,ee,Ae){K[L]=function(Ce,Ie,Ne,Me,Pe,lt,Lt,Bt,xt){for(Me=Lt;Me<Bt;++Me)for(Lt=0;Lt<xt;++Lt)Pe[lt++]=Ae(Ne[ee(Ce[Ie++])])},K[w]=function(Ce,Ie,Ne,Me,Pe,lt,Lt){var Bt=8>>Ce.b,xt=Ce.Ea,Pt=Ce.K[0],Qt=Ce.w;if(8>Bt)for(Ce=(1<<Ce.b)-1,Qt=(1<<Bt)-1;Ie<Ne;++Ie){var ct,mt=0;for(ct=0;ct<xt;++ct)ct&Ce||(mt=ee(Me[Pe++])),lt[Lt++]=Ae(Pt[mt&Qt]),mt>>=Bt}else K["VP8LMapColor"+G](Me,Pe,Pt,Qt,lt,Lt,Ie,Ne,xt)}}function Xt(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=w[L++];ee[Ae++]=Ce>>16&255,ee[Ae++]=Ce>>8&255,ee[Ae++]=Ce>>0&255}}function qr(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=w[L++];ee[Ae++]=Ce>>16&255,ee[Ae++]=Ce>>8&255,ee[Ae++]=Ce>>0&255,ee[Ae++]=Ce>>24&255}}function Kr(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=(Ie=w[L++])>>16&240|Ie>>12&15,Ie=Ie>>0&240|Ie>>28&15;ee[Ae++]=Ce,ee[Ae++]=Ie}}function kn(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=(Ie=w[L++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;ee[Ae++]=Ce,ee[Ae++]=Ie}}function mn(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=w[L++];ee[Ae++]=Ce>>0&255,ee[Ae++]=Ce>>8&255,ee[Ae++]=Ce>>16&255}}function Un(w,L,G,ee,Ae,Ce){if(Ce==0)for(G=L+G;L<G;)Ct(ee,((Ce=w[L++])[0]>>24|Ce[1]>>8&65280|Ce[2]<<8&16711680|Ce[3]<<24)>>>0),Ae+=32;else n(ee,Ae,w,L,G)}function Hi(w,L){K[L][0]=K[w+"0"],K[L][1]=K[w+"1"],K[L][2]=K[w+"2"],K[L][3]=K[w+"3"],K[L][4]=K[w+"4"],K[L][5]=K[w+"5"],K[L][6]=K[w+"6"],K[L][7]=K[w+"7"],K[L][8]=K[w+"8"],K[L][9]=K[w+"9"],K[L][10]=K[w+"10"],K[L][11]=K[w+"11"],K[L][12]=K[w+"12"],K[L][13]=K[w+"13"],K[L][14]=K[w+"0"],K[L][15]=K[w+"0"]}function Gn(w){return w==nh||w==bh||w==xu||w==Jh}function ti(){this.eb=[],this.size=this.A=this.fb=0}function si(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ti,this.f.kb=new si,this.sd=null}function Bn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function un(w,L){var G=w.T,ee=L.ba.f.RGBA,Ae=ee.eb,Ce=ee.fb+w.ka*ee.A,Ie=co[L.ba.S],Ne=w.y,Me=w.O,Pe=w.f,lt=w.N,Lt=w.ea,Bt=w.W,xt=L.cc,Pt=L.dc,Qt=L.Mc,ct=L.Nc,mt=w.ka,cr=w.ka+w.T,mr=w.U,dr=mr+1>>1;for(mt==0?Ie(Ne,Me,null,null,Pe,lt,Lt,Bt,Pe,lt,Lt,Bt,Ae,Ce,null,null,mr):(Ie(L.ec,L.fc,Ne,Me,xt,Pt,Qt,ct,Pe,lt,Lt,Bt,Ae,Ce-ee.A,Ae,Ce,mr),++G);mt+2<cr;mt+=2)xt=Pe,Pt=lt,Qt=Lt,ct=Bt,lt+=w.Rc,Bt+=w.Rc,Ce+=2*ee.A,Ie(Ne,(Me+=2*w.fa)-w.fa,Ne,Me,xt,Pt,Qt,ct,Pe,lt,Lt,Bt,Ae,Ce-ee.A,Ae,Ce,mr);return Me+=w.fa,w.j+cr<w.o?(n(L.ec,L.fc,Ne,Me,mr),n(L.cc,L.dc,Pe,lt,dr),n(L.Mc,L.Nc,Lt,Bt,dr),G--):1&cr||Ie(Ne,Me,null,null,Pe,lt,Lt,Bt,Pe,lt,Lt,Bt,Ae,Ce+ee.A,null,null,mr),G}function ri(w,L,G){var ee=w.F,Ae=[w.J];if(ee!=null){var Ce=w.U,Ie=L.ba.S,Ne=Ie==nu||Ie==xu;L=L.ba.f.RGBA;var Me=[0],Pe=w.ka;Me[0]=w.T,w.Kb&&(Pe==0?--Me[0]:(--Pe,Ae[0]-=w.width),w.j+w.ka+w.T==w.o&&(Me[0]=w.o-w.j-Pe));var lt=L.eb;Pe=L.fb+Pe*L.A,w=Yi(ee,Ae[0],w.width,Ce,Me,lt,Pe+(Ne?0:3),L.A),e(G==Me),w&&Gn(Ie)&&eo(lt,Pe,Ne,Ce,Me,L.A)}return 0}function Hn(w){var L=w.ma,G=L.ba.S,ee=11>G,Ae=G==jc||G==Sc||G==nu||G==rh||G==12||Gn(G);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!Ea(L.Oa,w,Ae?11:12))return 0;if(Ae&&Gn(G)&&gr(),w.da)alert("todo:use_scaling");else{if(ee){if(L.Ib=Nr,w.Kb){if(G=w.U+1>>1,L.memory=o(w.U+2*G),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+w.U,L.Mc=L.cc,L.Nc=L.dc+G,L.Ib=un,gr()}}else alert("todo:EmitYUV");Ae&&(L.Jb=ri,ee&&St())}if(ee&&!wd){for(w=0;256>w;++w)_A[w]=89858*(w-128)+ki>>Ei,ag[w]=-22014*(w-128)+ki,sf[w]=-45773*(w-128),bA[w]=113618*(w-128)+ki>>Ei;for(w=Qs;w<Oc;++w)L=76283*(w-16)+ki>>Ei,wA[w-Qs]=Zs(L,255),CA[w-Qs]=Zs(L+8>>4,15);wd=1}return 1}function ir(w){var L=w.ma,G=w.U,ee=w.T;return e(!(1&w.ka)),0>=G||0>=ee?0:(G=L.Ib(w,L),L.Jb!=null&&L.Jb(w,L,G),L.Dc+=G,1)}function We(w){w.ma.memory=null}function qe(w,L,G,ee){return Fe(w,8)!=47?0:(L[0]=Fe(w,14)+1,G[0]=Fe(w,14)+1,ee[0]=Fe(w,1),Fe(w,3)!=0?0:!w.h)}function ht(w,L){if(4>w)return w+1;var G=w-2>>1;return(2+(1&w)<<G)+Fe(L,G)+1}function It(w,L){return 120<L?L-120:1<=(G=((G=xd[L-1])>>4)*w+(8-(15&G)))?G:1;var G}function wt(w,L,G){var ee=le(G),Ae=w[L+=255&ee].g-8;return 0<Ae&&(be(G,G.u+8),ee=le(G),L+=w[L].value,L+=ee&(1<<Ae)-1),be(G,G.u+w[L].g),w[L].value}function kt(w,L,G){return G.g+=w.g,G.value+=w.value<<L>>>0,e(8>=G.g),w.g}function Wt(w,L,G){var ee=w.xc;return e((L=ee==0?0:w.vc[w.md*(G>>ee)+(L>>ee)])<w.Wb),w.Ya[L]}function Ot(w,L,G,ee){var Ae=w.ab,Ce=w.c*L,Ie=w.C;L=Ie+L;var Ne=G,Me=ee;for(ee=w.Ta,G=w.Ua;0<Ae--;){var Pe=w.gc[Ae],lt=Ie,Lt=L,Bt=Ne,xt=Me,Pt=(Me=ee,Ne=G,Pe.Ea);switch(e(lt<Lt),e(Lt<=Pe.nc),Pe.hc){case 2:$l(Bt,xt,(Lt-lt)*Pt,Me,Ne);break;case 0:var Qt=lt,ct=Lt,mt=Me,cr=Ne,mr=(zr=Pe).Ea;Qt==0&&(oc(Bt,xt,null,null,1,mt,cr),cn(Bt,xt+1,0,0,mr-1,mt,cr+1),xt+=mr,cr+=mr,++Qt);for(var dr=1<<zr.b,Yr=dr-1,Or=Ut(mr,zr.b),bn=zr.K,zr=zr.w+(Qt>>zr.b)*Or;Qt<ct;){var ui=bn,pi=zr,Vn=1;for(yl(Bt,xt,mt,cr-mr,1,mt,cr);Vn<mr;){var ei=(Vn&~Yr)+dr;ei>mr&&(ei=mr),(0,yr[ui[pi++]>>8&15])(Bt,xt+ +Vn,mt,cr+Vn-mr,ei-Vn,mt,cr+Vn),Vn=ei}xt+=mr,cr+=mr,++Qt&Yr||(zr+=Or)}Lt!=Pe.nc&&n(Me,Ne-Pt,Me,Ne+(Lt-lt-1)*Pt,Pt);break;case 1:for(Pt=Bt,ct=xt,mr=(Bt=Pe.Ea)-(cr=Bt&~(mt=(xt=1<<Pe.b)-1)),Qt=Ut(Bt,Pe.b),dr=Pe.K,Pe=Pe.w+(lt>>Pe.b)*Qt;lt<Lt;){for(Yr=dr,Or=Pe,bn=new ar,zr=ct+cr,ui=ct+Bt;ct<zr;)En(Yr[Or++],bn),jr(bn,Pt,ct,xt,Me,Ne),ct+=xt,Ne+=xt;ct<ui&&(En(Yr[Or++],bn),jr(bn,Pt,ct,mr,Me,Ne),ct+=mr,Ne+=mr),++lt&mt||(Pe+=Qt)}break;case 3:if(Bt==Me&&xt==Ne&&0<Pe.b){for(ct=Me,Bt=Pt=Ne+(Lt-lt)*Pt-(cr=(Lt-lt)*Ut(Pe.Ea,Pe.b)),xt=Me,mt=Ne,Qt=[],cr=(mr=cr)-1;0<=cr;--cr)Qt[cr]=xt[mt+cr];for(cr=mr-1;0<=cr;--cr)ct[Bt+cr]=Qt[cr];js(Pe,lt,Lt,Me,Pt,Me,Ne)}else js(Pe,lt,Lt,Bt,xt,Me,Ne)}Ne=ee,Me=G}Me!=G&&n(ee,G,Ne,Me,Ce)}function pr(w,L){var G=w.V,ee=w.Ba+w.c*w.C,Ae=L-w.C;if(e(L<=w.l.o),e(16>=Ae),0<Ae){var Ce=w.l,Ie=w.Ta,Ne=w.Ua,Me=Ce.width;if(Ot(w,Ae,G,ee),Ae=Ne=[Ne],e((G=w.C)<(ee=L)),e(Ce.v<Ce.va),ee>Ce.o&&(ee=Ce.o),G<Ce.j){var Pe=Ce.j-G;G=Ce.j,Ae[0]+=Pe*Me}if(G>=ee?G=0:(Ae[0]+=4*Ce.v,Ce.ka=G-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=ee-G,G=1),G){if(Ne=Ne[0],11>(G=w.ca).S){var lt=G.f.RGBA,Lt=(ee=G.S,Ae=Ce.U,Ce=Ce.T,Pe=lt.eb,lt.A),Bt=Ce;for(lt=lt.fb+w.Ma*lt.A;0<Bt--;){var xt=Ie,Pt=Ne,Qt=Ae,ct=Pe,mt=lt;switch(ee){case cc:xn(xt,Pt,Qt,ct,mt);break;case jc:jn(xt,Pt,Qt,ct,mt);break;case nh:jn(xt,Pt,Qt,ct,mt),eo(ct,mt,0,Qt,1,0);break;case vu:As(xt,Pt,Qt,ct,mt);break;case Sc:Un(xt,Pt,Qt,ct,mt,1);break;case bh:Un(xt,Pt,Qt,ct,mt,1),eo(ct,mt,0,Qt,1,0);break;case nu:Un(xt,Pt,Qt,ct,mt,0);break;case xu:Un(xt,Pt,Qt,ct,mt,0),eo(ct,mt,1,Qt,1,0);break;case rh:ts(xt,Pt,Qt,ct,mt);break;case Jh:ts(xt,Pt,Qt,ct,mt),ws(ct,mt,Qt,1,0);break;case Zh:bi(xt,Pt,Qt,ct,mt);break;default:e(0)}Ne+=Me,lt+=Lt}w.Ma+=Ce}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=G.height)}}w.C=L,e(w.C<=w.i)}function xr(w){var L;if(0<w.ua)return 0;for(L=0;L<w.Wb;++L){var G=w.Ya[L].G,ee=w.Ya[L].H;if(0<G[1][ee[1]+0].g||0<G[2][ee[2]+0].g||0<G[3][ee[3]+0].g)return 0}return 1}function Ar(w,L,G,ee,Ae,Ce){if(w.Z!=0){var Ie=w.qd,Ne=w.rd;for(e(Ta[w.Z]!=null);L<G;++L)Ta[w.Z](Ie,Ne,ee,Ae,ee,Ae,Ce),Ie=ee,Ne=Ae,Ae+=Ce;w.qd=Ie,w.rd=Ne}}function Tr(w,L){var G=w.l.ma,ee=G.Z==0||G.Z==1?w.l.j:w.C;if(ee=w.C<ee?ee:w.C,e(L<=w.l.o),L>ee){var Ae=w.l.width,Ce=G.ca,Ie=G.tb+Ae*ee,Ne=w.V,Me=w.Ba+w.c*ee,Pe=w.gc;e(w.ab==1),e(Pe[0].hc==3),Aa(Pe[0],ee,L,Ne,Me,Ce,Ie),Ar(G,ee,L,Ce,Ie,Ae)}w.C=w.Ma=L}function nn(w,L,G,ee,Ae,Ce,Ie){var Ne=w.$/ee,Me=w.$%ee,Pe=w.m,lt=w.s,Lt=G+w.$,Bt=Lt;Ae=G+ee*Ae;var xt=G+ee*Ce,Pt=280+lt.ua,Qt=w.Pb?Ne:16777216,ct=0<lt.ua?lt.Wa:null,mt=lt.wc,cr=Lt<xt?Wt(lt,Me,Ne):null;e(w.C<Ce),e(xt<=Ae);var mr=!1;e:for(;;){for(;mr||Lt<xt;){var dr=0;if(Ne>=Qt){var Yr=Lt-G;e((Qt=w).Pb),Qt.wd=Qt.m,Qt.xd=Yr,0<Qt.s.ua&&Ye(Qt.s.Wa,Qt.s.vb),Qt=Ne+bd}if(Me&mt||(cr=Wt(lt,Me,Ne)),e(cr!=null),cr.Qb&&(L[Lt]=cr.qb,mr=!0),!mr)if(He(Pe),cr.jc){dr=Pe,Yr=L;var Or=Lt,bn=cr.pd[le(dr)&$i-1];e(cr.jc),256>bn.g?(be(dr,dr.u+bn.g),Yr[Or]=bn.value,dr=0):(be(dr,dr.u+bn.g-256),e(256<=bn.value),dr=bn.value),dr==0&&(mr=!0)}else dr=wt(cr.G[0],cr.H[0],Pe);if(Pe.h)break;if(mr||256>dr){if(!mr)if(cr.nd)L[Lt]=(cr.qb|dr<<8)>>>0;else{if(He(Pe),mr=wt(cr.G[1],cr.H[1],Pe),He(Pe),Yr=wt(cr.G[2],cr.H[2],Pe),Or=wt(cr.G[3],cr.H[3],Pe),Pe.h)break;L[Lt]=(Or<<24|mr<<16|dr<<8|Yr)>>>0}if(mr=!1,++Lt,++Me>=ee&&(Me=0,++Ne,Ie!=null&&Ne<=Ce&&!(Ne%16)&&Ie(w,Ne),ct!=null))for(;Bt<Lt;)dr=L[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else if(280>dr){if(dr=ht(dr-256,Pe),Yr=wt(cr.G[4],cr.H[4],Pe),He(Pe),Yr=It(ee,Yr=ht(Yr,Pe)),Pe.h)break;if(Lt-G<Yr||Ae-Lt<dr)break e;for(Or=0;Or<dr;++Or)L[Lt+Or]=L[Lt+Or-Yr];for(Lt+=dr,Me+=dr;Me>=ee;)Me-=ee,++Ne,Ie!=null&&Ne<=Ce&&!(Ne%16)&&Ie(w,Ne);if(e(Lt<=Ae),Me&mt&&(cr=Wt(lt,Me,Ne)),ct!=null)for(;Bt<Lt;)dr=L[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else{if(!(dr<Pt))break e;for(mr=dr-280,e(ct!=null);Bt<Lt;)dr=L[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr;dr=Lt,e(!(mr>>>(Yr=ct).Xa)),L[dr]=Yr.X[mr],mr=!0}mr||e(Pe.h==fe(Pe))}if(w.Pb&&Pe.h&&Lt<Ae)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Ye(w.s.vb,w.s.Wa);else{if(Pe.h)break e;Ie!=null&&Ie(w,Ne>Ce?Ce:Ne),w.a=0,w.$=Lt-G}return 1}return w.a=3,0}function on(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var L=w.Wa;L!=null&&(L.X=null),w.vb=null,e(w!=null)}function _n(){var w=new yu;return w==null?null:(w.a=0,w.xb=Sh,Hi("Predictor","VP8LPredictors"),Hi("Predictor","VP8LPredictors_C"),Hi("PredictorAdd","VP8LPredictorsAdd"),Hi("PredictorAdd","VP8LPredictorsAdd_C"),$l=Sn,jr=an,xn=Xt,jn=qr,ts=Kr,bi=kn,As=mn,K.VP8LMapColor32b=Jo,K.VP8LMapColor8b=Pc,w)}function Dn(w,L,G,ee,Ae){var Ce=1,Ie=[w],Ne=[L],Me=ee.m,Pe=ee.s,lt=null,Lt=0;e:for(;;){if(G)for(;Ce&&Fe(Me,1);){var Bt=Ie,xt=Ne,Pt=ee,Qt=1,ct=Pt.m,mt=Pt.gc[Pt.ab],cr=Fe(ct,2);if(Pt.Oc&1<<cr)Ce=0;else{switch(Pt.Oc|=1<<cr,mt.hc=cr,mt.Ea=Bt[0],mt.nc=xt[0],mt.K=[null],++Pt.ab,e(4>=Pt.ab),cr){case 0:case 1:mt.b=Fe(ct,3)+2,Qt=Dn(Ut(mt.Ea,mt.b),Ut(mt.nc,mt.b),0,Pt,mt.K),mt.K=mt.K[0];break;case 3:var mr,dr=Fe(ct,8)+1,Yr=16<dr?0:4<dr?1:2<dr?2:3;if(Bt[0]=Ut(mt.Ea,Yr),mt.b=Yr,mr=Qt=Dn(dr,1,0,Pt,mt.K)){var Or,bn=dr,zr=mt,ui=1<<(8>>zr.b),pi=o(ui);if(pi==null)mr=0;else{var Vn=zr.K[0],ei=zr.w;for(pi[0]=zr.K[0][0],Or=1;Or<1*bn;++Or)pi[Or]=vt(Vn[ei+Or],pi[Or-1]);for(;Or<4*ui;++Or)pi[Or]=0;zr.K[0]=null,zr.K[0]=pi,mr=1}}Qt=mr;break;case 2:break;default:e(0)}Ce=Qt}}if(Ie=Ie[0],Ne=Ne[0],Ce&&Fe(Me,1)&&!(Ce=1<=(Lt=Fe(Me,4))&&11>=Lt)){ee.a=3;break e}var Mi;if(Mi=Ce)t:{var Si,zn,ms,To=ee,Ri=Ie,Ui=Ne,yi=Lt,Qo=G,Ko=To.m,Ds=To.s,$s=[null],Io=1,jo=0,ca=_d[yi];r:for(;;){if(Qo&&Fe(Ko,1)){var Pr=Fe(Ko,3)+2,Ln=Ut(Ri,Pr),ya=Ut(Ui,Pr),Bs=Ln*ya;if(!Dn(Ln,ya,0,To,$s))break r;for($s=$s[0],Ds.xc=Pr,Si=0;Si<Bs;++Si){var ur=$s[Si]>>8&65535;$s[Si]=ur,ur>=Io&&(Io=ur+1)}}if(Ko.h)break r;for(zn=0;5>zn;++zn){var Zi=vd[zn];!zn&&0<yi&&(Zi+=1<<yi),jo<Zi&&(jo=Zi)}var Bh=c(Io*ca,Y),lf=Io,Rc=c(lf,_e);if(Rc==null)var oh=null;else e(65536>=lf),oh=Rc;var uc=o(jo);if(oh==null||uc==null||Bh==null){To.a=1;break r}var Wc=Bh;for(Si=ms=0;Si<Io;++Si){var ka=oh[Si],iu=ka.G,Kc=ka.H,Cd=0,wu=1,Sd=0;for(zn=0;5>zn;++zn){Zi=vd[zn],iu[zn]=Wc,Kc[zn]=ms,!zn&&0<yi&&(Zi+=1<<yi);i:{var su,ah=Zi,Xc=To,Cu=uc,ou=Wc,lg=ms,Wa=0,hc=Xc.m,cf=Fe(hc,1);if(s(Cu,0,0,ah),cf){var uo=Fe(hc,1)+1,os=Fe(hc,1),Yf=Fe(hc,os==0?1:8);Cu[Yf]=1,uo==2&&(Cu[Yf=Fe(hc,8)]=1);var Bc=1}else{var Bd=o(19),Su=Fe(hc,4)+4;if(19<Su){Xc.a=3;var Bu=0;break i}for(su=0;su<Su;++su)Bd[nf[su]]=Fe(hc,3);var ed=void 0,El=void 0,Eu=Xc,lh=Bd,Uc=ah,Ed=Cu,td=0,Tl=Eu.m,uf=8,Tu=c(128,Y);n:for(;Z(Tu,0,7,lh,19);){if(Fe(Tl,1)){var Td=2+2*Fe(Tl,3);if((ed=2+Fe(Tl,Td))>Uc)break n}else ed=Uc;for(El=0;El<Uc&&ed--;){He(Tl);var ch=Tu[0+(127&le(Tl))];be(Tl,Tl.u+ch.g);var na=ch.value;if(16>na)Ed[El++]=na,na!=0&&(uf=na);else{var Id=na==16,Ka=na-16,jp=wh[Ka],hf=Fe(Tl,kc[Ka])+jp;if(El+hf>Uc)break n;for(var Ld=Id?uf:0;0<hf--;)Ed[El++]=Ld}}td=1;break n}td||(Eu.a=3),Bc=td}(Bc=Bc&&!hc.h)&&(Wa=Z(ou,lg,8,Cu,ah)),Bc&&Wa!=0?Bu=Wa:(Xc.a=3,Bu=0)}if(Bu==0)break r;if(wu&&Wl[zn]==1&&(wu=Wc[ms].g==0),Cd+=Wc[ms].g,ms+=Bu,3>=zn){var Il,rd=uc[0];for(Il=1;Il<Zi;++Il)uc[Il]>rd&&(rd=uc[Il]);Sd+=rd}}if(ka.nd=wu,ka.Qb=0,wu&&(ka.qb=(iu[3][Kc[3]+0].value<<24|iu[1][Kc[1]+0].value<<16|iu[2][Kc[2]+0].value)>>>0,Cd==0&&256>iu[0][Kc[0]+0].value&&(ka.Qb=1,ka.qb+=iu[0][Kc[0]+0].value<<8)),ka.jc=!ka.Qb&&6>Sd,ka.jc){var au,al=ka;for(au=0;au<$i;++au){var ll=au,cl=al.pd[ll],Iu=al.G[0][al.H[0]+ll];256<=Iu.value?(cl.g=Iu.g+256,cl.value=Iu.value):(cl.g=0,cl.value=0,ll>>=kt(Iu,8,cl),ll>>=kt(al.G[1][al.H[1]+ll],16,cl),ll>>=kt(al.G[2][al.H[2]+ll],0,cl),kt(al.G[3][al.H[3]+ll],24,cl))}}}Ds.vc=$s,Ds.Wb=Io,Ds.Ya=oh,Ds.yc=Bh,Mi=1;break t}Mi=0}if(!(Ce=Mi)){ee.a=3;break e}if(0<Lt){if(Pe.ua=1<<Lt,!fr(Pe.Wa,Lt)){ee.a=1,Ce=0;break e}}else Pe.ua=0;var Eh=ee,Fd=Ie,SA=Ne,Th=Eh.s,uh=Th.xc;if(Eh.c=Fd,Eh.i=SA,Th.md=Ut(Fd,uh),Th.wc=uh==0?-1:(1<<uh)-1,G){ee.xb=Wf;break e}if((lt=o(Ie*Ne))==null){ee.a=1,Ce=0;break e}Ce=(Ce=nn(ee,lt,0,Ie,Ne,Ne,null))&&!Me.h;break e}return Ce?(Ae!=null?Ae[0]=lt:(e(lt==null),e(G)),ee.$=0,G||on(Pe)):on(Pe),Ce}function qn(w,L){var G=w.c*w.i,ee=G+L+16*L;return e(w.c<=L),w.V=o(ee),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+G+L,1)}function $n(w,L){var G=w.C,ee=L-G,Ae=w.V,Ce=w.Ba+w.c*G;for(e(L<=w.l.o);0<ee;){var Ie=16<ee?16:ee,Ne=w.l.ma,Me=w.l.width,Pe=Me*Ie,lt=Ne.ca,Lt=Ne.tb+Me*G,Bt=w.Ta,xt=w.Ua;Ot(w,Ie,Ae,Ce),ai(Bt,xt,lt,Lt,Pe),Ar(Ne,G,G+Ie,lt,Lt,Me),ee-=Ie,Ae+=Ie*w.c,G+=Ie}e(G==L),w.C=w.Ma=L}function Ni(){this.ub=this.yd=this.td=this.Rb=0}function Vi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ki(){this.Yb=function(){var w=[];return function L(G,ee,Ae){for(var Ce=Ae[ee],Ie=0;Ie<Ce&&(G.push(Ae.length>ee+1?[]:0),!(Ae.length<ee+1));Ie++)L(G[Ie],ee+1,Ae)}(w,0,[3,11]),w}()}function Cs(){this.jb=o(3),this.Wc=u([4,8],Ki),this.Xc=u([4,17],Ki)}function ro(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Fs(){this.ld=this.La=this.dd=this.tc=0}function es(){this.Na=this.la=0}function Sa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ba(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fs),this.Y=0,this.ya=Array(new Ba),this.aa=0,this.l=new sa}function go(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Sl(){this.cb=this.a=0,this.sc="",this.m=new it,this.Od=new Ni,this.Kc=new Vi,this.ed=new ro,this.Qa=new Wn,this.Ic=this.$c=this.Aa=0,this.D=new tl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,it),this.ia=0,this.pb=c(4,Sa),this.Pa=new Cs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new go),this.Hd=0,this.rb=Array(new es),this.sb=0,this.wa=Array(new Fs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ba),this.L=this.aa=0,this.gd=u([4,2],Fs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ha(){var w=new Sl;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Dc||(Dc=Ul)),w}function Gi(w,L,G){return w.a==0&&(w.a=L,w.sc=G,w.cb=0),0}function Fc(w,L,G){return 3<=G&&w[L+0]==157&&w[L+1]==1&&w[L+2]==42}function nc(w,L){if(w==null)return 0;if(w.a=0,w.sc="OK",L==null)return Gi(w,2,"null VP8Io passed to VP8GetHeaders()");var G=L.data,ee=L.w,Ae=L.ha;if(4>Ae)return Gi(w,7,"Truncated header.");var Ce=G[ee+0]|G[ee+1]<<8|G[ee+2]<<16,Ie=w.Od;if(Ie.Rb=!(1&Ce),Ie.td=Ce>>1&7,Ie.yd=Ce>>4&1,Ie.ub=Ce>>5,3<Ie.td)return Gi(w,3,"Incorrect keyframe parameters.");if(!Ie.yd)return Gi(w,4,"Frame not displayable.");ee+=3,Ae-=3;var Ne=w.Kc;if(Ie.Rb){if(7>Ae)return Gi(w,7,"cannot parse picture header");if(!Fc(G,ee,Ae))return Gi(w,3,"Bad code word");Ne.c=16383&(G[ee+4]<<8|G[ee+3]),Ne.Td=G[ee+4]>>6,Ne.i=16383&(G[ee+6]<<8|G[ee+5]),Ne.Ud=G[ee+6]>>6,ee+=7,Ae-=7,w.za=Ne.c+15>>4,w.Ub=Ne.i+15>>4,L.width=Ne.c,L.height=Ne.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,s((Ce=w.Pa).jb,0,255,Ce.jb.length),e((Ce=w.Qa)!=null),Ce.Cb=0,Ce.Bb=0,Ce.Fb=1,s(Ce.Zb,0,0,Ce.Zb.length),s(Ce.Lb,0,0,Ce.Lb)}if(Ie.ub>Ae)return Gi(w,7,"bad partition length");Qe(Ce=w.m,G,ee,Ie.ub),ee+=Ie.ub,Ae-=Ie.ub,Ie.Rb&&(Ne.Ld=tt(Ce),Ne.Kd=tt(Ce)),Ne=w.Qa;var Me,Pe=w.Pa;if(e(Ce!=null),e(Ne!=null),Ne.Cb=tt(Ce),Ne.Cb){if(Ne.Bb=tt(Ce),tt(Ce)){for(Ne.Fb=tt(Ce),Me=0;4>Me;++Me)Ne.Zb[Me]=tt(Ce)?Be(Ce,7):0;for(Me=0;4>Me;++Me)Ne.Lb[Me]=tt(Ce)?Be(Ce,6):0}if(Ne.Bb)for(Me=0;3>Me;++Me)Pe.jb[Me]=tt(Ce)?De(Ce,8):255}else Ne.Bb=0;if(Ce.Ka)return Gi(w,3,"cannot parse segment header");if((Ne=w.ed).zd=tt(Ce),Ne.Tb=De(Ce,6),Ne.wb=De(Ce,3),Ne.Pc=tt(Ce),Ne.Pc&&tt(Ce)){for(Pe=0;4>Pe;++Pe)tt(Ce)&&(Ne.vd[Pe]=Be(Ce,6));for(Pe=0;4>Pe;++Pe)tt(Ce)&&(Ne.od[Pe]=Be(Ce,6))}if(w.L=Ne.Tb==0?0:Ne.zd?1:2,Ce.Ka)return Gi(w,3,"cannot parse filter header");var lt=Ae;if(Ae=Me=ee,ee=Me+lt,Ne=lt,w.Xb=(1<<De(w.m,2))-1,lt<3*(Pe=w.Xb))G=7;else{for(Me+=3*Pe,Ne-=3*Pe,lt=0;lt<Pe;++lt){var Lt=G[Ae+0]|G[Ae+1]<<8|G[Ae+2]<<16;Lt>Ne&&(Lt=Ne),Qe(w.Jc[+lt],G,Me,Lt),Me+=Lt,Ne-=Lt,Ae+=3}Qe(w.Jc[+Pe],G,Me,Ne),G=Me<ee?0:5}if(G!=0)return Gi(w,G,"cannot parse partitions");for(G=De(Me=w.m,7),Ae=tt(Me)?Be(Me,4):0,ee=tt(Me)?Be(Me,4):0,Ne=tt(Me)?Be(Me,4):0,Pe=tt(Me)?Be(Me,4):0,Me=tt(Me)?Be(Me,4):0,lt=w.Qa,Lt=0;4>Lt;++Lt){if(lt.Cb){var Bt=lt.Zb[Lt];lt.Fb||(Bt+=G)}else{if(0<Lt){w.pb[Lt]=w.pb[0];continue}Bt=G}var xt=w.pb[Lt];xt.Sc[0]=ih[Zs(Bt+Ae,127)],xt.Sc[1]=_u[Zs(Bt+0,127)],xt.Eb[0]=2*ih[Zs(Bt+ee,127)],xt.Eb[1]=101581*_u[Zs(Bt+Ne,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=ih[Zs(Bt+Pe,117)],xt.Qc[1]=_u[Zs(Bt+Me,127)],xt.lc=Bt+Me}if(!Ie.Rb)return Gi(w,4,"Not a key frame.");for(tt(Ce),Ie=w.Pa,G=0;4>G;++G){for(Ae=0;8>Ae;++Ae)for(ee=0;3>ee;++ee)for(Ne=0;11>Ne;++Ne)Pe=st(Ce,Np[G][Ae][ee][Ne])?De(Ce,8):qf[G][Ae][ee][Ne],Ie.Wc[G][Ae].Yb[ee][Ne]=Pe;for(Ae=0;17>Ae;++Ae)Ie.Xc[G][Ae]=Ie.Wc[G][$f[Ae]]}return w.kc=tt(Ce),w.kc&&(w.Bd=De(Ce,8)),w.cb=1}function Ul(w,L,G,ee,Ae,Ce,Ie){var Ne=L[Ae].Yb[G];for(G=0;16>Ae;++Ae){if(!st(w,Ne[G+0]))return Ae;for(;!st(w,Ne[G+1]);)if(Ne=L[++Ae].Yb[0],G=0,Ae==16)return 16;var Me=L[Ae+1].Yb;if(st(w,Ne[G+2])){var Pe=w,lt=0;if(st(Pe,(Bt=Ne)[(Lt=G)+3]))if(st(Pe,Bt[Lt+6])){for(Ne=0,Lt=2*(lt=st(Pe,Bt[Lt+8]))+(Bt=st(Pe,Bt[Lt+9+lt])),lt=0,Bt=Kl[Lt];Bt[Ne];++Ne)lt+=lt+st(Pe,Bt[Ne]);lt+=3+(8<<Lt)}else st(Pe,Bt[Lt+7])?(lt=7+2*st(Pe,165),lt+=st(Pe,145)):lt=5+st(Pe,159);else lt=st(Pe,Bt[Lt+4])?3+st(Pe,Bt[Lt+5]):2;Ne=Me[2]}else lt=1,Ne=Me[1];Me=Ie+sh[Ae],0>(Pe=w).b&&Je(Pe);var Lt,Bt=Pe.b,xt=(Lt=Pe.Ca>>1)-(Pe.I>>Bt)>>31;--Pe.b,Pe.Ca+=xt,Pe.Ca|=1,Pe.I-=(Lt+1&xt)<<Bt,Ce[Me]=((lt^xt)-xt)*ee[(0<Ae)+0]}return 16}function Xo(w){var L=w.rb[w.sb-1];L.la=0,L.Na=0,s(w.zc,0,0,w.zc.length),w.ja=0}function Pa(w,L){if(w==null)return 0;if(L==null)return Gi(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!nc(w,L))return 0;if(e(w.cb),L.ac==null||L.ac(L)){L.ob&&(w.L=0);var G=bu[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=L.v-G>>4,w.zb=L.j-G>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=L.o+15+G>>4,w.Hb=L.va+15+G>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ee=w.ed;for(G=0;4>G;++G){var Ae;if(w.Qa.Cb){var Ce=w.Qa.Lb[G];w.Qa.Fb||(Ce+=ee.Tb)}else Ce=ee.Tb;for(Ae=0;1>=Ae;++Ae){var Ie=w.gd[G][Ae],Ne=Ce;if(ee.Pc&&(Ne+=ee.vd[0],Ae&&(Ne+=ee.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Me=Ne;0<ee.wb&&(Me=4<ee.wb?Me>>2:Me>>1)>9-ee.wb&&(Me=9-ee.wb),1>Me&&(Me=1),Ie.dd=Me,Ie.tc=2*Ne+Me,Ie.ld=40<=Ne?2:15<=Ne?1:0}else Ie.tc=0;Ie.La=Ae}}}G=0}else Gi(w,6,"Frame setup failed"),G=w.a;if(G=G==0){if(G){w.$c=0,0<w.Aa||(w.Ic=of);e:{G=w.Ic,ee=4*(Me=w.za);var Pe=32*Me,lt=Me+1,Lt=0<w.L?Me*(0<w.Aa?2:1):0,Bt=(w.Aa==2?2:1)*Me;if((Ie=ee+832+(Ae=3*(16*G+bu[w.L])/2*Pe)+(Ce=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ie)G=0;else{if(Ie>w.Vb){if(w.Vb=0,w.Ec=o(Ie),w.Fc=0,w.Ec==null){G=Gi(w,1,"no memory during frame initialization.");break e}w.Vb=Ie}Ie=w.Ec,Ne=w.Fc,w.Ac=Ie,w.Bc=Ne,Ne+=ee,w.Gd=c(Pe,go),w.Hd=0,w.rb=c(lt+1,es),w.sb=1,w.wa=Lt?c(Lt,Fs):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Me),e(!0),w.oc=Ie,w.pc=Ne,Ne+=832,w.ya=c(Bt,Ba),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Me),w.R=16*Me,w.B=8*Me,Me=(Pe=bu[w.L])*w.R,Pe=Pe/2*w.B,w.sa=Ie,w.ta=Ne+Me,w.qa=w.sa,w.ra=w.ta+16*G*w.R+Pe,w.Ha=w.qa,w.Ia=w.ra+8*G*w.B+Pe,w.$c=0,Ne+=Ae,w.mb=Ce?Ie:null,w.nb=Ce?Ne:null,e(Ne+Ce<=w.Fc+w.Vb),Xo(w),s(w.Ac,w.Bc,0,ee),G=1}}if(G){if(L.ka=0,L.y=w.sa,L.O=w.ta,L.f=w.qa,L.N=w.ra,L.ea=w.Ha,L.Vd=w.Ia,L.fa=w.R,L.Rc=w.B,L.F=null,L.J=0,!qa){for(G=-255;255>=G;++G)qs[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)sl[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)ac[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)ol[255+G]=0>G?0:255<G?255:G;qa=1}us=Ht,bo=Cc,ks=ae,Ss=Oe,Us=At,Xi=Nc,Js=fa,ea=xs,ma=Eo,ta=ic,ra=no,Gs=$o,ga=aa,hs=rl,ss=Ma,In=qo,gi=Xs,lo=Bo,Mo[0]=Bi,Mo[1]=tr,Mo[2]=ln,Mo[3]=Jn,Mo[4]=Ns,Mo[5]=Ro,Mo[6]=Ks,Mo[7]=yn,Mo[8]=Li,Mo[9]=Yn,vl[0]=Xr,vl[1]=fn,vl[2]=pn,vl[3]=Nn,vl[4]=Qn,vl[5]=oi,vl[6]=Pi,$a[0]=Po,$a[1]=_r,$a[2]=da,$a[3]=Ms,$a[4]=oa,$a[5]=zl,$a[6]=yo,G=1}else G=0}G&&(G=function(xt,Pt){for(xt.M=0;xt.M<xt.Va;++xt.M){var Qt,ct=xt.Jc[xt.M&xt.Xb],mt=xt.m,cr=xt;for(Qt=0;Qt<cr.za;++Qt){var mr=mt,dr=cr,Yr=dr.Ac,Or=dr.Bc+4*Qt,bn=dr.zc,zr=dr.ya[dr.aa+Qt];if(dr.Qa.Bb?zr.$b=st(mr,dr.Pa.jb[0])?2+st(mr,dr.Pa.jb[2]):st(mr,dr.Pa.jb[1]):zr.$b=0,dr.kc&&(zr.Ad=st(mr,dr.Bd)),zr.Za=!st(mr,145)+0,zr.Za){var ui=zr.Ob,pi=0;for(dr=0;4>dr;++dr){var Vn,ei=bn[0+dr];for(Vn=0;4>Vn;++Vn){ei=Ch[Yr[Or+Vn]][ei];for(var Mi=zo[st(mr,ei[0])];0<Mi;)Mi=zo[2*Mi+st(mr,ei[Mi])];ei=-Mi,Yr[Or+Vn]=ei}n(ui,pi,Yr,Or,4),pi+=4,bn[0+dr]=ei}}else ei=st(mr,156)?st(mr,128)?1:3:st(mr,163)?2:0,zr.Ob[0]=ei,s(Yr,Or,ei,4),s(bn,0,ei,4);zr.Dd=st(mr,142)?st(mr,114)?st(mr,183)?1:3:2:0}if(cr.m.Ka)return Gi(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(cr=ct,mr=(mt=xt).rb[mt.sb-1],Yr=mt.rb[mt.sb+mt.ja],Qt=mt.ya[mt.aa+mt.ja],Or=mt.kc?Qt.Ad:0)mr.la=Yr.la=0,Qt.Za||(mr.Na=Yr.Na=0),Qt.Hc=0,Qt.Gc=0,Qt.ia=0;else{var Si,zn;if(mr=Yr,Yr=cr,Or=mt.Pa.Xc,bn=mt.ya[mt.aa+mt.ja],zr=mt.pb[bn.$b],dr=bn.ad,ui=0,pi=mt.rb[mt.sb-1],ei=Vn=0,s(dr,ui,0,384),bn.Za)var ms=0,To=Or[3];else{Mi=o(16);var Ri=mr.Na+pi.Na;if(Ri=Dc(Yr,Or[1],Ri,zr.Eb,0,Mi,0),mr.Na=pi.Na=(0<Ri)+0,1<Ri)us(Mi,0,dr,ui);else{var Ui=Mi[0]+3>>3;for(Mi=0;256>Mi;Mi+=16)dr[ui+Mi]=Ui}ms=1,To=Or[0]}var yi=15&mr.la,Qo=15&pi.la;for(Mi=0;4>Mi;++Mi){var Ko=1&Qo;for(Ui=zn=0;4>Ui;++Ui)yi=yi>>1|(Ko=(Ri=Dc(Yr,To,Ri=Ko+(1&yi),zr.Sc,ms,dr,ui))>ms)<<7,zn=zn<<2|(3<Ri?3:1<Ri?2:dr[ui+0]!=0),ui+=16;yi>>=4,Qo=Qo>>1|Ko<<7,Vn=(Vn<<8|zn)>>>0}for(To=yi,ms=Qo>>4,Si=0;4>Si;Si+=2){for(zn=0,yi=mr.la>>4+Si,Qo=pi.la>>4+Si,Mi=0;2>Mi;++Mi){for(Ko=1&Qo,Ui=0;2>Ui;++Ui)Ri=Ko+(1&yi),yi=yi>>1|(Ko=0<(Ri=Dc(Yr,Or[2],Ri,zr.Qc,0,dr,ui)))<<3,zn=zn<<2|(3<Ri?3:1<Ri?2:dr[ui+0]!=0),ui+=16;yi>>=2,Qo=Qo>>1|Ko<<5}ei|=zn<<4*Si,To|=yi<<4<<Si,ms|=(240&Qo)<<Si}mr.la=To,pi.la=ms,bn.Hc=Vn,bn.Gc=ei,bn.ia=43690&ei?0:zr.ia,Or=!(Vn|ei)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[Qt.$b][Qt.Za],mt.wa[mt.Y+mt.ja].La|=!Or),cr.Ka)return Gi(xt,7,"Premature end-of-file encountered.")}if(Xo(xt),mt=Pt,cr=1,Qt=(ct=xt).D,mr=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(Qt.M=ct.M,Qt.uc=mr,io(ct,Qt),cr=1,Qt=(zn=ct.D).Nb,mr=(ei=bu[ct.L])*ct.R,Yr=ei/2*ct.B,Mi=16*Qt*ct.R,Ui=8*Qt*ct.B,Or=ct.sa,bn=ct.ta-mr+Mi,zr=ct.qa,dr=ct.ra-Yr+Ui,ui=ct.Ha,pi=ct.Ia-Yr+Ui,Qo=(yi=zn.M)==0,Vn=yi>=ct.Va-1,ct.Aa==2&&io(ct,zn),zn.uc)for(Ko=(Ri=ct).D.M,e(Ri.D.uc),zn=Ri.yb;zn<Ri.Hb;++zn){ms=zn,To=Ko;var Ds=($s=(Zi=Ri).D).Nb;Si=Zi.R;var $s=$s.wa[$s.Y+ms],Io=Zi.sa,jo=Zi.ta+16*Ds*Si+16*ms,ca=$s.dd,Pr=$s.tc;if(Pr!=0)if(e(3<=Pr),Zi.L==1)0<ms&&In(Io,jo,Si,Pr+4),$s.La&&lo(Io,jo,Si,Pr),0<To&&ss(Io,jo,Si,Pr+4),$s.La&&gi(Io,jo,Si,Pr);else{var Ln=Zi.B,ya=Zi.qa,Bs=Zi.ra+8*Ds*Ln+8*ms,ur=Zi.Ha,Zi=Zi.Ia+8*Ds*Ln+8*ms;Ds=$s.ld,0<ms&&(ea(Io,jo,Si,Pr+4,ca,Ds),ta(ya,Bs,ur,Zi,Ln,Pr+4,ca,Ds)),$s.La&&(Gs(Io,jo,Si,Pr,ca,Ds),hs(ya,Bs,ur,Zi,Ln,Pr,ca,Ds)),0<To&&(Js(Io,jo,Si,Pr+4,ca,Ds),ma(ya,Bs,ur,Zi,Ln,Pr+4,ca,Ds)),$s.La&&(ra(Io,jo,Si,Pr,ca,Ds),ga(ya,Bs,ur,Zi,Ln,Pr,ca,Ds))}}if(ct.ia&&alert("todo:DitherRow"),mt.put!=null){if(zn=16*yi,yi=16*(yi+1),Qo?(mt.y=ct.sa,mt.O=ct.ta+Mi,mt.f=ct.qa,mt.N=ct.ra+Ui,mt.ea=ct.Ha,mt.W=ct.Ia+Ui):(zn-=ei,mt.y=Or,mt.O=bn,mt.f=zr,mt.N=dr,mt.ea=ui,mt.W=pi),Vn||(yi-=ei),yi>mt.o&&(yi=mt.o),mt.F=null,mt.J=null,ct.Fa!=null&&0<ct.Fa.length&&zn<yi&&(mt.J=ql(ct,mt,zn,yi-zn),mt.F=ct.mb,mt.F==null&&mt.F.length==0)){cr=Gi(ct,3,"Could not decode alpha data.");break e}zn<mt.j&&(ei=mt.j-zn,zn=mt.j,e(!(1&ei)),mt.O+=ct.R*ei,mt.N+=ct.B*(ei>>1),mt.W+=ct.B*(ei>>1),mt.F!=null&&(mt.J+=mt.width*ei)),zn<yi&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=zn-mt.j,mt.U=mt.va-mt.v,mt.T=yi-zn,cr=mt.put(mt))}Qt+1!=ct.Ic||Vn||(n(ct.sa,ct.ta-mr,Or,bn+16*ct.R,mr),n(ct.qa,ct.ra-Yr,zr,dr+8*ct.B,Yr),n(ct.Ha,ct.Ia-Yr,ui,pi+8*ct.B,Yr))}if(!cr)return Gi(xt,6,"Output aborted.")}return 1}(w,L)),L.bc!=null&&L.bc(L),G&=1}return G?(w.cb=0,G):0}function mi(w,L,G,ee,Ae){Ae=w[L+G+32*ee]+(Ae>>3),w[L+G+32*ee]=-256&Ae?0>Ae?0:255:Ae}function So(w,L,G,ee,Ae,Ce){mi(w,L,0,G,ee+Ae),mi(w,L,1,G,ee+Ce),mi(w,L,2,G,ee-Ce),mi(w,L,3,G,ee-Ae)}function vs(w){return(20091*w>>16)+w}function Bl(w,L,G,ee){var Ae,Ce=0,Ie=o(16);for(Ae=0;4>Ae;++Ae){var Ne=w[L+0]+w[L+8],Me=w[L+0]-w[L+8],Pe=(35468*w[L+4]>>16)-vs(w[L+12]),lt=vs(w[L+4])+(35468*w[L+12]>>16);Ie[Ce+0]=Ne+lt,Ie[Ce+1]=Me+Pe,Ie[Ce+2]=Me-Pe,Ie[Ce+3]=Ne-lt,Ce+=4,L++}for(Ae=Ce=0;4>Ae;++Ae)Ne=(w=Ie[Ce+0]+4)+Ie[Ce+8],Me=w-Ie[Ce+8],Pe=(35468*Ie[Ce+4]>>16)-vs(Ie[Ce+12]),mi(G,ee,0,0,Ne+(lt=vs(Ie[Ce+4])+(35468*Ie[Ce+12]>>16))),mi(G,ee,1,0,Me+Pe),mi(G,ee,2,0,Me-Pe),mi(G,ee,3,0,Ne-lt),Ce++,ee+=32}function Nc(w,L,G,ee){var Ae=w[L+0]+4,Ce=35468*w[L+4]>>16,Ie=vs(w[L+4]),Ne=35468*w[L+1]>>16;So(G,ee,0,Ae+Ie,w=vs(w[L+1]),Ne),So(G,ee,1,Ae+Ce,w,Ne),So(G,ee,2,Ae-Ce,w,Ne),So(G,ee,3,Ae-Ie,w,Ne)}function Cc(w,L,G,ee,Ae){Bl(w,L,G,ee),Ae&&Bl(w,L+16,G,ee+4)}function ae(w,L,G,ee){bo(w,L+0,G,ee,1),bo(w,L+32,G,ee+128,1)}function Oe(w,L,G,ee){var Ae;for(w=w[L+0]+4,Ae=0;4>Ae;++Ae)for(L=0;4>L;++L)mi(G,ee,L,Ae,w)}function At(w,L,G,ee){w[L+0]&&Ss(w,L+0,G,ee),w[L+16]&&Ss(w,L+16,G,ee+4),w[L+32]&&Ss(w,L+32,G,ee+128),w[L+48]&&Ss(w,L+48,G,ee+128+4)}function Ht(w,L,G,ee){var Ae,Ce=o(16);for(Ae=0;4>Ae;++Ae){var Ie=w[L+0+Ae]+w[L+12+Ae],Ne=w[L+4+Ae]+w[L+8+Ae],Me=w[L+4+Ae]-w[L+8+Ae],Pe=w[L+0+Ae]-w[L+12+Ae];Ce[0+Ae]=Ie+Ne,Ce[8+Ae]=Ie-Ne,Ce[4+Ae]=Pe+Me,Ce[12+Ae]=Pe-Me}for(Ae=0;4>Ae;++Ae)Ie=(w=Ce[0+4*Ae]+3)+Ce[3+4*Ae],Ne=Ce[1+4*Ae]+Ce[2+4*Ae],Me=Ce[1+4*Ae]-Ce[2+4*Ae],Pe=w-Ce[3+4*Ae],G[ee+0]=Ie+Ne>>3,G[ee+16]=Pe+Me>>3,G[ee+32]=Ie-Ne>>3,G[ee+48]=Pe-Me>>3,ee+=64}function er(w,L,G){var ee,Ae=L-32,Ce=so,Ie=255-w[Ae-1];for(ee=0;ee<G;++ee){var Ne,Me=Ce,Pe=Ie+w[L-1];for(Ne=0;Ne<G;++Ne)w[L+Ne]=Me[Pe+w[Ae+Ne]];L+=32}}function tr(w,L){er(w,L,4)}function _r(w,L){er(w,L,8)}function fn(w,L){er(w,L,16)}function pn(w,L){var G;for(G=0;16>G;++G)n(w,L+32*G,w,L-32,16)}function Nn(w,L){var G;for(G=16;0<G;--G)s(w,L,w[L-1],16),L+=32}function Mn(w,L,G){var ee;for(ee=0;16>ee;++ee)s(L,G+32*ee,w,16)}function Xr(w,L){var G,ee=16;for(G=0;16>G;++G)ee+=w[L-1+32*G]+w[L+G-32];Mn(ee>>5,w,L)}function Qn(w,L){var G,ee=8;for(G=0;16>G;++G)ee+=w[L-1+32*G];Mn(ee>>4,w,L)}function oi(w,L){var G,ee=8;for(G=0;16>G;++G)ee+=w[L+G-32];Mn(ee>>4,w,L)}function Pi(w,L){Mn(128,w,L)}function Sr(w,L,G){return w+2*L+G+2>>2}function ln(w,L){var G,ee=L-32;for(ee=new Uint8Array([Sr(w[ee-1],w[ee+0],w[ee+1]),Sr(w[ee+0],w[ee+1],w[ee+2]),Sr(w[ee+1],w[ee+2],w[ee+3]),Sr(w[ee+2],w[ee+3],w[ee+4])]),G=0;4>G;++G)n(w,L+32*G,ee,0,ee.length)}function Jn(w,L){var G=w[L-1],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1+96];Ct(w,L+0,16843009*Sr(w[L-1-32],G,ee)),Ct(w,L+32,16843009*Sr(G,ee,Ae)),Ct(w,L+64,16843009*Sr(ee,Ae,Ce)),Ct(w,L+96,16843009*Sr(Ae,Ce,Ce))}function Bi(w,L){var G,ee=4;for(G=0;4>G;++G)ee+=w[L+G-32]+w[L-1+32*G];for(ee>>=3,G=0;4>G;++G)s(w,L+32*G,ee,4)}function Ns(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1-32],Ie=w[L+0-32],Ne=w[L+1-32],Me=w[L+2-32],Pe=w[L+3-32];w[L+0+96]=Sr(ee,Ae,w[L-1+96]),w[L+1+96]=w[L+0+64]=Sr(G,ee,Ae),w[L+2+96]=w[L+1+64]=w[L+0+32]=Sr(Ce,G,ee),w[L+3+96]=w[L+2+64]=w[L+1+32]=w[L+0+0]=Sr(Ie,Ce,G),w[L+3+64]=w[L+2+32]=w[L+1+0]=Sr(Ne,Ie,Ce),w[L+3+32]=w[L+2+0]=Sr(Me,Ne,Ie),w[L+3+0]=Sr(Pe,Me,Ne)}function Ks(w,L){var G=w[L+1-32],ee=w[L+2-32],Ae=w[L+3-32],Ce=w[L+4-32],Ie=w[L+5-32],Ne=w[L+6-32],Me=w[L+7-32];w[L+0+0]=Sr(w[L+0-32],G,ee),w[L+1+0]=w[L+0+32]=Sr(G,ee,Ae),w[L+2+0]=w[L+1+32]=w[L+0+64]=Sr(ee,Ae,Ce),w[L+3+0]=w[L+2+32]=w[L+1+64]=w[L+0+96]=Sr(Ae,Ce,Ie),w[L+3+32]=w[L+2+64]=w[L+1+96]=Sr(Ce,Ie,Ne),w[L+3+64]=w[L+2+96]=Sr(Ie,Ne,Me),w[L+3+96]=Sr(Ne,Me,Me)}function Ro(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1-32],Ie=w[L+0-32],Ne=w[L+1-32],Me=w[L+2-32],Pe=w[L+3-32];w[L+0+0]=w[L+1+64]=Ce+Ie+1>>1,w[L+1+0]=w[L+2+64]=Ie+Ne+1>>1,w[L+2+0]=w[L+3+64]=Ne+Me+1>>1,w[L+3+0]=Me+Pe+1>>1,w[L+0+96]=Sr(Ae,ee,G),w[L+0+64]=Sr(ee,G,Ce),w[L+0+32]=w[L+1+96]=Sr(G,Ce,Ie),w[L+1+32]=w[L+2+96]=Sr(Ce,Ie,Ne),w[L+2+32]=w[L+3+96]=Sr(Ie,Ne,Me),w[L+3+32]=Sr(Ne,Me,Pe)}function yn(w,L){var G=w[L+0-32],ee=w[L+1-32],Ae=w[L+2-32],Ce=w[L+3-32],Ie=w[L+4-32],Ne=w[L+5-32],Me=w[L+6-32],Pe=w[L+7-32];w[L+0+0]=G+ee+1>>1,w[L+1+0]=w[L+0+64]=ee+Ae+1>>1,w[L+2+0]=w[L+1+64]=Ae+Ce+1>>1,w[L+3+0]=w[L+2+64]=Ce+Ie+1>>1,w[L+0+32]=Sr(G,ee,Ae),w[L+1+32]=w[L+0+96]=Sr(ee,Ae,Ce),w[L+2+32]=w[L+1+96]=Sr(Ae,Ce,Ie),w[L+3+32]=w[L+2+96]=Sr(Ce,Ie,Ne),w[L+3+64]=Sr(Ie,Ne,Me),w[L+3+96]=Sr(Ne,Me,Pe)}function Yn(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1+96];w[L+0+0]=G+ee+1>>1,w[L+2+0]=w[L+0+32]=ee+Ae+1>>1,w[L+2+32]=w[L+0+64]=Ae+Ce+1>>1,w[L+1+0]=Sr(G,ee,Ae),w[L+3+0]=w[L+1+32]=Sr(ee,Ae,Ce),w[L+3+32]=w[L+1+64]=Sr(Ae,Ce,Ce),w[L+3+64]=w[L+2+64]=w[L+0+96]=w[L+1+96]=w[L+2+96]=w[L+3+96]=Ce}function Li(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1+96],Ie=w[L-1-32],Ne=w[L+0-32],Me=w[L+1-32],Pe=w[L+2-32];w[L+0+0]=w[L+2+32]=G+Ie+1>>1,w[L+0+32]=w[L+2+64]=ee+G+1>>1,w[L+0+64]=w[L+2+96]=Ae+ee+1>>1,w[L+0+96]=Ce+Ae+1>>1,w[L+3+0]=Sr(Ne,Me,Pe),w[L+2+0]=Sr(Ie,Ne,Me),w[L+1+0]=w[L+3+32]=Sr(G,Ie,Ne),w[L+1+32]=w[L+3+64]=Sr(ee,G,Ie),w[L+1+64]=w[L+3+96]=Sr(Ae,ee,G),w[L+1+96]=Sr(Ce,Ae,ee)}function da(w,L){var G;for(G=0;8>G;++G)n(w,L+32*G,w,L-32,8)}function Ms(w,L){var G;for(G=0;8>G;++G)s(w,L,w[L-1],8),L+=32}function fi(w,L,G){var ee;for(ee=0;8>ee;++ee)s(L,G+32*ee,w,8)}function Po(w,L){var G,ee=8;for(G=0;8>G;++G)ee+=w[L+G-32]+w[L-1+32*G];fi(ee>>4,w,L)}function zl(w,L){var G,ee=4;for(G=0;8>G;++G)ee+=w[L+G-32];fi(ee>>3,w,L)}function oa(w,L){var G,ee=4;for(G=0;8>G;++G)ee+=w[L-1+32*G];fi(ee>>3,w,L)}function yo(w,L){fi(128,w,L)}function ps(w,L,G){var ee=w[L-G],Ae=w[L+0],Ce=3*(Ae-ee)+Mc[1020+w[L-2*G]-w[L+G]],Ie=lc[112+(Ce+4>>3)];w[L-G]=so[255+ee+lc[112+(Ce+3>>3)]],w[L+0]=so[255+Ae-Ie]}function $c(w,L,G,ee){var Ae=w[L+0],Ce=w[L+G];return zs[255+w[L-2*G]-w[L-G]]>ee||zs[255+Ce-Ae]>ee}function Ql(w,L,G,ee){return 4*zs[255+w[L-G]-w[L+0]]+zs[255+w[L-2*G]-w[L+G]]<=ee}function Hl(w,L,G,ee,Ae){var Ce=w[L-3*G],Ie=w[L-2*G],Ne=w[L-G],Me=w[L+0],Pe=w[L+G],lt=w[L+2*G],Lt=w[L+3*G];return 4*zs[255+Ne-Me]+zs[255+Ie-Pe]>ee?0:zs[255+w[L-4*G]-Ce]<=Ae&&zs[255+Ce-Ie]<=Ae&&zs[255+Ie-Ne]<=Ae&&zs[255+Lt-lt]<=Ae&&zs[255+lt-Pe]<=Ae&&zs[255+Pe-Me]<=Ae}function Ma(w,L,G,ee){var Ae=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,L+ee,G,Ae)&&ps(w,L+ee,G)}function qo(w,L,G,ee){var Ae=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,L+ee*G,1,Ae)&&ps(w,L+ee*G,1)}function Xs(w,L,G,ee){var Ae;for(Ae=3;0<Ae;--Ae)Ma(w,L+=4*G,G,ee)}function Bo(w,L,G,ee){var Ae;for(Ae=3;0<Ae;--Ae)qo(w,L+=4,G,ee)}function Ys(w,L,G,ee,Ae,Ce,Ie,Ne){for(Ce=2*Ce+1;0<Ae--;){if(Hl(w,L,G,Ce,Ie))if($c(w,L,G,Ne))ps(w,L,G);else{var Me=w,Pe=L,lt=G,Lt=Me[Pe-2*lt],Bt=Me[Pe-lt],xt=Me[Pe+0],Pt=Me[Pe+lt],Qt=Me[Pe+2*lt],ct=27*(cr=Mc[1020+3*(xt-Bt)+Mc[1020+Lt-Pt]])+63>>7,mt=18*cr+63>>7,cr=9*cr+63>>7;Me[Pe-3*lt]=so[255+Me[Pe-3*lt]+cr],Me[Pe-2*lt]=so[255+Lt+mt],Me[Pe-lt]=so[255+Bt+ct],Me[Pe+0]=so[255+xt-ct],Me[Pe+lt]=so[255+Pt-mt],Me[Pe+2*lt]=so[255+Qt-cr]}L+=ee}}function vo(w,L,G,ee,Ae,Ce,Ie,Ne){for(Ce=2*Ce+1;0<Ae--;){if(Hl(w,L,G,Ce,Ie))if($c(w,L,G,Ne))ps(w,L,G);else{var Me=w,Pe=L,lt=G,Lt=Me[Pe-lt],Bt=Me[Pe+0],xt=Me[Pe+lt],Pt=lc[112+((Qt=3*(Bt-Lt))+4>>3)],Qt=lc[112+(Qt+3>>3)],ct=Pt+1>>1;Me[Pe-2*lt]=so[255+Me[Pe-2*lt]+ct],Me[Pe-lt]=so[255+Lt+Qt],Me[Pe+0]=so[255+Bt-Pt],Me[Pe+lt]=so[255+xt-ct]}L+=ee}}function fa(w,L,G,ee,Ae,Ce){Ys(w,L,G,1,16,ee,Ae,Ce)}function xs(w,L,G,ee,Ae,Ce){Ys(w,L,1,G,16,ee,Ae,Ce)}function no(w,L,G,ee,Ae,Ce){var Ie;for(Ie=3;0<Ie;--Ie)vo(w,L+=4*G,G,1,16,ee,Ae,Ce)}function $o(w,L,G,ee,Ae,Ce){var Ie;for(Ie=3;0<Ie;--Ie)vo(w,L+=4,1,G,16,ee,Ae,Ce)}function Eo(w,L,G,ee,Ae,Ce,Ie,Ne){Ys(w,L,Ae,1,8,Ce,Ie,Ne),Ys(G,ee,Ae,1,8,Ce,Ie,Ne)}function ic(w,L,G,ee,Ae,Ce,Ie,Ne){Ys(w,L,1,Ae,8,Ce,Ie,Ne),Ys(G,ee,1,Ae,8,Ce,Ie,Ne)}function aa(w,L,G,ee,Ae,Ce,Ie,Ne){vo(w,L+4*Ae,Ae,1,8,Ce,Ie,Ne),vo(G,ee+4*Ae,Ae,1,8,Ce,Ie,Ne)}function rl(w,L,G,ee,Ae,Ce,Ie,Ne){vo(w,L+4,1,Ae,8,Ce,Ie,Ne),vo(G,ee+4,1,Ae,8,Ce,Ie,Ne)}function Uo(){this.ba=new xi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Va(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wo(){this.ua=0,this.Wa=new Re,this.vb=new Re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new Y}function yu(){this.xb=this.a=0,this.l=new sa,this.ca=new xi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wo,this.ab=0,this.gc=c(4,Vl),this.Oc=0}function pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xo(w,L,G,ee,Ae,Ce,Ie){for(w=w==null?0:w[L+0],L=0;L<Ie;++L)Ae[Ce+L]=w+G[ee+L]&255,w=Ae[Ce+L]}function Gl(w,L,G,ee,Ae,Ce,Ie){var Ne;if(w==null)xo(null,null,G,ee,Ae,Ce,Ie);else for(Ne=0;Ne<Ie;++Ne)Ae[Ce+Ne]=w[L+Ne]+G[ee+Ne]&255}function _o(w,L,G,ee,Ae,Ce,Ie){if(w==null)xo(null,null,G,ee,Ae,Ce,Ie);else{var Ne,Me=w[L+0],Pe=Me,lt=Me;for(Ne=0;Ne<Ie;++Ne)Pe=lt+(Me=w[L+Ne])-Pe,lt=G[ee+Ne]+(-256&Pe?0>Pe?0:255:Pe)&255,Pe=Me,Ae[Ce+Ne]=lt}}function ql(w,L,G,ee){var Ae=L.width,Ce=L.o;if(e(w!=null&&L!=null),0>G||0>=ee||G+ee>Ce)return null;if(!w.Cc){if(w.ga==null){var Ie;if(w.ga=new pa,(Ie=w.ga==null)||(Ie=L.width*L.o,e(w.Gb.length==0),w.Gb=o(Ie),w.Uc=0,w.Gb==null?Ie=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=w.ga;var Ne=w.Fa,Me=w.P,Pe=w.qc,lt=w.mb,Lt=w.nb,Bt=Me+1,xt=Pe-1,Pt=Ie.l;if(e(Ne!=null&&lt!=null&&L!=null),Ta[0]=null,Ta[1]=xo,Ta[2]=Gl,Ta[3]=_o,Ie.ca=lt,Ie.tb=Lt,Ie.c=L.width,Ie.i=L.height,e(0<Ie.c&&0<Ie.i),1>=Pe)L=0;else if(Ie.$a=Ne[Me+0]>>0&3,Ie.Z=Ne[Me+0]>>2&3,Ie.Lc=Ne[Me+0]>>4&3,Me=Ne[Me+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Me)L=0;else if(Pt.put=ir,Pt.ac=Hn,Pt.bc=We,Pt.ma=Ie,Pt.width=L.width,Pt.height=L.height,Pt.Da=L.Da,Pt.v=L.v,Pt.va=L.va,Pt.j=L.j,Pt.o=L.o,Ie.$a)e:{e(Ie.$a==1),L=_n();t:for(;;){if(L==null){L=0;break e}if(e(Ie!=null),Ie.mc=L,L.c=Ie.c,L.i=Ie.i,L.l=Ie.l,L.l.ma=Ie,L.l.width=Ie.c,L.l.height=Ie.i,L.a=0,xe(L.m,Ne,Bt,xt),!Dn(Ie.c,Ie.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&xr(L.s)?(Ie.ic=1,Ne=L.c*L.i,L.Ta=null,L.Ua=0,L.V=o(Ne),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(Ie.ic=0,L=qn(L,Ie.c)),!L))break t;L=1;break e}Ie.mc=null,L=0}else L=xt>=Ie.c*Ie.i;Ie=!L}if(Ie)return null;w.ga.Lc!=1?w.Ga=0:ee=Ce-G}e(w.ga!=null),e(G+ee<=Ce);e:{if(L=(Ne=w.ga).c,Ce=Ne.l.o,Ne.$a==0){if(Bt=w.rc,xt=w.Vc,Pt=w.Fa,Me=w.P+1+G*L,Pe=w.mb,lt=w.nb+G*L,e(Me<=w.P+w.qc),Ne.Z!=0)for(e(Ta[Ne.Z]!=null),Ie=0;Ie<ee;++Ie)Ta[Ne.Z](Bt,xt,Pt,Me,Pe,lt,L),Bt=Pe,xt=lt,lt+=L,Me+=L;else for(Ie=0;Ie<ee;++Ie)n(Pe,lt,Pt,Me,L),Bt=Pe,xt=lt,lt+=L,Me+=L;w.rc=Bt,w.Vc=xt}else{if(e(Ne.mc!=null),L=G+ee,e((Ie=Ne.mc)!=null),e(L<=Ie.i),Ie.C>=L)L=1;else if(Ne.ic||St(),Ne.ic){Ne=Ie.V,Bt=Ie.Ba,xt=Ie.c;var Qt=Ie.i,ct=(Pt=1,Me=Ie.$/xt,Pe=Ie.$%xt,lt=Ie.m,Lt=Ie.s,Ie.$),mt=xt*Qt,cr=xt*L,mr=Lt.wc,dr=ct<cr?Wt(Lt,Pe,Me):null;e(ct<=mt),e(L<=Qt),e(xr(Lt));t:for(;;){for(;!lt.h&&ct<cr;){if(Pe&mr||(dr=Wt(Lt,Pe,Me)),e(dr!=null),He(lt),256>(Qt=wt(dr.G[0],dr.H[0],lt)))Ne[Bt+ct]=Qt,++ct,++Pe>=xt&&(Pe=0,++Me<=L&&!(Me%16)&&Tr(Ie,Me));else{if(!(280>Qt)){Pt=0;break t}Qt=ht(Qt-256,lt);var Yr,Or=wt(dr.G[4],dr.H[4],lt);if(He(lt),!(ct>=(Or=It(xt,Or=ht(Or,lt)))&&mt-ct>=Qt)){Pt=0;break t}for(Yr=0;Yr<Qt;++Yr)Ne[Bt+ct+Yr]=Ne[Bt+ct+Yr-Or];for(ct+=Qt,Pe+=Qt;Pe>=xt;)Pe-=xt,++Me<=L&&!(Me%16)&&Tr(Ie,Me);ct<cr&&Pe&mr&&(dr=Wt(Lt,Pe,Me))}e(lt.h==fe(lt))}Tr(Ie,Me>L?L:Me);break t}!Pt||lt.h&&ct<mt?(Pt=0,Ie.a=lt.h?5:3):Ie.$=ct,L=Pt}else L=nn(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,L,$n);if(!L){ee=0;break e}}G+ee>=Ce&&(w.Cc=1),ee=1}if(!ee)return null;if(w.Cc&&((ee=w.ga)!=null&&(ee.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+G*Ae}function k(w,L,G,ee,Ae,Ce){for(;0<Ae--;){var Ie,Ne=w,Me=L+(G?1:0),Pe=w,lt=L+(G?0:3);for(Ie=0;Ie<ee;++Ie){var Lt=Pe[lt+4*Ie];Lt!=255&&(Lt*=32897,Ne[Me+4*Ie+0]=Ne[Me+4*Ie+0]*Lt>>23,Ne[Me+4*Ie+1]=Ne[Me+4*Ie+1]*Lt>>23,Ne[Me+4*Ie+2]=Ne[Me+4*Ie+2]*Lt>>23)}L+=Ce}}function pe(w,L,G,ee,Ae){for(;0<ee--;){var Ce;for(Ce=0;Ce<G;++Ce){var Ie=w[L+2*Ce+0],Ne=15&(Pe=w[L+2*Ce+1]),Me=4369*Ne,Pe=(240&Pe|Pe>>4)*Me>>16;w[L+2*Ce+0]=(240&Ie|Ie>>4)*Me>>16&240|(15&Ie|Ie<<4)*Me>>16>>4&15,w[L+2*Ce+1]=240&Pe|Ne}L+=Ae}}function Ke(w,L,G,ee,Ae,Ce,Ie,Ne){var Me,Pe,lt=255;for(Pe=0;Pe<Ae;++Pe){for(Me=0;Me<ee;++Me){var Lt=w[L+Me];Ce[Ie+4*Me]=Lt,lt&=Lt}L+=G,Ie+=Ne}return lt!=255}function ot(w,L,G,ee,Ae){var Ce;for(Ce=0;Ce<Ae;++Ce)G[ee+Ce]=w[L+Ce]>>8}function St(){eo=k,ws=pe,Yi=Ke,ai=ot}function $t(w,L,G){K[w]=function(ee,Ae,Ce,Ie,Ne,Me,Pe,lt,Lt,Bt,xt,Pt,Qt,ct,mt,cr,mr){var dr,Yr=mr-1>>1,Or=Ne[Me+0]|Pe[lt+0]<<16,bn=Lt[Bt+0]|xt[Pt+0]<<16;e(ee!=null);var zr=3*Or+bn+131074>>2;for(L(ee[Ae+0],255&zr,zr>>16,Qt,ct),Ce!=null&&(zr=3*bn+Or+131074>>2,L(Ce[Ie+0],255&zr,zr>>16,mt,cr)),dr=1;dr<=Yr;++dr){var ui=Ne[Me+dr]|Pe[lt+dr]<<16,pi=Lt[Bt+dr]|xt[Pt+dr]<<16,Vn=Or+ui+bn+pi+524296,ei=Vn+2*(ui+bn)>>3;zr=ei+Or>>1,Or=(Vn=Vn+2*(Or+pi)>>3)+ui>>1,L(ee[Ae+2*dr-1],255&zr,zr>>16,Qt,ct+(2*dr-1)*G),L(ee[Ae+2*dr-0],255&Or,Or>>16,Qt,ct+(2*dr-0)*G),Ce!=null&&(zr=Vn+bn>>1,Or=ei+pi>>1,L(Ce[Ie+2*dr-1],255&zr,zr>>16,mt,cr+(2*dr-1)*G),L(Ce[Ie+2*dr+0],255&Or,Or>>16,mt,cr+(2*dr+0)*G)),Or=ui,bn=pi}1&mr||(zr=3*Or+bn+131074>>2,L(ee[Ae+mr-1],255&zr,zr>>16,Qt,ct+(mr-1)*G),Ce!=null&&(zr=3*bn+Or+131074>>2,L(Ce[Ie+mr-1],255&zr,zr>>16,mt,cr+(mr-1)*G)))}}function gr(){co[cc]=nt,co[jc]=ke,co[vu]=ge,co[Sc]=rt,co[nu]=Kt,co[rh]=Qr,co[Zh]=Kn,co[nh]=ke,co[bh]=rt,co[xu]=Kt,co[Jh]=Qr}function $r(w){return w&~Pp?0>w?0:255:w>>Kf}function An(w,L){return $r((19077*w>>8)+(26149*L>>8)-14234)}function Tn(w,L,G){return $r((19077*w>>8)-(6419*L>>8)-(13320*G>>8)+8708)}function Wr(w,L){return $r((19077*w>>8)+(33050*L>>8)-17685)}function Dr(w,L,G,ee,Ae){ee[Ae+0]=An(w,G),ee[Ae+1]=Tn(w,L,G),ee[Ae+2]=Wr(w,L)}function Ci(w,L,G,ee,Ae){ee[Ae+0]=Wr(w,L),ee[Ae+1]=Tn(w,L,G),ee[Ae+2]=An(w,G)}function gn(w,L,G,ee,Ae){var Ce=Tn(w,L,G);L=Ce<<3&224|Wr(w,L)>>3,ee[Ae+0]=248&An(w,G)|Ce>>5,ee[Ae+1]=L}function Fi(w,L,G,ee,Ae){var Ce=240&Wr(w,L)|15;ee[Ae+0]=240&An(w,G)|Tn(w,L,G)>>4,ee[Ae+1]=Ce}function _s(w,L,G,ee,Ae){ee[Ae+0]=255,Dr(w,L,G,ee,Ae+1)}function vn(w,L,G,ee,Ae){Ci(w,L,G,ee,Ae),ee[Ae+3]=255}function ao(w,L,G,ee,Ae){Dr(w,L,G,ee,Ae),ee[Ae+3]=255}function Zs(w,L){return 0>w?0:w>L?L:w}function Yo(w,L,G){K[w]=function(ee,Ae,Ce,Ie,Ne,Me,Pe,lt,Lt){for(var Bt=lt+(-2&Lt)*G;lt!=Bt;)L(ee[Ae+0],Ce[Ie+0],Ne[Me+0],Pe,lt),L(ee[Ae+1],Ce[Ie+0],Ne[Me+0],Pe,lt+G),Ae+=2,++Ie,++Me,lt+=2*G;1&Lt&&L(ee[Ae+0],Ce[Ie+0],Ne[Me+0],Pe,lt)}}function nl(w,L,G){return G==0?w==0?L==0?6:5:L==0?4:0:G}function il(w,L,G,ee,Ae){switch(w>>>30){case 3:bo(L,G,ee,Ae,0);break;case 2:Xi(L,G,ee,Ae);break;case 1:Ss(L,G,ee,Ae)}}function io(w,L){var G,ee,Ae=L.M,Ce=L.Nb,Ie=w.oc,Ne=w.pc+40,Me=w.oc,Pe=w.pc+584,lt=w.oc,Lt=w.pc+600;for(G=0;16>G;++G)Ie[Ne+32*G-1]=129;for(G=0;8>G;++G)Me[Pe+32*G-1]=129,lt[Lt+32*G-1]=129;for(0<Ae?Ie[Ne-1-32]=Me[Pe-1-32]=lt[Lt-1-32]=129:(s(Ie,Ne-32-1,127,21),s(Me,Pe-32-1,127,9),s(lt,Lt-32-1,127,9)),ee=0;ee<w.za;++ee){var Bt=L.ya[L.aa+ee];if(0<ee){for(G=-1;16>G;++G)n(Ie,Ne+32*G-4,Ie,Ne+32*G+12,4);for(G=-1;8>G;++G)n(Me,Pe+32*G-4,Me,Pe+32*G+4,4),n(lt,Lt+32*G-4,lt,Lt+32*G+4,4)}var xt=w.Gd,Pt=w.Hd+ee,Qt=Bt.ad,ct=Bt.Hc;if(0<Ae&&(n(Ie,Ne-32,xt[Pt].y,0,16),n(Me,Pe-32,xt[Pt].f,0,8),n(lt,Lt-32,xt[Pt].ea,0,8)),Bt.Za){var mt=Ie,cr=Ne-32+16;for(0<Ae&&(ee>=w.za-1?s(mt,cr,xt[Pt].y[15],4):n(mt,cr,xt[Pt+1].y,0,4)),G=0;4>G;G++)mt[cr+128+G]=mt[cr+256+G]=mt[cr+384+G]=mt[cr+0+G];for(G=0;16>G;++G,ct<<=2)mt=Ie,cr=Ne+Mp[G],Mo[Bt.Ob[G]](mt,cr),il(ct,Qt,16*+G,mt,cr)}else if(mt=nl(ee,Ae,Bt.Ob[0]),vl[mt](Ie,Ne),ct!=0)for(G=0;16>G;++G,ct<<=2)il(ct,Qt,16*+G,Ie,Ne+Mp[G]);for(G=Bt.Gc,mt=nl(ee,Ae,Bt.Dd),$a[mt](Me,Pe),$a[mt](lt,Lt),ct=Qt,mt=Me,cr=Pe,255&(Bt=G>>0)&&(170&Bt?ks(ct,256,mt,cr):Us(ct,256,mt,cr)),Bt=lt,ct=Lt,255&(G>>=8)&&(170&G?ks(Qt,320,Bt,ct):Us(Qt,320,Bt,ct)),Ae<w.Ub-1&&(n(xt[Pt].y,0,Ie,Ne+480,16),n(xt[Pt].f,0,Me,Pe+224,8),n(xt[Pt].ea,0,lt,Lt+224,8)),G=8*Ce*w.B,xt=w.sa,Pt=w.ta+16*ee+16*Ce*w.R,Qt=w.qa,Bt=w.ra+8*ee+G,ct=w.Ha,mt=w.Ia+8*ee+G,G=0;16>G;++G)n(xt,Pt+G*w.R,Ie,Ne+32*G,16);for(G=0;8>G;++G)n(Qt,Bt+G*w.B,Me,Pe+32*G,8),n(ct,mt+G*w.B,lt,Lt+32*G,8)}}function Ga(w,L,G,ee,Ae,Ce,Ie,Ne,Me){var Pe=[0],lt=[0],Lt=0,Bt=Me!=null?Me.kd:0,xt=Me??new Va;if(w==null||12>G)return 7;xt.data=w,xt.w=L,xt.ha=G,L=[L],G=[G],xt.gb=[xt.gb];e:{var Pt=L,Qt=G,ct=xt.gb;if(e(w!=null),e(Qt!=null),e(ct!=null),ct[0]=0,12<=Qt[0]&&!r(w,Pt[0],"RIFF")){if(r(w,Pt[0]+8,"WEBP")){ct=3;break e}var mt=Zt(w,Pt[0]+4);if(12>mt||4294967286<mt){ct=3;break e}if(Bt&&mt>Qt[0]-8){ct=7;break e}ct[0]=mt,Pt[0]+=12,Qt[0]-=12}ct=0}if(ct!=0)return ct;for(mt=0<xt.gb[0],G=G[0];;){e:{var cr=w;Qt=L,ct=G;var mr=Pe,dr=lt,Yr=Pt=[0];if((zr=Lt=[Lt])[0]=0,8>ct[0])ct=7;else{if(!r(cr,Qt[0],"VP8X")){if(Zt(cr,Qt[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var Or=Zt(cr,Qt[0]+8),bn=1+Ft(cr,Qt[0]+12);if(2147483648<=bn*(cr=1+Ft(cr,Qt[0]+15))){ct=3;break e}Yr!=null&&(Yr[0]=Or),mr!=null&&(mr[0]=bn),dr!=null&&(dr[0]=cr),Qt[0]+=18,ct[0]-=18,zr[0]=1}ct=0}}if(Lt=Lt[0],Pt=Pt[0],ct!=0)return ct;if(Qt=!!(2&Pt),!mt&&Lt)return 3;if(Ce!=null&&(Ce[0]=!!(16&Pt)),Ie!=null&&(Ie[0]=Qt),Ne!=null&&(Ne[0]=0),Ie=Pe[0],Pt=lt[0],Lt&&Qt&&Me==null){ct=0;break}if(4>G){ct=7;break}if(mt&&Lt||!mt&&!Lt&&!r(w,L[0],"ALPH")){G=[G],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Or=w,ct=L,mt=G;var zr=xt.gb;mr=xt.na,dr=xt.P,Yr=xt.Sa,bn=22,e(Or!=null),e(mt!=null),cr=ct[0];var ui=mt[0];for(e(mr!=null),e(Yr!=null),mr[0]=null,dr[0]=null,Yr[0]=0;;){if(ct[0]=cr,mt[0]=ui,8>ui){ct=7;break e}var pi=Zt(Or,cr+4);if(4294967286<pi){ct=3;break e}var Vn=8+pi+1&-2;if(bn+=Vn,0<zr&&bn>zr){ct=3;break e}if(!r(Or,cr,"VP8 ")||!r(Or,cr,"VP8L")){ct=0;break e}if(ui[0]<Vn){ct=7;break e}r(Or,cr,"ALPH")||(mr[0]=Or,dr[0]=cr+8,Yr[0]=pi),cr+=Vn,ui-=Vn}}if(G=G[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],ct!=0)break}G=[G],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(zr=w,ct=L,mt=G,mr=xt.gb[0],dr=xt.Ja,Yr=xt.xa,Or=ct[0],cr=!r(zr,Or,"VP8 "),bn=!r(zr,Or,"VP8L"),e(zr!=null),e(mt!=null),e(dr!=null),e(Yr!=null),8>mt[0])ct=7;else{if(cr||bn){if(zr=Zt(zr,Or+4),12<=mr&&zr>mr-12){ct=3;break e}if(Bt&&zr>mt[0]-8){ct=7;break e}dr[0]=zr,ct[0]+=8,mt[0]-=8,Yr[0]=bn}else Yr[0]=5<=mt[0]&&zr[Or+0]==47&&!(zr[Or+4]>>5),dr[0]=mt[0];ct=0}if(G=G[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],L=L[0],ct!=0)break;if(4294967286<xt.Ja)return 3;if(Ne==null||Qt||(Ne[0]=xt.xa?2:1),Ie=[Ie],Pt=[Pt],xt.xa){if(5>G){ct=7;break}Ne=Ie,Bt=Pt,Qt=Ce,w==null||5>G?w=0:5<=G&&w[L+0]==47&&!(w[L+4]>>5)?(mt=[0],zr=[0],mr=[0],xe(dr=new ie,w,L,G),qe(dr,mt,zr,mr)?(Ne!=null&&(Ne[0]=mt[0]),Bt!=null&&(Bt[0]=zr[0]),Qt!=null&&(Qt[0]=mr[0]),w=1):w=0):w=0}else{if(10>G){ct=7;break}Ne=Pt,w==null||10>G||!Fc(w,L+3,G-3)?w=0:(Bt=w[L+0]|w[L+1]<<8|w[L+2]<<16,Qt=16383&(w[L+7]<<8|w[L+6]),w=16383&(w[L+9]<<8|w[L+8]),1&Bt||3<(Bt>>1&7)||!(Bt>>4&1)||Bt>>5>=xt.Ja||!Qt||!w?w=0:(Ie&&(Ie[0]=Qt),Ne&&(Ne[0]=w),w=1))}if(!w||(Ie=Ie[0],Pt=Pt[0],Lt&&(Pe[0]!=Ie||lt[0]!=Pt)))return 3;Me!=null&&(Me[0]=xt,Me.offset=L-Me.w,e(4294967286>L-Me.w),e(Me.offset==Me.ha-G));break}return ct==0||ct==7&&Lt&&Me==null?(Ce!=null&&(Ce[0]|=xt.na!=null&&0<xt.na.length),ee!=null&&(ee[0]=Ie),Ae!=null&&(Ae[0]=Pt),0):ct}function Ea(w,L,G){var ee=L.width,Ae=L.height,Ce=0,Ie=0,Ne=ee,Me=Ae;if(L.Da=w!=null&&0<w.Da,L.Da&&(Ne=w.cd,Me=w.bd,Ce=w.v,Ie=w.j,11>G||(Ce&=-2,Ie&=-2),0>Ce||0>Ie||0>=Ne||0>=Me||Ce+Ne>ee||Ie+Me>Ae))return 0;if(L.v=Ce,L.j=Ie,L.va=Ce+Ne,L.o=Ie+Me,L.U=Ne,L.T=Me,L.da=w!=null&&0<w.da,L.da){if(!hr(Ne,Me,G=[w.ib],Ce=[w.hb]))return 0;L.ib=G[0],L.hb=Ce[0]}return L.ob=w!=null&&w.ob,L.Kb=w==null||!w.Sd,L.da&&(L.ob=L.ib<3*ee/4&&L.hb<3*Ae/4,L.Kb=0),1}function Zo(w){if(w==null)return 2;if(11>w.S){var L=w.f.RGBA;L.fb+=(w.height-1)*L.A,L.A=-L.A}else L=w.f.kb,w=w.height,L.O+=(w-1)*L.fa,L.fa=-L.fa,L.N+=(w-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(w-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(w-1)*L.lb,L.lb=-L.lb);return 0}function ja(w,L,G,ee){if(ee==null||0>=w||0>=L)return 2;if(G!=null){if(G.Da){var Ae=G.cd,Ce=G.bd,Ie=-2&G.v,Ne=-2&G.j;if(0>Ie||0>Ne||0>=Ae||0>=Ce||Ie+Ae>w||Ne+Ce>L)return 2;w=Ae,L=Ce}if(G.da){if(!hr(w,L,Ae=[G.ib],Ce=[G.hb]))return 2;w=Ae[0],L=Ce[0]}}ee.width=w,ee.height=L;e:{var Me=ee.width,Pe=ee.height;if(w=ee.S,0>=Me||0>=Pe||!(w>=cc&&13>w))w=2;else{if(0>=ee.Rd&&ee.sd==null){Ie=Ce=Ae=L=0;var lt=(Ne=Me*af[w])*Pe;if(11>w||(Ce=(Pe+1)/2*(L=(Me+1)/2),w==12&&(Ie=(Ae=Me)*Pe)),(Pe=o(lt+2*Ce+Ie))==null){w=1;break e}ee.sd=Pe,11>w?((Me=ee.f.RGBA).eb=Pe,Me.fb=0,Me.A=Ne,Me.size=lt):((Me=ee.f.kb).y=Pe,Me.O=0,Me.fa=Ne,Me.Fd=lt,Me.f=Pe,Me.N=0+lt,Me.Ab=L,Me.Cd=Ce,Me.ea=Pe,Me.W=0+lt+Ce,Me.Db=L,Me.Ed=Ce,w==12&&(Me.F=Pe,Me.J=0+lt+2*Ce),Me.Tc=Ie,Me.lb=Ae)}if(L=1,Ae=ee.S,Ce=ee.width,Ie=ee.height,Ae>=cc&&13>Ae)if(11>Ae)w=ee.f.RGBA,L&=(Ne=Math.abs(w.A))*(Ie-1)+Ce<=w.size,L&=Ne>=Ce*af[Ae],L&=w.eb!=null;else{w=ee.f.kb,Ne=(Ce+1)/2,lt=(Ie+1)/2,Me=Math.abs(w.fa),Pe=Math.abs(w.Ab);var Lt=Math.abs(w.Db),Bt=Math.abs(w.lb),xt=Bt*(Ie-1)+Ce;L&=Me*(Ie-1)+Ce<=w.Fd,L&=Pe*(lt-1)+Ne<=w.Cd,L=(L&=Lt*(lt-1)+Ne<=w.Ed)&Me>=Ce&Pe>=Ne&Lt>=Ne,L&=w.y!=null,L&=w.f!=null,L&=w.ea!=null,Ae==12&&(L&=Bt>=Ce,L&=xt<=w.Tc,L&=w.F!=null)}else L=0;w=L?0:2}}return w!=0||G!=null&&G.fd&&(w=Zo(ee)),w}var $i=64,cs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],la=24,Jr=32,sc=8,bs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Yt("Predictor0","PredictorAdd0"),K.Predictor0=function(){return 4278190080},K.Predictor1=function(w){return w},K.Predictor2=function(w,L,G){return L[G+0]},K.Predictor3=function(w,L,G){return L[G+1]},K.Predictor4=function(w,L,G){return L[G-1]},K.Predictor5=function(w,L,G){return nr(nr(w,L[G+1]),L[G+0])},K.Predictor6=function(w,L,G){return nr(w,L[G-1])},K.Predictor7=function(w,L,G){return nr(w,L[G+0])},K.Predictor8=function(w,L,G){return nr(L[G-1],L[G+0])},K.Predictor9=function(w,L,G){return nr(L[G+0],L[G+1])},K.Predictor10=function(w,L,G){return nr(nr(w,L[G-1]),nr(L[G+0],L[G+1]))},K.Predictor11=function(w,L,G){var ee=L[G+0];return 0>=Ir(ee>>24&255,w>>24&255,(L=L[G-1])>>24&255)+Ir(ee>>16&255,w>>16&255,L>>16&255)+Ir(ee>>8&255,w>>8&255,L>>8&255)+Ir(255&ee,255&w,255&L)?ee:w},K.Predictor12=function(w,L,G){var ee=L[G+0];return(Fr((w>>24&255)+(ee>>24&255)-((L=L[G-1])>>24&255))<<24|Fr((w>>16&255)+(ee>>16&255)-(L>>16&255))<<16|Fr((w>>8&255)+(ee>>8&255)-(L>>8&255))<<8|Fr((255&w)+(255&ee)-(255&L)))>>>0},K.Predictor13=function(w,L,G){var ee=L[G-1];return(Gr((w=nr(w,L[G+0]))>>24&255,ee>>24&255)<<24|Gr(w>>16&255,ee>>16&255)<<16|Gr(w>>8&255,ee>>8&255)<<8|Gr(w>>0&255,ee>>0&255))>>>0};var oc=K.PredictorAdd0;K.PredictorAdd1=cn,Yt("Predictor2","PredictorAdd2"),Yt("Predictor3","PredictorAdd3"),Yt("Predictor4","PredictorAdd4"),Yt("Predictor5","PredictorAdd5"),Yt("Predictor6","PredictorAdd6"),Yt("Predictor7","PredictorAdd7"),Yt("Predictor8","PredictorAdd8"),Yt("Predictor9","PredictorAdd9"),Yt("Predictor10","PredictorAdd10"),Yt("Predictor11","PredictorAdd11"),Yt("Predictor12","PredictorAdd12"),Yt("Predictor13","PredictorAdd13");var yl=K.PredictorAdd2;lr("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),lr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var $l,js=K.ColorIndexInverseTransform,Jo=K.MapARGB,Aa=K.VP8LColorIndexInverseTransformAlpha,Pc=K.MapAlpha,yr=K.VP8LPredictorsAdd=[];yr.length=16,(K.VP8LPredictors=[]).length=16,(K.VP8LPredictorsAdd_C=[]).length=16,(K.VP8LPredictors_C=[]).length=16;var jr,xn,jn,ts,bi,As,us,bo,Xi,ks,Ss,Us,Js,ea,ma,ta,ra,Gs,ga,hs,ss,In,gi,lo,eo,ws,Yi,ai,qs=o(511),sl=o(2041),ac=o(225),ol=o(767),qa=0,Mc=sl,lc=ac,so=ol,zs=qs,cc=0,jc=1,vu=2,Sc=3,nu=4,rh=5,Zh=6,nh=7,bh=8,xu=9,Jh=10,kc=[2,3,7],wh=[3,3,11],vd=[280,256,256,256,40],Wl=[0,1,1,1,0],nf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_d=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bd=8,ih=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],_u=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Dc=null,Kl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ch=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Np=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$f=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vl=[],Mo=[],$a=[],Wf=1,Sh=2,Ta=[],co=[];$t("UpsampleRgbLinePair",Dr,3),$t("UpsampleBgrLinePair",Ci,3),$t("UpsampleRgbaLinePair",ao,4),$t("UpsampleBgraLinePair",vn,4),$t("UpsampleArgbLinePair",_s,4),$t("UpsampleRgba4444LinePair",Fi,2),$t("UpsampleRgb565LinePair",gn,2);var nt=K.UpsampleRgbLinePair,ge=K.UpsampleBgrLinePair,ke=K.UpsampleRgbaLinePair,rt=K.UpsampleBgraLinePair,Kt=K.UpsampleArgbLinePair,Qr=K.UpsampleRgba4444LinePair,Kn=K.UpsampleRgb565LinePair,Ei=16,ki=1<<Ei-1,Qs=-227,Oc=482,Kf=6,Pp=(256<<Kf)-1,wd=0,_A=o(256),bA=o(256),sf=o(256),ag=o(256),wA=o(Oc-Qs),CA=o(Oc-Qs);Yo("YuvToRgbRow",Dr,3),Yo("YuvToBgrRow",Ci,3),Yo("YuvToRgbaRow",ao,4),Yo("YuvToBgraRow",vn,4),Yo("YuvToArgbRow",_s,4),Yo("YuvToRgba4444Row",Fi,2),Yo("YuvToRgb565Row",gn,2);var Mp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bu=[0,2,8],Xf=[8,7,6,4,4,2,2,2,1,1,1,1],of=1;this.WebPDecodeRGBA=function(w,L,G,ee,Ae){var Ce=jc,Ie=new Uo,Ne=new xi;Ie.ba=Ne,Ne.S=Ce,Ne.width=[Ne.width],Ne.height=[Ne.height];var Me=Ne.width,Pe=Ne.height,lt=new Bn;if(lt==null||w==null)var Lt=2;else e(lt!=null),Lt=Ga(w,L,G,lt.width,lt.height,lt.Pd,lt.Qd,lt.format,null);if(Lt!=0?Me=0:(Me!=null&&(Me[0]=lt.width[0]),Pe!=null&&(Pe[0]=lt.height[0]),Me=1),Me){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ee!=null&&(ee[0]=Ne.width),Ae!=null&&(Ae[0]=Ne.height);e:{if(ee=new sa,(Ae=new Va).data=w,Ae.w=L,Ae.ha=G,Ae.kd=1,L=[0],e(Ae!=null),((w=Ga(Ae.data,Ae.w,Ae.ha,null,null,null,L,null,Ae))==0||w==7)&&L[0]&&(w=4),(L=w)==0){if(e(Ie!=null),ee.data=Ae.data,ee.w=Ae.w+Ae.offset,ee.ha=Ae.ha-Ae.offset,ee.put=ir,ee.ac=Hn,ee.bc=We,ee.ma=Ie,Ae.xa){if((w=_n())==null){Ie=1;break e}if(function(Bt,xt){var Pt=[0],Qt=[0],ct=[0];t:for(;;){if(Bt==null)return 0;if(xt==null)return Bt.a=2,0;if(Bt.l=xt,Bt.a=0,xe(Bt.m,xt.data,xt.w,xt.ha),!qe(Bt.m,Pt,Qt,ct)){Bt.a=3;break t}if(Bt.xb=Sh,xt.width=Pt[0],xt.height=Qt[0],!Dn(Pt[0],Qt[0],1,Bt,null))break t;return 1}return e(Bt.a!=0),0}(w,ee)){if(ee=(L=ja(ee.width,ee.height,Ie.Oa,Ie.ba))==0){t:{ee=w;r:for(;;){if(ee==null){ee=0;break t}if(e(ee.s.yc!=null),e(ee.s.Ya!=null),e(0<ee.s.Wb),e((G=ee.l)!=null),e((Ae=G.ma)!=null),ee.xb!=0){if(ee.ca=Ae.ba,ee.tb=Ae.tb,e(ee.ca!=null),!Ea(Ae.Oa,G,Sc)){ee.a=2;break r}if(!qn(ee,G.width)||G.da)break r;if((G.da||Gn(ee.ca.S))&&St(),11>ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ee.ca.f.kb.F!=null&&St()),ee.Pb&&0<ee.s.ua&&ee.s.vb.X==null&&!fr(ee.s.vb,ee.s.Wa.Xa)){ee.a=1;break r}ee.xb=0}if(!nn(ee,ee.V,ee.Ba,ee.c,ee.i,G.o,pr))break r;Ae.Dc=ee.Ma,ee=1;break t}e(ee.a!=0),ee=0}ee=!ee}ee&&(L=w.a)}else L=w.a}else{if((w=new Ha)==null){Ie=1;break e}if(w.Fa=Ae.na,w.P=Ae.P,w.qc=Ae.Sa,nc(w,ee)){if((L=ja(ee.width,ee.height,Ie.Oa,Ie.ba))==0){if(w.Aa=0,G=Ie.Oa,e((Ae=w)!=null),G!=null){if(0<(Me=0>(Me=G.Md)?0:100<Me?255:255*Me/100)){for(Pe=lt=0;4>Pe;++Pe)12>(Lt=Ae.pb[Pe]).lc&&(Lt.ia=Me*Xf[0>Lt.lc?0:Lt.lc]>>3),lt|=Lt.ia;lt&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=G.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}Pa(w,ee)||(L=w.a)}}else L=w.a}L==0&&Ie.Oa!=null&&Ie.Oa.fd&&(L=Zo(Ie.ba))}Ie=L}Ce=Ie!=0?null:11>Ce?Ne.f.RGBA.eb:Ne.f.kb.y}else Ce=null;return Ce};var af=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(K,ce){for(var me="",Z=0;Z<4;Z++)me+=String.fromCharCode(K[ce++]);return me}function g(K,ce){return(K[ce+0]<<0|K[ce+1]<<8|K[ce+2]<<16)>>>0}function C(K,ce){return(K[ce+0]<<0|K[ce+1]<<8|K[ce+2]<<16|K[ce+3]<<24)>>>0}new i;var B=[0],S=[0],P=[],j=new i,R=t,N=function(K,ce){var me={},Z=0,Y=!1,Le=0,_e=0;if(me.frames=[],!function(le,fe,be,He){for(var Je=0;Je<He;Je++)if(le[fe+Je]!=be.charCodeAt(Je))return!0;return!1}(K,ce,"RIFF",4)){for(C(K,ce+=4),ce+=8;ce<K.length;){var Qe=A(K,ce),De=C(K,ce+=4);ce+=4;var Be=De+(1&De);switch(Qe){case"VP8 ":case"VP8L":me.frames[Z]===void 0&&(me.frames[Z]={}),(Fe=me.frames[Z]).src_off=Y?_e:ce-8,Fe.src_size=Le+De+8,Z++,Y&&(Y=!1,Le=0,_e=0);break;case"VP8X":(Fe=me.header={}).feature_flags=K[ce];var xe=ce+4;Fe.canvas_width=1+g(K,xe),xe+=3,Fe.canvas_height=1+g(K,xe),xe+=3;break;case"ALPH":Y=!0,Le=Be+8,_e=ce-8;break;case"ANIM":(Fe=me.header).bgcolor=C(K,ce),xe=ce+4,Fe.loop_count=(it=K)[(ie=xe)+0]<<0|it[ie+1]<<8,xe+=2;break;case"ANMF":var ze,Fe;(Fe=me.frames[Z]={}).offset_x=2*g(K,ce),ce+=3,Fe.offset_y=2*g(K,ce),ce+=3,Fe.width=1+g(K,ce),ce+=3,Fe.height=1+g(K,ce),ce+=3,Fe.duration=g(K,ce),ce+=3,ze=K[ce++],Fe.dispose=1&ze,Fe.blend=ze>>1&1}Qe!="ANMF"&&(ce+=Be)}var it,ie;return me}}(R,0);N.response=R,N.rgbaoutput=!0,N.dataurl=!1;var U=N.header?N.header:null,$=N.frames?N.frames:null;if(U){U.loop_counter=U.loop_count,B=[U.canvas_height],S=[U.canvas_width];for(var J=0;J<$.length&&$[J].blend!=0;J++);}var te=$[0],ue=j.WebPDecodeRGBA(R,te.src_off,te.src_size,S,B);te.rgba=ue,te.imgwidth=S[0],te.imgheight=B[0];for(var oe=0;oe<S[0]*B[0]*4;oe++)P[oe]=ue[oe];return this.width=S,this.height=B,this.data=P,this}(function(t){var e=function(){return typeof tI=="function"},r=function(B,S,P,j){var R=4,N=c;switch(j){case t.image_compression.FAST:R=1,N=o;break;case t.image_compression.MEDIUM:R=6,N=u;break;case t.image_compression.SLOW:R=9,N=i}B=n(B,S,P,N);var U=tI(B,{level:R});return t.__addimage__.arrayBufferToBinaryString(U)},n=function(B,S,P,j){for(var R,N,U,$=B.length/S,J=new Uint8Array(B.length+$),te=g(),ue=0;ue<$;ue+=1){if(U=ue*S,R=B.subarray(U,U+S),j)J.set(j(R,P,N),U+ue);else{for(var oe,K=te.length,ce=[];oe<K;oe+=1)ce[oe]=te[oe](R,P,N);var me=C(ce.concat());J.set(ce[me],U+ue)}N=R}return J},s=function(B){var S=Array.apply([],B);return S.unshift(0),S},o=function(B,S){var P,j=[],R=B.length;j[0]=1;for(var N=0;N<R;N+=1)P=B[N-S]||0,j[N+1]=B[N]-P+256&255;return j},c=function(B,S,P){var j,R=[],N=B.length;R[0]=2;for(var U=0;U<N;U+=1)j=P&&P[U]||0,R[U+1]=B[U]-j+256&255;return R},u=function(B,S,P){var j,R,N=[],U=B.length;N[0]=3;for(var $=0;$<U;$+=1)j=B[$-S]||0,R=P&&P[$]||0,N[$+1]=B[$]+256-(j+R>>>1)&255;return N},i=function(B,S,P){var j,R,N,U,$=[],J=B.length;$[0]=4;for(var te=0;te<J;te+=1)j=B[te-S]||0,R=P&&P[te]||0,N=P&&P[te-S]||0,U=A(j,R,N),$[te+1]=B[te]-U+256&255;return $},A=function(B,S,P){if(B===S&&S===P)return B;var j=Math.abs(S-P),R=Math.abs(B-P),N=Math.abs(B+S-P-P);return j<=R&&j<=N?B:R<=N?S:P},g=function(){return[s,o,c,u,i]},C=function(B){var S=B.map(function(P){return P.reduce(function(j,R){return j+Math.abs(R)},0)});return S.indexOf(Math.min.apply(null,S))};t.processPNG=function(B,S,P,j){var R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe=this.decode.FLATE_DECODE,De="";if(this.__addimage__.isArrayBuffer(B)&&(B=new Uint8Array(B)),this.__addimage__.isArrayBufferView(B)){if(B=(U=new txe(B)).imgData,N=U.bits,R=U.colorSpace,J=U.colors,[4,6].indexOf(U.colorType)!==-1){if(U.bits===8){K=(oe=U.pixelBitlength==32?new Uint32Array(U.decodePixels().buffer):U.pixelBitlength==16?new Uint16Array(U.decodePixels().buffer):new Uint8Array(U.decodePixels().buffer)).length,me=new Uint8Array(K*U.colors),ce=new Uint8Array(K);var Be,xe=U.pixelBitlength-U.bits;for(Le=0,_e=0;Le<K;Le++){for(Y=oe[Le],Be=0;Be<xe;)me[_e++]=Y>>>Be&255,Be+=U.bits;ce[Le]=Y>>>Be&255}}if(U.bits===16){K=(oe=new Uint32Array(U.decodePixels().buffer)).length,me=new Uint8Array(K*(32/U.pixelBitlength)*U.colors),ce=new Uint8Array(K*(32/U.pixelBitlength)),Z=U.colors>1,Le=0,_e=0;for(var ze=0;Le<K;)Y=oe[Le++],me[_e++]=Y>>>0&255,Z&&(me[_e++]=Y>>>16&255,Y=oe[Le++],me[_e++]=Y>>>0&255),ce[ze++]=Y>>>16&255;N=8}j!==t.image_compression.NONE&&e()?(B=r(me,U.width*U.colors,U.colors,j),ue=r(ce,U.width,1,j)):(B=me,ue=ce,Qe=void 0)}if(U.colorType===3&&(R=this.color_spaces.INDEXED,te=U.palette,U.transparency.indexed)){var Fe=U.transparency.indexed,it=0;for(Le=0,K=Fe.length;Le<K;++Le)it+=Fe[Le];if((it/=255)===K-1&&Fe.indexOf(0)!==-1)$=[Fe.indexOf(0)];else if(it!==K){for(oe=U.decodePixels(),ce=new Uint8Array(oe.length),Le=0,K=oe.length;Le<K;Le++)ce[Le]=Fe[oe[Le]];ue=r(ce,U.width,1)}}var ie=function(le){var fe;switch(le){case t.image_compression.FAST:fe=11;break;case t.image_compression.MEDIUM:fe=13;break;case t.image_compression.SLOW:fe=14;break;default:fe=12}return fe}(j);return Qe===this.decode.FLATE_DECODE&&(De="/Predictor "+ie+" "),De+="/Colors "+J+" /BitsPerComponent "+N+" /Columns "+U.width,(this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),(ue&&this.__addimage__.isArrayBuffer(ue)||this.__addimage__.isArrayBufferView(ue))&&(ue=this.__addimage__.arrayBufferToBinaryString(ue)),{alias:P,data:B,index:S,filter:Qe,decodeParameters:De,transparency:$,palette:te,sMask:ue,predictor:ie,width:U.width,height:U.height,bitsPerComponent:N,colorSpace:R}}}})(rs.API),function(t){t.processGIF89A=function(e,r,n,s){var o=new rxe(e),c=o.width,u=o.height,i=[];o.decodeAndBlitFrameRGBA(0,i);var A={data:i,width:c,height:u},g=new b3(100).encode(A,100);return t.processJPEG.call(this,g,r,n,s)},t.processGIF87A=t.processGIF89A}(rs.API),bf.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bf.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ra.log("bit decode error:"+r)}},bf.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var i=this.palette[o>>7-u&1];this.data[c+4*u]=i.blue,this.data[c+4*u+1]=i.green,this.data[c+4*u+2]=i.red,this.data[c+4*u+3]=255}r!==0&&(this.pos+=4-r)}},bf.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*s*4,u=o>>4,i=15&o,A=this.palette[u];if(this.data[c]=A.blue,this.data[c+1]=A.green,this.data[c+2]=A.red,this.data[c+3]=255,2*s+1>=this.width)break;A=this.palette[i],this.data[c+4]=A.blue,this.data[c+4+1]=A.green,this.data[c+4+2]=A.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},bf.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(s<this.palette.length){var c=this.palette[s];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},bf.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,i=(o>>10&e)/e*255|0,A=o>>15?255:0,g=n*this.width*4+4*s;this.data[g]=i,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=A}this.pos+=t}},bf.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,i=(c>>5&r)/r*255|0,A=(c>>11)/e*255|0,g=s*this.width*4+4*o;this.data[g]=A,this.data[g+1]=i,this.data[g+2]=u,this.data[g+3]=255}this.pos+=t}},bf.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=o,this.data[c+1]=s,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},bf.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*r;this.data[u]=o,this.data[u+1]=s,this.data[u+2]=n,this.data[u+3]=c}},bf.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var o=new bf(e,!1),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},A=new b3(100).encode(i,100);return t.processJPEG.call(this,A,r,n,s)}}(rs.API),tU.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var o=new tU(e),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},A=new b3(100).encode(i,100);return t.processJPEG.call(this,A,r,n,s)}}(rs.API),rs.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,o=new Uint8Array(s/4*3),c=new Uint8Array(s/4),u=0,i=0,A=0;A<s;A+=4){var g=n[A],C=n[A+1],B=n[A+2],S=n[A+3];o[u++]=g,o[u++]=C,o[u++]=B,c[i++]=S}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:P,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},rs.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},iy=rs.API,u2=iy.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:s.metadata.Unicode.widths,i=u.fof?u.fof:1,A=e.kerning?e.kerning:s.metadata.Unicode.kerning,g=A.fof?A.fof:1,C=e.doKerning!==!1,B=0,S=t.length,P=0,j=u[0]||i,R=[];for(r=0;r<S;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?R.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+c*(1e3/o)||0)/1e3):(B=C&&ba(A[n])==="object"&&!isNaN(parseInt(A[n][P],10))?A[n][P]/g:0,R.push((u[n]||j)/i+B)),P=n;return R},Y7=iy.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return iy.processArabic&&(t=iy.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:u2.apply(this,arguments).reduce(function(o,c){return o+c},0)},Z7=function(t,e,r,n){for(var s=[],o=0,c=t.length,u=0;o!==c&&u+e[o]<r;)u+=e[o],o++;s.push(t.slice(0,o));var i=o;for(u=0;o!==c;)u+e[o]>n&&(s.push(t.slice(i,o)),u=0,i=o),u+=e[o],o++;return i!==o&&s.push(t.slice(i,o)),s},J7=function(t,e,r){r||(r={});var n,s,o,c,u,i,A,g=[],C=[g],B=r.textIndent||0,S=0,P=0,j=t.split(" "),R=u2.apply(this,[" ",r])[0];if(i=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var N=Array(i).join(" "),U=[];j.map(function(J){(J=J.split(/\s*\n/)).length>1?U=U.concat(J.map(function(te,ue){return(ue&&te.length?`
`:"")+te})):U.push(J[0])}),j=U,i=Y7.apply(this,[N,r])}for(o=0,c=j.length;o<c;o++){var $=0;if(n=j[o],i&&n[0]==`
`&&(n=n.substr(1),$=1),B+S+(P=(s=u2.apply(this,[n,r])).reduce(function(J,te){return J+te},0))>e||$){if(P>e){for(u=Z7.apply(this,[n,s,e-(B+S),e]),g.push(u.shift()),g=[u.pop()];u.length;)C.push([u.shift()]);P=s.slice(n.length-(g[0]?g[0].length:0)).reduce(function(J,te){return J+te},0)}else g=[n];C.push(g),B=P+i,S=R}else g.push(n),B+=S+P,S=R}return A=i?function(J,te){return(te?N:"")+J.join(" ")}:function(J){return J.join(" ")},C.map(A)},iy.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var C=this.internal.getFont(g.fontName,g.fontStyle);return C.metadata.Unicode?{widths:C.metadata.Unicode.widths||{0:1},kerning:C.metadata.Unicode.kerning||{}}:{font:C.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/s;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,o.lineIndent=r.lineIndent;var u,i,A=[];for(u=0,i=n.length;u<i;u++)A=A.concat(J7.apply(this,[n[u],c,o]));return A},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var o=function(C){return"0x"+parseInt(C,10).toString(16)},c=t.__fontmetrics__.compress=function(C){var B,S,P,j,R=["{"];for(var N in C){if(B=C[N],isNaN(parseInt(N,10))?S="'"+N+"'":(N=parseInt(N,10),S=(S=o(N).slice(2)).slice(0,-1)+n[S.slice(-1)]),typeof B=="number")B<0?(P=o(B).slice(3),j="-"):(P=o(B).slice(2),j=""),P=j+P.slice(0,-1)+n[P.slice(-1)];else{if(ba(B)!=="object")throw new Error("Don't know what to do with value type "+ba(B)+".");P=c(B)}R.push(S+P)}return R.push("}"),R.join("")},u=t.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var B,S,P,j,R={},N=1,U=R,$=[],J="",te="",ue=C.length-1,oe=1;oe<ue;oe+=1)(j=C[oe])=="'"?B?(P=B.join(""),B=void 0):B=[]:B?B.push(j):j=="{"?($.push([U,P]),U={},P=void 0):j=="}"?((S=$.pop())[0][S[1]]=U,P=void 0,U=S[0]):j=="-"?N=-1:P===void 0?r.hasOwnProperty(j)?(J+=r[j],P=parseInt(J,16)*N,N=1,J=""):J+=j:r.hasOwnProperty(j)?(te+=r[j],U[P]=parseInt(te,16)*N,N=1,P=void 0,te=""):te+=j;return R},i={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:i,"Courier-Bold":i,"Courier-BoldOblique":i,"Courier-Oblique":i,Helvetica:i,"Helvetica-Bold":i,"Helvetica-BoldOblique":i,"Helvetica-Oblique":i,"Times-Roman":i,"Times-Bold":i,"Times-BoldItalic":i,"Times-Italic":i}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(C){var B=C.font,S=g.Unicode[B.postScriptName];S&&(B.metadata.Unicode={},B.metadata.Unicode.widths=S.widths,B.metadata.Unicode.kerning=S.kerning);var P=A.Unicode[B.postScriptName];P&&(B.metadata.Unicode.encoding=P,B.encoding=P.codePages[0])}])}(rs.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),o=0;o<n;o++)s[o]=r.charCodeAt(o);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,o=r.instance;if(!s.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=o.existsFileInVFS(s.postScriptName)===!1?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(zx(u)),c.metadata=t.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(s,n)}}])}(rs),function(t){function e(){return(as.canvg?Promise.resolve(as.canvg):y1(()=>import("./index.es-EclDAuke.js"),__vite__mapDeps([0,1]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}rs.API.addSvgAsImage=function(r,n,s,o,c,u,i,A){if(isNaN(n)||isNaN(s))throw Ra.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(c))throw Ra.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=o,g.height=c;var C=g.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,g.width,g.height);var B={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},S=this;return e().then(function(P){return P.fromString(C,r,B)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(B)}).then(function(){S.addImage(g.toDataURL("image/jpeg",1),n,s,o,c,i,A)})}}(),rs.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},rs.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),i=[],A=0,g=0,C=0;function B(P,j){var R,N=!1;for(R=0;R<P.length;R+=1)P[R]===j&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var S=u.length;for(C=0;C<S;C+=1)r[u[C]].value=r[u[C]].defaultValue,r[u[C]].explicitSet=!1}if(ba(t)==="object"){for(s in t)if(o=t[s],B(u,s)&&o!==void 0){if(r[s].type==="boolean"&&typeof o=="boolean")r[s].value=o;else if(r[s].type==="name"&&B(r[s].valueSet,o))r[s].value=o;else if(r[s].type==="integer"&&Number.isInteger(o))r[s].value=o;else if(r[s].type==="array"){for(A=0;A<o.length;A+=1)if(n=!0,o[A].length===1&&typeof o[A][0]=="number")i.push(String(o[A]-1));else if(o[A].length>1){for(g=0;g<o[A].length;g+=1)typeof o[A][g]!="number"&&(n=!1);n===!0&&i.push([o[A][0]-1,o[A][1]-1].join(" "))}r[s].value="["+i.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,j=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?j.push("/"+P+" /"+r[P].value):j.push("/"+P+" "+r[P].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),A=o.length+c.length+u.length+s.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>"),this.internal.write("stream"),this.internal.write(s+o+c+u+i),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(rs.API),function(t){var e=t.API,r=e.pdfEscape16=function(o,c){for(var u,i=c.metadata.Unicode.widths,A=["","0","00","000","0000"],g=[""],C=0,B=o.length;C<B;++C){if(u=c.metadata.characterToGlyph(o.charCodeAt(C)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=o.charCodeAt(C),i.indexOf(u)==-1&&(i.push(u),i.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(A[4-u.length],u)}return g.join("")},n=function(o){var c,u,i,A,g,C,B;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,i=[],C=0,B=(u=Object.keys(o).sort(function(S,P){return S-P})).length;C<B;C++)c=u[C],i.length>=100&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar`,i=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(A=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),i.push("<"+c+"><"+A+">"));return i.length&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,A=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var C=u.metadata.Unicode.widths,B=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),S="",P=0;P<B.length;P++)S+=String.fromCharCode(B[P]);var j=A();g({data:S,addLength1:!0,objectId:j}),i("endobj");var R=A();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:R}),i("endobj");var N=A();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+py(u.fontName)),i("/FontFile2 "+j+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/Flags "+u.metadata.flags),i("/StemV "+u.metadata.stemV),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i(">>"),i("endobj");var U=A();i("<<"),i("/Type /Font"),i("/BaseFont /"+py(u.fontName)),i("/FontDescriptor "+N+" 0 R"),i("/W "+t.API.PDFObject.convert(C)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+u.encoding+")"),i(">>"),i(">>"),i("endobj"),u.objectNumber=A(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+R+" 0 R"),i("/BaseFont /"+py(u.fontName)),i("/Encoding /"+u.encoding),i("/DescendantFonts ["+U+" 0 R]"),i(">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,A=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var C=u.metadata.rawData,B="",S=0;S<C.length;S++)B+=String.fromCharCode(C[S]);var P=A();g({data:B,addLength1:!0,objectId:P}),i("endobj");var j=A();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:j}),i("endobj");var R=A();i("<<"),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i("/StemV "+u.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+P+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/FontName /"+py(u.fontName)),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i(">>"),i("endobj"),u.objectNumber=A();for(var N=0;N<u.metadata.hmtx.widths.length;N++)u.metadata.hmtx.widths[N]=parseInt(u.metadata.hmtx.widths[N]*(1e3/u.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+py(u.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]);var s=function(o){var c,u=o.text||"",i=o.x,A=o.y,g=o.options||{},C=o.mutex||{},B=C.pdfEscape,S=C.activeFontKey,P=C.fonts,j=S,R="",N=0,U="",$=P[j].encoding;if(P[j].encoding!=="Identity-H")return{text:u,x:i,y:A,options:g,mutex:C};for(U=u,j=S,Array.isArray(u)&&(U=u[0]),N=0;N<U.length;N+=1)P[j].metadata.hasOwnProperty("cmap")&&(c=P[j].metadata.cmap.unicode.codeMap[U[N].charCodeAt(0)]),c||U[N].charCodeAt(0)<256&&P[j].metadata.hasOwnProperty("Unicode")?R+=U[N]:R+="";var J="";return parseInt(j.slice(1))<14||$==="WinAnsiEncoding"?J=B(R,j).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(J=r(R,P[j])),C.isHex=!0,{text:J,x:i,y:A,options:g,mutex:C}};e.events.push(["postProcessText",function(o){var c=o.text||"",u=[],i={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var A=0;for(A=0;A<c.length;A+=1)Array.isArray(c[A])&&c[A].length===3?u.push([s(Object.assign({},i,{text:c[A][0]})).text,c[A][1],c[A][2]]):u.push(s(Object.assign({},i,{text:c[A]})).text);o.text=u}else o.text=s(Object.assign({},i,{text:c})).text}])}(rs),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(rs.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,o,c,u,i,A,g,C=e,B=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],S=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,$=0;this.__bidiEngine__={};var J=function(Z){var Y=Z.charCodeAt(),Le=Y>>8,_e=j[Le];return _e!==void 0?C[256*_e+(255&Y)]:Le===252||Le===253?"AL":N.test(Le)?"L":Le===8?"R":"N"},te=function(Z){for(var Y,Le=0;Le<Z.length;Le++){if((Y=J(Z.charAt(Le)))==="L")return!1;if(Y==="R")return!0}return!1},ue=function(Z,Y,Le,_e){var Qe,De,Be,xe,ze=Y[_e];switch(ze){case"L":case"R":U=!1;break;case"N":case"AN":break;case"EN":U&&(ze="AN");break;case"AL":U=!0,ze="R";break;case"WS":ze="N";break;case"CS":_e<1||_e+1>=Y.length||(Qe=Le[_e-1])!=="EN"&&Qe!=="AN"||(De=Y[_e+1])!=="EN"&&De!=="AN"?ze="N":U&&(De="AN"),ze=De===Qe?De:"N";break;case"ES":ze=(Qe=_e>0?Le[_e-1]:"B")==="EN"&&_e+1<Y.length&&Y[_e+1]==="EN"?"EN":"N";break;case"ET":if(_e>0&&Le[_e-1]==="EN"){ze="EN";break}if(U){ze="N";break}for(Be=_e+1,xe=Y.length;Be<xe&&Y[Be]==="ET";)Be++;ze=Be<xe&&Y[Be]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(xe=Y.length,Be=_e+1;Be<xe&&Y[Be]==="NSM";)Be++;if(Be<xe){var Fe=Z[_e],it=Fe>=1425&&Fe<=2303||Fe===64286;if(Qe=Y[Be],it&&(Qe==="R"||Qe==="AL")){ze="R";break}}}ze=_e<1||(Qe=Y[_e-1])==="B"?"N":Le[_e-1];break;case"B":U=!1,s=!0,ze=$;break;case"S":o=!0,ze="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"BN":ze="N"}return ze},oe=function(Z,Y,Le){var _e=Z.split("");return Le&&K(_e,Le,{hiLevel:$}),_e.reverse(),Y&&Y.reverse(),_e.join("")},K=function(Z,Y,Le){var _e,Qe,De,Be,xe,ze=-1,Fe=Z.length,it=0,ie=[],le=$?S:B,fe=[];for(U=!1,s=!1,o=!1,Qe=0;Qe<Fe;Qe++)fe[Qe]=J(Z[Qe]);for(De=0;De<Fe;De++){if(xe=it,ie[De]=ue(Z,fe,ie,De),_e=240&(it=le[xe][P[ie[De]]]),it&=15,Y[De]=Be=le[it][5],_e>0)if(_e===16){for(Qe=ze;Qe<De;Qe++)Y[Qe]=1;ze=-1}else ze=-1;if(le[it][6])ze===-1&&(ze=De);else if(ze>-1){for(Qe=ze;Qe<De;Qe++)Y[Qe]=Be;ze=-1}fe[De]==="B"&&(Y[De]=0),Le.hiLevel|=Be}o&&function(be,He,Je){for(var tt=0;tt<Je;tt++)if(be[tt]==="S"){He[tt]=$;for(var st=tt-1;st>=0&&be[st]==="WS";st--)He[st]=$}}(fe,Y,Fe)},ce=function(Z,Y,Le,_e,Qe){if(!(Qe.hiLevel<Z)){if(Z===1&&$===1&&!s)return Y.reverse(),void(Le&&Le.reverse());for(var De,Be,xe,ze,Fe=Y.length,it=0;it<Fe;){if(_e[it]>=Z){for(xe=it+1;xe<Fe&&_e[xe]>=Z;)xe++;for(ze=it,Be=xe-1;ze<Be;ze++,Be--)De=Y[ze],Y[ze]=Y[Be],Y[Be]=De,Le&&(De=Le[ze],Le[ze]=Le[Be],Le[Be]=De);it=xe}it++}}},me=function(Z,Y,Le){var _e=Z.split(""),Qe={hiLevel:$};return Le||(Le=[]),K(_e,Le,Qe),function(De,Be,xe){if(xe.hiLevel!==0&&g)for(var ze,Fe=0;Fe<De.length;Fe++)Be[Fe]===1&&(ze=R.indexOf(De[Fe]))>=0&&(De[Fe]=R[ze+1])}(_e,Le,Qe),ce(2,_e,Y,Le,Qe),ce(1,_e,Y,Le,Qe),_e.join("")};return this.__bidiEngine__.doBidiReorder=function(Z,Y,Le){if(function(Qe,De){if(De)for(var Be=0;Be<Qe.length;Be++)De[Be]=Be;u===void 0&&(u=te(Qe)),A===void 0&&(A=te(Qe))}(Z,Y),c||!i||A)if(c&&i&&u^A)$=u?1:0,Z=oe(Z,Y,Le);else if(!c&&i&&A)$=u?1:0,Z=me(Z,Y,Le),Z=oe(Z,Y);else if(!c||u||i||A){if(c&&!i&&u^A)Z=oe(Z,Y),u?($=0,Z=me(Z,Y,Le)):($=1,Z=me(Z,Y,Le),Z=oe(Z,Y));else if(c&&u&&!i&&A)$=1,Z=me(Z,Y,Le),Z=oe(Z,Y);else if(!c&&!i&&u^A){var _e=g;u?($=1,Z=me(Z,Y,Le),$=0,g=!1,Z=me(Z,Y,Le),g=_e):($=0,Z=me(Z,Y,Le),Z=oe(Z,Y),$=1,g=!1,Z=me(Z,Y,Le),g=_e,Z=oe(Z,Y))}}else $=0,Z=me(Z,Y,Le);else $=u?1:0,Z=me(Z,Y,Le);return Z},this.__bidiEngine__.setOptions=function(Z){Z&&(c=Z.isInputVisual,i=Z.isOutputVisual,u=Z.isInputRtl,A=Z.isOutputRtl,g=Z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var c=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(c=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?c.push([r.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):c.push([r.doBidiReorder(s[u])]);n.text=c}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(rs),rs.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Km(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new gxe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new nxe(this.contents),this.head=new sxe(this),this.name=new uxe(this),this.cmap=new pW(this),this.toUnicode={},this.hhea=new oxe(this),this.maxp=new hxe(this),this.hmtx=new dxe(this),this.post=new lxe(this),this.os2=new axe(this),this.loca=new mxe(this),this.glyf=new fxe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,i,A;for(A=[],c=0,u=(i=this.bbox).length;c<u;c++)e=i[c],A.push(Math.round(e*this.scaleFactor));return A}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,o,c,u;for(c=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)s=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return c*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Qf,Km=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,o,c,u,i;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),i=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^o)+65536*(255^c)+256*(255^u)+(255^i)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*o+65536*c+256*u+i},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,o;for(o=[],n=0,s=e.length;n<s;n++)r=e[n],o.push(this.writeByte(r));return o},t}(),nxe=function(){var t;function e(r){var n,s,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,o=this.tableCount;0<=o?s<o:s>o;s=0<=o?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,o,c,u,i,A,g,C,B,S,P,j;for(j in S=Object.keys(r).length,i=Math.log(2),C=16*Math.floor(Math.log(S)/i),c=Math.floor(C/i),g=16*S-C,(s=new Km).writeInt(this.scalarType),s.writeShort(S),s.writeShort(C),s.writeShort(c),s.writeShort(g),o=16*S,A=s.pos+o,u=null,P=[],r)for(B=r[j],s.writeString(j),s.writeInt(t(B)),s.writeInt(A),s.writeInt(B.length),P=P.concat(B),j==="head"&&(u=A),A+=B.length;A%4;)P.push(0),A++;return s.write(P),n=2981146554-t(s.data),s.pos=u+8,s.writeUInt32(n),s.data},t=function(r){var n,s,o,c;for(r=AW.call(r);r.length%4;)r.push(0);for(o=new Km(r),s=0,n=0,c=r.length;n<c;n=n+=4)s+=o.readUInt32();return 4294967295&s},e}(),ixe={}.hasOwnProperty,Ep=function(t,e){for(var r in e)ixe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Qf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var sxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Km).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),rU=function(){function t(e,r){var n,s,o,c,u,i,A,g,C,B,S,P,j,R,N,U,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),C=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(i=0;i<256;++i)this.codeMap[i]=e.readByte();break;case 4:for(S=e.readUInt16(),B=S/2,e.pos+=6,o=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),e.pos+=2,j=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),A=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),g=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),s=(this.length-e.pos+this.offset)/2,u=function(){var J,te;for(te=[],i=J=0;0<=s?J<s:J>s;i=0<=s?++J:--J)te.push(e.readUInt16());return te}(),i=N=0,$=o.length;N<$;i=++N)for(R=o[i],n=U=P=j[i];P<=R?U<=R:U>=R;n=P<=R?++U:--U)g[i]===0?c=n+A[i]:(c=u[g[i]/2+(n-P)-(B-i)]||0)!==0&&(c+=A[i]),this.codeMap[n]=65535&c}e.pos=C}return t.encode=function(e,r){var n,s,o,c,u,i,A,g,C,B,S,P,j,R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe,it,ie,le,fe,be,He,Je,tt,st,Ct,Ue,Ft;switch(_e=new Km,c=Object.keys(e).sort(function(Zt,fr){return Zt-fr}),r){case"macroman":for(j=0,R=function(){var Zt=[];for(P=0;P<256;++P)Zt.push(0);return Zt}(),U={0:0},o={},Qe=0,ze=c.length;Qe<ze;Qe++)U[st=e[s=c[Qe]]]==null&&(U[st]=++j),o[s]={old:e[s],new:U[e[s]]},R[s]=U[e[s]];return _e.writeUInt16(1),_e.writeUInt16(0),_e.writeUInt32(12),_e.writeUInt16(0),_e.writeUInt16(262),_e.writeUInt16(0),_e.write(R),{charMap:o,subtable:_e.data,maxGlyphID:j+1};case"unicode":for(Y=[],C=[],$=0,U={},n={},N=A=null,De=0,Fe=c.length;De<Fe;De++)U[te=e[s=c[De]]]==null&&(U[te]=++$),n[s]={old:te,new:U[te]},u=U[te]-s,N!=null&&u===A||(N&&C.push(N),Y.push(s),A=u),N=s;for(N&&C.push(N),C.push(65535),Y.push(65535),me=2*(ce=Y.length),K=2*Math.pow(Math.log(ce)/Math.LN2,2),B=Math.log(K/2)/Math.LN2,oe=2*ce-K,i=[],ue=[],S=[],P=Be=0,it=Y.length;Be<it;P=++Be){if(Z=Y[P],g=C[P],Z===65535){i.push(0),ue.push(0);break}if(Z-(Le=n[Z].new)>=32768)for(i.push(0),ue.push(2*(S.length+ce-P)),s=xe=Z;Z<=g?xe<=g:xe>=g;s=Z<=g?++xe:--xe)S.push(n[s].new);else i.push(Le-Z),ue.push(0)}for(_e.writeUInt16(3),_e.writeUInt16(1),_e.writeUInt32(12),_e.writeUInt16(4),_e.writeUInt16(16+8*ce+2*S.length),_e.writeUInt16(0),_e.writeUInt16(me),_e.writeUInt16(K),_e.writeUInt16(B),_e.writeUInt16(oe),Je=0,ie=C.length;Je<ie;Je++)s=C[Je],_e.writeUInt16(s);for(_e.writeUInt16(0),tt=0,le=Y.length;tt<le;tt++)s=Y[tt],_e.writeUInt16(s);for(Ct=0,fe=i.length;Ct<fe;Ct++)u=i[Ct],_e.writeUInt16(u);for(Ue=0,be=ue.length;Ue<be;Ue++)J=ue[Ue],_e.writeUInt16(J);for(Ft=0,He=S.length;Ft<He;Ft++)j=S[Ft],_e.writeUInt16(j);return{charMap:n,subtable:_e.data,maxGlyphID:$+1}}},t}(),pW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)n=new rU(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,o;return n==null&&(n="macroman"),s=rU.encode(r,n),(o=new Km).writeUInt16(0),o.writeUInt16(1),s.table=o.data.concat(s.subtable),s},e}(),oxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),axe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),lxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(s=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=s?c<s:c>s;c=0<=s?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var u,i,A;for(A=[],c=u=0,i=this.file.maxp.numGlyphs;0<=i?u<i:u>i;c=0<=i?++u:--u)A.push(r.readUInt32());return A}).call(this)}},e}(),cxe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},uxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,o,c,u,i,A,g,C,B,S;for(r.pos=this.offset,r.readShort(),n=r.readShort(),i=r.readShort(),s=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+i+r.readShort()});for(A={},c=C=0,B=s.length;C<B;c=++C)o=s[c],r.pos=o.offset,g=r.readString(o.length),u=new cxe(g,o),A[S=o.nameID]==null&&(A[S]=[]),A[o.nameID].push(u);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},e}(),hxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),dxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,o,c,u,i,A;for(r.pos=this.offset,this.metrics=[],n=0,i=this.file.hhea.numberOfMetrics;0<=i?n<i:n>i;n=0<=i?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,C;for(C=[],n=g=0;0<=o?g<o:g>o;n=0<=o?++g:--g)C.push(r.readInt16());return C}(),this.widths=(function(){var g,C,B,S;for(S=[],g=0,C=(B=this.metrics).length;g<C;g++)c=B[g],S.push(c.advance);return S}).call(this),s=this.widths[this.widths.length-1],A=[],n=u=0;0<=o?u<o:u>o;n=0<=o?++u:--u)A.push(this.widths.push(s));return A},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),AW=[].slice,fxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,o,c,u,i,A,g,C,B;return r in this.cache?this.cache[r]:(c=this.file.loca,n=this.file.contents,s=c.indexOf(r),(o=c.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,u=(i=new Km(n.read(o))).readShort(),g=i.readShort(),B=i.readShort(),A=i.readShort(),C=i.readShort(),this.cache[r]=u===-1?new Axe(i,g,B,A,C):new pxe(i,u,g,B,A,C),this.cache[r]))},e.prototype.encode=function(r,n,s){var o,c,u,i,A;for(u=[],c=[],i=0,A=n.length;i<A;i++)o=r[n[i]],c.push(u.length),o&&(u=u.concat(o.encode(s)));return c.push(u.length),{table:u,offsets:c}},e}(),pxe=function(){function t(e,r,n,s,o,c){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=o,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Axe=function(){function t(e,r,n,s,o){var c,u;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Km(AW.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),mxe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ep(e,Qf),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=2)c.push(2*r.readUInt16());return c}).call(this):(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=4)c.push(r.readUInt32());return c}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),o=0,c=0,u=0;u<s.length;++u)if(s[u]=o,c<n.length&&n[c]==u){++c,s[u]=o;var i=this.offsets[u],A=this.offsets[u+1]-i;A>0&&(o+=A)}for(var g=new Array(4*s.length),C=0;C<s.length;++C)g[4*C+3]=255&s[C],g[4*C+2]=(65280&s[C])>>8,g[4*C+1]=(16711680&s[C])>>16,g[4*C]=(4278190080&s[C])>>24;return g},e}(),gxe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,o;for(r in s=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,o,c,u,i;for(s={},c=0,u=e.length;c<u;c++)s[o=e[c]]=this.font.glyf.glyphFor(o);for(o in r=[],s)(n=s[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in i=this.glyphsFor(r))n=i[o],s[o]=n;return s},t.prototype.encode=function(e,r){var n,s,o,c,u,i,A,g,C,B,S,P,j,R,N;for(s in n=pW.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),S={0:0},N=n.charMap)S[(i=N[s]).old]=i.new;for(P in B=n.maxGlyphID,c)P in S||(S[P]=B++);return g=function(U){var $,J;for($ in J={},U)J[U[$]]=$;return J}(S),C=Object.keys(g).sort(function(U,$){return U-$}),j=function(){var U,$,J;for(J=[],U=0,$=C.length;U<$;U++)u=C[U],J.push(g[u]);return J}(),o=this.font.glyf.encode(c,j,S),A=this.font.loca.encode(o.offsets,j),R={cmap:this.font.cmap.raw(),glyf:o.table,loca:A,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},t}();rs.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,o,c;if(Array.isArray(r))return"["+function(){var u,i,A;for(A=[],u=0,i=r.length;u<i;u++)n=r[u],A.push(e.convert(n));return A}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in o=["<<"],r)c=r[s],o.push("/"+s+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+r},e}();const yxe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Kve,AcroFormAppearance:_i,AcroFormButton:Vc,AcroFormCheckBox:Vx,AcroFormChoiceField:n0,AcroFormComboBox:s0,AcroFormEditBox:Qx,AcroFormListBox:i0,AcroFormPasswordField:Gx,AcroFormPushButton:Hx,AcroFormRadioButton:o0,AcroFormTextField:jm,GState:k_,ShadingPattern:om,TilingPattern:$g,default:rs,jsPDF:rs},Symbol.toStringTag,{value:"Module"})),vxe=U4(yxe);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lI=function(t,e){return lI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},lI(t,e)};function Hf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lI(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var cI=function(){return cI=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},cI.apply(this,arguments)};function Ah(t,e,r,n){function s(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function u(g){try{A(n.next(g))}catch(C){c(C)}}function i(g){try{A(n.throw(g))}catch(C){c(C)}}function A(g){g.done?o(g.value):s(g.value).then(u,i)}A((n=n.apply(t,[])).next())})}function Hu(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(A){return function(g){return i([A,g])}}function i(A){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(o=A[0]&2?s.return:A[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,A[1])).done)return o;switch(s=0,o&&(A=[A[0]&2,o.value]),A[0]){case 0:case 1:o=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,s=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!o||A[1]>o[0]&&A[1]<o[3])){r.label=A[1];break}if(A[0]===6&&r.label<o[1]){r.label=o[1],o=A;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(A);break}o[2]&&r.ops.pop(),r.trys.pop();continue}A=e.call(t,r)}catch(g){A=[6,g],s=0}finally{n=o=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function h2(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||e)}var AA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),OC=function(t,e){return AA.fromClientRect(t,e.getBoundingClientRect())},xxe=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new AA(0,0,n,s)},RC=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var o=t.charCodeAt(r++);(o&64512)===56320?e.push(((s&1023)<<10)+(o&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Ac=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,o="";++s<r;){var c=t[s];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(s+1===r||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},nU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_xe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var d2=0;d2<nU.length;d2++)_xe[nU.charCodeAt(d2)]=d2;var iU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ox=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var f2=0;f2<iU.length;f2++)ox[iU.charCodeAt(f2)]=f2;var bxe=function(t){var e=t.length*.75,r=t.length,n,s=0,o,c,u,i;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)o=ox[t.charCodeAt(n)],c=ox[t.charCodeAt(n+1)],u=ox[t.charCodeAt(n+2)],i=ox[t.charCodeAt(n+3)],g[s++]=o<<2|c>>4,g[s++]=(c&15)<<4|u>>2,g[s++]=(u&3)<<6|i&63;return A},wxe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Cxe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},a0=5,SN=11,w3=2,Sxe=SN-a0,mW=65536>>a0,Bxe=1<<a0,C3=Bxe-1,Exe=1024>>a0,Txe=mW+Exe,Ixe=Txe,Lxe=32,Fxe=Ixe+Lxe,Nxe=65536>>SN,Pxe=1<<Sxe,Mxe=Pxe-1,sU=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},jxe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},kxe=function(t,e){var r=bxe(t),n=Array.isArray(r)?Cxe(r):new Uint32Array(r),s=Array.isArray(r)?wxe(r):new Uint16Array(r),o=24,c=sU(s,o/2,n[4]/2),u=n[5]===2?sU(s,(o+n[4])/2):jxe(n,Math.ceil((o+n[4])/4));return new Dxe(n[0],n[1],n[2],n[3],c,u)},Dxe=function(){function t(e,r,n,s,o,c){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=o,this.data=c}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>a0],r=(r<<w3)+(e&C3),this.data[r];if(e<=65535)return r=this.index[mW+(e-55296>>a0)],r=(r<<w3)+(e&C3),this.data[r];if(e<this.highStart)return r=Fxe-Nxe+(e>>SN),r=this.index[r],r+=e>>a0&Mxe,r=this.index[r],r=(r<<w3)+(e&C3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),oU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oxe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var p2=0;p2<oU.length;p2++)Oxe[oU.charCodeAt(p2)]=p2;var Rxe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",aU=50,Uxe=1,gW=2,yW=3,zxe=4,Qxe=5,lU=7,vW=8,cU=9,gm=10,uI=11,uU=12,hI=13,Hxe=14,ax=15,dI=16,A2=17,zv=18,Vxe=19,hU=20,fI=21,Qv=22,S3=23,sy=24,od=25,lx=26,cx=27,oy=28,Gxe=29,Rg=30,qxe=31,m2=32,g2=33,pI=34,AI=35,mI=36,D_=37,gI=38,d5=39,f5=40,B3=41,xW=42,$xe=43,Wxe=[9001,65288],_W="!",wo="",y2="",yI=kxe(Rxe),Hp=[Rg,mI],vI=[Uxe,gW,yW,Qxe],bW=[gm,vW],dU=[cx,lx],Kxe=vI.concat(bW),fU=[gI,d5,f5,pI,AI],Xxe=[ax,hI],Yxe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(o,c){var u=yI.get(o);if(u>aU?(s.push(!0),u-=aU):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(o)!==-1)return n.push(c),r.push(dI);if(u===zxe||u===uI){if(c===0)return n.push(c),r.push(Rg);var i=r[c-1];return Kxe.indexOf(i)===-1?(n.push(n[c-1]),r.push(i)):(n.push(c),r.push(Rg))}if(n.push(c),u===qxe)return r.push(e==="strict"?fI:D_);if(u===xW||u===Gxe)return r.push(Rg);if(u===$xe)return o>=131072&&o<=196605||o>=196608&&o<=262141?r.push(D_):r.push(Rg);r.push(u)}),[n,r,s]},E3=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var o=r;o<=n.length;){o++;var c=n[o];if(c===e)return!0;if(c!==gm)break}if(s===gm)for(var o=r;o>0;){o--;var u=n[o];if(Array.isArray(t)?t.indexOf(u)!==-1:t===u)for(var i=r;i<=n.length;){i++;var c=n[i];if(c===e)return!0;if(c!==gm)break}if(u!==gm)break}return!1},pU=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===gm)r--;else return n}return 0},Zxe=function(t,e,r,n,s){if(r[n]===0)return wo;var o=n-1;if(Array.isArray(s)&&s[o]===!0)return wo;var c=o-1,u=o+1,i=e[o],A=c>=0?e[c]:0,g=e[u];if(i===gW&&g===yW)return wo;if(vI.indexOf(i)!==-1)return _W;if(vI.indexOf(g)!==-1||bW.indexOf(g)!==-1)return wo;if(pU(o,e)===vW)return y2;if(yI.get(t[o])===uI||(i===m2||i===g2)&&yI.get(t[u])===uI||i===lU||g===lU||i===cU||[gm,hI,ax].indexOf(i)===-1&&g===cU||[A2,zv,Vxe,sy,oy].indexOf(g)!==-1||pU(o,e)===Qv||E3(S3,Qv,o,e)||E3([A2,zv],fI,o,e)||E3(uU,uU,o,e))return wo;if(i===gm)return y2;if(i===S3||g===S3)return wo;if(g===dI||i===dI)return y2;if([hI,ax,fI].indexOf(g)!==-1||i===Hxe||A===mI&&Xxe.indexOf(i)!==-1||i===oy&&g===mI||g===hU||Hp.indexOf(g)!==-1&&i===od||Hp.indexOf(i)!==-1&&g===od||i===cx&&[D_,m2,g2].indexOf(g)!==-1||[D_,m2,g2].indexOf(i)!==-1&&g===lx||Hp.indexOf(i)!==-1&&dU.indexOf(g)!==-1||dU.indexOf(i)!==-1&&Hp.indexOf(g)!==-1||[cx,lx].indexOf(i)!==-1&&(g===od||[Qv,ax].indexOf(g)!==-1&&e[u+1]===od)||[Qv,ax].indexOf(i)!==-1&&g===od||i===od&&[od,oy,sy].indexOf(g)!==-1)return wo;if([od,oy,sy,A2,zv].indexOf(g)!==-1)for(var C=o;C>=0;){var B=e[C];if(B===od)return wo;if([oy,sy].indexOf(B)!==-1)C--;else break}if([cx,lx].indexOf(g)!==-1)for(var C=[A2,zv].indexOf(i)!==-1?c:o;C>=0;){var B=e[C];if(B===od)return wo;if([oy,sy].indexOf(B)!==-1)C--;else break}if(gI===i&&[gI,d5,pI,AI].indexOf(g)!==-1||[d5,pI].indexOf(i)!==-1&&[d5,f5].indexOf(g)!==-1||[f5,AI].indexOf(i)!==-1&&g===f5||fU.indexOf(i)!==-1&&[hU,lx].indexOf(g)!==-1||fU.indexOf(g)!==-1&&i===cx||Hp.indexOf(i)!==-1&&Hp.indexOf(g)!==-1||i===sy&&Hp.indexOf(g)!==-1||Hp.concat(od).indexOf(i)!==-1&&g===Qv&&Wxe.indexOf(t[u])===-1||Hp.concat(od).indexOf(g)!==-1&&i===zv)return wo;if(i===B3&&g===B3){for(var S=r[o],P=1;S>0&&(S--,e[S]===B3);)P++;if(P%2!==0)return wo}return i===m2&&g===g2?wo:y2},Jxe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=Yxe(t,e.lineBreak),n=r[0],s=r[1],o=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(u){return[od,Rg,xW].indexOf(u)!==-1?D_:u}));var c=e.wordBreak==="keep-all"?o.map(function(u,i){return u&&t[i]>=19968&&t[i]<=40959}):void 0;return[n,s,c]},e_e=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===_W,this.start=n,this.end=s}return t.prototype.slice=function(){return Ac.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),t_e=function(t,e){var r=RC(t),n=Jxe(r,e),s=n[0],o=n[1],c=n[2],u=r.length,i=0,A=0;return{next:function(){if(A>=u)return{done:!0,value:null};for(var g=wo;A<u&&(g=Zxe(r,o,s,++A,c))===wo;);if(g!==wo||A===u){var C=new e_e(r,g,i,A);return i=A,{value:C,done:!1}}return{done:!0,value:null}}}},r_e=1,n_e=2,pb=4,AU=8,w4=10,mU=47,qx=92,i_e=9,s_e=32,v2=34,Hv=61,o_e=35,a_e=36,l_e=37,x2=39,_2=40,Vv=41,c_e=95,kh=45,u_e=33,h_e=60,d_e=62,f_e=64,p_e=91,A_e=93,m_e=61,g_e=123,b2=63,y_e=125,gU=124,v_e=126,x_e=128,yU=65533,T3=42,Wg=43,__e=44,b_e=58,w_e=59,O_=46,C_e=0,S_e=8,B_e=11,E_e=14,T_e=31,I_e=127,ip=-1,wW=48,CW=97,SW=101,L_e=102,F_e=117,N_e=122,BW=65,EW=69,TW=70,P_e=85,M_e=90,qu=function(t){return t>=wW&&t<=57},j_e=function(t){return t>=55296&&t<=57343},ay=function(t){return qu(t)||t>=BW&&t<=TW||t>=CW&&t<=L_e},k_e=function(t){return t>=CW&&t<=N_e},D_e=function(t){return t>=BW&&t<=M_e},O_e=function(t){return k_e(t)||D_e(t)},R_e=function(t){return t>=x_e},w2=function(t){return t===w4||t===i_e||t===s_e},C4=function(t){return O_e(t)||R_e(t)||t===c_e},vU=function(t){return C4(t)||qu(t)||t===kh},U_e=function(t){return t>=C_e&&t<=S_e||t===B_e||t>=E_e&&t<=T_e||t===I_e},rm=function(t,e){return t!==qx?!1:e!==w4},C2=function(t,e,r){return t===kh?C4(e)||rm(e,r):C4(t)?!0:!!(t===qx&&rm(t,e))},I3=function(t,e,r){return t===Wg||t===kh?qu(e)?!0:e===O_&&qu(r):qu(t===O_?e:t)},z_e=function(t){var e=0,r=1;(t[e]===Wg||t[e]===kh)&&(t[e]===kh&&(r=-1),e++);for(var n=[];qu(t[e]);)n.push(t[e++]);var s=n.length?parseInt(Ac.apply(void 0,n),10):0;t[e]===O_&&e++;for(var o=[];qu(t[e]);)o.push(t[e++]);var c=o.length,u=c?parseInt(Ac.apply(void 0,o),10):0;(t[e]===EW||t[e]===SW)&&e++;var i=1;(t[e]===Wg||t[e]===kh)&&(t[e]===kh&&(i=-1),e++);for(var A=[];qu(t[e]);)A.push(t[e++]);var g=A.length?parseInt(Ac.apply(void 0,A),10):0;return r*(s+u*Math.pow(10,-c))*Math.pow(10,i*g)},Q_e={type:2},H_e={type:3},V_e={type:4},G_e={type:13},q_e={type:8},$_e={type:21},W_e={type:9},K_e={type:10},X_e={type:11},Y_e={type:12},Z_e={type:14},S2={type:23},J_e={type:1},ebe={type:25},tbe={type:24},rbe={type:26},nbe={type:27},ibe={type:28},sbe={type:29},obe={type:31},xI={type:32},IW=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(RC(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==xI;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case v2:return this.consumeStringToken(v2);case o_e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(vU(r)||rm(n,s)){var o=C2(r,n,s)?n_e:r_e,c=this.consumeName();return{type:5,value:c,flags:o}}break;case a_e:if(this.peekCodePoint(0)===Hv)return this.consumeCodePoint(),G_e;break;case x2:return this.consumeStringToken(x2);case _2:return Q_e;case Vv:return H_e;case T3:if(this.peekCodePoint(0)===Hv)return this.consumeCodePoint(),Z_e;break;case Wg:if(I3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case __e:return V_e;case kh:var u=e,i=this.peekCodePoint(0),A=this.peekCodePoint(1);if(I3(u,i,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(C2(u,i,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(i===kh&&A===d_e)return this.consumeCodePoint(),this.consumeCodePoint(),tbe;break;case O_:if(I3(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case mU:if(this.peekCodePoint(0)===T3)for(this.consumeCodePoint();;){var g=this.consumeCodePoint();if(g===T3&&(g=this.consumeCodePoint(),g===mU))return this.consumeToken();if(g===ip)return this.consumeToken()}break;case b_e:return rbe;case w_e:return nbe;case h_e:if(this.peekCodePoint(0)===u_e&&this.peekCodePoint(1)===kh&&this.peekCodePoint(2)===kh)return this.consumeCodePoint(),this.consumeCodePoint(),ebe;break;case f_e:var C=this.peekCodePoint(0),B=this.peekCodePoint(1),S=this.peekCodePoint(2);if(C2(C,B,S)){var c=this.consumeName();return{type:7,value:c}}break;case p_e:return ibe;case qx:if(rm(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case A_e:return sbe;case m_e:if(this.peekCodePoint(0)===Hv)return this.consumeCodePoint(),q_e;break;case g_e:return X_e;case y_e:return Y_e;case F_e:case P_e:var P=this.peekCodePoint(0),j=this.peekCodePoint(1);return P===Wg&&(ay(j)||j===b2)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case gU:if(this.peekCodePoint(0)===Hv)return this.consumeCodePoint(),W_e;if(this.peekCodePoint(0)===gU)return this.consumeCodePoint(),$_e;break;case v_e:if(this.peekCodePoint(0)===Hv)return this.consumeCodePoint(),K_e;break;case ip:return xI}return w2(e)?(this.consumeWhiteSpace(),obe):qu(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):C4(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ac(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();ay(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===b2&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(Ac.apply(void 0,e.map(function(i){return i===b2?wW:i})),16),o=parseInt(Ac.apply(void 0,e.map(function(i){return i===b2?TW:i})),16);return{type:30,start:s,end:o}}var c=parseInt(Ac.apply(void 0,e),16);if(this.peekCodePoint(0)===kh&&ay(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var u=[];ay(r)&&u.length<6;)u.push(r),r=this.consumeCodePoint();var o=parseInt(Ac.apply(void 0,u),16);return{type:30,start:c,end:o}}else return{type:30,start:c,end:c}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===_2?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===_2?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ip)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===x2||r===v2){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ip||this.peekCodePoint(0)===Vv)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),S2)}for(;;){var s=this.consumeCodePoint();if(s===ip||s===Vv)return{type:22,value:Ac.apply(void 0,e)};if(w2(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ip||this.peekCodePoint(0)===Vv?(this.consumeCodePoint(),{type:22,value:Ac.apply(void 0,e)}):(this.consumeBadUrlRemnants(),S2);if(s===v2||s===x2||s===_2||U_e(s))return this.consumeBadUrlRemnants(),S2;if(s===qx)if(rm(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),S2;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;w2(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Vv||e===ip)return;rm(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=Ac.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===ip||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===w4)return this._value.splice(0,n),J_e;if(s===qx){var o=this._value[n+1];o!==ip&&o!==void 0&&(o===w4?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):rm(s,o)&&(r+=this.consumeStringSlice(n),r+=Ac(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=pb,n=this.peekCodePoint(0);for((n===Wg||n===kh)&&e.push(this.consumeCodePoint());qu(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===O_&&qu(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=AU;qu(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var o=this.peekCodePoint(2);if((n===EW||n===SW)&&((s===Wg||s===kh)&&qu(o)||qu(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=AU;qu(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[z_e(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),o=this.peekCodePoint(1),c=this.peekCodePoint(2);if(C2(s,o,c)){var u=this.consumeName();return{type:15,number:r,flags:n,unit:u}}return s===l_e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ay(e)){for(var r=Ac(e);ay(this.peekCodePoint(0))&&r.length<6;)r+=Ac(this.consumeCodePoint());w2(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||j_e(n)||n>1114111?yU:n}return e===ip?yU:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(vU(r))e+=Ac(r);else if(rm(r,this.peekCodePoint(0)))e+=Ac(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),LW=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new IW;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||lbe(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?xI:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Ab=function(t){return t.type===15},j1=function(t){return t.type===17},Fa=function(t){return t.type===20},abe=function(t){return t.type===0},_I=function(t,e){return Fa(t)&&t.value===e},FW=function(t){return t.type!==31},v1=function(t){return t.type!==31&&t.type!==4},Tp=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},lbe=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Xm=function(t){return t.type===17||t.type===15},Ec=function(t){return t.type===16||Xm(t)},NW=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Au={type:17,number:0,flags:pb},BN={type:16,number:50,flags:pb},ym={type:16,number:100,flags:pb},ux=function(t,e,r){var n=t[0],s=t[1];return[Za(n,e),Za(typeof s<"u"?s:n,r)]},Za=function(t,e){if(t.type===16)return t.number/100*e;if(Ab(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},PW="deg",MW="grad",jW="rad",kW="turn",UC={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case PW:return Math.PI*e.number/180;case MW:return Math.PI/200*e.number;case jW:return e.number;case kW:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},DW=function(t){return t.type===15&&(t.unit===PW||t.unit===MW||t.unit===jW||t.unit===kW)},OW=function(t){var e=t.filter(Fa).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Au,Au];case"to top":case"bottom":return Xd(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Au,ym];case"to right":case"left":return Xd(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ym,ym];case"to bottom":case"top":return Xd(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ym,Au];case"to left":case"right":return Xd(270)}return 0},Xd=function(t){return Math.PI*t/180},km={name:"color",parse:function(t,e){if(e.type===18){var r=cbe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),o=e.value.substring(2,3);return vm(parseInt(n+n,16),parseInt(s+s,16),parseInt(o+o,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),o=e.value.substring(2,3),c=e.value.substring(3,4);return vm(parseInt(n+n,16),parseInt(s+s,16),parseInt(o+o,16),parseInt(c+c,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),o=e.value.substring(4,6);return vm(parseInt(n,16),parseInt(s,16),parseInt(o,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),o=e.value.substring(4,6),c=e.value.substring(6,8);return vm(parseInt(n,16),parseInt(s,16),parseInt(o,16),parseInt(c,16)/255)}}if(e.type===20){var u=sA[e.value.toUpperCase()];if(typeof u<"u")return u}return sA.TRANSPARENT}},Dm=function(t){return(255&t)===0},Zc=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},vm=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},xU=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},_U=function(t,e){var r=e.filter(v1);if(r.length===3){var n=r.map(xU),s=n[0],o=n[1],c=n[2];return vm(s,o,c,1)}if(r.length===4){var u=r.map(xU),s=u[0],o=u[1],c=u[2],i=u[3];return vm(s,o,c,i)}return 0};function L3(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var bU=function(t,e){var r=e.filter(v1),n=r[0],s=r[1],o=r[2],c=r[3],u=(n.type===17?Xd(n.number):UC.parse(t,n))/(Math.PI*2),i=Ec(s)?s.number/100:0,A=Ec(o)?o.number/100:0,g=typeof c<"u"&&Ec(c)?Za(c,1):1;if(i===0)return vm(A*255,A*255,A*255,1);var C=A<=.5?A*(i+1):A+i-A*i,B=A*2-C,S=L3(B,C,u+1/3),P=L3(B,C,u),j=L3(B,C,u-1/3);return vm(S*255,P*255,j*255,g)},cbe={hsl:bU,hsla:bU,rgb:_U,rgba:_U},$x=function(t,e){return km.parse(t,LW.create(e).parseComponentValue())},sA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ube={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Fa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},hbe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zC=function(t,e){var r=km.parse(t,e[0]),n=e[1];return n&&Ec(n)?{color:r,stop:n}:{color:r,stop:null}},wU=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Au),n.stop===null&&(n.stop=ym);for(var s=[],o=0,c=0;c<t.length;c++){var u=t[c].stop;if(u!==null){var i=Za(u,e);i>o?s.push(i):s.push(o),o=i}else s.push(null)}for(var A=null,c=0;c<s.length;c++){var g=s[c];if(g===null)A===null&&(A=c);else if(A!==null){for(var C=c-A,B=s[A-1],S=(g-B)/(C+1),P=1;P<=C;P++)s[A+P-1]=S*P;A=null}}return t.map(function(j,R){var N=j.color;return{color:N,stop:Math.max(Math.min(1,s[R]/e),0)}})},dbe=function(t,e,r){var n=e/2,s=r/2,o=Za(t[0],e)-n,c=s-Za(t[1],r);return(Math.atan2(c,o)+Math.PI*2)%(Math.PI*2)},fbe=function(t,e,r){var n=typeof t=="number"?t:dbe(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),o=e/2,c=r/2,u=s/2,i=Math.sin(n-Math.PI/2)*u,A=Math.cos(n-Math.PI/2)*u;return[s,o-A,o+A,c-i,c+i]},Sf=function(t,e){return Math.sqrt(t*t+e*e)},CU=function(t,e,r,n,s){var o=[[0,0],[0,e],[t,0],[t,e]];return o.reduce(function(c,u){var i=u[0],A=u[1],g=Sf(r-i,n-A);return(s?g<c.optimumDistance:g>c.optimumDistance)?{optimumCorner:u,optimumDistance:g}:c},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},pbe=function(t,e,r,n,s){var o=0,c=0;switch(t.size){case 0:t.shape===0?o=c=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(o=Math.min(Math.abs(e),Math.abs(e-n)),c=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)o=c=Math.min(Sf(e,r),Sf(e,r-s),Sf(e-n,r),Sf(e-n,r-s));else if(t.shape===1){var u=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),i=CU(n,s,e,r,!0),A=i[0],g=i[1];o=Sf(A-e,(g-r)/u),c=u*o}break;case 1:t.shape===0?o=c=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(o=Math.max(Math.abs(e),Math.abs(e-n)),c=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)o=c=Math.max(Sf(e,r),Sf(e,r-s),Sf(e-n,r),Sf(e-n,r-s));else if(t.shape===1){var u=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),C=CU(n,s,e,r,!1),A=C[0],g=C[1];o=Sf(A-e,(g-r)/u),c=u*o}break}return Array.isArray(t.size)&&(o=Za(t.size[0],n),c=t.size.length===2?Za(t.size[1],s):o),[o,c]},Abe=function(t,e){var r=Xd(180),n=[];return Tp(e).forEach(function(s,o){if(o===0){var c=s[0];if(c.type===20&&c.value==="to"){r=OW(s);return}else if(DW(c)){r=UC.parse(t,c);return}}var u=zC(t,s);n.push(u)}),{angle:r,stops:n,type:1}},B2=function(t,e){var r=Xd(180),n=[];return Tp(e).forEach(function(s,o){if(o===0){var c=s[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){r=OW(s);return}else if(DW(c)){r=(UC.parse(t,c)+Xd(270))%Xd(360);return}}var u=zC(t,s);n.push(u)}),{angle:r,stops:n,type:1}},mbe=function(t,e){var r=Xd(180),n=[],s=1,o=0,c=3,u=[];return Tp(e).forEach(function(i,A){var g=i[0];if(A===0){if(Fa(g)&&g.value==="linear"){s=1;return}else if(Fa(g)&&g.value==="radial"){s=2;return}}if(g.type===18){if(g.name==="from"){var C=km.parse(t,g.values[0]);n.push({stop:Au,color:C})}else if(g.name==="to"){var C=km.parse(t,g.values[0]);n.push({stop:ym,color:C})}else if(g.name==="color-stop"){var B=g.values.filter(v1);if(B.length===2){var C=km.parse(t,B[1]),S=B[0];j1(S)&&n.push({stop:{type:16,number:S.number*100,flags:S.flags},color:C})}}}}),s===1?{angle:(r+Xd(180))%Xd(360),stops:n,type:s}:{size:c,shape:o,stops:n,position:u,type:s}},RW="closest-side",UW="farthest-side",zW="closest-corner",QW="farthest-corner",HW="circle",VW="ellipse",GW="cover",qW="contain",gbe=function(t,e){var r=0,n=3,s=[],o=[];return Tp(e).forEach(function(c,u){var i=!0;if(u===0){var A=!1;i=c.reduce(function(C,B){if(A)if(Fa(B))switch(B.value){case"center":return o.push(BN),C;case"top":case"left":return o.push(Au),C;case"right":case"bottom":return o.push(ym),C}else(Ec(B)||Xm(B))&&o.push(B);else if(Fa(B))switch(B.value){case HW:return r=0,!1;case VW:return r=1,!1;case"at":return A=!0,!1;case RW:return n=0,!1;case GW:case UW:return n=1,!1;case qW:case zW:return n=2,!1;case QW:return n=3,!1}else if(Xm(B)||Ec(B))return Array.isArray(n)||(n=[]),n.push(B),!1;return C},i)}if(i){var g=zC(t,c);s.push(g)}}),{size:n,shape:r,stops:s,position:o,type:2}},E2=function(t,e){var r=0,n=3,s=[],o=[];return Tp(e).forEach(function(c,u){var i=!0;if(u===0?i=c.reduce(function(g,C){if(Fa(C))switch(C.value){case"center":return o.push(BN),!1;case"top":case"left":return o.push(Au),!1;case"right":case"bottom":return o.push(ym),!1}else if(Ec(C)||Xm(C))return o.push(C),!1;return g},i):u===1&&(i=c.reduce(function(g,C){if(Fa(C))switch(C.value){case HW:return r=0,!1;case VW:return r=1,!1;case qW:case RW:return n=0,!1;case UW:return n=1,!1;case zW:return n=2,!1;case GW:case QW:return n=3,!1}else if(Xm(C)||Ec(C))return Array.isArray(n)||(n=[]),n.push(C),!1;return g},i)),i){var A=zC(t,c);s.push(A)}}),{size:n,shape:r,stops:s,position:o,type:2}},ybe=function(t){return t.type===1},vbe=function(t){return t.type===2},EN={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=$W[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function xbe(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!$W[t.name])}var $W={"linear-gradient":Abe,"-moz-linear-gradient":B2,"-ms-linear-gradient":B2,"-o-linear-gradient":B2,"-webkit-linear-gradient":B2,"radial-gradient":gbe,"-moz-radial-gradient":E2,"-ms-radial-gradient":E2,"-o-radial-gradient":E2,"-webkit-radial-gradient":E2,"-webkit-gradient":mbe},_be={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return v1(n)&&xbe(n)}).map(function(n){return EN.parse(t,n)})}},bbe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Fa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},wbe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Tp(e).map(function(r){return r.filter(Ec)}).map(NW)}},Cbe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Tp(e).map(function(r){return r.filter(Fa).map(function(n){return n.value}).join(" ")}).map(Sbe)}},Sbe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Yy;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Yy||(Yy={}));var Bbe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Tp(e).map(function(r){return r.filter(Ebe)})}},Ebe=function(t){return Fa(t)||Ec(t)},QC=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Tbe=QC("top"),Ibe=QC("right"),Lbe=QC("bottom"),Fbe=QC("left"),HC=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return NW(r.filter(Ec))}}},Nbe=HC("top-left"),Pbe=HC("top-right"),Mbe=HC("bottom-right"),jbe=HC("bottom-left"),VC=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},kbe=VC("top"),Dbe=VC("right"),Obe=VC("bottom"),Rbe=VC("left"),GC=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Ab(r)?r.number:0}}},Ube=GC("top"),zbe=GC("right"),Qbe=GC("bottom"),Hbe=GC("left"),Vbe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Gbe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},qbe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Fa).reduce(function(r,n){return r|$be(n.value)},0)}},$be=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Wbe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Kbe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},S4;(function(t){t.NORMAL="normal",t.STRICT="strict"})(S4||(S4={}));var Xbe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return S4.STRICT;case"normal":default:return S4.NORMAL}}},Ybe={name:"line-height",initialValue:"normal",prefix:!1,type:4},SU=function(t,e){return Fa(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ec(t)?Za(t,e):e},Zbe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:EN.parse(t,e)}},Jbe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},bI={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},qC=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},ewe=qC("top"),twe=qC("right"),rwe=qC("bottom"),nwe=qC("left"),iwe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Fa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},swe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},$C=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},owe=$C("top"),awe=$C("right"),lwe=$C("bottom"),cwe=$C("left"),uwe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},hwe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},dwe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&_I(e[0],"none")?[]:Tp(e).map(function(r){for(var n={color:sA.TRANSPARENT,offsetX:Au,offsetY:Au,blur:Au},s=0,o=0;o<r.length;o++){var c=r[o];Xm(c)?(s===0?n.offsetX=c:s===1?n.offsetY=c:n.blur=c,s++):n.color=km.parse(t,c)}return n})}},fwe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},pwe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=gwe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Awe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},mwe=function(t){var e=t.filter(function(i){return i.type===17}).map(function(i){return i.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var c=e[12],u=e[13];return e[14],e[15],e.length===16?[r,n,s,o,c,u]:null},gwe={matrix:Awe,matrix3d:mwe},BU={type:16,number:50,flags:pb},ywe=[BU,BU],vwe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ec);return r.length!==2?ywe:[r[0],r[1]]}},xwe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Wx;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Wx||(Wx={}));var _we={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Wx.BREAK_ALL;case"keep-all":return Wx.KEEP_ALL;case"normal":default:return Wx.NORMAL}}},bwe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(j1(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},WW={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},wwe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return j1(e)?e.number:1}},Cwe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Swe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Fa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Bwe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},Ewe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Twe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(j1(e))return e.number;if(Fa(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Iwe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Fa).map(function(r){return r.value})}},Lwe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Gc=function(t,e){return(t&e)!==0},Fwe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Nwe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(FW),o=0;o<s.length;o++){var c=s[o],u=s[o+1];if(c.type===20){var i=u&&j1(u)?u.number:1;n.push({counter:c.value,increment:i})}}return n}},Pwe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(FW),s=0;s<n.length;s++){var o=n[s],c=n[s+1];if(Fa(o)&&o.value!=="none"){var u=c&&j1(c)?c.number:0;r.push({counter:o.value,reset:u})}}return r}},Mwe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Ab).map(function(r){return WW.parse(t,r)})}},jwe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(abe);if(s.length%2!==0)return null;for(var o=0;o<s.length;o+=2){var c=s[o].value,u=s[o+1].value;n.push({open:c,close:u})}return n}},EU=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},kwe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&_I(e[0],"none")?[]:Tp(e).map(function(r){for(var n={color:255,offsetX:Au,offsetY:Au,blur:Au,spread:Au,inset:!1},s=0,o=0;o<r.length;o++){var c=r[o];_I(c,"inset")?n.inset=!0:Xm(c)?(s===0?n.offsetX=c:s===1?n.offsetY=c:s===2?n.blur=c:n.spread=c,s++):n.color=km.parse(t,c)}return n})}},Dwe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Fa).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},Owe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Rwe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Ab(e)?e.number:0}},Uwe=function(){function t(e,r){var n,s;this.animationDuration=di(e,Mwe,r.animationDuration),this.backgroundClip=di(e,ube,r.backgroundClip),this.backgroundColor=di(e,hbe,r.backgroundColor),this.backgroundImage=di(e,_be,r.backgroundImage),this.backgroundOrigin=di(e,bbe,r.backgroundOrigin),this.backgroundPosition=di(e,wbe,r.backgroundPosition),this.backgroundRepeat=di(e,Cbe,r.backgroundRepeat),this.backgroundSize=di(e,Bbe,r.backgroundSize),this.borderTopColor=di(e,Tbe,r.borderTopColor),this.borderRightColor=di(e,Ibe,r.borderRightColor),this.borderBottomColor=di(e,Lbe,r.borderBottomColor),this.borderLeftColor=di(e,Fbe,r.borderLeftColor),this.borderTopLeftRadius=di(e,Nbe,r.borderTopLeftRadius),this.borderTopRightRadius=di(e,Pbe,r.borderTopRightRadius),this.borderBottomRightRadius=di(e,Mbe,r.borderBottomRightRadius),this.borderBottomLeftRadius=di(e,jbe,r.borderBottomLeftRadius),this.borderTopStyle=di(e,kbe,r.borderTopStyle),this.borderRightStyle=di(e,Dbe,r.borderRightStyle),this.borderBottomStyle=di(e,Obe,r.borderBottomStyle),this.borderLeftStyle=di(e,Rbe,r.borderLeftStyle),this.borderTopWidth=di(e,Ube,r.borderTopWidth),this.borderRightWidth=di(e,zbe,r.borderRightWidth),this.borderBottomWidth=di(e,Qbe,r.borderBottomWidth),this.borderLeftWidth=di(e,Hbe,r.borderLeftWidth),this.boxShadow=di(e,kwe,r.boxShadow),this.color=di(e,Vbe,r.color),this.direction=di(e,Gbe,r.direction),this.display=di(e,qbe,r.display),this.float=di(e,Wbe,r.cssFloat),this.fontFamily=di(e,Bwe,r.fontFamily),this.fontSize=di(e,Ewe,r.fontSize),this.fontStyle=di(e,Lwe,r.fontStyle),this.fontVariant=di(e,Iwe,r.fontVariant),this.fontWeight=di(e,Twe,r.fontWeight),this.letterSpacing=di(e,Kbe,r.letterSpacing),this.lineBreak=di(e,Xbe,r.lineBreak),this.lineHeight=di(e,Ybe,r.lineHeight),this.listStyleImage=di(e,Zbe,r.listStyleImage),this.listStylePosition=di(e,Jbe,r.listStylePosition),this.listStyleType=di(e,bI,r.listStyleType),this.marginTop=di(e,ewe,r.marginTop),this.marginRight=di(e,twe,r.marginRight),this.marginBottom=di(e,rwe,r.marginBottom),this.marginLeft=di(e,nwe,r.marginLeft),this.opacity=di(e,wwe,r.opacity);var o=di(e,iwe,r.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=di(e,swe,r.overflowWrap),this.paddingTop=di(e,owe,r.paddingTop),this.paddingRight=di(e,awe,r.paddingRight),this.paddingBottom=di(e,lwe,r.paddingBottom),this.paddingLeft=di(e,cwe,r.paddingLeft),this.paintOrder=di(e,Dwe,r.paintOrder),this.position=di(e,hwe,r.position),this.textAlign=di(e,uwe,r.textAlign),this.textDecorationColor=di(e,Cwe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=di(e,Swe,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=di(e,dwe,r.textShadow),this.textTransform=di(e,fwe,r.textTransform),this.transform=di(e,pwe,r.transform),this.transformOrigin=di(e,vwe,r.transformOrigin),this.visibility=di(e,xwe,r.visibility),this.webkitTextStrokeColor=di(e,Owe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=di(e,Rwe,r.webkitTextStrokeWidth),this.wordBreak=di(e,_we,r.wordBreak),this.zIndex=di(e,bwe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Dm(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Gc(this.display,4)||Gc(this.display,33554432)||Gc(this.display,268435456)||Gc(this.display,536870912)||Gc(this.display,67108864)||Gc(this.display,134217728)},t}(),zwe=function(){function t(e,r){this.content=di(e,Fwe,r.content),this.quotes=di(e,jwe,r.quotes)}return t}(),TU=function(){function t(e,r){this.counterIncrement=di(e,Nwe,r.counterIncrement),this.counterReset=di(e,Pwe,r.counterReset)}return t}(),di=function(t,e,r){var n=new IW,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var o=new LW(n.read());switch(e.type){case 2:var c=o.parseComponentValue();return e.parse(t,Fa(c)?c.value:e.initialValue);case 0:return e.parse(t,o.parseComponentValue());case 1:return e.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return UC.parse(t,o.parseComponentValue());case"color":return km.parse(t,o.parseComponentValue());case"image":return EN.parse(t,o.parseComponentValue());case"length":var u=o.parseComponentValue();return Xm(u)?u:Au;case"length-percentage":var i=o.parseComponentValue();return Ec(i)?i:Au;case"time":return WW.parse(t,o.parseComponentValue())}break}},Qwe="data-html2canvas-debug",Hwe=function(t){var e=t.getAttribute(Qwe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},wI=function(t,e){var r=Hwe(t);return r===1||e===r},Ip=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,wI(r,3))debugger;this.styles=new Uwe(e,window.getComputedStyle(r,null)),BI(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=OC(this.context,r),wI(r,4)&&(this.flags|=16)}return t}(),Vwe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",IU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var T2=0;T2<IU.length;T2++)hx[IU.charCodeAt(T2)]=T2;var Gwe=function(t){var e=t.length*.75,r=t.length,n,s=0,o,c,u,i;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),g=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)o=hx[t.charCodeAt(n)],c=hx[t.charCodeAt(n+1)],u=hx[t.charCodeAt(n+2)],i=hx[t.charCodeAt(n+3)],g[s++]=o<<2|c>>4,g[s++]=(c&15)<<4|u>>2,g[s++]=(u&3)<<6|i&63;return A},qwe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},$we=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},l0=5,TN=11,F3=2,Wwe=TN-l0,KW=65536>>l0,Kwe=1<<l0,N3=Kwe-1,Xwe=1024>>l0,Ywe=KW+Xwe,Zwe=Ywe,Jwe=32,e2e=Zwe+Jwe,t2e=65536>>TN,r2e=1<<Wwe,n2e=r2e-1,LU=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},i2e=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},s2e=function(t,e){var r=Gwe(t),n=Array.isArray(r)?$we(r):new Uint32Array(r),s=Array.isArray(r)?qwe(r):new Uint16Array(r),o=24,c=LU(s,o/2,n[4]/2),u=n[5]===2?LU(s,(o+n[4])/2):i2e(n,Math.ceil((o+n[4])/4));return new o2e(n[0],n[1],n[2],n[3],c,u)},o2e=function(){function t(e,r,n,s,o,c){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=o,this.data=c}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>l0],r=(r<<F3)+(e&N3),this.data[r];if(e<=65535)return r=this.index[KW+(e-55296>>l0)],r=(r<<F3)+(e&N3),this.data[r];if(e<this.highStart)return r=e2e-t2e+(e>>TN),r=this.index[r],r+=e>>l0&n2e,r=this.index[r],r=(r<<F3)+(e&N3),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),FU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var I2=0;I2<FU.length;I2++)a2e[FU.charCodeAt(I2)]=I2;var l2e=1,P3=2,M3=3,NU=4,PU=5,c2e=7,MU=8,j3=9,k3=10,jU=11,kU=12,DU=13,OU=14,D3=15,u2e=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var o=t.charCodeAt(r++);(o&64512)===56320?e.push(((s&1023)<<10)+(o&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},h2e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,o="";++s<r;){var c=t[s];c<=65535?n.push(c):(c-=65536,n.push((c>>10)+55296,c%1024+56320)),(s+1===r||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},d2e=s2e(Vwe),Hd="",O3="",f2e=function(t){return d2e.get(t)},p2e=function(t,e,r){var n=r-2,s=e[n],o=e[r-1],c=e[r];if(o===P3&&c===M3)return Hd;if(o===P3||o===M3||o===NU||c===P3||c===M3||c===NU)return O3;if(o===MU&&[MU,j3,jU,kU].indexOf(c)!==-1||(o===jU||o===j3)&&(c===j3||c===k3)||(o===kU||o===k3)&&c===k3||c===DU||c===PU||c===c2e||o===l2e)return Hd;if(o===DU&&c===OU){for(;s===PU;)s=e[--n];if(s===OU)return Hd}if(o===D3&&c===D3){for(var u=0;s===D3;)u++,s=e[--n];if(u%2===0)return Hd}return O3},A2e=function(t){var e=u2e(t),r=e.length,n=0,s=0,o=e.map(f2e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var c=Hd;n<r&&(c=p2e(e,o,++n))===Hd;);if(c!==Hd||n===r){var u=h2e.apply(null,e.slice(s,n));return s=n,{value:u,done:!1}}return{done:!0,value:null}}}},m2e=function(t){for(var e=A2e(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},g2e=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),o=Math.round(s.height);if(t.body.removeChild(n),o===e)return!0}}return!1},y2e=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=RC(n.data).map(function(i){return Ac(i)}),o=0,c={},u=s.every(function(i,A){r.setStart(n,o),r.setEnd(n,o+i.length);var g=r.getBoundingClientRect();o+=i.length;var C=g.x>c.x||g.y>c.y;return c=g,A===0?!0:C});return t.body.removeChild(e),u},v2e=function(){return typeof new Image().crossOrigin<"u"},x2e=function(){return typeof new XMLHttpRequest().responseType=="string"},_2e=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},RU=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},b2e=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,o=e.toDataURL();s.src=o;var c=CI(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),UU(c).then(function(u){n.drawImage(u,0,0);var i=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var A=t.createElement("div");return A.style.backgroundImage="url("+o+")",A.style.height=r+"px",RU(i)?UU(CI(r,r,0,0,A)):Promise.reject(!1)}).then(function(u){return n.drawImage(u,0,0),RU(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},CI=function(t,e,r,n,s){var o="http://www.w3.org/2000/svg",c=document.createElementNS(o,"svg"),u=document.createElementNS(o,"foreignObject");return c.setAttributeNS(null,"width",t.toString()),c.setAttributeNS(null,"height",e.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",n.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(u),u.appendChild(s),c},UU=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},pu={get SUPPORT_RANGE_BOUNDS(){var t=g2e(document);return Object.defineProperty(pu,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=pu.SUPPORT_RANGE_BOUNDS&&y2e(document);return Object.defineProperty(pu,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=_2e(document);return Object.defineProperty(pu,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?b2e(document):Promise.resolve(!1);return Object.defineProperty(pu,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=v2e();return Object.defineProperty(pu,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=x2e();return Object.defineProperty(pu,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(pu,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(pu,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Kx=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),w2e=function(t,e,r,n){var s=B2e(e,r),o=[],c=0;return s.forEach(function(u){if(r.textDecorationLine.length||u.trim().length>0)if(pu.SUPPORT_RANGE_BOUNDS){var i=zU(n,c,u.length).getClientRects();if(i.length>1){var A=IN(u),g=0;A.forEach(function(B){o.push(new Kx(B,AA.fromDOMRectList(t,zU(n,g+c,B.length).getClientRects()))),g+=B.length})}else o.push(new Kx(u,AA.fromDOMRectList(t,i)))}else{var C=n.splitText(u.length);o.push(new Kx(u,C2e(t,n))),n=C}else pu.SUPPORT_RANGE_BOUNDS||(n=n.splitText(u.length));c+=u.length}),o},C2e=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var o=OC(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),o}}return AA.EMPTY},zU=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},IN=function(t){if(pu.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return m2e(t)},S2e=function(t,e){if(pu.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return T2e(t,e)},B2e=function(t,e){return e.letterSpacing!==0?IN(t):S2e(t,e)},E2e=[32,160,4961,65792,65793,4153,4241],T2e=function(t,e){for(var r=t_e(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,o=function(){if(s.value){var c=s.value.slice(),u=RC(c),i="";u.forEach(function(A){E2e.indexOf(A)===-1?i+=Ac(A):(i.length&&n.push(i),n.push(Ac(A)),i="")}),i.length&&n.push(i)}};!(s=r.next()).done;)o();return n},I2e=function(){function t(e,r,n){this.text=L2e(r.data,n.textTransform),this.textBounds=w2e(e,this.text,n,r)}return t}(),L2e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(F2e,N2e);case 2:return t.toUpperCase();default:return t}},F2e=/(^|\s|:|-|\(|\))([a-z])/g,N2e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},XW=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ip),YW=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ip),ZW=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this,o=new XMLSerializer,c=OC(r,n);return n.setAttribute("width",c.width+"px"),n.setAttribute("height",c.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ip),JW=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ip),SI=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ip),P2e=[{type:15,flags:0,unit:"px",number:3}],M2e=[{type:16,flags:0,number:50}],j2e=function(t){return t.width>t.height?new AA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new AA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},k2e=function(t){var e=t.type===D2e?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},B4="checkbox",E4="radio",D2e="password",QU=707406591,LN=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=k2e(n),(s.type===B4||s.type===E4)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=j2e(s.bounds)),s.type){case B4:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=P2e;break;case E4:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=M2e;break}return s}return e}(Ip),eK=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this,o=n.options[n.selectedIndex||0];return s.value=o&&o.text||"",s}return e}(Ip),tK=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ip),rK=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=iK(r,n.contentWindow.document.documentElement);var o=n.contentWindow.document.documentElement?$x(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):sA.TRANSPARENT,c=n.contentWindow.document.body?$x(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):sA.TRANSPARENT;s.backgroundColor=Dm(o)?Dm(c)?s.styles.backgroundColor:c:o}}catch{}return s}return e}(Ip),O2e=["OL","UL","MENU"],p5=function(t,e,r,n){for(var s=e.firstChild,o=void 0;s;s=o)if(o=s.nextSibling,sK(s)&&s.data.trim().length>0)r.textNodes.push(new I2e(t,s,r.styles));else if(Ry(s))if(cK(s)&&s.assignedNodes)s.assignedNodes().forEach(function(u){return p5(t,u,r,n)});else{var c=nK(t,s);c.styles.isVisible()&&(R2e(s,c,n)?c.flags|=4:U2e(c.styles)&&(c.flags|=2),O2e.indexOf(s.tagName)!==-1&&(c.flags|=8),r.elements.push(c),s.slot,s.shadowRoot?p5(t,s.shadowRoot,c,n):!T4(s)&&!oK(s)&&!I4(s)&&p5(t,s,c,n))}},nK=function(t,e){return EI(e)?new XW(t,e):aK(e)?new YW(t,e):oK(e)?new ZW(t,e):z2e(e)?new JW(t,e):Q2e(e)?new SI(t,e):H2e(e)?new LN(t,e):I4(e)?new eK(t,e):T4(e)?new tK(t,e):lK(e)?new rK(t,e):new Ip(t,e)},iK=function(t,e){var r=nK(t,e);return r.flags|=4,p5(t,e,r,r),r},R2e=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||FN(t)&&r.styles.isTransparent()},U2e=function(t){return t.isPositioned()||t.isFloating()},sK=function(t){return t.nodeType===Node.TEXT_NODE},Ry=function(t){return t.nodeType===Node.ELEMENT_NODE},BI=function(t){return Ry(t)&&typeof t.style<"u"&&!A5(t)},A5=function(t){return typeof t.className=="object"},z2e=function(t){return t.tagName==="LI"},Q2e=function(t){return t.tagName==="OL"},H2e=function(t){return t.tagName==="INPUT"},V2e=function(t){return t.tagName==="HTML"},oK=function(t){return t.tagName==="svg"},FN=function(t){return t.tagName==="BODY"},aK=function(t){return t.tagName==="CANVAS"},HU=function(t){return t.tagName==="VIDEO"},EI=function(t){return t.tagName==="IMG"},lK=function(t){return t.tagName==="IFRAME"},VU=function(t){return t.tagName==="STYLE"},G2e=function(t){return t.tagName==="SCRIPT"},T4=function(t){return t.tagName==="TEXTAREA"},I4=function(t){return t.tagName==="SELECT"},cK=function(t){return t.tagName==="SLOT"},GU=function(t){return t.tagName.indexOf("-")>0},q2e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,o=!0;n!==null&&n.forEach(function(u){var i=r.counters[u.counter];i&&u.increment!==0&&(o=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=u.increment)});var c=[];return o&&s.forEach(function(u){var i=r.counters[u.counter];c.push(u.counter),i||(i=r.counters[u.counter]=[]),i.push(u.reset)}),c},t}(),qU={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},$U={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$2e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},W2e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ly=function(t,e,r,n,s,o){return t<e||t>r?R_(t,s,o.length>0):n.integers.reduce(function(c,u,i){for(;t>=u;)t-=u,c+=n.values[i];return c},"")+o},uK=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},fc=function(t,e,r,n,s){var o=r-e+1;return(t<0?"-":"")+(uK(Math.abs(t),o,n,function(c){return Ac(Math.floor(c%o)+e)})+s)},Tg=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return uK(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Ay=1,YA=2,ZA=4,dx=8,Vp=function(t,e,r,n,s,o){if(t<-9999||t>9999)return R_(t,4,s.length>0);var c=Math.abs(t),u=s;if(c===0)return e[0]+u;for(var i=0;c>0&&i<=4;i++){var A=c%10;A===0&&Gc(o,Ay)&&u!==""?u=e[A]+u:A>1||A===1&&i===0||A===1&&i===1&&Gc(o,YA)||A===1&&i===1&&Gc(o,ZA)&&t>100||A===1&&i>1&&Gc(o,dx)?u=e[A]+(i>0?r[i-1]:"")+u:A===1&&i>0&&(u=r[i-1]+u),c=Math.floor(c/10)}return(t<0?n:"")+u},WU="",KU="",XU="",R3="",R_=function(t,e,r){var n=r?". ":"",s=r?"":"",o=r?", ":"",c=r?" ":"";switch(e){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var u=fc(t,48,57,!0,n);return u.length<4?"0"+u:u;case 4:return Tg(t,"",s);case 6:return ly(t,1,3999,qU,3,n).toLowerCase();case 7:return ly(t,1,3999,qU,3,n);case 8:return fc(t,945,969,!1,n);case 9:return fc(t,97,122,!1,n);case 10:return fc(t,65,90,!1,n);case 11:return fc(t,1632,1641,!0,n);case 12:case 49:return ly(t,1,9999,$U,3,n);case 35:return ly(t,1,9999,$U,3,n).toLowerCase();case 13:return fc(t,2534,2543,!0,n);case 14:case 30:return fc(t,6112,6121,!0,n);case 15:return Tg(t,"",s);case 16:return Tg(t,"",s);case 17:case 48:return Vp(t,"",WU,"",s,YA|ZA|dx);case 47:return Vp(t,"",KU,"",s,Ay|YA|ZA|dx);case 42:return Vp(t,"",WU,"",s,YA|ZA|dx);case 41:return Vp(t,"",KU,"",s,Ay|YA|ZA|dx);case 26:return Vp(t,"","",XU,s,0);case 25:return Vp(t,"","",XU,s,Ay|YA|ZA);case 31:return Vp(t,"","",R3,o,Ay|YA|ZA);case 33:return Vp(t,"","",R3,o,0);case 32:return Vp(t,"","",R3,o,Ay|YA|ZA);case 18:return fc(t,2406,2415,!0,n);case 20:return ly(t,1,19999,W2e,3,n);case 21:return fc(t,2790,2799,!0,n);case 22:return fc(t,2662,2671,!0,n);case 22:return ly(t,1,10999,$2e,3,n);case 23:return Tg(t,"");case 24:return Tg(t,"");case 27:return fc(t,3302,3311,!0,n);case 28:return Tg(t,"",s);case 29:return Tg(t,"",s);case 34:return fc(t,3792,3801,!0,n);case 37:return fc(t,6160,6169,!0,n);case 38:return fc(t,4160,4169,!0,n);case 39:return fc(t,2918,2927,!0,n);case 40:return fc(t,1776,1785,!0,n);case 43:return fc(t,3046,3055,!0,n);case 44:return fc(t,3174,3183,!0,n);case 45:return fc(t,3664,3673,!0,n);case 46:return fc(t,3872,3881,!0,n);case 3:default:return fc(t,48,57,!0,n)}},hK="data-html2canvas-ignore",YU=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new q2e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=K2e(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var o=e.defaultView.pageXOffset,c=e.defaultView.pageYOffset,u=s.contentWindow,i=u.document,A=Z2e(s).then(function(){return Ah(n,void 0,void 0,function(){var g,C;return Hu(this,function(B){switch(B.label){case 0:return this.scrolledElements.forEach(r5e),u&&(u.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==r.top||u.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-r.left,u.scrollY-r.top,0,0))),g=this.options.onclone,C=this.clonedReferenceElement,typeof C>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:i.fonts&&i.fonts.ready?[4,i.fonts.ready]:[3,2];case 1:B.sent(),B.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Y2e(i)]:[3,4];case 3:B.sent(),B.label=4;case 4:return typeof g=="function"?[2,Promise.resolve().then(function(){return g(i,C)}).then(function(){return s})]:[2,s]}})})});return i.open(),i.write(e5e(document.doctype)+"<html></html>"),t5e(this.referenceElement.ownerDocument,o,c),i.replaceChild(i.adoptNode(this.documentElement),i.documentElement),i.close(),A},t.prototype.createElementClone=function(e){if(wI(e,2))debugger;if(aK(e))return this.createCanvasClone(e);if(HU(e))return this.createVideoClone(e);if(VU(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return EI(r)&&(EI(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),GU(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return U3(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(o,c){return c&&typeof c.cssText=="string"?o+c.cssText:o},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),o.name!=="SecurityError")throw o}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var o=e.getContext("2d"),c=s.getContext("2d");if(c)if(!this.options.allowTaint&&o)c.putImageData(o.getImageData(0,0,e.width,e.height),0,0);else{var u=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(u){var i=u.getContextAttributes();(i==null?void 0:i.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}c.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!Ry(r)||!G2e(r)&&!r.hasAttribute(hK)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Ry(r)||!VU(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,o=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;o;o=o.nextSibling)if(Ry(o)&&cK(o)&&typeof o.assignedNodes=="function"){var c=o.assignedNodes();c.length&&c.forEach(function(u){return s.appendChildNode(r,u,n)})}else this.appendChildNode(r,o,n)},t.prototype.cloneNode=function(e,r){if(sK(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Ry(e)&&(BI(e)||A5(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var o=n.getComputedStyle(e),c=n.getComputedStyle(e,":before"),u=n.getComputedStyle(e,":after");this.referenceElement===e&&BI(s)&&(this.clonedReferenceElement=s),FN(s)&&s5e(s);var i=this.counters.parse(new TU(this.context,o)),A=this.resolvePseudoContent(e,s,c,Xx.BEFORE);GU(e)&&(r=!0),HU(e)||this.cloneChildNodes(e,s,r),A&&s.insertBefore(A,s.firstChild);var g=this.resolvePseudoContent(e,s,u,Xx.AFTER);return g&&s.appendChild(g),this.counters.pop(i),(o&&(this.options.copyStyles||A5(e))&&!lK(e)||r)&&U3(o,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(T4(e)||I4(e))&&(T4(s)||I4(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var o=this;if(n){var c=n.content,u=r.ownerDocument;if(!(!u||!c||c==="none"||c==="-moz-alt-content"||n.display==="none")){this.counters.parse(new TU(this.context,n));var i=new zwe(this.context,n),A=u.createElement("html2canvaspseudoelement");U3(n,A),i.content.forEach(function(C){if(C.type===0)A.appendChild(u.createTextNode(C.value));else if(C.type===22){var B=u.createElement("img");B.src=C.value,B.style.opacity="1",A.appendChild(B)}else if(C.type===18){if(C.name==="attr"){var S=C.values.filter(Fa);S.length&&A.appendChild(u.createTextNode(e.getAttribute(S[0].value)||""))}else if(C.name==="counter"){var P=C.values.filter(v1),j=P[0],R=P[1];if(j&&Fa(j)){var N=o.counters.getCounterValue(j.value),U=R&&Fa(R)?bI.parse(o.context,R.value):3;A.appendChild(u.createTextNode(R_(N,U,!1)))}}else if(C.name==="counters"){var $=C.values.filter(v1),j=$[0],J=$[1],R=$[2];if(j&&Fa(j)){var te=o.counters.getCounterValues(j.value),ue=R&&Fa(R)?bI.parse(o.context,R.value):3,oe=J&&J.type===0?J.value:"",K=te.map(function(Z){return R_(Z,ue,!1)}).join(oe);A.appendChild(u.createTextNode(K))}}}else if(C.type===20)switch(C.value){case"open-quote":A.appendChild(u.createTextNode(EU(i.quotes,o.quoteDepth++,!0)));break;case"close-quote":A.appendChild(u.createTextNode(EU(i.quotes,--o.quoteDepth,!1)));break;default:A.appendChild(u.createTextNode(C.value))}}),A.className=TI+" "+II;var g=s===Xx.BEFORE?" "+TI:" "+II;return A5(r)?r.className.baseValue+=g:r.className+=g,A}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Xx;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Xx||(Xx={}));var K2e=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(hK,"true"),t.body.appendChild(r),r},X2e=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},Y2e=function(t){return Promise.all([].slice.call(t.images,0).map(X2e))},Z2e=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var o=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(o),e(t))},50)}})},J2e=["all","d","content"],U3=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);J2e.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},e5e=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},t5e=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},r5e=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},n5e=":before",i5e=":after",TI="___html2canvas___pseudoelement_before",II="___html2canvas___pseudoelement_after",ZU=`{
    content: "" !important;
    display: none !important;
}`,s5e=function(t){o5e(t,"."+TI+n5e+ZU+`
         .`+II+i5e+ZU)},o5e=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},dK=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),a5e=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Q3(e)||h5e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Ah(this,void 0,void 0,function(){var r,n,s,o,c=this;return Hu(this,function(u){switch(u.label){case 0:return r=dK.isSameOrigin(e),n=!z3(e)&&this._options.useCORS===!0&&pu.SUPPORT_CORS_IMAGES&&!r,s=!z3(e)&&!r&&!Q3(e)&&typeof this._options.proxy=="string"&&pu.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!z3(e)&&!Q3(e)&&!s&&!n?[2]:(o=e,s?[4,this.proxy(o)]:[3,2]);case 1:o=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(i,A){var g=new Image;g.onload=function(){return i(g)},g.onerror=A,(d5e(o)||n)&&(g.crossOrigin="anonymous"),g.src=o,g.complete===!0&&setTimeout(function(){return i(g)},500),c._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(o,c){var u=pu.SUPPORT_RESPONSE_TYPE?"blob":"text",i=new XMLHttpRequest;i.onload=function(){if(i.status===200)if(u==="text")o(i.response);else{var C=new FileReader;C.addEventListener("load",function(){return o(C.result)},!1),C.addEventListener("error",function(B){return c(B)},!1),C.readAsDataURL(i.response)}else c("Failed to proxy resource "+s+" with status code "+i.status)},i.onerror=c;var A=n.indexOf("?")>-1?"&":"?";if(i.open("GET",""+n+A+"url="+encodeURIComponent(e)+"&responseType="+u),u!=="text"&&i instanceof XMLHttpRequest&&(i.responseType=u),r._options.imageTimeout){var g=r._options.imageTimeout;i.timeout=g,i.ontimeout=function(){return c("Timed out ("+g+"ms) proxying "+s)}}i.send()})},t}(),l5e=/^data:image\/svg\+xml/i,c5e=/^data:image\/.*;base64,/i,u5e=/^data:image\/.*/i,h5e=function(t){return pu.SUPPORT_SVG_DRAWING||!f5e(t)},z3=function(t){return u5e.test(t)},d5e=function(t){return c5e.test(t)},Q3=function(t){return t.substr(0,4)==="blob"},f5e=function(t){return t.substr(-3).toLowerCase()==="svg"||l5e.test(t)},ci=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),cy=function(t,e,r){return new ci(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},L2=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=cy(this.start,this.startControl,e),s=cy(this.startControl,this.endControl,e),o=cy(this.endControl,this.end,e),c=cy(n,s,e),u=cy(s,o,e),i=cy(c,u,e);return r?new t(this.start,n,c,i):new t(i,u,o,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Wd=function(t){return t.type===1},p5e=function(){function t(e){var r=e.styles,n=e.bounds,s=ux(r.borderTopLeftRadius,n.width,n.height),o=s[0],c=s[1],u=ux(r.borderTopRightRadius,n.width,n.height),i=u[0],A=u[1],g=ux(r.borderBottomRightRadius,n.width,n.height),C=g[0],B=g[1],S=ux(r.borderBottomLeftRadius,n.width,n.height),P=S[0],j=S[1],R=[];R.push((o+i)/n.width),R.push((P+C)/n.width),R.push((c+j)/n.height),R.push((A+B)/n.height);var N=Math.max.apply(Math,R);N>1&&(o/=N,c/=N,i/=N,A/=N,C/=N,B/=N,P/=N,j/=N);var U=n.width-i,$=n.height-B,J=n.width-C,te=n.height-j,ue=r.borderTopWidth,oe=r.borderRightWidth,K=r.borderBottomWidth,ce=r.borderLeftWidth,me=Za(r.paddingTop,e.bounds.width),Z=Za(r.paddingRight,e.bounds.width),Y=Za(r.paddingBottom,e.bounds.width),Le=Za(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||c>0?bl(n.left+ce/3,n.top+ue/3,o-ce/3,c-ue/3,ua.TOP_LEFT):new ci(n.left+ce/3,n.top+ue/3),this.topRightBorderDoubleOuterBox=o>0||c>0?bl(n.left+U,n.top+ue/3,i-oe/3,A-ue/3,ua.TOP_RIGHT):new ci(n.left+n.width-oe/3,n.top+ue/3),this.bottomRightBorderDoubleOuterBox=C>0||B>0?bl(n.left+J,n.top+$,C-oe/3,B-K/3,ua.BOTTOM_RIGHT):new ci(n.left+n.width-oe/3,n.top+n.height-K/3),this.bottomLeftBorderDoubleOuterBox=P>0||j>0?bl(n.left+ce/3,n.top+te,P-ce/3,j-K/3,ua.BOTTOM_LEFT):new ci(n.left+ce/3,n.top+n.height-K/3),this.topLeftBorderDoubleInnerBox=o>0||c>0?bl(n.left+ce*2/3,n.top+ue*2/3,o-ce*2/3,c-ue*2/3,ua.TOP_LEFT):new ci(n.left+ce*2/3,n.top+ue*2/3),this.topRightBorderDoubleInnerBox=o>0||c>0?bl(n.left+U,n.top+ue*2/3,i-oe*2/3,A-ue*2/3,ua.TOP_RIGHT):new ci(n.left+n.width-oe*2/3,n.top+ue*2/3),this.bottomRightBorderDoubleInnerBox=C>0||B>0?bl(n.left+J,n.top+$,C-oe*2/3,B-K*2/3,ua.BOTTOM_RIGHT):new ci(n.left+n.width-oe*2/3,n.top+n.height-K*2/3),this.bottomLeftBorderDoubleInnerBox=P>0||j>0?bl(n.left+ce*2/3,n.top+te,P-ce*2/3,j-K*2/3,ua.BOTTOM_LEFT):new ci(n.left+ce*2/3,n.top+n.height-K*2/3),this.topLeftBorderStroke=o>0||c>0?bl(n.left+ce/2,n.top+ue/2,o-ce/2,c-ue/2,ua.TOP_LEFT):new ci(n.left+ce/2,n.top+ue/2),this.topRightBorderStroke=o>0||c>0?bl(n.left+U,n.top+ue/2,i-oe/2,A-ue/2,ua.TOP_RIGHT):new ci(n.left+n.width-oe/2,n.top+ue/2),this.bottomRightBorderStroke=C>0||B>0?bl(n.left+J,n.top+$,C-oe/2,B-K/2,ua.BOTTOM_RIGHT):new ci(n.left+n.width-oe/2,n.top+n.height-K/2),this.bottomLeftBorderStroke=P>0||j>0?bl(n.left+ce/2,n.top+te,P-ce/2,j-K/2,ua.BOTTOM_LEFT):new ci(n.left+ce/2,n.top+n.height-K/2),this.topLeftBorderBox=o>0||c>0?bl(n.left,n.top,o,c,ua.TOP_LEFT):new ci(n.left,n.top),this.topRightBorderBox=i>0||A>0?bl(n.left+U,n.top,i,A,ua.TOP_RIGHT):new ci(n.left+n.width,n.top),this.bottomRightBorderBox=C>0||B>0?bl(n.left+J,n.top+$,C,B,ua.BOTTOM_RIGHT):new ci(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=P>0||j>0?bl(n.left,n.top+te,P,j,ua.BOTTOM_LEFT):new ci(n.left,n.top+n.height),this.topLeftPaddingBox=o>0||c>0?bl(n.left+ce,n.top+ue,Math.max(0,o-ce),Math.max(0,c-ue),ua.TOP_LEFT):new ci(n.left+ce,n.top+ue),this.topRightPaddingBox=i>0||A>0?bl(n.left+Math.min(U,n.width-oe),n.top+ue,U>n.width+oe?0:Math.max(0,i-oe),Math.max(0,A-ue),ua.TOP_RIGHT):new ci(n.left+n.width-oe,n.top+ue),this.bottomRightPaddingBox=C>0||B>0?bl(n.left+Math.min(J,n.width-ce),n.top+Math.min($,n.height-K),Math.max(0,C-oe),Math.max(0,B-K),ua.BOTTOM_RIGHT):new ci(n.left+n.width-oe,n.top+n.height-K),this.bottomLeftPaddingBox=P>0||j>0?bl(n.left+ce,n.top+Math.min(te,n.height-K),Math.max(0,P-ce),Math.max(0,j-K),ua.BOTTOM_LEFT):new ci(n.left+ce,n.top+n.height-K),this.topLeftContentBox=o>0||c>0?bl(n.left+ce+Le,n.top+ue+me,Math.max(0,o-(ce+Le)),Math.max(0,c-(ue+me)),ua.TOP_LEFT):new ci(n.left+ce+Le,n.top+ue+me),this.topRightContentBox=i>0||A>0?bl(n.left+Math.min(U,n.width+ce+Le),n.top+ue+me,U>n.width+ce+Le?0:i-ce+Le,A-(ue+me),ua.TOP_RIGHT):new ci(n.left+n.width-(oe+Z),n.top+ue+me),this.bottomRightContentBox=C>0||B>0?bl(n.left+Math.min(J,n.width-(ce+Le)),n.top+Math.min($,n.height+ue+me),Math.max(0,C-(oe+Z)),B-(K+Y),ua.BOTTOM_RIGHT):new ci(n.left+n.width-(oe+Z),n.top+n.height-(K+Y)),this.bottomLeftContentBox=P>0||j>0?bl(n.left+ce+Le,n.top+te,Math.max(0,P-(ce+Le)),j-(K+Y),ua.BOTTOM_LEFT):new ci(n.left+ce+Le,n.top+n.height-(K+Y))}return t}(),ua;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ua||(ua={}));var bl=function(t,e,r,n,s){var o=4*((Math.sqrt(2)-1)/3),c=r*o,u=n*o,i=t+r,A=e+n;switch(s){case ua.TOP_LEFT:return new L2(new ci(t,A),new ci(t,A-u),new ci(i-c,e),new ci(i,e));case ua.TOP_RIGHT:return new L2(new ci(t,e),new ci(t+c,e),new ci(i,A-u),new ci(i,A));case ua.BOTTOM_RIGHT:return new L2(new ci(i,e),new ci(i,e+u),new ci(t+c,A),new ci(t,A));case ua.BOTTOM_LEFT:default:return new L2(new ci(i,A),new ci(i-c,A),new ci(t,e+u),new ci(t,e))}},L4=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},A5e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},F4=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},m5e=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),F2=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),g5e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),y5e=function(t){return t.type===0},fK=function(t){return t.type===1},v5e=function(t){return t.type===2},JU=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},x5e=function(t,e,r,n,s){return t.map(function(o,c){switch(c){case 0:return o.add(e,r);case 1:return o.add(e+n,r);case 2:return o.add(e+n,r+s);case 3:return o.add(e,r+s)}return o})},pK=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),AK=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new p5e(this.container),this.container.styles.opacity<1&&this.effects.push(new g5e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new m5e(n,s,o))}if(this.container.styles.overflowX!==0){var c=L4(this.curves),u=F4(this.curves);JU(c,u)?this.effects.push(new F2(c,6)):(this.effects.push(new F2(c,2)),this.effects.push(new F2(u,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var o=n.effects.filter(function(i){return!fK(i)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,o),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var c=L4(n.curves),u=F4(n.curves);JU(c,u)||s.unshift(new F2(u,6))}}else s.unshift.apply(s,o);n=n.parent}return s.filter(function(i){return Gc(i.target,e)})},t}(),LI=function(t,e,r,n){t.container.elements.forEach(function(s){var o=Gc(s.flags,4),c=Gc(s.flags,2),u=new AK(s,t);Gc(s.styles.display,2048)&&n.push(u);var i=Gc(s.flags,8)?[]:n;if(o||c){var A=o||s.styles.isPositioned()?r:e,g=new pK(u);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var C=s.styles.zIndex.order;if(C<0){var B=0;A.negativeZIndex.some(function(P,j){return C>P.element.container.styles.zIndex.order?(B=j,!1):B>0}),A.negativeZIndex.splice(B,0,g)}else if(C>0){var S=0;A.positiveZIndex.some(function(P,j){return C>=P.element.container.styles.zIndex.order?(S=j+1,!1):S>0}),A.positiveZIndex.splice(S,0,g)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(g)}else s.styles.isFloating()?A.nonPositionedFloats.push(g):A.nonPositionedInlineLevel.push(g);LI(u,g,o?g:r,i)}else s.styles.isInlineLevel()?e.inlineLevel.push(u):e.nonInlineLevel.push(u),LI(u,e,r,i);Gc(s.flags,8)&&mK(s,i)})},mK=function(t,e){for(var r=t instanceof SI?t.start:1,n=t instanceof SI?t.reversed:!1,s=0;s<e.length;s++){var o=e[s];o.container instanceof JW&&typeof o.container.value=="number"&&o.container.value!==0&&(r=o.container.value),o.listValue=R_(r,o.container.styles.listStyleType,!0),r+=n?-1:1}},_5e=function(t){var e=new AK(t,null),r=new pK(e),n=[];return LI(e,r,r,n),mK(e.container,n),r},ez=function(t,e){switch(e){case 0:return Yd(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Yd(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Yd(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Yd(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},b5e=function(t,e){switch(e){case 0:return Yd(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Yd(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Yd(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Yd(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},w5e=function(t,e){switch(e){case 0:return Yd(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Yd(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Yd(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Yd(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},C5e=function(t,e){switch(e){case 0:return N2(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return N2(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return N2(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return N2(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},N2=function(t,e){var r=[];return Wd(t)?r.push(t.subdivide(.5,!1)):r.push(t),Wd(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Yd=function(t,e,r,n){var s=[];return Wd(t)?s.push(t.subdivide(.5,!1)):s.push(t),Wd(r)?s.push(r.subdivide(.5,!0)):s.push(r),Wd(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Wd(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},gK=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},N4=function(t){var e=t.styles,r=t.bounds,n=Za(e.paddingLeft,r.width),s=Za(e.paddingRight,r.width),o=Za(e.paddingTop,r.width),c=Za(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+o+c))},S5e=function(t,e){return t===0?e.bounds:t===2?N4(e):gK(e)},B5e=function(t,e){return t===0?e.bounds:t===2?N4(e):gK(e)},H3=function(t,e,r){var n=S5e(my(t.styles.backgroundOrigin,e),t),s=B5e(my(t.styles.backgroundClip,e),t),o=E5e(my(t.styles.backgroundSize,e),r,n),c=o[0],u=o[1],i=ux(my(t.styles.backgroundPosition,e),n.width-c,n.height-u),A=T5e(my(t.styles.backgroundRepeat,e),i,o,n,s),g=Math.round(n.left+i[0]),C=Math.round(n.top+i[1]);return[A,g,C,c,u]},uy=function(t){return Fa(t)&&t.value===Yy.AUTO},P2=function(t){return typeof t=="number"},E5e=function(t,e,r){var n=e[0],s=e[1],o=e[2],c=t[0],u=t[1];if(!c)return[0,0];if(Ec(c)&&u&&Ec(u))return[Za(c,r.width),Za(u,r.height)];var i=P2(o);if(Fa(c)&&(c.value===Yy.CONTAIN||c.value===Yy.COVER)){if(P2(o)){var A=r.width/r.height;return A<o!=(c.value===Yy.COVER)?[r.width,r.width/o]:[r.height*o,r.height]}return[r.width,r.height]}var g=P2(n),C=P2(s),B=g||C;if(uy(c)&&(!u||uy(u))){if(g&&C)return[n,s];if(!i&&!B)return[r.width,r.height];if(B&&i){var S=g?n:s*o,P=C?s:n/o;return[S,P]}var j=g?n:r.width,R=C?s:r.height;return[j,R]}if(i){var N=0,U=0;return Ec(c)?N=Za(c,r.width):Ec(u)&&(U=Za(u,r.height)),uy(c)?N=U*o:(!u||uy(u))&&(U=N/o),[N,U]}var $=null,J=null;if(Ec(c)?$=Za(c,r.width):u&&Ec(u)&&(J=Za(u,r.height)),$!==null&&(!u||uy(u))&&(J=g&&C?$/n*s:r.height),J!==null&&uy(c)&&($=g&&C?J/s*n:r.width),$!==null&&J!==null)return[$,J];throw new Error("Unable to calculate background-size for element")},my=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},T5e=function(t,e,r,n,s){var o=e[0],c=e[1],u=r[0],i=r[1];switch(t){case 2:return[new ci(Math.round(n.left),Math.round(n.top+c)),new ci(Math.round(n.left+n.width),Math.round(n.top+c)),new ci(Math.round(n.left+n.width),Math.round(i+n.top+c)),new ci(Math.round(n.left),Math.round(i+n.top+c))];case 3:return[new ci(Math.round(n.left+o),Math.round(n.top)),new ci(Math.round(n.left+o+u),Math.round(n.top)),new ci(Math.round(n.left+o+u),Math.round(n.height+n.top)),new ci(Math.round(n.left+o),Math.round(n.height+n.top))];case 1:return[new ci(Math.round(n.left+o),Math.round(n.top+c)),new ci(Math.round(n.left+o+u),Math.round(n.top+c)),new ci(Math.round(n.left+o+u),Math.round(n.top+c+i)),new ci(Math.round(n.left+o),Math.round(n.top+c+i))];default:return[new ci(Math.round(s.left),Math.round(s.top)),new ci(Math.round(s.left+s.width),Math.round(s.top)),new ci(Math.round(s.left+s.width),Math.round(s.height+s.top)),new ci(Math.round(s.left),Math.round(s.height+s.top))]}},I5e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",tz="Hidden Text",L5e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),o=this._document.createElement("span"),c=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",c.appendChild(n),s.src=I5e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",o.style.fontFamily=e,o.style.fontSize=r,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(tz)),n.appendChild(o),n.appendChild(s);var u=s.offsetTop-o.offsetTop+2;n.removeChild(o),n.appendChild(this._document.createTextNode(tz)),n.style.lineHeight="normal",s.style.verticalAlign="super";var i=s.offsetTop-n.offsetTop+2;return c.removeChild(n),{baseline:u,middle:i}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),yK=function(){function t(e,r){this.context=e,this.options=r}return t}(),F5e=1e4,N5e=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new L5e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),v5e(r)&&(this.ctx.globalAlpha=r.opacity),y5e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),fK(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Ah(this,void 0,void 0,function(){var n;return Hu(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Ah(this,void 0,void 0,function(){return Hu(this,function(n){switch(n.label){case 0:if(Gc(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var o=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var c=IN(r.text);c.reduce(function(u,i){return o.ctx.fillText(i,u,r.bounds.top+s),u+o.ctx.measureText(i).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),s=D5e(r.fontFamily).join(", "),o=Ab(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,o,s].join(" "),s,o]},e.prototype.renderTextNode=function(r,n){return Ah(this,void 0,void 0,function(){var s,o,c,u,i,A,g,C,B=this;return Hu(this,function(S){return s=this.createFontStyle(n),o=s[0],c=s[1],u=s[2],this.ctx.font=o,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",i=this.fontMetrics.getMetrics(c,u),A=i.baseline,g=i.middle,C=n.paintOrder,r.textBounds.forEach(function(P){C.forEach(function(j){switch(j){case 0:B.ctx.fillStyle=Zc(n.color),B.renderTextWithLetterSpacing(P,n.letterSpacing,A);var R=n.textShadow;R.length&&P.text.trim().length&&(R.slice(0).reverse().forEach(function(N){B.ctx.shadowColor=Zc(N.color),B.ctx.shadowOffsetX=N.offsetX.number*B.options.scale,B.ctx.shadowOffsetY=N.offsetY.number*B.options.scale,B.ctx.shadowBlur=N.blur.number,B.renderTextWithLetterSpacing(P,n.letterSpacing,A)}),B.ctx.shadowColor="",B.ctx.shadowOffsetX=0,B.ctx.shadowOffsetY=0,B.ctx.shadowBlur=0),n.textDecorationLine.length&&(B.ctx.fillStyle=Zc(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(N){switch(N){case 1:B.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top+A),P.bounds.width,1);break;case 2:B.ctx.fillRect(P.bounds.left,Math.round(P.bounds.top),P.bounds.width,1);break;case 3:B.ctx.fillRect(P.bounds.left,Math.ceil(P.bounds.top+g),P.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&P.text.trim().length&&(B.ctx.strokeStyle=Zc(n.webkitTextStrokeColor),B.ctx.lineWidth=n.webkitTextStrokeWidth,B.ctx.lineJoin=window.chrome?"miter":"round",B.ctx.strokeText(P.text,P.bounds.left,P.bounds.top+A)),B.ctx.strokeStyle="",B.ctx.lineWidth=0,B.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var o=N4(r),c=F4(n);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,o.left,o.top,o.width,o.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Ah(this,void 0,void 0,function(){var n,s,o,c,u,i,U,U,A,g,C,B,J,S,P,te,j,R,N,U,$,J,te;return Hu(this,function(ue){switch(ue.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,o=n.styles,c=0,u=n.textNodes,ue.label=1;case 1:return c<u.length?(i=u[c],[4,this.renderTextNode(i,o)]):[3,4];case 2:ue.sent(),ue.label=3;case 3:return c++,[3,1];case 4:if(!(n instanceof XW))return[3,8];ue.label=5;case 5:return ue.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return U=ue.sent(),this.renderReplacedElement(n,s,U),[3,8];case 7:return ue.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof YW&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof ZW))return[3,12];ue.label=9;case 9:return ue.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return U=ue.sent(),this.renderReplacedElement(n,s,U),[3,12];case 11:return ue.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof rK&&n.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,A.render(n.tree)]):[3,14];case 13:g=ue.sent(),n.width&&n.height&&this.ctx.drawImage(g,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),ue.label=14;case 14:if(n instanceof LN&&(C=Math.min(n.bounds.width,n.bounds.height),n.type===B4?n.checked&&(this.ctx.save(),this.path([new ci(n.bounds.left+C*.39363,n.bounds.top+C*.79),new ci(n.bounds.left+C*.16,n.bounds.top+C*.5549),new ci(n.bounds.left+C*.27347,n.bounds.top+C*.44071),new ci(n.bounds.left+C*.39694,n.bounds.top+C*.5649),new ci(n.bounds.left+C*.72983,n.bounds.top+C*.23),new ci(n.bounds.left+C*.84,n.bounds.top+C*.34085),new ci(n.bounds.left+C*.39363,n.bounds.top+C*.79)]),this.ctx.fillStyle=Zc(QU),this.ctx.fill(),this.ctx.restore()):n.type===E4&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+C/2,n.bounds.top+C/2,C/4,0,Math.PI*2,!0),this.ctx.fillStyle=Zc(QU),this.ctx.fill(),this.ctx.restore())),P5e(n)&&n.value.length){switch(B=this.createFontStyle(o),J=B[0],S=B[1],P=this.fontMetrics.getMetrics(J,S).baseline,this.ctx.font=J,this.ctx.fillStyle=Zc(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=j5e(n.styles.textAlign),te=N4(n),j=0,n.styles.textAlign){case 1:j+=te.width/2;break;case 2:j+=te.width;break}R=te.add(j,0,0,-te.height/2+1),this.ctx.save(),this.path([new ci(te.left,te.top),new ci(te.left+te.width,te.top),new ci(te.left+te.width,te.top+te.height),new ci(te.left,te.top+te.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Kx(n.value,R),o.letterSpacing,P),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Gc(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(N=n.styles.listStyleImage,N.type!==0)return[3,18];U=void 0,$=N.url,ue.label=15;case 15:return ue.trys.push([15,17,,18]),[4,this.context.cache.match($)];case 16:return U=ue.sent(),this.ctx.drawImage(U,n.bounds.left-(U.width+10),n.bounds.top),[3,18];case 17:return ue.sent(),this.context.logger.error("Error loading list-style-image "+$),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(J=this.createFontStyle(o)[0],this.ctx.font=J,this.ctx.fillStyle=Zc(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",te=new AA(n.bounds.left,n.bounds.top+Za(n.styles.paddingTop,n.bounds.width),n.bounds.width,SU(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Kx(r.listValue,te),o.letterSpacing,SU(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ue.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Ah(this,void 0,void 0,function(){var n,s,N,o,c,N,u,i,N,A,g,N,C,B,N,S,P,N,j,R,N;return Hu(this,function(U){switch(U.label){case 0:if(Gc(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:U.sent(),n=0,s=r.negativeZIndex,U.label=2;case 2:return n<s.length?(N=s[n],[4,this.renderStack(N)]):[3,5];case 3:U.sent(),U.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:U.sent(),o=0,c=r.nonInlineLevel,U.label=7;case 7:return o<c.length?(N=c[o],[4,this.renderNode(N)]):[3,10];case 8:U.sent(),U.label=9;case 9:return o++,[3,7];case 10:u=0,i=r.nonPositionedFloats,U.label=11;case 11:return u<i.length?(N=i[u],[4,this.renderStack(N)]):[3,14];case 12:U.sent(),U.label=13;case 13:return u++,[3,11];case 14:A=0,g=r.nonPositionedInlineLevel,U.label=15;case 15:return A<g.length?(N=g[A],[4,this.renderStack(N)]):[3,18];case 16:U.sent(),U.label=17;case 17:return A++,[3,15];case 18:C=0,B=r.inlineLevel,U.label=19;case 19:return C<B.length?(N=B[C],[4,this.renderNode(N)]):[3,22];case 20:U.sent(),U.label=21;case 21:return C++,[3,19];case 22:S=0,P=r.zeroOrAutoZIndexOrTransformedOrOpacity,U.label=23;case 23:return S<P.length?(N=P[S],[4,this.renderStack(N)]):[3,26];case 24:U.sent(),U.label=25;case 25:return S++,[3,23];case 26:j=0,R=r.positiveZIndex,U.label=27;case 27:return j<R.length?(N=R[j],[4,this.renderStack(N)]):[3,30];case 28:U.sent(),U.label=29;case 29:return j++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,o){var c=Wd(s)?s.start:s;o===0?n.ctx.moveTo(c.x,c.y):n.ctx.lineTo(c.x,c.y),Wd(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,o){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,o),this.ctx.fill(),this.ctx.translate(-s,-o)},e.prototype.resizeImage=function(r,n,s){var o;if(r.width===n&&r.height===s)return r;var c=(o=this.canvas.ownerDocument)!==null&&o!==void 0?o:document,u=c.createElement("canvas");u.width=Math.max(1,n),u.height=Math.max(1,s);var i=u.getContext("2d");return i.drawImage(r,0,0,r.width,r.height,0,0,n,s),u},e.prototype.renderBackgroundImage=function(r){return Ah(this,void 0,void 0,function(){var n,s,o,c,u,i;return Hu(this,function(A){switch(A.label){case 0:n=r.styles.backgroundImage.length-1,s=function(g){var C,B,S,me,De,Be,Le,_e,K,P,me,De,Be,Le,_e,j,R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe,it,ie,le,fe,be;return Hu(this,function(He){switch(He.label){case 0:if(g.type!==0)return[3,5];C=void 0,B=g.url,He.label=1;case 1:return He.trys.push([1,3,,4]),[4,o.context.cache.match(B)];case 2:return C=He.sent(),[3,4];case 3:return He.sent(),o.context.logger.error("Error loading background-image "+B),[3,4];case 4:return C&&(S=H3(r,n,[C.width,C.height,C.width/C.height]),me=S[0],De=S[1],Be=S[2],Le=S[3],_e=S[4],K=o.ctx.createPattern(o.resizeImage(C,Le,_e),"repeat"),o.renderRepeat(me,K,De,Be)),[3,6];case 5:ybe(g)?(P=H3(r,n,[null,null,null]),me=P[0],De=P[1],Be=P[2],Le=P[3],_e=P[4],j=fbe(g.angle,Le,_e),R=j[0],N=j[1],U=j[2],$=j[3],J=j[4],te=document.createElement("canvas"),te.width=Le,te.height=_e,ue=te.getContext("2d"),oe=ue.createLinearGradient(N,$,U,J),wU(g.stops,R).forEach(function(Je){return oe.addColorStop(Je.stop,Zc(Je.color))}),ue.fillStyle=oe,ue.fillRect(0,0,Le,_e),Le>0&&_e>0&&(K=o.ctx.createPattern(te,"repeat"),o.renderRepeat(me,K,De,Be))):vbe(g)&&(ce=H3(r,n,[null,null,null]),me=ce[0],Z=ce[1],Y=ce[2],Le=ce[3],_e=ce[4],Qe=g.position.length===0?[BN]:g.position,De=Za(Qe[0],Le),Be=Za(Qe[Qe.length-1],_e),xe=pbe(g,De,Be,Le,_e),ze=xe[0],Fe=xe[1],ze>0&&Fe>0&&(it=o.ctx.createRadialGradient(Z+De,Y+Be,0,Z+De,Y+Be,ze),wU(g.stops,ze*2).forEach(function(Je){return it.addColorStop(Je.stop,Zc(Je.color))}),o.path(me),o.ctx.fillStyle=it,ze!==Fe?(ie=r.bounds.left+.5*r.bounds.width,le=r.bounds.top+.5*r.bounds.height,fe=Fe/ze,be=1/fe,o.ctx.save(),o.ctx.translate(ie,le),o.ctx.transform(1,0,0,fe,0,0),o.ctx.translate(-ie,-le),o.ctx.fillRect(Z,be*(Y-le)+le,Le,_e*be),o.ctx.restore()):o.ctx.fill())),He.label=6;case 6:return n--,[2]}})},o=this,c=0,u=r.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return c<u.length?(i=u[c],[5,s(i)]):[3,4];case 2:A.sent(),A.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Ah(this,void 0,void 0,function(){return Hu(this,function(o){return this.path(ez(s,n)),this.ctx.fillStyle=Zc(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,o){return Ah(this,void 0,void 0,function(){var c,u;return Hu(this,function(i){switch(i.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,o)]:[3,2];case 1:return i.sent(),[2];case 2:return c=b5e(o,s),this.path(c),this.ctx.fillStyle=Zc(r),this.ctx.fill(),u=w5e(o,s),this.path(u),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Ah(this,void 0,void 0,function(){var n,s,o,c,u,i,A,g,C=this;return Hu(this,function(B){switch(B.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!Dm(n.backgroundColor)||n.backgroundImage.length,o=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],c=M5e(my(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),Dm(n.backgroundColor)||(this.ctx.fillStyle=Zc(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:B.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(S){C.ctx.save();var P=L4(r.curves),j=S.inset?0:F5e,R=x5e(P,-j+(S.inset?1:-1)*S.spread.number,(S.inset?1:-1)*S.spread.number,S.spread.number*(S.inset?-2:2),S.spread.number*(S.inset?-2:2));S.inset?(C.path(P),C.ctx.clip(),C.mask(R)):(C.mask(P),C.ctx.clip(),C.path(R)),C.ctx.shadowOffsetX=S.offsetX.number+j,C.ctx.shadowOffsetY=S.offsetY.number,C.ctx.shadowColor=Zc(S.color),C.ctx.shadowBlur=S.blur.number,C.ctx.fillStyle=S.inset?Zc(S.color):"rgba(0,0,0,1)",C.ctx.fill(),C.ctx.restore()}),B.label=2;case 2:u=0,i=0,A=o,B.label=3;case 3:return i<A.length?(g=A[i],g.style!==0&&!Dm(g.color)&&g.width>0?g.style!==2?[3,5]:[4,this.renderDashedDottedBorder(g.color,g.width,u,r.curves,2)]:[3,11]):[3,13];case 4:return B.sent(),[3,11];case 5:return g.style!==3?[3,7]:[4,this.renderDashedDottedBorder(g.color,g.width,u,r.curves,3)];case 6:return B.sent(),[3,11];case 7:return g.style!==4?[3,9]:[4,this.renderDoubleBorder(g.color,g.width,u,r.curves)];case 8:return B.sent(),[3,11];case 9:return[4,this.renderSolidBorder(g.color,u,r.curves)];case 10:B.sent(),B.label=11;case 11:u++,B.label=12;case 12:return i++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,o,c){return Ah(this,void 0,void 0,function(){var u,i,A,g,C,B,S,P,j,R,N,U,$,J,te,ue,te,ue;return Hu(this,function(oe){return this.ctx.save(),u=C5e(o,s),i=ez(o,s),c===2&&(this.path(i),this.ctx.clip()),Wd(i[0])?(A=i[0].start.x,g=i[0].start.y):(A=i[0].x,g=i[0].y),Wd(i[1])?(C=i[1].end.x,B=i[1].end.y):(C=i[1].x,B=i[1].y),s===0||s===2?S=Math.abs(A-C):S=Math.abs(g-B),this.ctx.beginPath(),c===3?this.formatPath(u):this.formatPath(i.slice(0,2)),P=n<3?n*3:n*2,j=n<3?n*2:n,c===3&&(P=n,j=n),R=!0,S<=P*2?R=!1:S<=P*2+j?(N=S/(2*P+j),P*=N,j*=N):(U=Math.floor((S+j)/(P+j)),$=(S-U*P)/(U-1),J=(S-(U+1)*P)/U,j=J<=0||Math.abs(j-$)<Math.abs(j-J)?$:J),R&&(c===3?this.ctx.setLineDash([0,P+j]):this.ctx.setLineDash([P,j])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Zc(r),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(Wd(i[0])&&(te=i[3],ue=i[0],this.ctx.beginPath(),this.formatPath([new ci(te.end.x,te.end.y),new ci(ue.start.x,ue.start.y)]),this.ctx.stroke()),Wd(i[1])&&(te=i[1],ue=i[2],this.ctx.beginPath(),this.formatPath([new ci(te.end.x,te.end.y),new ci(ue.start.x,ue.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Ah(this,void 0,void 0,function(){var n;return Hu(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Zc(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=_5e(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(yK),P5e=function(t){return t instanceof tK||t instanceof eK?!0:t instanceof LN&&t.type!==E4&&t.type!==B4},M5e=function(t,e){switch(t){case 0:return L4(e);case 2:return A5e(e);case 1:default:return F4(e)}},j5e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},k5e=["-apple-system","system-ui"],D5e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return k5e.indexOf(e)===-1}):t},O5e=function(t){Hf(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Ah(this,void 0,void 0,function(){var n,s;return Hu(this,function(o){switch(o.label){case 0:return n=CI(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,R5e(n)];case 1:return s=o.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Zc(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(yK),R5e=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},U5e=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,h2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,h2([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,h2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,h2([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),z5e=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new U5e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new a5e(this,e)}return t.instanceCount=1,t}(),WC=function(t,e){return e===void 0&&(e={}),Q5e(t,e)};typeof window<"u"&&dK.setContext(window);var Q5e=function(t,e){return Ah(void 0,void 0,void 0,function(){var r,n,s,o,c,u,i,A,g,C,B,S,P,j,R,N,U,$,J,te,oe,ue,oe,K,ce,me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe,it,ie,le,fe;return Hu(this,function(be){switch(be.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(K=e.allowTaint)!==null&&K!==void 0?K:!1,imageTimeout:(ce=e.imageTimeout)!==null&&ce!==void 0?ce:15e3,proxy:e.proxy,useCORS:(me=e.useCORS)!==null&&me!==void 0?me:!1},o=cI({logging:(Z=e.logging)!==null&&Z!==void 0?Z:!0,cache:e.cache},s),c={windowWidth:(Y=e.windowWidth)!==null&&Y!==void 0?Y:n.innerWidth,windowHeight:(Le=e.windowHeight)!==null&&Le!==void 0?Le:n.innerHeight,scrollX:(_e=e.scrollX)!==null&&_e!==void 0?_e:n.pageXOffset,scrollY:(Qe=e.scrollY)!==null&&Qe!==void 0?Qe:n.pageYOffset},u=new AA(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),i=new z5e(o,u),A=(De=e.foreignObjectRendering)!==null&&De!==void 0?De:!1,g={allowTaint:(Be=e.allowTaint)!==null&&Be!==void 0?Be:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:A,copyStyles:A},i.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),C=new YU(i,t,g),B=C.clonedReferenceElement,B?[4,C.toIFrame(r,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return S=be.sent(),P=FN(B)||V2e(B)?xxe(B.ownerDocument):OC(i,B),j=P.width,R=P.height,N=P.left,U=P.top,$=H5e(i,B,e.backgroundColor),J={canvas:e.canvas,backgroundColor:$,scale:(ze=(xe=e.scale)!==null&&xe!==void 0?xe:n.devicePixelRatio)!==null&&ze!==void 0?ze:1,x:((Fe=e.x)!==null&&Fe!==void 0?Fe:0)+N,y:((it=e.y)!==null&&it!==void 0?it:0)+U,width:(ie=e.width)!==null&&ie!==void 0?ie:Math.ceil(j),height:(le=e.height)!==null&&le!==void 0?le:Math.ceil(R)},A?(i.logger.debug("Document cloned, using foreign object rendering"),oe=new O5e(i,J),[4,oe.render(B)]):[3,3];case 2:return te=be.sent(),[3,5];case 3:return i.logger.debug("Document cloned, element located at "+N+","+U+" with size "+j+"x"+R+" using computed rendering"),i.logger.debug("Starting DOM parsing"),ue=iK(i,B),$===ue.styles.backgroundColor&&(ue.styles.backgroundColor=sA.TRANSPARENT),i.logger.debug("Starting renderer for element at "+J.x+","+J.y+" with size "+J.width+"x"+J.height),oe=new N5e(i,J),[4,oe.render(ue)];case 4:te=be.sent(),be.label=5;case 5:return(!((fe=e.removeContainer)!==null&&fe!==void 0)||fe)&&(YU.destroy(S)||i.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),i.logger.debug("Finished rendering"),[2,te]}})})},H5e=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?$x(t,getComputedStyle(n.documentElement).backgroundColor):sA.TRANSPARENT,o=n.body?$x(t,getComputedStyle(n.body).backgroundColor):sA.TRANSPARENT,c=typeof r=="string"?$x(t,r):r===null?sA.TRANSPARENT:4294967295;return e===n.documentElement?Dm(s)?Dm(o)?c:o:s:c};const NN=Object.freeze(Object.defineProperty({__proto__:null,default:WC},Symbol.toStringTag,{value:"Module"})),V5e=U4(NN);/*!
 * html2pdf.js v0.10.3
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */(function(t,e){(function(n,s){t.exports=s(vxe,V5e)})(self,function(r,n){return function(){var s={"./src/plugin/hyperlinks.js":function(i,A,g){g.r(A),g("./node_modules/core-js/modules/web.dom-collections.for-each.js"),g("./node_modules/core-js/modules/es.string.link.js");var C=g("./src/worker.js"),B=g("./src/utils.js"),S=[],P={toContainer:C.default.prototype.toContainer,toPdf:C.default.prototype.toPdf};C.default.prototype.toContainer=function(){return P.toContainer.call(this).then(function(){if(this.opt.enableLinks){var N=this.prop.container,U=N.querySelectorAll("a"),$=(0,B.unitConvert)(N.getBoundingClientRect(),this.prop.pageSize.k);S=[],Array.prototype.forEach.call(U,function(J){for(var te=J.getClientRects(),ue=0;ue<te.length;ue++){var oe=(0,B.unitConvert)(te[ue],this.prop.pageSize.k);oe.left-=$.left,oe.top-=$.top;var K=Math.floor(oe.top/this.prop.pageSize.inner.height)+1,ce=this.opt.margin[0]+oe.top%this.prop.pageSize.inner.height,me=this.opt.margin[1]+oe.left;S.push({page:K,top:ce,left:me,clientRect:oe,link:J})}},this)}})},C.default.prototype.toPdf=function(){return P.toPdf.call(this).then(function(){if(this.opt.enableLinks){S.forEach(function(U){this.prop.pdf.setPage(U.page),this.prop.pdf.link(U.left,U.top,U.clientRect.width,U.clientRect.height,{url:U.link.href})},this);var N=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(N)}})}},"./src/plugin/jspdf-plugin.js":function(i,A,g){g.r(A),g("./node_modules/core-js/modules/es.symbol.js"),g("./node_modules/core-js/modules/es.symbol.description.js"),g("./node_modules/core-js/modules/es.object.to-string.js"),g("./node_modules/core-js/modules/es.symbol.iterator.js"),g("./node_modules/core-js/modules/es.array.iterator.js"),g("./node_modules/core-js/modules/es.string.iterator.js"),g("./node_modules/core-js/modules/web.dom-collections.iterator.js");var C=g("jspdf");function B(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(j){return typeof j}:B=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},B(S)}C.jsPDF.getPageSize=function(S,P,j){if(B(S)==="object"){var R=S;S=R.orientation,P=R.unit||P,j=R.format||j}P=P||"mm",j=j||"a4",S=(""+(S||"P")).toLowerCase();var N=(""+j).toLowerCase(),U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(P){case"pt":var $=1;break;case"mm":var $=72/25.4;break;case"cm":var $=72/2.54;break;case"in":var $=72;break;case"px":var $=72/96;break;case"pc":var $=12;break;case"em":var $=12;break;case"ex":var $=6;break;default:throw"Invalid unit: "+P}if(U.hasOwnProperty(N))var J=U[N][1]/$,te=U[N][0]/$;else try{var J=j[1],te=j[0]}catch{throw new Error("Invalid format: "+j)}if(S==="p"||S==="portrait"){if(S="p",te>J){var ue=te;te=J,J=ue}}else if(S==="l"||S==="landscape"){if(S="l",J>te){var ue=te;te=J,J=ue}}else throw"Invalid orientation: "+S;var oe={width:te,height:J,unit:P,k:$};return oe},A.default=C.jsPDF},"./src/plugin/pagebreaks.js":function(i,A,g){g.r(A),g("./node_modules/core-js/modules/es.array.concat.js"),g("./node_modules/core-js/modules/es.array.slice.js"),g("./node_modules/core-js/modules/es.array.join.js"),g("./node_modules/core-js/modules/web.dom-collections.for-each.js"),g("./node_modules/core-js/modules/es.object.keys.js");var C=g("./src/worker.js"),B=g("./src/utils.js"),S={toContainer:C.default.prototype.toContainer};C.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},C.default.prototype.toContainer=function(){return S.toContainer.call(this).then(function(){var R=this.prop.container,N=this.prop.pageSize.inner.px.height,U=[].concat(this.opt.pagebreak.mode),$={avoidAll:U.indexOf("avoid-all")!==-1,css:U.indexOf("css")!==-1,legacy:U.indexOf("legacy")!==-1},J={},te=this;["before","after","avoid"].forEach(function(K){var ce=$.avoidAll&&K==="avoid";J[K]=ce?[]:[].concat(te.opt.pagebreak[K]||[]),J[K].length>0&&(J[K]=Array.prototype.slice.call(R.querySelectorAll(J[K].join(", "))))});var ue=R.querySelectorAll(".html2pdf__page-break");ue=Array.prototype.slice.call(ue);var oe=R.querySelectorAll("*");Array.prototype.forEach.call(oe,function(ce){var me={before:!1,after:$.legacy&&ue.indexOf(ce)!==-1,avoid:$.avoidAll};if($.css){var Z=window.getComputedStyle(ce),Y=["always","page","left","right"],Le=["avoid","avoid-page"];me={before:me.before||Y.indexOf(Z.breakBefore||Z.pageBreakBefore)!==-1,after:me.after||Y.indexOf(Z.breakAfter||Z.pageBreakAfter)!==-1,avoid:me.avoid||Le.indexOf(Z.breakInside||Z.pageBreakInside)!==-1}}Object.keys(me).forEach(function(ze){me[ze]=me[ze]||J[ze].indexOf(ce)!==-1});var _e=ce.getBoundingClientRect();if(me.avoid&&!me.before){var Qe=Math.floor(_e.top/N),De=Math.floor(_e.bottom/N),Be=Math.abs(_e.bottom-_e.top)/N;De!==Qe&&Be<=1&&(me.before=!0)}if(me.before){var xe=(0,B.createElement)("div",{style:{display:"block",height:N-_e.top%N+"px"}});ce.parentNode.insertBefore(xe,ce)}if(me.after){var xe=(0,B.createElement)("div",{style:{display:"block",height:N-_e.bottom%N+"px"}});ce.parentNode.insertBefore(xe,ce.nextSibling)}})})}},"./src/utils.js":function(i,A,g){g.r(A),g.d(A,{objType:function(){return B},createElement:function(){return S},cloneNode:function(){return P},unitConvert:function(){return j},toPx:function(){return R}}),g("./node_modules/core-js/modules/es.number.constructor.js"),g("./node_modules/core-js/modules/es.symbol.js"),g("./node_modules/core-js/modules/es.symbol.description.js"),g("./node_modules/core-js/modules/es.object.to-string.js"),g("./node_modules/core-js/modules/es.symbol.iterator.js"),g("./node_modules/core-js/modules/es.array.iterator.js"),g("./node_modules/core-js/modules/es.string.iterator.js"),g("./node_modules/core-js/modules/web.dom-collections.iterator.js");function C(N){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function($){return typeof $}:C=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},C(N)}var B=function(U){var $=C(U);return $==="undefined"?"undefined":$==="string"||U instanceof String?"string":$==="number"||U instanceof Number?"number":$==="function"||U instanceof Function?"function":U&&U.constructor===Array?"array":U&&U.nodeType===1?"element":$==="object"?"object":"unknown"},S=function(U,$){var J=document.createElement(U);if($.className&&(J.className=$.className),$.innerHTML){J.innerHTML=$.innerHTML;for(var te=J.getElementsByTagName("script"),ue=te.length;ue-- >0;null)te[ue].parentNode.removeChild(te[ue])}for(var oe in $.style)J.style[oe]=$.style[oe];return J},P=function N(U,$){for(var J=U.nodeType===3?document.createTextNode(U.nodeValue):U.cloneNode(!1),te=U.firstChild;te;te=te.nextSibling)($===!0||te.nodeType!==1||te.nodeName!=="SCRIPT")&&J.appendChild(N(te,$));return U.nodeType===1&&(U.nodeName==="CANVAS"?(J.width=U.width,J.height=U.height,J.getContext("2d").drawImage(U,0,0)):(U.nodeName==="TEXTAREA"||U.nodeName==="SELECT")&&(J.value=U.value),J.addEventListener("load",function(){J.scrollTop=U.scrollTop,J.scrollLeft=U.scrollLeft},!0)),J},j=function(U,$){if(B(U)==="number")return U*72/96/$;var J={};for(var te in U)J[te]=U[te]*72/96/$;return J},R=function(U,$){return Math.floor(U*$/72*96)}},"./src/worker.js":function(i,A,g){g.r(A),g("./node_modules/core-js/modules/es.object.assign.js"),g("./node_modules/core-js/modules/es.array.map.js"),g("./node_modules/core-js/modules/es.object.keys.js"),g("./node_modules/core-js/modules/es.array.concat.js"),g("./node_modules/core-js/modules/es.object.to-string.js"),g("./node_modules/core-js/modules/es.regexp.to-string.js"),g("./node_modules/core-js/modules/es.function.name.js"),g("./node_modules/core-js/modules/web.dom-collections.for-each.js");var C=g("jspdf"),B=g("html2canvas"),S=g("./src/utils.js"),P=g("./node_modules/es6-promise/dist/es6-promise.js"),j=g.n(P),R=j().Promise,N=function U($){var J=Object.assign(U.convert(R.resolve()),JSON.parse(JSON.stringify(U.template))),te=U.convert(R.resolve(),J);return te=te.setProgress(1,U,1,[U]),te=te.set($),te};N.prototype=Object.create(R.prototype),N.prototype.constructor=N,N.convert=function($,J){return $.__proto__=J||N.prototype,$},N.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},N.prototype.from=function($,J){function te(ue){switch((0,S.objType)(ue)){case"string":return"string";case"element":return ue.nodeName.toLowerCase&&ue.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(J=J||te($),J){case"string":return this.set({src:(0,S.createElement)("div",{innerHTML:$})});case"element":return this.set({src:$});case"canvas":return this.set({canvas:$});case"img":return this.set({img:$});default:return this.error("Unknown source type.")}})},N.prototype.to=function($){switch($){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},N.prototype.toContainer=function(){var $=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList($).then(function(){var te={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},ue={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};te.opacity=0;var oe=(0,S.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,S.createElement)("div",{className:"html2pdf__overlay",style:te}),this.prop.container=(0,S.createElement)("div",{className:"html2pdf__container",style:ue}),this.prop.container.appendChild(oe),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},N.prototype.toCanvas=function(){var $=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList($).then(function(){var te=Object.assign({},this.opt.html2canvas);return delete te.onrendered,B(this.prop.container,te)}).then(function(te){var ue=this.opt.html2canvas.onrendered||function(){};ue(te),this.prop.canvas=te,document.body.removeChild(this.prop.overlay)})},N.prototype.toImg=function(){var $=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList($).then(function(){var te=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=te})},N.prototype.toPdf=function(){var $=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList($).then(function(){var te=this.prop.canvas,ue=this.opt,oe=te.height,K=Math.floor(te.width*this.prop.pageSize.inner.ratio),ce=Math.ceil(oe/K),me=this.prop.pageSize.inner.height,Z=document.createElement("canvas"),Y=Z.getContext("2d");Z.width=te.width,Z.height=K,this.prop.pdf=this.prop.pdf||new C.jsPDF(ue.jsPDF);for(var Le=0;Le<ce;Le++){Le===ce-1&&oe%K!==0&&(Z.height=oe%K,me=Z.height*this.prop.pageSize.inner.width/Z.width);var _e=Z.width,Qe=Z.height;Y.fillStyle="white",Y.fillRect(0,0,_e,Qe),Y.drawImage(te,0,Le*K,_e,Qe,0,0,_e,Qe),Le&&this.prop.pdf.addPage();var De=Z.toDataURL("image/"+ue.image.type,ue.image.quality);this.prop.pdf.addImage(De,ue.image.type,ue.margin[1],ue.margin[0],this.prop.pageSize.inner.width,me)}})},N.prototype.output=function($,J,te){return te=te||"pdf",te.toLowerCase()==="img"||te.toLowerCase()==="image"?this.outputImg($,J):this.outputPdf($,J)},N.prototype.outputPdf=function($,J){var te=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(te).then(function(){return this.prop.pdf.output($,J)})},N.prototype.outputImg=function($,J){var te=[function(){return this.prop.img||this.toImg()}];return this.thenList(te).then(function(){switch($){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+$+'" is not supported.'}})},N.prototype.save=function($){var J=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(J).set($?{filename:$}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},N.prototype.set=function($){if((0,S.objType)($)!=="object")return this;var J=Object.keys($||{}).map(function(te){switch(te){case"margin":return this.setMargin.bind(this,$.margin);case"jsPDF":return function(){return this.opt.jsPDF=$.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,$.pageSize);default:return te in N.template.prop?function(){this.prop[te]=$[te]}:function(){this.opt[te]=$[te]}}},this);return this.then(function(){return this.thenList(J)})},N.prototype.get=function($,J){return this.then(function(){var ue=$ in N.template.prop?this.prop[$]:this.opt[$];return J?J(ue):ue})},N.prototype.setMargin=function($){return this.then(function(){switch((0,S.objType)($)){case"number":$=[$,$,$,$];case"array":if($.length===2&&($=[$[0],$[1],$[0],$[1]]),$.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=$}).then(this.setPageSize)},N.prototype.setPageSize=function($){return this.then(function(){$=$||C.jsPDF.getPageSize(this.opt.jsPDF),$.hasOwnProperty("inner")||($.inner={width:$.width-this.opt.margin[1]-this.opt.margin[3],height:$.height-this.opt.margin[0]-this.opt.margin[2]},$.inner.px={width:(0,S.toPx)($.inner.width,$.k),height:(0,S.toPx)($.inner.height,$.k)},$.inner.ratio=$.inner.height/$.inner.width),this.prop.pageSize=$})},N.prototype.setProgress=function($,J,te,ue){return $!=null&&(this.progress.val=$),J!=null&&(this.progress.state=J),te!=null&&(this.progress.n=te),ue!=null&&(this.progress.stack=ue),this.progress.ratio=this.progress.val/this.progress.state,this},N.prototype.updateProgress=function($,J,te,ue){return this.setProgress($?this.progress.val+$:null,J||null,te?this.progress.n+te:null,ue?this.progress.stack.concat(ue):null)},N.prototype.then=function($,J){var te=this;return this.thenCore($,J,function(oe,K){return te.updateProgress(null,null,1,[oe]),R.prototype.then.call(this,function(me){return te.updateProgress(null,oe),me}).then(oe,K).then(function(me){return te.updateProgress(1),me})})},N.prototype.thenCore=function($,J,te){te=te||R.prototype.then;var ue=this;$&&($=$.bind(ue)),J&&(J=J.bind(ue));var oe=R.toString().indexOf("[native code]")!==-1&&R.name==="Promise",K=oe?ue:N.convert(Object.assign({},ue),R.prototype),ce=te.call(K,$,J);return N.convert(ce,ue.__proto__)},N.prototype.thenExternal=function($,J){return R.prototype.then.call(this,$,J)},N.prototype.thenList=function($){var J=this;return $.forEach(function(ue){J=J.thenCore(ue)}),J},N.prototype.catch=function(U){U&&(U=U.bind(this));var $=R.prototype.catch.call(this,U);return N.convert($,this)},N.prototype.catchExternal=function($){return R.prototype.catch.call(this,$)},N.prototype.error=function($){return this.then(function(){throw new Error($)})},N.prototype.using=N.prototype.set,N.prototype.saveAs=N.prototype.save,N.prototype.export=N.prototype.output,N.prototype.run=N.prototype.then,A.default=N},"./node_modules/core-js/internals/a-function.js":function(i){i.exports=function(A){if(typeof A!="function")throw TypeError(String(A)+" is not a function");return A}},"./node_modules/core-js/internals/a-possible-prototype.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-object.js");i.exports=function(B){if(!C(B)&&B!==null)throw TypeError("Can't set "+String(B)+" as a prototype");return B}},"./node_modules/core-js/internals/add-to-unscopables.js":function(i,A,g){var C=g("./node_modules/core-js/internals/well-known-symbol.js"),B=g("./node_modules/core-js/internals/object-create.js"),S=g("./node_modules/core-js/internals/object-define-property.js"),P=C("unscopables"),j=Array.prototype;j[P]==null&&S.f(j,P,{configurable:!0,value:B(null)}),i.exports=function(R){j[P][R]=!0}},"./node_modules/core-js/internals/an-object.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-object.js");i.exports=function(B){if(!C(B))throw TypeError(String(B)+" is not an object");return B}},"./node_modules/core-js/internals/array-for-each.js":function(i,A,g){var C=g("./node_modules/core-js/internals/array-iteration.js").forEach,B=g("./node_modules/core-js/internals/array-method-is-strict.js"),S=B("forEach");i.exports=S?[].forEach:function(j){return C(this,j,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-indexed-object.js"),B=g("./node_modules/core-js/internals/to-length.js"),S=g("./node_modules/core-js/internals/to-absolute-index.js"),P=function(j){return function(R,N,U){var $=C(R),J=B($.length),te=S(U,J),ue;if(j&&N!=N){for(;J>te;)if(ue=$[te++],ue!=ue)return!0}else for(;J>te;te++)if((j||te in $)&&$[te]===N)return j||te||0;return!j&&-1}};i.exports={includes:P(!0),indexOf:P(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(i,A,g){var C=g("./node_modules/core-js/internals/function-bind-context.js"),B=g("./node_modules/core-js/internals/indexed-object.js"),S=g("./node_modules/core-js/internals/to-object.js"),P=g("./node_modules/core-js/internals/to-length.js"),j=g("./node_modules/core-js/internals/array-species-create.js"),R=[].push,N=function(U){var $=U==1,J=U==2,te=U==3,ue=U==4,oe=U==6,K=U==7,ce=U==5||oe;return function(me,Z,Y,Le){for(var _e=S(me),Qe=B(_e),De=C(Z,Y,3),Be=P(Qe.length),xe=0,ze=Le||j,Fe=$?ze(me,Be):J||K?ze(me,0):void 0,it,ie;Be>xe;xe++)if((ce||xe in Qe)&&(it=Qe[xe],ie=De(it,xe,_e),U))if($)Fe[xe]=ie;else if(ie)switch(U){case 3:return!0;case 5:return it;case 6:return xe;case 2:R.call(Fe,it)}else switch(U){case 4:return!1;case 7:R.call(Fe,it)}return oe?-1:te||ue?ue:Fe}};i.exports={forEach:N(0),map:N(1),filter:N(2),some:N(3),every:N(4),find:N(5),findIndex:N(6),filterReject:N(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js"),B=g("./node_modules/core-js/internals/well-known-symbol.js"),S=g("./node_modules/core-js/internals/engine-v8-version.js"),P=B("species");i.exports=function(j){return S>=51||!C(function(){var R=[],N=R.constructor={};return N[P]=function(){return{foo:1}},R[j](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=function(B,S){var P=[][B];return!!P&&C(function(){P.call(null,S||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-object.js"),B=g("./node_modules/core-js/internals/is-array.js"),S=g("./node_modules/core-js/internals/well-known-symbol.js"),P=S("species");i.exports=function(j){var R;return B(j)&&(R=j.constructor,typeof R=="function"&&(R===Array||B(R.prototype))?R=void 0:C(R)&&(R=R[P],R===null&&(R=void 0))),R===void 0?Array:R}},"./node_modules/core-js/internals/array-species-create.js":function(i,A,g){var C=g("./node_modules/core-js/internals/array-species-constructor.js");i.exports=function(B,S){return new(C(B))(S===0?0:S)}},"./node_modules/core-js/internals/classof-raw.js":function(i){var A={}.toString;i.exports=function(g){return A.call(g).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-string-tag-support.js"),B=g("./node_modules/core-js/internals/classof-raw.js"),S=g("./node_modules/core-js/internals/well-known-symbol.js"),P=S("toStringTag"),j=B(function(){return arguments}())=="Arguments",R=function(N,U){try{return N[U]}catch{}};i.exports=C?B:function(N){var U,$,J;return N===void 0?"Undefined":N===null?"Null":typeof($=R(U=Object(N),P))=="string"?$:j?B(U):(J=B(U))=="Object"&&typeof U.callee=="function"?"Arguments":J}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(i,A,g){var C=g("./node_modules/core-js/internals/has.js"),B=g("./node_modules/core-js/internals/own-keys.js"),S=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),P=g("./node_modules/core-js/internals/object-define-property.js");i.exports=function(j,R){for(var N=B(R),U=P.f,$=S.f,J=0;J<N.length;J++){var te=N[J];C(j,te)||U(j,te,$(R,te))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=!C(function(){function B(){}return B.prototype.constructor=null,Object.getPrototypeOf(new B)!==B.prototype})},"./node_modules/core-js/internals/create-html.js":function(i,A,g){var C=g("./node_modules/core-js/internals/require-object-coercible.js"),B=g("./node_modules/core-js/internals/to-string.js"),S=/"/g;i.exports=function(P,j,R,N){var U=B(C(P)),$="<"+j;return R!==""&&($+=" "+R+'="'+B(N).replace(S,"&quot;")+'"'),$+">"+U+"</"+j+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(i,A,g){var C=g("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,B=g("./node_modules/core-js/internals/object-create.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js"),P=g("./node_modules/core-js/internals/set-to-string-tag.js"),j=g("./node_modules/core-js/internals/iterators.js"),R=function(){return this};i.exports=function(N,U,$){var J=U+" Iterator";return N.prototype=B(C,{next:S(1,$)}),P(N,J,!1,!0),j[J]=R,N}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-define-property.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=C?function(P,j,R){return B.f(P,j,S(1,R))}:function(P,j,R){return P[j]=R,P}},"./node_modules/core-js/internals/create-property-descriptor.js":function(i){i.exports=function(A,g){return{enumerable:!(A&1),configurable:!(A&2),writable:!(A&4),value:g}}},"./node_modules/core-js/internals/create-property.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-property-key.js"),B=g("./node_modules/core-js/internals/object-define-property.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=function(P,j,R){var N=C(j);N in P?B.f(P,N,S(0,R)):P[N]=R}},"./node_modules/core-js/internals/define-iterator.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/create-iterator-constructor.js"),S=g("./node_modules/core-js/internals/object-get-prototype-of.js"),P=g("./node_modules/core-js/internals/object-set-prototype-of.js"),j=g("./node_modules/core-js/internals/set-to-string-tag.js"),R=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=g("./node_modules/core-js/internals/redefine.js"),U=g("./node_modules/core-js/internals/well-known-symbol.js"),$=g("./node_modules/core-js/internals/is-pure.js"),J=g("./node_modules/core-js/internals/iterators.js"),te=g("./node_modules/core-js/internals/iterators-core.js"),ue=te.IteratorPrototype,oe=te.BUGGY_SAFARI_ITERATORS,K=U("iterator"),ce="keys",me="values",Z="entries",Y=function(){return this};i.exports=function(Le,_e,Qe,De,Be,xe,ze){B(Qe,_e,De);var Fe=function(Ct){if(Ct===Be&&be)return be;if(!oe&&Ct in le)return le[Ct];switch(Ct){case ce:return function(){return new Qe(this,Ct)};case me:return function(){return new Qe(this,Ct)};case Z:return function(){return new Qe(this,Ct)}}return function(){return new Qe(this)}},it=_e+" Iterator",ie=!1,le=Le.prototype,fe=le[K]||le["@@iterator"]||Be&&le[Be],be=!oe&&fe||Fe(Be),He=_e=="Array"&&le.entries||fe,Je,tt,st;if(He&&(Je=S(He.call(new Le)),ue!==Object.prototype&&Je.next&&(!$&&S(Je)!==ue&&(P?P(Je,ue):typeof Je[K]!="function"&&R(Je,K,Y)),j(Je,it,!0,!0),$&&(J[it]=Y))),Be==me&&fe&&fe.name!==me&&(ie=!0,be=function(){return fe.call(this)}),(!$||ze)&&le[K]!==be&&R(le,K,be),J[_e]=be,Be)if(tt={values:Fe(me),keys:xe?be:Fe(ce),entries:Fe(Z)},ze)for(st in tt)(oe||ie||!(st in le))&&N(le,st,tt[st]);else C({target:_e,proto:!0,forced:oe||ie},tt);return tt}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(i,A,g){var C=g("./node_modules/core-js/internals/path.js"),B=g("./node_modules/core-js/internals/has.js"),S=g("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),P=g("./node_modules/core-js/internals/object-define-property.js").f;i.exports=function(j){var R=C.Symbol||(C.Symbol={});B(R,j)||P(R,j,{value:S.f(j)})}},"./node_modules/core-js/internals/descriptors.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=!C(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/is-object.js"),S=C.document,P=B(S)&&B(S.createElement);i.exports=function(j){return P?S.createElement(j):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(i){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(i,A,g){var C=g("./node_modules/core-js/internals/get-built-in.js");i.exports=C("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/engine-user-agent.js"),S=C.process,P=C.Deno,j=S&&S.versions||P&&P.version,R=j&&j.v8,N,U;R?(N=R.split("."),U=N[0]<4?1:N[0]+N[1]):B&&(N=B.match(/Edge\/(\d+)/),(!N||N[1]>=74)&&(N=B.match(/Chrome\/(\d+)/),N&&(U=N[1]))),i.exports=U&&+U},"./node_modules/core-js/internals/enum-bug-keys.js":function(i){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,S=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),P=g("./node_modules/core-js/internals/redefine.js"),j=g("./node_modules/core-js/internals/set-global.js"),R=g("./node_modules/core-js/internals/copy-constructor-properties.js"),N=g("./node_modules/core-js/internals/is-forced.js");i.exports=function(U,$){var J=U.target,te=U.global,ue=U.stat,oe,K,ce,me,Z,Y;if(te?K=C:ue?K=C[J]||j(J,{}):K=(C[J]||{}).prototype,K)for(ce in $){if(Z=$[ce],U.noTargetGet?(Y=B(K,ce),me=Y&&Y.value):me=K[ce],oe=N(te?ce:J+(ue?".":"#")+ce,U.forced),!oe&&me!==void 0){if(typeof Z==typeof me)continue;R(Z,me)}(U.sham||me&&me.sham)&&S(Z,"sham",!0),P(K,ce,Z,U)}}},"./node_modules/core-js/internals/fails.js":function(i){i.exports=function(A){try{return!!A()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(i,A,g){var C=g("./node_modules/core-js/internals/a-function.js");i.exports=function(B,S,P){if(C(B),S===void 0)return B;switch(P){case 0:return function(){return B.call(S)};case 1:return function(j){return B.call(S,j)};case 2:return function(j,R){return B.call(S,j,R)};case 3:return function(j,R,N){return B.call(S,j,R,N)}}return function(){return B.apply(S,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=function(S){return typeof S=="function"?S:void 0};i.exports=function(S,P){return arguments.length<2?B(C[S]):C[S]&&C[S][P]}},"./node_modules/core-js/internals/global.js":function(i){var A=function(g){return g&&g.Math==Math&&g};i.exports=A(typeof globalThis=="object"&&globalThis)||A(typeof window=="object"&&window)||A(typeof self=="object"&&self)||A(typeof Ho=="object"&&Ho)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-object.js"),B={}.hasOwnProperty;i.exports=Object.hasOwn||function(P,j){return B.call(C(P),j)}},"./node_modules/core-js/internals/hidden-keys.js":function(i){i.exports={}},"./node_modules/core-js/internals/html.js":function(i,A,g){var C=g("./node_modules/core-js/internals/get-built-in.js");i.exports=C("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/fails.js"),S=g("./node_modules/core-js/internals/document-create-element.js");i.exports=!C&&!B(function(){return Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js"),B=g("./node_modules/core-js/internals/classof-raw.js"),S="".split;i.exports=C(function(){return!Object("z").propertyIsEnumerable(0)})?function(P){return B(P)=="String"?S.call(P,""):Object(P)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-object.js"),B=g("./node_modules/core-js/internals/object-set-prototype-of.js");i.exports=function(S,P,j){var R,N;return B&&typeof(R=P.constructor)=="function"&&R!==j&&C(N=R.prototype)&&N!==j.prototype&&B(S,N),S}},"./node_modules/core-js/internals/inspect-source.js":function(i,A,g){var C=g("./node_modules/core-js/internals/shared-store.js"),B=Function.toString;typeof C.inspectSource!="function"&&(C.inspectSource=function(S){return B.call(S)}),i.exports=C.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(i,A,g){var C=g("./node_modules/core-js/internals/native-weak-map.js"),B=g("./node_modules/core-js/internals/global.js"),S=g("./node_modules/core-js/internals/is-object.js"),P=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=g("./node_modules/core-js/internals/has.js"),R=g("./node_modules/core-js/internals/shared-store.js"),N=g("./node_modules/core-js/internals/shared-key.js"),U=g("./node_modules/core-js/internals/hidden-keys.js"),$="Object already initialized",J=B.WeakMap,te,ue,oe,K=function(Qe){return oe(Qe)?ue(Qe):te(Qe,{})},ce=function(Qe){return function(De){var Be;if(!S(De)||(Be=ue(De)).type!==Qe)throw TypeError("Incompatible receiver, "+Qe+" required");return Be}};if(C||R.state){var me=R.state||(R.state=new J),Z=me.get,Y=me.has,Le=me.set;te=function(Qe,De){if(Y.call(me,Qe))throw new TypeError($);return De.facade=Qe,Le.call(me,Qe,De),De},ue=function(Qe){return Z.call(me,Qe)||{}},oe=function(Qe){return Y.call(me,Qe)}}else{var _e=N("state");U[_e]=!0,te=function(Qe,De){if(j(Qe,_e))throw new TypeError($);return De.facade=Qe,P(Qe,_e,De),De},ue=function(Qe){return j(Qe,_e)?Qe[_e]:{}},oe=function(Qe){return j(Qe,_e)}}i.exports={set:te,get:ue,has:oe,enforce:K,getterFor:ce}},"./node_modules/core-js/internals/is-array.js":function(i,A,g){var C=g("./node_modules/core-js/internals/classof-raw.js");i.exports=Array.isArray||function(S){return C(S)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js"),B=/#|\.prototype\./,S=function(U,$){var J=j[P(U)];return J==N?!0:J==R?!1:typeof $=="function"?C($):!!$},P=S.normalize=function(U){return String(U).replace(B,".").toLowerCase()},j=S.data={},R=S.NATIVE="N",N=S.POLYFILL="P";i.exports=S},"./node_modules/core-js/internals/is-object.js":function(i){i.exports=function(A){return typeof A=="object"?A!==null:typeof A=="function"}},"./node_modules/core-js/internals/is-pure.js":function(i){i.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(i,A,g){var C=g("./node_modules/core-js/internals/get-built-in.js"),B=g("./node_modules/core-js/internals/use-symbol-as-uid.js");i.exports=B?function(S){return typeof S=="symbol"}:function(S){var P=C("Symbol");return typeof P=="function"&&Object(S)instanceof P}},"./node_modules/core-js/internals/iterators-core.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js"),B=g("./node_modules/core-js/internals/object-get-prototype-of.js"),S=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),P=g("./node_modules/core-js/internals/has.js"),j=g("./node_modules/core-js/internals/well-known-symbol.js"),R=g("./node_modules/core-js/internals/is-pure.js"),N=j("iterator"),U=!1,$=function(){return this},J,te,ue;[].keys&&(ue=[].keys(),"next"in ue?(te=B(B(ue)),te!==Object.prototype&&(J=te)):U=!0);var oe=J==null||C(function(){var K={};return J[N].call(K)!==K});oe&&(J={}),(!R||oe)&&!P(J,N)&&S(J,N,$),i.exports={IteratorPrototype:J,BUGGY_SAFARI_ITERATORS:U}},"./node_modules/core-js/internals/iterators.js":function(i){i.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(i,A,g){var C=g("./node_modules/core-js/internals/engine-v8-version.js"),B=g("./node_modules/core-js/internals/fails.js");i.exports=!!Object.getOwnPropertySymbols&&!B(function(){var S=Symbol();return!String(S)||!(Object(S)instanceof Symbol)||!Symbol.sham&&C&&C<41})},"./node_modules/core-js/internals/native-weak-map.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/inspect-source.js"),S=C.WeakMap;i.exports=typeof S=="function"&&/native code/.test(B(S))},"./node_modules/core-js/internals/object-assign.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/fails.js"),S=g("./node_modules/core-js/internals/object-keys.js"),P=g("./node_modules/core-js/internals/object-get-own-property-symbols.js"),j=g("./node_modules/core-js/internals/object-property-is-enumerable.js"),R=g("./node_modules/core-js/internals/to-object.js"),N=g("./node_modules/core-js/internals/indexed-object.js"),U=Object.assign,$=Object.defineProperty;i.exports=!U||B(function(){if(C&&U({b:1},U($({},"a",{enumerable:!0,get:function(){$(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var J={},te={},ue=Symbol(),oe="abcdefghijklmnopqrst";return J[ue]=7,oe.split("").forEach(function(K){te[K]=K}),U({},J)[ue]!=7||S(U({},te)).join("")!=oe})?function(te,ue){for(var oe=R(te),K=arguments.length,ce=1,me=P.f,Z=j.f;K>ce;)for(var Y=N(arguments[ce++]),Le=me?S(Y).concat(me(Y)):S(Y),_e=Le.length,Qe=0,De;_e>Qe;)De=Le[Qe++],(!C||Z.call(Y,De))&&(oe[De]=Y[De]);return oe}:U},"./node_modules/core-js/internals/object-create.js":function(i,A,g){var C=g("./node_modules/core-js/internals/an-object.js"),B=g("./node_modules/core-js/internals/object-define-properties.js"),S=g("./node_modules/core-js/internals/enum-bug-keys.js"),P=g("./node_modules/core-js/internals/hidden-keys.js"),j=g("./node_modules/core-js/internals/html.js"),R=g("./node_modules/core-js/internals/document-create-element.js"),N=g("./node_modules/core-js/internals/shared-key.js"),U=">",$="<",J="prototype",te="script",ue=N("IE_PROTO"),oe=function(){},K=function(Le){return $+te+U+Le+$+"/"+te+U},ce=function(Le){Le.write(K("")),Le.close();var _e=Le.parentWindow.Object;return Le=null,_e},me=function(){var Le=R("iframe"),_e="java"+te+":",Qe;if(Le.style)return Le.style.display="none",j.appendChild(Le),Le.src=String(_e),Qe=Le.contentWindow.document,Qe.open(),Qe.write(K("document.F=Object")),Qe.close(),Qe.F},Z,Y=function(){try{Z=new ActiveXObject("htmlfile")}catch{}Y=document.domain&&Z?ce(Z):me()||ce(Z);for(var Le=S.length;Le--;)delete Y[J][S[Le]];return Y()};P[ue]=!0,i.exports=Object.create||function(_e,Qe){var De;return _e!==null?(oe[J]=C(_e),De=new oe,oe[J]=null,De[ue]=_e):De=Y(),Qe===void 0?De:B(De,Qe)}},"./node_modules/core-js/internals/object-define-properties.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-define-property.js"),S=g("./node_modules/core-js/internals/an-object.js"),P=g("./node_modules/core-js/internals/object-keys.js");i.exports=C?Object.defineProperties:function(R,N){S(R);for(var U=P(N),$=U.length,J=0,te;$>J;)B.f(R,te=U[J++],N[te]);return R}},"./node_modules/core-js/internals/object-define-property.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/ie8-dom-define.js"),S=g("./node_modules/core-js/internals/an-object.js"),P=g("./node_modules/core-js/internals/to-property-key.js"),j=Object.defineProperty;A.f=C?j:function(N,U,$){if(S(N),U=P(U),S($),B)try{return j(N,U,$)}catch{}if("get"in $||"set"in $)throw TypeError("Accessors not supported");return"value"in $&&(N[U]=$.value),N}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-property-is-enumerable.js"),S=g("./node_modules/core-js/internals/create-property-descriptor.js"),P=g("./node_modules/core-js/internals/to-indexed-object.js"),j=g("./node_modules/core-js/internals/to-property-key.js"),R=g("./node_modules/core-js/internals/has.js"),N=g("./node_modules/core-js/internals/ie8-dom-define.js"),U=Object.getOwnPropertyDescriptor;A.f=C?U:function(J,te){if(J=P(J),te=j(te),N)try{return U(J,te)}catch{}if(R(J,te))return S(!B.f.call(J,te),J[te])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-indexed-object.js"),B=g("./node_modules/core-js/internals/object-get-own-property-names.js").f,S={}.toString,P=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],j=function(R){try{return B(R)}catch{return P.slice()}};i.exports.f=function(N){return P&&S.call(N)=="[object Window]"?j(N):B(C(N))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(i,A,g){var C=g("./node_modules/core-js/internals/object-keys-internal.js"),B=g("./node_modules/core-js/internals/enum-bug-keys.js"),S=B.concat("length","prototype");A.f=Object.getOwnPropertyNames||function(j){return C(j,S)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(i,A){A.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(i,A,g){var C=g("./node_modules/core-js/internals/has.js"),B=g("./node_modules/core-js/internals/to-object.js"),S=g("./node_modules/core-js/internals/shared-key.js"),P=g("./node_modules/core-js/internals/correct-prototype-getter.js"),j=S("IE_PROTO"),R=Object.prototype;i.exports=P?Object.getPrototypeOf:function(N){return N=B(N),C(N,j)?N[j]:typeof N.constructor=="function"&&N instanceof N.constructor?N.constructor.prototype:N instanceof Object?R:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(i,A,g){var C=g("./node_modules/core-js/internals/has.js"),B=g("./node_modules/core-js/internals/to-indexed-object.js"),S=g("./node_modules/core-js/internals/array-includes.js").indexOf,P=g("./node_modules/core-js/internals/hidden-keys.js");i.exports=function(j,R){var N=B(j),U=0,$=[],J;for(J in N)!C(P,J)&&C(N,J)&&$.push(J);for(;R.length>U;)C(N,J=R[U++])&&(~S($,J)||$.push(J));return $}},"./node_modules/core-js/internals/object-keys.js":function(i,A,g){var C=g("./node_modules/core-js/internals/object-keys-internal.js"),B=g("./node_modules/core-js/internals/enum-bug-keys.js");i.exports=Object.keys||function(P){return C(P,B)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(i,A){var g={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,B=C&&!g.call({1:2},1);A.f=B?function(P){var j=C(this,P);return!!j&&j.enumerable}:g},"./node_modules/core-js/internals/object-set-prototype-of.js":function(i,A,g){var C=g("./node_modules/core-js/internals/an-object.js"),B=g("./node_modules/core-js/internals/a-possible-prototype.js");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var S=!1,P={},j;try{j=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,j.call(P,[]),S=P instanceof Array}catch{}return function(N,U){return C(N),B(U),S?j.call(N,U):N.__proto__=U,N}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-string-tag-support.js"),B=g("./node_modules/core-js/internals/classof.js");i.exports=C?{}.toString:function(){return"[object "+B(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-object.js");i.exports=function(B,S){var P,j;if(S==="string"&&typeof(P=B.toString)=="function"&&!C(j=P.call(B))||typeof(P=B.valueOf)=="function"&&!C(j=P.call(B))||S!=="string"&&typeof(P=B.toString)=="function"&&!C(j=P.call(B)))return j;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(i,A,g){var C=g("./node_modules/core-js/internals/get-built-in.js"),B=g("./node_modules/core-js/internals/object-get-own-property-names.js"),S=g("./node_modules/core-js/internals/object-get-own-property-symbols.js"),P=g("./node_modules/core-js/internals/an-object.js");i.exports=C("Reflect","ownKeys")||function(R){var N=B.f(P(R)),U=S.f;return U?N.concat(U(R)):N}},"./node_modules/core-js/internals/path.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js");i.exports=C},"./node_modules/core-js/internals/redefine.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),S=g("./node_modules/core-js/internals/has.js"),P=g("./node_modules/core-js/internals/set-global.js"),j=g("./node_modules/core-js/internals/inspect-source.js"),R=g("./node_modules/core-js/internals/internal-state.js"),N=R.get,U=R.enforce,$=String(String).split("String");(i.exports=function(J,te,ue,oe){var K=oe?!!oe.unsafe:!1,ce=oe?!!oe.enumerable:!1,me=oe?!!oe.noTargetGet:!1,Z;if(typeof ue=="function"&&(typeof te=="string"&&!S(ue,"name")&&B(ue,"name",te),Z=U(ue),Z.source||(Z.source=$.join(typeof te=="string"?te:""))),J===C){ce?J[te]=ue:P(te,ue);return}else K?!me&&J[te]&&(ce=!0):delete J[te];ce?J[te]=ue:B(J,te,ue)})(Function.prototype,"toString",function(){return typeof this=="function"&&N(this).source||j(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(i,A,g){var C=g("./node_modules/core-js/internals/an-object.js");i.exports=function(){var B=C(this),S="";return B.global&&(S+="g"),B.ignoreCase&&(S+="i"),B.multiline&&(S+="m"),B.dotAll&&(S+="s"),B.unicode&&(S+="u"),B.sticky&&(S+="y"),S}},"./node_modules/core-js/internals/require-object-coercible.js":function(i){i.exports=function(A){if(A==null)throw TypeError("Can't call method on "+A);return A}},"./node_modules/core-js/internals/set-global.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js");i.exports=function(B,S){try{Object.defineProperty(C,B,{value:S,configurable:!0,writable:!0})}catch{C[B]=S}return S}},"./node_modules/core-js/internals/set-to-string-tag.js":function(i,A,g){var C=g("./node_modules/core-js/internals/object-define-property.js").f,B=g("./node_modules/core-js/internals/has.js"),S=g("./node_modules/core-js/internals/well-known-symbol.js"),P=S("toStringTag");i.exports=function(j,R,N){j&&!B(j=N?j:j.prototype,P)&&C(j,P,{configurable:!0,value:R})}},"./node_modules/core-js/internals/shared-key.js":function(i,A,g){var C=g("./node_modules/core-js/internals/shared.js"),B=g("./node_modules/core-js/internals/uid.js"),S=C("keys");i.exports=function(P){return S[P]||(S[P]=B(P))}},"./node_modules/core-js/internals/shared-store.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/set-global.js"),S="__core-js_shared__",P=C[S]||B(S,{});i.exports=P},"./node_modules/core-js/internals/shared.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-pure.js"),B=g("./node_modules/core-js/internals/shared-store.js");(i.exports=function(S,P){return B[S]||(B[S]=P!==void 0?P:{})})("versions",[]).push({version:"3.16.0",mode:C?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(i,A,g){var C=g("./node_modules/core-js/internals/fails.js");i.exports=function(B){return C(function(){var S=""[B]('"');return S!==S.toLowerCase()||S.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-integer.js"),B=g("./node_modules/core-js/internals/to-string.js"),S=g("./node_modules/core-js/internals/require-object-coercible.js"),P=function(j){return function(R,N){var U=B(S(R)),$=C(N),J=U.length,te,ue;return $<0||$>=J?j?"":void 0:(te=U.charCodeAt($),te<55296||te>56319||$+1===J||(ue=U.charCodeAt($+1))<56320||ue>57343?j?U.charAt($):te:j?U.slice($,$+2):(te-55296<<10)+(ue-56320)+65536)}};i.exports={codeAt:P(!1),charAt:P(!0)}},"./node_modules/core-js/internals/string-trim.js":function(i,A,g){var C=g("./node_modules/core-js/internals/require-object-coercible.js"),B=g("./node_modules/core-js/internals/to-string.js"),S=g("./node_modules/core-js/internals/whitespaces.js"),P="["+S+"]",j=RegExp("^"+P+P+"*"),R=RegExp(P+P+"*$"),N=function(U){return function($){var J=B(C($));return U&1&&(J=J.replace(j,"")),U&2&&(J=J.replace(R,"")),J}};i.exports={start:N(1),end:N(2),trim:N(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-integer.js"),B=Math.max,S=Math.min;i.exports=function(P,j){var R=C(P);return R<0?B(R+j,0):S(R,j)}},"./node_modules/core-js/internals/to-indexed-object.js":function(i,A,g){var C=g("./node_modules/core-js/internals/indexed-object.js"),B=g("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(S){return C(B(S))}},"./node_modules/core-js/internals/to-integer.js":function(i){var A=Math.ceil,g=Math.floor;i.exports=function(C){return isNaN(C=+C)?0:(C>0?g:A)(C)}},"./node_modules/core-js/internals/to-length.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-integer.js"),B=Math.min;i.exports=function(S){return S>0?B(C(S),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(i,A,g){var C=g("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(B){return Object(C(B))}},"./node_modules/core-js/internals/to-primitive.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-object.js"),B=g("./node_modules/core-js/internals/is-symbol.js"),S=g("./node_modules/core-js/internals/ordinary-to-primitive.js"),P=g("./node_modules/core-js/internals/well-known-symbol.js"),j=P("toPrimitive");i.exports=function(R,N){if(!C(R)||B(R))return R;var U=R[j],$;if(U!==void 0){if(N===void 0&&(N="default"),$=U.call(R,N),!C($)||B($))return $;throw TypeError("Can't convert object to primitive value")}return N===void 0&&(N="number"),S(R,N)}},"./node_modules/core-js/internals/to-property-key.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-primitive.js"),B=g("./node_modules/core-js/internals/is-symbol.js");i.exports=function(S){var P=C(S,"string");return B(P)?P:String(P)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(i,A,g){var C=g("./node_modules/core-js/internals/well-known-symbol.js"),B=C("toStringTag"),S={};S[B]="z",i.exports=String(S)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(i,A,g){var C=g("./node_modules/core-js/internals/is-symbol.js");i.exports=function(B){if(C(B))throw TypeError("Cannot convert a Symbol value to a string");return String(B)}},"./node_modules/core-js/internals/uid.js":function(i){var A=0,g=Math.random();i.exports=function(C){return"Symbol("+String(C===void 0?"":C)+")_"+(++A+g).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(i,A,g){var C=g("./node_modules/core-js/internals/native-symbol.js");i.exports=C&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(i,A,g){var C=g("./node_modules/core-js/internals/well-known-symbol.js");A.f=C},"./node_modules/core-js/internals/well-known-symbol.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/shared.js"),S=g("./node_modules/core-js/internals/has.js"),P=g("./node_modules/core-js/internals/uid.js"),j=g("./node_modules/core-js/internals/native-symbol.js"),R=g("./node_modules/core-js/internals/use-symbol-as-uid.js"),N=B("wks"),U=C.Symbol,$=R?U:U&&U.withoutSetter||P;i.exports=function(J){return(!S(N,J)||!(j||typeof N[J]=="string"))&&(j&&S(U,J)?N[J]=U[J]:N[J]=$("Symbol."+J)),N[J]}},"./node_modules/core-js/internals/whitespaces.js":function(i){i.exports=`	
\v\f\r \u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/fails.js"),S=g("./node_modules/core-js/internals/is-array.js"),P=g("./node_modules/core-js/internals/is-object.js"),j=g("./node_modules/core-js/internals/to-object.js"),R=g("./node_modules/core-js/internals/to-length.js"),N=g("./node_modules/core-js/internals/create-property.js"),U=g("./node_modules/core-js/internals/array-species-create.js"),$=g("./node_modules/core-js/internals/array-method-has-species-support.js"),J=g("./node_modules/core-js/internals/well-known-symbol.js"),te=g("./node_modules/core-js/internals/engine-v8-version.js"),ue=J("isConcatSpreadable"),oe=9007199254740991,K="Maximum allowed index exceeded",ce=te>=51||!B(function(){var Le=[];return Le[ue]=!1,Le.concat()[0]!==Le}),me=$("concat"),Z=function(Le){if(!P(Le))return!1;var _e=Le[ue];return _e!==void 0?!!_e:S(Le)},Y=!ce||!me;C({target:"Array",proto:!0,forced:Y},{concat:function(_e){var Qe=j(this),De=U(Qe,0),Be=0,xe,ze,Fe,it,ie;for(xe=-1,Fe=arguments.length;xe<Fe;xe++)if(ie=xe===-1?Qe:arguments[xe],Z(ie)){if(it=R(ie.length),Be+it>oe)throw TypeError(K);for(ze=0;ze<it;ze++,Be++)ze in ie&&N(De,Be,ie[ze])}else{if(Be>=oe)throw TypeError(K);N(De,Be++,ie)}return De.length=Be,De}})},"./node_modules/core-js/modules/es.array.iterator.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-indexed-object.js"),B=g("./node_modules/core-js/internals/add-to-unscopables.js"),S=g("./node_modules/core-js/internals/iterators.js"),P=g("./node_modules/core-js/internals/internal-state.js"),j=g("./node_modules/core-js/internals/define-iterator.js"),R="Array Iterator",N=P.set,U=P.getterFor(R);i.exports=j(Array,"Array",function($,J){N(this,{type:R,target:C($),index:0,kind:J})},function(){var $=U(this),J=$.target,te=$.kind,ue=$.index++;return!J||ue>=J.length?($.target=void 0,{value:void 0,done:!0}):te=="keys"?{value:ue,done:!1}:te=="values"?{value:J[ue],done:!1}:{value:[ue,J[ue]],done:!1}},"values"),S.Arguments=S.Array,B("keys"),B("values"),B("entries")},"./node_modules/core-js/modules/es.array.join.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/indexed-object.js"),S=g("./node_modules/core-js/internals/to-indexed-object.js"),P=g("./node_modules/core-js/internals/array-method-is-strict.js"),j=[].join,R=B!=Object,N=P("join",",");C({target:"Array",proto:!0,forced:R||!N},{join:function($){return j.call(S(this),$===void 0?",":$)}})},"./node_modules/core-js/modules/es.array.map.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/array-iteration.js").map,S=g("./node_modules/core-js/internals/array-method-has-species-support.js"),P=S("map");C({target:"Array",proto:!0,forced:!P},{map:function(R){return B(this,R,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/is-object.js"),S=g("./node_modules/core-js/internals/is-array.js"),P=g("./node_modules/core-js/internals/to-absolute-index.js"),j=g("./node_modules/core-js/internals/to-length.js"),R=g("./node_modules/core-js/internals/to-indexed-object.js"),N=g("./node_modules/core-js/internals/create-property.js"),U=g("./node_modules/core-js/internals/well-known-symbol.js"),$=g("./node_modules/core-js/internals/array-method-has-species-support.js"),J=$("slice"),te=U("species"),ue=[].slice,oe=Math.max;C({target:"Array",proto:!0,forced:!J},{slice:function(ce,me){var Z=R(this),Y=j(Z.length),Le=P(ce,Y),_e=P(me===void 0?Y:me,Y),Qe,De,Be;if(S(Z)&&(Qe=Z.constructor,typeof Qe=="function"&&(Qe===Array||S(Qe.prototype))?Qe=void 0:B(Qe)&&(Qe=Qe[te],Qe===null&&(Qe=void 0)),Qe===Array||Qe===void 0))return ue.call(Z,Le,_e);for(De=new(Qe===void 0?Array:Qe)(oe(_e-Le,0)),Be=0;Le<_e;Le++,Be++)Le in Z&&N(De,Be,Z[Le]);return De.length=Be,De}})},"./node_modules/core-js/modules/es.function.name.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/object-define-property.js").f,S=Function.prototype,P=S.toString,j=/^\s*function ([^ (]*)/,R="name";C&&!(R in S)&&B(S,R,{configurable:!0,get:function(){try{return P.call(this).match(j)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(i,A,g){var C=g("./node_modules/core-js/internals/descriptors.js"),B=g("./node_modules/core-js/internals/global.js"),S=g("./node_modules/core-js/internals/is-forced.js"),P=g("./node_modules/core-js/internals/redefine.js"),j=g("./node_modules/core-js/internals/has.js"),R=g("./node_modules/core-js/internals/classof-raw.js"),N=g("./node_modules/core-js/internals/inherit-if-required.js"),U=g("./node_modules/core-js/internals/is-symbol.js"),$=g("./node_modules/core-js/internals/to-primitive.js"),J=g("./node_modules/core-js/internals/fails.js"),te=g("./node_modules/core-js/internals/object-create.js"),ue=g("./node_modules/core-js/internals/object-get-own-property-names.js").f,oe=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,K=g("./node_modules/core-js/internals/object-define-property.js").f,ce=g("./node_modules/core-js/internals/string-trim.js").trim,me="Number",Z=B[me],Y=Z.prototype,Le=R(te(Y))==me,_e=function(ze){if(U(ze))throw TypeError("Cannot convert a Symbol value to a number");var Fe=$(ze,"number"),it,ie,le,fe,be,He,Je,tt;if(typeof Fe=="string"&&Fe.length>2){if(Fe=ce(Fe),it=Fe.charCodeAt(0),it===43||it===45){if(ie=Fe.charCodeAt(2),ie===88||ie===120)return NaN}else if(it===48){switch(Fe.charCodeAt(1)){case 66:case 98:le=2,fe=49;break;case 79:case 111:le=8,fe=55;break;default:return+Fe}for(be=Fe.slice(2),He=be.length,Je=0;Je<He;Je++)if(tt=be.charCodeAt(Je),tt<48||tt>fe)return NaN;return parseInt(be,le)}}return+Fe};if(S(me,!Z(" 0o1")||!Z("0b1")||Z("+0x1"))){for(var Qe=function(Fe){var it=arguments.length<1?0:Fe,ie=this;return ie instanceof Qe&&(Le?J(function(){Y.valueOf.call(ie)}):R(ie)!=me)?N(new Z(_e(it)),ie,Qe):_e(it)},De=C?ue(Z):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Be=0,xe;De.length>Be;Be++)j(Z,xe=De[Be])&&!j(Qe,xe)&&K(Qe,xe,oe(Z,xe));Qe.prototype=Y,Y.constructor=Qe,P(B,me,Qe)}},"./node_modules/core-js/modules/es.object.assign.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/object-assign.js");C({target:"Object",stat:!0,forced:Object.assign!==B},{assign:B})},"./node_modules/core-js/modules/es.object.keys.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/to-object.js"),S=g("./node_modules/core-js/internals/object-keys.js"),P=g("./node_modules/core-js/internals/fails.js"),j=P(function(){S(1)});C({target:"Object",stat:!0,forced:j},{keys:function(N){return S(B(N))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(i,A,g){var C=g("./node_modules/core-js/internals/to-string-tag-support.js"),B=g("./node_modules/core-js/internals/redefine.js"),S=g("./node_modules/core-js/internals/object-to-string.js");C||B(Object.prototype,"toString",S,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(i,A,g){var C=g("./node_modules/core-js/internals/redefine.js"),B=g("./node_modules/core-js/internals/an-object.js"),S=g("./node_modules/core-js/internals/to-string.js"),P=g("./node_modules/core-js/internals/fails.js"),j=g("./node_modules/core-js/internals/regexp-flags.js"),R="toString",N=RegExp.prototype,U=N[R],$=P(function(){return U.call({source:"a",flags:"b"})!="/a/b"}),J=U.name!=R;($||J)&&C(RegExp.prototype,R,function(){var ue=B(this),oe=S(ue.source),K=ue.flags,ce=S(K===void 0&&ue instanceof RegExp&&!("flags"in N)?j.call(ue):K);return"/"+oe+"/"+ce},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(i,A,g){var C=g("./node_modules/core-js/internals/string-multibyte.js").charAt,B=g("./node_modules/core-js/internals/to-string.js"),S=g("./node_modules/core-js/internals/internal-state.js"),P=g("./node_modules/core-js/internals/define-iterator.js"),j="String Iterator",R=S.set,N=S.getterFor(j);P(String,"String",function(U){R(this,{type:j,string:B(U),index:0})},function(){var $=N(this),J=$.string,te=$.index,ue;return te>=J.length?{value:void 0,done:!0}:(ue=C(J,te),$.index+=ue.length,{value:ue,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/create-html.js"),S=g("./node_modules/core-js/internals/string-html-forced.js");C({target:"String",proto:!0,forced:S("link")},{link:function(j){return B(this,"a","href",j)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/descriptors.js"),S=g("./node_modules/core-js/internals/global.js"),P=g("./node_modules/core-js/internals/has.js"),j=g("./node_modules/core-js/internals/is-object.js"),R=g("./node_modules/core-js/internals/object-define-property.js").f,N=g("./node_modules/core-js/internals/copy-constructor-properties.js"),U=S.Symbol;if(B&&typeof U=="function"&&(!("description"in U.prototype)||U().description!==void 0)){var $={},J=function(){var me=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Z=this instanceof J?new U(me):me===void 0?U():U(me);return me===""&&($[Z]=!0),Z};N(J,U);var te=J.prototype=U.prototype;te.constructor=J;var ue=te.toString,oe=String(U("test"))=="Symbol(test)",K=/^Symbol\((.*)\)[^)]+$/;R(te,"description",{configurable:!0,get:function(){var me=j(this)?this.valueOf():this,Z=ue.call(me);if(P($,me))return"";var Y=oe?Z.slice(7,-1):Z.replace(K,"$1");return Y===""?void 0:Y}}),C({global:!0,forced:!0},{Symbol:J})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(i,A,g){var C=g("./node_modules/core-js/internals/define-well-known-symbol.js");C("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(i,A,g){var C=g("./node_modules/core-js/internals/export.js"),B=g("./node_modules/core-js/internals/global.js"),S=g("./node_modules/core-js/internals/get-built-in.js"),P=g("./node_modules/core-js/internals/is-pure.js"),j=g("./node_modules/core-js/internals/descriptors.js"),R=g("./node_modules/core-js/internals/native-symbol.js"),N=g("./node_modules/core-js/internals/fails.js"),U=g("./node_modules/core-js/internals/has.js"),$=g("./node_modules/core-js/internals/is-array.js"),J=g("./node_modules/core-js/internals/is-object.js"),te=g("./node_modules/core-js/internals/is-symbol.js"),ue=g("./node_modules/core-js/internals/an-object.js"),oe=g("./node_modules/core-js/internals/to-object.js"),K=g("./node_modules/core-js/internals/to-indexed-object.js"),ce=g("./node_modules/core-js/internals/to-property-key.js"),me=g("./node_modules/core-js/internals/to-string.js"),Z=g("./node_modules/core-js/internals/create-property-descriptor.js"),Y=g("./node_modules/core-js/internals/object-create.js"),Le=g("./node_modules/core-js/internals/object-keys.js"),_e=g("./node_modules/core-js/internals/object-get-own-property-names.js"),Qe=g("./node_modules/core-js/internals/object-get-own-property-names-external.js"),De=g("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Be=g("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),xe=g("./node_modules/core-js/internals/object-define-property.js"),ze=g("./node_modules/core-js/internals/object-property-is-enumerable.js"),Fe=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),it=g("./node_modules/core-js/internals/redefine.js"),ie=g("./node_modules/core-js/internals/shared.js"),le=g("./node_modules/core-js/internals/shared-key.js"),fe=g("./node_modules/core-js/internals/hidden-keys.js"),be=g("./node_modules/core-js/internals/uid.js"),He=g("./node_modules/core-js/internals/well-known-symbol.js"),Je=g("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),tt=g("./node_modules/core-js/internals/define-well-known-symbol.js"),st=g("./node_modules/core-js/internals/set-to-string-tag.js"),Ct=g("./node_modules/core-js/internals/internal-state.js"),Ue=g("./node_modules/core-js/internals/array-iteration.js").forEach,Ft=le("hidden"),Zt="Symbol",fr="prototype",Ye=He("toPrimitive"),Re=Ct.set,hr=Ct.getterFor(Zt),Ut=Object[fr],vt=B.Symbol,Yt=S("JSON","stringify"),ar=Be.f,nr=xe.f,Fr=Qe.f,Gr=ze.f,Ir=ie("symbols"),cn=ie("op-symbols"),Sn=ie("string-to-symbol-registry"),En=ie("symbol-to-string-registry"),an=ie("wks"),lr=B.QObject,Xt=!lr||!lr[fr]||!lr[fr].findChild,qr=j&&N(function(){return Y(nr({},"a",{get:function(){return nr(this,"a",{value:7}).a}})).a!=7})?function(Bn,Zr,Nr){var un=ar(Ut,Zr);un&&delete Ut[Zr],nr(Bn,Zr,Nr),un&&Bn!==Ut&&nr(Ut,Zr,un)}:nr,Kr=function(Bn,Zr){var Nr=Ir[Bn]=Y(vt[fr]);return Re(Nr,{type:Zt,tag:Bn,description:Zr}),j||(Nr.description=Zr),Nr},kn=function(Zr,Nr,un){Zr===Ut&&kn(cn,Nr,un),ue(Zr);var ri=ce(Nr);return ue(un),U(Ir,ri)?(un.enumerable?(U(Zr,Ft)&&Zr[Ft][ri]&&(Zr[Ft][ri]=!1),un=Y(un,{enumerable:Z(0,!1)})):(U(Zr,Ft)||nr(Zr,Ft,Z(1,{})),Zr[Ft][ri]=!0),qr(Zr,ri,un)):nr(Zr,ri,un)},mn=function(Zr,Nr){ue(Zr);var un=K(Nr),ri=Le(un).concat(si(un));return Ue(ri,function(Hn){(!j||Hi.call(un,Hn))&&kn(Zr,Hn,un[Hn])}),Zr},Un=function(Zr,Nr){return Nr===void 0?Y(Zr):mn(Y(Zr),Nr)},Hi=function(Zr){var Nr=ce(Zr),un=Gr.call(this,Nr);return this===Ut&&U(Ir,Nr)&&!U(cn,Nr)?!1:un||!U(this,Nr)||!U(Ir,Nr)||U(this,Ft)&&this[Ft][Nr]?un:!0},Gn=function(Zr,Nr){var un=K(Zr),ri=ce(Nr);if(!(un===Ut&&U(Ir,ri)&&!U(cn,ri))){var Hn=ar(un,ri);return Hn&&U(Ir,ri)&&!(U(un,Ft)&&un[Ft][ri])&&(Hn.enumerable=!0),Hn}},ti=function(Zr){var Nr=Fr(K(Zr)),un=[];return Ue(Nr,function(ri){!U(Ir,ri)&&!U(fe,ri)&&un.push(ri)}),un},si=function(Zr){var Nr=Zr===Ut,un=Fr(Nr?cn:K(Zr)),ri=[];return Ue(un,function(Hn){U(Ir,Hn)&&(!Nr||U(Ut,Hn))&&ri.push(Ir[Hn])}),ri};if(R||(vt=function(){if(this instanceof vt)throw TypeError("Symbol is not a constructor");var Zr=!arguments.length||arguments[0]===void 0?void 0:me(arguments[0]),Nr=be(Zr),un=function(ri){this===Ut&&un.call(cn,ri),U(this,Ft)&&U(this[Ft],Nr)&&(this[Ft][Nr]=!1),qr(this,Nr,Z(1,ri))};return j&&Xt&&qr(Ut,Nr,{configurable:!0,set:un}),Kr(Nr,Zr)},it(vt[fr],"toString",function(){return hr(this).tag}),it(vt,"withoutSetter",function(Bn){return Kr(be(Bn),Bn)}),ze.f=Hi,xe.f=kn,Be.f=Gn,_e.f=Qe.f=ti,De.f=si,Je.f=function(Bn){return Kr(He(Bn),Bn)},j&&(nr(vt[fr],"description",{configurable:!0,get:function(){return hr(this).description}}),P||it(Ut,"propertyIsEnumerable",Hi,{unsafe:!0}))),C({global:!0,wrap:!0,forced:!R,sham:!R},{Symbol:vt}),Ue(Le(an),function(Bn){tt(Bn)}),C({target:Zt,stat:!0,forced:!R},{for:function(Bn){var Zr=me(Bn);if(U(Sn,Zr))return Sn[Zr];var Nr=vt(Zr);return Sn[Zr]=Nr,En[Nr]=Zr,Nr},keyFor:function(Zr){if(!te(Zr))throw TypeError(Zr+" is not a symbol");if(U(En,Zr))return En[Zr]},useSetter:function(){Xt=!0},useSimple:function(){Xt=!1}}),C({target:"Object",stat:!0,forced:!R,sham:!j},{create:Un,defineProperty:kn,defineProperties:mn,getOwnPropertyDescriptor:Gn}),C({target:"Object",stat:!0,forced:!R},{getOwnPropertyNames:ti,getOwnPropertySymbols:si}),C({target:"Object",stat:!0,forced:N(function(){De.f(1)})},{getOwnPropertySymbols:function(Zr){return De.f(oe(Zr))}}),Yt){var xi=!R||N(function(){var Bn=vt();return Yt([Bn])!="[null]"||Yt({a:Bn})!="{}"||Yt(Object(Bn))!="{}"});C({target:"JSON",stat:!0,forced:xi},{stringify:function(Zr,Nr,un){for(var ri=[Zr],Hn=1,ir;arguments.length>Hn;)ri.push(arguments[Hn++]);if(ir=Nr,!(!J(Nr)&&Zr===void 0||te(Zr)))return $(Nr)||(Nr=function(We,qe){if(typeof ir=="function"&&(qe=ir.call(this,We,qe)),!te(qe))return qe}),ri[1]=Nr,Yt.apply(null,ri)}})}vt[fr][Ye]||Fe(vt[fr],Ye,vt[fr].valueOf),st(vt,Zt),fe[Ft]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/dom-iterables.js"),S=g("./node_modules/core-js/internals/array-for-each.js"),P=g("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var j in B){var R=C[j],N=R&&R.prototype;if(N&&N.forEach!==S)try{P(N,"forEach",S)}catch{N.forEach=S}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(i,A,g){var C=g("./node_modules/core-js/internals/global.js"),B=g("./node_modules/core-js/internals/dom-iterables.js"),S=g("./node_modules/core-js/modules/es.array.iterator.js"),P=g("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=g("./node_modules/core-js/internals/well-known-symbol.js"),R=j("iterator"),N=j("toStringTag"),U=S.values;for(var $ in B){var J=C[$],te=J&&J.prototype;if(te){if(te[R]!==U)try{P(te,R,U)}catch{te[R]=U}if(te[N]||P(te,N,$),B[$]){for(var ue in S)if(te[ue]!==S[ue])try{P(te,ue,S[ue])}catch{te[ue]=S[ue]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(i){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(A,g){i.exports=g()})(this,function(){function A(lr){var Xt=typeof lr;return lr!==null&&(Xt==="object"||Xt==="function")}function g(lr){return typeof lr=="function"}var C=void 0;Array.isArray?C=Array.isArray:C=function(lr){return Object.prototype.toString.call(lr)==="[object Array]"};var B=C,S=0,P=void 0,j=void 0,R=function(Xt,qr){Le[S]=Xt,Le[S+1]=qr,S+=2,S===2&&(j?j(_e):De())};function N(lr){j=lr}function U(lr){R=lr}var $=typeof window<"u"?window:void 0,J=$||{},te=J.MutationObserver||J.WebKitMutationObserver,ue=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",oe=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function K(){return function(){return process.nextTick(_e)}}function ce(){return typeof P<"u"?function(){P(_e)}:Y()}function me(){var lr=0,Xt=new te(_e),qr=document.createTextNode("");return Xt.observe(qr,{characterData:!0}),function(){qr.data=lr=++lr%2}}function Z(){var lr=new MessageChannel;return lr.port1.onmessage=_e,function(){return lr.port2.postMessage(0)}}function Y(){var lr=setTimeout;return function(){return lr(_e,1)}}var Le=new Array(1e3);function _e(){for(var lr=0;lr<S;lr+=2){var Xt=Le[lr],qr=Le[lr+1];Xt(qr),Le[lr]=void 0,Le[lr+1]=void 0}S=0}function Qe(){try{var lr=Function("return this")().require("vertx");return P=lr.runOnLoop||lr.runOnContext,ce()}catch{return Y()}}var De=void 0;ue?De=K():te?De=me():oe?De=Z():$===void 0?De=Qe():De=Y();function Be(lr,Xt){var qr=this,Kr=new this.constructor(Fe);Kr[ze]===void 0&&Yt(Kr);var kn=qr._state;if(kn){var mn=arguments[kn-1];R(function(){return Re(kn,Kr,mn,qr._result)})}else fr(qr,Kr,lr,Xt);return Kr}function xe(lr){var Xt=this;if(lr&&typeof lr=="object"&&lr.constructor===Xt)return lr;var qr=new Xt(Fe);return Ct(qr,lr),qr}var ze=Math.random().toString(36).substring(2);function Fe(){}var it=void 0,ie=1,le=2;function fe(){return new TypeError("You cannot resolve a promise with itself")}function be(){return new TypeError("A promises callback cannot return that same promise.")}function He(lr,Xt,qr,Kr){try{lr.call(Xt,qr,Kr)}catch(kn){return kn}}function Je(lr,Xt,qr){R(function(Kr){var kn=!1,mn=He(qr,Xt,function(Un){kn||(kn=!0,Xt!==Un?Ct(Kr,Un):Ft(Kr,Un))},function(Un){kn||(kn=!0,Zt(Kr,Un))},"Settle: "+(Kr._label||" unknown promise"));!kn&&mn&&(kn=!0,Zt(Kr,mn))},lr)}function tt(lr,Xt){Xt._state===ie?Ft(lr,Xt._result):Xt._state===le?Zt(lr,Xt._result):fr(Xt,void 0,function(qr){return Ct(lr,qr)},function(qr){return Zt(lr,qr)})}function st(lr,Xt,qr){Xt.constructor===lr.constructor&&qr===Be&&Xt.constructor.resolve===xe?tt(lr,Xt):qr===void 0?Ft(lr,Xt):g(qr)?Je(lr,Xt,qr):Ft(lr,Xt)}function Ct(lr,Xt){if(lr===Xt)Zt(lr,fe());else if(A(Xt)){var qr=void 0;try{qr=Xt.then}catch(Kr){Zt(lr,Kr);return}st(lr,Xt,qr)}else Ft(lr,Xt)}function Ue(lr){lr._onerror&&lr._onerror(lr._result),Ye(lr)}function Ft(lr,Xt){lr._state===it&&(lr._result=Xt,lr._state=ie,lr._subscribers.length!==0&&R(Ye,lr))}function Zt(lr,Xt){lr._state===it&&(lr._state=le,lr._result=Xt,R(Ue,lr))}function fr(lr,Xt,qr,Kr){var kn=lr._subscribers,mn=kn.length;lr._onerror=null,kn[mn]=Xt,kn[mn+ie]=qr,kn[mn+le]=Kr,mn===0&&lr._state&&R(Ye,lr)}function Ye(lr){var Xt=lr._subscribers,qr=lr._state;if(Xt.length!==0){for(var Kr=void 0,kn=void 0,mn=lr._result,Un=0;Un<Xt.length;Un+=3)Kr=Xt[Un],kn=Xt[Un+qr],Kr?Re(qr,Kr,kn,mn):kn(mn);lr._subscribers.length=0}}function Re(lr,Xt,qr,Kr){var kn=g(qr),mn=void 0,Un=void 0,Hi=!0;if(kn){try{mn=qr(Kr)}catch(Gn){Hi=!1,Un=Gn}if(Xt===mn){Zt(Xt,be());return}}else mn=Kr;Xt._state!==it||(kn&&Hi?Ct(Xt,mn):Hi===!1?Zt(Xt,Un):lr===ie?Ft(Xt,mn):lr===le&&Zt(Xt,mn))}function hr(lr,Xt){try{Xt(function(Kr){Ct(lr,Kr)},function(Kr){Zt(lr,Kr)})}catch(qr){Zt(lr,qr)}}var Ut=0;function vt(){return Ut++}function Yt(lr){lr[ze]=Ut++,lr._state=void 0,lr._result=void 0,lr._subscribers=[]}function ar(){return new Error("Array Methods must be provided an Array")}var nr=function(){function lr(Xt,qr){this._instanceConstructor=Xt,this.promise=new Xt(Fe),this.promise[ze]||Yt(this.promise),B(qr)?(this.length=qr.length,this._remaining=qr.length,this._result=new Array(this.length),this.length===0?Ft(this.promise,this._result):(this.length=this.length||0,this._enumerate(qr),this._remaining===0&&Ft(this.promise,this._result))):Zt(this.promise,ar())}return lr.prototype._enumerate=function(qr){for(var Kr=0;this._state===it&&Kr<qr.length;Kr++)this._eachEntry(qr[Kr],Kr)},lr.prototype._eachEntry=function(qr,Kr){var kn=this._instanceConstructor,mn=kn.resolve;if(mn===xe){var Un=void 0,Hi=void 0,Gn=!1;try{Un=qr.then}catch(si){Gn=!0,Hi=si}if(Un===Be&&qr._state!==it)this._settledAt(qr._state,Kr,qr._result);else if(typeof Un!="function")this._remaining--,this._result[Kr]=qr;else if(kn===En){var ti=new kn(Fe);Gn?Zt(ti,Hi):st(ti,qr,Un),this._willSettleAt(ti,Kr)}else this._willSettleAt(new kn(function(si){return si(qr)}),Kr)}else this._willSettleAt(mn(qr),Kr)},lr.prototype._settledAt=function(qr,Kr,kn){var mn=this.promise;mn._state===it&&(this._remaining--,qr===le?Zt(mn,kn):this._result[Kr]=kn),this._remaining===0&&Ft(mn,this._result)},lr.prototype._willSettleAt=function(qr,Kr){var kn=this;fr(qr,void 0,function(mn){return kn._settledAt(ie,Kr,mn)},function(mn){return kn._settledAt(le,Kr,mn)})},lr}();function Fr(lr){return new nr(this,lr).promise}function Gr(lr){var Xt=this;return B(lr)?new Xt(function(qr,Kr){for(var kn=lr.length,mn=0;mn<kn;mn++)Xt.resolve(lr[mn]).then(qr,Kr)}):new Xt(function(qr,Kr){return Kr(new TypeError("You must pass an array to race."))})}function Ir(lr){var Xt=this,qr=new Xt(Fe);return Zt(qr,lr),qr}function cn(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Sn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var En=function(){function lr(Xt){this[ze]=vt(),this._result=this._state=void 0,this._subscribers=[],Fe!==Xt&&(typeof Xt!="function"&&cn(),this instanceof lr?hr(this,Xt):Sn())}return lr.prototype.catch=function(qr){return this.then(null,qr)},lr.prototype.finally=function(qr){var Kr=this,kn=Kr.constructor;return g(qr)?Kr.then(function(mn){return kn.resolve(qr()).then(function(){return mn})},function(mn){return kn.resolve(qr()).then(function(){throw mn})}):Kr.then(qr,qr)},lr}();En.prototype.then=Be,En.all=Fr,En.race=Gr,En.resolve=xe,En.reject=Ir,En._setScheduler=N,En._setAsap=U,En._asap=R;function an(){var lr=void 0;if(typeof Ho<"u")lr=Ho;else if(typeof self<"u")lr=self;else try{lr=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Xt=lr.Promise;if(Xt){var qr=null;try{qr=Object.prototype.toString.call(Xt.resolve())}catch{}if(qr==="[object Promise]"&&!Xt.cast)return}lr.Promise=En}return En.polyfill=an,En.Promise=En,En})},html2canvas:function(i){i.exports=n},jspdf:function(i){i.exports=r}},o={};function c(i){var A=o[i];if(A!==void 0)return A.exports;var g=o[i]={exports:{}};return s[i].call(g.exports,g,g.exports,c),g.exports}(function(){c.n=function(i){var A=i&&i.__esModule?function(){return i.default}:function(){return i};return c.d(A,{a:A}),A}})(),function(){c.d=function(i,A){for(var g in A)c.o(A,g)&&!c.o(i,g)&&Object.defineProperty(i,g,{enumerable:!0,get:A[g]})}}(),function(){c.o=function(i,A){return Object.prototype.hasOwnProperty.call(i,A)}}(),function(){c.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})}}();var u={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/c.r(u);var i=c("./src/worker.js");c("./src/plugin/jspdf-plugin.js"),c("./src/plugin/pagebreaks.js"),c("./src/plugin/hyperlinks.js");var A=function g(C,B){var S=new g.Worker(B);return C?S.from(C).save():S};A.Worker=i.default,u.default=A}(),u=u.default,u}()})})(W$);var G5e=W$.exports;const vK=Sp(G5e),q5e=(t,e=60,r=500)=>new Promise((n,s)=>{let o=0;const c=()=>{t!=null&&t.current?n(t.current):(o++,o<e?setTimeout(c,r):s(new Error(" L'lment HTML du rapport n'est toujours pas prt aprs 30 secondes.")))};c()}),FI=async(t,e)=>{console.log(" lment DOM utilis pour PDF :",t.current);try{const r=await q5e(t),n=await vK().set({margin:0,filename:`${e}_report.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(r).outputPdf("blob");return console.log(` PDF gnr pour ${e}`),n}catch(r){return console.error(` Erreur lors de la gnration du PDF pour ${e}:`,r.message),alert(r.message),null}},$5e=async t=>{const e=t==null?void 0:t.current;if(!e){alert(" lment HTML introuvable");return}const n=`
  <html>
    <head>
      <meta charset="utf-8" />
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
      <style>
        @page {
          margin: 15mm; /*  diminue ici (par dfaut WeasyPrint met 20mm) */
        }

        body {
          font-family: Arial, sans-serif;
        }

        .html2pdf__page-break {
          page-break-after: always;
        }
      </style>
    </head>
    <body>
      ${e.outerHTML}
    </body>
  </html>
`;try{const s=await Mr.post("/api/gfw/generate-pdf",{html:n},{responseType:"blob"}),o=window.URL.createObjectURL(new Blob([s.data],{type:"application/pdf"})),c=document.createElement("a");c.href=o,c.setAttribute("download","eudr_report.pdf"),document.body.appendChild(c),c.click(),c.remove(),console.log(" PDF tlcharg avec succs")}catch(s){console.error(" Erreur lors du tlchargement du PDF :",s),alert("Une erreur est survenue lors de la gnration du PDF.")}},W5e=()=>{var P;const[t,e]=ve.useState(null),[r,n]=ve.useState(null),[s,o]=ve.useState(!0),[c,u]=ve.useState(null),[i,A]=ve.useState(!1),C=((P=Ju().state)==null?void 0:P.farmId)||"WAK0001",B=ve.useRef();ve.useEffect(()=>{(async()=>{var R;console.log("Fetching farm report for farmId:",C);try{const N=await Mr.get(`/api/gfw/farm/${C}/report`);N.data.error?u(N.data.error):(e(N.data.farm_info),n(N.data.report||[]),console.log(r))}catch(N){u("Failed to fetch farm report."),console.error("Error fetching farm report:",((R=N.response)==null?void 0:R.data)||N.message)}finally{o(!1)}})()},[C]);const S=async()=>{A(!0);try{await new Promise(j=>setTimeout(j,6e3)),await $5e(B)}catch(j){console.error("PDF generation failed:",j)}finally{A(!1)}};return s?m.jsx(MC,{}):c==="No polygon found. Please create a polygon for this forest."?m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),m.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"It seems that no polygon data is available for this forest. You can create a polygon by clicking the link below:"}),m.jsx(Oo,{to:"/create-polygon",className:"px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600",children:"Create Polygon"})]}):c?m.jsx("p",{className:"text-red-600",children:c}):m.jsxs("div",{className:"flex flex-col items-center text-xl",children:[m.jsx("div",{ref:B,children:m.jsx($$,{results:r,reportRef:B,farmInfo:t})}),m.jsxs("button",{onClick:S,disabled:i,className:`mt-6 flex items-center gap-2 px-6 py-3 rounded-lg shadow-md text-white font-semibold transition 
          ${i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[i&&m.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),i?"Generating PDF...":"Download PDF"]})]})};function wa(t){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}var Qh=Uint8Array,yh=Uint16Array,U_=Uint32Array,KC=new Qh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),XC=new Qh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),NI=new Qh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xK=function(t,e){for(var r=new yh(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new U_(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)s[o]=o-r[n]<<5|n;return[r,s]},_K=xK(KC,2),bK=_K[0],PI=_K[1];bK[28]=258,PI[258]=28;var wK=xK(XC,0),K5e=wK[0],rz=wK[1],MI=new yh(32768);for(var pl=0;pl<32768;++pl){var $A=(pl&43690)>>>1|(pl&21845)<<1;$A=($A&52428)>>>2|($A&13107)<<2,$A=($A&61680)>>>4|($A&3855)<<4,MI[pl]=(($A&65280)>>>8|($A&255)<<8)>>>1}var Cp=function(t,e,r){for(var n=t.length,s=0,o=new yh(e);s<n;++s)++o[t[s]-1];var c=new yh(e);for(s=0;s<e;++s)c[s]=c[s-1]+o[s-1]<<1;var u;if(r){u=new yh(1<<e);var i=15-e;for(s=0;s<n;++s)if(t[s])for(var A=s<<4|t[s],g=e-t[s],C=c[t[s]-1]++<<g,B=C|(1<<g)-1;C<=B;++C)u[MI[C]>>>i]=A}else for(u=new yh(n),s=0;s<n;++s)u[s]=MI[c[t[s]-1]++]>>>15-t[s];return u},Ym=new Qh(288);for(var pl=0;pl<144;++pl)Ym[pl]=8;for(var pl=144;pl<256;++pl)Ym[pl]=9;for(var pl=256;pl<280;++pl)Ym[pl]=7;for(var pl=280;pl<288;++pl)Ym[pl]=8;var z_=new Qh(32);for(var pl=0;pl<32;++pl)z_[pl]=5;var X5e=Cp(Ym,9,0),Y5e=Cp(Ym,9,1),Z5e=Cp(z_,5,0),J5e=Cp(z_,5,1),V3=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},wf=function(t,e,r){var n=e/8>>0;return(t[n]|t[n+1]<<8)>>>(e&7)&r},G3=function(t,e){var r=e/8>>0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>>(e&7)},PN=function(t){return(t/8>>0)+(t&7&&1)},CK=function(t,e,r){(r==null||r>t.length)&&(r=t.length);var n=new(t instanceof yh?yh:t instanceof U_?U_:Qh)(r-e);return n.set(t.subarray(e,r)),n},e4e=function(t,e,r){var n=t.length,s=!e||r,o=!r||r.i;r||(r={}),e||(e=new Qh(n*3));var c=function(He){var Je=e.length;if(He>Je){var tt=new Qh(Math.max(Je*2,He));tt.set(e),e=tt}},u=r.f||0,i=r.p||0,A=r.b||0,g=r.l,C=r.d,B=r.m,S=r.n,P=n*8;do{if(!g){r.f=u=wf(t,i,1);var j=wf(t,i+1,3);if(i+=3,j)if(j==1)g=Y5e,C=J5e,B=9,S=5;else if(j==2){var $=wf(t,i,31)+257,J=wf(t,i+10,15)+4,te=$+wf(t,i+5,31)+1;i+=14;for(var ue=new Qh(te),oe=new Qh(19),K=0;K<J;++K)oe[NI[K]]=wf(t,i+K*3,7);i+=J*3;var ce=V3(oe),me=(1<<ce)-1;if(!o&&i+te*(ce+7)>P)break;for(var Z=Cp(oe,ce,1),K=0;K<te;){var Y=Z[wf(t,i,me)];i+=Y&15;var R=Y>>>4;if(R<16)ue[K++]=R;else{var Le=0,_e=0;for(R==16?(_e=3+wf(t,i,3),i+=2,Le=ue[K-1]):R==17?(_e=3+wf(t,i,7),i+=3):R==18&&(_e=11+wf(t,i,127),i+=7);_e--;)ue[K++]=Le}}var Qe=ue.subarray(0,$),De=ue.subarray($);B=V3(Qe),S=V3(De),g=Cp(Qe,B,1),C=Cp(De,S,1)}else throw"invalid block type";else{var R=PN(i)+4,N=t[R-4]|t[R-3]<<8,U=R+N;if(U>n){if(o)throw"unexpected EOF";break}s&&c(A+N),e.set(t.subarray(R,U),A),r.b=A+=N,r.p=i=U*8;continue}if(i>P)throw"unexpected EOF"}s&&c(A+131072);for(var Be=(1<<B)-1,xe=(1<<S)-1,ze=B+S+18;o||i+ze<P;){var Le=g[G3(t,i)&Be],Fe=Le>>>4;if(i+=Le&15,i>P)throw"unexpected EOF";if(!Le)throw"invalid length/literal";if(Fe<256)e[A++]=Fe;else if(Fe==256){g=null;break}else{var it=Fe-254;if(Fe>264){var K=Fe-257,ie=KC[K];it=wf(t,i,(1<<ie)-1)+bK[K],i+=ie}var le=C[G3(t,i)&xe],fe=le>>>4;if(!le)throw"invalid distance";i+=le&15;var De=K5e[fe];if(fe>3){var ie=XC[fe];De+=G3(t,i)&(1<<ie)-1,i+=ie}if(i>P)throw"unexpected EOF";s&&c(A+131072);for(var be=A+it;A<be;A+=4)e[A]=e[A-De],e[A+1]=e[A+1-De],e[A+2]=e[A+2-De],e[A+3]=e[A+3-De];A=be}}r.l=g,r.p=i,r.b=A,g&&(u=1,r.m=B,r.d=C,r.n=S)}while(!u);return A==e.length?e:CK(e,0,A)},Gp=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8},Gv=function(t,e,r){r<<=e&7;var n=e/8>>0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},q3=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,o=r.slice();if(!s)return[new Qh(0),0];if(s==1){var c=new Qh(r[0].s+1);return c[r[0].s]=1,[c,1]}r.sort(function(te,ue){return te.f-ue.f}),r.push({s:-1,f:25001});var u=r[0],i=r[1],A=0,g=1,C=2;for(r[0]={s:-1,f:u.f+i.f,l:u,r:i};g!=s-1;)u=r[r[A].f<r[C].f?A++:C++],i=r[A!=g&&r[A].f<r[C].f?A++:C++],r[g++]={s:-1,f:u.f+i.f,l:u,r:i};for(var B=o[0].s,n=1;n<s;++n)o[n].s>B&&(B=o[n].s);var S=new yh(B+1),P=jI(r[g-1],S,0);if(P>e){var n=0,j=0,R=P-e,N=1<<R;for(o.sort(function(ue,oe){return S[oe.s]-S[ue.s]||ue.f-oe.f});n<s;++n){var U=o[n].s;if(S[U]>e)j+=N-(1<<P-S[U]),S[U]=e;else break}for(j>>>=R;j>0;){var $=o[n].s;S[$]<e?j-=1<<e-S[$]++-1:++n}for(;n>=0&&j;--n){var J=o[n].s;S[J]==e&&(--S[J],++j)}P=e}return[new Qh(S),P]},jI=function(t,e,r){return t.s==-1?Math.max(jI(t.l,e,r+1),jI(t.r,e,r+1)):e[t.s]=r},nz=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new yh(++e),n=0,s=t[0],o=1,c=function(i){r[n++]=i},u=1;u<=e;++u)if(t[u]==s&&u!=e)++o;else{if(!s&&o>2){for(;o>138;o-=138)c(32754);o>2&&(c(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(c(s),--o;o>6;o-=6)c(8304);o>2&&(c(o-3<<5|8208),o=0)}for(;o--;)c(s);o=1,s=t[u]}return[r.subarray(0,n),e]},qv=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},kI=function(t,e,r){var n=r.length,s=PN(e+2);t[s]=n&255,t[s+1]=n>>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var o=0;o<n;++o)t[s+o+4]=r[o];return(s+4+n)*8},iz=function(t,e,r,n,s,o,c,u,i,A,g){Gp(e,g++,r),++s[256];for(var C=q3(s,15),B=C[0],S=C[1],P=q3(o,15),j=P[0],R=P[1],N=nz(B),U=N[0],$=N[1],J=nz(j),te=J[0],ue=J[1],oe=new yh(19),K=0;K<U.length;++K)oe[U[K]&31]++;for(var K=0;K<te.length;++K)oe[te[K]&31]++;for(var ce=q3(oe,7),me=ce[0],Z=ce[1],Y=19;Y>4&&!me[NI[Y-1]];--Y);var Le=A+5<<3,_e=qv(s,Ym)+qv(o,z_)+c,Qe=qv(s,B)+qv(o,j)+c+14+3*Y+qv(oe,me)+(2*oe[16]+3*oe[17]+7*oe[18]);if(Le<=_e&&Le<=Qe)return kI(e,g,t.subarray(i,i+A));var De,Be,xe,ze;if(Gp(e,g,1+(Qe<_e)),g+=2,Qe<_e){De=Cp(B,S,0),Be=B,xe=Cp(j,R,0),ze=j;var Fe=Cp(me,Z,0);Gp(e,g,$-257),Gp(e,g+5,ue-1),Gp(e,g+10,Y-4),g+=14;for(var K=0;K<Y;++K)Gp(e,g+3*K,me[NI[K]]);g+=3*Y;for(var it=[U,te],ie=0;ie<2;++ie)for(var le=it[ie],K=0;K<le.length;++K){var fe=le[K]&31;Gp(e,g,Fe[fe]),g+=me[fe],fe>15&&(Gp(e,g,le[K]>>>5&127),g+=le[K]>>>12)}}else De=X5e,Be=Ym,xe=Z5e,ze=z_;for(var K=0;K<u;++K)if(n[K]>255){var fe=n[K]>>>18&31;Gv(e,g,De[fe+257]),g+=Be[fe+257],fe>7&&(Gp(e,g,n[K]>>>23&31),g+=KC[fe]);var be=n[K]&31;Gv(e,g,xe[be]),g+=ze[be],be>3&&(Gv(e,g,n[K]>>>5&8191),g+=XC[be])}else Gv(e,g,De[n[K]]),g+=Be[n[K]];return Gv(e,g,De[256]),g+Be[256]},t4e=new U_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),r4e=function(t,e,r,n,s,o){var c=t.length,u=new Qh(n+c+5*(1+Math.floor(c/7e3))+s),i=u.subarray(n,u.length-s),A=0;if(!e||c<8)for(var g=0;g<=c;g+=65535){var C=g+65535;C<c?A=kI(i,A,t.subarray(g,C)):(i[g]=o,A=kI(i,A,t.subarray(g,c)))}else{for(var B=t4e[e-1],S=B>>>13,P=B&8191,j=(1<<r)-1,R=new yh(32768),N=new yh(j+1),U=Math.ceil(r/3),$=2*U,J=function(fr){return(t[fr]^t[fr+1]<<U^t[fr+2]<<$)&j},te=new U_(25e3),ue=new yh(288),oe=new yh(32),K=0,ce=0,g=0,me=0,Z=0,Y=0;g<c;++g){var Le=J(g),_e=g&32767,Qe=N[Le];if(R[_e]=Qe,N[Le]=_e,Z<=g){var De=c-g;if((K>7e3||me>24576)&&De>423){A=iz(t,i,0,te,ue,oe,ce,me,Y,g-Y,A),me=K=ce=0,Y=g;for(var Be=0;Be<286;++Be)ue[Be]=0;for(var Be=0;Be<30;++Be)oe[Be]=0}var xe=2,ze=0,Fe=P,it=_e-Qe&32767;if(De>2&&Le==J(g-it))for(var ie=Math.min(S,De)-1,le=Math.min(32767,g),fe=Math.min(258,De);it<=le&&--Fe&&_e!=Qe;){if(t[g+xe]==t[g+xe-it]){for(var be=0;be<fe&&t[g+be]==t[g+be-it];++be);if(be>xe){if(xe=be,ze=it,be>ie)break;for(var He=Math.min(it,be-2),Je=0,Be=0;Be<He;++Be){var tt=g-it+Be+32768&32767,st=R[tt],Ct=tt-st+32768&32767;Ct>Je&&(Je=Ct,Qe=tt)}}}_e=Qe,Qe=R[_e],it+=_e-Qe+32768&32767}if(ze){te[me++]=268435456|PI[xe]<<18|rz[ze];var Ue=PI[xe]&31,Ft=rz[ze]&31;ce+=KC[Ue]+XC[Ft],++ue[257+Ue],++oe[Ft],Z=g+xe,++K}else te[me++]=t[g],++ue[t[g]]}}A=iz(t,i,o,te,ue,oe,ce,me,Y,g-Y,A)}return CK(u,0,n+PN(A)+s)},n4e=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,o=r.length,c=0;c!=o;){for(var u=Math.min(c+5552,o);c<u;++c)n+=r[c],s+=n;n%=65521,s%=65521}t=n,e=s},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},i4e=function(t,e,r,n,s){return r4e(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,r,n,!s)},s4e=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},o4e=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)},a4e=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function DI(t,e){e===void 0&&(e={});var r=n4e();r.p(t);var n=i4e(t,e,2,4);return o4e(n,e),s4e(n,n.length-4,r.d()),n}function l4e(t,e){return e4e((a4e(t),t.subarray(2,-4)),e)}var ls=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $3(){ls.console&&typeof ls.console.log=="function"&&ls.console.log.apply(ls.console,arguments)}var Ua={log:$3,warn:function(t){ls.console&&(typeof ls.console.warn=="function"?ls.console.warn.apply(ls.console,arguments):$3.call(null,arguments))},error:function(t){ls.console&&(typeof ls.console.error=="function"?ls.console.error.apply(ls.console,arguments):$3(t))}};function W3(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Dg(n.response,e,r)},n.onerror=function(){Ua.error("could not download file")},n.send()}function sz(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function M2(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Yx,OI,Dg=ls.saveAs||((typeof window>"u"?"undefined":wa(window))!=="object"||window!==ls?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=ls.URL||ls.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?sz(s.href)?W3(t,e,r):M2(s,s.target="_blank"):M2(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){M2(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(sz(t))W3(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){M2(n)})}else navigator.msSaveOrOpenBlob(function(s,o){return o===void 0?o={autoBom:!1}:wa(o)!=="object"&&(Ua.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return W3(t,e,r);var s=t.type==="application/octet-stream",o=/constructor/i.test(ls.HTMLElement)||ls.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&o)&&(typeof FileReader>"u"?"undefined":wa(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=c?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},u.readAsDataURL(t)}else{var i=ls.URL||ls.webkitURL,A=i.createObjectURL(t);n?n.location=A:location.href=A,n=null,setTimeout(function(){i.revokeObjectURL(A)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function SK(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,o=r[n].process,c=s.exec(t);c&&(e=o(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),i=this.g.toString(16),A=this.b.toString(16);return u.length==1&&(u="0"+u),i.length==1&&(i="0"+i),A.length==1&&(A="0"+A),"#"+u+i+A}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function K3(t,e){var r=t[0],n=t[1],s=t[2],o=t[3];r=Ou(r,n,s,o,e[0],7,-680876936),o=Ou(o,r,n,s,e[1],12,-389564586),s=Ou(s,o,r,n,e[2],17,606105819),n=Ou(n,s,o,r,e[3],22,-1044525330),r=Ou(r,n,s,o,e[4],7,-176418897),o=Ou(o,r,n,s,e[5],12,1200080426),s=Ou(s,o,r,n,e[6],17,-1473231341),n=Ou(n,s,o,r,e[7],22,-45705983),r=Ou(r,n,s,o,e[8],7,1770035416),o=Ou(o,r,n,s,e[9],12,-1958414417),s=Ou(s,o,r,n,e[10],17,-42063),n=Ou(n,s,o,r,e[11],22,-1990404162),r=Ou(r,n,s,o,e[12],7,1804603682),o=Ou(o,r,n,s,e[13],12,-40341101),s=Ou(s,o,r,n,e[14],17,-1502002290),r=Ru(r,n=Ou(n,s,o,r,e[15],22,1236535329),s,o,e[1],5,-165796510),o=Ru(o,r,n,s,e[6],9,-1069501632),s=Ru(s,o,r,n,e[11],14,643717713),n=Ru(n,s,o,r,e[0],20,-373897302),r=Ru(r,n,s,o,e[5],5,-701558691),o=Ru(o,r,n,s,e[10],9,38016083),s=Ru(s,o,r,n,e[15],14,-660478335),n=Ru(n,s,o,r,e[4],20,-405537848),r=Ru(r,n,s,o,e[9],5,568446438),o=Ru(o,r,n,s,e[14],9,-1019803690),s=Ru(s,o,r,n,e[3],14,-187363961),n=Ru(n,s,o,r,e[8],20,1163531501),r=Ru(r,n,s,o,e[13],5,-1444681467),o=Ru(o,r,n,s,e[2],9,-51403784),s=Ru(s,o,r,n,e[7],14,1735328473),r=Uu(r,n=Ru(n,s,o,r,e[12],20,-1926607734),s,o,e[5],4,-378558),o=Uu(o,r,n,s,e[8],11,-2022574463),s=Uu(s,o,r,n,e[11],16,1839030562),n=Uu(n,s,o,r,e[14],23,-35309556),r=Uu(r,n,s,o,e[1],4,-1530992060),o=Uu(o,r,n,s,e[4],11,1272893353),s=Uu(s,o,r,n,e[7],16,-155497632),n=Uu(n,s,o,r,e[10],23,-1094730640),r=Uu(r,n,s,o,e[13],4,681279174),o=Uu(o,r,n,s,e[0],11,-358537222),s=Uu(s,o,r,n,e[3],16,-722521979),n=Uu(n,s,o,r,e[6],23,76029189),r=Uu(r,n,s,o,e[9],4,-640364487),o=Uu(o,r,n,s,e[12],11,-421815835),s=Uu(s,o,r,n,e[15],16,530742520),r=zu(r,n=Uu(n,s,o,r,e[2],23,-995338651),s,o,e[0],6,-198630844),o=zu(o,r,n,s,e[7],10,1126891415),s=zu(s,o,r,n,e[14],15,-1416354905),n=zu(n,s,o,r,e[5],21,-57434055),r=zu(r,n,s,o,e[12],6,1700485571),o=zu(o,r,n,s,e[3],10,-1894986606),s=zu(s,o,r,n,e[10],15,-1051523),n=zu(n,s,o,r,e[1],21,-2054922799),r=zu(r,n,s,o,e[8],6,1873313359),o=zu(o,r,n,s,e[15],10,-30611744),s=zu(s,o,r,n,e[6],15,-1560198380),n=zu(n,s,o,r,e[13],21,1309151649),r=zu(r,n,s,o,e[4],6,-145523070),o=zu(o,r,n,s,e[11],10,-1120210379),s=zu(s,o,r,n,e[2],15,718787259),n=zu(n,s,o,r,e[9],21,-343485551),t[0]=xm(r,t[0]),t[1]=xm(n,t[1]),t[2]=xm(s,t[2]),t[3]=xm(o,t[3])}function YC(t,e,r,n,s,o){return e=xm(xm(e,t),xm(n,o)),xm(e<<s|e>>>32-s,r)}function Ou(t,e,r,n,s,o,c){return YC(e&r|~e&n,t,e,s,o,c)}function Ru(t,e,r,n,s,o,c){return YC(e&n|r&~n,t,e,s,o,c)}function Uu(t,e,r,n,s,o,c){return YC(e^r^n,t,e,s,o,c)}function zu(t,e,r,n,s,o,c){return YC(r^(e|~n),t,e,s,o,c)}function BK(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)K3(n,c4e(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(K3(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,K3(n,s),n}function c4e(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Yx=ls.atob.bind(ls),OI=ls.btoa.bind(ls);var oz="0123456789abcdef".split("");function u4e(t){for(var e="",r=0;r<4;r++)e+=oz[t>>8*r+4&15]+oz[t>>8*r&15];return e}function h4e(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function RI(t){return BK(t).map(h4e).join("")}var d4e=function(t){for(var e=0;e<t.length;e++)t[e]=u4e(t[e]);return t.join("")}(BK("hello"))!="5d41402abc4b2a76b9719d911017c592";function xm(t,e){if(d4e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function UI(t,e){var r,n,s,o;if(t!==r){for(var c=(s=t,o=1+(256/t.length>>0),new Array(o+1).join(s)),u=[],i=0;i<256;i++)u[i]=i;var A=0;for(i=0;i<256;i++){var g=u[i];A=(A+g+c.charCodeAt(i))%256,u[i]=u[A],u[A]=g}r=t,n=u}else u=n;var C=e.length,B=0,S=0,P="";for(i=0;i<C;i++)S=(S+(g=u[B=(B+1)%256]))%256,u[B]=u[S],u[S]=g,c=u[(u[B]+u[S])%256],P+=String.fromCharCode(e.charCodeAt(i)^c);return P}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var az={print:4,modify:8,copy:16,"annot-forms":32};function gy(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(u){if(az.perm!==void 0)throw new Error("Invalid permission: "+u);s+=az[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,c),this.P=-(1+(255^s)),this.encryptionKey=RI(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=UI(this.encryptionKey,this.padding)}function yy(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function lz(t){if(wa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!s],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var o in e[r]){var c=e[r][o];try{c[0].apply(t,n)}catch(u){ls.console&&Ua.error("jsPDF PubSub Error",u.message,u)}c[1]&&s.push(o)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function P4(t){if(!(this instanceof P4))return new P4(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function EK(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ug(t,e,r,n,s){if(!(this instanceof Ug))return new Ug(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,EK.call(this,n,s)}function Uy(t,e,r,n,s){if(!(this instanceof Uy))return new Uy(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,EK.call(this,n,s)}function ns(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],o=arguments[3],c=[],u=1,i=16,A="S",g=null;wa(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,o=t.compress||t.compressPdf||o,(g=t.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(i=t.floatPrecision),A=t.defaultPathOperation||"S"),c=t.filters||(o===!0?["FlateEncode"]:c),n=n||"mm",r=(""+(r||"P")).toLowerCase();var C=t.putOnlyUsedFonts||!1,B={},S={internal:{},__private__:{}};S.__private__.PubSub=lz;var P="1.3",j=S.__private__.getPdfVersion=function(){return P};S.__private__.setPdfVersion=function(k){P=k};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};S.__private__.getPageFormats=function(){return R};var N=S.__private__.getPageFormat=function(k){return R[k]};s=s||"a4";var U={COMPAT:"compat",ADVANCED:"advanced"},$=U.COMPAT;function J(){this.saveGraphicsState(),Re(new qe(Xt,0,0,-Xt,0,_o()*Xt).toString()+" cm"),this.setFontSize(this.getFontSize()/Xt),A="n",$=U.ADVANCED}function te(){this.restoreGraphicsState(),A="S",$=U.COMPAT}var ue=S.__private__.combineFontStyleAndFontWeight=function(k,pe){if(k=="bold"&&pe=="normal"||k=="bold"&&pe==400||k=="normal"&&pe=="italic"||k=="bold"&&pe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pe&&(k=pe==400||pe==="normal"?k==="italic"?"italic":"normal":pe!=700&&pe!=="bold"||k!=="normal"?(pe==700?"bold":pe)+""+k:"bold"),k};S.advancedAPI=function(k){var pe=$===U.COMPAT;return pe&&J.call(this),typeof k!="function"||(k(this),pe&&te.call(this)),this},S.compatAPI=function(k){var pe=$===U.ADVANCED;return pe&&te.call(this),typeof k!="function"||(k(this),pe&&J.call(this)),this},S.isAdvancedAPI=function(){return $===U.ADVANCED};var oe,K=function(k){if($!==U.ADVANCED)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ce=S.roundToPrecision=S.__private__.roundToPrecision=function(k,pe){var Ke=e||pe;if(isNaN(k)||isNaN(Ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(Ke).replace(/0+$/,"")};oe=S.hpf=S.__private__.hpf=typeof i=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(k,i)}:i==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(k,16)};var me=S.f2=S.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return ce(k,2)},Z=S.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return ce(k,3)},Y=S.scale=S.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return $===U.COMPAT?k*Xt:$===U.ADVANCED?k:void 0},Le=function(k){return $===U.COMPAT?_o()-k:$===U.ADVANCED?k:void 0},_e=function(k){return Y(Le(k))};S.__private__.setPrecision=S.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var Qe,De="00000000000000000000000000000000",Be=S.__private__.getFileId=function(){return De},xe=S.__private__.setFileId=function(k){return De=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():De.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Qn=new gy(g.userPermissions,g.userPassword,g.ownerPassword,De)),De};S.setFileId=function(k){return xe(k),this},S.getFileId=function(){return Be()};var ze=S.__private__.convertDateToPDFDate=function(k){var pe=k.getTimezoneOffset(),Ke=pe<0?"+":"-",ot=Math.floor(Math.abs(pe/60)),St=Math.abs(pe%60),$t=[Ke,fe(ot),"'",fe(St),"'"].join("");return["D:",k.getFullYear(),fe(k.getMonth()+1),fe(k.getDate()),fe(k.getHours()),fe(k.getMinutes()),fe(k.getSeconds()),$t].join("")},Fe=S.__private__.convertPDFDateToDate=function(k){var pe=parseInt(k.substr(2,4),10),Ke=parseInt(k.substr(6,2),10)-1,ot=parseInt(k.substr(8,2),10),St=parseInt(k.substr(10,2),10),$t=parseInt(k.substr(12,2),10),gr=parseInt(k.substr(14,2),10);return new Date(pe,Ke,ot,St,$t,gr,0)},it=S.__private__.setCreationDate=function(k){var pe;if(k===void 0&&(k=new Date),k instanceof Date)pe=ze(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pe=k}return Qe=pe},ie=S.__private__.getCreationDate=function(k){var pe=Qe;return k==="jsDate"&&(pe=Fe(Qe)),pe};S.setCreationDate=function(k){return it(k),this},S.getCreationDate=function(k){return ie(k)};var le,fe=S.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},be=S.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},He=0,Je=[],tt=[],st=0,Ct=[],Ue=[],Ft=!1,Zt=tt,fr=function(){He=0,st=0,tt=[],Je=[],Ct=[],xr=Wt(),Ar=Wt()};S.__private__.setCustomOutputDestination=function(k){Ft=!0,Zt=k};var Ye=function(k){Ft||(Zt=k)};S.__private__.resetCustomOutputDestination=function(){Ft=!1,Zt=tt};var Re=S.__private__.out=function(k){return k=k.toString(),st+=k.length+1,Zt.push(k),Zt},hr=S.__private__.write=function(k){return Re(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Ut=S.__private__.getArrayBuffer=function(k){for(var pe=k.length,Ke=new ArrayBuffer(pe),ot=new Uint8Array(Ke);pe--;)ot[pe]=k.charCodeAt(pe);return Ke},vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];S.__private__.getStandardFonts=function(){return vt};var Yt=t.fontSize||16;S.__private__.setFontSize=S.setFontSize=function(k){return Yt=$===U.ADVANCED?k/Xt:k,this};var ar,nr=S.__private__.getFontSize=S.getFontSize=function(){return $===U.COMPAT?Yt:Yt*Xt},Fr=t.R2L||!1;S.__private__.setR2L=S.setR2L=function(k){return Fr=k,this},S.__private__.getR2L=S.getR2L=function(){return Fr};var Gr,Ir=S.__private__.setZoomMode=function(k){var pe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))ar=k;else if(isNaN(k)){if(pe.indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');ar=k}else ar=parseInt(k,10)};S.__private__.getZoomMode=function(){return ar};var cn,Sn=S.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');Gr=k};S.__private__.getPageMode=function(){return Gr};var En=S.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');cn=k};S.__private__.getLayoutMode=function(){return cn},S.__private__.setDisplayMode=S.setDisplayMode=function(k,pe,Ke){return Ir(k),En(pe),Sn(Ke),this};var an={title:"",subject:"",author:"",keywords:"",creator:""};S.__private__.getDocumentProperty=function(k){if(Object.keys(an).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return an[k]},S.__private__.getDocumentProperties=function(){return an},S.__private__.setDocumentProperties=S.setProperties=S.setDocumentProperties=function(k){for(var pe in an)an.hasOwnProperty(pe)&&k[pe]&&(an[pe]=k[pe]);return this},S.__private__.setDocumentProperty=function(k,pe){if(Object.keys(an).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return an[k]=pe};var lr,Xt,qr,Kr,kn,mn={},Un={},Hi=[],Gn={},ti={},si={},xi={},Bn=null,Zr=0,Nr=[],un=new lz(S),ri=t.hotfixes||[],Hn={},ir={},We=[],qe=function k(pe,Ke,ot,St,$t,gr){if(!(this instanceof k))return new k(pe,Ke,ot,St,$t,gr);isNaN(pe)&&(pe=1),isNaN(Ke)&&(Ke=0),isNaN(ot)&&(ot=0),isNaN(St)&&(St=1),isNaN($t)&&($t=0),isNaN(gr)&&(gr=0),this._matrix=[pe,Ke,ot,St,$t,gr]};Object.defineProperty(qe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(qe.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(qe.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(qe.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(qe.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(qe.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(qe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qe.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(oe).join(k)},qe.prototype.multiply=function(k){var pe=k.sx*this.sx+k.shy*this.shx,Ke=k.sx*this.shy+k.shy*this.sy,ot=k.shx*this.sx+k.sy*this.shx,St=k.shx*this.shy+k.sy*this.sy,$t=k.tx*this.sx+k.ty*this.shx+this.tx,gr=k.tx*this.shy+k.ty*this.sy+this.ty;return new qe(pe,Ke,ot,St,$t,gr)},qe.prototype.decompose=function(){var k=this.sx,pe=this.shy,Ke=this.shx,ot=this.sy,St=this.tx,$t=this.ty,gr=Math.sqrt(k*k+pe*pe),$r=(k/=gr)*Ke+(pe/=gr)*ot;Ke-=k*$r,ot-=pe*$r;var An=Math.sqrt(Ke*Ke+ot*ot);return $r/=An,k*(ot/=An)<pe*(Ke/=An)&&(k=-k,pe=-pe,$r=-$r,gr=-gr),{scale:new qe(gr,0,0,An,0,0),translate:new qe(1,0,0,1,St,$t),rotate:new qe(k,pe,-pe,k,0,0),skew:new qe(1,0,$r,1,0,0)}},qe.prototype.toString=function(k){return this.join(" ")},qe.prototype.inversed=function(){var k=this.sx,pe=this.shy,Ke=this.shx,ot=this.sy,St=this.tx,$t=this.ty,gr=1/(k*ot-pe*Ke),$r=ot*gr,An=-pe*gr,Tn=-Ke*gr,Wr=k*gr;return new qe($r,An,Tn,Wr,-$r*St-Tn*$t,-An*St-Wr*$t)},qe.prototype.applyToPoint=function(k){var pe=k.x*this.sx+k.y*this.shx+this.tx,Ke=k.x*this.shy+k.y*this.sy+this.ty;return new Uo(pe,Ke)},qe.prototype.applyToRectangle=function(k){var pe=this.applyToPoint(k),Ke=this.applyToPoint(new Uo(k.x+k.w,k.y+k.h));return new Va(pe.x,pe.y,Ke.x-pe.x,Ke.y-pe.y)},qe.prototype.clone=function(){var k=this.sx,pe=this.shy,Ke=this.shx,ot=this.sy,St=this.tx,$t=this.ty;return new qe(k,pe,Ke,ot,St,$t)},S.Matrix=qe;var ht=S.matrixMult=function(k,pe){return pe.multiply(k)},It=new qe(1,0,0,1,0,0);S.unitMatrix=S.identityMatrix=It;var wt=function(k,pe){if(!ti[k]){var Ke=(pe instanceof Ug?"Sh":"P")+(Object.keys(Gn).length+1).toString(10);pe.id=Ke,ti[k]=Ke,Gn[Ke]=pe,un.publish("addPattern",pe)}};S.ShadingPattern=Ug,S.TilingPattern=Uy,S.addShadingPattern=function(k,pe){return K("addShadingPattern()"),wt(k,pe),this},S.beginTilingPattern=function(k){K("beginTilingPattern()"),Wo(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},S.endTilingPattern=function(k,pe){K("endTilingPattern()"),pe.stream=Ue[le].join(`
`),wt(k,pe),un.publish("endTilingPattern",pe),We.pop().restore()};var kt=S.__private__.newObject=function(){var k=Wt();return Ot(k,!0),k},Wt=S.__private__.newObjectDeferred=function(){return He++,Je[He]=function(){return st},He},Ot=function(k,pe){return pe=typeof pe=="boolean"&&pe,Je[k]=st,pe&&Re(k+" 0 obj"),k},pr=S.__private__.newAdditionalObject=function(){var k={objId:Wt(),content:""};return Ct.push(k),k},xr=Wt(),Ar=Wt(),Tr=S.__private__.decodeColorString=function(k){var pe=k.split(" ");if(pe.length!==2||pe[1]!=="g"&&pe[1]!=="G")pe.length===5&&(pe[4]==="k"||pe[4]==="K")&&(pe=[(1-pe[0])*(1-pe[3]),(1-pe[1])*(1-pe[3]),(1-pe[2])*(1-pe[3]),"r"]);else{var Ke=parseFloat(pe[0]);pe=[Ke,Ke,Ke,"r"]}for(var ot="#",St=0;St<3;St++)ot+=("0"+Math.floor(255*parseFloat(pe[St])).toString(16)).slice(-2);return ot},nn=S.__private__.encodeColorString=function(k){var pe;typeof k=="string"&&(k={ch1:k});var Ke=k.ch1,ot=k.ch2,St=k.ch3,$t=k.ch4,gr=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ke=="string"&&Ke.charAt(0)!=="#"){var $r=new SK(Ke);if($r.ok)Ke=$r.toHex();else if(!/^\d*\.?\d*$/.test(Ke))throw new Error('Invalid color "'+Ke+'" passed to jsPDF.encodeColorString.')}if(typeof Ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ke)&&(Ke="#"+Ke[1]+Ke[1]+Ke[2]+Ke[2]+Ke[3]+Ke[3]),typeof Ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ke)){var An=parseInt(Ke.substr(1),16);Ke=An>>16&255,ot=An>>8&255,St=255&An}if(ot===void 0||$t===void 0&&Ke===ot&&ot===St)if(typeof Ke=="string")pe=Ke+" "+gr[0];else switch(k.precision){case 2:pe=me(Ke/255)+" "+gr[0];break;case 3:default:pe=Z(Ke/255)+" "+gr[0]}else if($t===void 0||wa($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return pe=["1.","1.","1.",gr[1]].join(" ");if(typeof Ke=="string")pe=[Ke,ot,St,gr[1]].join(" ");else switch(k.precision){case 2:pe=[me(Ke/255),me(ot/255),me(St/255),gr[1]].join(" ");break;default:case 3:pe=[Z(Ke/255),Z(ot/255),Z(St/255),gr[1]].join(" ")}}else if(typeof Ke=="string")pe=[Ke,ot,St,$t,gr[2]].join(" ");else switch(k.precision){case 2:pe=[me(Ke),me(ot),me(St),me($t),gr[2]].join(" ");break;case 3:default:pe=[Z(Ke),Z(ot),Z(St),Z($t),gr[2]].join(" ")}return pe},on=S.__private__.getFilters=function(){return c},_n=S.__private__.putStream=function(k){var pe=(k=k||{}).data||"",Ke=k.filters||on(),ot=k.alreadyAppliedFilters||[],St=k.addLength1||!1,$t=pe.length,gr=k.objectId,$r=function(_s){return _s};if(g!==null&&gr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&($r=Qn.encryptor(gr,0));var An={};Ke===!0&&(Ke=["FlateEncode"]);var Tn=k.additionalKeyValues||[],Wr=(An=ns.API.processDataByFilters!==void 0?ns.API.processDataByFilters(pe,Ke):{data:pe,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(An.data.length!==0&&(Tn.push({key:"Length",value:An.data.length}),St===!0&&Tn.push({key:"Length1",value:$t})),Wr.length!=0)if(Wr.split("/").length-1==1)Tn.push({key:"Filter",value:Wr});else{Tn.push({key:"Filter",value:"["+Wr+"]"});for(var Dr=0;Dr<Tn.length;Dr+=1)if(Tn[Dr].key==="DecodeParms"){for(var Ci=[],gn=0;gn<An.reverseChain.split("/").length-1;gn+=1)Ci.push("null");Ci.push(Tn[Dr].value),Tn[Dr].value="["+Ci.join(" ")+"]"}}Re("<<");for(var Fi=0;Fi<Tn.length;Fi++)Re("/"+Tn[Fi].key+" "+Tn[Fi].value);Re(">>"),An.data.length!==0&&(Re("stream"),Re($r(An.data)),Re("endstream"))},Dn=S.__private__.putPage=function(k){var pe=k.number,Ke=k.data,ot=k.objId,St=k.contentsObjId;Ot(ot,!0),Re("<</Type /Page"),Re("/Parent "+k.rootDictionaryObjId+" 0 R"),Re("/Resources "+k.resourceDictionaryObjId+" 0 R"),Re("/MediaBox ["+parseFloat(oe(k.mediaBox.bottomLeftX))+" "+parseFloat(oe(k.mediaBox.bottomLeftY))+" "+oe(k.mediaBox.topRightX)+" "+oe(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&Re("/CropBox ["+oe(k.cropBox.bottomLeftX)+" "+oe(k.cropBox.bottomLeftY)+" "+oe(k.cropBox.topRightX)+" "+oe(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&Re("/BleedBox ["+oe(k.bleedBox.bottomLeftX)+" "+oe(k.bleedBox.bottomLeftY)+" "+oe(k.bleedBox.topRightX)+" "+oe(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&Re("/TrimBox ["+oe(k.trimBox.bottomLeftX)+" "+oe(k.trimBox.bottomLeftY)+" "+oe(k.trimBox.topRightX)+" "+oe(k.trimBox.topRightY)+"]"),k.artBox!==null&&Re("/ArtBox ["+oe(k.artBox.bottomLeftX)+" "+oe(k.artBox.bottomLeftY)+" "+oe(k.artBox.topRightX)+" "+oe(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&Re("/UserUnit "+k.userUnit),un.publish("putPage",{objId:ot,pageContext:Nr[pe],pageNumber:pe,page:Ke}),Re("/Contents "+St+" 0 R"),Re(">>"),Re("endobj");var $t=Ke.join(`
`);return $===U.ADVANCED&&($t+=`
Q`),Ot(St,!0),_n({data:$t,filters:on(),objectId:St}),Re("endobj"),ot},qn=S.__private__.putPages=function(){var k,pe,Ke=[];for(k=1;k<=Zr;k++)Nr[k].objId=Wt(),Nr[k].contentsObjId=Wt();for(k=1;k<=Zr;k++)Ke.push(Dn({number:k,data:Ue[k],objId:Nr[k].objId,contentsObjId:Nr[k].contentsObjId,mediaBox:Nr[k].mediaBox,cropBox:Nr[k].cropBox,bleedBox:Nr[k].bleedBox,trimBox:Nr[k].trimBox,artBox:Nr[k].artBox,userUnit:Nr[k].userUnit,rootDictionaryObjId:xr,resourceDictionaryObjId:Ar}));Ot(xr,!0),Re("<</Type /Pages");var ot="/Kids [";for(pe=0;pe<Zr;pe++)ot+=Ke[pe]+" 0 R ";Re(ot+"]"),Re("/Count "+Zr),Re(">>"),Re("endobj"),un.publish("postPutPages")},$n=function(k){un.publish("putFont",{font:k,out:Re,newObject:kt,putStream:_n}),k.isAlreadyPutted!==!0&&(k.objectNumber=kt(),Re("<<"),Re("/Type /Font"),Re("/BaseFont /"+yy(k.postScriptName)),Re("/Subtype /Type1"),typeof k.encoding=="string"&&Re("/Encoding /"+k.encoding),Re("/FirstChar 32"),Re("/LastChar 255"),Re(">>"),Re("endobj"))},Ni=function(){for(var k in mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&$n(mn[k])},Vi=function(k){k.objectNumber=kt();var pe=[];pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Form"}),pe.push({key:"BBox",value:"["+[oe(k.x),oe(k.y),oe(k.x+k.width),oe(k.y+k.height)].join(" ")+"]"}),pe.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var Ke=k.pages[1].join(`
`);_n({data:Ke,additionalKeyValues:pe,objectId:k.objectNumber}),Re("endobj")},Wn=function(){for(var k in Hn)Hn.hasOwnProperty(k)&&Vi(Hn[k])},Ki=function(k,pe){var Ke,ot=[],St=1/(pe-1);for(Ke=0;Ke<1;Ke+=St)ot.push(Ke);if(ot.push(1),k[0].offset!=0){var $t={offset:0,color:k[0].color};k.unshift($t)}if(k[k.length-1].offset!=1){var gr={offset:1,color:k[k.length-1].color};k.push(gr)}for(var $r="",An=0,Tn=0;Tn<ot.length;Tn++){for(Ke=ot[Tn];Ke>k[An+1].offset;)An++;var Wr=k[An].offset,Dr=(Ke-Wr)/(k[An+1].offset-Wr),Ci=k[An].color,gn=k[An+1].color;$r+=be(Math.round((1-Dr)*Ci[0]+Dr*gn[0]).toString(16))+be(Math.round((1-Dr)*Ci[1]+Dr*gn[1]).toString(16))+be(Math.round((1-Dr)*Ci[2]+Dr*gn[2]).toString(16))}return $r.trim()},Cs=function(k,pe){pe||(pe=21);var Ke=kt(),ot=Ki(k.colors,pe),St=[];St.push({key:"FunctionType",value:"0"}),St.push({key:"Domain",value:"[0.0 1.0]"}),St.push({key:"Size",value:"["+pe+"]"}),St.push({key:"BitsPerSample",value:"8"}),St.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_n({data:ot,additionalKeyValues:St,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ke}),Re("endobj"),k.objectNumber=kt(),Re("<< /ShadingType "+k.type),Re("/ColorSpace /DeviceRGB");var $t="/Coords ["+oe(parseFloat(k.coords[0]))+" "+oe(parseFloat(k.coords[1]))+" ";k.type===2?$t+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3])):$t+=oe(parseFloat(k.coords[2]))+" "+oe(parseFloat(k.coords[3]))+" "+oe(parseFloat(k.coords[4]))+" "+oe(parseFloat(k.coords[5])),Re($t+="]"),k.matrix&&Re("/Matrix ["+k.matrix.toString()+"]"),Re("/Function "+Ke+" 0 R"),Re("/Extend [true true]"),Re(">>"),Re("endobj")},ro=function(k,pe){var Ke=Wt(),ot=kt();pe.push({resourcesOid:Ke,objectOid:ot}),k.objectNumber=ot;var St=[];St.push({key:"Type",value:"/Pattern"}),St.push({key:"PatternType",value:"1"}),St.push({key:"PaintType",value:"1"}),St.push({key:"TilingType",value:"1"}),St.push({key:"BBox",value:"["+k.boundingBox.map(oe).join(" ")+"]"}),St.push({key:"XStep",value:oe(k.xStep)}),St.push({key:"YStep",value:oe(k.yStep)}),St.push({key:"Resources",value:Ke+" 0 R"}),k.matrix&&St.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),_n({data:k.stream,additionalKeyValues:St,objectId:k.objectNumber}),Re("endobj")},Fs=function(k){var pe;for(pe in Gn)Gn.hasOwnProperty(pe)&&(Gn[pe]instanceof Ug?Cs(Gn[pe]):Gn[pe]instanceof Uy&&ro(Gn[pe],k))},es=function(k){for(var pe in k.objectNumber=kt(),Re("<<"),k)switch(pe){case"opacity":Re("/ca "+me(k[pe]));break;case"stroke-opacity":Re("/CA "+me(k[pe]))}Re(">>"),Re("endobj")},Sa=function(){var k;for(k in si)si.hasOwnProperty(k)&&es(si[k])},Ba=function(){for(var k in Re("/XObject <<"),Hn)Hn.hasOwnProperty(k)&&Hn[k].objectNumber>=0&&Re("/"+k+" "+Hn[k].objectNumber+" 0 R");un.publish("putXobjectDict"),Re(">>")},tl=function(){Qn.oid=kt(),Re("<<"),Re("/Filter /Standard"),Re("/V "+Qn.v),Re("/R "+Qn.r),Re("/U <"+Qn.toHexString(Qn.U)+">"),Re("/O <"+Qn.toHexString(Qn.O)+">"),Re("/P "+Qn.P),Re(">>"),Re("endobj")},go=function(){for(var k in Re("/Font <<"),mn)mn.hasOwnProperty(k)&&(C===!1||C===!0&&B.hasOwnProperty(k))&&Re("/"+k+" "+mn[k].objectNumber+" 0 R");Re(">>")},Sl=function(){if(Object.keys(Gn).length>0){for(var k in Re("/Shading <<"),Gn)Gn.hasOwnProperty(k)&&Gn[k]instanceof Ug&&Gn[k].objectNumber>=0&&Re("/"+k+" "+Gn[k].objectNumber+" 0 R");un.publish("putShadingPatternDict"),Re(">>")}},sa=function(k){if(Object.keys(Gn).length>0){for(var pe in Re("/Pattern <<"),Gn)Gn.hasOwnProperty(pe)&&Gn[pe]instanceof S.TilingPattern&&Gn[pe].objectNumber>=0&&Gn[pe].objectNumber<k&&Re("/"+pe+" "+Gn[pe].objectNumber+" 0 R");un.publish("putTilingPatternDict"),Re(">>")}},Ha=function(){if(Object.keys(si).length>0){var k;for(k in Re("/ExtGState <<"),si)si.hasOwnProperty(k)&&si[k].objectNumber>=0&&Re("/"+k+" "+si[k].objectNumber+" 0 R");un.publish("putGStateDict"),Re(">>")}},Gi=function(k){Ot(k.resourcesOid,!0),Re("<<"),Re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),go(),Sl(),sa(k.objectOid),Ha(),Ba(),Re(">>"),Re("endobj")},Fc=function(){var k=[];Ni(),Sa(),Wn(),Fs(k),un.publish("putResources"),k.forEach(Gi),Gi({resourcesOid:Ar,objectOid:Number.MAX_SAFE_INTEGER}),un.publish("postPutResources")},nc=function(){un.publish("putAdditionalObjects");for(var k=0;k<Ct.length;k++){var pe=Ct[k];Ot(pe.objId,!0),Re(pe.content),Re("endobj")}un.publish("postPutAdditionalObjects")},Ul=function(k){Un[k.fontName]=Un[k.fontName]||{},Un[k.fontName][k.fontStyle]=k.id},Xo=function(k,pe,Ke,ot,St){var $t={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:k,fontName:pe,fontStyle:Ke,encoding:ot,isStandardFont:St||!1,metadata:{}};return un.publish("addFont",{font:$t,instance:this}),mn[$t.id]=$t,Ul($t),$t.id},Pa=function(k){for(var pe=0,Ke=vt.length;pe<Ke;pe++){var ot=Xo.call(this,k[pe][0],k[pe][1],k[pe][2],vt[pe][3],!0);C===!1&&(B[ot]=!0);var St=k[pe][0].split("-");Ul({id:ot,fontName:St[0],fontStyle:St[1]||""})}un.publish("addFonts",{fonts:mn,dictionary:Un})},mi=function(k){return k.foo=function(){try{return k.apply(this,arguments)}catch(ot){var pe=ot.stack||"";~pe.indexOf(" at ")&&(pe=pe.split(" at ")[1]);var Ke="Error in function "+pe.split(`
`)[0].split("<")[0]+": "+ot.message;if(!ls.console)throw new Error(Ke);ls.console.error(Ke,ot),ls.alert&&alert(Ke)}},k.foo.bar=k,k.foo},So=function(k,pe){var Ke,ot,St,$t,gr,$r,An,Tn,Wr;if(St=(pe=pe||{}).sourceEncoding||"Unicode",gr=pe.outputEncoding,(pe.autoencode||gr)&&mn[lr].metadata&&mn[lr].metadata[St]&&mn[lr].metadata[St].encoding&&($t=mn[lr].metadata[St].encoding,!gr&&mn[lr].encoding&&(gr=mn[lr].encoding),!gr&&$t.codePages&&(gr=$t.codePages[0]),typeof gr=="string"&&(gr=$t[gr]),gr)){for(An=!1,$r=[],Ke=0,ot=k.length;Ke<ot;Ke++)(Tn=gr[k.charCodeAt(Ke)])?$r.push(String.fromCharCode(Tn)):$r.push(k[Ke]),$r[Ke].charCodeAt(0)>>8&&(An=!0);k=$r.join("")}for(Ke=k.length;An===void 0&&Ke!==0;)k.charCodeAt(Ke-1)>>8&&(An=!0),Ke--;if(!An)return k;for($r=pe.noBOM?[]:[254,255],Ke=0,ot=k.length;Ke<ot;Ke++){if((Wr=(Tn=k.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+k+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$r.push(Wr),$r.push(Tn-(Wr<<8))}return String.fromCharCode.apply(void 0,$r)},vs=S.__private__.pdfEscape=S.pdfEscape=function(k,pe){return So(k,pe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bl=S.__private__.beginPage=function(k){Ue[++Zr]=[],Nr[Zr]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},ae(Zr),Ye(Ue[le])},Nc=function(k,pe){var Ke,ot,St;switch(r=pe||r,typeof k=="string"&&(Ke=N(k.toLowerCase()),Array.isArray(Ke)&&(ot=Ke[0],St=Ke[1])),Array.isArray(k)&&(ot=k[0]*Xt,St=k[1]*Xt),isNaN(ot)&&(ot=s[0],St=s[1]),(ot>14400||St>14400)&&(Ua.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),St=Math.min(14400,St)),s=[ot,St],r.substr(0,1)){case"l":St>ot&&(s=[St,ot]);break;case"p":ot>St&&(s=[St,ot])}Bl(s),$c(yo),Re(vo),ic!==0&&Re(ic+" J"),aa!==0&&Re(aa+" j"),un.publish("addPage",{pageNumber:Zr})},Cc=function(k){k>0&&k<=Zr&&(Ue.splice(k,1),Nr.splice(k,1),Zr--,le>Zr&&(le=Zr),this.setPage(le))},ae=function(k){k>0&&k<=Zr&&(le=k)},Oe=S.__private__.getNumberOfPages=S.getNumberOfPages=function(){return Ue.length-1},At=function(k,pe,Ke){var ot,St=void 0;return Ke=Ke||{},k=k!==void 0?k:mn[lr].fontName,pe=pe!==void 0?pe:mn[lr].fontStyle,ot=k.toLowerCase(),Un[ot]!==void 0&&Un[ot][pe]!==void 0?St=Un[ot][pe]:Un[k]!==void 0&&Un[k][pe]!==void 0?St=Un[k][pe]:Ke.disableWarning===!1&&Ua.warn("Unable to look up font label for font '"+k+"', '"+pe+"'. Refer to getFontList() for available fonts."),St||Ke.noFallback||(St=Un.times[pe])==null&&(St=Un.times.normal),St},Ht=S.__private__.putInfo=function(){var k=kt(),pe=function(ot){return ot};for(var Ke in g!==null&&(pe=Qn.encryptor(k,0)),Re("<<"),Re("/Producer ("+vs(pe("jsPDF "+ns.version))+")"),an)an.hasOwnProperty(Ke)&&an[Ke]&&Re("/"+Ke.substr(0,1).toUpperCase()+Ke.substr(1)+" ("+vs(pe(an[Ke]))+")");Re("/CreationDate ("+vs(pe(Qe))+")"),Re(">>"),Re("endobj")},er=S.__private__.putCatalog=function(k){var pe=(k=k||{}).rootDictionaryObjId||xr;switch(kt(),Re("<<"),Re("/Type /Catalog"),Re("/Pages "+pe+" 0 R"),ar||(ar="fullwidth"),ar){case"fullwidth":Re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Re("/OpenAction [3 0 R /Fit]");break;case"original":Re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ke=""+ar;Ke.substr(Ke.length-1)==="%"&&(ar=parseInt(ar)/100),typeof ar=="number"&&Re("/OpenAction [3 0 R /XYZ null null "+me(ar)+"]")}switch(cn||(cn="continuous"),cn){case"continuous":Re("/PageLayout /OneColumn");break;case"single":Re("/PageLayout /SinglePage");break;case"two":case"twoleft":Re("/PageLayout /TwoColumnLeft");break;case"tworight":Re("/PageLayout /TwoColumnRight")}Gr&&Re("/PageMode /"+Gr),un.publish("putCatalog"),Re(">>"),Re("endobj")},tr=S.__private__.putTrailer=function(){Re("trailer"),Re("<<"),Re("/Size "+(He+1)),Re("/Root "+He+" 0 R"),Re("/Info "+(He-1)+" 0 R"),g!==null&&Re("/Encrypt "+Qn.oid+" 0 R"),Re("/ID [ <"+De+"> <"+De+"> ]"),Re(">>")},_r=S.__private__.putHeader=function(){Re("%PDF-"+P),Re("%")},fn=S.__private__.putXRef=function(){var k="0000000000";Re("xref"),Re("0 "+(He+1)),Re("0000000000 65535 f ");for(var pe=1;pe<=He;pe++)typeof Je[pe]=="function"?Re((k+Je[pe]()).slice(-10)+" 00000 n "):Je[pe]!==void 0?Re((k+Je[pe]).slice(-10)+" 00000 n "):Re("0000000000 00000 n ")},pn=S.__private__.buildDocument=function(){fr(),Ye(tt),un.publish("buildDocument"),_r(),qn(),nc(),Fc(),g!==null&&tl(),Ht(),er();var k=st;return fn(),tr(),Re("startxref"),Re(""+k),Re("%%EOF"),Ye(Ue[le]),tt.join(`
`)},Nn=S.__private__.getBlob=function(k){return new Blob([Ut(k)],{type:"application/pdf"})},Mn=S.output=S.__private__.output=mi(function(k,pe){switch(typeof(pe=pe||{})=="string"?pe={filename:pe}:pe.filename=pe.filename||"generated.pdf",k){case void 0:return pn();case"save":S.save(pe.filename);break;case"arraybuffer":return Ut(pn());case"blob":return Nn(pn());case"bloburi":case"bloburl":if(ls.URL!==void 0&&typeof ls.URL.createObjectURL=="function")return ls.URL&&ls.URL.createObjectURL(Nn(pn()))||void 0;Ua.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ke="",ot=pn();try{Ke=OI(ot)}catch{Ke=OI(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+pe.filename+";base64,"+Ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ls)==="[object Window]"){var St="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pe.pdfObjectUrl&&(St=pe.pdfObjectUrl,$t="");var gr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+St+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pe)+");<\/script></body></html>",$r=ls.open();return $r!==null&&$r.document.write(gr),$r}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ls)==="[object Window]"){var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pe.filename+'" width="500px" height="400px" /></body></html>',Tn=ls.open();if(Tn!==null){Tn.document.write(An);var Wr=this;Tn.document.documentElement.querySelector("#pdfViewer").onload=function(){Tn.document.title=pe.filename,Tn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wr.output("bloburl"))}}return Tn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ls)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pe)+'"></iframe></body></html>',Ci=ls.open();if(Ci!==null&&(Ci.document.write(Dr),Ci.document.title=pe.filename),Ci||typeof safari>"u")return Ci;break;case"datauri":case"dataurl":return ls.document.location.href=this.output("datauristring",pe);default:return null}}),Xr=function(k){return Array.isArray(ri)===!0&&ri.indexOf(k)>-1};switch(n){case"pt":Xt=1;break;case"mm":Xt=72/25.4;break;case"cm":Xt=72/2.54;break;case"in":Xt=72;break;case"px":Xt=Xr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xt=12;break;case"ex":Xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Xt=n}var Qn=null;it(),xe();var oi=function(k){return g!==null?Qn.encryptor(k,0):function(pe){return pe}},Pi=S.__private__.getPageInfo=S.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nr[k].objId,pageNumber:k,pageContext:Nr[k]}},Sr=S.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pe in Nr)if(Nr[pe].objId===k)break;return Pi(pe)},ln=S.__private__.getCurrentPageInfo=S.getCurrentPageInfo=function(){return{objId:Nr[le].objId,pageNumber:le,pageContext:Nr[le]}};S.addPage=function(){return Nc.apply(this,arguments),this},S.setPage=function(){return ae.apply(this,arguments),Ye.call(this,Ue[le]),this},S.insertPage=function(k){return this.addPage(),this.movePage(le,k),this},S.movePage=function(k,pe){var Ke,ot;if(k>pe){Ke=Ue[k],ot=Nr[k];for(var St=k;St>pe;St--)Ue[St]=Ue[St-1],Nr[St]=Nr[St-1];Ue[pe]=Ke,Nr[pe]=ot,this.setPage(pe)}else if(k<pe){Ke=Ue[k],ot=Nr[k];for(var $t=k;$t<pe;$t++)Ue[$t]=Ue[$t+1],Nr[$t]=Nr[$t+1];Ue[pe]=Ke,Nr[pe]=ot,this.setPage(pe)}return this},S.deletePage=function(){return Cc.apply(this,arguments),this},S.__private__.text=S.text=function(k,pe,Ke,ot,St){var $t,gr,$r,An,Tn,Wr,Dr,Ci,gn,Fi=(ot=ot||{}).scope||this;if(typeof k=="number"&&typeof pe=="number"&&(typeof Ke=="string"||Array.isArray(Ke))){var _s=Ke;Ke=pe,pe=k,k=_s}if(arguments[3]instanceof qe?(K("The transform parameter of text() with a Matrix value"),gn=St):($r=arguments[4],An=arguments[5],wa(Dr=arguments[3])==="object"&&Dr!==null||(typeof $r=="string"&&(An=$r,$r=null),typeof Dr=="string"&&(An=Dr,Dr=null),typeof Dr=="number"&&($r=Dr,Dr=null),ot={flags:Dr,angle:$r,align:An})),isNaN(pe)||isNaN(Ke)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return Fi;var vn="",ao=!1,Zs=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:oa,Yo=Fi.internal.scaleFactor;function nl(hs){return hs=hs.split("	").join(Array(ot.TabLen||9).join(" ")),vs(hs,Dr)}function il(hs){for(var ss,In=hs.concat(),gi=[],lo=In.length;lo--;)typeof(ss=In.shift())=="string"?gi.push(ss):Array.isArray(hs)&&(ss.length===1||ss[1]===void 0&&ss[2]===void 0)?gi.push(ss[0]):gi.push([ss[0],ss[1],ss[2]]);return gi}function io(hs,ss){var In;if(typeof hs=="string")In=ss(hs)[0];else if(Array.isArray(hs)){for(var gi,lo,eo=hs.concat(),ws=[],Yi=eo.length;Yi--;)typeof(gi=eo.shift())=="string"?ws.push(ss(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(lo=ss(gi[0],gi[1],gi[2]),ws.push([lo[0],lo[1],lo[2]]));In=ws}return In}var Ga=!1,Ea=!0;if(typeof k=="string")Ga=!0;else if(Array.isArray(k)){var Zo=k.concat();gr=[];for(var ja,$i=Zo.length;$i--;)(typeof(ja=Zo.shift())!="string"||Array.isArray(ja)&&typeof ja[0]!="string")&&(Ea=!1);Ga=Ea}if(Ga===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var cs=Yt/Fi.internal.scaleFactor,la=cs*(Zs-1);switch(ot.baseline){case"bottom":Ke-=la;break;case"top":Ke+=cs-la;break;case"hanging":Ke+=cs-2*la;break;case"middle":Ke+=cs/2-la}if((Wr=ot.maxWidth||0)>0&&(typeof k=="string"?k=Fi.splitTextToSize(k,Wr):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(hs,ss){return hs.concat(Fi.splitTextToSize(ss,Wr))},[]))),$t={text:k,x:pe,y:Ke,options:ot,mutex:{pdfEscape:vs,activeFontKey:lr,fonts:mn,activeFontSize:Yt}},un.publish("preProcessText",$t),k=$t.text,$r=(ot=$t.options).angle,!(gn instanceof qe)&&$r&&typeof $r=="number"){$r*=Math.PI/180,ot.rotationDirection===0&&($r=-$r),$===U.ADVANCED&&($r=-$r);var Jr=Math.cos($r),sc=Math.sin($r);gn=new qe(Jr,sc,-sc,Jr,0,0)}else $r&&$r instanceof qe&&(gn=$r);$!==U.ADVANCED||gn||(gn=It),(Tn=ot.charSpace||$o)!==void 0&&(vn+=oe(Y(Tn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ci=ot.horizontalScale)!==void 0&&(vn+=oe(100*Ci)+` Tz
`),ot.lang;var bs=-1,oc=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,yl=Fi.internal.getCurrentPageInfo().pageContext;switch(oc){case 0:case!1:case"fill":bs=0;break;case 1:case!0:case"stroke":bs=1;break;case 2:case"fillThenStroke":bs=2;break;case 3:case"invisible":bs=3;break;case 4:case"fillAndAddForClipping":bs=4;break;case 5:case"strokeAndAddPathForClipping":bs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":bs=6;break;case 7:case"addToPathForClipping":bs=7}var $l=yl.usedRenderingMode!==void 0?yl.usedRenderingMode:-1;bs!==-1?vn+=bs+` Tr
`:$l!==-1&&(vn+=`0 Tr
`),bs!==-1&&(yl.usedRenderingMode=bs),An=ot.align||"left";var js,Jo=Yt*Zs,Aa=Fi.internal.pageSize.getWidth(),Pc=mn[lr];Tn=ot.charSpace||$o,Wr=ot.maxWidth||0,Dr=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var yr=[];if(Object.prototype.toString.call(k)==="[object Array]"){var jr;gr=il(k),An!=="left"&&(js=gr.map(function(hs){return Fi.getStringUnitWidth(hs,{font:Pc,charSpace:Tn,fontSize:Yt,doKerning:!1})*Yt/Yo}));var xn,jn=0;if(An==="right"){pe-=js[0],k=[],$i=gr.length;for(var ts=0;ts<$i;ts++)ts===0?(xn=qo(pe),jr=Xs(Ke)):(xn=Y(jn-js[ts]),jr=-Jo),k.push([gr[ts],xn,jr]),jn=js[ts]}else if(An==="center"){pe-=js[0]/2,k=[],$i=gr.length;for(var bi=0;bi<$i;bi++)bi===0?(xn=qo(pe),jr=Xs(Ke)):(xn=Y((jn-js[bi])/2),jr=-Jo),k.push([gr[bi],xn,jr]),jn=js[bi]}else if(An==="left"){k=[],$i=gr.length;for(var As=0;As<$i;As++)k.push(gr[As])}else{if(An!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');k=[],$i=gr.length,Wr=Wr!==0?Wr:Aa;for(var us=0;us<$i;us++)jr=us===0?Xs(Ke):-Jo,xn=us===0?qo(pe):0,us<$i-1?yr.push(oe(Y((Wr-js[us])/(gr[us].split(" ").length-1)))):yr.push(0),k.push([gr[us],xn,jr])}}var bo=typeof ot.R2L=="boolean"?ot.R2L:Fr;bo===!0&&(k=io(k,function(hs,ss,In){return[hs.split("").reverse().join(""),ss,In]})),$t={text:k,x:pe,y:Ke,options:ot,mutex:{pdfEscape:vs,activeFontKey:lr,fonts:mn,activeFontSize:Yt}},un.publish("postProcessText",$t),k=$t.text,ao=$t.mutex.isHex||!1;var Xi=mn[lr].encoding;Xi!=="WinAnsiEncoding"&&Xi!=="StandardEncoding"||(k=io(k,function(hs,ss,In){return[nl(hs),ss,In]})),gr=il(k),k=[];for(var ks,Ss,Us,Js=0,ea=1,ma=Array.isArray(gr[0])?ea:Js,ta="",ra=function(hs,ss,In){var gi="";return In instanceof qe?(In=typeof ot.angle=="number"?ht(In,new qe(1,0,0,1,hs,ss)):ht(new qe(1,0,0,1,hs,ss),In),$===U.ADVANCED&&(In=ht(new qe(1,0,0,-1,0,0),In)),gi=In.join(" ")+` Tm
`):gi=oe(hs)+" "+oe(ss)+` Td
`,gi},Gs=0;Gs<gr.length;Gs++){switch(ta="",ma){case ea:Us=(ao?"<":"(")+gr[Gs][0]+(ao?">":")"),ks=parseFloat(gr[Gs][1]),Ss=parseFloat(gr[Gs][2]);break;case Js:Us=(ao?"<":"(")+gr[Gs]+(ao?">":")"),ks=qo(pe),Ss=Xs(Ke)}yr!==void 0&&yr[Gs]!==void 0&&(ta=yr[Gs]+` Tw
`),Gs===0?k.push(ta+ra(ks,Ss,gn)+Us):ma===Js?k.push(ta+Us):ma===ea&&k.push(ta+ra(ks,Ss,gn)+Us)}k=ma===Js?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var ga=`BT
/`;return ga+=lr+" "+Yt+` Tf
`,ga+=oe(Yt*Zs)+` TL
`,ga+=xs+`
`,ga+=vn,ga+=k,Re(ga+="ET"),B[lr]=!0,Fi};var Jn=S.__private__.clip=S.clip=function(k){return Re(k==="evenodd"?"W*":"W"),this};S.clipEvenOdd=function(){return Jn("evenodd")},S.__private__.discardPath=S.discardPath=function(){return Re("n"),this};var Bi=S.__private__.isValidStyle=function(k){var pe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(pe=!0),pe};S.__private__.setDefaultPathOperation=S.setDefaultPathOperation=function(k){return Bi(k)&&(A=k),this};var Ns=S.__private__.getStyle=S.getStyle=function(k){var pe=A;switch(k){case"D":case"S":pe="S";break;case"F":pe="f";break;case"FD":case"DF":pe="B";break;case"f":case"f*":case"B":case"B*":pe=k}return pe},Ks=S.close=function(){return Re("h"),this};S.stroke=function(){return Re("S"),this},S.fill=function(k){return Ro("f",k),this},S.fillEvenOdd=function(k){return Ro("f*",k),this},S.fillStroke=function(k){return Ro("B",k),this},S.fillStrokeEvenOdd=function(k){return Ro("B*",k),this};var Ro=function(k,pe){wa(pe)==="object"?Li(pe,k):Re(k)},yn=function(k){k===null||$===U.ADVANCED&&k===void 0||(k=Ns(k),Re(k))};function Yn(k,pe,Ke,ot,St){var $t=new Uy(pe||this.boundingBox,Ke||this.xStep,ot||this.yStep,this.gState,St||this.matrix);$t.stream=this.stream;var gr=k+"$$"+this.cloneIndex+++"$$";return wt(gr,$t),$t}var Li=function(k,pe){var Ke=ti[k.key],ot=Gn[Ke];if(ot instanceof Ug)Re("q"),Re(da(pe)),ot.gState&&S.setGState(ot.gState),Re(k.matrix.toString()+" cm"),Re("/"+Ke+" sh"),Re("Q");else if(ot instanceof Uy){var St=new qe(1,0,0,-1,0,_o());k.matrix&&(St=St.multiply(k.matrix||It),Ke=Yn.call(ot,k.key,k.boundingBox,k.xStep,k.yStep,St).id),Re("q"),Re("/Pattern cs"),Re("/"+Ke+" scn"),ot.gState&&S.setGState(ot.gState),Re(pe),Re("Q")}},da=function(k){switch(k){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ms=S.moveTo=function(k,pe){return Re(oe(Y(k))+" "+oe(_e(pe))+" m"),this},fi=S.lineTo=function(k,pe){return Re(oe(Y(k))+" "+oe(_e(pe))+" l"),this},Po=S.curveTo=function(k,pe,Ke,ot,St,$t){return Re([oe(Y(k)),oe(_e(pe)),oe(Y(Ke)),oe(_e(ot)),oe(Y(St)),oe(_e($t)),"c"].join(" ")),this};S.__private__.line=S.line=function(k,pe,Ke,ot,St){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||!Bi(St))throw new Error("Invalid arguments passed to jsPDF.line");return $===U.COMPAT?this.lines([[Ke-k,ot-pe]],k,pe,[1,1],St||"S"):this.lines([[Ke-k,ot-pe]],k,pe,[1,1]).stroke()},S.__private__.lines=S.lines=function(k,pe,Ke,ot,St,$t){var gr,$r,An,Tn,Wr,Dr,Ci,gn,Fi,_s,vn,ao;if(typeof k=="number"&&(ao=Ke,Ke=pe,pe=k,k=ao),ot=ot||[1,1],$t=$t||!1,isNaN(pe)||isNaN(Ke)||!Array.isArray(k)||!Array.isArray(ot)||!Bi(St)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ms(pe,Ke),gr=ot[0],$r=ot[1],Tn=k.length,_s=pe,vn=Ke,An=0;An<Tn;An++)(Wr=k[An]).length===2?(_s=Wr[0]*gr+_s,vn=Wr[1]*$r+vn,fi(_s,vn)):(Dr=Wr[0]*gr+_s,Ci=Wr[1]*$r+vn,gn=Wr[2]*gr+_s,Fi=Wr[3]*$r+vn,_s=Wr[4]*gr+_s,vn=Wr[5]*$r+vn,Po(Dr,Ci,gn,Fi,_s,vn));return $t&&Ks(),yn(St),this},S.path=function(k){for(var pe=0;pe<k.length;pe++){var Ke=k[pe],ot=Ke.c;switch(Ke.op){case"m":Ms(ot[0],ot[1]);break;case"l":fi(ot[0],ot[1]);break;case"c":Po.apply(this,ot);break;case"h":Ks()}}return this},S.__private__.rect=S.rect=function(k,pe,Ke,ot,St){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||!Bi(St))throw new Error("Invalid arguments passed to jsPDF.rect");return $===U.COMPAT&&(ot=-ot),Re([oe(Y(k)),oe(_e(pe)),oe(Y(Ke)),oe(Y(ot)),"re"].join(" ")),yn(St),this},S.__private__.triangle=S.triangle=function(k,pe,Ke,ot,St,$t,gr){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||isNaN(St)||isNaN($t)||!Bi(gr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ke-k,ot-pe],[St-Ke,$t-ot],[k-St,pe-$t]],k,pe,[1,1],gr,!0),this},S.__private__.roundedRect=S.roundedRect=function(k,pe,Ke,ot,St,$t,gr){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||isNaN(St)||isNaN($t)||!Bi(gr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $r=4/3*(Math.SQRT2-1);return St=Math.min(St,.5*Ke),$t=Math.min($t,.5*ot),this.lines([[Ke-2*St,0],[St*$r,0,St,$t-$t*$r,St,$t],[0,ot-2*$t],[0,$t*$r,-St*$r,$t,-St,$t],[2*St-Ke,0],[-St*$r,0,-St,-$t*$r,-St,-$t],[0,2*$t-ot],[0,-$t*$r,St*$r,-$t,St,-$t]],k+St,pe,[1,1],gr,!0),this},S.__private__.ellipse=S.ellipse=function(k,pe,Ke,ot,St){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||isNaN(ot)||!Bi(St))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*Ke,gr=4/3*(Math.SQRT2-1)*ot;return Ms(k+Ke,pe),Po(k+Ke,pe-gr,k+$t,pe-ot,k,pe-ot),Po(k-$t,pe-ot,k-Ke,pe-gr,k-Ke,pe),Po(k-Ke,pe+gr,k-$t,pe+ot,k,pe+ot),Po(k+$t,pe+ot,k+Ke,pe+gr,k+Ke,pe),yn(St),this},S.__private__.circle=S.circle=function(k,pe,Ke,ot){if(isNaN(k)||isNaN(pe)||isNaN(Ke)||!Bi(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,pe,Ke,Ke,ot)},S.setFont=function(k,pe,Ke){return Ke&&(pe=ue(pe,Ke)),lr=At(k,pe,{disableWarning:!1}),this};var zl=S.__private__.getFont=S.getFont=function(){return mn[At.apply(S,arguments)]};S.__private__.getFontList=S.getFontList=function(){var k,pe,Ke={};for(k in Un)if(Un.hasOwnProperty(k))for(pe in Ke[k]=[],Un[k])Un[k].hasOwnProperty(pe)&&Ke[k].push(pe);return Ke},S.addFont=function(k,pe,Ke,ot,St){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?St=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&(Ke=ue(Ke,ot)),St=St||"Identity-H",Xo.call(this,k,pe,Ke,St)};var oa,yo=t.lineWidth||.200025,ps=S.__private__.getLineWidth=S.getLineWidth=function(){return yo},$c=S.__private__.setLineWidth=S.setLineWidth=function(k){return yo=k,Re(oe(Y(k))+" w"),this};S.__private__.setLineDash=ns.API.setLineDash=ns.API.setLineDashPattern=function(k,pe){if(k=k||[],pe=pe||0,isNaN(pe)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(Ke){return oe(Y(Ke))}).join(" "),pe=oe(Y(pe)),Re("["+k+"] "+pe+" d"),this};var Ql=S.__private__.getLineHeight=S.getLineHeight=function(){return Yt*oa};S.__private__.getLineHeight=S.getLineHeight=function(){return Yt*oa};var Hl=S.__private__.setLineHeightFactor=S.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(oa=k),this},Ma=S.__private__.getLineHeightFactor=S.getLineHeightFactor=function(){return oa};Hl(t.lineHeight);var qo=S.__private__.getHorizontalCoordinate=function(k){return Y(k)},Xs=S.__private__.getVerticalCoordinate=function(k){return $===U.ADVANCED?k:Nr[le].mediaBox.topRightY-Nr[le].mediaBox.bottomLeftY-Y(k)},Bo=S.__private__.getHorizontalCoordinateString=S.getHorizontalCoordinateString=function(k){return oe(qo(k))},Ys=S.__private__.getVerticalCoordinateString=S.getVerticalCoordinateString=function(k){return oe(Xs(k))},vo=t.strokeColor||"0 G";S.__private__.getStrokeColor=S.getDrawColor=function(){return Tr(vo)},S.__private__.setStrokeColor=S.setDrawColor=function(k,pe,Ke,ot){return vo=nn({ch1:k,ch2:pe,ch3:Ke,ch4:ot,pdfColorType:"draw",precision:2}),Re(vo),this};var fa=t.fillColor||"0 g";S.__private__.getFillColor=S.getFillColor=function(){return Tr(fa)},S.__private__.setFillColor=S.setFillColor=function(k,pe,Ke,ot){return fa=nn({ch1:k,ch2:pe,ch3:Ke,ch4:ot,pdfColorType:"fill",precision:2}),Re(fa),this};var xs=t.textColor||"0 g",no=S.__private__.getTextColor=S.getTextColor=function(){return Tr(xs)};S.__private__.setTextColor=S.setTextColor=function(k,pe,Ke,ot){return xs=nn({ch1:k,ch2:pe,ch3:Ke,ch4:ot,pdfColorType:"text",precision:3}),this};var $o=t.charSpace,Eo=S.__private__.getCharSpace=S.getCharSpace=function(){return parseFloat($o||0)};S.__private__.setCharSpace=S.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $o=k,this};var ic=0;S.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},S.__private__.setLineCap=S.setLineCap=function(k){var pe=S.CapJoinStyles[k];if(pe===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ic=pe,Re(pe+" J"),this};var aa=0;S.__private__.setLineJoin=S.setLineJoin=function(k){var pe=S.CapJoinStyles[k];if(pe===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return aa=pe,Re(pe+" j"),this},S.__private__.setLineMiterLimit=S.__private__.setMiterLimit=S.setLineMiterLimit=S.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Re(oe(Y(k))+" M"),this},S.GState=P4,S.setGState=function(k){(k=typeof k=="string"?si[xi[k]]:rl(null,k)).equals(Bn)||(Re("/"+k.id+" gs"),Bn=k)};var rl=function(k,pe){if(!k||!xi[k]){var Ke=!1;for(var ot in si)if(si.hasOwnProperty(ot)&&si[ot].equals(pe)){Ke=!0;break}if(Ke)pe=si[ot];else{var St="GS"+(Object.keys(si).length+1).toString(10);si[St]=pe,pe.id=St}return k&&(xi[k]=pe.id),un.publish("addGState",pe),pe}};S.addGState=function(k,pe){return rl(k,pe),this},S.saveGraphicsState=function(){return Re("q"),Hi.push({key:lr,size:Yt,color:xs}),this},S.restoreGraphicsState=function(){Re("Q");var k=Hi.pop();return lr=k.key,Yt=k.size,xs=k.color,Bn=null,this},S.setCurrentTransformationMatrix=function(k){return Re(k.toString()+" cm"),this},S.comment=function(k){return Re("#"+k),this};var Uo=function(k,pe){var Ke=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ke},set:function($t){isNaN($t)||(Ke=parseFloat($t))}});var ot=pe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function($t){isNaN($t)||(ot=parseFloat($t))}});var St="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return St},set:function($t){St=$t.toString()}}),this},Va=function(k,pe,Ke,ot){Uo.call(this,k,pe),this.type="rect";var St=Ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return St},set:function(gr){isNaN(gr)||(St=parseFloat(gr))}});var $t=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(gr){isNaN(gr)||($t=parseFloat(gr))}}),this},Vl=function(){this.page=Zr,this.currentPage=le,this.pages=Ue.slice(0),this.pagesContext=Nr.slice(0),this.x=qr,this.y=Kr,this.matrix=kn,this.width=xo(le),this.height=_o(le),this.outputDestination=Zt,this.id="",this.objectNumber=-1};Vl.prototype.restore=function(){Zr=this.page,le=this.currentPage,Nr=this.pagesContext,Ue=this.pages,qr=this.x,Kr=this.y,kn=this.matrix,Gl(le,this.width),ql(le,this.height),Zt=this.outputDestination};var Wo=function(k,pe,Ke,ot,St){We.push(new Vl),Zr=le=0,Ue=[],qr=k,Kr=pe,kn=St,Bl([Ke,ot])},yu=function(k){if(ir[k])We.pop().restore();else{var pe=new Vl,Ke="Xo"+(Object.keys(Hn).length+1).toString(10);pe.id=Ke,ir[k]=Ke,Hn[Ke]=pe,un.publish("addFormObject",pe),We.pop().restore()}};for(var pa in S.beginFormObject=function(k,pe,Ke,ot,St){return Wo(k,pe,Ke,ot,St),this},S.endFormObject=function(k){return yu(k),this},S.doFormObject=function(k,pe){var Ke=Hn[ir[k]];return Re("q"),Re(pe.toString()+" cm"),Re("/"+Ke.id+" Do"),Re("Q"),this},S.getFormObject=function(k){var pe=Hn[ir[k]];return{x:pe.x,y:pe.y,width:pe.width,height:pe.height,matrix:pe.matrix}},S.save=function(k,pe){return k=k||"generated.pdf",(pe=pe||{}).returnPromise=pe.returnPromise||!1,pe.returnPromise===!1?(Dg(Nn(pn()),k),typeof Dg.unload=="function"&&ls.setTimeout&&setTimeout(Dg.unload,911),this):new Promise(function(Ke,ot){try{var St=Dg(Nn(pn()),k);typeof Dg.unload=="function"&&ls.setTimeout&&setTimeout(Dg.unload,911),Ke(St)}catch($t){ot($t.message)}})},ns.API)ns.API.hasOwnProperty(pa)&&(pa==="events"&&ns.API.events.length?function(k,pe){var Ke,ot,St;for(St=pe.length-1;St!==-1;St--)Ke=pe[St][0],ot=pe[St][1],k.subscribe.apply(k,[Ke].concat(typeof ot=="function"?[ot]:ot))}(un,ns.API.events):S[pa]=ns.API[pa]);var xo=S.getPageWidth=function(k){return(Nr[k=k||le].mediaBox.topRightX-Nr[k].mediaBox.bottomLeftX)/Xt},Gl=S.setPageWidth=function(k,pe){Nr[k].mediaBox.topRightX=pe*Xt+Nr[k].mediaBox.bottomLeftX},_o=S.getPageHeight=function(k){return(Nr[k=k||le].mediaBox.topRightY-Nr[k].mediaBox.bottomLeftY)/Xt},ql=S.setPageHeight=function(k,pe){Nr[k].mediaBox.topRightY=pe*Xt+Nr[k].mediaBox.bottomLeftY};return S.internal={pdfEscape:vs,getStyle:Ns,getFont:zl,getFontSize:nr,getCharSpace:Eo,getTextColor:no,getLineHeight:Ql,getLineHeightFactor:Ma,getLineWidth:ps,write:hr,getHorizontalCoordinate:qo,getVerticalCoordinate:Xs,getCoordinateString:Bo,getVerticalCoordinateString:Ys,collections:{},newObject:kt,newAdditionalObject:pr,newObjectDeferred:Wt,newObjectDeferredBegin:Ot,getFilters:on,putStream:_n,events:un,scaleFactor:Xt,pageSize:{getWidth:function(){return xo(le)},setWidth:function(k){Gl(le,k)},getHeight:function(){return _o(le)},setHeight:function(k){ql(le,k)}},encryptionOptions:g,encryption:Qn,getEncryptor:oi,output:Mn,getNumberOfPages:Oe,pages:Ue,out:Re,f2:me,f3:Z,getPageInfo:Pi,getPageInfoByObjId:Sr,getCurrentPageInfo:ln,getPDFVersion:j,Point:Uo,Rectangle:Va,Matrix:qe,hasHotfix:Xr},Object.defineProperty(S.internal.pageSize,"width",{get:function(){return xo(le)},set:function(k){Gl(le,k)},enumerable:!0,configurable:!0}),Object.defineProperty(S.internal.pageSize,"height",{get:function(){return _o(le)},set:function(k){ql(le,k)},enumerable:!0,configurable:!0}),Pa.call(S,vt),lr="F1",Nc(s,r),un.publish("initialized"),S}gy.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},gy.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gy.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},gy.prototype.processOwnerPassword=function(t,e){return UI(RI(e).substr(0,5),t)},gy.prototype.encryptor=function(t,e){var r=RI(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return UI(r,n)}},P4.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||wa(t)!==wa(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},ns.API={events:[]},ns.version="2.5.1";var Zl=ns.API,MN=1,L0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hy=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ls=function(t){return t.toFixed(2)},WA=function(t){return t.toFixed(5)};Zl.__acroform__={};var Xh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},cz=function(t){return t*MN},lp=function(t){var e=new IK,r=wi.internal.getHeight(t)||0,n=wi.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ls(n)),Number(Ls(r))],e},f4e=Zl.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},p4e=Zl.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},A4e=Zl.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},xc=Zl.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A4e(t,e-1)},_c=Zl.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return f4e(t,e-1)},bc=Zl.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return p4e(t,e-1)},m4e=Zl.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],o=t[1],c=t[2],u=t[3],i={};return i.lowerLeft_X=r(s)||0,i.lowerLeft_Y=n(o+u)||0,i.upperRight_X=r(s+c)||0,i.upperRight_Y=n(o)||0,[Number(Ls(i.lowerLeft_X)),Number(Ls(i.lowerLeft_Y)),Number(Ls(i.upperRight_X)),Number(Ls(i.upperRight_Y))]},g4e=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=zI(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Ls(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=lp(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},zI=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(Z){return Z.split(`
`)}):s.map(function(Z){return[Z]});var o=r,c=wi.internal.getHeight(t)||0;c=c<0?-c:c;var u=wi.internal.getWidth(t)||0;u=u<0?-u:u;var i=function(Z,Y,Le){if(Z+1<s.length){var _e=Y+" "+s[Z+1][0];return j2(_e,t,Le).width<=u-4}return!1};o++;e:for(;o>0;){e="",o--;var A,g,C=j2("3",t,o).height,B=t.multiline?c-o:(c-C)/2,S=B+=2,P=0,j=0,R=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+j2(e,t,o=12).width+", FieldWidth:"+u+`
`;break}for(var N="",U=0,$=0;$<s.length;$++)if(s.hasOwnProperty($)){var J=!1;if(s[$].length!==1&&R!==s[$].length-1){if((C+2)*(U+2)+2>c)continue e;N+=s[$][R],J=!0,j=$,$--}else{N=(N+=s[$][R]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var te=parseInt($),ue=i(te,N,o),oe=$>=s.length-1;if(ue&&!oe){N+=" ",R=0;continue}if(ue||oe){if(oe)j=te;else if(t.multiline&&(C+2)*(U+2)+2>c)continue e}else{if(!t.multiline||(C+2)*(U+2)+2>c)continue e;j=te}}for(var K="",ce=P;ce<=j;ce++){var me=s[ce];if(t.multiline){if(ce===j){K+=me[R]+" ",R=(R+1)%me.length;continue}if(ce===P){K+=me[me.length-1]+" ";continue}}K+=me[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,g=j2(K,t,o).width,t.textAlign){case"right":A=u-g-2;break;case"center":A=(u-g)/2;break;case"left":default:A=2}e+=Ls(A)+" "+Ls(S)+` Td
`,e+="("+L0(K)+`) Tj
`,e+=-Ls(A)+` 0 Td
`,S=-(o+2),g=0,P=J?j:j+1,U++,N=""}break}return n.text=e,n.fontSize=o,n},j2=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},y4e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},v4e=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},x4e=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),wa(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},_4e=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Vf.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(y4e)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");MN=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new LK,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var o=n[s];o.objId=void 0,o.hasAnnotation&&v4e(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var o=!n;for(var c in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var u=n[c],i=[],A=u.Rect;if(u.Rect&&(u.Rect=m4e(u.Rect,s)),s.internal.newObjectDeferredBegin(u.objId,!0),u.DA=wi.createDefaultAppearanceStream(u),wa(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(i=u.getKeyValueListForStream()),u.Rect=A,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=g4e(u);i.push({key:"AP",value:"<</N "+g+">>"}),s.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var C="";for(var B in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(B)){var S=u.appearanceStreamContent[B];if(C+="/"+B+" ",C+="<<",Object.keys(S).length>=1||Array.isArray(S)){for(var c in S)if(S.hasOwnProperty(c)){var P=S[c];typeof P=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P+" ",s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P)}}else typeof(P=S)=="function"&&(P=P.call(s,u)),C+="/"+c+" "+P,s.internal.acroformPlugin.xForms.indexOf(P)>=0||s.internal.acroformPlugin.xForms.push(P);C+=">>"}i.push({key:"AP",value:`<<
`+C+">>"})}s.internal.putStream({additionalKeyValues:i,objectId:u.objId}),s.internal.out("endobj")}o&&x4e(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},TK=Zl.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(c){return c};if(Array.isArray(t)){for(var s="[",o=0;o<t.length;o++)switch(o!==0&&(s+=" "),wa(t[o])){case"boolean":case"number":case"object":s+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+L0(n(t[o].toString()))+")"):s+=t[o].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},X3=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+L0(n(t))+")"},Ap=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ap.prototype.toString=function(){return this.objId+" 0 R"},Ap.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ap.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:TK(s,this.objId,this.scope)}):s instanceof Ap?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var IK=function(){Ap.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Xh(IK,Ap);var LK=function(){Ap.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+L0(r(t))+")"}},set:function(r){t=r}})};Xh(LK,Ap);var Vf=function t(){Ap.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!xc(e,3)},set:function(N){N?this.F=_c(e,3):this.F=bc(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof M4)return;o="FieldObject"+t.FieldNum++}var N=function(U){return U};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+L0(N(o))+")"},set:function(N){o=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(N){o=N}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var i=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return i},set:function(N){i=N}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return A===void 0?50/MN:A},set:function(N){A=N}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(N){g=N}});var C="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!C||this instanceof M4||this instanceof c0))return X3(C,this.objId,this.scope)},set:function(N){N=N.toString(),C=N}});var B=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(B)return this instanceof eu?B:X3(B,this.objId,this.scope)},set:function(N){N=N.toString(),B=this instanceof eu?N:N.substr(0,1)==="("?hy(N.substr(1,N.length-2)):hy(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof eu?hy(B.substr(1,B.length-1)):B},set:function(N){N=N.toString(),B=this instanceof eu?"/"+N:N}});var S=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(S)return S},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof eu?S:X3(S,this.objId,this.scope)},set:function(N){N=N.toString(),S=this instanceof eu?N:N.substr(0,1)==="("?hy(N.substr(1,N.length-2)):hy(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof eu?hy(S.substr(1,S.length-1)):S},set:function(N){N=N.toString(),S=this instanceof eu?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var P,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(N){N=!!N,j=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(P)return P},set:function(N){P=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,1)},set:function(N){N?this.Ff=_c(this.Ff,1):this.Ff=bc(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,2)},set:function(N){N?this.Ff=_c(this.Ff,2):this.Ff=bc(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,3)},set:function(N){N?this.Ff=_c(this.Ff,3):this.Ff=bc(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');R=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(R){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};Xh(Vf,Ap);var Zy=function(){Vf.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return TK(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(o,c,u){u||(u=1);for(var i,A=[];i=c.exec(o);)A.push(i[u]);return A}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,18)},set:function(r){r?this.Ff=_c(this.Ff,18):this.Ff=bc(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=_c(this.Ff,19):this.Ff=bc(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,20)},set:function(r){r?(this.Ff=_c(this.Ff,20),e.sort()):this.Ff=bc(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,22)},set:function(r){r?this.Ff=_c(this.Ff,22):this.Ff=bc(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,23)},set:function(r){r?this.Ff=_c(this.Ff,23):this.Ff=bc(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,27)},set:function(r){r?this.Ff=_c(this.Ff,27):this.Ff=bc(this.Ff,27)}}),this.hasAppearanceStream=!1};Xh(Zy,Vf);var Jy=function(){Zy.call(this),this.fontName="helvetica",this.combo=!1};Xh(Jy,Zy);var e1=function(){Jy.call(this),this.combo=!0};Xh(e1,Jy);var m5=function(){e1.call(this),this.edit=!0};Xh(m5,e1);var eu=function(){Vf.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,15)},set:function(r){r?this.Ff=_c(this.Ff,15):this.Ff=bc(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,16)},set:function(r){r?this.Ff=_c(this.Ff,16):this.Ff=bc(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,17)},set:function(r){r?this.Ff=_c(this.Ff,17):this.Ff=bc(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,26)},set:function(r){r?this.Ff=_c(this.Ff,26):this.Ff=bc(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+L0(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){wa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Xh(eu,Vf);var g5=function(){eu.call(this),this.pushButton=!0};Xh(g5,eu);var t1=function(){eu.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xh(t1,eu);var M4=function(){var t,e;Vf.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(u){return u};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var o,c=[];for(o in c.push("<<"),n)c.push("/"+o+" ("+L0(s(n[o]))+")");return c.push(">>"),c.join(`
`)},set:function(s){wa(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=wi.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xh(M4,Vf),t1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},t1.prototype.createOption=function(t){var e=new M4;return e.Parent=this,e.optionName=t,this.Kids.push(e),b4e.call(this.scope,e),e};var y5=function(){eu.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=wi.CheckBox.createAppearanceStream()};Xh(y5,eu);var c0=function(){Vf.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,13)},set:function(e){e?this.Ff=_c(this.Ff,13):this.Ff=bc(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,21)},set:function(e){e?this.Ff=_c(this.Ff,21):this.Ff=bc(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,23)},set:function(e){e?this.Ff=_c(this.Ff,23):this.Ff=bc(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,24)},set:function(e){e?this.Ff=_c(this.Ff,24):this.Ff=bc(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,25)},set:function(e){e?this.Ff=_c(this.Ff,25):this.Ff=bc(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,26)},set:function(e){e?this.Ff=_c(this.Ff,26):this.Ff=bc(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xh(c0,Vf);var v5=function(){c0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!xc(this.Ff,14)},set:function(t){t?this.Ff=_c(this.Ff,14):this.Ff=bc(this.Ff,14)}}),this.password=!0};Xh(v5,c0);var wi={CheckBox:{createAppearanceStream:function(){return{N:{On:wi.CheckBox.YesNormal},D:{On:wi.CheckBox.YesPushDown,Off:wi.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),o=zI(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Ls(wi.internal.getWidth(t))+" "+Ls(wi.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Ls(o.fontSize)+" Tf "+s),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=lp(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],o=wi.internal.getHeight(t),c=wi.internal.getWidth(t),u=zI(t,t.caption);return s.push("1 g"),s.push("0 0 "+Ls(c)+" "+Ls(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Ls(c-1)+" "+Ls(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Ls(u.fontSize)+" Tf "+n),s.push(u.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ls(wi.internal.getWidth(t))+" "+Ls(wi.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:wi.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=wi.RadioButton.Circle.YesNormal,e.D[t]=wi.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=wi.internal.getWidth(t)<=wi.internal.getHeight(t)?wi.internal.getWidth(t)/4:wi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=wi.internal.Bezier_C,o=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+WA(wi.internal.getWidth(t)/2)+" "+WA(wi.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=wi.internal.getWidth(t)<=wi.internal.getHeight(t)?wi.internal.getWidth(t)/4:wi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*wi.internal.Bezier_C).toFixed(5)),c=Number((n*wi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+WA(wi.internal.getWidth(t)/2)+" "+WA(wi.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+WA(wi.internal.getWidth(t)/2)+" "+WA(wi.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),r.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),r.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),r.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=wi.internal.getWidth(t)<=wi.internal.getHeight(t)?wi.internal.getWidth(t)/4:wi.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),o=Number((s*wi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+WA(wi.internal.getWidth(t)/2)+" "+WA(wi.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),r.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),r.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),r.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:wi.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=wi.RadioButton.Cross.YesNormal,e.D[t]=wi.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lp(t);e.scope=t.scope;var r=[],n=wi.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Ls(wi.internal.getWidth(t)-2)+" "+Ls(wi.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ls(n.x1.x)+" "+Ls(n.x1.y)+" m"),r.push(Ls(n.x2.x)+" "+Ls(n.x2.y)+" l"),r.push(Ls(n.x4.x)+" "+Ls(n.x4.y)+" m"),r.push(Ls(n.x3.x)+" "+Ls(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=wi.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ls(wi.internal.getWidth(t))+" "+Ls(wi.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ls(wi.internal.getWidth(t)-2)+" "+Ls(wi.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ls(r.x1.x)+" "+Ls(r.x1.y)+" m"),n.push(Ls(r.x2.x)+" "+Ls(r.x2.y)+" l"),n.push(Ls(r.x4.x)+" "+Ls(r.x4.y)+" m"),n.push(Ls(r.x3.x)+" "+Ls(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lp(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ls(wi.internal.getWidth(t))+" "+Ls(wi.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};wi.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=wi.internal.getWidth(t),r=wi.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},wi.internal.getWidth=function(t){var e=0;return wa(t)==="object"&&(e=cz(t.Rect[2])),e},wi.internal.getHeight=function(t){var e=0;return wa(t)==="object"&&(e=cz(t.Rect[3])),e};var b4e=Zl.addField=function(t){if(_4e(this,t),!(t instanceof Vf))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Zl.AcroFormChoiceField=Zy,Zl.AcroFormListBox=Jy,Zl.AcroFormComboBox=e1,Zl.AcroFormEditBox=m5,Zl.AcroFormButton=eu,Zl.AcroFormPushButton=g5,Zl.AcroFormRadioButton=t1,Zl.AcroFormCheckBox=y5,Zl.AcroFormTextField=c0,Zl.AcroFormPasswordField=v5,Zl.AcroFormAppearance=wi,Zl.AcroForm={ChoiceField:Zy,ListBox:Jy,ComboBox:e1,EditBox:m5,Button:eu,PushButton:g5,RadioButton:t1,CheckBox:y5,TextField:c0,PasswordField:v5,Appearance:wi},ns.AcroForm={ChoiceField:Zy,ListBox:Jy,ComboBox:e1,EditBox:m5,Button:eu,PushButton:g5,RadioButton:t1,CheckBox:y5,TextField:c0,PasswordField:v5,Appearance:wi};function FK(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(Z,Y){var Le,_e,Qe,De,Be,xe=e;if((Y=Y||e)==="RGBA"||Z.data!==void 0&&Z.data instanceof Uint8ClampedArray&&"height"in Z&&"width"in Z)return"RGBA";if(ue(Z))for(Be in r)for(Qe=r[Be],Le=0;Le<Qe.length;Le+=1){for(De=!0,_e=0;_e<Qe[Le].length;_e+=1)if(Qe[Le][_e]!==void 0&&Qe[Le][_e]!==Z[_e]){De=!1;break}if(De===!0){xe=Be;break}}else for(Be in r)for(Qe=r[Be],Le=0;Le<Qe.length;Le+=1){for(De=!0,_e=0;_e<Qe[Le].length;_e+=1)if(Qe[Le][_e]!==void 0&&Qe[Le][_e]!==Z.charCodeAt(_e)){De=!1;break}if(De===!0){xe=Be;break}}return xe===e&&Y!==e&&(xe=Y),xe},s=function Z(Y){for(var Le=this.internal.write,_e=this.internal.putStream,Qe=(0,this.internal.getFilters)();Qe.indexOf("FlateEncode")!==-1;)Qe.splice(Qe.indexOf("FlateEncode"),1);Y.objectId=this.internal.newObject();var De=[];if(De.push({key:"Type",value:"/XObject"}),De.push({key:"Subtype",value:"/Image"}),De.push({key:"Width",value:Y.width}),De.push({key:"Height",value:Y.height}),Y.colorSpace===R.INDEXED?De.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Y.palette.length/3-1)+" "+("sMask"in Y&&Y.sMask!==void 0?Y.objectId+2:Y.objectId+1)+" 0 R]"}):(De.push({key:"ColorSpace",value:"/"+Y.colorSpace}),Y.colorSpace===R.DEVICE_CMYK&&De.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),De.push({key:"BitsPerComponent",value:Y.bitsPerComponent}),"decodeParameters"in Y&&Y.decodeParameters!==void 0&&De.push({key:"DecodeParms",value:"<<"+Y.decodeParameters+">>"}),"transparency"in Y&&Array.isArray(Y.transparency)){for(var Be="",xe=0,ze=Y.transparency.length;xe<ze;xe++)Be+=Y.transparency[xe]+" "+Y.transparency[xe]+" ";De.push({key:"Mask",value:"["+Be+"]"})}Y.sMask!==void 0&&De.push({key:"SMask",value:Y.objectId+1+" 0 R"});var Fe=Y.filter!==void 0?["/"+Y.filter]:void 0;if(_e({data:Y.data,additionalKeyValues:De,alreadyAppliedFilters:Fe,objectId:Y.objectId}),Le("endobj"),"sMask"in Y&&Y.sMask!==void 0){var it="/Predictor "+Y.predictor+" /Colors 1 /BitsPerComponent "+Y.bitsPerComponent+" /Columns "+Y.width,ie={width:Y.width,height:Y.height,colorSpace:"DeviceGray",bitsPerComponent:Y.bitsPerComponent,decodeParameters:it,data:Y.sMask};"filter"in Y&&(ie.filter=Y.filter),Z.call(this,ie)}if(Y.colorSpace===R.INDEXED){var le=this.internal.newObject();_e({data:K(new Uint8Array(Y.palette)),objectId:le}),Le("endobj")}},o=function(){var Z=this.internal.collections.addImage_images;for(var Y in Z)s.call(this,Z[Y])},c=function(){var Z,Y=this.internal.collections.addImage_images,Le=this.internal.write;for(var _e in Y)Le("/I"+(Z=Y[_e]).index,Z.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},i=function(){var Z=this.internal.collections.addImage_images;return u.call(this),Z},A=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(Z){return typeof t["process"+Z.toUpperCase()]=="function"},C=function(Z){return wa(Z)==="object"&&Z.nodeType===1},B=function(Z,Y){if(Z.nodeName==="IMG"&&Z.hasAttribute("src")){var Le=""+Z.getAttribute("src");if(Le.indexOf("data:image/")===0)return Yx(unescape(Le).split("base64,").pop());var _e=t.loadFile(Le,!0);if(_e!==void 0)return _e}if(Z.nodeName==="CANVAS"){if(Z.width===0||Z.height===0)throw new Error("Given canvas must have data. Canvas width: "+Z.width+", height: "+Z.height);var Qe;switch(Y){case"PNG":Qe="image/png";break;case"WEBP":Qe="image/webp";break;case"JPEG":case"JPG":default:Qe="image/jpeg"}return Yx(Z.toDataURL(Qe,1).split("base64,").pop())}},S=function(Z){var Y=this.internal.collections.addImage_images;if(Y){for(var Le in Y)if(Z===Y[Le].alias)return Y[Le]}},P=function(Z,Y,Le){return Z||Y||(Z=-96,Y=-96),Z<0&&(Z=-1*Le.width*72/Z/this.internal.scaleFactor),Y<0&&(Y=-1*Le.height*72/Y/this.internal.scaleFactor),Z===0&&(Z=Y*Le.width/Le.height),Y===0&&(Y=Z*Le.height/Le.width),[Z,Y]},j=function(Z,Y,Le,_e,Qe,De){var Be=P.call(this,Le,_e,Qe),xe=this.internal.getCoordinateString,ze=this.internal.getVerticalCoordinateString,Fe=i.call(this);if(Le=Be[0],_e=Be[1],Fe[Qe.index]=Qe,De){De*=Math.PI/180;var it=Math.cos(De),ie=Math.sin(De),le=function(be){return be.toFixed(4)},fe=[le(it),le(ie),le(-1*ie),le(it),0,0,"cm"]}this.internal.write("q"),De?(this.internal.write([1,"0","0",1,xe(Z),ze(Y+_e),"cm"].join(" ")),this.internal.write(fe.join(" ")),this.internal.write([xe(Le),"0","0",xe(_e),"0","0","cm"].join(" "))):this.internal.write([xe(Le),"0","0",xe(_e),xe(Z),ze(Y+_e),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Qe.index+" Do"),this.internal.write("Q")},R=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=t.__addimage__.sHashCode=function(Z){var Y,Le,_e=0;if(typeof Z=="string")for(Le=Z.length,Y=0;Y<Le;Y++)_e=(_e<<5)-_e+Z.charCodeAt(Y),_e|=0;else if(ue(Z))for(Le=Z.byteLength/2,Y=0;Y<Le;Y++)_e=(_e<<5)-_e+Z[Y],_e|=0;return _e},$=t.__addimage__.validateStringAsBase64=function(Z){(Z=Z||"").toString().trim();var Y=!0;return Z.length===0&&(Y=!1),Z.length%4!=0&&(Y=!1),/^[A-Za-z0-9+/]+$/.test(Z.substr(0,Z.length-2))===!1&&(Y=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Z.substr(-2))===!1&&(Y=!1),Y},J=t.__addimage__.extractImageFromDataUrl=function(Z){var Y=(Z=Z||"").split("base64,"),Le=null;if(Y.length===2){var _e=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Y[0]);Array.isArray(_e)&&(Le={mimeType:_e[1],charset:_e[2],data:Y[1]})}return Le},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(Z){return te()&&Z instanceof ArrayBuffer};var ue=t.__addimage__.isArrayBufferView=function(Z){return te()&&typeof Uint32Array<"u"&&(Z instanceof Int8Array||Z instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Z instanceof Uint8ClampedArray||Z instanceof Int16Array||Z instanceof Uint16Array||Z instanceof Int32Array||Z instanceof Uint32Array||Z instanceof Float32Array||Z instanceof Float64Array)},oe=t.__addimage__.binaryStringToUint8Array=function(Z){for(var Y=Z.length,Le=new Uint8Array(Y),_e=0;_e<Y;_e++)Le[_e]=Z.charCodeAt(_e);return Le},K=t.__addimage__.arrayBufferToBinaryString=function(Z){for(var Y="",Le=ue(Z)?Z:new Uint8Array(Z),_e=0;_e<Le.length;_e+=8192)Y+=String.fromCharCode.apply(null,Le.subarray(_e,_e+8192));return Y};t.addImage=function(){var Z,Y,Le,_e,Qe,De,Be,xe,ze;if(typeof arguments[1]=="number"?(Y=e,Le=arguments[1],_e=arguments[2],Qe=arguments[3],De=arguments[4],Be=arguments[5],xe=arguments[6],ze=arguments[7]):(Y=arguments[1],Le=arguments[2],_e=arguments[3],Qe=arguments[4],De=arguments[5],Be=arguments[6],xe=arguments[7],ze=arguments[8]),wa(Z=arguments[0])==="object"&&!C(Z)&&"imageData"in Z){var Fe=Z;Z=Fe.imageData,Y=Fe.format||Y||e,Le=Fe.x||Le||0,_e=Fe.y||_e||0,Qe=Fe.w||Fe.width||Qe,De=Fe.h||Fe.height||De,Be=Fe.alias||Be,xe=Fe.compression||xe,ze=Fe.rotation||Fe.angle||ze}var it=this.internal.getFilters();if(xe===void 0&&it.indexOf("FlateEncode")!==-1&&(xe="SLOW"),isNaN(Le)||isNaN(_e))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var ie=ce.call(this,Z,Y,Be,xe);return j.call(this,Le,_e,Qe,De,ie,ze),this};var ce=function(Z,Y,Le,_e){var Qe,De,Be;if(typeof Z=="string"&&n(Z)===e){Z=unescape(Z);var xe=me(Z,!1);(xe!==""||(xe=t.loadFile(Z,!0))!==void 0)&&(Z=xe)}if(C(Z)&&(Z=B(Z,Y)),Y=n(Z,Y),!g(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(((Be=Le)==null||Be.length===0)&&(Le=function(ze){return typeof ze=="string"||ue(ze)?U(ze):ue(ze.data)?U(ze.data):null}(Z)),(Qe=S.call(this,Le))||(te()&&(Z instanceof Uint8Array||Y==="RGBA"||(De=Z,Z=oe(Z))),Qe=this["process"+Y.toUpperCase()](Z,A.call(this),Le,function(ze){return ze&&typeof ze=="string"&&(ze=ze.toUpperCase()),ze in t.image_compression?ze:N.NONE}(_e),De)),!Qe)throw new Error("An unknown error occurred whilst processing the image.");return Qe},me=t.__addimage__.convertBase64ToBinaryString=function(Z,Y){var Le;Y=typeof Y!="boolean"||Y;var _e,Qe="";if(typeof Z=="string"){_e=(Le=J(Z))!==null?Le.data:Z;try{Qe=Yx(_e)}catch(De){if(Y)throw $(_e)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+De.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Qe};t.getImageProperties=function(Z){var Y,Le,_e="";if(C(Z)&&(Z=B(Z)),typeof Z=="string"&&n(Z)===e&&((_e=me(Z,!1))===""&&(_e=t.loadFile(Z)||""),Z=_e),Le=n(Z),!g(Le))throw new Error("addImage does not support files of type '"+Le+"', please ensure that a plugin for '"+Le+"' support is added.");if(!te()||Z instanceof Uint8Array||(Z=oe(Z)),!(Y=this["process"+Le.toUpperCase()](Z)))throw new Error("An unknown error occurred whilst processing the image");return Y.fileType=Le,Y}})(ns.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};ns.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,o,c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,i=this.internal.getPageInfoByObjId(r.objId),A=r.pageContext.annotations,g=!1,C=0;C<A.length&&!g;C++)switch((n=A[C]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var B=0;B<A.length;B++){n=A[B];var S=this.internal.pdfEscape,P=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(j.objId),U=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y)+"] ")+"/Contents ("+S(N(n.contents))+")",o+=" /Popup "+R.objId+" 0 R",o+=" /P "+i.objId+" 0 R",o+=" /T ("+S(N(U))+") >>",j.content=o;var $=j.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+c(n.bounds.x+30)+" "+u(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+u(n.bounds.y)+"] ")+" /Parent "+$,n.open&&(o+=" /Open true"),o+=" >>",R.content=o,this.internal.write(j.objId,"0 R",R.objId,"0 R");break;case"freetext":s="/Rect ["+c(n.bounds.x)+" "+u(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+u(n.bounds.y+n.bounds.h)+"] ";var J=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+S(P(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var te=this.annotations._nameMap[n.options.name];n.options.pageNumber=te.page,n.options.top=te.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+S(P(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ue=u(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+ue+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,o,c){var u=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:i(r),y:A(n),w:i(r+s),h:A(n+o)},options:c,type:"link"})},t.textWithLink=function(r,n,s,o){var c,u,i=this.getTextWidth(r),A=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){u=o.maxWidth;var g=this.splitTextToSize(r,u).length;c=Math.ceil(A*g)}else u=i,c=A;return this.text(r,n,s,o),s+=.2*A,o.align==="center"&&(n-=i/2),o.align==="right"&&(n-=i),this.link(n,s-A,u,c,o),i},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ns.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},u=t.__arabicParser__.isArabicEndLetter=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length<=2},i=t.__arabicParser__.isArabicAlfLetter=function(j){return c(j)&&s.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=1};var A=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length>=3};var g=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return c(j)&&o(j)&&e[j.charCodeAt(0)].length==4},C=t.__arabicParser__.resolveLigatures=function(j){var R=0,N=r,U="",$=0;for(R=0;R<j.length;R+=1)N[j.charCodeAt(R)]!==void 0?($++,typeof(N=N[j.charCodeAt(R)])=="number"&&(U+=String.fromCharCode(N),N=r,$=0),R===j.length-1&&(N=r,U+=j.charAt(R-($-1)),R-=$-1,$=0)):(N=r,U+=j.charAt(R-$),R-=$,$=0);return U};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var B=t.__arabicParser__.getCorrectForm=function(j,R,N){return c(j)?o(j)===!1?-1:!A(j)||!c(R)&&!c(N)||!c(N)&&u(R)||u(j)&&!c(R)||u(j)&&i(R)||u(j)&&u(R)?0:g(j)&&c(R)&&!u(R)&&c(N)&&A(N)?3:u(j)||!c(N)?1:2:-1},S=function(j){var R=0,N=0,U=0,$="",J="",te="",ue=(j=j||"").split("\\s+"),oe=[];for(R=0;R<ue.length;R+=1){for(oe.push(""),N=0;N<ue[R].length;N+=1)$=ue[R][N],J=ue[R][N-1],te=ue[R][N+1],c($)?(U=B($,J,te),oe[R]+=U!==-1?String.fromCharCode(e[$.charCodeAt(0)][U]):$):oe[R]+=$;oe[R]=C(oe[R])}return oe.join(" ")},P=t.__arabicParser__.processArabic=t.processArabic=function(){var j,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(R)){var U=0;for(N=[],U=0;U<R.length;U+=1)Array.isArray(R[U])?N.push([S(R[U][0]),R[U][1],R[U][2]]):N.push([S(R[U])]);j=N}else j=S(R);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",P])}(ns.API),ns.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(u){r=u}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(u){n=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(u){s=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(u){o=u}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(u){c=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ns.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var i=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(j){i=j}});var A=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return A},set:function(j){A=j}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(j){g=j}});var C=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return C},set:function(j){C=j}});var B=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return B},set:function(j){B=j}});var S=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return S},set:function(j){S=j}});var P=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return P},set:function(j){P=j}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(i){return n.call(this),this.internal.__cell__.headerFunction=typeof i=="function"?i:void 0,this},t.getTextDimensions=function(i,A){n.call(this);var g=(A=A||{}).fontSize||this.getFontSize(),C=A.font||this.getFont(),B=A.scaleFactor||this.internal.scaleFactor,S=0,P=0,j=0,R=this;if(!Array.isArray(i)&&typeof i!="string"){if(typeof i!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");i=String(i)}var N=A.maxWidth;N>0?typeof i=="string"?i=this.splitTextToSize(i,N):Object.prototype.toString.call(i)==="[object Array]"&&(i=i.reduce(function($,J){return $.concat(R.splitTextToSize(J,N))},[])):i=Array.isArray(i)?i:[i];for(var U=0;U<i.length;U++)S<(j=this.getStringUnitWidth(i[U],{font:C})*g)&&(S=j);return S!==0&&(P=i.length),{w:S/=B,h:Math.max((P*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/B,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var i=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(i.left,i.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var i;i=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var A=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,C=this.internal.__cell__.margins||e,B=this.internal.__cell__.tableHeaderRow,S=this.internal.__cell__.printHeaders;return A.lineNumber!==void 0&&(A.lineNumber===i.lineNumber?(i.x=(A.x||0)+(A.width||0),i.y=A.y||0):A.y+A.height+i.height+C.bottom>this.getPageHeight()?(this.cellAddPage(),i.y=C.top,S&&B&&(this.printHeaderRow(i.lineNumber,!0),i.y+=B[0].height)):i.y=A.y+A.height||i.y),i.text[0]!==void 0&&(this.rect(i.x,i.y,i.width,i.height,r===!0?"FD":void 0),i.align==="right"?this.text(i.text,i.x+i.width-g,i.y+g,{align:"right",baseline:"top"}):i.align==="center"?this.text(i.text,i.x+i.width/2,i.y+g,{align:"center",baseline:"top",maxWidth:i.width-g-g}):this.text(i.text,i.x+g,i.y+g,{align:"left",baseline:"top",maxWidth:i.width-g-g})),this.internal.__cell__.lastCell=i,this};t.table=function(i,A,g,C,B){if(n.call(this),!g)throw new Error("No data for PDF table.");var S,P,j,R,N=[],U=[],$=[],J={},te={},ue=[],oe=[],K=(B=B||{}).autoSize||!1,ce=B.printHeaders!==!1,me=B.css&&B.css["font-size"]!==void 0?16*B.css["font-size"]:B.fontSize||12,Z=B.margins||Object.assign({width:this.getPageWidth()},e),Y=typeof B.padding=="number"?B.padding:3,Le=B.headerBackgroundColor||"#c8c8c8",_e=B.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=ce,this.internal.__cell__.margins=Z,this.internal.__cell__.table_font_size=me,this.internal.__cell__.padding=Y,this.internal.__cell__.headerBackgroundColor=Le,this.internal.__cell__.headerTextColor=_e,this.setFontSize(me),C==null)U=N=Object.keys(g[0]),$=N.map(function(){return"left"});else if(Array.isArray(C)&&wa(C[0])==="object")for(N=C.map(function(Fe){return Fe.name}),U=C.map(function(Fe){return Fe.prompt||Fe.name||""}),$=C.map(function(Fe){return Fe.align||"left"}),S=0;S<C.length;S+=1)te[C[S].name]=C[S].width*(19.049976/25.4);else Array.isArray(C)&&typeof C[0]=="string"&&(U=N=C,$=N.map(function(){return"left"}));if(K||Array.isArray(C)&&typeof C[0]=="string")for(S=0;S<N.length;S+=1){for(J[R=N[S]]=g.map(function(Fe){return Fe[R]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(U[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),P=J[R],this.setFont(void 0,"normal"),j=0;j<P.length;j+=1)ue.push(this.getTextDimensions(P[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[R]=Math.max.apply(null,ue)+Y+Y,ue=[]}if(ce){var Qe={};for(S=0;S<N.length;S+=1)Qe[N[S]]={},Qe[N[S]].text=U[S],Qe[N[S]].align=$[S];var De=u.call(this,Qe,te);oe=N.map(function(Fe){return new o(i,A,te[Fe],De,Qe[Fe].text,void 0,Qe[Fe].align)}),this.setTableHeaderRow(oe),this.printHeaderRow(1,!1)}var Be=C.reduce(function(Fe,it){return Fe[it.name]=it.align,Fe},{});for(S=0;S<g.length;S+=1){"rowStart"in B&&B.rowStart instanceof Function&&B.rowStart({row:S,data:g[S]},this);var xe=u.call(this,g[S],te);for(j=0;j<N.length;j+=1){var ze=g[S][N[j]];"cellStart"in B&&B.cellStart instanceof Function&&B.cellStart({row:S,col:j,data:ze},this),c.call(this,new o(i,A,te[N[j]],xe,ze,S+2,Be[N[j]]))}}return this.internal.__cell__.table_x=i,this.internal.__cell__.table_y=A,this};var u=function(i,A){var g=this.internal.__cell__.padding,C=this.internal.__cell__.table_font_size,B=this.internal.scaleFactor;return Object.keys(i).map(function(S){var P=i[S];return this.splitTextToSize(P.hasOwnProperty("text")?P.text:P,A[S]-g-g)},this).map(function(S){return this.getLineHeightFactor()*S.length*C/B+g+g},this).reduce(function(S,P){return Math.max(S,P)},0)};t.setTableHeaderRow=function(i){n.call(this),this.internal.__cell__.tableHeaderRow=i},t.printHeaderRow=function(i,A){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var C=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(C[0],C[1],C[2],C[3],void 0,-1)}this.setFont(void 0,"bold");for(var B=[],S=0;S<this.internal.__cell__.tableHeaderRow.length;S+=1){g=this.internal.__cell__.tableHeaderRow[S].clone(),A&&(g.y=this.internal.__cell__.margins.top||0,B.push(g)),g.lineNumber=i;var P=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,g),this.setTextColor(P)}B.length>0&&this.setTableHeaderRow(B),this.setFont(void 0,"normal"),r=!1}}(ns.API);var NK={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},PK=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],QI=FK(PK),MK=[100,200,300,400,500,600,700,800,900],w4e=FK(MK);function HI(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return NK[o=o||"normal"]?o:"normal"}(t.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(o){return typeof QI[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function uz(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var C4e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hz={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dz(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function S4e(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},C4e,r.genericFontFamilies||{}),o=null,c=null,u=0;u<e.length;++u)if(s[(o=HI(e[u])).family]&&(o.family=s[o.family]),t.hasOwnProperty(o.family)){c=t[o.family];break}if(!(c=c||t[n]))throw new Error("Could not find a font-family for the rule '"+dz(o)+"' and default family '"+n+"'.");if(c=function(i,A){if(A[i])return A[i];var g=QI[i],C=g<=QI.normal?-1:1,B=uz(A,PK,g,C);if(!B)throw new Error("Could not find a matching font-stretch value for "+i);return B}(o.stretch,c),c=function(i,A){if(A[i])return A[i];for(var g=NK[i],C=0;C<g.length;++C)if(A[g[C]])return A[g[C]];throw new Error("Could not find a matching font-style for "+i)}(o.style,c),!(c=function(i,A){if(A[i])return A[i];if(i===400&&A[500])return A[500];if(i===500&&A[400])return A[400];var g=w4e[i],C=uz(A,MK,g,i<400?-1:1);if(!C)throw new Error("Could not find a matching font-weight for value "+i);return C}(o.weight,c)))throw new Error("Failed to resolve a font for the rule '"+dz(o)+"'.");return c}function fz(t){return t.trimLeft()}function B4e(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function E4e(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var k2,pz,Az,Y3=["times"];(function(t){var e,r,n,s,o,c,u,i,A,g=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new i,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new c,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new c,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new C(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,c=this.internal.Point,u=this.internal.Rectangle,i=this.internal.Matrix,A=new g}]);var C=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var le=ie;Object.defineProperty(this,"pdf",{get:function(){return le}});var fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return fe},set:function(Ye){fe=!!Ye}});var be=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return be},set:function(Ye){be=!!Ye}});var He=0;Object.defineProperty(this,"posX",{get:function(){return He},set:function(Ye){isNaN(Ye)||(He=Ye)}});var Je=0;Object.defineProperty(this,"posY",{get:function(){return Je},set:function(Ye){isNaN(Ye)||(Je=Ye)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(Ye){var Re;typeof Ye=="number"?Re=[Ye,Ye,Ye,Ye]:((Re=new Array(4))[0]=Ye[0],Re[1]=Ye.length>=2?Ye[1]:Re[0],Re[2]=Ye.length>=3?Ye[2]:Re[0],Re[3]=Ye.length>=4?Ye[3]:Re[1]),A.margin=Re}});var tt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return tt},set:function(Ye){tt=Ye}});var st=0;Object.defineProperty(this,"lastBreak",{get:function(){return st},set:function(Ye){st=Ye}});var Ct=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ct},set:function(Ye){Ct=Ye}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(Ye){Ye instanceof g&&(A=Ye)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(Ye){A.path=Ye}});var Ue=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ue},set:function(Ye){Ue=Ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ye){var Re;Re=B(Ye),this.ctx.fillStyle=Re.style,this.ctx.isFillTransparent=Re.a===0,this.ctx.fillOpacity=Re.a,this.pdf.setFillColor(Re.r,Re.g,Re.b,{a:Re.a}),this.pdf.setTextColor(Re.r,Re.g,Re.b,{a:Re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ye){var Re=B(Ye);this.ctx.strokeStyle=Re.style,this.ctx.isStrokeTransparent=Re.a===0,this.ctx.strokeOpacity=Re.a,Re.a===0?this.pdf.setDrawColor(255,255,255):(Re.a,this.pdf.setDrawColor(Re.r,Re.g,Re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ye){["butt","round","square"].indexOf(Ye)!==-1&&(this.ctx.lineCap=Ye,this.pdf.setLineCap(Ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ye){isNaN(Ye)||(this.ctx.lineWidth=Ye,this.pdf.setLineWidth(Ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ye){["bevel","round","miter"].indexOf(Ye)!==-1&&(this.ctx.lineJoin=Ye,this.pdf.setLineJoin(Ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ye){isNaN(Ye)||(this.ctx.miterLimit=Ye,this.pdf.setMiterLimit(Ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ye){this.ctx.textBaseline=Ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ye){["right","end","center","left","start"].indexOf(Ye)!==-1&&(this.ctx.textAlign=Ye)}});var Ft=null;function Zt(Ye,Re){if(Ft===null){var hr=function(Ut){var vt=[];return Object.keys(Ut).forEach(function(Yt){Ut[Yt].forEach(function(ar){var nr=null;switch(ar){case"bold":nr={family:Yt,weight:"bold"};break;case"italic":nr={family:Yt,style:"italic"};break;case"bolditalic":nr={family:Yt,weight:"bold",style:"italic"};break;case"":case"normal":nr={family:Yt}}nr!==null&&(nr.ref={name:Yt,style:ar},vt.push(nr))})}),vt}(Ye.getFontList());Ft=function(Ut){for(var vt={},Yt=0;Yt<Ut.length;++Yt){var ar=HI(Ut[Yt]),nr=ar.family,Fr=ar.stretch,Gr=ar.style,Ir=ar.weight;vt[nr]=vt[nr]||{},vt[nr][Fr]=vt[nr][Fr]||{},vt[nr][Fr][Gr]=vt[nr][Fr][Gr]||{},vt[nr][Fr][Gr][Ir]=ar}return vt}(hr.concat(Re))}return Ft}var fr=null;Object.defineProperty(this,"fontFaces",{get:function(){return fr},set:function(Ye){Ft=null,fr=Ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ye){var Re;if(this.ctx.font=Ye,(Re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ye))!==null){var hr=Re[1],Ut=(Re[2],Re[3]),vt=Re[4],Yt=(Re[5],Re[6]),ar=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(vt)[2];vt=Math.floor(ar==="px"?parseFloat(vt)*this.pdf.internal.scaleFactor:ar==="em"?parseFloat(vt)*this.pdf.getFontSize():parseFloat(vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(vt);var nr=function(an){var lr,Xt,qr=[],Kr=an.trim();if(Kr==="")return Y3;if(Kr in hz)return[hz[Kr]];for(;Kr!=="";){switch(Xt=null,lr=(Kr=fz(Kr)).charAt(0)){case'"':case"'":Xt=B4e(Kr.substring(1),lr);break;default:Xt=E4e(Kr)}if(Xt===null||(qr.push(Xt[0]),(Kr=fz(Xt[1]))!==""&&Kr.charAt(0)!==","))return Y3;Kr=Kr.replace(/^,/,"")}return qr}(Yt);if(this.fontFaces){var Fr=S4e(Zt(this.pdf,this.fontFaces),nr.map(function(an){return{family:an,stretch:"normal",weight:Ut,style:hr}}));this.pdf.setFont(Fr.ref.name,Fr.ref.style)}else{var Gr="";(Ut==="bold"||parseInt(Ut,10)>=700||hr==="bold")&&(Gr="bold"),hr==="italic"&&(Gr+="italic"),Gr.length===0&&(Gr="normal");for(var Ir="",cn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Sn=0;Sn<nr.length;Sn++){if(this.pdf.internal.getFont(nr[Sn],Gr,{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn];break}if(Gr==="bolditalic"&&this.pdf.internal.getFont(nr[Sn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ir=nr[Sn],Gr="bold";else if(this.pdf.internal.getFont(nr[Sn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ir=nr[Sn],Gr="normal";break}}if(Ir===""){for(var En=0;En<nr.length;En++)if(cn[nr[En]]){Ir=cn[nr[En]];break}}Ir=Ir===""?"Times":Ir,this.pdf.setFont(Ir,Gr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ye){this.ctx.globalCompositeOperation=Ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ye){this.ctx.globalAlpha=Ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ye){this.ctx.lineDashOffset=Ye,it.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ye){this.ctx.lineDash=Ye,it.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ye){this.ctx.ignoreClearRect=!!Ye}})};C.prototype.setLineDash=function(ie){this.lineDash=ie},C.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},C.prototype.fill=function(){J.call(this,"fill",!1)},C.prototype.stroke=function(){J.call(this,"stroke",!1)},C.prototype.beginPath=function(){this.path=[{type:"begin"}]},C.prototype.moveTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var fe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"mt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(ie,le)},C.prototype.closePath=function(){var ie=new c(0,0),le=0;for(le=this.path.length-1;le!==-1;le--)if(this.path[le].type==="begin"&&wa(this.path[le+1])==="object"&&typeof this.path[le+1].x=="number"){ie=new c(this.path[le+1].x,this.path[le+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(ie.x,ie.y)},C.prototype.lineTo=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var fe=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"lt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},C.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},C.prototype.quadraticCurveTo=function(ie,le,fe,be){if(isNaN(fe)||isNaN(be)||isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var He=this.ctx.transform.applyToPoint(new c(fe,be)),Je=this.ctx.transform.applyToPoint(new c(ie,le));this.path.push({type:"qct",x1:Je.x,y1:Je.y,x:He.x,y:He.y}),this.ctx.lastPoint=new c(He.x,He.y)},C.prototype.bezierCurveTo=function(ie,le,fe,be,He,Je){if(isNaN(He)||isNaN(Je)||isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ua.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var tt=this.ctx.transform.applyToPoint(new c(He,Je)),st=this.ctx.transform.applyToPoint(new c(ie,le)),Ct=this.ctx.transform.applyToPoint(new c(fe,be));this.path.push({type:"bct",x1:st.x,y1:st.y,x2:Ct.x,y2:Ct.y,x:tt.x,y:tt.y}),this.ctx.lastPoint=new c(tt.x,tt.y)},C.prototype.arc=function(ie,le,fe,be,He,Je){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(He))throw Ua.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Je=!!Je,!this.ctx.transform.isIdentity){var tt=this.ctx.transform.applyToPoint(new c(ie,le));ie=tt.x,le=tt.y;var st=this.ctx.transform.applyToPoint(new c(0,fe)),Ct=this.ctx.transform.applyToPoint(new c(0,0));fe=Math.sqrt(Math.pow(st.x-Ct.x,2)+Math.pow(st.y-Ct.y,2))}Math.abs(He-be)>=2*Math.PI&&(be=0,He=2*Math.PI),this.path.push({type:"arc",x:ie,y:le,radius:fe,startAngle:be,endAngle:He,counterclockwise:Je})},C.prototype.arcTo=function(ie,le,fe,be,He){throw new Error("arcTo not implemented.")},C.prototype.rect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ua.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,le),this.lineTo(ie+fe,le),this.lineTo(ie+fe,le+be),this.lineTo(ie,le+be),this.lineTo(ie,le),this.lineTo(ie+fe,le),this.lineTo(ie,le)},C.prototype.fillRect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ua.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!S.call(this)){var He={};this.lineCap!=="butt"&&(He.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(He.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,le,fe,be),this.fill(),He.hasOwnProperty("lineCap")&&(this.lineCap=He.lineCap),He.hasOwnProperty("lineJoin")&&(this.lineJoin=He.lineJoin)}},C.prototype.strokeRect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ua.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");P.call(this)||(this.beginPath(),this.rect(ie,le,fe,be),this.stroke())},C.prototype.clearRect=function(ie,le,fe,be){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be))throw Ua.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,le,fe,be))},C.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(le),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var be=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=be}},C.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("Q");this.pdf.setPage(le),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},C.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var B=function(ie){var le,fe,be,He;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))le=0,fe=0,be=0,He=0;else{var Je=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(Je!==null)le=parseInt(Je[1]),fe=parseInt(Je[2]),be=parseInt(Je[3]),He=1;else if((Je=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)le=parseInt(Je[1]),fe=parseInt(Je[2]),be=parseInt(Je[3]),He=parseFloat(Je[4]);else{if(He=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var tt=new SK(ie);ie=tt.ok?tt.toHex():"#000000"}ie.length===4?(le=ie.substring(1,2),le+=le,fe=ie.substring(2,3),fe+=fe,be=ie.substring(3,4),be+=be):(le=ie.substring(1,3),fe=ie.substring(3,5),be=ie.substring(5,7)),le=parseInt(le,16),fe=parseInt(fe,16),be=parseInt(be,16)}}return{r:le,g:fe,b:be,a:He,style:ie}},S=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},P=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};C.prototype.fillText=function(ie,le,fe,be){if(isNaN(le)||isNaN(fe)||typeof ie!="string")throw Ua.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(be=isNaN(be)?void 0:be,!S.call(this)){var He=xe(this.ctx.transform.rotation),Je=this.ctx.transform.scaleX;Y.call(this,{text:ie,x:le,y:fe,scale:Je,angle:He,align:this.textAlign,maxWidth:be})}},C.prototype.strokeText=function(ie,le,fe,be){if(isNaN(le)||isNaN(fe)||typeof ie!="string")throw Ua.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!P.call(this)){be=isNaN(be)?void 0:be;var He=xe(this.ctx.transform.rotation),Je=this.ctx.transform.scaleX;Y.call(this,{text:ie,x:le,y:fe,scale:Je,renderingMode:"stroke",angle:He,align:this.textAlign,maxWidth:be})}},C.prototype.measureText=function(ie){if(typeof ie!="string")throw Ua.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var le=this.pdf,fe=this.pdf.internal.scaleFactor,be=le.internal.getFontSize(),He=le.getStringUnitWidth(ie)*be/le.internal.scaleFactor,Je=function(tt){var st=(tt=tt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return st}}),this};return new Je({width:He*=Math.round(96*fe/72*1e4)/1e4})},C.prototype.scale=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var fe=new i(ie,0,0,le,0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},C.prototype.rotate=function(ie){if(isNaN(ie))throw Ua.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var le=new i(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(le)},C.prototype.translate=function(ie,le){if(isNaN(ie)||isNaN(le))throw Ua.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var fe=new i(1,0,0,1,ie,le);this.ctx.transform=this.ctx.transform.multiply(fe)},C.prototype.transform=function(ie,le,fe,be,He,Je){if(isNaN(ie)||isNaN(le)||isNaN(fe)||isNaN(be)||isNaN(He)||isNaN(Je))throw Ua.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var tt=new i(ie,le,fe,be,He,Je);this.ctx.transform=this.ctx.transform.multiply(tt)},C.prototype.setTransform=function(ie,le,fe,be,He,Je){ie=isNaN(ie)?1:ie,le=isNaN(le)?0:le,fe=isNaN(fe)?0:fe,be=isNaN(be)?1:be,He=isNaN(He)?0:He,Je=isNaN(Je)?0:Je,this.ctx.transform=new i(ie,le,fe,be,He,Je)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};C.prototype.drawImage=function(ie,le,fe,be,He,Je,tt,st,Ct){var Ue=this.pdf.getImageProperties(ie),Ft=1,Zt=1,fr=1,Ye=1;be!==void 0&&st!==void 0&&(fr=st/be,Ye=Ct/He,Ft=Ue.width/be*st/be,Zt=Ue.height/He*Ct/He),Je===void 0&&(Je=le,tt=fe,le=0,fe=0),be!==void 0&&st===void 0&&(st=be,Ct=He),be===void 0&&st===void 0&&(st=Ue.width,Ct=Ue.height);for(var Re,hr=this.ctx.transform.decompose(),Ut=xe(hr.rotate.shx),vt=new i,Yt=(vt=(vt=(vt=vt.multiply(hr.translate)).multiply(hr.skew)).multiply(hr.scale)).applyToRectangle(new u(Je-le*fr,tt-fe*Ye,be*Ft,He*Zt)),ar=R.call(this,Yt),nr=[],Fr=0;Fr<ar.length;Fr+=1)nr.indexOf(ar[Fr])===-1&&nr.push(ar[Fr]);if($(nr),this.autoPaging)for(var Gr=nr[0],Ir=nr[nr.length-1],cn=Gr;cn<Ir+1;cn++){this.pdf.setPage(cn);var Sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],En=cn===1?this.posY+this.margin[0]:this.margin[0],an=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xt=cn===1?0:an+(cn-2)*lr;if(this.ctx.clip_path.length!==0){var qr=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Re,this.posX+this.margin[3],-Xt+En+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=qr}var Kr=JSON.parse(JSON.stringify(Yt));Kr=U([Kr],this.posX+this.margin[3],-Xt+En+this.ctx.prevPageLastElemOffset)[0];var kn=(cn>Gr||cn<Ir)&&j.call(this);kn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sn,lr,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",Kr.x,Kr.y,Kr.w,Kr.h,null,null,Ut),kn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,Ut)};var R=function(ie,le,fe){var be=[];le=le||this.pdf.internal.pageSize.width,fe=fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var He=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":be.push(Math.floor((ie.y+He)/fe)+1);break;case"arc":be.push(Math.floor((ie.y+He-ie.radius)/fe)+1),be.push(Math.floor((ie.y+He+ie.radius)/fe)+1);break;case"qct":var Je=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);be.push(Math.floor((Je.y+He)/fe)+1),be.push(Math.floor((Je.y+Je.h+He)/fe)+1);break;case"bct":var tt=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);be.push(Math.floor((tt.y+He)/fe)+1),be.push(Math.floor((tt.y+tt.h+He)/fe)+1);break;case"rect":be.push(Math.floor((ie.y+He)/fe)+1),be.push(Math.floor((ie.y+ie.h+He)/fe)+1)}for(var st=0;st<be.length;st+=1)for(;this.pdf.internal.getNumberOfPages()<be[st];)N.call(this);return be},N=function(){var ie=this.fillStyle,le=this.strokeStyle,fe=this.font,be=this.lineCap,He=this.lineWidth,Je=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=le,this.font=fe,this.lineCap=be,this.lineWidth=He,this.lineJoin=Je},U=function(ie,le,fe){for(var be=0;be<ie.length;be++)switch(ie[be].type){case"bct":ie[be].x2+=le,ie[be].y2+=fe;case"qct":ie[be].x1+=le,ie[be].y1+=fe;case"mt":case"lt":case"arc":default:ie[be].x+=le,ie[be].y+=fe}return ie},$=function(ie){return ie.sort(function(le,fe){return le-fe})},J=function(ie,le){for(var fe,be,He=this.fillStyle,Je=this.strokeStyle,tt=this.lineCap,st=this.lineWidth,Ct=Math.abs(st*this.ctx.transform.scaleX),Ue=this.lineJoin,Ft=JSON.parse(JSON.stringify(this.path)),Zt=JSON.parse(JSON.stringify(this.path)),fr=[],Ye=0;Ye<Zt.length;Ye++)if(Zt[Ye].x!==void 0)for(var Re=R.call(this,Zt[Ye]),hr=0;hr<Re.length;hr+=1)fr.indexOf(Re[hr])===-1&&fr.push(Re[hr]);for(var Ut=0;Ut<fr.length;Ut++)for(;this.pdf.internal.getNumberOfPages()<fr[Ut];)N.call(this);if($(fr),this.autoPaging)for(var vt=fr[0],Yt=fr[fr.length-1],ar=vt;ar<Yt+1;ar++){this.pdf.setPage(ar),this.fillStyle=He,this.strokeStyle=Je,this.lineCap=tt,this.lineWidth=Ct,this.lineJoin=Ue;var nr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fr=ar===1?this.posY+this.margin[0]:this.margin[0],Gr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],cn=ar===1?0:Gr+(ar-2)*Ir;if(this.ctx.clip_path.length!==0){var Sn=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(fe,this.posX+this.margin[3],-cn+Fr+this.ctx.prevPageLastElemOffset),te.call(this,ie,!0),this.path=Sn}if(be=JSON.parse(JSON.stringify(Ft)),this.path=U(be,this.posX+this.margin[3],-cn+Fr+this.ctx.prevPageLastElemOffset),le===!1||ar===0){var En=(ar>vt||ar<Yt)&&j.call(this);En&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nr,Ir,null).clip().discardPath()),te.call(this,ie,le),En&&this.pdf.restoreGraphicsState()}this.lineWidth=st}else this.lineWidth=Ct,te.call(this,ie,le),this.lineWidth=st;this.path=Ft},te=function(ie,le){if((ie!=="stroke"||le||!P.call(this))&&(ie==="stroke"||le||!S.call(this))){for(var fe,be,He=[],Je=this.path,tt=0;tt<Je.length;tt++){var st=Je[tt];switch(st.type){case"begin":He.push({begin:!0});break;case"close":He.push({close:!0});break;case"mt":He.push({start:st,deltas:[],abs:[]});break;case"lt":var Ct=He.length;if(Je[tt-1]&&!isNaN(Je[tt-1].x)&&(fe=[st.x-Je[tt-1].x,st.y-Je[tt-1].y],Ct>0)){for(;Ct>=0;Ct--)if(He[Ct-1].close!==!0&&He[Ct-1].begin!==!0){He[Ct-1].deltas.push(fe),He[Ct-1].abs.push(st);break}}break;case"bct":fe=[st.x1-Je[tt-1].x,st.y1-Je[tt-1].y,st.x2-Je[tt-1].x,st.y2-Je[tt-1].y,st.x-Je[tt-1].x,st.y-Je[tt-1].y],He[He.length-1].deltas.push(fe);break;case"qct":var Ue=Je[tt-1].x+2/3*(st.x1-Je[tt-1].x),Ft=Je[tt-1].y+2/3*(st.y1-Je[tt-1].y),Zt=st.x+2/3*(st.x1-st.x),fr=st.y+2/3*(st.y1-st.y),Ye=st.x,Re=st.y;fe=[Ue-Je[tt-1].x,Ft-Je[tt-1].y,Zt-Je[tt-1].x,fr-Je[tt-1].y,Ye-Je[tt-1].x,Re-Je[tt-1].y],He[He.length-1].deltas.push(fe);break;case"arc":He.push({deltas:[],abs:[],arc:!0}),Array.isArray(He[He.length-1].abs)&&He[He.length-1].abs.push(st)}}be=le?null:ie==="stroke"?"stroke":"fill";for(var hr=!1,Ut=0;Ut<He.length;Ut++)if(He[Ut].arc)for(var vt=He[Ut].abs,Yt=0;Yt<vt.length;Yt++){var ar=vt[Yt];ar.type==="arc"?K.call(this,ar.x,ar.y,ar.radius,ar.startAngle,ar.endAngle,ar.counterclockwise,void 0,le,!hr):Le.call(this,ar.x,ar.y),hr=!0}else if(He[Ut].close===!0)this.pdf.internal.out("h"),hr=!1;else if(He[Ut].begin!==!0){var nr=He[Ut].start.x,Fr=He[Ut].start.y;_e.call(this,He[Ut].deltas,nr,Fr),hr=!0}be&&ce.call(this,be),le&&me.call(this)}},ue=function(ie){var le=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,fe=le*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-fe;case"top":return ie+le-fe;case"hanging":return ie+le-2*fe;case"middle":return ie+le/2-fe;case"ideographic":return ie;case"alphabetic":default:return ie}},oe=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};C.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(le,fe){this.colorStops.push([le,fe])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},C.prototype.createPattern=function(){return this.createLinearGradient()},C.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(ie,le,fe,be,He,Je,tt,st,Ct){for(var Ue=De.call(this,fe,be,He,Je),Ft=0;Ft<Ue.length;Ft++){var Zt=Ue[Ft];Ft===0&&(Ct?Z.call(this,Zt.x1+ie,Zt.y1+le):Le.call(this,Zt.x1+ie,Zt.y1+le)),Qe.call(this,ie,le,Zt.x2,Zt.y2,Zt.x3,Zt.y3,Zt.x4,Zt.y4)}st?me.call(this):ce.call(this,tt)},ce=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},me=function(){this.pdf.clip(),this.pdf.discardPath()},Z=function(ie,le){this.pdf.internal.out(r(ie)+" "+n(le)+" m")},Y=function(ie){var le;switch(ie.align){case"right":case"end":le="right";break;case"center":le="center";break;case"left":case"start":default:le="left"}var fe=this.pdf.getTextDimensions(ie.text),be=ue.call(this,ie.y),He=oe.call(this,be)-fe.h,Je=this.ctx.transform.applyToPoint(new c(ie.x,be)),tt=this.ctx.transform.decompose(),st=new i;st=(st=(st=st.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale);for(var Ct,Ue,Ft,Zt=this.ctx.transform.applyToRectangle(new u(ie.x,be,fe.w,fe.h)),fr=st.applyToRectangle(new u(ie.x,He,fe.w,fe.h)),Ye=R.call(this,fr),Re=[],hr=0;hr<Ye.length;hr+=1)Re.indexOf(Ye[hr])===-1&&Re.push(Ye[hr]);if($(Re),this.autoPaging)for(var Ut=Re[0],vt=Re[Re.length-1],Yt=Ut;Yt<vt+1;Yt++){this.pdf.setPage(Yt);var ar=Yt===1?this.posY+this.margin[0]:this.margin[0],nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fr=this.pdf.internal.pageSize.height-this.margin[2],Gr=Fr-this.margin[0],Ir=this.pdf.internal.pageSize.width-this.margin[1],cn=Ir-this.margin[3],Sn=Yt===1?0:nr+(Yt-2)*Gr;if(this.ctx.clip_path.length!==0){var En=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Ct,this.posX+this.margin[3],-1*Sn+ar),te.call(this,"fill",!0),this.path=En}var an=U([JSON.parse(JSON.stringify(fr))],this.posX+this.margin[3],-Sn+ar+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*ie.scale),Ft=this.lineWidth,this.lineWidth=Ft*ie.scale);var lr=this.autoPaging!=="text";if(lr||an.y+an.h<=Fr){if(lr||an.y>=ar&&an.x<=Ir){var Xt=lr?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||Ir-an.x)[0],qr=U([JSON.parse(JSON.stringify(Zt))],this.posX+this.margin[3],-Sn+ar+this.ctx.prevPageLastElemOffset)[0],Kr=lr&&(Yt>Ut||Yt<vt)&&j.call(this);Kr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cn,Gr,null).clip().discardPath()),this.pdf.text(Xt,qr.x,qr.y,{angle:ie.angle,align:le,renderingMode:ie.renderingMode}),Kr&&this.pdf.restoreGraphicsState()}}else an.y<Fr&&(this.ctx.prevPageLastElemOffset+=Fr-an.y);ie.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Ft)}else ie.scale>=.01&&(Ue=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ue*ie.scale),Ft=this.lineWidth,this.lineWidth=Ft*ie.scale),this.pdf.text(ie.text,Je.x+this.posX,Je.y+this.posY,{angle:ie.angle,align:le,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(Ue),this.lineWidth=Ft)},Le=function(ie,le,fe,be){fe=fe||0,be=be||0,this.pdf.internal.out(r(ie+fe)+" "+n(le+be)+" l")},_e=function(ie,le,fe){return this.pdf.lines(ie,le,fe,null,null)},Qe=function(ie,le,fe,be,He,Je,tt,st){this.pdf.internal.out([e(s(fe+ie)),e(o(be+le)),e(s(He+ie)),e(o(Je+le)),e(s(tt+ie)),e(o(st+le)),"c"].join(" "))},De=function(ie,le,fe,be){for(var He=2*Math.PI,Je=Math.PI/2;le>fe;)le-=He;var tt=Math.abs(fe-le);tt<He&&be&&(tt=He-tt);for(var st=[],Ct=be?-1:1,Ue=le;tt>1e-5;){var Ft=Ue+Ct*Math.min(tt,Je);st.push(Be.call(this,ie,Ue,Ft)),tt-=Math.abs(Ft-Ue),Ue=Ft}return st},Be=function(ie,le,fe){var be=(fe-le)/2,He=ie*Math.cos(be),Je=ie*Math.sin(be),tt=He,st=-Je,Ct=tt*tt+st*st,Ue=Ct+tt*He+st*Je,Ft=4/3*(Math.sqrt(2*Ct*Ue)-Ue)/(tt*Je-st*He),Zt=tt-Ft*st,fr=st+Ft*tt,Ye=Zt,Re=-fr,hr=be+le,Ut=Math.cos(hr),vt=Math.sin(hr);return{x1:ie*Math.cos(le),y1:ie*Math.sin(le),x2:Zt*Ut-fr*vt,y2:Zt*vt+fr*Ut,x3:Ye*Ut-Re*vt,y3:Ye*vt+Re*Ut,x4:ie*Math.cos(fe),y4:ie*Math.sin(fe)}},xe=function(ie){return 180*ie/Math.PI},ze=function(ie,le,fe,be,He,Je){var tt=ie+.5*(fe-ie),st=le+.5*(be-le),Ct=He+.5*(fe-He),Ue=Je+.5*(be-Je),Ft=Math.min(ie,He,tt,Ct),Zt=Math.max(ie,He,tt,Ct),fr=Math.min(le,Je,st,Ue),Ye=Math.max(le,Je,st,Ue);return new u(Ft,fr,Zt-Ft,Ye-fr)},Fe=function(ie,le,fe,be,He,Je,tt,st){var Ct,Ue,Ft,Zt,fr,Ye,Re,hr,Ut,vt,Yt,ar,nr,Fr,Gr=fe-ie,Ir=be-le,cn=He-fe,Sn=Je-be,En=tt-He,an=st-Je;for(Ue=0;Ue<41;Ue++)Ut=(Re=(Ft=ie+(Ct=Ue/40)*Gr)+Ct*((fr=fe+Ct*cn)-Ft))+Ct*(fr+Ct*(He+Ct*En-fr)-Re),vt=(hr=(Zt=le+Ct*Ir)+Ct*((Ye=be+Ct*Sn)-Zt))+Ct*(Ye+Ct*(Je+Ct*an-Ye)-hr),Ue==0?(Yt=Ut,ar=vt,nr=Ut,Fr=vt):(Yt=Math.min(Yt,Ut),ar=Math.min(ar,vt),nr=Math.max(nr,Ut),Fr=Math.max(Fr,vt));return new u(Math.round(Yt),Math.round(ar),Math.round(nr-Yt),Math.round(Fr-ar))},it=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,le,fe=(ie=this.ctx.lineDash,le=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:le}));this.prevLineDash!==fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=fe)}}})(ns.API),function(t){var e=function(o){var c,u,i,A,g,C,B,S,P,j;for(u=[],i=0,A=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;A>i;i+=4)(g=(o.charCodeAt(i)<<24)+(o.charCodeAt(i+1)<<16)+(o.charCodeAt(i+2)<<8)+o.charCodeAt(i+3))!==0?(C=(g=((g=((g=((g=(g-(j=g%85))/85)-(P=g%85))/85)-(S=g%85))/85)-(B=g%85))/85)%85,u.push(C+33,B+33,S+33,P+33,j+33)):u.push(122);return function(R,N){for(var U=N;U>0;U--)R.pop()}(u,c.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var c,u,i,A,g,C=String,B="length",S=255,P="charCodeAt",j="slice",R="replace";for(o[j](-2),o=o[j](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),i=[],A=0,g=(o+=c="uuuuu"[j](o[B]%5||5))[B];g>A;A+=5)u=52200625*(o[P](A)-33)+614125*(o[P](A+1)-33)+7225*(o[P](A+2)-33)+85*(o[P](A+3)-33)+(o[P](A+4)-33),i.push(S&u>>24,S&u>>16,S&u>>8,S&u);return function(N,U){for(var $=U;$>0;$--)N.pop()}(i,c[B]),C.fromCharCode.apply(C,i)},n=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",i=0;i<o.length;i+=2)u+=String.fromCharCode("0x"+(o[i]+o[i+1]));return u},s=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return o=(c=DI(c)).reduce(function(i,A){return i+String.fromCharCode(A)},"")};t.processDataByFilters=function(o,c){var u=0,i=o||"",A=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":i=r(i),A.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":i=e(i),A.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":i=n(i),A.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":i=i.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",A.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":i=s(i),A.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:i,reverseChain:A.reverse().join(" ")}}}(ns.API),function(t){t.loadFile=function(e,r,n){return function(s,o,c){o=o!==!1,c=typeof c=="function"?c:function(){};var u=void 0;try{u=function(i,A,g){var C=new XMLHttpRequest,B=0,S=function(P){var j=P.length,R=[],N=String.fromCharCode;for(B=0;B<j;B+=1)R.push(N(255&P.charCodeAt(B)));return R.join("")};if(C.open("GET",i,!A),C.overrideMimeType("text/plain; charset=x-user-defined"),A===!1&&(C.onload=function(){C.status===200?g(S(this.responseText)):g(void 0)}),C.send(null),A&&C.status===200)return S(C.responseText)}(s,o,c)}catch{}return u}(e,r,n)},t.loadImageFile=t.loadFile}(ns.API),function(t){function e(){return(ls.html2canvas?Promise.resolve(ls.html2canvas):y1(()=>Promise.resolve().then(()=>NN),void 0)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(ls.DOMPurify?Promise.resolve(ls.DOMPurify):y1(()=>import("./purify.es-DGIRlouP.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=wa(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(c,u){var i=document.createElement(c);for(var A in u.className&&(i.className=u.className),u.innerHTML&&u.dompurify&&(i.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)i.style[A]=u.style[A];return i},o=function c(u){var i=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),A=c.convert(Promise.resolve(),i);return A=(A=A.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||function(i){switch(n(i)){case"string":return"string";case"element":return i.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(r).then(function(i){return this.set({src:s("div",{innerHTML:c,dompurify:i})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function i(A,g){for(var C=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),B=A.firstChild;B;B=B.nextSibling)g!==!0&&B.nodeType===1&&B.nodeName==="SCRIPT"||C.appendChild(i(B,g));return A.nodeType===1&&(A.nodeName==="CANVAS"?(C.width=A.width,C.height=A.height,C.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(C.value=A.value),C.addEventListener("load",function(){C.scrollTop=A.scrollTop,C.scrollLeft=A.scrollLeft},!0)),C}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=Object.assign({},this.opt.html2canvas);return delete i.onrendered,u(this.prop.container,i)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var i=this.opt.jsPDF,A=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,i.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,i.context2d.posX=this.opt.x,i.context2d.posY=this.opt.y,i.context2d.margin=this.opt.margin,i.context2d.fontFaces=A,A)for(var B=0;B<A.length;++B){var S=A[B],P=S.src.find(function(j){return j.format==="truetype"});P&&i.addFont(P.url,S.ref.name,S.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,i.context2d.save(!0),u(this.prop.container,C)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,i){return(i=i||"pdf").toLowerCase()==="img"||i.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(i){if(i in o.template.prop)return function(){this.prop[i]=c[i]};switch(i){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[i]=c[i]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var i=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(i):i})},o.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(i,A){return Math.floor(i*A/72*96)}return this.then(function(){(c=c||ns.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,i,A){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),i!=null&&(this.progress.n=i),A!=null&&(this.progress.stack=A),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,i,A){return this.setProgress(c?this.progress.val+c:null,u||null,i?this.progress.n+i:null,A?this.progress.stack.concat(A):null)},o.prototype.then=function(c,u){var i=this;return this.thenCore(c,u,function(A,g){return i.updateProgress(null,null,1,[A]),Promise.prototype.then.call(this,function(C){return i.updateProgress(null,A),C}).then(A,g).then(function(C){return i.updateProgress(1),C})})},o.prototype.thenCore=function(c,u,i){i=i||Promise.prototype.then,c&&(c=c.bind(this)),u&&(u=u.bind(this));var A=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),g=i.call(A,c,u);return o.convert(g,this.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(i){u=u.thenCore(i)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ns.getPageSize=function(c,u,i){if(wa(c)==="object"){var A=c;c=A.orientation,u=A.unit||u,i=A.format||i}u=u||"mm",i=i||"a4",c=(""+(c||"P")).toLowerCase();var g,C=(""+i).toLowerCase(),B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var S,P=0,j=0;if(B.hasOwnProperty(C))P=B[C][1]/g,j=B[C][0]/g;else try{P=i[1],j=i[0]}catch{throw new Error("Invalid format: "+i)}if(c==="p"||c==="portrait")c="p",j>P&&(S=j,j=P,P=S);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",P>j&&(S=j,j=P,P=S)}return{width:j,height:P,unit:u,k:g,orientation:c}},t.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(HI):null;var i=new o(u);return u.worker?i:i.from(c).doCallback()}}(ns.API),ns.API.addJS=function(t){return Az=t,this.internal.events.subscribe("postPutResources",function(){k2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(k2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),pz=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Az+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){k2!==void 0&&pz!==void 0&&this.internal.out("/Names <</JavaScript "+k2+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),o=0;o<s.length;o++){var c=s[o],u=n.exec(c);if(u!=null){var i=u[1];r.internal.newObjectDeferredBegin(i,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var A=this.internal.pages.length,g=[];for(o=0;o<A;o++){var C=r.internal.newObject();g.push(C);var B=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+B.objId+" 0 R /XYZ null null null]>> endobj")}var S=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<g.length;o++)r.internal.write("(page_"+(o+1)+")"+g[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+S+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,o){var c={title:s,options:o,children:[]};return n==null&&(n=this.root),n.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var c=n.children[o];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var u=this.count=this.count_r({count:0},c);if(u>0&&this.line("/Count "+u),c.options&&c.options.pageNumber){var i=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var A=0;A<n.children.length;A++)this.renderItems(n.children[A])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var o=0;o<s.children.length;o++)n.count++,this.count_r(n,s.children[o]);return n.count}}])}(ns.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,o,c,u){var i,A=this.decode.DCT_DECODE,g=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(i=function(C){for(var B,S=256*C.charCodeAt(4)+C.charCodeAt(5),P=C.length,j={width:0,height:0,numcomponents:1},R=4;R<P;R+=2){if(R+=S,e.indexOf(C.charCodeAt(R+1))!==-1){B=256*C.charCodeAt(R+5)+C.charCodeAt(R+6),j={width:256*C.charCodeAt(R+7)+C.charCodeAt(R+8),height:B,numcomponents:C.charCodeAt(R+9)};break}S=256*C.charCodeAt(R+2)+C.charCodeAt(R+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:r,width:i.width,height:i.height,colorSpace:u,bitsPerComponent:8,filter:A,index:n,alias:s}}return g}}(ns.API);var dy,D2,mz,gz,yz,T4e=function(){var t,e,r;function n(o){var c,u,i,A,g,C,B,S,P,j,R,N,U,$;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C=null;;){switch(c=this.readUInt32(),P=(function(){var J,te;for(te=[],J=0;J<4;++J)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":C&&this.animation.frames.push(C),this.pos+=4,C={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),A=this.readUInt16()||100,C.delay=1e3*g/A,C.disposeOp=this.data[this.pos++],C.blendOp=this.data[this.pos++],C.data=[];break;case"IDAT":case"fdAT":for(P==="fdAT"&&(this.pos+=4,c-=4),o=(C!=null?C.data:void 0)||this.imgData,N=0;0<=c?N<c:N>c;0<=c?++N:--N)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((j=i-this.transparency.indexed.length)>0)for(U=0;0<=j?U<j:U>j;0<=j?++U:--U)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":B=(R=this.read(c)).indexOf(0),S=String.fromCharCode.apply(String,R.slice(0,B)),this.text[S]=String.fromCharCode.apply(String,R.slice(B+1));break;case"IEND":return C&&this.animation.frames.push(C),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=($=this.colorType)===4||$===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var c,u;for(u=[],c=0;0<=o?c<o:c>o;0<=o?++c:--c)u.push(this.data[this.pos++]);return u},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var c=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*c),i=0,A=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function g(C,B,S,P){var j,R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe=Math.ceil((A.width-C)/S),it=Math.ceil((A.height-B)/P),ie=A.width==Fe&&A.height==it;for(Y=c*Fe,me=ie?u:new Uint8Array(Y*it),J=o.length,Z=0,R=0;Z<it&&i<J;){switch(o[i++]){case 0:for(U=Qe=0;Qe<Y;U=Qe+=1)me[R++]=o[i++];break;case 1:for(U=De=0;De<Y;U=De+=1)j=o[i++],$=U<c?0:me[R-c],me[R++]=(j+$)%256;break;case 2:for(U=Be=0;Be<Y;U=Be+=1)j=o[i++],N=(U-U%c)/c,Le=Z&&me[(Z-1)*Y+N*c+U%c],me[R++]=(Le+j)%256;break;case 3:for(U=xe=0;xe<Y;U=xe+=1)j=o[i++],N=(U-U%c)/c,$=U<c?0:me[R-c],Le=Z&&me[(Z-1)*Y+N*c+U%c],me[R++]=(j+Math.floor(($+Le)/2))%256;break;case 4:for(U=ze=0;ze<Y;U=ze+=1)j=o[i++],N=(U-U%c)/c,$=U<c?0:me[R-c],Z===0?Le=_e=0:(Le=me[(Z-1)*Y+N*c+U%c],_e=N&&me[(Z-1)*Y+(N-1)*c+U%c]),te=$+Le-_e,ue=Math.abs(te-$),K=Math.abs(te-Le),ce=Math.abs(te-_e),oe=ue<=K&&ue<=ce?$:K<=ce?Le:_e,me[R++]=(j+oe)%256;break;default:throw new Error("Invalid filter algorithm: "+o[i-1])}if(!ie){var le=((B+Z*P)*A.width+C)*c,fe=Z*Y;for(U=0;U<Fe;U+=1){for(var be=0;be<c;be+=1)u[le++]=me[fe++];le+=(S-1)*c}}Z++}}return o=l4e(o),A.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},n.prototype.decodePalette=function(){var o,c,u,i,A,g,C,B,S;for(u=this.palette,g=this.transparency.indexed||[],A=new Uint8Array((g.length||0)+u.length),i=0,o=0,c=C=0,B=u.length;C<B;c=C+=3)A[i++]=u[c],A[i++]=u[c+1],A[i++]=u[c+2],A[i++]=(S=g[o++])!=null?S:255;return A},n.prototype.copyToImageData=function(o,c){var u,i,A,g,C,B,S,P,j,R,N;if(i=this.colors,j=null,u=this.hasAlphaChannel,this.palette.length&&(j=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),i=4,u=!0),P=(A=o.data||o).length,C=j||c,g=B=0,i===1)for(;g<P;)S=j?4*c[g/4]:B,R=C[S++],A[g++]=R,A[g++]=R,A[g++]=R,A[g++]=u?C[S++]:255,B=S;else for(;g<P;)S=j?4*c[g/4]:B,A[g++]=C[S++],A[g++]=C[S++],A[g++]=C[S++],A[g++]=u?C[S++]:255,B=S},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var s=function(){if(Object.prototype.toString.call(ls)==="[object Window]"){try{e=ls.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(o){var c;if(s()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(c=new Image).src=e.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var c,u,i,A,g,C,B,S;if(this.animation){for(S=[],u=g=0,C=(B=this.animation.frames).length;g<C;u=++g)c=B[u],i=o.createImageData(c.width,c.height),A=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(i,A),c.imageData=i,S.push(c.image=t(i));return S}},n.prototype.renderFrame=function(o,c){var u,i,A;return u=(i=this.animation.frames)[c],A=i[c-1],c===0&&o.clearRect(0,0,this.width,this.height),(A!=null?A.disposeOp:void 0)===1?o.clearRect(A.xOffset,A.yOffset,A.width,A.height):(A!=null?A.disposeOp:void 0)===2&&o.putImageData(A.imageData,A.xOffset,A.yOffset),u.blendOp===0&&o.clearRect(u.xOffset,u.yOffset,u.width,u.height),o.drawImage(u.image,u.xOffset,u.yOffset)},n.prototype.animate=function(o){var c,u,i,A,g,C,B=this;return u=0,C=this.animation,A=C.numFrames,i=C.frames,g=C.numPlays,(c=function(){var S,P;if(S=u++%A,P=i[S],B.renderFrame(o,S),A>1&&u/A<g)return B.animation._timeout=setTimeout(c,P.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var c,u;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,c=o.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function I4e(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],o=s>>7,c=1<<(7&s)+1;t[e++],t[e++];var u=null,i=null;o&&(u=e,i=c,e+=3*c);var A=!0,g=[],C=0,B=null,S=0,P=null;for(this.width=r,this.height=n;A&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,P=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[e++];C=t[e++]|t[e++]<<8,B=t[e++],!(1&j)&&(B=null),S=j>>2&7,e++;break;case 254:for(;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var R=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,U=t[e++]|t[e++]<<8,$=t[e++]|t[e++]<<8,J=t[e++],te=J>>6&1,ue=1<<(7&J)+1,oe=u,K=i,ce=!1;J>>7&&(ce=!0,oe=e,K=ue,e+=3*ue);var me=e;for(e++;;){var Z;if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}g.push({x:R,y:N,width:U,height:$,has_local_palette:ce,palette_offset:oe,palette_size:K,data_offset:me,data_length:e-me,transparent_index:B,interlaced:!!te,delay:C,disposal:S});break;case 59:A=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return P},this.frameInfo=function(Y){if(Y<0||Y>=g.length)throw new Error("Frame index out of range.");return g[Y]},this.decodeAndBlitFrameBGRA=function(Y,Le){var _e=this.frameInfo(Y),Qe=_e.width*_e.height,De=new Uint8Array(Qe);vz(t,_e.data_offset,De,Qe);var Be=_e.palette_offset,xe=_e.transparent_index;xe===null&&(xe=256);var ze=_e.width,Fe=r-ze,it=ze,ie=4*(_e.y*r+_e.x),le=4*((_e.y+_e.height)*r+_e.x),fe=ie,be=4*Fe;_e.interlaced===!0&&(be+=4*r*7);for(var He=8,Je=0,tt=De.length;Je<tt;++Je){var st=De[Je];if(it===0&&(it=ze,(fe+=be)>=le&&(be=4*Fe+4*r*(He-1),fe=ie+(ze+Fe)*(He<<1),He>>=1)),st===xe)fe+=4;else{var Ct=t[Be+3*st],Ue=t[Be+3*st+1],Ft=t[Be+3*st+2];Le[fe++]=Ft,Le[fe++]=Ue,Le[fe++]=Ct,Le[fe++]=255}--it}},this.decodeAndBlitFrameRGBA=function(Y,Le){var _e=this.frameInfo(Y),Qe=_e.width*_e.height,De=new Uint8Array(Qe);vz(t,_e.data_offset,De,Qe);var Be=_e.palette_offset,xe=_e.transparent_index;xe===null&&(xe=256);var ze=_e.width,Fe=r-ze,it=ze,ie=4*(_e.y*r+_e.x),le=4*((_e.y+_e.height)*r+_e.x),fe=ie,be=4*Fe;_e.interlaced===!0&&(be+=4*r*7);for(var He=8,Je=0,tt=De.length;Je<tt;++Je){var st=De[Je];if(it===0&&(it=ze,(fe+=be)>=le&&(be=4*Fe+4*r*(He-1),fe=ie+(ze+Fe)*(He<<1),He>>=1)),st===xe)fe+=4;else{var Ct=t[Be+3*st],Ue=t[Be+3*st+1],Ft=t[Be+3*st+2];Le[fe++]=Ct,Le[fe++]=Ue,Le[fe++]=Ft,Le[fe++]=255}--it}}}function vz(t,e,r,n){for(var s=t[e++],o=1<<s,c=o+1,u=c+1,i=s+1,A=(1<<i)-1,g=0,C=0,B=0,S=t[e++],P=new Int32Array(4096),j=null;;){for(;g<16&&S!==0;)C|=t[e++]<<g,g+=8,S===1?S=t[e++]:--S;if(g<i)break;var R=C&A;if(C>>=i,g-=i,R!==o){if(R===c)break;for(var N=R<u?R:j,U=0,$=N;$>o;)$=P[$]>>8,++U;var J=$;if(B+U+(N!==R?1:0)>n)return void Ua.log("Warning, gif stream longer than expected.");r[B++]=J;var te=B+=U;for(N!==R&&(r[B++]=J),$=N;U--;)$=P[$],r[--te]=255&$,$>>=8;j!==null&&u<4096&&(P[u++]=j<<8|J,u>=A+1&&i<12&&(++i,A=A<<1|1)),j=R}else u=c+1,A=(1<<(i=s+1))-1,j=null}return B!==n&&Ua.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Z3(t){var e,r,n,s,o,c=Math.floor,u=new Array(64),i=new Array(64),A=new Array(64),g=new Array(64),C=new Array(65535),B=new Array(65535),S=new Array(64),P=new Array(64),j=[],R=0,N=7,U=new Array(64),$=new Array(64),J=new Array(64),te=new Array(256),ue=new Array(2048),oe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ce=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Le=[0,1,2,3,4,5,6,7,8,9,10,11],_e=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Qe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function De(ie,le){for(var fe=0,be=0,He=new Array,Je=1;Je<=16;Je++){for(var tt=1;tt<=ie[Je];tt++)He[le[be]]=[],He[le[be]][0]=fe,He[le[be]][1]=Je,be++,fe++;fe*=2}return He}function Be(ie){for(var le=ie[0],fe=ie[1]-1;fe>=0;)le&1<<fe&&(R|=1<<N),fe--,--N<0&&(R==255?(xe(255),xe(0)):xe(R),N=7,R=0)}function xe(ie){j.push(ie)}function ze(ie){xe(ie>>8&255),xe(255&ie)}function Fe(ie,le,fe,be,He){for(var Je,tt=He[0],st=He[240],Ct=function(vt,Yt){var ar,nr,Fr,Gr,Ir,cn,Sn,En,an,lr,Xt=0;for(an=0;an<8;++an){ar=vt[Xt],nr=vt[Xt+1],Fr=vt[Xt+2],Gr=vt[Xt+3],Ir=vt[Xt+4],cn=vt[Xt+5],Sn=vt[Xt+6];var qr=ar+(En=vt[Xt+7]),Kr=ar-En,kn=nr+Sn,mn=nr-Sn,Un=Fr+cn,Hi=Fr-cn,Gn=Gr+Ir,ti=Gr-Ir,si=qr+Gn,xi=qr-Gn,Bn=kn+Un,Zr=kn-Un;vt[Xt]=si+Bn,vt[Xt+4]=si-Bn;var Nr=.707106781*(Zr+xi);vt[Xt+2]=xi+Nr,vt[Xt+6]=xi-Nr;var un=.382683433*((si=ti+Hi)-(Zr=mn+Kr)),ri=.5411961*si+un,Hn=1.306562965*Zr+un,ir=.707106781*(Bn=Hi+mn),We=Kr+ir,qe=Kr-ir;vt[Xt+5]=qe+ri,vt[Xt+3]=qe-ri,vt[Xt+1]=We+Hn,vt[Xt+7]=We-Hn,Xt+=8}for(Xt=0,an=0;an<8;++an){ar=vt[Xt],nr=vt[Xt+8],Fr=vt[Xt+16],Gr=vt[Xt+24],Ir=vt[Xt+32],cn=vt[Xt+40],Sn=vt[Xt+48];var ht=ar+(En=vt[Xt+56]),It=ar-En,wt=nr+Sn,kt=nr-Sn,Wt=Fr+cn,Ot=Fr-cn,pr=Gr+Ir,xr=Gr-Ir,Ar=ht+pr,Tr=ht-pr,nn=wt+Wt,on=wt-Wt;vt[Xt]=Ar+nn,vt[Xt+32]=Ar-nn;var _n=.707106781*(on+Tr);vt[Xt+16]=Tr+_n,vt[Xt+48]=Tr-_n;var Dn=.382683433*((Ar=xr+Ot)-(on=kt+It)),qn=.5411961*Ar+Dn,$n=1.306562965*on+Dn,Ni=.707106781*(nn=Ot+kt),Vi=It+Ni,Wn=It-Ni;vt[Xt+40]=Wn+qn,vt[Xt+24]=Wn-qn,vt[Xt+8]=Vi+$n,vt[Xt+56]=Vi-$n,Xt++}for(an=0;an<64;++an)lr=vt[an]*Yt[an],S[an]=lr>0?lr+.5|0:lr-.5|0;return S}(ie,le),Ue=0;Ue<64;++Ue)P[oe[Ue]]=Ct[Ue];var Ft=P[0]-fe;fe=P[0],Ft==0?Be(be[0]):(Be(be[B[Je=32767+Ft]]),Be(C[Je]));for(var Zt=63;Zt>0&&P[Zt]==0;)Zt--;if(Zt==0)return Be(tt),fe;for(var fr,Ye=1;Ye<=Zt;){for(var Re=Ye;P[Ye]==0&&Ye<=Zt;)++Ye;var hr=Ye-Re;if(hr>=16){fr=hr>>4;for(var Ut=1;Ut<=fr;++Ut)Be(st);hr&=15}Je=32767+P[Ye],Be(He[(hr<<4)+B[Je]]),Be(C[Je]),Ye++}return Zt!=63&&Be(tt),fe}function it(ie){ie=Math.min(Math.max(ie,1),100),o!=ie&&(function(le){for(var fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],be=0;be<64;be++){var He=c((fe[be]*le+50)/100);He=Math.min(Math.max(He,1),255),u[oe[be]]=He}for(var Je=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],tt=0;tt<64;tt++){var st=c((Je[tt]*le+50)/100);st=Math.min(Math.max(st,1),255),i[oe[tt]]=st}for(var Ct=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ue=0,Ft=0;Ft<8;Ft++)for(var Zt=0;Zt<8;Zt++)A[Ue]=1/(u[oe[Ue]]*Ct[Ft]*Ct[Zt]*8),g[Ue]=1/(i[oe[Ue]]*Ct[Ft]*Ct[Zt]*8),Ue++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),o=ie)}this.encode=function(ie,le){le&&it(le),j=new Array,R=0,N=7,ze(65496),ze(65504),ze(16),xe(74),xe(70),xe(73),xe(70),xe(0),xe(1),xe(1),xe(0),ze(1),ze(1),xe(0),xe(0),function(){ze(65499),ze(132),xe(0);for(var nr=0;nr<64;nr++)xe(u[nr]);xe(1);for(var Fr=0;Fr<64;Fr++)xe(i[Fr])}(),function(nr,Fr){ze(65472),ze(17),xe(8),ze(Fr),ze(nr),xe(3),xe(1),xe(17),xe(0),xe(2),xe(17),xe(1),xe(3),xe(17),xe(1)}(ie.width,ie.height),function(){ze(65476),ze(418),xe(0);for(var nr=0;nr<16;nr++)xe(K[nr+1]);for(var Fr=0;Fr<=11;Fr++)xe(ce[Fr]);xe(16);for(var Gr=0;Gr<16;Gr++)xe(me[Gr+1]);for(var Ir=0;Ir<=161;Ir++)xe(Z[Ir]);xe(1);for(var cn=0;cn<16;cn++)xe(Y[cn+1]);for(var Sn=0;Sn<=11;Sn++)xe(Le[Sn]);xe(17);for(var En=0;En<16;En++)xe(_e[En+1]);for(var an=0;an<=161;an++)xe(Qe[an])}(),ze(65498),ze(12),xe(3),xe(1),xe(0),xe(2),xe(17),xe(3),xe(17),xe(0),xe(63),xe(0);var fe=0,be=0,He=0;R=0,N=7,this.encode.displayName="_encode_";for(var Je,tt,st,Ct,Ue,Ft,Zt,fr,Ye,Re=ie.data,hr=ie.width,Ut=ie.height,vt=4*hr,Yt=0;Yt<Ut;){for(Je=0;Je<vt;){for(Ue=vt*Yt+Je,Zt=-1,fr=0,Ye=0;Ye<64;Ye++)Ft=Ue+(fr=Ye>>3)*vt+(Zt=4*(7&Ye)),Yt+fr>=Ut&&(Ft-=vt*(Yt+1+fr-Ut)),Je+Zt>=vt&&(Ft-=Je+Zt-vt+4),tt=Re[Ft++],st=Re[Ft++],Ct=Re[Ft++],U[Ye]=(ue[tt]+ue[st+256>>0]+ue[Ct+512>>0]>>16)-128,$[Ye]=(ue[tt+768>>0]+ue[st+1024>>0]+ue[Ct+1280>>0]>>16)-128,J[Ye]=(ue[tt+1280>>0]+ue[st+1536>>0]+ue[Ct+1792>>0]>>16)-128;fe=Fe(U,A,fe,e,n),be=Fe($,g,be,r,s),He=Fe(J,g,He,r,s),Je+=32}Yt+=8}if(N>=0){var ar=[];ar[1]=N+1,ar[0]=(1<<N+1)-1,Be(ar)}return ze(65497),new Uint8Array(j)},t=t||50,function(){for(var ie=String.fromCharCode,le=0;le<256;le++)te[le]=ie(le)}(),e=De(K,ce),r=De(Y,Le),n=De(me,Z),s=De(_e,Qe),function(){for(var ie=1,le=2,fe=1;fe<=15;fe++){for(var be=ie;be<le;be++)B[32767+be]=fe,C[32767+be]=[],C[32767+be][1]=fe,C[32767+be][0]=be;for(var He=-(le-1);He<=-ie;He++)B[32767+He]=fe,C[32767+He]=[],C[32767+He][1]=fe,C[32767+He][0]=le-1+He;ie<<=1,le<<=1}}(),function(){for(var ie=0;ie<256;ie++)ue[ie]=19595*ie,ue[ie+256>>0]=38470*ie,ue[ie+512>>0]=7471*ie+32768,ue[ie+768>>0]=-11059*ie,ue[ie+1024>>0]=-21709*ie,ue[ie+1280>>0]=32768*ie+8421375,ue[ie+1536>>0]=-27439*ie,ue[ie+1792>>0]=-5329*ie}(),it(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cf(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xz(t){function e(K){if(!K)throw Error("assert :P")}function r(K,ce,me){for(var Z=0;4>Z;Z++)if(K[ce+Z]!=me.charCodeAt(Z))return!0;return!1}function n(K,ce,me,Z,Y){for(var Le=0;Le<Y;Le++)K[ce+Le]=me[Z+Le]}function s(K,ce,me,Z){for(var Y=0;Y<Z;Y++)K[ce+Y]=me}function o(K){return new Int32Array(K)}function c(K,ce){for(var me=[],Z=0;Z<K;Z++)me.push(new ce);return me}function u(K,ce){var me=[];return function Z(Y,Le,_e){for(var Qe=_e[Le],De=0;De<Qe&&(Y.push(_e.length>Le+1?[]:new ce),!(_e.length<Le+1));De++)Z(Y[De],Le+1,_e)}(me,0,K),me}var i=function(){var K=this;function ce(w,L){for(var G=1<<L-1>>>0;w&G;)G>>>=1;return G?(w&G-1)+G:w}function me(w,L,G,ee,Ae){e(!(ee%G));do w[L+(ee-=G)]=Ae;while(0<ee)}function Z(w,L,G,ee,Ae){if(e(2328>=Ae),512>=Ae)var Ce=o(512);else if((Ce=o(Ae))==null)return 0;return function(Ie,Ne,Me,Pe,lt,Lt){var Bt,xt,Pt=Ne,Qt=1<<Me,ct=o(16),mt=o(16);for(e(lt!=0),e(Pe!=null),e(Ie!=null),e(0<Me),xt=0;xt<lt;++xt){if(15<Pe[xt])return 0;++ct[Pe[xt]]}if(ct[0]==lt)return 0;for(mt[1]=0,Bt=1;15>Bt;++Bt){if(ct[Bt]>1<<Bt)return 0;mt[Bt+1]=mt[Bt]+ct[Bt]}for(xt=0;xt<lt;++xt)Bt=Pe[xt],0<Pe[xt]&&(Lt[mt[Bt]++]=xt);if(mt[15]==1)return(Pe=new Y).g=0,Pe.value=Lt[0],me(Ie,Pt,1,Qt,Pe),Qt;var cr,mr=-1,dr=Qt-1,Yr=0,Or=1,bn=1,zr=1<<Me;for(xt=0,Bt=1,lt=2;Bt<=Me;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt])(Pe=new Y).g=Bt,Pe.value=Lt[xt++],me(Ie,Pt+Yr,lt,zr,Pe),Yr=ce(Yr,Bt)}for(Bt=Me+1,lt=2;15>=Bt;++Bt,lt<<=1){if(Or+=bn<<=1,0>(bn-=ct[Bt]))return 0;for(;0<ct[Bt];--ct[Bt]){if(Pe=new Y,(Yr&dr)!=mr){for(Pt+=zr,cr=1<<(mr=Bt)-Me;15>mr&&!(0>=(cr-=ct[mr]));)++mr,cr<<=1;Qt+=zr=1<<(cr=mr-Me),Ie[Ne+(mr=Yr&dr)].g=cr+Me,Ie[Ne+mr].value=Pt-Ne-mr}Pe.g=Bt-Me,Pe.value=Lt[xt++],me(Ie,Pt+(Yr>>Me),lt,zr,Pe),Yr=ce(Yr,Bt)}}return Or!=2*mt[15]-1?0:Qt}(w,L,G,ee,Ae,Ce)}function Y(){this.value=this.g=0}function Le(){this.value=this.g=0}function _e(){this.G=c(5,Y),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c($i,Le)}function Qe(w,L,G,ee){e(w!=null),e(L!=null),e(2147483648>ee),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=L,w.pa=G,w.Jd=L,w.Yc=G+ee,w.Zc=4<=ee?G+ee-4+1:G,Je(w)}function De(w,L){for(var G=0;0<L--;)G|=st(w,128)<<L;return G}function Be(w,L){var G=De(w,L);return tt(w)?-G:G}function xe(w,L,G,ee){var Ae,Ce=0;for(e(w!=null),e(L!=null),e(4294967288>ee),w.Sb=ee,w.Ra=0,w.u=0,w.h=0,4<ee&&(ee=4),Ae=0;Ae<ee;++Ae)Ce+=L[G+Ae]<<8*Ae;w.Ra=Ce,w.bb=ee,w.oa=L,w.pa=G}function ze(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Jr-8>>>0,++w.bb,w.u-=8;fe(w)&&(w.h=1,w.u=0)}function Fe(w,L){if(e(0<=L),!w.h&&L<=la){var G=le(w)&cs[L];return w.u+=L,ze(w),G}return w.h=1,w.u=0}function it(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function le(w){return w.Ra>>>(w.u&Jr-1)>>>0}function fe(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Jr}function be(w,L){w.u=L,w.h=fe(w)}function He(w){w.u>=sc&&(e(w.u>=sc),ze(w))}function Je(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function tt(w){return De(w,1)}function st(w,L){var G=w.Ca;0>w.b&&Je(w);var ee=w.b,Ae=G*L>>>8,Ce=(w.I>>>ee>Ae)+0;for(Ce?(G-=Ae,w.I-=Ae+1<<ee>>>0):G=Ae+1,ee=G,Ae=0;256<=ee;)Ae+=8,ee>>=8;return ee=7^Ae+bs[ee],w.b-=ee,w.Ca=(G<<ee)-1,Ce}function Ct(w,L,G){w[L+0]=G>>24&255,w[L+1]=G>>16&255,w[L+2]=G>>8&255,w[L+3]=G>>0&255}function Ue(w,L){return w[L+0]<<0|w[L+1]<<8}function Ft(w,L){return Ue(w,L)|w[L+2]<<16}function Zt(w,L){return Ue(w,L)|Ue(w,L+2)<<16}function fr(w,L){var G=1<<L;return e(w!=null),e(0<L),w.X=o(G),w.X==null?0:(w.Mb=32-L,w.Xa=L,1)}function Ye(w,L){e(w!=null),e(L!=null),e(w.Xa==L.Xa),n(L.X,0,w.X,0,1<<L.Xa)}function Re(){this.X=[],this.Xa=this.Mb=0}function hr(w,L,G,ee){e(G!=null),e(ee!=null);var Ae=G[0],Ce=ee[0];return Ae==0&&(Ae=(w*Ce+L/2)/L),Ce==0&&(Ce=(L*Ae+w/2)/w),0>=Ae||0>=Ce?0:(G[0]=Ae,ee[0]=Ce,1)}function Ut(w,L){return w+(1<<L)-1>>>L}function vt(w,L){return((4278255360&w)+(4278255360&L)>>>0&4278255360)+((16711935&w)+(16711935&L)>>>0&16711935)>>>0}function Yt(w,L){K[L]=function(G,ee,Ae,Ce,Ie,Ne,Me){var Pe;for(Pe=0;Pe<Ie;++Pe){var lt=K[w](Ne[Me+Pe-1],Ae,Ce+Pe);Ne[Me+Pe]=vt(G[ee+Pe],lt)}}}function ar(){this.ud=this.hd=this.jd=0}function nr(w,L){return((4278124286&(w^L))>>>1)+(w&L)>>>0}function Fr(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Gr(w,L){return Fr(w+(w-L+.5>>1))}function Ir(w,L,G){return Math.abs(L-G)-Math.abs(w-G)}function cn(w,L,G,ee,Ae,Ce,Ie){for(ee=Ce[Ie-1],G=0;G<Ae;++G)Ce[Ie+G]=ee=vt(w[L+G],ee)}function Sn(w,L,G,ee,Ae){var Ce;for(Ce=0;Ce<G;++Ce){var Ie=w[L+Ce],Ne=Ie>>8&255,Me=16711935&(Me=(Me=16711935&Ie)+((Ne<<16)+Ne));ee[Ae+Ce]=(4278255360&Ie)+Me>>>0}}function En(w,L){L.jd=w>>0&255,L.hd=w>>8&255,L.ud=w>>16&255}function an(w,L,G,ee,Ae,Ce){var Ie;for(Ie=0;Ie<ee;++Ie){var Ne=L[G+Ie],Me=Ne>>>8,Pe=Ne,lt=255&(lt=(lt=Ne>>>16)+((w.jd<<24>>24)*(Me<<24>>24)>>>5));Pe=255&(Pe=(Pe=Pe+((w.hd<<24>>24)*(Me<<24>>24)>>>5))+((w.ud<<24>>24)*(lt<<24>>24)>>>5)),Ae[Ce+Ie]=(4278255360&Ne)+(lt<<16)+Pe}}function lr(w,L,G,ee,Ae){K[L]=function(Ce,Ie,Ne,Me,Pe,lt,Lt,Bt,xt){for(Me=Lt;Me<Bt;++Me)for(Lt=0;Lt<xt;++Lt)Pe[lt++]=Ae(Ne[ee(Ce[Ie++])])},K[w]=function(Ce,Ie,Ne,Me,Pe,lt,Lt){var Bt=8>>Ce.b,xt=Ce.Ea,Pt=Ce.K[0],Qt=Ce.w;if(8>Bt)for(Ce=(1<<Ce.b)-1,Qt=(1<<Bt)-1;Ie<Ne;++Ie){var ct,mt=0;for(ct=0;ct<xt;++ct)ct&Ce||(mt=ee(Me[Pe++])),lt[Lt++]=Ae(Pt[mt&Qt]),mt>>=Bt}else K["VP8LMapColor"+G](Me,Pe,Pt,Qt,lt,Lt,Ie,Ne,xt)}}function Xt(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=w[L++];ee[Ae++]=Ce>>16&255,ee[Ae++]=Ce>>8&255,ee[Ae++]=Ce>>0&255}}function qr(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=w[L++];ee[Ae++]=Ce>>16&255,ee[Ae++]=Ce>>8&255,ee[Ae++]=Ce>>0&255,ee[Ae++]=Ce>>24&255}}function Kr(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=(Ie=w[L++])>>16&240|Ie>>12&15,Ie=Ie>>0&240|Ie>>28&15;ee[Ae++]=Ce,ee[Ae++]=Ie}}function kn(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=(Ie=w[L++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;ee[Ae++]=Ce,ee[Ae++]=Ie}}function mn(w,L,G,ee,Ae){for(G=L+G;L<G;){var Ce=w[L++];ee[Ae++]=Ce>>0&255,ee[Ae++]=Ce>>8&255,ee[Ae++]=Ce>>16&255}}function Un(w,L,G,ee,Ae,Ce){if(Ce==0)for(G=L+G;L<G;)Ct(ee,((Ce=w[L++])[0]>>24|Ce[1]>>8&65280|Ce[2]<<8&16711680|Ce[3]<<24)>>>0),Ae+=32;else n(ee,Ae,w,L,G)}function Hi(w,L){K[L][0]=K[w+"0"],K[L][1]=K[w+"1"],K[L][2]=K[w+"2"],K[L][3]=K[w+"3"],K[L][4]=K[w+"4"],K[L][5]=K[w+"5"],K[L][6]=K[w+"6"],K[L][7]=K[w+"7"],K[L][8]=K[w+"8"],K[L][9]=K[w+"9"],K[L][10]=K[w+"10"],K[L][11]=K[w+"11"],K[L][12]=K[w+"12"],K[L][13]=K[w+"13"],K[L][14]=K[w+"0"],K[L][15]=K[w+"0"]}function Gn(w){return w==nh||w==bh||w==xu||w==Jh}function ti(){this.eb=[],this.size=this.A=this.fb=0}function si(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ti,this.f.kb=new si,this.sd=null}function Bn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Zr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function un(w,L){var G=w.T,ee=L.ba.f.RGBA,Ae=ee.eb,Ce=ee.fb+w.ka*ee.A,Ie=co[L.ba.S],Ne=w.y,Me=w.O,Pe=w.f,lt=w.N,Lt=w.ea,Bt=w.W,xt=L.cc,Pt=L.dc,Qt=L.Mc,ct=L.Nc,mt=w.ka,cr=w.ka+w.T,mr=w.U,dr=mr+1>>1;for(mt==0?Ie(Ne,Me,null,null,Pe,lt,Lt,Bt,Pe,lt,Lt,Bt,Ae,Ce,null,null,mr):(Ie(L.ec,L.fc,Ne,Me,xt,Pt,Qt,ct,Pe,lt,Lt,Bt,Ae,Ce-ee.A,Ae,Ce,mr),++G);mt+2<cr;mt+=2)xt=Pe,Pt=lt,Qt=Lt,ct=Bt,lt+=w.Rc,Bt+=w.Rc,Ce+=2*ee.A,Ie(Ne,(Me+=2*w.fa)-w.fa,Ne,Me,xt,Pt,Qt,ct,Pe,lt,Lt,Bt,Ae,Ce-ee.A,Ae,Ce,mr);return Me+=w.fa,w.j+cr<w.o?(n(L.ec,L.fc,Ne,Me,mr),n(L.cc,L.dc,Pe,lt,dr),n(L.Mc,L.Nc,Lt,Bt,dr),G--):1&cr||Ie(Ne,Me,null,null,Pe,lt,Lt,Bt,Pe,lt,Lt,Bt,Ae,Ce+ee.A,null,null,mr),G}function ri(w,L,G){var ee=w.F,Ae=[w.J];if(ee!=null){var Ce=w.U,Ie=L.ba.S,Ne=Ie==nu||Ie==xu;L=L.ba.f.RGBA;var Me=[0],Pe=w.ka;Me[0]=w.T,w.Kb&&(Pe==0?--Me[0]:(--Pe,Ae[0]-=w.width),w.j+w.ka+w.T==w.o&&(Me[0]=w.o-w.j-Pe));var lt=L.eb;Pe=L.fb+Pe*L.A,w=Yi(ee,Ae[0],w.width,Ce,Me,lt,Pe+(Ne?0:3),L.A),e(G==Me),w&&Gn(Ie)&&eo(lt,Pe,Ne,Ce,Me,L.A)}return 0}function Hn(w){var L=w.ma,G=L.ba.S,ee=11>G,Ae=G==jc||G==Sc||G==nu||G==rh||G==12||Gn(G);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!Ea(L.Oa,w,Ae?11:12))return 0;if(Ae&&Gn(G)&&gr(),w.da)alert("todo:use_scaling");else{if(ee){if(L.Ib=Nr,w.Kb){if(G=w.U+1>>1,L.memory=o(w.U+2*G),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+w.U,L.Mc=L.cc,L.Nc=L.dc+G,L.Ib=un,gr()}}else alert("todo:EmitYUV");Ae&&(L.Jb=ri,ee&&St())}if(ee&&!wd){for(w=0;256>w;++w)_A[w]=89858*(w-128)+ki>>Ei,ag[w]=-22014*(w-128)+ki,sf[w]=-45773*(w-128),bA[w]=113618*(w-128)+ki>>Ei;for(w=Qs;w<Oc;++w)L=76283*(w-16)+ki>>Ei,wA[w-Qs]=Zs(L,255),CA[w-Qs]=Zs(L+8>>4,15);wd=1}return 1}function ir(w){var L=w.ma,G=w.U,ee=w.T;return e(!(1&w.ka)),0>=G||0>=ee?0:(G=L.Ib(w,L),L.Jb!=null&&L.Jb(w,L,G),L.Dc+=G,1)}function We(w){w.ma.memory=null}function qe(w,L,G,ee){return Fe(w,8)!=47?0:(L[0]=Fe(w,14)+1,G[0]=Fe(w,14)+1,ee[0]=Fe(w,1),Fe(w,3)!=0?0:!w.h)}function ht(w,L){if(4>w)return w+1;var G=w-2>>1;return(2+(1&w)<<G)+Fe(L,G)+1}function It(w,L){return 120<L?L-120:1<=(G=((G=xd[L-1])>>4)*w+(8-(15&G)))?G:1;var G}function wt(w,L,G){var ee=le(G),Ae=w[L+=255&ee].g-8;return 0<Ae&&(be(G,G.u+8),ee=le(G),L+=w[L].value,L+=ee&(1<<Ae)-1),be(G,G.u+w[L].g),w[L].value}function kt(w,L,G){return G.g+=w.g,G.value+=w.value<<L>>>0,e(8>=G.g),w.g}function Wt(w,L,G){var ee=w.xc;return e((L=ee==0?0:w.vc[w.md*(G>>ee)+(L>>ee)])<w.Wb),w.Ya[L]}function Ot(w,L,G,ee){var Ae=w.ab,Ce=w.c*L,Ie=w.C;L=Ie+L;var Ne=G,Me=ee;for(ee=w.Ta,G=w.Ua;0<Ae--;){var Pe=w.gc[Ae],lt=Ie,Lt=L,Bt=Ne,xt=Me,Pt=(Me=ee,Ne=G,Pe.Ea);switch(e(lt<Lt),e(Lt<=Pe.nc),Pe.hc){case 2:$l(Bt,xt,(Lt-lt)*Pt,Me,Ne);break;case 0:var Qt=lt,ct=Lt,mt=Me,cr=Ne,mr=(zr=Pe).Ea;Qt==0&&(oc(Bt,xt,null,null,1,mt,cr),cn(Bt,xt+1,0,0,mr-1,mt,cr+1),xt+=mr,cr+=mr,++Qt);for(var dr=1<<zr.b,Yr=dr-1,Or=Ut(mr,zr.b),bn=zr.K,zr=zr.w+(Qt>>zr.b)*Or;Qt<ct;){var ui=bn,pi=zr,Vn=1;for(yl(Bt,xt,mt,cr-mr,1,mt,cr);Vn<mr;){var ei=(Vn&~Yr)+dr;ei>mr&&(ei=mr),(0,yr[ui[pi++]>>8&15])(Bt,xt+ +Vn,mt,cr+Vn-mr,ei-Vn,mt,cr+Vn),Vn=ei}xt+=mr,cr+=mr,++Qt&Yr||(zr+=Or)}Lt!=Pe.nc&&n(Me,Ne-Pt,Me,Ne+(Lt-lt-1)*Pt,Pt);break;case 1:for(Pt=Bt,ct=xt,mr=(Bt=Pe.Ea)-(cr=Bt&~(mt=(xt=1<<Pe.b)-1)),Qt=Ut(Bt,Pe.b),dr=Pe.K,Pe=Pe.w+(lt>>Pe.b)*Qt;lt<Lt;){for(Yr=dr,Or=Pe,bn=new ar,zr=ct+cr,ui=ct+Bt;ct<zr;)En(Yr[Or++],bn),jr(bn,Pt,ct,xt,Me,Ne),ct+=xt,Ne+=xt;ct<ui&&(En(Yr[Or++],bn),jr(bn,Pt,ct,mr,Me,Ne),ct+=mr,Ne+=mr),++lt&mt||(Pe+=Qt)}break;case 3:if(Bt==Me&&xt==Ne&&0<Pe.b){for(ct=Me,Bt=Pt=Ne+(Lt-lt)*Pt-(cr=(Lt-lt)*Ut(Pe.Ea,Pe.b)),xt=Me,mt=Ne,Qt=[],cr=(mr=cr)-1;0<=cr;--cr)Qt[cr]=xt[mt+cr];for(cr=mr-1;0<=cr;--cr)ct[Bt+cr]=Qt[cr];js(Pe,lt,Lt,Me,Pt,Me,Ne)}else js(Pe,lt,Lt,Bt,xt,Me,Ne)}Ne=ee,Me=G}Me!=G&&n(ee,G,Ne,Me,Ce)}function pr(w,L){var G=w.V,ee=w.Ba+w.c*w.C,Ae=L-w.C;if(e(L<=w.l.o),e(16>=Ae),0<Ae){var Ce=w.l,Ie=w.Ta,Ne=w.Ua,Me=Ce.width;if(Ot(w,Ae,G,ee),Ae=Ne=[Ne],e((G=w.C)<(ee=L)),e(Ce.v<Ce.va),ee>Ce.o&&(ee=Ce.o),G<Ce.j){var Pe=Ce.j-G;G=Ce.j,Ae[0]+=Pe*Me}if(G>=ee?G=0:(Ae[0]+=4*Ce.v,Ce.ka=G-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=ee-G,G=1),G){if(Ne=Ne[0],11>(G=w.ca).S){var lt=G.f.RGBA,Lt=(ee=G.S,Ae=Ce.U,Ce=Ce.T,Pe=lt.eb,lt.A),Bt=Ce;for(lt=lt.fb+w.Ma*lt.A;0<Bt--;){var xt=Ie,Pt=Ne,Qt=Ae,ct=Pe,mt=lt;switch(ee){case cc:xn(xt,Pt,Qt,ct,mt);break;case jc:jn(xt,Pt,Qt,ct,mt);break;case nh:jn(xt,Pt,Qt,ct,mt),eo(ct,mt,0,Qt,1,0);break;case vu:As(xt,Pt,Qt,ct,mt);break;case Sc:Un(xt,Pt,Qt,ct,mt,1);break;case bh:Un(xt,Pt,Qt,ct,mt,1),eo(ct,mt,0,Qt,1,0);break;case nu:Un(xt,Pt,Qt,ct,mt,0);break;case xu:Un(xt,Pt,Qt,ct,mt,0),eo(ct,mt,1,Qt,1,0);break;case rh:ts(xt,Pt,Qt,ct,mt);break;case Jh:ts(xt,Pt,Qt,ct,mt),ws(ct,mt,Qt,1,0);break;case Zh:bi(xt,Pt,Qt,ct,mt);break;default:e(0)}Ne+=Me,lt+=Lt}w.Ma+=Ce}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=G.height)}}w.C=L,e(w.C<=w.i)}function xr(w){var L;if(0<w.ua)return 0;for(L=0;L<w.Wb;++L){var G=w.Ya[L].G,ee=w.Ya[L].H;if(0<G[1][ee[1]+0].g||0<G[2][ee[2]+0].g||0<G[3][ee[3]+0].g)return 0}return 1}function Ar(w,L,G,ee,Ae,Ce){if(w.Z!=0){var Ie=w.qd,Ne=w.rd;for(e(Ta[w.Z]!=null);L<G;++L)Ta[w.Z](Ie,Ne,ee,Ae,ee,Ae,Ce),Ie=ee,Ne=Ae,Ae+=Ce;w.qd=Ie,w.rd=Ne}}function Tr(w,L){var G=w.l.ma,ee=G.Z==0||G.Z==1?w.l.j:w.C;if(ee=w.C<ee?ee:w.C,e(L<=w.l.o),L>ee){var Ae=w.l.width,Ce=G.ca,Ie=G.tb+Ae*ee,Ne=w.V,Me=w.Ba+w.c*ee,Pe=w.gc;e(w.ab==1),e(Pe[0].hc==3),Aa(Pe[0],ee,L,Ne,Me,Ce,Ie),Ar(G,ee,L,Ce,Ie,Ae)}w.C=w.Ma=L}function nn(w,L,G,ee,Ae,Ce,Ie){var Ne=w.$/ee,Me=w.$%ee,Pe=w.m,lt=w.s,Lt=G+w.$,Bt=Lt;Ae=G+ee*Ae;var xt=G+ee*Ce,Pt=280+lt.ua,Qt=w.Pb?Ne:16777216,ct=0<lt.ua?lt.Wa:null,mt=lt.wc,cr=Lt<xt?Wt(lt,Me,Ne):null;e(w.C<Ce),e(xt<=Ae);var mr=!1;e:for(;;){for(;mr||Lt<xt;){var dr=0;if(Ne>=Qt){var Yr=Lt-G;e((Qt=w).Pb),Qt.wd=Qt.m,Qt.xd=Yr,0<Qt.s.ua&&Ye(Qt.s.Wa,Qt.s.vb),Qt=Ne+bd}if(Me&mt||(cr=Wt(lt,Me,Ne)),e(cr!=null),cr.Qb&&(L[Lt]=cr.qb,mr=!0),!mr)if(He(Pe),cr.jc){dr=Pe,Yr=L;var Or=Lt,bn=cr.pd[le(dr)&$i-1];e(cr.jc),256>bn.g?(be(dr,dr.u+bn.g),Yr[Or]=bn.value,dr=0):(be(dr,dr.u+bn.g-256),e(256<=bn.value),dr=bn.value),dr==0&&(mr=!0)}else dr=wt(cr.G[0],cr.H[0],Pe);if(Pe.h)break;if(mr||256>dr){if(!mr)if(cr.nd)L[Lt]=(cr.qb|dr<<8)>>>0;else{if(He(Pe),mr=wt(cr.G[1],cr.H[1],Pe),He(Pe),Yr=wt(cr.G[2],cr.H[2],Pe),Or=wt(cr.G[3],cr.H[3],Pe),Pe.h)break;L[Lt]=(Or<<24|mr<<16|dr<<8|Yr)>>>0}if(mr=!1,++Lt,++Me>=ee&&(Me=0,++Ne,Ie!=null&&Ne<=Ce&&!(Ne%16)&&Ie(w,Ne),ct!=null))for(;Bt<Lt;)dr=L[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else if(280>dr){if(dr=ht(dr-256,Pe),Yr=wt(cr.G[4],cr.H[4],Pe),He(Pe),Yr=It(ee,Yr=ht(Yr,Pe)),Pe.h)break;if(Lt-G<Yr||Ae-Lt<dr)break e;for(Or=0;Or<dr;++Or)L[Lt+Or]=L[Lt+Or-Yr];for(Lt+=dr,Me+=dr;Me>=ee;)Me-=ee,++Ne,Ie!=null&&Ne<=Ce&&!(Ne%16)&&Ie(w,Ne);if(e(Lt<=Ae),Me&mt&&(cr=Wt(lt,Me,Ne)),ct!=null)for(;Bt<Lt;)dr=L[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr}else{if(!(dr<Pt))break e;for(mr=dr-280,e(ct!=null);Bt<Lt;)dr=L[Bt++],ct.X[(506832829*dr&4294967295)>>>ct.Mb]=dr;dr=Lt,e(!(mr>>>(Yr=ct).Xa)),L[dr]=Yr.X[mr],mr=!0}mr||e(Pe.h==fe(Pe))}if(w.Pb&&Pe.h&&Lt<Ae)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Ye(w.s.vb,w.s.Wa);else{if(Pe.h)break e;Ie!=null&&Ie(w,Ne>Ce?Ce:Ne),w.a=0,w.$=Lt-G}return 1}return w.a=3,0}function on(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var L=w.Wa;L!=null&&(L.X=null),w.vb=null,e(w!=null)}function _n(){var w=new yu;return w==null?null:(w.a=0,w.xb=Sh,Hi("Predictor","VP8LPredictors"),Hi("Predictor","VP8LPredictors_C"),Hi("PredictorAdd","VP8LPredictorsAdd"),Hi("PredictorAdd","VP8LPredictorsAdd_C"),$l=Sn,jr=an,xn=Xt,jn=qr,ts=Kr,bi=kn,As=mn,K.VP8LMapColor32b=Jo,K.VP8LMapColor8b=Pc,w)}function Dn(w,L,G,ee,Ae){var Ce=1,Ie=[w],Ne=[L],Me=ee.m,Pe=ee.s,lt=null,Lt=0;e:for(;;){if(G)for(;Ce&&Fe(Me,1);){var Bt=Ie,xt=Ne,Pt=ee,Qt=1,ct=Pt.m,mt=Pt.gc[Pt.ab],cr=Fe(ct,2);if(Pt.Oc&1<<cr)Ce=0;else{switch(Pt.Oc|=1<<cr,mt.hc=cr,mt.Ea=Bt[0],mt.nc=xt[0],mt.K=[null],++Pt.ab,e(4>=Pt.ab),cr){case 0:case 1:mt.b=Fe(ct,3)+2,Qt=Dn(Ut(mt.Ea,mt.b),Ut(mt.nc,mt.b),0,Pt,mt.K),mt.K=mt.K[0];break;case 3:var mr,dr=Fe(ct,8)+1,Yr=16<dr?0:4<dr?1:2<dr?2:3;if(Bt[0]=Ut(mt.Ea,Yr),mt.b=Yr,mr=Qt=Dn(dr,1,0,Pt,mt.K)){var Or,bn=dr,zr=mt,ui=1<<(8>>zr.b),pi=o(ui);if(pi==null)mr=0;else{var Vn=zr.K[0],ei=zr.w;for(pi[0]=zr.K[0][0],Or=1;Or<1*bn;++Or)pi[Or]=vt(Vn[ei+Or],pi[Or-1]);for(;Or<4*ui;++Or)pi[Or]=0;zr.K[0]=null,zr.K[0]=pi,mr=1}}Qt=mr;break;case 2:break;default:e(0)}Ce=Qt}}if(Ie=Ie[0],Ne=Ne[0],Ce&&Fe(Me,1)&&!(Ce=1<=(Lt=Fe(Me,4))&&11>=Lt)){ee.a=3;break e}var Mi;if(Mi=Ce)t:{var Si,zn,ms,To=ee,Ri=Ie,Ui=Ne,yi=Lt,Qo=G,Ko=To.m,Ds=To.s,$s=[null],Io=1,jo=0,ca=_d[yi];r:for(;;){if(Qo&&Fe(Ko,1)){var Pr=Fe(Ko,3)+2,Ln=Ut(Ri,Pr),ya=Ut(Ui,Pr),Bs=Ln*ya;if(!Dn(Ln,ya,0,To,$s))break r;for($s=$s[0],Ds.xc=Pr,Si=0;Si<Bs;++Si){var ur=$s[Si]>>8&65535;$s[Si]=ur,ur>=Io&&(Io=ur+1)}}if(Ko.h)break r;for(zn=0;5>zn;++zn){var Zi=vd[zn];!zn&&0<yi&&(Zi+=1<<yi),jo<Zi&&(jo=Zi)}var Bh=c(Io*ca,Y),lf=Io,Rc=c(lf,_e);if(Rc==null)var oh=null;else e(65536>=lf),oh=Rc;var uc=o(jo);if(oh==null||uc==null||Bh==null){To.a=1;break r}var Wc=Bh;for(Si=ms=0;Si<Io;++Si){var ka=oh[Si],iu=ka.G,Kc=ka.H,Cd=0,wu=1,Sd=0;for(zn=0;5>zn;++zn){Zi=vd[zn],iu[zn]=Wc,Kc[zn]=ms,!zn&&0<yi&&(Zi+=1<<yi);i:{var su,ah=Zi,Xc=To,Cu=uc,ou=Wc,lg=ms,Wa=0,hc=Xc.m,cf=Fe(hc,1);if(s(Cu,0,0,ah),cf){var uo=Fe(hc,1)+1,os=Fe(hc,1),Yf=Fe(hc,os==0?1:8);Cu[Yf]=1,uo==2&&(Cu[Yf=Fe(hc,8)]=1);var Bc=1}else{var Bd=o(19),Su=Fe(hc,4)+4;if(19<Su){Xc.a=3;var Bu=0;break i}for(su=0;su<Su;++su)Bd[nf[su]]=Fe(hc,3);var ed=void 0,El=void 0,Eu=Xc,lh=Bd,Uc=ah,Ed=Cu,td=0,Tl=Eu.m,uf=8,Tu=c(128,Y);n:for(;Z(Tu,0,7,lh,19);){if(Fe(Tl,1)){var Td=2+2*Fe(Tl,3);if((ed=2+Fe(Tl,Td))>Uc)break n}else ed=Uc;for(El=0;El<Uc&&ed--;){He(Tl);var ch=Tu[0+(127&le(Tl))];be(Tl,Tl.u+ch.g);var na=ch.value;if(16>na)Ed[El++]=na,na!=0&&(uf=na);else{var Id=na==16,Ka=na-16,jp=wh[Ka],hf=Fe(Tl,kc[Ka])+jp;if(El+hf>Uc)break n;for(var Ld=Id?uf:0;0<hf--;)Ed[El++]=Ld}}td=1;break n}td||(Eu.a=3),Bc=td}(Bc=Bc&&!hc.h)&&(Wa=Z(ou,lg,8,Cu,ah)),Bc&&Wa!=0?Bu=Wa:(Xc.a=3,Bu=0)}if(Bu==0)break r;if(wu&&Wl[zn]==1&&(wu=Wc[ms].g==0),Cd+=Wc[ms].g,ms+=Bu,3>=zn){var Il,rd=uc[0];for(Il=1;Il<Zi;++Il)uc[Il]>rd&&(rd=uc[Il]);Sd+=rd}}if(ka.nd=wu,ka.Qb=0,wu&&(ka.qb=(iu[3][Kc[3]+0].value<<24|iu[1][Kc[1]+0].value<<16|iu[2][Kc[2]+0].value)>>>0,Cd==0&&256>iu[0][Kc[0]+0].value&&(ka.Qb=1,ka.qb+=iu[0][Kc[0]+0].value<<8)),ka.jc=!ka.Qb&&6>Sd,ka.jc){var au,al=ka;for(au=0;au<$i;++au){var ll=au,cl=al.pd[ll],Iu=al.G[0][al.H[0]+ll];256<=Iu.value?(cl.g=Iu.g+256,cl.value=Iu.value):(cl.g=0,cl.value=0,ll>>=kt(Iu,8,cl),ll>>=kt(al.G[1][al.H[1]+ll],16,cl),ll>>=kt(al.G[2][al.H[2]+ll],0,cl),kt(al.G[3][al.H[3]+ll],24,cl))}}}Ds.vc=$s,Ds.Wb=Io,Ds.Ya=oh,Ds.yc=Bh,Mi=1;break t}Mi=0}if(!(Ce=Mi)){ee.a=3;break e}if(0<Lt){if(Pe.ua=1<<Lt,!fr(Pe.Wa,Lt)){ee.a=1,Ce=0;break e}}else Pe.ua=0;var Eh=ee,Fd=Ie,SA=Ne,Th=Eh.s,uh=Th.xc;if(Eh.c=Fd,Eh.i=SA,Th.md=Ut(Fd,uh),Th.wc=uh==0?-1:(1<<uh)-1,G){ee.xb=Wf;break e}if((lt=o(Ie*Ne))==null){ee.a=1,Ce=0;break e}Ce=(Ce=nn(ee,lt,0,Ie,Ne,Ne,null))&&!Me.h;break e}return Ce?(Ae!=null?Ae[0]=lt:(e(lt==null),e(G)),ee.$=0,G||on(Pe)):on(Pe),Ce}function qn(w,L){var G=w.c*w.i,ee=G+L+16*L;return e(w.c<=L),w.V=o(ee),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+G+L,1)}function $n(w,L){var G=w.C,ee=L-G,Ae=w.V,Ce=w.Ba+w.c*G;for(e(L<=w.l.o);0<ee;){var Ie=16<ee?16:ee,Ne=w.l.ma,Me=w.l.width,Pe=Me*Ie,lt=Ne.ca,Lt=Ne.tb+Me*G,Bt=w.Ta,xt=w.Ua;Ot(w,Ie,Ae,Ce),ai(Bt,xt,lt,Lt,Pe),Ar(Ne,G,G+Ie,lt,Lt,Me),ee-=Ie,Ae+=Ie*w.c,G+=Ie}e(G==L),w.C=w.Ma=L}function Ni(){this.ub=this.yd=this.td=this.Rb=0}function Vi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Ki(){this.Yb=function(){var w=[];return function L(G,ee,Ae){for(var Ce=Ae[ee],Ie=0;Ie<Ce&&(G.push(Ae.length>ee+1?[]:0),!(Ae.length<ee+1));Ie++)L(G[Ie],ee+1,Ae)}(w,0,[3,11]),w}()}function Cs(){this.jb=o(3),this.Wc=u([4,8],Ki),this.Xc=u([4,17],Ki)}function ro(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Fs(){this.ld=this.La=this.dd=this.tc=0}function es(){this.Na=this.la=0}function Sa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ba(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fs),this.Y=0,this.ya=Array(new Ba),this.aa=0,this.l=new sa}function go(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Sl(){this.cb=this.a=0,this.sc="",this.m=new it,this.Od=new Ni,this.Kc=new Vi,this.ed=new ro,this.Qa=new Wn,this.Ic=this.$c=this.Aa=0,this.D=new tl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,it),this.ia=0,this.pb=c(4,Sa),this.Pa=new Cs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new go),this.Hd=0,this.rb=Array(new es),this.sb=0,this.wa=Array(new Fs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ba),this.L=this.aa=0,this.gd=u([4,2],Fs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ha(){var w=new Sl;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Dc||(Dc=Ul)),w}function Gi(w,L,G){return w.a==0&&(w.a=L,w.sc=G,w.cb=0),0}function Fc(w,L,G){return 3<=G&&w[L+0]==157&&w[L+1]==1&&w[L+2]==42}function nc(w,L){if(w==null)return 0;if(w.a=0,w.sc="OK",L==null)return Gi(w,2,"null VP8Io passed to VP8GetHeaders()");var G=L.data,ee=L.w,Ae=L.ha;if(4>Ae)return Gi(w,7,"Truncated header.");var Ce=G[ee+0]|G[ee+1]<<8|G[ee+2]<<16,Ie=w.Od;if(Ie.Rb=!(1&Ce),Ie.td=Ce>>1&7,Ie.yd=Ce>>4&1,Ie.ub=Ce>>5,3<Ie.td)return Gi(w,3,"Incorrect keyframe parameters.");if(!Ie.yd)return Gi(w,4,"Frame not displayable.");ee+=3,Ae-=3;var Ne=w.Kc;if(Ie.Rb){if(7>Ae)return Gi(w,7,"cannot parse picture header");if(!Fc(G,ee,Ae))return Gi(w,3,"Bad code word");Ne.c=16383&(G[ee+4]<<8|G[ee+3]),Ne.Td=G[ee+4]>>6,Ne.i=16383&(G[ee+6]<<8|G[ee+5]),Ne.Ud=G[ee+6]>>6,ee+=7,Ae-=7,w.za=Ne.c+15>>4,w.Ub=Ne.i+15>>4,L.width=Ne.c,L.height=Ne.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,s((Ce=w.Pa).jb,0,255,Ce.jb.length),e((Ce=w.Qa)!=null),Ce.Cb=0,Ce.Bb=0,Ce.Fb=1,s(Ce.Zb,0,0,Ce.Zb.length),s(Ce.Lb,0,0,Ce.Lb)}if(Ie.ub>Ae)return Gi(w,7,"bad partition length");Qe(Ce=w.m,G,ee,Ie.ub),ee+=Ie.ub,Ae-=Ie.ub,Ie.Rb&&(Ne.Ld=tt(Ce),Ne.Kd=tt(Ce)),Ne=w.Qa;var Me,Pe=w.Pa;if(e(Ce!=null),e(Ne!=null),Ne.Cb=tt(Ce),Ne.Cb){if(Ne.Bb=tt(Ce),tt(Ce)){for(Ne.Fb=tt(Ce),Me=0;4>Me;++Me)Ne.Zb[Me]=tt(Ce)?Be(Ce,7):0;for(Me=0;4>Me;++Me)Ne.Lb[Me]=tt(Ce)?Be(Ce,6):0}if(Ne.Bb)for(Me=0;3>Me;++Me)Pe.jb[Me]=tt(Ce)?De(Ce,8):255}else Ne.Bb=0;if(Ce.Ka)return Gi(w,3,"cannot parse segment header");if((Ne=w.ed).zd=tt(Ce),Ne.Tb=De(Ce,6),Ne.wb=De(Ce,3),Ne.Pc=tt(Ce),Ne.Pc&&tt(Ce)){for(Pe=0;4>Pe;++Pe)tt(Ce)&&(Ne.vd[Pe]=Be(Ce,6));for(Pe=0;4>Pe;++Pe)tt(Ce)&&(Ne.od[Pe]=Be(Ce,6))}if(w.L=Ne.Tb==0?0:Ne.zd?1:2,Ce.Ka)return Gi(w,3,"cannot parse filter header");var lt=Ae;if(Ae=Me=ee,ee=Me+lt,Ne=lt,w.Xb=(1<<De(w.m,2))-1,lt<3*(Pe=w.Xb))G=7;else{for(Me+=3*Pe,Ne-=3*Pe,lt=0;lt<Pe;++lt){var Lt=G[Ae+0]|G[Ae+1]<<8|G[Ae+2]<<16;Lt>Ne&&(Lt=Ne),Qe(w.Jc[+lt],G,Me,Lt),Me+=Lt,Ne-=Lt,Ae+=3}Qe(w.Jc[+Pe],G,Me,Ne),G=Me<ee?0:5}if(G!=0)return Gi(w,G,"cannot parse partitions");for(G=De(Me=w.m,7),Ae=tt(Me)?Be(Me,4):0,ee=tt(Me)?Be(Me,4):0,Ne=tt(Me)?Be(Me,4):0,Pe=tt(Me)?Be(Me,4):0,Me=tt(Me)?Be(Me,4):0,lt=w.Qa,Lt=0;4>Lt;++Lt){if(lt.Cb){var Bt=lt.Zb[Lt];lt.Fb||(Bt+=G)}else{if(0<Lt){w.pb[Lt]=w.pb[0];continue}Bt=G}var xt=w.pb[Lt];xt.Sc[0]=ih[Zs(Bt+Ae,127)],xt.Sc[1]=_u[Zs(Bt+0,127)],xt.Eb[0]=2*ih[Zs(Bt+ee,127)],xt.Eb[1]=101581*_u[Zs(Bt+Ne,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=ih[Zs(Bt+Pe,117)],xt.Qc[1]=_u[Zs(Bt+Me,127)],xt.lc=Bt+Me}if(!Ie.Rb)return Gi(w,4,"Not a key frame.");for(tt(Ce),Ie=w.Pa,G=0;4>G;++G){for(Ae=0;8>Ae;++Ae)for(ee=0;3>ee;++ee)for(Ne=0;11>Ne;++Ne)Pe=st(Ce,Np[G][Ae][ee][Ne])?De(Ce,8):qf[G][Ae][ee][Ne],Ie.Wc[G][Ae].Yb[ee][Ne]=Pe;for(Ae=0;17>Ae;++Ae)Ie.Xc[G][Ae]=Ie.Wc[G][$f[Ae]]}return w.kc=tt(Ce),w.kc&&(w.Bd=De(Ce,8)),w.cb=1}function Ul(w,L,G,ee,Ae,Ce,Ie){var Ne=L[Ae].Yb[G];for(G=0;16>Ae;++Ae){if(!st(w,Ne[G+0]))return Ae;for(;!st(w,Ne[G+1]);)if(Ne=L[++Ae].Yb[0],G=0,Ae==16)return 16;var Me=L[Ae+1].Yb;if(st(w,Ne[G+2])){var Pe=w,lt=0;if(st(Pe,(Bt=Ne)[(Lt=G)+3]))if(st(Pe,Bt[Lt+6])){for(Ne=0,Lt=2*(lt=st(Pe,Bt[Lt+8]))+(Bt=st(Pe,Bt[Lt+9+lt])),lt=0,Bt=Kl[Lt];Bt[Ne];++Ne)lt+=lt+st(Pe,Bt[Ne]);lt+=3+(8<<Lt)}else st(Pe,Bt[Lt+7])?(lt=7+2*st(Pe,165),lt+=st(Pe,145)):lt=5+st(Pe,159);else lt=st(Pe,Bt[Lt+4])?3+st(Pe,Bt[Lt+5]):2;Ne=Me[2]}else lt=1,Ne=Me[1];Me=Ie+sh[Ae],0>(Pe=w).b&&Je(Pe);var Lt,Bt=Pe.b,xt=(Lt=Pe.Ca>>1)-(Pe.I>>Bt)>>31;--Pe.b,Pe.Ca+=xt,Pe.Ca|=1,Pe.I-=(Lt+1&xt)<<Bt,Ce[Me]=((lt^xt)-xt)*ee[(0<Ae)+0]}return 16}function Xo(w){var L=w.rb[w.sb-1];L.la=0,L.Na=0,s(w.zc,0,0,w.zc.length),w.ja=0}function Pa(w,L){if(w==null)return 0;if(L==null)return Gi(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!nc(w,L))return 0;if(e(w.cb),L.ac==null||L.ac(L)){L.ob&&(w.L=0);var G=bu[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=L.v-G>>4,w.zb=L.j-G>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=L.o+15+G>>4,w.Hb=L.va+15+G>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ee=w.ed;for(G=0;4>G;++G){var Ae;if(w.Qa.Cb){var Ce=w.Qa.Lb[G];w.Qa.Fb||(Ce+=ee.Tb)}else Ce=ee.Tb;for(Ae=0;1>=Ae;++Ae){var Ie=w.gd[G][Ae],Ne=Ce;if(ee.Pc&&(Ne+=ee.vd[0],Ae&&(Ne+=ee.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Me=Ne;0<ee.wb&&(Me=4<ee.wb?Me>>2:Me>>1)>9-ee.wb&&(Me=9-ee.wb),1>Me&&(Me=1),Ie.dd=Me,Ie.tc=2*Ne+Me,Ie.ld=40<=Ne?2:15<=Ne?1:0}else Ie.tc=0;Ie.La=Ae}}}G=0}else Gi(w,6,"Frame setup failed"),G=w.a;if(G=G==0){if(G){w.$c=0,0<w.Aa||(w.Ic=of);e:{G=w.Ic,ee=4*(Me=w.za);var Pe=32*Me,lt=Me+1,Lt=0<w.L?Me*(0<w.Aa?2:1):0,Bt=(w.Aa==2?2:1)*Me;if((Ie=ee+832+(Ae=3*(16*G+bu[w.L])/2*Pe)+(Ce=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ie)G=0;else{if(Ie>w.Vb){if(w.Vb=0,w.Ec=o(Ie),w.Fc=0,w.Ec==null){G=Gi(w,1,"no memory during frame initialization.");break e}w.Vb=Ie}Ie=w.Ec,Ne=w.Fc,w.Ac=Ie,w.Bc=Ne,Ne+=ee,w.Gd=c(Pe,go),w.Hd=0,w.rb=c(lt+1,es),w.sb=1,w.wa=Lt?c(Lt,Fs):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Me),e(!0),w.oc=Ie,w.pc=Ne,Ne+=832,w.ya=c(Bt,Ba),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Me),w.R=16*Me,w.B=8*Me,Me=(Pe=bu[w.L])*w.R,Pe=Pe/2*w.B,w.sa=Ie,w.ta=Ne+Me,w.qa=w.sa,w.ra=w.ta+16*G*w.R+Pe,w.Ha=w.qa,w.Ia=w.ra+8*G*w.B+Pe,w.$c=0,Ne+=Ae,w.mb=Ce?Ie:null,w.nb=Ce?Ne:null,e(Ne+Ce<=w.Fc+w.Vb),Xo(w),s(w.Ac,w.Bc,0,ee),G=1}}if(G){if(L.ka=0,L.y=w.sa,L.O=w.ta,L.f=w.qa,L.N=w.ra,L.ea=w.Ha,L.Vd=w.Ia,L.fa=w.R,L.Rc=w.B,L.F=null,L.J=0,!qa){for(G=-255;255>=G;++G)qs[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)sl[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)ac[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)ol[255+G]=0>G?0:255<G?255:G;qa=1}us=Ht,bo=Cc,ks=ae,Ss=Oe,Us=At,Xi=Nc,Js=fa,ea=xs,ma=Eo,ta=ic,ra=no,Gs=$o,ga=aa,hs=rl,ss=Ma,In=qo,gi=Xs,lo=Bo,Mo[0]=Bi,Mo[1]=tr,Mo[2]=ln,Mo[3]=Jn,Mo[4]=Ns,Mo[5]=Ro,Mo[6]=Ks,Mo[7]=yn,Mo[8]=Li,Mo[9]=Yn,vl[0]=Xr,vl[1]=fn,vl[2]=pn,vl[3]=Nn,vl[4]=Qn,vl[5]=oi,vl[6]=Pi,$a[0]=Po,$a[1]=_r,$a[2]=da,$a[3]=Ms,$a[4]=oa,$a[5]=zl,$a[6]=yo,G=1}else G=0}G&&(G=function(xt,Pt){for(xt.M=0;xt.M<xt.Va;++xt.M){var Qt,ct=xt.Jc[xt.M&xt.Xb],mt=xt.m,cr=xt;for(Qt=0;Qt<cr.za;++Qt){var mr=mt,dr=cr,Yr=dr.Ac,Or=dr.Bc+4*Qt,bn=dr.zc,zr=dr.ya[dr.aa+Qt];if(dr.Qa.Bb?zr.$b=st(mr,dr.Pa.jb[0])?2+st(mr,dr.Pa.jb[2]):st(mr,dr.Pa.jb[1]):zr.$b=0,dr.kc&&(zr.Ad=st(mr,dr.Bd)),zr.Za=!st(mr,145)+0,zr.Za){var ui=zr.Ob,pi=0;for(dr=0;4>dr;++dr){var Vn,ei=bn[0+dr];for(Vn=0;4>Vn;++Vn){ei=Ch[Yr[Or+Vn]][ei];for(var Mi=zo[st(mr,ei[0])];0<Mi;)Mi=zo[2*Mi+st(mr,ei[Mi])];ei=-Mi,Yr[Or+Vn]=ei}n(ui,pi,Yr,Or,4),pi+=4,bn[0+dr]=ei}}else ei=st(mr,156)?st(mr,128)?1:3:st(mr,163)?2:0,zr.Ob[0]=ei,s(Yr,Or,ei,4),s(bn,0,ei,4);zr.Dd=st(mr,142)?st(mr,114)?st(mr,183)?1:3:2:0}if(cr.m.Ka)return Gi(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(cr=ct,mr=(mt=xt).rb[mt.sb-1],Yr=mt.rb[mt.sb+mt.ja],Qt=mt.ya[mt.aa+mt.ja],Or=mt.kc?Qt.Ad:0)mr.la=Yr.la=0,Qt.Za||(mr.Na=Yr.Na=0),Qt.Hc=0,Qt.Gc=0,Qt.ia=0;else{var Si,zn;if(mr=Yr,Yr=cr,Or=mt.Pa.Xc,bn=mt.ya[mt.aa+mt.ja],zr=mt.pb[bn.$b],dr=bn.ad,ui=0,pi=mt.rb[mt.sb-1],ei=Vn=0,s(dr,ui,0,384),bn.Za)var ms=0,To=Or[3];else{Mi=o(16);var Ri=mr.Na+pi.Na;if(Ri=Dc(Yr,Or[1],Ri,zr.Eb,0,Mi,0),mr.Na=pi.Na=(0<Ri)+0,1<Ri)us(Mi,0,dr,ui);else{var Ui=Mi[0]+3>>3;for(Mi=0;256>Mi;Mi+=16)dr[ui+Mi]=Ui}ms=1,To=Or[0]}var yi=15&mr.la,Qo=15&pi.la;for(Mi=0;4>Mi;++Mi){var Ko=1&Qo;for(Ui=zn=0;4>Ui;++Ui)yi=yi>>1|(Ko=(Ri=Dc(Yr,To,Ri=Ko+(1&yi),zr.Sc,ms,dr,ui))>ms)<<7,zn=zn<<2|(3<Ri?3:1<Ri?2:dr[ui+0]!=0),ui+=16;yi>>=4,Qo=Qo>>1|Ko<<7,Vn=(Vn<<8|zn)>>>0}for(To=yi,ms=Qo>>4,Si=0;4>Si;Si+=2){for(zn=0,yi=mr.la>>4+Si,Qo=pi.la>>4+Si,Mi=0;2>Mi;++Mi){for(Ko=1&Qo,Ui=0;2>Ui;++Ui)Ri=Ko+(1&yi),yi=yi>>1|(Ko=0<(Ri=Dc(Yr,Or[2],Ri,zr.Qc,0,dr,ui)))<<3,zn=zn<<2|(3<Ri?3:1<Ri?2:dr[ui+0]!=0),ui+=16;yi>>=2,Qo=Qo>>1|Ko<<5}ei|=zn<<4*Si,To|=yi<<4<<Si,ms|=(240&Qo)<<Si}mr.la=To,pi.la=ms,bn.Hc=Vn,bn.Gc=ei,bn.ia=43690&ei?0:zr.ia,Or=!(Vn|ei)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[Qt.$b][Qt.Za],mt.wa[mt.Y+mt.ja].La|=!Or),cr.Ka)return Gi(xt,7,"Premature end-of-file encountered.")}if(Xo(xt),mt=Pt,cr=1,Qt=(ct=xt).D,mr=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(Qt.M=ct.M,Qt.uc=mr,io(ct,Qt),cr=1,Qt=(zn=ct.D).Nb,mr=(ei=bu[ct.L])*ct.R,Yr=ei/2*ct.B,Mi=16*Qt*ct.R,Ui=8*Qt*ct.B,Or=ct.sa,bn=ct.ta-mr+Mi,zr=ct.qa,dr=ct.ra-Yr+Ui,ui=ct.Ha,pi=ct.Ia-Yr+Ui,Qo=(yi=zn.M)==0,Vn=yi>=ct.Va-1,ct.Aa==2&&io(ct,zn),zn.uc)for(Ko=(Ri=ct).D.M,e(Ri.D.uc),zn=Ri.yb;zn<Ri.Hb;++zn){ms=zn,To=Ko;var Ds=($s=(Zi=Ri).D).Nb;Si=Zi.R;var $s=$s.wa[$s.Y+ms],Io=Zi.sa,jo=Zi.ta+16*Ds*Si+16*ms,ca=$s.dd,Pr=$s.tc;if(Pr!=0)if(e(3<=Pr),Zi.L==1)0<ms&&In(Io,jo,Si,Pr+4),$s.La&&lo(Io,jo,Si,Pr),0<To&&ss(Io,jo,Si,Pr+4),$s.La&&gi(Io,jo,Si,Pr);else{var Ln=Zi.B,ya=Zi.qa,Bs=Zi.ra+8*Ds*Ln+8*ms,ur=Zi.Ha,Zi=Zi.Ia+8*Ds*Ln+8*ms;Ds=$s.ld,0<ms&&(ea(Io,jo,Si,Pr+4,ca,Ds),ta(ya,Bs,ur,Zi,Ln,Pr+4,ca,Ds)),$s.La&&(Gs(Io,jo,Si,Pr,ca,Ds),hs(ya,Bs,ur,Zi,Ln,Pr,ca,Ds)),0<To&&(Js(Io,jo,Si,Pr+4,ca,Ds),ma(ya,Bs,ur,Zi,Ln,Pr+4,ca,Ds)),$s.La&&(ra(Io,jo,Si,Pr,ca,Ds),ga(ya,Bs,ur,Zi,Ln,Pr,ca,Ds))}}if(ct.ia&&alert("todo:DitherRow"),mt.put!=null){if(zn=16*yi,yi=16*(yi+1),Qo?(mt.y=ct.sa,mt.O=ct.ta+Mi,mt.f=ct.qa,mt.N=ct.ra+Ui,mt.ea=ct.Ha,mt.W=ct.Ia+Ui):(zn-=ei,mt.y=Or,mt.O=bn,mt.f=zr,mt.N=dr,mt.ea=ui,mt.W=pi),Vn||(yi-=ei),yi>mt.o&&(yi=mt.o),mt.F=null,mt.J=null,ct.Fa!=null&&0<ct.Fa.length&&zn<yi&&(mt.J=ql(ct,mt,zn,yi-zn),mt.F=ct.mb,mt.F==null&&mt.F.length==0)){cr=Gi(ct,3,"Could not decode alpha data.");break e}zn<mt.j&&(ei=mt.j-zn,zn=mt.j,e(!(1&ei)),mt.O+=ct.R*ei,mt.N+=ct.B*(ei>>1),mt.W+=ct.B*(ei>>1),mt.F!=null&&(mt.J+=mt.width*ei)),zn<yi&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=zn-mt.j,mt.U=mt.va-mt.v,mt.T=yi-zn,cr=mt.put(mt))}Qt+1!=ct.Ic||Vn||(n(ct.sa,ct.ta-mr,Or,bn+16*ct.R,mr),n(ct.qa,ct.ra-Yr,zr,dr+8*ct.B,Yr),n(ct.Ha,ct.Ia-Yr,ui,pi+8*ct.B,Yr))}if(!cr)return Gi(xt,6,"Output aborted.")}return 1}(w,L)),L.bc!=null&&L.bc(L),G&=1}return G?(w.cb=0,G):0}function mi(w,L,G,ee,Ae){Ae=w[L+G+32*ee]+(Ae>>3),w[L+G+32*ee]=-256&Ae?0>Ae?0:255:Ae}function So(w,L,G,ee,Ae,Ce){mi(w,L,0,G,ee+Ae),mi(w,L,1,G,ee+Ce),mi(w,L,2,G,ee-Ce),mi(w,L,3,G,ee-Ae)}function vs(w){return(20091*w>>16)+w}function Bl(w,L,G,ee){var Ae,Ce=0,Ie=o(16);for(Ae=0;4>Ae;++Ae){var Ne=w[L+0]+w[L+8],Me=w[L+0]-w[L+8],Pe=(35468*w[L+4]>>16)-vs(w[L+12]),lt=vs(w[L+4])+(35468*w[L+12]>>16);Ie[Ce+0]=Ne+lt,Ie[Ce+1]=Me+Pe,Ie[Ce+2]=Me-Pe,Ie[Ce+3]=Ne-lt,Ce+=4,L++}for(Ae=Ce=0;4>Ae;++Ae)Ne=(w=Ie[Ce+0]+4)+Ie[Ce+8],Me=w-Ie[Ce+8],Pe=(35468*Ie[Ce+4]>>16)-vs(Ie[Ce+12]),mi(G,ee,0,0,Ne+(lt=vs(Ie[Ce+4])+(35468*Ie[Ce+12]>>16))),mi(G,ee,1,0,Me+Pe),mi(G,ee,2,0,Me-Pe),mi(G,ee,3,0,Ne-lt),Ce++,ee+=32}function Nc(w,L,G,ee){var Ae=w[L+0]+4,Ce=35468*w[L+4]>>16,Ie=vs(w[L+4]),Ne=35468*w[L+1]>>16;So(G,ee,0,Ae+Ie,w=vs(w[L+1]),Ne),So(G,ee,1,Ae+Ce,w,Ne),So(G,ee,2,Ae-Ce,w,Ne),So(G,ee,3,Ae-Ie,w,Ne)}function Cc(w,L,G,ee,Ae){Bl(w,L,G,ee),Ae&&Bl(w,L+16,G,ee+4)}function ae(w,L,G,ee){bo(w,L+0,G,ee,1),bo(w,L+32,G,ee+128,1)}function Oe(w,L,G,ee){var Ae;for(w=w[L+0]+4,Ae=0;4>Ae;++Ae)for(L=0;4>L;++L)mi(G,ee,L,Ae,w)}function At(w,L,G,ee){w[L+0]&&Ss(w,L+0,G,ee),w[L+16]&&Ss(w,L+16,G,ee+4),w[L+32]&&Ss(w,L+32,G,ee+128),w[L+48]&&Ss(w,L+48,G,ee+128+4)}function Ht(w,L,G,ee){var Ae,Ce=o(16);for(Ae=0;4>Ae;++Ae){var Ie=w[L+0+Ae]+w[L+12+Ae],Ne=w[L+4+Ae]+w[L+8+Ae],Me=w[L+4+Ae]-w[L+8+Ae],Pe=w[L+0+Ae]-w[L+12+Ae];Ce[0+Ae]=Ie+Ne,Ce[8+Ae]=Ie-Ne,Ce[4+Ae]=Pe+Me,Ce[12+Ae]=Pe-Me}for(Ae=0;4>Ae;++Ae)Ie=(w=Ce[0+4*Ae]+3)+Ce[3+4*Ae],Ne=Ce[1+4*Ae]+Ce[2+4*Ae],Me=Ce[1+4*Ae]-Ce[2+4*Ae],Pe=w-Ce[3+4*Ae],G[ee+0]=Ie+Ne>>3,G[ee+16]=Pe+Me>>3,G[ee+32]=Ie-Ne>>3,G[ee+48]=Pe-Me>>3,ee+=64}function er(w,L,G){var ee,Ae=L-32,Ce=so,Ie=255-w[Ae-1];for(ee=0;ee<G;++ee){var Ne,Me=Ce,Pe=Ie+w[L-1];for(Ne=0;Ne<G;++Ne)w[L+Ne]=Me[Pe+w[Ae+Ne]];L+=32}}function tr(w,L){er(w,L,4)}function _r(w,L){er(w,L,8)}function fn(w,L){er(w,L,16)}function pn(w,L){var G;for(G=0;16>G;++G)n(w,L+32*G,w,L-32,16)}function Nn(w,L){var G;for(G=16;0<G;--G)s(w,L,w[L-1],16),L+=32}function Mn(w,L,G){var ee;for(ee=0;16>ee;++ee)s(L,G+32*ee,w,16)}function Xr(w,L){var G,ee=16;for(G=0;16>G;++G)ee+=w[L-1+32*G]+w[L+G-32];Mn(ee>>5,w,L)}function Qn(w,L){var G,ee=8;for(G=0;16>G;++G)ee+=w[L-1+32*G];Mn(ee>>4,w,L)}function oi(w,L){var G,ee=8;for(G=0;16>G;++G)ee+=w[L+G-32];Mn(ee>>4,w,L)}function Pi(w,L){Mn(128,w,L)}function Sr(w,L,G){return w+2*L+G+2>>2}function ln(w,L){var G,ee=L-32;for(ee=new Uint8Array([Sr(w[ee-1],w[ee+0],w[ee+1]),Sr(w[ee+0],w[ee+1],w[ee+2]),Sr(w[ee+1],w[ee+2],w[ee+3]),Sr(w[ee+2],w[ee+3],w[ee+4])]),G=0;4>G;++G)n(w,L+32*G,ee,0,ee.length)}function Jn(w,L){var G=w[L-1],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1+96];Ct(w,L+0,16843009*Sr(w[L-1-32],G,ee)),Ct(w,L+32,16843009*Sr(G,ee,Ae)),Ct(w,L+64,16843009*Sr(ee,Ae,Ce)),Ct(w,L+96,16843009*Sr(Ae,Ce,Ce))}function Bi(w,L){var G,ee=4;for(G=0;4>G;++G)ee+=w[L+G-32]+w[L-1+32*G];for(ee>>=3,G=0;4>G;++G)s(w,L+32*G,ee,4)}function Ns(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1-32],Ie=w[L+0-32],Ne=w[L+1-32],Me=w[L+2-32],Pe=w[L+3-32];w[L+0+96]=Sr(ee,Ae,w[L-1+96]),w[L+1+96]=w[L+0+64]=Sr(G,ee,Ae),w[L+2+96]=w[L+1+64]=w[L+0+32]=Sr(Ce,G,ee),w[L+3+96]=w[L+2+64]=w[L+1+32]=w[L+0+0]=Sr(Ie,Ce,G),w[L+3+64]=w[L+2+32]=w[L+1+0]=Sr(Ne,Ie,Ce),w[L+3+32]=w[L+2+0]=Sr(Me,Ne,Ie),w[L+3+0]=Sr(Pe,Me,Ne)}function Ks(w,L){var G=w[L+1-32],ee=w[L+2-32],Ae=w[L+3-32],Ce=w[L+4-32],Ie=w[L+5-32],Ne=w[L+6-32],Me=w[L+7-32];w[L+0+0]=Sr(w[L+0-32],G,ee),w[L+1+0]=w[L+0+32]=Sr(G,ee,Ae),w[L+2+0]=w[L+1+32]=w[L+0+64]=Sr(ee,Ae,Ce),w[L+3+0]=w[L+2+32]=w[L+1+64]=w[L+0+96]=Sr(Ae,Ce,Ie),w[L+3+32]=w[L+2+64]=w[L+1+96]=Sr(Ce,Ie,Ne),w[L+3+64]=w[L+2+96]=Sr(Ie,Ne,Me),w[L+3+96]=Sr(Ne,Me,Me)}function Ro(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1-32],Ie=w[L+0-32],Ne=w[L+1-32],Me=w[L+2-32],Pe=w[L+3-32];w[L+0+0]=w[L+1+64]=Ce+Ie+1>>1,w[L+1+0]=w[L+2+64]=Ie+Ne+1>>1,w[L+2+0]=w[L+3+64]=Ne+Me+1>>1,w[L+3+0]=Me+Pe+1>>1,w[L+0+96]=Sr(Ae,ee,G),w[L+0+64]=Sr(ee,G,Ce),w[L+0+32]=w[L+1+96]=Sr(G,Ce,Ie),w[L+1+32]=w[L+2+96]=Sr(Ce,Ie,Ne),w[L+2+32]=w[L+3+96]=Sr(Ie,Ne,Me),w[L+3+32]=Sr(Ne,Me,Pe)}function yn(w,L){var G=w[L+0-32],ee=w[L+1-32],Ae=w[L+2-32],Ce=w[L+3-32],Ie=w[L+4-32],Ne=w[L+5-32],Me=w[L+6-32],Pe=w[L+7-32];w[L+0+0]=G+ee+1>>1,w[L+1+0]=w[L+0+64]=ee+Ae+1>>1,w[L+2+0]=w[L+1+64]=Ae+Ce+1>>1,w[L+3+0]=w[L+2+64]=Ce+Ie+1>>1,w[L+0+32]=Sr(G,ee,Ae),w[L+1+32]=w[L+0+96]=Sr(ee,Ae,Ce),w[L+2+32]=w[L+1+96]=Sr(Ae,Ce,Ie),w[L+3+32]=w[L+2+96]=Sr(Ce,Ie,Ne),w[L+3+64]=Sr(Ie,Ne,Me),w[L+3+96]=Sr(Ne,Me,Pe)}function Yn(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1+96];w[L+0+0]=G+ee+1>>1,w[L+2+0]=w[L+0+32]=ee+Ae+1>>1,w[L+2+32]=w[L+0+64]=Ae+Ce+1>>1,w[L+1+0]=Sr(G,ee,Ae),w[L+3+0]=w[L+1+32]=Sr(ee,Ae,Ce),w[L+3+32]=w[L+1+64]=Sr(Ae,Ce,Ce),w[L+3+64]=w[L+2+64]=w[L+0+96]=w[L+1+96]=w[L+2+96]=w[L+3+96]=Ce}function Li(w,L){var G=w[L-1+0],ee=w[L-1+32],Ae=w[L-1+64],Ce=w[L-1+96],Ie=w[L-1-32],Ne=w[L+0-32],Me=w[L+1-32],Pe=w[L+2-32];w[L+0+0]=w[L+2+32]=G+Ie+1>>1,w[L+0+32]=w[L+2+64]=ee+G+1>>1,w[L+0+64]=w[L+2+96]=Ae+ee+1>>1,w[L+0+96]=Ce+Ae+1>>1,w[L+3+0]=Sr(Ne,Me,Pe),w[L+2+0]=Sr(Ie,Ne,Me),w[L+1+0]=w[L+3+32]=Sr(G,Ie,Ne),w[L+1+32]=w[L+3+64]=Sr(ee,G,Ie),w[L+1+64]=w[L+3+96]=Sr(Ae,ee,G),w[L+1+96]=Sr(Ce,Ae,ee)}function da(w,L){var G;for(G=0;8>G;++G)n(w,L+32*G,w,L-32,8)}function Ms(w,L){var G;for(G=0;8>G;++G)s(w,L,w[L-1],8),L+=32}function fi(w,L,G){var ee;for(ee=0;8>ee;++ee)s(L,G+32*ee,w,8)}function Po(w,L){var G,ee=8;for(G=0;8>G;++G)ee+=w[L+G-32]+w[L-1+32*G];fi(ee>>4,w,L)}function zl(w,L){var G,ee=4;for(G=0;8>G;++G)ee+=w[L+G-32];fi(ee>>3,w,L)}function oa(w,L){var G,ee=4;for(G=0;8>G;++G)ee+=w[L-1+32*G];fi(ee>>3,w,L)}function yo(w,L){fi(128,w,L)}function ps(w,L,G){var ee=w[L-G],Ae=w[L+0],Ce=3*(Ae-ee)+Mc[1020+w[L-2*G]-w[L+G]],Ie=lc[112+(Ce+4>>3)];w[L-G]=so[255+ee+lc[112+(Ce+3>>3)]],w[L+0]=so[255+Ae-Ie]}function $c(w,L,G,ee){var Ae=w[L+0],Ce=w[L+G];return zs[255+w[L-2*G]-w[L-G]]>ee||zs[255+Ce-Ae]>ee}function Ql(w,L,G,ee){return 4*zs[255+w[L-G]-w[L+0]]+zs[255+w[L-2*G]-w[L+G]]<=ee}function Hl(w,L,G,ee,Ae){var Ce=w[L-3*G],Ie=w[L-2*G],Ne=w[L-G],Me=w[L+0],Pe=w[L+G],lt=w[L+2*G],Lt=w[L+3*G];return 4*zs[255+Ne-Me]+zs[255+Ie-Pe]>ee?0:zs[255+w[L-4*G]-Ce]<=Ae&&zs[255+Ce-Ie]<=Ae&&zs[255+Ie-Ne]<=Ae&&zs[255+Lt-lt]<=Ae&&zs[255+lt-Pe]<=Ae&&zs[255+Pe-Me]<=Ae}function Ma(w,L,G,ee){var Ae=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,L+ee,G,Ae)&&ps(w,L+ee,G)}function qo(w,L,G,ee){var Ae=2*ee+1;for(ee=0;16>ee;++ee)Ql(w,L+ee*G,1,Ae)&&ps(w,L+ee*G,1)}function Xs(w,L,G,ee){var Ae;for(Ae=3;0<Ae;--Ae)Ma(w,L+=4*G,G,ee)}function Bo(w,L,G,ee){var Ae;for(Ae=3;0<Ae;--Ae)qo(w,L+=4,G,ee)}function Ys(w,L,G,ee,Ae,Ce,Ie,Ne){for(Ce=2*Ce+1;0<Ae--;){if(Hl(w,L,G,Ce,Ie))if($c(w,L,G,Ne))ps(w,L,G);else{var Me=w,Pe=L,lt=G,Lt=Me[Pe-2*lt],Bt=Me[Pe-lt],xt=Me[Pe+0],Pt=Me[Pe+lt],Qt=Me[Pe+2*lt],ct=27*(cr=Mc[1020+3*(xt-Bt)+Mc[1020+Lt-Pt]])+63>>7,mt=18*cr+63>>7,cr=9*cr+63>>7;Me[Pe-3*lt]=so[255+Me[Pe-3*lt]+cr],Me[Pe-2*lt]=so[255+Lt+mt],Me[Pe-lt]=so[255+Bt+ct],Me[Pe+0]=so[255+xt-ct],Me[Pe+lt]=so[255+Pt-mt],Me[Pe+2*lt]=so[255+Qt-cr]}L+=ee}}function vo(w,L,G,ee,Ae,Ce,Ie,Ne){for(Ce=2*Ce+1;0<Ae--;){if(Hl(w,L,G,Ce,Ie))if($c(w,L,G,Ne))ps(w,L,G);else{var Me=w,Pe=L,lt=G,Lt=Me[Pe-lt],Bt=Me[Pe+0],xt=Me[Pe+lt],Pt=lc[112+((Qt=3*(Bt-Lt))+4>>3)],Qt=lc[112+(Qt+3>>3)],ct=Pt+1>>1;Me[Pe-2*lt]=so[255+Me[Pe-2*lt]+ct],Me[Pe-lt]=so[255+Lt+Qt],Me[Pe+0]=so[255+Bt-Pt],Me[Pe+lt]=so[255+xt-ct]}L+=ee}}function fa(w,L,G,ee,Ae,Ce){Ys(w,L,G,1,16,ee,Ae,Ce)}function xs(w,L,G,ee,Ae,Ce){Ys(w,L,1,G,16,ee,Ae,Ce)}function no(w,L,G,ee,Ae,Ce){var Ie;for(Ie=3;0<Ie;--Ie)vo(w,L+=4*G,G,1,16,ee,Ae,Ce)}function $o(w,L,G,ee,Ae,Ce){var Ie;for(Ie=3;0<Ie;--Ie)vo(w,L+=4,1,G,16,ee,Ae,Ce)}function Eo(w,L,G,ee,Ae,Ce,Ie,Ne){Ys(w,L,Ae,1,8,Ce,Ie,Ne),Ys(G,ee,Ae,1,8,Ce,Ie,Ne)}function ic(w,L,G,ee,Ae,Ce,Ie,Ne){Ys(w,L,1,Ae,8,Ce,Ie,Ne),Ys(G,ee,1,Ae,8,Ce,Ie,Ne)}function aa(w,L,G,ee,Ae,Ce,Ie,Ne){vo(w,L+4*Ae,Ae,1,8,Ce,Ie,Ne),vo(G,ee+4*Ae,Ae,1,8,Ce,Ie,Ne)}function rl(w,L,G,ee,Ae,Ce,Ie,Ne){vo(w,L+4,1,Ae,8,Ce,Ie,Ne),vo(G,ee+4,1,Ae,8,Ce,Ie,Ne)}function Uo(){this.ba=new xi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Zr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Va(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wo(){this.ua=0,this.Wa=new Re,this.vb=new Re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new _e,this.yc=new Y}function yu(){this.xb=this.a=0,this.l=new sa,this.ca=new xi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wo,this.ab=0,this.gc=c(4,Vl),this.Oc=0}function pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xo(w,L,G,ee,Ae,Ce,Ie){for(w=w==null?0:w[L+0],L=0;L<Ie;++L)Ae[Ce+L]=w+G[ee+L]&255,w=Ae[Ce+L]}function Gl(w,L,G,ee,Ae,Ce,Ie){var Ne;if(w==null)xo(null,null,G,ee,Ae,Ce,Ie);else for(Ne=0;Ne<Ie;++Ne)Ae[Ce+Ne]=w[L+Ne]+G[ee+Ne]&255}function _o(w,L,G,ee,Ae,Ce,Ie){if(w==null)xo(null,null,G,ee,Ae,Ce,Ie);else{var Ne,Me=w[L+0],Pe=Me,lt=Me;for(Ne=0;Ne<Ie;++Ne)Pe=lt+(Me=w[L+Ne])-Pe,lt=G[ee+Ne]+(-256&Pe?0>Pe?0:255:Pe)&255,Pe=Me,Ae[Ce+Ne]=lt}}function ql(w,L,G,ee){var Ae=L.width,Ce=L.o;if(e(w!=null&&L!=null),0>G||0>=ee||G+ee>Ce)return null;if(!w.Cc){if(w.ga==null){var Ie;if(w.ga=new pa,(Ie=w.ga==null)||(Ie=L.width*L.o,e(w.Gb.length==0),w.Gb=o(Ie),w.Uc=0,w.Gb==null?Ie=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=w.ga;var Ne=w.Fa,Me=w.P,Pe=w.qc,lt=w.mb,Lt=w.nb,Bt=Me+1,xt=Pe-1,Pt=Ie.l;if(e(Ne!=null&&lt!=null&&L!=null),Ta[0]=null,Ta[1]=xo,Ta[2]=Gl,Ta[3]=_o,Ie.ca=lt,Ie.tb=Lt,Ie.c=L.width,Ie.i=L.height,e(0<Ie.c&&0<Ie.i),1>=Pe)L=0;else if(Ie.$a=Ne[Me+0]>>0&3,Ie.Z=Ne[Me+0]>>2&3,Ie.Lc=Ne[Me+0]>>4&3,Me=Ne[Me+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Me)L=0;else if(Pt.put=ir,Pt.ac=Hn,Pt.bc=We,Pt.ma=Ie,Pt.width=L.width,Pt.height=L.height,Pt.Da=L.Da,Pt.v=L.v,Pt.va=L.va,Pt.j=L.j,Pt.o=L.o,Ie.$a)e:{e(Ie.$a==1),L=_n();t:for(;;){if(L==null){L=0;break e}if(e(Ie!=null),Ie.mc=L,L.c=Ie.c,L.i=Ie.i,L.l=Ie.l,L.l.ma=Ie,L.l.width=Ie.c,L.l.height=Ie.i,L.a=0,xe(L.m,Ne,Bt,xt),!Dn(Ie.c,Ie.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&xr(L.s)?(Ie.ic=1,Ne=L.c*L.i,L.Ta=null,L.Ua=0,L.V=o(Ne),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(Ie.ic=0,L=qn(L,Ie.c)),!L))break t;L=1;break e}Ie.mc=null,L=0}else L=xt>=Ie.c*Ie.i;Ie=!L}if(Ie)return null;w.ga.Lc!=1?w.Ga=0:ee=Ce-G}e(w.ga!=null),e(G+ee<=Ce);e:{if(L=(Ne=w.ga).c,Ce=Ne.l.o,Ne.$a==0){if(Bt=w.rc,xt=w.Vc,Pt=w.Fa,Me=w.P+1+G*L,Pe=w.mb,lt=w.nb+G*L,e(Me<=w.P+w.qc),Ne.Z!=0)for(e(Ta[Ne.Z]!=null),Ie=0;Ie<ee;++Ie)Ta[Ne.Z](Bt,xt,Pt,Me,Pe,lt,L),Bt=Pe,xt=lt,lt+=L,Me+=L;else for(Ie=0;Ie<ee;++Ie)n(Pe,lt,Pt,Me,L),Bt=Pe,xt=lt,lt+=L,Me+=L;w.rc=Bt,w.Vc=xt}else{if(e(Ne.mc!=null),L=G+ee,e((Ie=Ne.mc)!=null),e(L<=Ie.i),Ie.C>=L)L=1;else if(Ne.ic||St(),Ne.ic){Ne=Ie.V,Bt=Ie.Ba,xt=Ie.c;var Qt=Ie.i,ct=(Pt=1,Me=Ie.$/xt,Pe=Ie.$%xt,lt=Ie.m,Lt=Ie.s,Ie.$),mt=xt*Qt,cr=xt*L,mr=Lt.wc,dr=ct<cr?Wt(Lt,Pe,Me):null;e(ct<=mt),e(L<=Qt),e(xr(Lt));t:for(;;){for(;!lt.h&&ct<cr;){if(Pe&mr||(dr=Wt(Lt,Pe,Me)),e(dr!=null),He(lt),256>(Qt=wt(dr.G[0],dr.H[0],lt)))Ne[Bt+ct]=Qt,++ct,++Pe>=xt&&(Pe=0,++Me<=L&&!(Me%16)&&Tr(Ie,Me));else{if(!(280>Qt)){Pt=0;break t}Qt=ht(Qt-256,lt);var Yr,Or=wt(dr.G[4],dr.H[4],lt);if(He(lt),!(ct>=(Or=It(xt,Or=ht(Or,lt)))&&mt-ct>=Qt)){Pt=0;break t}for(Yr=0;Yr<Qt;++Yr)Ne[Bt+ct+Yr]=Ne[Bt+ct+Yr-Or];for(ct+=Qt,Pe+=Qt;Pe>=xt;)Pe-=xt,++Me<=L&&!(Me%16)&&Tr(Ie,Me);ct<cr&&Pe&mr&&(dr=Wt(Lt,Pe,Me))}e(lt.h==fe(lt))}Tr(Ie,Me>L?L:Me);break t}!Pt||lt.h&&ct<mt?(Pt=0,Ie.a=lt.h?5:3):Ie.$=ct,L=Pt}else L=nn(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,L,$n);if(!L){ee=0;break e}}G+ee>=Ce&&(w.Cc=1),ee=1}if(!ee)return null;if(w.Cc&&((ee=w.ga)!=null&&(ee.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+G*Ae}function k(w,L,G,ee,Ae,Ce){for(;0<Ae--;){var Ie,Ne=w,Me=L+(G?1:0),Pe=w,lt=L+(G?0:3);for(Ie=0;Ie<ee;++Ie){var Lt=Pe[lt+4*Ie];Lt!=255&&(Lt*=32897,Ne[Me+4*Ie+0]=Ne[Me+4*Ie+0]*Lt>>23,Ne[Me+4*Ie+1]=Ne[Me+4*Ie+1]*Lt>>23,Ne[Me+4*Ie+2]=Ne[Me+4*Ie+2]*Lt>>23)}L+=Ce}}function pe(w,L,G,ee,Ae){for(;0<ee--;){var Ce;for(Ce=0;Ce<G;++Ce){var Ie=w[L+2*Ce+0],Ne=15&(Pe=w[L+2*Ce+1]),Me=4369*Ne,Pe=(240&Pe|Pe>>4)*Me>>16;w[L+2*Ce+0]=(240&Ie|Ie>>4)*Me>>16&240|(15&Ie|Ie<<4)*Me>>16>>4&15,w[L+2*Ce+1]=240&Pe|Ne}L+=Ae}}function Ke(w,L,G,ee,Ae,Ce,Ie,Ne){var Me,Pe,lt=255;for(Pe=0;Pe<Ae;++Pe){for(Me=0;Me<ee;++Me){var Lt=w[L+Me];Ce[Ie+4*Me]=Lt,lt&=Lt}L+=G,Ie+=Ne}return lt!=255}function ot(w,L,G,ee,Ae){var Ce;for(Ce=0;Ce<Ae;++Ce)G[ee+Ce]=w[L+Ce]>>8}function St(){eo=k,ws=pe,Yi=Ke,ai=ot}function $t(w,L,G){K[w]=function(ee,Ae,Ce,Ie,Ne,Me,Pe,lt,Lt,Bt,xt,Pt,Qt,ct,mt,cr,mr){var dr,Yr=mr-1>>1,Or=Ne[Me+0]|Pe[lt+0]<<16,bn=Lt[Bt+0]|xt[Pt+0]<<16;e(ee!=null);var zr=3*Or+bn+131074>>2;for(L(ee[Ae+0],255&zr,zr>>16,Qt,ct),Ce!=null&&(zr=3*bn+Or+131074>>2,L(Ce[Ie+0],255&zr,zr>>16,mt,cr)),dr=1;dr<=Yr;++dr){var ui=Ne[Me+dr]|Pe[lt+dr]<<16,pi=Lt[Bt+dr]|xt[Pt+dr]<<16,Vn=Or+ui+bn+pi+524296,ei=Vn+2*(ui+bn)>>3;zr=ei+Or>>1,Or=(Vn=Vn+2*(Or+pi)>>3)+ui>>1,L(ee[Ae+2*dr-1],255&zr,zr>>16,Qt,ct+(2*dr-1)*G),L(ee[Ae+2*dr-0],255&Or,Or>>16,Qt,ct+(2*dr-0)*G),Ce!=null&&(zr=Vn+bn>>1,Or=ei+pi>>1,L(Ce[Ie+2*dr-1],255&zr,zr>>16,mt,cr+(2*dr-1)*G),L(Ce[Ie+2*dr+0],255&Or,Or>>16,mt,cr+(2*dr+0)*G)),Or=ui,bn=pi}1&mr||(zr=3*Or+bn+131074>>2,L(ee[Ae+mr-1],255&zr,zr>>16,Qt,ct+(mr-1)*G),Ce!=null&&(zr=3*bn+Or+131074>>2,L(Ce[Ie+mr-1],255&zr,zr>>16,mt,cr+(mr-1)*G)))}}function gr(){co[cc]=nt,co[jc]=ke,co[vu]=ge,co[Sc]=rt,co[nu]=Kt,co[rh]=Qr,co[Zh]=Kn,co[nh]=ke,co[bh]=rt,co[xu]=Kt,co[Jh]=Qr}function $r(w){return w&~Pp?0>w?0:255:w>>Kf}function An(w,L){return $r((19077*w>>8)+(26149*L>>8)-14234)}function Tn(w,L,G){return $r((19077*w>>8)-(6419*L>>8)-(13320*G>>8)+8708)}function Wr(w,L){return $r((19077*w>>8)+(33050*L>>8)-17685)}function Dr(w,L,G,ee,Ae){ee[Ae+0]=An(w,G),ee[Ae+1]=Tn(w,L,G),ee[Ae+2]=Wr(w,L)}function Ci(w,L,G,ee,Ae){ee[Ae+0]=Wr(w,L),ee[Ae+1]=Tn(w,L,G),ee[Ae+2]=An(w,G)}function gn(w,L,G,ee,Ae){var Ce=Tn(w,L,G);L=Ce<<3&224|Wr(w,L)>>3,ee[Ae+0]=248&An(w,G)|Ce>>5,ee[Ae+1]=L}function Fi(w,L,G,ee,Ae){var Ce=240&Wr(w,L)|15;ee[Ae+0]=240&An(w,G)|Tn(w,L,G)>>4,ee[Ae+1]=Ce}function _s(w,L,G,ee,Ae){ee[Ae+0]=255,Dr(w,L,G,ee,Ae+1)}function vn(w,L,G,ee,Ae){Ci(w,L,G,ee,Ae),ee[Ae+3]=255}function ao(w,L,G,ee,Ae){Dr(w,L,G,ee,Ae),ee[Ae+3]=255}function Zs(w,L){return 0>w?0:w>L?L:w}function Yo(w,L,G){K[w]=function(ee,Ae,Ce,Ie,Ne,Me,Pe,lt,Lt){for(var Bt=lt+(-2&Lt)*G;lt!=Bt;)L(ee[Ae+0],Ce[Ie+0],Ne[Me+0],Pe,lt),L(ee[Ae+1],Ce[Ie+0],Ne[Me+0],Pe,lt+G),Ae+=2,++Ie,++Me,lt+=2*G;1&Lt&&L(ee[Ae+0],Ce[Ie+0],Ne[Me+0],Pe,lt)}}function nl(w,L,G){return G==0?w==0?L==0?6:5:L==0?4:0:G}function il(w,L,G,ee,Ae){switch(w>>>30){case 3:bo(L,G,ee,Ae,0);break;case 2:Xi(L,G,ee,Ae);break;case 1:Ss(L,G,ee,Ae)}}function io(w,L){var G,ee,Ae=L.M,Ce=L.Nb,Ie=w.oc,Ne=w.pc+40,Me=w.oc,Pe=w.pc+584,lt=w.oc,Lt=w.pc+600;for(G=0;16>G;++G)Ie[Ne+32*G-1]=129;for(G=0;8>G;++G)Me[Pe+32*G-1]=129,lt[Lt+32*G-1]=129;for(0<Ae?Ie[Ne-1-32]=Me[Pe-1-32]=lt[Lt-1-32]=129:(s(Ie,Ne-32-1,127,21),s(Me,Pe-32-1,127,9),s(lt,Lt-32-1,127,9)),ee=0;ee<w.za;++ee){var Bt=L.ya[L.aa+ee];if(0<ee){for(G=-1;16>G;++G)n(Ie,Ne+32*G-4,Ie,Ne+32*G+12,4);for(G=-1;8>G;++G)n(Me,Pe+32*G-4,Me,Pe+32*G+4,4),n(lt,Lt+32*G-4,lt,Lt+32*G+4,4)}var xt=w.Gd,Pt=w.Hd+ee,Qt=Bt.ad,ct=Bt.Hc;if(0<Ae&&(n(Ie,Ne-32,xt[Pt].y,0,16),n(Me,Pe-32,xt[Pt].f,0,8),n(lt,Lt-32,xt[Pt].ea,0,8)),Bt.Za){var mt=Ie,cr=Ne-32+16;for(0<Ae&&(ee>=w.za-1?s(mt,cr,xt[Pt].y[15],4):n(mt,cr,xt[Pt+1].y,0,4)),G=0;4>G;G++)mt[cr+128+G]=mt[cr+256+G]=mt[cr+384+G]=mt[cr+0+G];for(G=0;16>G;++G,ct<<=2)mt=Ie,cr=Ne+Mp[G],Mo[Bt.Ob[G]](mt,cr),il(ct,Qt,16*+G,mt,cr)}else if(mt=nl(ee,Ae,Bt.Ob[0]),vl[mt](Ie,Ne),ct!=0)for(G=0;16>G;++G,ct<<=2)il(ct,Qt,16*+G,Ie,Ne+Mp[G]);for(G=Bt.Gc,mt=nl(ee,Ae,Bt.Dd),$a[mt](Me,Pe),$a[mt](lt,Lt),ct=Qt,mt=Me,cr=Pe,255&(Bt=G>>0)&&(170&Bt?ks(ct,256,mt,cr):Us(ct,256,mt,cr)),Bt=lt,ct=Lt,255&(G>>=8)&&(170&G?ks(Qt,320,Bt,ct):Us(Qt,320,Bt,ct)),Ae<w.Ub-1&&(n(xt[Pt].y,0,Ie,Ne+480,16),n(xt[Pt].f,0,Me,Pe+224,8),n(xt[Pt].ea,0,lt,Lt+224,8)),G=8*Ce*w.B,xt=w.sa,Pt=w.ta+16*ee+16*Ce*w.R,Qt=w.qa,Bt=w.ra+8*ee+G,ct=w.Ha,mt=w.Ia+8*ee+G,G=0;16>G;++G)n(xt,Pt+G*w.R,Ie,Ne+32*G,16);for(G=0;8>G;++G)n(Qt,Bt+G*w.B,Me,Pe+32*G,8),n(ct,mt+G*w.B,lt,Lt+32*G,8)}}function Ga(w,L,G,ee,Ae,Ce,Ie,Ne,Me){var Pe=[0],lt=[0],Lt=0,Bt=Me!=null?Me.kd:0,xt=Me??new Va;if(w==null||12>G)return 7;xt.data=w,xt.w=L,xt.ha=G,L=[L],G=[G],xt.gb=[xt.gb];e:{var Pt=L,Qt=G,ct=xt.gb;if(e(w!=null),e(Qt!=null),e(ct!=null),ct[0]=0,12<=Qt[0]&&!r(w,Pt[0],"RIFF")){if(r(w,Pt[0]+8,"WEBP")){ct=3;break e}var mt=Zt(w,Pt[0]+4);if(12>mt||4294967286<mt){ct=3;break e}if(Bt&&mt>Qt[0]-8){ct=7;break e}ct[0]=mt,Pt[0]+=12,Qt[0]-=12}ct=0}if(ct!=0)return ct;for(mt=0<xt.gb[0],G=G[0];;){e:{var cr=w;Qt=L,ct=G;var mr=Pe,dr=lt,Yr=Pt=[0];if((zr=Lt=[Lt])[0]=0,8>ct[0])ct=7;else{if(!r(cr,Qt[0],"VP8X")){if(Zt(cr,Qt[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var Or=Zt(cr,Qt[0]+8),bn=1+Ft(cr,Qt[0]+12);if(2147483648<=bn*(cr=1+Ft(cr,Qt[0]+15))){ct=3;break e}Yr!=null&&(Yr[0]=Or),mr!=null&&(mr[0]=bn),dr!=null&&(dr[0]=cr),Qt[0]+=18,ct[0]-=18,zr[0]=1}ct=0}}if(Lt=Lt[0],Pt=Pt[0],ct!=0)return ct;if(Qt=!!(2&Pt),!mt&&Lt)return 3;if(Ce!=null&&(Ce[0]=!!(16&Pt)),Ie!=null&&(Ie[0]=Qt),Ne!=null&&(Ne[0]=0),Ie=Pe[0],Pt=lt[0],Lt&&Qt&&Me==null){ct=0;break}if(4>G){ct=7;break}if(mt&&Lt||!mt&&!Lt&&!r(w,L[0],"ALPH")){G=[G],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Or=w,ct=L,mt=G;var zr=xt.gb;mr=xt.na,dr=xt.P,Yr=xt.Sa,bn=22,e(Or!=null),e(mt!=null),cr=ct[0];var ui=mt[0];for(e(mr!=null),e(Yr!=null),mr[0]=null,dr[0]=null,Yr[0]=0;;){if(ct[0]=cr,mt[0]=ui,8>ui){ct=7;break e}var pi=Zt(Or,cr+4);if(4294967286<pi){ct=3;break e}var Vn=8+pi+1&-2;if(bn+=Vn,0<zr&&bn>zr){ct=3;break e}if(!r(Or,cr,"VP8 ")||!r(Or,cr,"VP8L")){ct=0;break e}if(ui[0]<Vn){ct=7;break e}r(Or,cr,"ALPH")||(mr[0]=Or,dr[0]=cr+8,Yr[0]=pi),cr+=Vn,ui-=Vn}}if(G=G[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],ct!=0)break}G=[G],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(zr=w,ct=L,mt=G,mr=xt.gb[0],dr=xt.Ja,Yr=xt.xa,Or=ct[0],cr=!r(zr,Or,"VP8 "),bn=!r(zr,Or,"VP8L"),e(zr!=null),e(mt!=null),e(dr!=null),e(Yr!=null),8>mt[0])ct=7;else{if(cr||bn){if(zr=Zt(zr,Or+4),12<=mr&&zr>mr-12){ct=3;break e}if(Bt&&zr>mt[0]-8){ct=7;break e}dr[0]=zr,ct[0]+=8,mt[0]-=8,Yr[0]=bn}else Yr[0]=5<=mt[0]&&zr[Or+0]==47&&!(zr[Or+4]>>5),dr[0]=mt[0];ct=0}if(G=G[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],L=L[0],ct!=0)break;if(4294967286<xt.Ja)return 3;if(Ne==null||Qt||(Ne[0]=xt.xa?2:1),Ie=[Ie],Pt=[Pt],xt.xa){if(5>G){ct=7;break}Ne=Ie,Bt=Pt,Qt=Ce,w==null||5>G?w=0:5<=G&&w[L+0]==47&&!(w[L+4]>>5)?(mt=[0],zr=[0],mr=[0],xe(dr=new ie,w,L,G),qe(dr,mt,zr,mr)?(Ne!=null&&(Ne[0]=mt[0]),Bt!=null&&(Bt[0]=zr[0]),Qt!=null&&(Qt[0]=mr[0]),w=1):w=0):w=0}else{if(10>G){ct=7;break}Ne=Pt,w==null||10>G||!Fc(w,L+3,G-3)?w=0:(Bt=w[L+0]|w[L+1]<<8|w[L+2]<<16,Qt=16383&(w[L+7]<<8|w[L+6]),w=16383&(w[L+9]<<8|w[L+8]),1&Bt||3<(Bt>>1&7)||!(Bt>>4&1)||Bt>>5>=xt.Ja||!Qt||!w?w=0:(Ie&&(Ie[0]=Qt),Ne&&(Ne[0]=w),w=1))}if(!w||(Ie=Ie[0],Pt=Pt[0],Lt&&(Pe[0]!=Ie||lt[0]!=Pt)))return 3;Me!=null&&(Me[0]=xt,Me.offset=L-Me.w,e(4294967286>L-Me.w),e(Me.offset==Me.ha-G));break}return ct==0||ct==7&&Lt&&Me==null?(Ce!=null&&(Ce[0]|=xt.na!=null&&0<xt.na.length),ee!=null&&(ee[0]=Ie),Ae!=null&&(Ae[0]=Pt),0):ct}function Ea(w,L,G){var ee=L.width,Ae=L.height,Ce=0,Ie=0,Ne=ee,Me=Ae;if(L.Da=w!=null&&0<w.Da,L.Da&&(Ne=w.cd,Me=w.bd,Ce=w.v,Ie=w.j,11>G||(Ce&=-2,Ie&=-2),0>Ce||0>Ie||0>=Ne||0>=Me||Ce+Ne>ee||Ie+Me>Ae))return 0;if(L.v=Ce,L.j=Ie,L.va=Ce+Ne,L.o=Ie+Me,L.U=Ne,L.T=Me,L.da=w!=null&&0<w.da,L.da){if(!hr(Ne,Me,G=[w.ib],Ce=[w.hb]))return 0;L.ib=G[0],L.hb=Ce[0]}return L.ob=w!=null&&w.ob,L.Kb=w==null||!w.Sd,L.da&&(L.ob=L.ib<3*ee/4&&L.hb<3*Ae/4,L.Kb=0),1}function Zo(w){if(w==null)return 2;if(11>w.S){var L=w.f.RGBA;L.fb+=(w.height-1)*L.A,L.A=-L.A}else L=w.f.kb,w=w.height,L.O+=(w-1)*L.fa,L.fa=-L.fa,L.N+=(w-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(w-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(w-1)*L.lb,L.lb=-L.lb);return 0}function ja(w,L,G,ee){if(ee==null||0>=w||0>=L)return 2;if(G!=null){if(G.Da){var Ae=G.cd,Ce=G.bd,Ie=-2&G.v,Ne=-2&G.j;if(0>Ie||0>Ne||0>=Ae||0>=Ce||Ie+Ae>w||Ne+Ce>L)return 2;w=Ae,L=Ce}if(G.da){if(!hr(w,L,Ae=[G.ib],Ce=[G.hb]))return 2;w=Ae[0],L=Ce[0]}}ee.width=w,ee.height=L;e:{var Me=ee.width,Pe=ee.height;if(w=ee.S,0>=Me||0>=Pe||!(w>=cc&&13>w))w=2;else{if(0>=ee.Rd&&ee.sd==null){Ie=Ce=Ae=L=0;var lt=(Ne=Me*af[w])*Pe;if(11>w||(Ce=(Pe+1)/2*(L=(Me+1)/2),w==12&&(Ie=(Ae=Me)*Pe)),(Pe=o(lt+2*Ce+Ie))==null){w=1;break e}ee.sd=Pe,11>w?((Me=ee.f.RGBA).eb=Pe,Me.fb=0,Me.A=Ne,Me.size=lt):((Me=ee.f.kb).y=Pe,Me.O=0,Me.fa=Ne,Me.Fd=lt,Me.f=Pe,Me.N=0+lt,Me.Ab=L,Me.Cd=Ce,Me.ea=Pe,Me.W=0+lt+Ce,Me.Db=L,Me.Ed=Ce,w==12&&(Me.F=Pe,Me.J=0+lt+2*Ce),Me.Tc=Ie,Me.lb=Ae)}if(L=1,Ae=ee.S,Ce=ee.width,Ie=ee.height,Ae>=cc&&13>Ae)if(11>Ae)w=ee.f.RGBA,L&=(Ne=Math.abs(w.A))*(Ie-1)+Ce<=w.size,L&=Ne>=Ce*af[Ae],L&=w.eb!=null;else{w=ee.f.kb,Ne=(Ce+1)/2,lt=(Ie+1)/2,Me=Math.abs(w.fa),Pe=Math.abs(w.Ab);var Lt=Math.abs(w.Db),Bt=Math.abs(w.lb),xt=Bt*(Ie-1)+Ce;L&=Me*(Ie-1)+Ce<=w.Fd,L&=Pe*(lt-1)+Ne<=w.Cd,L=(L&=Lt*(lt-1)+Ne<=w.Ed)&Me>=Ce&Pe>=Ne&Lt>=Ne,L&=w.y!=null,L&=w.f!=null,L&=w.ea!=null,Ae==12&&(L&=Bt>=Ce,L&=xt<=w.Tc,L&=w.F!=null)}else L=0;w=L?0:2}}return w!=0||G!=null&&G.fd&&(w=Zo(ee)),w}var $i=64,cs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],la=24,Jr=32,sc=8,bs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Yt("Predictor0","PredictorAdd0"),K.Predictor0=function(){return 4278190080},K.Predictor1=function(w){return w},K.Predictor2=function(w,L,G){return L[G+0]},K.Predictor3=function(w,L,G){return L[G+1]},K.Predictor4=function(w,L,G){return L[G-1]},K.Predictor5=function(w,L,G){return nr(nr(w,L[G+1]),L[G+0])},K.Predictor6=function(w,L,G){return nr(w,L[G-1])},K.Predictor7=function(w,L,G){return nr(w,L[G+0])},K.Predictor8=function(w,L,G){return nr(L[G-1],L[G+0])},K.Predictor9=function(w,L,G){return nr(L[G+0],L[G+1])},K.Predictor10=function(w,L,G){return nr(nr(w,L[G-1]),nr(L[G+0],L[G+1]))},K.Predictor11=function(w,L,G){var ee=L[G+0];return 0>=Ir(ee>>24&255,w>>24&255,(L=L[G-1])>>24&255)+Ir(ee>>16&255,w>>16&255,L>>16&255)+Ir(ee>>8&255,w>>8&255,L>>8&255)+Ir(255&ee,255&w,255&L)?ee:w},K.Predictor12=function(w,L,G){var ee=L[G+0];return(Fr((w>>24&255)+(ee>>24&255)-((L=L[G-1])>>24&255))<<24|Fr((w>>16&255)+(ee>>16&255)-(L>>16&255))<<16|Fr((w>>8&255)+(ee>>8&255)-(L>>8&255))<<8|Fr((255&w)+(255&ee)-(255&L)))>>>0},K.Predictor13=function(w,L,G){var ee=L[G-1];return(Gr((w=nr(w,L[G+0]))>>24&255,ee>>24&255)<<24|Gr(w>>16&255,ee>>16&255)<<16|Gr(w>>8&255,ee>>8&255)<<8|Gr(w>>0&255,ee>>0&255))>>>0};var oc=K.PredictorAdd0;K.PredictorAdd1=cn,Yt("Predictor2","PredictorAdd2"),Yt("Predictor3","PredictorAdd3"),Yt("Predictor4","PredictorAdd4"),Yt("Predictor5","PredictorAdd5"),Yt("Predictor6","PredictorAdd6"),Yt("Predictor7","PredictorAdd7"),Yt("Predictor8","PredictorAdd8"),Yt("Predictor9","PredictorAdd9"),Yt("Predictor10","PredictorAdd10"),Yt("Predictor11","PredictorAdd11"),Yt("Predictor12","PredictorAdd12"),Yt("Predictor13","PredictorAdd13");var yl=K.PredictorAdd2;lr("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),lr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var $l,js=K.ColorIndexInverseTransform,Jo=K.MapARGB,Aa=K.VP8LColorIndexInverseTransformAlpha,Pc=K.MapAlpha,yr=K.VP8LPredictorsAdd=[];yr.length=16,(K.VP8LPredictors=[]).length=16,(K.VP8LPredictorsAdd_C=[]).length=16,(K.VP8LPredictors_C=[]).length=16;var jr,xn,jn,ts,bi,As,us,bo,Xi,ks,Ss,Us,Js,ea,ma,ta,ra,Gs,ga,hs,ss,In,gi,lo,eo,ws,Yi,ai,qs=o(511),sl=o(2041),ac=o(225),ol=o(767),qa=0,Mc=sl,lc=ac,so=ol,zs=qs,cc=0,jc=1,vu=2,Sc=3,nu=4,rh=5,Zh=6,nh=7,bh=8,xu=9,Jh=10,kc=[2,3,7],wh=[3,3,11],vd=[280,256,256,256,40],Wl=[0,1,1,1,0],nf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_d=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bd=8,ih=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],_u=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Dc=null,Kl=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ch=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Np=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$f=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vl=[],Mo=[],$a=[],Wf=1,Sh=2,Ta=[],co=[];$t("UpsampleRgbLinePair",Dr,3),$t("UpsampleBgrLinePair",Ci,3),$t("UpsampleRgbaLinePair",ao,4),$t("UpsampleBgraLinePair",vn,4),$t("UpsampleArgbLinePair",_s,4),$t("UpsampleRgba4444LinePair",Fi,2),$t("UpsampleRgb565LinePair",gn,2);var nt=K.UpsampleRgbLinePair,ge=K.UpsampleBgrLinePair,ke=K.UpsampleRgbaLinePair,rt=K.UpsampleBgraLinePair,Kt=K.UpsampleArgbLinePair,Qr=K.UpsampleRgba4444LinePair,Kn=K.UpsampleRgb565LinePair,Ei=16,ki=1<<Ei-1,Qs=-227,Oc=482,Kf=6,Pp=(256<<Kf)-1,wd=0,_A=o(256),bA=o(256),sf=o(256),ag=o(256),wA=o(Oc-Qs),CA=o(Oc-Qs);Yo("YuvToRgbRow",Dr,3),Yo("YuvToBgrRow",Ci,3),Yo("YuvToRgbaRow",ao,4),Yo("YuvToBgraRow",vn,4),Yo("YuvToArgbRow",_s,4),Yo("YuvToRgba4444Row",Fi,2),Yo("YuvToRgb565Row",gn,2);var Mp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bu=[0,2,8],Xf=[8,7,6,4,4,2,2,2,1,1,1,1],of=1;this.WebPDecodeRGBA=function(w,L,G,ee,Ae){var Ce=jc,Ie=new Uo,Ne=new xi;Ie.ba=Ne,Ne.S=Ce,Ne.width=[Ne.width],Ne.height=[Ne.height];var Me=Ne.width,Pe=Ne.height,lt=new Bn;if(lt==null||w==null)var Lt=2;else e(lt!=null),Lt=Ga(w,L,G,lt.width,lt.height,lt.Pd,lt.Qd,lt.format,null);if(Lt!=0?Me=0:(Me!=null&&(Me[0]=lt.width[0]),Pe!=null&&(Pe[0]=lt.height[0]),Me=1),Me){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ee!=null&&(ee[0]=Ne.width),Ae!=null&&(Ae[0]=Ne.height);e:{if(ee=new sa,(Ae=new Va).data=w,Ae.w=L,Ae.ha=G,Ae.kd=1,L=[0],e(Ae!=null),((w=Ga(Ae.data,Ae.w,Ae.ha,null,null,null,L,null,Ae))==0||w==7)&&L[0]&&(w=4),(L=w)==0){if(e(Ie!=null),ee.data=Ae.data,ee.w=Ae.w+Ae.offset,ee.ha=Ae.ha-Ae.offset,ee.put=ir,ee.ac=Hn,ee.bc=We,ee.ma=Ie,Ae.xa){if((w=_n())==null){Ie=1;break e}if(function(Bt,xt){var Pt=[0],Qt=[0],ct=[0];t:for(;;){if(Bt==null)return 0;if(xt==null)return Bt.a=2,0;if(Bt.l=xt,Bt.a=0,xe(Bt.m,xt.data,xt.w,xt.ha),!qe(Bt.m,Pt,Qt,ct)){Bt.a=3;break t}if(Bt.xb=Sh,xt.width=Pt[0],xt.height=Qt[0],!Dn(Pt[0],Qt[0],1,Bt,null))break t;return 1}return e(Bt.a!=0),0}(w,ee)){if(ee=(L=ja(ee.width,ee.height,Ie.Oa,Ie.ba))==0){t:{ee=w;r:for(;;){if(ee==null){ee=0;break t}if(e(ee.s.yc!=null),e(ee.s.Ya!=null),e(0<ee.s.Wb),e((G=ee.l)!=null),e((Ae=G.ma)!=null),ee.xb!=0){if(ee.ca=Ae.ba,ee.tb=Ae.tb,e(ee.ca!=null),!Ea(Ae.Oa,G,Sc)){ee.a=2;break r}if(!qn(ee,G.width)||G.da)break r;if((G.da||Gn(ee.ca.S))&&St(),11>ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ee.ca.f.kb.F!=null&&St()),ee.Pb&&0<ee.s.ua&&ee.s.vb.X==null&&!fr(ee.s.vb,ee.s.Wa.Xa)){ee.a=1;break r}ee.xb=0}if(!nn(ee,ee.V,ee.Ba,ee.c,ee.i,G.o,pr))break r;Ae.Dc=ee.Ma,ee=1;break t}e(ee.a!=0),ee=0}ee=!ee}ee&&(L=w.a)}else L=w.a}else{if((w=new Ha)==null){Ie=1;break e}if(w.Fa=Ae.na,w.P=Ae.P,w.qc=Ae.Sa,nc(w,ee)){if((L=ja(ee.width,ee.height,Ie.Oa,Ie.ba))==0){if(w.Aa=0,G=Ie.Oa,e((Ae=w)!=null),G!=null){if(0<(Me=0>(Me=G.Md)?0:100<Me?255:255*Me/100)){for(Pe=lt=0;4>Pe;++Pe)12>(Lt=Ae.pb[Pe]).lc&&(Lt.ia=Me*Xf[0>Lt.lc?0:Lt.lc]>>3),lt|=Lt.ia;lt&&(alert("todo:VP8InitRandom"),Ae.ia=1)}Ae.Ga=G.Id,100<Ae.Ga?Ae.Ga=100:0>Ae.Ga&&(Ae.Ga=0)}Pa(w,ee)||(L=w.a)}}else L=w.a}L==0&&Ie.Oa!=null&&Ie.Oa.fd&&(L=Zo(Ie.ba))}Ie=L}Ce=Ie!=0?null:11>Ce?Ne.f.RGBA.eb:Ne.f.kb.y}else Ce=null;return Ce};var af=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(K,ce){for(var me="",Z=0;Z<4;Z++)me+=String.fromCharCode(K[ce++]);return me}function g(K,ce){return(K[ce+0]<<0|K[ce+1]<<8|K[ce+2]<<16)>>>0}function C(K,ce){return(K[ce+0]<<0|K[ce+1]<<8|K[ce+2]<<16|K[ce+3]<<24)>>>0}new i;var B=[0],S=[0],P=[],j=new i,R=t,N=function(K,ce){var me={},Z=0,Y=!1,Le=0,_e=0;if(me.frames=[],!function(le,fe,be,He){for(var Je=0;Je<He;Je++)if(le[fe+Je]!=be.charCodeAt(Je))return!0;return!1}(K,ce,"RIFF",4)){var Qe,De;for(C(K,ce+=4),ce+=8;ce<K.length;){var Be=A(K,ce),xe=C(K,ce+=4);ce+=4;var ze=xe+(1&xe);switch(Be){case"VP8 ":case"VP8L":me.frames[Z]===void 0&&(me.frames[Z]={}),(ie=me.frames[Z]).src_off=Y?_e:ce-8,ie.src_size=Le+xe+8,Z++,Y&&(Y=!1,Le=0,_e=0);break;case"VP8X":(ie=me.header={}).feature_flags=K[ce];var Fe=ce+4;ie.canvas_width=1+g(K,Fe),Fe+=3,ie.canvas_height=1+g(K,Fe),Fe+=3;break;case"ALPH":Y=!0,Le=ze+8,_e=ce-8;break;case"ANIM":(ie=me.header).bgcolor=C(K,ce),Fe=ce+4,ie.loop_count=(Qe=K)[(De=Fe)+0]<<0|Qe[De+1]<<8,Fe+=2;break;case"ANMF":var it,ie;(ie=me.frames[Z]={}).offset_x=2*g(K,ce),ce+=3,ie.offset_y=2*g(K,ce),ce+=3,ie.width=1+g(K,ce),ce+=3,ie.height=1+g(K,ce),ce+=3,ie.duration=g(K,ce),ce+=3,it=K[ce++],ie.dispose=1&it,ie.blend=it>>1&1}Be!="ANMF"&&(ce+=ze)}return me}}(R,0);N.response=R,N.rgbaoutput=!0,N.dataurl=!1;var U=N.header?N.header:null,$=N.frames?N.frames:null;if(U){U.loop_counter=U.loop_count,B=[U.canvas_height],S=[U.canvas_width];for(var J=0;J<$.length&&$[J].blend!=0;J++);}var te=$[0],ue=j.WebPDecodeRGBA(R,te.src_off,te.src_size,S,B);te.rgba=ue,te.imgwidth=S[0],te.imgheight=B[0];for(var oe=0;oe<S[0]*B[0]*4;oe++)P[oe]=ue[oe];return this.width=S,this.height=B,this.data=P,this}(function(t){var e=function(){return typeof DI=="function"},r=function(B,S,P,j){var R=4,N=c;switch(j){case t.image_compression.FAST:R=1,N=o;break;case t.image_compression.MEDIUM:R=6,N=u;break;case t.image_compression.SLOW:R=9,N=i}B=n(B,S,P,N);var U=DI(B,{level:R});return t.__addimage__.arrayBufferToBinaryString(U)},n=function(B,S,P,j){for(var R,N,U,$=B.length/S,J=new Uint8Array(B.length+$),te=g(),ue=0;ue<$;ue+=1){if(U=ue*S,R=B.subarray(U,U+S),j)J.set(j(R,P,N),U+ue);else{for(var oe,K=te.length,ce=[];oe<K;oe+=1)ce[oe]=te[oe](R,P,N);var me=C(ce.concat());J.set(ce[me],U+ue)}N=R}return J},s=function(B){var S=Array.apply([],B);return S.unshift(0),S},o=function(B,S){var P,j=[],R=B.length;j[0]=1;for(var N=0;N<R;N+=1)P=B[N-S]||0,j[N+1]=B[N]-P+256&255;return j},c=function(B,S,P){var j,R=[],N=B.length;R[0]=2;for(var U=0;U<N;U+=1)j=P&&P[U]||0,R[U+1]=B[U]-j+256&255;return R},u=function(B,S,P){var j,R,N=[],U=B.length;N[0]=3;for(var $=0;$<U;$+=1)j=B[$-S]||0,R=P&&P[$]||0,N[$+1]=B[$]+256-(j+R>>>1)&255;return N},i=function(B,S,P){var j,R,N,U,$=[],J=B.length;$[0]=4;for(var te=0;te<J;te+=1)j=B[te-S]||0,R=P&&P[te]||0,N=P&&P[te-S]||0,U=A(j,R,N),$[te+1]=B[te]-U+256&255;return $},A=function(B,S,P){if(B===S&&S===P)return B;var j=Math.abs(S-P),R=Math.abs(B-P),N=Math.abs(B+S-P-P);return j<=R&&j<=N?B:R<=N?S:P},g=function(){return[s,o,c,u,i]},C=function(B){var S=B.map(function(P){return P.reduce(function(j,R){return j+Math.abs(R)},0)});return S.indexOf(Math.min.apply(null,S))};t.processPNG=function(B,S,P,j){var R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe=this.decode.FLATE_DECODE,De="";if(this.__addimage__.isArrayBuffer(B)&&(B=new Uint8Array(B)),this.__addimage__.isArrayBufferView(B)){if(B=(U=new T4e(B)).imgData,N=U.bits,R=U.colorSpace,J=U.colors,[4,6].indexOf(U.colorType)!==-1){if(U.bits===8){K=(oe=U.pixelBitlength==32?new Uint32Array(U.decodePixels().buffer):U.pixelBitlength==16?new Uint16Array(U.decodePixels().buffer):new Uint8Array(U.decodePixels().buffer)).length,me=new Uint8Array(K*U.colors),ce=new Uint8Array(K);var Be,xe=U.pixelBitlength-U.bits;for(Le=0,_e=0;Le<K;Le++){for(Y=oe[Le],Be=0;Be<xe;)me[_e++]=Y>>>Be&255,Be+=U.bits;ce[Le]=Y>>>Be&255}}if(U.bits===16){K=(oe=new Uint32Array(U.decodePixels().buffer)).length,me=new Uint8Array(K*(32/U.pixelBitlength)*U.colors),ce=new Uint8Array(K*(32/U.pixelBitlength)),Z=U.colors>1,Le=0,_e=0;for(var ze=0;Le<K;)Y=oe[Le++],me[_e++]=Y>>>0&255,Z&&(me[_e++]=Y>>>16&255,Y=oe[Le++],me[_e++]=Y>>>0&255),ce[ze++]=Y>>>16&255;N=8}j!==t.image_compression.NONE&&e()?(B=r(me,U.width*U.colors,U.colors,j),ue=r(ce,U.width,1,j)):(B=me,ue=ce,Qe=void 0)}if(U.colorType===3&&(R=this.color_spaces.INDEXED,te=U.palette,U.transparency.indexed)){var Fe=U.transparency.indexed,it=0;for(Le=0,K=Fe.length;Le<K;++Le)it+=Fe[Le];if((it/=255)===K-1&&Fe.indexOf(0)!==-1)$=[Fe.indexOf(0)];else if(it!==K){for(oe=U.decodePixels(),ce=new Uint8Array(oe.length),Le=0,K=oe.length;Le<K;Le++)ce[Le]=Fe[oe[Le]];ue=r(ce,U.width,1)}}var ie=function(le){var fe;switch(le){case t.image_compression.FAST:fe=11;break;case t.image_compression.MEDIUM:fe=13;break;case t.image_compression.SLOW:fe=14;break;default:fe=12}return fe}(j);return Qe===this.decode.FLATE_DECODE&&(De="/Predictor "+ie+" "),De+="/Colors "+J+" /BitsPerComponent "+N+" /Columns "+U.width,(this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),(ue&&this.__addimage__.isArrayBuffer(ue)||this.__addimage__.isArrayBufferView(ue))&&(ue=this.__addimage__.arrayBufferToBinaryString(ue)),{alias:P,data:B,index:S,filter:Qe,decodeParameters:De,transparency:$,palette:te,sMask:ue,predictor:ie,width:U.width,height:U.height,bitsPerComponent:N,colorSpace:R}}}})(ns.API),function(t){t.processGIF89A=function(e,r,n,s){var o=new I4e(e),c=o.width,u=o.height,i=[];o.decodeAndBlitFrameRGBA(0,i);var A={data:i,width:c,height:u},g=new Z3(100).encode(A,100);return t.processJPEG.call(this,g,r,n,s)},t.processGIF87A=t.processGIF89A}(ns.API),Cf.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cf.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ua.log("bit decode error:"+r)}},Cf.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*s*4,u=0;u<8&&8*s+u<this.width;u++){var i=this.palette[o>>7-u&1];this.data[c+4*u]=i.blue,this.data[c+4*u+1]=i.green,this.data[c+4*u+2]=i.red,this.data[c+4*u+3]=255}r!==0&&(this.pos+=4-r)}},Cf.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var o=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*s*4,u=o>>4,i=15&o,A=this.palette[u];if(this.data[c]=A.blue,this.data[c+1]=A.green,this.data[c+2]=A.red,this.data[c+3]=255,2*s+1>=this.width)break;A=this.palette[i],this.data[c+4]=A.blue,this.data[c+4+1]=A.green,this.data[c+4+2]=A.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Cf.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(s<this.palette.length){var c=this.palette[s];this.data[o]=c.red,this.data[o+1]=c.green,this.data[o+2]=c.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Cf.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&e)/e*255|0,u=(o>>5&e)/e*255|0,i=(o>>10&e)/e*255|0,A=o>>15?255:0,g=n*this.width*4+4*s;this.data[g]=i,this.data[g+1]=u,this.data[g+2]=c,this.data[g+3]=A}this.pos+=t}},Cf.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(c&e)/e*255|0,i=(c>>5&r)/r*255|0,A=(c>>11)/e*255|0,g=s*this.width*4+4*o;this.data[g]=A,this.data[g+1]=i,this.data[g+2]=u,this.data[g+3]=255}this.pos+=t}},Cf.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=o,this.data[c+1]=s,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},Cf.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*r;this.data[u]=o,this.data[u+1]=s,this.data[u+2]=n,this.data[u+3]=c}},Cf.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var o=new Cf(e,!1),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},A=new Z3(100).encode(i,100);return t.processJPEG.call(this,A,r,n,s)}}(ns.API),xz.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var o=new xz(e),c=o.width,u=o.height,i={data:o.getData(),width:c,height:u},A=new Z3(100).encode(i,100);return t.processJPEG.call(this,A,r,n,s)}}(ns.API),ns.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,o=new Uint8Array(s/4*3),c=new Uint8Array(s/4),u=0,i=0,A=0;A<s;A+=4){var g=n[A],C=n[A+1],B=n[A+2],S=n[A+3];o[u++]=g,o[u++]=C,o[u++]=B,c[i++]=S}var P=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:P,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ns.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},dy=ns.API,D2=dy.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:s.metadata.Unicode.widths,i=u.fof?u.fof:1,A=e.kerning?e.kerning:s.metadata.Unicode.kerning,g=A.fof?A.fof:1,C=e.doKerning!==!1,B=0,S=t.length,P=0,j=u[0]||i,R=[];for(r=0;r<S;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?R.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+c*(1e3/o)||0)/1e3):(B=C&&wa(A[n])==="object"&&!isNaN(parseInt(A[n][P],10))?A[n][P]/g:0,R.push((u[n]||j)/i+B)),P=n;return R},mz=dy.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return dy.processArabic&&(t=dy.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:D2.apply(this,arguments).reduce(function(o,c){return o+c},0)},gz=function(t,e,r,n){for(var s=[],o=0,c=t.length,u=0;o!==c&&u+e[o]<r;)u+=e[o],o++;s.push(t.slice(0,o));var i=o;for(u=0;o!==c;)u+e[o]>n&&(s.push(t.slice(i,o)),u=0,i=o),u+=e[o],o++;return i!==o&&s.push(t.slice(i,o)),s},yz=function(t,e,r){r||(r={});var n,s,o,c,u,i,A,g=[],C=[g],B=r.textIndent||0,S=0,P=0,j=t.split(" "),R=D2.apply(this,[" ",r])[0];if(i=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var N=Array(i).join(" "),U=[];j.map(function(J){(J=J.split(/\s*\n/)).length>1?U=U.concat(J.map(function(te,ue){return(ue&&te.length?`
`:"")+te})):U.push(J[0])}),j=U,i=mz.apply(this,[N,r])}for(o=0,c=j.length;o<c;o++){var $=0;if(n=j[o],i&&n[0]==`
`&&(n=n.substr(1),$=1),B+S+(P=(s=D2.apply(this,[n,r])).reduce(function(J,te){return J+te},0))>e||$){if(P>e){for(u=gz.apply(this,[n,s,e-(B+S),e]),g.push(u.shift()),g=[u.pop()];u.length;)C.push([u.shift()]);P=s.slice(n.length-(g[0]?g[0].length:0)).reduce(function(J,te){return J+te},0)}else g=[n];C.push(g),B=P+i,S=R}else g.push(n),B+=S+P,S=R}return A=i?function(J,te){return(te?N:"")+J.join(" ")}:function(J){return J.join(" ")},C.map(A)},dy.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var C=this.internal.getFont(g.fontName,g.fontStyle);return C.metadata.Unicode?{widths:C.metadata.Unicode.widths||{0:1},kerning:C.metadata.Unicode.kerning||{}}:{font:C.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/s;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,o.lineIndent=r.lineIndent;var u,i,A=[];for(u=0,i=n.length;u<i;u++)A=A.concat(yz.apply(this,[n[u],c,o]));return A},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var o=function(C){return"0x"+parseInt(C,10).toString(16)},c=t.__fontmetrics__.compress=function(C){var B,S,P,j,R=["{"];for(var N in C){if(B=C[N],isNaN(parseInt(N,10))?S="'"+N+"'":(N=parseInt(N,10),S=(S=o(N).slice(2)).slice(0,-1)+n[S.slice(-1)]),typeof B=="number")B<0?(P=o(B).slice(3),j="-"):(P=o(B).slice(2),j=""),P=j+P.slice(0,-1)+n[P.slice(-1)];else{if(wa(B)!=="object")throw new Error("Don't know what to do with value type "+wa(B)+".");P=c(B)}R.push(S+P)}return R.push("}"),R.join("")},u=t.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var B,S,P,j,R={},N=1,U=R,$=[],J="",te="",ue=C.length-1,oe=1;oe<ue;oe+=1)(j=C[oe])=="'"?B?(P=B.join(""),B=void 0):B=[]:B?B.push(j):j=="{"?($.push([U,P]),U={},P=void 0):j=="}"?((S=$.pop())[0][S[1]]=U,P=void 0,U=S[0]):j=="-"?N=-1:P===void 0?r.hasOwnProperty(j)?(J+=r[j],P=parseInt(J,16)*N,N=1,J=""):J+=j:r.hasOwnProperty(j)?(te+=r[j],U[P]=parseInt(te,16)*N,N=1,P=void 0,te=""):te+=j;return R},i={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Unicode:{Courier:i,"Courier-Bold":i,"Courier-BoldOblique":i,"Courier-Oblique":i,Helvetica:i,"Helvetica-Bold":i,"Helvetica-BoldOblique":i,"Helvetica-Oblique":i,"Times-Roman":i,"Times-Bold":i,"Times-BoldItalic":i,"Times-Italic":i}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(C){var B=C.font,S=g.Unicode[B.postScriptName];S&&(B.metadata.Unicode={},B.metadata.Unicode.widths=S.widths,B.metadata.Unicode.kerning=S.kerning);var P=A.Unicode[B.postScriptName];P&&(B.metadata.Unicode.encoding=P,B.encoding=P.codePages[0])}])}(ns.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),o=0;o<n;o++)s[o]=r.charCodeAt(o);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,o=r.instance;if(!s.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=o.existsFileInVFS(s.postScriptName)===!1?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(c,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(Yx(u)),c.metadata=t.API.TTFFont.open(u),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(s,n)}}])}(ns),function(t){function e(){return(ls.canvg?Promise.resolve(ls.canvg):y1(()=>import("./index.es-B4ap0tLG.js"),__vite__mapDeps([2,1]))).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ns.API.addSvgAsImage=function(r,n,s,o,c,u,i,A){if(isNaN(n)||isNaN(s))throw Ua.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(c))throw Ua.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=o,g.height=c;var C=g.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,g.width,g.height);var B={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},S=this;return e().then(function(P){return P.fromString(C,r,B)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(P){return P.render(B)}).then(function(){S.addImage(g.toDataURL("image/jpeg",1),n,s,o,c,i,A)})}}(),ns.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},ns.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,o,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(c),i=[],A=0,g=0,C=0;function B(P,j){var R,N=!1;for(R=0;R<P.length;R+=1)P[R]===j&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var S=u.length;for(C=0;C<S;C+=1)r[u[C]].value=r[u[C]].defaultValue,r[u[C]].explicitSet=!1}if(wa(t)==="object"){for(s in t)if(o=t[s],B(u,s)&&o!==void 0){if(r[s].type==="boolean"&&typeof o=="boolean")r[s].value=o;else if(r[s].type==="name"&&B(r[s].valueSet,o))r[s].value=o;else if(r[s].type==="integer"&&Number.isInteger(o))r[s].value=o;else if(r[s].type==="array"){for(A=0;A<o.length;A+=1)if(n=!0,o[A].length===1&&typeof o[A][0]=="number")i.push(String(o[A]-1));else if(o[A].length>1){for(g=0;g<o[A].length;g+=1)typeof o[A][g]!="number"&&(n=!1);n===!0&&i.push([o[A][0]-1,o[A][1]-1].join(" "))}r[s].value="["+i.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var P,j=[];for(P in r)r[P].explicitSet===!0&&(r[P].type==="name"?j.push("/"+P+" /"+r[P].value):j.push("/"+P+" "+r[P].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),A=o.length+c.length+u.length+s.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+A+" >>"),this.internal.write("stream"),this.internal.write(s+o+c+u+i),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(ns.API),function(t){var e=t.API,r=e.pdfEscape16=function(o,c){for(var u,i=c.metadata.Unicode.widths,A=["","0","00","000","0000"],g=[""],C=0,B=o.length;C<B;++C){if(u=c.metadata.characterToGlyph(o.charCodeAt(C)),c.metadata.glyIdsUsed.push(u),c.metadata.toUnicode[u]=o.charCodeAt(C),i.indexOf(u)==-1&&(i.push(u),i.push([parseInt(c.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(A[4-u.length],u)}return g.join("")},n=function(o){var c,u,i,A,g,C,B;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,i=[],C=0,B=(u=Object.keys(o).sort(function(S,P){return S-P})).length;C<B;C++)c=u[C],i.length>=100&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar`,i=[]),o[c]!==void 0&&o[c]!==null&&typeof o[c].toString=="function"&&(A=("0000"+o[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),i.push("<"+c+"><"+A+">"));return i.length&&(g+=`
`+i.length+` beginbfchar
`+i.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,A=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var C=u.metadata.Unicode.widths,B=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),S="",P=0;P<B.length;P++)S+=String.fromCharCode(B[P]);var j=A();g({data:S,addLength1:!0,objectId:j}),i("endobj");var R=A();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:R}),i("endobj");var N=A();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+yy(u.fontName)),i("/FontFile2 "+j+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/Flags "+u.metadata.flags),i("/StemV "+u.metadata.stemV),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i(">>"),i("endobj");var U=A();i("<<"),i("/Type /Font"),i("/BaseFont /"+yy(u.fontName)),i("/FontDescriptor "+N+" 0 R"),i("/W "+t.API.PDFObject.convert(C)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+u.encoding+")"),i(">>"),i(">>"),i("endobj"),u.objectNumber=A(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+R+" 0 R"),i("/BaseFont /"+yy(u.fontName)),i("/Encoding /"+u.encoding),i("/DescendantFonts ["+U+" 0 R]"),i(">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(c){var u=c.font,i=c.out,A=c.newObject,g=c.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var C=u.metadata.rawData,B="",S=0;S<C.length;S++)B+=String.fromCharCode(C[S]);var P=A();g({data:B,addLength1:!0,objectId:P}),i("endobj");var j=A();g({data:n(u.metadata.toUnicode),addLength1:!0,objectId:j}),i("endobj");var R=A();i("<<"),i("/Descent "+u.metadata.decender),i("/CapHeight "+u.metadata.capHeight),i("/StemV "+u.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+P+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),i("/FontName /"+yy(u.fontName)),i("/ItalicAngle "+u.metadata.italicAngle),i("/Ascent "+u.metadata.ascender),i(">>"),i("endobj"),u.objectNumber=A();for(var N=0;N<u.metadata.hmtx.widths.length;N++)u.metadata.hmtx.widths[N]=parseInt(u.metadata.hmtx.widths[N]*(1e3/u.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+yy(u.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),i("endobj"),u.isAlreadyPutted=!0}})(o)}]);var s=function(o){var c,u=o.text||"",i=o.x,A=o.y,g=o.options||{},C=o.mutex||{},B=C.pdfEscape,S=C.activeFontKey,P=C.fonts,j=S,R="",N=0,U="",$=P[j].encoding;if(P[j].encoding!=="Identity-H")return{text:u,x:i,y:A,options:g,mutex:C};for(U=u,j=S,Array.isArray(u)&&(U=u[0]),N=0;N<U.length;N+=1)P[j].metadata.hasOwnProperty("cmap")&&(c=P[j].metadata.cmap.unicode.codeMap[U[N].charCodeAt(0)]),c||U[N].charCodeAt(0)<256&&P[j].metadata.hasOwnProperty("Unicode")?R+=U[N]:R+="";var J="";return parseInt(j.slice(1))<14||$==="WinAnsiEncoding"?J=B(R,j).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(J=r(R,P[j])),C.isHex=!0,{text:J,x:i,y:A,options:g,mutex:C}};e.events.push(["postProcessText",function(o){var c=o.text||"",u=[],i={text:c,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(c)){var A=0;for(A=0;A<c.length;A+=1)Array.isArray(c[A])&&c[A].length===3?u.push([s(Object.assign({},i,{text:c[A][0]})).text,c[A][1],c[A][2]]):u.push(s(Object.assign({},i,{text:c[A]})).text);o.text=u}else o.text=s(Object.assign({},i,{text:c})).text}])}(ns),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ns.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,o,c,u,i,A,g,C=e,B=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],S=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,$=0;this.__bidiEngine__={};var J=function(Z){var Y=Z.charCodeAt(),Le=Y>>8,_e=j[Le];return _e!==void 0?C[256*_e+(255&Y)]:Le===252||Le===253?"AL":N.test(Le)?"L":Le===8?"R":"N"},te=function(Z){for(var Y,Le=0;Le<Z.length;Le++){if((Y=J(Z.charAt(Le)))==="L")return!1;if(Y==="R")return!0}return!1},ue=function(Z,Y,Le,_e){var Qe,De,Be,xe,ze=Y[_e];switch(ze){case"L":case"R":U=!1;break;case"N":case"AN":break;case"EN":U&&(ze="AN");break;case"AL":U=!0,ze="R";break;case"WS":ze="N";break;case"CS":_e<1||_e+1>=Y.length||(Qe=Le[_e-1])!=="EN"&&Qe!=="AN"||(De=Y[_e+1])!=="EN"&&De!=="AN"?ze="N":U&&(De="AN"),ze=De===Qe?De:"N";break;case"ES":ze=(Qe=_e>0?Le[_e-1]:"B")==="EN"&&_e+1<Y.length&&Y[_e+1]==="EN"?"EN":"N";break;case"ET":if(_e>0&&Le[_e-1]==="EN"){ze="EN";break}if(U){ze="N";break}for(Be=_e+1,xe=Y.length;Be<xe&&Y[Be]==="ET";)Be++;ze=Be<xe&&Y[Be]==="EN"?"EN":"N";break;case"NSM":if(c&&!u){for(xe=Y.length,Be=_e+1;Be<xe&&Y[Be]==="NSM";)Be++;if(Be<xe){var Fe=Z[_e],it=Fe>=1425&&Fe<=2303||Fe===64286;if(Qe=Y[Be],it&&(Qe==="R"||Qe==="AL")){ze="R";break}}}ze=_e<1||(Qe=Y[_e-1])==="B"?"N":Le[_e-1];break;case"B":U=!1,s=!0,ze=$;break;case"S":o=!0,ze="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"BN":ze="N"}return ze},oe=function(Z,Y,Le){var _e=Z.split("");return Le&&K(_e,Le,{hiLevel:$}),_e.reverse(),Y&&Y.reverse(),_e.join("")},K=function(Z,Y,Le){var _e,Qe,De,Be,xe,ze=-1,Fe=Z.length,it=0,ie=[],le=$?S:B,fe=[];for(U=!1,s=!1,o=!1,Qe=0;Qe<Fe;Qe++)fe[Qe]=J(Z[Qe]);for(De=0;De<Fe;De++){if(xe=it,ie[De]=ue(Z,fe,ie,De),_e=240&(it=le[xe][P[ie[De]]]),it&=15,Y[De]=Be=le[it][5],_e>0)if(_e===16){for(Qe=ze;Qe<De;Qe++)Y[Qe]=1;ze=-1}else ze=-1;if(le[it][6])ze===-1&&(ze=De);else if(ze>-1){for(Qe=ze;Qe<De;Qe++)Y[Qe]=Be;ze=-1}fe[De]==="B"&&(Y[De]=0),Le.hiLevel|=Be}o&&function(be,He,Je){for(var tt=0;tt<Je;tt++)if(be[tt]==="S"){He[tt]=$;for(var st=tt-1;st>=0&&be[st]==="WS";st--)He[st]=$}}(fe,Y,Fe)},ce=function(Z,Y,Le,_e,Qe){if(!(Qe.hiLevel<Z)){if(Z===1&&$===1&&!s)return Y.reverse(),void(Le&&Le.reverse());for(var De,Be,xe,ze,Fe=Y.length,it=0;it<Fe;){if(_e[it]>=Z){for(xe=it+1;xe<Fe&&_e[xe]>=Z;)xe++;for(ze=it,Be=xe-1;ze<Be;ze++,Be--)De=Y[ze],Y[ze]=Y[Be],Y[Be]=De,Le&&(De=Le[ze],Le[ze]=Le[Be],Le[Be]=De);it=xe}it++}}},me=function(Z,Y,Le){var _e=Z.split(""),Qe={hiLevel:$};return Le||(Le=[]),K(_e,Le,Qe),function(De,Be,xe){if(xe.hiLevel!==0&&g)for(var ze,Fe=0;Fe<De.length;Fe++)Be[Fe]===1&&(ze=R.indexOf(De[Fe]))>=0&&(De[Fe]=R[ze+1])}(_e,Le,Qe),ce(2,_e,Y,Le,Qe),ce(1,_e,Y,Le,Qe),_e.join("")};return this.__bidiEngine__.doBidiReorder=function(Z,Y,Le){if(function(Qe,De){if(De)for(var Be=0;Be<Qe.length;Be++)De[Be]=Be;u===void 0&&(u=te(Qe)),A===void 0&&(A=te(Qe))}(Z,Y),c||!i||A)if(c&&i&&u^A)$=u?1:0,Z=oe(Z,Y,Le);else if(!c&&i&&A)$=u?1:0,Z=me(Z,Y,Le),Z=oe(Z,Y);else if(!c||u||i||A){if(c&&!i&&u^A)Z=oe(Z,Y),u?($=0,Z=me(Z,Y,Le)):($=1,Z=me(Z,Y,Le),Z=oe(Z,Y));else if(c&&u&&!i&&A)$=1,Z=me(Z,Y,Le),Z=oe(Z,Y);else if(!c&&!i&&u^A){var _e=g;u?($=1,Z=me(Z,Y,Le),$=0,g=!1,Z=me(Z,Y,Le),g=_e):($=0,Z=me(Z,Y,Le),Z=oe(Z,Y),$=1,g=!1,Z=me(Z,Y,Le),g=_e,Z=oe(Z,Y))}}else $=0,Z=me(Z,Y,Le);else $=u?1:0,Z=me(Z,Y,Le);return Z},this.__bidiEngine__.setOptions=function(Z){Z&&(c=Z.isInputVisual,i=Z.isOutputVisual,u=Z.isInputRtl,A=Z.isOutputRtl,g=Z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text,o=(n.x,n.y,n.options||{}),c=(n.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(s)==="[object Array]"){var u=0;for(c=[],u=0;u<s.length;u+=1)Object.prototype.toString.call(s[u])==="[object Array]"?c.push([r.doBidiReorder(s[u][0]),s[u][1],s[u][2]]):c.push([r.doBidiReorder(s[u])]);n.text=c}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(ns),ns.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Zm(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new V4e(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new L4e(this.contents),this.head=new N4e(this),this.name=new D4e(this),this.cmap=new jK(this),this.toUnicode={},this.hhea=new P4e(this),this.maxp=new O4e(this),this.hmtx=new R4e(this),this.post=new j4e(this),this.os2=new M4e(this),this.loca=new H4e(this),this.glyf=new U4e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,u,i,A;for(A=[],c=0,u=(i=this.bbox).length;c<u;c++)e=i[c],A.push(Math.round(e*this.scaleFactor));return A}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,o,c,u;for(c=0,o=0,u=(e=""+e).length;0<=u?o<u:o>u;o=0<=u?++o:--o)s=e.charCodeAt(o),c+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return c*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Gf,Zm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,o,c,u,i;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),i=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^o)+65536*(255^c)+256*(255^u)+(255^i)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*o+65536*c+256*u+i},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,o;for(o=[],n=0,s=e.length;n<s;n++)r=e[n],o.push(this.writeByte(r));return o},t}(),L4e=function(){var t;function e(r){var n,s,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,o=this.tableCount;0<=o?s<o:s>o;s=0<=o?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,o,c,u,i,A,g,C,B,S,P,j;for(j in S=Object.keys(r).length,i=Math.log(2),C=16*Math.floor(Math.log(S)/i),c=Math.floor(C/i),g=16*S-C,(s=new Zm).writeInt(this.scalarType),s.writeShort(S),s.writeShort(C),s.writeShort(c),s.writeShort(g),o=16*S,A=s.pos+o,u=null,P=[],r)for(B=r[j],s.writeString(j),s.writeInt(t(B)),s.writeInt(A),s.writeInt(B.length),P=P.concat(B),j==="head"&&(u=A),A+=B.length;A%4;)P.push(0),A++;return s.write(P),n=2981146554-t(s.data),s.pos=u+8,s.writeUInt32(n),s.data},t=function(r){var n,s,o,c;for(r=kK.call(r);r.length%4;)r.push(0);for(o=new Zm(r),s=0,n=0,c=r.length;n<c;n=n+=4)s+=o.readUInt32();return 4294967295&s},e}(),F4e={}.hasOwnProperty,Lp=function(t,e){for(var r in e)F4e.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Gf=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var N4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new Zm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),_z=function(){function t(e,r){var n,s,o,c,u,i,A,g,C,B,S,P,j,R,N,U,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),C=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(i=0;i<256;++i)this.codeMap[i]=e.readByte();break;case 4:for(S=e.readUInt16(),B=S/2,e.pos+=6,o=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),e.pos+=2,j=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),A=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),g=function(){var J,te;for(te=[],i=J=0;0<=B?J<B:J>B;i=0<=B?++J:--J)te.push(e.readUInt16());return te}(),s=(this.length-e.pos+this.offset)/2,u=function(){var J,te;for(te=[],i=J=0;0<=s?J<s:J>s;i=0<=s?++J:--J)te.push(e.readUInt16());return te}(),i=N=0,$=o.length;N<$;i=++N)for(R=o[i],n=U=P=j[i];P<=R?U<=R:U>=R;n=P<=R?++U:--U)g[i]===0?c=n+A[i]:(c=u[g[i]/2+(n-P)-(B-i)]||0)!==0&&(c+=A[i]),this.codeMap[n]=65535&c}e.pos=C}return t.encode=function(e,r){var n,s,o,c,u,i,A,g,C,B,S,P,j,R,N,U,$,J,te,ue,oe,K,ce,me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe,it,ie,le,fe,be,He,Je,tt,st,Ct,Ue,Ft;switch(_e=new Zm,c=Object.keys(e).sort(function(Zt,fr){return Zt-fr}),r){case"macroman":for(j=0,R=function(){var Zt=[];for(P=0;P<256;++P)Zt.push(0);return Zt}(),U={0:0},o={},Qe=0,ze=c.length;Qe<ze;Qe++)U[st=e[s=c[Qe]]]==null&&(U[st]=++j),o[s]={old:e[s],new:U[e[s]]},R[s]=U[e[s]];return _e.writeUInt16(1),_e.writeUInt16(0),_e.writeUInt32(12),_e.writeUInt16(0),_e.writeUInt16(262),_e.writeUInt16(0),_e.write(R),{charMap:o,subtable:_e.data,maxGlyphID:j+1};case"unicode":for(Y=[],C=[],$=0,U={},n={},N=A=null,De=0,Fe=c.length;De<Fe;De++)U[te=e[s=c[De]]]==null&&(U[te]=++$),n[s]={old:te,new:U[te]},u=U[te]-s,N!=null&&u===A||(N&&C.push(N),Y.push(s),A=u),N=s;for(N&&C.push(N),C.push(65535),Y.push(65535),me=2*(ce=Y.length),K=2*Math.pow(Math.log(ce)/Math.LN2,2),B=Math.log(K/2)/Math.LN2,oe=2*ce-K,i=[],ue=[],S=[],P=Be=0,it=Y.length;Be<it;P=++Be){if(Z=Y[P],g=C[P],Z===65535){i.push(0),ue.push(0);break}if(Z-(Le=n[Z].new)>=32768)for(i.push(0),ue.push(2*(S.length+ce-P)),s=xe=Z;Z<=g?xe<=g:xe>=g;s=Z<=g?++xe:--xe)S.push(n[s].new);else i.push(Le-Z),ue.push(0)}for(_e.writeUInt16(3),_e.writeUInt16(1),_e.writeUInt32(12),_e.writeUInt16(4),_e.writeUInt16(16+8*ce+2*S.length),_e.writeUInt16(0),_e.writeUInt16(me),_e.writeUInt16(K),_e.writeUInt16(B),_e.writeUInt16(oe),Je=0,ie=C.length;Je<ie;Je++)s=C[Je],_e.writeUInt16(s);for(_e.writeUInt16(0),tt=0,le=Y.length;tt<le;tt++)s=Y[tt],_e.writeUInt16(s);for(Ct=0,fe=i.length;Ct<fe;Ct++)u=i[Ct],_e.writeUInt16(u);for(Ue=0,be=ue.length;Ue<be;Ue++)J=ue[Ue],_e.writeUInt16(J);for(Ft=0,He=S.length;Ft<He;Ft++)j=S[Ft],_e.writeUInt16(j);return{charMap:n,subtable:_e.data,maxGlyphID:$+1}}},t}(),jK=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=o?s<o:s>o;s=0<=o?++s:--s)n=new _z(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,o;return n==null&&(n="macroman"),s=_z.encode(r,n),(o=new Zm).writeUInt16(0),o.writeUInt16(1),s.table=o.data.concat(s.subtable),s},e}(),P4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),M4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),j4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var c;for(s=r.readUInt16(),this.glyphNameIndex=[],c=0;0<=s?c<s:c>s;c=0<=s?++c:--c)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var u,i,A;for(A=[],c=u=0,i=this.file.maxp.numGlyphs;0<=i?u<i:u>i;c=0<=i?++u:--u)A.push(r.readUInt32());return A}).call(this)}},e}(),k4e=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},D4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,o,c,u,i,A,g,C,B,S;for(r.pos=this.offset,r.readShort(),n=r.readShort(),i=r.readShort(),s=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+i+r.readShort()});for(A={},c=C=0,B=s.length;C<B;c=++C)o=s[c],r.pos=o.offset,g=r.readString(o.length),u=new k4e(g,o),A[S=o.nameID]==null&&(A[S]=[]),A[o.nameID].push(u);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},e}(),O4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),R4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,o,c,u,i,A;for(r.pos=this.offset,this.metrics=[],n=0,i=this.file.hhea.numberOfMetrics;0<=i?n<i:n>i;n=0<=i?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,C;for(C=[],n=g=0;0<=o?g<o:g>o;n=0<=o?++g:--g)C.push(r.readInt16());return C}(),this.widths=(function(){var g,C,B,S;for(S=[],g=0,C=(B=this.metrics).length;g<C;g++)c=B[g],S.push(c.advance);return S}).call(this),s=this.widths[this.widths.length-1],A=[],n=u=0;0<=o?u<o:u>o;n=0<=o?++u:--u)A.push(this.widths.push(s));return A},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),kK=[].slice,U4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,o,c,u,i,A,g,C,B;return r in this.cache?this.cache[r]:(c=this.file.loca,n=this.file.contents,s=c.indexOf(r),(o=c.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,u=(i=new Zm(n.read(o))).readShort(),g=i.readShort(),B=i.readShort(),A=i.readShort(),C=i.readShort(),this.cache[r]=u===-1?new Q4e(i,g,B,A,C):new z4e(i,u,g,B,A,C),this.cache[r]))},e.prototype.encode=function(r,n,s){var o,c,u,i,A;for(u=[],c=[],i=0,A=n.length;i<A;i++)o=r[n[i]],c.push(u.length),o&&(u=u.concat(o.encode(s)));return c.push(u.length),{table:u,offsets:c}},e}(),z4e=function(){function t(e,r,n,s,o,c){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=o,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Q4e=function(){function t(e,r,n,s,o){var c,u;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;u=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&u;)c.pos+=1&u?4:2,128&u?c.pos+=8:64&u?c.pos+=4:8&u&&(c.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Zm(kK.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),H4e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Lp(e,Gf),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=2)c.push(2*r.readUInt16());return c}).call(this):(function(){var o,c;for(c=[],s=0,o=this.length;s<o;s+=4)c.push(r.readUInt32());return c}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),o=0,c=0,u=0;u<s.length;++u)if(s[u]=o,c<n.length&&n[c]==u){++c,s[u]=o;var i=this.offsets[u],A=this.offsets[u+1]-i;A>0&&(o+=A)}for(var g=new Array(4*s.length),C=0;C<s.length;++C)g[4*C+3]=255&s[C],g[4*C+2]=(65280&s[C])>>8,g[4*C+1]=(16711680&s[C])>>16,g[4*C]=(4278190080&s[C])>>24;return g},e}(),V4e=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,o;for(r in s=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,o,c,u,i;for(s={},c=0,u=e.length;c<u;c++)s[o=e[c]]=this.font.glyf.glyphFor(o);for(o in r=[],s)(n=s[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in i=this.glyphsFor(r))n=i[o],s[o]=n;return s},t.prototype.encode=function(e,r){var n,s,o,c,u,i,A,g,C,B,S,P,j,R,N;for(s in n=jK.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),S={0:0},N=n.charMap)S[(i=N[s]).old]=i.new;for(P in B=n.maxGlyphID,c)P in S||(S[P]=B++);return g=function(U){var $,J;for($ in J={},U)J[U[$]]=$;return J}(S),C=Object.keys(g).sort(function(U,$){return U-$}),j=function(){var U,$,J;for(J=[],U=0,$=C.length;U<$;U++)u=C[U],J.push(g[u]);return J}(),o=this.font.glyf.encode(c,j,S),A=this.font.loca.encode(o.offsets,j),R={cmap:this.font.cmap.raw(),glyf:o.table,loca:A,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},t}();ns.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,o,c;if(Array.isArray(r))return"["+function(){var u,i,A;for(A=[],u=0,i=r.length;u<i;u++)n=r[u],A.push(e.convert(n));return A}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in o=["<<"],r)c=r[s],o.push("/"+s+" "+e.convert(c));return o.push(">>"),o.join(`
`)}return""+r},e}();var G4e={exports:{}};/*! For license information please see bundle.js.LICENSE.txt */(function(t,e){(function(r,n){t.exports=n()})(self,function(){return(()=>{var r={418:c=>{var u=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function g(C){if(C==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(C)}c.exports=function(){try{if(!Object.assign)return!1;var C=new String("abc");if(C[5]="de",Object.getOwnPropertyNames(C)[0]==="5")return!1;for(var B={},S=0;S<10;S++)B["_"+String.fromCharCode(S)]=S;if(Object.getOwnPropertyNames(B).map(function(j){return B[j]}).join("")!=="0123456789")return!1;var P={};return"abcdefghijklmnopqrst".split("").forEach(function(j){P[j]=j}),Object.keys(Object.assign({},P)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(C,B){for(var S,P,j=g(C),R=1;R<arguments.length;R++){for(var N in S=Object(arguments[R]))i.call(S,N)&&(j[N]=S[N]);if(u){P=u(S);for(var U=0;U<P.length;U++)A.call(S,P[U])&&(j[P[U]]=S[P[U]])}}return j}},703:(c,u,i)=>{var A=i(414);function g(){}function C(){}C.resetWarningCache=g,c.exports=function(){function B(j,R,N,U,$,J){if(J!==A){var te=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw te.name="Invariant Violation",te}}function S(){return B}B.isRequired=B;var P={array:B,bool:B,func:B,number:B,object:B,string:B,symbol:B,any:B,arrayOf:S,element:B,elementType:B,instanceOf:S,node:B,objectOf:S,oneOf:S,oneOfType:S,shape:S,exact:S,checkPropTypes:C,resetWarningCache:g};return P.PropTypes=P,P}},697:(c,u,i)=>{c.exports=i(703)()},414:c=>{c.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:(c,u,i)=>{var A=i(418),g=60103,C=60106;u.Fragment=60107,u.StrictMode=60108,u.Profiler=60114;var B=60109,S=60110,P=60112;u.Suspense=60113;var j=60115,R=60116;if(typeof Symbol=="function"&&Symbol.for){var N=Symbol.for;g=N("react.element"),C=N("react.portal"),u.Fragment=N("react.fragment"),u.StrictMode=N("react.strict_mode"),u.Profiler=N("react.profiler"),B=N("react.provider"),S=N("react.context"),P=N("react.forward_ref"),u.Suspense=N("react.suspense"),j=N("react.memo"),R=N("react.lazy")}var U=typeof Symbol=="function"&&Symbol.iterator;function $(le){for(var fe="https://reactjs.org/docs/error-decoder.html?invariant="+le,be=1;be<arguments.length;be++)fe+="&args[]="+encodeURIComponent(arguments[be]);return"Minified React error #"+le+"; visit "+fe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te={};function ue(le,fe,be){this.props=le,this.context=fe,this.refs=te,this.updater=be||J}function oe(){}function K(le,fe,be){this.props=le,this.context=fe,this.refs=te,this.updater=be||J}ue.prototype.isReactComponent={},ue.prototype.setState=function(le,fe){if(typeof le!="object"&&typeof le!="function"&&le!=null)throw Error($(85));this.updater.enqueueSetState(this,le,fe,"setState")},ue.prototype.forceUpdate=function(le){this.updater.enqueueForceUpdate(this,le,"forceUpdate")},oe.prototype=ue.prototype;var ce=K.prototype=new oe;ce.constructor=K,A(ce,ue.prototype),ce.isPureReactComponent=!0;var me={current:null},Z=Object.prototype.hasOwnProperty,Y={key:!0,ref:!0,__self:!0,__source:!0};function Le(le,fe,be){var He,Je={},tt=null,st=null;if(fe!=null)for(He in fe.ref!==void 0&&(st=fe.ref),fe.key!==void 0&&(tt=""+fe.key),fe)Z.call(fe,He)&&!Y.hasOwnProperty(He)&&(Je[He]=fe[He]);var Ct=arguments.length-2;if(Ct===1)Je.children=be;else if(1<Ct){for(var Ue=Array(Ct),Ft=0;Ft<Ct;Ft++)Ue[Ft]=arguments[Ft+2];Je.children=Ue}if(le&&le.defaultProps)for(He in Ct=le.defaultProps)Je[He]===void 0&&(Je[He]=Ct[He]);return{$$typeof:g,type:le,key:tt,ref:st,props:Je,_owner:me.current}}function _e(le){return typeof le=="object"&&le!==null&&le.$$typeof===g}var Qe=/\/+/g;function De(le,fe){return typeof le=="object"&&le!==null&&le.key!=null?function(be){var He={"=":"=0",":":"=2"};return"$"+be.replace(/[=:]/g,function(Je){return He[Je]})}(""+le.key):fe.toString(36)}function Be(le,fe,be,He,Je){var tt=typeof le;tt!=="undefined"&&tt!=="boolean"||(le=null);var st=!1;if(le===null)st=!0;else switch(tt){case"string":case"number":st=!0;break;case"object":switch(le.$$typeof){case g:case C:st=!0}}if(st)return Je=Je(st=le),le=He===""?"."+De(st,0):He,Array.isArray(Je)?(be="",le!=null&&(be=le.replace(Qe,"$&/")+"/"),Be(Je,fe,be,"",function(Ft){return Ft})):Je!=null&&(_e(Je)&&(Je=function(Ft,Zt){return{$$typeof:g,type:Ft.type,key:Zt,ref:Ft.ref,props:Ft.props,_owner:Ft._owner}}(Je,be+(!Je.key||st&&st.key===Je.key?"":(""+Je.key).replace(Qe,"$&/")+"/")+le)),fe.push(Je)),1;if(st=0,He=He===""?".":He+":",Array.isArray(le))for(var Ct=0;Ct<le.length;Ct++){var Ue=He+De(tt=le[Ct],Ct);st+=Be(tt,fe,be,Ue,Je)}else if(Ue=function(Ft){return Ft===null||typeof Ft!="object"?null:typeof(Ft=U&&Ft[U]||Ft["@@iterator"])=="function"?Ft:null}(le),typeof Ue=="function")for(le=Ue.call(le),Ct=0;!(tt=le.next()).done;)st+=Be(tt=tt.value,fe,be,Ue=He+De(tt,Ct++),Je);else if(tt==="object")throw fe=""+le,Error($(31,fe==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":fe));return st}function xe(le,fe,be){if(le==null)return le;var He=[],Je=0;return Be(le,He,"","",function(tt){return fe.call(be,tt,Je++)}),He}function ze(le){if(le._status===-1){var fe=le._result;fe=fe(),le._status=0,le._result=fe,fe.then(function(be){le._status===0&&(be=be.default,le._status=1,le._result=be)},function(be){le._status===0&&(le._status=2,le._result=be)})}if(le._status===1)return le._result;throw le._result}var Fe={current:null};function it(){var le=Fe.current;if(le===null)throw Error($(321));return le}var ie={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:me,IsSomeRendererActing:{current:!1},assign:A};u.Children={map:xe,forEach:function(le,fe,be){xe(le,function(){fe.apply(this,arguments)},be)},count:function(le){var fe=0;return xe(le,function(){fe++}),fe},toArray:function(le){return xe(le,function(fe){return fe})||[]},only:function(le){if(!_e(le))throw Error($(143));return le}},u.Component=ue,u.PureComponent=K,u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,u.cloneElement=function(le,fe,be){if(le==null)throw Error($(267,le));var He=A({},le.props),Je=le.key,tt=le.ref,st=le._owner;if(fe!=null){if(fe.ref!==void 0&&(tt=fe.ref,st=me.current),fe.key!==void 0&&(Je=""+fe.key),le.type&&le.type.defaultProps)var Ct=le.type.defaultProps;for(Ue in fe)Z.call(fe,Ue)&&!Y.hasOwnProperty(Ue)&&(He[Ue]=fe[Ue]===void 0&&Ct!==void 0?Ct[Ue]:fe[Ue])}var Ue=arguments.length-2;if(Ue===1)He.children=be;else if(1<Ue){Ct=Array(Ue);for(var Ft=0;Ft<Ue;Ft++)Ct[Ft]=arguments[Ft+2];He.children=Ct}return{$$typeof:g,type:le.type,key:Je,ref:tt,props:He,_owner:st}},u.createContext=function(le,fe){return fe===void 0&&(fe=null),(le={$$typeof:S,_calculateChangedBits:fe,_currentValue:le,_currentValue2:le,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:B,_context:le},le.Consumer=le},u.createElement=Le,u.createFactory=function(le){var fe=Le.bind(null,le);return fe.type=le,fe},u.createRef=function(){return{current:null}},u.forwardRef=function(le){return{$$typeof:P,render:le}},u.isValidElement=_e,u.lazy=function(le){return{$$typeof:R,_payload:{_status:-1,_result:le},_init:ze}},u.memo=function(le,fe){return{$$typeof:j,type:le,compare:fe===void 0?null:fe}},u.useCallback=function(le,fe){return it().useCallback(le,fe)},u.useContext=function(le,fe){return it().useContext(le,fe)},u.useDebugValue=function(){},u.useEffect=function(le,fe){return it().useEffect(le,fe)},u.useImperativeHandle=function(le,fe,be){return it().useImperativeHandle(le,fe,be)},u.useLayoutEffect=function(le,fe){return it().useLayoutEffect(le,fe)},u.useMemo=function(le,fe){return it().useMemo(le,fe)},u.useReducer=function(le,fe,be){return it().useReducer(le,fe,be)},u.useRef=function(le){return it().useRef(le)},u.useState=function(le){return it().useState(le)},u.version="17.0.2"},294:(c,u,i)=>{c.exports=i(408)}},n={};function s(c){var u=n[c];if(u!==void 0)return u.exports;var i=n[c]={exports:{}};return r[c](i,i.exports,s),i.exports}s.n=c=>{var u=c&&c.__esModule?()=>c.default:()=>c;return s.d(u,{a:u}),u},s.d=(c,u)=>{for(var i in u)s.o(u,i)&&!s.o(c,i)&&Object.defineProperty(c,i,{enumerable:!0,get:u[i]})},s.o=(c,u)=>Object.prototype.hasOwnProperty.call(c,u),s.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var o={};return(()=>{s.r(o),s.d(o,{default:()=>U});var c=s(294),u=s(697),i=s.n(u),A=function($){var J=$.children,te=$.width;return c.createElement("div",{id:"y-label",style:{flex:"0 0 ".concat(te,"px")}}," ",J," ")};A.defaultProps={children:" "},A.propTypes={children:i().oneOfType([i().string,i().element]),width:i().number.isRequired};const g=A;function C($){var J=$.labels,te=$.width,ue=$.labelsVisibility,oe=$.squares,K=$.height,ce=$.yWidth;return c.createElement("div",{id:"x-labels-list",style:{display:"flex"}},c.createElement(g,{width:ce}),J.map(function(me,Z){return c.createElement("div",{key:Z,style:{flex:oe?"none":1,textAlign:"center",width:oe?"".concat(K+1,"px"):te,visibility:ue&&!ue[Z]?"hidden":"visible"}},me)}))}C.propTypes={labels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,labelsVisibility:i().arrayOf(i().bool),width:i().number.isRequired,squares:i().bool,height:i().number},C.defaultProps={labelsVisibility:null,squares:!1,height:30};const B=C;function S($){return function(J){if(Array.isArray(J))return P(J)}($)||function(J){if(typeof Symbol<"u"&&J[Symbol.iterator]!=null||J["@@iterator"]!=null)return Array.from(J)}($)||function(J,te){if(J){if(typeof J=="string")return P(J,te);var ue=Object.prototype.toString.call(J).slice(8,-1);return ue==="Object"&&J.constructor&&(ue=J.constructor.name),ue==="Map"||ue==="Set"?Array.from(J):ue==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ue)?P(J,te):void 0}}($)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function P($,J){(J==null||J>$.length)&&(J=$.length);for(var te=0,ue=new Array(J);te<J;te++)ue[te]=$[te];return ue}var j=function($){var J=$.xLabels,te=$.yLabels,ue=$.data,oe=($.xLabelWidth,$.yLabelWidth),K=$.background,ce=$.height,me=$.yLabelTextAlign,Z=$.unit,Y=$.displayYLabels,Le=$.onClick,_e=$.cursor,Qe=$.squares,De=$.cellRender,Be=$.cellStyle,xe=$.title,ze=ue.reduce(function(ie,le){return[].concat(S(le),S(ie))},[]),Fe=Math.max.apply(Math,S(ze)),it=Math.min.apply(Math,S(ze));return c.createElement("div",null,te.map(function(ie,le){return c.createElement("div",{id:"heatmap-row",key:le,style:{display:"flex"}},c.createElement(g,{width:oe},c.createElement("div",{style:{position:"absolute",textAlign:me,paddingRight:"5px",paddingTop:"".concat(ce/3.7,"px"),width:"".concat(oe,"px")}},Y&&ie)),J.map(function(fe,be){var He=ue[le][be],Je=Object.assign({cursor:"".concat(_e),margin:"1px 1px 0 0",height:ce,width:Qe?"".concat(ce,"px"):void 0,flex:Qe?"none":1,textAlign:"center"},Be(K,He,it,Fe,ue,be,le));return c.createElement("div",{id:"single-heatmap-cell",onClick:Le.bind(void 0,be,le),title:xe(He,Z,be,le),key:"".concat(be,"_").concat(le),style:Je},c.createElement("div",{style:{paddingTop:"".concat(ce/3.7,"px")}},De(He,fe,ie)))}))}))};j.propTypes={xLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,yLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,data:i().arrayOf(i().array).isRequired,background:i().string.isRequired,height:i().number.isRequired,xLabelWidth:i().number.isRequired,yLabelWidth:i().number.isRequired,yLabelTextAlign:i().string.isRequired,unit:i().string.isRequired,displayYLabels:i().bool,onClick:i().func,cursor:i().string,squares:i().bool,cellRender:i().func.isRequired,cellStyle:i().func.isRequired,title:i().func},j.defaultProps={displayYLabels:!0,cursor:"",onClick:function(){},squares:!1,title:function($,J){return($||$===0)&&"".concat($," ").concat(J)}};const R=j;function N($){var J=$.xLabels,te=$.yLabels,ue=$.data,oe=$.background,K=$.height,ce=$.xLabelWidth,me=$.yLabelWidth,Z=$.xLabelsLocation,Y=$.yLabelTextAlign,Le=$.xLabelsVisibility,_e=$.unit,Qe=$.displayYLabels,De=$.onClick,Be=$.squares,xe=$.cellRender,ze=$.cellStyle,Fe=$.title,it="";De!==void 0&&(it="pointer");var ie=c.createElement(B,{labels:J,width:ce,labelsVisibility:Le,height:K,squares:Be,yWidth:me});return c.createElement("div",{id:"outer-container"},Z==="top"&&ie,c.createElement(R,{xLabels:J,yLabels:te,data:ue,background:oe,height:K,xLabelWidth:ce,yLabelWidth:me,yLabelTextAlign:Y,unit:_e,xLabelsLocation:Z,displayYLabels:Qe,onClick:De,cursor:it,squares:Be,cellRender:xe,cellStyle:ze,title:Fe}),Z==="bottom"&&ie)}N.propTypes={xLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,yLabels:i().arrayOf(i().oneOfType([i().string,i().number,i().object])).isRequired,data:i().arrayOf(i().array).isRequired,background:i().string,height:i().number,xLabelWidth:i().number,yLabelWidth:i().number,xLabelsLocation:i().oneOf(["top","bottom"]),xLabelsVisibility:i().arrayOf(i().bool),yLabelTextAlign:i().string,displayYLabels:i().bool,unit:i().string,onClick:i().func,squares:i().bool,cellRender:i().func,cellStyle:i().func,title:i().func},N.defaultProps={background:"#329fff",height:30,xLabelWidth:60,yLabelWidth:40,yLabelTextAlign:"right",unit:"",xLabelsLocation:"top",xLabelsVisibility:null,displayYLabels:!0,onClick:void 0,squares:!1,cellRender:function(){return null},cellStyle:function($,J,te,ue){return{background:$,opacity:(J-te)/(ue-te)||0}}};const U=N})(),o})()})})(G4e);const q4e=()=>{var Y,Le,_e,Qe,De;const[t,e]=ve.useState(null),[r,n]=ve.useState(null),[s,o]=ve.useState(!0),[c,u]=ve.useState(null),A=((Y=Ju().state)==null?void 0:Y.forestId)||1,[g,C]=ve.useState(null),[B,S]=ve.useState(null),P=ve.useRef(),[j,R]=ve.useState({width:window.innerWidth,height:window.innerHeight}),[N,U]=ve.useState({protectedStatus:{counts:{},percentages:{}},indigenousStatus:""}),[$,J]=ve.useState({nonZeroValues:[],nonZeroCount:0,percentageCoverExtent:0,valueCountArray:[]}),[te,ue]=ve.useState({mostCommonValue:0,frequencyCounts:0}),oe={1:"Commodity driven deforestation",2:"Shifting Agriculture",3:"Forestry",4:"Wildfire",5:"Urbanization"};ve.useEffect(()=>{const Be=()=>{R({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Be),()=>{window.removeEventListener("resize",Be)}},[]),ve.useEffect(()=>{var Be,xe,ze,Fe,it,ie,le;if(Array.isArray(r)&&r.length>2){console.log("Updated geoData:",r),console.log("tsc driver driver:",(Be=r[3])==null?void 0:Be.data_fields);const fe=Array.isArray((xe=r[2])==null?void 0:xe.data_fields)?r[2].data_fields:[];let be=[],He=0,Je={};fe.forEach(Fr=>{const Gr=Fr.wri_tropical_tree_cover_extent__decile;Gr!==0&&(be.push(Gr),He++,Je[Gr]?Je[Gr]++:Je[Gr]=1)});const tt=fe.length,st=tt>0?He/tt*100:0,Ct=Object.entries(Je).map(([Fr,Gr])=>({value:Number(Fr),count:Gr}));J({nonZeroValues:be,nonZeroCount:He,percentageCoverExtent:st,valueCountArray:Ct}),console.log("cover extent decile:",$);const Ft=Array.isArray((ze=r[3])==null?void 0:ze.data_fields)?r[3].data_fields:[];let Zt={},fr=null,Ye=0;Ft.forEach(Fr=>{const Gr=Fr==null?void 0:Fr.tsc_tree_cover_loss_drivers__driver;Gr!=null&&(Zt[Gr]=(Zt[Gr]||0)+1,Zt[Gr]>Ye&&(fr=Gr,Ye=Zt[Gr]))});const Re={mostCommonValue:fr,frequencyCounts:Zt};console.log("analyst",Re),ue(Re),console.log("tsc driver driver:",te);const hr={},Ut=((it=(Fe=r[1])==null?void 0:Fe.data_fields)==null?void 0:it.area__ha)||0,vt=(ie=r[7])!=null&&ie.data_fields?r[7].data_fields:[],Yt={};if(Ut===0){const Fr=(le=r[6])==null?void 0:le.data_fields;!Fr||Fr.length===0?hr.indigenousStatus="Not known, land is not gazetted":Fr.includes(1)?hr.indigenousStatus="Presence of indigenous and community lands":hr.indigenousStatus="No presence of indigenous and community lands"}vt.forEach(Fr=>{const Gr=(Fr==null?void 0:Fr.wdpa_protected_areas__iucn_cat)??0;Yt[Gr]!==void 0?Yt[Gr]++:Yt[Gr]=1});const ar=vt.length,nr={};if(ar>0)for(const[Fr,Gr]of Object.entries(Yt))nr[Fr]=(Gr/ar*100).toFixed(2)+"%";else nr["No Data"]="0%";hr.protectedStatus={counts:Yt,percentages:nr},U(hr),console.log("Rsultats calculs:",N)}},[r]);const K=Be=>{const ze=Ad({type:"Feature",geometry:{type:"Polygon",coordinates:[Be]}}),Fe=ze/1e4;return{areaInSquareMeters:ze,areaInHectares:Fe}};ve.useEffect(()=>{(async()=>{var xe,ze,Fe;console.log("Fetching forest report for forestId:",A);try{const it=await Mr.get(`/api/gfw/forests/${A}/report`);if(it.data.error)console.error("Error in API response:",it.data.error),u(it.data.error);else{console.log("API Response:",it.data),e(it.data.forest_info);const ie=it.data.report||[];if(console.log("Report Data:",ie),n(ie),ie.length>0&&((ze=(xe=ie[0])==null?void 0:xe.coordinates)==null?void 0:ze.length)>0){const le=ie[0].coordinates[0];console.log("Coordinates:",le);const{areaInSquareMeters:fe,areaInHectares:be}=K(le);C(fe),S(be),console.log("Area in m:",fe,"Area in ha:",be)}else console.warn("No valid polygon data in report")}}catch(it){u("Failed to fetch farm report."),console.error("Error fetching farm report:",((Fe=it.response)==null?void 0:Fe.data)||it.message)}finally{o(!1)}})()},[A]);const ce=Be=>{const xe={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[Be]},properties:{stroke:"#00FF00","stroke-width":4,"stroke-opacity":1,fill:"#00FF00","fill-opacity":.2}}]};console.log(xe);const ze=encodeURIComponent(JSON.stringify(xe));console.log(j);const Fe=Math.min(j.width,1280);return`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/geojson(${ze})/auto/${Fe}x500?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`},me=async()=>{const Be=P.current,xe=new ns("p","mm","a4"),ze=Be.querySelectorAll(".page"),Fe="nkusu@agriyields.com";for(let it=0;it<ze.length;it++){await new Promise(st=>{const Ct=ze[it].getElementsByTagName("img");let Ue=0;Ct.length===0?st():Array.from(Ct).forEach(Ft=>{Ft.onload=()=>{Ue+=1,Ue===Ct.length&&st()},Ft.src=Ft.src})});const ie=await WC(ze[it],{scale:2,useCORS:!0}),le=ie.toDataURL("image/png"),fe=xe.internal.pageSize.getWidth(),be=ie.height*fe/ie.width;xe.addImage(le,"PNG",0,0,fe,be);const He=10,Je=fe-xe.getTextWidth(Fe)-He,tt=xe.internal.pageSize.getHeight()-He;xe.setFontSize(10),xe.text(Fe,Je,tt),it<ze.length-1&&xe.addPage()}xe.save("EUDR_Report.pdf")};if(s)return m.jsx(MC,{});if(c)return m.jsx("p",{className:"text-red-600",children:c});const Z=r[1].data_fields.area__ha/B*100;return c==="No polygon found. Please create a polygon for this forest."?m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),m.jsx("p",{className:"text-lg font-medium text-gray-700 mb-6",children:"It seems that no polygon data is available for this forest. You can create a polygon by clicking the link below:"}),m.jsx(Oo,{to:"/create-polygon",className:"inline-block px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Create Polygon"})]}):m.jsxs("div",{className:"flex justify-center flex-col items-center text-xl",children:[m.jsx("div",{ref:P,children:m.jsxs("div",{className:"page bg-white p-6 shadow-md mb-4",children:[m.jsx("img",{src:"/logo.jpg",alt:"Description of image",style:{float:"right",width:"200px",height:"auto"}}),m.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"NKUSU/AGRIYIELDS REPORT"}),t&&m.jsxs("p",{className:"p-4",children:["This report provides an overview of Forest ID ",m.jsx("strong",{children:t.farm_id}),", owned by ",m.jsx("strong",{children:t.name}),",",t.crops&&t.crops.length>0?m.jsxs(m.Fragment,{children:["the farm specializes in ",m.jsx("strong",{children:t.crops[0].crop})," and operates within a region characterized by Landtype: ",m.jsx("strong",{children:t.crops[0].land_type}),"."]}):m.jsx("span",{children:" no specific crops mentioned."}),"This report outlines the farm's activities, challenges, and opportunities to support its continued growth and sustainability."]}),m.jsx("p",{className:"mt-4 pb-6 p-4",children:"Regulation (EU) 2023/1115 governs the availability and export of commodities and products linked to deforestation and degradation. The following analysis provides insights into compliance."}),m.jsxs("div",{className:"bg-white pt-6 p-4 shadow-md mb-4 pl-11",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Report Overview:"}),m.jsx("p",{className:"text-gray-700 mb-6",children:"This report provides a detailed analysis of the farm's environmental and land use context, focusing on the following key aspects:"}),m.jsx("div",{className:"flex justify-center items-center space-x-4",children:m.jsxs("div",{className:"p-2",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"1. R A D D Alert(EUDR, Article 2):"}),m.jsxs("div",{className:"text-gray-700",children:["This dataset verifies if there was recent deforestation, ",m.jsx("strong",{children:" checked every 6-12days:"}),m.jsx("ul",{className:"list-inside list-disc text-gray-700",children:m.jsx("p",{children:"applicable to most parts of Uganda, only parts of Lake Albert region neighbouring DRCongo"})})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"2. Tree Cover Loss (EUDR, Article 2):"}),m.jsxs("div",{className:"text-gray-700",children:["Area in which Tree loss was identified since Dec 2020:",m.jsxs("ul",{className:"list-inside list-disc text-gray-700",children:[m.jsxs("li",{children:[m.jsx("strong",{children:" "})," Plot/Farm is fully compliant with EUDR Law."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"non Zero "})," Plot/Farm likely non compliant with EUDR Law."]})]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"3. Forest Cover (EUDR, Article 2):"}),m.jsxs("div",{className:"text-gray-700",children:["EU joint Research Centre Geostore for checking existence or not of forest cover as of 2020",m.jsxs("ul",{className:"list-inside list-disc text-gray-700",children:[m.jsxs("li",{children:[m.jsx("strong",{children:" "})," Plot/Farm is fully compliant with EUDR Law."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"non Zero "})," = Farm likely non compliant with EUDR Law."]})]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"4. Tree Cover Extent (EUDR, Article 2):"}),m.jsxs("p",{className:"text-gray-700",children:["Analysis of tree cover, expressed in deciles (ranging from ",m.jsx("strong",{children:"0-100"}),"), to evaluate forest coverage."]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"5. Tree Cover Loss Drivers (EUDR Article 10):"}),m.jsx("div",{className:"text-gray-700",children:"What causes Deforestation & Degradation, :"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"5. Protected Area (EUDR Article 10):"}),m.jsx("div",{className:"text-gray-700",children:"whether plot of land is in areas Gazzetted as Protected Areas e.g swamps, national parks etc"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"5. indigenous and community lands (EUDR Article 10):"}),m.jsx("div",{className:"text-gray-700",children:"lands or plots existing within land gazetted as indigenous or community land"})]})]})})]}),m.jsxs("div",{className:"bg-white m-6 p-11 shadow-md mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Tree Cover and Deforestation Risk"}),m.jsxs("table",{className:"table-auto w-full mt-4 border-collapse border border-gray-400",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-200",children:[m.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Metric"}),m.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Value"})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Project Area"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:g&&B&&m.jsxs("div",{children:[m.jsxs("p",{children:[g.toFixed(2)," m"]}),m.jsxs("p",{children:[B.toFixed(2)," ha"]})]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Country Deforestation Risk Level"}),m.jsxs("td",{className:"border border-gray-400 px-4 py-2",children:["Medium ",m.jsx("strong",{children:"Percentage:"})," ",Z.toFixed(2),"%"]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"RADD Alert"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r[0].data_fields.area__ha==="0"||r[0].data_fields.area__ha===0?m.jsx("div",{children:m.jsxs("p",{children:[r[0].data_fields.area__ha," ha (no Radd alert)"]})}):m.jsxs("p",{children:[r[0].data_fields.area__ha," ha (Alert )"]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Tree Cover Loss"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r[1].data_fields.area__ha==="0"||r[1].data_fields.area__ha===0?m.jsx("div",{children:m.jsxs("p",{children:[r[1].data_fields.area__ha," ha (no tree loss since 2020)"]})}):m.jsxs("p",{children:[r[1].data_fields.area__ha," ha of tree cover loss"]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"EUDR compliance"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:((_e=(Le=r[1])==null?void 0:Le.data_fields)==null?void 0:_e.area__ha)!==void 0&&((De=(Qe=r[1])==null?void 0:Qe.data_fields)==null?void 0:De.area__ha)!==null?parseFloat(r[1].data_fields.area__ha)!==0?m.jsx("p",{children:"Not Compliant"}):m.jsx("p",{children:"100% Compliance"}):m.jsx("p",{children:"Data Not Available"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Protected Area Status"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:m.jsx("ul",{children:Object.keys(N.protectedStatus.percentages).map(Be=>{const xe=N.protectedStatus.percentages[Be],ze=Be==="0"?"Plot  not in WDPA protected Area":Be==="1"?"Plot in WDPA protected area":Be==="2"?"Plot in other IUCN vulnerable Area":"Unknown";return m.jsxs("li",{children:["Percentage: ",xe," - Status: ",ze]},Be)})})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Landmark Indigenous and Community Lands"}),m.jsxs("td",{className:"border border-gray-400 px-4 py-2",children:[m.jsx("strong",{})," ",N.indigenousStatus||"N/A"]})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Cover Extent"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:m.jsxs("ul",{children:[m.jsxs("li",{children:["Non Zero Count: ",$.nonZeroCount]}),m.jsxs("li",{children:["Percentage of coverage:"," ",$.percentageCoverExtent.toFixed(2),"%"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Value Count Details:"}),$.valueCountArray.length>0?m.jsx("ul",{className:"mt-2",children:$.valueCountArray.map((Be,xe)=>m.jsxs("li",{children:["percentage: ",Be.value," %, Count: ",Be.count]},xe))}):"No data available"]})]})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Tree Cover Drivers"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:(te==null?void 0:te.mostCommonValue)in oe?m.jsx("p",{children:oe[te==null?void 0:te.mostCommonValue]}):m.jsx("p",{children:"Unknown Value"})})]}),m.jsxs("tr",{children:[m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:"Cover Extent Area"}),m.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r[4].data_fields.area__ha==="0"||r[4].data_fields.area__ha===0?m.jsx("div",{children:m.jsxs("p",{children:[r[4].data_fields.area__ha," ha (LOW)"]})}):m.jsxs("p",{children:[r[4].data_fields.area__ha," ha (HIGH)"]})})]})]})]})]}),m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Risk Assessment Breakdown"}),m.jsxs("p",{children:["Analysis of deforestation drivers shows significant influences from ",(te==null?void 0:te.mostCommonValue)in oe?m.jsx("p",{children:oe[te==null?void 0:te.mostCommonValue]}):m.jsx("p",{children:"Unknown Value"})]}),m.jsx("div",{className:"items-center justify-center mt-6 mb-6",children:m.jsx("div",{className:"overflow-hidden",children:m.jsx("img",{src:ce(r[0].coordinates[0]),alt:"Map for the forest",className:"object-cover w-full h-full"})})})]})}),m.jsx("button",{onClick:me,className:"bg-blue-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-blue-700 transition duration-300",children:"Generate PDF"})]})},$4e=()=>{const[t,e]=ve.useState({username:"",email:"",phonenumber:"",user_type:"farmer",id_start:"",is_admin:!1,password:""}),r=s=>{const{name:o,value:c,type:u,checked:i}=s.target;e(A=>({...A,[o]:u==="checkbox"?i:c}))},n=s=>{s.preventDefault(),console.log(t)};return m.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center",children:m.jsxs("div",{className:"bg-white w-full max-w-lg p-4 rounded-lg shadow-lg",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Create User"}),m.jsxs("form",{onSubmit:n,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"username",className:"block text-gray-700",children:"Username:"}),m.jsx("input",{type:"text",id:"username",name:"username",value:t.username,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-gray-700",children:"Email:"}),m.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"phonenumber",className:"block text-gray-700",children:"Phone number:"}),m.jsx("input",{type:"text",id:"phonenumber",name:"phonenumber",value:t.phonenumber,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"user_type",className:"block text-gray-700",children:"User Type:"}),m.jsxs("select",{id:"user_type",name:"user_type",value:t.user_type,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0,children:[m.jsx("option",{value:"farmer",children:"Farmer"}),m.jsx("option",{value:"forest",children:"Forest"}),m.jsx("option",{value:"admin",children:"Admin"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"id_start",className:"block text-gray-700",children:"ID Start:"}),m.jsx("input",{type:"text",id:"id_start",name:"id_start",value:t.id_start,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),m.jsxs("div",{className:"col-span-2 flex items-center",children:[m.jsx("input",{type:"checkbox",id:"is_admin",name:"is_admin",checked:t.is_admin,onChange:r,className:"mr-2"}),m.jsx("label",{htmlFor:"is_admin",className:"text-gray-700",children:"Admin"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-gray-700",children:"Password:"}),m.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:r,className:"mt-1 p-2 border border-gray-300 rounded w-full",required:!0})]}),m.jsxs("div",{className:"col-span-2 flex justify-end mt-4",children:[m.jsx("button",{type:"reset",className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Create User"})]})]})]})})},W4e=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState(!0),[c,u]=ve.useState(""),[i,A]=ve.useState(""),[g,C]=ve.useState(null),[B,S]=ve.useState(""),[P,j]=ve.useState(""),[R,N]=ve.useState("");ve.useState("");const U="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",$=async(me,Z)=>{const Y=`https://api.mapbox.com/geocoding/v5/mapbox.places/${Z},${me}.json?access_token=${U}&language=EN`;try{const _e=await(await fetch(Y)).json(),Qe=_e.features.find(xe=>xe.place_type.includes("place")),De=_e.features.find(xe=>xe.place_type.includes("region")),Be=_e.features.find(xe=>xe.place_type.includes("country"));S(Qe?Qe.text:"Ville inconnue"),j(De?De.text:"Province inconnue"),N(Be?Be.text:"Pays inconnu")}catch(Le){console.error("Erreur lors de la rcupration du nom de la ville, province et pays:",Le),S("Ville inconnue"),j("Province inconnue"),N("Pays inconnu")}},J=async(me,Z)=>{const Y=`https://api.open-meteo.com/v1/forecast?latitude=${me}&longitude=${Z}&daily=temperature_2m_max,temperature_2m_min&timezone=auto`;console.log("Fetching URL:",Y);try{const Le=await fetch(Y);if(!Le.ok)throw new Error(`HTTP error! status: ${Le.status}`);const _e=await Le.json();if(console.log("Data received from API:",_e),_e.daily){if(_e.daily.temperature_2m_max&&_e.daily.temperature_2m_min&&_e.daily.time){const Qe=_e.daily.temperature_2m_max.map((Be,xe)=>({max:Be,min:_e.daily.temperature_2m_min[xe]}));n(_e.daily.time),e(Qe);const De=Qe.reduce((Be,xe)=>{const ze=(xe.max+xe.min)/2;return Be+ze},0)/Qe.length;C(De)}}else console.error("Invalid data format from API")}catch(Le){console.error("Failed to fetch weather data:",Le)}finally{o(!1)}};ve.useEffect(()=>{c&&i&&($(c,i),J(c,i))},[c,i]);const te=()=>{if(g===null)return{hdd:[],cdd:[],gdd:[]};const me=t.map(Le=>{const _e=(Le.max+Le.min)/2;return g-_e}),Z=t.map(Le=>(Le.max+Le.min)/2-g),Y=t.map(Le=>(Le.max+Le.min)/2-g);return{hdd:me,cdd:Z,gdd:Y}},{hdd:ue,cdd:oe,gdd:K}=te(),ce={labels:r,datasets:[{label:"Heating Degree Days (HDD)",data:ue,backgroundColor:"rgba(75,192,192,0.5)",borderColor:"rgba(75,192,192,1)",borderWidth:1,tension:.4,fill:!0},{label:"Cooling Degree Days (CDD)",data:oe,backgroundColor:"rgba(153,102,255,0.5)",borderColor:"rgba(153,102,255,1)",borderWidth:1,tension:.4,fill:!0},{label:"Growing Degree Days (GDD)",data:K,backgroundColor:"rgba(255, 179, 71, 0.5)",borderColor:"rgba(255, 179, 71, 1)",borderWidth:1,tension:.4}]};return m.jsxs("div",{className:"text-center max-w-6xl mx-auto mt-10",children:[m.jsx("h3",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Heating, Cooling, and Growing Degree Days"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("input",{type:"number",value:c,onChange:me=>u(parseFloat(me.target.value)),placeholder:"Latitude",className:"mr-2 p-2 border rounded"}),m.jsx("input",{type:"number",value:i,onChange:me=>A(parseFloat(me.target.value)),placeholder:"Longitude",className:"mr-2 p-2 border rounded"})]}),m.jsxs("div",{className:"bg-white shadow-md rounded-lg p-2",children:[m.jsxs("h4",{className:"text-lg font-medium text-gray-700",children:["Location: ",B,", ",P,", ",R]})," ",m.jsx(dC,{data:ce})]})]})},bz=({children:t,adminOnly:e=!1})=>{var n;const r=localStorage.getItem("token");if(!r)return m.jsx(Jv,{to:"/login",replace:!0});try{const s=TC(r),o=Date.now()/1e3;return s.exp<o?(localStorage.removeItem("token"),m.jsx(Jv,{to:"/login",replace:!0})):e&&((n=s.sub)==null?void 0:n.user_type)!=="admin"?m.jsx(Jv,{to:"/login",replace:!0}):t}catch{return localStorage.removeItem("token"),m.jsx(Jv,{to:"/login",replace:!0})}},K4e=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState(""),[s,o]=ve.useState(""),[c,u]=ve.useState(null),[i,A]=ve.useState(""),[g,C]=ve.useState(""),[B,S]=ve.useState(!1),P=async()=>{try{const $=await Mr.get("/api/farmergroup/");e($.data)}catch($){console.error("Error fetching farmer groups:",$)}},j=async $=>{$.preventDefault();try{const J=await Mr.post("/api/farmergroup/create",{name:r,description:s});e([...t,J.data.farmer_group]),n(""),o(""),S(!1),Ao.fire({title:"Success!",text:"Farmer group created successfully!",icon:"success",confirmButtonText:"OK"})}catch(J){console.error("Error creating farmer group:",J)}},R=async $=>{try{const J=await Mr.put(`/api/farmergroup/${$}`,{name:i,description:g});e(t.map(te=>te.id===$?J.data.farmer_group:te)),u(null),Ao.fire({title:"Success!",text:"Farmer group updated successfully!",icon:"success",confirmButtonText:"OK"})}catch(J){console.error("Error updating farmer group:",J)}},N=async $=>{if((await Ao.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"})).isConfirmed)try{await Mr.delete(`/api/farmergroup/${$}`),e(t.filter(te=>te.id!==$)),Ao.fire({title:"Deleted!",text:"Farmer group deleted successfully!",icon:"success",confirmButtonText:"OK"})}catch(te){console.error("Error deleting farmer group:",te)}},U=$=>{u($.id),A($.name),C($.description)};return ve.useEffect(()=>{P()},[]),m.jsxs("div",{className:"container mx-auto mt-8 p-6 bg-white shadow-lg rounded-lg",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-green-600",children:"Farmer Groups"}),m.jsx("button",{onClick:()=>S(!0),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300",children:"Create Cooperative"}),B&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[m.jsx("h3",{className:"text-lg font-bold mb-4",children:"Create Farmer Group"}),m.jsxs("form",{onSubmit:j,children:[m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",placeholder:"Name",value:r,onChange:$=>n($.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400",required:!0})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",placeholder:"Description",value:s,onChange:$=>o($.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400",required:!0})}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("button",{type:"submit",className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300",children:"Create"}),m.jsx("button",{type:"button",onClick:()=>S(!1),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-300",children:"Cancel"})]})]})]})}),m.jsx("ul",{className:"space-y-4 mt-6",children:t.map($=>m.jsx("li",{className:"border border-gray-200 p-4 rounded-lg shadow-sm",children:c===$.id?m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",value:i,onChange:J=>A(J.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400"})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",value:g,onChange:J=>C(J.target.value),className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-green-400"})}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("button",{onClick:()=>R($.id),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300",children:"Save"}),m.jsx("button",{onClick:()=>u(null),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-300",children:"Cancel"})]})]}):m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("strong",{className:"text-lg font-semibold text-green-600",children:$.name}),m.jsx("p",{children:$.description})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>U($),className:"bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-600 transition duration-300",children:"Edit"}),m.jsx("button",{onClick:()=>N($.id),className:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600 transition duration-300",children:"Delete"})]})]})},$.id))})]})};var DK={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((r,n)=>{t.exports=n()})(Ho,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,o=!n.document&&!!n.postMessage,c=n.IS_PAPA_WORKER||!1,u={},i=0,A={};function g(K){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(ce){var me=te(ce);me.chunkSize=parseInt(me.chunkSize),ce.step||ce.chunk||(me.chunkSize=null),this._handle=new j(me),(this._handle.streamer=this)._config=me}).call(this,K),this.parseChunk=function(ce,me){var Z=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Z){let Le=this._config.newline;Le||(Y=this._config.quoteChar||'"',Le=this._handle.guessLineEndings(ce,Y)),ce=[...ce.split(Le).slice(Z)].join(Le)}this.isFirstChunk&&oe(this._config.beforeFirstChunk)&&(Y=this._config.beforeFirstChunk(ce))!==void 0&&(ce=Y),this.isFirstChunk=!1,this._halted=!1;var Z=this._partialLine+ce,Y=(this._partialLine="",this._handle.parse(Z,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(ce=Y.meta.cursor,Z=(this._finished||(this._partialLine=Z.substring(ce-this._baseIndex),this._baseIndex=ce),Y&&Y.data&&(this._rowCount+=Y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)n.postMessage({results:Y,workerId:A.WORKER_ID,finished:Z});else if(oe(this._config.chunk)&&!me){if(this._config.chunk(Y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Y.data),this._completeResults.errors=this._completeResults.errors.concat(Y.errors),this._completeResults.meta=Y.meta),this._completed||!Z||!oe(this._config.complete)||Y&&Y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Z||Y&&Y.meta.paused||this._nextChunk(),Y}this._halted=!0},this._sendError=function(ce){oe(this._config.error)?this._config.error(ce):c&&this._config.error&&n.postMessage({workerId:A.WORKER_ID,error:ce,finished:!1})}}function C(K){var ce;(K=K||{}).chunkSize||(K.chunkSize=A.RemoteChunkSize),g.call(this,K),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(me){this._input=me,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(ce=new XMLHttpRequest,this._config.withCredentials&&(ce.withCredentials=this._config.withCredentials),o||(ce.onload=ue(this._chunkLoaded,this),ce.onerror=ue(this._chunkError,this)),ce.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var me,Z=this._config.downloadRequestHeaders;for(me in Z)ce.setRequestHeader(me,Z[me])}var Y;this._config.chunkSize&&(Y=this._start+this._config.chunkSize-1,ce.setRequestHeader("Range","bytes="+this._start+"-"+Y));try{ce.send(this._config.downloadRequestBody)}catch(Le){this._chunkError(Le.message)}o&&ce.status===0&&this._chunkError()}},this._chunkLoaded=function(){ce.readyState===4&&(ce.status<200||400<=ce.status?this._chunkError():(this._start+=this._config.chunkSize||ce.responseText.length,this._finished=!this._config.chunkSize||this._start>=(me=>(me=me.getResponseHeader("Content-Range"))!==null?parseInt(me.substring(me.lastIndexOf("/")+1)):-1)(ce),this.parseChunk(ce.responseText)))},this._chunkError=function(me){me=ce.statusText||me,this._sendError(new Error(me))}}function B(K){(K=K||{}).chunkSize||(K.chunkSize=A.LocalChunkSize),g.call(this,K);var ce,me,Z=typeof FileReader<"u";this.stream=function(Y){this._input=Y,me=Y.slice||Y.webkitSlice||Y.mozSlice,Z?((ce=new FileReader).onload=ue(this._chunkLoaded,this),ce.onerror=ue(this._chunkError,this)):ce=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Y=this._input,Le=(this._config.chunkSize&&(Le=Math.min(this._start+this._config.chunkSize,this._input.size),Y=me.call(Y,this._start,Le)),ce.readAsText(Y,this._config.encoding));Z||this._chunkLoaded({target:{result:Le}})},this._chunkLoaded=function(Y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Y.target.result)},this._chunkError=function(){this._sendError(ce.error)}}function S(K){var ce;g.call(this,K=K||{}),this.stream=function(me){return ce=me,this._nextChunk()},this._nextChunk=function(){var me,Z;if(!this._finished)return me=this._config.chunkSize,ce=me?(Z=ce.substring(0,me),ce.substring(me)):(Z=ce,""),this._finished=!ce,this.parseChunk(Z)}}function P(K){g.call(this,K=K||{});var ce=[],me=!0,Z=!1;this.pause=function(){g.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){g.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Y){this._input=Y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Z&&ce.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),ce.length?this.parseChunk(ce.shift()):me=!0},this._streamData=ue(function(Y){try{ce.push(typeof Y=="string"?Y:Y.toString(this._config.encoding)),me&&(me=!1,this._checkIsFinished(),this.parseChunk(ce.shift()))}catch(Le){this._streamError(Le)}},this),this._streamError=ue(function(Y){this._streamCleanUp(),this._sendError(Y)},this),this._streamEnd=ue(function(){this._streamCleanUp(),Z=!0,this._streamData("")},this),this._streamCleanUp=ue(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function j(K){var ce,me,Z,Y,Le=Math.pow(2,53),_e=-Le,Qe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,De=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Be=this,xe=0,ze=0,Fe=!1,it=!1,ie=[],le={data:[],errors:[],meta:{}};function fe(tt){return K.skipEmptyLines==="greedy"?tt.join("").trim()==="":tt.length===1&&tt[0].length===0}function be(){if(le&&Z&&(Je("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+A.DefaultDelimiter+"'"),Z=!1),K.skipEmptyLines&&(le.data=le.data.filter(function(Ue){return!fe(Ue)})),He()){let Ue=function(Ft,Zt){oe(K.transformHeader)&&(Ft=K.transformHeader(Ft,Zt)),ie.push(Ft)};if(le)if(Array.isArray(le.data[0])){for(var tt=0;He()&&tt<le.data.length;tt++)le.data[tt].forEach(Ue);le.data.splice(0,1)}else le.data.forEach(Ue)}function st(Ue,Ft){for(var Zt=K.header?{}:[],fr=0;fr<Ue.length;fr++){var Ye=fr,Re=Ue[fr],Re=((hr,Ut)=>(vt=>(K.dynamicTypingFunction&&K.dynamicTyping[vt]===void 0&&(K.dynamicTyping[vt]=K.dynamicTypingFunction(vt)),(K.dynamicTyping[vt]||K.dynamicTyping)===!0))(hr)?Ut==="true"||Ut==="TRUE"||Ut!=="false"&&Ut!=="FALSE"&&((vt=>{if(Qe.test(vt)&&(vt=parseFloat(vt),_e<vt&&vt<Le))return 1})(Ut)?parseFloat(Ut):De.test(Ut)?new Date(Ut):Ut===""?null:Ut):Ut)(Ye=K.header?fr>=ie.length?"__parsed_extra":ie[fr]:Ye,Re=K.transform?K.transform(Re,Ye):Re);Ye==="__parsed_extra"?(Zt[Ye]=Zt[Ye]||[],Zt[Ye].push(Re)):Zt[Ye]=Re}return K.header&&(fr>ie.length?Je("FieldMismatch","TooManyFields","Too many fields: expected "+ie.length+" fields but parsed "+fr,ze+Ft):fr<ie.length&&Je("FieldMismatch","TooFewFields","Too few fields: expected "+ie.length+" fields but parsed "+fr,ze+Ft)),Zt}var Ct;le&&(K.header||K.dynamicTyping||K.transform)&&(Ct=1,!le.data.length||Array.isArray(le.data[0])?(le.data=le.data.map(st),Ct=le.data.length):le.data=st(le.data,0),K.header&&le.meta&&(le.meta.fields=ie),ze+=Ct)}function He(){return K.header&&ie.length===0}function Je(tt,st,Ct,Ue){tt={type:tt,code:st,message:Ct},Ue!==void 0&&(tt.row=Ue),le.errors.push(tt)}oe(K.step)&&(Y=K.step,K.step=function(tt){le=tt,He()?be():(be(),le.data.length!==0&&(xe+=tt.data.length,K.preview&&xe>K.preview?me.abort():(le.data=le.data[0],Y(le,Be))))}),this.parse=function(tt,st,Ct){var Ue=K.quoteChar||'"',Ue=(K.newline||(K.newline=this.guessLineEndings(tt,Ue)),Z=!1,K.delimiter?oe(K.delimiter)&&(K.delimiter=K.delimiter(tt),le.meta.delimiter=K.delimiter):((Ue=((Ft,Zt,fr,Ye,Re)=>{var hr,Ut,vt,Yt;Re=Re||[",","	","|",";",A.RECORD_SEP,A.UNIT_SEP];for(var ar=0;ar<Re.length;ar++){for(var nr,Fr=Re[ar],Gr=0,Ir=0,cn=0,Sn=(vt=void 0,new N({comments:Ye,delimiter:Fr,newline:Zt,preview:10}).parse(Ft)),En=0;En<Sn.data.length;En++)fr&&fe(Sn.data[En])?cn++:(nr=Sn.data[En].length,Ir+=nr,vt===void 0?vt=nr:0<nr&&(Gr+=Math.abs(nr-vt),vt=nr));0<Sn.data.length&&(Ir/=Sn.data.length-cn),(Ut===void 0||Gr<=Ut)&&(Yt===void 0||Yt<Ir)&&1.99<Ir&&(Ut=Gr,hr=Fr,Yt=Ir)}return{successful:!!(K.delimiter=hr),bestDelimiter:hr}})(tt,K.newline,K.skipEmptyLines,K.comments,K.delimitersToGuess)).successful?K.delimiter=Ue.bestDelimiter:(Z=!0,K.delimiter=A.DefaultDelimiter),le.meta.delimiter=K.delimiter),te(K));return K.preview&&K.header&&Ue.preview++,ce=tt,me=new N(Ue),le=me.parse(ce,st,Ct),be(),Fe?{meta:{paused:!0}}:le||{meta:{paused:!1}}},this.paused=function(){return Fe},this.pause=function(){Fe=!0,me.abort(),ce=oe(K.chunk)?"":ce.substring(me.getCharIndex())},this.resume=function(){Be.streamer._halted?(Fe=!1,Be.streamer.parseChunk(ce,!0)):setTimeout(Be.resume,3)},this.aborted=function(){return it},this.abort=function(){it=!0,me.abort(),le.meta.aborted=!0,oe(K.complete)&&K.complete(le),ce=""},this.guessLineEndings=function(Ft,Ue){Ft=Ft.substring(0,1048576);var Ue=new RegExp(R(Ue)+"([^]*?)"+R(Ue),"gm"),Ct=(Ft=Ft.replace(Ue,"")).split("\r"),Ue=Ft.split(`
`),Ft=1<Ue.length&&Ue[0].length<Ct[0].length;if(Ct.length===1||Ft)return`
`;for(var Zt=0,fr=0;fr<Ct.length;fr++)Ct[fr][0]===`
`&&Zt++;return Zt>=Ct.length/2?`\r
`:"\r"}}function R(K){return K.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function N(K){var ce=(K=K||{}).delimiter,me=K.newline,Z=K.comments,Y=K.step,Le=K.preview,_e=K.fastMode,Qe=null,De=!1,Be=K.quoteChar==null?'"':K.quoteChar,xe=Be;if(K.escapeChar!==void 0&&(xe=K.escapeChar),(typeof ce!="string"||-1<A.BAD_DELIMITERS.indexOf(ce))&&(ce=","),Z===ce)throw new Error("Comment character same as delimiter");Z===!0?Z="#":(typeof Z!="string"||-1<A.BAD_DELIMITERS.indexOf(Z))&&(Z=!1),me!==`
`&&me!=="\r"&&me!==`\r
`&&(me=`
`);var ze=0,Fe=!1;this.parse=function(it,ie,le){if(typeof it!="string")throw new Error("Input must be a string");var fe=it.length,be=ce.length,He=me.length,Je=Z.length,tt=oe(Y),st=[],Ct=[],Ue=[],Ft=ze=0;if(!it)return Gr();if(_e||_e!==!1&&it.indexOf(Be)===-1){for(var Zt=it.split(me),fr=0;fr<Zt.length;fr++){if(Ue=Zt[fr],ze+=Ue.length,fr!==Zt.length-1)ze+=me.length;else if(le)return Gr();if(!Z||Ue.substring(0,Je)!==Z){if(tt){if(st=[],Yt(Ue.split(ce)),Ir(),Fe)return Gr()}else Yt(Ue.split(ce));if(Le&&Le<=fr)return st=st.slice(0,Le),Gr(!0)}}return Gr()}for(var Ye=it.indexOf(ce,ze),Re=it.indexOf(me,ze),hr=new RegExp(R(xe)+R(Be),"g"),Ut=it.indexOf(Be,ze);;)if(it[ze]===Be)for(Ut=ze,ze++;;){if((Ut=it.indexOf(Be,Ut+1))===-1)return le||Ct.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:st.length,index:ze}),nr();if(Ut===fe-1)return nr(it.substring(ze,Ut).replace(hr,Be));if(Be===xe&&it[Ut+1]===xe)Ut++;else if(Be===xe||Ut===0||it[Ut-1]!==xe){Ye!==-1&&Ye<Ut+1&&(Ye=it.indexOf(ce,Ut+1));var vt=ar((Re=Re!==-1&&Re<Ut+1?it.indexOf(me,Ut+1):Re)===-1?Ye:Math.min(Ye,Re));if(it.substr(Ut+1+vt,be)===ce){Ue.push(it.substring(ze,Ut).replace(hr,Be)),it[ze=Ut+1+vt+be]!==Be&&(Ut=it.indexOf(Be,ze)),Ye=it.indexOf(ce,ze),Re=it.indexOf(me,ze);break}if(vt=ar(Re),it.substring(Ut+1+vt,Ut+1+vt+He)===me){if(Ue.push(it.substring(ze,Ut).replace(hr,Be)),Fr(Ut+1+vt+He),Ye=it.indexOf(ce,ze),Ut=it.indexOf(Be,ze),tt&&(Ir(),Fe))return Gr();if(Le&&st.length>=Le)return Gr(!0);break}Ct.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:st.length,index:ze}),Ut++}}else if(Z&&Ue.length===0&&it.substring(ze,ze+Je)===Z){if(Re===-1)return Gr();ze=Re+He,Re=it.indexOf(me,ze),Ye=it.indexOf(ce,ze)}else if(Ye!==-1&&(Ye<Re||Re===-1))Ue.push(it.substring(ze,Ye)),ze=Ye+be,Ye=it.indexOf(ce,ze);else{if(Re===-1)break;if(Ue.push(it.substring(ze,Re)),Fr(Re+He),tt&&(Ir(),Fe))return Gr();if(Le&&st.length>=Le)return Gr(!0)}return nr();function Yt(cn){st.push(cn),Ft=ze}function ar(cn){var Sn=0;return Sn=cn!==-1&&(cn=it.substring(Ut+1,cn))&&cn.trim()===""?cn.length:Sn}function nr(cn){return le||(cn===void 0&&(cn=it.substring(ze)),Ue.push(cn),ze=fe,Yt(Ue),tt&&Ir()),Gr()}function Fr(cn){ze=cn,Yt(Ue),Ue=[],Re=it.indexOf(me,ze)}function Gr(cn){if(K.header&&!ie&&st.length&&!De){var Sn=st[0],En={},an=new Set(Sn);let lr=!1;for(let Xt=0;Xt<Sn.length;Xt++){let qr=Sn[Xt];if(En[qr=oe(K.transformHeader)?K.transformHeader(qr,Xt):qr]){let Kr,kn=En[qr];for(;Kr=qr+"_"+kn,kn++,an.has(Kr););an.add(Kr),Sn[Xt]=Kr,En[qr]++,lr=!0,(Qe=Qe===null?{}:Qe)[Kr]=qr}else En[qr]=1,Sn[Xt]=qr;an.add(qr)}lr&&console.warn("Duplicate headers found and renamed."),De=!0}return{data:st,errors:Ct,meta:{delimiter:ce,linebreak:me,aborted:Fe,truncated:!!cn,cursor:Ft+(ie||0),renamedHeaders:Qe}}}function Ir(){Y(Gr()),st=[],Ct=[]}},this.abort=function(){Fe=!0},this.getCharIndex=function(){return ze}}function U(K){var ce=K.data,me=u[ce.workerId],Z=!1;if(ce.error)me.userError(ce.error,ce.file);else if(ce.results&&ce.results.data){var Y={abort:function(){Z=!0,$(ce.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:J,resume:J};if(oe(me.userStep)){for(var Le=0;Le<ce.results.data.length&&(me.userStep({data:ce.results.data[Le],errors:ce.results.errors,meta:ce.results.meta},Y),!Z);Le++);delete ce.results}else oe(me.userChunk)&&(me.userChunk(ce.results,Y,ce.file),delete ce.results)}ce.finished&&!Z&&$(ce.workerId,ce.results)}function $(K,ce){var me=u[K];oe(me.userComplete)&&me.userComplete(ce),me.terminate(),delete u[K]}function J(){throw new Error("Not implemented.")}function te(K){if(typeof K!="object"||K===null)return K;var ce,me=Array.isArray(K)?[]:{};for(ce in K)me[ce]=te(K[ce]);return me}function ue(K,ce){return function(){K.apply(ce,arguments)}}function oe(K){return typeof K=="function"}return A.parse=function(K,ce){var me=(ce=ce||{}).dynamicTyping||!1;if(oe(me)&&(ce.dynamicTypingFunction=me,me={}),ce.dynamicTyping=me,ce.transform=!!oe(ce.transform)&&ce.transform,!ce.worker||!A.WORKERS_SUPPORTED)return me=null,A.NODE_STREAM_INPUT,typeof K=="string"?(K=(Z=>Z.charCodeAt(0)!==65279?Z:Z.slice(1))(K),me=new(ce.download?C:S)(ce)):K.readable===!0&&oe(K.read)&&oe(K.on)?me=new P(ce):(n.File&&K instanceof File||K instanceof Object)&&(me=new B(ce)),me.stream(K);(me=(()=>{var Z;return!!A.WORKERS_SUPPORTED&&(Z=(()=>{var Y=n.URL||n.webkitURL||null,Le=r.toString();return A.BLOB_URL||(A.BLOB_URL=Y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Le,")();"],{type:"text/javascript"})))})(),(Z=new n.Worker(Z)).onmessage=U,Z.id=i++,u[Z.id]=Z)})()).userStep=ce.step,me.userChunk=ce.chunk,me.userComplete=ce.complete,me.userError=ce.error,ce.step=oe(ce.step),ce.chunk=oe(ce.chunk),ce.complete=oe(ce.complete),ce.error=oe(ce.error),delete ce.worker,me.postMessage({input:K,config:ce,workerId:me.id})},A.unparse=function(K,ce){var me=!1,Z=!0,Y=",",Le=`\r
`,_e='"',Qe=_e+_e,De=!1,Be=null,xe=!1,ze=((()=>{if(typeof ce=="object"){if(typeof ce.delimiter!="string"||A.BAD_DELIMITERS.filter(function(ie){return ce.delimiter.indexOf(ie)!==-1}).length||(Y=ce.delimiter),typeof ce.quotes!="boolean"&&typeof ce.quotes!="function"&&!Array.isArray(ce.quotes)||(me=ce.quotes),typeof ce.skipEmptyLines!="boolean"&&typeof ce.skipEmptyLines!="string"||(De=ce.skipEmptyLines),typeof ce.newline=="string"&&(Le=ce.newline),typeof ce.quoteChar=="string"&&(_e=ce.quoteChar),typeof ce.header=="boolean"&&(Z=ce.header),Array.isArray(ce.columns)){if(ce.columns.length===0)throw new Error("Option columns is empty");Be=ce.columns}ce.escapeChar!==void 0&&(Qe=ce.escapeChar+_e),ce.escapeFormulae instanceof RegExp?xe=ce.escapeFormulae:typeof ce.escapeFormulae=="boolean"&&ce.escapeFormulae&&(xe=/^[=+\-@\t\r].*$/)}})(),new RegExp(R(_e),"g"));if(typeof K=="string"&&(K=JSON.parse(K)),Array.isArray(K)){if(!K.length||Array.isArray(K[0]))return Fe(null,K,De);if(typeof K[0]=="object")return Fe(Be||Object.keys(K[0]),K,De)}else if(typeof K=="object")return typeof K.data=="string"&&(K.data=JSON.parse(K.data)),Array.isArray(K.data)&&(K.fields||(K.fields=K.meta&&K.meta.fields||Be),K.fields||(K.fields=Array.isArray(K.data[0])?K.fields:typeof K.data[0]=="object"?Object.keys(K.data[0]):[]),Array.isArray(K.data[0])||typeof K.data[0]=="object"||(K.data=[K.data])),Fe(K.fields||[],K.data||[],De);throw new Error("Unable to serialize unrecognized input");function Fe(ie,le,fe){var be="",He=(typeof ie=="string"&&(ie=JSON.parse(ie)),typeof le=="string"&&(le=JSON.parse(le)),Array.isArray(ie)&&0<ie.length),Je=!Array.isArray(le[0]);if(He&&Z){for(var tt=0;tt<ie.length;tt++)0<tt&&(be+=Y),be+=it(ie[tt],tt);0<le.length&&(be+=Le)}for(var st=0;st<le.length;st++){var Ct=(He?ie:le[st]).length,Ue=!1,Ft=He?Object.keys(le[st]).length===0:le[st].length===0;if(fe&&!He&&(Ue=fe==="greedy"?le[st].join("").trim()==="":le[st].length===1&&le[st][0].length===0),fe==="greedy"&&He){for(var Zt=[],fr=0;fr<Ct;fr++){var Ye=Je?ie[fr]:fr;Zt.push(le[st][Ye])}Ue=Zt.join("").trim()===""}if(!Ue){for(var Re=0;Re<Ct;Re++){0<Re&&!Ft&&(be+=Y);var hr=He&&Je?ie[Re]:Re;be+=it(le[st][hr],Re)}st<le.length-1&&(!fe||0<Ct&&!Ft)&&(be+=Le)}}return be}function it(ie,le){var fe,be;return ie==null?"":ie.constructor===Date?JSON.stringify(ie).slice(1,25):(be=!1,xe&&typeof ie=="string"&&xe.test(ie)&&(ie="'"+ie,be=!0),fe=ie.toString().replace(ze,Qe),(be=be||me===!0||typeof me=="function"&&me(ie,le)||Array.isArray(me)&&me[le]||((He,Je)=>{for(var tt=0;tt<Je.length;tt++)if(-1<He.indexOf(Je[tt]))return!0;return!1})(fe,A.BAD_DELIMITERS)||-1<fe.indexOf(Y)||fe.charAt(0)===" "||fe.charAt(fe.length-1)===" ")?_e+fe+_e:fe)}},A.RECORD_SEP="",A.UNIT_SEP="",A.BYTE_ORDER_MARK="\uFEFF",A.BAD_DELIMITERS=["\r",`
`,'"',A.BYTE_ORDER_MARK],A.WORKERS_SUPPORTED=!o&&!!n.Worker,A.NODE_STREAM_INPUT=1,A.LocalChunkSize=10485760,A.RemoteChunkSize=5242880,A.DefaultDelimiter=",",A.Parser=N,A.ParserHandle=j,A.NetworkStreamer=C,A.FileStreamer=B,A.StringStreamer=S,A.ReadableStreamStreamer=P,n.jQuery&&((s=n.jQuery).fn.parse=function(K){var ce=K.config||{},me=[];return this.each(function(Le){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var _e=0;_e<this.files.length;_e++)me.push({file:this.files[_e],inputElem:this,instanceConfig:s.extend({},ce)})}),Z(),this;function Z(){if(me.length===0)oe(K.complete)&&K.complete();else{var Le,_e,Qe,De,Be=me[0];if(oe(K.before)){var xe=K.before(Be.file,Be.inputElem);if(typeof xe=="object"){if(xe.action==="abort")return Le="AbortError",_e=Be.file,Qe=Be.inputElem,De=xe.reason,void(oe(K.error)&&K.error({name:Le},_e,Qe,De));if(xe.action==="skip")return void Y();typeof xe.config=="object"&&(Be.instanceConfig=s.extend(Be.instanceConfig,xe.config))}else if(xe==="skip")return void Y()}var ze=Be.instanceConfig.complete;Be.instanceConfig.complete=function(Fe){oe(ze)&&ze(Fe,Be.file,Be.inputElem),Y()},A.parse(Be.file,Be.instanceConfig)}}function Y(){me.splice(0,1),Z()}}),c&&(n.onmessage=function(K){K=K.data,A.WORKER_ID===void 0&&K&&(A.WORKER_ID=K.workerId),typeof K.input=="string"?n.postMessage({workerId:A.WORKER_ID,results:A.parse(K.input,K.config),finished:!0}):(n.File&&K.input instanceof File||K.input instanceof Object)&&(K=A.parse(K.input,K.config))&&n.postMessage({workerId:A.WORKER_ID,results:K,finished:!0})}),(C.prototype=Object.create(g.prototype)).constructor=C,(B.prototype=Object.create(g.prototype)).constructor=B,(S.prototype=Object.create(S.prototype)).constructor=S,(P.prototype=Object.create(g.prototype)).constructor=P,A})})(DK);var X4e=DK.exports;const Y4e=Sp(X4e),Z4e=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState({name:"",subcounty:"",district_id:"",parishe:"",village:"",farmergroup_id:"",geolocation:"",phonenumber1:"",phonenumber2:"",gender:"",cin:""}),[c,u]=ve.useState(null),[i,A]=ve.useState(1),[g,C]=ve.useState(1),[B,S]=ve.useState([]),[P,j]=ve.useState([]),[R,N]=ve.useState(!1),[U,$]=ve.useState(""),[J,te]=ve.useState(null);ve.useEffect(()=>{K(i),ce(),me(),Be()},[i]);const ue=xe=>{te(xe.target.files[0])},oe=async()=>{if(!J){Ao.fire("Error!","Please select a CSV file.","error");return}Y4e.parse(J,{header:!0,skipEmptyLines:!0,complete:async xe=>{var ze,Fe;if(console.log(xe.data),xe.errors.length>0){Ao.fire("Error!","Invalid CSV format.","error");return}try{await Mr.post("/api/farm/bulk_create",xe.data),Ao.fire("Success!","Farmers uploaded successfully.","success"),K(i)}catch(it){console.error("Error uploading farmers:",it);const ie=((Fe=(ze=it.response)==null?void 0:ze.data)==null?void 0:Fe.message)||"An error occurred while uploading farmers.";Ao.fire("Error!",ie,"error")}}})},K=async xe=>{try{const ze=await Mr.get(`/api/farm/?page=${xe}`);e(ze.data.farms),C(ze.data.total_pages)}catch(ze){console.error("Error fetching farms:",ze),$("Error fetching farms.")}},ce=async()=>{try{const xe=await Mr.get("/api/district/");S(xe.data.districts)}catch(xe){console.error("Error fetching districts:",xe),$("Error fetching districts.")}},me=async()=>{try{const xe=await Mr.get("/api/farmergroup/");j(xe.data)}catch(xe){console.error("Error fetching farmer groups:",xe),$("Error fetching farmer groups.")}},Z=xe=>{o({...s,[xe.target.name]:xe.target.value})},Y=async xe=>{xe.preventDefault();try{c?await Mr.post(`/api/farm/${c}/update`,s):await Mr.post("/api/farm/create",s),K(i),Qe(),N(!1),Ao.fire("Success!","Farm has been saved.","success")}catch(ze){console.error("Error saving farm:",ze),Ao.fire("Error!","An error occurred while saving the farm.","error")}},Le=xe=>{o({name:xe.name,subcounty:xe.subcounty,parishe:xe.parishe,village:xe.village,district_id:xe.district_id,farmergroup_id:xe.farmergroup_id,geolocation:xe.geolocation,phonenumber1:xe.phonenumber1,phonenumber2:xe.phonenumber2,gender:xe.gender,cin:xe.cin}),u(xe.id),N(!0)},_e=async xe=>{if((await Ao.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await Mr.post(`/api/farm/${xe}/delete`),Ao.fire("Deleted!","Farm has been deleted.","success"),K(i)}catch(Fe){console.error("Error deleting farm:",Fe),$("An error occurred while deleting the farm.")}},Qe=()=>{o({name:"",subcounty:"",district_id:"",parishe:"",village:"",farmergroup_id:"",geolocation:"",phonenumber:"",phonenumber2:"",gender:"",cin:""}),u(null)},De=xe=>{xe>0&&xe<=g&&A(xe)},Be=async()=>{try{const xe=await Mr.get("/api/pays/");n(xe.data.pays)}catch(xe){console.error("Error fetching country data:",xe)}};return m.jsxs("div",{className:"p-6 bg-white shadow-md rounded-lg",children:[m.jsx("h2",{className:"text-xl font-semibold mb-6 text-center",children:"Farm Management"}),U&&m.jsx("p",{className:"text-red-500",children:U}),m.jsxs("div",{className:"mb-6 flex flex-wrap gap-3",children:[m.jsxs(Oo,{to:"/mapviewall",state:{owner_type:"farmer"},className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300 flex items-center gap-2",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"View All Farms"]}),m.jsxs("button",{onClick:()=>N(!0),className:"bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-300 flex items-center gap-2",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Farm"]}),m.jsx(Oo,{to:"/stats-certificate",state:{certificateType:"all"},className:"bg-blue-500 text-white px-3 py-2 rounded",children:"All"}),m.jsx(Oo,{to:"/stats-certificate",state:{certificateType:"compliant"},className:"bg-green-500 text-white px-3 py-2 rounded",children:"Compliant"}),m.jsx(Oo,{to:"/stats-certificate",state:{certificateType:"likely_compliant"},className:"bg-yellow-500 text-white px-3 py-2 rounded",children:"Likely"}),m.jsx(Oo,{to:"/stats-certificate",state:{certificateType:"not_compliant"},className:"bg-red-500 text-white px-3 py-2 rounded",children:"Not Compliant"})]}),m.jsxs("div",{className:"mb-4 flex items-center gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[m.jsx("input",{type:"file",accept:".csv",onChange:ue,className:"flex-1 border border-gray-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.jsxs("button",{onClick:oe,className:"bg-blue-500 text-white py-2 px-6 rounded hover:bg-blue-600 transition duration-300 flex items-center gap-2",children:[m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload CSV"]})]}),R&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 overflow-y-auto",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-4xl my-8",children:[m.jsx("h3",{className:"text-2xl font-bold mb-6 text-green-600",children:c?"Update Farm":"Create Farm"}),m.jsxs("form",{onSubmit:Y,className:"grid grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"name",className:"block text-gray-600 font-medium mb-2",children:"Farm Name"}),m.jsx("input",{id:"name",type:"text",name:"name",placeholder:"Enter Farm Name",value:s.name,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"subcounty",className:"block text-gray-600 font-medium mb-2",children:"Destination Country"}),m.jsxs("select",{name:"subcounty",value:s.subcounty,onChange:Z,className:"w-full p-2 border border-green-400 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[m.jsx("option",{value:"",children:"Select Country"}),r.map(xe=>m.jsxs("option",{value:xe.nom_en_gb,children:[xe.nom_en_gb," / ",xe.nom_fr_fr]},xe.nom_en_gb))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"parishe",className:"block text-gray-600 font-medium mb-2",children:"Parish"}),m.jsx("input",{id:"parishe",type:"text",name:"parishe",placeholder:"Enter Parish",value:s.parishe,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"district_id",className:"block text-gray-600 font-medium mb-2",children:"District"}),m.jsxs("select",{id:"district_id",name:"district_id",value:s.district_id,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",children:[m.jsx("option",{value:"",children:"Select District"}),B.map(xe=>m.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"geolocation",className:"block text-gray-600 font-medium mb-2",children:"Geolocation (lat, long)"}),m.jsx("input",{id:"geolocation",type:"text",name:"geolocation",placeholder:"Enter Geolocation",value:s.geolocation,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"farmergroup_id",className:"block text-gray-600 font-medium mb-2",children:"Farmer Group"}),m.jsxs("select",{id:"farmergroup_id",name:"farmergroup_id",value:s.farmergroup_id,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0,children:[m.jsx("option",{value:"",children:"Select Farmer Group"}),P.map(xe=>m.jsx("option",{value:xe.id,children:xe.name},xe.id))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"village",className:"block text-gray-600 font-medium mb-2",children:"Village"}),m.jsx("input",{id:"village",type:"text",name:"village",placeholder:"Enter Village",value:s.village,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"phonenumber1",className:"block text-gray-600 font-medium mb-2",children:"Phone Number 1"}),m.jsx("input",{id:"phonenumber1",type:"text",name:"phonenumber1",placeholder:"Enter Phone Number 1",value:s.phonenumber1,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"phonenumber2",className:"block text-gray-600 font-medium mb-2",children:"Phone Number 2"}),m.jsx("input",{id:"phonenumber2",type:"text",name:"phonenumber2",placeholder:"Enter Phone Number 2",value:s.phonenumber2,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"gender",className:"block text-gray-600 font-medium mb-2",children:"Gender"}),m.jsxs("select",{id:"gender",name:"gender",value:s.gender,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500",children:[m.jsx("option",{value:"",children:"Select Gender"}),m.jsx("option",{value:"Male",children:"Male"}),m.jsx("option",{value:"Female",children:"Female"})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"cin",className:"block text-gray-600 font-medium mb-2",children:"National ID"}),m.jsx("input",{id:"cin",type:"text",name:"cin",placeholder:"Enter National ID",value:s.cin,onChange:Z,className:"border border-green-400 p-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),m.jsxs("div",{className:"col-span-2 flex justify-between mt-6",children:[m.jsx("button",{type:"submit",className:"bg-green-500 text-white py-2 px-6 rounded hover:bg-green-600 transition duration-300",children:c?"Update Farm":"Create Farm"}),m.jsx("button",{type:"button",onClick:()=>{Qe(),N(!1)},className:"bg-red-500 text-white py-2 px-6 rounded hover:bg-red-600 transition duration-300",children:"Cancel"})]})]})]})}),m.jsx("ul",{className:"space-y-4 mt-6",children:t.map(xe=>m.jsx("li",{className:"border border-gray-200 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("strong",{className:"text-lg font-semibold text-green-600",children:xe.name}),m.jsx("p",{className:"text-gray-600",children:xe.subcounty})]}),m.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m.jsx("button",{onClick:()=>Le(xe),className:"bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-600 transition duration-300",children:"Edit"}),m.jsx("button",{onClick:()=>_e(xe.id),className:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600 transition duration-300",children:"Delete"}),m.jsx(Oo,{to:"/mapview",state:{owner_id:xe.id,owner_type:"farmer",geolocation:xe.geolocation},className:"bg-blue-200 text-blue-800 py-1 px-3 rounded hover:bg-blue-300 transition duration-300",children:"View"}),m.jsx(Oo,{to:"/farmdatamanager",state:{farmId:xe.id},className:"bg-green-200 text-green-800 py-1 px-3 rounded hover:bg-green-300 transition duration-300",children:"Add FD"}),m.jsx(Oo,{to:"/mapbox",state:{owner_id:xe.id,owner_type:"farmer",geolocation:xe.geolocation},className:"bg-purple-200 text-purple-800 py-1 px-3 rounded hover:bg-purple-300 transition duration-300",children:"Create Maps"}),m.jsx(Oo,{to:"/reportfarmer",state:{farmId:xe.id},className:"bg-red-200 text-red-800 py-1 px-3 rounded hover:bg-red-300 transition duration-300",children:"Farmer Report"}),m.jsx(Oo,{to:"/reportcarbon",state:{farmId:xe.id},className:"bg-red-200 text-red-800 py-1 px-3 rounded hover:bg-red-300 transition duration-300",children:"Carbon Report"})]})]})},xe.id))}),m.jsxs("div",{className:"flex justify-between mt-4",children:[m.jsx("button",{onClick:()=>De(i-1),disabled:i===1,className:"bg-gray-300 p-2 rounded disabled:opacity-50 hover:bg-gray-400 transition-colors",children:"Previous"}),m.jsxs("span",{className:"flex items-center",children:["Page ",i," of ",g]}),m.jsx("button",{onClick:()=>De(i+1),disabled:i===g,className:"bg-gray-300 p-2 rounded disabled:opacity-50 hover:bg-gray-400 transition-colors",children:"Next"})]})]})},J4e=()=>{var ce;const e=((ce=Ju().state)==null?void 0:ce.farmId)||"WAK0001",[r,n]=ve.useState([]),[s,o]=ve.useState([]),[c,u]=ve.useState([]),[i,A]=ve.useState([]),[g,C]=ve.useState({farm_id:"",crop_id:"",land_type:"",tilled_land_size:"",planting_date:"",season:"",quality:"",quantity:"",harvest_date:"",expected_yield:"",actual_yield:"",number_of_tree:"",channel_partner:"",destination_country:"",customer_name:"",hs_code:""}),[B,S]=ve.useState(null);ve.useEffect(()=>{e&&(C(me=>({...me,farm_id:e})),j(e)),R(),N(),P()},[e]);const P=async()=>{try{const me=await Mr.get("/api/pays/");A(me.data.pays)}catch(me){console.error("Error fetching country data:",me)}},j=async me=>{try{const Z=await Mr.get(`/api/farmdata/?farm_id=${me}`);n(Z.data.farmdata_list)}catch(Z){console.error("Error fetching farm data:",Z)}},R=async()=>{try{const me=await Mr.get("/api/farm/all");o(me.data.farms)}catch(me){console.error("Error fetching farms list:",me)}},N=async()=>{try{const me=await Mr.get("/api/crop/");u(me.data.crops)}catch(me){console.error("Error fetching crops list:",me)}},U=me=>{const{name:Z,value:Y}=me.target;C({...g,[Z]:Y})},$=me=>{C({...g,farm_id:me.target.value})},J=me=>{C({...g,crop_id:me.target.value})},te=me=>{C({...g,destination_country:me.target.value})},ue=async me=>{me.preventDefault();try{B?(await Mr.put(`/api/farmdata/${B}/edit`,g),Ao.fire("Success","Farm Data updated successfully!","success")):(await Mr.post("/api/farmdata/create",g),Ao.fire("Success","Farm Data created successfully!","success")),j(e),C({farm_id:e,crop_id:"",land_type:"",tilled_land_size:"",planting_date:"",season:"",quality:"",quantity:"",harvest_date:"",expected_yield:"",actual_yield:"",channel_partner:"",destination_country:"",customer_name:"",number_of_tree:"",hs_code:""}),S(null)}catch(Z){console.error("Error submitting farm data:",Z),Ao.fire("Error","Failed to submit farm data.","error")}},oe=me=>{C(me),S(me.id)},K=async me=>{if((await Ao.fire({title:"Are you sure?",text:"You wont be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await Mr.delete(`/api/farmdata/${me}/delete`),Ao.fire("Deleted!","Farm data has been deleted.","success"),j(e)}catch(Y){console.error("Error deleting farm:",Y),Ao.fire("Error","Failed to delete farm data.","error")}};return m.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Farm Data Manager"}),m.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[!e&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"farm_id",className:"block mb-2 text-sm font-medium",children:"Farm ID:"}),m.jsxs("select",{name:"farm_id",value:g.farm_id,onChange:$,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[m.jsx("option",{value:"",children:"Select a Farm"}),s.map(me=>m.jsx("option",{value:me.id,children:me.name},me.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),m.jsxs("select",{name:"crop_id",value:g.crop_id,onChange:J,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[m.jsx("option",{value:"",children:"Select a Crop"}),c.map(me=>m.jsx("option",{value:me.id,children:me.name},me.id))]})]}),["land_type","season","quality","quantity","channel_partner","customer_name"].map(me=>m.jsx("div",{children:m.jsx("input",{type:"text",name:me,value:g[me],onChange:U,placeholder:me.replace("_"," ").replace(/\b\w/g,Z=>Z.toUpperCase()),className:"w-full p-2 border rounded-md shadow-sm"})},me)),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"destination_country",children:"Destination Country:"}),m.jsxs("select",{name:"destination_country",value:g.destination_country,onChange:te,className:"w-full p-2 border rounded-md shadow-sm",children:[m.jsx("option",{value:"",children:"Select Country"}),i.map(me=>m.jsxs("option",{value:me.nom_en_gb,children:[me.nom_en_gb," / ",me.nom_fr_fr]},me.nom_en_gb))]})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("input",{type:"text",name:"tilled_land_size",value:g.tilled_land_size,placeholder:"Tilled Land Size",onChange:U,className:"w-full p-2 border rounded-md shadow-sm"}),m.jsx("input",{type:"number",name:"number_of_tree",value:g.number_of_tree,placeholder:"Number of Trees",onChange:U,className:"w-full p-2 border rounded-md shadow-sm"})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("input",{type:"date",name:"planting_date",value:g.planting_date,onChange:U,className:"w-full p-2 border rounded-md shadow-sm"}),m.jsx("input",{type:"date",name:"harvest_date",value:g.harvest_date,onChange:U,className:"w-full p-2 border rounded-md shadow-sm"})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("input",{type:"number",name:"expected_yield",value:g.expected_yield,onChange:U,placeholder:"Expected Yield",className:"w-full p-2 border rounded-md shadow-sm"}),m.jsx("input",{type:"number",name:"actual_yield",value:g.actual_yield,onChange:U,placeholder:"Actual Yield",className:"w-full p-2 border rounded-md shadow-sm"})]}),m.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600",children:B?"Update Farm Data":"Create Farm Data"})]}),m.jsx("h2",{className:"text-xl font-semibold mt-6",children:"Farm Data List"}),m.jsx("div",{className:"overflow-x-auto mt-4",children:m.jsxs("table",{className:"min-w-full text-left text-sm text-gray-500",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-2",children:"Farm ID"}),m.jsx("th",{className:"px-4 py-2",children:"Crop ID"}),m.jsx("th",{className:"px-4 py-2",children:"Land Type"}),m.jsx("th",{className:"px-4 py-2",children:"Tilled Land Size"}),m.jsx("th",{className:"px-4 py-2",children:"Planting Date"}),m.jsx("th",{className:"px-4 py-2",children:"Harvest Date"}),m.jsx("th",{className:"px-4 py-2",children:"Quality"}),m.jsx("th",{className:"px-4 py-2",children:"Quantity"}),m.jsx("th",{className:"px-4 py-2",children:"Expected Yield"}),m.jsx("th",{className:"px-4 py-2",children:"Actual Yield"}),m.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),m.jsx("tbody",{children:r.map(me=>m.jsxs("tr",{className:"border-t",children:[m.jsx("td",{className:"px-4 py-2",children:me.farm_id}),m.jsx("td",{className:"px-4 py-2",children:me.crop_id}),m.jsx("td",{className:"px-4 py-2",children:me.land_type}),m.jsx("td",{className:"px-4 py-2",children:me.tilled_land_size}),m.jsx("td",{className:"px-4 py-2",children:me.planting_date?new Date(me.planting_date).toLocaleDateString():""}),m.jsx("td",{className:"px-4 py-2",children:me.harvest_date?new Date(me.harvest_date).toLocaleDateString():""}),m.jsx("td",{className:"px-4 py-2",children:me.quality}),m.jsx("td",{className:"px-4 py-2",children:me.quantity}),m.jsx("td",{className:"px-4 py-2",children:me.expected_yield}),m.jsx("td",{className:"px-4 py-2",children:me.actual_yield}),m.jsxs("td",{className:"px-4 py-2",children:[m.jsx("button",{onClick:()=>oe(me),className:"text-blue-500 hover:underline mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>K(me.id),className:"text-red-500 hover:underline",children:"Delete"})]})]},me.id))})]})})]})},eCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState({username:"",email:"",password:"",phonenumber:"",company_name:"",user_type:"",is_admin:!1}),[s,o]=ve.useState(!1),[c,u]=ve.useState(null),[i,A]=ve.useState(!1),g=async()=>{try{const N=await Mr.get("/api/users/");e(N.data)}catch(N){console.error("Error fetching users:",N)}},C=N=>{const{name:U,value:$}=N.target;n(J=>({...J,[U]:$}))},B=N=>{n(U=>({...U,is_admin:N.target.checked}))},S=async N=>{N.preventDefault();try{if(s){const U=await Mr.put(`/api/users/${c}/edit`,r);e(t.map($=>$.id===c?U.data.user:$)),o(!1),u(null)}else await Mr.post("/api/users/create",r);n({username:"",email:"",password:"",phonenumber:"",company_name:"",user_type:"",is_admin:!1}),A(!1),Ao.fire({title:"Success!",text:s?"User updated successfully!":"User created successfully!",icon:"success",confirmButtonText:"OK"}),g()}catch(U){console.error("Error creating/updating user:",U)}},P=async N=>{if((await Ao.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel"})).isConfirmed)try{await Mr.delete(`/api/users/${N}/delete`),e(t.filter($=>$.id!==N)),Ao.fire({title:"Deleted!",text:"User deleted successfully!",icon:"success",confirmButtonText:"OK"})}catch($){console.error("Error deleting user:",$)}},j=N=>{o(!0),u(N.id),n({username:N.username,email:N.email,password:"",phonenumber:N.phonenumber,company_name:N.company_name||"",user_type:N.user_type,is_admin:N.is_admin}),A(!0)},R=()=>{o(!1),n({username:"",email:"",password:"",phonenumber:"",company_name:"",user_type:"",is_admin:!1}),A(!1)};return ve.useEffect(()=>{g()},[]),m.jsxs("div",{className:"container mx-auto mt-8 p-6 bg-white shadow-lg rounded-lg",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-blue-600",children:"User Management"}),m.jsx("button",{onClick:()=>A(!0),className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300",children:"Create User"}),i&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96 max-h-[90vh] overflow-y-auto",children:[m.jsx("h3",{className:"text-lg font-bold mb-4",children:s?"Edit User":"Create User"}),m.jsxs("form",{onSubmit:S,children:[m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",name:"username",placeholder:"Username",value:r.username,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"email",name:"email",placeholder:"Email",value:r.email,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!s})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",name:"phonenumber",placeholder:"Phone Number",value:r.phonenumber,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",name:"company_name",placeholder:"Company Name",value:r.company_name,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400"})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",name:"user_type",placeholder:"User Type",value:r.user_type,onChange:C,className:"border border-gray-300 p-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0})}),m.jsxs("label",{className:"flex items-center mb-4",children:[m.jsx("input",{type:"checkbox",name:"is_admin",checked:r.is_admin,onChange:B,className:"mr-2"}),"Admin"]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("button",{type:"button",onClick:R,className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-300",children:s?"Cancel Edit":"Cancel Create"}),m.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300",children:s?"Update User":"Create User"})]})]})]})}),m.jsx("ul",{className:"space-y-4 mt-6",children:t&&t.map(N=>N?m.jsx("li",{className:"border border-gray-200 p-4 rounded-lg shadow-sm",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("strong",{className:"text-lg font-semibold text-blue-600",children:N.username||"Unknown"}),m.jsx("p",{className:"text-sm text-gray-600",children:N.email||"No email provided"}),N.company_name&&m.jsx("p",{className:"text-sm text-gray-500 italic",children:N.company_name})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>j(N),className:"bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-600 transition duration-300",children:"Edit"}),m.jsx("button",{onClick:()=>P(N.id),className:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600 transition duration-300",children:"Delete"})]})]})},N.id):null)})]})},tCe=()=>{const[t,e]=ve.useState(""),[r,n]=ve.useState(""),[s,o]=ve.useState(""),[c,u]=ve.useState(""),[i,A]=ve.useState(null),[g,C]=ve.useState(null),[B,S]=ve.useState(!1),[P,j]=ve.useState(!1),R=async U=>{U.preventDefault(),S(!0);try{const $=await Mr.get("/getWeather",{params:{lat:t||"0.358261",lon:r||"32.654738",start:s,end:c}});A($.data.response)}catch($){console.error("Error fetching weather data:",$)}finally{S(!1)}},N=async U=>{U.preventDefault(),j(!0);try{const $=await Mr.get("/getSolar",{params:{lat:t||"0.358261",lon:r||"32.654738",start:s,end:c}});C($.data.response)}catch($){console.error("Error fetching solar data:",$)}finally{j(!1)}};return m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Weather and Solar Data"}),m.jsxs("form",{className:"mb-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block font-semibold",children:"Latitude"}),m.jsx("input",{type:"text",value:t,onChange:U=>e(U.target.value),placeholder:"Enter latitude",className:"border px-4 py-2 rounded w-full"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-semibold",children:"Longitude"}),m.jsx("input",{type:"text",value:r,onChange:U=>n(U.target.value),placeholder:"Enter longitude",className:"border px-4 py-2 rounded w-full"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-semibold",children:"Start Date"}),m.jsx("input",{type:"date",value:s,onChange:U=>o(U.target.value),className:"border px-4 py-2 rounded w-full"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-semibold",children:"End Date"}),m.jsx("input",{type:"date",value:c,onChange:U=>u(U.target.value),className:"border px-4 py-2 rounded w-full"})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:R,className:"bg-blue-500 text-white px-4 py-2 rounded",disabled:B,children:B?"Loading Weather...":"Get Weather Data"}),m.jsx("button",{onClick:N,className:"bg-yellow-500 text-white px-4 py-2 rounded",disabled:P,children:P?"Loading Solar...":"Get Solar Data"})]})]}),i&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Weather Data:"}),m.jsx("pre",{className:"bg-gray-100 p-4 rounded",children:JSON.stringify(i,null,2)})]}),g&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Solar Data:"}),m.jsx("pre",{className:"bg-gray-100 p-4 rounded",children:JSON.stringify(g,null,2)})]})]})},rCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState({name:"",weight:"",category_id:""}),[c,u]=ve.useState(null);ve.useEffect(()=>{i(),A()},[]);const i=async()=>{try{const P=await Mr.get("/api/crop/");e(P.data.crops)}catch(P){console.error("Error fetching crops:",P)}},A=async()=>{try{const P=await Mr.get("/api/crop/");n(P.data.categories)}catch(P){console.error("Error fetching categories:",P)}},g=P=>{const{name:j,value:R}=P.target;o(N=>({...N,[j]:R}))},C=async P=>{P.preventDefault();try{c?await Mr.put(`/api/crop/${c}/edit`,s):await Mr.post("/api/crop/create",s),o({name:"",weight:"",category_id:""}),u(null),i()}catch(j){console.error("Error saving crop:",j)}},B=P=>{o({name:P.name,weight:P.weight,category_id:P.category_id}),u(P.id)},S=async P=>{try{await Mr.delete(`/api/crop/${P}/delete`),i()}catch(j){console.error("Error deleting crop:",j)}};return m.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl mb-4",children:"Crop Manager"}),m.jsxs("form",{onSubmit:C,className:"mb-4",children:[m.jsx("input",{type:"text",name:"name",value:s.name,onChange:g,placeholder:"Crop Name",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"number",name:"weight",value:s.weight,onChange:g,placeholder:"Weight",className:"border p-2 rounded mr-2",required:!0}),m.jsxs("select",{name:"category_id",value:s.category_id,onChange:g,className:"border p-2 rounded mr-2",required:!0,children:[m.jsx("option",{value:"",children:"Select Category"}),r.map(P=>m.jsx("option",{value:P.id,children:P.name},P.id))]}),m.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:c?"Update Crop":"Add Crop"})]}),m.jsx("ul",{children:t.map(P=>m.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[m.jsxs("span",{children:[P.name," (Weight: ",P.weight,")"]}),m.jsxs("div",{children:[m.jsx("button",{onClick:()=>B(P),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>S(P.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},P.id))})]})},nCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState({crop_id:"",farm_id:"",irrigation_date:"",water_applied:"",method:""}),[s,o]=ve.useState(null),[c,u]=ve.useState([]);ve.useEffect(()=>{i(),g(),A()},[]);const i=async()=>{try{const R=await Mr.get("/api/irrigation/");e(R.data.irrigation)}catch(R){console.error("Error fetching irrigation records:",R)}},A=async()=>{try{const R=await Mr.get("/api/crop/");u(R.data.crops)}catch(R){console.error("Error fetching crops list:",R)}},g=async()=>{try{const R=await Mr.get("/api/crops/");u(R.data.crops)}catch(R){console.error("Error fetching crops:",R)}},C=R=>{n({...r,crop_id:R.target.value})},B=R=>{const{name:N,value:U}=R.target;n($=>({...$,[N]:U}))},S=async R=>{R.preventDefault();try{s?await Mr.put(`/api/irrigation/${s}/edit`,r):await Mr.post("/api/irrigation/create",r),n({crop_id:"",farm_id:"",irrigation_date:"",water_applied:"",method:""}),o(null),i()}catch(N){console.error("Error saving irrigation record:",N)}},P=R=>{n({crop_id:R.crop_id,farm_id:R.farm_id,irrigation_date:R.irrigation_date,water_applied:R.water_applied,method:R.method}),o(R.id)},j=async R=>{try{await Mr.delete(`/api/irrigation/${R}/delete`),i()}catch(N){console.error("Error deleting irrigation record:",N)}};return m.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl mb-4",children:"Irrigation Manager"}),m.jsxs("form",{onSubmit:S,className:"mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),m.jsxs("select",{name:"crop_id",value:r.crop_id,onChange:C,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[m.jsx("option",{value:"",children:"Select a Crop"}),c.map(R=>m.jsx("option",{value:R.id,children:R.name},R.id))]})]}),m.jsx("input",{type:"text",name:"farm_id",value:r.farm_id,onChange:B,placeholder:"Farm ID",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"date",name:"irrigation_date",value:r.irrigation_date,onChange:B,className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"number",name:"water_applied",value:r.water_applied,onChange:B,placeholder:"Water Applied (L)",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"text",name:"method",value:r.method,onChange:B,placeholder:"Irrigation Method",className:"border p-2 rounded mr-2",required:!0}),m.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:s?"Update Irrigation":"Add Irrigation"})]}),m.jsx("ul",{children:t.map(R=>m.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[m.jsxs("span",{children:["Crop ID: ",R.crop_id," | Farm ID: ",R.farm_id," | Water Applied: ",R.water_applied,"L"]}),m.jsxs("div",{children:[m.jsx("button",{onClick:()=>P(R),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>j(R.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},R.id))})]})},iCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState({crop_id:"",stage:"",kc_value:""}),[s,o]=ve.useState(null),[c,u]=ve.useState([]);ve.useEffect(()=>{i(),A(),g()},[]);const i=async()=>{try{const R=await Mr.get("/api/kc/");e(R.data.coefficients)}catch(R){console.error("Error fetching crop coefficients:",R)}},A=async()=>{try{const R=await Mr.get("/api/crops/");u(R.data.crops)}catch(R){console.error("Error fetching crops:",R)}},g=async()=>{try{const R=await Mr.get("/api/crop/");u(R.data.crops)}catch(R){console.error("Error fetching crops list:",R)}},C=R=>{n({...r,crop_id:R.target.value})},B=R=>{const{name:N,value:U}=R.target;n($=>({...$,[N]:U}))},S=async R=>{R.preventDefault();try{s?await Mr.put(`/api/kc/${s}/edit`,r):await Mr.post("/api/kc/create",r),n({crop_id:"",stage:"",kc_value:""}),o(null),i()}catch(N){console.error("Error saving crop coefficient:",N)}},P=R=>{n({crop_id:R.crop_id,stage:R.stage,kc_value:R.kc_value}),o(R.id)},j=async R=>{try{await Mr.delete(`/api/kc/${R}/delete`),i()}catch(N){console.error("Error deleting crop coefficient:",N)}};return m.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl mb-4",children:"Crop Coefficient Manager"}),m.jsxs("form",{onSubmit:S,className:"mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),m.jsxs("select",{name:"crop_id",value:r.crop_id,onChange:C,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[m.jsx("option",{value:"",children:"Select a Crop"}),c.map(R=>m.jsx("option",{value:R.id,children:R.name},R.id))]})]}),m.jsx("input",{type:"text",name:"stage",value:r.stage,onChange:B,placeholder:"Stage",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"number",name:"kc_value",value:r.kc_value,onChange:B,placeholder:"Kc Value",className:"border p-2 rounded mr-2",required:!0}),m.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:s?"Update Coefficient":"Add Coefficient"})]}),m.jsx("ul",{children:t.map(R=>m.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[m.jsxs("span",{children:["Crop ID: ",R.crop_id," | Stage: ",R.stage," | Kc Value: ",R.kc_value]}),m.jsxs("div",{children:[m.jsx("button",{onClick:()=>P(R),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>j(R.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},R.id))})]})},sCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState({crop_id:"",grade_value:"",description:""}),[s,o]=ve.useState(null),[c,u]=ve.useState([]);ve.useEffect(()=>{i(),A(),g()},[]);const i=async()=>{try{const R=await Mr.get("/api/grade/");e(R.data.grades)}catch(R){console.error("Error fetching grades:",R)}},A=async()=>{try{const R=await Mr.get("/api/crop/");u(R.data.crops)}catch(R){console.error("Error fetching crops list:",R)}},g=async()=>{try{const R=await Mr.get("/api/crops/");u(R.data.crops)}catch(R){console.error("Error fetching crops:",R)}},C=R=>{n({...r,crop_id:R.target.value})},B=R=>{const{name:N,value:U}=R.target;n($=>({...$,[N]:U}))},S=async R=>{R.preventDefault();try{s?await Mr.put(`/api/grade/${s}/edit`,r):await Mr.post("/api/grade/create",r),n({crop_id:"",grade_value:"",description:""}),o(null),i()}catch(N){console.error("Error saving grade:",N)}},P=R=>{n({crop_id:R.crop_id,grade_value:R.grade_value,description:R.description}),o(R.id)},j=async R=>{try{await Mr.delete(`/api/grade/${R}/delete`),i()}catch(N){console.error("Error deleting grade:",N)}};return m.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl mb-4",children:"Grade Manager"}),m.jsxs("form",{onSubmit:S,className:"mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"crop_id",className:"block mb-2 text-sm font-medium",children:"Crop ID:"}),m.jsxs("select",{name:"crop_id",value:r.crop_id,onChange:C,required:!0,className:"w-full p-2 border rounded-md shadow-sm",children:[m.jsx("option",{value:"",children:"Select a Crop"}),c.map(R=>m.jsx("option",{value:R.id,children:R.name},R.id))]})]}),m.jsx("input",{type:"text",name:"grade_value",value:r.grade_value,onChange:B,placeholder:"Grade Value",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"text",name:"description",value:r.description,onChange:B,placeholder:"Description",className:"border p-2 rounded mr-2"}),m.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:s?"Update Grade":"Add Grade"})]}),m.jsx("ul",{children:t.map(R=>m.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[m.jsxs("span",{children:["Crop ID: ",R.crop_id," | Grade Value: ",R.grade_value," | Description: ",R.description]}),m.jsxs("div",{children:[m.jsx("button",{onClick:()=>P(R),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>j(R.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},R.id))})]})},Q_={_origin:"https://api.emailjs.com"},oCe=(t,e="https://api.emailjs.com")=>{Q_._userID=t,Q_._origin=e},OK=(t,e,r)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class wz{constructor(e){this.status=e.status,this.text=e.responseText}}const RK=(t,e,r={})=>new Promise((n,s)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:c})=>{const u=new wz(c);u.status===200||u.text==="OK"?n(u):s(u)}),o.addEventListener("error",({target:c})=>{s(new wz(c))}),o.open("POST",Q_._origin+t,!0),Object.keys(r).forEach(c=>{o.setRequestHeader(c,r[c])}),o.send(e)}),aCe=(t,e,r,n)=>{const s=n||Q_._userID;return OK(s,t,e),RK("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:t,template_id:e,template_params:r}),{"Content-type":"application/json"})},lCe=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},cCe=(t,e,r,n)=>{const s=n||Q_._userID,o=lCe(r);OK(s,t,e);const c=new FormData(o);return c.append("lib_version","3.2.0"),c.append("service_id",t),c.append("template_id",e),c.append("user_id",s),RK("/api/v1.0/email/send-form",c)},jN={init:oCe,send:aCe,sendForm:cCe},uCe=()=>{const[t,e]=ve.useState({phone:"",email:"",message:""}),r=s=>{e({...t,[s.target.name]:s.target.value})},n=s=>{s.preventDefault(),jN.send("service_3xq2aks","template_waiira7",{phone:t.phone,email:t.email,message:t.message},"Pt5g2EHR_AEyDF5NC").then(o=>{console.log("Email successfully sent!",o.text),Ao.fire({icon:"success",title:"Email Sent!",text:"Your message has been sent successfully.",confirmButtonText:"OK"})}).catch(o=>{console.error("Failed to send email. Error: ",o),Ao.fire({icon:"error",title:"Error!",text:`Failed to send email: ${o.text||"Unknown error"}`,confirmButtonText:"OK"})}),e({phone:"",email:"",message:""})};return m.jsx("section",{className:"bg-gradient-to-r from-teal-50 via-green-50 to-yellow-50 min-h-screen flex justify-center items-center p-6 font-sans",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-6xl font-extrabold mb-8 text-teal-800",children:"Contact Us"}),m.jsx("p",{className:"text-gray-700 text-xl mb-4",children:"We'd love to hear from you! Reach out via phone or email."})]}),m.jsxs("div",{className:"flex flex-col md:flex-row justify-center items-center space-y-6 md:space-y-0 md:space-x-12 my-10",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(K5,{className:"text-green-600 text-3xl"}),m.jsx("a",{href:"tel:+256783130358",className:"text-xl text-gray-700 font-semibold hover:underline",children:"+256783130358"})]}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(c1,{className:"text-blue-600 text-3xl"}),m.jsx("a",{href:"mailto:nkusu@agriyields.com",className:"text-xl text-gray-700 font-semibold hover:underline",children:"nkusu@agriyields.com"})]})]}),m.jsx("div",{className:"mt-12 flex justify-center",children:m.jsx("div",{className:"w-full max-w-lg",children:m.jsxs("form",{className:"bg-white shadow-2xl rounded-3xl px-10 pt-8 pb-10 mb-4 transition duration-300 transform hover:scale-105",onSubmit:n,children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs("label",{className:"block text-gray-700 text-sm font-semibold mb-3 flex items-center",htmlFor:"phone",children:[m.jsx(K5,{className:"text-green-500 mr-3"})," Phone Number"]}),m.jsx("input",{className:"shadow appearance-none border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-green-300 transition duration-300",id:"phone",name:"phone",type:"text",placeholder:"Your phone number",value:t.phone,onChange:r,required:!0})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("label",{className:"block text-gray-700 text-sm font-semibold mb-3 flex items-center",htmlFor:"email",children:[m.jsx(c1,{className:"text-blue-500 mr-3"})," Email"]}),m.jsx("input",{className:"shadow appearance-none border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300",id:"email",name:"email",type:"email",placeholder:"Your email address",value:t.email,onChange:r,required:!0})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block text-gray-700 text-sm font-semibold mb-3 flex items-center",htmlFor:"message",children:"Message"}),m.jsx("textarea",{className:"shadow appearance-none border border-gray-300 rounded-xl w-full py-4 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-300",id:"message",name:"message",rows:"5",placeholder:"Write your message here...",value:t.message,onChange:r,required:!0})]}),m.jsx("div",{className:"flex items-center justify-center",children:m.jsx("button",{className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-10 rounded-full shadow-lg transition duration-300 transform hover:scale-110",type:"submit",children:"Send Message"})})]})})})]})})},hCe=()=>{const[t,e]=ve.useState({phone:"",message:"",organization:"",company:""}),r=s=>{e({...t,[s.target.name]:s.target.value})},n=s=>{s.preventDefault(),jN.send("service_3xq2aks","template_irqm3l1",{phone:t.phone,message:t.message,organization:t.organization,company:t.company},"Pt5g2EHR_AEyDF5NC").then(o=>{Ao.fire({icon:"success",title:"Sign Up Successful!",text:"Your information has been submitted and a notification email was sent.",confirmButtonText:"OK"}),e({phone:"",message:"",organization:"",company:""})}).catch(o=>{console.error("Error sending email:",o),Ao.fire({icon:"error",title:"Error!",text:"Could not send the email, please try again later.",confirmButtonText:"OK"})})};return m.jsx("section",{className:"bg-gradient-to-r from-teal-50 via-green-50 to-yellow-50 min-h-screen flex justify-center items-center p-6 font-sans",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"text-center mb-10",children:[m.jsx("h2",{className:"text-6xl font-extrabold mb-4 text-teal-800",children:"Sign Up"}),m.jsx("p",{className:"text-gray-700 text-xl mb-6",children:"-----------------Join us by filling in your details below!-----------------"})]}),m.jsx("div",{className:"mt-12 flex justify-center",children:m.jsx("div",{className:"w-full max-w-4xl",children:m.jsxs("form",{className:"bg-white shadow-2xl rounded-3xl px-10 pt-8 pb-10 mb-4",onSubmit:n,children:[m.jsxs("div",{className:"flex flex-col space-y-6",children:[m.jsxs("div",{className:"flex flex-col mb-4",children:[m.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-2 flex items-center",htmlFor:"phone",children:[m.jsx(K5,{className:"text-green-500 mr-3"})," Phone Number"]}),m.jsx("input",{className:"shadow-md border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-green-300",id:"phone",name:"phone",type:"text",placeholder:"Your phone number",value:t.phone,onChange:r,required:!0})]}),m.jsxs("div",{className:"flex flex-col mb-4",children:[m.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-2 flex items-center",htmlFor:"organization",children:[m.jsx(PD,{className:"text-blue-500 mr-3"})," Organization"]}),m.jsx("input",{className:"shadow-md border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-blue-300",id:"organization",name:"organization",type:"text",placeholder:"Your organization",value:t.organization,onChange:r,required:!0})]}),m.jsxs("div",{className:"flex flex-col mb-6",children:[m.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-2 flex items-center",htmlFor:"company",children:[m.jsx(PD,{className:"text-purple-500 mr-3"})," Company"]}),m.jsx("input",{className:"shadow-md border border-gray-300 rounded-full w-full py-3 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-purple-300",id:"company",name:"company",type:"text",placeholder:"Your company name",value:t.company,onChange:r,required:!0})]}),m.jsxs("div",{className:"flex flex-col mb-8",children:[m.jsxs("label",{className:"block text-gray-700 text-base font-semibold mb-3 flex items-center",children:[m.jsx(rne,{className:"text-orange-500 mr-3"})," Message"]}),m.jsx("textarea",{className:"shadow-md border border-gray-300 rounded-xl w-full py-4 px-5 text-gray-700 leading-tight focus:outline-none focus:ring-4 focus:ring-orange-300",id:"message",name:"message",rows:"5",placeholder:"Write your message here...",value:t.message,onChange:r,required:!0})]})]}),m.jsx("br",{}),m.jsx("div",{className:"flex items-center justify-center",children:m.jsx("button",{className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-10 rounded-full shadow-lg",type:"submit",children:"Sign Up"})})]})})})]})})},dCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState(""),[s,o]=ve.useState(null),[c,u]=ve.useState(!1),[i,A]=ve.useState("");ve.useEffect(()=>{g()},[]);const g=async()=>{u(!0);try{const P=await Mr.get("/api/producecategory/");e(P.data.categories),u(!1)}catch{A("Failed to load categories"),u(!1)}},C=async()=>{try{const P=await Mr.post("/api/producecategory/create",{name:r,created_by:"admin"});alert(P.data.msg),n(""),g()}catch{alert("Failed to create category")}},B=async P=>{try{const j=await Mr.put(`/api/producecategory/${P}/edit`,{name:s.name,modified_by:"admin"});alert(j.data.msg),o(null),g()}catch{alert("Failed to update category")}},S=async P=>{if(window.confirm("Are you sure you want to delete this category?"))try{const j=await Mr.delete(`/api/producecategory/${P}/delete`);alert(j.data.msg),g()}catch{alert("Failed to delete category")}};return m.jsxs("div",{children:[m.jsx("h1",{children:"Category Manager"}),m.jsx("div",{children:c?m.jsx("p",{children:"Loading categories..."}):i?m.jsx("p",{children:i}):m.jsx("ul",{children:t.map(P=>m.jsx("li",{children:s&&s.id===P.id?m.jsxs("div",{children:[m.jsx("input",{type:"text",value:s.name,onChange:j=>o({...s,name:j.target.value})}),m.jsx("button",{onClick:()=>B(P.id),children:"Save"}),m.jsx("button",{onClick:()=>o(null),children:"Cancel"})]}):m.jsxs("div",{children:[P.name," (Created on ",new Date(P.date_created).toLocaleDateString(),")",m.jsx("button",{onClick:()=>o(P),children:"Edit"}),m.jsx("button",{onClick:()=>S(P.id),children:"Delete"})]})},P.id))})}),m.jsxs("div",{children:[m.jsx("h2",{children:"Create New Category"}),m.jsx("input",{type:"text",value:r,onChange:P=>n(P.target.value),placeholder:"New category name"}),m.jsx("button",{onClick:C,children:"Create Category"})]})]})};fd.register(hA,dA,vp,Uh,E1,B0,S0);const UK=({temperature:t,humidity:e,precipitation:r})=>{const s={labels:Array.from({length:24},(c,u)=>`${u}:00`),datasets:[{label:"Temperature (C)",data:t.length?t:new Array(24).fill(null),backgroundColor:"rgba(75,192,192,0.5)",borderColor:"rgba(75,192,192,1)",borderWidth:1},{label:"Humidity (%)",data:e.length?e:new Array(24).fill(null),backgroundColor:"rgba(153,102,255,0.5)",borderColor:"rgba(153,102,255,1)",borderWidth:1},{label:"Precipitation (mm)",data:r.length?r:new Array(24).fill(null),backgroundColor:"rgba(255,159,64,0.5)",borderColor:"rgba(255,159,64,1)",borderWidth:1}]},o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"Daily Weather Data"}},scales:{x:{title:{display:!0,text:"Hours"}},y:{title:{display:!0,text:"Values"}}}};return m.jsx("div",{className:"relative h-[400px] w-full",children:m.jsx(dC,{data:s,options:o})})},fCe=()=>{const t=ve.useRef(null),e=ve.useRef(null),r=ve.useRef(null),[n,s]=ve.useState(null),[o,c]=ve.useState(""),[u,i]=ve.useState(null),[A,g]=ve.useState(null),[C,B]=ve.useState(null),[S,P]=ve.useState(null),[j,R]=ve.useState(null),[N,U]=ve.useState(null),[$,J]=ve.useState(null),[te,ue]=ve.useState({temperature:[],humidity:[],precipitation:[]}),[oe,K]=ve.useState([]),[ce,me]=ve.useState(""),[Z,Y]=ve.useState(null);ve.useState(""),ve.useState(0),ve.useState(0);const[Le,_e]=ve.useState([]);ve.useState("");const[Qe,De]=ve.useState("");let Be=0;const xe=le=>le<1?"No rain expected; manual or irrigation watering may be necessary for your crops.":le>=1&&le<=2?"Light rain expected, providing minimal moisture, which might not meet crop needs.":le>=3&&le<=10?"Moderate rain expected, ideal for maintaining soil moisture and supporting crop growth.":le>=11&&le<=20?"Abundant rain expected, offering favorable conditions for crops sensitive to moisture.":le>=21&&le<=50?"Heavy rain expected, beneficial for crops, but monitor drainage to prevent waterlogging.":"Torrential rain expected, with a risk of flooding that may damage crops. Preventive measures are advised.";ve.useEffect(()=>{(async()=>{try{const{data:fe}=await Mr.get("/api/farm/all");_e(fe.farms||[])}catch(fe){console.error("Error fetching farms:",fe)}})()},[]);const ze=async()=>{try{const le=await Mr.get("/api/crop/");K(le.data.crops)}catch(le){console.error("Error fetching crops list:",le)}},Fe=async()=>{try{const le=await Mr.get(`/api/kc/getbycrop/${ce}`);console.log(le.data.kc_value[0].kc_value),Y(le.data.kc_value[0].kc_value)}catch(le){console.error("Error fetching kc value:",le)}},it=(le,fe)=>le===null?null:le*fe;ve.useEffect(()=>{ce&&Fe(),Z&&S&&(Be=it(S,Z),R(Be))},[ce,Z,S]),ve.useEffect(()=>{ze()},[]);const ie=le=>{console.log("Selected crop ID:",le.target.value),me(le.target.value)};return ve.useEffect(()=>{is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current=new is.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:[-79.4512,43.6568],zoom:8});const le=He=>{const Je=He.match(/^[ ]*(?:Lat: )?(-?\d+\.?\d*)[, ]+(?:Lng: )?(-?\d+\.?\d*)[ ]*$/i);if(!Je)return null;const tt=Number(Je[1]),st=Number(Je[2]);return tt<-90||tt>90||st<-180||st>180?null:[{center:[st,tt],geometry:{type:"Point",coordinates:[st,tt]},place_name:`Lat: ${tt}, Lng: ${st}`,place_type:["coordinate"],properties:{},type:"Feature"}]},fe=new gC({accessToken:is.accessToken,mapboxgl:is,placeholder:"Search for places...",localGeocoder:le});e.current.addControl(fe),fe.on("result",async He=>{const{place_name:Je,geometry:tt}=He.result;c(Je),s({type:"success",message:`Location found: ${Je}`}),e.current.flyTo({center:tt.coordinates,zoom:15});const st=tt.coordinates[1],Ct=tt.coordinates[0],Ue=await be(st,Ct);i(Ue.temperature),g(Ue.humidity),B(Ue.precipitation),P(Ue.et0_fao_evapotranspiration),U(Ue.shortwave_radiation),J(Ue.windSpeed1000hPa),ue({temperature:Ue.temperatureHourly,humidity:Ue.humidityHourly,precipitation:Ue.precipitationHourly})});const be=async(He,Je)=>{const tt=`https://api.open-meteo.com/v1/forecast?latitude=${He}&longitude=${Je}&hourly=temperature_2m,relative_humidity_2m,precipitation,et0_fao_evapotranspiration,shortwave_radiation,wind_speed_1000hPa`;try{const Ct=await(await fetch(tt)).json(),Ue=new Date().toISOString().slice(0,13)+":00",Ft=Ct.hourly.time.indexOf(Ue),Zt=Ft!==-1?Ct.hourly.temperature_2m[Ft]:null,fr=Ft!==-1?Ct.hourly.relative_humidity_2m[Ft]:null,Ye=Ft!==-1?Ct.hourly.precipitation[Ft]:null,Re=Ft!==-1?Ct.hourly.et0_fao_evapotranspiration[Ft]:null,hr=Ft!==-1?Ct.hourly.shortwave_radiation[Ft]:null,Ut=Ft!==-1?Ct.hourly.wind_speed_1000hPa[Ft]:null,vt=Ct.hourly.temperature_2m,Yt=Ct.hourly.relative_humidity_2m,ar=Ct.hourly.precipitation;return{temperature:Zt,humidity:fr,precipitation:Ye,et0_fao_evapotranspiration:Re,shortwave_radiation:hr,windSpeed1000hPa:Ut,temperatureHourly:vt,humidityHourly:Yt,precipitationHourly:ar}}catch(st){return console.error("Failed to fetch weather data:",st),{temperature:null,humidity:null,precipitation:null,et0_fao_evapotranspiration:null,shortwave_radiation:null,windSpeed1000hPa:null,temperatureHourly:[],humidityHourly:[],precipitationHourly:[]}}};return e.current.on("click",async He=>{var st;const{lng:Je,lat:tt}=He.lngLat;try{const Ct=`https://api.mapbox.com/geocoding/v5/mapbox.places/${Je},${tt}.json?access_token=${is.accessToken}`,Zt=((st=(await(await fetch(Ct)).json()).features[0])==null?void 0:st.place_name)||"Unknown location";c(Zt);const fr=await be(tt,Je);i(fr.temperature),g(fr.humidity),B(fr.precipitation),P(fr.et0_fao_evapotranspiration),U(fr.shortwave_radiation),J(fr.windSpeed1000hPa),r.current&&r.current.remove(),r.current=new is.Popup().setLngLat([Je,tt]).setHTML(`<p><strong>Coordinates:</strong></p>
             <p>Lng: ${Je.toFixed(4)}, Lat: ${tt.toFixed(4)}</p>
             <p><strong>City:</strong> ${Zt}</p>
             <p><strong>Temperature:</strong> ${fr.temperature!==null?`${fr.temperature}C`:"N/A"}</p>
             <p><strong>Humidity:</strong> ${fr.humidity!==null?`${fr.humidity}%`:"N/A"}</p>
             <p><strong>Precipitation:</strong> ${fr.precipitation!==null?`${fr.precipitation} mm`:"N/A"}</p>
             <p><strong>~</strong> ${fr.precipitation!==null?`${xe(fr.precipitation)}`:"N/A"}</p>
             <p><strong>Shortwave Radiation:</strong> ${fr.shortwave_radiation!==null?`${fr.shortwave_radiation} W/m`:"N/A"}</p>
             <p><strong>Wind Speed (1000hPa):</strong> ${fr.windSpeed1000hPa!==null?`${fr.windSpeed1000hPa} m/s`:"N/A"}</p>`).addTo(e.current)}catch(Ct){console.error("Error fetching data or creating popup:",Ct),s({type:"error",message:"Failed to fetch weather data."})}}),()=>{e.current.remove()}},[]),m.jsxs("div",{className:"relative h-full",children:[n&&m.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg ${n.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.message}),m.jsx("p",{className:"text-xl text-gray-600 italic",children:"Explore real-time weather data and forecasts for any location."}),m.jsx("div",{className:"relative h-[600px]",children:m.jsx("div",{ref:t,className:"w-full h-full"})}),m.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-4 mt-8",children:[m.jsxs("div",{className:"relative w-full md:w-1/3 bg-white p-6 rounded-lg shadow-lg transition-all hover:shadow-xl hover:bg-white-50",children:[m.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[m.jsx(a4,{className:"mr-2 text-yellow-500",size:24}),"Weather Information"]}),m.jsxs("div",{className:"space-y-6 bg-white p-6 rounded-lg shadow-md",children:[m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(UV,{className:"text-red-500",size:24}),m.jsx("span",{className:"font-semibold text-lg",children:"Location:"}),m.jsx("span",{className:"text-gray-600",children:o})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(a4,{className:"text-orange-400",size:24}),m.jsx("span",{className:"font-semibold",children:"Temperature:"}),m.jsx("span",{children:u!==null?`${u}C`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(fC,{className:"text-blue-500",size:24}),m.jsx("span",{className:"font-semibold",children:"Humidity:"}),m.jsx("span",{children:A!==null?`${A}%`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(pC,{className:"text-blue-500",size:24}),m.jsx("span",{className:"font-semibold",children:"Precipitation:"}),m.jsx("span",{children:C!==null?`${C} mm`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(Wy,{className:"text-gray-500",size:24}),m.jsx("span",{className:"font-semibold",children:"ET:"}),m.jsx("span",{children:S!==null?`${S} mm/day`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(zV,{className:"text-yellow-600",size:24}),m.jsx("span",{className:"font-semibold",children:"Shortwave Radiation:"}),m.jsx("span",{children:N!==null?`${N} W/m`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(GV,{className:"text-green-500",size:24}),m.jsx("span",{className:"font-semibold",children:"Wind Speed:"}),m.jsx("span",{children:$!==null?`${$} m/s`:"N/A"})]})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 space-y-4",children:[m.jsx("p",{className:"text-sm text-gray-600",children:"Please select a crop and enter your land surface area to calculate ETc."}),m.jsxs("select",{name:"crop_id",onChange:ie,required:!0,className:"w-full p-3 border rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-300",children:[m.jsx("option",{value:"",children:"Select a crop"}),oe.map(le=>m.jsx("option",{value:le.id,children:le.name},le.id))]}),m.jsxs("div",{children:[m.jsx("label",{className:"font-medium text-gray-700",children:"Land Surface (sqm):"}),m.jsx("input",{type:"number",value:Qe,onChange:le=>De(le.target.value),className:"w-full p-3 border rounded-lg shadow-sm mt-2 focus:outline-none focus:ring-2 focus:ring-green-300",placeholder:"Enter your land surface area in sqm"})]}),ce&&j!==null&&Qe>0&&m.jsxs("div",{className:"p-3 mt-4 bg-green-50 border-l-4 border-green-400 rounded-md",children:[m.jsxs("div",{className:"flex items-center text-gray-700",children:[m.jsx(Wy,{className:"text-gray-500 mr-2",size:24}),m.jsx("span",{className:"font-semibold",children:"ETc (mm/day):"}),m.jsxs("span",{className:"ml-2",children:[j," mm/day"]})]}),m.jsxs("div",{className:"flex items-center text-gray-700 mt-2",children:[m.jsx(Wy,{className:"text-gray-500 mr-2",size:24}),m.jsx("span",{className:"font-semibold",children:"ETc (litres/day):"}),m.jsxs("span",{className:"ml-2",children:[j*parseFloat(Qe)," litres/day"]})]})]})]})]})]}),m.jsx("div",{className:"w-full md:w-2/3 bg-white p-4 rounded-md shadow-lg",children:m.jsx(UK,{temperature:te.temperature,humidity:te.humidity,precipitation:te.precipitation})})]})]})},pCe=()=>{const t=ve.useRef(null),e=ve.useRef(null),r=ve.useRef(null),[n,s]=ve.useState(null),[o,c]=ve.useState(""),[u,i]=ve.useState(null),[A,g]=ve.useState(null),[C,B]=ve.useState(null),[S,P]=ve.useState(null),[j,R]=ve.useState(null),[N,U]=ve.useState(null),[$,J]=ve.useState(null),[te,ue]=ve.useState({temperature:[],humidity:[],precipitation:[]}),[oe,K]=ve.useState([]),[ce,me]=ve.useState(""),[Z,Y]=ve.useState(null),[Le,_e]=ve.useState(0),[Qe,De]=ve.useState(0),[Be,xe]=ve.useState([]),[ze,Fe]=ve.useState(""),[it,ie]=ve.useState(1800),le=1.2,fe=async(Ue,Ft)=>{const Zt=`https://api.open-meteo.com/v1/forecast?latitude=${Ue}&longitude=${Ft}&hourly=temperature_2m,relative_humidity_2m,precipitation,et0_fao_evapotranspiration,shortwave_radiation,wind_speed_1000hPa`;try{const Ye=await(await fetch(Zt)).json(),Re=new Date().toISOString().slice(0,13)+":00",hr=Ye.hourly.time.indexOf(Re);return{temperature:hr!==-1?Ye.hourly.temperature_2m[hr]:null,humidity:hr!==-1?Ye.hourly.relative_humidity_2m[hr]:null,precipitation:hr!==-1?Ye.hourly.precipitation[hr]:null,et0_fao_evapotranspiration:hr!==-1?Ye.hourly.et0_fao_evapotranspiration[hr]:null,shortwave_radiation:hr!==-1?Ye.hourly.shortwave_radiation[hr]:null,windSpeed1000hPa:hr!==-1?Ye.hourly.wind_speed_1000hPa[hr]:null,temperatureHourly:Ye.hourly.temperature_2m,humidityHourly:Ye.hourly.relative_humidity_2m,precipitationHourly:Ye.hourly.precipitation}}catch(fr){return console.error("Failed to fetch weather data:",fr),{temperature:null,humidity:null,precipitation:null,et0_fao_evapotranspiration:null,shortwave_radiation:null,windSpeed1000hPa:null,temperatureHourly:[],humidityHourly:[],precipitationHourly:[]}}},be=Ue=>Ue<1?"No rain expected; manual or irrigation watering may be necessary.":Ue<=2?"Light rain expected, minimal moisture.":Ue<=10?"Moderate rain expected, ideal for soil moisture.":Ue<=20?"Abundant rain expected, favorable for crops.":Ue<=50?"Heavy rain expected, monitor drainage.":"Torrential rain expected, risk of flooding.";ve.useEffect(()=>{(async()=>{try{const{data:Ft}=await Mr.get("/api/farm/all");xe(Ft.farms||[])}catch(Ft){console.error("Error fetching farms:",Ft)}})()},[]);const He=async Ue=>{const Ft=Ue.target.value;if(Fe(Ft),Ft)try{const Zt=await Mr.get(`/api/farm/${Ft}`);if(Zt.data.status==="success"){const fr=Zt.data.data.geolocation;if(fr&&fr.includes(",")){const[Ye,Re]=fr.split(","),hr=parseFloat(Ye),Ut=parseFloat(Re);_e(hr),De(Ut),ie(1800),e.current&&(e.current.flyTo({center:[Ut,hr],zoom:15}),new is.Marker({color:"red"}).setLngLat([Ut,hr]).setPopup(new is.Popup().setHTML(`<strong>${Zt.data.data.name}</strong>`)).addTo(e.current));const vt=await fe(hr,Ut);i(vt.temperature),g(vt.humidity),B(vt.precipitation),P(vt.et0_fao_evapotranspiration),U(vt.shortwave_radiation),J(vt.windSpeed1000hPa),ue({temperature:vt.temperatureHourly,humidity:vt.humidityHourly,precipitation:vt.precipitationHourly})}}}catch(Zt){console.error("Error fetching farm properties:",Zt)}},Je=async()=>{try{const Ue=await Mr.get("/api/crop/");K(Ue.data.crops)}catch(Ue){console.error("Error fetching crops list:",Ue)}},tt=async()=>{try{const Ue=await Mr.get(`/api/kc/getbycrop/${ce}`);Y(Ue.data.kc_value[0].kc_value)}catch(Ue){console.error("Error fetching kc value:",Ue)}},st=(Ue,Ft)=>Ue===null?null:Ue*Ft;ve.useEffect(()=>{if(S!==null){const Ft=st(S,Z||le);R(Ft)}},[S,Z]),ve.useEffect(()=>{Je()},[]);const Ct=Ue=>{me(Ue.target.value),tt()};return ve.useEffect(()=>{is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current=new is.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-v9",center:[-79.4512,43.6568],zoom:8});const Ue=Zt=>{const fr=Zt.match(/^[ ]*(?:Lat: )?(-?\d+\.?\d*)[, ]+(?:Lng: )?(-?\d+\.?\d*)[ ]*$/i);if(!fr)return null;const Ye=Number(fr[1]),Re=Number(fr[2]);return Ye<-90||Ye>90||Re<-180||Re>180?null:[{center:[Re,Ye],geometry:{type:"Point",coordinates:[Re,Ye]},place_name:`Lat: ${Ye}, Lng: ${Re}`,place_type:["coordinate"],properties:{},type:"Feature"}]},Ft=new gC({accessToken:is.accessToken,mapboxgl:is,placeholder:"Search for places...",localGeocoder:Ue});return e.current.addControl(Ft),Ft.on("result",async Zt=>{const{place_name:fr,geometry:Ye}=Zt.result;c(fr),s({type:"success",message:`Location found: ${fr}`}),e.current.flyTo({center:Ye.coordinates,zoom:15});const Re=Ye.coordinates[1],hr=Ye.coordinates[0],Ut=await fe(Re,hr);i(Ut.temperature),g(Ut.humidity),B(Ut.precipitation),P(Ut.et0_fao_evapotranspiration),U(Ut.shortwave_radiation),J(Ut.windSpeed1000hPa),ue({temperature:Ut.temperatureHourly,humidity:Ut.humidityHourly,precipitation:Ut.precipitationHourly})}),e.current.on("click",async Zt=>{var Re;const{lng:fr,lat:Ye}=Zt.lngLat;try{const hr=`https://api.mapbox.com/geocoding/v5/mapbox.places/${fr},${Ye}.json?access_token=${is.accessToken}`,Yt=((Re=(await(await fetch(hr)).json()).features[0])==null?void 0:Re.place_name)||"Unknown location";c(Yt);const ar=await fe(Ye,fr);i(ar.temperature),g(ar.humidity),B(ar.precipitation),P(ar.et0_fao_evapotranspiration),U(ar.shortwave_radiation),J(ar.windSpeed1000hPa),r.current&&r.current.remove(),r.current=new is.Popup().setLngLat([fr,Ye]).setHTML(`<p><strong>Coordinates:</strong> Lng: ${fr.toFixed(4)}, Lat: ${Ye.toFixed(4)}</p>
             <p><strong>City:</strong> ${Yt}</p>
             <p><strong>Temperature:</strong> ${ar.temperature??"N/A"}C</p>
             <p><strong>Humidity:</strong> ${ar.humidity??"N/A"}%</p>
             <p><strong>Precipitation:</strong> ${ar.precipitation??"N/A"} mm</p>
             <p><strong>~</strong> ${ar.precipitation!==null?be(ar.precipitation):"N/A"}</p>
             <p><strong>Shortwave Radiation:</strong> ${ar.shortwave_radiation??"N/A"} W/m</p>
             <p><strong>Wind Speed (1000hPa):</strong> ${ar.windSpeed1000hPa??"N/A"} m/s</p>`).addTo(e.current)}catch(hr){console.error("Error fetching data or creating popup:",hr),s({type:"error",message:"Failed to fetch weather data."})}}),()=>e.current.remove()},[]),m.jsxs("div",{className:"relative h-full",children:[n&&m.jsx("div",{className:`absolute top-20 right-2 z-10 px-4 py-2 rounded-md shadow-lg ${n.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:n.message}),m.jsx("p",{className:"text-xl text-gray-600 italic",children:"Explore real-time weather data and forecasts for any location."}),m.jsx("div",{className:"relative h-[600px]",children:m.jsx("div",{ref:t,className:"w-full h-full"})}),m.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-4 mt-8",children:[m.jsxs("div",{className:"relative w-full md:w-1/3 bg-white p-6 rounded-lg shadow-lg",children:[m.jsxs("h3",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[m.jsx(a4,{className:"mr-2 text-yellow-500",size:24}),"Weather Information"]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(UV,{className:"text-red-500",size:24}),m.jsx("span",{className:"font-semibold text-lg",children:"Location:"}),m.jsx("span",{className:"text-gray-600",children:o})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(a4,{className:"text-orange-400",size:24}),m.jsx("span",{children:"Temperature:"}),m.jsx("span",{children:u!==null?`${u}C`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(fC,{className:"text-blue-500",size:24}),m.jsx("span",{children:"Humidity:"}),m.jsx("span",{children:A!==null?`${A}%`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(pC,{className:"text-blue-500",size:24}),m.jsx("span",{children:"Precipitation:"}),m.jsx("span",{children:C!==null?`${C} mm`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(Wy,{className:"text-gray-500",size:24}),m.jsx("span",{children:"ET:"}),m.jsx("span",{children:S!==null?`${S} mm/day`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(zV,{className:"text-yellow-600",size:24}),m.jsx("span",{children:"Radiation:"}),m.jsx("span",{children:N!==null?`${N} W/m`:"N/A"})]}),m.jsxs("div",{className:"flex items-center text-gray-700 space-x-2",children:[m.jsx(GV,{className:"text-green-500",size:24}),m.jsx("span",{children:"Wind Speed:"}),m.jsx("span",{children:$!==null?`${$} m/s`:"N/A"})]})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 space-y-4",children:[m.jsx("div",{children:m.jsxs("select",{value:ze,onChange:He,className:"w-full p-3 border rounded-lg",children:[m.jsx("option",{value:"",children:"Select a farm"}),Be.map(Ue=>m.jsxs("option",{value:Ue.id,children:[Ue.name," - ",Ue.subcounty]},Ue.id))]})}),m.jsxs("select",{name:"crop_id",onChange:Ct,className:"w-full p-3 border rounded-lg",children:[m.jsx("option",{value:"",children:"Select a crop"}),oe.map(Ue=>m.jsx("option",{value:Ue.id,children:Ue.name},Ue.id))]}),m.jsxs("div",{children:[m.jsx("label",{children:"Land Surface (sqm):"}),m.jsx("input",{type:"number",value:it,onChange:Ue=>ie(Ue.target.value),className:"w-full p-3 border rounded-lg mt-2"})]}),ce&&j!==null&&it>0&&m.jsxs("div",{className:"p-3 mt-4 bg-green-50 border-l-4 border-green-400 rounded-md",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Wy,{className:"text-gray-500 mr-2"}),m.jsx("span",{children:"ETc (mm/day):"}),m.jsxs("span",{className:"ml-2",children:[j.toFixed(2)," mm/day"]})]}),m.jsxs("div",{className:"flex items-center mt-2",children:[m.jsx(Wy,{className:"text-gray-500 mr-2"}),m.jsx("span",{children:"ETc (litres/day):"}),m.jsxs("span",{className:"ml-2",children:[(j*parseFloat(it)).toFixed(2)," litres/day"]})]})]})]})]})]}),m.jsx("div",{className:"w-full md:w-2/3 bg-white p-4 rounded-md shadow-lg",children:m.jsx(UK,{temperature:te.temperature,humidity:te.humidity,precipitation:te.precipitation})})]})]})};function ACe(){const[t,e]=ve.useState(""),[r,n]=ve.useState(""),[s,o]=ve.useState([]),[c,u]=ve.useState([]),[i,A]=ve.useState(""),[g,C]=ve.useState(""),[B,S]=ve.useState(""),[P,j]=ve.useState(""),[R,N]=ve.useState("10");ve.useEffect(()=>{(async()=>{try{const{data:me}=await Mr.get("/api/farm/all");u(me.farms||[])}catch(me){console.error("Error fetching farms:",me)}})()},[]);const U=async ce=>{const me=ce.target.value;if(A(me),me)try{const Z=await Mr.get(`/api/farm/${me}`);if(Z.data.status==="success"){const Y=Z.data.data.geolocation;if(Y&&Y.includes(",")){const[Le,_e]=Y.split(",");e(parseFloat(Le)),n(parseFloat(_e))}}}catch(Z){console.error("Error fetching farm details:",Z)}},$=async()=>{try{let ce="";if(R==="10"){ce=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&hourly=temperature_2m,relative_humidity_2m,precipitation,wind_speed_1000hPa&forecast_days=10&timezone=auto`;const Z=(await Nm.get(ce)).data.hourly,Y=Array.from({length:10}).map((Le,_e)=>{const Qe=_e*24,De=(_e+1)*24;return{date:new Date(Date.now()+_e*24*60*60*1e3),temperature:Z.temperature_2m.slice(Qe,De).reduce((Be,xe)=>Be+xe,0)/24,humidity:Z.relative_humidity_2m.slice(Qe,De).reduce((Be,xe)=>Be+xe,0)/24,windSpeed:Z.wind_speed_1000hPa.slice(Qe,De).reduce((Be,xe)=>Be+xe,0)/24,precipitation:Z.precipitation.slice(Qe,De).reduce((Be,xe)=>Be+xe,0)}});o(Y)}else{ce=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&daily=temperature_2m_mean,relative_humidity_2m_mean,windspeed_10m_max,precipitation_sum&timezone=auto&past_days=75&forecast_days=15`;const Z=(await Nm.get(ce)).data.daily,Y=Z.time.map((Le,_e)=>({date:new Date(Le),temperature:Z.temperature_2m_mean[_e],humidity:Z.relative_humidity_2m_mean[_e],windSpeed:Z.windspeed_10m_max[_e],precipitation:Z.precipitation_sum[_e]}));o(Y)}console.log("Fetched:",ce)}catch(ce){console.error("Error fetching weather data:",ce)}},J=async()=>{var ce,me;try{const Y=`https://api.mapbox.com/geocoding/v5/mapbox.places/${r},${t}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,_e=(await Nm.get(Y)).data.features[0];_e&&(C(_e.text),S(((ce=_e.context.find(Qe=>Qe.id.includes("country")))==null?void 0:ce.text)||""),j(((me=_e.context.find(Qe=>Qe.id.includes("region")))==null?void 0:me.text)||""))}catch(Z){console.error("Error fetching location data:",Z)}},te=()=>{$(),J()},oe={labels:s.map(ce=>ce.date.toLocaleDateString("en-US")),datasets:[{label:"Temperature (C)",data:s.map(ce=>ce.temperature),borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.4},{label:"Humidity (%)",data:s.map(ce=>ce.humidity),borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",tension:.4},{label:"Wind Speed (km/h)",data:s.map(ce=>ce.windSpeed),borderColor:"rgba(255, 206, 86, 1)",backgroundColor:"rgba(255, 206, 86, 0.2)",tension:.4},{label:"Precipitation (mm)",data:s.map(ce=>ce.precipitation),borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",tension:.4}]},K={responsive:!0,plugins:{legend:{position:"bottom"}}};return m.jsx("div",{className:"bg-white-100 min-h-screen p-6",children:m.jsx("div",{className:"container mx-auto",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-500",children:"Weather History for 90 Days"}),m.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Enter latitude & longitude or select a farm, then choose forecast period."}),m.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Select a Farm"}),m.jsxs("select",{value:i,onChange:U,className:"p-2 border rounded",children:[m.jsx("option",{value:"",children:"-- Choose Farm --"}),c.map(ce=>m.jsxs("option",{value:ce.id,children:[ce.name," - ",ce.subcounty]},ce.id))]})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Latitude"}),m.jsx("input",{type:"text",value:t,onChange:ce=>e(ce.target.value),className:"p-2 border rounded"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Longitude"}),m.jsx("input",{type:"text",value:r,onChange:ce=>n(ce.target.value),className:"p-2 border rounded"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"text-gray-700 font-semibold mb-1",children:"Forecast Period"}),m.jsxs("select",{value:R,onChange:ce=>N(ce.target.value),className:"p-2 border rounded",children:[m.jsx("option",{value:"10",children:"10 Days"}),m.jsx("option",{value:"90",children:"90 Days"})]})]}),m.jsx("button",{onClick:te,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 self-center mt-4 md:mt-0",children:"Search"})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",g,", ",P,", ",B]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsx(E0,{data:oe,options:K})})]})})})}fd.register(hA,dA,vp,Uh,E1,B0,S0);const mCe=()=>{const[t,e]=ve.useState({lat:0,lon:0}),[r,n]=ve.useState(null),[s,o]=ve.useState(null),[c,u]=ve.useState(null),[i,A]=ve.useState([]),[g,C]=ve.useState(""),[B,S]=ve.useState([]);ve.useState("");const[P,j]=ve.useState(3);ve.useEffect(()=>{(async()=>{try{const{data:K}=await Mr.get("/api/farm/all");A(K.farms||[])}catch(K){console.error("Error fetching farms:",K)}})()},[]);const R=async oe=>{const K=oe.target.value;if(C(K),K)try{const ce=await Mr.get(`/api/farm/${K}`);if(ce.data.status==="success"){const me=ce.data.data.geolocation;if(me&&me.includes(",")){const[Z,Y]=me.split(",");e({lat:parseFloat(Y),lon:parseFloat(Z)})}}}catch(ce){console.error("Error fetching farm properties:",ce)}};ve.useEffect(()=>{t.lat&&t.lon&&(N(t.lat,t.lon),U(t.lat,t.lon),s&&(s.flyTo({center:[t.lat,t.lon],zoom:10,essential:!0}),new is.Marker().setLngLat([t.lat,t.lon]).addTo(s)))},[t,s,P]);const N=(oe,K)=>{fetch(`https://api.open-meteo.com/v1/forecast?latitude=${K}&longitude=${oe}&hourly=temperature_2m,relative_humidity_2m,precipitation,shortwave_radiation,wind_speed_1000hPa&forecast_days=${P}`).then(ce=>ce.json()).then(ce=>{n(ce)})},U=(oe,K)=>{fetch(`https://api.open-meteo.com/v1/forecast?latitude=${K}&longitude=${oe}&hourly=temperature_2m,relative_humidity_2m,precipitation,shortwave_radiation,wind_speed_1000hPa&forecast_days=${P}`).then(ce=>ce.json()).then(ce=>{$(ce),J(ce)})},$=oe=>{if(!oe||!oe.hourly||!oe.hourly.time){S([]);return}const K=[];for(let ce=0;ce<P;ce++){const me=new Date;me.setDate(me.getDate()+ce);const Z=me.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long"});let Y=[],Le=[],_e=[],Qe=[];if(oe.hourly.time.forEach((le,fe)=>{new Date(le).getDate()===me.getDate()&&(Y.push(oe.hourly.temperature_2m[fe]),Le.push(oe.hourly.relative_humidity_2m[fe]),_e.push(oe.hourly.precipitation[fe]),Qe.push(oe.hourly.wind_speed_1000hPa[fe]))}),Y.length===0)continue;const De=(Y.reduce((le,fe)=>le+fe,0)/Y.length).toFixed(1),Be=Math.min(...Y).toFixed(1),xe=Math.max(...Y).toFixed(1),ze=(Le.reduce((le,fe)=>le+fe,0)/Le.length).toFixed(1),Fe=_e.reduce((le,fe)=>le+fe,0).toFixed(1),it=(Qe.reduce((le,fe)=>le+fe,0)/Qe.length).toFixed(1);let ie="";Fe>10?ie="Heavy rain expected, don't forget your umbrella!":De>30?ie="Hot day ahead, stay hydrated.":De<10?ie="Cold weather, dress warmly.":ie="Pleasant weather with stable conditions.",K.push({day:Z,avgTemp:De,minTemp:Be,maxTemp:xe,avgHumidity:ze,totalPrecipitation:Fe,avgWind:it,forecastComment:ie})}S(K)},J=oe=>{if(!oe||!oe.hourly||!oe.hourly.time)return;let Le=[];if(oe.hourly.time.forEach((_e,Qe)=>{const De=new Date(_e),Be=oe.hourly.temperature_2m[Qe],xe=oe.hourly.relative_humidity_2m[Qe],ze=oe.hourly.precipitation[Qe],Fe=oe.hourly.wind_speed_1000hPa[Qe];let it=[];if(Be<10?it.push(`low temperature (${Be.toFixed(1)}C)`):Be>30&&it.push(`high temperature (${Be.toFixed(1)}C)`),xe<30&&it.push(`dry conditions (humidity ${xe.toFixed(1)}%)`),ze>5&&it.push(`heavy rain (${ze.toFixed(1)} mm)`),Fe>20&&it.push(`strong wind (${Fe.toFixed(1)} km/h)`),it.length>0){const ie=De.toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});Le.push(`At ${ie} on ${De.toLocaleDateString("en-US")}: ${it.join(", ")}`)}}),Le.length>0){const _e=` Alert: Anomalies detected:
${Le.join(`
`)}`;u(_e),te(_e)}else u(null)},te=oe=>{const K=i.find(Z=>Z.id===g),ce=K&&K.email?K.email:"default@example.com",me={to_name:K?K.name:"Farmer",farmer_email:ce,message:oe};jN.send("YOUR_SERVICE_ID","YOUR_TEMPLATE_ID",me,"YOUR_USER_ID").then(Z=>{console.log("Email sent successfully!",Z.status,Z.text)}).catch(Z=>{console.error("Failed to send email:",Z)})};ve.useEffect(()=>{is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q";const oe=new is.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[0,0],zoom:2});return oe.on("click",K=>{e({lat:K.lngLat.lat,lon:K.lngLat.lng})}),o(oe),()=>oe.remove()},[]);const ue={labels:["8 AM","10 AM","12 PM","2 PM","4 PM","6 PM"],datasets:[{label:"Temperature (C)",data:r?r.hourly.temperature_2m.slice(0,6):[0,0,0,0,0,0],borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)"},{label:"Humidity (%)",data:r?r.hourly.relative_humidity_2m.slice(0,6):[0,0,0,0,0,0],borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.2)"}]};return m.jsx("div",{className:"min-h-screen bg-white-50 p-6",children:m.jsxs("div",{className:"container mx-auto",children:[m.jsx("header",{className:"mb-8",children:m.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Anomaly Alert Detection"})}),m.jsx("section",{className:"mb-8",children:m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("label",{className:"block text-gray-700 mb-2",htmlFor:"farm_id",children:"Farm ID:"}),m.jsxs("select",{id:"farm_id",name:"farm_id",value:g,onChange:R,className:"w-full p-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400",required:!0,children:[m.jsx("option",{value:"",children:"Select Farm"}),i.map(oe=>m.jsxs("option",{value:oe.id,children:[oe.name," - ",oe.subcounty]},oe.id))]})]})}),m.jsx("section",{className:"mb-8",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex items-center space-x-4",children:[m.jsx("label",{htmlFor:"forecastRange",className:"text-lg font-semibold text-gray-700",children:"Forecast Range:"}),m.jsxs("select",{id:"forecastRange",value:P,onChange:oe=>j(parseInt(oe.target.value)),className:"block w-full max-w-xs py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-150 ease-in-out",children:[m.jsx("option",{value:3,children:"3-Day Forecast"}),m.jsx("option",{value:10,children:"10-Day Forecast"})]})]})}),m.jsxs("section",{className:"mb-8 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsx("div",{className:"lg:col-span-2 rounded-lg shadow overflow-hidden",children:m.jsx("div",{id:"map",className:"h-96"})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[P,"-Day Forecast"]}),B.length>0?m.jsx("div",{className:"space-y-4",children:B.map((oe,K)=>m.jsxs("div",{className:"p-4 border rounded hover:shadow-lg transition-shadow duration-200",children:[m.jsx("h3",{className:"text-xl font-semibold mb-2",children:oe.day}),m.jsxs("div",{className:"text-gray-700 space-y-2",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(VV,{className:"text-blue-500 w-5 h-5 mr-2"}),m.jsxs("p",{children:["Avg Temp: ",oe.avgTemp,"C"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(HV,{className:"text-orange-500 w-5 h-5 mr-2"}),m.jsxs("p",{children:["Min: ",oe.minTemp,"C, Max: ",oe.maxTemp,"C"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(fC,{className:"text-teal-500 w-5 h-5 mr-2"}),m.jsxs("p",{children:["Humidity: ",oe.avgHumidity,"%"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(QV,{className:"text-gray-500 w-5 h-5 mr-2"}),m.jsxs("p",{children:["Wind: ",oe.avgWind," km/h"]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(pC,{className:"text-blue-700 w-5 h-5 mr-2"}),m.jsxs("p",{children:["Precipitation: ",oe.totalPrecipitation," mm"]})]})]}),m.jsx("p",{className:"mt-2 text-blue-600 font-medium",children:oe.forecastComment})]},K))}):m.jsx("p",{className:"text-gray-600",children:"No forecast available."})]})]}),m.jsx("section",{className:"mb-8",children:m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Weather Chart"}),m.jsx(E0,{data:ue})]})}),c&&m.jsx("section",{className:"mb-8",children:m.jsxs("div",{className:"flex items-start bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-md",children:[m.jsx("svg",{className:"w-6 h-6 text-red-500 mr-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.675-1.36 3.44 0l6.518 11.59c.75 1.334-.213 3.011-1.72 3.011H3.459c-1.507 0-2.47-1.677-1.72-3.011l6.518-11.59zM11 13a1 1 0 10-2 0 1 1 0 002 0zm-1-2a.75.75 0 01-.75-.75V7a.75.75 0 011.5 0v3.25A.75.75 0 0110 11z",clipRule:"evenodd"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-xl text-red-600 mb-1",children:"Alert"}),m.jsx("p",{className:"text-red-700 text-sm whitespace-pre-wrap",children:c})]})]})})]})})},gCe=({children:t})=>{const[e,r]=ve.useState(null);ve.useEffect(()=>{var i;const u=localStorage.getItem("token");if(u){const g=((i=TC(u).sub)==null?void 0:i.user_type)||"";console.log(g),r(g)}},[]);const[n,s]=ve.useState({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1}),o=u=>{s(i=>({...i,[u]:!i[u]}))},c=()=>{localStorage.removeItem("token"),window.location.href="/login"};return ve.useEffect(()=>{const u=i=>{!i.target.closest(".dropdown")&&!i.target.closest(".dropdown-btn")&&s({forestDropdown:!1,farmDropdown:!1,digitalTraceDropdown:!1,weatherDropdown:!1})};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]),m.jsxs("div",{className:"bg-gradient-to-br from-green-300 via-teal-100 to-blue-200 min-h-screen font-poppins text-gray-800",children:[m.jsxs("header",{className:"bg-gradient-to-r from-teal-700 to-blue-800 text-white px-6 py-4 flex items-center justify-between shadow-lg sticky top-0 z-50 backdrop-blur-md bg-opacity-90",children:[m.jsxs("h1",{className:"text-4xl font-extrabold flex items-center gap-3 group",children:[m.jsx("span",{className:"bg-white text-teal-700 p-2 rounded-full shadow-md group-hover:rotate-12 group-hover:scale-110 transform transition-all duration-300",children:m.jsx(jh,{})}),m.jsx("span",{className:"group-hover:text-teal-300 transition-all duration-300",children:"Nkusu"})]}),m.jsxs("nav",{className:"hidden md:flex space-x-8 text-lg font-medium",children:[m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>o("forestDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Forest"}),n.forestDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsx("ul",{className:"text-gray-700",children:m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/forest",className:"block w-full h-full",children:"Forest Data"})})})})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>o("farmDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Farm"}),n.farmDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsxs("ul",{className:"text-gray-700",children:[m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/farmmanager",className:"block w-full h-full",children:"Farmer Manager"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/crop",className:"block w-full h-full",children:"Crop"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/district",className:"block w-full h-full",children:"District"})})]})})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>o("digitalTraceDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Digital Trace"}),n.digitalTraceDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsxs("ul",{className:"text-gray-700",children:[m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/producestamps",className:"block w-full h-full",children:"Produce Stamps"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/export",className:"block w-full h-full",children:"Export Stamps"})})]})})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>o("weatherDropdown"),className:"dropdown-btn text-white bg-transparent border-none py-2 px-4 rounded-full focus:outline-none transition-all duration-300 hover:underline",children:"Weather"}),n.weatherDropdown&&m.jsx("div",{className:"dropdown absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg",children:m.jsxs("ul",{className:"text-gray-700",children:[m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/weather2",className:"block w-full h-full",children:"Map Weather"})}),m.jsx("li",{className:"px-4 py-2 hover:bg-teal-100 hover:text-teal-700 cursor-pointer",children:m.jsx("a",{href:"/weather3",className:"block w-full h-full",children:"Weather Data"})})]})})]})]}),m.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-400 text-white font-semibold px-4 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Log Out"}),m.jsx("a",{href:"/login",className:"hidden md:inline-block bg-teal-500 hover:bg-teal-300 text-white font-semibold px-6 py-2 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Get Started"})]}),m.jsx("div",{className:"mt-12 px-6",children:t})]})},Cz=()=>{var me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe,it,ie,le;const[t,e]=ve.useState(null),[r,n]=ve.useState(null),[s,o]=ve.useState(!0),[c,u]=ve.useState(null),A=((me=Ju().state)==null?void 0:me.farmId)||"WAK0001",[g,C]=ve.useState(null),[B,S]=ve.useState(null),P=ve.useRef(),[j,R]=ve.useState({width:window.innerWidth,height:window.innerHeight}),N=Array.isArray(r)&&r.length>0&&((Y=(Z=r[0])==null?void 0:Z.data_fields)==null?void 0:Y.gfw_forest_carbon_gross_emissions__Mg_CO2e)||0,U=Array.isArray(r)&&r.length>1&&((_e=(Le=r[1])==null?void 0:Le.data_fields)==null?void 0:_e.gfw_forest_carbon_gross_removals__Mg_CO2e)||0,$=Array.isArray(r)&&r.length>2&&((De=(Qe=r[2])==null?void 0:Qe.data_fields)==null?void 0:De.gfw_forest_carbon_net_flux__Mg_CO2e)||0,J=Array.isArray(r)&&r.length>3&&((xe=(Be=r[3])==null?void 0:Be.data_fields)==null?void 0:xe.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C)||0,te={labels:["Carbon Gross Emissions","Carbon Gross Removals","Carbon Net Flux","Carbon Sequestration"],datasets:[{data:[N,U,$,J],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"]}]},ue={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Carbon Emissions and Removals"}}};ve.useEffect(()=>{const fe=()=>{R({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",fe),()=>{window.removeEventListener("resize",fe)}},[]),ve.useEffect(()=>{var fe;Array.isArray(r)&&r.length>2&&(console.log("Updated geoData:",r),console.log("carbon driver:",(fe=r[0])==null?void 0:fe.data_fields.area__ha))},[r]);const oe=fe=>{const He=Ad({type:"Feature",geometry:{type:"Polygon",coordinates:[fe]}}),Je=He/1e4;return{areaInSquareMeters:He,areaInHectares:Je}};ve.useEffect(()=>{(async()=>{var be,He,Je;console.log("Fetching farm report for farmId:",A);try{const tt=await Mr.get(`/api/gfw/farm/${A}/CarbonReport`);if(tt.data.error)console.error("Error in API response:",tt.data.error),u(tt.data.error);else{console.log("API Response:",tt.data),e(tt.data.farm_info);const st=tt.data.report||[];if(console.log("Report Data:",st),n(st),st.length>0&&((He=(be=st[0])==null?void 0:be.coordinates)==null?void 0:He.length)>0){const Ct=st[0].coordinates[0];console.log("Coordinates:",Ct);const{areaInSquareMeters:Ue,areaInHectares:Ft}=oe(Ct);C(Ue),S(Ft),console.log("Area in m:",Ue,"Area in ha:",Ft)}else console.warn("No valid polygon data in report")}}catch(tt){u("Failed to fetch farm report."),console.error("Error fetching farm report:",((Je=tt.response)==null?void 0:Je.data)||tt.message)}finally{o(!1)}})()},[A]);const K=fe=>{const be={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[fe]},properties:{stroke:"#00FF00","stroke-width":4,"stroke-opacity":1,fill:"#00FF00","fill-opacity":.2}}]};console.log(JSON.stringify(be));const He=encodeURIComponent(JSON.stringify(be));console.log(j);const Je=Math.min(j.width,1280);return`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/geojson(${He})/auto/${Je}x500?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`},ce=async()=>{const fe=P.current,be=new ns("p","mm","a4"),He=fe.querySelectorAll(".page"),Je="nkusu@agriyields.com";for(let tt=0;tt<He.length;tt++){await new Promise(Re=>{const hr=He[tt].getElementsByTagName("img");let Ut=0;hr.length===0?Re():Array.from(hr).forEach(vt=>{vt.onload=()=>{Ut+=1,Ut===hr.length&&Re()},vt.src=vt.src})});const st=await WC(He[tt],{scale:2,useCORS:!0}),Ct=st.toDataURL("image/png"),Ue=be.internal.pageSize.getWidth(),Ft=st.height*Ue/st.width;be.addImage(Ct,"PNG",0,0,Ue,Ft);const Zt=10,fr=Ue-be.getTextWidth(Je)-Zt,Ye=be.internal.pageSize.getHeight()-Zt;be.setFontSize(10),be.text(Je,fr,Ye),tt<He.length-1&&be.addPage()}be.save("EUDR_Report.pdf")};return s?m.jsx(MC,{}):c?m.jsx("p",{className:"text-red-600",children:c}):(r[1].data_fields.area__ha/B*100,c==="No polygon found. Please create a polygon for this forest."?m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),m.jsx("p",{className:"text-lg font-medium text-gray-700 mb-6",children:"It seems that no polygon data is available for this forest. You can create a polygon by clicking the link below:"}),m.jsx(Oo,{to:"/create-polygon",className:"inline-block px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Create Polygon"})]}):m.jsxs("div",{className:"flex justify-center flex-col items-center text-xl",children:[m.jsx("div",{ref:P,children:m.jsxs("div",{className:"page bg-white p-6 shadow-md mb-4",children:[m.jsx("img",{src:"/logo.jpg",alt:"Description of image",style:{float:"right",width:"200px",height:"auto"}}),m.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"NKUSU/AGRIYIELDS REPORT"}),t&&m.jsxs("p",{className:"p-4",children:["Carbon report for Farm ID ",m.jsx("strong",{children:t.farm_id}),", owned by ",m.jsx("strong",{children:t.name}),"Located at ",m.jsx("strong",{children:t.geolocation}),","]}),m.jsxs("div",{className:"container mx-auto p-4",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Carbon Assessment summary"}),m.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Category"}),m.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Mg_CO2e"})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross emissions"}),m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(ze=r[0])==null?void 0:ze.data_fields.gfw_forest_carbon_gross_emissions__Mg_CO2e})]}),m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross absorption"}),m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(Fe=r[1])==null?void 0:Fe.data_fields.gfw_forest_carbon_gross_removals__Mg_CO2e})]}),m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon net Emmisions"}),m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(it=r[2])==null?void 0:it.data_fields.gfw_forest_carbon_net_flux__Mg_CO2e})]}),m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon Sequestration potential"}),m.jsxs("td",{className:"py-2 px-4 border-b border-gray-300",children:[(ie=r[3])==null?void 0:ie.data_fields.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C," belowground",m.jsx("br",{}),(le=r[4])==null?void 0:le.data_fields.gfw_reforestable_extent_aboveground_carbon_potential_sequestration__Mg_C," aboveground"]})]})]})]})]}),m.jsx("div",{className:"w-full max-w-md mx-auto",children:m.jsx(TF,{data:te,options:ue})}),m.jsx("div",{className:"items-center justify-center mt-6 mb-6",children:m.jsx("div",{className:"overflow-hidden",children:m.jsx("img",{src:K(r[0].coordinates[0]),alt:"Map for the forest",className:"object-cover w-full h-full"})})})]})}),m.jsx("button",{onClick:ce,className:"bg-blue-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-blue-700 transition duration-300",children:"Generate PDF"})]}))},yCe=()=>{var me,Z,Y,Le,_e,Qe,De,Be,xe,ze,Fe,it,ie,le;const[t,e]=ve.useState(null),[r,n]=ve.useState(null),[s,o]=ve.useState(!0),[c,u]=ve.useState(null),A=((me=Ju().state)==null?void 0:me.forestId)||1,[g,C]=ve.useState(null),[B,S]=ve.useState(null),P=ve.useRef(),[j,R]=ve.useState({width:window.innerWidth,height:window.innerHeight}),N=Array.isArray(r)&&r.length>0&&((Y=(Z=r[0])==null?void 0:Z.data_fields)==null?void 0:Y.gfw_forest_carbon_gross_emissions__Mg_CO2e)||0,U=Array.isArray(r)&&r.length>1&&((_e=(Le=r[1])==null?void 0:Le.data_fields)==null?void 0:_e.gfw_forest_carbon_gross_removals__Mg_CO2e)||0,$=Array.isArray(r)&&r.length>2&&((De=(Qe=r[2])==null?void 0:Qe.data_fields)==null?void 0:De.gfw_forest_carbon_net_flux__Mg_CO2e)||0,J=Array.isArray(r)&&r.length>3&&((xe=(Be=r[3])==null?void 0:Be.data_fields)==null?void 0:xe.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C)||0,te={labels:["Carbon Gross Emissions","Carbon Gross Removals","Carbon Net Flux","Carbon Sequestration"],datasets:[{data:[N,U,$,J],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCC00"]}]},ue={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Carbon Emissions and Removals"}}};ve.useEffect(()=>{const fe=()=>{R({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",fe),()=>{window.removeEventListener("resize",fe)}},[]),ve.useEffect(()=>{var fe;Array.isArray(r)&&r.length>2&&(console.log("Updated geoData:",r),console.log("carbon driver:",(fe=r[0])==null?void 0:fe.data_fields.area__ha))},[r]);const oe=fe=>{const He=Ad({type:"Feature",geometry:{type:"Polygon",coordinates:[fe]}}),Je=He/1e4;return{areaInSquareMeters:He,areaInHectares:Je}};ve.useEffect(()=>{(async()=>{var be,He,Je;console.log("Fetching forest report for forestId:",A);try{const tt=await Mr.get(`/api/gfw/forest/${A}/CarbonReport`);if(tt.data.error)console.error("Error in API response:",tt.data.error),u(tt.data.error);else{console.log("API Response:",tt.data),e(tt.data.forest_info);const st=tt.data.report||[];if(console.log("Report Data:",st),n(st),st.length>0&&((He=(be=st[0])==null?void 0:be.coordinates)==null?void 0:He.length)>0){const Ct=st[0].coordinates[0];console.log("Coordinates:",Ct);const{areaInSquareMeters:Ue,areaInHectares:Ft}=oe(Ct);C(Ue),S(Ft),console.log("Area in m:",Ue,"Area in ha:",Ft)}else console.warn("No valid polygon data in report")}}catch(tt){u("Failed to fetch farm report."),console.error("Error fetching farm report:",((Je=tt.response)==null?void 0:Je.data)||tt.message)}finally{o(!1)}})()},[A]);const K=fe=>{const He=encodeURIComponent(JSON.stringify({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Polygon",coordinates:[fe]},properties:{stroke:"#00FF00","stroke-width":4,"stroke-opacity":1,fill:"#00FF00","fill-opacity":.2}}]}));console.log(j);const Je=Math.min(j.width,1280);return`https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v12/static/geojson(${He})/auto/${Je}x500?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`},ce=async()=>{const fe=P.current,be=new ns("p","mm","a4"),He=fe.querySelectorAll(".page"),Je="nkusu@agriyields.com";for(let tt=0;tt<He.length;tt++){await new Promise(Re=>{const hr=He[tt].getElementsByTagName("img");let Ut=0;hr.length===0?Re():Array.from(hr).forEach(vt=>{vt.onload=()=>{Ut+=1,Ut===hr.length&&Re()},vt.src=vt.src})});const st=await WC(He[tt],{scale:2,useCORS:!0}),Ct=st.toDataURL("image/png"),Ue=be.internal.pageSize.getWidth(),Ft=st.height*Ue/st.width;be.addImage(Ct,"PNG",0,0,Ue,Ft);const Zt=10,fr=Ue-be.getTextWidth(Je)-Zt,Ye=be.internal.pageSize.getHeight()-Zt;be.setFontSize(10),be.text(Je,fr,Ye),tt<He.length-1&&be.addPage()}be.save("EUDR_Report.pdf")};return s?m.jsx(MC,{}):c?m.jsx("p",{className:"text-red-600",children:c}):(r[1].data_fields.area__ha/B*100,c==="No polygon found. Please create a polygon for this forest."?m.jsxs("div",{className:"container mx-auto p-6",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6 text-red-600",children:c}),m.jsx("p",{className:"text-lg font-medium text-gray-700 mb-6",children:"It seems that no polygon data is available for this forest. You can create a polygon by clicking the link below:"}),m.jsx(Oo,{to:"/create-polygon",className:"inline-block px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Create Polygon"})]}):m.jsxs("div",{className:"flex justify-center flex-col items-center text-xl",children:[m.jsx("div",{ref:P,children:m.jsxs("div",{className:"page bg-white p-6 shadow-md mb-4",children:[m.jsx("img",{src:"/logo.jpg",alt:"Description of image",style:{float:"right",width:"200px",height:"auto"}}),m.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"NKUSU/AGRIYIELDS REPORT"}),t&&m.jsxs("p",{className:"p-4",children:["Carbon report for Forest ID ",m.jsx("strong",{children:t.farm_id}),", owned by ",m.jsx("strong",{children:t.name})]}),m.jsxs("div",{className:"container mx-auto p-4",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Carbon Assessment summary"}),m.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Category"}),m.jsx("th",{className:"py-2 px-4 border-b border-gray-300 text-left text-gray-700",children:"Mg_CO2e"})]})}),m.jsxs("tbody",{children:[m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross emissions"}),m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(ze=r[0])==null?void 0:ze.data_fields.gfw_forest_carbon_gross_emissions__Mg_CO2e})]}),m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon gross absorption"}),m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(Fe=r[1])==null?void 0:Fe.data_fields.gfw_forest_carbon_gross_removals__Mg_CO2e})]}),m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon net Emmisions"}),m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:(it=r[2])==null?void 0:it.data_fields.gfw_forest_carbon_net_flux__Mg_CO2e})]}),m.jsxs("tr",{className:"hover:bg-gray-100",children:[m.jsx("td",{className:"py-2 px-4 border-b border-gray-300",children:"Carbon Sequestration potential"}),m.jsxs("td",{className:"py-2 px-4 border-b border-gray-300",children:[(ie=r[3])==null?void 0:ie.data_fields.gfw_reforestable_extent_belowground_carbon_potential_sequestration__Mg_C," belowground",m.jsx("br",{}),(le=r[4])==null?void 0:le.data_fields.gfw_reforestable_extent_aboveground_carbon_potential_sequestration__Mg_C," aboveground"]})]})]})]})]}),m.jsx("div",{className:"w-full max-w-md mx-auto",children:m.jsx(TF,{data:te,options:ue})}),m.jsx("div",{className:"items-center justify-center mt-6 mb-6",children:m.jsx("div",{className:"overflow-hidden",children:m.jsx("img",{src:K(r[0].coordinates[0]),alt:"Map for the forest",className:"object-cover w-full h-full"})})})]})}),m.jsx("button",{onClick:ce,className:"bg-blue-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-blue-700 transition duration-300",children:"Generate PDF"})]}))},vCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState({name:"",location:"",country:"",district:""}),[c,u]=ve.useState({name:"",price:"",store_id:""}),[i,A]=ve.useState(null),[g,C]=ve.useState(null);ve.useEffect(()=>{B(),S()},[]);const B=async()=>{try{const ue=await Mr.get("/api/store/");e(ue.data.stores)}catch(ue){console.error("Error fetching stores:",ue)}},S=async()=>{try{const ue=await Mr.get("/api/product/");n(ue.data.products)}catch(ue){console.error("Error fetching products:",ue)}},P=ue=>{const{name:oe,value:K}=ue.target;o(ce=>({...ce,[oe]:K}))},j=ue=>{const{name:oe,value:K}=ue.target;u(ce=>({...ce,[oe]:K}))},R=async ue=>{ue.preventDefault();try{i?await Mr.put(`/api/store/${i}/edit`,s):await Mr.post("/api/store/create",s),o({name:"",location:"",country:"",district:""}),A(null),B()}catch(oe){console.error("Error saving store:",oe)}},N=async ue=>{ue.preventDefault();try{g?await Mr.put(`/api/product/${g}/edit`,c):await Mr.post("/api/product/create",c),u({name:"",price:"",store_id:""}),C(null),S()}catch(oe){console.error("Error saving product:",oe)}},U=ue=>{o({name:ue.name,location:ue.location,country:ue.country,district:ue.district}),A(ue.id)},$=ue=>{u({name:ue.name,price:ue.price,store_id:ue.store_id}),C(ue.id)},J=async ue=>{try{await Mr.delete(`/api/store/${ue}/delete`),B()}catch(oe){console.error("Error deleting store:",oe)}},te=async ue=>{try{await Mr.delete(`/api/product/${ue}/delete`),S()}catch(oe){console.error("Error deleting product:",oe)}};return m.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl mb-4",children:"Store & Product Manager"}),m.jsxs("form",{onSubmit:R,className:"mb-4",children:[m.jsx("input",{type:"text",name:"name",value:s.name,onChange:P,placeholder:"Store Name",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"text",name:"location",value:s.location,onChange:P,placeholder:"Location",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"text",name:"country",value:s.country,onChange:P,placeholder:"Country",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"text",name:"district",value:s.district,onChange:P,placeholder:"District",className:"border p-2 rounded mr-2",required:!0}),m.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:i?"Update Store":"Add Store"})]}),m.jsxs("form",{onSubmit:N,className:"mb-4",children:[m.jsx("input",{type:"text",name:"name",value:c.name,onChange:j,placeholder:"Product Name",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"number",name:"price",value:c.price,onChange:j,placeholder:"Price",className:"border p-2 rounded mr-2",required:!0}),m.jsxs("select",{name:"store_id",value:c.store_id,onChange:j,className:"border p-2 rounded mr-2",required:!0,children:[m.jsx("option",{value:"",children:"Select Store"}),t.map(ue=>m.jsx("option",{value:ue.id,children:ue.name},ue.id))]}),m.jsx("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded",children:g?"Update Product":"Add Product"})]}),m.jsx("h3",{className:"text-xl mt-6",children:"Stores"}),m.jsx("ul",{children:t.map(ue=>m.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[m.jsxs("span",{children:[ue.name," - ",ue.location," (",ue.country,", ",ue.district,")"]}),m.jsxs("div",{children:[m.jsx("button",{onClick:()=>U(ue),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>J(ue.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},ue.id))}),m.jsx("h3",{className:"text-xl mt-6",children:"Products"}),m.jsx("ul",{children:r.map(ue=>m.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[m.jsxs("span",{children:[ue.name," - $",ue.price," (Store: ",ue.store_id,")"]}),m.jsxs("div",{children:[m.jsx("button",{onClick:()=>$(ue),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>te(ue.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},ue.id))})]})};fd.register(hA,dA,vp,Uh,E1,B0,S0);const xCe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState([]),[c,u]=ve.useState([]),[i,A]=ve.useState([]),[g,C]=ve.useState(0),[B,S]=ve.useState(0),[P,j]=ve.useState([]),[R,N]=ve.useState(!1),[U,$]=ve.useState(""),[J,te]=ve.useState(""),[ue,oe]=ve.useState([]),[K,ce]=ve.useState([]),[me,Z]=ve.useState(""),[Y,Le]=ve.useState(""),[_e,Qe]=ve.useState(""),[De,Be]=ve.useState(""),[xe,ze]=ve.useState("30"),Fe={Cocoa:250,"Coffee Robusta":300,"Coffee Arabica":280,"Oil Palm":350,"Soya Bean":200,Rubber:300,"Hass Avocado":250,Macadamia:280,Maize:200,Sunflower:180,"Sweet Potato":200,Potato:200,Tomato:220,Millet:180,Sorghum:200,Groundnut:200,Ginger:280,Pineapple:300};ve.useEffect(()=>{(async()=>{try{const Je=await Mr.get("/api/crop/");oe(Je.data.crops)}catch(Je){console.error("Error fetching crops:",Je)}})()},[]),ve.useEffect(()=>{(async()=>{try{const{data:Je}=await Mr.get("/api/farm/all");ce(Je.farms||[])}catch(Je){console.error("Error fetching farms:",Je)}})()},[]);const it=async He=>{const Je=He.target.value;if(Z(Je),Je)try{const tt=await Mr.get(`/api/farm/${Je}`);if(tt.data.status==="success"){const st=tt.data.data.geolocation;if(st&&st.includes(",")){const[Ct,Ue]=st.split(",");C(parseFloat(Ct)),S(parseFloat(Ue))}}}catch(tt){console.error("Error fetching farm properties:",tt)}},ie=async(He,Je)=>{const tt=`https://api.open-meteo.com/v1/forecast?latitude=${He}&longitude=${Je}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&past_days=${xe}`;try{const Ct=await(await fetch(tt)).json();if(Ct.daily){const{temperature_2m_max:Ue,temperature_2m_min:Ft,time:Zt}=Ct.daily;n(Zt);const fr=18,Ye=10,Re=Ue.map((ar,nr)=>({max:ar,min:Ft[nr],avg:(ar+Ft[nr])/2}));e(Re);const hr=Re.map(ar=>Math.max(0,fr-ar.avg)),Ut=Re.map(ar=>Math.max(0,ar.avg-fr)),vt=Re.map(ar=>Math.max(0,ar.avg-Ye));o(hr),u(Ut),A(vt);const Yt=vt.reduce((ar,nr)=>(ar.push((ar.length>0?ar[ar.length-1]:0)+nr),ar),[]);if(j(Yt),J&&Fe[J]){const ar=Fe[J],nr=Yt.findIndex(Fr=>Fr>=ar);nr!==-1?(N(!0),$(Zt[nr])):(N(!1),$(""))}}}catch(st){console.error("Error fetching weather data:",st)}},le=async()=>{try{const Je=`https://api.mapbox.com/geocoding/v5/mapbox.places/${B},${g}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,st=(await Nm.get(Je)).data.features[0];if(st&&(Le(st.text||""),st.context&&st.context.length>0)){const Ct=st.context.find(Ft=>Ft.id.includes("country")),Ue=st.context.find(Ft=>Ft.id.includes("region"));Be(Ct?Ct.text:""),Qe(Ue?Ue.text:"")}}catch(He){console.error("Error fetching location data:",He)}};ve.useEffect(()=>{g&&B&&(ie(g,B),le())},[g,B,xe]),ve.useEffect(()=>{if(J&&P.length>0){const He=Fe[J],Je=P.findIndex(tt=>tt>=He);Je!==-1?(N(!0),$(r[Je])):(N(!1),$(""))}},[J,P,r]);const fe={labels:r,datasets:[{label:"HDD (Heating Degree Days)",data:s,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.4,fill:!0},{label:"CDD (Cooling Degree Days)",data:c,borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",tension:.4,fill:!0},{label:"GDD (Growing Degree Days)",data:i,borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",tension:.4,fill:!0}]},be={responsive:!0,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{title:{display:!0,text:"Dates"}},y:{title:{display:!0,text:"Degree Days"}}}};return m.jsxs("div",{className:"max-w-4xl mx-auto mt-8",children:[m.jsxs("h1",{className:"text-2xl font-bold text-center mb-6",children:["HDD, CDD, GDD for the Past ",xe," Days"]}),m.jsxs("div",{className:"mb-4 flex items-center space-x-2",children:[m.jsxs("select",{value:me,onChange:it,className:"p-2 border rounded",children:[m.jsx("option",{value:"",children:"Select a farm"}),K.map(He=>m.jsxs("option",{value:He.id,children:[He.name," - ",He.subcounty]},He.id))]}),m.jsx("input",{type:"number",placeholder:"Latitude",value:g,onChange:He=>C(He.target.value),className:"p-2 border rounded"}),m.jsx("input",{type:"number",placeholder:"Longitude",value:B,onChange:He=>S(He.target.value),className:"p-2 border rounded"}),m.jsxs("select",{value:J,onChange:He=>te(He.target.value),className:"p-2 border rounded",children:[m.jsx("option",{value:"",children:"Select a crop"}),ue.map(He=>m.jsx("option",{value:He.name,children:He.name},He.id))]}),m.jsxs("select",{value:xe,onChange:He=>ze(He.target.value),className:"p-2 border rounded",children:[m.jsx("option",{value:"30",children:"1 Month"}),m.jsx("option",{value:"90",children:"3 Months"})]})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",Y,", ",_e,", ",De]})}),m.jsx(E0,{data:fe,options:be}),J&&m.jsxs("div",{className:"mt-4 text-center",children:[m.jsxs("p",{className:"text-lg font-medium",children:["Cumulative GDD: ",P[P.length-1]||0]}),R?m.jsxs("p",{className:"text-lg font-medium",children:["Conditions are favorable for planting ",J," starting from"," ",m.jsx("strong",{children:U}),"."]}):m.jsxs("p",{className:"text-lg font-medium",children:["Conditions are not yet favorable for planting ",J,"."]})]})]})};/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Sz={modes:{point(t,e){return x5(t,e,{intersect:!0})},nearest(t,e,r){return wCe(t,e,r)},x(t,e,r){return x5(t,e,{intersect:r.intersect,axis:"x"})},y(t,e,r){return x5(t,e,{intersect:r.intersect,axis:"y"})}}};function kN(t,e,r){return(Sz.modes[r.mode]||Sz.modes.nearest)(t,e,r)}function _Ce(t,e,r){return r!=="x"&&r!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,r,!0)}function bCe(t,e,r){return r==="x"?{x:t.x,y:e.y}:r==="y"?{x:e.x,y:t.y}:e}function x5(t,e,r){return t.filter(n=>r.intersect?n.inRange(e.x,e.y):_Ce(n,e,r.axis))}function wCe(t,e,r){let n=Number.POSITIVE_INFINITY;return x5(t,e,r).reduce((s,o)=>{const c=o.getCenterPoint(),u=bCe(e,c,r.axis),i=u1(e,u);return i<n?(s=[o],n=i):i===n&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)}function F0(t,e,r){const n=Math.cos(r),s=Math.sin(r),o=e.x,c=e.y;return{x:o+n*(t.x-o)-s*(t.y-c),y:c+s*(t.x-o)+n*(t.y-c)}}const CCe=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Kg=.001,ZC=(t,e,r)=>Math.min(r,Math.max(e,t)),zK=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function SCe(t,e,r){for(const n of Object.keys(t))t[n]=ZC(t[n],e,r);return t}function BCe(t,e,r,n){return!t||!e||r<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(r+n,2)}function QK(t,{x:e,y:r,x2:n,y2:s},o,{borderWidth:c,hitTolerance:u}){const i=(c+u)/2,A=t.x>=e-i-Kg&&t.x<=n+i+Kg,g=t.y>=r-i-Kg&&t.y<=s+i+Kg;return o==="x"?A:(o==="y"||A)&&g}function HK(t,{rect:e,center:r},n,{rotation:s,borderWidth:o,hitTolerance:c}){const u=F0(t,r,Ic(-s));return QK(u,e,n,{borderWidth:o,hitTolerance:c})}function N0(t,e){const{centerX:r,centerY:n}=t.getProps(["centerX","centerY"],e);return{x:r,y:n}}function ECe(t,e,r,n=!0){const s=r.split(".");let o=0;for(const c of e.split(".")){const u=s[o++];if(parseInt(c,10)<parseInt(u,10))break;if(CCe(u,c)){if(n)throw new Error(`${t} v${r} is not supported. v${e} or newer is required.`);return!1}}return!0}const VK=t=>typeof t=="string"&&t.endsWith("%"),GK=t=>parseFloat(t)/100,qK=t=>ZC(GK(t),0,1),$v=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),TCe={box:t=>$v(t.centerX,t.centerY),doughnutLabel:t=>$v(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>$v(t.centerX,t.centerY),line:t=>$v(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>$v(t.centerX,t.centerY)};function DN(t,e){return e==="start"?0:e==="end"?t:VK(e)?qK(e)*t:t/2}function Jm(t,e,r=!0){return typeof e=="number"?e:VK(e)?(r?qK(e):GK(e))*t:t}function ICe(t,e){const{x:r,width:n}=t,s=e.textAlign;return s==="center"?r+n/2:s==="end"||s==="right"?r+n:r}function $K(t,e,{borderWidth:r,position:n,xAdjust:s,yAdjust:o},c){const u=Rs(c),i=e.width+(u?c.width:0)+r,A=e.height+(u?c.height:0)+r,g=ON(n),C=Bz(t.x,i,s,g.x),B=Bz(t.y,A,o,g.y);return{x:C,y:B,x2:C+i,y2:B+A,width:i,height:A,centerX:C+i/2,centerY:B+A/2}}function ON(t,e="center"){return Rs(t)?{x:gs(t.x,e),y:gs(t.y,e)}:(t=gs(t,e),{x:t,y:t})}const WK=(t,e)=>t&&t.autoFit&&e<1;function KK(t,e){const r=t.font,n=ha(r)?r:[r];return WK(t,e)?n.map(function(s){const o=rc(s);return o.size=Math.floor(s.size*e),o.lineHeight=s.lineHeight,rc(o)}):n.map(s=>rc(s))}function XK(t){return t&&($h(t.xValue)||$h(t.yValue))}function Bz(t,e,r=0,n){return t-DN(e,n)+r}function k1(t,e,r){const n=r.init;if(n){if(n===!0)return ZK(e,r)}else return;return LCe(t,e,r)}function YK(t,e,r){let n=!1;return e.forEach(s=>{qh(t[s])?(n=!0,r[s]=t[s]):$h(r[s])&&delete r[s]}),n}function ZK(t,e){const r=e.type||"line";return TCe[r](t)}function LCe(t,e,r){const n=xa(r.init,[{chart:t,properties:e,options:r}]);if(n===!0)return ZK(e,r);if(Rs(n))return n}const J3=new Map,FCe=t=>isNaN(t)||t<=0,NCe=t=>t.reduce(function(e,r){return e+=r.string,e},"");function JC(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function eS(t,{x:e,y:r},n){n&&(t.translate(e,r),t.rotate(Ic(n)),t.translate(-e,-r))}function mA(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function D1(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function tS(t,e){const r=e.content;if(JC(r))return{width:Jm(r.width,e.width),height:Jm(r.height,e.height)};const n=KK(e),s=e.textStrokeWidth,o=ha(r)?r:[r],c=o.join()+NCe(n)+s+(t._measureText?"-spriting":"");return J3.has(c)||J3.set(c,kCe(t,o,n,s)),J3.get(c)}function JK(t,e,r){const{x:n,y:s,width:o,height:c}=e;t.save(),D1(t,r);const u=mA(t,r);t.fillStyle=r.backgroundColor,t.beginPath(),h1(t,{x:n,y:s,w:o,h:c,radius:SCe(Mm(r.borderRadius),0,Math.min(o,c)/2)}),t.closePath(),t.fill(),u&&(t.shadowColor=r.borderShadowColor,t.stroke()),t.restore()}function eX(t,e,r,n){const s=r.content;if(JC(s)){t.save(),t.globalAlpha=RCe(r.opacity,s.style.opacity),t.drawImage(s,e.x,e.y,e.width,e.height),t.restore();return}const o=ha(s)?s:[s],c=KK(r,n),u=r.color,i=ha(u)?u:[u],A=ICe(e,r),g=e.y+r.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=r.textAlign,PCe(t,r)&&DCe(t,{x:A,y:g},o,c),OCe(t,{x:A,y:g},o,{fonts:c,colors:i}),t.restore()}function PCe(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function MCe(t,e,r,n){const{radius:s,options:o}=e,c=o.pointStyle,u=o.rotation;let i=(u||0)*fF;if(JC(c)){t.save(),t.translate(r,n),t.rotate(i),t.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),t.restore();return}FCe(s)||jCe(t,{x:r,y:n,radius:s,rotation:u,style:c,rad:i})}function jCe(t,{x:e,y:r,radius:n,rotation:s,style:o,rad:c}){let u,i,A,g;switch(t.beginPath(),o){default:t.arc(e,r,n,0,za),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(c)*n,r-Math.cos(c)*n),c+=J5,t.lineTo(e+Math.sin(c)*n,r-Math.cos(c)*n),c+=J5,t.lineTo(e+Math.sin(c)*n,r-Math.cos(c)*n),t.closePath();break;case"rectRounded":g=n*.516,A=n-g,u=Math.cos(c+Vd)*A,i=Math.sin(c+Vd)*A,t.arc(e-u,r-i,g,c-Co,c-ml),t.arc(e+i,r-u,g,c-ml,c),t.arc(e+u,r+i,g,c,c+ml),t.arc(e-i,r+u,g,c+ml,c+Co),t.closePath();break;case"rect":if(!s){A=Math.SQRT1_2*n,t.rect(e-A,r-A,2*A,2*A);break}c+=Vd;case"rectRot":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+i,r-u),t.lineTo(e+u,r+i),t.lineTo(e-i,r+u),t.closePath();break;case"crossRot":c+=Vd;case"cross":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i),t.moveTo(e+i,r-u),t.lineTo(e-i,r+u);break;case"star":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i),t.moveTo(e+i,r-u),t.lineTo(e-i,r+u),c+=Vd,u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i),t.moveTo(e+i,r-u),t.lineTo(e-i,r+u);break;case"line":u=Math.cos(c)*n,i=Math.sin(c)*n,t.moveTo(e-u,r-i),t.lineTo(e+u,r+i);break;case"dash":t.moveTo(e,r),t.lineTo(e+Math.cos(c)*n,r+Math.sin(c)*n);break}t.fill()}function kCe(t,e,r,n){t.save();const s=e.length;let o=0,c=n;for(let u=0;u<s;u++){const i=r[Math.min(u,r.length-1)];t.font=i.string;const A=e[u];o=Math.max(o,t.measureText(A).width+n),c+=i.lineHeight}return t.restore(),{width:o,height:c}}function DCe(t,{x:e,y:r},n,s){t.beginPath();let o=0;n.forEach(function(c,u){const i=s[Math.min(u,s.length-1)],A=i.lineHeight;t.font=i.string,t.strokeText(c,e,r+A/2+o),o+=A}),t.stroke()}function OCe(t,{x:e,y:r},n,{fonts:s,colors:o}){let c=0;n.forEach(function(u,i){const A=o[Math.min(i,o.length-1)],g=s[Math.min(i,s.length-1)],C=g.lineHeight;t.beginPath(),t.font=g.string,t.fillStyle=A,t.fillText(u,e,r+C/2+c),c+=C,t.fill()})}function RCe(t,e){const r=Hm(t)?t:e;return Hm(r)?ZC(r,0,1):1}const tX=["left","bottom","top","right"];function UCe(t,e){const{pointX:r,pointY:n,options:s}=e,o=s.callout,c=o&&o.display&&GCe(e,o);if(!c||$Ce(e,o,c))return;if(t.save(),t.beginPath(),!mA(t,o))return t.restore();const{separatorStart:i,separatorEnd:A}=zCe(e,c),{sideStart:g,sideEnd:C}=HCe(e,c,i);(o.margin>0||s.borderWidth===0)&&(t.moveTo(i.x,i.y),t.lineTo(A.x,A.y)),t.moveTo(g.x,g.y),t.lineTo(C.x,C.y);const B=F0({x:r,y:n},e.getCenterPoint(),Ic(-e.rotation));t.lineTo(B.x,B.y),t.stroke(),t.restore()}function zCe(t,e){const{x:r,y:n,x2:s,y2:o}=t,c=QCe(t,e);let u,i;return e==="left"||e==="right"?(u={x:r+c,y:n},i={x:u.x,y:o}):(u={x:r,y:n+c},i={x:s,y:u.y}),{separatorStart:u,separatorEnd:i}}function QCe(t,e){const{width:r,height:n,options:s}=t,o=s.callout.margin+s.borderWidth/2;return e==="right"?r+o:e==="bottom"?n+o:-o}function HCe(t,e,r){const{y:n,width:s,height:o,options:c}=t,u=c.callout.start,i=VCe(e,c.callout);let A,g;return e==="left"||e==="right"?(A={x:r.x,y:n+Jm(o,u)},g={x:A.x+i,y:A.y}):(A={x:r.x+Jm(s,u),y:r.y},g={x:A.x,y:A.y+i}),{sideStart:A,sideEnd:g}}function VCe(t,e){const r=e.side;return t==="left"||t==="top"?-r:r}function GCe(t,e){const r=e.position;return tX.includes(r)?r:qCe(t,e)}function qCe(t,e){const{x:r,y:n,x2:s,y2:o,width:c,height:u,pointX:i,pointY:A,centerX:g,centerY:C,rotation:B}=t,S={x:g,y:C},P=e.start,j=Jm(c,P),R=Jm(u,P),N=[r,r+j,r+j,s],U=[n+R,o,n,o],$=[];for(let J=0;J<4;J++){const te=F0({x:N[J],y:U[J]},S,Ic(B));$.push({position:tX[J],distance:u1(te,{x:i,y:A})})}return $.sort((J,te)=>J.distance-te.distance)[0].position}function $Ce(t,e,r){const{pointX:n,pointY:s}=t,o=e.margin;let c=n,u=s;return r==="left"?c+=o:r==="right"?c-=o:r==="top"?u+=o:r==="bottom"&&(u-=o),t.inRange(c,u)}const Ez={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function x1(t,e,r){return e=typeof e=="number"?e:t.parse(e),Cl(e)?t.getPixelForValue(e):r}function v0(t,e,r){const n=e[r];if(n||r==="scaleID")return n;const s=r.charAt(0),o=Object.values(t).filter(c=>c.axis&&c.axis===s);return o.length?o[0].id:s}function rX(t,e){if(t){const r=t.options.reverse,n=x1(t,e.min,r?e.end:e.start),s=x1(t,e.max,r?e.start:e.end);return{start:n,end:s}}}function nX(t,e){const{chartArea:r,scales:n}=t,s=n[v0(n,e,"xScaleID")],o=n[v0(n,e,"yScaleID")];let c=r.width/2,u=r.height/2;return s&&(c=x1(s,e.xValue,s.left+s.width/2)),o&&(u=x1(o,e.yValue,o.top+o.height/2)),{x:c,y:u}}function RN(t,e){const r=t.scales,n=r[v0(r,e,"xScaleID")],s=r[v0(r,e,"yScaleID")];if(!n&&!s)return{};let{left:o,right:c}=n||t.chartArea,{top:u,bottom:i}=s||t.chartArea;const A=Tz(n,{min:e.xMin,max:e.xMax,start:o,end:c});o=A.start,c=A.end;const g=Tz(s,{min:e.yMin,max:e.yMax,start:i,end:u});return u=g.start,i=g.end,{x:o,y:u,x2:c,y2:i,width:c-o,height:i-u,centerX:o+(c-o)/2,centerY:u+(i-u)/2}}function iX(t,e){if(!XK(e)){const r=RN(t,e);let n=e.radius;(!n||isNaN(n))&&(n=Math.min(r.width,r.height)/2,e.radius=n);const s=n*2,o=r.centerX+e.xAdjust,c=r.centerY+e.yAdjust;return{x:o-n,y:c-n,x2:o+n,y2:c+n,centerX:o,centerY:c,width:s,height:s,radius:n}}return KCe(t,e)}function WCe(t,e){const{scales:r,chartArea:n}=t,s=r[e.scaleID],o={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return s?XCe(s,o,e):YCe(r,o,e),o}function sX(t,e){const r=RN(t,e);return r.initProperties=k1(t,r,e),r.elements=[{type:"label",optionScope:"label",properties:eSe(t,r,e),initProperties:r.initProperties}],r}function KCe(t,e){const r=nX(t,e),n=e.radius*2;return{x:r.x-e.radius+e.xAdjust,y:r.y-e.radius+e.yAdjust,x2:r.x+e.radius+e.xAdjust,y2:r.y+e.radius+e.yAdjust,centerX:r.x+e.xAdjust,centerY:r.y+e.yAdjust,radius:e.radius,width:n,height:n}}function Tz(t,e){const r=rX(t,e)||e;return{start:Math.min(r.start,r.end),end:Math.max(r.start,r.end)}}function XCe(t,e,r){const n=x1(t,r.value,NaN),s=x1(t,r.endValue,n);t.isHorizontal()?(e.x=n,e.x2=s):(e.y=n,e.y2=s)}function YCe(t,e,r){for(const n of Object.keys(Ez)){const s=t[v0(t,r,n)];if(s){const{min:o,max:c,start:u,end:i,startProp:A,endProp:g}=Ez[n],C=rX(s,{min:r[o],max:r[c],start:s[u],end:s[i]});e[A]=C.start,e[g]=C.end}}}function ZCe({properties:t,options:e},r,n,s){const{x:o,x2:c,width:u}=t;return oX({start:o,end:c,size:u,borderWidth:e.borderWidth},{position:n.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:r.width})}function JCe({properties:t,options:e},r,n,s){const{y:o,y2:c,height:u}=t;return oX({start:o,end:c,size:u,borderWidth:e.borderWidth},{position:n.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:r.height})}function oX(t,e){const{start:r,end:n,borderWidth:s}=t,{position:o,padding:{start:c,end:u},adjust:i}=e,A=n-s-r-c-u-e.size;return r+s/2+i+DN(A,o)}function eSe(t,e,r){const n=r.label;n.backgroundColor="transparent",n.callout.display=!1;const s=ON(n.position),o=Lc(n.padding),c=tS(t.ctx,n),u=ZCe({properties:e,options:r},c,s,o),i=JCe({properties:e,options:r},c,s,o),A=c.width+o.width,g=c.height+o.height;return{x:u,y:i,x2:u+A,y2:i+g,width:A,height:g,centerX:u+A/2,centerY:i+g/2,rotation:n.rotation}}const VI=["enter","leave"],UN=VI.concat("click");function tSe(t,e,r){e.listened=YK(r,UN,e.listeners),e.moveListened=!1,VI.forEach(n=>{qh(r[n])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(n=>{!e.listened&&qh(n.click)&&(e.listened=!0),e.moveListened||VI.forEach(s=>{qh(n[s])&&(e.listened=!0,e.moveListened=!0)})})}function rSe(t,e,r){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return nSe(t,e,r);case"click":return iSe(t,e,r)}}function nSe(t,e,r){if(!t.moveListened)return;let n;e.type==="mousemove"?n=kN(t.visibleElements,e,r.interaction):n=[];const s=t.hovered;t.hovered=n;const o={state:t,event:e};let c=Iz(o,"leave",s,n);return Iz(o,"enter",n,s)||c}function Iz({state:t,event:e},r,n,s){let o;for(const c of n)s.indexOf(c)<0&&(o=aX(c.options[r]||t.listeners[r],c,e)||o);return o}function iSe(t,e,r){const n=t.listeners,s=kN(t.visibleElements,e,r.interaction);let o;for(const c of s)o=aX(c.options.click||n.click,c,e)||o;return o}function aX(t,e,r){return xa(t,[e.$context,r])===!0}const j4=["afterDraw","beforeDraw"];function sSe(t,e,r){const n=e.visibleElements;e.hooked=YK(r,j4,e.hooks),e.hooked||n.forEach(s=>{e.hooked||j4.forEach(o=>{qh(s.options[o])&&(e.hooked=!0)})})}function Lz(t,e,r){if(t.hooked){const n=e.options[r]||t.hooks[r];return xa(n,[e.$context])}}function oSe(t,e,r){const n=hSe(t.scales,e,r);let s=Fz(e,n,"min","suggestedMin");s=Fz(e,n,"max","suggestedMax")||s,s&&qh(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function aSe(t,e){for(const r of t)cSe(r,e)}function Fz(t,e,r,n){if(Cl(e[r])&&!lSe(t.options,r,n)){const s=t[r]!==e[r];return t[r]=e[r],s}}function lSe(t,e,r){return $h(t[e])||$h(t[r])}function cSe(t,e){for(const r of["scaleID","xScaleID","yScaleID"]){const n=v0(e,t,r);n&&!e[n]&&uSe(t,r)&&console.warn(`No scale found with id '${n}' for annotation '${t.id}'`)}}function uSe(t,e){if(e==="scaleID")return!0;const r=e.charAt(0);for(const n of["Min","Max","Value"])if($h(t[r+n]))return!0;return!1}function hSe(t,e,r){const n=e.axis,s=e.id,o=n+"ScaleID",c={min:gs(e.min,Number.NEGATIVE_INFINITY),max:gs(e.max,Number.POSITIVE_INFINITY)};for(const u of r)u.scaleID===s?Nz(u,e,["value","endValue"],c):v0(t,u,o)===s&&Nz(u,e,[n+"Min",n+"Max",n+"Value"],c);return c}function Nz(t,e,r,n){for(const s of r){const o=t[s];if($h(o)){const c=e.parse(o);n.min=Math.min(n.min,c),n.max=Math.max(n.max,c)}}}class O1 extends eh{inRange(e,r,n,s){const{x:o,y:c}=F0({x:e,y:r},this.getCenterPoint(s),Ic(-this.options.rotation));return QK({x:o,y:c},this.getProps(["x","y","x2","y2"],s),n,this.options)}getCenterPoint(e){return N0(this,e)}draw(e){e.save(),eS(e,this.getCenterPoint(),this.options.rotation),JK(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return sX(e,r)}}O1.id="boxAnnotation";O1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};O1.defaultRoutes={borderColor:"color",backgroundColor:"color"};O1.descriptors={label:{_fallback:!0}};class rS extends eh{inRange(e,r,n,s){return HK({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return N0(this,e)}draw(e){const r=this.options;!r.display||!r.content||(gSe(e,this),e.save(),eS(e,this.getCenterPoint(),this.rotation),eX(e,this,r,this._fitRatio),e.restore())}resolveElementProperties(e,r){const n=dSe(e,r);if(!n)return{};const{controllerMeta:s,point:o,radius:c}=pSe(e,r,n);let u=tS(e.ctx,r);const i=ASe(u,c);WK(r,i)&&(u={width:u.width*i,height:u.height*i});const{position:A,xAdjust:g,yAdjust:C}=r,B=$K(o,u,{borderWidth:0,position:A,xAdjust:g,yAdjust:C});return{initProperties:k1(e,B,r),...B,...s,rotation:r.rotation,_fitRatio:i}}}rS.id="doughnutLabelAnnotation";rS.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};rS.defaultRoutes={};function dSe(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(r,n){const s=n.controller;return s instanceof fm&&fSe(t,e,n.data)&&(!r||s.innerRadius<r.controller.innerRadius)&&s.options.circumference>=90?n:r},void 0)}function fSe(t,e,r){if(!e.autoHide)return!0;for(let n=0;n<r.length;n++)if(!r[n].hidden&&t.getDataVisibility(n))return!0}function pSe({chartArea:t},e,r){const{left:n,top:s,right:o,bottom:c}=t,{innerRadius:u,offsetX:i,offsetY:A}=r.controller,g=(n+o)/2+i,C=(s+c)/2+A,B={left:Math.max(g-u,n),right:Math.min(g+u,o),top:Math.max(C-u,s),bottom:Math.min(C+u,c)},S={x:(B.left+B.right)/2,y:(B.top+B.bottom)/2},P=e.spacing+e.borderWidth/2,j=u-P,R=S.y>C,N=R?s+P:c-P,U=mSe(N,g,C,j);return{controllerMeta:{_centerX:g,_centerY:C,_radius:j,_counterclockwise:R,...U},point:S,radius:Math.min(u,Math.min(B.right-B.left,B.bottom-B.top)/2)}}function ASe({width:t,height:e},r){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return r*2/n}function mSe(t,e,r,n){const s=Math.pow(r-t,2),o=Math.pow(n,2),c=e*-2,u=Math.pow(e,2)+s-o,i=Math.pow(c,2)-4*u;if(i<=0)return{_startAngle:0,_endAngle:za};const A=(-c-Math.sqrt(i))/2,g=(-c+Math.sqrt(i))/2;return{_startAngle:e4({x:e,y:r},{x:A,y:t}).angle,_endAngle:e4({x:e,y:r},{x:g,y:t}).angle}}function gSe(t,e){const{_centerX:r,_centerY:n,_radius:s,_startAngle:o,_endAngle:c,_counterclockwise:u,options:i}=e;t.save();const A=mA(t,i);t.fillStyle=i.backgroundColor,t.beginPath(),t.arc(r,n,s,o,c,u),t.closePath(),t.fill(),A&&t.stroke(),t.restore()}class mb extends eh{inRange(e,r,n,s){return HK({x:e,y:r},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return N0(this,e)}draw(e){const r=this.options,n=!$h(this._visible)||this._visible;!r.display||!r.content||!n||(e.save(),eS(e,this.getCenterPoint(),this.rotation),UCe(e,this),JK(e,this,r),eX(e,ySe(this),r),e.restore())}resolveElementProperties(e,r){let n;if(XK(r))n=nX(e,r);else{const{centerX:u,centerY:i}=RN(e,r);n={x:u,y:i}}const s=Lc(r.padding),o=tS(e.ctx,r),c=$K(n,o,r,s);return{initProperties:k1(e,c,r),pointX:n.x,pointY:n.y,...c,rotation:r.rotation}}}mb.id="labelAnnotation";mb.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};mb.defaultRoutes={borderColor:"color"};function ySe({x:t,y:e,width:r,height:n,options:s}){const o=s.borderWidth/2,c=Lc(s.padding);return{x:t+c.left+o,y:e+c.top+o,width:r-c.left-c.right-s.borderWidth,height:n-c.top-c.bottom-s.borderWidth}}const zN=(t,e,r)=>({x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}),GI=(t,e,r)=>zN(e,r,Math.abs((t-e.y)/(r.y-e.y))).x,Pz=(t,e,r)=>zN(e,r,Math.abs((t-e.x)/(r.x-e.x))).y,fx=t=>t*t,vSe=(t,e,{x:r,y:n,x2:s,y2:o},c)=>c==="y"?{start:Math.min(n,o),end:Math.max(n,o),value:e}:{start:Math.min(r,s),end:Math.max(r,s),value:t},Mz=(t,e,r,n)=>(1-n)*(1-n)*t+2*(1-n)*n*e+n*n*r,qI=(t,e,r,n)=>({x:Mz(t.x,e.x,r.x,n),y:Mz(t.y,e.y,r.y,n)}),jz=(t,e,r,n)=>2*(1-n)*(e-t)+2*n*(r-e),kz=(t,e,r,n)=>-Math.atan2(jz(t.x,e.x,r.x,n),jz(t.y,e.y,r.y,n))+.5*Co;class gb extends eh{inRange(e,r,n,s){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y"){const c={mouseX:e,mouseY:r},{path:u,ctx:i}=this;if(u){mA(i,this.options),i.lineWidth+=this.options.hitTolerance;const{chart:g}=this.$context,C=e*g.currentDevicePixelRatio,B=r*g.currentDevicePixelRatio,S=i.isPointInStroke(u,C,B)||$I(this,c,s);return i.restore(),S}const A=fx(o);return wSe(this,c,A,s)||$I(this,c,s)}return xSe(this,{mouseX:e,mouseY:r},n,{hitSize:o,useFinalPosition:s})}getCenterPoint(e){return N0(this,e)}draw(e){const{x:r,y:n,x2:s,y2:o,cp:c,options:u}=this;if(e.save(),!mA(e,u))return e.restore();D1(e,u);const i=Math.sqrt(Math.pow(s-r,2)+Math.pow(o-n,2));if(u.curve&&c)return FSe(e,this,c,i),e.restore();const{startOpts:A,endOpts:g,startAdjust:C,endAdjust:B}=lX(this),S=Math.atan2(o-n,s-r);e.translate(r,n),e.rotate(S),e.beginPath(),e.moveTo(0+C,0),e.lineTo(i-B,0),e.shadowColor=u.borderShadowColor,e.stroke(),WI(e,0,C,A),WI(e,i,-B,g),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){const n=WCe(e,r),{x:s,y:o,x2:c,y2:u}=n,i=_Se(n,e.chartArea),A=i?bSe({x:s,y:o},{x:c,y:u},e.chartArea):{x:s,y:o,x2:c,y2:u,width:Math.abs(c-s),height:Math.abs(u-o)};if(A.centerX=(c+s)/2,A.centerY=(u+o)/2,A.initProperties=k1(e,A,r),r.curve){const C={x:A.x,y:A.y},B={x:A.x2,y:A.y2};A.cp=LSe(A,r,u1(C,B))}const g=CSe(e,A,r.label);return g._visible=i,A.elements=[{type:"label",optionScope:"label",properties:g,initProperties:A.initProperties}],A}}gb.id="lineAnnotation";const Dz={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};gb.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Dz),fill:!1,length:12,start:Object.assign({},Dz),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},mb.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};gb.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};gb.defaultRoutes={borderColor:"color"};function xSe(t,{mouseX:e,mouseY:r},n,{hitSize:s,useFinalPosition:o}){const c=vSe(e,r,t.getProps(["x","y","x2","y2"],o),n);return zK(c,s)||$I(t,{mouseX:e,mouseY:r},o,n)}function _Se({x:t,y:e,x2:r,y2:n},{top:s,right:o,bottom:c,left:u}){return!(t<u&&r<u||t>o&&r>o||e<s&&n<s||e>c&&n>c)}function Oz({x:t,y:e},r,{top:n,right:s,bottom:o,left:c}){return t<c&&(e=Pz(c,{x:t,y:e},r),t=c),t>s&&(e=Pz(s,{x:t,y:e},r),t=s),e<n&&(t=GI(n,{x:t,y:e},r),e=n),e>o&&(t=GI(o,{x:t,y:e},r),e=o),{x:t,y:e}}function bSe(t,e,r){const{x:n,y:s}=Oz(t,e,r),{x:o,y:c}=Oz(e,t,r);return{x:n,y:s,x2:o,y2:c,width:Math.abs(o-n),height:Math.abs(c-s)}}function wSe(t,{mouseX:e,mouseY:r},n=Kg,s){const{x:o,y:c,x2:u,y2:i}=t.getProps(["x","y","x2","y2"],s),A=u-o,g=i-c,C=fx(A)+fx(g),B=C===0?-1:((e-o)*A+(r-c)*g)/C;let S,P;return B<0?(S=o,P=c):B>1?(S=u,P=i):(S=o+B*A,P=c+B*g),fx(e-S)+fx(r-P)<=n}function $I(t,{mouseX:e,mouseY:r},n,s){const o=t.label;return o.options.display&&o.inRange(e,r,s,n)}function CSe(t,e,r){const n=r.borderWidth,s=Lc(r.padding),o=tS(t.ctx,r),c=o.width+s.width+n,u=o.height+s.height+n;return BSe(e,r,{width:c,height:u,padding:s},t.chartArea)}function SSe(t){const{x:e,y:r,x2:n,y2:s}=t,o=Math.atan2(s-r,n-e);return o>Co/2?o-Co:o<Co/-2?o+Co:o}function BSe(t,e,r,n){const{width:s,height:o,padding:c}=r,{xAdjust:u,yAdjust:i}=e,A={x:t.x,y:t.y},g={x:t.x2,y:t.y2},C=e.rotation==="auto"?SSe(t):Ic(e.rotation),B=ESe(s,o,C),S=TSe(t,e,{labelSize:B,padding:c},n),P=t.cp?qI(A,t.cp,g,S):zN(A,g,S),j={size:B.w,min:n.left,max:n.right,padding:c.left},R={size:B.h,min:n.top,max:n.bottom,padding:c.top},N=Uz(P.x,j)+u,U=Uz(P.y,R)+i;return{x:N-s/2,y:U-o/2,x2:N+s/2,y2:U+o/2,centerX:N,centerY:U,pointX:P.x,pointY:P.y,width:s,height:o,rotation:lC(C)}}function ESe(t,e,r){const n=Math.cos(r),s=Math.sin(r);return{w:Math.abs(t*n)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*n)}}function TSe(t,e,r,n){let s;const o=ISe(t,n);return e.position==="start"?s=Rz({w:t.x2-t.x,h:t.y2-t.y},r,e,o):e.position==="end"?s=1-Rz({w:t.x-t.x2,h:t.y-t.y2},r,e,o):s=DN(1,e.position),s}function Rz(t,e,r,n){const{labelSize:s,padding:o}=e,c=t.w*n.dx,u=t.h*n.dy,i=c>0&&(s.w/2+o.left-n.x)/c,A=u>0&&(s.h/2+o.top-n.y)/u;return ZC(Math.max(i,A),0,.25)}function ISe(t,e){const{x:r,x2:n,y:s,y2:o}=t,c=Math.min(s,o)-e.top,u=Math.min(r,n)-e.left,i=e.bottom-Math.max(s,o),A=e.right-Math.max(r,n);return{x:Math.min(u,A),y:Math.min(c,i),dx:u<=A?1:-1,dy:c<=i?1:-1}}function Uz(t,e){const{size:r,min:n,max:s,padding:o}=e,c=r/2;return r>s-n?(s+n)/2:(n>=t-o-c&&(t=n+o+c),s<=t+o+c&&(t=s-o-c),t)}function lX(t){const e=t.options,r=e.arrowHeads&&e.arrowHeads.start,n=e.arrowHeads&&e.arrowHeads.end;return{startOpts:r,endOpts:n,startAdjust:zz(t,r),endAdjust:zz(t,n)}}function zz(t,e){if(!e||!e.display)return 0;const{length:r,width:n}=e,s=t.options.borderWidth/2,o={x:r,y:n+s};return Math.abs(GI(0,o,{x:0,y:s}))}function WI(t,e,r,n){if(!n||!n.display)return;const{length:s,width:o,fill:c,backgroundColor:u,borderColor:i}=n,A=Math.abs(e-s)+r;t.beginPath(),D1(t,n),mA(t,n),t.moveTo(A,-o),t.lineTo(e+r,0),t.lineTo(A,o),c===!0?(t.fillStyle=u||i,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=n.borderShadowColor,t.stroke()}function LSe(t,e,r){const{x:n,y:s,x2:o,y2:c,centerX:u,centerY:i}=t,A=Math.atan2(c-s,o-n),g=ON(e.controlPoint,0),C={x:u+Jm(r,g.x,!1),y:i+Jm(r,g.y,!1)};return F0(C,{x:u,y:i},A)}function Qz(t,{x:e,y:r},{angle:n,adjust:s},o){!o||!o.display||(t.save(),t.translate(e,r),t.rotate(n),WI(t,0,-s,o),t.restore())}function FSe(t,e,r,n){const{x:s,y:o,x2:c,y2:u,options:i}=e,{startOpts:A,endOpts:g,startAdjust:C,endAdjust:B}=lX(e),S={x:s,y:o},P={x:c,y:u},j=kz(S,r,P,0),R=kz(S,r,P,1)-Co,N=qI(S,r,P,C/n),U=qI(S,r,P,1-B/n),$=new Path2D;t.beginPath(),$.moveTo(N.x,N.y),$.quadraticCurveTo(r.x,r.y,U.x,U.y),t.shadowColor=i.borderShadowColor,t.stroke($),e.path=$,e.ctx=t,Qz(t,N,{angle:j,adjust:C},A),Qz(t,U,{angle:R,adjust:B},g)}class yb extends eh{inRange(e,r,n,s){const o=this.options.rotation,c=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y")return NSe({x:e,y:r},this.getProps(["width","height","centerX","centerY"],s),o,c);const{x:u,y:i,x2:A,y2:g}=this.getProps(["x","y","x2","y2"],s),C=n==="y"?{start:i,end:g}:{start:u,end:A},B=F0({x:e,y:r},this.getCenterPoint(s),Ic(-o));return B[n]>=C.start-c-Kg&&B[n]<=C.end+c+Kg}getCenterPoint(e){return N0(this,e)}draw(e){const{width:r,height:n,centerX:s,centerY:o,options:c}=this;e.save(),eS(e,this.getCenterPoint(),c.rotation),D1(e,this.options),e.beginPath(),e.fillStyle=c.backgroundColor;const u=mA(e,c);e.ellipse(s,o,n/2,r/2,Co/2,0,2*Co),e.fill(),u&&(e.shadowColor=c.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,r){return sX(e,r)}}yb.id="ellipseAnnotation";yb.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},O1.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};yb.defaultRoutes={borderColor:"color",backgroundColor:"color"};yb.descriptors={label:{_fallback:!0}};function NSe(t,e,r,n){const{width:s,height:o,centerX:c,centerY:u}=e,i=s/2,A=o/2;if(i<=0||A<=0)return!1;const g=Ic(r||0),C=Math.cos(g),B=Math.sin(g),S=Math.pow(C*(t.x-c)+B*(t.y-u),2),P=Math.pow(B*(t.x-c)-C*(t.y-u),2);return S/Math.pow(i+n,2)+P/Math.pow(A+n,2)<=1.0001}class nS extends eh{inRange(e,r,n,s){const{x:o,y:c,x2:u,y2:i,width:A}=this.getProps(["x","y","x2","y2","width"],s),g=(this.options.borderWidth+this.options.hitTolerance)/2;return n!=="x"&&n!=="y"?BCe({x:e,y:r},this.getCenterPoint(s),A/2,g):zK(n==="y"?{start:c,end:i,value:r}:{start:o,end:u,value:e},g)}getCenterPoint(e){return N0(this,e)}draw(e){const r=this.options,n=r.borderWidth;if(r.radius<.1)return;e.save(),e.fillStyle=r.backgroundColor,D1(e,r);const s=mA(e,r);MCe(e,this,this.centerX,this.centerY),s&&!JC(r.pointStyle)&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore(),r.borderWidth=n}resolveElementProperties(e,r){const n=iX(e,r);return n.initProperties=k1(e,n,r),n}}nS.id="pointAnnotation";nS.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};nS.defaultRoutes={borderColor:"color",backgroundColor:"color"};class iS extends eh{inRange(e,r,n,s){if(n!=="x"&&n!=="y")return this.options.radius>=.1&&this.elements.length>1&&MSe(this.elements,e,r,s);const o=F0({x:e,y:r},this.getCenterPoint(s),Ic(-this.options.rotation)),c=this.elements.map(A=>n==="y"?A.bY:A.bX),u=Math.min(...c),i=Math.max(...c);return o[n]>=u&&o[n]<=i}getCenterPoint(e){return N0(this,e)}draw(e){const{elements:r,options:n}=this;e.save(),e.beginPath(),e.fillStyle=n.backgroundColor,D1(e,n);const s=mA(e,n);let o=!0;for(const c of r)o?(e.moveTo(c.x,c.y),o=!1):e.lineTo(c.x,c.y);e.closePath(),e.fill(),s&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,r){const n=iX(e,r),{sides:s,rotation:o}=r,c=[],u=2*Co/s;let i=o*fF;for(let A=0;A<s;A++,i+=u){const g=PSe(n,r,i);g.initProperties=k1(e,n,r),c.push(g)}return n.elements=c,n}}iS.id="polygonAnnotation";iS.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};iS.defaultRoutes={borderColor:"color",backgroundColor:"color"};function PSe({centerX:t,centerY:e},{radius:r,borderWidth:n,hitTolerance:s},o){const c=(n+s)/2,u=Math.sin(o),i=Math.cos(o),A={x:t+u*r,y:e-i*r};return{type:"point",optionScope:"point",properties:{x:A.x,y:A.y,centerX:A.x,centerY:A.y,bX:t+u*(r+c),bY:e-i*(r+c)}}}function MSe(t,e,r,n){let s=!1,o=t[t.length-1].getProps(["bX","bY"],n);for(const c of t){const u=c.getProps(["bX","bY"],n);u.bY>r!=o.bY>r&&e<(o.bX-u.bX)*(r-u.bY)/(o.bY-u.bY)+u.bX&&(s=!s),o=u}return s}const Om={box:O1,doughnutLabel:rS,ellipse:yb,label:mb,line:gb,point:nS,polygon:iS};Object.keys(Om).forEach(t=>{gl.describe(`elements.${Om[t].id}`,{_fallback:"plugins.annotation.common"})});const jSe={update:Object.assign},kSe=UN.concat(j4),Hz=(t,e)=>Rs(e)?XI(t,e):t,KI=t=>t==="color"||t==="font";function QN(t="line"){return Om[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function DSe(t,e,r,n){const s=RSe(t,r.animations,n),o=e.annotations,c=QSe(e.elements,o);for(let u=0;u<o.length;u++){const i=o[u],A=cX(c,u,i.type),g=i.setContext(zSe(t,A,c,i)),C=A.resolveElementProperties(t,g);C.skip=OSe(C),"elements"in C&&(USe(A,C.elements,g,s),delete C.elements),$h(A.x)||Object.assign(A,C),Object.assign(A,C.initProperties),C.options=uX(g),s.update(A,C)}}function OSe(t){return isNaN(t.x)||isNaN(t.y)}function RSe(t,e,r){return r==="reset"||r==="none"||r==="resize"?jSe:new wF(t,e)}function USe(t,e,r,n){const s=t.elements||(t.elements=[]);s.length=e.length;for(let o=0;o<e.length;o++){const c=e[o],u=c.properties,i=cX(s,o,c.type,c.initProperties),A=r[c.optionScope].override(c);u.options=uX(A),n.update(i,u)}}function cX(t,e,r,n){const s=Om[QN(r)];let o=t[e];return(!o||!(o instanceof s))&&(o=t[e]=new s,Object.assign(o,n)),o}function uX(t){const e=Om[QN(t.type)],r={};r.id=t.id,r.type=t.type,r.drawTime=t.drawTime,Object.assign(r,XI(t,e.defaults),XI(t,e.defaultRoutes));for(const n of kSe)r[n]=t[n];return r}function XI(t,e){const r={};for(const n of Object.keys(e)){const s=e[n],o=t[n];KI(n)&&ha(o)?r[n]=o.map(c=>Hz(c,s)):r[n]=Hz(o,s)}return r}function zSe(t,e,r,n){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return r.filter(s=>s&&s.options)},id:n.id,type:"annotation"}))}function QSe(t,e){const r=e.length,n=t.length;if(n<r){const s=r-n;t.splice(n,0,...new Array(s))}else n>r&&t.splice(r,n-r);return t}var HSe="3.1.0";const JA=new Map,Vz=t=>t.type!=="doughnutLabel",VSe=UN.concat(j4);var GSe={id:"annotation",version:HSe,beforeRegister(){ECe("chart.js","4.0",fd.version)},afterRegister(){fd.register(Om)},afterUnregister(){fd.unregister(Om)},beforeInit(t){JA.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,r){const n=JA.get(t),s=n.annotations=[];let o=r.annotations;Rs(o)?Object.keys(o).forEach(c=>{const u=o[c];Rs(u)&&(u.id=c,s.push(u))}):ha(o)&&s.push(...o),aSe(s.filter(Vz),t.scales)},afterDataLimits(t,e){const r=JA.get(t);oSe(t,e.scale,r.annotations.filter(Vz).filter(n=>n.display&&n.adjustScaleRange))},afterUpdate(t,e,r){const n=JA.get(t);tSe(t,n,r),DSe(t,n,r,e.mode),n.visibleElements=n.elements.filter(s=>!s.skip&&s.options.display),sSe(t,n,r)},beforeDatasetsDraw(t,e,r){Wv(t,"beforeDatasetsDraw",r.clip)},afterDatasetsDraw(t,e,r){Wv(t,"afterDatasetsDraw",r.clip)},beforeDatasetDraw(t,e,r){Wv(t,e.index,r.clip)},beforeDraw(t,e,r){Wv(t,"beforeDraw",r.clip)},afterDraw(t,e,r){Wv(t,"afterDraw",r.clip)},beforeEvent(t,e,r){const n=JA.get(t);rSe(n,e.event,r)&&(e.changed=!0)},afterDestroy(t){JA.delete(t)},getAnnotations(t){const e=JA.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,r){return kN(t,e,r)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!VSe.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Om[QN(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:KI,_fallback:!0},_indexable:KI}},additionalOptionScopes:[""]};function Wv(t,e,r){const{ctx:n,chartArea:s}=t,o=JA.get(t);r&&Z_(n,s);const c=qSe(o.visibleElements,e).sort((u,i)=>u.element.options.z-i.element.options.z);for(const u of c)$Se(n,s,o,u);r&&J_(n)}function qSe(t,e){const r=[];for(const n of t)if(n.options.drawTime===e&&r.push({element:n,main:!0}),n.elements&&n.elements.length)for(const s of n.elements)s.options.display&&s.options.drawTime===e&&r.push({element:s});return r}function $Se(t,e,r,n){const s=n.element;n.main?(Lz(r,s,"beforeDraw"),s.draw(t,e),Lz(r,s,"afterDraw")):s.draw(t,e)}fd.register(hA,dA,vp,Uh,E1,B0,S0,GSe);const WSe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState([]),[c,u]=ve.useState([]),[i,A]=ve.useState([]),[g,C]=ve.useState(0),[B,S]=ve.useState(0),[P,j]=ve.useState([]),[R,N]=ve.useState([]),[U,$]=ve.useState(""),[J,te]=ve.useState(""),[ue,oe]=ve.useState(""),[K,ce]=ve.useState(!1),[me,Z]=ve.useState(""),[Y,Le]=ve.useState(null),_e=fe=>fe.toLowerCase().split(" ").map(be=>be[0].toUpperCase()+be.slice(1)).join(" "),Qe={Cocoa:250,"Coffee Robusta":300,"Coffee Arabica":280,"Oil Palm":350,"Soya Bean":200,Rubber:300,"Hass Avocado":250,Macadamia:280,Maize:200,Sunflower:180,"Sweet Potato":200,Potato:200,Tomato:220,Millet:180,Sorghum:200,Groundnut:200,Ginger:280,Pineapple:300};ve.useEffect(()=>{Mr.get("/api/crop/").then(fe=>j(fe.data.crops||[])).catch(console.error),Mr.get("/api/farm/all").then(fe=>N(fe.data.farms||[])).catch(console.error)},[]);const De=async fe=>{try{const{data:be}=await Mr.get(`/api/farmdata/latest-planting-date/${fe}`);oe(be.planting_date||""),$(be.crop_name||""),ce(!0)}catch{oe(""),ce(!1)}},Be=async(fe,be)=>{try{const He=`https://api.open-meteo.com/v1/forecast?latitude=${fe}&longitude=${be}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&past_days=30`,tt=await(await fetch(He)).json();tt.daily&&tt.daily.time&&e(tt.daily.time)}catch(He){console.error("Erreur lors du fetch mto par dfaut:",He)}},xe=fe=>{const be=fe.target.value;te(be),ce(!1),be&&(Mr.get(`/api/farm/${be}`).then(({data:He})=>{const Je=He.data.geolocation;if(Je&&Je.includes(",")){const[tt,st]=Je.split(","),Ct=parseFloat(tt),Ue=parseFloat(st);C(Ct),S(Ue),Be(Ct,Ue)}}).catch(console.error),De(be))},ze=fe=>{oe(fe.target.value),ce(!1)},Fe=async()=>{if(!J||!U||!ue)return;const fe=P.find(be=>be.name.toLowerCase()===U.toLowerCase());if(fe)try{await Mr.get("/api/farmdata/save-planting-date",{params:{farm_id:J,crop_id:fe.id,planting_date:ue}}),ce(!0),De(J)}catch(be){console.error(be)}};ve.useEffect(()=>{if(!g||!B||!ue)return;(async()=>{try{const be=new Date().toISOString().slice(0,10),He=new Date(ue),Je=new Date(be);let tt="";if(He<Je){const Ut=new Date().toISOString().split("T")[0],vt=new Date(He).toISOString().split("T")[0];tt=`https://archive-api.open-meteo.com/v1/archive?latitude=${g}&longitude=${B}&start_date=${vt}&end_date=${Ut}&daily=temperature_2m_max,temperature_2m_min&timezone=auto`,console.log("Archive URL:",tt)}else{const Ut=new Date,vt=Ut.toISOString().split("T")[0],Yt=new Date;Yt.setDate(Ut.getDate()+15);const ar=Yt.toISOString().split("T")[0];tt=`https://api.open-meteo.com/v1/forecast?latitude=${g}&longitude=${B}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&start_date=${vt}&end_date=${ar}`,console.log("Forecast URL:",tt)}const Ct=await(await fetch(tt)).json();if(!Ct.daily)return;const{temperature_2m_max:Ue,temperature_2m_min:Ft,time:Zt}=Ct.daily,fr=Ue.map((Ut,vt)=>({max:Ut,min:Ft[vt],avg:(Ut+Ft[vt])/2})),Ye=18;e(Zt),n(fr.map(Ut=>Math.max(0,Ye-Ut.avg))),o(fr.map(Ut=>Math.max(0,Ut.avg-Ye)));const Re=fr.map(Ut=>Math.max(0,Ut.avg-10));u(Re);const hr=[];Re.forEach((Ut,vt)=>hr.push((hr[vt-1]||0)+Ut)),A(hr)}catch(be){console.error(be)}})()},[g,B,ue]),ve.useEffect(()=>{if(!U||i.length===0)return;const fe=_e(U),be=Qe[fe];if(!be){Z(""),Le(null);return}const He=i.findIndex(st=>st>=be);if(He===-1){Z(""),Le(null);return}const Je=t[He];let tt=Je;for(let st=He;st<t.length;st++)i[st]>=be&&(tt=t[st]);Z(Je),Le({start:Je,end:tt})},[U,i,t]);const it=ve.useMemo(()=>{if(!ue||!Y)return!1;const fe=new Date(ue),be=new Date(Y.start),He=new Date(Y.end);return fe>=be&&fe<=He},[ue,Y]),ie={labels:t.length>0?t:[""],datasets:[{label:"HDD",data:r.length>0?r:[0],borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"CDD",data:s.length>0?s:[0],borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"GDD",data:c.length>0?c:[0],borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",borderWidth:2,tension:.4,fill:!0}]},le={responsive:!0,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1},annotation:{annotations:ue?{plantingLine:{type:"line",scaleID:"x",value:ue,borderColor:"red",borderWidth:2,label:{content:"Planting Date",enabled:!0,position:"start",backgroundColor:"rgba(255, 0, 0, 0.1)",color:"red"}}}:{}}},scales:{x:{title:{display:!0,text:"Dates"},ticks:{maxRotation:45,minRotation:30}},y:{title:{display:!0,text:"Degree Days"}}}};return m.jsxs("div",{className:"max-w-5xl mx-auto mt-10 p-4",children:[m.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Planting Date"}),m.jsxs("div",{className:"mb-6 flex flex-wrap gap-2 items-center",children:[m.jsxs("select",{value:J,onChange:xe,className:"p-2 border rounded",children:[m.jsx("option",{value:"",children:"Select a farm"}),R.map(fe=>m.jsxs("option",{value:fe.id,children:[fe.name,"  ",fe.subcounty]},fe.id))]}),m.jsxs("select",{value:U,onChange:fe=>{$(fe.target.value),ce(!1)},className:"p-2 border rounded",children:[m.jsx("option",{value:"",children:"Select a crop"}),P.map(fe=>m.jsx("option",{value:fe.name,children:fe.name},fe.id))]}),m.jsx("input",{type:"date",value:ue,onChange:ze,disabled:K,className:"p-2 border rounded"}),m.jsx("button",{onClick:Fe,disabled:!ue||!U||K,className:`ml-2 px-6 py-2 rounded-lg font-medium text-white shadow-sm transition-colors
            ${K?"bg-green-500 opacity-75 cursor-default":"bg-indigo-500 hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300"}`,children:K?"Saved ":"Save Date"})]}),ue&&U&&m.jsx("p",{className:"mb-4 text-center text-lg font-medium text-gray-600",children:it?`${ue} is ideal for planting ${U}.`:`${ue} is not within the ideal planting window for ${U}.`}),me&&m.jsxs("p",{className:"mb-6 text-center text-lg font-medium text-gray-600",children:["Recommended planting date for ",m.jsx("span",{className:"underline decoration-gray-400",children:U}),": ",m.jsx("span",{className:"font-bold",children:me})]}),Y&&m.jsxs(m.Fragment,{children:[m.jsxs("p",{className:"mb-2 text-center text-gray-600",children:["You can plant ",U," between these dates:"]}),m.jsxs("div",{className:"mb-8 flex justify-center space-x-4",children:[m.jsx("div",{className:"px-4 py-2 bg-amber-50 border border-amber-200 rounded-full text-amber-700 font-medium",children:Y.start}),m.jsx("div",{className:"text-2xl font-bold text-gray-400",children:""}),m.jsx("div",{className:"px-4 py-2 bg-amber-50 border border-amber-200 rounded-full text-amber-700 font-medium",children:Y.end})]})]}),m.jsx(E0,{data:ie,options:le})]})};fd.register(hA,dA,vp,Uh,E1,B0,S0);const KSe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState([]),[c,u]=ve.useState([]),[i,A]=ve.useState([]),[g,C]=ve.useState(0),[B,S]=ve.useState(0),[P,j]=ve.useState([]),[R,N]=ve.useState(!1),[U,$]=ve.useState(""),[J,te]=ve.useState(""),[ue,oe]=ve.useState([]),[K,ce]=ve.useState([]),[me,Z]=ve.useState(""),[Y,Le]=ve.useState(""),[_e,Qe]=ve.useState(""),[De,Be]=ve.useState(""),xe={Cocoa:250,"Coffee Robusta":300,"Coffee Arabica":280,"Oil Palm":350,"Soya Bean":200,Rubber:300,"Hass Avocado":250,Macadamia:280,Maize:200,Sunflower:180,"Sweet Potato":200,Potato:200,Tomato:220,Millet:180,Sorghum:200,Groundnut:200,Ginger:280,Pineapple:300};ve.useEffect(()=>{(async()=>{try{const be=await Mr.get("/api/crop/");oe(be.data.crops)}catch(be){console.error("Error fetching crops:",be)}})()},[]),ve.useEffect(()=>{(async()=>{try{const{data:be}=await Mr.get("/api/farm/all");ce(be.farms||[])}catch(be){console.error("Error fetching farms:",be)}})()},[]);const ze=async fe=>{const be=fe.target.value;if(Z(be),be)try{const He=await Mr.get(`/api/farm/${be}`);if(He.data.status==="success"){const Je=He.data.data.geolocation;if(Je&&Je.includes(",")){const[tt,st]=Je.split(",");C(parseFloat(tt)),S(parseFloat(st))}}}catch(He){console.error("Error fetching farm properties:",He)}},Fe=async(fe,be)=>{const He=`https://api.open-meteo.com/v1/forecast?latitude=${fe}&longitude=${be}&daily=temperature_2m_max,temperature_2m_min&timezone=auto&past_days=90`;try{const tt=await(await fetch(He)).json();if(tt.daily){const{temperature_2m_max:st,temperature_2m_min:Ct,time:Ue}=tt.daily;n(Ue);const Ft=18,Zt=10,fr=st.map((vt,Yt)=>({max:vt,min:Ct[Yt],avg:(vt+Ct[Yt])/2}));e(fr);const Ye=fr.map(vt=>Math.max(0,Ft-vt.avg)),Re=fr.map(vt=>Math.max(0,vt.avg-Ft)),hr=fr.map(vt=>Math.max(0,vt.avg-Zt));o(Ye),u(Re),A(hr);const Ut=hr.reduce((vt,Yt)=>(vt.push((vt.length>0?vt[vt.length-1]:0)+Yt),vt),[]);if(j(Ut),J&&xe[J]){const vt=xe[J],Yt=Ut.findIndex(ar=>ar>=vt);Yt!==-1?(N(!0),$(Ue[Yt])):(N(!1),$(""))}}}catch(Je){console.error("Error fetching weather data:",Je)}},it=async()=>{try{const be=`https://api.mapbox.com/geocoding/v5/mapbox.places/${B},${g}.json?access_token=pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q`,Je=(await Nm.get(be)).data.features[0];if(Je&&(Le(Je.text||""),Je.context&&Je.context.length>0)){const tt=Je.context.find(Ct=>Ct.id.includes("country")),st=Je.context.find(Ct=>Ct.id.includes("region"));Be(tt?tt.text:""),Qe(st?st.text:"")}}catch(fe){console.error("Error fetching location data:",fe)}};ve.useEffect(()=>{g&&B&&(Fe(g,B),it())},[g,B]),ve.useEffect(()=>{if(J&&P.length>0){const fe=xe[J],be=P.findIndex(He=>He>=fe);be!==-1?(N(!0),$(r[be])):(N(!1),$(""))}},[J,P,r]);const ie={labels:r,datasets:[{label:"HDD (Heating Degree Days)",data:s,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"CDD (Cooling Degree Days)",data:c,borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",borderWidth:2,tension:.4,fill:!0},{label:"GDD (Growing Degree Days)",data:i,borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",borderWidth:2,tension:.4,fill:!0}]},le={responsive:!0,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{x:{title:{display:!0,text:"Dates"}},y:{title:{display:!0,text:"Degree Days"}}}};return m.jsxs("div",{className:"max-w-4xl mx-auto mt-8",children:[m.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"HDD, CDD, GDD for the Past 90 Days"}),m.jsxs("div",{className:"mb-4 flex flex-wrap items-center",children:[m.jsxs("select",{value:me,onChange:ze,className:"p-2 border rounded mr-2",children:[m.jsx("option",{value:"",children:"Select a farm"}),K.map(fe=>m.jsxs("option",{value:fe.id,children:[fe.name," - ",fe.subcounty]},fe.id))]}),m.jsx("input",{type:"number",placeholder:"Latitude",value:g,onChange:fe=>C(fe.target.value),className:"p-2 border rounded mr-2"}),m.jsx("input",{type:"number",placeholder:"Longitude",value:B,onChange:fe=>S(fe.target.value),className:"p-2 border rounded"}),m.jsxs("select",{value:J,onChange:fe=>te(fe.target.value),className:"p-2 border rounded ml-2",children:[m.jsx("option",{value:"",children:"Select a crop"}),ue.map(fe=>m.jsx("option",{value:fe.name,children:fe.name},fe.id))]})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("p",{className:"font-semibold text-gray-700",children:["Location: ",Y,", ",_e,", ",De]})}),m.jsx(E0,{data:ie,options:le}),J&&m.jsxs("div",{className:"mt-4 text-center",children:[m.jsxs("p",{className:"text-lg font-medium",children:["Cumulative GDD: ",P[P.length-1]||0]}),R?m.jsxs("p",{className:"text-lg font-medium",children:["Conditions are favorable for planting ",J," starting from"," ",m.jsx("strong",{children:U}),"."]}):m.jsxs("p",{className:"text-lg font-medium",children:["Conditions are not yet favorable for planting ",J,"."]})]})]})},XSe=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState(!0),[c,u]=ve.useState(""),[i,A]=ve.useState(""),[g,C]=ve.useState([]),[B,S]=ve.useState(0),P=10,j=31,R=[{name:"Fall Armyworm (Spodoptera frugiperda)",gddThreshold:150,confirmed:!1},{name:"Corn Earworm (Helicoverpa zea)",gddThreshold:220,confirmed:!0},{name:"Black Cutworm (Agrotis ipsilon)",gddThreshold:300,confirmed:!0},{name:"Peach Twig Borer (Anarsia lineatella)",gddThreshold:50,confirmed:!0}],N=async(ue,oe)=>{var ce;const K=`https://api.open-meteo.com/v1/forecast?latitude=${ue}&longitude=${oe}&daily=temperature_2m_max,temperature_2m_min&timezone=auto`;try{const Z=await(await fetch(K)).json();if((ce=Z.daily)!=null&&ce.temperature_2m_max&&Z.daily.temperature_2m_min&&Z.daily.time){const Y=Z.daily.temperature_2m_max.map((Le,_e)=>({max:Le,min:Z.daily.temperature_2m_min[_e]}));n(Z.daily.time),e(Y)}}catch(me){console.error("Error fetching weather data:",me)}finally{o(!1)}};ve.useEffect(()=>{c&&i&&N(c,i)},[c,i]);const U=()=>t.map(ue=>{const oe=ue.min<P?P:ue.min,K=ue.max>j?j:ue.max,me=(oe+K)/2-P;return me>0?me:0});ve.useEffect(()=>{if(t.length>0){const oe=U().reduce((ce,me)=>ce+me,0);S(oe);const K=R.filter(ce=>oe>=ce.gddThreshold).map(ce=>`${ce.name} has reached the threshold of ${ce.gddThreshold} GDD.`);C(K)}},[t]);const $=U(),J={labels:r,datasets:[{label:"Growing Degree Days (GDD)",data:$,backgroundColor:"rgba(255, 179, 71, 0.5)",borderColor:"rgba(255, 179, 71, 1)",borderWidth:2,tension:.3}]},te={responsive:!0,plugins:{legend:{position:"bottom"}},scales:{x:{ticks:{color:"#444"}},y:{ticks:{color:"#444"}}}};return m.jsxs("div",{className:"max-w-6xl mx-auto mt-10 px-4",children:[m.jsx("h3",{className:"text-5xl font-bold text-teal-700 mb-10 animate-fade-in-up-zoom",children:"Heating, Cooling, and Growing Degree Days"}),m.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Enter your farm location to monitor pest activity using weather-based tracking."}),m.jsxs("div",{className:"bg-white border border-green-100 p-6 rounded-2xl shadow-lg mb-10",children:[m.jsx("h4",{className:"text-xl font-semibold mb-4 text-green-700",children:" Farm Location"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"mb-1 font-medium text-gray-700",children:"Latitude"}),m.jsx("input",{type:"number",value:c,onChange:ue=>u(ue.target.value),placeholder:"e.g., -1.9403",className:"p-3 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("label",{className:"mb-1 font-medium text-gray-700",children:"Longitude"}),m.jsx("input",{type:"number",value:i,onChange:ue=>A(ue.target.value),placeholder:"e.g., 29.8739",className:"p-3 border rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-teal-500"})]})]})]}),g.length>0&&m.jsxs("div",{className:"bg-white-50 border border-yellow-300 text-yellow-800 p-5 rounded-xl shadow mb-8",children:[m.jsx("h4",{className:"text-lg font-bold mb-3",children:" Pest Alert(s)"}),R.map((ue,oe)=>B>=ue.gddThreshold?m.jsx("div",{className:"flex items-center justify-between bg-white border-l-4 border-amber-400 rounded-xl px-5 py-4 mb-4 shadow-md transition hover:shadow-lg",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"text-2xl",children:""}),m.jsxs("div",{children:[m.jsx("p",{className:"text-base font-semibold text-gray-800",children:ue.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Threshold reached at ",m.jsxs("span",{className:"font-medium text-amber-600",children:[ue.gddThreshold," GDD"]})]})]})]})},oe):null)]}),m.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-6",children:[m.jsxs("h4",{className:"text-lg font-semibold text-gray-700 mb-4",children:[" Total GDD Accumulated: ",B.toFixed(2)]}),s?m.jsx("p",{className:"text-gray-500",children:"Loading data..."}):m.jsx(dC,{data:J,options:te})]})]})},YSe=({ownerType:t=null,showControls:e=!0,height:r="100%",styleType:n="dark"})=>{var te;const s=ve.useRef(),o=ve.useRef(),c=Ju();ve.useRef(new is.Popup({closeButton:!1,closeOnClick:!1}));const u=t||((te=c.state)==null?void 0:te.owner_type)||"farmer",[i,A]=ve.useState(null),[g,C]=ve.useState({center:[-32.5825,.3476],zoom:5}),[B,S]=ve.useState([]),[P,j]=ve.useState(0),[R,N]=ve.useState(0),U=()=>{switch(n){case"dark":return"mapbox://styles/mapbox/dark-v11";case"satellite":return"mapbox://styles/mapbox/satellite-v9";case"light":return"mapbox://styles/mapbox/light-v11";default:return"mapbox://styles/mapbox/dark-v11"}};ve.useEffect(()=>(is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",o.current||(o.current=new is.Map({container:s.current,style:U(),center:g.center,zoom:g.zoom}),o.current.on("move",()=>{const ue=o.current.getCenter(),oe=o.current.getZoom();C({center:[ue.lng,ue.lat],zoom:oe.toFixed(2)})})),()=>{o.current&&(o.current.remove(),o.current=null)}),[n]),ve.useEffect(()=>{(async()=>{try{const K=(await Mr.get(`/api/points/getallbyownertype/${u}`)).data;if(!K.polygons||K.polygons.length===0){e&&A({type:"info",message:"No polygons found."});return}A(null),S(K.polygons),N(K.polygons.length)}catch(oe){console.error("Error fetching polygons:",oe),e&&A({type:"error",message:"Error loading polygons."})}})()},[u,e]);const $=(ue,oe)=>{const K=[];for(let ce=0;ce<6;ce++){const me=ce*60*Math.PI/180,Z=ue[0]+oe*Math.cos(me),Y=ue[1]+oe*Math.sin(me);K.push([Z,Y])}return K.push(K[0]),K},J=ue=>{const oe=["rgba(99,102,241,0.7)","rgba(168,85,247,0.7)","rgba(248,113,113,0.7)","rgba(251,191,36,0.7)"];return oe[ue%oe.length]};return ve.useEffect(()=>{const ue=()=>{if(!o.current||B.length===0)return;const oe=B.map((Z,Y)=>{const Le=Z.points.map(Fe=>[Fe.longitude,Fe.latitude]),_e={type:"Feature",geometry:{type:"Polygon",coordinates:[Le]}},Qe=MF(_e),De=Ad(_e),Be=Math.sqrt(De)*1e-5,xe=$(Qe.geometry.coordinates,Math.max(Be,.001)),ze=document.createElement("div");return ze.className="hexagon-marker",ze.style.cssText=`
          width: 12px;
          height: 12px;
          background-color: ${J(Y)};
          border-radius: 50%;
          box-shadow: 0 0 20px ${J(Y)}, 0 0 40px ${J(Y)};
          animation: pulse 2s infinite;
        `,new is.Marker(ze).setLngLat(Qe.geometry.coordinates).addTo(o.current),{type:"Feature",geometry:{type:"Polygon",coordinates:[xe]},properties:{id:Y,owner_type:Z.owner_type,owner_id:Z.owner_id,area:Math.round(De*100)/100,color:J(Y),originalCoords:Le}}}),K=oe.reduce((Z,Y)=>Z+Y.properties.area,0);j(K);const ce={type:"FeatureCollection",features:oe};o.current.getSource("hexagonPolygons")&&(o.current.removeLayer("hexagon-fill"),o.current.removeLayer("hexagon-outline"),o.current.removeLayer("hexagon-glow"),o.current.removeSource("hexagonPolygons")),o.current.addSource("hexagonPolygons",{type:"geojson",data:ce}),o.current.addLayer({id:"hexagon-glow",type:"fill",source:"hexagonPolygons",paint:{"fill-color":["get","color"],"fill-opacity":.1}}),o.current.addLayer({id:"hexagon-fill",type:"fill",source:"hexagonPolygons",paint:{"fill-color":["get","color"],"fill-opacity":.3}}),o.current.addLayer({id:"hexagon-outline",type:"line",source:"hexagonPolygons",paint:{"line-color":["get","color"],"line-width":2,"line-opacity":.8}}),o.current.on("click","hexagon-fill",Z=>{const{properties:Y}=Z.features[0],Le=e?`<div style="background: #1a1a1a; color: white; padding: 15px; border-radius: 8px; border: 1px solid ${Y.color};">
               <h3 style="color: ${Y.color}; margin: 0 0 10px 0;">Owner Type: ${Y.owner_type}</h3>
               <p style="margin: 5px 0; color: #ccc;
               ">Owner ID: ${Y.owner_id}</p>
               <p style="margin: 5px 0; color: #ccc;">Feature ID: ${Y.id}</p>
               <p style="margin: 5px 0; color: #ccc;">Area: ${Y.area} m</p>
               <button class="delete-btn" data-owner-id="${Y.owner_id}" 
                       style="margin-top: 10px; padding: 8px 16px; background: linear-gradient(45deg, #ff0040, #ff4081); 
                              color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">
                 Delete Polygon
               </button>
             </div>`:`<div style="background: #1a1a1a; color: white; padding: 15px; border-radius: 8px; border: 1px solid ${Y.color};">
               <h3 style="color: ${Y.color}; margin: 0 0 10px 0;">Owner Type: ${Y.owner_type}</h3>
               <p style="margin: 5px 0; color: #ccc;">Owner ID: ${Y.owner_id}</p>
               <p style="margin: 5px 0; color: #ccc;">Area: ${Y.area} m</p>
             </div>`;new is.Popup({closeButton:!0,closeOnClick:!0,className:"dark-popup"}).setLngLat(Z.lngLat).setHTML(Le).addTo(o.current)}),o.current.on("mouseenter","hexagon-fill",()=>{o.current.getCanvas().style.cursor="pointer"}),o.current.on("mouseleave","hexagon-fill",()=>{o.current.getCanvas().style.cursor=""});const me=new is.LngLatBounds;oe.forEach(Z=>{Z.geometry.coordinates[0].forEach(Y=>me.extend(Y))}),o.current.fitBounds(me,{padding:50})};o.current&&B.length>0&&(o.current.isStyleLoaded()?ue():o.current.on("load",ue))},[B,e]),ve.useEffect(()=>{var oe;if(!e)return;const ue=async K=>{if(K.target.classList.contains("delete-btn")){const ce=K.target.getAttribute("data-owner-id");if(!window.confirm(`Are you sure you want to delete the polygon with owner ID: ${ce}?`))return;try{if((await Mr.delete(`/api/points/owner/${ce}`)).status===204){A({type:"info",message:`Polygon with owner ID: ${ce} deleted successfully.`});const Le=(await Mr.get(`/api/points/getallbyownertype/${u}`)).data;S(Le.polygons),N(Le.polygons.length)}else A({type:"error",message:`Failed to delete polygon with owner ID: ${ce}.`})}catch(Z){console.error("Error deleting polygon:",Z),A({type:"error",message:`Error deleting polygon with owner ID: ${ce}.`})}}};return(oe=s.current)==null||oe.addEventListener("click",ue),()=>{var K;(K=s.current)==null||K.removeEventListener("click",ue)}},[B,u,e]),m.jsxs("div",{className:"relative",style:{height:r},children:[m.jsx("style",{jsx:!0,children:`
        .mapboxgl-popup-content {
          background: transparent !important;
          padding: 0 !important;
          box-shadow: none !important;
        }
        
        .mapboxgl-popup-tip {
          display: none !important;
        }
      `}),i&&e&&m.jsx("div",{className:`absolute top-4 right-2 z-10 px-4 py-2 rounded-md shadow-lg transition-shadow duration-300 focus:outline-none ${i.type==="info"?"bg-cyan-500 text-black":"bg-red-500 text-white"}`,style:{boxShadow:i.type==="info"?"0 0 20px rgba(0, 255, 209, 0.5)":"0 0 20px rgba(255, 0, 0, 0.5)"},children:i.message}),m.jsx("div",{ref:s,style:{width:"100%",height:"100%"}}),e&&m.jsx("div",{className:"absolute bottom-4 left-4 rounded-lg p-4 shadow-lg",style:{background:"rgba(26, 26, 26, 0.9)",border:"1px solid #00FFD1",boxShadow:"0 0 20px rgba(0, 255, 209, 0.3)"},children:m.jsxs("div",{className:"text-sm text-white",children:[m.jsxs("p",{children:[m.jsx("strong",{style:{color:"#00FFD1"},children:"Polygons:"})," ",R]}),m.jsxs("p",{children:[m.jsx("strong",{style:{color:"#00FFD1"},children:"Total Area:"})," ",P.toFixed(2)," m"]})]})})]})};fd.register(hA,dA,vp,Uh,Px,Fy,Ny,B0,S0);const ZSe=["rgba(99,102,241,0.7)","rgba(168,85,247,0.7)","rgba(248,113,113,0.7)","rgba(34,197,94,0.7)","rgba(251,191,36,0.7)"];function JSe(){const[t,e]=ve.useState({usersByType:{},entities:{},loading:!0}),[r,n]=ve.useState({totalArea:0,polygonCount:0,areaByOwnerType:{},loading:!0}),[s,o]=ve.useState({totalFarmers:0,loading:!0}),[c,u]=ve.useState({totalForests:0,loading:!0}),[i,A]=ve.useState({loading:!0,data:{}}),[g,C]=ve.useState([]),[B,S]=ve.useState([]),[P,j]=ve.useState([]);ve.useEffect(()=>{(async()=>{try{const me=await Mr.get("/api/farm/?page=1");let Z=0;if(me.data.total)Z=me.data.total;else if(me.data.total_pages&&me.data.farms){const Y=me.data.total_pages;if(Y===1)Z=me.data.farms.length;else{const Le=[];for(let Qe=1;Qe<=Y;Qe++)Le.push(Mr.get(`/api/farm/?page=${Qe}`));Z=(await Promise.all(Le)).reduce((Qe,De)=>Qe+(De.data.farms?De.data.farms.length:0),0)}}else Z=me.data.farms?me.data.farms.length:0;o({totalFarmers:Z,loading:!1})}catch(me){console.error("Error fetching farmer stats:",me),o({totalFarmers:0,loading:!1})}})()},[]),ve.useEffect(()=>{(async()=>{try{const me=await Mr.get("/api/forest/?page=1");let Z=0;if(me.data.total)Z=me.data.total;else if(me.data.total_pages&&me.data.forests){const Y=me.data.total_pages;if(Y===1)Z=me.data.forests.length;else{const Le=[];for(let Qe=1;Qe<=Y;Qe++)Le.push(Mr.get(`/api/forest/?page=${Qe}`));Z=(await Promise.all(Le)).reduce((Qe,De)=>Qe+(De.data.forests?De.data.forests.length:0),0)}}else Z=me.data.forests?me.data.forests.length:0;u({totalForests:Z,loading:!1})}catch(me){console.error("Error fetching forest stats:",me),u({totalForests:0,loading:!1})}})()},[]);const R=async()=>{try{const ce=await Mr.get("/api/store/");j(ce.data.stores)}catch(ce){console.error("Error fetching stores:",ce)}};if(ve.useEffect(()=>{R()},[]),ve.useEffect(()=>{if(!s.loading&&!c.loading){const ce={Admin:5,Farmer:s.totalFarmers,Forester:c.totalForests};A({loading:!1,data:ce})}},[s.loading,c.loading,s.totalFarmers,c.totalForests]),ve.useEffect(()=>{(async()=>{try{const[me,Z]=await Promise.all([Mr.get("/api/dashboard/users/by-type"),Mr.get("/api/dashboard/entities/count")]);e({usersByType:me.data,entities:Z.data,loading:!1})}catch(me){console.error(me)}})()},[]),ve.useEffect(()=>{(async()=>{try{const[me,Z]=await Promise.all([Mr.get("/api/crop/"),Mr.get("/api/grade/")]);C(me.data.crops),S(Z.data.grades)}catch(me){console.error("Error fetching crops or grades:",me)}})()},[]),ve.useEffect(()=>{(async()=>{try{const me=["farmer","government","company"],Z=me.map(De=>Mr.get(`/api/points/getallbyownertype/${De}`)),Y=await Promise.all(Z);let Le=0,_e=0;const Qe={};Y.forEach((De,Be)=>{const xe=De.data,ze=me[Be];if(xe.polygons&&xe.polygons.length>0){let Fe=0;xe.polygons.forEach(it=>{const ie=it.points.map(fe=>[fe.longitude,fe.latitude]),le=Ad({type:"Feature",geometry:{type:"Polygon",coordinates:[ie]}});Fe+=le}),Qe[ze]={area:Math.round(Fe*100)/100,count:xe.polygons.length},Le+=Fe,_e+=xe.polygons.length}}),n({totalArea:Math.round(Le*100)/100,polygonCount:_e,areaByOwnerType:Qe,loading:!1})}catch(me){console.error("Error fetching area stats:",me),n(Z=>({...Z,loading:!1}))}})()},[]),t.loading||r.loading||s.loading||c.loading||i.loading)return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-500 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-400 text-lg",children:"Loading dashboard..."})]})});const N=Object.keys(i.data),U=Object.values(i.data),$={labels:N,datasets:[{label:"Users by Type",data:U,backgroundColor:ZSe.slice(0,N.length),borderRadius:12,barPercentage:.5}]};g.map(ce=>ce.name),g.map(ce=>ce.weight),g.map(ce=>B.filter(me=>me.crop_id===ce.id).length);const J=[{name:"Cocoa",value:15},{name:"Coffee Robusta",value:28},{name:"Coffee Arabica",value:32},{name:"Oil Palm",value:45},{name:"Soya Bean",value:18},{name:"Rubber",value:38},{name:"Hass Avocado",value:22},{name:"Macademia",value:35},{name:"Maize",value:25},{name:"Sunflower",value:20},{name:"Sweet Potato",value:12},{name:"Potato",value:16},{name:"Tomato",value:30},{name:"Millet",value:8},{name:"Sorghum",value:14},{name:"Groundnut",value:26},{name:"Ginger",value:42},{name:"Pineapple",value:33}],te={labels:J.map(ce=>ce.name),datasets:[{label:"Crop Analytics",data:J.map(ce=>ce.value),borderColor:"#6366F1",backgroundColor:"rgba(99,102,241,0.2)",tension:.3,pointRadius:6,pointBackgroundColor:"#6366F1",pointBorderColor:"#fff",pointBorderWidth:2,fill:!0}]},ue=ce=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(me){return`${me.dataset.label}: ${me.parsed.y}`}}}},onClick:()=>window.location.href=ce,scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:45}},y:{grid:{color:"#f0f0f0"},title:{display:!0,text:"Analytics Value"}}}}),oe=({title:ce,desc:me,children:Z,className:Y=""})=>m.jsxs("div",{className:`bg-white rounded-2xl shadow-lg p-4 sm:p-6 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 cursor-pointer ${Y}`,children:[m.jsx("h3",{className:"text-sm sm:text-lg font-semibold mb-1 text-gray-800",children:ce}),m.jsx("p",{className:"text-xs text-gray-500 mb-3",children:me}),m.jsx("div",{className:"w-full",children:Z})]}),K=({title:ce,value:me,color:Z,icon:Y,onClick:Le})=>m.jsx("div",{className:"rounded-2xl bg-white shadow-md p-4 sm:p-6 hover:shadow-xl transition-all duration-300 cursor-pointer transform hover:scale-105 h-full",onClick:Le,children:m.jsxs("div",{className:"flex items-center justify-between h-full",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"text-xs sm:text-sm text-gray-400 font-semibold truncate",children:ce}),m.jsx("p",{className:`text-lg sm:text-2xl lg:text-3xl font-bold ${Z} transition-all duration-300 mt-1`,children:me})]}),m.jsx("div",{className:"text-2xl sm:text-3xl lg:text-4xl opacity-20 ml-2 flex-shrink-0",children:Y})]})});return m.jsx("div",{className:"min-h-screen bg-gray-50 p-2 sm:p-4 lg:p-6",children:m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4 lg:gap-6 mb-6",children:[m.jsx(K,{title:"Total Users Assets",value:U.reduce((ce,me)=>ce+me,0),color:"text-indigo-500",icon:"",onClick:()=>window.location.href="/users"}),m.jsx(K,{title:"Total Stores",value:P.length,color:"text-indigo-500",icon:"",onClick:()=>window.location.href="/stores"}),m.jsx(K,{title:"Total Farmers",value:s.totalFarmers,color:"text-emerald-500",icon:"",onClick:()=>window.location.href="/farms"}),m.jsx(K,{title:"Total Polygons",value:r.polygonCount,color:"text-pink-500",icon:"",onClick:()=>window.location.href="/polygons"}),m.jsx(K,{title:"Total Area",value:r.totalArea?r.totalArea>=1e4?`${(r.totalArea/1e4).toFixed(2)} ha`:`${r.totalArea.toFixed(2)} m`:"0 m",color:"text-green-500",icon:"",onClick:()=>window.location.href="/areas"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6 mb-6",children:[m.jsx("div",{className:"md:col-span-1",children:m.jsxs("div",{className:"rounded-2xl bg-white shadow-lg hover:shadow-xl p-4 sm:p-6 transition-all duration-300 cursor-pointer transform hover:scale-[1.02] border border-gray-100 overflow-hidden h-full",onClick:()=>window.location.href="/features",children:[m.jsx("div",{className:"absolute top-0 right-0 w-16 sm:w-24 h-16 sm:h-24 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-full -translate-y-8 translate-x-8 opacity-60"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm sm:text-lg font-bold text-gray-800 mb-1",children:"Smart Features"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Advanced agricultural tools"}),m.jsxs("div",{className:"flex items-center mt-2",children:[m.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),m.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Active & Running"})]})]}),m.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full p-2 sm:p-3 text-white text-lg sm:text-xl shadow-lg",children:""})]}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{icon:"",text:"QR Codes",desc:"Track crops"},{icon:"",text:"ETC & ET0",desc:"Smart irrigation"},{icon:"",text:"Weather",desc:"Live alerts"},{icon:"",text:"Pest Control",desc:"Early warning"}].map((ce,me)=>m.jsxs("div",{className:"flex flex-col space-y-1 p-2 sm:p-3 rounded-lg hover:bg-gradient-to-r hover:from-gray-50 hover:to-purple-50 transition-all duration-200 group",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:"text-sm sm:text-base group-hover:scale-110 transition-transform duration-200",children:ce.icon}),m.jsx("span",{className:"text-xs font-semibold text-gray-800",children:ce.text})]}),m.jsx("span",{className:"text-xs text-gray-500 ml-6",children:ce.desc})]},me))}),m.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs text-gray-400",children:"4 Tools Available"}),m.jsx("div",{className:"flex space-x-1",children:[1,2,3,4].map(ce=>m.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full opacity-60"},ce))})]})})]})]})}),m.jsx("div",{className:"md:col-span-1",children:m.jsx(oe,{title:"Users by Type",desc:"Shows the dynamic number of users per category",className:"h-full",children:m.jsx("div",{className:"h-64 sm:h-80",children:m.jsx(dC,{data:$,options:ue("/users/types")})})})}),m.jsx("div",{className:"md:col-span-2 xl:col-span-1",children:m.jsx(oe,{title:"Crop Analytics Trend",desc:`Showing analytics for ${J.length} predefined crops`,className:"h-full",children:m.jsx("div",{className:"h-64 sm:h-80",children:m.jsx(E0,{data:te,options:ue("/crops")})})})})]}),m.jsx("div",{className:"relative",children:m.jsxs("div",{className:"rounded-2xl shadow-xl p-4 sm:p-6 hover:shadow-2xl transition-all duration-300 backdrop-blur-sm border border-white/20",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0.3) 100%)",backdropFilter:"blur(10px)"},children:[m.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-2",children:"Agricultural Plots Visualization"}),m.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-4 font-medium",children:"Live visualization of agricultural plots in hexagonal shapes"}),m.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-gradient-to-r from-pink-300 to-purple-300 w-full h-[50vh] sm:h-[60vh] min-h-[300px] sm:min-h-[400px]",children:m.jsx(YSe,{ownerType:"farmer",showControls:!1,height:"100%",styleType:"light"})})]})})]})})}const eBe=({activity_type:t,border_cross_country:e,hs_heading:r,goods:n,Volume:s,net_weight:o,scientifi_name:c,common_name:u,s_unit:i,q_unit:A,verification_code:g,producer_name:C,producer_country:B,place:S,date:P,referenceNumber:j,country_of_activity:R,operator_country:N})=>m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
        table {
          width: 100%;
          border-collapse: collapse;
        }

        td, th {
          border: 1px solid black;
          padding: 10px;
          vertical-align: top;
        }

        .header {
          text-align: center;
          font-weight: bold;
        }

        .section-title {
          background-color: #f2f2f2;
          font-weight: bold;
          text-align: center;
        }

        .dds-declaration {
          border: 1px solid green;
          background-color: #f9fff9;
          padding: 6px;
        }

        .signature-space {
          height: 60px;
          padding-top: 20px;
        }

        .signature-line {
          border-top: 1px solid black;
          margin-top: 20px;
          display: inline-block;
          width: 100%;
          height: 20px;
        }

        .no-inner-borders td {
          border: none;
        }
      `}),m.jsx("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px",margin:"20px"},children:m.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:m.jsxs("tbody",{children:[m.jsxs("tr",{children:[m.jsx("td",{colSpan:"2",rowSpan:"2",children:m.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/4/4e/Flag_of_Uganda.svg",alt:"Uganda Flag",width:"150"})}),m.jsx("td",{colSpan:"3",className:"header",style:{textAlign:"center",fontWeight:"bold"},children:m.jsxs("div",{style:{display:"inline-flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},children:[m.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Coat_of_arms_of_Uganda.svg/250px-Coat_of_arms_of_Uganda.svg.png",alt:"Uganda Coat",width:"50"}),m.jsx("p",{style:{margin:0},children:"REPUBLIC OF UGANDA"})]})}),m.jsx("td",{colSpan:"2",rowSpan:"2",style:{textAlign:"right",verticalAlign:"top"},children:m.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/db/European_Commission_Logo.svg",alt:"EU Commission",width:"200"})})]}),m.jsx("tr",{children:m.jsx("td",{colSpan:"5"})}),m.jsxs("tr",{style:{backgroundColor:"#f2f2f2",fontWeight:"bold",textAlign:"center"},children:[m.jsx("td",{colSpan:"4",style:{height:"10px",padding:"20px"},children:"DUE DILIGENCE STATEMENT"}),m.jsxs("td",{colSpan:"3",style:{height:"10px",padding:"20px"},children:["REFERENCE NUMBER :  ",j]})]}),m.jsxs("tr",{style:{margin:"10px"},children:[m.jsx("td",{children:"ACTIVITY TYPE"}),m.jsx("td",{colSpan:"3",children:t}),m.jsx("td",{children:"BORDER CROSS COUNTRY"}),m.jsx("td",{colSpan:"2",children:e})]}),m.jsxs("tr",{style:{margin:"10px"},children:[m.jsx("td",{children:"HS HEADING(CODE)"}),m.jsx("td",{colSpan:"3",children:r}),m.jsx("td",{children:"GOODS DESCRIPTION"}),m.jsx("td",{colSpan:"2",children:n})]}),m.jsxs("tr",{style:{margin:"10px"},children:[m.jsx("td",{colSpan:"2",children:"COMMENTS(ADDITIONAL INFORMATION)"}),m.jsx("td",{children:"VOLUME"}),m.jsx("td",{children:s}),m.jsx("td",{children:"NET WEIGHT"}),m.jsx("td",{colSpan:"2",children:o})]}),m.jsxs("tr",{style:{margin:"10px"},children:[m.jsx("td",{children:"SCIENTIFIC NAME"}),m.jsx("td",{colSpan:"3",children:c}),m.jsx("td",{children:"COMMON NAME"}),m.jsx("td",{colSpan:"2",children:u})]}),m.jsxs("tr",{style:{margin:"10px"},children:[m.jsx("td",{children:"SUPPLEMENTARY UNIT"}),m.jsx("td",{children:i}),m.jsx("td",{children:"QUALIFIER UNIT"}),m.jsx("td",{children:A}),m.jsx("td",{children:"VERIFICATION CODE"}),m.jsx("td",{colSpan:"2",children:g})]}),m.jsxs("tr",{style:{margin:"10px"},children:[m.jsx("td",{children:"PRODUCER NAME"}),m.jsx("td",{colSpan:"3",children:C}),m.jsx("td",{children:"PRODUCER COUNTRY"}),m.jsx("td",{colSpan:"2",children:B})]}),m.jsx("tr",{style:{backgroundColor:"#f2f2f2",fontWeight:"bold",textAlign:"center"},children:m.jsx("td",{colSpan:"7",style:{height:"10px",padding:"20px"},children:"OPERATOR INFO"})}),m.jsxs("tr",{style:{margin:"20px"},children:[m.jsx("td",{children:"EORI"}),m.jsx("td",{colSpan:"2",children:"HRUG000004679"}),m.jsx("td",{children:"PHONE"}),m.jsx("td",{children:"256783130358"}),m.jsx("td",{children:"EMAIL"}),m.jsx("td",{children:m.jsx("a",{href:"mailto:jwetub@agrivields.com",children:"lwetutb@agrivields.com"})})]}),m.jsxs("tr",{children:[m.jsx("td",{children:"COUNTRY OF ACTIVITY"}),m.jsx("td",{colSpan:"2",children:N}),m.jsx("td",{children:"ADDRESS"}),m.jsx("td",{colSpan:"3",children:"T2 BUILDING PAPAYE RISE KIWATULE, KAMPALA"})]}),m.jsxs("tr",{children:[m.jsx("td",{colSpan:"2",style:{border:"1px solid green",backgroundColor:"#f9fff9",padding:"6px"},children:m.jsx("strong",{children:"DDS DECLARATION"})}),m.jsx("td",{colSpan:"5",children:"By submitting this due diligence statement the operator confirms that due diligence in accordance with Regulation (EU) 2023/1115 was carried out and that no or only a negligible risk was found that the relevant products do not comply with Article 3, point (a) or (b), of that Regulation."})]}),m.jsxs("tr",{children:[m.jsx("td",{colSpan:"2",rowSpan:"2",children:"Signed for and on behalf of:"}),m.jsx("td",{colSpan:"2"}),m.jsx("td",{children:"PLACE"}),m.jsx("td",{colSpan:"2",style:{height:"60px",paddingTop:"20px"},children:S})]}),m.jsx("tr",{style:{height:"60px"}}),m.jsxs("tr",{children:[m.jsx("td",{children:"DATE"}),m.jsx("td",{colSpan:"3",style:{height:"60px"},children:P}),m.jsx("td",{colSpan:"3",style:{height:"60px"}})]}),m.jsxs("tr",{children:[m.jsxs("td",{colSpan:"5",style:{height:"150px",paddingTop:"50px"},children:["Name and Function : ",m.jsx("br",{}),m.jsx("div",{style:{borderTop:"1px solid black",marginTop:"20px",height:"20px"}}),m.jsx("div",{style:{borderTop:"1px solid black",marginTop:"20px",height:"20px"}})]}),m.jsxs("td",{colSpan:"2",style:{height:"150px",paddingTop:"50px"},children:["SIGNATURE",m.jsx("br",{}),m.jsx("div",{style:{borderTop:"1px solid black",marginTop:"40px",height:"20px"}})]})]})]})})})]}),tBe=({data:t,referenceNumber:e,verificationCode:r,showPreview:n})=>{var i,A,g,C,B,S,P,j,R,N,U,$,J,te,ue,oe,K,ce,me,Z;const s=ve.useRef(null);console.log("",t.statements);const o=async()=>{if(!s.current)return;const Y=await FI(s,`DDS_${e}`);if(Y){const Le=URL.createObjectURL(Y),_e=document.createElement("a");_e.href=Le,_e.download=`DDS_${e}.pdf`,document.body.appendChild(_e),_e.click(),_e.remove(),URL.revokeObjectURL(Le)}};if(!t)return m.jsx("p",{className:"text-gray-500 italic",children:"Aucune donne affiche pour le moment."});if(t.error){const Y=typeof t.error=="string"?t.error:JSON.stringify(t.error,null,2);return m.jsx("div",{className:"text-red-600 font-semibold whitespace-pre-wrap",children:Y})}let c=null,u={};if((i=t==null?void 0:t.local_data)!=null&&i.producers_json)try{const Y=JSON.parse(t.local_data.producers_json);Array.isArray(Y)&&Y.length>0&&(c=Y[0])}catch(Y){console.error(" Erreur parsing producers_json:",Y)}return Array.isArray((A=t==null?void 0:t.remote_data)==null?void 0:A.commodities)&&(u=t.remote_data.commodities[0]||{}),m.jsxs("div",{className:"space-y-2 text-sm text-gray-800",children:[t.ddsIdentifier&&m.jsxs("div",{children:[m.jsx("strong",{children:"DDS Identifier:"})," ",t.ddsIdentifier]}),t.amendStatus&&m.jsxs("div",{className:"text-green-700 font-medium",children:[" Amendment successfully completed. ",m.jsx("br",{}),m.jsx("strong",{children:"Status:"})," ",t.amendStatus]}),t.referenceNumber&&m.jsxs("div",{children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Reference Number:"})," ",t.referenceNumber]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Activity Type:"})," ",t.activityType]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Status:"})," ",t.status]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Status Date:"})," ",new Date(t.statusDate).toLocaleString()]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Operator:"})," ",(g=t.operator)==null?void 0:g.name," (",(C=t.operator)==null?void 0:C.country,")"]})]}),Array.isArray((B=t==null?void 0:t.remote_data)==null?void 0:B.commodities)&&t.remote_data.commodities.length>0&&m.jsxs("div",{className:"border-t pt-2",children:[m.jsx("h4",{className:"font-semibold",children:"Commodity"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Description of Goods:"})," ",u.descriptionOfGoods]}),m.jsxs("p",{children:[m.jsx("strong",{children:"HS Heading:"})," ",u.hsHeading]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Species:"})," ",(S=u.speciesInfo)==null?void 0:S.scientificName," (",(P=u.speciesInfo)==null?void 0:P.commonName,")"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Net Weight:"})," ",(j=u.goodsMeasure)==null?void 0:j.netWeight]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Volume:"})," ",(R=u.goodsMeasure)==null?void 0:R.volume]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Supplementary Unit:"})," ",(N=u.goodsMeasure)==null?void 0:N.supplementaryUnit]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Qualifier:"})," ",(U=u.goodsMeasure)==null?void 0:U.supplementaryUnitQualifier]}),Array.isArray(u.producers)&&u.producers.length>0&&m.jsxs("div",{children:[m.jsx("strong",{children:"Producers:"}),m.jsx("ul",{className:"list-disc pl-5",children:u.producers.map((Y,Le)=>{var _e;return m.jsxs("li",{children:[Y.country,"  GeoJSON: ",(_e=Y.geometryGeojson)==null?void 0:_e.slice(0,30),"..."]},Le)})})]})]}),Array.isArray(t.statements)&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold",children:"Statements related to the Internal Reference"}),m.jsx("ul",{className:"divide-y divide-gray-200",children:t.statements.map((Y,Le)=>m.jsxs("li",{className:"py-2",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Identifier:"})," ",Y.identifier]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Internal Ref:"})," ",Y.internalReferenceNumber]}),Y.referenceNumber&&m.jsxs("p",{children:[m.jsx("strong",{children:"Reference Number:"})," ",Y.referenceNumber]}),Y.verificationNumber&&m.jsxs("p",{children:[m.jsx("strong",{children:"Verification Code:"})," ",Y.verificationNumber]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Status:"})," ",Y.status]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Date:"})," ",new Date(Y.date).toLocaleString()]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Updated By:"})," ",Y.updatedBy]})]},Le))})]}),n&&e&&r&&(t==null?void 0:t.remote_data)&&m.jsxs("div",{className:"mt-6 border rounded-lg p-4 bg-white shadow",children:[m.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Due Diligence Statement (preview)"}),m.jsx("div",{ref:s,children:m.jsx(eBe,{activity_type:t.remote_data.activityType||"",border_cross_country:(($=t.local_data)==null?void 0:$.border_cross_country)||"",hs_heading:u.hsHeading||"",goods:u.descriptionOfGoods||"",Volume:((J=u.goodsMeasure)==null?void 0:J.volume)||"",net_weight:((te=u.goodsMeasure)==null?void 0:te.netWeight)||"",scientifi_name:((ue=u.speciesInfo)==null?void 0:ue.scientificName)||"",common_name:((oe=u.speciesInfo)==null?void 0:oe.commonName)||"",s_unit:((K=u.goodsMeasure)==null?void 0:K.supplementaryUnit)||"",q_unit:((ce=u.goodsMeasure)==null?void 0:ce.supplementaryUnitQualifier)||"",verification_code:r,producer_name:(c==null?void 0:c.name)||"",producer_country:(c==null?void 0:c.country)||"",place:((me=t.remote_data.operator)==null?void 0:me.country)||"",date:new Date(t.remote_data.statusDate||Date.now()).toLocaleDateString(),referenceNumber:t.remote_data.referenceNumber||"",country_of_activity:t.remote_data.countryOfActivity||"",operator_country:((Z=t.remote_data.operator)==null?void 0:Z.country)||""})}),m.jsx("button",{onClick:o,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Download PDF"})]}),m.jsxs("details",{className:"mt-4",children:[m.jsx("summary",{className:"cursor-pointer text-blue-600 underline",children:"See JSON"}),m.jsx("pre",{className:"bg-white p-2 mt-2 rounded border text-xs overflow-x-auto",children:JSON.stringify(t,null,2)})]})]})};var rBe=Object.defineProperty,nBe=(t,e,r)=>e in t?rBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eT=(t,e,r)=>(nBe(t,typeof e!="symbol"?e+"":e,r),r);let iBe=class{constructor(){eT(this,"current",this.detect()),eT(this,"handoffState","pending"),eT(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},u0=new iBe;function sS(t){var e,r;return u0.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(r=(e=t.current)==null?void 0:e.ownerDocument)!=null?r:document:null:document}function oS(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function xA(){let t=[],e={addEventListener(r,n,s,o){return r.addEventListener(n,s,o),e.add(()=>r.removeEventListener(n,s,o))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return oS(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,s){let o=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:s}),this.add(()=>{Object.assign(r.style,{[n]:o})})},group(r){let n=xA();return r(n),this.add(()=>n.dispose())},add(r){return t.includes(r)||t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let s of t.splice(n,1))s()}},dispose(){for(let r of t.splice(0))r()}};return e}function HN(){let[t]=ve.useState(xA);return ve.useEffect(()=>()=>t.dispose(),[t]),t}let Yu=(t,e)=>{u0.isServer?ve.useEffect(t,e):ve.useLayoutEffect(t,e)};function P0(t){let e=ve.useRef(t);return Yu(()=>{e.current=t},[t]),e}let Qa=function(t){let e=P0(t);return Qi.useCallback((...r)=>e.current(...r),[e])},sBe=ve.createContext(void 0);function oBe(){return ve.useContext(sBe)}function YI(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function gA(t,e,...r){if(t in e){let s=e[t];return typeof s=="function"?s(...r):s}let n=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,gA),n}var k4=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(k4||{}),_m=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(_m||{});function rf(){let t=lBe();return ve.useCallback(e=>aBe({mergeRefs:t,...e}),[t])}function aBe({ourProps:t,theirProps:e,slot:r,defaultTag:n,features:s,visible:o=!0,name:c,mergeRefs:u}){u=u??cBe;let i=hX(e,t);if(o)return O2(i,r,n,c,u);let A=s??0;if(A&2){let{static:g=!1,...C}=i;if(g)return O2(C,r,n,c,u)}if(A&1){let{unmount:g=!0,...C}=i;return gA(g?0:1,{0(){return null},1(){return O2({...C,hidden:!0,style:{display:"none"}},r,n,c,u)}})}return O2(i,r,n,c,u)}function O2(t,e={},r,n,s){let{as:o=r,children:c,refName:u="ref",...i}=tT(t,["unmount","static"]),A=t.ref!==void 0?{[u]:t.ref}:{},g=typeof c=="function"?c(e):c;"className"in i&&i.className&&typeof i.className=="function"&&(i.className=i.className(e)),i["aria-labelledby"]&&i["aria-labelledby"]===i.id&&(i["aria-labelledby"]=void 0);let C={};if(e){let B=!1,S=[];for(let[P,j]of Object.entries(e))typeof j=="boolean"&&(B=!0),j===!0&&S.push(P.replace(/([A-Z])/g,R=>`-${R.toLowerCase()}`));if(B){C["data-headlessui-state"]=S.join(" ");for(let P of S)C[`data-${P}`]=""}}if(o===ve.Fragment&&(Object.keys(Og(i)).length>0||Object.keys(Og(C)).length>0))if(!ve.isValidElement(g)||Array.isArray(g)&&g.length>1){if(Object.keys(Og(i)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Og(i)).concat(Object.keys(Og(C))).map(B=>`  - ${B}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(B=>`  - ${B}`).join(`
`)].join(`
`))}else{let B=g.props,S=B==null?void 0:B.className,P=typeof S=="function"?(...N)=>YI(S(...N),i.className):YI(S,i.className),j=P?{className:P}:{},R=hX(g.props,Og(tT(i,["ref"])));for(let N in C)N in R&&delete C[N];return ve.cloneElement(g,Object.assign({},R,C,A,{ref:s(uBe(g),A.ref)},j))}return ve.createElement(o,Object.assign({},tT(i,["ref"]),o!==ve.Fragment&&A,o!==ve.Fragment&&C),g)}function lBe(){let t=ve.useRef([]),e=ve.useCallback(r=>{for(let n of t.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return t.current=r,e}}function cBe(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function hX(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let n of t)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(r[s]!=null||(r[s]=[]),r[s].push(n[s])):e[s]=n[s];if(e.disabled||e["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[s=>{var o;return(o=s==null?void 0:s.preventDefault)==null?void 0:o.call(s)}]);for(let n in r)Object.assign(e,{[n](s,...o){let c=r[n];for(let u of c){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;u(s,...o)}}});return e}function Yh(t){var e;return Object.assign(ve.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Og(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function tT(t,e=[]){let r=Object.assign({},t);for(let n of e)n in r&&delete r[n];return r}function uBe(t){return Qi.version.split(".")[0]>="19"?t.props.ref:t.ref}let hBe="span";var D4=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(D4||{});function dBe(t,e){var r;let{features:n=1,...s}=t,o={ref:e,"aria-hidden":(n&2)===2?!0:(r=s["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return rf()({ourProps:o,theirProps:s,slot:{},defaultTag:hBe,name:"Hidden"})}let ZI=Yh(dBe);function dX(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function Rm(t){return dX(t)&&"tagName"in t}function x0(t){return Rm(t)&&"accessKey"in t}function bm(t){return Rm(t)&&"tabIndex"in t}function fBe(t){return Rm(t)&&"style"in t}function pBe(t){return x0(t)&&t.nodeName==="IFRAME"}function ABe(t){return x0(t)&&t.nodeName==="INPUT"}let fX=Symbol();function mBe(t,e=!0){return Object.assign(t,{[fX]:e})}function Fp(...t){let e=ve.useRef(t);ve.useEffect(()=>{e.current=t},[t]);let r=Qa(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return t.every(n=>n==null||(n==null?void 0:n[fX]))?void 0:r}let VN=ve.createContext(null);VN.displayName="DescriptionContext";function pX(){let t=ve.useContext(VN);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,pX),e}return t}function gBe(){let[t,e]=ve.useState([]);return[t.length>0?t.join(" "):void 0,ve.useMemo(()=>function(r){let n=Qa(o=>(e(c=>[...c,o]),()=>e(c=>{let u=c.slice(),i=u.indexOf(o);return i!==-1&&u.splice(i,1),u}))),s=ve.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return Qi.createElement(VN.Provider,{value:s},r.children)},[e])]}let yBe="p";function vBe(t,e){let r=ve.useId(),n=oBe(),{id:s=`headlessui-description-${r}`,...o}=t,c=pX(),u=Fp(e);Yu(()=>c.register(s),[s,c.register]);let i=n||!1,A=ve.useMemo(()=>({...c.slot,disabled:i}),[c.slot,i]),g={ref:u,...c.props,id:s};return rf()({ourProps:g,theirProps:o,slot:A,defaultTag:yBe,name:c.name||"Description"})}let xBe=Yh(vBe),_Be=Object.assign(xBe,{});var AX=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(AX||{});let bBe=ve.createContext(()=>{});function wBe({value:t,children:e}){return Qi.createElement(bBe.Provider,{value:t},e)}let mX=class extends Map{constructor(e){super(),this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e),this.set(e,r)),r}};var CBe=Object.defineProperty,SBe=(t,e,r)=>e in t?CBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,BBe=(t,e,r)=>(SBe(t,e+"",r),r),gX=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},zd=(t,e,r)=>(gX(t,e,"read from private field"),r?r.call(t):e.get(t)),rT=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Gz=(t,e,r,n)=>(gX(t,e,"write to private field"),e.set(t,r),r),cp,px,Ax;let EBe=class{constructor(e){rT(this,cp,{}),rT(this,px,new mX(()=>new Set)),rT(this,Ax,new Set),BBe(this,"disposables",xA()),Gz(this,cp,e)}dispose(){this.disposables.dispose()}get state(){return zd(this,cp)}subscribe(e,r){let n={selector:e,callback:r,current:e(zd(this,cp))};return zd(this,Ax).add(n),this.disposables.add(()=>{zd(this,Ax).delete(n)})}on(e,r){return zd(this,px).get(e).add(r),this.disposables.add(()=>{zd(this,px).get(e).delete(r)})}send(e){let r=this.reduce(zd(this,cp),e);if(r!==zd(this,cp)){Gz(this,cp,r);for(let n of zd(this,Ax)){let s=n.selector(zd(this,cp));yX(n.current,s)||(n.current=s,n.callback(s))}for(let n of zd(this,px).get(e.type))n(zd(this,cp),e)}}};cp=new WeakMap,px=new WeakMap,Ax=new WeakMap;function yX(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:nT(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:nT(t.entries(),e.entries()):qz(t)&&qz(e)?nT(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function nT(t,e){do{let r=t.next(),n=e.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function qz(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var TBe=Object.defineProperty,IBe=(t,e,r)=>e in t?TBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$z=(t,e,r)=>(IBe(t,typeof e!="symbol"?e+"":e,r),r),LBe=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(LBe||{});let FBe={0(t,e){let r=e.id,n=t.stack,s=t.stack.indexOf(r);if(s!==-1){let o=t.stack.slice();return o.splice(s,1),o.push(r),n=o,{...t,stack:n}}return{...t,stack:[...t.stack,r]}},1(t,e){let r=e.id,n=t.stack.indexOf(r);if(n===-1)return t;let s=t.stack.slice();return s.splice(n,1),{...t,stack:s}}},NBe=class vX extends EBe{constructor(){super(...arguments),$z(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),$z(this,"selectors",{isTop:(e,r)=>e.stack[e.stack.length-1]===r,inStack:(e,r)=>e.stack.includes(r)})}static new(){return new vX({stack:[]})}reduce(e,r){return gA(r.type,FBe,e,r)}};const xX=new mX(()=>NBe.new());var _X={exports:{}},bX={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=ve;function PBe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MBe=typeof Object.is=="function"?Object.is:PBe,jBe=vb.useSyncExternalStore,kBe=vb.useRef,DBe=vb.useEffect,OBe=vb.useMemo,RBe=vb.useDebugValue;bX.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var o=kBe(null);if(o.current===null){var c={hasValue:!1,value:null};o.current=c}else c=o.current;o=OBe(function(){function i(S){if(!A){if(A=!0,g=S,S=n(S),s!==void 0&&c.hasValue){var P=c.value;if(s(P,S))return C=P}return C=S}if(P=C,MBe(g,S))return P;var j=n(S);return s!==void 0&&s(P,j)?(g=S,P):(g=S,C=j)}var A=!1,g,C,B=r===void 0?null:r;return[function(){return i(e())},B===null?void 0:function(){return i(B())}]},[e,r,n,s]);var u=jBe(t,o[0],o[1]);return DBe(function(){c.hasValue=!0,c.value=u},[u]),RBe(u),u};_X.exports=bX;var UBe=_X.exports;function wX(t,e,r=yX){return UBe.useSyncExternalStoreWithSelector(Qa(n=>t.subscribe(zBe,n)),Qa(()=>t.state),Qa(()=>t.state),Qa(e),r)}function zBe(t){return t}function xb(t,e){let r=ve.useId(),n=xX.get(e),[s,o]=wX(n,ve.useCallback(c=>[n.selectors.isTop(c,r),n.selectors.inStack(c,r)],[n,r]));return Yu(()=>{if(t)return n.actions.push(r),()=>n.actions.pop(r)},[n,t,r]),t?o?s:!0:!1}let JI=new Map,Zx=new Map;function Wz(t){var e;let r=(e=Zx.get(t))!=null?e:0;return Zx.set(t,r+1),r!==0?()=>Kz(t):(JI.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>Kz(t))}function Kz(t){var e;let r=(e=Zx.get(t))!=null?e:1;if(r===1?Zx.delete(t):Zx.set(t,r-1),r!==1)return;let n=JI.get(t);n&&(n["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",n["aria-hidden"]),t.inert=n.inert,JI.delete(t))}function QBe(t,{allowed:e,disallowed:r}={}){let n=xb(t,"inert-others");Yu(()=>{var s,o;if(!n)return;let c=xA();for(let i of(s=r==null?void 0:r())!=null?s:[])i&&c.add(Wz(i));let u=(o=e==null?void 0:e())!=null?o:[];for(let i of u){if(!i)continue;let A=sS(i);if(!A)continue;let g=i.parentElement;for(;g&&g!==A.body;){for(let C of g.children)u.some(B=>C.contains(B))||c.add(Wz(C));g=g.parentElement}}return c.dispose},[n,e,r])}function HBe(t,e,r){let n=P0(s=>{let o=s.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&r()});ve.useEffect(()=>{if(!t)return;let s=e===null?null:x0(e)?e:e.current;if(!s)return;let o=xA();if(typeof ResizeObserver<"u"){let c=new ResizeObserver(()=>n.current(s));c.observe(s),o.add(()=>c.disconnect())}if(typeof IntersectionObserver<"u"){let c=new IntersectionObserver(()=>n.current(s));c.observe(s),o.add(()=>c.disconnect())}return()=>o.dispose()},[e,n,t])}let O4=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),VBe=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Yp=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Yp||{}),eL=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(eL||{}),GBe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(GBe||{});function qBe(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(O4)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function $Be(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(VBe)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var CX=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(CX||{});function WBe(t,e=0){var r;return t===((r=sS(t))==null?void 0:r.body)?!1:gA(e,{0(){return t.matches(O4)},1(){let n=t;for(;n!==null;){if(n.matches(O4))return!0;n=n.parentElement}return!1}})}var KBe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(KBe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function oA(t){t==null||t.focus({preventScroll:!0})}let XBe=["textarea","input"].join(",");function YBe(t){var e,r;return(r=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,XBe))!=null?r:!1}function ZBe(t,e=r=>r){return t.slice().sort((r,n)=>{let s=e(r),o=e(n);if(s===null||o===null)return 0;let c=s.compareDocumentPosition(o);return c&Node.DOCUMENT_POSITION_FOLLOWING?-1:c&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Jx(t,e,{sorted:r=!0,relativeTo:n=null,skipElements:s=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,c=Array.isArray(t)?r?ZBe(t):t:e&64?$Be(t):qBe(t);s.length>0&&c.length>1&&(c=c.filter(S=>!s.some(P=>P!=null&&"current"in P?(P==null?void 0:P.current)===S:P===S))),n=n??o.activeElement;let u=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,c.indexOf(n))-1;if(e&4)return Math.max(0,c.indexOf(n))+1;if(e&8)return c.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),A=e&32?{preventScroll:!0}:{},g=0,C=c.length,B;do{if(g>=C||g+C<=0)return 0;let S=i+g;if(e&16)S=(S+C)%C;else{if(S<0)return 3;if(S>=C)return 1}B=c[S],B==null||B.focus(A),g+=u}while(B!==o.activeElement);return e&6&&YBe(B)&&B.select(),2}function SX(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function JBe(){return/Android/gi.test(window.navigator.userAgent)}function Xz(){return SX()||JBe()}function R2(t,e,r,n){let s=P0(r);ve.useEffect(()=>{if(!t)return;function o(c){s.current(c)}return document.addEventListener(e,o,n),()=>document.removeEventListener(e,o,n)},[t,e,n])}function BX(t,e,r,n){let s=P0(r);ve.useEffect(()=>{if(!t)return;function o(c){s.current(c)}return window.addEventListener(e,o,n),()=>window.removeEventListener(e,o,n)},[t,e,n])}const Yz=30;function eEe(t,e,r){let n=P0(r),s=ve.useCallback(function(u,i){if(u.defaultPrevented)return;let A=i(u);if(A===null||!A.getRootNode().contains(A)||!A.isConnected)return;let g=function C(B){return typeof B=="function"?C(B()):Array.isArray(B)||B instanceof Set?B:[B]}(e);for(let C of g)if(C!==null&&(C.contains(A)||u.composed&&u.composedPath().includes(C)))return;return!WBe(A,CX.Loose)&&A.tabIndex!==-1&&u.preventDefault(),n.current(u,A)},[n,e]),o=ve.useRef(null);R2(t,"pointerdown",u=>{var i,A;Xz()||(o.current=((A=(i=u.composedPath)==null?void 0:i.call(u))==null?void 0:A[0])||u.target)},!0),R2(t,"pointerup",u=>{if(Xz()||!o.current)return;let i=o.current;return o.current=null,s(u,()=>i)},!0);let c=ve.useRef({x:0,y:0});R2(t,"touchstart",u=>{c.current.x=u.touches[0].clientX,c.current.y=u.touches[0].clientY},!0),R2(t,"touchend",u=>{let i={x:u.changedTouches[0].clientX,y:u.changedTouches[0].clientY};if(!(Math.abs(i.x-c.current.x)>=Yz||Math.abs(i.y-c.current.y)>=Yz))return s(u,()=>bm(u.target)?u.target:null)},!0),BX(t,"blur",u=>s(u,()=>pBe(window.document.activeElement)?window.document.activeElement:null),!0)}function aS(...t){return ve.useMemo(()=>sS(...t),[...t])}function EX(t,e,r,n){let s=P0(r);ve.useEffect(()=>{t=t??window;function o(c){s.current(c)}return t.addEventListener(e,o,n),()=>t.removeEventListener(e,o,n)},[t,e,n])}function tEe(t){return ve.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function rEe(t,e){let r=t(),n=new Set;return{getSnapshot(){return r},subscribe(s){return n.add(s),()=>n.delete(s)},dispatch(s,...o){let c=e[s].call(r,...o);c&&(r=c,n.forEach(u=>u()))}}}function nEe(){let t;return{before({doc:e}){var r;let n=e.documentElement,s=(r=e.defaultView)!=null?r:window;t=Math.max(0,s.innerWidth-n.clientWidth)},after({doc:e,d:r}){let n=e.documentElement,s=Math.max(0,n.clientWidth-n.offsetWidth),o=Math.max(0,t-s);r.style(n,"paddingRight",`${o}px`)}}}function iEe(){return SX()?{before({doc:t,d:e,meta:r}){function n(s){return r.containers.flatMap(o=>o()).some(o=>o.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let u=xA();u.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>u.dispose()))}let o=(s=window.scrollY)!=null?s:window.pageYOffset,c=null;e.addEventListener(t,"click",u=>{if(bm(u.target))try{let i=u.target.closest("a");if(!i)return;let{hash:A}=new URL(i.href),g=t.querySelector(A);bm(g)&&!n(g)&&(c=g)}catch{}},!0),e.addEventListener(t,"touchstart",u=>{if(bm(u.target)&&fBe(u.target))if(n(u.target)){let i=u.target;for(;i.parentElement&&n(i.parentElement);)i=i.parentElement;e.style(i,"overscrollBehavior","contain")}else e.style(u.target,"touchAction","none")}),e.addEventListener(t,"touchmove",u=>{if(bm(u.target)){if(ABe(u.target))return;if(n(u.target)){let i=u.target;for(;i.parentElement&&i.dataset.headlessuiPortal!==""&&!(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth);)i=i.parentElement;i.dataset.headlessuiPortal===""&&u.preventDefault()}else u.preventDefault()}},{passive:!1}),e.add(()=>{var u;let i=(u=window.scrollY)!=null?u:window.pageYOffset;o!==i&&window.scrollTo(0,o),c&&c.isConnected&&(c.scrollIntoView({block:"nearest"}),c=null)})})}}:{}}function sEe(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function oEe(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let Xg=rEe(()=>new Map,{PUSH(t,e){var r;let n=(r=this.get(t))!=null?r:{doc:t,count:0,d:xA(),meta:new Set};return n.count++,n.meta.add(e),this.set(t,n),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let n={doc:t,d:e,meta:oEe(r)},s=[iEe(),nEe(),sEe()];s.forEach(({before:o})=>o==null?void 0:o(n)),s.forEach(({after:o})=>o==null?void 0:o(n))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Xg.subscribe(()=>{let t=Xg.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let n=e.get(r.doc)==="hidden",s=r.count!==0;(s&&!n||!s&&n)&&Xg.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&Xg.dispatch("TEARDOWN",r)}});function aEe(t,e,r=()=>({containers:[]})){let n=tEe(Xg),s=e?n.get(e):void 0,o=s?s.count>0:!1;return Yu(()=>{if(!(!e||!t))return Xg.dispatch("PUSH",e,r),()=>Xg.dispatch("POP",e,r)},[t,e]),o}function lEe(t,e,r=()=>[document.body]){let n=xb(t,"scroll-lock");aEe(n,e,s=>{var o;return{containers:[...(o=s.containers)!=null?o:[],r]}})}function cEe(t=0){let[e,r]=ve.useState(t),n=ve.useCallback(i=>r(i),[e]),s=ve.useCallback(i=>r(A=>A|i),[e]),o=ve.useCallback(i=>(e&i)===i,[e]),c=ve.useCallback(i=>r(A=>A&~i),[r]),u=ve.useCallback(i=>r(A=>A^i),[r]);return{flags:e,setFlag:n,addFlag:s,hasFlag:o,removeFlag:c,toggleFlag:u}}var uEe={},Zz,Jz;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Zz=process==null?void 0:uEe)==null?void 0:Zz.NODE_ENV)==="test"&&typeof((Jz=Element==null?void 0:Element.prototype)==null?void 0:Jz.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var hEe=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(hEe||{});function dEe(t){let e={};for(let r in t)t[r]===!0&&(e[`data-${r}`]="");return e}function fEe(t,e,r,n){let[s,o]=ve.useState(r),{hasFlag:c,addFlag:u,removeFlag:i}=cEe(t&&s?3:0),A=ve.useRef(!1),g=ve.useRef(!1),C=HN();return Yu(()=>{var B;if(t){if(r&&o(!0),!e){r&&u(3);return}return(B=n==null?void 0:n.start)==null||B.call(n,r),pEe(e,{inFlight:A,prepare(){g.current?g.current=!1:g.current=A.current,A.current=!0,!g.current&&(r?(u(3),i(4)):(u(4),i(2)))},run(){g.current?r?(i(3),u(4)):(i(4),u(3)):r?i(1):u(1)},done(){var S;g.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(A.current=!1,i(7),r||o(!1),(S=n==null?void 0:n.end)==null||S.call(n,r))}})}},[t,r,e,C]),t?[s,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function pEe(t,{prepare:e,run:r,done:n,inFlight:s}){let o=xA();return mEe(t,{prepare:e,inFlight:s}),o.nextFrame(()=>{r(),o.requestAnimationFrame(()=>{o.add(AEe(t,n))})}),o.dispose}function AEe(t,e){var r,n;let s=xA();if(!t)return s.dispose;let o=!1;s.add(()=>{o=!0});let c=(n=(r=t.getAnimations)==null?void 0:r.call(t).filter(u=>u instanceof CSSTransition))!=null?n:[];return c.length===0?(e(),s.dispose):(Promise.allSettled(c.map(u=>u.finished)).then(()=>{o||e()}),s.dispose)}function mEe(t,{inFlight:e,prepare:r}){if(e!=null&&e.current){r();return}let n=t.style.transition;t.style.transition="none",r(),t.offsetHeight,t.style.transition=n}function GN(t,e){let r=ve.useRef([]),n=Qa(t);ve.useEffect(()=>{let s=[...r.current];for(let[o,c]of e.entries())if(r.current[o]!==c){let u=n(e,s);return r.current=e,u}},[n,...e])}let lS=ve.createContext(null);lS.displayName="OpenClosedContext";var Nf=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Nf||{});function cS(){return ve.useContext(lS)}function gEe({value:t,children:e}){return Qi.createElement(lS.Provider,{value:t},e)}function yEe({children:t}){return Qi.createElement(lS.Provider,{value:null},t)}function vEe(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let am=[];vEe(()=>{function t(e){if(!bm(e.target)||e.target===document.body||am[0]===e.target)return;let r=e.target;r=r.closest(O4),am.unshift(r??e.target),am=am.filter(n=>n!=null&&n.isConnected),am.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function TX(t){let e=Qa(t),r=ve.useRef(!1);ve.useEffect(()=>(r.current=!1,()=>{r.current=!0,oS(()=>{r.current&&e()})}),[e])}function xEe(){let t=typeof document>"u";return"useSyncExternalStore"in oT?(e=>e.useSyncExternalStore)(oT)(()=>()=>{},()=>!1,()=>!t):!1}function _b(){let t=xEe(),[e,r]=ve.useState(u0.isHandoffComplete);return e&&u0.isHandoffComplete===!1&&r(!1),ve.useEffect(()=>{e!==!0&&r(!0)},[e]),ve.useEffect(()=>u0.handoff(),[]),t?!1:e}let IX=ve.createContext(!1);function _Ee(){return ve.useContext(IX)}function e9(t){return Qi.createElement(IX.Provider,{value:t.force},t.children)}function bEe(t){let e=_Ee(),r=ve.useContext(FX),[n,s]=ve.useState(()=>{var o;if(!e&&r!==null)return(o=r.current)!=null?o:null;if(u0.isServer)return null;let c=t==null?void 0:t.getElementById("headlessui-portal-root");if(c)return c;if(t===null)return null;let u=t.createElement("div");return u.setAttribute("id","headlessui-portal-root"),t.body.appendChild(u)});return ve.useEffect(()=>{n!==null&&(t!=null&&t.body.contains(n)||t==null||t.body.appendChild(n))},[n,t]),ve.useEffect(()=>{e||r!==null&&s(r.current)},[r,s,e]),n}let LX=ve.Fragment,wEe=Yh(function(t,e){let{ownerDocument:r=null,...n}=t,s=ve.useRef(null),o=Fp(mBe(S=>{s.current=S}),e),c=aS(s),u=r??c,i=bEe(u),[A]=ve.useState(()=>{var S;return u0.isServer?null:(S=u==null?void 0:u.createElement("div"))!=null?S:null}),g=ve.useContext(tL),C=_b();Yu(()=>{!i||!A||i.contains(A)||(A.setAttribute("data-headlessui-portal",""),i.appendChild(A))},[i,A]),Yu(()=>{if(A&&g)return g.register(A)},[g,A]),TX(()=>{var S;!i||!A||(dX(A)&&i.contains(A)&&i.removeChild(A),i.childNodes.length<=0&&((S=i.parentElement)==null||S.removeChild(i)))});let B=rf();return C?!i||!A?null:nC.createPortal(B({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:LX,name:"Portal"}),A):null});function CEe(t,e){let r=Fp(e),{enabled:n=!0,ownerDocument:s,...o}=t,c=rf();return n?Qi.createElement(wEe,{...o,ownerDocument:s,ref:r}):c({ourProps:{ref:r},theirProps:o,slot:{},defaultTag:LX,name:"Portal"})}let SEe=ve.Fragment,FX=ve.createContext(null);function BEe(t,e){let{target:r,...n}=t,s={ref:Fp(e)},o=rf();return Qi.createElement(FX.Provider,{value:r},o({ourProps:s,theirProps:n,defaultTag:SEe,name:"Popover.Group"}))}let tL=ve.createContext(null);function EEe(){let t=ve.useContext(tL),e=ve.useRef([]),r=Qa(o=>(e.current.push(o),t&&t.register(o),()=>n(o))),n=Qa(o=>{let c=e.current.indexOf(o);c!==-1&&e.current.splice(c,1),t&&t.unregister(o)}),s=ve.useMemo(()=>({register:r,unregister:n,portals:e}),[r,n,e]);return[e,ve.useMemo(()=>function({children:o}){return Qi.createElement(tL.Provider,{value:s},o)},[s])]}let TEe=Yh(CEe),NX=Yh(BEe),IEe=Object.assign(TEe,{Group:NX});function LEe(t,e=typeof document<"u"?document.defaultView:null,r){let n=xb(t,"escape");EX(e,"keydown",s=>{n&&(s.defaultPrevented||s.key===AX.Escape&&r(s))})}function FEe(){var t;let[e]=ve.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=ve.useState((t=e==null?void 0:e.matches)!=null?t:!1);return Yu(()=>{if(!e)return;function s(o){n(o.matches)}return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[e]),r}function NEe({defaultContainers:t=[],portals:e,mainTreeNode:r}={}){let n=aS(r),s=Qa(()=>{var o,c;let u=[];for(let i of t)i!==null&&(Rm(i)?u.push(i):"current"in i&&Rm(i.current)&&u.push(i.current));if(e!=null&&e.current)for(let i of e.current)u.push(i);for(let i of(o=n==null?void 0:n.querySelectorAll("html > *, body > *"))!=null?o:[])i!==document.body&&i!==document.head&&Rm(i)&&i.id!=="headlessui-portal-root"&&(r&&(i.contains(r)||i.contains((c=r==null?void 0:r.getRootNode())==null?void 0:c.host))||u.some(A=>i.contains(A))||u.push(i));return u});return{resolveContainers:s,contains:Qa(o=>s().some(c=>c.contains(o)))}}let PX=ve.createContext(null);function t9({children:t,node:e}){let[r,n]=ve.useState(null),s=MX(e??r);return Qi.createElement(PX.Provider,{value:s},t,s===null&&Qi.createElement(ZI,{features:D4.Hidden,ref:o=>{var c,u;if(o){for(let i of(u=(c=sS(o))==null?void 0:c.querySelectorAll("html > *, body > *"))!=null?u:[])if(i!==document.body&&i!==document.head&&Rm(i)&&i!=null&&i.contains(o)){n(i);break}}}}))}function MX(t=null){var e;return(e=ve.useContext(PX))!=null?e:t}function qN(){let t=ve.useRef(!1);return Yu(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var mx=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(mx||{});function PEe(){let t=ve.useRef(0);return BX(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function jX(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let r of t.current)Rm(r.current)&&e.add(r.current);return e}let MEe="div";var zg=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(zg||{});function jEe(t,e){let r=ve.useRef(null),n=Fp(r,e),{initialFocus:s,initialFocusFallback:o,containers:c,features:u=15,...i}=t;_b()||(u=0);let A=aS(r);REe(u,{ownerDocument:A});let g=UEe(u,{ownerDocument:A,container:r,initialFocus:s,initialFocusFallback:o});zEe(u,{ownerDocument:A,container:r,containers:c,previousActiveElement:g});let C=PEe(),B=Qa(U=>{if(!x0(r.current))return;let $=r.current;(J=>J())(()=>{gA(C.current,{[mx.Forwards]:()=>{Jx($,Yp.First,{skipElements:[U.relatedTarget,o]})},[mx.Backwards]:()=>{Jx($,Yp.Last,{skipElements:[U.relatedTarget,o]})}})})}),S=xb(!!(u&2),"focus-trap#tab-lock"),P=HN(),j=ve.useRef(!1),R={ref:n,onKeyDown(U){U.key=="Tab"&&(j.current=!0,P.requestAnimationFrame(()=>{j.current=!1}))},onBlur(U){if(!(u&4))return;let $=jX(c);x0(r.current)&&$.add(r.current);let J=U.relatedTarget;bm(J)&&J.dataset.headlessuiFocusGuard!=="true"&&(kX($,J)||(j.current?Jx(r.current,gA(C.current,{[mx.Forwards]:()=>Yp.Next,[mx.Backwards]:()=>Yp.Previous})|Yp.WrapAround,{relativeTo:U.target}):bm(U.target)&&oA(U.target)))}},N=rf();return Qi.createElement(Qi.Fragment,null,S&&Qi.createElement(ZI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:B,features:D4.Focusable}),N({ourProps:R,theirProps:i,defaultTag:MEe,name:"FocusTrap"}),S&&Qi.createElement(ZI,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:B,features:D4.Focusable}))}let kEe=Yh(jEe),DEe=Object.assign(kEe,{features:zg});function OEe(t=!0){let e=ve.useRef(am.slice());return GN(([r],[n])=>{n===!0&&r===!1&&oS(()=>{e.current.splice(0)}),n===!1&&r===!0&&(e.current=am.slice())},[t,am,e]),Qa(()=>{var r;return(r=e.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function REe(t,{ownerDocument:e}){let r=!!(t&8),n=OEe(r);GN(()=>{r||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&oA(n())},[r]),TX(()=>{r&&oA(n())})}function UEe(t,{ownerDocument:e,container:r,initialFocus:n,initialFocusFallback:s}){let o=ve.useRef(null),c=xb(!!(t&1),"focus-trap#initial-focus"),u=qN();return GN(()=>{if(t===0)return;if(!c){s!=null&&s.current&&oA(s.current);return}let i=r.current;i&&oS(()=>{if(!u.current)return;let A=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===A){o.current=A;return}}else if(i.contains(A)){o.current=A;return}if(n!=null&&n.current)oA(n.current);else{if(t&16){if(Jx(i,Yp.First|Yp.AutoFocus)!==eL.Error)return}else if(Jx(i,Yp.First)!==eL.Error)return;if(s!=null&&s.current&&(oA(s.current),(e==null?void 0:e.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=e==null?void 0:e.activeElement})},[s,c,t]),o}function zEe(t,{ownerDocument:e,container:r,containers:n,previousActiveElement:s}){let o=qN(),c=!!(t&4);EX(e==null?void 0:e.defaultView,"focus",u=>{if(!c||!o.current)return;let i=jX(n);x0(r.current)&&i.add(r.current);let A=s.current;if(!A)return;let g=u.target;x0(g)?kX(i,g)?(s.current=g,oA(g)):(u.preventDefault(),u.stopPropagation(),oA(A)):oA(s.current)},!0)}function kX(t,e){for(let r of t)if(r.contains(e))return!0;return!1}function DX(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:RX)!==ve.Fragment||Qi.Children.count(t.children)===1}let uS=ve.createContext(null);uS.displayName="TransitionContext";var QEe=(t=>(t.Visible="visible",t.Hidden="hidden",t))(QEe||{});function HEe(){let t=ve.useContext(uS);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function VEe(){let t=ve.useContext(hS);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let hS=ve.createContext(null);hS.displayName="NestingContext";function dS(t){return"children"in t?dS(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function OX(t,e){let r=P0(t),n=ve.useRef([]),s=qN(),o=HN(),c=Qa((S,P=_m.Hidden)=>{let j=n.current.findIndex(({el:R})=>R===S);j!==-1&&(gA(P,{[_m.Unmount](){n.current.splice(j,1)},[_m.Hidden](){n.current[j].state="hidden"}}),o.microTask(()=>{var R;!dS(n)&&s.current&&((R=r.current)==null||R.call(r))}))}),u=Qa(S=>{let P=n.current.find(({el:j})=>j===S);return P?P.state!=="visible"&&(P.state="visible"):n.current.push({el:S,state:"visible"}),()=>c(S,_m.Unmount)}),i=ve.useRef([]),A=ve.useRef(Promise.resolve()),g=ve.useRef({enter:[],leave:[]}),C=Qa((S,P,j)=>{i.current.splice(0),e&&(e.chains.current[P]=e.chains.current[P].filter(([R])=>R!==S)),e==null||e.chains.current[P].push([S,new Promise(R=>{i.current.push(R)})]),e==null||e.chains.current[P].push([S,new Promise(R=>{Promise.all(g.current[P].map(([N,U])=>U)).then(()=>R())})]),P==="enter"?A.current=A.current.then(()=>e==null?void 0:e.wait.current).then(()=>j(P)):j(P)}),B=Qa((S,P,j)=>{Promise.all(g.current[P].splice(0).map(([R,N])=>N)).then(()=>{var R;(R=i.current.shift())==null||R()}).then(()=>j(P))});return ve.useMemo(()=>({children:n,register:u,unregister:c,onStart:C,onStop:B,wait:A,chains:g}),[u,c,n,C,B,g,A])}let RX=ve.Fragment,UX=k4.RenderStrategy;function GEe(t,e){var r,n;let{transition:s=!0,beforeEnter:o,afterEnter:c,beforeLeave:u,afterLeave:i,enter:A,enterFrom:g,enterTo:C,entered:B,leave:S,leaveFrom:P,leaveTo:j,...R}=t,[N,U]=ve.useState(null),$=ve.useRef(null),J=DX(t),te=Fp(...J?[$,e,U]:e===null?[]:[e]),ue=(r=R.unmount)==null||r?_m.Unmount:_m.Hidden,{show:oe,appear:K,initial:ce}=HEe(),[me,Z]=ve.useState(oe?"visible":"hidden"),Y=VEe(),{register:Le,unregister:_e}=Y;Yu(()=>Le($),[Le,$]),Yu(()=>{if(ue===_m.Hidden&&$.current){if(oe&&me!=="visible"){Z("visible");return}return gA(me,{hidden:()=>_e($),visible:()=>Le($)})}},[me,$,Le,_e,oe,ue]);let Qe=_b();Yu(()=>{if(J&&Qe&&me==="visible"&&$.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[$,me,Qe,J]);let De=ce&&!K,Be=K&&oe&&ce,xe=ve.useRef(!1),ze=OX(()=>{xe.current||(Z("hidden"),_e($))},Y),Fe=Qa(Je=>{xe.current=!0;let tt=Je?"enter":"leave";ze.onStart($,tt,st=>{st==="enter"?o==null||o():st==="leave"&&(u==null||u())})}),it=Qa(Je=>{let tt=Je?"enter":"leave";xe.current=!1,ze.onStop($,tt,st=>{st==="enter"?c==null||c():st==="leave"&&(i==null||i())}),tt==="leave"&&!dS(ze)&&(Z("hidden"),_e($))});ve.useEffect(()=>{J&&s||(Fe(oe),it(oe))},[oe,J,s]);let ie=!(!s||!J||!Qe||De),[,le]=fEe(ie,N,oe,{start:Fe,end:it}),fe=Og({ref:te,className:((n=YI(R.className,Be&&A,Be&&g,le.enter&&A,le.enter&&le.closed&&g,le.enter&&!le.closed&&C,le.leave&&S,le.leave&&!le.closed&&P,le.leave&&le.closed&&j,!le.transition&&oe&&B))==null?void 0:n.trim())||void 0,...dEe(le)}),be=0;me==="visible"&&(be|=Nf.Open),me==="hidden"&&(be|=Nf.Closed),oe&&me==="hidden"&&(be|=Nf.Opening),!oe&&me==="visible"&&(be|=Nf.Closing);let He=rf();return Qi.createElement(hS.Provider,{value:ze},Qi.createElement(gEe,{value:be},He({ourProps:fe,theirProps:R,defaultTag:RX,features:UX,visible:me==="visible",name:"Transition.Child"})))}function qEe(t,e){let{show:r,appear:n=!1,unmount:s=!0,...o}=t,c=ve.useRef(null),u=DX(t),i=Fp(...u?[c,e]:e===null?[]:[e]);_b();let A=cS();if(r===void 0&&A!==null&&(r=(A&Nf.Open)===Nf.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,C]=ve.useState(r?"visible":"hidden"),B=OX(()=>{r||C("hidden")}),[S,P]=ve.useState(!0),j=ve.useRef([r]);Yu(()=>{S!==!1&&j.current[j.current.length-1]!==r&&(j.current.push(r),P(!1))},[j,r]);let R=ve.useMemo(()=>({show:r,appear:n,initial:S}),[r,n,S]);Yu(()=>{r?C("visible"):!dS(B)&&c.current!==null&&C("hidden")},[r,B]);let N={unmount:s},U=Qa(()=>{var te;S&&P(!1),(te=t.beforeEnter)==null||te.call(t)}),$=Qa(()=>{var te;S&&P(!1),(te=t.beforeLeave)==null||te.call(t)}),J=rf();return Qi.createElement(hS.Provider,{value:B},Qi.createElement(uS.Provider,{value:R},J({ourProps:{...N,as:ve.Fragment,children:Qi.createElement(zX,{ref:i,...N,...o,beforeEnter:U,beforeLeave:$})},theirProps:{},defaultTag:ve.Fragment,features:UX,visible:g==="visible",name:"Transition"})))}function $Ee(t,e){let r=ve.useContext(uS)!==null,n=cS()!==null;return Qi.createElement(Qi.Fragment,null,!r&&n?Qi.createElement(rL,{ref:e,...t}):Qi.createElement(zX,{ref:e,...t}))}let rL=Yh(qEe),zX=Yh(GEe),$N=Yh($Ee),WEe=Object.assign(rL,{Child:$N,Root:rL});var KEe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(KEe||{}),XEe=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(XEe||{});let YEe={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},WN=ve.createContext(null);WN.displayName="DialogContext";function fS(t){let e=ve.useContext(WN);if(e===null){let r=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,fS),r}return e}function ZEe(t,e){return gA(e.type,YEe,t,e)}let r9=Yh(function(t,e){let r=ve.useId(),{id:n=`headlessui-dialog-${r}`,open:s,onClose:o,initialFocus:c,role:u="dialog",autoFocus:i=!0,__demoMode:A=!1,unmount:g=!1,...C}=t,B=ve.useRef(!1);u=function(){return u==="dialog"||u==="alertdialog"?u:(B.current||(B.current=!0,console.warn(`Invalid role [${u}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let S=cS();s===void 0&&S!==null&&(s=(S&Nf.Open)===Nf.Open);let P=ve.useRef(null),j=Fp(P,e),R=aS(P),N=s?0:1,[U,$]=ve.useReducer(ZEe,{titleId:null,descriptionId:null,panelRef:ve.createRef()}),J=Qa(()=>o(!1)),te=Qa(le=>$({type:0,id:le})),ue=_b()?N===0:!1,[oe,K]=EEe(),ce={get current(){var le;return(le=U.panelRef.current)!=null?le:P.current}},me=MX(),{resolveContainers:Z}=NEe({mainTreeNode:me,portals:oe,defaultContainers:[ce]}),Y=S!==null?(S&Nf.Closing)===Nf.Closing:!1;QBe(A||Y?!1:ue,{allowed:Qa(()=>{var le,fe;return[(fe=(le=P.current)==null?void 0:le.closest("[data-headlessui-portal]"))!=null?fe:null]}),disallowed:Qa(()=>{var le;return[(le=me==null?void 0:me.closest("body > *:not(#headlessui-portal-root)"))!=null?le:null]})});let Le=xX.get(null);Yu(()=>{if(ue)return Le.actions.push(n),()=>Le.actions.pop(n)},[Le,n,ue]);let _e=wX(Le,ve.useCallback(le=>Le.selectors.isTop(le,n),[Le,n]));eEe(_e,Z,le=>{le.preventDefault(),J()}),LEe(_e,R==null?void 0:R.defaultView,le=>{le.preventDefault(),le.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),J()}),lEe(A||Y?!1:ue,R,Z),HBe(ue,P,J);let[Qe,De]=gBe(),Be=ve.useMemo(()=>[{dialogState:N,close:J,setTitleId:te,unmount:g},U],[N,U,J,te,g]),xe=ve.useMemo(()=>({open:N===0}),[N]),ze={ref:j,id:n,role:u,tabIndex:-1,"aria-modal":A?void 0:N===0?!0:void 0,"aria-labelledby":U.titleId,"aria-describedby":Qe,unmount:g},Fe=!FEe(),it=zg.None;ue&&!A&&(it|=zg.RestoreFocus,it|=zg.TabLock,i&&(it|=zg.AutoFocus),Fe&&(it|=zg.InitialFocus));let ie=rf();return Qi.createElement(yEe,null,Qi.createElement(e9,{force:!0},Qi.createElement(IEe,null,Qi.createElement(WN.Provider,{value:Be},Qi.createElement(NX,{target:P},Qi.createElement(e9,{force:!1},Qi.createElement(De,{slot:xe},Qi.createElement(K,null,Qi.createElement(DEe,{initialFocus:c,initialFocusFallback:P,containers:Z,features:it},Qi.createElement(wBe,{value:J},ie({ourProps:ze,theirProps:C,slot:xe,defaultTag:JEe,features:e3e,visible:N===0,name:"Dialog"})))))))))))}),JEe="div",e3e=k4.RenderStrategy|k4.Static;function t3e(t,e){let{transition:r=!1,open:n,...s}=t,o=cS(),c=t.hasOwnProperty("open")||o!==null,u=t.hasOwnProperty("onClose");if(!c&&!u)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!c)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!u)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(n!==void 0||r)&&!s.static?Qi.createElement(t9,null,Qi.createElement(WEe,{show:n,transition:r,unmount:s.unmount},Qi.createElement(r9,{ref:e,...s}))):Qi.createElement(t9,null,Qi.createElement(r9,{ref:e,open:n,...s}))}let r3e="div";function n3e(t,e){let r=ve.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:s=!1,...o}=t,[{dialogState:c,unmount:u},i]=fS("Dialog.Panel"),A=Fp(e,i.panelRef),g=ve.useMemo(()=>({open:c===0}),[c]),C=Qa(R=>{R.stopPropagation()}),B={ref:A,id:n,onClick:C},S=s?$N:ve.Fragment,P=s?{unmount:u}:{},j=rf();return Qi.createElement(S,{...P},j({ourProps:B,theirProps:o,slot:g,defaultTag:r3e,name:"Dialog.Panel"}))}let i3e="div";function s3e(t,e){let{transition:r=!1,...n}=t,[{dialogState:s,unmount:o}]=fS("Dialog.Backdrop"),c=ve.useMemo(()=>({open:s===0}),[s]),u={ref:e,"aria-hidden":!0},i=r?$N:ve.Fragment,A=r?{unmount:o}:{},g=rf();return Qi.createElement(i,{...A},g({ourProps:u,theirProps:n,slot:c,defaultTag:i3e,name:"Dialog.Backdrop"}))}let o3e="h2";function a3e(t,e){let r=ve.useId(),{id:n=`headlessui-dialog-title-${r}`,...s}=t,[{dialogState:o,setTitleId:c}]=fS("Dialog.Title"),u=Fp(e);ve.useEffect(()=>(c(n),()=>c(null)),[n,c]);let i=ve.useMemo(()=>({open:o===0}),[o]),A={ref:u,id:n};return rf()({ourProps:A,theirProps:s,slot:i,defaultTag:o3e,name:"Dialog.Title"})}let l3e=Yh(t3e),c3e=Yh(n3e);Yh(s3e);let u3e=Yh(a3e),iT=Object.assign(l3e,{Panel:c3e,Title:u3e,Description:_Be});function R4({isOpen:t,onClose:e,featureName:r,phone:n,agent_id:s,onPaymentSuccess:o}){const[c,u]=ve.useState((s||"1234")+Date.now()),[i,A]=ve.useState(""),[g,C]=ve.useState(!1),[B,S]=ve.useState(!1),[P,j]=ve.useState(""),[R,N]=ve.useState(null),U=B1(),$=n||P;ve.useEffect(()=>{t&&(async()=>{try{const ce=(await Mr.get("/api/feature/price/")).data.find(me=>me.feature_name===r);N(ce)}catch(K){console.error("Failed to fetch price info:",K)}})()},[t,r]);const J=async oe=>{var K,ce;oe.preventDefault(),C(!0),A(""),n&&localStorage.removeItem("token");try{const me=await Mr.post("/api/payments/initiate",{phone_number:$,feature_name:r,txn_id:c});A(me.data.msg||"Payment initiated. Please confirm on your phone."),S(!0),te(c,$)}catch(me){A("Error : "+(((ce=(K=me.response)==null?void 0:K.data)==null?void 0:ce.error)||me.message)),C(!1)}},te=(oe,K)=>{let ce=0;const me=40,Z=setInterval(async()=>{var Y;ce++;try{const _e=(Y=(await Mr.get(`/api/payments/status/${oe}`)).data.status)==null?void 0:Y.toLowerCase();_e.includes("success")||_e.includes("confirmed")?(clearInterval(Z),ue(K)):_e.includes("failed")||_e.includes("rejected")?(clearInterval(Z),S(!1),A("Payment declined or failed."),C(!1)):ce>=me&&(clearInterval(Z),S(!1),A("No confirmation received. Please try again."),C(!1))}catch(Le){clearInterval(Z),S(!1),A("Error during verification: "+Le.message),C(!1)}},3e3)},ue=async oe=>{try{(await Mr.get(`/api/payments/access/${r}`,{params:{phone_number:oe}})).data.access?o?o():U(`/${r}`):A("Payment confirmed, but access not activated.")}catch{A("Error during access verification.")}finally{C(!1),S(!1)}};return m.jsxs(iT,{open:t,onClose:e,className:"relative z-50",children:[m.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),m.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:m.jsxs(iT.Panel,{as:iA.div,initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-xl",children:[m.jsxs(iT.Title,{className:"text-xl font-bold mb-4",children:["Payment for: ",m.jsx("span",{className:"text-green-600",children:r})]}),R&&m.jsxs("div",{className:"mb-4 text-gray-700",children:[m.jsxs("p",{className:"font-medium",children:["Price: ",R.price," UGX"]}),R.duration_days&&m.jsxs("p",{className:"text-sm",children:["Access duration: ",R.duration_days," days"]})]}),m.jsxs("form",{onSubmit:J,className:"space-y-4",children:[!n&&m.jsx("input",{type:"tel",placeholder:"Your phone number",className:"w-full p-2 border rounded",value:P,onChange:oe=>j(oe.target.value),required:!0,disabled:g||B}),$&&m.jsxs("p",{className:"text-sm text-gray-600",children:["Sending payment with phone: +",m.jsx("strong",{children:$})]}),m.jsx("input",{type:"text",placeholder:"Transaction ID",className:"w-full p-2 border rounded bg-gray-100 text-gray-600 cursor-not-allowed",value:c,readOnly:!0}),m.jsx("button",{type:"submit",className:"w-full bg-green-500 text-white py-2 rounded hover:bg-green-600",disabled:g||B,children:g?"Sending...":B?"Waiting for confirmation...":"Send Payment"})]}),B&&m.jsx("div",{className:"flex justify-center mt-4",children:m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-green-500"})}),i&&m.jsx("p",{className:"mt-4 text-sm text-gray-600",children:i})]})})]})}const h3e=()=>{var ze;const[t,e]=ve.useState(!1),[r,n]=ve.useState(!1),[s,o]=ve.useState({internalReferenceNumber:"",activityType:"",borderCrossCountry:"",comment:"",descriptionOfGoods:"",hsHeading:"",geoLocationConfidential:!1,goodsMeasure:{volume:"",netWeight:"",supplementaryUnit:"",supplementaryUnitQualifier:""},speciesInfo:{scientificName:"",commonName:""},producers:[{country:"",name:""}],operator:{identifierType:"",identifierValue:"",name:"",country:"",address:"",email:"",phone:""},countryOfActivity:""}),[c,u]=ve.useState(""),[i,A]=ve.useState(""),[g,C]=ve.useState(""),[B,S]=ve.useState(""),[P,j]=ve.useState(!1),[R,N]=ve.useState(null),U=["DOMESTIC","TRADE","IMPORT","EXPORT"],$=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK","XI"],J=["ASV","ASVX","CCT","CEN","CTM","DAP","DHS","DTN","DTNE","DTNF","DTNG","DTNL","DTNM","DTNR","DTNS","DTNZ","ENP","EUR","GFI","GRM","GRT","HLT","HMT","KAC","KCC","KCL","KGM","KGMA","KGME","KGMG","KGMP","KGMS","KGMT","KLT","KMA","KMT","KNI","KNS","KPH","KPO","KPP","KSD","KSH","KUR","LPA","LTR","LTRA","MIL","MPR","MTK","MTQ","MTQC","MTR","MWH","NAR","NARB","NCL","NPR","TJO","TNE","TNEE","TNEI","TNEJ","TNEK","TNEM","TNER","TNEZ","WAT"],te=["eori","vat","cin","duns","comp_reg","comp_num","cbr","ship_man_comp_imo","ship_reg_owner_imo","remos","gln","tin"],[ue,oe]=ve.useState([]);ve.useEffect(()=>{Z()},[]);const[K,ce]=ve.useState(!1),[me]=ve.useState("eudrsubmission"),Z=async()=>{try{const Fe=await Mr.get("/api/pays/");oe(Fe.data.pays||[])}catch(Fe){console.error("Error fetching countries:",Fe)}},Y=Fe=>{const{name:it,value:ie}=Fe.target;if(it.startsWith("producers.")){const le=it.split(".")[1];o(fe=>{var be;return{...fe,producers:[{...(be=fe.producers)==null?void 0:be[0],[le]:ie}]}})}else if(it.includes(".")){const[le,fe]=it.split(".");o(be=>({...be,[le]:{...be[le],[fe]:ie}}))}else o(le=>({...le,[it]:ie}))},Le=async()=>{var it;j(!1);let Fe;if(!c.trim()){N({error:"Please paste or import a GeoJSON."});return}try{Fe=JSON.parse(c)}catch{N({error:"GeoJSON is not valid JSON."});return}try{const ie=await Mr.post("/api/eudr/submit",{statement:s,geojson:Fe});N(ie.data)}catch(ie){N({error:((it=ie.response)==null?void 0:it.data)||ie.message})}console.log("Producers submitted:",s.producers),e(!0)},_e=async()=>{var it;j(!1);let Fe;try{Fe=JSON.parse(c)}catch{N({error:"GeoJSON is not valid JSON."});return}try{const ie=await Mr.post("/api/eudr/amend",{statement:s,geojson:Fe,ddsIdentifier:i});N(ie.data)}catch(ie){N({error:((it=ie.response)==null?void 0:it.data)||ie.message})}e(!0)},Qe=async()=>{j(!1);const Fe=await Mr.delete(`/api/eudr/retract/${i}`);N(Fe.data),e(!0)},De=async()=>{j(!1);const Fe=await Mr.get(`/api/eudr/info/by-internal-ref/${s.internalReferenceNumber}`);N(Fe.data),e(!0)},Be=async()=>{var Fe;j(!1);try{const it=await Mr.get(`/api/eudr/info/by-dds-id/${i}`);N(it.data),e(!0)}catch(it){N({error:((Fe=it.response)==null?void 0:Fe.data)||it.message})}},xe=async()=>{j(!0);const Fe=await Mr.post("/api/eudr/info/by-ref-verification",{reference:g,verification:B});console.log(Fe.data.remote_data),N(Fe.data)};return m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full h-screen p-6",children:[m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow space-y-6 h-full overflow-auto",children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Due Diligence Statements"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx("input",{className:"border p-2 rounded",name:"internalReferenceNumber",placeholder:"Internal Reference Number",onChange:Y,value:s.internalReferenceNumber}),m.jsxs("select",{className:"border p-2 rounded",name:"activityType",onChange:Y,children:[m.jsx("option",{value:"",children:"Select Activity Type"}),U.map(Fe=>m.jsx("option",{value:Fe,children:Fe},Fe))]}),m.jsxs("select",{className:"border p-2 rounded",name:"borderCrossCountry",onChange:Y,children:[m.jsx("option",{value:"",children:"Select Border Cross Country"}),$.map(Fe=>m.jsx("option",{value:Fe,children:Fe},Fe))]}),m.jsx("input",{className:"border p-2 rounded",name:"comment",placeholder:"Comment",onChange:Y}),m.jsx("input",{className:"border p-2 rounded",name:"descriptionOfGoods",placeholder:"Description of Goods",onChange:Y}),m.jsx("input",{type:"text",pattern:"[0-9]{2,8}",title:"Enter 2 to 8 digits",className:"border p-2 rounded",name:"hsHeading",placeholder:"HS Heading",onChange:Y}),m.jsx("input",{type:"number",step:"any",min:"0",className:"border p-2 rounded",name:"goodsMeasure.volume",placeholder:"Volume",onChange:Y}),m.jsx("input",{type:"number",step:"any",min:"0",className:"border p-2 rounded",name:"goodsMeasure.netWeight",placeholder:"Net Weight",onChange:Y}),m.jsx("input",{type:"number",step:"1",min:"0",className:"border p-2 rounded",name:"goodsMeasure.supplementaryUnit",placeholder:"Supplementary Unit",onChange:Y}),m.jsxs("select",{className:"border p-2 rounded",name:"goodsMeasure.supplementaryUnitQualifier",onChange:Y,children:[m.jsx("option",{value:"",children:"Select Qualifier"}),J.map(Fe=>m.jsx("option",{value:Fe,children:Fe},Fe))]}),m.jsx("input",{className:"border p-2 rounded",name:"speciesInfo.scientificName",placeholder:"Scientific Name",onChange:Y}),m.jsx("input",{className:"border p-2 rounded",name:"speciesInfo.commonName",placeholder:"Common Name",onChange:Y}),m.jsxs("select",{className:"border p-2 rounded invalid:border-red-500",name:"producers.country",onChange:Y,required:!0,children:[m.jsx("option",{value:"",children:"Select producer Country"}),ue.map(Fe=>m.jsx("option",{value:Fe.alpha2,children:Fe.nom_en_gb},Fe.id))]}),m.jsx("input",{className:"border p-2 rounded",name:"producers.name",placeholder:"Producer Name",onChange:Y})]}),m.jsx("h3",{className:"text-lg font-semibold",children:"Operator Info"}),m.jsxs("select",{className:"border p-2 rounded",name:"operator.identifierType",onChange:Y,value:s.operator.identifierType,children:[m.jsx("option",{value:"",children:"Select Identifier Type"}),te.map(Fe=>m.jsx("option",{value:Fe,children:Fe.toUpperCase()},Fe))]}),m.jsx("input",{className:"border p-2 rounded",name:"operator.identifierValue",placeholder:"Identifier Value",onChange:Y}),m.jsx("input",{className:"border p-2 rounded",name:"operator.name",placeholder:"Operator Name",onChange:Y}),m.jsxs("select",{className:"border p-2 rounded",name:"operator.country",onChange:Y,value:s.operator.country,children:[m.jsx("option",{value:"",children:"Select Country"}),ue.map(Fe=>m.jsx("option",{value:Fe.alpha2,children:Fe.nom_en_gb},Fe.id))]}),m.jsx("input",{className:"border p-2 rounded",name:"operator.address",placeholder:"Operator Address",onChange:Y}),m.jsx("input",{className:"border p-2 rounded",name:"operator.email",placeholder:"Operator Email",type:"email",required:!0,onChange:Y,value:s.operator.email}),m.jsx("input",{className:"border p-2 rounded",name:"operator.phone",placeholder:"Phone Number",type:"tel",pattern:"(\\+\\d{1,3}\\s?)?(\\(\\d{3}\\)|\\d{3})[-\\s]?\\d{3}[-\\s]?\\d{4}",title:"Phone format: +123 123-456-7890 or (123) 456-7890",onChange:Y,value:s.operator.phone}),m.jsxs("select",{className:"border p-2 rounded",name:"countryOfActivity",onChange:Y,value:s.countryOfActivity,children:[m.jsx("option",{value:"",children:"Select Country of Activity"}),$.map(Fe=>m.jsx("option",{value:Fe,children:Fe},Fe))]}),m.jsx("textarea",{className:"w-full border p-2 rounded",rows:"4",placeholder:"GeoJSON",value:c,onChange:Fe=>u(Fe.target.value)}),m.jsx("label",{className:"block mb-2 font-semibold",children:"Import a GeoJSON (.json, .geojson) file"}),m.jsx("input",{type:"file",accept:".json, .geojson",className:"mb-4",onChange:Fe=>{const it=Fe.target.files[0];if(!it)return;const ie=new FileReader;ie.onload=le=>{try{const fe=JSON.parse(le.target.result);u(JSON.stringify(fe,null,2))}catch{alert("The JSON file is invalid.")}},ie.readAsText(it)}}),m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:s.geoLocationConfidential,onChange:()=>o(Fe=>({...Fe,geoLocationConfidential:!Fe.geoLocationConfidential}))}),m.jsx("span",{children:"Geo Location Confidential"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:Le,children:"Submit"}),m.jsx("button",{className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700",onClick:_e,children:"Amend"}),m.jsx("input",{className:"border p-2 rounded",placeholder:"DDS Identifier",value:i,onChange:Fe=>A(Fe.target.value)}),m.jsx("button",{className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",onClick:Qe,children:"Retract"}),m.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",onClick:De,children:"Get by Internal Ref"}),m.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",onClick:Be,children:"Get by DDS ID"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx("input",{className:"border p-2 rounded",placeholder:"Reference",value:g,onChange:Fe=>C(Fe.target.value)}),m.jsx("input",{className:"border p-2 rounded",placeholder:"Verification Code",value:B,onChange:Fe=>S(Fe.target.value)}),m.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 col-span-2",onClick:()=>ce(!0),children:"Verify"})]}),R&&m.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-x-auto",children:JSON.stringify(R,null,2)}),((ze=R==null?void 0:R.local_data)==null?void 0:ze.producers_json)&&m.jsxs("div",{className:"mt-4",children:[m.jsx("h4",{className:"text-lg font-bold",children:"Local Producers"}),m.jsx("ul",{className:"list-disc list-inside",children:JSON.parse(R.local_data.producers_json).map((Fe,it)=>m.jsxs("li",{children:[m.jsx("strong",{children:"Name:"})," ",Fe.name," - ",m.jsx("strong",{children:"Country:"})," ",Fe.country]},it))})]})]}),R&&(!P||P&&t)&&m.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl shadow space-y-4 h-full overflow-auto",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Result"}),m.jsx(tBe,{data:R,referenceNumber:g,verificationCode:B,showPreview:r})]}),K&&m.jsx(R4,{isOpen:K,onClose:()=>ce(!1),featureName:me,phone:s.operator.phone,onPaymentSuccess:()=>{ce(!1),xe(),e(!0),n(!0)}})]})};function d3e(t,e=null){const[r,n]=ve.useState(!1),[s,o]=ve.useState(!0),[c,u]=ve.useState(null);return console.log("ato amin use feature access hook ",t),ve.useEffect(()=>{(async()=>{var A,g;try{let C=`/api/payments/access/${t}`;e&&(C+=`?phone_number=${encodeURIComponent(e)}`);const B=await Mr.get(C);n(B.data.access)}catch(C){n(!1),u(((g=(A=C.response)==null?void 0:A.data)==null?void 0:g.error)||"Error during access verification.")}finally{o(!1)}})()},[t,e]),{hasAccess:r,loading:s,error:c}}function f3e(t){ve.useEffect(()=>{if(!t)return;const e=`used_${t}`,r=sessionStorage.getItem(e);if(r&&(Date.now()-parseInt(r,10))/6e4<2){console.log(" Accs rcent, pas besoin de reconsommer.");return}Mr.post(`/api/payments/consume/${t}`).then(()=>{console.log(" Usage consomm."),sessionStorage.setItem(e,Date.now().toString())}).catch(s=>{var o,c;console.error(" Erreur de consommation :",((c=(o=s.response)==null?void 0:o.data)==null?void 0:c.error)||s.message)})},[t])}function p3e({feature:t,children:e}){const{hasAccess:r,loading:n}=d3e(t);return f3e(r?t:null),n?m.jsx("p",{className:"p-4",children:"Chargement des autorisations..."}):r?e:m.jsx(Jv,{to:"/payment-required",state:{featureName:t},replace:!0})}function A3e(){var c;const t=B1(),e=Ju(),[r,n]=ve.useState(!1),s=((c=e.state)==null?void 0:c.featureName)||"unknown-feature";console.log("ato amin payementrequired",s);const o=()=>{var u;t(((u=e.state)==null?void 0:u.from)||"/")};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center flex-col text-center p-4",children:[m.jsx("h1",{className:"text-2xl font-semibold text-red-600 mb-4",children:"Restricted access"}),m.jsx("p",{className:"text-gray-700 mb-6",children:"This feature requires payment to access."}),m.jsxs("div",{className:"space-x-4",children:[m.jsx("button",{onClick:()=>t(-1),className:"bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600",children:"Back"}),m.jsx("button",{onClick:()=>n(!0),className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Pay now"})]}),r&&m.jsx(R4,{isOpen:r,onClose:()=>n(!1),onSuccess:o,featureName:s})]})}const m3e=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState([]),[s,o]=ve.useState({feature_name:"",price:"",duration_days:"",usage_limit:""}),[c,u]=ve.useState({user_id:"",guest_phone_number:"",feature_name:"",txn_id:"",payment_status:"pending",access_expires_at:"",usage_left:""}),[i,A]=ve.useState(null),[g,C]=ve.useState(null);ve.useEffect(()=>{B(),S()},[]);const B=async()=>{try{const J=await Mr.get("/api/feature/price/");e(J.data)}catch(J){console.error("Error fetching feature prices:",J)}},S=async()=>{try{const J=await Mr.get("/api/feature/access/");n(J.data)}catch(J){console.error("Error fetching access records:",J)}},P=J=>{const{name:te,value:ue}=J.target;o(oe=>({...oe,[te]:ue}))},j=async J=>{J.preventDefault();try{i?await Mr.put(`/api/feature/price/${i}/edit`,s):await Mr.post("/api/feature/price/create",s),o({feature_name:"",price:""}),A(null),B()}catch(te){console.error("Error saving feature price:",te)}},R=J=>{o({feature_name:J.feature_name,price:J.price,duration_days:J.duration_days??"",usage_limit:J.usage_limit??""}),A(J.id)},N=J=>{u({...J}),C(J.id)},U=async J=>{try{await Mr.delete(`/api/feature/price/${J}/delete`),B()}catch(te){console.error("Error deleting feature price:",te)}},$=async J=>{try{await Mr.delete(`/api/feature/access/${J}/delete`),S()}catch(te){console.error("Error deleting access:",te)}};return m.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl mb-4",children:"Feature Manager"}),m.jsxs("form",{onSubmit:j,className:"mb-4",children:[m.jsx("input",{type:"text",name:"feature_name",value:s.feature_name,onChange:P,placeholder:"Feature Name",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"number",name:"price",value:s.price,onChange:P,placeholder:"Price",className:"border p-2 rounded mr-2",required:!0}),m.jsx("input",{type:"number",name:"duration_days",value:s.duration_days,onChange:P,placeholder:"Duration in days",className:"border p-2 rounded mr-2"}),m.jsx("input",{type:"number",name:"usage_limit",value:s.usage_limit,onChange:P,placeholder:"Usage Limit",className:"border p-2 rounded mr-2"}),m.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:i?"Update Feature":"Add Feature"})]}),m.jsx("h3",{className:"text-xl mt-6",children:"Feature Prices"}),m.jsx("ul",{children:t.map(J=>m.jsxs("li",{className:"flex justify-between items-center border-b py-2",children:[m.jsxs("span",{children:[J.feature_name," - $",J.price]}),m.jsxs("div",{children:[m.jsx("button",{onClick:()=>R(J),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>U(J.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},J.id))}),m.jsx("h3",{className:"text-xl mt-6",children:"Access Records"}),m.jsx("ul",{children:r.map(J=>m.jsxs("li",{className:"flex flex-col border-b py-2",children:[m.jsxs("span",{children:[m.jsx("strong",{children:"Feature:"})," ",J.feature_name," | ",m.jsx("strong",{children:"Status:"})," ",J.payment_status," | ",m.jsx("strong",{children:"Txn:"})," ",J.txn_id]}),m.jsxs("div",{className:"mt-1",children:[m.jsx("button",{onClick:()=>N(J),className:"text-yellow-500 hover:text-yellow-700 mr-2",children:"Edit"}),m.jsx("button",{onClick:()=>$(J.id),className:"text-red-500 hover:text-red-700",children:"Delete"})]})]},J.id))})]})},g3e=t=>new Promise(e=>setTimeout(e,t)),y3e=t=>{const[e,r]=ve.useState({phone:"",email:"",agent_id:""}),[n,s]=ve.useState(!1),o=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),c=()=>e.phone&&e.phone.trim()!==""&&e.email&&e.email.trim()!==""&&o(e.email);return{userInfo:e,setUserInfo:r,handleUserInfoSubmit:async i=>{i.preventDefault(),c()&&(s(!0),await g3e(2e3),localStorage.setItem("guest_phone",e.phone),localStorage.setItem("guest_email",e.email),e.agent_id&&localStorage.setItem("agent_id",e.agent_id),t(4),s(!1))},loading:n,isUserInfoValid:c}},v3e=()=>{const[t,e]=ve.useState({eudr:null,carbon:null,geojson:null});return{files:t,handleFileChange:(n,s)=>{const o=s.target.files[0];e(c=>({...c,[n]:o}))}}},x3e=t=>new Promise(e=>setTimeout(e,t)),_3e=({files:t,geojson:e,userInfo:r,setStep:n,reportRefs:s})=>{const[o,c]=ve.useState({eudr:null,carbon:null}),[u,i]=ve.useState(!1),[A,g]=ve.useState({eudr:!1,carbon:!1});return{reports:o,loading:u,showPaymentModal:A,setShowPaymentModal:g,handleReportReady:async B=>{var R;const S=B==="reporteudrguest"?"eudr":"carbon";let P=t[S]||t.geojson;if(!P&&e){console.log(" GeoJSON brut:",e);let N;e.type==="FeatureCollection"?N=e.features[0].geometry:e.type==="Feature"?N=e.geometry:N=e;const U={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:N}]};console.log(" GeoJSON format:",JSON.stringify(U,null,2));const $=new Blob([JSON.stringify(U,null,2)],{type:"application/json"});P=new File([$],"drawn-polygon.geojson",{type:"application/json"})}if(!P){console.error(" Aucun fichier ou geojson disponible");return}console.log(" Fichier  envoyer:",P.name,P.type);const j=new FormData;j.append("file",P),i(!0),await x3e(2e3);try{const U=(await Mr.post(`/api/gfw/Geojson/${B==="reportcarbonguest"?"CarbonReportFromFile":"ReportFromFile"}`,j,{headers:{"X-Guest-ID":localStorage.getItem("guest_id"),"X-Guest-Phone":r.phone}})).data.report;c($=>({...$,[S]:U})),n(5)}catch(N){console.error(" Erreur lors de la gnration du rapport :",((R=N.response)==null?void 0:R.data)||N)}finally{i(!1)}}}},b3e=()=>{const[t,e]=ve.useState(!1),[r,n]=ve.useState(0),[s,o]=ve.useState([]),[c,u]=ve.useState(!0);return ve.useEffect(()=>{localStorage.getItem("eudr_tutorial_completed")&&u(!1)},[]),{isActive:t,currentStep:r,completedSteps:s,showTutorial:c,startTutorial:()=>{e(!0),n(0)},nextStep:()=>{o(S=>[...new Set([...S,r])]),n(S=>S+1)},prevStep:()=>{n(S=>Math.max(0,S-1))},skipTutorial:()=>{e(!1),localStorage.setItem("eudr_tutorial_completed","true"),u(!1)},resetTutorial:()=>{n(0),o([]),localStorage.removeItem("eudr_tutorial_completed"),u(!0)}}},ph=[{step:1,title:"Welcome! Let's Create Your EUDR Report",description:"This guide will walk you through creating your EUDR compliance report step by step. You'll define your farm location, choose your report type, and receive your complete analysis.",highlight:"welcome",targetStep:1,action:"Start",tips:["The process takes about 5 minutes","You can go back at any time","Your data is secure"]},{step:2,title:"Step 1: Locate Your Farm",description:"You have two options to define your area: upload an existing GeoJSON file OR create your polygon directly on the map.",highlight:"upload",targetStep:1,action:"Got it",tips:["Option A: Upload an existing .geojson file","Option B: Create your polygon with the interactive map below","Choose the method that's most convenient for you"]},{step:3,title:"Choose Your Creation Mode",description:"Before creating your polygon, you must choose your working mode. Two options are available:",highlight:"mode-toggle",targetStep:1,action:"Continue",tips:["Draw Mode: Draw directly on the map by clicking","Point Mode: Search for coordinates and add them point by point","The button is in the right panel"],detailedSteps:[{title:"Draw Mode (default)",description:"Click successively on the map to create the vertices of your polygon. Double-click to finish."},{title:"Point Mode (recommended for precise coordinates)",description:"Search for coordinates, then click 'Add Point' to add them to your polygon."}]},{step:4,title:"Search Your Location",description:"Use the search bar at the top of the map to find your location or enter precise coordinates.",highlight:"search-bar",targetStep:1,action:"Next",tips:["Place search: type 'Kampala' or your city name","Coordinate search: 'Lat: 0.3476, Lng: 32.5825'","Simplified format: '0.3476, 32.5825'","A red marker will appear on your search"]},{step:5,title:"Point Mode: Adding Points",description:"In Point Mode, after searching for a location, an 'Add Point' button appears on the marker. Click it to add this point to your polygon.",highlight:"point-mode-info",targetStep:1,action:"Understood",gifUrl:"/gifs/point-mode-demo.gif",tips:["Search for your first field corner","Click the red marker to see the 'Add Point' button","Repeat for each corner (minimum 3 points)","The polygon forms automatically after 3 points"]},{step:6,title:"Draw Mode: Drawing on the Map",description:"In Draw Mode, use the pencil tool to draw your polygon directly on the map.",highlight:"draw-controls",targetStep:1,action:"Next",gifUrl:"/gifs/draw-mode-demo.gif",tips:["Activate the pencil (polygon) tool at the top left of the map","Click on the map to create points","Double-click to close the polygon","Use the trash icon to delete and start over"]},{step:7,title:"Step 2: Choose Your Report Type",description:"Select the report(s) you need:",highlight:"report-type",targetStep:2,action:"Next",tips:["EUDR Report: European regulatory compliance analysis","Carbon Report: Carbon stock estimation","You can select both reports"]},{step:8,title:"Step 3: Your Information",description:"Enter your contact details to receive your report:",highlight:"user-info",targetStep:3,action:"Next",tips:["Phone: Required for mobile payment (format: 256XXXXXXXXX)","Email: To receive your report by email","Agent ID: Your unique identifier"]},{step:9,title:"Step 4: Payment",description:"Finalize your order by proceeding with secure payment:",highlight:"payment",targetStep:4,action:"Next",tips:["Secure payment via mobile money","Transparent pricing displayed","Instant confirmation"]},{step:10,title:"Step 5: Your Report",description:"View and download your analysis report:",highlight:"reports",targetStep:5,action:"Finish",tips:["Detailed report with mapping","Downloadable data in PDF","Stored in your client area"]}],w3e=({initialCenter:t=[32.5825,.3476],zoom:e=8,onChange:r,highlightModeToggle:n="",highlightSearchBar:s="",highlightPointModeInfo:o="",highlightDrawControls:c=""})=>{const u=ve.useRef(null),i=ve.useRef(null),A=ve.useRef(null),g=ve.useRef(null),[C,B]=ve.useState(null),[S,P]=ve.useState(null),[j,R]=ve.useState([]),[N,U]=ve.useState(!1),[$,J]=ve.useState([]),[te,ue]=ve.useState(null),[oe,K]=ve.useState([]),ce=ve.useRef(N);ve.useEffect(()=>{ce.current=N},[N]),ve.useEffect(()=>{is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q";const De=new is.Map({container:u.current,style:"mapbox://styles/mapbox/satellite-v9",center:t,zoom:e});i.current=De;const Be=new LG({displayControlsDefault:!1,controls:{polygon:!0,trash:!0}});De.addControl(Be),A.current=Be;const xe=it=>{const ie=it.match(/^[ ]*(?:Lat: )?(-?\d+\.?\d*)[, ]+(?:Lng: )?(-?\d+\.?\d*)[ ]*$/i);if(!ie)return null;const le=Number(ie[1]),fe=Number(ie[2]);return le<-90||le>90||fe<-180||fe>180?null:[{center:[fe,le],geometry:{type:"Point",coordinates:[fe,le]},place_name:`Lat: ${le}, Lng: ${fe}`,place_type:["coordinate"],properties:{},type:"Feature"}]},ze=new gC({accessToken:is.accessToken,mapboxgl:is,placeholder:"Search for places or coordinates (Lat: -12.34, Lng: 56.78)",localGeocoder:xe,reverseGeocode:!0});De.addControl(ze),g.current=ze,ze.on("result",it=>{const{geometry:ie,place_name:le}=it.result,[fe,be]=ie.coordinates;te&&te.remove();const He=new is.Marker({color:"#ff6b6b"}).setLngLat([fe,be]).addTo(De),Je=new is.Popup({offset:25,maxWidth:"250px"}).setHTML(`
          <div style="text-align: center; padding: 5px; font-size: 12px;">
            <p style="margin: 0; color: #666;">
              ${fe.toFixed(4)}, ${be.toFixed(4)}
            </p>
            ${ce.current?`<button onclick="window.addPolygonPoint(${fe}, ${be})" 
                      style="background: #4CAF50; color: white; border: none; 
                             padding: 6px 12px; border-radius: 4px; cursor: pointer; 
                             margin-top: 8px; font-size: 11px; font-weight: bold;">
                 Add Point
              </button>`:""}
          </div>
        `);He.setPopup(Je),Je.addTo(De),ue(He)});const Fe=()=>{const it=Be.getAll();if(it.features.length>0){const ie=it.features[0],le=Ad(ie);P(Math.round(le)),B(ie),r&&r(ie)}else P(null),B(null),r&&r(null)};return De.on("draw.create",Fe),De.on("draw.update",Fe),De.on("draw.delete",Fe),()=>{oe.forEach(it=>it.remove()),te&&te.remove(),De.remove()}},[]),ve.useEffect(()=>(window.addPolygonPoint=(De,Be)=>{const xe=[...$,[De,Be]];J(xe);const ze=new is.Marker({color:"#4CAF50",scale:.8}).setLngLat([De,Be]).addTo(i.current);if(K(Fe=>[...Fe,ze]),te&&(te.remove(),ue(null)),xe.length>=3){const Fe=[...xe,xe[0]],it={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Fe]}};A.current.deleteAll(),A.current.add(it);const ie=Ad(it);P(Math.round(ie)),B(it),r&&r(it)}},()=>{delete window.addPolygonPoint}),[$,te,r]);const me=()=>{U(!N),N&&Z()},Z=()=>{J([]),oe.forEach(De=>De.remove()),K([]),te&&(te.remove(),ue(null)),A.current.deleteAll(),P(null),B(null),r&&r(null)},Y=()=>{R([...j,{name:"",value:""}])},Le=(De,Be,xe)=>{const ze=[...j];ze[De][Be]=xe,R(ze),Qe(ze)},_e=De=>{const Be=j.filter((xe,ze)=>ze!==De);R(Be),Qe(Be)},Qe=De=>{if(C){const Be={...C,properties:Object.fromEntries(De.map(xe=>[xe.name||"undefined",xe.value]))};B(Be),r&&r(Be)}};return m.jsxs("div",{className:"relative h-[500px] w-full flex",children:[m.jsx("div",{ref:u,className:`flex-1 rounded-xl shadow-md relative ${c}`}),s&&m.jsx("div",{className:`absolute top-0 left-0 w-full pointer-events-none z-[9999] ${s}`,children:m.jsx("div",{className:"h-12 mx-4 mt-4"})}),m.jsxs("div",{className:"w-80 bg-white border-l p-4 overflow-y-auto",children:[m.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Polygon Creator"}),m.jsxs("div",{className:`mb-4 p-3 bg-gray-50 rounded ${n}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-sm font-medium",children:"Construction Mode:"}),m.jsx("button",{onClick:me,className:`px-3 py-1 rounded text-sm font-medium transition-colors ${N?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:N?" Point Mode":" Draw Mode"})]}),N&&m.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[m.jsx("p",{children:" Search for coordinates"}),m.jsx("p",{children:' Click "Add Point" on markers'}),m.jsx("p",{children:" Need 3+ points to create polygon"}),m.jsxs("p",{className:"text-green-600 font-medium",children:["Points added: ",$.length]})]}),N&&$.length>0&&m.jsx("button",{onClick:Z,className:"w-full mt-2 bg-red-500 text-white py-1 px-2 rounded text-sm hover:bg-red-600",children:" Reset Points"})]}),m.jsxs("div",{className:`mb-4 p-2 bg-blue-50 rounded text-sm text-blue-800 ${o}`,children:[m.jsx("strong",{children:"Search tips:"}),m.jsx("br",{}),' Place names: "Paris", "New York"',m.jsx("br",{}),' Coordinates: "Lat: -12.34, Lng: 56.78"',m.jsx("br",{}),' Or simply: "-12.34, 56.78"',N&&m.jsxs(m.Fragment,{children:[m.jsx("br",{}),m.jsx("br",{}),m.jsx("strong",{className:"text-green-700",children:"Point Mode Active:"}),m.jsx("br",{}),' Search will show "Add Point" button',m.jsx("br",{})," Click it to add each corner",m.jsx("br",{})," Polygon forms after 3+ points"]})]}),N&&$.length>0&&m.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Polygon Points:"}),m.jsx("div",{className:"max-h-32 overflow-y-auto",children:$.map((De,Be)=>m.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:[Be+1,". Lng: ",De[0].toFixed(4),", Lat: ",De[1].toFixed(4)]},Be))})]}),m.jsxs("div",{className:"border-t pt-3",children:[m.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Properties:"}),j.map((De,Be)=>m.jsxs("div",{className:"mb-3 border-b pb-2",children:[m.jsx("input",{type:"text",placeholder:"Property Name",value:De.name,onChange:xe=>Le(Be,"name",xe.target.value),className:"border p-2 rounded w-full mb-1 text-sm"}),m.jsx("input",{type:"text",placeholder:"Property Value",value:De.value,onChange:xe=>Le(Be,"value",xe.target.value),className:"border p-2 rounded w-full mb-1 text-sm"}),m.jsx("button",{onClick:()=>_e(Be),className:"text-red-600 text-sm hover:underline",children:" Remove"})]},Be)),m.jsx("button",{onClick:Y,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 mb-4",children:" Add property"})]}),S&&m.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded",children:[m.jsxs("div",{className:"text-sm text-gray-700",children:[m.jsx("strong",{children:"Area:"})," ",S.toLocaleString()," m"]}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["(",(S/1e4).toFixed(2)," hectares)"]})]}),C&&m.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded",children:[m.jsx("div",{className:"text-sm text-gray-700 mb-2",children:m.jsx("strong",{children:"Polygon completed!"})}),m.jsxs("div",{className:"text-xs text-gray-500",children:["Vertices: ",C.geometry.coordinates[0].length-1," points"]})]})]})]})},C3e=({title:t,onFileChange:e,onUpload:r,loading:n,inputName:s})=>m.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 transition-transform duration-300 transform hover:scale-[1.01]",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:t}),m.jsx("input",{type:"file",accept:".geojson,application/geo+json",name:s,onChange:o=>e(s,o),className:"mb-4 block w-full border border-gray-300 rounded px-3 py-2 text-sm"}),m.jsx("button",{onClick:()=>r(s),className:`w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition duration-300 flex items-center justify-center gap-2 ${n?"opacity-70 cursor-not-allowed":""}`,disabled:n,children:n?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),m.jsx("span",{children:"Loading..."})]}):"Send and analyze"})]}),S3e=({files:t,onFileChange:e,geojson:r,setGeojson:n,onNext:s,canContinue:o=!1,highlightUpload:c="",highlightMap:u="",highlightModeToggle:i="",highlightSearchBar:A="",highlightPointModeInfo:g="",highlightDrawControls:C=""})=>{const B=S=>{n(S),localStorage.setItem("polygon_geojson",JSON.stringify(S))};return m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:c,children:m.jsx(C3e,{inputName:"geojson",title:"Upload your farm GeoJSON file or create one.",onFileChange:e})}),m.jsx("div",{className:u,children:m.jsx(w3e,{onChange:B,highlightModeToggle:i,highlightSearchBar:A,highlightPointModeInfo:g,highlightDrawControls:C})}),m.jsx("button",{onClick:s,disabled:!o,className:`px-4 py-2 rounded text-white transition-all ${o?"bg-green-600 hover:bg-green-700 cursor-pointer":"bg-gray-400 cursor-not-allowed opacity-60"}`,title:o?"":"Please upload a file or create a polygon first",children:"Next "})]})},B3e=({onSelect:t,highlightReportType:e=""})=>{const r=[{id:"reporteudrguest",title:"Farm (EUDR) Report",description:"Get a compliance report for your farm according to EUDR requirements.",color:"blue",icon:m.jsx(Y1e,{className:"w-8 h-8 text-blue-600"})},{id:"reportcarbonguest",title:"Carbon Report",description:"Analyze your farm's carbon footprint and environmental impact.",color:"green",icon:m.jsx(J1e,{className:"w-8 h-8 text-green-600"})}];return m.jsxs("div",{className:"space-y-6 text-center",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Choose your report type"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"Select the type of report you would like to generate."}),m.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-4 ${e}`,children:r.map(n=>m.jsxs("button",{onClick:()=>t(n.id),className:"p-6 rounded-2xl shadow-md border border-gray-200 hover:shadow-lg hover:scale-[1.02] transform transition bg-white text-left",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3 justify-center",children:[n.icon,m.jsx("h3",{className:`font-semibold text-${n.color}-700 text-lg`,children:n.title})]}),m.jsx("p",{className:"text-sm text-gray-600",children:n.description})]},n.id))})]})},E3e=({userInfo:t,setUserInfo:e,onSubmit:r,loading:n,isValid:s=!1,highlightUserInfo:o=""})=>{const c=t.phone&&t.phone.trim()!=="",u=t.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email);return m.jsxs("div",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center",children:"Enter Your Contact Information"}),m.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Please provide your phone number (starting with 256) and email address."}),m.jsxs("form",{onSubmit:r,className:`bg-white p-6 rounded-2xl shadow-md max-w-md mx-auto space-y-4 ${o}`,children:[m.jsxs("div",{className:"text-left",children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Agent ID ",m.jsx("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),m.jsx("input",{type:"text",value:t.agent_id,onChange:i=>e(A=>({...A,agent_id:i.target.value})),placeholder:"e.g. 123XXXXXXXXX",className:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),m.jsxs("div",{className:"text-left",children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between",children:[m.jsxs("span",{children:["Phone Number ",m.jsx("span",{className:"text-red-500",children:"*"})]}),t.phone&&(c?m.jsx(j7,{className:"w-4 h-4 text-green-500"}):m.jsx(_4,{className:"w-4 h-4 text-red-500"}))]}),m.jsx("input",{type:"text",value:t.phone,onChange:i=>e(A=>({...A,phone:i.target.value})),placeholder:"e.g. 256XXXXXXXXX",className:`block w-full p-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors ${t.phone?c?"border-green-300 focus:ring-green-500 bg-green-50/30":"border-red-300 focus:ring-red-500 bg-red-50/30":"border-gray-300 focus:ring-blue-500"}`,required:!0}),t.phone&&!c&&m.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Phone number is required"})]}),m.jsxs("div",{className:"text-left",children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center justify-between",children:[m.jsxs("span",{children:["Email Address ",m.jsx("span",{className:"text-red-500",children:"*"})]}),t.email&&(u?m.jsx(j7,{className:"w-4 h-4 text-green-500"}):m.jsx(_4,{className:"w-4 h-4 text-red-500"}))]}),m.jsx("input",{type:"email",value:t.email,onChange:i=>e(A=>({...A,email:i.target.value})),placeholder:"example@email.com",className:`block w-full p-2 border rounded-lg focus:ring-2 focus:outline-none transition-colors ${t.email?u?"border-green-300 focus:ring-green-500 bg-green-50/30":"border-red-300 focus:ring-red-500 bg-red-50/30":"border-gray-300 focus:ring-blue-500"}`,required:!0}),t.email&&!u&&m.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid email address"})]}),m.jsx("button",{type:"submit",disabled:n||!s,className:`w-full py-2 px-4 rounded-lg text-white font-semibold transition-all ${n||!s?"bg-gray-400 cursor-not-allowed opacity-60":"bg-green-600 hover:bg-green-700"}`,title:s?"":"Please fill in all required fields correctly",children:n?"Processing...":"Continue to Payment "})]})]})},T3e=({selectedFeature:t,phone:e,setShowPaymentModal:r,loading:n,highlightPayment:s=""})=>{const c={reporteudrguest:{title:"Farm (EUDR) Report",description:"A compliance report for your farm according to EUDR requirements.",color:"blue"},reportcarbonguest:{title:"Carbon Report",description:"An analysis of your farm's carbon footprint and environmental impact.",color:"green"}}[t];return m.jsxs("div",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center",children:"Unlock Your Report"}),m.jsxs("div",{className:`bg-white p-6 rounded-2xl shadow-md max-w-md mx-auto text-center space-y-4 ${s}`,children:[m.jsxs("p",{className:"text-sm text-gray-500",children:["You are about to purchase the ",m.jsx("span",{className:`font-semibold text-${c.color}-600`,children:c.title}),"."]}),m.jsx("p",{className:"text-gray-600 text-sm",children:c.description}),m.jsx("button",{disabled:n,onClick:()=>{t==="reporteudrguest"?r({eudr:!0,carbon:!1}):t==="reportcarbonguest"&&r({carbon:!0,eudr:!1})},className:`w-full py-2 px-4 rounded-lg text-white font-semibold ${n?"bg-gray-400 cursor-not-allowed":`bg-${c.color}-600 hover:bg-${c.color}-700`}`,children:n?"Processing...":"Pay Now"}),m.jsxs("p",{className:"text-xs text-gray-400",children:["Linked to phone number: ",m.jsx("span",{className:"font-medium",children:e})]})]})]})},I3e=({results:t,reportRef:e})=>{var i,A,g,C,B,S,P,j,R,N,U;const r=((A=(i=t["forest carbon gross emissions"])==null?void 0:i[0])==null?void 0:A.data_fields)||{},n=((C=(g=t["forest carbon gross removals"])==null?void 0:g[0])==null?void 0:C.data_fields)||{},s=((S=(B=t["forest carbon net flux"])==null?void 0:B[0])==null?void 0:S.data_fields)||{};(j=(P=t["full extent aboveground carbon potential sequestration"])==null?void 0:P[0])!=null&&j.data_fields;const o={labels:["Carbon Gross Emissions","Carbon Gross Removals","Carbon Net Flux","Carbon Sequestration"],datasets:[{data:[r.gfw_forest_carbon_gross_emissions__Mg_CO2e||0,n.gfw_forest_carbon_gross_removals__Mg_CO2e||0,s.gfw_forest_carbon_net_flux__Mg_CO2e||0],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#8BC34A"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#8BC34A"]}]},c={...r,...n,...s},u=(U=(N=(R=t["forest carbon gross emissions"])==null?void 0:R[0])==null?void 0:N.coordinates)==null?void 0:U[0];return m.jsxs("div",{ref:e,className:"carbon-report-a4",children:[m.jsxs("div",{className:"report-header-wrapper",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("div",{style:{width:"120px",height:"120px",position:"relative",display:"flex",alignItems:"center"},children:m.jsx("div",{className:"bg-white rounded-full ",children:m.jsx("img",{src:EC,alt:"Parrot",className:"w-24 h-24 rounded-full object-cover"})})}),m.jsxs("div",{className:"report-header",style:{textAlign:"center"},children:[m.jsx("h2",{children:"Carbon Emissions Assessment Summary"}),m.jsx("p",{className:"subtitle"})]}),m.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"report-logo",style:{width:"120px",height:"120px",objectFit:"contain"}})]}),m.jsxs("div",{className:"report-body",children:[m.jsx("h3",{children:"Carbon Assessment Summary"}),Ave(c),m.jsxs("div",{className:"report-section",children:[m.jsx("h4",{children:"Carbon Emissions and Sequestration"}),m.jsx("div",{style:{width:"100%",maxWidth:"400px",height:"150px",margin:"0 auto"},children:m.jsx(TF,{data:o,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}}}})})]}),u&&m.jsxs("div",{className:"report-section",children:[m.jsx("h4",{children:"Plot Map"}),m.jsx("img",{src:q$(u),alt:"Map",className:"report-map"})]})]}),m.jsx("div",{className:"report-footer",children:m.jsx("p",{children:"Generated by NKUSU | AGRIYIELDS"})})]})},L3e=({reports:t,reportRefs:e,highlightReports:r=""})=>m.jsxs("div",{className:"space-y-6",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center",children:"Your Reports"}),m.jsxs("div",{className:`flex flex-col items-center fade-in space-y-8 ${r}`,children:[t.eudr&&m.jsxs("div",{className:"w-full",children:[m.jsx($$,{results:t.eudr,reportRef:e.eudr}),m.jsx("button",{onClick:async()=>{const n=await FI(e.eudr,"eudr");if(n){const s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download="EUDR_Report.pdf",o.click()}},className:"bg-blue-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-blue-700 transition duration-300 w-full",children:" Download the EUDR PDF"})]}),t.carbon&&m.jsxs("div",{className:"w-full",children:[m.jsx(I3e,{results:t.carbon,reportRef:e.carbon}),m.jsx("button",{onClick:async()=>{const n=await FI(e.carbon,"carbon");if(n){const s=URL.createObjectURL(n),o=document.createElement("a");o.href=s,o.download="Carbon_Report.pdf",o.click()}},className:"bg-green-500 text-white px-6 py-3 rounded-md mt-6 hover:bg-green-700 transition duration-300 w-full",children:" Download the Carbon PDF"})]})]})]}),sp=({step:t,onNext:e,onPrev:r,onSkip:n,isFirst:s,isLast:o,totalSteps:c,currentIndex:u,position:i="top"})=>{if(t.highlight==="welcome")return m.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[10000]",style:{animation:"fadeIn 0.3s ease-out"},children:[m.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg shadow-2xl p-6 text-white border-2 border-blue-400 max-w-xl mx-4",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-white text-blue-600 rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm",children:t.step}),m.jsx("h3",{className:"font-bold text-lg",children:t.title})]}),m.jsx("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors",children:m.jsx(K6,{className:"w-5 h-5"})})]}),m.jsx("p",{className:"text-white/95 mb-4 text-sm leading-relaxed",children:t.description}),t.gifUrl&&m.jsx("div",{className:"mb-4 rounded-lg overflow-hidden border-2 border-white/20 bg-white/5",children:m.jsx("img",{src:t.gifUrl,alt:`${t.title} demonstration`,className:"w-full h-auto",loading:"lazy"})}),t.tips&&m.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-4 backdrop-blur",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(_4,{className:"w-4 h-4 text-yellow-300"}),m.jsx("span",{className:"font-semibold text-sm",children:"Practical tips:"})]}),m.jsx("ul",{className:"space-y-1.5",children:t.tips.map((C,B)=>m.jsxs("li",{className:"text-xs text-white/90 flex items-start gap-2",children:[m.jsx("span",{className:"text-yellow-300 mt-0.5",children:""}),m.jsx("span",{children:C})]},B))})]}),m.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[m.jsxs("button",{onClick:r,disabled:s,className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${s?"text-white/40 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:[m.jsx(q6,{className:"w-4 h-4"}),"Previous"]}),m.jsxs("button",{onClick:e,className:"flex items-center gap-1 px-4 py-1.5 bg-white text-blue-600 rounded font-semibold text-sm hover:bg-blue-50 transition-colors",children:[t.action,m.jsx($6,{className:"w-4 h-4"})]})]}),m.jsx("div",{className:"mt-4 flex items-center justify-center gap-1.5",children:Array.from({length:c}).map((C,B)=>m.jsx("div",{className:`h-1.5 rounded-full transition-all ${B<=u?"w-8 bg-white":"w-1.5 bg-white/30"}`},B))})]}),m.jsx("style",{children:`
          @keyframes fadeIn {
            from {
              opacity: 0;
            }
            to {
              opacity: 1;
            }
          }
        `})]});const g={top:"bottom-full mb-4",bottom:"top-full mt-4",left:"right-full mr-4",right:"left-full ml-4"};return m.jsxs("div",{className:`absolute ${g[i]} left-1/2 -translate-x-1/2 z-[10000] w-96`,style:{animation:"fadeIn 0.3s ease-out",pointerEvents:"auto"},children:[m.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg shadow-2xl p-6 text-white border-2 border-blue-400",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"bg-white text-blue-600 rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm",children:t.step}),m.jsx("h3",{className:"font-bold text-lg",children:t.title})]}),m.jsx("button",{onClick:n,className:"text-white/80 hover:text-white transition-colors",children:m.jsx(K6,{className:"w-5 h-5"})})]}),m.jsx("p",{className:"text-white/95 mb-4 text-sm leading-relaxed",children:t.description}),t.gifUrl&&m.jsx("div",{className:"mb-4 rounded-lg overflow-hidden border-2 border-white/20 bg-white/5",children:m.jsx("img",{src:t.gifUrl,alt:`${t.title} demonstration`,className:"w-full h-auto",loading:"lazy"})}),t.detailedSteps&&m.jsx("div",{className:"mb-4 space-y-2",children:t.detailedSteps.map((C,B)=>m.jsxs("div",{className:"bg-white/10 rounded p-3 backdrop-blur",children:[m.jsx("p",{className:"font-semibold text-sm mb-1",children:C.title}),m.jsx("p",{className:"text-xs text-white/80",children:C.description})]},B))}),t.tips&&m.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-4 backdrop-blur",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(_4,{className:"w-4 h-4 text-yellow-300"}),m.jsx("span",{className:"font-semibold text-sm",children:"Practical tips:"})]}),m.jsx("ul",{className:"space-y-1.5",children:t.tips.map((C,B)=>m.jsxs("li",{className:"text-xs text-white/90 flex items-start gap-2",children:[m.jsx("span",{className:"text-yellow-300 mt-0.5",children:""}),m.jsx("span",{children:C})]},B))})]}),m.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/20",children:[m.jsxs("button",{onClick:r,disabled:s,className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${s?"text-white/40 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:[m.jsx(q6,{className:"w-4 h-4"}),"Previous"]}),m.jsxs("button",{onClick:e,className:"flex items-center gap-1 px-4 py-1.5 bg-white text-blue-600 rounded font-semibold text-sm hover:bg-blue-50 transition-colors",children:[o?"Finish":t.action,!o&&m.jsx($6,{className:"w-4 h-4"})]})]}),m.jsx("div",{className:"mt-4 flex items-center justify-center gap-1.5",children:Array.from({length:c}).map((C,B)=>m.jsx("div",{className:`h-1.5 rounded-full transition-all ${B<=u?"w-8 bg-white":"w-1.5 bg-white/30"}`},B))})]}),m.jsx("div",{className:`absolute left-1/2 -translate-x-1/2 ${i==="bottom"?"-top-2":"-bottom-2"}`,children:m.jsx("div",{className:`w-4 h-4 bg-blue-600 rotate-45 border-blue-400 ${i==="bottom"?"border-t-2 border-l-2":"border-b-2 border-r-2"}`})}),m.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},F3e=({onStart:t,onDismiss:e})=>m.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-6 mb-6 shadow-lg",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"bg-blue-600 rounded-full p-3 flex-shrink-0",children:m.jsx(W6,{className:"w-6 h-6 text-white"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"First time here? Start with our interactive guide!"}),m.jsx("p",{className:"text-gray-700 mb-4",children:"Learn how to create your EUDR report in 5 minutes with our step-by-step tutorial. We'll guide you through each step of the process."}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-md",children:[m.jsx(W6,{className:"w-5 h-5"}),"Start Guide"]}),m.jsx("button",{onClick:e,className:"px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"I prefer to explore on my own"})]})]}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:m.jsx(K6,{className:"w-5 h-5"})})]})}),N3e=({onClick:t})=>m.jsxs("button",{onClick:t,className:"fixed bottom-6 right-6 bg-blue-600 text-white rounded-full p-4 shadow-xl hover:bg-blue-700 transition-all hover:scale-110 z-50 group",title:"Restart tutorial",children:[m.jsx(W6,{className:"w-6 h-6"}),m.jsx("span",{className:"absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Need help? Restart the guide"})]}),P3e=()=>{const[t,e]=ve.useState(1),[r,n]=ve.useState(null),[s,o]=ve.useState(null),[c,u]=ve.useState(null),i={eudr:ve.useRef(),carbon:ve.useRef()},{files:A,handleFileChange:g}=v3e(),{userInfo:C,setUserInfo:B,handleUserInfoSubmit:S,loading:P,isUserInfoValid:j}=y3e(e),{reports:R,loading:N,showPaymentModal:U,handleReportReady:$,setShowPaymentModal:J}=_3e({files:A,geojson:s,userInfo:C,setStep:e,reportRefs:i}),{isActive:te,currentStep:ue,showTutorial:oe,startTutorial:K,nextStep:ce,prevStep:me,skipTutorial:Z}=b3e(),Y=ph[ue],Le=ue===0,_e=ue===ph.length-1,Qe=A.geojson||s;ve.useEffect(()=>{c&&((Y==null?void 0:Y.highlight)==="report-type"&&Qe||(Y==null?void 0:Y.highlight)==="user-info"&&r||(Y==null?void 0:Y.highlight)==="payment"&&j())&&u(null)},[Qe,r,j,Y,c]),ve.useEffect(()=>{if(te&&Y&&Y.targetStep!==t){const Fe=ph.findIndex(it=>it.targetStep===t&&it.highlight!=="welcome");if(Fe!==-1&&Fe!==ue)for(let it=ue;it<Fe;it++)ce()}},[t,te,Y,ce,ue]),ve.useEffect(()=>{te&&t===1&&Qe&&(Y==null?void 0:Y.targetStep)===1&&(Y==null||Y.highlight)},[s,A.geojson,te,t,Y]);const De=()=>{const Fe=ph[ue+1];if(Fe){if(Fe.highlight==="report-type"&&!Qe){u(" Please upload a GeoJSON file or create a polygon on the map to continue.");return}if(Fe.highlight==="user-info"&&!r){u(" Please select a report type to continue.");return}if(Fe.highlight==="payment"&&!j()){u(" Please fill in all required fields with valid information (phone, email) to continue.");return}}u(null),_e?Z():(ce(),Fe&&Fe.targetStep!==(Y==null?void 0:Y.targetStep)&&e(Fe.targetStep))},Be=()=>{t>1&&e(t-1)},xe=()=>{if(Qe&&(e(2),te&&(Y==null?void 0:Y.targetStep)===1)){const Fe=ph.findIndex(it=>it.highlight==="report-type");if(Fe>ue)for(let it=ue;it<Fe;it++)ce()}},ze=Fe=>!te||!Y?"":Y.highlight===Fe?"tutorial-highlight-active":"";return m.jsxs("div",{className:"p-6 max-w-3xl mx-auto space-y-6",children:[!te&&oe&&m.jsx(F3e,{onStart:K,onDismiss:Z}),(N||P)&&m.jsx("div",{className:"text-center text-blue-600",children:" Processing..."}),t===1&&m.jsxs("div",{className:"relative",children:[m.jsx(S3e,{files:A,onFileChange:g,geojson:s,setGeojson:o,onNext:xe,canContinue:Qe,highlightUpload:ze("upload"),highlightMap:ze("map"),highlightModeToggle:ze("mode-toggle"),highlightSearchBar:ze("search-bar"),highlightPointModeInfo:ze("point-mode-info"),highlightDrawControls:ze("draw-controls")}),!Qe&&m.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:m.jsx("p",{className:"text-sm text-yellow-800",children:" Please upload a GeoJSON file or create a polygon on the map to continue."})}),c&&m.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:m.jsx("p",{className:"text-sm text-red-800",children:c})}),te&&(Y==null?void 0:Y.highlight)==="welcome"&&m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue}),te&&(Y==null?void 0:Y.highlight)==="upload"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 left-0 w-full z-[10000]",style:{marginTop:"20px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})}),te&&(Y==null?void 0:Y.highlight)==="mode-toggle"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 right-0 w-80 pointer-events-none z-[10000]",style:{marginTop:"80px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})}),te&&(Y==null?void 0:Y.highlight)==="search-bar"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"80px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})}),te&&(Y==null?void 0:Y.highlight)==="point-mode-info"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 right-0 w-80 pointer-events-none z-[10000]",style:{marginTop:"220px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})}),te&&(Y==null?void 0:Y.highlight)==="draw-controls"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 left-0 pointer-events-none z-[10000]",style:{marginTop:"80px",marginLeft:"20px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})})]}),t===2&&m.jsxs("div",{className:"relative",children:[m.jsx(B3e,{onSelect:Fe=>{n(Fe),e(3),te&&(Y==null?void 0:Y.highlight)==="report-type"&&ce()},highlightReportType:ze("report-type")}),c&&m.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:m.jsx("p",{className:"text-sm text-red-800",children:c})}),te&&(Y==null?void 0:Y.highlight)==="report-type"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})})]}),t===3&&m.jsxs("div",{className:"relative",children:[m.jsx(E3e,{userInfo:C,setUserInfo:B,onSubmit:Fe=>{Fe.preventDefault(),j()&&(S(Fe),te&&(Y==null?void 0:Y.highlight)==="user-info"&&ce())},loading:P,isValid:j(),highlightUserInfo:ze("user-info")}),!j()&&m.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:m.jsx("p",{className:"text-sm text-yellow-800",children:" Please fill in all required fields with valid information (phone, email)."})}),c&&m.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:m.jsx("p",{className:"text-sm text-red-800",children:c})}),te&&(Y==null?void 0:Y.highlight)==="user-info"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})})]}),t===4&&m.jsxs("div",{className:"relative",children:[m.jsx(T3e,{selectedFeature:r,phone:C.phone,setShowPaymentModal:J,loading:N,highlightPayment:ze("payment")}),te&&(Y==null?void 0:Y.highlight)==="payment"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})})]}),t===5&&m.jsxs("div",{className:"relative",children:[m.jsx(L3e,{reports:R,reportRefs:i,highlightReports:ze("reports")}),te&&(Y==null?void 0:Y.highlight)==="reports"&&m.jsx("div",{className:"relative",children:m.jsx("div",{className:"absolute top-0 left-0 w-full pointer-events-none z-[10000]",style:{marginTop:"20px"},children:m.jsx(sp,{step:Y,onNext:De,onPrev:me,onSkip:Z,isFirst:Le,isLast:_e,totalSteps:ph.length,currentIndex:ue,position:"bottom"})})})]}),t>1&&m.jsx("div",{className:"flex justify-start",children:m.jsx("button",{onClick:Be,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:" Back"})}),!te&&!oe&&m.jsx(N3e,{onClick:K}),U.eudr&&m.jsx(R4,{isOpen:U.eudr,onClose:()=>J(Fe=>({...Fe,eudr:!1})),featureName:"reporteudrguest",phone:C.phone,agent_id:C.agent_id,onPaymentSuccess:()=>{$("reporteudrguest"),J(Fe=>({...Fe,eudr:!1}))}}),U.carbon&&m.jsx(R4,{isOpen:U.carbon,onClose:()=>J(Fe=>({...Fe,carbon:!1})),featureName:"reportcarbonguest",phone:C.phone,agent_id:C.agent_id,onPaymentSuccess:()=>{$("reportcarbonguest"),J(Fe=>({...Fe,carbon:!1}))}}),m.jsx("style",{children:`
        .tutorial-highlight-active {
          position: relative;
          z-index: 9999;
        }
        
        .tutorial-highlight-active::before {
          content: '';
          position: absolute;
          inset: -4px;
          border: 4px solid rgb(59, 130, 246);
          border-radius: 8px;
          pointer-events: none;
          animation: tutorialPulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
          z-index: 9998;
        }
        
        @keyframes tutorialPulse {
          0%, 100% {
            opacity: 1;
            box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
          }
          50% {
            opacity: 0.7;
            box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
          }
        }
      `})]})},M3e=[{icon:m.jsx(TH,{className:"text-4xl mb-4 text-yellow-500"}),title:"Weather Forecasts",description:"Plan your agricultural tasks better with accurate and up-to-date weather data.",color:"bg-yellow-50"},{icon:m.jsx(W_,{className:"text-4xl mb-4 text-green-500"}),title:"Climate-Based Calculations",description:"Automated ET, ETc, GDD, and more based on your location and crops.",color:"bg-green-50"},{icon:m.jsx(one,{className:"text-4xl mb-4 text-blue-500"}),title:"Interactive Map",description:"Explore real-time weather and crop insights directly on the map.",color:"bg-blue-50"},{icon:m.jsx(tF,{className:"text-4xl mb-4 text-purple-500"}),title:"Crop Monitoring",description:"Track planting dates, harvests, and yields with visual reports.",color:"bg-purple-50"},{icon:m.jsx(ene,{className:"text-4xl mb-4 text-red-500"}),title:"Smart Alerts",description:"Receive timely notifications on pests and extreme weather events.",color:"bg-red-50"},{icon:m.jsx(fne,{className:"text-4xl mb-4 text-pink-500"}),title:"Secure Access",description:"Separate roles for admin and farmers to keep everything secure.",color:"bg-pink-50"}],j3e=()=>m.jsx("section",{className:"bg-gradient-to-r from-teal-50 via-emerald-50 to-lime-50 py-20 px-6 font-sans",id:"overview",children:m.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[m.jsx("h2",{className:"text-5xl font-extrabold mb-4 text-emerald-700",children:"Explore Nkusu's Tools"}),m.jsx("p",{className:"text-lg text-gray-600 mb-14 max-w-2xl mx-auto",children:"Nkusu provides modern tools that empower farmers to make climate-smart decisions, improve productivity, and protect their crops."}),m.jsx("div",{className:"grid gap-10 sm:grid-cols-2 lg:grid-cols-3",children:M3e.map((t,e)=>m.jsxs("div",{className:`${t.color} p-8 rounded-3xl border border-gray-200 shadow-md hover:shadow-lg hover:scale-105 transition duration-300`,children:[t.icon,m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),m.jsx("p",{className:"text-gray-700 text-base",children:t.description})]},e))})]})}),k3e=()=>{const[t,e]=ve.useState([]),[r,n]=ve.useState(!1),[s,o]=ve.useState({}),[c,u]=ve.useState([]),[i,A]=ve.useState(""),[g,C]=ve.useState(!0),[B,S]=ve.useState(!0),P=async()=>{var oe,K;try{console.log("[DEBUG] Tentative de rcupration des fermes...");const ce=await Mr.get("/api/farm/");return console.log("[DEBUG] Rponse API fermes:",ce),console.log("[DEBUG] Donnes fermes:",ce.data),ce.data}catch(ce){return console.error("[ERREUR] Lors de la rcupration des fermes:",ce),console.error("[ERREUR] Status:",(oe=ce.response)==null?void 0:oe.status),console.error("[ERREUR] Data:",(K=ce.response)==null?void 0:K.data),console.error("[ERREUR] Message:",ce.message),[]}},j=async(oe,K)=>{try{const ce=`https://api.open-meteo.com/v1/forecast?latitude=${oe}&longitude=${K}&hourly=temperature_2m,relative_humidity_2m,precipitation,wind_speed_10m&forecast_days=10`;return await(await fetch(ce)).json()}catch(ce){return console.error("Erreur rcupration mto:",ce),null}},R=oe=>{const K=[],ce=oe.hourly||{},me=ce.time||[],Z=ce.temperature_2m||[],Y=ce.relative_humidity_2m||[],Le=ce.precipitation||[],_e=ce.wind_speed_10m||[],Qe=15,De=30,Be=10,xe=20,ze=30;for(let Fe=0;Fe<me.length;Fe++){const it=[];Le[Fe]>Be&&it.push("Heavy Rain"),Z[Fe]>De&&it.push("Extreme Heat"),Z[Fe]<Qe&&it.push("Extreme Cold"),_e[Fe]>xe&&it.push("Strong Wind"),Y[Fe]<ze&&it.push("Dryness Alert"),it.length>0&&K.push({time:new Date(me[Fe]).toLocaleString(),alerts:it,temperature:Z[Fe],humidity:Y[Fe],precipitation:Le[Fe],wind_speed:_e[Fe]})}return K},N=oe=>{const K=[],ce=oe.hourly||{},me=ce.time||[],Z=ce.temperature_2m||[],Y=10,Le={"Fall Armyworm":140,Aphids:100,"Stem Borers":180,"Corn Earworm":220,"Black Cutworm":280,"Peach Twig Borer":350,"Coffee Berry Borer":120,"Coffee Leaf Miner":150};let _e=0;const Qe=new Set;for(let De=0;De<me.length;De++){const Be=Z[De];if(Be==null)continue;const xe=Math.max(0,Be-Y);_e+=xe;const ze=[];for(const[Fe,it]of Object.entries(Le))_e>=it&&!Qe.has(Fe)&&(ze.push(Fe),Qe.add(Fe));ze.length>0&&K.push({time:new Date(me[De]).toLocaleString(),alerts:ze,gdd:Math.round(_e*10)/10,temperature:Be})}return K},U=async()=>{console.log("[DEBUG] ===== DBUT FETCH ALERTS ====="),n(!0);try{console.log("[DEBUG] 1. Rcupration des fermes...");const oe=await P();console.log("[DEBUG] 2. Rponse fermes reue:",oe);let K=[];if(Array.isArray(oe)?K=oe:oe&&oe.farms?K=oe.farms:oe&&oe.data?K=oe.data:oe&&Array.isArray(oe.items)&&(K=oe.items),console.log("[DEBUG] 3. Fermes extraites:",K),console.log("[DEBUG] 4. Nombre de fermes:",K.length),K.length===0){console.log("[WARNING] Aucune ferme trouve!"),e([]);return}const ce=[];for(let me=0;me<K.length;me++){const Z=K[me];console.log(`[DEBUG] 5.${me+1}. Traitement ferme:`,Z);try{if(!Z.geolocation){console.log(`[WARNING] Pas de golocalisation pour ${Z.name||"ferme inconnue"}`);continue}console.log(`[DEBUG] Golocalisation: ${Z.geolocation}`);const[Y,Le]=Z.geolocation.split(",").map(Be=>parseFloat(Be.trim()));if(isNaN(Y)||isNaN(Le)){console.log(`[ERROR] Coordonnes invalides: lat=${Y}, lon=${Le}`);continue}console.log(`[DEBUG] Coordonnes valides: lat=${Y}, lon=${Le}`),console.log(`[DEBUG] Rcupration mto pour ${Z.name}...`);const _e=await j(Y,Le);if(!_e){console.log(`[ERROR] Pas de donnes mto pour ${Z.name}`);continue}console.log(`[DEBUG] Donnes mto reues pour ${Z.name}:`,_e.hourly?"OK":"VIDE"),console.log(`[DEBUG] Dtection alertes mto pour ${Z.name}...`);const Qe=R(_e);console.log(`[DEBUG] Alertes mto trouves: ${Qe.length}`,Qe),console.log(`[DEBUG] Dtection alertes parasitaires pour ${Z.name}...`);const De=N(_e);console.log(`[DEBUG] Alertes parasitaires trouves: ${De.length}`,De),Qe.length>0||De.length>0?(console.log(`[SUCCESS] Ferme ${Z.name} a des alertes!`),ce.push({farm:{id:Z.id,name:Z.name,geolocation:Z.geolocation,phonenumber:Z.phonenumber1||Z.phonenumber,phonenumber2:Z.phonenumber2},weather_alerts:Qe,pest_alerts:De})):console.log(`[INFO] Aucune alerte pour ${Z.name}`)}catch(Y){console.error(`[ERROR] Erreur pour la ferme ${Z.name}:`,Y)}}console.log(`[DEBUG] 6. Total rsultats: ${ce.length}`,ce),e(ce),console.log("[DEBUG] ===== FIN FETCH ALERTS =====")}catch(oe){console.error("[ERROR] Erreur gnrale lors de la rcupration des alertes:",oe),alert("Erreur lors de la rcupration des alertes: "+oe.message)}finally{n(!1)}},$=async(oe,K)=>{try{const ce=K.substring(0,160);return(await Mr.post("/api/notifications/sms",{phone:oe,message:ce})).status===200}catch(ce){return console.error("Erreur envoi SMS:",ce),!1}},J=async()=>{if(c.length===0){alert("Please select at least one alert to send");return}o({sending:!0});const oe="256783130358";let K=0,ce=0;for(const me of c){const Z=t[me];if(!Z)continue;const Y=Be=>Be.replace(/[\u{1F600}-\u{1F64F}]/gu,"").replace(/[\u{1F300}-\u{1F5FF}]/gu,"").replace(/[\u{1F680}-\u{1F6FF}]/gu,"").replace(/[\u{1F700}-\u{1F77F}]/gu,"").replace(/[\u{1F780}-\u{1F7FF}]/gu,"").replace(/[\u{1F800}-\u{1F8FF}]/gu,"").replace(/[\u{1F900}-\u{1F9FF}]/gu,"").replace(/[\u{1FA00}-\u{1FA6F}]/gu,"").replace(/[\u{1FA70}-\u{1FAFF}]/gu,"").replace(/[\u{2600}-\u{26FF}]/gu,"").replace(/[\u{2700}-\u{27BF}]/gu,"").replace(/[^\x00-\x7F]/g,"").replace(/\s+/g," ").trim();let Le="",_e="";if(Z.weather_alerts&&Z.weather_alerts.length>0){const Be=Z.weather_alerts.flatMap(ze=>ze.alerts),xe=Array.from(new Set(Be));Le=Y(`WEATHER ALERT for ${Z.farm.name}: ${xe.join(", ")}.`)}if(Z.pest_alerts&&Z.pest_alerts.length>0){const Be=Z.pest_alerts.flatMap(ze=>ze.alerts),xe=Array.from(new Set(Be));_e=Y(`PEST ALERT for ${Z.farm.name}: ${xe.join(", ")}.`)}let Qe=[];Le&&Qe.push(Le),_e&&Qe.push(_e);const De=[];B&&De.push(oe),g&&Z.farm.phonenumber&&De.push(Z.farm.phonenumber);for(const Be of De)for(const xe of Qe)ce++,await $(Be,xe)&&K++,await new Promise(Fe=>setTimeout(Fe,1e3))}o({sending:!1,completed:!0,success:K,total:ce}),setTimeout(()=>{o({})},5e3)},te=oe=>{u(K=>K.includes(oe)?K.filter(ce=>ce!==oe):[...K,oe])},ue=()=>{c.length===t.length?u([]):u(t.map((oe,K)=>K))};return ve.useEffect(()=>{U();const oe=setInterval(U,5*60*1e3);return()=>clearInterval(oe)},[]),m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4 sm:mb-0",children:"Agricultural Alert System"}),m.jsx("button",{onClick:U,disabled:r,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white px-6 py-2 rounded-lg font-medium transition duration-200 flex items-center",children:r?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):m.jsx(m.Fragment,{children:"Refresh"})})]})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Send Configuration"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"font-medium text-gray-700",children:"Recipients"}),m.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:B,onChange:oe=>S(oe.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),m.jsx("span",{className:"text-gray-700",children:"Send to administrator"})]}),m.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:g,onChange:oe=>C(oe.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),m.jsx("span",{className:"text-gray-700",children:"Send to farmers"})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"font-medium text-gray-700",children:"Custom Message (optional)"}),m.jsx("textarea",{value:i,onChange:oe=>A(oe.target.value),placeholder:"Add a custom message that will be sent with the alerts...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("button",{onClick:ue,disabled:t.length===0,className:"bg-gray-500 hover:bg-gray-600 disabled:bg-gray-300 text-white px-4 py-2 rounded-lg font-medium transition duration-200",children:c.length===t.length?"Deselect All":"Select All"}),m.jsxs("span",{className:"text-gray-600 font-medium",children:[c.length," / ",t.length," alerts selected"]})]}),m.jsx("button",{onClick:J,disabled:c.length===0||s.sending||!B&&!g,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white px-6 py-2 rounded-lg font-medium transition duration-200 flex items-center",children:s.sending?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):m.jsxs(m.Fragment,{children:["Send (",c.length,")"]})})]})}),s.completed&&m.jsx("div",{className:`rounded-xl shadow-lg p-4 mb-6 ${s.success===s.total?"bg-green-100 border border-green-300":"bg-yellow-100 border border-yellow-300"}`,children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"text-2xl mr-3",children:s.success===s.total?"":""}),m.jsxs("span",{className:`font-medium ${s.success===s.total?"text-green-800":"text-yellow-800"}`,children:["Send completed: ",s.success,"/",s.total," messages sent successfully"]})]})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Available Alerts"}),r?m.jsx("div",{className:"flex justify-center items-center py-12",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m.jsx("span",{className:"text-lg text-gray-600",children:"Loading alerts..."})]})}):t.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("h4",{className:"text-xl font-medium text-gray-600 mb-2",children:"No active alerts currently"}),m.jsx("p",{className:"text-gray-500",children:"All your farms are safe!"})]}):m.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map((oe,K)=>m.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition duration-200 ${c.includes(K)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>te(K),children:[m.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[m.jsx("input",{type:"checkbox",checked:c.includes(K),onChange:()=>te(K),onClick:ce=>ce.stopPropagation(),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[" ",oe.farm.name]}),m.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[" ",oe.farm.geolocation]}),oe.farm.phonenumber&&m.jsxs("p",{className:"text-sm text-gray-500 flex items-center mt-1",children:[" ",oe.farm.phonenumber]})]})]}),m.jsxs("div",{className:"space-y-4",children:[oe.weather_alerts&&oe.weather_alerts.length>0&&m.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[m.jsx("h5",{className:"font-medium text-gray-800 mb-2 flex items-center",children:"Weather Alerts"}),oe.weather_alerts.map((ce,me)=>m.jsxs("div",{className:"mb-3 last:mb-0",children:[m.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[" ",ce.time]}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:ce.alerts.map((Z,Y)=>m.jsx("span",{className:"inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full",children:Z},Y))}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[m.jsxs("span",{children:[" ",ce.temperature,"C"]}),m.jsxs("span",{children:[" ",ce.humidity,"%"]}),m.jsxs("span",{children:[" ",ce.precipitation,"mm"]}),m.jsxs("span",{children:[" ",ce.wind_speed,"km/h"]})]})]},me))]}),oe.pest_alerts&&oe.pest_alerts.length>0&&m.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[m.jsx("h5",{className:"font-medium text-gray-800 mb-2 flex items-center",children:"Pest Alerts"}),oe.pest_alerts.map((ce,me)=>m.jsxs("div",{className:"mb-3 last:mb-0",children:[m.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[" ",ce.time]}),m.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-2",children:[m.jsxs("span",{children:[" GDD: ",ce.gdd]}),m.jsxs("span",{children:[" Temp: ",ce.temperature,"C"]})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:ce.alerts.map((Z,Y)=>m.jsxs("span",{className:"inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full",children:[" ",Z]},Y))})]},me))]})]})]},`${oe.farm.id}-${K}`))})]})]})})},sT=[],D3e=()=>{const t=ve.useRef(null),e=ve.useRef(null),[r,n]=ve.useState("heatmap"),[s,o]=ve.useState({total:0,avgCover:0});ve.useEffect(()=>{const u=sT.length,i=Math.round(sT.reduce((A,g)=>A+g.wri_tropical_tree_cover_extent__decile,0)/u);o({total:u,avgCover:i})},[]);const c=u=>({type:"FeatureCollection",features:u.map(i=>({type:"Feature",properties:{value:i.wri_tropical_tree_cover_extent__decile,driver:i.tsc_tree_cover_loss_drivers__driver||"N/A"},geometry:{type:"Point",coordinates:[i.longitude,i.latitude]}}))});return ve.useEffect(()=>{if(e.current)return;is.accessToken="pk.eyJ1IjoidHNpbWlqYWx5IiwiYSI6ImNsejdjNXpqdDA1ZzMybHM1YnU4aWpyaDcifQ.CSQsCZwMF2CYgE-idCz08Q",e.current=new is.Map({container:t.current,style:"mapbox://styles/mapbox/satellite-streets-v12",center:[32.92,.198],zoom:14});const u=c(sT);e.current.on("load",()=>{e.current.addSource("tree-cover-data",{type:"geojson",data:u}),e.current.addLayer({id:"tree-heatmap",type:"heatmap",source:"tree-cover-data",paint:{"heatmap-weight":["interpolate",["linear"],["get","value"],0,0,100,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,20,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(247,252,245,0)",.2,"#c7e9c0",.4,"#74c476",.6,"#238b45",.8,"#006d2c",1,"#00441b"],"heatmap-radius":["interpolate",["linear"],["zoom"],10,5,20,30],"heatmap-opacity":.7}}),e.current.addLayer({id:"tree-points",type:"circle",source:"tree-cover-data",minzoom:13,layout:{visibility:"none"},paint:{"circle-radius":["interpolate",["linear"],["zoom"],13,3,20,10],"circle-color":["interpolate",["linear"],["get","value"],0,"#f7fcf5",20,"#c7e9c0",40,"#74c476",60,"#238b45",80,"#006d2c",100,"#00441b"],"circle-opacity":.8,"circle-stroke-width":1,"circle-stroke-color":"#ffffff"}});const i=new is.Popup({closeButton:!1,closeOnClick:!1});e.current.on("mouseenter","tree-points",A=>{e.current.getCanvas().style.cursor="pointer";const g=A.features[0].geometry.coordinates.slice(),{value:C,driver:B}=A.features[0].properties;i.setLngLat(g).setHTML(`
            <div style="padding: 5px;">
              <strong>Couverture:</strong> ${C}%<br>
              <strong>Driver:</strong> ${B}
            </div>
          `).addTo(e.current)}),e.current.on("mouseleave","tree-points",()=>{e.current.getCanvas().style.cursor="",i.remove()}),e.current.addControl(new is.NavigationControl,"top-right")})},[]),ve.useEffect(()=>{if(!(!e.current||!e.current.getLayer("tree-heatmap")))switch(r){case"heatmap":e.current.setLayoutProperty("tree-heatmap","visibility","visible"),e.current.setLayoutProperty("tree-points","visibility","none");break;case"points":e.current.setLayoutProperty("tree-heatmap","visibility","none"),e.current.setLayoutProperty("tree-points","visibility","visible");break;case"both":e.current.setLayoutProperty("tree-heatmap","visibility","visible"),e.current.setLayoutProperty("tree-points","visibility","visible");break}},[r]),m.jsx(m.Fragment,{})},O3e=()=>{var De,Be;const t=Ju(),e=B1(),r=((De=t.state)==null?void 0:De.userId)||null,n=((Be=t.state)==null?void 0:Be.certificateType)||"all",[s,o]=ve.useState(null),[c,u]=ve.useState([]),[i,A]=ve.useState(!0),[g,C]=ve.useState(null),[B,S]=ve.useState(!1),[P,j]=ve.useState(null);ve.useEffect(()=>{(async()=>{try{const ze=await Mr.get("/api/farm/area/by-compliance");ze.data.status==="success"&&u(ze.data.data)}catch(ze){console.error("Error fetching area stats:",ze)}})()},[]),ve.useEffect(()=>{(async()=>{var ze,Fe;try{A(!0);const it=r?`/api/farm/stats/by-user/${r}`:"/api/farm/stats/by-user",ie=await Mr.get(it);if(ie.data.status==="success"){const le=Array.isArray(ie.data.data)?ie.data.data[0]:ie.data.data;console.log("Stat data ",le),o(le)}else C(ie.data.message||"Failed to load statistics")}catch(it){C(((Fe=(ze=it.response)==null?void 0:ze.data)==null?void 0:Fe.message)||"Failed to load statistics")}finally{A(!1)}})()},[r]);const R=()=>{if(!c.length)return{compliant:0,likely:0,not:0};const xe=c.reduce((Fe,it)=>Fe+(it.total_area||0),0);if(xe===0)return{compliant:0,likely:0,not:0};const ze=Fe=>{var it;return((it=c.find(ie=>ie.compliance_status===Fe))==null?void 0:it.total_area)||0};return{compliant:(ze("100% Compliant")/xe*100).toFixed(2),likely:(ze("Likely Compliant")/xe*100).toFixed(2),not:(ze("Not Compliant")/xe*100).toFixed(2)}},N=()=>{if(!c.length)return 0;const xe=Fe=>{var it;return((it=c.find(ie=>ie.compliance_status===Fe))==null?void 0:it.total_area)||0};return{compliant:xe("100% Compliant"),likely_compliant:xe("Likely Compliant"),not_compliant:xe("Not Compliant")}[n]||c.reduce((Fe,it)=>Fe+(it.total_area||0),0)},U=xe=>fetch(xe).then(ze=>ze.blob()).then(ze=>new Promise((Fe,it)=>{const ie=new FileReader;ie.onloadend=()=>Fe(ie.result),ie.onerror=it,ie.readAsDataURL(ze)})),$=async(xe,ze)=>{try{const Fe=await Mr.post("/api/certificate/generate",{userId:xe.user_id,certificateType:ze,stats:{total_farms:xe.total_farms,compliance_status:xe.compliance_status,compliance_percentages:xe.compliance_percentages}});return Fe.data.status==="success"?(j(Fe.data.data.certificate_id),Fe.data.data.id):null}catch(Fe){return console.error("Error saving certificate:",Fe),null}},J=async xe=>{try{await Mr.post(`/api/certificate/download/${xe}`)}catch(ze){console.error("Error tracking download:",ze)}},te=async()=>{try{S(!0);const xe=await $(s,n),ze=document.getElementById("certificate-content"),Fe=ze.querySelectorAll("img"),it=[];await Promise.all(Array.from(Fe).map(async(le,fe)=>{try{if(it[fe]=le.src,le.src.startsWith("http")){const be=await U(le.src);le.src=be,await new Promise(He=>{le.complete?He():(le.onload=He,le.onerror=He)})}}catch(be){console.error("Error converting image:",be)}}));const ie={margin:0,filename:`${s.username}_${n}_certificate.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!1,logging:!1,allowTaint:!0,onclone:le=>{le.querySelectorAll("header img").forEach(fe=>{fe.alt==="Parrot Logo"?Object.assign(fe.style,{width:"80px",height:"96px",objectFit:"contain",display:"block"}):Object.assign(fe.style,{width:"96px",height:"96px",objectFit:"contain",display:"block"})})}},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};await vK().set(ie).from(ze).save(),Fe.forEach((le,fe)=>{it[fe]&&(le.src=it[fe])}),xe&&await J(xe),alert("Certificate downloaded and saved successfully!")}catch(xe){console.error("Error generating PDF:",xe),alert("Error generating PDF. Please try again.")}finally{S(!1)}};if(i)return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600 text-lg",children:"Loading statistics..."})]})});if(g)return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md text-center text-red-600",children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error Loading Statistics"}),m.jsx("p",{className:"text-gray-600 mb-4",children:g}),m.jsx("button",{onClick:()=>e(-1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Go Back"})]})});if(!s)return null;const ue=R(),oe=N(),K={compliant:{title:"EUDR CERTIFICATE OF FULL COMPLIANCE",farmsCount:s.compliance_status.compliant_100,percentage:ue.compliant,color:"text-green-700"},likely_compliant:{title:"EUDR CERTIFICATE OF LIKELY COMPLIANCE",farmsCount:s.compliance_status.likely_compliant,percentage:ue.likely,color:"text-yellow-700"},not_compliant:{title:"EUDR CERTIFICATE OF NON-COMPLIANCE",farmsCount:s.compliance_status.not_compliant,percentage:ue.not,color:"text-red-700"},all:{title:"EUDR COMPLIANCE CERTIFICATE",farmsCount:s.total_farms,percentage:(parseFloat(ue.compliant)+parseFloat(ue.likely)).toFixed(2),color:"text-blue-700"}},{title:ce,farmsCount:me,percentage:Z,color:Y}=K[n]||K.all,Le=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),_e={width:"80px",height:"96px",objectFit:"contain",minWidth:"80px",minHeight:"96px",maxWidth:"80px",maxHeight:"96px",display:"block"},Qe=({label:xe,status:ze,colorClass:Fe})=>{var fe;const it=((fe=c.find(be=>be.compliance_status===ze))==null?void 0:fe.total_area)||0,ie=s.compliance_status[ze.toLowerCase().replace(/\s+/g,"_").replace("%","")]||0,le=ue[ze==="100% Compliant"?"compliant":ze==="Likely Compliant"?"likely":"not"];return m.jsxs("li",{className:"flex justify-between",children:[m.jsxs("span",{children:[xe,":"]}),m.jsxs("strong",{className:Fe,children:[ie," farms (",le,"%) - ",it.toFixed(2)," ha"]})]})};return m.jsxs("div",{className:"min-h-screen bg-gray-100 py-8 print:bg-white",children:[m.jsx("style",{children:`
                @page { size: A4; margin: 0; }
                @media print {
                    body * { visibility: hidden !important; }
                    #certificate-content, #certificate-content * { visibility: visible !important; }
                    #certificate-content { position: absolute; left: 0; top: 0; width: 100%; }
                    html, body { margin: 0 !important; padding: 0 !important; background: white !important; }
                }
                #certificate-content header img {
                    width: 96px !important; height: 96px !important; object-fit: contain !important;
                    min-width: 96px !important; min-height: 96px !important;
                    max-width: 96px !important; max-height: 96px !important; display: block !important;
                }
                #certificate-content header img[alt="Parrot Logo"] {
                    width: 80px !important;
                    min-width: 80px !important;
                    max-width: 80px !important;
                }
            `}),m.jsxs("div",{className:"no-print max-w-4xl mx-auto mb-4 flex flex-wrap gap-3 justify-center",children:[m.jsx("button",{onClick:()=>e(-1),className:"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition",children:"Back"}),m.jsx("button",{onClick:()=>window.print(),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition",children:"Print"}),m.jsx("button",{onClick:te,disabled:B,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:B?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),m.jsx("span",{children:"Generating PDF..."})]}):"Download PDF"})]}),P&&m.jsx("div",{className:"no-print max-w-4xl mx-auto mb-4 text-center",children:m.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:[m.jsx("strong",{children:"Certificate ID:"})," ",P]})}),m.jsx("div",{id:"certificate-content",className:"page-wrap max-w-[210mm] min-h-[297mm] mx-auto bg-white shadow-2xl p-[18mm]",children:m.jsx("div",{className:"border-[12px] border-[#3b2418] p-2 h-full",children:m.jsxs("div",{className:"border-[6px] border-[#d0c7b8] h-full p-7 bg-gradient-to-b from-white to-[#fcfbf9]",children:[m.jsxs("header",{className:"flex items-center justify-between gap-5 mb-5",children:[m.jsx("div",{className:"flex-shrink-0",style:{width:"96px",height:"96px"},children:m.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-24 h-24 object-contain",style:_e})}),m.jsx("div",{className:"flex-1 text-center"}),m.jsx("div",{className:"flex-shrink-0",style:{width:"80px",height:"96px"},children:m.jsx("img",{src:"/parrotlogo.svg",alt:"Parrot Logo",className:"w-20 h-24 object-contain",style:_e})})]}),m.jsx("div",{className:"text-center my-4",children:m.jsx("h1",{className:`text-5xl font-bold tracking-[3px] ${Y}`,children:ce})}),m.jsxs("div",{className:"px-4 py-2 text-gray-700 text-sm",children:[m.jsx("p",{className:"text-center mb-3",children:"This certifies that"}),m.jsx("div",{className:"text-center text-2xl font-bold my-2",children:s.company_name.toUpperCase()}),m.jsxs("p",{className:"max-w-[900px] mx-auto text-justify leading-relaxed mb-4",children:["has been evaluated according to the European Union Deforestation Regulation (Based on EU Regulation (2023/1115) on deforestation-free products.) and shows a compliance rate across ",m.jsx("strong",{children:me})," farms covering a total area of"," ",m.jsxs("strong",{children:[oe.toFixed(2)," hectares"]}),". This certificate confirms the environmental compliance status indicated below."]}),m.jsxs("div",{className:"bg-[#f3efc8] border border-[#e4dda6] p-4 my-4 max-w-[900px] mx-auto shadow-inner",children:[m.jsx("div",{className:"font-bold mb-2",children:"Compliance Summary (based on total area)"}),n==="all"?m.jsxs("ul",{className:"space-y-1 text-sm",children:[m.jsx(Qe,{label:"100% Compliant",status:"100% Compliant",colorClass:"text-green-700"}),m.jsx(Qe,{label:"Likely Compliant",status:"Likely Compliant",colorClass:"text-yellow-700"}),m.jsx(Qe,{label:"Not Compliant",status:"Not Compliant",colorClass:"text-red-700"}),m.jsxs("li",{className:"flex justify-between border-t border-gray-300 pt-2 mt-2",children:[m.jsx("span",{children:"Total Area:"}),m.jsxs("strong",{className:"text-blue-700",children:[c.reduce((xe,ze)=>xe+(ze.total_area||0),0).toFixed(2)," ha"]})]})]}):m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"text-lg font-semibold mt-2",children:[me," farms (",Z,"%)"]}),m.jsxs("div",{className:"text-md font-medium text-gray-700 mt-1",children:["Total Area: ",oe.toFixed(2)," hectares"]})]})]}),m.jsxs("div",{className:"flex justify-between items-end mt-6 gap-3",children:[m.jsxs("div",{children:[m.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=UserID:${s.user_id}|IdStart:${s.id_start}|Type:${n}|Area:${oe.toFixed(2)}ha`,alt:"QR code",className:"qr-code w-28 h-28 object-cover border border-gray-300 bg-white"}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-center",children:["Certificate ID: ",s.user_id,"-",new Date().getFullYear()]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"font-bold",children:"Operator EORI : HRUG000004679"}),m.jsx("div",{className:"text-sm text-gray-600",children:"Environmental Compliance Officer"})]})]}),m.jsxs("div",{className:"flex justify-between mt-5 text-xs text-gray-600",children:[m.jsxs("div",{children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Date Issued:"})," ",Le]}),m.jsxs("div",{children:[m.jsx("strong",{children:"User ID:"})," ",s.id_start]}),m.jsxs("div",{children:[m.jsx("strong",{children:"Email:"})," nkusu@agriyields.com"]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Total Farms:"})," ",s.total_farms]}),m.jsxs("div",{children:[m.jsx("strong",{children:"User Type:"})," ",s.user_type]})]})]})]}),m.jsx("footer",{className:"text-center text-gray-500 text-xs mt-6 border-t border-gray-200 pt-2",children:"This certificate is generated automatically by the EUDR Compliance System and reflects the current status of the user's farm assessments."})]})})})]})};function R3e(){const t=[{path:"/graph",component:m.jsx(Uce,{}),adminOnly:!1},{path:"/graphpest",component:m.jsx(XSe,{}),adminOnly:!1},{path:"/card",component:m.jsx(Fie,{}),adminOnly:!1},{path:"/mapbox",component:m.jsx(dde,{}),adminOnly:!1},{path:"/tabcrop",component:m.jsx(hye,{}),adminOnly:!1},{path:"/forestpage",component:m.jsx(pye,{}),adminOnly:!1},{path:"/createfarm",component:m.jsx(vye,{}),adminOnly:!1},{path:"/farmdata",component:m.jsx(xye,{}),adminOnly:!1},{path:"/cropedit/:id",component:m.jsx(I1e,{}),adminOnly:!1},{path:"/cardex",component:m.jsx(L1e,{}),adminOnly:!1},{path:"/district",component:m.jsx(N1e,{}),adminOnly:!1},{path:"/cropmanage",component:m.jsx(_ye,{}),adminOnly:!1},{path:"/districts/:id/view",component:m.jsx(P1e,{}),adminOnly:!1},{path:"/districts",component:m.jsx(H$,{}),adminOnly:!1},{path:"/districts/:id/edit",component:m.jsx(Q$,{}),adminOnly:!1},{path:"/mapview",component:m.jsx(fde,{}),adminOnly:!1},{path:"/mapviewall",component:m.jsx(pde,{}),adminOnly:!1},{path:"/forestpoint",component:m.jsx(j1e,{}),adminOnly:!1},{path:"/foresttree",component:m.jsx(D1e,{}),adminOnly:!1},{path:"/qr",component:m.jsx(O1e,{}),adminOnly:!1},{path:"/qrproduce",component:m.jsx(sve,{}),adminOnly:!1},{path:"/qrexport",component:m.jsx(hve,{}),adminOnly:!1},{path:"/reportcarbon",component:m.jsx(Cz,{}),adminOnly:!1},{path:"/weathermap",component:m.jsx(fCe,{}),adminOnly:!1},{path:"/weathermapfarm",component:m.jsx(pCe,{}),adminOnly:!1},{path:"/weatherhistory",component:m.jsx(ACe,{}),adminOnly:!1},{path:"/weatherdas",component:m.jsx(mCe,{}),adminOnly:!1},{path:"/qrfertilizer",component:m.jsx(pve,{}),adminOnly:!1},{path:"/reportfarmer",component:m.jsx(W5e,{}),adminOnly:!1},{path:"/reportcarbon",component:m.jsx(Cz,{}),adminOnly:!1},{path:"/reportcarbonforest",component:m.jsx(yCe,{}),adminOnly:!1},{path:"/reportforest",component:m.jsx(q4e,{}),adminOnly:!1},{path:"/createUsers",component:m.jsx($4e,{}),adminOnly:!1},{path:"/graphcgd",component:m.jsx(W4e,{}),adminOnly:!1},{path:"/onemonth",component:m.jsx(xCe,{}),adminOnly:!1},{path:"/plantingdate",component:m.jsx(WSe,{}),adminOnly:!1},{path:"/threemonth",component:m.jsx(KSe,{}),adminOnly:!1},{path:"/farmergroup",component:m.jsx(K4e,{}),adminOnly:!1},{path:"/farmmanager",component:m.jsx(Z4e,{}),adminOnly:!1},{path:"/farmdatamanager",component:m.jsx(J4e,{}),adminOnly:!1},{path:"/usermanager",component:m.jsx(eCe,{}),adminOnly:!1},{path:"/weatherandsolar",component:m.jsx(tCe,{}),adminOnly:!1},{path:"/cropmanager",component:m.jsx(rCe,{}),adminOnly:!1},{path:"/irrigationmanager",component:m.jsx(nCe,{}),adminOnly:!1},{path:"/cropcoefficientmanager",component:m.jsx(iCe,{}),adminOnly:!1},{path:"/grademanager",component:m.jsx(sCe,{}),adminOnly:!1},{path:"/categorymanager",component:m.jsx(dCe,{}),adminOnly:!1},{path:"/storeProductManager",component:m.jsx(vCe,{}),adminOnly:!1},{path:"/userDash",component:m.jsx(JSe,{}),adminOnly:!1},{path:"/EUDRSubmission",component:m.jsx(h3e,{}),adminOnly:!1},{path:"/featuresManager",component:m.jsx(m3e,{}),adminOnly:!0},{path:"/qrconservation",component:m.jsx(lve,{}),adminOnly:!1},{path:"/alertmessage",component:m.jsx(k3e,{}),adminOnly:!1},{path:"/stats-certificate",component:m.jsx(O3e,{}),adminOnly:!1}];return m.jsx(Hre,{children:m.jsxs(kre,{children:[m.jsx(sd,{path:"/",element:m.jsx(nye,{})}),m.jsx(sd,{path:"/landipage",element:m.jsx(Yme,{})}),m.jsx(sd,{path:"/login",element:m.jsx(iye,{})}),m.jsx(sd,{path:"/contactus",element:m.jsx(uCe,{})}),m.jsx(sd,{path:"/signup",element:m.jsx(hCe,{})}),m.jsx(sd,{path:"/barnav",element:m.jsx(gCe,{})}),m.jsx(sd,{path:"/payment-required",element:m.jsx(A3e,{})}),m.jsx(sd,{path:"/EUDRSubmissionForGuest",element:m.jsx(P3e,{})}),m.jsx(sd,{path:"/sectionfutur",element:m.jsx(j3e,{})}),m.jsx(sd,{path:"/test",element:m.jsx(D3e,{})}),m.jsx(sd,{path:"/home",element:m.jsx(bz,{children:m.jsx(aye,{})})}),t.map(({path:e,component:r,adminOnly:n,feature:s})=>m.jsx(sd,{path:e,element:m.jsx(bz,{adminOnly:n,children:s?m.jsx(p3e,{feature:s,children:m.jsx(S7,{children:r})}):m.jsx(S7,{children:r})})},e))]})})}aT.createRoot(document.getElementById("root")).render(m.jsx(Qi.StrictMode,{children:m.jsx(R3e,{})}));export{Ho as c,Sp as g};
